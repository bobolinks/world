var fze=Object.defineProperty;var mze=(ks,xr,ls)=>xr in ks?fze(ks,xr,{enumerable:!0,configurable:!0,writable:!0,value:ls}):ks[xr]=ls;var gze=(ks,xr)=>()=>(xr||ks((xr={exports:{}}).exports,xr),xr.exports);var Qe=(ks,xr,ls)=>(mze(ks,typeof xr!="symbol"?xr+"":xr,ls),ls);var vze=gze((ss,as)=>{(async()=>{var ch;(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const n of o.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();function ks(r,e){const t=Object.create(null),i=r.split(",");for(let o=0;o<i.length;o++)t[i[o]]=!0;return e?o=>!!t[o.toLowerCase()]:o=>!!t[o]}const xr={},ls=[],_r=()=>{},S$=()=>!1,M$=/^on[^a-z]/,H0=r=>M$.test(r),Aw=r=>r.startsWith("onUpdate:"),Si=Object.assign,Rw=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},T$=Object.prototype.hasOwnProperty,Yt=(r,e)=>T$.call(r,e),it=Array.isArray,hh=r=>Wf(r)==="[object Map]",j0=r=>Wf(r)==="[object Set]",ou=r=>Wf(r)==="[object Date]",St=r=>typeof r=="function",Tt=r=>typeof r=="string",jf=r=>typeof r=="symbol",zt=r=>r!==null&&typeof r=="object",$f=r=>zt(r)&&St(r.then)&&St(r.catch),qO=Object.prototype.toString,Wf=r=>qO.call(r),$0=r=>Wf(r).slice(8,-1),XO=r=>Wf(r)==="[object Object]",Lw=r=>Tt(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,W0=ks(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),q0=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},E$=/-(\w)/g,cs=q0(r=>r.replace(E$,(e,t)=>t?t.toUpperCase():"")),C$=/\B([A-Z])/g,zl=q0(r=>r.replace(C$,"-$1").toLowerCase()),qf=q0(r=>r.charAt(0).toUpperCase()+r.slice(1)),X0=q0(r=>r?`on${qf(r)}`:""),Xf=(r,e)=>!Object.is(r,e),K0=(r,e)=>{for(let t=0;t<r.length;t++)r[t](e)},Y0=(r,e,t)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value:t})},Ow=r=>{const e=parseFloat(r);return isNaN(e)?r:e},N$=r=>{const e=Tt(r)?Number(r):NaN;return isNaN(e)?r:e};let KO;const kw=()=>KO||(KO=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ct(r){if(it(r)){const e={};for(let t=0;t<r.length;t++){const i=r[t],o=Tt(i)?O$(i):ct(i);if(o)for(const n in o)e[n]=o[n]}return e}else if(Tt(r)||zt(r))return r}const A$=/;(?![^(]*\))/g,R$=/:([^]+)/,L$=/\/\*[^]*?\*\//g;function O$(r){const e={};return r.replace(L$,"").split(A$).forEach(t=>{if(t){const i=t.split(R$);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function k(r){let e="";if(Tt(r))e=r;else if(it(r))for(let t=0;t<r.length;t++){const i=k(r[t]);i&&(e+=i+" ")}else if(zt(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}function Is(r){if(!r)return null;let{class:e,style:t}=r;return e&&!Tt(e)&&(r.class=k(e)),t&&(r.style=ct(t)),r}const k$="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",I$=ks(k$);function YO(r){return!!r||r===""}function P$(r,e){if(r.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<r.length;i++)t=ph(r[i],e[i]);return t}function ph(r,e){if(r===e)return!0;let t=ou(r),i=ou(e);if(t||i)return t&&i?r.getTime()===e.getTime():!1;if(t=jf(r),i=jf(e),t||i)return r===e;if(t=it(r),i=it(e),t||i)return t&&i?P$(r,e):!1;if(t=zt(r),i=zt(e),t||i){if(!t||!i)return!1;const o=Object.keys(r).length,n=Object.keys(e).length;if(o!==n)return!1;for(const s in r){const a=r.hasOwnProperty(s),l=e.hasOwnProperty(s);if(a&&!l||!a&&l||!ph(r[s],e[s]))return!1}}return String(r)===String(e)}function JO(r,e){return r.findIndex(t=>ph(t,e))}const ze=r=>Tt(r)?r:r==null?"":it(r)||zt(r)&&(r.toString===qO||!St(r.toString))?JSON.stringify(r,ZO,2):String(r),ZO=(r,e)=>e&&e.__v_isRef?ZO(r,e.value):hh(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,o])=>(t[`${i} =>`]=o,t),{})}:j0(e)?{[`Set(${e.size})`]:[...e.values()]}:zt(e)&&!it(e)&&!XO(e)?String(e):e;let zn;class QO{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=zn,!e&&zn&&(this.index=(zn.scopes||(zn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=zn;try{return zn=this,e()}finally{zn=t}}}on(){zn=this}off(){zn=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this._active=!1}}}function ek(r){return new QO(r)}function D$(r,e=zn){e&&e.active&&e.effects.push(r)}function tk(){return zn}function rk(r){zn&&zn.cleanups.push(r)}const Iw=r=>{const e=new Set(r);return e.w=0,e.n=0,e},ik=r=>(r.w&Vl)>0,ok=r=>(r.n&Vl)>0,B$=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=Vl},F$=r=>{const{deps:e}=r;if(e.length){let t=0;for(let i=0;i<e.length;i++){const o=e[i];ik(o)&&!ok(o)?o.delete(r):e[t++]=o,o.w&=~Vl,o.n&=~Vl}e.length=t}},J0=new WeakMap;let Kf=0,Vl=1;const Pw=30;let Ps;const nu=Symbol(""),Dw=Symbol("");class Bw{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,D$(this,i)}run(){if(!this.active)return this.fn();let e=Ps,t=Gl;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Ps,Ps=this,Gl=!0,Vl=1<<++Kf,Kf<=Pw?B$(this):nk(this),this.fn()}finally{Kf<=Pw&&F$(this),Vl=1<<--Kf,Ps=this.parent,Gl=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Ps===this?this.deferStop=!0:this.active&&(nk(this),this.onStop&&this.onStop(),this.active=!1)}}function nk(r){const{deps:e}=r;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(r);e.length=0}}let Gl=!0;const sk=[];function fh(){sk.push(Gl),Gl=!1}function mh(){const r=sk.pop();Gl=r===void 0?!0:r}function pn(r,e,t){if(Gl&&Ps){let i=J0.get(r);i||J0.set(r,i=new Map);let o=i.get(t);o||i.set(t,o=Iw()),ak(o)}}function ak(r,e){let t=!1;Kf<=Pw?ok(r)||(r.n|=Vl,t=!ik(r)):t=!r.has(Ps),t&&(r.add(Ps),Ps.deps.push(r))}function Wa(r,e,t,i,o,n){const s=J0.get(r);if(!s)return;let a=[];if(e==="clear")a=[...s.values()];else if(t==="length"&&it(r)){const l=Number(i);s.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(s.get(t)),e){case"add":it(r)?Lw(t)&&a.push(s.get("length")):(a.push(s.get(nu)),hh(r)&&a.push(s.get(Dw)));break;case"delete":it(r)||(a.push(s.get(nu)),hh(r)&&a.push(s.get(Dw)));break;case"set":hh(r)&&a.push(s.get(nu));break}if(a.length===1)a[0]&&Fw(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);Fw(Iw(l))}}function Fw(r,e){const t=it(r)?r:[...r];for(const i of t)i.computed&&lk(i);for(const i of t)i.computed||lk(i)}function lk(r,e){(r!==Ps||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}function U$(r,e){var t;return(t=J0.get(r))==null?void 0:t.get(e)}const z$=ks("__proto__,__v_isRef,__isVue"),ck=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(jf)),V$=Uw(),G$=Uw(!1,!0),H$=Uw(!0),uk=j$();function j$(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const i=fr(this);for(let n=0,s=this.length;n<s;n++)pn(i,"get",n+"");const o=i[e](...t);return o===-1||o===!1?i[e](...t.map(fr)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){fh();const i=fr(this)[e].apply(this,t);return mh(),i}}),r}function $$(r){const e=fr(this);return pn(e,"has",r),e.hasOwnProperty(r)}function Uw(r=!1,e=!1){return function(t,i,o){if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&o===(r?e?aW:bk:e?yk:vk).get(t))return t;const n=it(t);if(!r){if(n&&Yt(uk,i))return Reflect.get(uk,i,o);if(i==="hasOwnProperty")return $$}const s=Reflect.get(t,i,o);return(jf(i)?ck.has(i):z$(i))||(r||pn(t,"get",i),e)?s:Ar(s)?n&&Lw(i)?s:s.value:zt(s)?r?su(s):ur(s):s}}const W$=dk(),q$=dk(!0);function dk(r=!1){return function(e,t,i,o){let n=e[t];if(vh(n)&&Ar(n)&&!Ar(i))return!1;if(!r&&(!oy(i)&&!vh(i)&&(n=fr(n),i=fr(i)),!it(e)&&Ar(n)&&!Ar(i)))return n.value=i,!0;const s=it(e)&&Lw(t)?Number(t)<e.length:Yt(e,t),a=Reflect.set(e,t,i,o);return e===fr(o)&&(s?Xf(i,n)&&Wa(e,"set",t,i):Wa(e,"add",t,i)),a}}function X$(r,e){const t=Yt(r,e);r[e];const i=Reflect.deleteProperty(r,e);return i&&t&&Wa(r,"delete",e,void 0),i}function K$(r,e){const t=Reflect.has(r,e);return(!jf(e)||!ck.has(e))&&pn(r,"has",e),t}function Y$(r){return pn(r,"iterate",it(r)?"length":nu),Reflect.ownKeys(r)}const hk={get:V$,set:W$,deleteProperty:X$,has:K$,ownKeys:Y$},J$={get:H$,set(r,e){return!0},deleteProperty(r,e){return!0}},Z$=Si({},hk,{get:G$,set:q$}),zw=r=>r,Z0=r=>Reflect.getPrototypeOf(r);function Q0(r,e,t=!1,i=!1){r=r.__v_raw;const o=fr(r),n=fr(e);t||(e!==n&&pn(o,"get",e),pn(o,"get",n));const{has:s}=Z0(o),a=i?zw:t?jw:Yf;if(s.call(o,e))return a(r.get(e));if(s.call(o,n))return a(r.get(n));r!==o&&r.get(e)}function ey(r,e=!1){const t=this.__v_raw,i=fr(t),o=fr(r);return e||(r!==o&&pn(i,"has",r),pn(i,"has",o)),r===o?t.has(r):t.has(r)||t.has(o)}function ty(r,e=!1){return r=r.__v_raw,!e&&pn(fr(r),"iterate",nu),Reflect.get(r,"size",r)}function pk(r){r=fr(r);const e=fr(this);return Z0(e).has.call(e,r)||(e.add(r),Wa(e,"add",r,r)),this}function fk(r,e){e=fr(e);const t=fr(this),{has:i,get:o}=Z0(t);let n=i.call(t,r);n||(r=fr(r),n=i.call(t,r));const s=o.call(t,r);return t.set(r,e),n?Xf(e,s)&&Wa(t,"set",r,e):Wa(t,"add",r,e),this}function mk(r){const e=fr(this),{has:t,get:i}=Z0(e);let o=t.call(e,r);o||(r=fr(r),o=t.call(e,r)),i&&i.call(e,r);const n=e.delete(r);return o&&Wa(e,"delete",r,void 0),n}function gk(){const r=fr(this),e=r.size!==0,t=r.clear();return e&&Wa(r,"clear",void 0,void 0),t}function ry(r,e){return function(t,i){const o=this,n=o.__v_raw,s=fr(n),a=e?zw:r?jw:Yf;return!r&&pn(s,"iterate",nu),n.forEach((l,c)=>t.call(i,a(l),a(c),o))}}function iy(r,e,t){return function(...i){const o=this.__v_raw,n=fr(o),s=hh(n),a=r==="entries"||r===Symbol.iterator&&s,l=r==="keys"&&s,c=o[r](...i),u=t?zw:e?jw:Yf;return!e&&pn(n,"iterate",l?Dw:nu),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Hl(r){return function(...e){return r==="delete"?!1:this}}function Q$(){const r={get(o){return Q0(this,o)},get size(){return ty(this)},has:ey,add:pk,set:fk,delete:mk,clear:gk,forEach:ry(!1,!1)},e={get(o){return Q0(this,o,!1,!0)},get size(){return ty(this)},has:ey,add:pk,set:fk,delete:mk,clear:gk,forEach:ry(!1,!0)},t={get(o){return Q0(this,o,!0)},get size(){return ty(this,!0)},has(o){return ey.call(this,o,!0)},add:Hl("add"),set:Hl("set"),delete:Hl("delete"),clear:Hl("clear"),forEach:ry(!0,!1)},i={get(o){return Q0(this,o,!0,!0)},get size(){return ty(this,!0)},has(o){return ey.call(this,o,!0)},add:Hl("add"),set:Hl("set"),delete:Hl("delete"),clear:Hl("clear"),forEach:ry(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{r[o]=iy(o,!1,!1),t[o]=iy(o,!0,!1),e[o]=iy(o,!1,!0),i[o]=iy(o,!0,!0)}),[r,t,e,i]}const[eW,tW,rW,iW]=Q$();function Vw(r,e){const t=e?r?iW:rW:r?tW:eW;return(i,o,n)=>o==="__v_isReactive"?!r:o==="__v_isReadonly"?r:o==="__v_raw"?i:Reflect.get(Yt(t,o)&&o in i?t:i,o,n)}const oW={get:Vw(!1,!1)},nW={get:Vw(!1,!0)},sW={get:Vw(!0,!1)},vk=new WeakMap,yk=new WeakMap,bk=new WeakMap,aW=new WeakMap;function lW(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cW(r){return r.__v_skip||!Object.isExtensible(r)?0:lW($0(r))}function ur(r){return vh(r)?r:Hw(r,!1,hk,oW,vk)}function Gw(r){return Hw(r,!1,Z$,nW,yk)}function su(r){return Hw(r,!0,J$,sW,bk)}function Hw(r,e,t,i,o){if(!zt(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const n=o.get(r);if(n)return n;const s=cW(r);if(s===0)return r;const a=new Proxy(r,s===2?i:t);return o.set(r,a),a}function gh(r){return vh(r)?gh(r.__v_raw):!!(r&&r.__v_isReactive)}function vh(r){return!!(r&&r.__v_isReadonly)}function oy(r){return!!(r&&r.__v_isShallow)}function xk(r){return gh(r)||vh(r)}function fr(r){const e=r&&r.__v_raw;return e?fr(e):r}function au(r){return Y0(r,"__v_skip",!0),r}const Yf=r=>zt(r)?ur(r):r,jw=r=>zt(r)?su(r):r;function _k(r){Gl&&Ps&&(r=fr(r),ak(r.dep||(r.dep=Iw())))}function $w(r,e){r=fr(r);const t=r.dep;t&&Fw(t)}function Ar(r){return!!(r&&r.__v_isRef===!0)}function V(r){return wk(r,!1)}function Rr(r){return wk(r,!0)}function wk(r,e){return Ar(r)?r:new uW(r,e)}class uW{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:fr(e),this._value=t?e:Yf(e)}get value(){return _k(this),this._value}set value(e){const t=this.__v_isShallow||oy(e)||vh(e);e=t?e:fr(e),Xf(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Yf(e),$w(this))}}function Jf(r){$w(r)}function f(r){return Ar(r)?r.value:r}const dW={get:(r,e,t)=>f(Reflect.get(r,e,t)),set:(r,e,t,i)=>{const o=r[e];return Ar(o)&&!Ar(t)?(o.value=t,!0):Reflect.set(r,e,t,i)}};function Sk(r){return gh(r)?r:new Proxy(r,dW)}function qi(r){const e=it(r)?new Array(r.length):{};for(const t in r)e[t]=Mk(r,t);return e}class hW{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return U$(fr(this._object),this._key)}}class pW{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Yr(r,e,t){return Ar(r)?r:St(r)?new pW(r):zt(r)&&arguments.length>1?Mk(r,e,t):V(r)}function Mk(r,e,t){const i=r[e];return Ar(i)?i:new hW(r,e,t)}class fW{constructor(e,t,i,o){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new Bw(e,()=>{this._dirty||(this._dirty=!0,$w(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=i}get value(){const e=fr(this);return _k(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function Tk(r,e,t=!1){let i,o;const n=St(r);return n?(i=r,o=_r):(i=r.get,o=r.set),new fW(i,o,n||!o,t)}function mW(r,...e){}function jl(r,e,t,i){let o;try{o=i?r(...i):r()}catch(n){ny(n,e,t)}return o}function us(r,e,t,i){if(St(r)){const n=jl(r,e,t,i);return n&&$f(n)&&n.catch(s=>{ny(s,e,t)}),n}const o=[];for(let n=0;n<r.length;n++)o.push(us(r[n],e,t,i));return o}function ny(r,e,t,i=!0){const o=e?e.vnode:null;if(e){let n=e.parent;const s=e.proxy,a=t;for(;n;){const c=n.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](r,s,a)===!1)return}n=n.parent}const l=e.appContext.config.errorHandler;if(l){jl(l,null,10,[r,s,a]);return}}gW(r,t,o,i)}function gW(r,e,t,i=!0){console.error(r)}let Zf=!1,Ww=!1;const Oo=[];let ca=0;const yh=[];let qa=null,lu=0;const Ek=Promise.resolve();let qw=null;function lt(r){const e=qw||Ek;return r?e.then(this?r.bind(this):r):e}function vW(r){let e=ca+1,t=Oo.length;for(;e<t;){const i=e+t>>>1;Qf(Oo[i])<r?e=i+1:t=i}return e}function Xw(r){(!Oo.length||!Oo.includes(r,Zf&&r.allowRecurse?ca+1:ca))&&(r.id==null?Oo.push(r):Oo.splice(vW(r.id),0,r),Ck())}function Ck(){!Zf&&!Ww&&(Ww=!0,qw=Ek.then(Rk))}function yW(r){const e=Oo.indexOf(r);e>ca&&Oo.splice(e,1)}function bW(r){it(r)?yh.push(...r):(!qa||!qa.includes(r,r.allowRecurse?lu+1:lu))&&yh.push(r),Ck()}function Nk(r,e=Zf?ca+1:0){for(;e<Oo.length;e++){const t=Oo[e];t&&t.pre&&(Oo.splice(e,1),e--,t())}}function Ak(r){if(yh.length){const e=[...new Set(yh)];if(yh.length=0,qa){qa.push(...e);return}for(qa=e,qa.sort((t,i)=>Qf(t)-Qf(i)),lu=0;lu<qa.length;lu++)qa[lu]();qa=null,lu=0}}const Qf=r=>r.id==null?1/0:r.id,xW=(r,e)=>{const t=Qf(r)-Qf(e);if(t===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return t};function Rk(r){Ww=!1,Zf=!0,Oo.sort(xW);const e=_r;try{for(ca=0;ca<Oo.length;ca++){const t=Oo[ca];t&&t.active!==!1&&jl(t,null,14)}}finally{ca=0,Oo.length=0,Ak(),Zf=!1,qw=null,(Oo.length||yh.length)&&Rk()}}function _W(r,e,...t){if(r.isUnmounted)return;const i=r.vnode.props||xr;let o=t;const n=e.startsWith("update:"),s=n&&e.slice(7);if(s&&s in i){const u=`${s==="modelValue"?"model":s}Modifiers`,{number:d,trim:h}=i[u]||xr;h&&(o=t.map(p=>Tt(p)?p.trim():p)),d&&(o=t.map(Ow))}let a,l=i[a=X0(e)]||i[a=X0(cs(e))];!l&&n&&(l=i[a=X0(zl(e))]),l&&us(l,r,6,o);const c=i[a+"Once"];if(c){if(!r.emitted)r.emitted={};else if(r.emitted[a])return;r.emitted[a]=!0,us(c,r,6,o)}}function Lk(r,e,t=!1){const i=e.emitsCache,o=i.get(r);if(o!==void 0)return o;const n=r.emits;let s={},a=!1;if(!St(r)){const l=c=>{const u=Lk(c,e,!0);u&&(a=!0,Si(s,u))};!t&&e.mixins.length&&e.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!n&&!a?(zt(r)&&i.set(r,null),null):(it(n)?n.forEach(l=>s[l]=null):Si(s,n),zt(r)&&i.set(r,s),s)}function sy(r,e){return!r||!H0(e)?!1:(e=e.slice(2).replace(/Once$/,""),Yt(r,e[0].toLowerCase()+e.slice(1))||Yt(r,zl(e))||Yt(r,e))}let vo=null,ay=null;function ly(r){const e=vo;return vo=r,ay=r&&r.type.__scopeId||null,e}function Kw(r){ay=r}function Yw(){ay=null}function se(r,e=vo,t){if(!e||r._n)return r;const i=(...o)=>{i._d&&lI(-1);const n=ly(e);let s;try{s=r(...o)}finally{ly(n),i._d&&lI(1)}return s};return i._n=!0,i._c=!0,i._d=!0,i}function Jw(r){const{type:e,vnode:t,proxy:i,withProxy:o,props:n,propsOptions:[s],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:p,ctx:m,inheritAttrs:g}=r;let v,y;const b=ly(r);try{if(t.shapeFlag&4){const _=o||i;v=ua(u.call(_,_,d,n,p,h,m)),y=l}else{const _=e;v=ua(_.length>1?_(n,{attrs:l,slots:a,emit:c}):_(n,null)),y=e.props?l:wW(l)}}catch(_){am.length=0,ny(_,r,1),v=ee($o)}let x=v;if(y&&g!==!1){const _=Object.keys(y),{shapeFlag:S}=x;_.length&&S&7&&(s&&_.some(Aw)&&(y=SW(y,s)),x=Ja(x,y))}return t.dirs&&(x=Ja(x),x.dirs=x.dirs?x.dirs.concat(t.dirs):t.dirs),t.transition&&(x.transition=t.transition),v=x,ly(b),v}const wW=r=>{let e;for(const t in r)(t==="class"||t==="style"||H0(t))&&((e||(e={}))[t]=r[t]);return e},SW=(r,e)=>{const t={};for(const i in r)(!Aw(i)||!(i.slice(9)in e))&&(t[i]=r[i]);return t};function MW(r,e,t){const{props:i,children:o,component:n}=r,{props:s,children:a,patchFlag:l}=e,c=n.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?Ok(i,s,c):!!s;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(s[h]!==i[h]&&!sy(c,h))return!0}}}else return(o||a)&&(!a||!a.$stable)?!0:i===s?!1:i?s?Ok(i,s,c):!0:!!s;return!1}function Ok(r,e,t){const i=Object.keys(e);if(i.length!==Object.keys(r).length)return!0;for(let o=0;o<i.length;o++){const n=i[o];if(e[n]!==r[n]&&!sy(t,n))return!0}return!1}function TW({vnode:r,parent:e},t){for(;e&&e.subTree===r;)(r=e.vnode).el=t,e=e.parent}const EW=r=>r.__isSuspense;function CW(r,e){e&&e.pendingBranch?it(r)?e.effects.push(...r):e.effects.push(r):bW(r)}function Vn(r,e){return Zw(r,null,e)}const cy={};function ke(r,e,t){return Zw(r,e,t)}function Zw(r,e,{immediate:t,deep:i,flush:o,onTrack:n,onTrigger:s}=xr){var a;const l=tk()===((a=to)==null?void 0:a.scope)?to:null;let c,u=!1,d=!1;if(Ar(r)?(c=()=>r.value,u=oy(r)):gh(r)?(c=()=>r,i=!0):it(r)?(d=!0,u=r.some(_=>gh(_)||oy(_)),c=()=>r.map(_=>{if(Ar(_))return _.value;if(gh(_))return cu(_);if(St(_))return jl(_,l,2)})):St(r)?e?c=()=>jl(r,l,2):c=()=>{if(!(l&&l.isUnmounted))return h&&h(),us(r,l,3,[p])}:c=_r,e&&i){const _=c;c=()=>cu(_())}let h,p=_=>{h=b.onStop=()=>{jl(_,l,4)}},m;if(cm)if(p=_r,e?t&&us(e,l,3,[c(),d?[]:void 0,p]):c(),o==="sync"){const _=m9();m=_.__watcherHandles||(_.__watcherHandles=[])}else return _r;let g=d?new Array(r.length).fill(cy):cy;const v=()=>{if(b.active)if(e){const _=b.run();(i||u||(d?_.some((S,w)=>Xf(S,g[w])):Xf(_,g)))&&(h&&h(),us(e,l,3,[_,g===cy?void 0:d&&g[0]===cy?[]:g,p]),g=_)}else b.run()};v.allowRecurse=!!e;let y;o==="sync"?y=v:o==="post"?y=()=>fn(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),y=()=>Xw(v));const b=new Bw(c,y);e?t?v():g=b.run():o==="post"?fn(b.run.bind(b),l&&l.suspense):b.run();const x=()=>{b.stop(),l&&l.scope&&Rw(l.scope.effects,b)};return m&&m.push(x),x}function NW(r,e,t){const i=this.proxy,o=Tt(r)?r.includes(".")?kk(i,r):()=>i[r]:r.bind(i,i);let n;St(e)?n=e:(n=e.handler,t=e);const s=to;wh(this);const a=Zw(o,n.bind(i),t);return s?wh(s):fu(),a}function kk(r,e){const t=e.split(".");return()=>{let i=r;for(let o=0;o<t.length&&i;o++)i=i[t[o]];return i}}function cu(r,e){if(!zt(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),Ar(r))cu(r.value,e);else if(it(r))for(let t=0;t<r.length;t++)cu(r[t],e);else if(j0(r)||hh(r))r.forEach(t=>{cu(t,e)});else if(XO(r))for(const t in r)cu(r[t],e);return r}function At(r,e){const t=vo;if(t===null)return r;const i=by(t)||t.proxy,o=r.dirs||(r.dirs=[]);for(let n=0;n<e.length;n++){let[s,a,l,c=xr]=e[n];s&&(St(s)&&(s={mounted:s,updated:s}),s.deep&&cu(a),o.push({dir:s,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return r}function uu(r,e,t,i){const o=r.dirs,n=e&&e.dirs;for(let s=0;s<o.length;s++){const a=o[s];n&&(a.oldValue=n[s].value);let l=a.dir[i];l&&(fh(),us(l,t,8,[r.el,a,r,e]),mh())}}function Ik(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Rt(()=>{r.isMounted=!0}),Vr(()=>{r.isUnmounting=!0}),r}const ds=[Function,Array],Pk={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:ds,onEnter:ds,onAfterEnter:ds,onEnterCancelled:ds,onBeforeLeave:ds,onLeave:ds,onAfterLeave:ds,onLeaveCancelled:ds,onBeforeAppear:ds,onAppear:ds,onAfterAppear:ds,onAppearCancelled:ds},AW={name:"BaseTransition",props:Pk,setup(r,{slots:e}){const t=It(),i=Ik();let o;return()=>{const n=e.default&&eS(e.default(),!0);if(!n||!n.length)return;let s=n[0];if(n.length>1){for(const g of n)if(g.type!==$o){s=g;break}}const a=fr(r),{mode:l}=a;if(i.isLeaving)return Qw(s);const c=Bk(s);if(!c)return Qw(s);const u=em(c,a,i,t);tm(c,u);const d=t.subTree,h=d&&Bk(d);let p=!1;const{getTransitionKey:m}=c.type;if(m){const g=m();o===void 0?o=g:g!==o&&(o=g,p=!0)}if(h&&h.type!==$o&&(!pu(c,h)||p)){const g=em(h,a,i,t);if(tm(h,g),l==="out-in")return i.isLeaving=!0,g.afterLeave=()=>{i.isLeaving=!1,t.update.active!==!1&&t.update()},Qw(s);l==="in-out"&&c.type!==$o&&(g.delayLeave=(v,y,b)=>{const x=Dk(i,h);x[String(h.key)]=h,v._leaveCb=()=>{y(),v._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=b})}return s}}},RW=AW;function Dk(r,e){const{leavingVNodes:t}=r;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function em(r,e,t,i){const{appear:o,mode:n,persisted:s=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:p,onLeaveCancelled:m,onBeforeAppear:g,onAppear:v,onAfterAppear:y,onAppearCancelled:b}=e,x=String(r.key),_=Dk(t,r),S=(T,E)=>{T&&us(T,i,9,E)},w=(T,E)=>{const C=E[1];S(T,E),it(T)?T.every(B=>B.length<=1)&&C():T.length<=1&&C()},M={mode:n,persisted:s,beforeEnter(T){let E=a;if(!t.isMounted)if(o)E=g||a;else return;T._leaveCb&&T._leaveCb(!0);const C=_[x];C&&pu(r,C)&&C.el._leaveCb&&C.el._leaveCb(),S(E,[T])},enter(T){let E=l,C=c,B=u;if(!t.isMounted)if(o)E=v||l,C=y||c,B=b||u;else return;let I=!1;const L=T._enterCb=P=>{I||(I=!0,P?S(B,[T]):S(C,[T]),M.delayedLeave&&M.delayedLeave(),T._enterCb=void 0)};E?w(E,[T,L]):L()},leave(T,E){const C=String(r.key);if(T._enterCb&&T._enterCb(!0),t.isUnmounting)return E();S(d,[T]);let B=!1;const I=T._leaveCb=L=>{B||(B=!0,E(),L?S(m,[T]):S(p,[T]),T._leaveCb=void 0,_[C]===r&&delete _[C])};_[C]=r,h?w(h,[T,I]):I()},clone(T){return em(T,e,t,i)}};return M}function Qw(r){if(uy(r))return r=Ja(r),r.children=null,r}function Bk(r){return uy(r)?r.children?r.children[0]:void 0:r}function tm(r,e){r.shapeFlag&6&&r.component?tm(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function eS(r,e=!1,t){let i=[],o=0;for(let n=0;n<r.length;n++){let s=r[n];const a=t==null?s.key:String(t)+String(s.key!=null?s.key:n);s.type===nt?(s.patchFlag&128&&o++,i=i.concat(eS(s.children,e,a))):(e||s.type!==$o)&&i.push(a!=null?Ja(s,{key:a}):s)}if(o>1)for(let n=0;n<i.length;n++)i[n].patchFlag=-2;return i}function ne(r,e){return St(r)?(()=>Si({name:r.name},e,{setup:r}))():r}const rm=r=>!!r.type.__asyncLoader,uy=r=>r.type.__isKeepAlive;function LW(r,e){Uk(r,"a",e)}function Fk(r,e){Uk(r,"da",e)}function Uk(r,e,t=to){const i=r.__wdc||(r.__wdc=()=>{let o=t;for(;o;){if(o.isDeactivated)return;o=o.parent}return r()});if(dy(e,i,t),t){let o=t.parent;for(;o&&o.parent;)uy(o.parent.vnode)&&OW(i,e,t,o),o=o.parent}}function OW(r,e,t,i){const o=dy(e,r,i,!0);Gn(()=>{Rw(i[e],o)},t)}function dy(r,e,t=to,i=!1){if(t){const o=t[r]||(t[r]=[]),n=e.__weh||(e.__weh=(...s)=>{if(t.isUnmounted)return;fh(),wh(t);const a=us(e,t,r,s);return fu(),mh(),a});return i?o.unshift(n):o.push(n),n}}const Xa=r=>(e,t=to)=>(!cm||r==="sp")&&dy(r,(...i)=>e(...i),t),hy=Xa("bm"),Rt=Xa("m"),zk=Xa("bu"),Ka=Xa("u"),Vr=Xa("bum"),Gn=Xa("um"),kW=Xa("sp"),IW=Xa("rtg"),PW=Xa("rtc");function DW(r,e=to){dy("ec",r,e)}const tS="components",BW="directives";function _t(r,e){return rS(tS,r,!0,e)||r}const Vk=Symbol.for("v-ndc");function Ht(r){return Tt(r)?rS(tS,r,!1)||r:r||Vk}function bh(r){return rS(BW,r)}function rS(r,e,t=!0,i=!1){const o=vo||to;if(o){const n=o.type;if(r===tS){const a=h9(n,!1);if(a&&(a===e||a===cs(e)||a===qf(cs(e))))return n}const s=Gk(o[r]||n[r],e)||Gk(o.appContext[r],e);return!s&&i?n:s}}function Gk(r,e){return r&&(r[e]||r[cs(e)]||r[qf(cs(e))])}function jt(r,e,t,i){let o;const n=t&&t[i];if(it(r)||Tt(r)){o=new Array(r.length);for(let s=0,a=r.length;s<a;s++)o[s]=e(r[s],s,void 0,n&&n[s])}else if(typeof r=="number"){o=new Array(r);for(let s=0;s<r;s++)o[s]=e(s+1,s,void 0,n&&n[s])}else if(zt(r))if(r[Symbol.iterator])o=Array.from(r,(s,a)=>e(s,a,void 0,n&&n[a]));else{const s=Object.keys(r);o=new Array(s.length);for(let a=0,l=s.length;a<l;a++){const c=s[a];o[a]=e(r[c],c,a,n&&n[a])}}else o=[];return t&&(t[i]=o),o}function Ya(r,e){for(let t=0;t<e.length;t++){const i=e[t];if(it(i))for(let o=0;o<i.length;o++)r[i[o].name]=i[o].fn;else i&&(r[i.name]=i.key?(...o)=>{const n=i.fn(...o);return n&&(n.key=i.key),n}:i.fn)}return r}function Oe(r,e,t={},i,o){if(vo.isCE||vo.parent&&rm(vo.parent)&&vo.parent.isCE)return e!=="default"&&(t.name=e),ee("slot",t,i&&i());let n=r[e];n&&n._c&&(n._d=!1),A();const s=n&&Hk(n(t)),a=_e(nt,{key:t.key||s&&s.key||`_${e}`},s||(i?i():[]),s&&r._===1?64:-2);return!o&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),n&&n._c&&(n._d=!0),a}function Hk(r){return r.some(e=>$r(e)?!(e.type===$o||e.type===nt&&!Hk(e.children)):!0)?r:null}function FW(r,e){const t={};for(const i in r)t[e&&/[A-Z]/.test(i)?`on:${i}`:X0(i)]=r[i];return t}const iS=r=>r?hI(r)?by(r)||r.proxy:iS(r.parent):null,im=Si(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>iS(r.parent),$root:r=>iS(r.root),$emit:r=>r.emit,$options:r=>sS(r),$forceUpdate:r=>r.f||(r.f=()=>Xw(r.update)),$nextTick:r=>r.n||(r.n=lt.bind(r.proxy)),$watch:r=>NW.bind(r)}),oS=(r,e)=>r!==xr&&!r.__isScriptSetup&&Yt(r,e),UW={get({_:r},e){const{ctx:t,setupState:i,data:o,props:n,accessCache:s,type:a,appContext:l}=r;let c;if(e[0]!=="$"){const p=s[e];if(p!==void 0)switch(p){case 1:return i[e];case 2:return o[e];case 4:return t[e];case 3:return n[e]}else{if(oS(i,e))return s[e]=1,i[e];if(o!==xr&&Yt(o,e))return s[e]=2,o[e];if((c=r.propsOptions[0])&&Yt(c,e))return s[e]=3,n[e];if(t!==xr&&Yt(t,e))return s[e]=4,t[e];nS&&(s[e]=0)}}const u=im[e];let d,h;if(u)return e==="$attrs"&&pn(r,"get",e),u(r);if((d=a.__cssModules)&&(d=d[e]))return d;if(t!==xr&&Yt(t,e))return s[e]=4,t[e];if(h=l.config.globalProperties,Yt(h,e))return h[e]},set({_:r},e,t){const{data:i,setupState:o,ctx:n}=r;return oS(o,e)?(o[e]=t,!0):i!==xr&&Yt(i,e)?(i[e]=t,!0):Yt(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(n[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:i,appContext:o,propsOptions:n}},s){let a;return!!t[s]||r!==xr&&Yt(r,s)||oS(e,s)||(a=n[0])&&Yt(a,s)||Yt(i,s)||Yt(im,s)||Yt(o.config.globalProperties,s)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:Yt(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};function yo(){return jk().slots}function du(){return jk().attrs}function jk(){const r=It();return r.setupContext||(r.setupContext=gI(r))}function $k(r){return it(r)?r.reduce((e,t)=>(e[t]=null,e),{}):r}let nS=!0;function zW(r){const e=sS(r),t=r.proxy,i=r.ctx;nS=!1,e.beforeCreate&&Wk(e.beforeCreate,r,"bc");const{data:o,computed:n,methods:s,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:m,activated:g,deactivated:v,beforeDestroy:y,beforeUnmount:b,destroyed:x,unmounted:_,render:S,renderTracked:w,renderTriggered:M,errorCaptured:T,serverPrefetch:E,expose:C,inheritAttrs:B,components:I,directives:L,filters:P}=e;if(c&&VW(c,i,null),s)for(const G in s){const R=s[G];St(R)&&(i[G]=R.bind(t))}if(o){const G=o.call(t,t);zt(G)&&(r.data=ur(G))}if(nS=!0,n)for(const G in n){const R=n[G],F=St(R)?R.bind(t,t):St(R.get)?R.get.bind(t,t):_r,O=!St(R)&&St(R.set)?R.set.bind(t):_r,H=N({get:F,set:O});Object.defineProperty(i,G,{enumerable:!0,configurable:!0,get:()=>H.value,set:$=>H.value=$})}if(a)for(const G in a)qk(a[G],i,t,G);if(l){const G=St(l)?l.call(t):l;Reflect.ownKeys(G).forEach(R=>{Wt(R,G[R])})}u&&Wk(u,r,"c");function U(G,R){it(R)?R.forEach(F=>G(F.bind(t))):R&&G(R.bind(t))}if(U(hy,d),U(Rt,h),U(zk,p),U(Ka,m),U(LW,g),U(Fk,v),U(DW,T),U(PW,w),U(IW,M),U(Vr,b),U(Gn,_),U(kW,E),it(C))if(C.length){const G=r.exposed||(r.exposed={});C.forEach(R=>{Object.defineProperty(G,R,{get:()=>t[R],set:F=>t[R]=F})})}else r.exposed||(r.exposed={});S&&r.render===_r&&(r.render=S),B!=null&&(r.inheritAttrs=B),I&&(r.components=I),L&&(r.directives=L)}function VW(r,e,t=_r){it(r)&&(r=aS(r));for(const i in r){const o=r[i];let n;zt(o)?"default"in o?n=ot(o.from||i,o.default,!0):n=ot(o.from||i):n=ot(o),Ar(n)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>n.value,set:s=>n.value=s}):e[i]=n}}function Wk(r,e,t){us(it(r)?r.map(i=>i.bind(e.proxy)):r.bind(e.proxy),e,t)}function qk(r,e,t,i){const o=i.includes(".")?kk(t,i):()=>t[i];if(Tt(r)){const n=e[r];St(n)&&ke(o,n)}else if(St(r))ke(o,r.bind(t));else if(zt(r))if(it(r))r.forEach(n=>qk(n,e,t,i));else{const n=St(r.handler)?r.handler.bind(t):e[r.handler];St(n)&&ke(o,n,r)}}function sS(r){const e=r.type,{mixins:t,extends:i}=e,{mixins:o,optionsCache:n,config:{optionMergeStrategies:s}}=r.appContext,a=n.get(e);let l;return a?l=a:!o.length&&!t&&!i?l=e:(l={},o.length&&o.forEach(c=>py(l,c,s,!0)),py(l,e,s)),zt(e)&&n.set(e,l),l}function py(r,e,t,i=!1){const{mixins:o,extends:n}=e;n&&py(r,n,t,!0),o&&o.forEach(s=>py(r,s,t,!0));for(const s in e)if(!(i&&s==="expose")){const a=GW[s]||t&&t[s];r[s]=a?a(r[s],e[s]):e[s]}return r}const GW={data:Xk,props:Kk,emits:Kk,methods:om,computed:om,beforeCreate:jo,created:jo,beforeMount:jo,mounted:jo,beforeUpdate:jo,updated:jo,beforeDestroy:jo,beforeUnmount:jo,destroyed:jo,unmounted:jo,activated:jo,deactivated:jo,errorCaptured:jo,serverPrefetch:jo,components:om,directives:om,watch:jW,provide:Xk,inject:HW};function Xk(r,e){return e?r?function(){return Si(St(r)?r.call(this,this):r,St(e)?e.call(this,this):e)}:e:r}function HW(r,e){return om(aS(r),aS(e))}function aS(r){if(it(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function jo(r,e){return r?[...new Set([].concat(r,e))]:e}function om(r,e){return r?Si(Object.create(null),r,e):e}function Kk(r,e){return r?it(r)&&it(e)?[...new Set([...r,...e])]:Si(Object.create(null),$k(r),$k(e??{})):e}function jW(r,e){if(!r)return e;if(!e)return r;const t=Si(Object.create(null),r);for(const i in e)t[i]=jo(r[i],e[i]);return t}function Yk(){return{app:null,config:{isNativeTag:S$,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $W=0;function WW(r,e){return function(t,i=null){St(t)||(t=Si({},t)),i!=null&&!zt(i)&&(i=null);const o=Yk(),n=new Set;let s=!1;const a=o.app={_uid:$W++,_component:t,_props:i,_container:null,_context:o,_instance:null,version:g9,get config(){return o.config},set config(l){},use(l,...c){return n.has(l)||(l&&St(l.install)?(n.add(l),l.install(a,...c)):St(l)&&(n.add(l),l(a,...c))),a},mixin(l){return o.mixins.includes(l)||o.mixins.push(l),a},component(l,c){return c?(o.components[l]=c,a):o.components[l]},directive(l,c){return c?(o.directives[l]=c,a):o.directives[l]},mount(l,c,u){if(!s){const d=ee(t,i);return d.appContext=o,c&&e?e(d,l):r(d,l,u),s=!0,a._container=l,l.__vue_app__=a,by(d.component)||d.component.proxy}},unmount(){s&&(r(null,a._container),delete a._container.__vue_app__)},provide(l,c){return o.provides[l]=c,a},runWithContext(l){fy=a;try{return l()}finally{fy=null}}};return a}}let fy=null;function Wt(r,e){if(to){let t=to.provides;const i=to.parent&&to.parent.provides;i===t&&(t=to.provides=Object.create(i)),t[r]=e}}function ot(r,e,t=!1){const i=to||vo;if(i||fy){const o=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:fy._context.provides;if(o&&r in o)return o[r];if(arguments.length>1)return t&&St(e)?e.call(i&&i.proxy):e}}function qW(r,e,t,i=!1){const o={},n={};Y0(n,gy,1),r.propsDefaults=Object.create(null),Jk(r,e,o,n);for(const s in r.propsOptions[0])s in o||(o[s]=void 0);t?r.props=i?o:Gw(o):r.type.props?r.props=o:r.props=n,r.attrs=n}function XW(r,e,t,i){const{props:o,attrs:n,vnode:{patchFlag:s}}=r,a=fr(o),[l]=r.propsOptions;let c=!1;if((i||s>0)&&!(s&16)){if(s&8){const u=r.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(sy(r.emitsOptions,h))continue;const p=e[h];if(l)if(Yt(n,h))p!==n[h]&&(n[h]=p,c=!0);else{const m=cs(h);o[m]=lS(l,a,m,p,r,!1)}else p!==n[h]&&(n[h]=p,c=!0)}}}else{Jk(r,e,o,n)&&(c=!0);let u;for(const d in a)(!e||!Yt(e,d)&&((u=zl(d))===d||!Yt(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(o[d]=lS(l,a,d,void 0,r,!0)):delete o[d]);if(n!==a)for(const d in n)(!e||!Yt(e,d))&&(delete n[d],c=!0)}c&&Wa(r,"set","$attrs")}function Jk(r,e,t,i){const[o,n]=r.propsOptions;let s=!1,a;if(e)for(let l in e){if(W0(l))continue;const c=e[l];let u;o&&Yt(o,u=cs(l))?!n||!n.includes(u)?t[u]=c:(a||(a={}))[u]=c:sy(r.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,s=!0)}if(n){const l=fr(t),c=a||xr;for(let u=0;u<n.length;u++){const d=n[u];t[d]=lS(o,l,d,c[d],r,!Yt(c,d))}}return s}function lS(r,e,t,i,o,n){const s=r[t];if(s!=null){const a=Yt(s,"default");if(a&&i===void 0){const l=s.default;if(s.type!==Function&&!s.skipFactory&&St(l)){const{propsDefaults:c}=o;t in c?i=c[t]:(wh(o),i=c[t]=l.call(null,e),fu())}else i=l}s[0]&&(n&&!a?i=!1:s[1]&&(i===""||i===zl(t))&&(i=!0))}return i}function Zk(r,e,t=!1){const i=e.propsCache,o=i.get(r);if(o)return o;const n=r.props,s={},a=[];let l=!1;if(!St(r)){const u=d=>{l=!0;const[h,p]=Zk(d,e,!0);Si(s,h),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(u),r.extends&&u(r.extends),r.mixins&&r.mixins.forEach(u)}if(!n&&!l)return zt(r)&&i.set(r,ls),ls;if(it(n))for(let u=0;u<n.length;u++){const d=cs(n[u]);Qk(d)&&(s[d]=xr)}else if(n)for(const u in n){const d=cs(u);if(Qk(d)){const h=n[u],p=s[d]=it(h)||St(h)?{type:h}:Si({},h);if(p){const m=rI(Boolean,p.type),g=rI(String,p.type);p[0]=m>-1,p[1]=g<0||m<g,(m>-1||Yt(p,"default"))&&a.push(d)}}}const c=[s,a];return zt(r)&&i.set(r,c),c}function Qk(r){return r[0]!=="$"}function eI(r){const e=r&&r.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:r===null?"null":""}function tI(r,e){return eI(r)===eI(e)}function rI(r,e){return it(e)?e.findIndex(t=>tI(t,r)):St(e)&&tI(e,r)?0:-1}const iI=r=>r[0]==="_"||r==="$stable",cS=r=>it(r)?r.map(ua):[ua(r)],KW=(r,e,t)=>{if(e._n)return e;const i=se((...o)=>cS(e(...o)),t);return i._c=!1,i},oI=(r,e,t)=>{const i=r._ctx;for(const o in r){if(iI(o))continue;const n=r[o];if(St(n))e[o]=KW(o,n,i);else if(n!=null){const s=cS(n);e[o]=()=>s}}},nI=(r,e)=>{const t=cS(e);r.slots.default=()=>t},YW=(r,e)=>{if(r.vnode.shapeFlag&32){const t=e._;t?(r.slots=fr(e),Y0(e,"_",t)):oI(e,r.slots={})}else r.slots={},e&&nI(r,e);Y0(r.slots,gy,1)},JW=(r,e,t)=>{const{vnode:i,slots:o}=r;let n=!0,s=xr;if(i.shapeFlag&32){const a=e._;a?t&&a===1?n=!1:(Si(o,e),!t&&a===1&&delete o._):(n=!e.$stable,oI(e,o)),s=e}else e&&(nI(r,e),s={default:1});if(n)for(const a in o)!iI(a)&&!(a in s)&&delete o[a]};function uS(r,e,t,i,o=!1){if(it(r)){r.forEach((h,p)=>uS(h,e&&(it(e)?e[p]:e),t,i,o));return}if(rm(i)&&!o)return;const n=i.shapeFlag&4?by(i.component)||i.component.proxy:i.el,s=o?null:n,{i:a,r:l}=r,c=e&&e.r,u=a.refs===xr?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(Tt(c)?(u[c]=null,Yt(d,c)&&(d[c]=null)):Ar(c)&&(c.value=null)),St(l))jl(l,a,12,[s,u]);else{const h=Tt(l),p=Ar(l);if(h||p){const m=()=>{if(r.f){const g=h?Yt(d,l)?d[l]:u[l]:l.value;o?it(g)&&Rw(g,n):it(g)?g.includes(n)||g.push(n):h?(u[l]=[n],Yt(d,l)&&(d[l]=u[l])):(l.value=[n],r.k&&(u[r.k]=l.value))}else h?(u[l]=s,Yt(d,l)&&(d[l]=s)):p&&(l.value=s,r.k&&(u[r.k]=s))};s?(m.id=-1,fn(m,t)):m()}}}const fn=CW;function ZW(r){return QW(r)}function QW(r,e){const t=kw();t.__VUE__=!0;const{insert:i,remove:o,patchProp:n,createElement:s,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:p=_r,insertStaticContent:m}=r,g=(D,K,re,ae=null,le=null,Se=null,Ae=!1,Ne=null,Me=!!K.dynamicChildren)=>{if(D===K)return;D&&!pu(D,K)&&(ae=te(D),j(D,le,Se,!0),D=null),K.patchFlag===-2&&(Me=!1,K.dynamicChildren=null);const{type:Le,ref:je,shapeFlag:Y}=K;switch(Le){case xh:v(D,K,re,ae);break;case $o:y(D,K,re,ae);break;case pS:D==null&&b(K,re,ae,Ae);break;case nt:I(D,K,re,ae,le,Se,Ae,Ne,Me);break;default:Y&1?S(D,K,re,ae,le,Se,Ae,Ne,Me):Y&6?L(D,K,re,ae,le,Se,Ae,Ne,Me):(Y&64||Y&128)&&Le.process(D,K,re,ae,le,Se,Ae,Ne,Me,de)}je!=null&&le&&uS(je,D&&D.ref,Se,K||D,!K)},v=(D,K,re,ae)=>{if(D==null)i(K.el=a(K.children),re,ae);else{const le=K.el=D.el;K.children!==D.children&&c(le,K.children)}},y=(D,K,re,ae)=>{D==null?i(K.el=l(K.children||""),re,ae):K.el=D.el},b=(D,K,re,ae)=>{[D.el,D.anchor]=m(D.children,K,re,ae,D.el,D.anchor)},x=({el:D,anchor:K},re,ae)=>{let le;for(;D&&D!==K;)le=h(D),i(D,re,ae),D=le;i(K,re,ae)},_=({el:D,anchor:K})=>{let re;for(;D&&D!==K;)re=h(D),o(D),D=re;o(K)},S=(D,K,re,ae,le,Se,Ae,Ne,Me)=>{Ae=Ae||K.type==="svg",D==null?w(K,re,ae,le,Se,Ae,Ne,Me):E(D,K,le,Se,Ae,Ne,Me)},w=(D,K,re,ae,le,Se,Ae,Ne)=>{let Me,Le;const{type:je,props:Y,shapeFlag:z,transition:me,dirs:Ie}=D;if(Me=D.el=s(D.type,Se,Y&&Y.is,Y),z&8?u(Me,D.children):z&16&&T(D.children,Me,null,ae,le,Se&&je!=="foreignObject",Ae,Ne),Ie&&uu(D,null,ae,"created"),M(Me,D,D.scopeId,Ae,ae),Y){for(const Re in Y)Re!=="value"&&!W0(Re)&&n(Me,Re,null,Y[Re],Se,D.children,ae,le,xe);"value"in Y&&n(Me,"value",null,Y.value),(Le=Y.onVnodeBeforeMount)&&da(Le,ae,D)}Ie&&uu(D,null,ae,"beforeMount");const Ue=(!le||le&&!le.pendingBranch)&&me&&!me.persisted;Ue&&me.beforeEnter(Me),i(Me,K,re),((Le=Y&&Y.onVnodeMounted)||Ue||Ie)&&fn(()=>{Le&&da(Le,ae,D),Ue&&me.enter(Me),Ie&&uu(D,null,ae,"mounted")},le)},M=(D,K,re,ae,le)=>{if(re&&p(D,re),ae)for(let Se=0;Se<ae.length;Se++)p(D,ae[Se]);if(le){let Se=le.subTree;if(K===Se){const Ae=le.vnode;M(D,Ae,Ae.scopeId,Ae.slotScopeIds,le.parent)}}},T=(D,K,re,ae,le,Se,Ae,Ne,Me=0)=>{for(let Le=Me;Le<D.length;Le++){const je=D[Le]=Ne?$l(D[Le]):ua(D[Le]);g(null,je,K,re,ae,le,Se,Ae,Ne)}},E=(D,K,re,ae,le,Se,Ae)=>{const Ne=K.el=D.el;let{patchFlag:Me,dynamicChildren:Le,dirs:je}=K;Me|=D.patchFlag&16;const Y=D.props||xr,z=K.props||xr;let me;re&&hu(re,!1),(me=z.onVnodeBeforeUpdate)&&da(me,re,K,D),je&&uu(K,D,re,"beforeUpdate"),re&&hu(re,!0);const Ie=le&&K.type!=="foreignObject";if(Le?C(D.dynamicChildren,Le,Ne,re,ae,Ie,Se):Ae||F(D,K,Ne,null,re,ae,Ie,Se,!1),Me>0){if(Me&16)B(Ne,K,Y,z,re,ae,le);else if(Me&2&&Y.class!==z.class&&n(Ne,"class",null,z.class,le),Me&4&&n(Ne,"style",Y.style,z.style,le),Me&8){const Ue=K.dynamicProps;for(let Re=0;Re<Ue.length;Re++){const $e=Ue[Re],Ve=Y[$e],ye=z[$e];(ye!==Ve||$e==="value")&&n(Ne,$e,Ve,ye,le,D.children,re,ae,xe)}}Me&1&&D.children!==K.children&&u(Ne,K.children)}else!Ae&&Le==null&&B(Ne,K,Y,z,re,ae,le);((me=z.onVnodeUpdated)||je)&&fn(()=>{me&&da(me,re,K,D),je&&uu(K,D,re,"updated")},ae)},C=(D,K,re,ae,le,Se,Ae)=>{for(let Ne=0;Ne<K.length;Ne++){const Me=D[Ne],Le=K[Ne],je=Me.el&&(Me.type===nt||!pu(Me,Le)||Me.shapeFlag&70)?d(Me.el):re;g(Me,Le,je,null,ae,le,Se,Ae,!0)}},B=(D,K,re,ae,le,Se,Ae)=>{if(re!==ae){if(re!==xr)for(const Ne in re)!W0(Ne)&&!(Ne in ae)&&n(D,Ne,re[Ne],null,Ae,K.children,le,Se,xe);for(const Ne in ae){if(W0(Ne))continue;const Me=ae[Ne],Le=re[Ne];Me!==Le&&Ne!=="value"&&n(D,Ne,Le,Me,Ae,K.children,le,Se,xe)}"value"in ae&&n(D,"value",re.value,ae.value)}},I=(D,K,re,ae,le,Se,Ae,Ne,Me)=>{const Le=K.el=D?D.el:a(""),je=K.anchor=D?D.anchor:a("");let{patchFlag:Y,dynamicChildren:z,slotScopeIds:me}=K;me&&(Ne=Ne?Ne.concat(me):me),D==null?(i(Le,re,ae),i(je,re,ae),T(K.children,re,je,le,Se,Ae,Ne,Me)):Y>0&&Y&64&&z&&D.dynamicChildren?(C(D.dynamicChildren,z,re,le,Se,Ae,Ne),(K.key!=null||le&&K===le.subTree)&&dS(D,K,!0)):F(D,K,re,je,le,Se,Ae,Ne,Me)},L=(D,K,re,ae,le,Se,Ae,Ne,Me)=>{K.slotScopeIds=Ne,D==null?K.shapeFlag&512?le.ctx.activate(K,re,ae,Ae,Me):P(K,re,ae,le,Se,Ae,Me):U(D,K,Me)},P=(D,K,re,ae,le,Se,Ae)=>{const Ne=D.component=l9(D,ae,le);if(uy(D)&&(Ne.ctx.renderer=de),c9(Ne),Ne.asyncDep){if(le&&le.registerDep(Ne,G),!D.el){const Me=Ne.subTree=ee($o);y(null,Me,K,re)}return}G(Ne,D,K,re,le,Se,Ae)},U=(D,K,re)=>{const ae=K.component=D.component;if(MW(D,K,re))if(ae.asyncDep&&!ae.asyncResolved){R(ae,K,re);return}else ae.next=K,yW(ae.update),ae.update();else K.el=D.el,ae.vnode=K},G=(D,K,re,ae,le,Se,Ae)=>{const Ne=()=>{if(D.isMounted){let{next:je,bu:Y,u:z,parent:me,vnode:Ie}=D,Ue=je,Re;hu(D,!1),je?(je.el=Ie.el,R(D,je,Ae)):je=Ie,Y&&K0(Y),(Re=je.props&&je.props.onVnodeBeforeUpdate)&&da(Re,me,je,Ie),hu(D,!0);const $e=Jw(D),Ve=D.subTree;D.subTree=$e,g(Ve,$e,d(Ve.el),te(Ve),D,le,Se),je.el=$e.el,Ue===null&&TW(D,$e.el),z&&fn(z,le),(Re=je.props&&je.props.onVnodeUpdated)&&fn(()=>da(Re,me,je,Ie),le)}else{let je;const{el:Y,props:z}=K,{bm:me,m:Ie,parent:Ue}=D,Re=rm(K);if(hu(D,!1),me&&K0(me),!Re&&(je=z&&z.onVnodeBeforeMount)&&da(je,Ue,K),hu(D,!0),Y&&ue){const $e=()=>{D.subTree=Jw(D),ue(Y,D.subTree,D,le,null)};Re?K.type.__asyncLoader().then(()=>!D.isUnmounted&&$e()):$e()}else{const $e=D.subTree=Jw(D);g(null,$e,re,ae,D,le,Se),K.el=$e.el}if(Ie&&fn(Ie,le),!Re&&(je=z&&z.onVnodeMounted)){const $e=K;fn(()=>da(je,Ue,$e),le)}(K.shapeFlag&256||Ue&&rm(Ue.vnode)&&Ue.vnode.shapeFlag&256)&&D.a&&fn(D.a,le),D.isMounted=!0,K=re=ae=null}},Me=D.effect=new Bw(Ne,()=>Xw(Le),D.scope),Le=D.update=()=>Me.run();Le.id=D.uid,hu(D,!0),Le()},R=(D,K,re)=>{K.component=D;const ae=D.vnode.props;D.vnode=K,D.next=null,XW(D,K.props,ae,re),JW(D,K.children,re),fh(),Nk(),mh()},F=(D,K,re,ae,le,Se,Ae,Ne,Me=!1)=>{const Le=D&&D.children,je=D?D.shapeFlag:0,Y=K.children,{patchFlag:z,shapeFlag:me}=K;if(z>0){if(z&128){H(Le,Y,re,ae,le,Se,Ae,Ne,Me);return}else if(z&256){O(Le,Y,re,ae,le,Se,Ae,Ne,Me);return}}me&8?(je&16&&xe(Le,le,Se),Y!==Le&&u(re,Y)):je&16?me&16?H(Le,Y,re,ae,le,Se,Ae,Ne,Me):xe(Le,le,Se,!0):(je&8&&u(re,""),me&16&&T(Y,re,ae,le,Se,Ae,Ne,Me))},O=(D,K,re,ae,le,Se,Ae,Ne,Me)=>{D=D||ls,K=K||ls;const Le=D.length,je=K.length,Y=Math.min(Le,je);let z;for(z=0;z<Y;z++){const me=K[z]=Me?$l(K[z]):ua(K[z]);g(D[z],me,re,null,le,Se,Ae,Ne,Me)}Le>je?xe(D,le,Se,!0,!1,Y):T(K,re,ae,le,Se,Ae,Ne,Me,Y)},H=(D,K,re,ae,le,Se,Ae,Ne,Me)=>{let Le=0;const je=K.length;let Y=D.length-1,z=je-1;for(;Le<=Y&&Le<=z;){const me=D[Le],Ie=K[Le]=Me?$l(K[Le]):ua(K[Le]);if(pu(me,Ie))g(me,Ie,re,null,le,Se,Ae,Ne,Me);else break;Le++}for(;Le<=Y&&Le<=z;){const me=D[Y],Ie=K[z]=Me?$l(K[z]):ua(K[z]);if(pu(me,Ie))g(me,Ie,re,null,le,Se,Ae,Ne,Me);else break;Y--,z--}if(Le>Y){if(Le<=z){const me=z+1,Ie=me<je?K[me].el:ae;for(;Le<=z;)g(null,K[Le]=Me?$l(K[Le]):ua(K[Le]),re,Ie,le,Se,Ae,Ne,Me),Le++}}else if(Le>z)for(;Le<=Y;)j(D[Le],le,Se,!0),Le++;else{const me=Le,Ie=Le,Ue=new Map;for(Le=Ie;Le<=z;Le++){const ie=K[Le]=Me?$l(K[Le]):ua(K[Le]);ie.key!=null&&Ue.set(ie.key,Le)}let Re,$e=0;const Ve=z-Ie+1;let ye=!1,q=0;const oe=new Array(Ve);for(Le=0;Le<Ve;Le++)oe[Le]=0;for(Le=me;Le<=Y;Le++){const ie=D[Le];if($e>=Ve){j(ie,le,Se,!0);continue}let De;if(ie.key!=null)De=Ue.get(ie.key);else for(Re=Ie;Re<=z;Re++)if(oe[Re-Ie]===0&&pu(ie,K[Re])){De=Re;break}De===void 0?j(ie,le,Se,!0):(oe[De-Ie]=Le+1,De>=q?q=De:ye=!0,g(ie,K[De],re,null,le,Se,Ae,Ne,Me),$e++)}const fe=ye?e9(oe):ls;for(Re=fe.length-1,Le=Ve-1;Le>=0;Le--){const ie=Ie+Le,De=K[ie],et=ie+1<je?K[ie+1].el:ae;oe[Le]===0?g(null,De,re,et,le,Se,Ae,Ne,Me):ye&&(Re<0||Le!==fe[Re]?$(De,re,et,2):Re--)}}},$=(D,K,re,ae,le=null)=>{const{el:Se,type:Ae,transition:Ne,children:Me,shapeFlag:Le}=D;if(Le&6){$(D.component.subTree,K,re,ae);return}if(Le&128){D.suspense.move(K,re,ae);return}if(Le&64){Ae.move(D,K,re,de);return}if(Ae===nt){i(Se,K,re);for(let je=0;je<Me.length;je++)$(Me[je],K,re,ae);i(D.anchor,K,re);return}if(Ae===pS){x(D,K,re);return}if(ae!==2&&Le&1&&Ne)if(ae===0)Ne.beforeEnter(Se),i(Se,K,re),fn(()=>Ne.enter(Se),le);else{const{leave:je,delayLeave:Y,afterLeave:z}=Ne,me=()=>i(Se,K,re),Ie=()=>{je(Se,()=>{me(),z&&z()})};Y?Y(Se,me,Ie):Ie()}else i(Se,K,re)},j=(D,K,re,ae=!1,le=!1)=>{const{type:Se,props:Ae,ref:Ne,children:Me,dynamicChildren:Le,shapeFlag:je,patchFlag:Y,dirs:z}=D;if(Ne!=null&&uS(Ne,null,re,D,!0),je&256){K.ctx.deactivate(D);return}const me=je&1&&z,Ie=!rm(D);let Ue;if(Ie&&(Ue=Ae&&Ae.onVnodeBeforeUnmount)&&da(Ue,K,D),je&6)ve(D.component,re,ae);else{if(je&128){D.suspense.unmount(re,ae);return}me&&uu(D,null,K,"beforeUnmount"),je&64?D.type.remove(D,K,re,le,de,ae):Le&&(Se!==nt||Y>0&&Y&64)?xe(Le,K,re,!1,!0):(Se===nt&&Y&384||!le&&je&16)&&xe(Me,K,re),ae&&J(D)}(Ie&&(Ue=Ae&&Ae.onVnodeUnmounted)||me)&&fn(()=>{Ue&&da(Ue,K,D),me&&uu(D,null,K,"unmounted")},re)},J=D=>{const{type:K,el:re,anchor:ae,transition:le}=D;if(K===nt){ce(re,ae);return}if(K===pS){_(D);return}const Se=()=>{o(re),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(D.shapeFlag&1&&le&&!le.persisted){const{leave:Ae,delayLeave:Ne}=le,Me=()=>Ae(re,Se);Ne?Ne(D.el,Se,Me):Me()}else Se()},ce=(D,K)=>{let re;for(;D!==K;)re=h(D),o(D),D=re;o(K)},ve=(D,K,re)=>{const{bum:ae,scope:le,update:Se,subTree:Ae,um:Ne}=D;ae&&K0(ae),le.stop(),Se&&(Se.active=!1,j(Ae,D,K,re)),Ne&&fn(Ne,K),fn(()=>{D.isUnmounted=!0},K),K&&K.pendingBranch&&!K.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===K.pendingId&&(K.deps--,K.deps===0&&K.resolve())},xe=(D,K,re,ae=!1,le=!1,Se=0)=>{for(let Ae=Se;Ae<D.length;Ae++)j(D[Ae],K,re,ae,le)},te=D=>D.shapeFlag&6?te(D.component.subTree):D.shapeFlag&128?D.suspense.next():h(D.anchor||D.el),Z=(D,K,re)=>{D==null?K._vnode&&j(K._vnode,null,null,!0):g(K._vnode||null,D,K,null,null,null,re),Nk(),Ak(),K._vnode=D},de={p:g,um:j,m:$,r:J,mt:P,mc:T,pc:F,pbc:C,n:te,o:r};let Ce,ue;return e&&([Ce,ue]=e(de)),{render:Z,hydrate:Ce,createApp:WW(Z,Ce)}}function hu({effect:r,update:e},t){r.allowRecurse=e.allowRecurse=t}function dS(r,e,t=!1){const i=r.children,o=e.children;if(it(i)&&it(o))for(let n=0;n<i.length;n++){const s=i[n];let a=o[n];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=o[n]=$l(o[n]),a.el=s.el),t||dS(s,a)),a.type===xh&&(a.el=s.el)}}function e9(r){const e=r.slice(),t=[0];let i,o,n,s,a;const l=r.length;for(i=0;i<l;i++){const c=r[i];if(c!==0){if(o=t[t.length-1],r[o]<c){e[i]=o,t.push(i);continue}for(n=0,s=t.length-1;n<s;)a=n+s>>1,r[t[a]]<c?n=a+1:s=a;c<r[t[n]]&&(n>0&&(e[i]=t[n-1]),t[n]=i)}}for(n=t.length,s=t[n-1];n-- >0;)t[n]=s,s=e[s];return t}const t9=r=>r.__isTeleport,nm=r=>r&&(r.disabled||r.disabled===""),sI=r=>typeof SVGElement<"u"&&r instanceof SVGElement,hS=(r,e)=>{const t=r&&r.to;return Tt(t)?e?e(t):null:t},r9={__isTeleport:!0,process(r,e,t,i,o,n,s,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:m,createText:g,createComment:v}}=c,y=nm(e.props);let{shapeFlag:b,children:x,dynamicChildren:_}=e;if(r==null){const S=e.el=g(""),w=e.anchor=g("");p(S,t,i),p(w,t,i);const M=e.target=hS(e.props,m),T=e.targetAnchor=g("");M&&(p(T,M),s=s||sI(M));const E=(C,B)=>{b&16&&u(x,C,B,o,n,s,a,l)};y?E(t,w):M&&E(M,T)}else{e.el=r.el;const S=e.anchor=r.anchor,w=e.target=r.target,M=e.targetAnchor=r.targetAnchor,T=nm(r.props),E=T?t:w,C=T?S:M;if(s=s||sI(w),_?(h(r.dynamicChildren,_,E,o,n,s,a),dS(r,e,!0)):l||d(r,e,E,C,o,n,s,a,!1),y)T||my(e,t,S,c,1);else if((e.props&&e.props.to)!==(r.props&&r.props.to)){const B=e.target=hS(e.props,m);B&&my(e,B,null,c,0)}else T&&my(e,w,M,c,1)}aI(e)},remove(r,e,t,i,{um:o,o:{remove:n}},s){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:h}=r;if(d&&n(u),(s||!nm(h))&&(n(c),a&16))for(let p=0;p<l.length;p++){const m=l[p];o(m,e,t,!0,!!m.dynamicChildren)}},move:my,hydrate:i9};function my(r,e,t,{o:{insert:i},m:o},n=2){n===0&&i(r.targetAnchor,e,t);const{el:s,anchor:a,shapeFlag:l,children:c,props:u}=r,d=n===2;if(d&&i(s,e,t),(!d||nm(u))&&l&16)for(let h=0;h<c.length;h++)o(c[h],e,t,2);d&&i(a,e,t)}function i9(r,e,t,i,o,n,{o:{nextSibling:s,parentNode:a,querySelector:l}},c){const u=e.target=hS(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(nm(e.props))e.anchor=c(s(r),e,a(r),t,i,o,n),e.targetAnchor=d;else{e.anchor=s(r);let h=d;for(;h;)if(h=s(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,u._lpa=e.targetAnchor&&s(e.targetAnchor);break}c(d,e,u,t,i,o,n)}aI(e)}return e.anchor&&s(e.anchor)}const sm=r9;function aI(r){const e=r.ctx;if(e&&e.ut){let t=r.children[0].el;for(;t!==r.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}const nt=Symbol.for("v-fgt"),xh=Symbol.for("v-txt"),$o=Symbol.for("v-cmt"),pS=Symbol.for("v-stc"),am=[];let Ds=null;function A(r=!1){am.push(Ds=r?null:[])}function o9(){am.pop(),Ds=am[am.length-1]||null}let lm=1;function lI(r){lm+=r}function cI(r){return r.dynamicChildren=lm>0?Ds||ls:null,o9(),lm>0&&Ds&&Ds.push(r),r}function W(r,e,t,i,o,n){return cI(X(r,e,t,i,o,n,!0))}function _e(r,e,t,i,o){return cI(ee(r,e,t,i,o,!0))}function $r(r){return r?r.__v_isVNode===!0:!1}function pu(r,e){return r.type===e.type&&r.key===e.key}const gy="__vInternal",uI=({key:r})=>r??null,vy=({ref:r,ref_key:e,ref_for:t})=>(typeof r=="number"&&(r=""+r),r!=null?Tt(r)||Ar(r)||St(r)?{i:vo,r,k:e,f:!!t}:r:null);function X(r,e=null,t=null,i=0,o=null,n=r===nt?0:1,s=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&uI(e),ref:e&&vy(e),scopeId:ay,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:vo};return a?(fS(l,t),n&128&&r.normalize(l)):t&&(l.shapeFlag|=Tt(t)?8:16),lm>0&&!s&&Ds&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&Ds.push(l),l}const ee=n9;function n9(r,e=null,t=null,i=0,o=null,n=!1){if((!r||r===Vk)&&(r=$o),$r(r)){const a=Ja(r,e,!0);return t&&fS(a,t),lm>0&&!n&&Ds&&(a.shapeFlag&6?Ds[Ds.indexOf(r)]=a:Ds.push(a)),a.patchFlag|=-2,a}if(p9(r)&&(r=r.__vccOpts),e){e=yy(e);let{class:a,style:l}=e;a&&!Tt(a)&&(e.class=k(a)),zt(l)&&(xk(l)&&!it(l)&&(l=Si({},l)),e.style=ct(l))}const s=Tt(r)?1:EW(r)?128:t9(r)?64:zt(r)?4:St(r)?2:0;return X(r,e,t,i,o,s,n,!0)}function yy(r){return r?xk(r)||gy in r?Si({},r):r:null}function Ja(r,e,t=!1){const{props:i,ref:o,patchFlag:n,children:s}=r,a=e?$t(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:a,key:a&&uI(a),ref:e&&e.ref?t&&o?it(o)?o.concat(vy(e)):[o,vy(e)]:vy(e):o,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:s,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==nt?n===-1?16:n|16:n,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&Ja(r.ssContent),ssFallback:r.ssFallback&&Ja(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function rr(r=" ",e=0){return ee(xh,null,r,e)}function we(r="",e=!1){return e?(A(),_e($o,null,r)):ee($o,null,r)}function ua(r){return r==null||typeof r=="boolean"?ee($o):it(r)?ee(nt,null,r.slice()):typeof r=="object"?$l(r):ee(xh,null,String(r))}function $l(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:Ja(r)}function fS(r,e){let t=0;const{shapeFlag:i}=r;if(e==null)e=null;else if(it(e))t=16;else if(typeof e=="object")if(i&65){const o=e.default;o&&(o._c&&(o._d=!1),fS(r,o()),o._c&&(o._d=!0));return}else{t=32;const o=e._;!o&&!(gy in e)?e._ctx=vo:o===3&&vo&&(vo.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else St(e)?(e={default:e,_ctx:vo},t=32):(e=String(e),i&64?(t=16,e=[rr(e)]):t=8);r.children=e,r.shapeFlag|=t}function $t(...r){const e={};for(let t=0;t<r.length;t++){const i=r[t];for(const o in i)if(o==="class")e.class!==i.class&&(e.class=k([e.class,i.class]));else if(o==="style")e.style=ct([e.style,i.style]);else if(H0(o)){const n=e[o],s=i[o];s&&n!==s&&!(it(n)&&n.includes(s))&&(e[o]=n?[].concat(n,s):s)}else o!==""&&(e[o]=i[o])}return e}function da(r,e,t,i=null){us(r,e,7,[t,i])}const s9=Yk();let a9=0;function l9(r,e,t){const i=r.type,o=(e?e.appContext:r.appContext)||s9,n={uid:a9++,vnode:r,type:i,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new QO(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Zk(i,o),emitsOptions:Lk(i,o),emit:null,emitted:null,propsDefaults:xr,inheritAttrs:i.inheritAttrs,ctx:xr,data:xr,props:xr,attrs:xr,slots:xr,refs:xr,setupState:xr,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return n.ctx={_:n},n.root=e?e.root:n,n.emit=_W.bind(null,n),r.ce&&r.ce(n),n}let to=null;const It=()=>to||vo;let mS,_h,dI="__VUE_INSTANCE_SETTERS__";(_h=kw()[dI])||(_h=kw()[dI]=[]),_h.push(r=>to=r),mS=r=>{_h.length>1?_h.forEach(e=>e(r)):_h[0](r)};const wh=r=>{mS(r),r.scope.on()},fu=()=>{to&&to.scope.off(),mS(null)};function hI(r){return r.vnode.shapeFlag&4}let cm=!1;function c9(r,e=!1){cm=e;const{props:t,children:i}=r.vnode,o=hI(r);qW(r,t,o,e),YW(r,i);const n=o?u9(r,e):void 0;return cm=!1,n}function u9(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=au(new Proxy(r.ctx,UW));const{setup:i}=t;if(i){const o=r.setupContext=i.length>1?gI(r):null;wh(r),fh();const n=jl(i,r,0,[r.props,o]);if(mh(),fu(),$f(n)){if(n.then(fu,fu),e)return n.then(s=>{pI(r,s,e)}).catch(s=>{ny(s,r,0)});r.asyncDep=n}else pI(r,n,e)}else mI(r,e)}function pI(r,e,t){St(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:zt(e)&&(r.setupState=Sk(e)),mI(r,t)}let fI;function mI(r,e,t){const i=r.type;if(!r.render){if(!e&&fI&&!i.render){const o=i.template||sS(r).template;if(o){const{isCustomElement:n,compilerOptions:s}=r.appContext.config,{delimiters:a,compilerOptions:l}=i,c=Si(Si({isCustomElement:n,delimiters:a},s),l);i.render=fI(o,c)}}r.render=i.render||_r}wh(r),fh(),zW(r),mh(),fu()}function d9(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(e,t){return pn(r,"get","$attrs"),e[t]}}))}function gI(r){const e=t=>{r.exposed=t||{}};return{get attrs(){return d9(r)},slots:r.slots,emit:r.emit,expose:e}}function by(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(Sk(au(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in im)return im[t](r)},has(e,t){return t in e||t in im}}))}function h9(r,e=!0){return St(r)?r.displayName||r.name:r.name||e&&r.__name}function p9(r){return St(r)&&"__vccOpts"in r}const N=(r,e)=>Tk(r,e,cm);function pt(r,e,t){const i=arguments.length;return i===2?zt(e)&&!it(e)?$r(e)?ee(r,null,[e]):ee(r,e):ee(r,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&$r(t)&&(t=[t]),ee(r,e,t))}const f9=Symbol.for("v-scx"),m9=()=>ot(f9),g9="3.3.4",v9="http://www.w3.org/2000/svg",mu=typeof document<"u"?document:null,vI=mu&&mu.createElement("template"),y9={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,i)=>{const o=e?mu.createElementNS(v9,r):mu.createElement(r,t?{is:t}:void 0);return r==="select"&&i&&i.multiple!=null&&o.setAttribute("multiple",i.multiple),o},createText:r=>mu.createTextNode(r),createComment:r=>mu.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>mu.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,t,i,o,n){const s=t?t.previousSibling:e.lastChild;if(o&&(o===n||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),t),!(o===n||!(o=o.nextSibling)););else{vI.innerHTML=i?`<svg>${r}</svg>`:r;const a=vI.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[s?s.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function b9(r,e,t){const i=r._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}function x9(r,e,t){const i=r.style,o=Tt(t);if(t&&!o){if(e&&!Tt(e))for(const n in e)t[n]==null&&gS(i,n,"");for(const n in t)gS(i,n,t[n])}else{const n=i.display;o?e!==t&&(i.cssText=t):e&&r.removeAttribute("style"),"_vod"in r&&(i.display=n)}}const yI=/\s*!important$/;function gS(r,e,t){if(it(t))t.forEach(i=>gS(r,e,i));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const i=_9(r,e);yI.test(t)?r.setProperty(zl(i),t.replace(yI,""),"important"):r[i]=t}}const bI=["Webkit","Moz","ms"],vS={};function _9(r,e){const t=vS[e];if(t)return t;let i=cs(e);if(i!=="filter"&&i in r)return vS[e]=i;i=qf(i);for(let o=0;o<bI.length;o++){const n=bI[o]+i;if(n in r)return vS[e]=n}return e}const xI="http://www.w3.org/1999/xlink";function w9(r,e,t,i,o){if(i&&e.startsWith("xlink:"))t==null?r.removeAttributeNS(xI,e.slice(6,e.length)):r.setAttributeNS(xI,e,t);else{const n=I$(e);t==null||n&&!YO(t)?r.removeAttribute(e):r.setAttribute(e,n?"":t)}}function S9(r,e,t,i,o,n,s){if(e==="innerHTML"||e==="textContent"){i&&s(i,o,n),r[e]=t??"";return}const a=r.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){r._value=t;const c=a==="OPTION"?r.getAttribute("value"):r.value,u=t??"";c!==u&&(r.value=u),t==null&&r.removeAttribute(e);return}let l=!1;if(t===""||t==null){const c=typeof r[e];c==="boolean"?t=YO(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{r[e]=t}catch{}l&&r.removeAttribute(e)}function Wl(r,e,t,i){r.addEventListener(e,t,i)}function M9(r,e,t,i){r.removeEventListener(e,t,i)}function T9(r,e,t,i,o=null){const n=r._vei||(r._vei={}),s=n[e];if(i&&s)s.value=i;else{const[a,l]=E9(e);if(i){const c=n[e]=A9(i,o);Wl(r,a,c,l)}else s&&(M9(r,a,s,l),n[e]=void 0)}}const _I=/(?:Once|Passive|Capture)$/;function E9(r){let e;if(_I.test(r)){e={};let t;for(;t=r.match(_I);)r=r.slice(0,r.length-t[0].length),e[t[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):zl(r.slice(2)),e]}let yS=0;const C9=Promise.resolve(),N9=()=>yS||(C9.then(()=>yS=0),yS=Date.now());function A9(r,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;us(R9(i,t.value),e,5,[i])};return t.value=r,t.attached=N9(),t}function R9(r,e){if(it(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(i=>o=>!o._stopped&&i&&i(o))}else return e}const wI=/^on[a-z]/,L9=(r,e,t,i,o=!1,n,s,a,l)=>{e==="class"?b9(r,i,o):e==="style"?x9(r,t,i):H0(e)?Aw(e)||T9(r,e,t,i,s):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):O9(r,e,i,o))?S9(r,e,i,n,s,a,l):(e==="true-value"?r._trueValue=i:e==="false-value"&&(r._falseValue=i),w9(r,e,i,o))};function O9(r,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in r&&wI.test(e)&&St(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA"||wI.test(e)&&Tt(t)?!1:e in r}const ql="transition",um="animation",fi=(r,{slots:e})=>pt(RW,TI(r),e);fi.displayName="Transition";const SI={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},k9=fi.props=Si({},Pk,SI),gu=(r,e=[])=>{it(r)?r.forEach(t=>t(...e)):r&&r(...e)},MI=r=>r?it(r)?r.some(e=>e.length>1):r.length>1:!1;function TI(r){const e={};for(const I in r)I in SI||(e[I]=r[I]);if(r.css===!1)return e;const{name:t="v",type:i,duration:o,enterFromClass:n=`${t}-enter-from`,enterActiveClass:s=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=n,appearActiveClass:c=s,appearToClass:u=a,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=r,m=I9(o),g=m&&m[0],v=m&&m[1],{onBeforeEnter:y,onEnter:b,onEnterCancelled:x,onLeave:_,onLeaveCancelled:S,onBeforeAppear:w=y,onAppear:M=b,onAppearCancelled:T=x}=e,E=(I,L,P)=>{Xl(I,L?u:a),Xl(I,L?c:s),P&&P()},C=(I,L)=>{I._isLeaving=!1,Xl(I,d),Xl(I,p),Xl(I,h),L&&L()},B=I=>(L,P)=>{const U=I?M:b,G=()=>E(L,I,P);gu(U,[L,G]),EI(()=>{Xl(L,I?l:n),Za(L,I?u:a),MI(U)||CI(L,i,g,G)})};return Si(e,{onBeforeEnter(I){gu(y,[I]),Za(I,n),Za(I,s)},onBeforeAppear(I){gu(w,[I]),Za(I,l),Za(I,c)},onEnter:B(!1),onAppear:B(!0),onLeave(I,L){I._isLeaving=!0;const P=()=>C(I,L);Za(I,d),LI(),Za(I,h),EI(()=>{I._isLeaving&&(Xl(I,d),Za(I,p),MI(_)||CI(I,i,v,P))}),gu(_,[I,P])},onEnterCancelled(I){E(I,!1),gu(x,[I])},onAppearCancelled(I){E(I,!0),gu(T,[I])},onLeaveCancelled(I){C(I),gu(S,[I])}})}function I9(r){if(r==null)return null;if(zt(r))return[bS(r.enter),bS(r.leave)];{const e=bS(r);return[e,e]}}function bS(r){return N$(r)}function Za(r,e){e.split(/\s+/).forEach(t=>t&&r.classList.add(t)),(r._vtc||(r._vtc=new Set)).add(e)}function Xl(r,e){e.split(/\s+/).forEach(i=>i&&r.classList.remove(i));const{_vtc:t}=r;t&&(t.delete(e),t.size||(r._vtc=void 0))}function EI(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let P9=0;function CI(r,e,t,i){const o=r._endId=++P9,n=()=>{o===r._endId&&i()};if(t)return setTimeout(n,t);const{type:s,timeout:a,propCount:l}=NI(r,e);if(!s)return i();const c=s+"end";let u=0;const d=()=>{r.removeEventListener(c,h),n()},h=p=>{p.target===r&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),r.addEventListener(c,h)}function NI(r,e){const t=window.getComputedStyle(r),i=m=>(t[m]||"").split(", "),o=i(`${ql}Delay`),n=i(`${ql}Duration`),s=AI(o,n),a=i(`${um}Delay`),l=i(`${um}Duration`),c=AI(a,l);let u=null,d=0,h=0;e===ql?s>0&&(u=ql,d=s,h=n.length):e===um?c>0&&(u=um,d=c,h=l.length):(d=Math.max(s,c),u=d>0?s>c?ql:um:null,h=u?u===ql?n.length:l.length:0);const p=u===ql&&/\b(transform|all)(,|$)/.test(i(`${ql}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:p}}function AI(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((t,i)=>RI(t)+RI(r[i])))}function RI(r){return Number(r.slice(0,-1).replace(",","."))*1e3}function LI(){return document.body.offsetHeight}const OI=new WeakMap,kI=new WeakMap,II={name:"TransitionGroup",props:Si({},k9,{tag:String,moveClass:String}),setup(r,{slots:e}){const t=It(),i=Ik();let o,n;return Ka(()=>{if(!o.length)return;const s=r.moveClass||`${r.name||"v"}-move`;if(!U9(o[0].el,t.vnode.el,s))return;o.forEach(D9),o.forEach(B9);const a=o.filter(F9);LI(),a.forEach(l=>{const c=l.el,u=c.style;Za(c,s),u.transform=u.webkitTransform=u.transitionDuration="";const d=c._moveCb=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c._moveCb=null,Xl(c,s))};c.addEventListener("transitionend",d)})}),()=>{const s=fr(r),a=TI(s);let l=s.tag||nt;o=n,n=e.default?eS(e.default()):[];for(let c=0;c<n.length;c++){const u=n[c];u.key!=null&&tm(u,em(u,a,i,t))}if(o)for(let c=0;c<o.length;c++){const u=o[c];tm(u,em(u,a,i,t)),OI.set(u,u.el.getBoundingClientRect())}return ee(l,null,n)}}},yze=r=>delete r.mode;II.props;const PI=II;function D9(r){const e=r.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function B9(r){kI.set(r,r.el.getBoundingClientRect())}function F9(r){const e=OI.get(r),t=kI.get(r),i=e.left-t.left,o=e.top-t.top;if(i||o){const n=r.el.style;return n.transform=n.webkitTransform=`translate(${i}px,${o}px)`,n.transitionDuration="0s",r}}function U9(r,e,t){const i=r.cloneNode();r._vtc&&r._vtc.forEach(s=>{s.split(/\s+/).forEach(a=>a&&i.classList.remove(a))}),t.split(/\s+/).forEach(s=>s&&i.classList.add(s)),i.style.display="none";const o=e.nodeType===1?e:e.parentNode;o.appendChild(i);const{hasTransform:n}=NI(i);return o.removeChild(i),n}const Sh=r=>{const e=r.props["onUpdate:modelValue"]||!1;return it(e)?t=>K0(e,t):e};function z9(r){r.target.composing=!0}function DI(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const xS={created(r,{modifiers:{lazy:e,trim:t,number:i}},o){r._assign=Sh(o);const n=i||o.props&&o.props.type==="number";Wl(r,e?"change":"input",s=>{if(s.target.composing)return;let a=r.value;t&&(a=a.trim()),n&&(a=Ow(a)),r._assign(a)}),t&&Wl(r,"change",()=>{r.value=r.value.trim()}),e||(Wl(r,"compositionstart",z9),Wl(r,"compositionend",DI),Wl(r,"change",DI))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,modifiers:{lazy:t,trim:i,number:o}},n){if(r._assign=Sh(n),r.composing||document.activeElement===r&&r.type!=="range"&&(t||i&&r.value.trim()===e||(o||r.type==="number")&&Ow(r.value)===e))return;const s=e??"";r.value!==s&&(r.value=s)}},xy={deep:!0,created(r,e,t){r._assign=Sh(t),Wl(r,"change",()=>{const i=r._modelValue,o=UI(r),n=r.checked,s=r._assign;if(it(i)){const a=JO(i,o),l=a!==-1;if(n&&!l)s(i.concat(o));else if(!n&&l){const c=[...i];c.splice(a,1),s(c)}}else if(j0(i)){const a=new Set(i);n?a.add(o):a.delete(o),s(a)}else s(zI(r,n))})},mounted:BI,beforeUpdate(r,e,t){r._assign=Sh(t),BI(r,e,t)}};function BI(r,{value:e,oldValue:t},i){r._modelValue=e,it(e)?r.checked=JO(e,i.props.value)>-1:j0(e)?r.checked=e.has(i.props.value):e!==t&&(r.checked=ph(e,zI(r,!0)))}const FI={created(r,{value:e},t){r.checked=ph(e,t.props.value),r._assign=Sh(t),Wl(r,"change",()=>{r._assign(UI(r))})},beforeUpdate(r,{value:e,oldValue:t},i){r._assign=Sh(i),e!==t&&(r.checked=ph(e,i.props.value))}};function UI(r){return"_value"in r?r._value:r.value}function zI(r,e){const t=e?"_trueValue":"_falseValue";return t in r?r[t]:e}const V9=["ctrl","shift","alt","meta"],G9={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>V9.some(t=>r[`${t}Key`]&&!e.includes(t))},vt=(r,e)=>(t,...i)=>{for(let o=0;o<e.length;o++){const n=G9[e[o]];if(n&&n(t,e))return}return r(t,...i)},H9={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Qt=(r,e)=>t=>{if(!("key"in t))return;const i=zl(t.key);if(e.some(o=>o===i||H9[o]===i))return r(t)},nr={beforeMount(r,{value:e},{transition:t}){r._vod=r.style.display==="none"?"":r.style.display,t&&e?t.beforeEnter(r):dm(r,e)},mounted(r,{value:e},{transition:t}){t&&e&&t.enter(r)},updated(r,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(r),dm(r,!0),i.enter(r)):i.leave(r,()=>{dm(r,!1)}):dm(r,e))},beforeUnmount(r,{value:e}){dm(r,e)}};function dm(r,e){r.style.display=e?r._vod:"none"}const j9=Si({patchProp:L9},y9);let VI;function GI(){return VI||(VI=ZW(j9))}const Mh=(...r)=>{GI().render(...r)},HI=(...r)=>{const e=GI().createApp(...r),{mount:t}=e;return e.mount=i=>{const o=$9(i);if(!o)return;const n=e._component;!St(n)&&!n.render&&!n.template&&(n.template=o.innerHTML),o.innerHTML="";const s=t(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),s},e};function $9(r){return Tt(r)?document.querySelector(r):r}function W9(){return jI().__VUE_DEVTOOLS_GLOBAL_HOOK__}function jI(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const q9=typeof Proxy=="function",X9="devtools-plugin:setup",K9="plugin:settings:set";let hm,_S;function Y9(){var r;return hm!==void 0||(typeof window<"u"&&window.performance?(hm=!0,_S=window.performance):typeof global<"u"&&!((r=global.perf_hooks)===null||r===void 0)&&r.performance?(hm=!0,_S=global.perf_hooks.performance):hm=!1),hm}function J9(){return Y9()?_S.now():Date.now()}class Z9{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const i={};if(e.settings)for(const s in e.settings){const a=e.settings[s];i[s]=a.defaultValue}const o=`__vue-devtools-plugin-settings__${e.id}`;let n=Object.assign({},i);try{const s=localStorage.getItem(o),a=JSON.parse(s);Object.assign(n,a)}catch{}this.fallbacks={getSettings(){return n},setSettings(s){try{localStorage.setItem(o,JSON.stringify(s))}catch{}n=s},now(){return J9()}},t&&t.on(K9,(s,a)=>{s===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(s,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(s,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function Q9(r,e){const t=r,i=jI(),o=W9(),n=q9&&t.enableEarlyProxy;if(o&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!n))o.emit(X9,r,e);else{const s=n?new Z9(t,o):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e,proxy:s}),s&&e(s.proxiedTarget)}}const Th=typeof window<"u";function e7(r){return r.__esModule||r[Symbol.toStringTag]==="Module"}const Gr=Object.assign;function wS(r,e){const t={};for(const i in e){const o=e[i];t[i]=Bs(o)?o.map(r):r(o)}return t}const pm=()=>{},Bs=Array.isArray,t7=/\/$/,r7=r=>r.replace(t7,"");function SS(r,e,t="/"){let i,o={},n="",s="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),n=e.slice(l+1,a>-1?a:e.length),o=r(n)),a>-1&&(i=i||e.slice(0,a),s=e.slice(a,e.length)),i=s7(i??e,t),{fullPath:i+(n&&"?")+n+s,path:i,query:o,hash:s}}function i7(r,e){const t=e.query?r(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function $I(r,e){return!e||!r.toLowerCase().startsWith(e.toLowerCase())?r:r.slice(e.length)||"/"}function o7(r,e,t){const i=e.matched.length-1,o=t.matched.length-1;return i>-1&&i===o&&Eh(e.matched[i],t.matched[o])&&WI(e.params,t.params)&&r(e.query)===r(t.query)&&e.hash===t.hash}function Eh(r,e){return(r.aliasOf||r)===(e.aliasOf||e)}function WI(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(!n7(r[t],e[t]))return!1;return!0}function n7(r,e){return Bs(r)?qI(r,e):Bs(e)?qI(e,r):r===e}function qI(r,e){return Bs(e)?r.length===e.length&&r.every((t,i)=>t===e[i]):r.length===1&&r[0]===e}function s7(r,e){if(r.startsWith("/"))return r;if(!r)return e;const t=e.split("/"),i=r.split("/"),o=i[i.length-1];(o===".."||o===".")&&i.push("");let n=t.length-1,s,a;for(s=0;s<i.length;s++)if(a=i[s],a!==".")if(a==="..")n>1&&n--;else break;return t.slice(0,n).join("/")+"/"+i.slice(s-(s===i.length?1:0)).join("/")}var fm;(function(r){r.pop="pop",r.push="push"})(fm||(fm={}));var mm;(function(r){r.back="back",r.forward="forward",r.unknown=""})(mm||(mm={}));function a7(r){if(!r)if(Th){const e=document.querySelector("base");r=e&&e.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),r7(r)}const l7=/^[^#]+#/;function c7(r,e){return r.replace(l7,"#")+e}function u7(r,e){const t=document.documentElement.getBoundingClientRect(),i=r.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const _y=()=>({left:window.pageXOffset,top:window.pageYOffset});function d7(r){let e;if("el"in r){const t=r.el,i=typeof t=="string"&&t.startsWith("#"),o=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!o)return;e=u7(o,r)}else e=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function XI(r,e){return(history.state?history.state.position-e:-1)+r}const MS=new Map;function h7(r,e){MS.set(r,e)}function p7(r){const e=MS.get(r);return MS.delete(r),e}let f7=()=>location.protocol+"//"+location.host;function KI(r,e){const{pathname:t,search:i,hash:o}=e,n=r.indexOf("#");if(n>-1){let s=o.includes(r.slice(n))?r.slice(n).length:1,a=o.slice(s);return a[0]!=="/"&&(a="/"+a),$I(a,"")}return $I(t,r)+i+o}function m7(r,e,t,i){let o=[],n=[],s=null;const a=({state:h})=>{const p=KI(r,location),m=t.value,g=e.value;let v=0;if(h){if(t.value=p,e.value=h,s&&s===m){s=null;return}v=g?h.position-g.position:0}else i(p);o.forEach(y=>{y(t.value,m,{delta:v,type:fm.pop,direction:v?v>0?mm.forward:mm.back:mm.unknown})})};function l(){s=t.value}function c(h){o.push(h);const p=()=>{const m=o.indexOf(h);m>-1&&o.splice(m,1)};return n.push(p),p}function u(){const{history:h}=window;h.state&&h.replaceState(Gr({},h.state,{scroll:_y()}),"")}function d(){for(const h of n)h();n=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function YI(r,e,t,i=!1,o=!1){return{back:r,current:e,forward:t,replaced:i,position:window.history.length,scroll:o?_y():null}}function g7(r){const{history:e,location:t}=window,i={value:KI(r,t)},o={value:e.state};o.value||n(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function n(l,c,u){const d=r.indexOf("#"),h=d>-1?(t.host&&document.querySelector("base")?r:r.slice(d))+l:f7()+r+l;try{e[u?"replaceState":"pushState"](c,"",h),o.value=c}catch(p){console.error(p),t[u?"replace":"assign"](h)}}function s(l,c){const u=Gr({},e.state,YI(o.value.back,l,o.value.forward,!0),c,{position:o.value.position});n(l,u,!0),i.value=l}function a(l,c){const u=Gr({},o.value,e.state,{forward:l,scroll:_y()});n(u.current,u,!0);const d=Gr({},YI(i.value,l,null),{position:u.position+1},c);n(l,d,!1),i.value=l}return{location:i,state:o,push:a,replace:s}}function v7(r){r=a7(r);const e=g7(r),t=m7(r,e.state,e.location,e.replace);function i(n,s=!0){s||t.pauseListeners(),history.go(n)}const o=Gr({location:"",base:r,go:i,createHref:c7.bind(null,r)},e,t);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function y7(r){return r=location.host?r||location.pathname+location.search:"",r.includes("#")||(r+="#"),v7(r)}function b7(r){return typeof r=="string"||r&&typeof r=="object"}function JI(r){return typeof r=="string"||typeof r=="symbol"}const Kl={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ZI=Symbol("");var QI;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(QI||(QI={}));function Ch(r,e){return Gr(new Error,{type:r,[ZI]:!0},e)}function Qa(r,e){return r instanceof Error&&ZI in r&&(e==null||!!(r.type&e))}const e3="[^/]+?",x7={sensitive:!1,strict:!1,start:!0,end:!0},_7=/[.+*?^${}()[\]/\\]/g;function w7(r,e){const t=Gr({},x7,e),i=[];let o=t.start?"^":"";const n=[];for(const c of r){const u=c.length?[]:[90];t.strict&&!c.length&&(o+="/");for(let d=0;d<c.length;d++){const h=c[d];let p=40+(t.sensitive?.25:0);if(h.type===0)d||(o+="/"),o+=h.value.replace(_7,"\\$&"),p+=40;else if(h.type===1){const{value:m,repeatable:g,optional:v,regexp:y}=h;n.push({name:m,repeatable:g,optional:v});const b=y||e3;if(b!==e3){p+=10;try{new RegExp(`(${b})`)}catch(_){throw new Error(`Invalid custom RegExp for param "${m}" (${b}): `+_.message)}}let x=g?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;d||(x=v&&c.length<2?`(?:/${x})`:"/"+x),v&&(x+="?"),o+=x,p+=20,v&&(p+=-8),g&&(p+=-20),b===".*"&&(p+=-50)}u.push(p)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(o+="/?"),t.end?o+="$":t.strict&&(o+="(?:/|$)");const s=new RegExp(o,t.sensitive?"":"i");function a(c){const u=c.match(s),d={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",m=n[h-1];d[m.name]=p&&m.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const h of r){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of h)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:g,optional:v}=p,y=m in c?c[m]:"";if(Bs(y)&&!g)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const b=Bs(y)?y.join("/"):y;if(!b)if(v)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=b}}return u||"/"}return{re:s,score:i,keys:n,parse:a,stringify:l}}function S7(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=e[t]-r[t];if(i)return i;t++}return r.length<e.length?r.length===1&&r[0]===40+40?-1:1:r.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function M7(r,e){let t=0;const i=r.score,o=e.score;for(;t<i.length&&t<o.length;){const n=S7(i[t],o[t]);if(n)return n;t++}if(Math.abs(o.length-i.length)===1){if(t3(i))return 1;if(t3(o))return-1}return o.length-i.length}function t3(r){const e=r[r.length-1];return r.length>0&&e[e.length-1]<0}const T7={type:0,value:""},E7=/[a-zA-Z0-9_]/;function C7(r){if(!r)return[[]];if(r==="/")return[[T7]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function e(p){throw new Error(`ERR (${t})/"${c}": ${p}`)}let t=0,i=t;const o=[];let n;function s(){n&&o.push(n),n=[]}let a=0,l,c="",u="";function d(){c&&(t===0?n.push({type:0,value:c}):t===1||t===2||t===3?(n.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),n.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<r.length;){if(l=r[a++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&d(),s()):l===":"?(d(),t=1):h();break;case 4:h(),t=i;break;case 1:l==="("?t=2:E7.test(l)?h():(d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),s(),o}function N7(r,e,t){const i=w7(C7(r.path),t),o=Gr(i,{record:r,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function A7(r,e){const t=[],i=new Map;e=o3({strict:!1,end:!0,sensitive:!1},e);function o(u){return i.get(u)}function n(u,d,h){const p=!h,m=R7(u);m.aliasOf=h&&h.record;const g=o3(e,u),v=[m];if("alias"in u){const x=typeof u.alias=="string"?[u.alias]:u.alias;for(const _ of x)v.push(Gr({},m,{components:h?h.record.components:m.components,path:_,aliasOf:h?h.record:m}))}let y,b;for(const x of v){const{path:_}=x;if(d&&_[0]!=="/"){const S=d.record.path,w=S[S.length-1]==="/"?"":"/";x.path=d.record.path+(_&&w+_)}if(y=N7(x,d,g),h?h.alias.push(y):(b=b||y,b!==y&&b.alias.push(y),p&&u.name&&!i3(y)&&s(u.name)),m.children){const S=m.children;for(let w=0;w<S.length;w++)n(S[w],y,h&&h.children[w])}h=h||y,(y.record.components&&Object.keys(y.record.components).length||y.record.name||y.record.redirect)&&l(y)}return b?()=>{s(b)}:pm}function s(u){if(JI(u)){const d=i.get(u);d&&(i.delete(u),t.splice(t.indexOf(d),1),d.children.forEach(s),d.alias.forEach(s))}else{const d=t.indexOf(u);d>-1&&(t.splice(d,1),u.record.name&&i.delete(u.record.name),u.children.forEach(s),u.alias.forEach(s))}}function a(){return t}function l(u){let d=0;for(;d<t.length&&M7(u,t[d])>=0&&(u.record.path!==t[d].record.path||!n3(u,t[d]));)d++;t.splice(d,0,u),u.record.name&&!i3(u)&&i.set(u.record.name,u)}function c(u,d){let h,p={},m,g;if("name"in u&&u.name){if(h=i.get(u.name),!h)throw Ch(1,{location:u});g=h.record.name,p=Gr(r3(d.params,h.keys.filter(b=>!b.optional).map(b=>b.name)),u.params&&r3(u.params,h.keys.map(b=>b.name))),m=h.stringify(p)}else if("path"in u)m=u.path,h=t.find(b=>b.re.test(m)),h&&(p=h.parse(m),g=h.record.name);else{if(h=d.name?i.get(d.name):t.find(b=>b.re.test(d.path)),!h)throw Ch(1,{location:u,currentLocation:d});g=h.record.name,p=Gr({},d.params,u.params),m=h.stringify(p)}const v=[];let y=h;for(;y;)v.unshift(y.record),y=y.parent;return{name:g,path:m,params:p,matched:v,meta:O7(v)}}return r.forEach(u=>n(u)),{addRoute:n,resolve:c,removeRoute:s,getRoutes:a,getRecordMatcher:o}}function r3(r,e){const t={};for(const i of e)i in r&&(t[i]=r[i]);return t}function R7(r){return{path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:void 0,beforeEnter:r.beforeEnter,props:L7(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}}}function L7(r){const e={},t=r.props||!1;if("component"in r)e.default=t;else for(const i in r.components)e[i]=typeof t=="object"?t[i]:t;return e}function i3(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function O7(r){return r.reduce((e,t)=>Gr(e,t.meta),{})}function o3(r,e){const t={};for(const i in r)t[i]=i in e?e[i]:r[i];return t}function n3(r,e){return e.children.some(t=>t===r||n3(r,t))}const s3=/#/g,k7=/&/g,I7=/\//g,P7=/=/g,D7=/\?/g,a3=/\+/g,B7=/%5B/g,F7=/%5D/g,l3=/%5E/g,U7=/%60/g,c3=/%7B/g,z7=/%7C/g,u3=/%7D/g,V7=/%20/g;function TS(r){return encodeURI(""+r).replace(z7,"|").replace(B7,"[").replace(F7,"]")}function G7(r){return TS(r).replace(c3,"{").replace(u3,"}").replace(l3,"^")}function ES(r){return TS(r).replace(a3,"%2B").replace(V7,"+").replace(s3,"%23").replace(k7,"%26").replace(U7,"`").replace(c3,"{").replace(u3,"}").replace(l3,"^")}function H7(r){return ES(r).replace(P7,"%3D")}function j7(r){return TS(r).replace(s3,"%23").replace(D7,"%3F")}function $7(r){return r==null?"":j7(r).replace(I7,"%2F")}function wy(r){try{return decodeURIComponent(""+r)}catch{}return""+r}function W7(r){const e={};if(r===""||r==="?")return e;const t=(r[0]==="?"?r.slice(1):r).split("&");for(let i=0;i<t.length;++i){const o=t[i].replace(a3," "),n=o.indexOf("="),s=wy(n<0?o:o.slice(0,n)),a=n<0?null:wy(o.slice(n+1));if(s in e){let l=e[s];Bs(l)||(l=e[s]=[l]),l.push(a)}else e[s]=a}return e}function d3(r){let e="";for(let t in r){const i=r[t];if(t=H7(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Bs(i)?i.map(o=>o&&ES(o)):[i&&ES(i)]).forEach(o=>{o!==void 0&&(e+=(e.length?"&":"")+t,o!=null&&(e+="="+o))})}return e}function q7(r){const e={};for(const t in r){const i=r[t];i!==void 0&&(e[t]=Bs(i)?i.map(o=>o==null?null:""+o):i==null?i:""+i)}return e}const X7=Symbol(""),h3=Symbol(""),CS=Symbol(""),p3=Symbol(""),NS=Symbol("");function gm(){let r=[];function e(i){return r.push(i),()=>{const o=r.indexOf(i);o>-1&&r.splice(o,1)}}function t(){r=[]}return{add:e,list:()=>r.slice(),reset:t}}function Yl(r,e,t,i,o){const n=i&&(i.enterCallbacks[o]=i.enterCallbacks[o]||[]);return()=>new Promise((s,a)=>{const l=d=>{d===!1?a(Ch(4,{from:t,to:e})):d instanceof Error?a(d):b7(d)?a(Ch(2,{from:e,to:d})):(n&&i.enterCallbacks[o]===n&&typeof d=="function"&&n.push(d),s())},c=r.call(i&&i.instances[o],e,t,l);let u=Promise.resolve(c);r.length<3&&(u=u.then(l)),u.catch(d=>a(d))})}function AS(r,e,t,i){const o=[];for(const n of r)for(const s in n.components){let a=n.components[s];if(!(e!=="beforeRouteEnter"&&!n.instances[s]))if(K7(a)){const l=(a.__vccOpts||a)[e];l&&o.push(Yl(l,t,i,n,s))}else{let l=a();o.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${s}" at "${n.path}"`));const u=e7(c)?c.default:c;n.components[s]=u;const d=(u.__vccOpts||u)[e];return d&&Yl(d,t,i,n,s)()}))}}return o}function K7(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function f3(r){const e=ot(CS),t=ot(p3),i=N(()=>e.resolve(f(r.to))),o=N(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],d=t.matched;if(!u||!d.length)return-1;const h=d.findIndex(Eh.bind(null,u));if(h>-1)return h;const p=m3(l[c-2]);return c>1&&m3(u)===p&&d[d.length-1].path!==p?d.findIndex(Eh.bind(null,l[c-2])):h}),n=N(()=>o.value>-1&&Q7(t.params,i.value.params)),s=N(()=>o.value>-1&&o.value===t.matched.length-1&&WI(t.params,i.value.params));function a(l={}){return Z7(l)?e[f(r.replace)?"replace":"push"](f(r.to)).catch(pm):Promise.resolve()}return{route:i,href:N(()=>i.value.href),isActive:n,isExactActive:s,navigate:a}}const Y7=ne({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:f3,setup(r,{slots:e}){const t=ur(f3(r)),{options:i}=ot(CS),o=N(()=>({[g3(r.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[g3(r.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const n=e.default&&e.default(t);return r.custom?n:pt("a",{"aria-current":t.isExactActive?r.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:o.value},n)}}}),J7=Y7;function Z7(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const e=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return r.preventDefault&&r.preventDefault(),!0}}function Q7(r,e){for(const t in e){const i=e[t],o=r[t];if(typeof i=="string"){if(i!==o)return!1}else if(!Bs(o)||o.length!==i.length||i.some((n,s)=>n!==o[s]))return!1}return!0}function m3(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const g3=(r,e,t)=>r??e??t,eq=ne({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:e,slots:t}){const i=ot(NS),o=N(()=>r.route||i.value),n=ot(h3,0),s=N(()=>{let c=f(n);const{matched:u}=o.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=N(()=>o.value.matched[s.value]);Wt(h3,N(()=>s.value+1)),Wt(X7,a),Wt(NS,o);const l=V();return ke(()=>[l.value,a.value,r.name],([c,u,d],[h,p,m])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Eh(u,p)||!h)&&(u.enterCallbacks[d]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=o.value,u=r.name,d=a.value,h=d&&d.components[u];if(!h)return v3(t.default,{Component:h,route:c});const p=d.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,g=pt(h,Gr({},m,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return v3(t.default,{Component:g,route:c})||g}}});function v3(r,e){if(!r)return null;const t=r(e);return t.length===1?t[0]:t}const tq=eq;function rq(r){const e=A7(r.routes,r),t=r.parseQuery||W7,i=r.stringifyQuery||d3,o=r.history,n=gm(),s=gm(),a=gm(),l=Rr(Kl);let c=Kl;Th&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=wS.bind(null,te=>""+te),d=wS.bind(null,$7),h=wS.bind(null,wy);function p(te,Z){let de,Ce;return JI(te)?(de=e.getRecordMatcher(te),Ce=Z):Ce=te,e.addRoute(Ce,de)}function m(te){const Z=e.getRecordMatcher(te);Z&&e.removeRoute(Z)}function g(){return e.getRoutes().map(te=>te.record)}function v(te){return!!e.getRecordMatcher(te)}function y(te,Z){if(Z=Gr({},Z||l.value),typeof te=="string"){const re=SS(t,te,Z.path),ae=e.resolve({path:re.path},Z),le=o.createHref(re.fullPath);return Gr(re,ae,{params:h(ae.params),hash:wy(re.hash),redirectedFrom:void 0,href:le})}let de;if("path"in te)de=Gr({},te,{path:SS(t,te.path,Z.path).path});else{const re=Gr({},te.params);for(const ae in re)re[ae]==null&&delete re[ae];de=Gr({},te,{params:d(re)}),Z.params=d(Z.params)}const Ce=e.resolve(de,Z),ue=te.hash||"";Ce.params=u(h(Ce.params));const D=i7(i,Gr({},te,{hash:G7(ue),path:Ce.path})),K=o.createHref(D);return Gr({fullPath:D,hash:ue,query:i===d3?q7(te.query):te.query||{}},Ce,{redirectedFrom:void 0,href:K})}function b(te){return typeof te=="string"?SS(t,te,l.value.path):Gr({},te)}function x(te,Z){if(c!==te)return Ch(8,{from:Z,to:te})}function _(te){return M(te)}function S(te){return _(Gr(b(te),{replace:!0}))}function w(te){const Z=te.matched[te.matched.length-1];if(Z&&Z.redirect){const{redirect:de}=Z;let Ce=typeof de=="function"?de(te):de;return typeof Ce=="string"&&(Ce=Ce.includes("?")||Ce.includes("#")?Ce=b(Ce):{path:Ce},Ce.params={}),Gr({query:te.query,hash:te.hash,params:"path"in Ce?{}:te.params},Ce)}}function M(te,Z){const de=c=y(te),Ce=l.value,ue=te.state,D=te.force,K=te.replace===!0,re=w(de);if(re)return M(Gr(b(re),{state:typeof re=="object"?Gr({},ue,re.state):ue,force:D,replace:K}),Z||de);const ae=de;ae.redirectedFrom=Z;let le;return!D&&o7(i,Ce,de)&&(le=Ch(16,{to:ae,from:Ce}),$(Ce,Ce,!0,!1)),(le?Promise.resolve(le):C(ae,Ce)).catch(Se=>Qa(Se)?Qa(Se,2)?Se:H(Se):F(Se,ae,Ce)).then(Se=>{if(Se){if(Qa(Se,2))return M(Gr({replace:K},b(Se.to),{state:typeof Se.to=="object"?Gr({},ue,Se.to.state):ue,force:D}),Z||ae)}else Se=I(ae,Ce,!0,K,ue);return B(ae,Ce,Se),Se})}function T(te,Z){const de=x(te,Z);return de?Promise.reject(de):Promise.resolve()}function E(te){const Z=ce.values().next().value;return Z&&typeof Z.runWithContext=="function"?Z.runWithContext(te):te()}function C(te,Z){let de;const[Ce,ue,D]=iq(te,Z);de=AS(Ce.reverse(),"beforeRouteLeave",te,Z);for(const re of Ce)re.leaveGuards.forEach(ae=>{de.push(Yl(ae,te,Z))});const K=T.bind(null,te,Z);return de.push(K),xe(de).then(()=>{de=[];for(const re of n.list())de.push(Yl(re,te,Z));return de.push(K),xe(de)}).then(()=>{de=AS(ue,"beforeRouteUpdate",te,Z);for(const re of ue)re.updateGuards.forEach(ae=>{de.push(Yl(ae,te,Z))});return de.push(K),xe(de)}).then(()=>{de=[];for(const re of D)if(re.beforeEnter)if(Bs(re.beforeEnter))for(const ae of re.beforeEnter)de.push(Yl(ae,te,Z));else de.push(Yl(re.beforeEnter,te,Z));return de.push(K),xe(de)}).then(()=>(te.matched.forEach(re=>re.enterCallbacks={}),de=AS(D,"beforeRouteEnter",te,Z),de.push(K),xe(de))).then(()=>{de=[];for(const re of s.list())de.push(Yl(re,te,Z));return de.push(K),xe(de)}).catch(re=>Qa(re,8)?re:Promise.reject(re))}function B(te,Z,de){a.list().forEach(Ce=>E(()=>Ce(te,Z,de)))}function I(te,Z,de,Ce,ue){const D=x(te,Z);if(D)return D;const K=Z===Kl,re=Th?history.state:{};de&&(Ce||K?o.replace(te.fullPath,Gr({scroll:K&&re&&re.scroll},ue)):o.push(te.fullPath,ue)),l.value=te,$(te,Z,de,K),H()}let L;function P(){L||(L=o.listen((te,Z,de)=>{if(!ve.listening)return;const Ce=y(te),ue=w(Ce);if(ue){M(Gr(ue,{replace:!0}),Ce).catch(pm);return}c=Ce;const D=l.value;Th&&h7(XI(D.fullPath,de.delta),_y()),C(Ce,D).catch(K=>Qa(K,12)?K:Qa(K,2)?(M(K.to,Ce).then(re=>{Qa(re,20)&&!de.delta&&de.type===fm.pop&&o.go(-1,!1)}).catch(pm),Promise.reject()):(de.delta&&o.go(-de.delta,!1),F(K,Ce,D))).then(K=>{K=K||I(Ce,D,!1),K&&(de.delta&&!Qa(K,8)?o.go(-de.delta,!1):de.type===fm.pop&&Qa(K,20)&&o.go(-1,!1)),B(Ce,D,K)}).catch(pm)}))}let U=gm(),G=gm(),R;function F(te,Z,de){H(te);const Ce=G.list();return Ce.length?Ce.forEach(ue=>ue(te,Z,de)):console.error(te),Promise.reject(te)}function O(){return R&&l.value!==Kl?Promise.resolve():new Promise((te,Z)=>{U.add([te,Z])})}function H(te){return R||(R=!te,P(),U.list().forEach(([Z,de])=>te?de(te):Z()),U.reset()),te}function $(te,Z,de,Ce){const{scrollBehavior:ue}=r;if(!Th||!ue)return Promise.resolve();const D=!de&&p7(XI(te.fullPath,0))||(Ce||!de)&&history.state&&history.state.scroll||null;return lt().then(()=>ue(te,Z,D)).then(K=>K&&d7(K)).catch(K=>F(K,te,Z))}const j=te=>o.go(te);let J;const ce=new Set,ve={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,hasRoute:v,getRoutes:g,resolve:y,options:r,push:_,replace:S,go:j,back:()=>j(-1),forward:()=>j(1),beforeEach:n.add,beforeResolve:s.add,afterEach:a.add,onError:G.add,isReady:O,install(te){const Z=this;te.component("RouterLink",J7),te.component("RouterView",tq),te.config.globalProperties.$router=Z,Object.defineProperty(te.config.globalProperties,"$route",{enumerable:!0,get:()=>f(l)}),Th&&!J&&l.value===Kl&&(J=!0,_(o.location).catch(ue=>{}));const de={};for(const ue in Kl)Object.defineProperty(de,ue,{get:()=>l.value[ue],enumerable:!0});te.provide(CS,Z),te.provide(p3,Gw(de)),te.provide(NS,l);const Ce=te.unmount;ce.add(te),te.unmount=function(){ce.delete(te),ce.size<1&&(c=Kl,L&&L(),L=null,l.value=Kl,J=!1,R=!1),Ce()}}};function xe(te){return te.reduce((Z,de)=>Z.then(()=>E(de)),Promise.resolve())}return ve}function iq(r,e){const t=[],i=[],o=[],n=Math.max(e.matched.length,r.matched.length);for(let s=0;s<n;s++){const a=e.matched[s];a&&(r.matched.find(c=>Eh(c,a))?i.push(a):t.push(a));const l=r.matched[s];l&&(e.matched.find(c=>Eh(c,l))||o.push(l))}return[t,i,o]}const oq='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',nq=r=>getComputedStyle(r).position==="fixed"?!1:r.offsetParent!==null,y3=r=>Array.from(r.querySelectorAll(oq)).filter(e=>sq(e)&&nq(e)),sq=r=>{if(r.tabIndex>0||r.tabIndex===0&&r.getAttribute("tabIndex")!==null)return!0;if(r.disabled)return!1;switch(r.nodeName){case"A":return!!r.href&&r.rel!=="ignore";case"INPUT":return!(r.type==="hidden"||r.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Sy=function(r,e,...t){let i;e.includes("mouse")||e.includes("click")?i="MouseEvents":e.includes("key")?i="KeyboardEvent":i="HTMLEvents";const o=document.createEvent(i);return o.initEvent(e,...t),r.dispatchEvent(o),r},b3=r=>!r.getAttribute("aria-owns"),x3=(r,e,t)=>{const{parentNode:i}=r;if(!i)return null;const o=i.querySelectorAll(t),n=Array.prototype.indexOf.call(o,r);return o[n+e]||null},My=r=>{r&&(r.focus(),!b3(r)&&r.click())},ti=(r,e,{checkForDefaultPrevented:t=!0}={})=>i=>{const o=r==null?void 0:r(i);if(t===!1||!o)return e==null?void 0:e(i)},_3=r=>e=>e.pointerType==="mouse"?r(e):void 0;var aq=Object.defineProperty,lq=Object.defineProperties,cq=Object.getOwnPropertyDescriptors,w3=Object.getOwnPropertySymbols,uq=Object.prototype.hasOwnProperty,dq=Object.prototype.propertyIsEnumerable,S3=(r,e,t)=>e in r?aq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,hq=(r,e)=>{for(var t in e||(e={}))uq.call(e,t)&&S3(r,t,e[t]);if(w3)for(var t of w3(e))dq.call(e,t)&&S3(r,t,e[t]);return r},pq=(r,e)=>lq(r,cq(e));function M3(r,e){var t;const i=Rr();return Vn(()=>{i.value=r()},pq(hq({},e),{flush:(t=e==null?void 0:e.flush)!=null?t:"sync"})),su(i)}var T3;const Jt=typeof window<"u",fq=r=>typeof r<"u",mq=r=>typeof r=="function",gq=r=>typeof r=="string",Nh=()=>{},E3=Jt&&((T3=window==null?void 0:window.navigator)==null?void 0:T3.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Jl(r){return typeof r=="function"?r():f(r)}function C3(r,e){function t(...i){return new Promise((o,n)=>{Promise.resolve(r(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(o).catch(n)})}return t}function vq(r,e={}){let t,i,o=Nh;const n=s=>{clearTimeout(s),o(),o=Nh};return s=>{const a=Jl(r),l=Jl(e.maxWait);return t&&n(t),a<=0||l!==void 0&&l<=0?(i&&(n(i),i=null),Promise.resolve(s())):new Promise((c,u)=>{o=e.rejectOnCancel?u:c,l&&!i&&(i=setTimeout(()=>{t&&n(t),i=null,c(s())},l)),t=setTimeout(()=>{i&&n(i),i=null,c(s())},a)})}}function yq(r,e=!0,t=!0,i=!1){let o=0,n,s=!0,a=Nh,l;const c=()=>{n&&(clearTimeout(n),n=void 0,a(),a=Nh)};return u=>{const d=Jl(r),h=Date.now()-o,p=()=>l=u();return c(),d<=0?(o=Date.now(),p()):(h>d&&(t||!s)?(o=Date.now(),p()):e&&(l=new Promise((m,g)=>{a=i?g:m,n=setTimeout(()=>{o=Date.now(),s=!0,m(p()),c()},Math.max(0,d-h))})),!t&&!n&&(n=setTimeout(()=>s=!0,d)),s=!1,l)}}function bq(r){return r}function Ty(r){return tk()?(rk(r),!0):!1}function xq(r,e=200,t={}){return C3(vq(e,t),r)}function _q(r,e=200,t={}){const i=V(r.value),o=xq(()=>{i.value=r.value},e,t);return ke(r,()=>o()),i}function N3(r,e=200,t=!1,i=!0,o=!1){return C3(yq(e,t,i,o),r)}function RS(r,e=!0){It()?Rt(r):e?r():lt(r)}function vu(r,e,t={}){const{immediate:i=!0}=t,o=V(!1);let n=null;function s(){n&&(clearTimeout(n),n=null)}function a(){o.value=!1,s()}function l(...c){s(),o.value=!0,n=setTimeout(()=>{o.value=!1,n=null,r(...c)},Jl(e))}return i&&(o.value=!0,Jt&&l()),Ty(a),{isPending:su(o),start:l,stop:a}}function Hn(r){var e;const t=Jl(r);return(e=t==null?void 0:t.$el)!=null?e:t}const Ah=Jt?window:void 0,wq=Jt?window.document:void 0;function Hr(...r){let e,t,i,o;if(gq(r[0])||Array.isArray(r[0])?([t,i,o]=r,e=Ah):[e,t,i,o]=r,!e)return Nh;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const n=[],s=()=>{n.forEach(u=>u()),n.length=0},a=(u,d,h,p)=>(u.addEventListener(d,h,p),()=>u.removeEventListener(d,h,p)),l=ke(()=>[Hn(e),Jl(o)],([u,d])=>{s(),u&&n.push(...t.flatMap(h=>i.map(p=>a(u,h,p,d))))},{immediate:!0,flush:"post"}),c=()=>{l(),s()};return Ty(c),c}let A3=!1;function LS(r,e,t={}){const{window:i=Ah,ignore:o=[],capture:n=!0,detectIframe:s=!1}=t;if(!i)return;E3&&!A3&&(A3=!0,Array.from(i.document.body.children).forEach(u=>u.addEventListener("click",Nh)));let a=!0;const l=u=>o.some(d=>{if(typeof d=="string")return Array.from(i.document.querySelectorAll(d)).some(h=>h===u.target||u.composedPath().includes(h));{const h=Hn(d);return h&&(u.target===h||u.composedPath().includes(h))}}),c=[Hr(i,"click",u=>{const d=Hn(r);if(!(!d||d===u.target||u.composedPath().includes(d))){if(u.detail===0&&(a=!l(u)),!a){a=!0;return}e(u)}},{passive:!0,capture:n}),Hr(i,"pointerdown",u=>{const d=Hn(r);d&&(a=!u.composedPath().includes(d)&&!l(u))},{passive:!0}),s&&Hr(i,"blur",u=>{var d;const h=Hn(r);((d=i.document.activeElement)==null?void 0:d.tagName)==="IFRAME"&&!(h!=null&&h.contains(i.document.activeElement))&&e(u)})].filter(Boolean);return()=>c.forEach(u=>u())}function Sq(r,e=!1){const t=V(),i=()=>t.value=!!r();return i(),RS(i,e),t}function Mq(r){return JSON.parse(JSON.stringify(r))}const R3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},L3="__vueuse_ssr_handlers__";R3[L3]=R3[L3]||{};function Tq(r,e,{window:t=Ah,initialValue:i=""}={}){const o=V(i),n=N(()=>{var s;return Hn(e)||((s=t==null?void 0:t.document)==null?void 0:s.documentElement)});return ke([n,()=>Jl(r)],([s,a])=>{var l;if(s&&t){const c=(l=t.getComputedStyle(s).getPropertyValue(a))==null?void 0:l.trim();o.value=c||i}},{immediate:!0}),ke(o,s=>{var a;(a=n.value)!=null&&a.style&&n.value.style.setProperty(Jl(r),s)}),o}function Eq({document:r=wq}={}){if(!r)return V("visible");const e=V(r.visibilityState);return Hr(r,"visibilitychange",()=>{e.value=r.visibilityState}),e}var O3=Object.getOwnPropertySymbols,Cq=Object.prototype.hasOwnProperty,Nq=Object.prototype.propertyIsEnumerable,Aq=(r,e)=>{var t={};for(var i in r)Cq.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&O3)for(var i of O3(r))e.indexOf(i)<0&&Nq.call(r,i)&&(t[i]=r[i]);return t};function ko(r,e,t={}){const i=t,{window:o=Ah}=i,n=Aq(i,["window"]);let s;const a=Sq(()=>o&&"ResizeObserver"in o),l=()=>{s&&(s.disconnect(),s=void 0)},c=ke(()=>Hn(r),d=>{l(),a.value&&o&&d&&(s=new ResizeObserver(e),s.observe(d,n))},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return Ty(u),{isSupported:a,stop:u}}function k3(r,e={}){const{reset:t=!0,windowResize:i=!0,windowScroll:o=!0,immediate:n=!0}=e,s=V(0),a=V(0),l=V(0),c=V(0),u=V(0),d=V(0),h=V(0),p=V(0);function m(){const g=Hn(r);if(!g){t&&(s.value=0,a.value=0,l.value=0,c.value=0,u.value=0,d.value=0,h.value=0,p.value=0);return}const v=g.getBoundingClientRect();s.value=v.height,a.value=v.bottom,l.value=v.left,c.value=v.right,u.value=v.top,d.value=v.width,h.value=v.x,p.value=v.y}return ko(r,m),ke(()=>Hn(r),g=>!g&&m()),o&&Hr("scroll",m,{capture:!0,passive:!0}),i&&Hr("resize",m,{passive:!0}),RS(()=>{n&&m()}),{height:s,bottom:a,left:l,right:c,top:u,width:d,x:h,y:p,update:m}}var I3;(function(r){r.UP="UP",r.RIGHT="RIGHT",r.DOWN="DOWN",r.LEFT="LEFT",r.NONE="NONE"})(I3||(I3={}));var Rq=Object.defineProperty,P3=Object.getOwnPropertySymbols,Lq=Object.prototype.hasOwnProperty,Oq=Object.prototype.propertyIsEnumerable,D3=(r,e,t)=>e in r?Rq(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,kq=(r,e)=>{for(var t in e||(e={}))Lq.call(e,t)&&D3(r,t,e[t]);if(P3)for(var t of P3(e))Oq.call(e,t)&&D3(r,t,e[t]);return r};kq({linear:bq},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function Iq(r,e,t,i={}){var o,n,s;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d}=i,h=It(),p=t||(h==null?void 0:h.emit)||((o=h==null?void 0:h.$emit)==null?void 0:o.bind(h))||((s=(n=h==null?void 0:h.proxy)==null?void 0:n.$emit)==null?void 0:s.bind(h==null?void 0:h.proxy));let m=c;e||(e="modelValue"),m=c||m||`update:${e.toString()}`;const g=y=>a?mq(a)?a(y):Mq(y):y,v=()=>fq(r[e])?g(r[e]):d;if(l){const y=v(),b=V(y);return ke(()=>r[e],x=>b.value=g(x)),ke(b,x=>{(x!==r[e]||u)&&p(m,x)},{deep:u}),b}else return N({get(){return v()},set(y){p(m,y)}})}function Pq({window:r=Ah}={}){if(!r)return V(!1);const e=V(r.document.hasFocus());return Hr(r,"blur",()=>{e.value=!1}),Hr(r,"focus",()=>{e.value=!0}),e}function Dq(r={}){const{window:e=Ah,initialWidth:t=1/0,initialHeight:i=1/0,listenOrientation:o=!0,includeScrollbar:n=!0}=r,s=V(t),a=V(i),l=()=>{e&&(n?(s.value=e.innerWidth,a.value=e.innerHeight):(s.value=e.document.documentElement.clientWidth,a.value=e.document.documentElement.clientHeight))};return l(),RS(l),Hr("resize",l,{passive:!0}),o&&Hr("orientationchange",l,{passive:!0}),{width:s,height:a}}const B3=()=>Jt&&/firefox/i.test(window.navigator.userAgent),Bq=(r,e)=>{if(!Jt||!r||!e)return!1;const t=r.getBoundingClientRect();let i;return e instanceof Element?i=e.getBoundingClientRect():i={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<i.bottom&&t.bottom>i.top&&t.right>i.left&&t.left<i.right},F3=r=>{let e=0,t=r;for(;t;)e+=t.offsetTop,t=t.offsetParent;return e},Fq=(r,e)=>Math.abs(F3(r)-F3(e)),OS=r=>{let e,t;return r.type==="touchend"?(t=r.changedTouches[0].clientY,e=r.changedTouches[0].clientX):r.type.startsWith("touch")?(t=r.touches[0].clientY,e=r.touches[0].clientX):(t=r.clientY,e=r.clientX),{clientX:e,clientY:t}};var Uq=typeof global=="object"&&global&&global.Object===Object&&global;const U3=Uq;var zq=typeof self=="object"&&self&&self.Object===Object&&self,Vq=U3||zq||Function("return this")();const Fs=Vq;var Gq=Fs.Symbol;const hs=Gq;var z3=Object.prototype,Hq=z3.hasOwnProperty,jq=z3.toString,vm=hs?hs.toStringTag:void 0;function $q(r){var e=Hq.call(r,vm),t=r[vm];try{r[vm]=void 0;var i=!0}catch{}var o=jq.call(r);return i&&(e?r[vm]=t:delete r[vm]),o}var Wq=Object.prototype,qq=Wq.toString;function Xq(r){return qq.call(r)}var Kq="[object Null]",Yq="[object Undefined]",V3=hs?hs.toStringTag:void 0;function yu(r){return r==null?r===void 0?Yq:Kq:V3&&V3 in Object(r)?$q(r):Xq(r)}function ha(r){return r!=null&&typeof r=="object"}var Jq="[object Symbol]";function Ey(r){return typeof r=="symbol"||ha(r)&&yu(r)==Jq}function G3(r,e){for(var t=-1,i=r==null?0:r.length,o=Array(i);++t<i;)o[t]=e(r[t],t,r);return o}var Zq=Array.isArray;const Wo=Zq;var Qq=1/0,H3=hs?hs.prototype:void 0,j3=H3?H3.toString:void 0;function $3(r){if(typeof r=="string")return r;if(Wo(r))return G3(r,$3)+"";if(Ey(r))return j3?j3.call(r):"";var e=r+"";return e=="0"&&1/r==-Qq?"-0":e}var eX=/\s/;function tX(r){for(var e=r.length;e--&&eX.test(r.charAt(e)););return e}var rX=/^\s+/;function iX(r){return r&&r.slice(0,tX(r)+1).replace(rX,"")}function qo(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var W3=0/0,oX=/^[-+]0x[0-9a-f]+$/i,nX=/^0b[01]+$/i,sX=/^0o[0-7]+$/i,aX=parseInt;function kS(r){if(typeof r=="number")return r;if(Ey(r))return W3;if(qo(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=qo(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=iX(r);var t=nX.test(r);return t||sX.test(r)?aX(r.slice(2),t?2:8):oX.test(r)?W3:+r}var q3=1/0,lX=17976931348623157e292;function cX(r){if(!r)return r===0?r:0;if(r=kS(r),r===q3||r===-q3){var e=r<0?-1:1;return e*lX}return r===r?r:0}function uX(r){var e=cX(r),t=e%1;return e===e?t?e-t:e:0}function IS(r){return r}var dX="[object AsyncFunction]",hX="[object Function]",pX="[object GeneratorFunction]",fX="[object Proxy]";function PS(r){if(!qo(r))return!1;var e=yu(r);return e==hX||e==pX||e==dX||e==fX}var mX=Fs["__core-js_shared__"];const DS=mX;var X3=function(){var r=/[^.]+$/.exec(DS&&DS.keys&&DS.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function gX(r){return!!X3&&X3 in r}var vX=Function.prototype,yX=vX.toString;function bu(r){if(r!=null){try{return yX.call(r)}catch{}try{return r+""}catch{}}return""}var bX=/[\\^$.*+?()[\]{}|]/g,xX=/^\[object .+?Constructor\]$/,_X=Function.prototype,wX=Object.prototype,SX=_X.toString,MX=wX.hasOwnProperty,TX=RegExp("^"+SX.call(MX).replace(bX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function EX(r){if(!qo(r)||gX(r))return!1;var e=PS(r)?TX:xX;return e.test(bu(r))}function CX(r,e){return r==null?void 0:r[e]}function xu(r,e){var t=CX(r,e);return EX(t)?t:void 0}var NX=xu(Fs,"WeakMap");const BS=NX;var K3=Object.create,AX=function(){function r(){}return function(e){if(!qo(e))return{};if(K3)return K3(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();const RX=AX;function LX(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function OX(){}function Y3(r,e){var t=-1,i=r.length;for(e||(e=Array(i));++t<i;)e[t]=r[t];return e}var kX=800,IX=16,PX=Date.now;function DX(r){var e=0,t=0;return function(){var i=PX(),o=IX-(i-t);if(t=i,o>0){if(++e>=kX)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function BX(r){return function(){return r}}var FX=function(){try{var r=xu(Object,"defineProperty");return r({},"",{}),r}catch{}}();const Cy=FX;var UX=Cy?function(r,e){return Cy(r,"toString",{configurable:!0,enumerable:!1,value:BX(e),writable:!0})}:IS,zX=DX(UX);const J3=zX;function VX(r,e){for(var t=-1,i=r==null?0:r.length;++t<i&&e(r[t],t,r)!==!1;);return r}function Z3(r,e,t,i){for(var o=r.length,n=t+(i?1:-1);i?n--:++n<o;)if(e(r[n],n,r))return n;return-1}function GX(r){return r!==r}function HX(r,e,t){for(var i=t-1,o=r.length;++i<o;)if(r[i]===e)return i;return-1}function jX(r,e,t){return e===e?HX(r,e,t):Z3(r,GX,t)}function $X(r,e){var t=r==null?0:r.length;return!!t&&jX(r,e,0)>-1}var WX=9007199254740991,qX=/^(?:0|[1-9]\d*)$/;function Ny(r,e){var t=typeof r;return e=e??WX,!!e&&(t=="number"||t!="symbol"&&qX.test(r))&&r>-1&&r%1==0&&r<e}function FS(r,e,t){e=="__proto__"&&Cy?Cy(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function ym(r,e){return r===e||r!==r&&e!==e}var XX=Object.prototype,KX=XX.hasOwnProperty;function US(r,e,t){var i=r[e];(!(KX.call(r,e)&&ym(i,t))||t===void 0&&!(e in r))&&FS(r,e,t)}function bm(r,e,t,i){var o=!t;t||(t={});for(var n=-1,s=e.length;++n<s;){var a=e[n],l=i?i(t[a],r[a],a,t,r):void 0;l===void 0&&(l=r[a]),o?FS(t,a,l):US(t,a,l)}return t}var Q3=Math.max;function eP(r,e,t){return e=Q3(e===void 0?r.length-1:e,0),function(){for(var i=arguments,o=-1,n=Q3(i.length-e,0),s=Array(n);++o<n;)s[o]=i[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=i[o];return a[e]=t(s),LX(r,this,a)}}function tP(r,e){return J3(eP(r,e,IS),r+"")}var YX=9007199254740991;function zS(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=YX}function Rh(r){return r!=null&&zS(r.length)&&!PS(r)}function JX(r,e,t){if(!qo(t))return!1;var i=typeof e;return(i=="number"?Rh(t)&&Ny(e,t.length):i=="string"&&e in t)?ym(t[e],r):!1}function ZX(r){return tP(function(e,t){var i=-1,o=t.length,n=o>1?t[o-1]:void 0,s=o>2?t[2]:void 0;for(n=r.length>3&&typeof n=="function"?(o--,n):void 0,s&&JX(t[0],t[1],s)&&(n=o<3?void 0:n,o=1),e=Object(e);++i<o;){var a=t[i];a&&r(e,a,i,n)}return e})}var QX=Object.prototype;function VS(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||QX;return r===t}function eK(r,e){for(var t=-1,i=Array(r);++t<r;)i[t]=e(t);return i}var tK="[object Arguments]";function rP(r){return ha(r)&&yu(r)==tK}var iP=Object.prototype,rK=iP.hasOwnProperty,iK=iP.propertyIsEnumerable,oK=rP(function(){return arguments}())?rP:function(r){return ha(r)&&rK.call(r,"callee")&&!iK.call(r,"callee")};const xm=oK;function nK(){return!1}var oP=typeof ss=="object"&&ss&&!ss.nodeType&&ss,nP=oP&&typeof as=="object"&&as&&!as.nodeType&&as,sK=nP&&nP.exports===oP,sP=sK?Fs.Buffer:void 0,aK=sP?sP.isBuffer:void 0,lK=aK||nK;const _m=lK;var cK="[object Arguments]",uK="[object Array]",dK="[object Boolean]",hK="[object Date]",pK="[object Error]",fK="[object Function]",mK="[object Map]",gK="[object Number]",vK="[object Object]",yK="[object RegExp]",bK="[object Set]",xK="[object String]",_K="[object WeakMap]",wK="[object ArrayBuffer]",SK="[object DataView]",MK="[object Float32Array]",TK="[object Float64Array]",EK="[object Int8Array]",CK="[object Int16Array]",NK="[object Int32Array]",AK="[object Uint8Array]",RK="[object Uint8ClampedArray]",LK="[object Uint16Array]",OK="[object Uint32Array]",si={};si[MK]=si[TK]=si[EK]=si[CK]=si[NK]=si[AK]=si[RK]=si[LK]=si[OK]=!0,si[cK]=si[uK]=si[wK]=si[dK]=si[SK]=si[hK]=si[pK]=si[fK]=si[mK]=si[gK]=si[vK]=si[yK]=si[bK]=si[xK]=si[_K]=!1;function kK(r){return ha(r)&&zS(r.length)&&!!si[yu(r)]}function GS(r){return function(e){return r(e)}}var aP=typeof ss=="object"&&ss&&!ss.nodeType&&ss,wm=aP&&typeof as=="object"&&as&&!as.nodeType&&as,IK=wm&&wm.exports===aP,HS=IK&&U3.process,PK=function(){try{var r=wm&&wm.require&&wm.require("util").types;return r||HS&&HS.binding&&HS.binding("util")}catch{}}();const Lh=PK;var lP=Lh&&Lh.isTypedArray,DK=lP?GS(lP):kK;const jS=DK;var BK=Object.prototype,FK=BK.hasOwnProperty;function cP(r,e){var t=Wo(r),i=!t&&xm(r),o=!t&&!i&&_m(r),n=!t&&!i&&!o&&jS(r),s=t||i||o||n,a=s?eK(r.length,String):[],l=a.length;for(var c in r)(e||FK.call(r,c))&&!(s&&(c=="length"||o&&(c=="offset"||c=="parent")||n&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Ny(c,l)))&&a.push(c);return a}function uP(r,e){return function(t){return r(e(t))}}var UK=uP(Object.keys,Object);const zK=UK;var VK=Object.prototype,GK=VK.hasOwnProperty;function HK(r){if(!VS(r))return zK(r);var e=[];for(var t in Object(r))GK.call(r,t)&&t!="constructor"&&e.push(t);return e}function Sm(r){return Rh(r)?cP(r):HK(r)}function jK(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var $K=Object.prototype,WK=$K.hasOwnProperty;function qK(r){if(!qo(r))return jK(r);var e=VS(r),t=[];for(var i in r)i=="constructor"&&(e||!WK.call(r,i))||t.push(i);return t}function Mm(r){return Rh(r)?cP(r,!0):qK(r)}var XK=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,KK=/^\w*$/;function $S(r,e){if(Wo(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||Ey(r)?!0:KK.test(r)||!XK.test(r)||e!=null&&r in Object(e)}var YK=xu(Object,"create");const Tm=YK;function JK(){this.__data__=Tm?Tm(null):{},this.size=0}function ZK(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var QK="__lodash_hash_undefined__",eY=Object.prototype,tY=eY.hasOwnProperty;function rY(r){var e=this.__data__;if(Tm){var t=e[r];return t===QK?void 0:t}return tY.call(e,r)?e[r]:void 0}var iY=Object.prototype,oY=iY.hasOwnProperty;function nY(r){var e=this.__data__;return Tm?e[r]!==void 0:oY.call(e,r)}var sY="__lodash_hash_undefined__";function aY(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Tm&&e===void 0?sY:e,this}function _u(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}_u.prototype.clear=JK,_u.prototype.delete=ZK,_u.prototype.get=rY,_u.prototype.has=nY,_u.prototype.set=aY;function lY(){this.__data__=[],this.size=0}function Ay(r,e){for(var t=r.length;t--;)if(ym(r[t][0],e))return t;return-1}var cY=Array.prototype,uY=cY.splice;function dY(r){var e=this.__data__,t=Ay(e,r);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():uY.call(e,t,1),--this.size,!0}function hY(r){var e=this.__data__,t=Ay(e,r);return t<0?void 0:e[t][1]}function pY(r){return Ay(this.__data__,r)>-1}function fY(r,e){var t=this.__data__,i=Ay(t,r);return i<0?(++this.size,t.push([r,e])):t[i][1]=e,this}function el(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}el.prototype.clear=lY,el.prototype.delete=dY,el.prototype.get=hY,el.prototype.has=pY,el.prototype.set=fY;var mY=xu(Fs,"Map");const Em=mY;function gY(){this.size=0,this.__data__={hash:new _u,map:new(Em||el),string:new _u}}function vY(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Ry(r,e){var t=r.__data__;return vY(e)?t[typeof e=="string"?"string":"hash"]:t.map}function yY(r){var e=Ry(this,r).delete(r);return this.size-=e?1:0,e}function bY(r){return Ry(this,r).get(r)}function xY(r){return Ry(this,r).has(r)}function _Y(r,e){var t=Ry(this,r),i=t.size;return t.set(r,e),this.size+=t.size==i?0:1,this}function tl(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}tl.prototype.clear=gY,tl.prototype.delete=yY,tl.prototype.get=bY,tl.prototype.has=xY,tl.prototype.set=_Y;var wY="Expected a function";function Ly(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(wY);var t=function(){var i=arguments,o=e?e.apply(this,i):i[0],n=t.cache;if(n.has(o))return n.get(o);var s=r.apply(this,i);return t.cache=n.set(o,s)||n,s};return t.cache=new(Ly.Cache||tl),t}Ly.Cache=tl;var SY=500;function MY(r){var e=Ly(r,function(i){return t.size===SY&&t.clear(),i}),t=e.cache;return e}var TY=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,EY=/\\(\\)?/g,CY=MY(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(TY,function(t,i,o,n){e.push(o?n.replace(EY,"$1"):i||t)}),e});const NY=CY;function AY(r){return r==null?"":$3(r)}function Oy(r,e){return Wo(r)?r:$S(r,e)?[r]:NY(AY(r))}var RY=1/0;function Cm(r){if(typeof r=="string"||Ey(r))return r;var e=r+"";return e=="0"&&1/r==-RY?"-0":e}function WS(r,e){e=Oy(e,r);for(var t=0,i=e.length;r!=null&&t<i;)r=r[Cm(e[t++])];return t&&t==i?r:void 0}function Wr(r,e,t){var i=r==null?void 0:WS(r,e);return i===void 0?t:i}function qS(r,e){for(var t=-1,i=e.length,o=r.length;++t<i;)r[o+t]=e[t];return r}var dP=hs?hs.isConcatSpreadable:void 0;function LY(r){return Wo(r)||xm(r)||!!(dP&&r&&r[dP])}function Nm(r,e,t,i,o){var n=-1,s=r.length;for(t||(t=LY),o||(o=[]);++n<s;){var a=r[n];e>0&&t(a)?e>1?Nm(a,e-1,t,i,o):qS(o,a):i||(o[o.length]=a)}return o}function hP(r){var e=r==null?0:r.length;return e?Nm(r,1):[]}function OY(r){return J3(eP(r,void 0,hP),r+"")}var kY=uP(Object.getPrototypeOf,Object);const XS=kY;var IY="[object Object]",PY=Function.prototype,DY=Object.prototype,pP=PY.toString,BY=DY.hasOwnProperty,FY=pP.call(Object);function UY(r){if(!ha(r)||yu(r)!=IY)return!1;var e=XS(r);if(e===null)return!0;var t=BY.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&pP.call(t)==FY}function wu(){if(!arguments.length)return[];var r=arguments[0];return Wo(r)?r:[r]}function zY(){this.__data__=new el,this.size=0}function VY(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function GY(r){return this.__data__.get(r)}function HY(r){return this.__data__.has(r)}var jY=200;function $Y(r,e){var t=this.__data__;if(t instanceof el){var i=t.__data__;if(!Em||i.length<jY-1)return i.push([r,e]),this.size=++t.size,this;t=this.__data__=new tl(i)}return t.set(r,e),this.size=t.size,this}function Us(r){var e=this.__data__=new el(r);this.size=e.size}Us.prototype.clear=zY,Us.prototype.delete=VY,Us.prototype.get=GY,Us.prototype.has=HY,Us.prototype.set=$Y;function WY(r,e){return r&&bm(e,Sm(e),r)}function qY(r,e){return r&&bm(e,Mm(e),r)}var fP=typeof ss=="object"&&ss&&!ss.nodeType&&ss,mP=fP&&typeof as=="object"&&as&&!as.nodeType&&as,XY=mP&&mP.exports===fP,gP=XY?Fs.Buffer:void 0,vP=gP?gP.allocUnsafe:void 0;function yP(r,e){if(e)return r.slice();var t=r.length,i=vP?vP(t):new r.constructor(t);return r.copy(i),i}function KY(r,e){for(var t=-1,i=r==null?0:r.length,o=0,n=[];++t<i;){var s=r[t];e(s,t,r)&&(n[o++]=s)}return n}function bP(){return[]}var YY=Object.prototype,JY=YY.propertyIsEnumerable,xP=Object.getOwnPropertySymbols,ZY=xP?function(r){return r==null?[]:(r=Object(r),KY(xP(r),function(e){return JY.call(r,e)}))}:bP;const KS=ZY;function QY(r,e){return bm(r,KS(r),e)}var eJ=Object.getOwnPropertySymbols,tJ=eJ?function(r){for(var e=[];r;)qS(e,KS(r)),r=XS(r);return e}:bP;const _P=tJ;function rJ(r,e){return bm(r,_P(r),e)}function wP(r,e,t){var i=e(r);return Wo(r)?i:qS(i,t(r))}function YS(r){return wP(r,Sm,KS)}function iJ(r){return wP(r,Mm,_P)}var oJ=xu(Fs,"DataView");const JS=oJ;var nJ=xu(Fs,"Promise");const ZS=nJ;var sJ=xu(Fs,"Set");const Oh=sJ;var SP="[object Map]",aJ="[object Object]",MP="[object Promise]",TP="[object Set]",EP="[object WeakMap]",CP="[object DataView]",lJ=bu(JS),cJ=bu(Em),uJ=bu(ZS),dJ=bu(Oh),hJ=bu(BS),Su=yu;(JS&&Su(new JS(new ArrayBuffer(1)))!=CP||Em&&Su(new Em)!=SP||ZS&&Su(ZS.resolve())!=MP||Oh&&Su(new Oh)!=TP||BS&&Su(new BS)!=EP)&&(Su=function(r){var e=yu(r),t=e==aJ?r.constructor:void 0,i=t?bu(t):"";if(i)switch(i){case lJ:return CP;case cJ:return SP;case uJ:return MP;case dJ:return TP;case hJ:return EP}return e});const Am=Su;var pJ=Object.prototype,fJ=pJ.hasOwnProperty;function mJ(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&fJ.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var gJ=Fs.Uint8Array;const ky=gJ;function QS(r){var e=new r.constructor(r.byteLength);return new ky(e).set(new ky(r)),e}function vJ(r,e){var t=e?QS(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var yJ=/\w*$/;function bJ(r){var e=new r.constructor(r.source,yJ.exec(r));return e.lastIndex=r.lastIndex,e}var NP=hs?hs.prototype:void 0,AP=NP?NP.valueOf:void 0;function xJ(r){return AP?Object(AP.call(r)):{}}function RP(r,e){var t=e?QS(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var _J="[object Boolean]",wJ="[object Date]",SJ="[object Map]",MJ="[object Number]",TJ="[object RegExp]",EJ="[object Set]",CJ="[object String]",NJ="[object Symbol]",AJ="[object ArrayBuffer]",RJ="[object DataView]",LJ="[object Float32Array]",OJ="[object Float64Array]",kJ="[object Int8Array]",IJ="[object Int16Array]",PJ="[object Int32Array]",DJ="[object Uint8Array]",BJ="[object Uint8ClampedArray]",FJ="[object Uint16Array]",UJ="[object Uint32Array]";function zJ(r,e,t){var i=r.constructor;switch(e){case AJ:return QS(r);case _J:case wJ:return new i(+r);case RJ:return vJ(r,t);case LJ:case OJ:case kJ:case IJ:case PJ:case DJ:case BJ:case FJ:case UJ:return RP(r,t);case SJ:return new i;case MJ:case CJ:return new i(r);case TJ:return bJ(r);case EJ:return new i;case NJ:return xJ(r)}}function LP(r){return typeof r.constructor=="function"&&!VS(r)?RX(XS(r)):{}}var VJ="[object Map]";function GJ(r){return ha(r)&&Am(r)==VJ}var OP=Lh&&Lh.isMap,HJ=OP?GS(OP):GJ;const jJ=HJ;var $J="[object Set]";function WJ(r){return ha(r)&&Am(r)==$J}var kP=Lh&&Lh.isSet,qJ=kP?GS(kP):WJ;const XJ=qJ;var KJ=1,YJ=2,JJ=4,IP="[object Arguments]",ZJ="[object Array]",QJ="[object Boolean]",eZ="[object Date]",tZ="[object Error]",PP="[object Function]",rZ="[object GeneratorFunction]",iZ="[object Map]",oZ="[object Number]",DP="[object Object]",nZ="[object RegExp]",sZ="[object Set]",aZ="[object String]",lZ="[object Symbol]",cZ="[object WeakMap]",uZ="[object ArrayBuffer]",dZ="[object DataView]",hZ="[object Float32Array]",pZ="[object Float64Array]",fZ="[object Int8Array]",mZ="[object Int16Array]",gZ="[object Int32Array]",vZ="[object Uint8Array]",yZ="[object Uint8ClampedArray]",bZ="[object Uint16Array]",xZ="[object Uint32Array]",ri={};ri[IP]=ri[ZJ]=ri[uZ]=ri[dZ]=ri[QJ]=ri[eZ]=ri[hZ]=ri[pZ]=ri[fZ]=ri[mZ]=ri[gZ]=ri[iZ]=ri[oZ]=ri[DP]=ri[nZ]=ri[sZ]=ri[aZ]=ri[lZ]=ri[vZ]=ri[yZ]=ri[bZ]=ri[xZ]=!0,ri[tZ]=ri[PP]=ri[cZ]=!1;function Rm(r,e,t,i,o,n){var s,a=e&KJ,l=e&YJ,c=e&JJ;if(t&&(s=o?t(r,i,o,n):t(r)),s!==void 0)return s;if(!qo(r))return r;var u=Wo(r);if(u){if(s=mJ(r),!a)return Y3(r,s)}else{var d=Am(r),h=d==PP||d==rZ;if(_m(r))return yP(r,a);if(d==DP||d==IP||h&&!o){if(s=l||h?{}:LP(r),!a)return l?rJ(r,qY(s,r)):QY(r,WY(s,r))}else{if(!ri[d])return o?r:{};s=zJ(r,d,a)}}n||(n=new Us);var p=n.get(r);if(p)return p;n.set(r,s),XJ(r)?r.forEach(function(v){s.add(Rm(v,e,t,v,r,n))}):jJ(r)&&r.forEach(function(v,y){s.set(y,Rm(v,e,t,y,r,n))});var m=c?l?iJ:YS:l?Mm:Sm,g=u?void 0:m(r);return VX(g||r,function(v,y){g&&(y=v,v=r[y]),US(s,y,Rm(v,e,t,y,r,n))}),s}var _Z=4;function BP(r){return Rm(r,_Z)}var wZ=1,SZ=4;function Iy(r){return Rm(r,wZ|SZ)}var MZ="__lodash_hash_undefined__";function TZ(r){return this.__data__.set(r,MZ),this}function EZ(r){return this.__data__.has(r)}function Lm(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new tl;++e<t;)this.add(r[e])}Lm.prototype.add=Lm.prototype.push=TZ,Lm.prototype.has=EZ;function CZ(r,e){for(var t=-1,i=r==null?0:r.length;++t<i;)if(e(r[t],t,r))return!0;return!1}function FP(r,e){return r.has(e)}var NZ=1,AZ=2;function UP(r,e,t,i,o,n){var s=t&NZ,a=r.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var c=n.get(r),u=n.get(e);if(c&&u)return c==e&&u==r;var d=-1,h=!0,p=t&AZ?new Lm:void 0;for(n.set(r,e),n.set(e,r);++d<a;){var m=r[d],g=e[d];if(i)var v=s?i(g,m,d,e,r,n):i(m,g,d,r,e,n);if(v!==void 0){if(v)continue;h=!1;break}if(p){if(!CZ(e,function(y,b){if(!FP(p,b)&&(m===y||o(m,y,t,i,n)))return p.push(b)})){h=!1;break}}else if(!(m===g||o(m,g,t,i,n))){h=!1;break}}return n.delete(r),n.delete(e),h}function RZ(r){var e=-1,t=Array(r.size);return r.forEach(function(i,o){t[++e]=[o,i]}),t}function eM(r){var e=-1,t=Array(r.size);return r.forEach(function(i){t[++e]=i}),t}var LZ=1,OZ=2,kZ="[object Boolean]",IZ="[object Date]",PZ="[object Error]",DZ="[object Map]",BZ="[object Number]",FZ="[object RegExp]",UZ="[object Set]",zZ="[object String]",VZ="[object Symbol]",GZ="[object ArrayBuffer]",HZ="[object DataView]",zP=hs?hs.prototype:void 0,tM=zP?zP.valueOf:void 0;function jZ(r,e,t,i,o,n,s){switch(t){case HZ:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case GZ:return!(r.byteLength!=e.byteLength||!n(new ky(r),new ky(e)));case kZ:case IZ:case BZ:return ym(+r,+e);case PZ:return r.name==e.name&&r.message==e.message;case FZ:case zZ:return r==e+"";case DZ:var a=RZ;case UZ:var l=i&LZ;if(a||(a=eM),r.size!=e.size&&!l)return!1;var c=s.get(r);if(c)return c==e;i|=OZ,s.set(r,e);var u=UP(a(r),a(e),i,o,n,s);return s.delete(r),u;case VZ:if(tM)return tM.call(r)==tM.call(e)}return!1}var $Z=1,WZ=Object.prototype,qZ=WZ.hasOwnProperty;function XZ(r,e,t,i,o,n){var s=t&$Z,a=YS(r),l=a.length,c=YS(e),u=c.length;if(l!=u&&!s)return!1;for(var d=l;d--;){var h=a[d];if(!(s?h in e:qZ.call(e,h)))return!1}var p=n.get(r),m=n.get(e);if(p&&m)return p==e&&m==r;var g=!0;n.set(r,e),n.set(e,r);for(var v=s;++d<l;){h=a[d];var y=r[h],b=e[h];if(i)var x=s?i(b,y,h,e,r,n):i(y,b,h,r,e,n);if(!(x===void 0?y===b||o(y,b,t,i,n):x)){g=!1;break}v||(v=h=="constructor")}if(g&&!v){var _=r.constructor,S=e.constructor;_!=S&&"constructor"in r&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof S=="function"&&S instanceof S)&&(g=!1)}return n.delete(r),n.delete(e),g}var KZ=1,VP="[object Arguments]",GP="[object Array]",Py="[object Object]",YZ=Object.prototype,HP=YZ.hasOwnProperty;function JZ(r,e,t,i,o,n){var s=Wo(r),a=Wo(e),l=s?GP:Am(r),c=a?GP:Am(e);l=l==VP?Py:l,c=c==VP?Py:c;var u=l==Py,d=c==Py,h=l==c;if(h&&_m(r)){if(!_m(e))return!1;s=!0,u=!1}if(h&&!u)return n||(n=new Us),s||jS(r)?UP(r,e,t,i,o,n):jZ(r,e,l,t,i,o,n);if(!(t&KZ)){var p=u&&HP.call(r,"__wrapped__"),m=d&&HP.call(e,"__wrapped__");if(p||m){var g=p?r.value():r,v=m?e.value():e;return n||(n=new Us),o(g,v,t,i,n)}}return h?(n||(n=new Us),XZ(r,e,t,i,o,n)):!1}function Dy(r,e,t,i,o){return r===e?!0:r==null||e==null||!ha(r)&&!ha(e)?r!==r&&e!==e:JZ(r,e,t,i,Dy,o)}var ZZ=1,QZ=2;function eQ(r,e,t,i){var o=t.length,n=o,s=!i;if(r==null)return!n;for(r=Object(r);o--;){var a=t[o];if(s&&a[2]?a[1]!==r[a[0]]:!(a[0]in r))return!1}for(;++o<n;){a=t[o];var l=a[0],c=r[l],u=a[1];if(s&&a[2]){if(c===void 0&&!(l in r))return!1}else{var d=new Us;if(i)var h=i(c,u,l,r,e,d);if(!(h===void 0?Dy(u,c,ZZ|QZ,i,d):h))return!1}}return!0}function jP(r){return r===r&&!qo(r)}function tQ(r){for(var e=Sm(r),t=e.length;t--;){var i=e[t],o=r[i];e[t]=[i,o,jP(o)]}return e}function $P(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}function rQ(r){var e=tQ(r);return e.length==1&&e[0][2]?$P(e[0][0],e[0][1]):function(t){return t===r||eQ(t,r,e)}}function iQ(r,e){return r!=null&&e in Object(r)}function oQ(r,e,t){e=Oy(e,r);for(var i=-1,o=e.length,n=!1;++i<o;){var s=Cm(e[i]);if(!(n=r!=null&&t(r,s)))break;r=r[s]}return n||++i!=o?n:(o=r==null?0:r.length,!!o&&zS(o)&&Ny(s,o)&&(Wo(r)||xm(r)))}function WP(r,e){return r!=null&&oQ(r,e,iQ)}var nQ=1,sQ=2;function aQ(r,e){return $S(r)&&jP(e)?$P(Cm(r),e):function(t){var i=Wr(t,r);return i===void 0&&i===e?WP(t,r):Dy(e,i,nQ|sQ)}}function lQ(r){return function(e){return e==null?void 0:e[r]}}function cQ(r){return function(e){return WS(e,r)}}function uQ(r){return $S(r)?lQ(Cm(r)):cQ(r)}function qP(r){return typeof r=="function"?r:r==null?IS:typeof r=="object"?Wo(r)?aQ(r[0],r[1]):rQ(r):uQ(r)}function dQ(r){return function(e,t,i){for(var o=-1,n=Object(e),s=i(e),a=s.length;a--;){var l=s[r?a:++o];if(t(n[l],l,n)===!1)break}return e}}var hQ=dQ();const XP=hQ;function pQ(r,e){return r&&XP(r,e,Sm)}function fQ(r,e){return function(t,i){if(t==null)return t;if(!Rh(t))return r(t,i);for(var o=t.length,n=e?o:-1,s=Object(t);(e?n--:++n<o)&&i(s[n],n,s)!==!1;);return t}}var mQ=fQ(pQ);const gQ=mQ;var vQ=function(){return Fs.Date.now()};const rM=vQ;var yQ="Expected a function",bQ=Math.max,xQ=Math.min;function Xo(r,e,t){var i,o,n,s,a,l,c=0,u=!1,d=!1,h=!0;if(typeof r!="function")throw new TypeError(yQ);e=kS(e)||0,qo(t)&&(u=!!t.leading,d="maxWait"in t,n=d?bQ(kS(t.maxWait)||0,e):n,h="trailing"in t?!!t.trailing:h);function p(w){var M=i,T=o;return i=o=void 0,c=w,s=r.apply(T,M),s}function m(w){return c=w,a=setTimeout(y,e),u?p(w):s}function g(w){var M=w-l,T=w-c,E=e-M;return d?xQ(E,n-T):E}function v(w){var M=w-l,T=w-c;return l===void 0||M>=e||M<0||d&&T>=n}function y(){var w=rM();if(v(w))return b(w);a=setTimeout(y,g(w))}function b(w){return a=void 0,h&&i?p(w):(i=o=void 0,s)}function x(){a!==void 0&&clearTimeout(a),c=0,i=l=o=a=void 0}function _(){return a===void 0?s:b(rM())}function S(){var w=rM(),M=v(w);if(i=arguments,o=this,l=w,M){if(a===void 0)return m(l);if(d)return clearTimeout(a),a=setTimeout(y,e),p(l)}return a===void 0&&(a=setTimeout(y,e)),s}return S.cancel=x,S.flush=_,S}function iM(r,e,t){(t!==void 0&&!ym(r[e],t)||t===void 0&&!(e in r))&&FS(r,e,t)}function KP(r){return ha(r)&&Rh(r)}function oM(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}function _Q(r){return bm(r,Mm(r))}function wQ(r,e,t,i,o,n,s){var a=oM(r,t),l=oM(e,t),c=s.get(l);if(c){iM(r,t,c);return}var u=n?n(a,l,t+"",r,e,s):void 0,d=u===void 0;if(d){var h=Wo(l),p=!h&&_m(l),m=!h&&!p&&jS(l);u=l,h||p||m?Wo(a)?u=a:KP(a)?u=Y3(a):p?(d=!1,u=yP(l,!0)):m?(d=!1,u=RP(l,!0)):u=[]:UY(l)||xm(l)?(u=a,xm(a)?u=_Q(a):(!qo(a)||PS(a))&&(u=LP(l))):d=!1}d&&(s.set(l,u),o(u,l,i,n,s),s.delete(l)),iM(r,t,u)}function YP(r,e,t,i,o){r!==e&&XP(e,function(n,s){if(o||(o=new Us),qo(n))wQ(r,e,s,t,YP,i,o);else{var a=i?i(oM(r,s),n,s+"",r,e,o):void 0;a===void 0&&(a=n),iM(r,s,a)}},Mm)}function SQ(r,e,t){for(var i=-1,o=r==null?0:r.length;++i<o;)if(t(e,r[i]))return!0;return!1}var MQ=Math.max,TQ=Math.min;function EQ(r,e,t){var i=r==null?0:r.length;if(!i)return-1;var o=i-1;return t!==void 0&&(o=uX(t),o=t<0?MQ(i+o,0):TQ(o,i-1)),Z3(r,qP(e),o,!0)}function CQ(r,e){var t=-1,i=Rh(r)?Array(r.length):[];return gQ(r,function(o,n,s){i[++t]=e(o,n,s)}),i}function NQ(r,e){var t=Wo(r)?G3:CQ;return t(r,qP(e))}function AQ(r,e){return Nm(NQ(r,e),1)}var RQ=1/0;function LQ(r){var e=r==null?0:r.length;return e?Nm(r,RQ):[]}function By(r){for(var e=-1,t=r==null?0:r.length,i={};++e<t;){var o=r[e];i[o[0]]=o[1]}return i}function mn(r,e){return Dy(r,e)}function Mi(r){return r==null}function OQ(r){return r===void 0}var kQ=ZX(function(r,e,t){YP(r,e,t)});const JP=kQ;function ZP(r,e,t,i){if(!qo(r))return r;e=Oy(e,r);for(var o=-1,n=e.length,s=n-1,a=r;a!=null&&++o<n;){var l=Cm(e[o]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(o!=s){var u=a[l];c=i?i(u,l,a):void 0,c===void 0&&(c=qo(u)?u:Ny(e[o+1])?[]:{})}US(a,l,c),a=a[l]}return r}function IQ(r,e,t){for(var i=-1,o=e.length,n={};++i<o;){var s=e[i],a=WS(r,s);t(a,s)&&ZP(n,Oy(s,r),a)}return n}function PQ(r,e){return IQ(r,e,function(t,i){return WP(r,i)})}var DQ=OY(function(r,e){return r==null?{}:PQ(r,e)});const rl=DQ;function BQ(r,e,t){return r==null?r:ZP(r,e,t)}var FQ="Expected a function";function Mu(r,e,t){var i=!0,o=!0;if(typeof r!="function")throw new TypeError(FQ);return qo(t)&&(i="leading"in t?!!t.leading:i,o="trailing"in t?!!t.trailing:o),Xo(r,e,{leading:i,maxWait:e,trailing:o})}var UQ=1/0,zQ=Oh&&1/eM(new Oh([,-0]))[1]==UQ?function(r){return new Oh(r)}:OX;const VQ=zQ;var GQ=200;function HQ(r,e,t){var i=-1,o=$X,n=r.length,s=!0,a=[],l=a;if(t)s=!1,o=SQ;else if(n>=GQ){var c=e?null:VQ(r);if(c)return eM(c);s=!1,o=FP,l=new Lm}else l=e?[]:a;e:for(;++i<n;){var u=r[i],d=e?e(u):u;if(u=t||u!==0?u:0,s&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),a.push(u)}else o(l,d,t)||(l!==a&&l.push(d),a.push(u))}return a}var jQ=tP(function(r){return HQ(Nm(r,1,KP,!0))});const nM=jQ,Pi=r=>r===void 0,Ti=r=>typeof r=="boolean",wt=r=>typeof r=="number",ps=r=>!r&&r!==0||it(r)&&r.length===0||zt(r)&&!Object.keys(r).length,fs=r=>typeof Element>"u"?!1:r instanceof Element,$Q=r=>Mi(r),WQ=r=>Tt(r)?!Number.isNaN(Number(r)):!1,QP=(r="")=>r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),pa=r=>qf(r),Om=r=>Object.keys(r),qQ=r=>Object.entries(r),Fy=(r,e,t)=>({get value(){return Wr(r,e,t)},set value(i){BQ(r,e,i)}});class XQ extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function Ei(r,e){throw new XQ(`[${r}] ${e}`)}const eD=(r="")=>r.split(" ").filter(e=>!!e.trim()),zs=(r,e)=>{if(!r||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return r.classList.contains(e)},fa=(r,e)=>{!r||!e.trim()||r.classList.add(...eD(e))},gn=(r,e)=>{!r||!e.trim()||r.classList.remove(...eD(e))},Zl=(r,e)=>{var t;if(!Jt||!r||!e)return"";let i=cs(e);i==="float"&&(i="cssFloat");try{const o=r.style[i];if(o)return o;const n=(t=document.defaultView)==null?void 0:t.getComputedStyle(r,"");return n?n[i]:""}catch{return r.style[i]}};function hi(r,e="px"){if(!r)return"";if(wt(r)||WQ(r))return`${r}${e}`;if(Tt(r))return r}const KQ=(r,e)=>{if(!Jt)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],i=Zl(r,t);return["scroll","auto","overlay"].some(o=>i.includes(o))},sM=(r,e)=>{if(!Jt)return;let t=r;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(KQ(t,e))return t;t=t.parentNode}return t};let Uy;const tD=r=>{var e;if(!Jt)return 0;if(Uy!==void 0)return Uy;const t=document.createElement("div");t.className=`${r}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const i=t.offsetWidth;t.style.overflow="scroll";const o=document.createElement("div");o.style.width="100%",t.appendChild(o);const n=o.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),Uy=i-n,Uy};function rD(r,e){if(!Jt)return;if(!e){r.scrollTop=0;return}const t=[];let i=e.offsetParent;for(;i!==null&&r!==i&&r.contains(i);)t.push(i),i=i.offsetParent;const o=e.offsetTop+t.reduce((l,c)=>l+c.offsetTop,0),n=o+e.offsetHeight,s=r.scrollTop,a=s+r.clientHeight;o<s?r.scrollTop=o:n>a&&(r.scrollTop=n-r.clientHeight)}var ar=(r,e)=>{let t=r.__vccOpts||r;for(let[i,o]of e)t[i]=o;return t},YQ={name:"ArrowDown"},JQ={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ZQ=X("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),QQ=[ZQ];function eee(r,e,t,i,o,n){return A(),W("svg",JQ,QQ)}var Ql=ar(YQ,[["render",eee],["__file","arrow-down.vue"]]),tee={name:"ArrowLeft"},ree={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},iee=X("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1),oee=[iee];function nee(r,e,t,i,o,n){return A(),W("svg",ree,oee)}var ec=ar(tee,[["render",nee],["__file","arrow-left.vue"]]),see={name:"ArrowRight"},aee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},lee=X("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),cee=[lee];function uee(r,e,t,i,o,n){return A(),W("svg",aee,cee)}var Ko=ar(see,[["render",uee],["__file","arrow-right.vue"]]),dee={name:"ArrowUp"},hee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},pee=X("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),fee=[pee];function mee(r,e,t,i,o,n){return A(),W("svg",hee,fee)}var zy=ar(dee,[["render",mee],["__file","arrow-up.vue"]]),gee={name:"Back"},vee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},yee=X("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"},null,-1),bee=X("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"},null,-1),xee=[yee,bee];function _ee(r,e,t,i,o,n){return A(),W("svg",vee,xee)}var wee=ar(gee,[["render",_ee],["__file","back.vue"]]),See={name:"Calendar"},Mee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Tee=X("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64H128zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0v32zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64z"},null,-1),Eee=[Tee];function Cee(r,e,t,i,o,n){return A(),W("svg",Mee,Eee)}var Nee=ar(See,[["render",Cee],["__file","calendar.vue"]]),Aee={name:"CaretRight"},Ree={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Lee=X("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1),Oee=[Lee];function kee(r,e,t,i,o,n){return A(),W("svg",Ree,Oee)}var iD=ar(Aee,[["render",kee],["__file","caret-right.vue"]]),Iee={name:"CaretTop"},Pee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Dee=X("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"},null,-1),Bee=[Dee];function Fee(r,e,t,i,o,n){return A(),W("svg",Pee,Bee)}var Uee=ar(Iee,[["render",Fee],["__file","caret-top.vue"]]),zee={name:"Check"},Vee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Gee=X("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),Hee=[Gee];function jee(r,e,t,i,o,n){return A(),W("svg",Vee,Hee)}var km=ar(zee,[["render",jee],["__file","check.vue"]]),$ee={name:"CircleCheckFilled"},Wee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},qee=X("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),Xee=[qee];function Kee(r,e,t,i,o,n){return A(),W("svg",Wee,Xee)}var Yee=ar($ee,[["render",Kee],["__file","circle-check-filled.vue"]]),Jee={name:"CircleCheck"},Zee={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Qee=X("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),ete=X("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1),tte=[Qee,ete];function rte(r,e,t,i,o,n){return A(),W("svg",Zee,tte)}var aM=ar(Jee,[["render",rte],["__file","circle-check.vue"]]),ite={name:"CircleCloseFilled"},ote={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},nte=X("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),ste=[nte];function ate(r,e,t,i,o,n){return A(),W("svg",ote,ste)}var lM=ar(ite,[["render",ate],["__file","circle-close-filled.vue"]]),lte={name:"CircleClose"},cte={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ute=X("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1),dte=X("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),hte=[ute,dte];function pte(r,e,t,i,o,n){return A(),W("svg",cte,hte)}var tc=ar(lte,[["render",pte],["__file","circle-close.vue"]]),fte={name:"Clock"},mte={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},gte=X("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),vte=X("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32z"},null,-1),yte=X("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32z"},null,-1),bte=[gte,vte,yte];function xte(r,e,t,i,o,n){return A(),W("svg",mte,bte)}var oD=ar(fte,[["render",xte],["__file","clock.vue"]]),_te={name:"Close"},wte={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Ste=X("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),Mte=[Ste];function Tte(r,e,t,i,o,n){return A(),W("svg",wte,Mte)}var Vs=ar(_te,[["render",Tte],["__file","close.vue"]]),Ete={name:"DArrowLeft"},Cte={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Nte=X("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"},null,-1),Ate=[Nte];function Rte(r,e,t,i,o,n){return A(),W("svg",Cte,Ate)}var kh=ar(Ete,[["render",Rte],["__file","d-arrow-left.vue"]]),Lte={name:"DArrowRight"},Ote={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},kte=X("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688zm-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"},null,-1),Ite=[kte];function Pte(r,e,t,i,o,n){return A(),W("svg",Ote,Ite)}var Ih=ar(Lte,[["render",Pte],["__file","d-arrow-right.vue"]]),Dte={name:"DataBoard"},Bte={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Fte=X("path",{fill:"currentColor",d:"M32 128h960v64H32z"},null,-1),Ute=X("path",{fill:"currentColor",d:"M192 192v512h640V192H192zm-64-64h768v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V128z"},null,-1),zte=X("path",{fill:"currentColor",d:"M322.176 960H248.32l144.64-250.56 55.424 32L322.176 960zm453.888 0h-73.856L576 741.44l55.424-32L776.064 960z"},null,-1),Vte=[Fte,Ute,zte];function Gte(r,e,t,i,o,n){return A(),W("svg",Bte,Vte)}var Hte=ar(Dte,[["render",Gte],["__file","data-board.vue"]]),jte={name:"Delete"},$te={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Wte=X("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1),qte=[Wte];function Xte(r,e,t,i,o,n){return A(),W("svg",$te,qte)}var Kte=ar(jte,[["render",Xte],["__file","delete.vue"]]),Yte={name:"Document"},Jte={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Zte=X("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"},null,-1),Qte=[Zte];function ere(r,e,t,i,o,n){return A(),W("svg",Jte,Qte)}var tre=ar(Yte,[["render",ere],["__file","document.vue"]]),rre={name:"FullScreen"},ire={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ore=X("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),nre=[ore];function sre(r,e,t,i,o,n){return A(),W("svg",ire,nre)}var are=ar(rre,[["render",sre],["__file","full-screen.vue"]]),lre={name:"Hide"},cre={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ure=X("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"},null,-1),dre=X("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"},null,-1),hre=[ure,dre];function pre(r,e,t,i,o,n){return A(),W("svg",cre,hre)}var fre=ar(lre,[["render",pre],["__file","hide.vue"]]),mre={name:"InfoFilled"},gre={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},vre=X("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),yre=[vre];function bre(r,e,t,i,o,n){return A(),W("svg",gre,yre)}var cM=ar(mre,[["render",bre],["__file","info-filled.vue"]]),xre={name:"Loading"},_re={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},wre=X("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),Sre=[wre];function Mre(r,e,t,i,o,n){return A(),W("svg",_re,Sre)}var rc=ar(xre,[["render",Mre],["__file","loading.vue"]]),Tre={name:"Minus"},Ere={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Cre=X("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1),Nre=[Cre];function Are(r,e,t,i,o,n){return A(),W("svg",Ere,Nre)}var Rre=ar(Tre,[["render",Are],["__file","minus.vue"]]),Lre={name:"MoreFilled"},Ore={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},kre=X("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224z"},null,-1),Ire=[kre];function Pre(r,e,t,i,o,n){return A(),W("svg",Ore,Ire)}var nD=ar(Lre,[["render",Pre],["__file","more-filled.vue"]]),Dre={name:"More"},Bre={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Fre=X("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96z"},null,-1),Ure=[Fre];function zre(r,e,t,i,o,n){return A(),W("svg",Bre,Ure)}var Vre=ar(Dre,[["render",zre],["__file","more.vue"]]),Gre={name:"PictureFilled"},Hre={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},jre=X("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32H96zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112zM256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384z"},null,-1),$re=[jre];function Wre(r,e,t,i,o,n){return A(),W("svg",Hre,$re)}var qre=ar(Gre,[["render",Wre],["__file","picture-filled.vue"]]),Xre={name:"Plus"},Kre={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Yre=X("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),Jre=[Yre];function Zre(r,e,t,i,o,n){return A(),W("svg",Kre,Jre)}var sD=ar(Xre,[["render",Zre],["__file","plus.vue"]]),Qre={name:"QuestionFilled"},eie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},tie=X("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"},null,-1),rie=[tie];function iie(r,e,t,i,o,n){return A(),W("svg",eie,rie)}var oie=ar(Qre,[["render",iie],["__file","question-filled.vue"]]),nie={name:"RefreshLeft"},sie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},aie=X("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1),lie=[aie];function cie(r,e,t,i,o,n){return A(),W("svg",sie,lie)}var uie=ar(nie,[["render",cie],["__file","refresh-left.vue"]]),die={name:"RefreshRight"},hie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},pie=X("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1),fie=[pie];function mie(r,e,t,i,o,n){return A(),W("svg",hie,fie)}var gie=ar(die,[["render",mie],["__file","refresh-right.vue"]]),vie={name:"ScaleToOriginal"},yie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},bie=X("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1),xie=[bie];function _ie(r,e,t,i,o,n){return A(),W("svg",yie,xie)}var wie=ar(vie,[["render",_ie],["__file","scale-to-original.vue"]]),Sie={name:"Search"},Mie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Tie=X("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),Eie=[Tie];function Cie(r,e,t,i,o,n){return A(),W("svg",Mie,Eie)}var Nie=ar(Sie,[["render",Cie],["__file","search.vue"]]),Aie={name:"SetUp"},Rie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Lie=X("path",{fill:"currentColor",d:"M224 160a64 64 0 0 0-64 64v576a64 64 0 0 0 64 64h576a64 64 0 0 0 64-64V224a64 64 0 0 0-64-64H224zm0-64h576a128 128 0 0 1 128 128v576a128 128 0 0 1-128 128H224A128 128 0 0 1 96 800V224A128 128 0 0 1 224 96z"},null,-1),Oie=X("path",{fill:"currentColor",d:"M384 416a64 64 0 1 0 0-128 64 64 0 0 0 0 128zm0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256z"},null,-1),kie=X("path",{fill:"currentColor",d:"M480 320h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32zm160 416a64 64 0 1 0 0-128 64 64 0 0 0 0 128zm0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256z"},null,-1),Iie=X("path",{fill:"currentColor",d:"M288 640h256q32 0 32 32t-32 32H288q-32 0-32-32t32-32z"},null,-1),Pie=[Lie,Oie,kie,Iie];function Die(r,e,t,i,o,n){return A(),W("svg",Rie,Pie)}var Bie=ar(Aie,[["render",Die],["__file","set-up.vue"]]),Fie={name:"SortDown"},Uie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},zie=X("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0z"},null,-1),Vie=[zie];function Gie(r,e,t,i,o,n){return A(),W("svg",Uie,Vie)}var Hie=ar(Fie,[["render",Gie],["__file","sort-down.vue"]]),jie={name:"SortUp"},$ie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Wie=X("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248z"},null,-1),qie=[Wie];function Xie(r,e,t,i,o,n){return A(),W("svg",$ie,qie)}var Kie=ar(jie,[["render",Xie],["__file","sort-up.vue"]]),Yie={name:"StarFilled"},Jie={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Zie=X("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"},null,-1),Qie=[Zie];function eoe(r,e,t,i,o,n){return A(),W("svg",Jie,Qie)}var Vy=ar(Yie,[["render",eoe],["__file","star-filled.vue"]]),toe={name:"Star"},roe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ioe=X("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72L512 747.84zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"},null,-1),ooe=[ioe];function noe(r,e,t,i,o,n){return A(),W("svg",roe,ooe)}var soe=ar(toe,[["render",noe],["__file","star.vue"]]),aoe={name:"SuccessFilled"},loe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},coe=X("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),uoe=[coe];function doe(r,e,t,i,o,n){return A(),W("svg",loe,uoe)}var aD=ar(aoe,[["render",doe],["__file","success-filled.vue"]]),hoe={name:"View"},poe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},foe=X("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),moe=[foe];function goe(r,e,t,i,o,n){return A(),W("svg",poe,moe)}var voe=ar(hoe,[["render",goe],["__file","view.vue"]]),yoe={name:"WarningFilled"},boe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},xoe=X("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),_oe=[xoe];function woe(r,e,t,i,o,n){return A(),W("svg",boe,_oe)}var Gy=ar(yoe,[["render",woe],["__file","warning-filled.vue"]]),Soe={name:"ZoomIn"},Moe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Toe=X("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zm-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96z"},null,-1),Eoe=[Toe];function Coe(r,e,t,i,o,n){return A(),W("svg",Moe,Eoe)}var lD=ar(Soe,[["render",Coe],["__file","zoom-in.vue"]]),Noe={name:"ZoomOut"},Aoe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Roe=X("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),Loe=[Roe];function Ooe(r,e,t,i,o,n){return A(),W("svg",Aoe,Loe)}var koe=ar(Noe,[["render",Ooe],["__file","zoom-out.vue"]]);const cD="__epPropKey",Te=r=>r,Ioe=r=>zt(r)&&!!r[cD],Gs=(r,e)=>{if(!zt(r)||Ioe(r))return r;const{values:t,required:i,default:o,type:n,validator:s}=r,a={type:n,required:!!i,validator:t||s?l=>{let c=!1,u=[];if(t&&(u=Array.from(t),Yt(r,"default")&&u.push(o),c||(c=u.includes(l))),s&&(c||(c=s(l))),!c&&u.length>0){const d=[...new Set(u)].map(h=>JSON.stringify(h)).join(", ");mW(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${d}], got value ${JSON.stringify(l)}.`)}return c}:void 0,[cD]:!0};return Yt(r,"default")&&(a.default=o),a},Ye=r=>By(Object.entries(r).map(([e,t])=>[e,Gs(t,e)])),Lr=Te([String,Object,Function]),uD={Close:Vs},uM={Close:Vs,SuccessFilled:aD,InfoFilled:cM,WarningFilled:Gy,CircleCloseFilled:lM},ic={success:aD,warning:Gy,error:lM,info:cM},dM={validating:rc,success:aM,error:tc},Bt=(r,e)=>{if(r.install=t=>{for(const i of[r,...Object.values(e??{})])t.component(i.name,i)},e)for(const[t,i]of Object.entries(e))r[t]=i;return r},dD=(r,e)=>(r.install=t=>{r._context=t._context,t.config.globalProperties[e]=r},r),Poe=(r,e)=>(r.install=t=>{t.directive(e,r)},r),ii=r=>(r.install=_r,r),Hy=(...r)=>e=>{r.forEach(t=>{St(t)?t(e):t.value=e})},ft={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},Doe=["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"],hM=["sun","mon","tue","wed","thu","fri","sat"],Vt="update:modelValue",Fr="change",Yo="input",hD=Symbol("INSTALLED_KEY"),ma=["","default","small","large"],Boe={large:40,default:32,small:24},Foe=r=>Boe[r||"default"],jy=r=>["",...ma].includes(r);var ms=(r=>(r[r.TEXT=1]="TEXT",r[r.CLASS=2]="CLASS",r[r.STYLE=4]="STYLE",r[r.PROPS=8]="PROPS",r[r.FULL_PROPS=16]="FULL_PROPS",r[r.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",r[r.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",r[r.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",r[r.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",r[r.NEED_PATCH=512]="NEED_PATCH",r[r.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",r[r.HOISTED=-1]="HOISTED",r[r.BAIL=-2]="BAIL",r))(ms||{});function pM(r){return $r(r)&&r.type===nt}function Uoe(r){return $r(r)&&r.type===$o}function zoe(r){return $r(r)&&!pM(r)&&!Uoe(r)}const Voe=r=>{if(!$r(r))return{};const e=r.props||{},t=($r(r.type)?r.type.props:void 0)||{},i={};return Object.keys(t).forEach(o=>{Yt(t[o],"default")&&(i[o]=t[o].default)}),Object.keys(e).forEach(o=>{i[cs(o)]=e[o]}),i},Goe=r=>{if(!it(r)||r.length>1)throw new Error("expect to receive a single Vue element child");return r[0]},Ph=r=>{const e=it(r)?r:[r],t=[];return e.forEach(i=>{var o;it(i)?t.push(...Ph(i)):$r(i)&&it(i.children)?t.push(...Ph(i.children)):(t.push(i),$r(i)&&(o=i.component)!=null&&o.subTree&&t.push(...Ph(i.component.subTree)))}),t},pD=r=>[...new Set(r)],il=r=>!r&&r!==0?[]:Array.isArray(r)?r:[r],$y=r=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(r),Dh=r=>Jt?window.requestAnimationFrame(r):setTimeout(r,16),Wy=r=>Jt?window.cancelAnimationFrame(r):clearTimeout(r),qy=()=>Math.floor(Math.random()*1e4),qr=r=>r,Hoe=["class","style"],joe=/^on[A-Z]/,fM=(r={})=>{const{excludeListeners:e=!1,excludeKeys:t}=r,i=N(()=>((t==null?void 0:t.value)||[]).concat(Hoe)),o=It();return N(o?()=>{var n;return By(Object.entries((n=o.proxy)==null?void 0:n.$attrs).filter(([s])=>!i.value.includes(s)&&!(e&&joe.test(s))))}:()=>({}))},ga=({from:r,replacement:e,scope:t,version:i,ref:o,type:n="API"},s)=>{ke(()=>f(s),a=>{},{immediate:!0})},fD=(r,e,t)=>{let i={offsetX:0,offsetY:0};const o=a=>{const l=a.clientX,c=a.clientY,{offsetX:u,offsetY:d}=i,h=r.value.getBoundingClientRect(),p=h.left,m=h.top,g=h.width,v=h.height,y=document.documentElement.clientWidth,b=document.documentElement.clientHeight,x=-p+u,_=-m+d,S=y-p-g+u,w=b-m-v+d,M=E=>{const C=Math.min(Math.max(u+E.clientX-l,x),S),B=Math.min(Math.max(d+E.clientY-c,_),w);i={offsetX:C,offsetY:B},r.value.style.transform=`translate(${hi(C)}, ${hi(B)})`},T=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",T)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",T)},n=()=>{e.value&&r.value&&e.value.addEventListener("mousedown",o)},s=()=>{e.value&&r.value&&e.value.removeEventListener("mousedown",o)};Rt(()=>{Vn(()=>{t.value?n():s()})}),Vr(()=>{s()})};var $oe={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const Woe=r=>(e,t)=>qoe(e,t,f(r)),qoe=(r,e,t)=>Wr(t,r,r).replace(/\{(\w+)\}/g,(i,o)=>{var n;return`${(n=e==null?void 0:e[o])!=null?n:`{${o}}`}`}),Xoe=r=>{const e=N(()=>f(r).name),t=Ar(r)?r:V(r);return{lang:e,locale:t,t:Woe(r)}},mD=Symbol("localeContextKey"),ir=r=>{const e=r||ot(mD,V());return Xoe(N(()=>e.value||$oe))},Im="el",Koe="is-",Tu=(r,e,t,i,o)=>{let n=`${r}-${e}`;return t&&(n+=`-${t}`),i&&(n+=`__${i}`),o&&(n+=`--${o}`),n},gD=Symbol("namespaceContextKey"),mM=r=>{const e=r||(It()?ot(gD,V(Im)):V(Im));return N(()=>f(e)||Im)},Pe=(r,e)=>{const t=mM(e);return{namespace:t,b:(i="")=>Tu(t.value,r,i,"",""),e:i=>i?Tu(t.value,r,"",i,""):"",m:i=>i?Tu(t.value,r,"","",i):"",be:(i,o)=>i&&o?Tu(t.value,r,i,o,""):"",em:(i,o)=>i&&o?Tu(t.value,r,"",i,o):"",bm:(i,o)=>i&&o?Tu(t.value,r,i,"",o):"",bem:(i,o,n)=>i&&o&&n?Tu(t.value,r,i,o,n):"",is:(i,...o)=>{const n=o.length>=1?o[0]:!0;return i&&n?`${Koe}${i}`:""},cssVar:i=>{const o={};for(const n in i)i[n]&&(o[`--${t.value}-${n}`]=i[n]);return o},cssVarName:i=>`--${t.value}-${i}`,cssVarBlock:i=>{const o={};for(const n in i)i[n]&&(o[`--${t.value}-${r}-${n}`]=i[n]);return o},cssVarBlockName:i=>`--${t.value}-${r}-${i}`}},vD=(r,e={})=>{Ar(r)||Ei("[useLockscreen]","You need to pass a ref param to this function");const t=e.ns||Pe("popup"),i=Tk(()=>t.bm("parent","hidden"));if(!Jt||zs(document.body,i.value))return;let o=0,n=!1,s="0";const a=()=>{setTimeout(()=>{gn(document==null?void 0:document.body,i.value),n&&document&&(document.body.style.width=s)},200)};ke(r,l=>{if(!l){a();return}n=!zs(document.body,i.value),n&&(s=document.body.style.width),o=tD(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,u=Zl(document.body,"overflowY");o>0&&(c||u==="scroll")&&n&&(document.body.style.width=`calc(100% - ${o}px)`),fa(document.body,i.value)}),rk(()=>a())},Yoe=Gs({type:Te(Boolean),default:null}),Joe=Gs({type:Te(Function)}),yD=r=>{const e=`update:${r}`,t=`onUpdate:${r}`,i=[e],o={[r]:Yoe,[t]:Joe};return{useModelToggle:({indicator:n,toggleReason:s,shouldHideWhenRouteChanges:a,shouldProceed:l,onShow:c,onHide:u})=>{const d=It(),{emit:h}=d,p=d.props,m=N(()=>St(p[t])),g=N(()=>p[r]===null),v=w=>{n.value!==!0&&(n.value=!0,s&&(s.value=w),St(c)&&c(w))},y=w=>{n.value!==!1&&(n.value=!1,s&&(s.value=w),St(u)&&u(w))},b=w=>{if(p.disabled===!0||St(l)&&!l())return;const M=m.value&&Jt;M&&h(e,!0),(g.value||!M)&&v(w)},x=w=>{if(p.disabled===!0||!Jt)return;const M=m.value&&Jt;M&&h(e,!1),(g.value||!M)&&y(w)},_=w=>{Ti(w)&&(p.disabled&&w?m.value&&h(e,!1):n.value!==w&&(w?v():y()))},S=()=>{n.value?x():b()};return ke(()=>p[r],_),a&&d.appContext.config.globalProperties.$route!==void 0&&ke(()=>({...d.proxy.$route}),()=>{a.value&&n.value&&x()}),Rt(()=>{_(p[r])}),{hide:x,show:b,toggle:S,hasUpdateHandler:m}},useModelToggleProps:o,useModelToggleEmits:i}};yD("modelValue");const bD=r=>{const e=It();return N(()=>{var t,i;return(i=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:i[r]})};var vn="top",gs="bottom",vs="right",yn="left",gM="auto",Pm=[vn,gs,vs,yn],Bh="start",Dm="end",Zoe="clippingParents",xD="viewport",Bm="popper",Qoe="reference",_D=Pm.reduce(function(r,e){return r.concat([e+"-"+Bh,e+"-"+Dm])},[]),Eu=[].concat(Pm,[gM]).reduce(function(r,e){return r.concat([e,e+"-"+Bh,e+"-"+Dm])},[]),ene="beforeRead",tne="read",rne="afterRead",ine="beforeMain",one="main",nne="afterMain",sne="beforeWrite",ane="write",lne="afterWrite",cne=[ene,tne,rne,ine,one,nne,sne,ane,lne];function va(r){return r?(r.nodeName||"").toLowerCase():null}function Hs(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function Fh(r){var e=Hs(r).Element;return r instanceof e||r instanceof Element}function ys(r){var e=Hs(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function vM(r){if(typeof ShadowRoot>"u")return!1;var e=Hs(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function une(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},o=e.attributes[t]||{},n=e.elements[t];!ys(n)||!va(n)||(Object.assign(n.style,i),Object.keys(o).forEach(function(s){var a=o[s];a===!1?n.removeAttribute(s):n.setAttribute(s,a===!0?"":a)}))})}function dne(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var o=e.elements[i],n=e.attributes[i]||{},s=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=s.reduce(function(l,c){return l[c]="",l},{});!ys(o)||!va(o)||(Object.assign(o.style,a),Object.keys(n).forEach(function(l){o.removeAttribute(l)}))})}}var wD={name:"applyStyles",enabled:!0,phase:"write",fn:une,effect:dne,requires:["computeStyles"]};function ya(r){return r.split("-")[0]}var Cu=Math.max,Xy=Math.min,Uh=Math.round;function zh(r,e){e===void 0&&(e=!1);var t=r.getBoundingClientRect(),i=1,o=1;if(ys(r)&&e){var n=r.offsetHeight,s=r.offsetWidth;s>0&&(i=Uh(t.width)/s||1),n>0&&(o=Uh(t.height)/n||1)}return{width:t.width/i,height:t.height/o,top:t.top/o,right:t.right/i,bottom:t.bottom/o,left:t.left/i,x:t.left/i,y:t.top/o}}function yM(r){var e=zh(r),t=r.offsetWidth,i=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:i}}function SD(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&vM(t)){var i=e;do{if(i&&r.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function ol(r){return Hs(r).getComputedStyle(r)}function hne(r){return["table","td","th"].indexOf(va(r))>=0}function oc(r){return((Fh(r)?r.ownerDocument:r.document)||window.document).documentElement}function Ky(r){return va(r)==="html"?r:r.assignedSlot||r.parentNode||(vM(r)?r.host:null)||oc(r)}function MD(r){return!ys(r)||ol(r).position==="fixed"?null:r.offsetParent}function pne(r){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&ys(r)){var i=ol(r);if(i.position==="fixed")return null}var o=Ky(r);for(vM(o)&&(o=o.host);ys(o)&&["html","body"].indexOf(va(o))<0;){var n=ol(o);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||e&&n.willChange==="filter"||e&&n.filter&&n.filter!=="none")return o;o=o.parentNode}return null}function Fm(r){for(var e=Hs(r),t=MD(r);t&&hne(t)&&ol(t).position==="static";)t=MD(t);return t&&(va(t)==="html"||va(t)==="body"&&ol(t).position==="static")?e:t||pne(r)||e}function bM(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function Um(r,e,t){return Cu(r,Xy(e,t))}function fne(r,e,t){var i=Um(r,e,t);return i>t?t:i}function TD(){return{top:0,right:0,bottom:0,left:0}}function ED(r){return Object.assign({},TD(),r)}function CD(r,e){return e.reduce(function(t,i){return t[i]=r,t},{})}var mne=function(r,e){return r=typeof r=="function"?r(Object.assign({},e.rects,{placement:e.placement})):r,ED(typeof r!="number"?r:CD(r,Pm))};function gne(r){var e,t=r.state,i=r.name,o=r.options,n=t.elements.arrow,s=t.modifiersData.popperOffsets,a=ya(t.placement),l=bM(a),c=[yn,vs].indexOf(a)>=0,u=c?"height":"width";if(!(!n||!s)){var d=mne(o.padding,t),h=yM(n),p=l==="y"?vn:yn,m=l==="y"?gs:vs,g=t.rects.reference[u]+t.rects.reference[l]-s[l]-t.rects.popper[u],v=s[l]-t.rects.reference[l],y=Fm(n),b=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,x=g/2-v/2,_=d[p],S=b-h[u]-d[m],w=b/2-h[u]/2+x,M=Um(_,w,S),T=l;t.modifiersData[i]=(e={},e[T]=M,e.centerOffset=M-w,e)}}function vne(r){var e=r.state,t=r.options,i=t.element,o=i===void 0?"[data-popper-arrow]":i;o!=null&&(typeof o=="string"&&(o=e.elements.popper.querySelector(o),!o)||!SD(e.elements.popper,o)||(e.elements.arrow=o))}var yne={name:"arrow",enabled:!0,phase:"main",fn:gne,effect:vne,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Vh(r){return r.split("-")[1]}var bne={top:"auto",right:"auto",bottom:"auto",left:"auto"};function xne(r){var e=r.x,t=r.y,i=window,o=i.devicePixelRatio||1;return{x:Uh(e*o)/o||0,y:Uh(t*o)/o||0}}function ND(r){var e,t=r.popper,i=r.popperRect,o=r.placement,n=r.variation,s=r.offsets,a=r.position,l=r.gpuAcceleration,c=r.adaptive,u=r.roundOffsets,d=r.isFixed,h=s.x,p=h===void 0?0:h,m=s.y,g=m===void 0?0:m,v=typeof u=="function"?u({x:p,y:g}):{x:p,y:g};p=v.x,g=v.y;var y=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),x=yn,_=vn,S=window;if(c){var w=Fm(t),M="clientHeight",T="clientWidth";if(w===Hs(t)&&(w=oc(t),ol(w).position!=="static"&&a==="absolute"&&(M="scrollHeight",T="scrollWidth")),w=w,o===vn||(o===yn||o===vs)&&n===Dm){_=gs;var E=d&&w===S&&S.visualViewport?S.visualViewport.height:w[M];g-=E-i.height,g*=l?1:-1}if(o===yn||(o===vn||o===gs)&&n===Dm){x=vs;var C=d&&w===S&&S.visualViewport?S.visualViewport.width:w[T];p-=C-i.width,p*=l?1:-1}}var B=Object.assign({position:a},c&&bne),I=u===!0?xne({x:p,y:g}):{x:p,y:g};if(p=I.x,g=I.y,l){var L;return Object.assign({},B,(L={},L[_]=b?"0":"",L[x]=y?"0":"",L.transform=(S.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",L))}return Object.assign({},B,(e={},e[_]=b?g+"px":"",e[x]=y?p+"px":"",e.transform="",e))}function _ne(r){var e=r.state,t=r.options,i=t.gpuAcceleration,o=i===void 0?!0:i,n=t.adaptive,s=n===void 0?!0:n,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:ya(e.placement),variation:Vh(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:o,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,ND(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,ND(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var AD={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:_ne,data:{}},Yy={passive:!0};function wne(r){var e=r.state,t=r.instance,i=r.options,o=i.scroll,n=o===void 0?!0:o,s=i.resize,a=s===void 0?!0:s,l=Hs(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return n&&c.forEach(function(u){u.addEventListener("scroll",t.update,Yy)}),a&&l.addEventListener("resize",t.update,Yy),function(){n&&c.forEach(function(u){u.removeEventListener("scroll",t.update,Yy)}),a&&l.removeEventListener("resize",t.update,Yy)}}var RD={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:wne,data:{}},Sne={left:"right",right:"left",bottom:"top",top:"bottom"};function Jy(r){return r.replace(/left|right|bottom|top/g,function(e){return Sne[e]})}var Mne={start:"end",end:"start"};function LD(r){return r.replace(/start|end/g,function(e){return Mne[e]})}function xM(r){var e=Hs(r),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function _M(r){return zh(oc(r)).left+xM(r).scrollLeft}function Tne(r){var e=Hs(r),t=oc(r),i=e.visualViewport,o=t.clientWidth,n=t.clientHeight,s=0,a=0;return i&&(o=i.width,n=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(s=i.offsetLeft,a=i.offsetTop)),{width:o,height:n,x:s+_M(r),y:a}}function Ene(r){var e,t=oc(r),i=xM(r),o=(e=r.ownerDocument)==null?void 0:e.body,n=Cu(t.scrollWidth,t.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=Cu(t.scrollHeight,t.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-i.scrollLeft+_M(r),l=-i.scrollTop;return ol(o||t).direction==="rtl"&&(a+=Cu(t.clientWidth,o?o.clientWidth:0)-n),{width:n,height:s,x:a,y:l}}function wM(r){var e=ol(r),t=e.overflow,i=e.overflowX,o=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+o+i)}function OD(r){return["html","body","#document"].indexOf(va(r))>=0?r.ownerDocument.body:ys(r)&&wM(r)?r:OD(Ky(r))}function zm(r,e){var t;e===void 0&&(e=[]);var i=OD(r),o=i===((t=r.ownerDocument)==null?void 0:t.body),n=Hs(i),s=o?[n].concat(n.visualViewport||[],wM(i)?i:[]):i,a=e.concat(s);return o?a:a.concat(zm(Ky(s)))}function SM(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function Cne(r){var e=zh(r);return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function kD(r,e){return e===xD?SM(Tne(r)):Fh(e)?Cne(e):SM(Ene(oc(r)))}function Nne(r){var e=zm(Ky(r)),t=["absolute","fixed"].indexOf(ol(r).position)>=0,i=t&&ys(r)?Fm(r):r;return Fh(i)?e.filter(function(o){return Fh(o)&&SD(o,i)&&va(o)!=="body"}):[]}function Ane(r,e,t){var i=e==="clippingParents"?Nne(r):[].concat(e),o=[].concat(i,[t]),n=o[0],s=o.reduce(function(a,l){var c=kD(r,l);return a.top=Cu(c.top,a.top),a.right=Xy(c.right,a.right),a.bottom=Xy(c.bottom,a.bottom),a.left=Cu(c.left,a.left),a},kD(r,n));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function ID(r){var e=r.reference,t=r.element,i=r.placement,o=i?ya(i):null,n=i?Vh(i):null,s=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(o){case vn:l={x:s,y:e.y-t.height};break;case gs:l={x:s,y:e.y+e.height};break;case vs:l={x:e.x+e.width,y:a};break;case yn:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=o?bM(o):null;if(c!=null){var u=c==="y"?"height":"width";switch(n){case Bh:l[c]=l[c]-(e[u]/2-t[u]/2);break;case Dm:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function Vm(r,e){e===void 0&&(e={});var t=e,i=t.placement,o=i===void 0?r.placement:i,n=t.boundary,s=n===void 0?Zoe:n,a=t.rootBoundary,l=a===void 0?xD:a,c=t.elementContext,u=c===void 0?Bm:c,d=t.altBoundary,h=d===void 0?!1:d,p=t.padding,m=p===void 0?0:p,g=ED(typeof m!="number"?m:CD(m,Pm)),v=u===Bm?Qoe:Bm,y=r.rects.popper,b=r.elements[h?v:u],x=Ane(Fh(b)?b:b.contextElement||oc(r.elements.popper),s,l),_=zh(r.elements.reference),S=ID({reference:_,element:y,strategy:"absolute",placement:o}),w=SM(Object.assign({},y,S)),M=u===Bm?w:_,T={top:x.top-M.top+g.top,bottom:M.bottom-x.bottom+g.bottom,left:x.left-M.left+g.left,right:M.right-x.right+g.right},E=r.modifiersData.offset;if(u===Bm&&E){var C=E[o];Object.keys(T).forEach(function(B){var I=[vs,gs].indexOf(B)>=0?1:-1,L=[vn,gs].indexOf(B)>=0?"y":"x";T[B]+=C[L]*I})}return T}function Rne(r,e){e===void 0&&(e={});var t=e,i=t.placement,o=t.boundary,n=t.rootBoundary,s=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?Eu:l,u=Vh(i),d=u?a?_D:_D.filter(function(m){return Vh(m)===u}):Pm,h=d.filter(function(m){return c.indexOf(m)>=0});h.length===0&&(h=d);var p=h.reduce(function(m,g){return m[g]=Vm(r,{placement:g,boundary:o,rootBoundary:n,padding:s})[ya(g)],m},{});return Object.keys(p).sort(function(m,g){return p[m]-p[g]})}function Lne(r){if(ya(r)===gM)return[];var e=Jy(r);return[LD(r),e,LD(e)]}function One(r){var e=r.state,t=r.options,i=r.name;if(!e.modifiersData[i]._skip){for(var o=t.mainAxis,n=o===void 0?!0:o,s=t.altAxis,a=s===void 0?!0:s,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,h=t.altBoundary,p=t.flipVariations,m=p===void 0?!0:p,g=t.allowedAutoPlacements,v=e.options.placement,y=ya(v),b=y===v,x=l||(b||!m?[Jy(v)]:Lne(v)),_=[v].concat(x).reduce(function(ce,ve){return ce.concat(ya(ve)===gM?Rne(e,{placement:ve,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:g}):ve)},[]),S=e.rects.reference,w=e.rects.popper,M=new Map,T=!0,E=_[0],C=0;C<_.length;C++){var B=_[C],I=ya(B),L=Vh(B)===Bh,P=[vn,gs].indexOf(I)>=0,U=P?"width":"height",G=Vm(e,{placement:B,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),R=P?L?vs:yn:L?gs:vn;S[U]>w[U]&&(R=Jy(R));var F=Jy(R),O=[];if(n&&O.push(G[I]<=0),a&&O.push(G[R]<=0,G[F]<=0),O.every(function(ce){return ce})){E=B,T=!1;break}M.set(B,O)}if(T)for(var H=m?3:1,$=function(ce){var ve=_.find(function(xe){var te=M.get(xe);if(te)return te.slice(0,ce).every(function(Z){return Z})});if(ve)return E=ve,"break"},j=H;j>0;j--){var J=$(j);if(J==="break")break}e.placement!==E&&(e.modifiersData[i]._skip=!0,e.placement=E,e.reset=!0)}}var kne={name:"flip",enabled:!0,phase:"main",fn:One,requiresIfExists:["offset"],data:{_skip:!1}};function PD(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function DD(r){return[vn,vs,gs,yn].some(function(e){return r[e]>=0})}function Ine(r){var e=r.state,t=r.name,i=e.rects.reference,o=e.rects.popper,n=e.modifiersData.preventOverflow,s=Vm(e,{elementContext:"reference"}),a=Vm(e,{altBoundary:!0}),l=PD(s,i),c=PD(a,o,n),u=DD(l),d=DD(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var Pne={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Ine};function Dne(r,e,t){var i=ya(r),o=[yn,vn].indexOf(i)>=0?-1:1,n=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,s=n[0],a=n[1];return s=s||0,a=(a||0)*o,[yn,vs].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}function Bne(r){var e=r.state,t=r.options,i=r.name,o=t.offset,n=o===void 0?[0,0]:o,s=Eu.reduce(function(u,d){return u[d]=Dne(d,e.rects,n),u},{}),a=s[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=s}var Fne={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Bne};function Une(r){var e=r.state,t=r.name;e.modifiersData[t]=ID({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var BD={name:"popperOffsets",enabled:!0,phase:"read",fn:Une,data:{}};function zne(r){return r==="x"?"y":"x"}function Vne(r){var e=r.state,t=r.options,i=r.name,o=t.mainAxis,n=o===void 0?!0:o,s=t.altAxis,a=s===void 0?!1:s,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,h=t.tether,p=h===void 0?!0:h,m=t.tetherOffset,g=m===void 0?0:m,v=Vm(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=ya(e.placement),b=Vh(e.placement),x=!b,_=bM(y),S=zne(_),w=e.modifiersData.popperOffsets,M=e.rects.reference,T=e.rects.popper,E=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,C=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),B=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(w){if(n){var L,P=_==="y"?vn:yn,U=_==="y"?gs:vs,G=_==="y"?"height":"width",R=w[_],F=R+v[P],O=R-v[U],H=p?-T[G]/2:0,$=b===Bh?M[G]:T[G],j=b===Bh?-T[G]:-M[G],J=e.elements.arrow,ce=p&&J?yM(J):{width:0,height:0},ve=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:TD(),xe=ve[P],te=ve[U],Z=Um(0,M[G],ce[G]),de=x?M[G]/2-H-Z-xe-C.mainAxis:$-Z-xe-C.mainAxis,Ce=x?-M[G]/2+H+Z+te+C.mainAxis:j+Z+te+C.mainAxis,ue=e.elements.arrow&&Fm(e.elements.arrow),D=ue?_==="y"?ue.clientTop||0:ue.clientLeft||0:0,K=(L=B==null?void 0:B[_])!=null?L:0,re=R+de-K-D,ae=R+Ce-K,le=Um(p?Xy(F,re):F,R,p?Cu(O,ae):O);w[_]=le,I[_]=le-R}if(a){var Se,Ae=_==="x"?vn:yn,Ne=_==="x"?gs:vs,Me=w[S],Le=S==="y"?"height":"width",je=Me+v[Ae],Y=Me-v[Ne],z=[vn,yn].indexOf(y)!==-1,me=(Se=B==null?void 0:B[S])!=null?Se:0,Ie=z?je:Me-M[Le]-T[Le]-me+C.altAxis,Ue=z?Me+M[Le]+T[Le]-me-C.altAxis:Y,Re=p&&z?fne(Ie,Me,Ue):Um(p?Ie:je,Me,p?Ue:Y);w[S]=Re,I[S]=Re-Me}e.modifiersData[i]=I}}var Gne={name:"preventOverflow",enabled:!0,phase:"main",fn:Vne,requiresIfExists:["offset"]};function Hne(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function jne(r){return r===Hs(r)||!ys(r)?xM(r):Hne(r)}function $ne(r){var e=r.getBoundingClientRect(),t=Uh(e.width)/r.offsetWidth||1,i=Uh(e.height)/r.offsetHeight||1;return t!==1||i!==1}function Wne(r,e,t){t===void 0&&(t=!1);var i=ys(e),o=ys(e)&&$ne(e),n=oc(e),s=zh(r,o),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((va(e)!=="body"||wM(n))&&(a=jne(e)),ys(e)?(l=zh(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):n&&(l.x=_M(n))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function qne(r){var e=new Map,t=new Set,i=[];r.forEach(function(n){e.set(n.name,n)});function o(n){t.add(n.name);var s=[].concat(n.requires||[],n.requiresIfExists||[]);s.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&o(l)}}),i.push(n)}return r.forEach(function(n){t.has(n.name)||o(n)}),i}function Xne(r){var e=qne(r);return cne.reduce(function(t,i){return t.concat(e.filter(function(o){return o.phase===i}))},[])}function Kne(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function Yne(r){var e=r.reduce(function(t,i){var o=t[i.name];return t[i.name]=o?Object.assign({},o,i,{options:Object.assign({},o.options,i.options),data:Object.assign({},o.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var FD={placement:"bottom",modifiers:[],strategy:"absolute"};function UD(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function MM(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,i=t===void 0?[]:t,o=e.defaultOptions,n=o===void 0?FD:o;return function(s,a,l){l===void 0&&(l=n);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},FD,n),modifiersData:{},elements:{reference:s,popper:a},attributes:{},styles:{}},u=[],d=!1,h={state:c,setOptions:function(g){var v=typeof g=="function"?g(c.options):g;m(),c.options=Object.assign({},n,c.options,v),c.scrollParents={reference:Fh(s)?zm(s):s.contextElement?zm(s.contextElement):[],popper:zm(a)};var y=Xne(Yne([].concat(i,c.options.modifiers)));return c.orderedModifiers=y.filter(function(b){return b.enabled}),p(),h.update()},forceUpdate:function(){if(!d){var g=c.elements,v=g.reference,y=g.popper;if(UD(v,y)){c.rects={reference:Wne(v,Fm(y),c.options.strategy==="fixed"),popper:yM(y)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(T){return c.modifiersData[T.name]=Object.assign({},T.data)});for(var b=0;b<c.orderedModifiers.length;b++){if(c.reset===!0){c.reset=!1,b=-1;continue}var x=c.orderedModifiers[b],_=x.fn,S=x.options,w=S===void 0?{}:S,M=x.name;typeof _=="function"&&(c=_({state:c,options:w,name:M,instance:h})||c)}}}},update:Kne(function(){return new Promise(function(g){h.forceUpdate(),g(c)})}),destroy:function(){m(),d=!0}};if(!UD(s,a))return h;h.setOptions(l).then(function(g){!d&&l.onFirstUpdate&&l.onFirstUpdate(g)});function p(){c.orderedModifiers.forEach(function(g){var v=g.name,y=g.options,b=y===void 0?{}:y,x=g.effect;if(typeof x=="function"){var _=x({state:c,name:v,instance:h,options:b}),S=function(){};u.push(_||S)}})}function m(){u.forEach(function(g){return g()}),u=[]}return h}}MM();var Jne=[RD,BD,AD,wD];MM({defaultModifiers:Jne});var Zne=[RD,BD,AD,wD,Fne,kne,Gne,yne,Pne],zD=MM({defaultModifiers:Zne});const Qne=(r,e,t={})=>{const i={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=ese(l);Object.assign(s.value,c)},requires:["computeStyles"]},o=N(()=>{const{onFirstUpdate:l,placement:c,strategy:u,modifiers:d}=f(t);return{onFirstUpdate:l,placement:c||"bottom",strategy:u||"absolute",modifiers:[...d||[],i,{name:"applyStyles",enabled:!1}]}}),n=Rr(),s=V({styles:{popper:{position:f(o).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=()=>{n.value&&(n.value.destroy(),n.value=void 0)};return ke(o,l=>{const c=f(n);c&&c.setOptions(l)},{deep:!0}),ke([r,e],([l,c])=>{a(),!(!l||!c)&&(n.value=zD(l,c,f(o)))}),Vr(()=>{a()}),{state:N(()=>{var l;return{...((l=f(n))==null?void 0:l.state)||{}}}),styles:N(()=>f(s).styles),attributes:N(()=>f(s).attributes),update:()=>{var l;return(l=f(n))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=f(n))==null?void 0:l.forceUpdate()},instanceRef:N(()=>f(n))}};function ese(r){const e=Object.keys(r.elements),t=By(e.map(o=>[o,r.styles[o]||{}])),i=By(e.map(o=>[o,r.attributes[o]]));return{styles:t,attributes:i}}const TM=r=>{if(!r)return{onClick:_r,onMousedown:_r,onMouseup:_r};let e=!1,t=!1;return{onClick:i=>{e&&t&&r(i),e=t=!1},onMousedown:i=>{e=i.target===i.currentTarget},onMouseup:i=>{t=i.target===i.currentTarget}}},tse=(r,e=0)=>{if(e===0)return r;const t=V(!1);let i=0;const o=()=>{i&&clearTimeout(i),i=window.setTimeout(()=>{t.value=r.value},e)};return Rt(o),ke(()=>r.value,n=>{n?o():t.value=n}),t};function VD(){let r;const e=(i,o)=>{t(),r=window.setTimeout(i,o)},t=()=>window.clearTimeout(r);return Ty(()=>t()),{registerTimeout:e,cancelTimeout:t}}const GD={prefix:Math.floor(Math.random()*1e4),current:0},rse=Symbol("elIdInjection"),HD=()=>It()?ot(rse,GD):GD,bs=r=>{const e=HD(),t=mM();return N(()=>f(r)||`${t.value}-id-${e.prefix}-${e.current++}`)};let Gh=[];const jD=r=>{const e=r;e.key===ft.esc&&Gh.forEach(t=>t(e))},ise=r=>{Rt(()=>{Gh.length===0&&document.addEventListener("keydown",jD),Jt&&Gh.push(r)}),Vr(()=>{Gh=Gh.filter(e=>e!==r),Gh.length===0&&Jt&&document.removeEventListener("keydown",jD)})};let $D;const WD=()=>{const r=mM(),e=HD(),t=N(()=>`${r.value}-popper-container-${e.prefix}`),i=N(()=>`#${t.value}`);return{id:t,selector:i}},ose=r=>{const e=document.createElement("div");return e.id=r,document.body.appendChild(e),e},nse=()=>{const{id:r,selector:e}=WD();return hy(()=>{Jt&&!$D&&!document.body.querySelector(e.value)&&($D=ose(r.value))}),{id:r,selector:e}},sse=Ye({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),qD=({showAfter:r,hideAfter:e,autoClose:t,open:i,close:o})=>{const{registerTimeout:n}=VD(),{registerTimeout:s,cancelTimeout:a}=VD();return{onOpen:l=>{n(()=>{i(l);const c=f(t);wt(c)&&c>0&&s(()=>{o(l)},c)},f(r))},onClose:l=>{a(),n(()=>{o(l)},f(e))}}},XD=Symbol("elForwardRef"),ase=r=>{Wt(XD,{setForwardRef:e=>{r.value=e}})},lse=r=>({mounted(e){r(e)},updated(e){r(e)},unmounted(){r(null)}}),KD=V(0),YD=2e3,JD=Symbol("zIndexContextKey"),Hh=r=>{const e=r||(It()?ot(JD,void 0):void 0),t=N(()=>{const o=f(e);return wt(o)?o:YD}),i=N(()=>t.value+KD.value);return{initialZIndex:t,currentZIndex:i,nextZIndex:()=>(KD.value++,i.value)}},Gm=Math.min,jh=Math.max,Zy=Math.round,nc=r=>({x:r,y:r});function cse(r,e,t){return jh(r,Gm(e,t))}function ZD(r,e){return typeof r=="function"?r(e):r}function EM(r){return r.split("-")[0]}function CM(r){return r.split("-")[1]}function use(r){return r==="x"?"y":"x"}function QD(r){return r==="y"?"height":"width"}function NM(r){return["top","bottom"].includes(EM(r))?"y":"x"}function eB(r){return use(NM(r))}function dse(r){return{top:0,right:0,bottom:0,left:0,...r}}function hse(r){return typeof r!="number"?dse(r):{top:r,right:r,bottom:r,left:r}}function tB(r){return{...r,top:r.y,left:r.x,right:r.x+r.width,bottom:r.y+r.height}}function rB(r,e,t){let{reference:i,floating:o}=r;const n=NM(e),s=eB(e),a=QD(s),l=EM(e),c=n==="y",u=i.x+i.width/2-o.width/2,d=i.y+i.height/2-o.height/2,h=i[a]/2-o[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-o.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-o.width,y:d};break;default:p={x:i.x,y:i.y}}switch(CM(e)){case"start":p[s]-=h*(t&&c?-1:1);break;case"end":p[s]+=h*(t&&c?-1:1);break}return p}const pse=async(r,e,t)=>{const{placement:i="bottom",strategy:o="absolute",middleware:n=[],platform:s}=t,a=n.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:r,floating:e,strategy:o}),{x:u,y:d}=rB(c,i,l),h=i,p={},m=0;for(let g=0;g<a.length;g++){const{name:v,fn:y}=a[g],{x:b,y:x,data:_,reset:S}=await y({x:u,y:d,initialPlacement:i,placement:h,strategy:o,middlewareData:p,rects:c,platform:s,elements:{reference:r,floating:e}});if(u=b??u,d=x??d,p={...p,[v]:{...p[v],..._}},S&&m<=50){m++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(c=S.rects===!0?await s.getElementRects({reference:r,floating:e,strategy:o}):S.rects),{x:u,y:d}=rB(c,h,l)),g=-1;continue}}return{x:u,y:d,placement:h,strategy:o,middlewareData:p}},fse=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:i,placement:o,rects:n,platform:s,elements:a}=e,{element:l,padding:c=0}=ZD(r,e)||{};if(l==null)return{};const u=hse(c),d={x:t,y:i},h=eB(o),p=QD(h),m=await s.getDimensions(l),g=h==="y",v=g?"top":"left",y=g?"bottom":"right",b=g?"clientHeight":"clientWidth",x=n.reference[p]+n.reference[h]-d[h]-n.floating[p],_=d[h]-n.reference[h],S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l));let w=S?S[b]:0;(!w||!await(s.isElement==null?void 0:s.isElement(S)))&&(w=a.floating[b]||n.floating[p]);const M=x/2-_/2,T=w/2-m[p]/2-1,E=Gm(u[v],T),C=Gm(u[y],T),B=E,I=w-m[p]-C,L=w/2-m[p]/2+M,P=cse(B,L,I),U=CM(o)!=null&&L!=P&&n.reference[p]/2-(L<B?E:C)-m[p]/2<0?L<B?B-L:I-L:0;return{[h]:d[h]-U,data:{[h]:P,centerOffset:L-P+U}}}});async function mse(r,e){const{placement:t,platform:i,elements:o}=r,n=await(i.isRTL==null?void 0:i.isRTL(o.floating)),s=EM(t),a=CM(t),l=NM(t)==="y",c=["left","top"].includes(s)?-1:1,u=n&&l?-1:1,d=ZD(e,r);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof m=="number"&&(p=a==="end"?m*-1:m),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const gse=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){const{x:t,y:i}=e,o=await mse(e,r);return{x:t+o.x,y:i+o.y,data:o}}}};function sc(r){return iB(r)?(r.nodeName||"").toLowerCase():"#document"}function jn(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function ac(r){var e;return(e=(iB(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function iB(r){return r instanceof Node||r instanceof jn(r).Node}function nl(r){return r instanceof Element||r instanceof jn(r).Element}function ba(r){return r instanceof HTMLElement||r instanceof jn(r).HTMLElement}function oB(r){return typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof jn(r).ShadowRoot}function Hm(r){const{overflow:e,overflowX:t,overflowY:i,display:o}=xs(r);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(o)}function vse(r){return["table","td","th"].includes(sc(r))}function AM(r){const e=RM(),t=xs(r);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function yse(r){let e=$h(r);for(;ba(e)&&!Qy(e);){if(AM(e))return e;e=$h(e)}return null}function RM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Qy(r){return["html","body","#document"].includes(sc(r))}function xs(r){return jn(r).getComputedStyle(r)}function eb(r){return nl(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function $h(r){if(sc(r)==="html")return r;const e=r.assignedSlot||r.parentNode||oB(r)&&r.host||ac(r);return oB(e)?e.host:e}function nB(r){const e=$h(r);return Qy(e)?r.ownerDocument?r.ownerDocument.body:r.body:ba(e)&&Hm(e)?e:nB(e)}function sB(r,e){var t;e===void 0&&(e=[]);const i=nB(r),o=i===((t=r.ownerDocument)==null?void 0:t.body),n=jn(i);return o?e.concat(n,n.visualViewport||[],Hm(i)?i:[]):e.concat(i,sB(i))}function aB(r){const e=xs(r);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const o=ba(r),n=o?r.offsetWidth:t,s=o?r.offsetHeight:i,a=Zy(t)!==n||Zy(i)!==s;return a&&(t=n,i=s),{width:t,height:i,$:a}}function lB(r){return nl(r)?r:r.contextElement}function Wh(r){const e=lB(r);if(!ba(e))return nc(1);const t=e.getBoundingClientRect(),{width:i,height:o,$:n}=aB(e);let s=(n?Zy(t.width):t.width)/i,a=(n?Zy(t.height):t.height)/o;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const bse=nc(0);function cB(r){const e=jn(r);return!RM()||!e.visualViewport?bse:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function xse(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==jn(r)?!1:e}function jm(r,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const o=r.getBoundingClientRect(),n=lB(r);let s=nc(1);e&&(i?nl(i)&&(s=Wh(i)):s=Wh(r));const a=xse(n,t,i)?cB(n):nc(0);let l=(o.left+a.x)/s.x,c=(o.top+a.y)/s.y,u=o.width/s.x,d=o.height/s.y;if(n){const h=jn(n),p=i&&nl(i)?jn(i):i;let m=h.frameElement;for(;m&&i&&p!==h;){const g=Wh(m),v=m.getBoundingClientRect(),y=xs(m),b=v.left+(m.clientLeft+parseFloat(y.paddingLeft))*g.x,x=v.top+(m.clientTop+parseFloat(y.paddingTop))*g.y;l*=g.x,c*=g.y,u*=g.x,d*=g.y,l+=b,c+=x,m=jn(m).frameElement}}return tB({width:u,height:d,x:l,y:c})}function _se(r){let{rect:e,offsetParent:t,strategy:i}=r;const o=ba(t),n=ac(t);if(t===n)return e;let s={scrollLeft:0,scrollTop:0},a=nc(1);const l=nc(0);if((o||!o&&i!=="fixed")&&((sc(t)!=="body"||Hm(n))&&(s=eb(t)),ba(t))){const c=jm(t);a=Wh(t),l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-s.scrollLeft*a.x+l.x,y:e.y*a.y-s.scrollTop*a.y+l.y}}function wse(r){return Array.from(r.getClientRects())}function uB(r){return jm(ac(r)).left+eb(r).scrollLeft}function Sse(r){const e=ac(r),t=eb(r),i=r.ownerDocument.body,o=jh(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),n=jh(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let s=-t.scrollLeft+uB(r);const a=-t.scrollTop;return xs(i).direction==="rtl"&&(s+=jh(e.clientWidth,i.clientWidth)-o),{width:o,height:n,x:s,y:a}}function Mse(r,e){const t=jn(r),i=ac(r),o=t.visualViewport;let n=i.clientWidth,s=i.clientHeight,a=0,l=0;if(o){n=o.width,s=o.height;const c=RM();(!c||c&&e==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:n,height:s,x:a,y:l}}function Tse(r,e){const t=jm(r,!0,e==="fixed"),i=t.top+r.clientTop,o=t.left+r.clientLeft,n=ba(r)?Wh(r):nc(1),s=r.clientWidth*n.x,a=r.clientHeight*n.y,l=o*n.x,c=i*n.y;return{width:s,height:a,x:l,y:c}}function dB(r,e,t){let i;if(e==="viewport")i=Mse(r,t);else if(e==="document")i=Sse(ac(r));else if(nl(e))i=Tse(e,t);else{const o=cB(r);i={...e,x:e.x-o.x,y:e.y-o.y}}return tB(i)}function hB(r,e){const t=$h(r);return t===e||!nl(t)||Qy(t)?!1:xs(t).position==="fixed"||hB(t,e)}function Ese(r,e){const t=e.get(r);if(t)return t;let i=sB(r).filter(a=>nl(a)&&sc(a)!=="body"),o=null;const n=xs(r).position==="fixed";let s=n?$h(r):r;for(;nl(s)&&!Qy(s);){const a=xs(s),l=AM(s);!l&&a.position==="fixed"&&(o=null),(n?!l&&!o:!l&&a.position==="static"&&o&&["absolute","fixed"].includes(o.position)||Hm(s)&&!l&&hB(r,s))?i=i.filter(c=>c!==s):o=a,s=$h(s)}return e.set(r,i),i}function Cse(r){let{element:e,boundary:t,rootBoundary:i,strategy:o}=r;const n=[...t==="clippingAncestors"?Ese(e,this._c):[].concat(t),i],s=n[0],a=n.reduce((l,c)=>{const u=dB(e,c,o);return l.top=jh(u.top,l.top),l.right=Gm(u.right,l.right),l.bottom=Gm(u.bottom,l.bottom),l.left=jh(u.left,l.left),l},dB(e,s,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Nse(r){return aB(r)}function Ase(r,e,t){const i=ba(e),o=ac(e),n=t==="fixed",s=jm(r,!0,n,e);let a={scrollLeft:0,scrollTop:0};const l=nc(0);if(i||!i&&!n)if((sc(e)!=="body"||Hm(o))&&(a=eb(e)),i){const c=jm(e,!0,n,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else o&&(l.x=uB(o));return{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function pB(r,e){return!ba(r)||xs(r).position==="fixed"?null:e?e(r):r.offsetParent}function fB(r,e){const t=jn(r);if(!ba(r))return t;let i=pB(r,e);for(;i&&vse(i)&&xs(i).position==="static";)i=pB(i,e);return i&&(sc(i)==="html"||sc(i)==="body"&&xs(i).position==="static"&&!AM(i))?t:i||yse(r)||t}const Rse=async function(r){let{reference:e,floating:t,strategy:i}=r;const o=this.getOffsetParent||fB,n=this.getDimensions;return{reference:Ase(e,await o(t),i),floating:{x:0,y:0,...await n(t)}}};function Lse(r){return xs(r).direction==="rtl"}const Ose={convertOffsetParentRelativeRectToViewportRelativeRect:_se,getDocumentElement:ac,getClippingRect:Cse,getOffsetParent:fB,getElementRects:Rse,getClientRects:wse,getDimensions:Nse,getScale:Wh,isElement:nl,isRTL:Lse},kse=(r,e,t)=>{const i=new Map,o={platform:Ose,...t},n={...o.platform,_c:i};return pse(r,e,{...o,platform:n})};Ye({});const Ise=r=>{if(!Jt)return;if(!r)return r;const e=Hn(r);return e||(Ar(r)?e:r)},Pse=({middleware:r,placement:e,strategy:t})=>{const i=V(),o=V(),n=V(),s=V(),a=V({}),l={x:n,y:s,placement:e,strategy:t,middlewareData:a},c=async()=>{if(!Jt)return;const u=Ise(i),d=Hn(o);if(!u||!d)return;const h=await kse(u,d,{placement:f(e),strategy:f(t),middleware:f(r)});Om(l).forEach(p=>{l[p].value=h[p]})};return Rt(()=>{Vn(()=>{c()})}),{...l,update:c,referenceRef:i,contentRef:o}},Dse=({arrowRef:r,padding:e})=>({name:"arrow",options:{element:r,padding:e},fn(t){const i=f(r);return i?fse({element:i,padding:e}).fn(t):{}}});function Bse(r){const e=V();function t(){if(r.value==null)return;const{selectionStart:o,selectionEnd:n,value:s}=r.value;if(o==null||n==null)return;const a=s.slice(0,Math.max(0,o)),l=s.slice(Math.max(0,n));e.value={selectionStart:o,selectionEnd:n,value:s,beforeTxt:a,afterTxt:l}}function i(){if(r.value==null||e.value==null)return;const{value:o}=r.value,{beforeTxt:n,afterTxt:s,selectionStart:a}=e.value;if(n==null||s==null||a==null)return;let l=o.length;if(o.endsWith(s))l=o.length-s.length;else if(o.startsWith(n))l=n.length;else{const c=n[a-1],u=o.indexOf(c,a-1);u!==-1&&(l=u+1)}r.value.setSelectionRange(l,l)}return[t,i]}const Fse=(r,e,t)=>Ph(r.subTree).filter(i=>{var o;return $r(i)&&((o=i.type)==null?void 0:o.name)===e&&!!i.component}).map(i=>i.component.uid).map(i=>t[i]).filter(i=>!!i),LM=(r,e)=>{const t={},i=Rr([]);return{children:i,addChild:o=>{t[o.uid]=o,i.value=Fse(r,e,t)},removeChild:o=>{delete t[o],i.value=i.value.filter(n=>n.uid!==o)}}},bo=Gs({type:String,values:ma,required:!1}),mB=Symbol("size"),Use=()=>{const r=ot(mB,{});return N(()=>f(r.size)||"")};function zse(r,{afterFocus:e,afterBlur:t}={}){const i=It(),{emit:o}=i,n=Rr(),s=V(!1),a=u=>{s.value||(s.value=!0,o("focus",u),e==null||e())},l=u=>{var d;u.relatedTarget&&(d=n.value)!=null&&d.contains(u.relatedTarget)||(s.value=!1,o("blur",u),t==null||t())},c=()=>{var u;(u=r.value)==null||u.focus()};return ke(n,u=>{u&&u.setAttribute("tabindex","-1")}),Hr(n,"click",c),{wrapperRef:n,isFocused:s,handleFocus:a,handleBlur:l}}const gB=Symbol(),tb=V();function rb(r,e=void 0){const t=It()?ot(gB,tb):tb;return r?N(()=>{var i,o;return(o=(i=t.value)==null?void 0:i[r])!=null?o:e}):t}function ib(r,e){const t=rb(),i=Pe(r,N(()=>{var a;return((a=t.value)==null?void 0:a.namespace)||Im})),o=ir(N(()=>{var a;return(a=t.value)==null?void 0:a.locale})),n=Hh(N(()=>{var a;return((a=t.value)==null?void 0:a.zIndex)||YD})),s=N(()=>{var a;return f(e)||((a=t.value)==null?void 0:a.size)||""});return OM(N(()=>f(t)||{})),{ns:i,locale:o,zIndex:n,size:s}}const OM=(r,e,t=!1)=>{var i;const o=!!It(),n=o?rb():void 0,s=(i=e==null?void 0:e.provide)!=null?i:o?Wt:void 0;if(!s)return;const a=N(()=>{const l=f(r);return n!=null&&n.value?Vse(n.value,l):l});return s(gB,a),s(mD,N(()=>a.value.locale)),s(gD,N(()=>a.value.namespace)),s(JD,N(()=>a.value.zIndex)),s(mB,{size:N(()=>a.value.size||"")}),(t||!tb.value)&&(tb.value=a.value),a},Vse=(r,e)=>{var t;const i=[...new Set([...Om(r),...Om(e)])],o={};for(const n of i)o[n]=(t=e[n])!=null?t:r[n];return o},Gse=Ye({a11y:{type:Boolean,default:!0},locale:{type:Te(Object)},size:bo,button:{type:Te(Object)},experimentalFeatures:{type:Te(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Te(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),kM={},Hse=ne({name:"ElConfigProvider",props:Gse,setup(r,{slots:e}){ke(()=>r.message,i=>{Object.assign(kM,i??{})},{immediate:!0,deep:!0});const t=OM(r);return()=>Oe(e,"default",{config:t==null?void 0:t.value})}}),jse=Bt(Hse),$se="2.3.12",Wse=(r=[])=>({version:$se,install:(e,t)=>{e[hD]||(e[hD]=!0,r.forEach(i=>e.use(i)),t&&OM(t,e,!0))}}),qse=Ye({zIndex:{type:Te([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),Xse={scroll:({scrollTop:r,fixed:e})=>wt(r)&&Ti(e),[Fr]:r=>Ti(r)};var Xe=(r,e)=>{const t=r.__vccOpts||r;for(const[i,o]of e)t[i]=o;return t};const vB="ElAffix",Kse=ne({name:vB}),Yse=ne({...Kse,props:qse,emits:Xse,setup(r,{expose:e,emit:t}){const i=r,o=Pe("affix"),n=Rr(),s=Rr(),a=Rr(),{height:l}=Dq(),{height:c,width:u,top:d,bottom:h,update:p}=k3(s,{windowScroll:!1}),m=k3(n),g=V(!1),v=V(0),y=V(0),b=N(()=>({height:g.value?`${c.value}px`:"",width:g.value?`${u.value}px`:""})),x=N(()=>{if(!g.value)return{};const w=i.offset?hi(i.offset):0;return{height:`${c.value}px`,width:`${u.value}px`,top:i.position==="top"?w:"",bottom:i.position==="bottom"?w:"",transform:y.value?`translateY(${y.value}px)`:"",zIndex:i.zIndex}}),_=()=>{if(a.value)if(v.value=a.value instanceof Window?document.documentElement.scrollTop:a.value.scrollTop||0,i.position==="top")if(i.target){const w=m.bottom.value-i.offset-c.value;g.value=i.offset>d.value&&m.bottom.value>0,y.value=w<0?w:0}else g.value=i.offset>d.value;else if(i.target){const w=l.value-m.top.value-i.offset-c.value;g.value=l.value-i.offset<h.value&&l.value>m.top.value,y.value=w<0?-w:0}else g.value=l.value-i.offset<h.value},S=()=>{p(),t("scroll",{scrollTop:v.value,fixed:g.value})};return ke(g,w=>t("change",w)),Rt(()=>{var w;i.target?(n.value=(w=document.querySelector(i.target))!=null?w:void 0,n.value||Ei(vB,`Target is not existed: ${i.target}`)):n.value=document.documentElement,a.value=sM(s.value,!0),p()}),Hr(a,"scroll",S),Vn(_),e({update:_,updateRoot:p}),(w,M)=>(A(),W("div",{ref_key:"root",ref:s,class:k(f(o).b()),style:ct(f(b))},[X("div",{class:k({[f(o).m("fixed")]:g.value}),style:ct(f(x))},[Oe(w.$slots,"default")],6)],6))}});var Jse=Xe(Yse,[["__file","/home/runner/work/element-plus/element-plus/packages/components/affix/src/affix.vue"]]);const Zse=Bt(Jse),Qse=Ye({size:{type:Te([Number,String])},color:{type:String}}),eae=ne({name:"ElIcon",inheritAttrs:!1}),tae=ne({...eae,props:Qse,setup(r){const e=r,t=Pe("icon"),i=N(()=>{const{size:o,color:n}=e;return!o&&!n?{}:{fontSize:Pi(o)?void 0:hi(o),"--color":n}});return(o,n)=>(A(),W("i",$t({class:f(t).b(),style:f(i)},o.$attrs),[Oe(o.$slots,"default")],16))}});var rae=Xe(tae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const st=Bt(rae),iae=["light","dark"],oae=Ye({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:Om(ic),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:iae,default:"light"}}),nae={close:r=>r instanceof MouseEvent},sae=ne({name:"ElAlert"}),aae=ne({...sae,props:oae,emits:nae,setup(r,{emit:e}){const t=r,{Close:i}=uM,o=yo(),n=Pe("alert"),s=V(!0),a=N(()=>ic[t.type]),l=N(()=>[n.e("icon"),{[n.is("big")]:!!t.description||!!o.default}]),c=N(()=>({[n.is("bold")]:t.description||o.default})),u=d=>{s.value=!1,e("close",d)};return(d,h)=>(A(),_e(fi,{name:f(n).b("fade"),persisted:""},{default:se(()=>[At(X("div",{class:k([f(n).b(),f(n).m(d.type),f(n).is("center",d.center),f(n).is(d.effect)]),role:"alert"},[d.showIcon&&f(a)?(A(),_e(f(st),{key:0,class:k(f(l))},{default:se(()=>[(A(),_e(Ht(f(a))))]),_:1},8,["class"])):we("v-if",!0),X("div",{class:k(f(n).e("content"))},[d.title||d.$slots.title?(A(),W("span",{key:0,class:k([f(n).e("title"),f(c)])},[Oe(d.$slots,"title",{},()=>[rr(ze(d.title),1)])],2)):we("v-if",!0),d.$slots.default||d.description?(A(),W("p",{key:1,class:k(f(n).e("description"))},[Oe(d.$slots,"default",{},()=>[rr(ze(d.description),1)])],2)):we("v-if",!0),d.closable?(A(),W(nt,{key:2},[d.closeText?(A(),W("div",{key:0,class:k([f(n).e("close-btn"),f(n).is("customed")]),onClick:u},ze(d.closeText),3)):(A(),_e(f(st),{key:1,class:k(f(n).e("close-btn")),onClick:u},{default:se(()=>[ee(f(i))]),_:1},8,["class"]))],64)):we("v-if",!0)],2)],2),[[nr,s.value]])]),_:3},8,["name"]))}});var lae=Xe(aae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/alert/src/alert.vue"]]);const cae=Bt(lae),Nu=Symbol("formContextKey"),xa=Symbol("formItemContextKey"),Ci=(r,e={})=>{const t=V(void 0),i=e.prop?t:bD("size"),o=e.global?t:Use(),n=e.form?{size:void 0}:ot(Nu,void 0),s=e.formItem?{size:void 0}:ot(xa,void 0);return N(()=>i.value||f(r)||(s==null?void 0:s.size)||(n==null?void 0:n.size)||o.value||"")},bn=r=>{const e=bD("disabled"),t=ot(Nu,void 0);return N(()=>e.value||f(r)||(t==null?void 0:t.disabled)||!1)},Jo=()=>{const r=ot(Nu,void 0),e=ot(xa,void 0);return{form:r,formItem:e}},lc=(r,{formItemContext:e,disableIdGeneration:t,disableIdManagement:i})=>{t||(t=V(!1)),i||(i=V(!1));const o=V();let n;const s=N(()=>{var a;return!!(!r.label&&e&&e.inputIds&&((a=e.inputIds)==null?void 0:a.length)<=1)});return Rt(()=>{n=ke([Yr(r,"id"),t],([a,l])=>{const c=a??(l?void 0:bs().value);c!==o.value&&(e!=null&&e.removeInputId&&(o.value&&e.removeInputId(o.value),!(i!=null&&i.value)&&!l&&c&&e.addInputId(c)),o.value=c)},{immediate:!0})}),Gn(()=>{n&&n(),e!=null&&e.removeInputId&&o.value&&e.removeInputId(o.value)}),{isLabeledByFormItem:s,inputId:o}},uae=Ye({size:{type:String,values:ma},disabled:Boolean}),dae=Ye({...uae,model:Object,rules:{type:Te(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),hae={validate:(r,e,t)=>(it(r)||Tt(r))&&Ti(e)&&Tt(t)};function pae(){const r=V([]),e=N(()=>{if(!r.value.length)return"0";const n=Math.max(...r.value);return n?`${n}px`:""});function t(n){const s=r.value.indexOf(n);return s===-1&&e.value,s}function i(n,s){if(n&&s){const a=t(s);r.value.splice(a,1,n)}else n&&r.value.push(n)}function o(n){const s=t(n);s>-1&&r.value.splice(s,1)}return{autoLabelWidth:e,registerLabelWidth:i,deregisterLabelWidth:o}}const ob=(r,e)=>{const t=wu(e);return t.length>0?r.filter(i=>i.prop&&t.includes(i.prop)):r},fae="ElForm",mae=ne({name:fae}),gae=ne({...mae,props:dae,emits:hae,setup(r,{expose:e,emit:t}){const i=r,o=[],n=Ci(),s=Pe("form"),a=N(()=>{const{labelPosition:b,inline:x}=i;return[s.b(),s.m(n.value||"default"),{[s.m(`label-${b}`)]:b,[s.m("inline")]:x}]}),l=b=>{o.push(b)},c=b=>{b.prop&&o.splice(o.indexOf(b),1)},u=(b=[])=>{i.model&&ob(o,b).forEach(x=>x.resetField())},d=(b=[])=>{ob(o,b).forEach(x=>x.clearValidate())},h=N(()=>!!i.model),p=b=>{if(o.length===0)return[];const x=ob(o,b);return x.length?x:[]},m=async b=>v(void 0,b),g=async(b=[])=>{if(!h.value)return!1;const x=p(b);if(x.length===0)return!0;let _={};for(const S of x)try{await S.validate("")}catch(w){_={..._,...w}}return Object.keys(_).length===0?!0:Promise.reject(_)},v=async(b=[],x)=>{const _=!St(x);try{const S=await g(b);return S===!0&&(x==null||x(S)),S}catch(S){if(S instanceof Error)throw S;const w=S;return i.scrollToError&&y(Object.keys(w)[0]),x==null||x(!1,w),_&&Promise.reject(w)}},y=b=>{var x;const _=ob(o,b)[0];_&&((x=_.$el)==null||x.scrollIntoView(i.scrollIntoViewOptions))};return ke(()=>i.rules,()=>{i.validateOnRuleChange&&m().catch(b=>{})},{deep:!0}),Wt(Nu,ur({...qi(i),emit:t,resetFields:u,clearValidate:d,validateField:v,addField:l,removeField:c,...pae()})),e({validate:m,validateField:v,resetFields:u,clearValidate:d,scrollToField:y}),(b,x)=>(A(),W("form",{class:k(f(a))},[Oe(b.$slots,"default")],2))}});var vae=Xe(gae,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function Au(){return Au=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Au.apply(this,arguments)}function yae(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,$m(r,e)}function IM(r){return IM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},IM(r)}function $m(r,e){return $m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},$m(r,e)}function bae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function nb(r,e,t){return bae()?nb=Reflect.construct.bind():nb=function(i,o,n){var s=[null];s.push.apply(s,o);var a=Function.bind.apply(i,s),l=new a;return n&&$m(l,n.prototype),l},nb.apply(null,arguments)}function xae(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function PM(r){var e=typeof Map=="function"?new Map:void 0;return PM=function(t){if(t===null||!xae(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return nb(t,arguments,IM(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),$m(i,t)},PM(r)}var _ae=/%[sdj%]/g,wae=function(){};typeof process<"u"&&process.env;function DM(r){if(!r||!r.length)return null;var e={};return r.forEach(function(t){var i=t.field;e[i]=e[i]||[],e[i].push(t)}),e}function $n(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var o=0,n=t.length;if(typeof r=="function")return r.apply(null,t);if(typeof r=="string"){var s=r.replace(_ae,function(a){if(a==="%%")return"%";if(o>=n)return a;switch(a){case"%s":return String(t[o++]);case"%d":return Number(t[o++]);case"%j":try{return JSON.stringify(t[o++])}catch{return"[Circular]"}break;default:return a}});return s}return r}function Sae(r){return r==="string"||r==="url"||r==="hex"||r==="email"||r==="date"||r==="pattern"}function Xi(r,e){return!!(r==null||e==="array"&&Array.isArray(r)&&!r.length||Sae(e)&&typeof r=="string"&&!r)}function Mae(r,e,t){var i=[],o=0,n=r.length;function s(a){i.push.apply(i,a||[]),o++,o===n&&t(i)}r.forEach(function(a){e(a,s)})}function yB(r,e,t){var i=0,o=r.length;function n(s){if(s&&s.length){t(s);return}var a=i;i=i+1,a<o?e(r[a],n):t([])}n([])}function Tae(r){var e=[];return Object.keys(r).forEach(function(t){e.push.apply(e,r[t]||[])}),e}var bB=function(r){yae(e,r);function e(t,i){var o;return o=r.call(this,"Async Validation Error")||this,o.errors=t,o.fields=i,o}return e}(PM(Error));function Eae(r,e,t,i,o){if(e.first){var n=new Promise(function(h,p){var m=function(v){return i(v),v.length?p(new bB(v,DM(v))):h(o)},g=Tae(r);yB(g,t,m)});return n.catch(function(h){return h}),n}var s=e.firstFields===!0?Object.keys(r):e.firstFields||[],a=Object.keys(r),l=a.length,c=0,u=[],d=new Promise(function(h,p){var m=function(g){if(u.push.apply(u,g),c++,c===l)return i(u),u.length?p(new bB(u,DM(u))):h(o)};a.length||(i(u),h(o)),a.forEach(function(g){var v=r[g];s.indexOf(g)!==-1?yB(v,t,m):Mae(v,t,m)})});return d.catch(function(h){return h}),d}function Cae(r){return!!(r&&r.message!==void 0)}function Nae(r,e){for(var t=r,i=0;i<e.length;i++){if(t==null)return t;t=t[e[i]]}return t}function xB(r,e){return function(t){var i;return r.fullFields?i=Nae(e,r.fullFields):i=e[t.field||r.fullField],Cae(t)?(t.field=t.field||r.fullField,t.fieldValue=i,t):{message:typeof t=="function"?t():t,fieldValue:i,field:t.field||r.fullField}}}function _B(r,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];typeof i=="object"&&typeof r[t]=="object"?r[t]=Au({},r[t],i):r[t]=i}}return r}var wB=function(r,e,t,i,o,n){r.required&&(!t.hasOwnProperty(r.field)||Xi(e,n||r.type))&&i.push($n(o.messages.required,r.fullField))},Aae=function(r,e,t,i,o){(/^\s+$/.test(e)||e==="")&&i.push($n(o.messages.whitespace,r.fullField))},sb,Rae=function(){if(sb)return sb;var r="[a-fA-F\\d:]",e=function(x){return x&&x.includeBoundaries?"(?:(?<=\\s|^)(?="+r+")|(?<="+r+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",o=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+t+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+t+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+t+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+t+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+t+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+t+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+t+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),n=new RegExp("(?:^"+t+"$)|(?:^"+o+"$)"),s=new RegExp("^"+t+"$"),a=new RegExp("^"+o+"$"),l=function(x){return x&&x.exact?n:new RegExp("(?:"+e(x)+t+e(x)+")|(?:"+e(x)+o+e(x)+")","g")};l.v4=function(x){return x&&x.exact?s:new RegExp(""+e(x)+t+e(x),"g")},l.v6=function(x){return x&&x.exact?a:new RegExp(""+e(x)+o+e(x),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,h=l.v6().source,p="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",m="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",y='(?:[/?#][^\\s"]*)?',b="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+h+"|"+p+m+g+")"+v+y;return sb=new RegExp("(?:^"+b+"$)","i"),sb},SB={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Wm={integer:function(r){return Wm.number(r)&&parseInt(r,10)===r},float:function(r){return Wm.number(r)&&!Wm.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return typeof r=="object"&&!Wm.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(SB.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(Rae())},hex:function(r){return typeof r=="string"&&!!r.match(SB.hex)}},Lae=function(r,e,t,i,o){if(r.required&&e===void 0){wB(r,e,t,i,o);return}var n=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=r.type;n.indexOf(s)>-1?Wm[s](e)||i.push($n(o.messages.types[s],r.fullField,r.type)):s&&typeof e!==r.type&&i.push($n(o.messages.types[s],r.fullField,r.type))},Oae=function(r,e,t,i,o){var n=typeof r.len=="number",s=typeof r.min=="number",a=typeof r.max=="number",l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=e,u=null,d=typeof e=="number",h=typeof e=="string",p=Array.isArray(e);if(d?u="number":h?u="string":p&&(u="array"),!u)return!1;p&&(c=e.length),h&&(c=e.replace(l,"_").length),n?c!==r.len&&i.push($n(o.messages[u].len,r.fullField,r.len)):s&&!a&&c<r.min?i.push($n(o.messages[u].min,r.fullField,r.min)):a&&!s&&c>r.max?i.push($n(o.messages[u].max,r.fullField,r.max)):s&&a&&(c<r.min||c>r.max)&&i.push($n(o.messages[u].range,r.fullField,r.min,r.max))},qh="enum",kae=function(r,e,t,i,o){r[qh]=Array.isArray(r[qh])?r[qh]:[],r[qh].indexOf(e)===-1&&i.push($n(o.messages[qh],r.fullField,r[qh].join(", ")))},Iae=function(r,e,t,i,o){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(e)||i.push($n(o.messages.pattern.mismatch,r.fullField,e,r.pattern));else if(typeof r.pattern=="string"){var n=new RegExp(r.pattern);n.test(e)||i.push($n(o.messages.pattern.mismatch,r.fullField,e,r.pattern))}}},Sr={required:wB,whitespace:Aae,type:Lae,range:Oae,enum:kae,pattern:Iae},Pae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(Xi(e,"string")&&!r.required)return t();Sr.required(r,e,i,n,o,"string"),Xi(e,"string")||(Sr.type(r,e,i,n,o),Sr.range(r,e,i,n,o),Sr.pattern(r,e,i,n,o),r.whitespace===!0&&Sr.whitespace(r,e,i,n,o))}t(n)},Dae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(Xi(e)&&!r.required)return t();Sr.required(r,e,i,n,o),e!==void 0&&Sr.type(r,e,i,n,o)}t(n)},Bae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(e===""&&(e=void 0),Xi(e)&&!r.required)return t();Sr.required(r,e,i,n,o),e!==void 0&&(Sr.type(r,e,i,n,o),Sr.range(r,e,i,n,o))}t(n)},Fae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(Xi(e)&&!r.required)return t();Sr.required(r,e,i,n,o),e!==void 0&&Sr.type(r,e,i,n,o)}t(n)},Uae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(Xi(e)&&!r.required)return t();Sr.required(r,e,i,n,o),Xi(e)||Sr.type(r,e,i,n,o)}t(n)},zae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(Xi(e)&&!r.required)return t();Sr.required(r,e,i,n,o),e!==void 0&&(Sr.type(r,e,i,n,o),Sr.range(r,e,i,n,o))}t(n)},Vae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(Xi(e)&&!r.required)return t();Sr.required(r,e,i,n,o),e!==void 0&&(Sr.type(r,e,i,n,o),Sr.range(r,e,i,n,o))}t(n)},Gae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(e==null&&!r.required)return t();Sr.required(r,e,i,n,o,"array"),e!=null&&(Sr.type(r,e,i,n,o),Sr.range(r,e,i,n,o))}t(n)},Hae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(Xi(e)&&!r.required)return t();Sr.required(r,e,i,n,o),e!==void 0&&Sr.type(r,e,i,n,o)}t(n)},jae="enum",$ae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(Xi(e)&&!r.required)return t();Sr.required(r,e,i,n,o),e!==void 0&&Sr[jae](r,e,i,n,o)}t(n)},Wae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(Xi(e,"string")&&!r.required)return t();Sr.required(r,e,i,n,o),Xi(e,"string")||Sr.pattern(r,e,i,n,o)}t(n)},qae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(Xi(e,"date")&&!r.required)return t();if(Sr.required(r,e,i,n,o),!Xi(e,"date")){var a;e instanceof Date?a=e:a=new Date(e),Sr.type(r,a,i,n,o),a&&Sr.range(r,a.getTime(),i,n,o)}}t(n)},Xae=function(r,e,t,i,o){var n=[],s=Array.isArray(e)?"array":typeof e;Sr.required(r,e,i,n,o,s),t(n)},BM=function(r,e,t,i,o){var n=r.type,s=[],a=r.required||!r.required&&i.hasOwnProperty(r.field);if(a){if(Xi(e,n)&&!r.required)return t();Sr.required(r,e,i,s,o,n),Xi(e,n)||Sr.type(r,e,i,s,o)}t(s)},Kae=function(r,e,t,i,o){var n=[],s=r.required||!r.required&&i.hasOwnProperty(r.field);if(s){if(Xi(e)&&!r.required)return t();Sr.required(r,e,i,n,o)}t(n)},qm={string:Pae,method:Dae,number:Bae,boolean:Fae,regexp:Uae,integer:zae,float:Vae,array:Gae,object:Hae,enum:$ae,pattern:Wae,date:qae,url:BM,hex:BM,email:BM,required:Xae,any:Kae};function FM(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var UM=FM(),Xm=function(){function r(t){this.rules=null,this._messages=UM,this.define(t)}var e=r.prototype;return e.define=function(t){var i=this;if(!t)throw new Error("Cannot configure a schema with no rules");if(typeof t!="object"||Array.isArray(t))throw new Error("Rules must be an object");this.rules={},Object.keys(t).forEach(function(o){var n=t[o];i.rules[o]=Array.isArray(n)?n:[n]})},e.messages=function(t){return t&&(this._messages=_B(FM(),t)),this._messages},e.validate=function(t,i,o){var n=this;i===void 0&&(i={}),o===void 0&&(o=function(){});var s=t,a=i,l=o;if(typeof a=="function"&&(l=a,a={}),!this.rules||Object.keys(this.rules).length===0)return l&&l(null,s),Promise.resolve(s);function c(m){var g=[],v={};function y(x){if(Array.isArray(x)){var _;g=(_=g).concat.apply(_,x)}else g.push(x)}for(var b=0;b<m.length;b++)y(m[b]);g.length?(v=DM(g),l(g,v)):l(null,s)}if(a.messages){var u=this.messages();u===UM&&(u=FM()),_B(u,a.messages),a.messages=u}else a.messages=this.messages();var d={},h=a.keys||Object.keys(this.rules);h.forEach(function(m){var g=n.rules[m],v=s[m];g.forEach(function(y){var b=y;typeof b.transform=="function"&&(s===t&&(s=Au({},s)),v=s[m]=b.transform(v)),typeof b=="function"?b={validator:b}:b=Au({},b),b.validator=n.getValidationMethod(b),b.validator&&(b.field=m,b.fullField=b.fullField||m,b.type=n.getType(b),d[m]=d[m]||[],d[m].push({rule:b,value:v,source:s,field:m}))})});var p={};return Eae(d,a,function(m,g){var S;var v=m.rule,y=(v.type==="object"||v.type==="array")&&(typeof v.fields=="object"||typeof v.defaultField=="object");y=y&&(v.required||!v.required&&m.value),v.field=m.field;function b(w,M){return Au({},M,{fullField:v.fullField+"."+w,fullFields:v.fullFields?[].concat(v.fullFields,[w]):[w]})}function x(w){w===void 0&&(w=[]);var M=Array.isArray(w)?w:[w];!a.suppressWarning&&M.length&&r.warning("async-validator:",M),M.length&&v.message!==void 0&&(M=[].concat(v.message));var T=M.map(xB(v,s));if(a.first&&T.length)return p[v.field]=1,g(T);if(!y)g(T);else{if(v.required&&!m.value)return v.message!==void 0?T=[].concat(v.message).map(xB(v,s)):a.error&&(T=[a.error(v,$n(a.messages.required,v.field))]),g(T);var E={};v.defaultField&&Object.keys(m.value).map(function(I){E[I]=v.defaultField}),E=Au({},E,m.rule.fields);var C={};Object.keys(E).forEach(function(I){var L=E[I],P=Array.isArray(L)?L:[L];C[I]=P.map(b.bind(null,I))});var B=new r(C);B.messages(a.messages),m.rule.options&&(m.rule.options.messages=a.messages,m.rule.options.error=a.error),B.validate(m.value,m.rule.options||a,function(I){var L=[];T&&T.length&&L.push.apply(L,T),I&&I.length&&L.push.apply(L,I),g(L.length?L:null)})}}var _;if(v.asyncValidator)_=v.asyncValidator(v,m.value,x,m.source,a);else if(v.validator){try{_=v.validator(v,m.value,x,m.source,a)}catch(w){(S=console.error)==null||S.call(console,w),a.suppressValidatorError||setTimeout(function(){throw w},0),x(w.message)}_===!0?x():_===!1?x(typeof v.message=="function"?v.message(v.fullField||v.field):v.message||(v.fullField||v.field)+" fails"):_ instanceof Array?x(_):_ instanceof Error&&x(_.message)}_&&_.then&&_.then(function(){return x()},function(w){return x(w)})},function(m){c(m)},s)},e.getType=function(t){if(t.type===void 0&&t.pattern instanceof RegExp&&(t.type="pattern"),typeof t.validator!="function"&&t.type&&!qm.hasOwnProperty(t.type))throw new Error($n("Unknown rule type %s",t.type));return t.type||"string"},e.getValidationMethod=function(t){if(typeof t.validator=="function")return t.validator;var i=Object.keys(t),o=i.indexOf("message");return o!==-1&&i.splice(o,1),i.length===1&&i[0]==="required"?qm.required:qm[this.getType(t)]||void 0},r}();Xm.register=function(r,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");qm[r]=e},Xm.warning=wae,Xm.messages=UM,Xm.validators=qm;const Yae=["","error","validating","success"],Jae=Ye({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:Te([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Te([Object,Array])},error:String,validateStatus:{type:String,values:Yae},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:ma}}),MB="ElLabelWrap";var Zae=ne({name:MB,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(r,{slots:e}){const t=ot(Nu,void 0),i=ot(xa);i||Ei(MB,"usage: <el-form-item><label-wrap /></el-form-item>");const o=Pe("form"),n=V(),s=V(0),a=()=>{var u;if((u=n.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(n.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(u="update")=>{lt(()=>{e.default&&r.isAutoWidth&&(u==="update"?s.value=a():u==="remove"&&(t==null||t.deregisterLabelWidth(s.value)))})},c=()=>l("update");return Rt(()=>{c()}),Vr(()=>{l("remove")}),Ka(()=>c()),ke(s,(u,d)=>{r.updateAll&&(t==null||t.registerLabelWidth(u,d))}),ko(N(()=>{var u,d;return(d=(u=n.value)==null?void 0:u.firstElementChild)!=null?d:null}),c),()=>{var u,d;if(!e)return null;const{isAutoWidth:h}=r;if(h){const p=t==null?void 0:t.autoLabelWidth,m=i==null?void 0:i.hasLabel,g={};if(m&&p&&p!=="auto"){const v=Math.max(0,Number.parseInt(p,10)-s.value),y=t.labelPosition==="left"?"marginRight":"marginLeft";v&&(g[y]=`${v}px`)}return ee("div",{ref:n,class:[o.be("item","label-wrap")],style:g},[(u=e.default)==null?void 0:u.call(e)])}else return ee(nt,{ref:n},[(d=e.default)==null?void 0:d.call(e)])}}});const Qae=["role","aria-labelledby"],ele=ne({name:"ElFormItem"}),tle=ne({...ele,props:Jae,setup(r,{expose:e}){const t=r,i=yo(),o=ot(Nu,void 0),n=ot(xa,void 0),s=Ci(void 0,{formItem:!1}),a=Pe("form-item"),l=bs().value,c=V([]),u=V(""),d=_q(u,100),h=V(""),p=V();let m,g=!1;const v=N(()=>{if((o==null?void 0:o.labelPosition)==="top")return{};const te=hi(t.labelWidth||(o==null?void 0:o.labelWidth)||"");return te?{width:te}:{}}),y=N(()=>{if((o==null?void 0:o.labelPosition)==="top"||o!=null&&o.inline)return{};if(!t.label&&!t.labelWidth&&E)return{};const te=hi(t.labelWidth||(o==null?void 0:o.labelWidth)||"");return!t.label&&!i.label?{marginLeft:te}:{}}),b=N(()=>[a.b(),a.m(s.value),a.is("error",u.value==="error"),a.is("validating",u.value==="validating"),a.is("success",u.value==="success"),a.is("required",P.value||t.required),a.is("no-asterisk",o==null?void 0:o.hideRequiredAsterisk),(o==null?void 0:o.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[a.m("feedback")]:o==null?void 0:o.statusIcon}]),x=N(()=>Ti(t.inlineMessage)?t.inlineMessage:(o==null?void 0:o.inlineMessage)||!1),_=N(()=>[a.e("error"),{[a.em("error","inline")]:x.value}]),S=N(()=>t.prop?Tt(t.prop)?t.prop:t.prop.join("."):""),w=N(()=>!!(t.label||i.label)),M=N(()=>t.for||c.value.length===1?c.value[0]:void 0),T=N(()=>!M.value&&w.value),E=!!n,C=N(()=>{const te=o==null?void 0:o.model;if(!(!te||!t.prop))return Fy(te,t.prop).value}),B=N(()=>{const{required:te}=t,Z=[];t.rules&&Z.push(...wu(t.rules));const de=o==null?void 0:o.rules;if(de&&t.prop){const Ce=Fy(de,t.prop).value;Ce&&Z.push(...wu(Ce))}if(te!==void 0){const Ce=Z.map((ue,D)=>[ue,D]).filter(([ue])=>Object.keys(ue).includes("required"));if(Ce.length>0)for(const[ue,D]of Ce)ue.required!==te&&(Z[D]={...ue,required:te});else Z.push({required:te})}return Z}),I=N(()=>B.value.length>0),L=te=>B.value.filter(Z=>!Z.trigger||!te?!0:Array.isArray(Z.trigger)?Z.trigger.includes(te):Z.trigger===te).map(({trigger:Z,...de})=>de),P=N(()=>B.value.some(te=>te.required)),U=N(()=>{var te;return d.value==="error"&&t.showMessage&&((te=o==null?void 0:o.showMessage)!=null?te:!0)}),G=N(()=>`${t.label||""}${(o==null?void 0:o.labelSuffix)||""}`),R=te=>{u.value=te},F=te=>{var Z,de;const{errors:Ce,fields:ue}=te;(!Ce||!ue)&&console.error(te),R("error"),h.value=Ce?(de=(Z=Ce==null?void 0:Ce[0])==null?void 0:Z.message)!=null?de:`${t.prop} is required`:"",o==null||o.emit("validate",t.prop,!1,h.value)},O=()=>{R("success"),o==null||o.emit("validate",t.prop,!0,"")},H=async te=>{const Z=S.value;return new Xm({[Z]:te}).validate({[Z]:C.value},{firstFields:!0}).then(()=>(O(),!0)).catch(de=>(F(de),Promise.reject(de)))},$=async(te,Z)=>{if(g||!t.prop)return!1;const de=St(Z);if(!I.value)return Z==null||Z(!1),!1;const Ce=L(te);return Ce.length===0?(Z==null||Z(!0),!0):(R("validating"),H(Ce).then(()=>(Z==null||Z(!0),!0)).catch(ue=>{const{fields:D}=ue;return Z==null||Z(!1,D),de?!1:Promise.reject(D)}))},j=()=>{R(""),h.value="",g=!1},J=async()=>{const te=o==null?void 0:o.model;if(!te||!t.prop)return;const Z=Fy(te,t.prop);g=!0,Z.value=BP(m),await lt(),j(),g=!1},ce=te=>{c.value.includes(te)||c.value.push(te)},ve=te=>{c.value=c.value.filter(Z=>Z!==te)};ke(()=>t.error,te=>{h.value=te||"",R(te?"error":"")},{immediate:!0}),ke(()=>t.validateStatus,te=>R(te||""));const xe=ur({...qi(t),$el:p,size:s,validateState:u,labelId:l,inputIds:c,isGroup:T,hasLabel:w,addInputId:ce,removeInputId:ve,resetField:J,clearValidate:j,validate:$});return Wt(xa,xe),Rt(()=>{t.prop&&(o==null||o.addField(xe),m=BP(C.value))}),Vr(()=>{o==null||o.removeField(xe)}),e({size:s,validateMessage:h,validateState:u,validate:$,clearValidate:j,resetField:J}),(te,Z)=>{var de;return A(),W("div",{ref_key:"formItemRef",ref:p,class:k(f(b)),role:f(T)?"group":void 0,"aria-labelledby":f(T)?f(l):void 0},[ee(f(Zae),{"is-auto-width":f(v).width==="auto","update-all":((de=f(o))==null?void 0:de.labelWidth)==="auto"},{default:se(()=>[f(w)?(A(),_e(Ht(f(M)?"label":"div"),{key:0,id:f(l),for:f(M),class:k(f(a).e("label")),style:ct(f(v))},{default:se(()=>[Oe(te.$slots,"label",{label:f(G)},()=>[rr(ze(f(G)),1)])]),_:3},8,["id","for","class","style"])):we("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),X("div",{class:k(f(a).e("content")),style:ct(f(y))},[Oe(te.$slots,"default"),ee(PI,{name:`${f(a).namespace.value}-zoom-in-top`},{default:se(()=>[f(U)?Oe(te.$slots,"error",{key:0,error:h.value},()=>[X("div",{class:k(f(_))},ze(h.value),3)]):we("v-if",!0)]),_:3},8,["name"])],6)],10,Qae)}}});var TB=Xe(tle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const rle=Bt(vae,{FormItem:TB}),ile=ii(TB);let js;const ole=`
  height:0 !important;
  visibility:hidden !important;
  ${B3()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,nle=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function sle(r){const e=window.getComputedStyle(r),t=e.getPropertyValue("box-sizing"),i=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),o=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:nle.map(n=>`${n}:${e.getPropertyValue(n)}`).join(";"),paddingSize:i,borderSize:o,boxSizing:t}}function EB(r,e=1,t){var i;js||(js=document.createElement("textarea"),document.body.appendChild(js));const{paddingSize:o,borderSize:n,boxSizing:s,contextStyle:a}=sle(r);js.setAttribute("style",`${a};${ole}`),js.value=r.value||r.placeholder||"";let l=js.scrollHeight;const c={};s==="border-box"?l=l+n:s==="content-box"&&(l=l-o),js.value="";const u=js.scrollHeight-o;if(wt(e)){let d=u*e;s==="border-box"&&(d=d+o+n),l=Math.max(d,l),c.minHeight=`${d}px`}if(wt(t)){let d=u*t;s==="border-box"&&(d=d+o+n),l=Math.min(d,l)}return c.height=`${l}px`,(i=js.parentNode)==null||i.removeChild(js),js=void 0,c}const ale=Ye({id:{type:String,default:void 0},size:bo,disabled:Boolean,modelValue:{type:Te([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Te([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Lr},prefixIcon:{type:Lr},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Te([Object,Array,String]),default:()=>qr({})}}),lle={[Vt]:r=>Tt(r),input:r=>Tt(r),change:r=>Tt(r),focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent,clear:()=>!0,mouseleave:r=>r instanceof MouseEvent,mouseenter:r=>r instanceof MouseEvent,keydown:r=>r instanceof Event,compositionstart:r=>r instanceof CompositionEvent,compositionupdate:r=>r instanceof CompositionEvent,compositionend:r=>r instanceof CompositionEvent},cle=["role"],ule=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],dle=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],hle=ne({name:"ElInput",inheritAttrs:!1}),ple=ne({...hle,props:ale,emits:lle,setup(r,{expose:e,emit:t}){const i=r,o=du(),n=yo(),s=N(()=>{const z={};return i.containerRole==="combobox"&&(z["aria-haspopup"]=o["aria-haspopup"],z["aria-owns"]=o["aria-owns"],z["aria-expanded"]=o["aria-expanded"]),z}),a=N(()=>[i.type==="textarea"?v.b():g.b(),g.m(p.value),g.is("disabled",m.value),g.is("exceed",ce.value),{[g.b("group")]:n.prepend||n.append,[g.bm("group","append")]:n.append,[g.bm("group","prepend")]:n.prepend,[g.m("prefix")]:n.prefix||i.prefixIcon,[g.m("suffix")]:n.suffix||i.suffixIcon||i.clearable||i.showPassword,[g.bm("suffix","password-clear")]:H.value&&$.value},o.class]),l=N(()=>[g.e("wrapper"),g.is("focus",C.value)]),c=fM({excludeKeys:N(()=>Object.keys(s.value))}),{form:u,formItem:d}=Jo(),{inputId:h}=lc(i,{formItemContext:d}),p=Ci(),m=bn(),g=Pe("input"),v=Pe("textarea"),y=Rr(),b=Rr(),x=V(!1),_=V(!1),S=V(!1),w=V(),M=Rr(i.inputStyle),T=N(()=>y.value||b.value),{wrapperRef:E,isFocused:C,handleFocus:B,handleBlur:I}=zse(T,{afterBlur(){var z;i.validateEvent&&((z=d==null?void 0:d.validate)==null||z.call(d,"blur").catch(me=>{}))}}),L=N(()=>{var z;return(z=u==null?void 0:u.statusIcon)!=null?z:!1}),P=N(()=>(d==null?void 0:d.validateState)||""),U=N(()=>P.value&&dM[P.value]),G=N(()=>S.value?voe:fre),R=N(()=>[o.style,i.inputStyle]),F=N(()=>[i.inputStyle,M.value,{resize:i.resize}]),O=N(()=>Mi(i.modelValue)?"":String(i.modelValue)),H=N(()=>i.clearable&&!m.value&&!i.readonly&&!!O.value&&(C.value||x.value)),$=N(()=>i.showPassword&&!m.value&&!i.readonly&&!!O.value&&(!!O.value||C.value)),j=N(()=>i.showWordLimit&&!!c.value.maxlength&&(i.type==="text"||i.type==="textarea")&&!m.value&&!i.readonly&&!i.showPassword),J=N(()=>O.value.length),ce=N(()=>!!j.value&&J.value>Number(c.value.maxlength)),ve=N(()=>!!n.suffix||!!i.suffixIcon||H.value||i.showPassword||j.value||!!P.value&&L.value),[xe,te]=Bse(y);ko(b,z=>{if(de(),!j.value||i.resize!=="both")return;const me=z[0],{width:Ie}=me.contentRect;w.value={right:`calc(100% - ${Ie+15+6}px)`}});const Z=()=>{const{type:z,autosize:me}=i;if(!(!Jt||z!=="textarea"||!b.value))if(me){const Ie=zt(me)?me.minRows:void 0,Ue=zt(me)?me.maxRows:void 0,Re=EB(b.value,Ie,Ue);M.value={overflowY:"hidden",...Re},lt(()=>{b.value.offsetHeight,M.value=Re})}else M.value={minHeight:EB(b.value).minHeight}},de=(z=>{let me=!1;return()=>{var Ie;me||!i.autosize||((Ie=b.value)==null?void 0:Ie.offsetParent)===null||(z(),me=!0)}})(Z),Ce=()=>{const z=T.value,me=i.formatter?i.formatter(O.value):O.value;!z||z.value===me||(z.value=me)},ue=async z=>{xe();let{value:me}=z.target;if(i.formatter&&(me=i.parser?i.parser(me):me),!_.value){if(me===O.value){Ce();return}t(Vt,me),t("input",me),await lt(),Ce(),te()}},D=z=>{t("change",z.target.value)},K=z=>{t("compositionstart",z),_.value=!0},re=z=>{var me;t("compositionupdate",z);const Ie=(me=z.target)==null?void 0:me.value,Ue=Ie[Ie.length-1]||"";_.value=!$y(Ue)},ae=z=>{t("compositionend",z),_.value&&(_.value=!1,ue(z))},le=()=>{S.value=!S.value,Se()},Se=async()=>{var z;await lt(),(z=T.value)==null||z.focus()},Ae=()=>{var z;return(z=T.value)==null?void 0:z.blur()},Ne=z=>{x.value=!1,t("mouseleave",z)},Me=z=>{x.value=!0,t("mouseenter",z)},Le=z=>{t("keydown",z)},je=()=>{var z;(z=T.value)==null||z.select()},Y=()=>{t(Vt,""),t("change",""),t("clear"),t("input","")};return ke(()=>i.modelValue,()=>{var z;lt(()=>Z()),i.validateEvent&&((z=d==null?void 0:d.validate)==null||z.call(d,"change").catch(me=>{}))}),ke(O,()=>Ce()),ke(()=>i.type,async()=>{await lt(),Ce(),Z()}),Rt(()=>{!i.formatter&&i.parser,Ce(),lt(Z)}),e({input:y,textarea:b,ref:T,textareaStyle:F,autosize:Yr(i,"autosize"),focus:Se,blur:Ae,select:je,clear:Y,resizeTextarea:Z}),(z,me)=>At((A(),W("div",$t(f(s),{class:f(a),style:f(R),role:z.containerRole,onMouseenter:Me,onMouseleave:Ne}),[we(" input "),z.type!=="textarea"?(A(),W(nt,{key:0},[we(" prepend slot "),z.$slots.prepend?(A(),W("div",{key:0,class:k(f(g).be("group","prepend"))},[Oe(z.$slots,"prepend")],2)):we("v-if",!0),X("div",{ref_key:"wrapperRef",ref:E,class:k(f(l))},[we(" prefix slot "),z.$slots.prefix||z.prefixIcon?(A(),W("span",{key:0,class:k(f(g).e("prefix"))},[X("span",{class:k(f(g).e("prefix-inner"))},[Oe(z.$slots,"prefix"),z.prefixIcon?(A(),_e(f(st),{key:0,class:k(f(g).e("icon"))},{default:se(()=>[(A(),_e(Ht(z.prefixIcon)))]),_:1},8,["class"])):we("v-if",!0)],2)],2)):we("v-if",!0),X("input",$t({id:f(h),ref_key:"input",ref:y,class:f(g).e("inner")},f(c),{type:z.showPassword?S.value?"text":"password":z.type,disabled:f(m),formatter:z.formatter,parser:z.parser,readonly:z.readonly,autocomplete:z.autocomplete,tabindex:z.tabindex,"aria-label":z.label,placeholder:z.placeholder,style:z.inputStyle,form:i.form,onCompositionstart:K,onCompositionupdate:re,onCompositionend:ae,onInput:ue,onFocus:me[0]||(me[0]=(...Ie)=>f(B)&&f(B)(...Ie)),onBlur:me[1]||(me[1]=(...Ie)=>f(I)&&f(I)(...Ie)),onChange:D,onKeydown:Le}),null,16,ule),we(" suffix slot "),f(ve)?(A(),W("span",{key:1,class:k(f(g).e("suffix"))},[X("span",{class:k(f(g).e("suffix-inner"))},[!f(H)||!f($)||!f(j)?(A(),W(nt,{key:0},[Oe(z.$slots,"suffix"),z.suffixIcon?(A(),_e(f(st),{key:0,class:k(f(g).e("icon"))},{default:se(()=>[(A(),_e(Ht(z.suffixIcon)))]),_:1},8,["class"])):we("v-if",!0)],64)):we("v-if",!0),f(H)?(A(),_e(f(st),{key:1,class:k([f(g).e("icon"),f(g).e("clear")]),onMousedown:vt(f(_r),["prevent"]),onClick:Y},{default:se(()=>[ee(f(tc))]),_:1},8,["class","onMousedown"])):we("v-if",!0),f($)?(A(),_e(f(st),{key:2,class:k([f(g).e("icon"),f(g).e("password")]),onClick:le},{default:se(()=>[(A(),_e(Ht(f(G))))]),_:1},8,["class"])):we("v-if",!0),f(j)?(A(),W("span",{key:3,class:k(f(g).e("count"))},[X("span",{class:k(f(g).e("count-inner"))},ze(f(J))+" / "+ze(f(c).maxlength),3)],2)):we("v-if",!0),f(P)&&f(U)&&f(L)?(A(),_e(f(st),{key:4,class:k([f(g).e("icon"),f(g).e("validateIcon"),f(g).is("loading",f(P)==="validating")])},{default:se(()=>[(A(),_e(Ht(f(U))))]),_:1},8,["class"])):we("v-if",!0)],2)],2)):we("v-if",!0)],2),we(" append slot "),z.$slots.append?(A(),W("div",{key:1,class:k(f(g).be("group","append"))},[Oe(z.$slots,"append")],2)):we("v-if",!0)],64)):(A(),W(nt,{key:1},[we(" textarea "),X("textarea",$t({id:f(h),ref_key:"textarea",ref:b,class:f(v).e("inner")},f(c),{tabindex:z.tabindex,disabled:f(m),readonly:z.readonly,autocomplete:z.autocomplete,style:f(F),"aria-label":z.label,placeholder:z.placeholder,form:i.form,onCompositionstart:K,onCompositionupdate:re,onCompositionend:ae,onInput:ue,onFocus:me[2]||(me[2]=(...Ie)=>f(B)&&f(B)(...Ie)),onBlur:me[3]||(me[3]=(...Ie)=>f(I)&&f(I)(...Ie)),onChange:D,onKeydown:Le}),null,16,dle),f(j)?(A(),W("span",{key:0,style:ct(w.value),class:k(f(g).e("count"))},ze(f(J))+" / "+ze(f(c).maxlength),7)):we("v-if",!0)],64))],16,cle)),[[nr,z.type!=="hidden"]])}});var fle=Xe(ple,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Io=Bt(fle),Xh=4,CB={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},mle=({move:r,size:e,bar:t})=>({[t.size]:e,transform:`translate${t.axis}(${r}%)`}),NB=Symbol("scrollbarContextKey"),gle=Ye({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),vle="Thumb",yle=ne({__name:"thumb",props:gle,setup(r){const e=r,t=ot(NB),i=Pe("scrollbar");t||Ei(vle,"can not inject scrollbar context");const o=V(),n=V(),s=V({}),a=V(!1);let l=!1,c=!1,u=Jt?document.onselectstart:null;const d=N(()=>CB[e.vertical?"vertical":"horizontal"]),h=N(()=>mle({size:e.size,move:e.move,bar:d.value})),p=N(()=>o.value[d.value.offset]**2/t.wrapElement[d.value.scrollSize]/e.ratio/n.value[d.value.offset]),m=w=>{var M;if(w.stopPropagation(),w.ctrlKey||[1,2].includes(w.button))return;(M=window.getSelection())==null||M.removeAllRanges(),v(w);const T=w.currentTarget;T&&(s.value[d.value.axis]=T[d.value.offset]-(w[d.value.client]-T.getBoundingClientRect()[d.value.direction]))},g=w=>{if(!n.value||!o.value||!t.wrapElement)return;const M=Math.abs(w.target.getBoundingClientRect()[d.value.direction]-w[d.value.client]),T=n.value[d.value.offset]/2,E=(M-T)*100*p.value/o.value[d.value.offset];t.wrapElement[d.value.scroll]=E*t.wrapElement[d.value.scrollSize]/100},v=w=>{w.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",y),document.addEventListener("mouseup",b),u=document.onselectstart,document.onselectstart=()=>!1},y=w=>{if(!o.value||!n.value||l===!1)return;const M=s.value[d.value.axis];if(!M)return;const T=(o.value.getBoundingClientRect()[d.value.direction]-w[d.value.client])*-1,E=n.value[d.value.offset]-M,C=(T-E)*100*p.value/o.value[d.value.offset];t.wrapElement[d.value.scroll]=C*t.wrapElement[d.value.scrollSize]/100},b=()=>{l=!1,s.value[d.value.axis]=0,document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",b),S(),c&&(a.value=!1)},x=()=>{c=!1,a.value=!!e.size},_=()=>{c=!0,a.value=l};Vr(()=>{S(),document.removeEventListener("mouseup",b)});const S=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return Hr(Yr(t,"scrollbarElement"),"mousemove",x),Hr(Yr(t,"scrollbarElement"),"mouseleave",_),(w,M)=>(A(),_e(fi,{name:f(i).b("fade"),persisted:""},{default:se(()=>[At(X("div",{ref_key:"instance",ref:o,class:k([f(i).e("bar"),f(i).is(f(d).key)]),onMousedown:g},[X("div",{ref_key:"thumb",ref:n,class:k(f(i).e("thumb")),style:ct(f(h)),onMousedown:m},null,38)],34),[[nr,w.always||a.value]])]),_:1},8,["name"]))}});var AB=Xe(yle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const ble=Ye({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),xle=ne({__name:"bar",props:ble,setup(r,{expose:e}){const t=r,i=V(0),o=V(0);return e({handleScroll:n=>{if(n){const s=n.offsetHeight-Xh,a=n.offsetWidth-Xh;o.value=n.scrollTop*100/s*t.ratioY,i.value=n.scrollLeft*100/a*t.ratioX}}}),(n,s)=>(A(),W(nt,null,[ee(AB,{move:i.value,ratio:n.ratioX,size:n.width,always:n.always},null,8,["move","ratio","size","always"]),ee(AB,{move:o.value,ratio:n.ratioY,size:n.height,vertical:"",always:n.always},null,8,["move","ratio","size","always"])],64))}});var _le=Xe(xle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const wle=Ye({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Te([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Sle={scroll:({scrollTop:r,scrollLeft:e})=>[r,e].every(wt)},Mle="ElScrollbar",Tle=ne({name:Mle}),Ele=ne({...Tle,props:wle,emits:Sle,setup(r,{expose:e,emit:t}){const i=r,o=Pe("scrollbar");let n,s;const a=V(),l=V(),c=V(),u=V("0"),d=V("0"),h=V(),p=V(1),m=V(1),g=N(()=>{const M={};return i.height&&(M.height=hi(i.height)),i.maxHeight&&(M.maxHeight=hi(i.maxHeight)),[i.wrapStyle,M]}),v=N(()=>[i.wrapClass,o.e("wrap"),{[o.em("wrap","hidden-default")]:!i.native}]),y=N(()=>[o.e("view"),i.viewClass]),b=()=>{var M;l.value&&((M=h.value)==null||M.handleScroll(l.value),t("scroll",{scrollTop:l.value.scrollTop,scrollLeft:l.value.scrollLeft}))};function x(M,T){zt(M)?l.value.scrollTo(M):wt(M)&&wt(T)&&l.value.scrollTo(M,T)}const _=M=>{wt(M)&&(l.value.scrollTop=M)},S=M=>{wt(M)&&(l.value.scrollLeft=M)},w=()=>{if(!l.value)return;const M=l.value.offsetHeight-Xh,T=l.value.offsetWidth-Xh,E=M**2/l.value.scrollHeight,C=T**2/l.value.scrollWidth,B=Math.max(E,i.minSize),I=Math.max(C,i.minSize);p.value=E/(M-E)/(B/(M-B)),m.value=C/(T-C)/(I/(T-I)),d.value=B+Xh<M?`${B}px`:"",u.value=I+Xh<T?`${I}px`:""};return ke(()=>i.noresize,M=>{M?(n==null||n(),s==null||s()):({stop:n}=ko(c,w),s=Hr("resize",w))},{immediate:!0}),ke(()=>[i.maxHeight,i.height],()=>{i.native||lt(()=>{var M;w(),l.value&&((M=h.value)==null||M.handleScroll(l.value))})}),Wt(NB,ur({scrollbarElement:a,wrapElement:l})),Rt(()=>{i.native||lt(()=>{w()})}),Ka(()=>w()),e({wrapRef:l,update:w,scrollTo:x,setScrollTop:_,setScrollLeft:S,handleScroll:b}),(M,T)=>(A(),W("div",{ref_key:"scrollbarRef",ref:a,class:k(f(o).b())},[X("div",{ref_key:"wrapRef",ref:l,class:k(f(v)),style:ct(f(g)),onScroll:b},[(A(),_e(Ht(M.tag),{ref_key:"resizeRef",ref:c,class:k(f(y)),style:ct(M.viewStyle)},{default:se(()=>[Oe(M.$slots,"default")]),_:3},8,["class","style"]))],38),M.native?we("v-if",!0):(A(),_e(_le,{key:0,ref_key:"barRef",ref:h,height:d.value,width:u.value,always:M.always,"ratio-x":m.value,"ratio-y":p.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Cle=Xe(Ele,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const sl=Bt(Cle),zM=Symbol("popper"),RB=Symbol("popperContent"),Nle=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],LB=Ye({role:{type:String,values:Nle,default:"tooltip"}}),Ale=ne({name:"ElPopper",inheritAttrs:!1}),Rle=ne({...Ale,props:LB,setup(r,{expose:e}){const t=r,i=V(),o=V(),n=V(),s=V(),a=N(()=>t.role),l={triggerRef:i,popperInstanceRef:o,contentRef:n,referenceRef:s,role:a};return e(l),Wt(zM,l),(c,u)=>Oe(c.$slots,"default")}});var Lle=Xe(Rle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const OB=Ye({arrowOffset:{type:Number,default:5}}),Ole=ne({name:"ElPopperArrow",inheritAttrs:!1}),kle=ne({...Ole,props:OB,setup(r,{expose:e}){const t=r,i=Pe("popper"),{arrowOffset:o,arrowRef:n,arrowStyle:s}=ot(RB,void 0);return ke(()=>t.arrowOffset,a=>{o.value=a}),Vr(()=>{n.value=void 0}),e({arrowRef:n}),(a,l)=>(A(),W("span",{ref_key:"arrowRef",ref:n,class:k(f(i).e("arrow")),style:ct(f(s)),"data-popper-arrow":""},null,6))}});var Ile=Xe(kle,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const Ple="ElOnlyChild",kB=ne({name:Ple,setup(r,{slots:e,attrs:t}){var i;const o=ot(XD),n=lse((i=o==null?void 0:o.setForwardRef)!=null?i:_r);return()=>{var s;const a=(s=e.default)==null?void 0:s.call(e,t);if(!a||a.length>1)return null;const l=IB(a);return l?At(Ja(l,t),[[n]]):null}}});function IB(r){if(!r)return null;const e=r;for(const t of e){if(zt(t))switch(t.type){case $o:continue;case xh:case"svg":return PB(t);case nt:return IB(t.children);default:return t}return PB(t)}return null}function PB(r){const e=Pe("only-child");return ee("span",{class:e.e("content")},[r])}const DB=Ye({virtualRef:{type:Te(Object)},virtualTriggering:Boolean,onMouseenter:{type:Te(Function)},onMouseleave:{type:Te(Function)},onClick:{type:Te(Function)},onKeydown:{type:Te(Function)},onFocus:{type:Te(Function)},onBlur:{type:Te(Function)},onContextmenu:{type:Te(Function)},id:String,open:Boolean}),Dle=ne({name:"ElPopperTrigger",inheritAttrs:!1}),Ble=ne({...Dle,props:DB,setup(r,{expose:e}){const t=r,{role:i,triggerRef:o}=ot(zM,void 0);ase(o);const n=N(()=>a.value?t.id:void 0),s=N(()=>{if(i&&i.value==="tooltip")return t.open&&t.id?t.id:void 0}),a=N(()=>{if(i&&i.value!=="tooltip")return i.value}),l=N(()=>a.value?`${t.open}`:void 0);let c;return Rt(()=>{ke(()=>t.virtualRef,u=>{u&&(o.value=Hn(u))},{immediate:!0}),ke(o,(u,d)=>{c==null||c(),c=void 0,fs(u)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(h=>{var p;const m=t[h];m&&(u.addEventListener(h.slice(2).toLowerCase(),m),(p=d==null?void 0:d.removeEventListener)==null||p.call(d,h.slice(2).toLowerCase(),m))}),c=ke([n,s,a,l],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,m)=>{Mi(h[m])?u.removeAttribute(p):u.setAttribute(p,h[m])})},{immediate:!0})),fs(d)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>d.removeAttribute(h))},{immediate:!0})}),Vr(()=>{c==null||c(),c=void 0}),e({triggerRef:o}),(u,d)=>u.virtualTriggering?we("v-if",!0):(A(),_e(f(kB),$t({key:0},u.$attrs,{"aria-controls":f(n),"aria-describedby":f(s),"aria-expanded":f(l),"aria-haspopup":f(a)}),{default:se(()=>[Oe(u.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var Fle=Xe(Ble,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const VM="focus-trap.focus-after-trapped",GM="focus-trap.focus-after-released",Ule="focus-trap.focusout-prevented",BB={cancelable:!0,bubbles:!1},zle={cancelable:!0,bubbles:!1},FB="focusAfterTrapped",UB="focusAfterReleased",HM=Symbol("elFocusTrap"),jM=V(),ab=V(0),$M=V(0);let lb=0;const zB=r=>{const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0||i===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},VB=(r,e)=>{for(const t of r)if(!Vle(t,e))return t},Vle=(r,e)=>{if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1},Gle=r=>{const e=zB(r),t=VB(e,r),i=VB(e.reverse(),r);return[t,i]},Hle=r=>r instanceof HTMLInputElement&&"select"in r,cc=(r,e)=>{if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),$M.value=window.performance.now(),r!==t&&Hle(r)&&e&&r.select()}};function GB(r,e){const t=[...r],i=r.indexOf(e);return i!==-1&&t.splice(i,1),t}const jle=()=>{let r=[];return{push:e=>{const t=r[0];t&&e!==t&&t.pause(),r=GB(r,e),r.unshift(e)},remove:e=>{var t,i;r=GB(r,e),(i=(t=r[0])==null?void 0:t.resume)==null||i.call(t)}}},$le=(r,e=!1)=>{const t=document.activeElement;for(const i of r)if(cc(i,e),document.activeElement!==t)return},HB=jle(),Wle=()=>ab.value>$M.value,cb=()=>{jM.value="pointer",ab.value=window.performance.now()},jB=()=>{jM.value="keyboard",ab.value=window.performance.now()},qle=()=>(Rt(()=>{lb===0&&(document.addEventListener("mousedown",cb),document.addEventListener("touchstart",cb),document.addEventListener("keydown",jB)),lb++}),Vr(()=>{lb--,lb<=0&&(document.removeEventListener("mousedown",cb),document.removeEventListener("touchstart",cb),document.removeEventListener("keydown",jB))}),{focusReason:jM,lastUserFocusTimestamp:ab,lastAutomatedFocusTimestamp:$M}),ub=r=>new CustomEvent(Ule,{...zle,detail:r}),Xle=ne({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[FB,UB,"focusin","focusout","focusout-prevented","release-requested"],setup(r,{emit:e}){const t=V();let i,o;const{focusReason:n}=qle();ise(m=>{r.trapped&&!s.paused&&e("release-requested",m)});const s={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=m=>{if(!r.loop&&!r.trapped||s.paused)return;const{key:g,altKey:v,ctrlKey:y,metaKey:b,currentTarget:x,shiftKey:_}=m,{loop:S}=r,w=g===ft.tab&&!v&&!y&&!b,M=document.activeElement;if(w&&M){const T=x,[E,C]=Gle(T);if(E&&C){if(!_&&M===C){const B=ub({focusReason:n.value});e("focusout-prevented",B),B.defaultPrevented||(m.preventDefault(),S&&cc(E,!0))}else if(_&&[E,T].includes(M)){const B=ub({focusReason:n.value});e("focusout-prevented",B),B.defaultPrevented||(m.preventDefault(),S&&cc(C,!0))}}else if(M===T){const B=ub({focusReason:n.value});e("focusout-prevented",B),B.defaultPrevented||m.preventDefault()}}};Wt(HM,{focusTrapRef:t,onKeydown:a}),ke(()=>r.focusTrapEl,m=>{m&&(t.value=m)},{immediate:!0}),ke([t],([m],[g])=>{m&&(m.addEventListener("keydown",a),m.addEventListener("focusin",u),m.addEventListener("focusout",d)),g&&(g.removeEventListener("keydown",a),g.removeEventListener("focusin",u),g.removeEventListener("focusout",d))});const l=m=>{e(FB,m)},c=m=>e(UB,m),u=m=>{const g=f(t);if(!g)return;const v=m.target,y=m.relatedTarget,b=v&&g.contains(v);r.trapped||y&&g.contains(y)||(i=y),b&&e("focusin",m),!s.paused&&r.trapped&&(b?o=v:cc(o,!0))},d=m=>{const g=f(t);if(!(s.paused||!g))if(r.trapped){const v=m.relatedTarget;!Mi(v)&&!g.contains(v)&&setTimeout(()=>{if(!s.paused&&r.trapped){const y=ub({focusReason:n.value});e("focusout-prevented",y),y.defaultPrevented||cc(o,!0)}},0)}else{const v=m.target;v&&g.contains(v)||e("focusout",m)}};async function h(){await lt();const m=f(t);if(m){HB.push(s);const g=m.contains(document.activeElement)?i:document.activeElement;if(i=g,!m.contains(g)){const v=new Event(VM,BB);m.addEventListener(VM,l),m.dispatchEvent(v),v.defaultPrevented||lt(()=>{let y=r.focusStartEl;Tt(y)||(cc(y),document.activeElement!==y&&(y="first")),y==="first"&&$le(zB(m),!0),(document.activeElement===g||y==="container")&&cc(m)})}}}function p(){const m=f(t);if(m){m.removeEventListener(VM,l);const g=new CustomEvent(GM,{...BB,detail:{focusReason:n.value}});m.addEventListener(GM,c),m.dispatchEvent(g),!g.defaultPrevented&&(n.value=="keyboard"||!Wle()||m.contains(document.activeElement))&&cc(i??document.body),m.removeEventListener(GM,c),HB.remove(s)}}return Rt(()=>{r.trapped&&h(),ke(()=>r.trapped,m=>{m?h():p()})}),Vr(()=>{r.trapped&&p()}),{onKeydown:a}}});function Kle(r,e,t,i,o,n){return Oe(r.$slots,"default",{handleKeydown:r.onKeydown})}var db=Xe(Xle,[["render",Kle],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const Yle=["fixed","absolute"],Jle=Ye({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Te(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:Eu,default:"bottom"},popperOptions:{type:Te(Object),default:()=>({})},strategy:{type:String,values:Yle,default:"absolute"}}),$B=Ye({...Jle,id:String,style:{type:Te([String,Array,Object])},className:{type:Te([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Te([String,Array,Object])},popperStyle:{type:Te([String,Array,Object])},referenceEl:{type:Te(Object)},triggerTargetEl:{type:Te(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),Zle={mouseenter:r=>r instanceof MouseEvent,mouseleave:r=>r instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},Qle=(r,e=[])=>{const{placement:t,strategy:i,popperOptions:o}=r,n={placement:t,strategy:i,...o,modifiers:[...tce(r),...e]};return rce(n,o==null?void 0:o.modifiers),n},ece=r=>{if(Jt)return Hn(r)};function tce(r){const{offset:e,gpuAcceleration:t,fallbackPlacements:i}=r;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function rce(r,e){e&&(r.modifiers=[...r.modifiers,...e??[]])}const ice=0,oce=r=>{const{popperInstanceRef:e,contentRef:t,triggerRef:i,role:o}=ot(zM,void 0),n=V(),s=V(),a=N(()=>({name:"eventListeners",enabled:!!r.visible})),l=N(()=>{var y;const b=f(n),x=(y=f(s))!=null?y:ice;return{name:"arrow",enabled:!OQ(b),options:{element:b,padding:x}}}),c=N(()=>({onFirstUpdate:()=>{m()},...Qle(r,[f(l),f(a)])})),u=N(()=>ece(r.referenceEl)||f(i)),{attributes:d,state:h,styles:p,update:m,forceUpdate:g,instanceRef:v}=Qne(u,t,c);return ke(v,y=>e.value=y),Rt(()=>{ke(()=>{var y;return(y=f(u))==null?void 0:y.getBoundingClientRect()},()=>{m()})}),{attributes:d,arrowRef:n,contentRef:t,instanceRef:v,state:h,styles:p,role:o,forceUpdate:g,update:m}},nce=(r,{attributes:e,styles:t,role:i})=>{const{nextZIndex:o}=Hh(),n=Pe("popper"),s=N(()=>f(e).popper),a=V(r.zIndex||o()),l=N(()=>[n.b(),n.is("pure",r.pure),n.is(r.effect),r.popperClass]),c=N(()=>[{zIndex:f(a)},f(t).popper,r.popperStyle||{}]),u=N(()=>i.value==="dialog"?"false":void 0),d=N(()=>f(t).arrow||{});return{ariaModal:u,arrowStyle:d,contentAttrs:s,contentClass:l,contentStyle:c,contentZIndex:a,updateZIndex:()=>{a.value=r.zIndex||o()}}},sce=(r,e)=>{const t=V(!1),i=V();return{focusStartRef:i,trapped:t,onFocusAfterReleased:o=>{var n;((n=o.detail)==null?void 0:n.focusReason)!=="pointer"&&(i.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:o=>{r.visible&&!t.value&&(o.target&&(i.value=o.target),t.value=!0)},onFocusoutPrevented:o=>{r.trapping||(o.detail.focusReason==="pointer"&&o.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},ace=ne({name:"ElPopperContent"}),lce=ne({...ace,props:$B,emits:Zle,setup(r,{expose:e,emit:t}){const i=r,{focusStartRef:o,trapped:n,onFocusAfterReleased:s,onFocusAfterTrapped:a,onFocusInTrap:l,onFocusoutPrevented:c,onReleaseRequested:u}=sce(i,t),{attributes:d,arrowRef:h,contentRef:p,styles:m,instanceRef:g,role:v,update:y}=oce(i),{ariaModal:b,arrowStyle:x,contentAttrs:_,contentClass:S,contentStyle:w,updateZIndex:M}=nce(i,{styles:m,attributes:d,role:v}),T=ot(xa,void 0),E=V();Wt(RB,{arrowStyle:x,arrowRef:h,arrowOffset:E}),T&&(T.addInputId||T.removeInputId)&&Wt(xa,{...T,addInputId:_r,removeInputId:_r});let C;const B=(L=!0)=>{y(),L&&M()},I=()=>{B(!1),i.visible&&i.focusOnShow?n.value=!0:i.visible===!1&&(n.value=!1)};return Rt(()=>{ke(()=>i.triggerTargetEl,(L,P)=>{C==null||C(),C=void 0;const U=f(L||p.value),G=f(P||p.value);fs(U)&&(C=ke([v,()=>i.ariaLabel,b,()=>i.id],R=>{["role","aria-label","aria-modal","id"].forEach((F,O)=>{Mi(R[O])?U.removeAttribute(F):U.setAttribute(F,R[O])})},{immediate:!0})),G!==U&&fs(G)&&["role","aria-label","aria-modal","id"].forEach(R=>{G.removeAttribute(R)})},{immediate:!0}),ke(()=>i.visible,I,{immediate:!0})}),Vr(()=>{C==null||C(),C=void 0}),e({popperContentRef:p,popperInstanceRef:g,updatePopper:B,contentStyle:w}),(L,P)=>(A(),W("div",$t({ref_key:"contentRef",ref:p},f(_),{style:f(w),class:f(S),tabindex:"-1",onMouseenter:P[0]||(P[0]=U=>L.$emit("mouseenter",U)),onMouseleave:P[1]||(P[1]=U=>L.$emit("mouseleave",U))}),[ee(f(db),{trapped:f(n),"trap-on-focus-in":!0,"focus-trap-el":f(p),"focus-start-el":f(o),onFocusAfterTrapped:f(a),onFocusAfterReleased:f(s),onFocusin:f(l),onFocusoutPrevented:f(c),onReleaseRequested:f(u)},{default:se(()=>[Oe(L.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var cce=Xe(lce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const WB=Bt(Lle),hb=Symbol("elTooltip"),ro=Ye({...sse,...$B,appendTo:{type:Te([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:Te(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),Km=Ye({...DB,disabled:Boolean,trigger:{type:Te([String,Array]),default:"hover"},triggerKeys:{type:Te(Array),default:()=>[ft.enter,ft.space]}}),{useModelToggleProps:uce,useModelToggleEmits:dce,useModelToggle:hce}=yD("visible"),pce=Ye({...LB,...uce,...ro,...Km,...OB,showArrow:{type:Boolean,default:!0}}),fce=[...dce,"before-show","before-hide","show","hide","open","close"],mce=(r,e)=>it(r)?r.includes(e):r===e,Kh=(r,e,t)=>i=>{mce(f(r),e)&&t(i)},gce=ne({name:"ElTooltipTrigger"}),vce=ne({...gce,props:Km,setup(r,{expose:e}){const t=r,i=Pe("tooltip"),{controlled:o,id:n,open:s,onOpen:a,onClose:l,onToggle:c}=ot(hb,void 0),u=V(null),d=()=>{if(f(o)||t.disabled)return!0},h=Yr(t,"trigger"),p=ti(d,Kh(h,"hover",a)),m=ti(d,Kh(h,"hover",l)),g=ti(d,Kh(h,"click",_=>{_.button===0&&c(_)})),v=ti(d,Kh(h,"focus",a)),y=ti(d,Kh(h,"focus",l)),b=ti(d,Kh(h,"contextmenu",_=>{_.preventDefault(),c(_)})),x=ti(d,_=>{const{code:S}=_;t.triggerKeys.includes(S)&&(_.preventDefault(),c(_))});return e({triggerRef:u}),(_,S)=>(A(),_e(f(Fle),{id:f(n),"virtual-ref":_.virtualRef,open:f(s),"virtual-triggering":_.virtualTriggering,class:k(f(i).e("trigger")),onBlur:f(y),onClick:f(g),onContextmenu:f(b),onFocus:f(v),onMouseenter:f(p),onMouseleave:f(m),onKeydown:f(x)},{default:se(()=>[Oe(_.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var yce=Xe(vce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const bce=ne({name:"ElTooltipContent",inheritAttrs:!1}),xce=ne({...bce,props:ro,setup(r,{expose:e}){const t=r,{selector:i}=WD(),o=Pe("tooltip"),n=V(null),s=V(!1),{controlled:a,id:l,open:c,trigger:u,onClose:d,onOpen:h,onShow:p,onHide:m,onBeforeShow:g,onBeforeHide:v}=ot(hb,void 0),y=N(()=>t.transition||`${o.namespace.value}-fade-in-linear`),b=N(()=>t.persistent);Vr(()=>{s.value=!0});const x=N(()=>f(b)?!0:f(c)),_=N(()=>t.disabled?!1:f(c)),S=N(()=>t.appendTo||i.value),w=N(()=>{var R;return(R=t.style)!=null?R:{}}),M=N(()=>!f(c)),T=()=>{m()},E=()=>{if(f(a))return!0},C=ti(E,()=>{t.enterable&&f(u)==="hover"&&h()}),B=ti(E,()=>{f(u)==="hover"&&d()}),I=()=>{var R,F;(F=(R=n.value)==null?void 0:R.updatePopper)==null||F.call(R),g==null||g()},L=()=>{v==null||v()},P=()=>{p(),G=LS(N(()=>{var R;return(R=n.value)==null?void 0:R.popperContentRef}),()=>{f(a)||f(u)!=="hover"&&d()})},U=()=>{t.virtualTriggering||d()};let G;return ke(()=>f(c),R=>{R||(G==null||G())},{flush:"post"}),ke(()=>t.content,()=>{var R,F;(F=(R=n.value)==null?void 0:R.updatePopper)==null||F.call(R)}),e({contentRef:n}),(R,F)=>(A(),_e(sm,{disabled:!R.teleported,to:f(S)},[ee(fi,{name:f(y),onAfterLeave:T,onBeforeEnter:I,onAfterEnter:P,onBeforeLeave:L},{default:se(()=>[f(x)?At((A(),_e(f(cce),$t({key:0,id:f(l),ref_key:"contentRef",ref:n},R.$attrs,{"aria-label":R.ariaLabel,"aria-hidden":f(M),"boundaries-padding":R.boundariesPadding,"fallback-placements":R.fallbackPlacements,"gpu-acceleration":R.gpuAcceleration,offset:R.offset,placement:R.placement,"popper-options":R.popperOptions,strategy:R.strategy,effect:R.effect,enterable:R.enterable,pure:R.pure,"popper-class":R.popperClass,"popper-style":[R.popperStyle,f(w)],"reference-el":R.referenceEl,"trigger-target-el":R.triggerTargetEl,visible:f(_),"z-index":R.zIndex,onMouseenter:f(C),onMouseleave:f(B),onBlur:U,onClose:f(d)}),{default:se(()=>[s.value?we("v-if",!0):Oe(R.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[nr,f(_)]]):we("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var _ce=Xe(xce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const wce=["innerHTML"],Sce={key:1},Mce=ne({name:"ElTooltip"}),Tce=ne({...Mce,props:pce,emits:fce,setup(r,{expose:e,emit:t}){const i=r;nse();const o=bs(),n=V(),s=V(),a=()=>{var y;const b=f(n);b&&((y=b.popperInstanceRef)==null||y.update())},l=V(!1),c=V(),{show:u,hide:d,hasUpdateHandler:h}=hce({indicator:l,toggleReason:c}),{onOpen:p,onClose:m}=qD({showAfter:Yr(i,"showAfter"),hideAfter:Yr(i,"hideAfter"),autoClose:Yr(i,"autoClose"),open:u,close:d}),g=N(()=>Ti(i.visible)&&!h.value);Wt(hb,{controlled:g,id:o,open:su(l),trigger:Yr(i,"trigger"),onOpen:y=>{p(y)},onClose:y=>{m(y)},onToggle:y=>{f(l)?m(y):p(y)},onShow:()=>{t("show",c.value)},onHide:()=>{t("hide",c.value)},onBeforeShow:()=>{t("before-show",c.value)},onBeforeHide:()=>{t("before-hide",c.value)},updatePopper:a}),ke(()=>i.disabled,y=>{y&&l.value&&(l.value=!1)});const v=y=>{var b,x;const _=(x=(b=s.value)==null?void 0:b.contentRef)==null?void 0:x.popperContentRef,S=(y==null?void 0:y.relatedTarget)||document.activeElement;return _&&_.contains(S)};return Fk(()=>l.value&&d()),e({popperRef:n,contentRef:s,isFocusInsideContent:v,updatePopper:a,onOpen:p,onClose:m,hide:d}),(y,b)=>(A(),_e(f(WB),{ref_key:"popperRef",ref:n,role:y.role},{default:se(()=>[ee(yce,{disabled:y.disabled,trigger:y.trigger,"trigger-keys":y.triggerKeys,"virtual-ref":y.virtualRef,"virtual-triggering":y.virtualTriggering},{default:se(()=>[y.$slots.default?Oe(y.$slots,"default",{key:0}):we("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),ee(_ce,{ref_key:"contentRef",ref:s,"aria-label":y.ariaLabel,"boundaries-padding":y.boundariesPadding,content:y.content,disabled:y.disabled,effect:y.effect,enterable:y.enterable,"fallback-placements":y.fallbackPlacements,"hide-after":y.hideAfter,"gpu-acceleration":y.gpuAcceleration,offset:y.offset,persistent:y.persistent,"popper-class":y.popperClass,"popper-style":y.popperStyle,placement:y.placement,"popper-options":y.popperOptions,pure:y.pure,"raw-content":y.rawContent,"reference-el":y.referenceEl,"trigger-target-el":y.triggerTargetEl,"show-after":y.showAfter,strategy:y.strategy,teleported:y.teleported,transition:y.transition,"virtual-triggering":y.virtualTriggering,"z-index":y.zIndex,"append-to":y.appendTo},{default:se(()=>[Oe(y.$slots,"content",{},()=>[y.rawContent?(A(),W("span",{key:0,innerHTML:y.content},null,8,wce)):(A(),W("span",Sce,ze(y.content),1))]),y.showArrow?(A(),_e(f(Ile),{key:0,"arrow-offset":y.arrowOffset},null,8,["arrow-offset"])):we("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var Ece=Xe(Tce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const Zo=Bt(Ece),Cce=Ye({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Te(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Te([Function,Array]),default:_r},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:ro.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String}),Nce={[Vt]:r=>Tt(r),[Yo]:r=>Tt(r),[Fr]:r=>Tt(r),focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent,clear:()=>!0,select:r=>zt(r)},Ace=["aria-expanded","aria-owns"],Rce={key:0},Lce=["id","aria-selected","onClick"],qB="ElAutocomplete",Oce=ne({name:qB,inheritAttrs:!1}),kce=ne({...Oce,props:Cce,emits:Nce,setup(r,{expose:e,emit:t}){const i=r,o=fM(),n=du(),s=bn(),a=Pe("autocomplete"),l=V(),c=V(),u=V(),d=V();let h=!1,p=!1;const m=V([]),g=V(-1),v=V(""),y=V(!1),b=V(!1),x=V(!1),_=N(()=>a.b(String(qy()))),S=N(()=>n.style),w=N(()=>(m.value.length>0||x.value)&&y.value),M=N(()=>!i.hideLoading&&x.value),T=N(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),E=()=>{w.value&&(v.value=`${l.value.$el.offsetWidth}px`)},C=()=>{g.value=-1},B=Xo(async ve=>{if(b.value)return;const xe=te=>{x.value=!1,!b.value&&(it(te)?(m.value=te,g.value=i.highlightFirstItem?0:-1):Ei(qB,"autocomplete suggestions must be an array"))};if(x.value=!0,it(i.fetchSuggestions))xe(i.fetchSuggestions);else{const te=await i.fetchSuggestions(ve,xe);it(te)&&xe(te)}},i.debounce),I=ve=>{const xe=!!ve;if(t(Yo,ve),t(Vt,ve),b.value=!1,y.value||(y.value=xe),!i.triggerOnFocus&&!ve){b.value=!0,m.value=[];return}B(ve)},L=ve=>{var xe;s.value||(((xe=ve.target)==null?void 0:xe.tagName)!=="INPUT"||T.value.includes(document.activeElement))&&(y.value=!0)},P=ve=>{t(Fr,ve)},U=ve=>{p?p=!1:(y.value=!0,t("focus",ve),i.triggerOnFocus&&!h&&B(String(i.modelValue)))},G=ve=>{setTimeout(()=>{var xe;if((xe=u.value)!=null&&xe.isFocusInsideContent()){p=!0;return}y.value&&H(),t("blur",ve)})},R=()=>{y.value=!1,t(Vt,""),t("clear")},F=async()=>{w.value&&g.value>=0&&g.value<m.value.length?J(m.value[g.value]):i.selectWhenUnmatched&&(t("select",{value:i.modelValue}),m.value=[],g.value=-1)},O=ve=>{w.value&&(ve.preventDefault(),ve.stopPropagation(),H())},H=()=>{y.value=!1},$=()=>{var ve;(ve=l.value)==null||ve.focus()},j=()=>{var ve;(ve=l.value)==null||ve.blur()},J=async ve=>{t(Yo,ve[i.valueKey]),t(Vt,ve[i.valueKey]),t("select",ve),m.value=[],g.value=-1},ce=ve=>{if(!w.value||x.value)return;if(ve<0){g.value=-1;return}ve>=m.value.length&&(ve=m.value.length-1);const xe=c.value.querySelector(`.${a.be("suggestion","wrap")}`),te=xe.querySelectorAll(`.${a.be("suggestion","list")} li`)[ve],Z=xe.scrollTop,{offsetTop:de,scrollHeight:Ce}=te;de+Ce>Z+xe.clientHeight&&(xe.scrollTop+=Ce),de<Z&&(xe.scrollTop-=Ce),g.value=ve,l.value.ref.setAttribute("aria-activedescendant",`${_.value}-item-${g.value}`)};return LS(d,()=>{w.value&&H()}),Rt(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${_.value}-item-${g.value}`),h=l.value.ref.hasAttribute("readonly")}),e({highlightedIndex:g,activated:y,loading:x,inputRef:l,popperRef:u,suggestions:m,handleSelect:J,handleKeyEnter:F,focus:$,blur:j,close:H,highlight:ce}),(ve,xe)=>(A(),_e(f(Zo),{ref_key:"popperRef",ref:u,visible:f(w),placement:ve.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[f(a).e("popper"),ve.popperClass],teleported:ve.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${f(a).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:E,onHide:C},{content:se(()=>[X("div",{ref_key:"regionRef",ref:c,class:k([f(a).b("suggestion"),f(a).is("loading",f(M))]),style:ct({[ve.fitInputWidth?"width":"minWidth"]:v.value,outline:"none"}),role:"region"},[ee(f(sl),{id:f(_),tag:"ul","wrap-class":f(a).be("suggestion","wrap"),"view-class":f(a).be("suggestion","list"),role:"listbox"},{default:se(()=>[f(M)?(A(),W("li",Rce,[ee(f(st),{class:k(f(a).is("loading"))},{default:se(()=>[ee(f(rc))]),_:1},8,["class"])])):(A(!0),W(nt,{key:1},jt(m.value,(te,Z)=>(A(),W("li",{id:`${f(_)}-item-${Z}`,key:Z,class:k({highlighted:g.value===Z}),role:"option","aria-selected":g.value===Z,onClick:de=>J(te)},[Oe(ve.$slots,"default",{item:te},()=>[rr(ze(te[ve.valueKey]),1)])],10,Lce))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:se(()=>[X("div",{ref_key:"listboxRef",ref:d,class:k([f(a).b(),ve.$attrs.class]),style:ct(f(S)),role:"combobox","aria-haspopup":"listbox","aria-expanded":f(w),"aria-owns":f(_)},[ee(f(Io),$t({ref_key:"inputRef",ref:l},f(o),{clearable:ve.clearable,disabled:f(s),name:ve.name,"model-value":ve.modelValue,onInput:I,onChange:P,onFocus:U,onBlur:G,onClear:R,onKeydown:[xe[0]||(xe[0]=Qt(vt(te=>ce(g.value-1),["prevent"]),["up"])),xe[1]||(xe[1]=Qt(vt(te=>ce(g.value+1),["prevent"]),["down"])),Qt(F,["enter"]),Qt(H,["tab"]),Qt(O,["esc"])],onMousedown:L}),Ya({_:2},[ve.$slots.prepend?{name:"prepend",fn:se(()=>[Oe(ve.$slots,"prepend")])}:void 0,ve.$slots.append?{name:"append",fn:se(()=>[Oe(ve.$slots,"append")])}:void 0,ve.$slots.prefix?{name:"prefix",fn:se(()=>[Oe(ve.$slots,"prefix")])}:void 0,ve.$slots.suffix?{name:"suffix",fn:se(()=>[Oe(ve.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","onKeydown"])],14,Ace)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var Ice=Xe(kce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]);const Pce=Bt(Ice),Dce=Ye({size:{type:[Number,String],values:ma,default:"",validator:r=>wt(r)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:Lr},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Te(String),default:"cover"}}),Bce={error:r=>r instanceof Event},Fce=["src","alt","srcset"],Uce=ne({name:"ElAvatar"}),zce=ne({...Uce,props:Dce,emits:Bce,setup(r,{emit:e}){const t=r,i=Pe("avatar"),o=V(!1),n=N(()=>{const{size:c,icon:u,shape:d}=t,h=[i.b()];return Tt(c)&&h.push(i.m(c)),u&&h.push(i.m("icon")),d&&h.push(i.m(d)),h}),s=N(()=>{const{size:c}=t;return wt(c)?i.cssVarBlock({size:hi(c)||""}):void 0}),a=N(()=>({objectFit:t.fit}));ke(()=>t.src,()=>o.value=!1);function l(c){o.value=!0,e("error",c)}return(c,u)=>(A(),W("span",{class:k(f(n)),style:ct(f(s))},[(c.src||c.srcSet)&&!o.value?(A(),W("img",{key:0,src:c.src,alt:c.alt,srcset:c.srcSet,style:ct(f(a)),onError:l},null,44,Fce)):c.icon?(A(),_e(f(st),{key:1},{default:se(()=>[(A(),_e(Ht(c.icon)))]),_:1})):Oe(c.$slots,"default",{key:2})],6))}});var Vce=Xe(zce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/avatar/src/avatar.vue"]]);const Gce=Bt(Vce),Hce={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},jce={click:r=>r instanceof MouseEvent},$ce=(r,e,t)=>{const i=Rr(),o=Rr(),n=V(!1),s=()=>{i.value&&(n.value=i.value.scrollTop>=r.visibilityHeight)},a=c=>{var u;(u=i.value)==null||u.scrollTo({top:0,behavior:"smooth"}),e("click",c)},l=N3(s,300,!0);return Hr(o,"scroll",l),Rt(()=>{var c;o.value=document,i.value=document.documentElement,r.target&&(i.value=(c=document.querySelector(r.target))!=null?c:void 0,i.value||Ei(t,`target does not exist: ${r.target}`),o.value=i.value),s()}),{visible:n,handleClick:a}},XB="ElBacktop",Wce=ne({name:XB}),qce=ne({...Wce,props:Hce,emits:jce,setup(r,{emit:e}){const t=r,i=Pe("backtop"),{handleClick:o,visible:n}=$ce(t,e,XB),s=N(()=>({right:`${t.right}px`,bottom:`${t.bottom}px`}));return(a,l)=>(A(),_e(fi,{name:`${f(i).namespace.value}-fade-in`},{default:se(()=>[f(n)?(A(),W("div",{key:0,style:ct(f(s)),class:k(f(i).b()),onClick:l[0]||(l[0]=vt((...c)=>f(o)&&f(o)(...c),["stop"]))},[Oe(a.$slots,"default",{},()=>[ee(f(st),{class:k(f(i).e("icon"))},{default:se(()=>[ee(f(Uee))]),_:1},8,["class"])])],6)):we("v-if",!0)]),_:3},8,["name"]))}});var Xce=Xe(qce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/backtop/src/backtop.vue"]]);const Kce=Bt(Xce),Yce=Ye({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),Jce=["textContent"],Zce=ne({name:"ElBadge"}),Qce=ne({...Zce,props:Yce,setup(r,{expose:e}){const t=r,i=Pe("badge"),o=N(()=>t.isDot?"":wt(t.value)&&wt(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`);return e({content:o}),(n,s)=>(A(),W("div",{class:k(f(i).b())},[Oe(n.$slots,"default"),ee(fi,{name:`${f(i).namespace.value}-zoom-in-center`,persisted:""},{default:se(()=>[At(X("sup",{class:k([f(i).e("content"),f(i).em("content",n.type),f(i).is("fixed",!!n.$slots.default),f(i).is("dot",n.isDot)]),textContent:ze(f(o))},null,10,Jce),[[nr,!n.hidden&&(f(o)||n.isDot)]])]),_:1},8,["name"])],2))}});var eue=Xe(Qce,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const KB=Bt(eue),YB=Symbol("breadcrumbKey"),tue=Ye({separator:{type:String,default:"/"},separatorIcon:{type:Lr}}),rue=ne({name:"ElBreadcrumb"}),iue=ne({...rue,props:tue,setup(r){const e=r,t=Pe("breadcrumb"),i=V();return Wt(YB,e),Rt(()=>{const o=i.value.querySelectorAll(`.${t.e("item")}`);o.length&&o[o.length-1].setAttribute("aria-current","page")}),(o,n)=>(A(),W("div",{ref_key:"breadcrumb",ref:i,class:k(f(t).b()),"aria-label":"Breadcrumb",role:"navigation"},[Oe(o.$slots,"default")],2))}});var oue=Xe(iue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const nue=Ye({to:{type:Te([String,Object]),default:""},replace:{type:Boolean,default:!1}}),sue=ne({name:"ElBreadcrumbItem"}),aue=ne({...sue,props:nue,setup(r){const e=r,t=It(),i=ot(YB,void 0),o=Pe("breadcrumb"),n=t.appContext.config.globalProperties.$router,s=V(),a=()=>{!e.to||!n||(e.replace?n.replace(e.to):n.push(e.to))};return(l,c)=>{var u,d;return A(),W("span",{class:k(f(o).e("item"))},[X("span",{ref_key:"link",ref:s,class:k([f(o).e("inner"),f(o).is("link",!!l.to)]),role:"link",onClick:a},[Oe(l.$slots,"default")],2),(u=f(i))!=null&&u.separatorIcon?(A(),_e(f(st),{key:0,class:k(f(o).e("separator"))},{default:se(()=>[(A(),_e(Ht(f(i).separatorIcon)))]),_:1},8,["class"])):(A(),W("span",{key:1,class:k(f(o).e("separator")),role:"presentation"},ze((d=f(i))==null?void 0:d.separator),3))],2)}}});var JB=Xe(aue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const lue=Bt(oue,{BreadcrumbItem:JB}),cue=ii(JB),ZB=Symbol("buttonGroupContextKey"),uue=(r,e)=>{ga({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},N(()=>r.type==="text"));const t=ot(ZB,void 0),i=rb("button"),{form:o}=Jo(),n=Ci(N(()=>t==null?void 0:t.size)),s=bn(),a=V(),l=yo(),c=N(()=>r.type||(t==null?void 0:t.type)||""),u=N(()=>{var p,m,g;return(g=(m=r.autoInsertSpace)!=null?m:(p=i.value)==null?void 0:p.autoInsertSpace)!=null?g:!1}),d=N(()=>r.tag==="button"?{ariaDisabled:s.value||r.loading,disabled:s.value||r.loading,autofocus:r.autofocus,type:r.nativeType}:{}),h=N(()=>{var p;const m=(p=l.default)==null?void 0:p.call(l);if(u.value&&(m==null?void 0:m.length)===1){const g=m[0];if((g==null?void 0:g.type)===xh){const v=g.children;return/^\p{Unified_Ideograph}{2}$/u.test(v.trim())}}return!1});return{_disabled:s,_size:n,_type:c,_ref:a,_props:d,shouldAddSpace:h,handleClick:p=>{r.nativeType==="reset"&&(o==null||o.resetFields()),e("click",p)}}},WM=["default","primary","success","warning","info","danger","text",""],due=["button","submit","reset"],qM=Ye({size:bo,disabled:Boolean,type:{type:String,values:WM,default:""},icon:{type:Lr},nativeType:{type:String,values:due,default:"button"},loading:Boolean,loadingIcon:{type:Lr,default:()=>rc},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Te([String,Object]),default:"button"}}),hue={click:r=>r instanceof MouseEvent};function xo(r,e){pue(r)&&(r="100%");var t=fue(r);return r=e===360?r:Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(String(r*e),10)/100),Math.abs(r-e)<1e-6?1:(e===360?r=(r<0?r%e+e:r%e)/parseFloat(String(e)):r=r%e/parseFloat(String(e)),r)}function pb(r){return Math.min(1,Math.max(0,r))}function pue(r){return typeof r=="string"&&r.indexOf(".")!==-1&&parseFloat(r)===1}function fue(r){return typeof r=="string"&&r.indexOf("%")!==-1}function QB(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function fb(r){return r<=1?"".concat(Number(r)*100,"%"):r}function Ru(r){return r.length===1?"0"+r:String(r)}function mue(r,e,t){return{r:xo(r,255)*255,g:xo(e,255)*255,b:xo(t,255)*255}}function eF(r,e,t){r=xo(r,255),e=xo(e,255),t=xo(t,255);var i=Math.max(r,e,t),o=Math.min(r,e,t),n=0,s=0,a=(i+o)/2;if(i===o)s=0,n=0;else{var l=i-o;switch(s=a>.5?l/(2-i-o):l/(i+o),i){case r:n=(e-t)/l+(e<t?6:0);break;case e:n=(t-r)/l+2;break;case t:n=(r-e)/l+4;break}n/=6}return{h:n,s,l:a}}function XM(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*(6*t):t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function gue(r,e,t){var i,o,n;if(r=xo(r,360),e=xo(e,100),t=xo(t,100),e===0)o=t,n=t,i=t;else{var s=t<.5?t*(1+e):t+e-t*e,a=2*t-s;i=XM(a,s,r+1/3),o=XM(a,s,r),n=XM(a,s,r-1/3)}return{r:i*255,g:o*255,b:n*255}}function tF(r,e,t){r=xo(r,255),e=xo(e,255),t=xo(t,255);var i=Math.max(r,e,t),o=Math.min(r,e,t),n=0,s=i,a=i-o,l=i===0?0:a/i;if(i===o)n=0;else{switch(i){case r:n=(e-t)/a+(e<t?6:0);break;case e:n=(t-r)/a+2;break;case t:n=(r-e)/a+4;break}n/=6}return{h:n,s:l,v:s}}function vue(r,e,t){r=xo(r,360)*6,e=xo(e,100),t=xo(t,100);var i=Math.floor(r),o=r-i,n=t*(1-e),s=t*(1-o*e),a=t*(1-(1-o)*e),l=i%6,c=[t,s,n,n,a,t][l],u=[a,t,t,s,n,n][l],d=[n,n,a,t,t,s][l];return{r:c*255,g:u*255,b:d*255}}function rF(r,e,t,i){var o=[Ru(Math.round(r).toString(16)),Ru(Math.round(e).toString(16)),Ru(Math.round(t).toString(16))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function yue(r,e,t,i,o){var n=[Ru(Math.round(r).toString(16)),Ru(Math.round(e).toString(16)),Ru(Math.round(t).toString(16)),Ru(bue(i))];return o&&n[0].startsWith(n[0].charAt(1))&&n[1].startsWith(n[1].charAt(1))&&n[2].startsWith(n[2].charAt(1))&&n[3].startsWith(n[3].charAt(1))?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0):n.join("")}function bue(r){return Math.round(parseFloat(r)*255).toString(16)}function iF(r){return Wn(r)/255}function Wn(r){return parseInt(r,16)}function xue(r){return{r:r>>16,g:(r&65280)>>8,b:r&255}}var KM={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function _ue(r){var e={r:0,g:0,b:0},t=1,i=null,o=null,n=null,s=!1,a=!1;return typeof r=="string"&&(r=Mue(r)),typeof r=="object"&&(al(r.r)&&al(r.g)&&al(r.b)?(e=mue(r.r,r.g,r.b),s=!0,a=String(r.r).substr(-1)==="%"?"prgb":"rgb"):al(r.h)&&al(r.s)&&al(r.v)?(i=fb(r.s),o=fb(r.v),e=vue(r.h,i,o),s=!0,a="hsv"):al(r.h)&&al(r.s)&&al(r.l)&&(i=fb(r.s),n=fb(r.l),e=gue(r.h,i,n),s=!0,a="hsl"),Object.prototype.hasOwnProperty.call(r,"a")&&(t=r.a)),t=QB(t),{ok:s,format:r.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var wue="[-\\+]?\\d+%?",Sue="[-\\+]?\\d*\\.\\d+%?",uc="(?:".concat(Sue,")|(?:").concat(wue,")"),YM="[\\s|\\(]+(".concat(uc,")[,|\\s]+(").concat(uc,")[,|\\s]+(").concat(uc,")\\s*\\)?"),JM="[\\s|\\(]+(".concat(uc,")[,|\\s]+(").concat(uc,")[,|\\s]+(").concat(uc,")[,|\\s]+(").concat(uc,")\\s*\\)?"),$s={CSS_UNIT:new RegExp(uc),rgb:new RegExp("rgb"+YM),rgba:new RegExp("rgba"+JM),hsl:new RegExp("hsl"+YM),hsla:new RegExp("hsla"+JM),hsv:new RegExp("hsv"+YM),hsva:new RegExp("hsva"+JM),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Mue(r){if(r=r.trim().toLowerCase(),r.length===0)return!1;var e=!1;if(KM[r])r=KM[r],e=!0;else if(r==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=$s.rgb.exec(r);return t?{r:t[1],g:t[2],b:t[3]}:(t=$s.rgba.exec(r),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=$s.hsl.exec(r),t?{h:t[1],s:t[2],l:t[3]}:(t=$s.hsla.exec(r),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=$s.hsv.exec(r),t?{h:t[1],s:t[2],v:t[3]}:(t=$s.hsva.exec(r),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=$s.hex8.exec(r),t?{r:Wn(t[1]),g:Wn(t[2]),b:Wn(t[3]),a:iF(t[4]),format:e?"name":"hex8"}:(t=$s.hex6.exec(r),t?{r:Wn(t[1]),g:Wn(t[2]),b:Wn(t[3]),format:e?"name":"hex"}:(t=$s.hex4.exec(r),t?{r:Wn(t[1]+t[1]),g:Wn(t[2]+t[2]),b:Wn(t[3]+t[3]),a:iF(t[4]+t[4]),format:e?"name":"hex8"}:(t=$s.hex3.exec(r),t?{r:Wn(t[1]+t[1]),g:Wn(t[2]+t[2]),b:Wn(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function al(r){return!!$s.CSS_UNIT.exec(String(r))}var oF=function(){function r(e,t){e===void 0&&(e=""),t===void 0&&(t={});var i;if(e instanceof r)return e;typeof e=="number"&&(e=xue(e)),this.originalInput=e;var o=_ue(e);this.originalInput=e,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=t.format)!==null&&i!==void 0?i:o.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return r.prototype.isDark=function(){return this.getBrightness()<128},r.prototype.isLight=function(){return!this.isDark()},r.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},r.prototype.getLuminance=function(){var e=this.toRgb(),t,i,o,n=e.r/255,s=e.g/255,a=e.b/255;return n<=.03928?t=n/12.92:t=Math.pow((n+.055)/1.055,2.4),s<=.03928?i=s/12.92:i=Math.pow((s+.055)/1.055,2.4),a<=.03928?o=a/12.92:o=Math.pow((a+.055)/1.055,2.4),.2126*t+.7152*i+.0722*o},r.prototype.getAlpha=function(){return this.a},r.prototype.setAlpha=function(e){return this.a=QB(e),this.roundA=Math.round(100*this.a)/100,this},r.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},r.prototype.toHsv=function(){var e=tF(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},r.prototype.toHsvString=function(){var e=tF(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(i,"%, ").concat(o,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(o,"%, ").concat(this.roundA,")")},r.prototype.toHsl=function(){var e=eF(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},r.prototype.toHslString=function(){var e=eF(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(i,"%, ").concat(o,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(o,"%, ").concat(this.roundA,")")},r.prototype.toHex=function(e){return e===void 0&&(e=!1),rF(this.r,this.g,this.b,e)},r.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},r.prototype.toHex8=function(e){return e===void 0&&(e=!1),yue(this.r,this.g,this.b,this.a,e)},r.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},r.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},r.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},r.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},r.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(xo(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},r.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(xo(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},r.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+rF(this.r,this.g,this.b,!1),t=0,i=Object.entries(KM);t<i.length;t++){var o=i[t],n=o[0],s=o[1];if(e===s)return n}return!1},r.prototype.toString=function(e){var t=!!e;e=e??this.format;var i=!1,o=this.a<1&&this.a>=0,n=!t&&o&&(e.startsWith("hex")||e==="name");return n?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},r.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},r.prototype.clone=function(){return new r(this.toString())},r.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=pb(t.l),new r(t)},r.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new r(t)},r.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=pb(t.l),new r(t)},r.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},r.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},r.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=pb(t.s),new r(t)},r.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=pb(t.s),new r(t)},r.prototype.greyscale=function(){return this.desaturate(100)},r.prototype.spin=function(e){var t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new r(t)},r.prototype.mix=function(e,t){t===void 0&&(t=50);var i=this.toRgb(),o=new r(e).toRgb(),n=t/100,s={r:(o.r-i.r)*n+i.r,g:(o.g-i.g)*n+i.g,b:(o.b-i.b)*n+i.b,a:(o.a-i.a)*n+i.a};return new r(s)},r.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var i=this.toHsl(),o=360/t,n=[this];for(i.h=(i.h-(o*e>>1)+720)%360;--e;)i.h=(i.h+o)%360,n.push(new r(i));return n},r.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new r(e)},r.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),i=t.h,o=t.s,n=t.v,s=[],a=1/e;e--;)s.push(new r({h:i,s:o,v:n})),n=(n+a)%1;return s},r.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new r({h:(t+72)%360,s:e.s,l:e.l}),new r({h:(t+216)%360,s:e.s,l:e.l})]},r.prototype.onBackground=function(e){var t=this.toRgb(),i=new r(e).toRgb(),o=t.a+i.a*(1-t.a);return new r({r:(t.r*t.a+i.r*i.a*(1-t.a))/o,g:(t.g*t.a+i.g*i.a*(1-t.a))/o,b:(t.b*t.a+i.b*i.a*(1-t.a))/o,a:o})},r.prototype.triad=function(){return this.polyad(3)},r.prototype.tetrad=function(){return this.polyad(4)},r.prototype.polyad=function(e){for(var t=this.toHsl(),i=t.h,o=[this],n=360/e,s=1;s<e;s++)o.push(new r({h:(i+s*n)%360,s:t.s,l:t.l}));return o},r.prototype.equals=function(e){return this.toRgbString()===new r(e).toRgbString()},r}();function dc(r,e=20){return r.mix("#141414",e).toString()}function Tue(r){const e=bn(),t=Pe("button");return N(()=>{let i={};const o=r.color;if(o){const n=new oF(o),s=r.dark?n.tint(20).toString():dc(n,20);if(r.plain)i=t.cssVarBlock({"bg-color":r.dark?dc(n,90):n.tint(90).toString(),"text-color":o,"border-color":r.dark?dc(n,50):n.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":o,"hover-border-color":o,"active-bg-color":s,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":s}),e.value&&(i[t.cssVarBlockName("disabled-bg-color")]=r.dark?dc(n,90):n.tint(90).toString(),i[t.cssVarBlockName("disabled-text-color")]=r.dark?dc(n,50):n.tint(50).toString(),i[t.cssVarBlockName("disabled-border-color")]=r.dark?dc(n,80):n.tint(80).toString());else{const a=r.dark?dc(n,30):n.tint(30).toString(),l=n.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(i=t.cssVarBlock({"bg-color":o,"text-color":l,"border-color":o,"hover-bg-color":a,"hover-text-color":l,"hover-border-color":a,"active-bg-color":s,"active-border-color":s}),e.value){const c=r.dark?dc(n,50):n.tint(50).toString();i[t.cssVarBlockName("disabled-bg-color")]=c,i[t.cssVarBlockName("disabled-text-color")]=r.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,i[t.cssVarBlockName("disabled-border-color")]=c}}}return i})}const Eue=ne({name:"ElButton"}),Cue=ne({...Eue,props:qM,emits:hue,setup(r,{expose:e,emit:t}){const i=r,o=Tue(i),n=Pe("button"),{_ref:s,_size:a,_type:l,_disabled:c,_props:u,shouldAddSpace:d,handleClick:h}=uue(i,t);return e({ref:s,size:a,type:l,disabled:c,shouldAddSpace:d}),(p,m)=>(A(),_e(Ht(p.tag),$t({ref_key:"_ref",ref:s},f(u),{class:[f(n).b(),f(n).m(f(l)),f(n).m(f(a)),f(n).is("disabled",f(c)),f(n).is("loading",p.loading),f(n).is("plain",p.plain),f(n).is("round",p.round),f(n).is("circle",p.circle),f(n).is("text",p.text),f(n).is("link",p.link),f(n).is("has-bg",p.bg)],style:f(o),onClick:f(h)}),{default:se(()=>[p.loading?(A(),W(nt,{key:0},[p.$slots.loading?Oe(p.$slots,"loading",{key:0}):(A(),_e(f(st),{key:1,class:k(f(n).is("loading"))},{default:se(()=>[(A(),_e(Ht(p.loadingIcon)))]),_:1},8,["class"]))],64)):p.icon||p.$slots.icon?(A(),_e(f(st),{key:1},{default:se(()=>[p.icon?(A(),_e(Ht(p.icon),{key:0})):Oe(p.$slots,"icon",{key:1})]),_:3})):we("v-if",!0),p.$slots.default?(A(),W("span",{key:2,class:k({[f(n).em("text","expand")]:f(d)})},[Oe(p.$slots,"default")],2)):we("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Nue=Xe(Cue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const Aue={size:qM.size,type:qM.type},Rue=ne({name:"ElButtonGroup"}),Lue=ne({...Rue,props:Aue,setup(r){const e=r;Wt(ZB,ur({size:Yr(e,"size"),type:Yr(e,"type")}));const t=Pe("button");return(i,o)=>(A(),W("div",{class:k(`${f(t).b("group")}`)},[Oe(i.$slots,"default")],2))}});var nF=Xe(Lue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const _o=Bt(Nue,{ButtonGroup:nF}),sF=ii(nF);var ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _a(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var aF={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ll,function(){var t=1e3,i=6e4,o=36e5,n="millisecond",s="second",a="minute",l="hour",c="day",u="week",d="month",h="quarter",p="year",m="date",g="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(L){var P=["th","st","nd","rd"],U=L%100;return"["+L+(P[(U-20)%10]||P[U]||P[0])+"]"}},x=function(L,P,U){var G=String(L);return!G||G.length>=P?L:""+Array(P+1-G.length).join(U)+L},_={s:x,z:function(L){var P=-L.utcOffset(),U=Math.abs(P),G=Math.floor(U/60),R=U%60;return(P<=0?"+":"-")+x(G,2,"0")+":"+x(R,2,"0")},m:function L(P,U){if(P.date()<U.date())return-L(U,P);var G=12*(U.year()-P.year())+(U.month()-P.month()),R=P.clone().add(G,d),F=U-R<0,O=P.clone().add(G+(F?-1:1),d);return+(-(G+(U-R)/(F?R-O:O-R))||0)},a:function(L){return L<0?Math.ceil(L)||0:Math.floor(L)},p:function(L){return{M:d,y:p,w:u,d:c,D:m,h:l,m:a,s,ms:n,Q:h}[L]||String(L||"").toLowerCase().replace(/s$/,"")},u:function(L){return L===void 0}},S="en",w={};w[S]=b;var M=function(L){return L instanceof B},T=function L(P,U,G){var R;if(!P)return S;if(typeof P=="string"){var F=P.toLowerCase();w[F]&&(R=F),U&&(w[F]=U,R=F);var O=P.split("-");if(!R&&O.length>1)return L(O[0])}else{var H=P.name;w[H]=P,R=H}return!G&&R&&(S=R),R||!G&&S},E=function(L,P){if(M(L))return L.clone();var U=typeof P=="object"?P:{};return U.date=L,U.args=arguments,new B(U)},C=_;C.l=T,C.i=M,C.w=function(L,P){return E(L,{locale:P.$L,utc:P.$u,x:P.$x,$offset:P.$offset})};var B=function(){function L(U){this.$L=T(U.locale,null,!0),this.parse(U)}var P=L.prototype;return P.parse=function(U){this.$d=function(G){var R=G.date,F=G.utc;if(R===null)return new Date(NaN);if(C.u(R))return new Date;if(R instanceof Date)return new Date(R);if(typeof R=="string"&&!/Z$/i.test(R)){var O=R.match(v);if(O){var H=O[2]-1||0,$=(O[7]||"0").substring(0,3);return F?new Date(Date.UTC(O[1],H,O[3]||1,O[4]||0,O[5]||0,O[6]||0,$)):new Date(O[1],H,O[3]||1,O[4]||0,O[5]||0,O[6]||0,$)}}return new Date(R)}(U),this.$x=U.x||{},this.init()},P.init=function(){var U=this.$d;this.$y=U.getFullYear(),this.$M=U.getMonth(),this.$D=U.getDate(),this.$W=U.getDay(),this.$H=U.getHours(),this.$m=U.getMinutes(),this.$s=U.getSeconds(),this.$ms=U.getMilliseconds()},P.$utils=function(){return C},P.isValid=function(){return this.$d.toString()!==g},P.isSame=function(U,G){var R=E(U);return this.startOf(G)<=R&&R<=this.endOf(G)},P.isAfter=function(U,G){return E(U)<this.startOf(G)},P.isBefore=function(U,G){return this.endOf(G)<E(U)},P.$g=function(U,G,R){return C.u(U)?this[G]:this.set(R,U)},P.unix=function(){return Math.floor(this.valueOf()/1e3)},P.valueOf=function(){return this.$d.getTime()},P.startOf=function(U,G){var R=this,F=!!C.u(G)||G,O=C.p(U),H=function(Z,de){var Ce=C.w(R.$u?Date.UTC(R.$y,de,Z):new Date(R.$y,de,Z),R);return F?Ce:Ce.endOf(c)},$=function(Z,de){return C.w(R.toDate()[Z].apply(R.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(de)),R)},j=this.$W,J=this.$M,ce=this.$D,ve="set"+(this.$u?"UTC":"");switch(O){case p:return F?H(1,0):H(31,11);case d:return F?H(1,J):H(0,J+1);case u:var xe=this.$locale().weekStart||0,te=(j<xe?j+7:j)-xe;return H(F?ce-te:ce+(6-te),J);case c:case m:return $(ve+"Hours",0);case l:return $(ve+"Minutes",1);case a:return $(ve+"Seconds",2);case s:return $(ve+"Milliseconds",3);default:return this.clone()}},P.endOf=function(U){return this.startOf(U,!1)},P.$set=function(U,G){var R,F=C.p(U),O="set"+(this.$u?"UTC":""),H=(R={},R[c]=O+"Date",R[m]=O+"Date",R[d]=O+"Month",R[p]=O+"FullYear",R[l]=O+"Hours",R[a]=O+"Minutes",R[s]=O+"Seconds",R[n]=O+"Milliseconds",R)[F],$=F===c?this.$D+(G-this.$W):G;if(F===d||F===p){var j=this.clone().set(m,1);j.$d[H]($),j.init(),this.$d=j.set(m,Math.min(this.$D,j.daysInMonth())).$d}else H&&this.$d[H]($);return this.init(),this},P.set=function(U,G){return this.clone().$set(U,G)},P.get=function(U){return this[C.p(U)]()},P.add=function(U,G){var R,F=this;U=Number(U);var O=C.p(G),H=function(J){var ce=E(F);return C.w(ce.date(ce.date()+Math.round(J*U)),F)};if(O===d)return this.set(d,this.$M+U);if(O===p)return this.set(p,this.$y+U);if(O===c)return H(1);if(O===u)return H(7);var $=(R={},R[a]=i,R[l]=o,R[s]=t,R)[O]||1,j=this.$d.getTime()+U*$;return C.w(j,this)},P.subtract=function(U,G){return this.add(-1*U,G)},P.format=function(U){var G=this,R=this.$locale();if(!this.isValid())return R.invalidDate||g;var F=U||"YYYY-MM-DDTHH:mm:ssZ",O=C.z(this),H=this.$H,$=this.$m,j=this.$M,J=R.weekdays,ce=R.months,ve=R.meridiem,xe=function(de,Ce,ue,D){return de&&(de[Ce]||de(G,F))||ue[Ce].slice(0,D)},te=function(de){return C.s(H%12||12,de,"0")},Z=ve||function(de,Ce,ue){var D=de<12?"AM":"PM";return ue?D.toLowerCase():D};return F.replace(y,function(de,Ce){return Ce||function(ue){switch(ue){case"YY":return String(G.$y).slice(-2);case"YYYY":return C.s(G.$y,4,"0");case"M":return j+1;case"MM":return C.s(j+1,2,"0");case"MMM":return xe(R.monthsShort,j,ce,3);case"MMMM":return xe(ce,j);case"D":return G.$D;case"DD":return C.s(G.$D,2,"0");case"d":return String(G.$W);case"dd":return xe(R.weekdaysMin,G.$W,J,2);case"ddd":return xe(R.weekdaysShort,G.$W,J,3);case"dddd":return J[G.$W];case"H":return String(H);case"HH":return C.s(H,2,"0");case"h":return te(1);case"hh":return te(2);case"a":return Z(H,$,!0);case"A":return Z(H,$,!1);case"m":return String($);case"mm":return C.s($,2,"0");case"s":return String(G.$s);case"ss":return C.s(G.$s,2,"0");case"SSS":return C.s(G.$ms,3,"0");case"Z":return O}return null}(de)||O.replace(":","")})},P.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},P.diff=function(U,G,R){var F,O=this,H=C.p(G),$=E(U),j=($.utcOffset()-this.utcOffset())*i,J=this-$,ce=function(){return C.m(O,$)};switch(H){case p:F=ce()/12;break;case d:F=ce();break;case h:F=ce()/3;break;case u:F=(J-j)/6048e5;break;case c:F=(J-j)/864e5;break;case l:F=J/o;break;case a:F=J/i;break;case s:F=J/t;break;default:F=J}return R?F:C.a(F)},P.daysInMonth=function(){return this.endOf(d).$D},P.$locale=function(){return w[this.$L]},P.locale=function(U,G){if(!U)return this.$L;var R=this.clone(),F=T(U,G,!0);return F&&(R.$L=F),R},P.clone=function(){return C.w(this.$d,this)},P.toDate=function(){return new Date(this.valueOf())},P.toJSON=function(){return this.isValid()?this.toISOString():null},P.toISOString=function(){return this.$d.toISOString()},P.toString=function(){return this.$d.toUTCString()},L}(),I=B.prototype;return E.prototype=I,[["$ms",n],["$s",s],["$m",a],["$H",l],["$W",c],["$M",d],["$y",p],["$D",m]].forEach(function(L){I[L[1]]=function(P){return this.$g(P,L[0],L[1])}}),E.extend=function(L,P){return L.$i||(L(P,B,E),L.$i=!0),E},E.locale=T,E.isDayjs=M,E.unix=function(L){return E(1e3*L)},E.en=w[S],E.Ls=w,E.p={},E})})(aF);var Oue=aF.exports;const Pt=_a(Oue);var lF={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ll,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,o=/\d\d/,n=/\d\d?/,s=/\d*[^-_:/,()\s\d]+/,a={},l=function(g){return(g=+g)+(g>68?1900:2e3)},c=function(g){return function(v){this[g]=+v}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(g){(this.zone||(this.zone={})).offset=function(v){if(!v||v==="Z")return 0;var y=v.match(/([+-]|\d\d)/g),b=60*y[1]+(+y[2]||0);return b===0?0:y[0]==="+"?-b:b}(g)}],d=function(g){var v=a[g];return v&&(v.indexOf?v:v.s.concat(v.f))},h=function(g,v){var y,b=a.meridiem;if(b){for(var x=1;x<=24;x+=1)if(g.indexOf(b(x,0,v))>-1){y=x>12;break}}else y=g===(v?"pm":"PM");return y},p={A:[s,function(g){this.afternoon=h(g,!1)}],a:[s,function(g){this.afternoon=h(g,!0)}],S:[/\d/,function(g){this.milliseconds=100*+g}],SS:[o,function(g){this.milliseconds=10*+g}],SSS:[/\d{3}/,function(g){this.milliseconds=+g}],s:[n,c("seconds")],ss:[n,c("seconds")],m:[n,c("minutes")],mm:[n,c("minutes")],H:[n,c("hours")],h:[n,c("hours")],HH:[n,c("hours")],hh:[n,c("hours")],D:[n,c("day")],DD:[o,c("day")],Do:[s,function(g){var v=a.ordinal,y=g.match(/\d+/);if(this.day=y[0],v)for(var b=1;b<=31;b+=1)v(b).replace(/\[|\]/g,"")===g&&(this.day=b)}],M:[n,c("month")],MM:[o,c("month")],MMM:[s,function(g){var v=d("months"),y=(d("monthsShort")||v.map(function(b){return b.slice(0,3)})).indexOf(g)+1;if(y<1)throw new Error;this.month=y%12||y}],MMMM:[s,function(g){var v=d("months").indexOf(g)+1;if(v<1)throw new Error;this.month=v%12||v}],Y:[/[+-]?\d+/,c("year")],YY:[o,function(g){this.year=l(g)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function m(g){var v,y;v=g,y=a&&a.formats;for(var b=(g=v.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(E,C,B){var I=B&&B.toUpperCase();return C||y[B]||t[B]||y[I].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(L,P,U){return P||U.slice(1)})})).match(i),x=b.length,_=0;_<x;_+=1){var S=b[_],w=p[S],M=w&&w[0],T=w&&w[1];b[_]=T?{regex:M,parser:T}:S.replace(/^\[|\]$/g,"")}return function(E){for(var C={},B=0,I=0;B<x;B+=1){var L=b[B];if(typeof L=="string")I+=L.length;else{var P=L.regex,U=L.parser,G=E.slice(I),R=P.exec(G)[0];U.call(C,R),E=E.replace(R,"")}}return function(F){var O=F.afternoon;if(O!==void 0){var H=F.hours;O?H<12&&(F.hours+=12):H===12&&(F.hours=0),delete F.afternoon}}(C),C}}return function(g,v,y){y.p.customParseFormat=!0,g&&g.parseTwoDigitYear&&(l=g.parseTwoDigitYear);var b=v.prototype,x=b.parse;b.parse=function(_){var S=_.date,w=_.utc,M=_.args;this.$u=w;var T=M[1];if(typeof T=="string"){var E=M[2]===!0,C=M[3]===!0,B=E||C,I=M[2];C&&(I=M[2]),a=this.$locale(),!E&&I&&(a=y.Ls[I]),this.$d=function(G,R,F){try{if(["x","X"].indexOf(R)>-1)return new Date((R==="X"?1e3:1)*G);var O=m(R)(G),H=O.year,$=O.month,j=O.day,J=O.hours,ce=O.minutes,ve=O.seconds,xe=O.milliseconds,te=O.zone,Z=new Date,de=j||(H||$?1:Z.getDate()),Ce=H||Z.getFullYear(),ue=0;H&&!$||(ue=$>0?$-1:Z.getMonth());var D=J||0,K=ce||0,re=ve||0,ae=xe||0;return te?new Date(Date.UTC(Ce,ue,de,D,K,re,ae+60*te.offset*1e3)):F?new Date(Date.UTC(Ce,ue,de,D,K,re,ae)):new Date(Ce,ue,de,D,K,re,ae)}catch{return new Date("")}}(S,T,w),this.init(),I&&I!==!0&&(this.$L=this.locale(I).$L),B&&S!=this.format(T)&&(this.$d=new Date("")),a={}}else if(T instanceof Array)for(var L=T.length,P=1;P<=L;P+=1){M[1]=T[P-1];var U=y.apply(this,M);if(U.isValid()){this.$d=U.$d,this.$L=U.$L,this.init();break}P===L&&(this.$d=new Date(""))}else x.call(this,_)}}})})(lF);var kue=lF.exports;const ZM=_a(kue),cF=["hours","minutes","seconds"],QM="HH:mm:ss",Yh="YYYY-MM-DD",Iue={date:Yh,dates:Yh,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${Yh} ${QM}`,monthrange:"YYYY-MM",daterange:Yh,datetimerange:`${Yh} ${QM}`},eT=(r,e)=>[r>0?r-1:void 0,r,r<e?r+1:void 0],hc=r=>Array.from(Array.from({length:r}).keys()),uF=r=>r.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),dF=r=>r.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),hF=function(r,e){const t=ou(r),i=ou(e);return t&&i?r.getTime()===e.getTime():!t&&!i?r===e:!1},pF=function(r,e){const t=it(r),i=it(e);return t&&i?r.length!==e.length?!1:r.every((o,n)=>hF(o,e[n])):!t&&!i?hF(r,e):!1},fF=function(r,e,t){const i=ps(e)||e==="x"?Pt(r).locale(t):Pt(r,e).locale(t);return i.isValid()?i:void 0},mF=function(r,e,t){return ps(e)?r:e==="x"?+r:Pt(r).locale(t).format(e)},tT=(r,e)=>{var t;const i=[],o=e==null?void 0:e();for(let n=0;n<r;n++)i.push((t=o==null?void 0:o.includes(n))!=null?t:!1);return i},gF=Ye({disabledHours:{type:Te(Function)},disabledMinutes:{type:Te(Function)},disabledSeconds:{type:Te(Function)}}),vF=Ye({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),rT=Ye({id:{type:Te([Array,String])},name:{type:Te([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:Te([String,Object]),default:tc},editable:{type:Boolean,default:!0},prefixIcon:{type:Te([String,Object]),default:""},size:bo,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:Te(Object),default:()=>({})},modelValue:{type:Te([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:Te([Date,Array])},defaultTime:{type:Te([Date,Array])},isRange:{type:Boolean,default:!1},...gF,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},label:{type:String,default:void 0},tabindex:{type:Te([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean}),Pue=["id","name","placeholder","value","disabled","readonly"],Due=["id","name","placeholder","value","disabled","readonly"],Bue=ne({name:"Picker"}),Fue=ne({...Bue,props:rT,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change","visible-change","keydown"],setup(r,{expose:e,emit:t}){const i=r,o=du(),{lang:n}=ir(),s=Pe("date"),a=Pe("input"),l=Pe("range"),{form:c,formItem:u}=Jo(),d=ot("ElPopperOptions",{}),h=V(),p=V(),m=V(!1),g=V(!1),v=V(null);let y=!1,b=!1;const x=N(()=>[s.b("editor"),s.bm("editor",i.type),a.e("wrapper"),s.is("disabled",j.value),s.is("active",m.value),l.b("editor"),Se?l.bm("editor",Se.value):"",o.class]),_=N(()=>[a.e("icon"),l.e("close-icon"),de.value?"":l.e("close-icon--hidden")]);ke(m,ie=>{ie?lt(()=>{ie&&(v.value=i.modelValue)}):(Me.value=null,lt(()=>{S(i.modelValue)}))});const S=(ie,De)=>{(De||!pF(ie,v.value))&&(t("change",ie),i.validateEvent&&(u==null||u.validate("change").catch(et=>{})))},w=ie=>{if(!pF(i.modelValue,ie)){let De;it(ie)?De=ie.map(et=>mF(et,i.valueFormat,n.value)):ie&&(De=mF(ie,i.valueFormat,n.value)),t("update:modelValue",ie&&De,n.value)}},M=ie=>{t("keydown",ie)},T=N(()=>{if(p.value){const ie=le.value?p.value:p.value.$el;return Array.from(ie.querySelectorAll("input"))}return[]}),E=(ie,De,et)=>{const ht=T.value;ht.length&&(!et||et==="min"?(ht[0].setSelectionRange(ie,De),ht[0].focus()):et==="max"&&(ht[1].setSelectionRange(ie,De),ht[1].focus()))},C=()=>{F(!0,!0),lt(()=>{b=!1})},B=(ie="",De=!1)=>{De||(b=!0),m.value=De;let et;it(ie)?et=ie.map(ht=>ht.toDate()):et=ie&&ie.toDate(),Me.value=null,w(et)},I=()=>{g.value=!0},L=()=>{t("visible-change",!0)},P=ie=>{(ie==null?void 0:ie.key)===ft.esc&&F(!0,!0)},U=()=>{g.value=!1,m.value=!1,b=!1,t("visible-change",!1)},G=()=>{m.value=!0},R=()=>{m.value=!1},F=(ie=!0,De=!1)=>{b=De;const[et,ht]=f(T);let be=et;!ie&&le.value&&(be=ht),be&&be.focus()},O=ie=>{i.readonly||j.value||m.value||b||(m.value=!0,t("focus",ie))};let H;const $=ie=>{const De=async()=>{setTimeout(()=>{var et;H===De&&(!((et=h.value)!=null&&et.isFocusInsideContent()&&!y)&&T.value.filter(ht=>ht.contains(document.activeElement)).length===0&&(Le(),m.value=!1,t("blur",ie),i.validateEvent&&(u==null||u.validate("blur").catch(ht=>{}))),y=!1)},0)};H=De,De()},j=N(()=>i.disabled||(c==null?void 0:c.disabled)),J=N(()=>{let ie;if(ue.value?ye.value.getDefaultValue&&(ie=ye.value.getDefaultValue()):it(i.modelValue)?ie=i.modelValue.map(De=>fF(De,i.valueFormat,n.value)):ie=fF(i.modelValue,i.valueFormat,n.value),ye.value.getRangeAvailableTime){const De=ye.value.getRangeAvailableTime(ie);mn(De,ie)||(ie=De,w(it(ie)?ie.map(et=>et.toDate()):ie.toDate()))}return it(ie)&&ie.some(De=>!De)&&(ie=[]),ie}),ce=N(()=>{if(!ye.value.panelReady)return"";const ie=Y(J.value);return it(Me.value)?[Me.value[0]||ie&&ie[0]||"",Me.value[1]||ie&&ie[1]||""]:Me.value!==null?Me.value:!xe.value&&ue.value||!m.value&&ue.value?"":ie?te.value?ie.join(", "):ie:""}),ve=N(()=>i.type.includes("time")),xe=N(()=>i.type.startsWith("time")),te=N(()=>i.type==="dates"),Z=N(()=>i.prefixIcon||(ve.value?oD:Nee)),de=V(!1),Ce=ie=>{i.readonly||j.value||de.value&&(ie.stopPropagation(),C(),w(null),S(null,!0),de.value=!1,m.value=!1,ye.value.handleClear&&ye.value.handleClear())},ue=N(()=>{const{modelValue:ie}=i;return!ie||it(ie)&&!ie.filter(Boolean).length}),D=async ie=>{var De;i.readonly||j.value||(((De=ie.target)==null?void 0:De.tagName)!=="INPUT"||T.value.includes(document.activeElement))&&(m.value=!0)},K=()=>{i.readonly||j.value||!ue.value&&i.clearable&&(de.value=!0)},re=()=>{de.value=!1},ae=ie=>{var De;i.readonly||j.value||(((De=ie.touches[0].target)==null?void 0:De.tagName)!=="INPUT"||T.value.includes(document.activeElement))&&(m.value=!0)},le=N(()=>i.type.includes("range")),Se=Ci(),Ae=N(()=>{var ie,De;return(De=(ie=f(h))==null?void 0:ie.popperRef)==null?void 0:De.contentRef}),Ne=N(()=>{var ie;return f(le)?f(p):(ie=f(p))==null?void 0:ie.$el});LS(Ne,ie=>{const De=f(Ae),et=f(Ne);De&&(ie.target===De||ie.composedPath().includes(De))||ie.target===et||ie.composedPath().includes(et)||(m.value=!1)});const Me=V(null),Le=()=>{if(Me.value){const ie=je(ce.value);ie&&z(ie)&&(w(it(ie)?ie.map(De=>De.toDate()):ie.toDate()),Me.value=null)}Me.value===""&&(w(null),S(null),Me.value=null)},je=ie=>ie?ye.value.parseUserInput(ie):null,Y=ie=>ie?ye.value.formatToString(ie):null,z=ie=>ye.value.isValidValue(ie),me=async ie=>{if(i.readonly||j.value)return;const{code:De}=ie;if(M(ie),De===ft.esc){m.value===!0&&(m.value=!1,ie.preventDefault(),ie.stopPropagation());return}if(De===ft.down&&(ye.value.handleFocusPicker&&(ie.preventDefault(),ie.stopPropagation()),m.value===!1&&(m.value=!0,await lt()),ye.value.handleFocusPicker)){ye.value.handleFocusPicker();return}if(De===ft.tab){y=!0;return}if(De===ft.enter||De===ft.numpadEnter){(Me.value===null||Me.value===""||z(je(ce.value)))&&(Le(),m.value=!1),ie.stopPropagation();return}if(Me.value){ie.stopPropagation();return}ye.value.handleKeydownInput&&ye.value.handleKeydownInput(ie)},Ie=ie=>{Me.value=ie,m.value||(m.value=!0)},Ue=ie=>{const De=ie.target;Me.value?Me.value=[De.value,Me.value[1]]:Me.value=[De.value,null]},Re=ie=>{const De=ie.target;Me.value?Me.value=[Me.value[0],De.value]:Me.value=[null,De.value]},$e=()=>{var ie;const De=Me.value,et=je(De&&De[0]),ht=f(J);if(et&&et.isValid()){Me.value=[Y(et),((ie=ce.value)==null?void 0:ie[1])||null];const be=[et,ht&&(ht[1]||null)];z(be)&&(w(be),Me.value=null)}},Ve=()=>{var ie;const De=f(Me),et=je(De&&De[1]),ht=f(J);if(et&&et.isValid()){Me.value=[((ie=f(ce))==null?void 0:ie[0])||null,Y(et)];const be=[ht&&ht[0],et];z(be)&&(w(be),Me.value=null)}},ye=V({}),q=ie=>{ye.value[ie[0]]=ie[1],ye.value.panelReady=!0},oe=ie=>{t("calendar-change",ie)},fe=(ie,De,et)=>{t("panel-change",ie,De,et)};return Wt("EP_PICKER_BASE",{props:i}),e({focus:F,handleFocusInput:O,handleBlurInput:$,handleOpen:G,handleClose:R,onPick:B}),(ie,De)=>(A(),_e(f(Zo),$t({ref_key:"refPopper",ref:h,visible:m.value,effect:"light",pure:"",trigger:"click"},ie.$attrs,{role:"dialog",teleported:"",transition:`${f(s).namespace.value}-zoom-in-top`,"popper-class":[`${f(s).namespace.value}-picker__popper`,ie.popperClass],"popper-options":f(d),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:I,onShow:L,onHide:U}),{default:se(()=>[f(le)?(A(),W("div",{key:1,ref_key:"inputRef",ref:p,class:k(f(x)),style:ct(ie.$attrs.style),onClick:O,onMouseenter:K,onMouseleave:re,onTouchstart:ae,onKeydown:me},[f(Z)?(A(),_e(f(st),{key:0,class:k([f(a).e("icon"),f(l).e("icon")]),onMousedown:vt(D,["prevent"]),onTouchstart:ae},{default:se(()=>[(A(),_e(Ht(f(Z))))]),_:1},8,["class","onMousedown"])):we("v-if",!0),X("input",{id:ie.id&&ie.id[0],autocomplete:"off",name:ie.name&&ie.name[0],placeholder:ie.startPlaceholder,value:f(ce)&&f(ce)[0],disabled:f(j),readonly:!ie.editable||ie.readonly,class:k(f(l).b("input")),onMousedown:D,onInput:Ue,onChange:$e,onFocus:O,onBlur:$},null,42,Pue),Oe(ie.$slots,"range-separator",{},()=>[X("span",{class:k(f(l).b("separator"))},ze(ie.rangeSeparator),3)]),X("input",{id:ie.id&&ie.id[1],autocomplete:"off",name:ie.name&&ie.name[1],placeholder:ie.endPlaceholder,value:f(ce)&&f(ce)[1],disabled:f(j),readonly:!ie.editable||ie.readonly,class:k(f(l).b("input")),onMousedown:D,onFocus:O,onBlur:$,onInput:Re,onChange:Ve},null,42,Due),ie.clearIcon?(A(),_e(f(st),{key:1,class:k(f(_)),onClick:Ce},{default:se(()=>[(A(),_e(Ht(ie.clearIcon)))]),_:1},8,["class"])):we("v-if",!0)],38)):(A(),_e(f(Io),{key:0,id:ie.id,ref_key:"inputRef",ref:p,"container-role":"combobox","model-value":f(ce),name:ie.name,size:f(Se),disabled:f(j),placeholder:ie.placeholder,class:k([f(s).b("editor"),f(s).bm("editor",ie.type),ie.$attrs.class]),style:ct(ie.$attrs.style),readonly:!ie.editable||ie.readonly||f(te)||ie.type==="week",label:ie.label,tabindex:ie.tabindex,"validate-event":!1,onInput:Ie,onFocus:O,onBlur:$,onKeydown:me,onChange:Le,onMousedown:D,onMouseenter:K,onMouseleave:re,onTouchstart:ae,onClick:De[0]||(De[0]=vt(()=>{},["stop"]))},{prefix:se(()=>[f(Z)?(A(),_e(f(st),{key:0,class:k(f(a).e("icon")),onMousedown:vt(D,["prevent"]),onTouchstart:ae},{default:se(()=>[(A(),_e(Ht(f(Z))))]),_:1},8,["class","onMousedown"])):we("v-if",!0)]),suffix:se(()=>[de.value&&ie.clearIcon?(A(),_e(f(st),{key:0,class:k(`${f(a).e("icon")} clear-icon`),onClick:vt(Ce,["stop"])},{default:se(()=>[(A(),_e(Ht(ie.clearIcon)))]),_:1},8,["class","onClick"])):we("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","label","tabindex","onKeydown"]))]),content:se(()=>[Oe(ie.$slots,"default",{visible:m.value,actualVisible:g.value,parsedValue:f(J),format:ie.format,unlinkPanels:ie.unlinkPanels,type:ie.type,defaultValue:ie.defaultValue,onPick:B,onSelectRange:E,onSetPickerOption:q,onCalendarChange:oe,onPanelChange:fe,onKeydown:P,onMousedown:De[1]||(De[1]=vt(()=>{},["stop"]))})]),_:3},16,["visible","transition","popper-class","popper-options"]))}});var yF=Xe(Fue,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/common/picker.vue"]]);const Uue=Ye({...vF,datetimeRole:String,parsedValue:{type:Te(Object)}}),bF=({getAvailableHours:r,getAvailableMinutes:e,getAvailableSeconds:t})=>{const i=(n,s,a,l)=>{const c={hour:r,minute:e,second:t};let u=n;return["hour","minute","second"].forEach(d=>{if(c[d]){let h;const p=c[d];switch(d){case"minute":{h=p(u.hour(),s,l);break}case"second":{h=p(u.hour(),u.minute(),s,l);break}default:{h=p(s,l);break}}if(h!=null&&h.length&&!h.includes(u[d]())){const m=a?0:h.length-1;u=u[d](h[m])}}}),u},o={};return{timePickerOptions:o,getAvailableTime:i,onSetOption:([n,s])=>{o[n]=s}}},iT=r=>{const e=(i,o)=>i||o,t=i=>i!==!0;return r.map(e).filter(t)},xF=(r,e,t)=>({getHoursList:(i,o)=>tT(24,r&&(()=>r==null?void 0:r(i,o))),getMinutesList:(i,o,n)=>tT(60,e&&(()=>e==null?void 0:e(i,o,n))),getSecondsList:(i,o,n,s)=>tT(60,t&&(()=>t==null?void 0:t(i,o,n,s)))}),_F=(r,e,t)=>{const{getHoursList:i,getMinutesList:o,getSecondsList:n}=xF(r,e,t);return{getAvailableHours:(s,a)=>iT(i(s,a)),getAvailableMinutes:(s,a,l)=>iT(o(s,a,l)),getAvailableSeconds:(s,a,l,c)=>iT(n(s,a,l,c))}},wF=r=>{const e=V(r.parsedValue);return ke(()=>r.visible,t=>{t||(e.value=r.parsedValue)}),e},pc=new Map;let SF;Jt&&(document.addEventListener("mousedown",r=>SF=r),document.addEventListener("mouseup",r=>{for(const e of pc.values())for(const{documentHandler:t}of e)t(r,SF)}));function MF(r,e){let t=[];return Array.isArray(e.arg)?t=e.arg:fs(e.arg)&&t.push(e.arg),function(i,o){const n=e.instance.popperRef,s=i.target,a=o==null?void 0:o.target,l=!e||!e.instance,c=!s||!a,u=r.contains(s)||r.contains(a),d=r===s,h=t.length&&t.some(m=>m==null?void 0:m.contains(s))||t.length&&t.includes(a),p=n&&(n.contains(s)||n.contains(a));l||c||u||d||h||p||e.value(i,o)}}const fc={beforeMount(r,e){pc.has(r)||pc.set(r,[]),pc.get(r).push({documentHandler:MF(r,e),bindingFn:e.value})},updated(r,e){pc.has(r)||pc.set(r,[]);const t=pc.get(r),i=t.findIndex(n=>n.bindingFn===e.oldValue),o={documentHandler:MF(r,e),bindingFn:e.value};i>=0?t.splice(i,1,o):t.push(o)},unmounted(r){pc.delete(r)}},zue=100,Vue=600,mb={beforeMount(r,e){const t=e.value,{interval:i=zue,delay:o=Vue}=St(t)?{}:t;let n,s;const a=()=>St(t)?t():t.handler(),l=()=>{s&&(clearTimeout(s),s=void 0),n&&(clearInterval(n),n=void 0)};r.addEventListener("mousedown",c=>{c.button===0&&(l(),a(),document.addEventListener("mouseup",()=>l(),{once:!0}),s=setTimeout(()=>{n=setInterval(()=>{a()},i)},o))})}},oT="_trap-focus-children",Lu=[],TF=r=>{if(Lu.length===0)return;const e=Lu[Lu.length-1][oT];if(e.length>0&&r.code===ft.tab){if(e.length===1){r.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const t=r.shiftKey,i=r.target===e[0],o=r.target===e[e.length-1];i&&t&&(r.preventDefault(),e[e.length-1].focus()),o&&!t&&(r.preventDefault(),e[0].focus())}},Gue={beforeMount(r){r[oT]=y3(r),Lu.push(r),Lu.length<=1&&document.addEventListener("keydown",TF)},updated(r){lt(()=>{r[oT]=y3(r)})},unmounted(){Lu.shift(),Lu.length===0&&document.removeEventListener("keydown",TF)}};var EF=!1,Ou,nT,sT,gb,vb,CF,yb,aT,lT,cT,NF,uT,dT,AF,RF;function xn(){if(!EF){EF=!0;var r=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(r),t=/(Mac OS X)|(Windows)|(Linux)/.exec(r);if(uT=/\b(iPhone|iP[ao]d)/.exec(r),dT=/\b(iP[ao]d)/.exec(r),cT=/Android/i.exec(r),AF=/FBAN\/\w+;/i.exec(r),RF=/Mobile/i.exec(r),NF=!!/Win64/.exec(r),e){Ou=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Ou&&document&&document.documentMode&&(Ou=document.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(r);CF=i?parseFloat(i[1])+4:Ou,nT=e[2]?parseFloat(e[2]):NaN,sT=e[3]?parseFloat(e[3]):NaN,gb=e[4]?parseFloat(e[4]):NaN,gb?(e=/(?:Chrome\/(\d+\.\d+))/.exec(r),vb=e&&e[1]?parseFloat(e[1]):NaN):vb=NaN}else Ou=nT=sT=vb=gb=NaN;if(t){if(t[1]){var o=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(r);yb=o?parseFloat(o[1].replace("_",".")):!0}else yb=!1;aT=!!t[2],lT=!!t[3]}else yb=aT=lT=!1}}var hT={ie:function(){return xn()||Ou},ieCompatibilityMode:function(){return xn()||CF>Ou},ie64:function(){return hT.ie()&&NF},firefox:function(){return xn()||nT},opera:function(){return xn()||sT},webkit:function(){return xn()||gb},safari:function(){return hT.webkit()},chrome:function(){return xn()||vb},windows:function(){return xn()||aT},osx:function(){return xn()||yb},linux:function(){return xn()||lT},iphone:function(){return xn()||uT},mobile:function(){return xn()||uT||dT||cT||RF},nativeApp:function(){return xn()||AF},android:function(){return xn()||cT},ipad:function(){return xn()||dT}},Hue=hT,bb=!!(typeof window<"u"&&window.document&&window.document.createElement),jue={canUseDOM:bb,canUseWorkers:typeof Worker<"u",canUseEventListeners:bb&&!!(window.addEventListener||window.attachEvent),canUseViewport:bb&&!!window.screen,isInWorker:!bb},LF=jue,OF;LF.canUseDOM&&(OF=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function $ue(r,e){if(!LF.canUseDOM||e&&!("addEventListener"in document))return!1;var t="on"+r,i=t in document;if(!i){var o=document.createElement("div");o.setAttribute(t,"return;"),i=typeof o[t]=="function"}return!i&&OF&&r==="wheel"&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var Wue=$ue,kF=10,IF=40,PF=800;function DF(r){var e=0,t=0,i=0,o=0;return"detail"in r&&(t=r.detail),"wheelDelta"in r&&(t=-r.wheelDelta/120),"wheelDeltaY"in r&&(t=-r.wheelDeltaY/120),"wheelDeltaX"in r&&(e=-r.wheelDeltaX/120),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(e=t,t=0),i=e*kF,o=t*kF,"deltaY"in r&&(o=r.deltaY),"deltaX"in r&&(i=r.deltaX),(i||o)&&r.deltaMode&&(r.deltaMode==1?(i*=IF,o*=IF):(i*=PF,o*=PF)),i&&!e&&(e=i<1?-1:1),o&&!t&&(t=o<1?-1:1),{spinX:e,spinY:t,pixelX:i,pixelY:o}}DF.getEventType=function(){return Hue.firefox()?"DOMMouseScroll":Wue("wheel")?"wheel":"mousewheel"};var que=DF;const Xue=function(r,e){if(r&&r.addEventListener){const t=function(i){const o=que(i);e&&Reflect.apply(e,this,[i,o])};r.addEventListener("wheel",t,{passive:!0})}},Kue={beforeMount(r,e){Xue(r,e.value)}},Yue=Ye({role:{type:String,required:!0},spinnerDate:{type:Te(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:Te(String),default:""},...gF}),Jue=["onClick"],Zue=["onMouseenter"],Que=ne({__name:"basic-time-spinner",props:Yue,emits:["change","select-range","set-option"],setup(r,{emit:e}){const t=r,i=Pe("time"),{getHoursList:o,getMinutesList:n,getSecondsList:s}=xF(t.disabledHours,t.disabledMinutes,t.disabledSeconds);let a=!1;const l=V(),c=V(),u=V(),d=V(),h={hours:c,minutes:u,seconds:d},p=N(()=>t.showSeconds?cF:cF.slice(0,2)),m=N(()=>{const{spinnerDate:O}=t,H=O.hour(),$=O.minute(),j=O.second();return{hours:H,minutes:$,seconds:j}}),g=N(()=>{const{hours:O,minutes:H}=f(m);return{hours:o(t.role),minutes:n(O,t.role),seconds:s(O,H,t.role)}}),v=N(()=>{const{hours:O,minutes:H,seconds:$}=f(m);return{hours:eT(O,23),minutes:eT(H,59),seconds:eT($,59)}}),y=Xo(O=>{a=!1,_(O)},200),b=O=>{if(!t.amPmMode)return"";const H=t.amPmMode==="A";let $=O<12?" am":" pm";return H&&($=$.toUpperCase()),$},x=O=>{let H;switch(O){case"hours":H=[0,2];break;case"minutes":H=[3,5];break;case"seconds":H=[6,8];break}const[$,j]=H;e("select-range",$,j),l.value=O},_=O=>{M(O,f(m)[O])},S=()=>{_("hours"),_("minutes"),_("seconds")},w=O=>O.querySelector(`.${i.namespace.value}-scrollbar__wrap`),M=(O,H)=>{if(t.arrowControl)return;const $=f(h[O]);$&&$.$el&&(w($.$el).scrollTop=Math.max(0,H*T(O)))},T=O=>{const H=f(h[O]),$=H==null?void 0:H.$el.querySelector("li");return $&&Number.parseFloat(Zl($,"height"))||0},E=()=>{B(1)},C=()=>{B(-1)},B=O=>{l.value||x("hours");const H=l.value,$=f(m)[H],j=l.value==="hours"?24:60,J=I(H,$,O,j);L(H,J),M(H,J),lt(()=>x(H))},I=(O,H,$,j)=>{let J=(H+$+j)%j;const ce=f(g)[O];for(;ce[J]&&J!==H;)J=(J+$+j)%j;return J},L=(O,H)=>{if(f(g)[O][H])return;const{hours:$,minutes:j,seconds:J}=f(m);let ce;switch(O){case"hours":ce=t.spinnerDate.hour(H).minute(j).second(J);break;case"minutes":ce=t.spinnerDate.hour($).minute(H).second(J);break;case"seconds":ce=t.spinnerDate.hour($).minute(j).second(H);break}e("change",ce)},P=(O,{value:H,disabled:$})=>{$||(L(O,H),x(O),M(O,H))},U=O=>{a=!0,y(O);const H=Math.min(Math.round((w(f(h[O]).$el).scrollTop-(G(O)*.5-10)/T(O)+3)/T(O)),O==="hours"?23:59);L(O,H)},G=O=>f(h[O]).$el.offsetHeight,R=()=>{const O=H=>{const $=f(h[H]);$&&$.$el&&(w($.$el).onscroll=()=>{U(H)})};O("hours"),O("minutes"),O("seconds")};Rt(()=>{lt(()=>{!t.arrowControl&&R(),S(),t.role==="start"&&x("hours")})});const F=(O,H)=>{h[H].value=O};return e("set-option",[`${t.role}_scrollDown`,B]),e("set-option",[`${t.role}_emitSelectRange`,x]),ke(()=>t.spinnerDate,()=>{a||S()}),(O,H)=>(A(),W("div",{class:k([f(i).b("spinner"),{"has-seconds":O.showSeconds}])},[O.arrowControl?we("v-if",!0):(A(!0),W(nt,{key:0},jt(f(p),$=>(A(),_e(f(sl),{key:$,ref_for:!0,ref:j=>F(j,$),class:k(f(i).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":f(i).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:j=>x($),onMousemove:j=>_($)},{default:se(()=>[(A(!0),W(nt,null,jt(f(g)[$],(j,J)=>(A(),W("li",{key:J,class:k([f(i).be("spinner","item"),f(i).is("active",J===f(m)[$]),f(i).is("disabled",j)]),onClick:ce=>P($,{value:J,disabled:j})},[$==="hours"?(A(),W(nt,{key:0},[rr(ze(("0"+(O.amPmMode?J%12||12:J)).slice(-2))+ze(b(J)),1)],64)):(A(),W(nt,{key:1},[rr(ze(("0"+J).slice(-2)),1)],64))],10,Jue))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),O.arrowControl?(A(!0),W(nt,{key:1},jt(f(p),$=>(A(),W("div",{key:$,class:k([f(i).be("spinner","wrapper"),f(i).is("arrow")]),onMouseenter:j=>x($)},[At((A(),_e(f(st),{class:k(["arrow-up",f(i).be("spinner","arrow")])},{default:se(()=>[ee(f(zy))]),_:1},8,["class"])),[[f(mb),C]]),At((A(),_e(f(st),{class:k(["arrow-down",f(i).be("spinner","arrow")])},{default:se(()=>[ee(f(Ql))]),_:1},8,["class"])),[[f(mb),E]]),X("ul",{class:k(f(i).be("spinner","list"))},[(A(!0),W(nt,null,jt(f(v)[$],(j,J)=>(A(),W("li",{key:J,class:k([f(i).be("spinner","item"),f(i).is("active",j===f(m)[$]),f(i).is("disabled",f(g)[$][j])])},[typeof j=="number"?(A(),W(nt,{key:0},[$==="hours"?(A(),W(nt,{key:0},[rr(ze(("0"+(O.amPmMode?j%12||12:j)).slice(-2))+ze(b(j)),1)],64)):(A(),W(nt,{key:1},[rr(ze(("0"+j).slice(-2)),1)],64))],64)):we("v-if",!0)],2))),128))],2)],42,Zue))),128)):we("v-if",!0)],2))}});var pT=Xe(Que,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/basic-time-spinner.vue"]]);const ede=ne({__name:"panel-time-pick",props:Uue,emits:["pick","select-range","set-picker-option"],setup(r,{emit:e}){const t=r,i=ot("EP_PICKER_BASE"),{arrowControl:o,disabledHours:n,disabledMinutes:s,disabledSeconds:a,defaultValue:l}=i.props,{getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}=_F(n,s,a),h=Pe("time"),{t:p,lang:m}=ir(),g=V([0,2]),v=wF(t),y=N(()=>Pi(t.actualVisible)?`${h.namespace.value}-zoom-in-top`:""),b=N(()=>t.format.includes("ss")),x=N(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),_=F=>{const O=Pt(F).locale(m.value),H=P(O);return O.isSame(H)},S=()=>{e("pick",v.value,!1)},w=(F=!1,O=!1)=>{O||e("pick",t.parsedValue,F)},M=F=>{if(!t.visible)return;const O=P(F).millisecond(0);e("pick",O,!0)},T=(F,O)=>{e("select-range",F,O),g.value=[F,O]},E=F=>{const O=[0,3].concat(b.value?[6]:[]),H=["hours","minutes"].concat(b.value?["seconds"]:[]),$=(O.indexOf(g.value[0])+F+O.length)%O.length;B.start_emitSelectRange(H[$])},C=F=>{const O=F.code,{left:H,right:$,up:j,down:J}=ft;if([H,$].includes(O)){E(O===H?-1:1),F.preventDefault();return}if([j,J].includes(O)){const ce=O===j?-1:1;B.start_scrollDown(ce),F.preventDefault();return}},{timePickerOptions:B,onSetOption:I,getAvailableTime:L}=bF({getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}),P=F=>L(F,t.datetimeRole||"",!0),U=F=>F?Pt(F,t.format).locale(m.value):null,G=F=>F?F.format(t.format):null,R=()=>Pt(l).locale(m.value);return e("set-picker-option",["isValidValue",_]),e("set-picker-option",["formatToString",G]),e("set-picker-option",["parseUserInput",U]),e("set-picker-option",["handleKeydownInput",C]),e("set-picker-option",["getRangeAvailableTime",P]),e("set-picker-option",["getDefaultValue",R]),(F,O)=>(A(),_e(fi,{name:f(y)},{default:se(()=>[F.actualVisible||F.visible?(A(),W("div",{key:0,class:k(f(h).b("panel"))},[X("div",{class:k([f(h).be("panel","content"),{"has-seconds":f(b)}])},[ee(pT,{ref:"spinner",role:F.datetimeRole||"start","arrow-control":f(o),"show-seconds":f(b),"am-pm-mode":f(x),"spinner-date":F.parsedValue,"disabled-hours":f(n),"disabled-minutes":f(s),"disabled-seconds":f(a),onChange:M,onSetOption:f(I),onSelectRange:T},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),X("div",{class:k(f(h).be("panel","footer"))},[X("button",{type:"button",class:k([f(h).be("panel","btn"),"cancel"]),onClick:S},ze(f(p)("el.datepicker.cancel")),3),X("button",{type:"button",class:k([f(h).be("panel","btn"),"confirm"]),onClick:O[0]||(O[0]=H=>w())},ze(f(p)("el.datepicker.confirm")),3)],2)],2)):we("v-if",!0)]),_:1},8,["name"]))}});var xb=Xe(ede,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-pick.vue"]]);const tde=Ye({...vF,parsedValue:{type:Te(Array)}}),rde=["disabled"],ide=ne({__name:"panel-time-range",props:tde,emits:["pick","select-range","set-picker-option"],setup(r,{emit:e}){const t=r,i=(ue,D)=>{const K=[];for(let re=ue;re<=D;re++)K.push(re);return K},{t:o,lang:n}=ir(),s=Pe("time"),a=Pe("picker"),l=ot("EP_PICKER_BASE"),{arrowControl:c,disabledHours:u,disabledMinutes:d,disabledSeconds:h,defaultValue:p}=l.props,m=N(()=>[s.be("range-picker","body"),s.be("panel","content"),s.is("arrow",c),_.value?"has-seconds":""]),g=N(()=>[s.be("range-picker","body"),s.be("panel","content"),s.is("arrow",c),_.value?"has-seconds":""]),v=N(()=>t.parsedValue[0]),y=N(()=>t.parsedValue[1]),b=wF(t),x=()=>{e("pick",b.value,!1)},_=N(()=>t.format.includes("ss")),S=N(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),w=(ue=!1)=>{e("pick",[v.value,y.value],ue)},M=ue=>{C(ue.millisecond(0),y.value)},T=ue=>{C(v.value,ue.millisecond(0))},E=ue=>{const D=ue.map(re=>Pt(re).locale(n.value)),K=$(D);return D[0].isSame(K[0])&&D[1].isSame(K[1])},C=(ue,D)=>{e("pick",[ue,D],!0)},B=N(()=>v.value>y.value),I=V([0,2]),L=(ue,D)=>{e("select-range",ue,D,"min"),I.value=[ue,D]},P=N(()=>_.value?11:8),U=(ue,D)=>{e("select-range",ue,D,"max");const K=f(P);I.value=[ue+K,D+K]},G=ue=>{const D=_.value?[0,3,6,11,14,17]:[0,3,8,11],K=["hours","minutes"].concat(_.value?["seconds"]:[]),re=(D.indexOf(I.value[0])+ue+D.length)%D.length,ae=D.length/2;re<ae?ve.start_emitSelectRange(K[re]):ve.end_emitSelectRange(K[re-ae])},R=ue=>{const D=ue.code,{left:K,right:re,up:ae,down:le}=ft;if([K,re].includes(D)){G(D===K?-1:1),ue.preventDefault();return}if([ae,le].includes(D)){const Se=D===ae?-1:1,Ae=I.value[0]<P.value?"start":"end";ve[`${Ae}_scrollDown`](Se),ue.preventDefault();return}},F=(ue,D)=>{const K=u?u(ue):[],re=ue==="start",ae=(D||(re?y.value:v.value)).hour(),le=re?i(ae+1,23):i(0,ae-1);return nM(K,le)},O=(ue,D,K)=>{const re=d?d(ue,D):[],ae=D==="start",le=K||(ae?y.value:v.value),Se=le.hour();if(ue!==Se)return re;const Ae=le.minute(),Ne=ae?i(Ae+1,59):i(0,Ae-1);return nM(re,Ne)},H=(ue,D,K,re)=>{const ae=h?h(ue,D,K):[],le=K==="start",Se=re||(le?y.value:v.value),Ae=Se.hour(),Ne=Se.minute();if(ue!==Ae||D!==Ne)return ae;const Me=Se.second(),Le=le?i(Me+1,59):i(0,Me-1);return nM(ae,Le)},$=([ue,D])=>[xe(ue,"start",!0,D),xe(D,"end",!1,ue)],{getAvailableHours:j,getAvailableMinutes:J,getAvailableSeconds:ce}=_F(F,O,H),{timePickerOptions:ve,getAvailableTime:xe,onSetOption:te}=bF({getAvailableHours:j,getAvailableMinutes:J,getAvailableSeconds:ce}),Z=ue=>ue?it(ue)?ue.map(D=>Pt(D,t.format).locale(n.value)):Pt(ue,t.format).locale(n.value):null,de=ue=>ue?it(ue)?ue.map(D=>D.format(t.format)):ue.format(t.format):null,Ce=()=>{if(it(p))return p.map(D=>Pt(D).locale(n.value));const ue=Pt(p).locale(n.value);return[ue,ue.add(60,"m")]};return e("set-picker-option",["formatToString",de]),e("set-picker-option",["parseUserInput",Z]),e("set-picker-option",["isValidValue",E]),e("set-picker-option",["handleKeydownInput",R]),e("set-picker-option",["getDefaultValue",Ce]),e("set-picker-option",["getRangeAvailableTime",$]),(ue,D)=>ue.actualVisible?(A(),W("div",{key:0,class:k([f(s).b("range-picker"),f(a).b("panel")])},[X("div",{class:k(f(s).be("range-picker","content"))},[X("div",{class:k(f(s).be("range-picker","cell"))},[X("div",{class:k(f(s).be("range-picker","header"))},ze(f(o)("el.datepicker.startTime")),3),X("div",{class:k(f(m))},[ee(pT,{ref:"minSpinner",role:"start","show-seconds":f(_),"am-pm-mode":f(S),"arrow-control":f(c),"spinner-date":f(v),"disabled-hours":F,"disabled-minutes":O,"disabled-seconds":H,onChange:M,onSetOption:f(te),onSelectRange:L},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),X("div",{class:k(f(s).be("range-picker","cell"))},[X("div",{class:k(f(s).be("range-picker","header"))},ze(f(o)("el.datepicker.endTime")),3),X("div",{class:k(f(g))},[ee(pT,{ref:"maxSpinner",role:"end","show-seconds":f(_),"am-pm-mode":f(S),"arrow-control":f(c),"spinner-date":f(y),"disabled-hours":F,"disabled-minutes":O,"disabled-seconds":H,onChange:T,onSetOption:f(te),onSelectRange:U},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),X("div",{class:k(f(s).be("panel","footer"))},[X("button",{type:"button",class:k([f(s).be("panel","btn"),"cancel"]),onClick:D[0]||(D[0]=K=>x())},ze(f(o)("el.datepicker.cancel")),3),X("button",{type:"button",class:k([f(s).be("panel","btn"),"confirm"]),disabled:f(B),onClick:D[1]||(D[1]=K=>w())},ze(f(o)("el.datepicker.confirm")),11,rde)],2)],2)):we("v-if",!0)}});var ode=Xe(ide,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);Pt.extend(ZM);var nde=ne({name:"ElTimePicker",install:null,props:{...rT,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,e){const t=V(),[i,o]=r.isRange?["timerange",ode]:["time",xb],n=s=>e.emit("update:modelValue",s);return Wt("ElPopperOptions",r.popperOptions),e.expose({focus:s=>{var a;(a=t.value)==null||a.handleFocusInput(s)},blur:s=>{var a;(a=t.value)==null||a.handleBlurInput(s)},handleOpen:()=>{var s;(s=t.value)==null||s.handleOpen()},handleClose:()=>{var s;(s=t.value)==null||s.handleClose()}}),()=>{var s;const a=(s=r.format)!=null?s:QM;return ee(yF,$t(r,{ref:t,type:i,format:a,"onUpdate:modelValue":n}),{default:l=>ee(o,l,null)})}}});const _b=nde;_b.install=r=>{r.component(_b.name,_b)};const sde=_b,ade=(r,e)=>{const t=r.subtract(1,"month").endOf("month").date();return hc(e).map((i,o)=>t-(e-o-1))},lde=r=>{const e=r.daysInMonth();return hc(e).map((t,i)=>i+1)},cde=r=>hc(r.length/7).map(e=>{const t=e*7;return r.slice(t,t+7)}),ude=Ye({selectedDay:{type:Te(Object)},range:{type:Te(Array)},date:{type:Te(Object),required:!0},hideHeader:{type:Boolean}}),dde={pick:r=>zt(r)};var BF={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ll,function(){return function(t,i,o){var n=i.prototype,s=function(d){return d&&(d.indexOf?d:d.s)},a=function(d,h,p,m,g){var v=d.name?d:d.$locale(),y=s(v[h]),b=s(v[p]),x=y||b.map(function(S){return S.slice(0,m)});if(!g)return x;var _=v.weekStart;return x.map(function(S,w){return x[(w+(_||0))%7]})},l=function(){return o.Ls[o.locale()]},c=function(d,h){return d.formats[h]||function(p){return p.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(m,g,v){return g||v.slice(1)})}(d.formats[h.toUpperCase()])},u=function(){var d=this;return{months:function(h){return h?h.format("MMMM"):a(d,"months")},monthsShort:function(h){return h?h.format("MMM"):a(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(h){return h?h.format("dddd"):a(d,"weekdays")},weekdaysMin:function(h){return h?h.format("dd"):a(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(h){return h?h.format("ddd"):a(d,"weekdaysShort","weekdays",3)},longDateFormat:function(h){return c(d.$locale(),h)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};n.localeData=function(){return u.bind(this)()},o.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return o.weekdays()},weekdaysShort:function(){return o.weekdaysShort()},weekdaysMin:function(){return o.weekdaysMin()},months:function(){return o.months()},monthsShort:function(){return o.monthsShort()},longDateFormat:function(h){return c(d,h)},meridiem:d.meridiem,ordinal:d.ordinal}},o.months=function(){return a(l(),"months")},o.monthsShort=function(){return a(l(),"monthsShort","months",3)},o.weekdays=function(d){return a(l(),"weekdays",null,null,d)},o.weekdaysShort=function(d){return a(l(),"weekdaysShort","weekdays",3,d)},o.weekdaysMin=function(d){return a(l(),"weekdaysMin","weekdays",2,d)}}})})(BF);var hde=BF.exports;const FF=_a(hde),pde=(r,e)=>{Pt.extend(FF);const t=Pt.localeData().firstDayOfWeek(),{t:i,lang:o}=ir(),n=Pt().locale(o.value),s=N(()=>!!r.range&&!!r.range.length),a=N(()=>{let u=[];if(s.value){const[d,h]=r.range,p=hc(h.date()-d.date()+1).map(v=>({text:d.date()+v,type:"current"}));let m=p.length%7;m=m===0?0:7-m;const g=hc(m).map((v,y)=>({text:y+1,type:"next"}));u=p.concat(g)}else{const d=r.date.startOf("month").day(),h=ade(r.date,(d-t+7)%7).map(v=>({text:v,type:"prev"})),p=lde(r.date).map(v=>({text:v,type:"current"}));u=[...h,...p];const m=7-(u.length%7||7),g=hc(m).map((v,y)=>({text:y+1,type:"next"}));u=u.concat(g)}return cde(u)}),l=N(()=>{const u=t;return u===0?hM.map(d=>i(`el.datepicker.weeks.${d}`)):hM.slice(u).concat(hM.slice(0,u)).map(d=>i(`el.datepicker.weeks.${d}`))}),c=(u,d)=>{switch(d){case"prev":return r.date.startOf("month").subtract(1,"month").date(u);case"next":return r.date.startOf("month").add(1,"month").date(u);case"current":return r.date.date(u)}};return{now:n,isInRange:s,rows:a,weekDays:l,getFormattedDate:c,handlePickDay:({text:u,type:d})=>{const h=c(u,d);e("pick",h)},getSlotData:({text:u,type:d})=>{const h=c(u,d);return{isSelected:h.isSame(r.selectedDay),type:`${d}-month`,day:h.format("YYYY-MM-DD"),date:h.toDate()}}}},fde={key:0},mde=["onClick"],gde=ne({name:"DateTable"}),vde=ne({...gde,props:ude,emits:dde,setup(r,{expose:e,emit:t}){const i=r,{isInRange:o,now:n,rows:s,weekDays:a,getFormattedDate:l,handlePickDay:c,getSlotData:u}=pde(i,t),d=Pe("calendar-table"),h=Pe("calendar-day"),p=({text:m,type:g})=>{const v=[g];if(g==="current"){const y=l(m,g);y.isSame(i.selectedDay,"day")&&v.push(h.is("selected")),y.isSame(n,"day")&&v.push(h.is("today"))}return v};return e({getFormattedDate:l}),(m,g)=>(A(),W("table",{class:k([f(d).b(),f(d).is("range",f(o))]),cellspacing:"0",cellpadding:"0"},[m.hideHeader?we("v-if",!0):(A(),W("thead",fde,[(A(!0),W(nt,null,jt(f(a),v=>(A(),W("th",{key:v},ze(v),1))),128))])),X("tbody",null,[(A(!0),W(nt,null,jt(f(s),(v,y)=>(A(),W("tr",{key:y,class:k({[f(d).e("row")]:!0,[f(d).em("row","hide-border")]:y===0&&m.hideHeader})},[(A(!0),W(nt,null,jt(v,(b,x)=>(A(),W("td",{key:x,class:k(p(b)),onClick:_=>f(c)(b)},[X("div",{class:k(f(h).b())},[Oe(m.$slots,"date-cell",{data:f(u)(b)},()=>[X("span",null,ze(b.text),1)])],2)],10,mde))),128))],2))),128))])],2))}});var UF=Xe(vde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]);const yde=(r,e)=>{const t=r.endOf("month"),i=e.startOf("month"),o=t.isSame(i,"week")?i.add(1,"week"):i;return[[r,t],[o.startOf("week"),e]]},bde=(r,e)=>{const t=r.endOf("month"),i=r.add(1,"month").startOf("month"),o=t.isSame(i,"week")?i.add(1,"week"):i,n=o.endOf("month"),s=e.startOf("month"),a=n.isSame(s,"week")?s.add(1,"week"):s;return[[r,t],[o.startOf("week"),n],[a.startOf("week"),e]]},xde=(r,e,t)=>{const i=yo(),{lang:o}=ir(),n=V(),s=Pt().locale(o.value),a=N({get(){return r.modelValue?c.value:n.value},set(y){if(!y)return;n.value=y;const b=y.toDate();e(Yo,b),e(Vt,b)}}),l=N(()=>{if(!r.range)return[];const y=r.range.map(_=>Pt(_).locale(o.value)),[b,x]=y;return b.isAfter(x)?[]:b.isSame(x,"month")?m(b,x):b.add(1,"month").month()!==x.month()?[]:m(b,x)}),c=N(()=>r.modelValue?Pt(r.modelValue).locale(o.value):a.value||(l.value.length?l.value[0][0]:s)),u=N(()=>c.value.subtract(1,"month").date(1)),d=N(()=>c.value.add(1,"month").date(1)),h=N(()=>c.value.subtract(1,"year").date(1)),p=N(()=>c.value.add(1,"year").date(1)),m=(y,b)=>{const x=y.startOf("week"),_=b.endOf("week"),S=x.get("month"),w=_.get("month");return S===w?[[x,_]]:(S+1)%12===w?yde(x,_):S+2===w||(S+1)%11===w?bde(x,_):[]},g=y=>{a.value=y},v=y=>{const b={"prev-month":u.value,"next-month":d.value,"prev-year":h.value,"next-year":p.value,today:s}[y];b.isSame(c.value,"day")||g(b)};return ga({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},N(()=>!!i.dateCell)),{calculateValidatedDateRange:m,date:c,realSelectedDay:a,pickDay:g,selectDate:v,validatedRange:l}},_de=r=>it(r)&&r.length===2&&r.every(e=>ou(e)),wde=Ye({modelValue:{type:Date},range:{type:Te(Array),validator:_de}}),Sde={[Vt]:r=>ou(r),[Yo]:r=>ou(r)},Mde="ElCalendar",Tde=ne({name:Mde}),Ede=ne({...Tde,props:wde,emits:Sde,setup(r,{expose:e,emit:t}){const i=r,o=Pe("calendar"),{calculateValidatedDateRange:n,date:s,pickDay:a,realSelectedDay:l,selectDate:c,validatedRange:u}=xde(i,t),{t:d}=ir(),h=N(()=>{const p=`el.datepicker.month${s.value.format("M")}`;return`${s.value.year()} ${d("el.datepicker.year")} ${d(p)}`});return e({selectedDay:l,pickDay:a,selectDate:c,calculateValidatedDateRange:n}),(p,m)=>(A(),W("div",{class:k(f(o).b())},[X("div",{class:k(f(o).e("header"))},[Oe(p.$slots,"header",{date:f(h)},()=>[X("div",{class:k(f(o).e("title"))},ze(f(h)),3),f(u).length===0?(A(),W("div",{key:0,class:k(f(o).e("button-group"))},[ee(f(sF),null,{default:se(()=>[ee(f(_o),{size:"small",onClick:m[0]||(m[0]=g=>f(c)("prev-month"))},{default:se(()=>[rr(ze(f(d)("el.datepicker.prevMonth")),1)]),_:1}),ee(f(_o),{size:"small",onClick:m[1]||(m[1]=g=>f(c)("today"))},{default:se(()=>[rr(ze(f(d)("el.datepicker.today")),1)]),_:1}),ee(f(_o),{size:"small",onClick:m[2]||(m[2]=g=>f(c)("next-month"))},{default:se(()=>[rr(ze(f(d)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):we("v-if",!0)])],2),f(u).length===0?(A(),W("div",{key:0,class:k(f(o).e("body"))},[ee(UF,{date:f(s),"selected-day":f(l),onPick:f(a)},Ya({_:2},[p.$slots["date-cell"]||p.$slots.dateCell?{name:"date-cell",fn:se(g=>[p.$slots["date-cell"]?Oe(p.$slots,"date-cell",Is($t({key:0},g))):Oe(p.$slots,"dateCell",Is($t({key:1},g)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(A(),W("div",{key:1,class:k(f(o).e("body"))},[(A(!0),W(nt,null,jt(f(u),(g,v)=>(A(),_e(UF,{key:v,date:g[0],"selected-day":f(l),range:g,"hide-header":v!==0,onPick:f(a)},Ya({_:2},[p.$slots["date-cell"]||p.$slots.dateCell?{name:"date-cell",fn:se(y=>[p.$slots["date-cell"]?Oe(p.$slots,"date-cell",Is($t({key:0},y))):Oe(p.$slots,"dateCell",Is($t({key:1},y)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Cde=Xe(Ede,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]);const Nde=Bt(Cde),Ade=Ye({header:{type:String,default:""},bodyStyle:{type:Te([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),Rde=ne({name:"ElCard"}),Lde=ne({...Rde,props:Ade,setup(r){const e=Pe("card");return(t,i)=>(A(),W("div",{class:k([f(e).b(),f(e).is(`${t.shadow}-shadow`)])},[t.$slots.header||t.header?(A(),W("div",{key:0,class:k(f(e).e("header"))},[Oe(t.$slots,"header",{},()=>[rr(ze(t.header),1)])],2)):we("v-if",!0),X("div",{class:k([f(e).e("body"),t.bodyClass]),style:ct(t.bodyStyle)},[Oe(t.$slots,"default")],6)],2))}});var Ode=Xe(Lde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const kde=Bt(Ode),Ide=Ye({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),Pde={change:(r,e)=>[r,e].every(wt)},zF=Symbol("carouselContextKey"),VF=300,Dde=(r,e,t)=>{const{children:i,addChild:o,removeChild:n}=LM(It(),"ElCarouselItem"),s=V(-1),a=V(null),l=V(!1),c=V(),u=V(0),d=N(()=>r.arrow!=="never"&&!f(m)),h=N(()=>i.value.some(O=>O.props.label.toString().length>0)),p=N(()=>r.type==="card"),m=N(()=>r.direction==="vertical"),g=N(()=>r.height!=="auto"?{height:r.height}:{height:`${u.value}px`,overflow:"hidden"}),v=Mu(O=>{S(O)},VF,{trailing:!0}),y=Mu(O=>{L(O)},VF);function b(){a.value&&(clearInterval(a.value),a.value=null)}function x(){r.interval<=0||!r.autoplay||a.value||(a.value=setInterval(()=>_(),r.interval))}const _=()=>{s.value<i.value.length-1?s.value=s.value+1:r.loop&&(s.value=0)};function S(O){if(Tt(O)){const j=i.value.filter(J=>J.props.name===O);j.length>0&&(O=i.value.indexOf(j[0]))}if(O=Number(O),Number.isNaN(O)||O!==Math.floor(O))return;const H=i.value.length,$=s.value;O<0?s.value=r.loop?H-1:0:O>=H?s.value=r.loop?0:H-1:s.value=O,$===s.value&&w($),G()}function w(O){i.value.forEach((H,$)=>{H.translateItem($,s.value,O)})}function M(O,H){var $,j,J,ce;const ve=f(i),xe=ve.length;if(xe===0||!O.states.inStage)return!1;const te=H+1,Z=H-1,de=xe-1,Ce=ve[de].states.active,ue=ve[0].states.active,D=(j=($=ve[te])==null?void 0:$.states)==null?void 0:j.active,K=(ce=(J=ve[Z])==null?void 0:J.states)==null?void 0:ce.active;return H===de&&ue||D?"left":H===0&&Ce||K?"right":!1}function T(){l.value=!0,r.pauseOnHover&&b()}function E(){l.value=!1,x()}function C(O){f(m)||i.value.forEach((H,$)=>{O===M(H,$)&&(H.states.hover=!0)})}function B(){f(m)||i.value.forEach(O=>{O.states.hover=!1})}function I(O){s.value=O}function L(O){r.trigger==="hover"&&O!==s.value&&(s.value=O)}function P(){S(s.value-1)}function U(){S(s.value+1)}function G(){b(),x()}function R(O){r.height==="auto"&&(u.value=O)}ke(()=>s.value,(O,H)=>{w(H),H>-1&&e("change",O,H)}),ke(()=>r.autoplay,O=>{O?x():b()}),ke(()=>r.loop,()=>{S(s.value)}),ke(()=>r.interval,()=>{G()}),ke(()=>i.value,()=>{i.value.length>0&&S(r.initialIndex)});const F=Rr();return Rt(()=>{F.value=ko(c.value,()=>{w()}),x()}),Vr(()=>{b(),c.value&&F.value&&F.value.stop()}),Wt(zF,{root:c,isCardType:p,isVertical:m,items:i,loop:r.loop,addItem:o,removeItem:n,setActiveItem:S,setContainerHeight:R}),{root:c,activeIndex:s,arrowDisplay:d,hasLabel:h,hover:l,isCardType:p,items:i,isVertical:m,containerStyle:g,handleButtonEnter:C,handleButtonLeave:B,handleIndicatorClick:I,handleMouseEnter:T,handleMouseLeave:E,setActiveItem:S,prev:P,next:U,throttledArrowClick:v,throttledIndicatorHover:y}},Bde=["onMouseenter","onClick"],Fde={key:0},Ude="ElCarousel",zde=ne({name:Ude}),Vde=ne({...zde,props:Ide,emits:Pde,setup(r,{expose:e,emit:t}){const i=r,{root:o,activeIndex:n,arrowDisplay:s,hasLabel:a,hover:l,isCardType:c,items:u,isVertical:d,containerStyle:h,handleButtonEnter:p,handleButtonLeave:m,handleIndicatorClick:g,handleMouseEnter:v,handleMouseLeave:y,setActiveItem:b,prev:x,next:_,throttledArrowClick:S,throttledIndicatorHover:w}=Dde(i,t),M=Pe("carousel"),T=N(()=>{const C=[M.b(),M.m(i.direction)];return f(c)&&C.push(M.m("card")),C}),E=N(()=>{const C=[M.e("indicators"),M.em("indicators",i.direction)];return f(a)&&C.push(M.em("indicators","labels")),i.indicatorPosition==="outside"&&C.push(M.em("indicators","outside")),f(d)&&C.push(M.em("indicators","right")),C});return e({setActiveItem:b,prev:x,next:_}),(C,B)=>(A(),W("div",{ref_key:"root",ref:o,class:k(f(T)),onMouseenter:B[6]||(B[6]=vt((...I)=>f(v)&&f(v)(...I),["stop"])),onMouseleave:B[7]||(B[7]=vt((...I)=>f(y)&&f(y)(...I),["stop"]))},[X("div",{class:k(f(M).e("container")),style:ct(f(h))},[f(s)?(A(),_e(fi,{key:0,name:"carousel-arrow-left",persisted:""},{default:se(()=>[At(X("button",{type:"button",class:k([f(M).e("arrow"),f(M).em("arrow","left")]),onMouseenter:B[0]||(B[0]=I=>f(p)("left")),onMouseleave:B[1]||(B[1]=(...I)=>f(m)&&f(m)(...I)),onClick:B[2]||(B[2]=vt(I=>f(S)(f(n)-1),["stop"]))},[ee(f(st),null,{default:se(()=>[ee(f(ec))]),_:1})],34),[[nr,(C.arrow==="always"||f(l))&&(i.loop||f(n)>0)]])]),_:1})):we("v-if",!0),f(s)?(A(),_e(fi,{key:1,name:"carousel-arrow-right",persisted:""},{default:se(()=>[At(X("button",{type:"button",class:k([f(M).e("arrow"),f(M).em("arrow","right")]),onMouseenter:B[3]||(B[3]=I=>f(p)("right")),onMouseleave:B[4]||(B[4]=(...I)=>f(m)&&f(m)(...I)),onClick:B[5]||(B[5]=vt(I=>f(S)(f(n)+1),["stop"]))},[ee(f(st),null,{default:se(()=>[ee(f(Ko))]),_:1})],34),[[nr,(C.arrow==="always"||f(l))&&(i.loop||f(n)<f(u).length-1)]])]),_:1})):we("v-if",!0),Oe(C.$slots,"default")],6),C.indicatorPosition!=="none"?(A(),W("ul",{key:0,class:k(f(E))},[(A(!0),W(nt,null,jt(f(u),(I,L)=>(A(),W("li",{key:L,class:k([f(M).e("indicator"),f(M).em("indicator",C.direction),f(M).is("active",L===f(n))]),onMouseenter:P=>f(w)(L),onClick:vt(P=>f(g)(L),["stop"])},[X("button",{class:k(f(M).e("button"))},[f(a)?(A(),W("span",Fde,ze(I.props.label),1)):we("v-if",!0)],2)],42,Bde))),128))],2)):we("v-if",!0)],34))}});var Gde=Xe(Vde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const Hde=Ye({name:{type:String,default:""},label:{type:[String,Number],default:""}}),jde=(r,e)=>{const t=ot(zF),i=It(),o=.83,n=V(),s=V(!1),a=V(0),l=V(1),c=V(!1),u=V(!1),d=V(!1),h=V(!1),{isCardType:p,isVertical:m}=t;function g(_,S,w){const M=w-1,T=S-1,E=S+1,C=w/2;return S===0&&_===M?-1:S===M&&_===0?w:_<T&&S-_>=C?w+1:_>E&&_-S>=C?-2:_}function v(_,S){var w,M;const T=f(m)?((w=t.root.value)==null?void 0:w.offsetHeight)||0:((M=t.root.value)==null?void 0:M.offsetWidth)||0;return d.value?T*((2-o)*(_-S)+1)/4:_<S?-(1+o)*T/4:(3+o)*T/4}function y(_,S,w){const M=t.root.value;return M?((w?M.offsetHeight:M.offsetWidth)||0)*(_-S):0}const b=(_,S,w)=>{var M;const T=f(p),E=(M=t.items.value.length)!=null?M:Number.NaN,C=_===S;!T&&!Pi(w)&&(h.value=C||_===w),!C&&E>2&&t.loop&&(_=g(_,S,E));const B=f(m);c.value=C,T?(d.value=Math.round(Math.abs(_-S))<=1,a.value=v(_,S),l.value=f(c)?1:o):a.value=y(_,S,B),u.value=!0,C&&n.value&&t.setContainerHeight(n.value.offsetHeight)};function x(){if(t&&f(p)){const _=t.items.value.findIndex(({uid:S})=>S===i.uid);t.setActiveItem(_)}}return Rt(()=>{t.addItem({props:r,states:ur({hover:s,translate:a,scale:l,active:c,ready:u,inStage:d,animating:h}),uid:i.uid,translateItem:b})}),Gn(()=>{t.removeItem(i.uid)}),{carouselItemRef:n,active:c,animating:h,hover:s,inStage:d,isVertical:m,translate:a,isCardType:p,scale:l,ready:u,handleItemClick:x}},$de=ne({name:"ElCarouselItem"}),Wde=ne({...$de,props:Hde,setup(r){const e=r,t=Pe("carousel"),{carouselItemRef:i,active:o,animating:n,hover:s,inStage:a,isVertical:l,translate:c,isCardType:u,scale:d,ready:h,handleItemClick:p}=jde(e),m=N(()=>{const g=`${`translate${f(l)?"Y":"X"}`}(${f(c)}px)`,v=`scale(${f(d)})`;return{transform:[g,v].join(" ")}});return(g,v)=>At((A(),W("div",{ref_key:"carouselItemRef",ref:i,class:k([f(t).e("item"),f(t).is("active",f(o)),f(t).is("in-stage",f(a)),f(t).is("hover",f(s)),f(t).is("animating",f(n)),{[f(t).em("item","card")]:f(u),[f(t).em("item","card-vertical")]:f(u)&&f(l)}]),style:ct(f(m)),onClick:v[0]||(v[0]=(...y)=>f(p)&&f(p)(...y))},[f(u)?At((A(),W("div",{key:0,class:k(f(t).e("mask"))},null,2)),[[nr,!f(o)]]):we("v-if",!0),Oe(g.$slots,"default")],6)),[[nr,f(h)]])}});var GF=Xe(Wde,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const qde=Bt(Gde,{CarouselItem:GF}),Xde=ii(GF),HF={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:bo,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},jF={[Vt]:r=>Tt(r)||wt(r)||Ti(r),change:r=>Tt(r)||wt(r)||Ti(r)},Jh=Symbol("checkboxGroupContextKey"),Kde=({model:r,isChecked:e})=>{const t=ot(Jh,void 0),i=N(()=>{var o,n;const s=(o=t==null?void 0:t.max)==null?void 0:o.value,a=(n=t==null?void 0:t.min)==null?void 0:n.value;return!Pi(s)&&r.value.length>=s&&!e.value||!Pi(a)&&r.value.length<=a&&e.value});return{isDisabled:bn(N(()=>(t==null?void 0:t.disabled.value)||i.value)),isLimitDisabled:i}},Yde=(r,{model:e,isLimitExceeded:t,hasOwnLabel:i,isDisabled:o,isLabeledByFormItem:n})=>{const s=ot(Jh,void 0),{formItem:a}=Jo(),{emit:l}=It();function c(m){var g,v;return m===r.trueLabel||m===!0?(g=r.trueLabel)!=null?g:!0:(v=r.falseLabel)!=null?v:!1}function u(m,g){l("change",c(m),g)}function d(m){if(t.value)return;const g=m.target;l("change",c(g.checked),m)}async function h(m){t.value||!i.value&&!o.value&&n.value&&(m.composedPath().some(g=>g.tagName==="LABEL")||(e.value=c([!1,r.falseLabel].includes(e.value)),await lt(),u(e.value,m)))}const p=N(()=>(s==null?void 0:s.validateEvent)||r.validateEvent);return ke(()=>r.modelValue,()=>{p.value&&(a==null||a.validate("change").catch(m=>{}))}),{handleChange:d,onClickRoot:h}},Jde=r=>{const e=V(!1),{emit:t}=It(),i=ot(Jh,void 0),o=N(()=>Pi(i)===!1),n=V(!1);return{model:N({get(){var s,a;return o.value?(s=i==null?void 0:i.modelValue)==null?void 0:s.value:(a=r.modelValue)!=null?a:e.value},set(s){var a,l;o.value&&it(s)?(n.value=((a=i==null?void 0:i.max)==null?void 0:a.value)!==void 0&&s.length>(i==null?void 0:i.max.value),n.value===!1&&((l=i==null?void 0:i.changeEvent)==null||l.call(i,s))):(t(Vt,s),e.value=s)}}),isGroup:o,isLimitExceeded:n}},Zde=(r,e,{model:t})=>{const i=ot(Jh,void 0),o=V(!1),n=N(()=>{const c=t.value;return Ti(c)?c:it(c)?zt(r.label)?c.map(fr).some(u=>mn(u,r.label)):c.map(fr).includes(r.label):c!=null?c===r.trueLabel:!!c}),s=Ci(N(()=>{var c;return(c=i==null?void 0:i.size)==null?void 0:c.value}),{prop:!0}),a=Ci(N(()=>{var c;return(c=i==null?void 0:i.size)==null?void 0:c.value})),l=N(()=>!!(e.default||r.label));return{checkboxButtonSize:s,isChecked:n,isFocused:o,checkboxSize:a,hasOwnLabel:l}},Qde=(r,{model:e})=>{function t(){it(e.value)&&!e.value.includes(r.label)?e.value.push(r.label):e.value=r.trueLabel||!0}r.checked&&t()},$F=(r,e)=>{const{formItem:t}=Jo(),{model:i,isGroup:o,isLimitExceeded:n}=Jde(r),{isFocused:s,isChecked:a,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u}=Zde(r,e,{model:i}),{isDisabled:d}=Kde({model:i,isChecked:a}),{inputId:h,isLabeledByFormItem:p}=lc(r,{formItemContext:t,disableIdGeneration:u,disableIdManagement:o}),{handleChange:m,onClickRoot:g}=Yde(r,{model:i,isLimitExceeded:n,hasOwnLabel:u,isDisabled:d,isLabeledByFormItem:p});return Qde(r,{model:i}),{inputId:h,isLabeledByFormItem:p,isChecked:a,isDisabled:d,isFocused:s,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:i,handleChange:m,onClickRoot:g}},ehe=["tabindex","role","aria-checked"],the=["id","aria-hidden","name","tabindex","disabled","true-value","false-value"],rhe=["id","aria-hidden","disabled","value","name","tabindex"],ihe=ne({name:"ElCheckbox"}),ohe=ne({...ihe,props:HF,emits:jF,setup(r){const e=r,t=yo(),{inputId:i,isLabeledByFormItem:o,isChecked:n,isDisabled:s,isFocused:a,checkboxSize:l,hasOwnLabel:c,model:u,handleChange:d,onClickRoot:h}=$F(e,t),p=Pe("checkbox"),m=N(()=>[p.b(),p.m(l.value),p.is("disabled",s.value),p.is("bordered",e.border),p.is("checked",n.value)]),g=N(()=>[p.e("input"),p.is("disabled",s.value),p.is("checked",n.value),p.is("indeterminate",e.indeterminate),p.is("focus",a.value)]);return(v,y)=>(A(),_e(Ht(!f(c)&&f(o)?"span":"label"),{class:k(f(m)),"aria-controls":v.indeterminate?v.controls:null,onClick:f(h)},{default:se(()=>[X("span",{class:k(f(g)),tabindex:v.indeterminate?0:void 0,role:v.indeterminate?"checkbox":void 0,"aria-checked":v.indeterminate?"mixed":void 0},[v.trueLabel||v.falseLabel?At((A(),W("input",{key:0,id:f(i),"onUpdate:modelValue":y[0]||(y[0]=b=>Ar(u)?u.value=b:null),class:k(f(p).e("original")),type:"checkbox","aria-hidden":v.indeterminate?"true":"false",name:v.name,tabindex:v.tabindex,disabled:f(s),"true-value":v.trueLabel,"false-value":v.falseLabel,onChange:y[1]||(y[1]=(...b)=>f(d)&&f(d)(...b)),onFocus:y[2]||(y[2]=b=>a.value=!0),onBlur:y[3]||(y[3]=b=>a.value=!1),onClick:y[4]||(y[4]=vt(()=>{},["stop"]))},null,42,the)),[[xy,f(u)]]):At((A(),W("input",{key:1,id:f(i),"onUpdate:modelValue":y[5]||(y[5]=b=>Ar(u)?u.value=b:null),class:k(f(p).e("original")),type:"checkbox","aria-hidden":v.indeterminate?"true":"false",disabled:f(s),value:v.label,name:v.name,tabindex:v.tabindex,onChange:y[6]||(y[6]=(...b)=>f(d)&&f(d)(...b)),onFocus:y[7]||(y[7]=b=>a.value=!0),onBlur:y[8]||(y[8]=b=>a.value=!1),onClick:y[9]||(y[9]=vt(()=>{},["stop"]))},null,42,rhe)),[[xy,f(u)]]),X("span",{class:k(f(p).e("inner"))},null,2)],10,ehe),f(c)?(A(),W("span",{key:0,class:k(f(p).e("label"))},[Oe(v.$slots,"default"),v.$slots.default?we("v-if",!0):(A(),W(nt,{key:0},[rr(ze(v.label),1)],64))],2)):we("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var nhe=Xe(ohe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const she=["name","tabindex","disabled","true-value","false-value"],ahe=["name","tabindex","disabled","value"],lhe=ne({name:"ElCheckboxButton"}),che=ne({...lhe,props:HF,emits:jF,setup(r){const e=r,t=yo(),{isFocused:i,isChecked:o,isDisabled:n,checkboxButtonSize:s,model:a,handleChange:l}=$F(e,t),c=ot(Jh,void 0),u=Pe("checkbox"),d=N(()=>{var p,m,g,v;const y=(m=(p=c==null?void 0:c.fill)==null?void 0:p.value)!=null?m:"";return{backgroundColor:y,borderColor:y,color:(v=(g=c==null?void 0:c.textColor)==null?void 0:g.value)!=null?v:"",boxShadow:y?`-1px 0 0 0 ${y}`:void 0}}),h=N(()=>[u.b("button"),u.bm("button",s.value),u.is("disabled",n.value),u.is("checked",o.value),u.is("focus",i.value)]);return(p,m)=>(A(),W("label",{class:k(f(h))},[p.trueLabel||p.falseLabel?At((A(),W("input",{key:0,"onUpdate:modelValue":m[0]||(m[0]=g=>Ar(a)?a.value=g:null),class:k(f(u).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:f(n),"true-value":p.trueLabel,"false-value":p.falseLabel,onChange:m[1]||(m[1]=(...g)=>f(l)&&f(l)(...g)),onFocus:m[2]||(m[2]=g=>i.value=!0),onBlur:m[3]||(m[3]=g=>i.value=!1),onClick:m[4]||(m[4]=vt(()=>{},["stop"]))},null,42,she)),[[xy,f(a)]]):At((A(),W("input",{key:1,"onUpdate:modelValue":m[5]||(m[5]=g=>Ar(a)?a.value=g:null),class:k(f(u).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:f(n),value:p.label,onChange:m[6]||(m[6]=(...g)=>f(l)&&f(l)(...g)),onFocus:m[7]||(m[7]=g=>i.value=!0),onBlur:m[8]||(m[8]=g=>i.value=!1),onClick:m[9]||(m[9]=vt(()=>{},["stop"]))},null,42,ahe)),[[xy,f(a)]]),p.$slots.default||p.label?(A(),W("span",{key:2,class:k(f(u).be("button","inner")),style:ct(f(o)?f(d):void 0)},[Oe(p.$slots,"default",{},()=>[rr(ze(p.label),1)])],6)):we("v-if",!0)],2))}});var WF=Xe(che,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const uhe=Ye({modelValue:{type:Te(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:bo,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),dhe={[Vt]:r=>it(r),change:r=>it(r)},hhe=ne({name:"ElCheckboxGroup"}),phe=ne({...hhe,props:uhe,emits:dhe,setup(r,{emit:e}){const t=r,i=Pe("checkbox"),{formItem:o}=Jo(),{inputId:n,isLabeledByFormItem:s}=lc(t,{formItemContext:o}),a=async c=>{e(Vt,c),await lt(),e("change",c)},l=N({get(){return t.modelValue},set(c){a(c)}});return Wt(Jh,{...rl(qi(t),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:a}),ke(()=>t.modelValue,()=>{t.validateEvent&&(o==null||o.validate("change").catch(c=>{}))}),(c,u)=>{var d;return A(),_e(Ht(c.tag),{id:f(n),class:k(f(i).b("group")),role:"group","aria-label":f(s)?void 0:c.label||"checkbox-group","aria-labelledby":f(s)?(d=f(o))==null?void 0:d.labelId:void 0},{default:se(()=>[Oe(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var qF=Xe(phe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const _s=Bt(nhe,{CheckboxButton:WF,CheckboxGroup:qF}),fhe=ii(WF),XF=ii(qF),KF=Ye({size:bo,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),mhe=Ye({...KF,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),YF={[Vt]:r=>Tt(r)||wt(r)||Ti(r),[Fr]:r=>Tt(r)||wt(r)||Ti(r)},JF=Symbol("radioGroupKey"),ZF=(r,e)=>{const t=V(),i=ot(JF,void 0),o=N(()=>!!i),n=N({get(){return o.value?i.modelValue:r.modelValue},set(u){o.value?i.changeEvent(u):e&&e(Vt,u),t.value.checked=r.modelValue===r.label}}),s=Ci(N(()=>i==null?void 0:i.size)),a=bn(N(()=>i==null?void 0:i.disabled)),l=V(!1),c=N(()=>a.value||o.value&&n.value!==r.label?-1:0);return{radioRef:t,isGroup:o,radioGroup:i,focus:l,size:s,disabled:a,tabIndex:c,modelValue:n}},ghe=["value","name","disabled"],vhe=ne({name:"ElRadio"}),yhe=ne({...vhe,props:mhe,emits:YF,setup(r,{emit:e}){const t=r,i=Pe("radio"),{radioRef:o,radioGroup:n,focus:s,size:a,disabled:l,modelValue:c}=ZF(t,e);function u(){lt(()=>e("change",c.value))}return(d,h)=>{var p;return A(),W("label",{class:k([f(i).b(),f(i).is("disabled",f(l)),f(i).is("focus",f(s)),f(i).is("bordered",d.border),f(i).is("checked",f(c)===d.label),f(i).m(f(a))])},[X("span",{class:k([f(i).e("input"),f(i).is("disabled",f(l)),f(i).is("checked",f(c)===d.label)])},[At(X("input",{ref_key:"radioRef",ref:o,"onUpdate:modelValue":h[0]||(h[0]=m=>Ar(c)?c.value=m:null),class:k(f(i).e("original")),value:d.label,name:d.name||((p=f(n))==null?void 0:p.name),disabled:f(l),type:"radio",onFocus:h[1]||(h[1]=m=>s.value=!0),onBlur:h[2]||(h[2]=m=>s.value=!1),onChange:u,onClick:h[3]||(h[3]=vt(()=>{},["stop"]))},null,42,ghe),[[FI,f(c)]]),X("span",{class:k(f(i).e("inner"))},null,2)],2),X("span",{class:k(f(i).e("label")),onKeydown:h[4]||(h[4]=vt(()=>{},["stop"]))},[Oe(d.$slots,"default",{},()=>[rr(ze(d.label),1)])],34)],2)}}});var bhe=Xe(yhe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio.vue"]]);const xhe=Ye({...KF,name:{type:String,default:""}}),_he=["value","name","disabled"],whe=ne({name:"ElRadioButton"}),She=ne({...whe,props:xhe,setup(r){const e=r,t=Pe("radio"),{radioRef:i,focus:o,size:n,disabled:s,modelValue:a,radioGroup:l}=ZF(e),c=N(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(u,d)=>{var h;return A(),W("label",{class:k([f(t).b("button"),f(t).is("active",f(a)===u.label),f(t).is("disabled",f(s)),f(t).is("focus",f(o)),f(t).bm("button",f(n))])},[At(X("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":d[0]||(d[0]=p=>Ar(a)?a.value=p:null),class:k(f(t).be("button","original-radio")),value:u.label,type:"radio",name:u.name||((h=f(l))==null?void 0:h.name),disabled:f(s),onFocus:d[1]||(d[1]=p=>o.value=!0),onBlur:d[2]||(d[2]=p=>o.value=!1),onClick:d[3]||(d[3]=vt(()=>{},["stop"]))},null,42,_he),[[FI,f(a)]]),X("span",{class:k(f(t).be("button","inner")),style:ct(f(a)===u.label?f(c):{}),onKeydown:d[4]||(d[4]=vt(()=>{},["stop"]))},[Oe(u.$slots,"default",{},()=>[rr(ze(u.label),1)])],38)],2)}}});var QF=Xe(She,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-button.vue"]]);const Mhe=Ye({id:{type:String,default:void 0},size:bo,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),The=YF,Ehe=["id","aria-label","aria-labelledby"],Che=ne({name:"ElRadioGroup"}),Nhe=ne({...Che,props:Mhe,emits:The,setup(r,{emit:e}){const t=r,i=Pe("radio"),o=bs(),n=V(),{formItem:s}=Jo(),{inputId:a,isLabeledByFormItem:l}=lc(t,{formItemContext:s}),c=d=>{e(Vt,d),lt(()=>e("change",d))};Rt(()=>{const d=n.value.querySelectorAll("[type=radio]"),h=d[0];!Array.from(d).some(p=>p.checked)&&h&&(h.tabIndex=0)});const u=N(()=>t.name||o.value);return Wt(JF,ur({...qi(t),changeEvent:c,name:u})),ke(()=>t.modelValue,()=>{t.validateEvent&&(s==null||s.validate("change").catch(d=>{}))}),(d,h)=>(A(),W("div",{id:f(a),ref_key:"radioGroupRef",ref:n,class:k(f(i).b("group")),role:"radiogroup","aria-label":f(l)?void 0:d.label||"radio-group","aria-labelledby":f(l)?f(s).labelId:void 0},[Oe(d.$slots,"default")],10,Ehe))}});var e4=Xe(Nhe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-group.vue"]]);const t4=Bt(bhe,{RadioButton:QF,RadioGroup:e4}),Ahe=ii(e4),Rhe=ii(QF);var Lhe=ne({name:"NodeContent",setup(){return{ns:Pe("cascader-node")}},render(){const{ns:r}=this,{node:e,panel:t}=this.$parent,{data:i,label:o}=e,{renderLabelFn:n}=t;return pt("span",{class:r.e("label")},n?n({node:e,data:i}):o)}});const fT=Symbol(),Ohe=ne({name:"ElCascaderNode",components:{ElCheckbox:_s,ElRadio:t4,NodeContent:Lhe,ElIcon:st,Check:km,Loading:rc,ArrowRight:Ko},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(r,{emit:e}){const t=ot(fT),i=Pe("cascader-node"),o=N(()=>t.isHoverMenu),n=N(()=>t.config.multiple),s=N(()=>t.config.checkStrictly),a=N(()=>{var w;return(w=t.checkedNodes[0])==null?void 0:w.uid}),l=N(()=>r.node.isDisabled),c=N(()=>r.node.isLeaf),u=N(()=>s.value&&!c.value||!l.value),d=N(()=>p(t.expandingNode)),h=N(()=>s.value&&t.checkedNodes.some(p)),p=w=>{var M;const{level:T,uid:E}=r.node;return((M=w==null?void 0:w.pathNodes[T-1])==null?void 0:M.uid)===E},m=()=>{d.value||t.expandNode(r.node)},g=w=>{const{node:M}=r;w!==M.checked&&t.handleCheckChange(M,w)},v=()=>{t.lazyLoad(r.node,()=>{c.value||m()})},y=w=>{o.value&&(b(),!c.value&&e("expand",w))},b=()=>{const{node:w}=r;!u.value||w.loading||(w.loaded?m():v())},x=()=>{o.value&&!c.value||(c.value&&!l.value&&!s.value&&!n.value?S(!0):b())},_=w=>{s.value?(g(w),r.node.loaded&&m()):S(w)},S=w=>{r.node.loaded?(g(w),!s.value&&m()):v()};return{panel:t,isHoverMenu:o,multiple:n,checkStrictly:s,checkedNodeId:a,isDisabled:l,isLeaf:c,expandable:u,inExpandingPath:d,inCheckedPath:h,ns:i,handleHoverExpand:y,handleExpand:b,handleClick:x,handleCheck:S,handleSelectCheck:_}}}),khe=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],Ihe=X("span",null,null,-1);function Phe(r,e,t,i,o,n){const s=_t("el-checkbox"),a=_t("el-radio"),l=_t("check"),c=_t("el-icon"),u=_t("node-content"),d=_t("loading"),h=_t("arrow-right");return A(),W("li",{id:`${r.menuId}-${r.node.uid}`,role:"menuitem","aria-haspopup":!r.isLeaf,"aria-owns":r.isLeaf?null:r.menuId,"aria-expanded":r.inExpandingPath,tabindex:r.expandable?-1:void 0,class:k([r.ns.b(),r.ns.is("selectable",r.checkStrictly),r.ns.is("active",r.node.checked),r.ns.is("disabled",!r.expandable),r.inExpandingPath&&"in-active-path",r.inCheckedPath&&"in-checked-path"]),onMouseenter:e[2]||(e[2]=(...p)=>r.handleHoverExpand&&r.handleHoverExpand(...p)),onFocus:e[3]||(e[3]=(...p)=>r.handleHoverExpand&&r.handleHoverExpand(...p)),onClick:e[4]||(e[4]=(...p)=>r.handleClick&&r.handleClick(...p))},[we(" prefix "),r.multiple?(A(),_e(s,{key:0,"model-value":r.node.checked,indeterminate:r.node.indeterminate,disabled:r.isDisabled,onClick:e[0]||(e[0]=vt(()=>{},["stop"])),"onUpdate:modelValue":r.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):r.checkStrictly?(A(),_e(a,{key:1,"model-value":r.checkedNodeId,label:r.node.uid,disabled:r.isDisabled,"onUpdate:modelValue":r.handleSelectCheck,onClick:e[1]||(e[1]=vt(()=>{},["stop"]))},{default:se(()=>[we(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),Ihe]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):r.isLeaf&&r.node.checked?(A(),_e(c,{key:2,class:k(r.ns.e("prefix"))},{default:se(()=>[ee(l)]),_:1},8,["class"])):we("v-if",!0),we(" content "),ee(u),we(" postfix "),r.isLeaf?we("v-if",!0):(A(),W(nt,{key:3},[r.node.loading?(A(),_e(c,{key:0,class:k([r.ns.is("loading"),r.ns.e("postfix")])},{default:se(()=>[ee(d)]),_:1},8,["class"])):(A(),_e(c,{key:1,class:k(["arrow-right",r.ns.e("postfix")])},{default:se(()=>[ee(h)]),_:1},8,["class"]))],64))],42,khe)}var Dhe=Xe(Ohe,[["render",Phe],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const Bhe=ne({name:"ElCascaderMenu",components:{Loading:rc,ElIcon:st,ElScrollbar:sl,ElCascaderNode:Dhe},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(r){const e=It(),t=Pe("cascader-menu"),{t:i}=ir(),o=qy();let n=null,s=null;const a=ot(fT),l=V(null),c=N(()=>!r.nodes.length),u=N(()=>!a.initialLoaded),d=N(()=>`cascader-menu-${o}-${r.index}`),h=v=>{n=v.target},p=v=>{if(!(!a.isHoverMenu||!n||!l.value))if(n.contains(v.target)){m();const y=e.vnode.el,{left:b}=y.getBoundingClientRect(),{offsetWidth:x,offsetHeight:_}=y,S=v.clientX-b,w=n.offsetTop,M=w+n.offsetHeight;l.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${S} ${w} L${x} 0 V${w} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${S} ${M} L${x} ${_} V${M} Z" />
        `}else s||(s=window.setTimeout(g,a.config.hoverThreshold))},m=()=>{s&&(clearTimeout(s),s=null)},g=()=>{l.value&&(l.value.innerHTML="",m())};return{ns:t,panel:a,hoverZone:l,isEmpty:c,isLoading:u,menuId:d,t:i,handleExpand:h,handleMouseMove:p,clearHoverZone:g}}});function Fhe(r,e,t,i,o,n){const s=_t("el-cascader-node"),a=_t("loading"),l=_t("el-icon"),c=_t("el-scrollbar");return A(),_e(c,{key:r.menuId,tag:"ul",role:"menu",class:k(r.ns.b()),"wrap-class":r.ns.e("wrap"),"view-class":[r.ns.e("list"),r.ns.is("empty",r.isEmpty)],onMousemove:r.handleMouseMove,onMouseleave:r.clearHoverZone},{default:se(()=>{var u;return[(A(!0),W(nt,null,jt(r.nodes,d=>(A(),_e(s,{key:d.uid,node:d,"menu-id":r.menuId,onExpand:r.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),r.isLoading?(A(),W("div",{key:0,class:k(r.ns.e("empty-text"))},[ee(l,{size:"14",class:k(r.ns.is("loading"))},{default:se(()=>[ee(a)]),_:1},8,["class"]),rr(" "+ze(r.t("el.cascader.loading")),1)],2)):r.isEmpty?(A(),W("div",{key:1,class:k(r.ns.e("empty-text"))},ze(r.t("el.cascader.noData")),3)):(u=r.panel)!=null&&u.isHoverMenu?(A(),W("svg",{key:2,ref:"hoverZone",class:k(r.ns.e("hover-zone"))},null,2)):we("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var Uhe=Xe(Bhe,[["render",Fhe],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let zhe=0;const Vhe=r=>{const e=[r];let{parent:t}=r;for(;t;)e.unshift(t),t=t.parent;return e};let mT=class WO{constructor(e,t,i,o=!1){this.data=e,this.config=t,this.parent=i,this.root=o,this.uid=zhe++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:n,label:s,children:a}=t,l=e[a],c=Vhe(this);this.level=o?0:i?i.level+1:1,this.value=e[n],this.label=e[s],this.pathNodes=c,this.pathValues=c.map(u=>u.value),this.pathLabels=c.map(u=>u.label),this.childrenData=l,this.children=(l||[]).map(u=>new WO(u,t,this)),this.loaded=!t.lazy||this.isLeaf||!ps(l)}get isDisabled(){const{data:e,parent:t,config:i}=this,{disabled:o,checkStrictly:n}=i;return(St(o)?o(e,this):!!e[o])||!n&&(t==null?void 0:t.isDisabled)}get isLeaf(){const{data:e,config:t,childrenData:i,loaded:o}=this,{lazy:n,leaf:s}=t,a=St(s)?s(e,this):e[s];return Pi(a)?n&&!o?!1:!(Array.isArray(i)&&i.length):!!a}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:t,children:i}=this,o=new WO(e,this.config,this);return Array.isArray(t)?t.push(e):this.childrenData=[e],i.push(o),o}calcText(e,t){const i=e?this.pathLabels.join(t):this.label;return this.text=i,i}broadcast(e,...t){const i=`onParent${pa(e)}`;this.children.forEach(o=>{o&&(o.broadcast(e,...t),o[i]&&o[i](...t))})}emit(e,...t){const{parent:i}=this,o=`onChild${pa(e)}`;i&&(i[o]&&i[o](...t),i.emit(e,...t))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,t=e.filter(o=>!o.isDisabled),i=t.length?t.every(o=>o.checked):!1;this.setCheckState(i)}setCheckState(e){const t=this.children.length,i=this.children.reduce((o,n)=>{const s=n.checked?1:n.indeterminate?.5:0;return o+s},0);this.checked=this.loaded&&this.children.filter(o=>!o.isDisabled).every(o=>o.loaded&&o.checked)&&e,this.indeterminate=this.loaded&&i!==t&&i>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:t,multiple:i}=this.config;t||!i?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const gT=(r,e)=>r.reduce((t,i)=>(i.isLeaf?t.push(i):(!e&&t.push(i),t=t.concat(gT(i.children,e))),t),[]);let r4=class{constructor(r,e){this.config=e;const t=(r||[]).map(i=>new mT(i,this.config));this.nodes=t,this.allNodes=gT(t,!1),this.leafNodes=gT(t,!0)}getNodes(){return this.nodes}getFlattedNodes(r){return r?this.leafNodes:this.allNodes}appendNode(r,e){const t=e?e.appendChild(r):new mT(r,this.config);e||this.nodes.push(t),this.allNodes.push(t),t.isLeaf&&this.leafNodes.push(t)}appendNodes(r,e){r.forEach(t=>this.appendNode(t,e))}getNodeByValue(r,e=!1){return!r&&r!==0?null:this.getFlattedNodes(e).find(t=>mn(t.value,r)||mn(t.pathValues,r))||null}getSameNode(r){return r&&this.getFlattedNodes(!1).find(({value:e,level:t})=>mn(r.value,e)&&r.level===t)||null}};const i4=Ye({modelValue:{type:Te([Number,String,Array])},options:{type:Te(Array),default:()=>[]},props:{type:Te(Object),default:()=>({})}}),Ghe={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:_r,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Hhe=r=>N(()=>({...Ghe,...r.props})),o4=r=>{if(!r)return 0;const e=r.id.split("-");return Number(e[e.length-2])},jhe=r=>{if(!r)return;const e=r.querySelector("input");e?e.click():b3(r)&&r.click()},$he=(r,e)=>{const t=e.slice(0),i=t.map(n=>n.uid),o=r.reduce((n,s)=>{const a=i.indexOf(s.uid);return a>-1&&(n.push(s),t.splice(a,1),i.splice(a,1)),n},[]);return o.push(...t),o},Whe=ne({name:"ElCascaderPanel",components:{ElCascaderMenu:Uhe},props:{...i4,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Vt,Fr,"close","expand-change"],setup(r,{emit:e,slots:t}){let i=!1;const o=Pe("cascader"),n=Hhe(r);let s=null;const a=V(!0),l=V([]),c=V(null),u=V([]),d=V(null),h=V([]),p=N(()=>n.value.expandTrigger==="hover"),m=N(()=>r.renderLabel||t.default),g=()=>{const{options:I}=r,L=n.value;i=!1,s=new r4(I,L),u.value=[s.getNodes()],L.lazy&&ps(r.options)?(a.value=!1,v(void 0,P=>{P&&(s=new r4(P,L),u.value=[s.getNodes()]),a.value=!0,T(!1,!0)})):T(!1,!0)},v=(I,L)=>{const P=n.value;I=I||new mT({},P,void 0,!0),I.loading=!0;const U=G=>{const R=I,F=R.root?null:R;G&&(s==null||s.appendNodes(G,F)),R.loading=!1,R.loaded=!0,R.childrenData=R.childrenData||[],L&&L(G)};P.lazyLoad(I,U)},y=(I,L)=>{var P;const{level:U}=I,G=u.value.slice(0,U);let R;I.isLeaf?R=I.pathNodes[U-2]:(R=I,G.push(I.children)),((P=d.value)==null?void 0:P.uid)!==(R==null?void 0:R.uid)&&(d.value=I,u.value=G,!L&&e("expand-change",(I==null?void 0:I.pathValues)||[]))},b=(I,L,P=!0)=>{const{checkStrictly:U,multiple:G}=n.value,R=h.value[0];i=!0,!G&&(R==null||R.doCheck(!1)),I.doCheck(L),M(),P&&!G&&!U&&e("close"),!P&&!G&&!U&&x(I)},x=I=>{I&&(I=I.parent,x(I),I&&y(I))},_=I=>s==null?void 0:s.getFlattedNodes(I),S=I=>{var L;return(L=_(I))==null?void 0:L.filter(P=>P.checked!==!1)},w=()=>{h.value.forEach(I=>I.doCheck(!1)),M(),u.value=u.value.slice(0,1),d.value=null,e("expand-change",[])},M=()=>{var I;const{checkStrictly:L,multiple:P}=n.value,U=h.value,G=S(!L),R=$he(U,G),F=R.map(O=>O.valueByOption);h.value=R,c.value=P?F:(I=F[0])!=null?I:null},T=(I=!1,L=!1)=>{const{modelValue:P}=r,{lazy:U,multiple:G,checkStrictly:R}=n.value,F=!R;if(!(!a.value||i||!L&&mn(P,c.value)))if(U&&!I){const O=pD(LQ(il(P))).map(H=>s==null?void 0:s.getNodeByValue(H)).filter(H=>!!H&&!H.loaded&&!H.loading);O.length?O.forEach(H=>{v(H,()=>T(!1,L))}):T(!0,L)}else{const O=G?il(P):[P],H=pD(O.map($=>s==null?void 0:s.getNodeByValue($,F)));E(H,L),c.value=Iy(P)}},E=(I,L=!0)=>{const{checkStrictly:P}=n.value,U=h.value,G=I.filter(O=>!!O&&(P||O.isLeaf)),R=s==null?void 0:s.getSameNode(d.value),F=L&&R||G[0];F?F.pathNodes.forEach(O=>y(O,!0)):d.value=null,U.forEach(O=>O.doCheck(!1)),r.props.multiple?ur(G).forEach(O=>O.doCheck(!0)):G.forEach(O=>O.doCheck(!0)),h.value=G,lt(C)},C=()=>{Jt&&l.value.forEach(I=>{const L=I==null?void 0:I.$el;if(L){const P=L.querySelector(`.${o.namespace.value}-scrollbar__wrap`),U=L.querySelector(`.${o.b("node")}.${o.is("active")}`)||L.querySelector(`.${o.b("node")}.in-active-path`);rD(P,U)}})},B=I=>{const L=I.target,{code:P}=I;switch(P){case ft.up:case ft.down:{I.preventDefault();const U=P===ft.up?-1:1;My(x3(L,U,`.${o.b("node")}[tabindex="-1"]`));break}case ft.left:{I.preventDefault();const U=l.value[o4(L)-1],G=U==null?void 0:U.$el.querySelector(`.${o.b("node")}[aria-expanded="true"]`);My(G);break}case ft.right:{I.preventDefault();const U=l.value[o4(L)+1],G=U==null?void 0:U.$el.querySelector(`.${o.b("node")}[tabindex="-1"]`);My(G);break}case ft.enter:jhe(L);break}};return Wt(fT,ur({config:n,expandingNode:d,checkedNodes:h,isHoverMenu:p,initialLoaded:a,renderLabelFn:m,lazyLoad:v,expandNode:y,handleCheckChange:b})),ke([n,()=>r.options],g,{deep:!0,immediate:!0}),ke(()=>r.modelValue,()=>{i=!1,T()},{deep:!0}),ke(()=>c.value,I=>{mn(I,r.modelValue)||(e(Vt,I),e(Fr,I))}),zk(()=>l.value=[]),Rt(()=>!ps(r.modelValue)&&T()),{ns:o,menuList:l,menus:u,checkedNodes:h,handleKeyDown:B,handleCheckChange:b,getFlattedNodes:_,getCheckedNodes:S,clearCheckedNodes:w,calculateCheckedValue:M,scrollToExpandingNode:C}}});function qhe(r,e,t,i,o,n){const s=_t("el-cascader-menu");return A(),W("div",{class:k([r.ns.b("panel"),r.ns.is("bordered",r.border)]),onKeydown:e[0]||(e[0]=(...a)=>r.handleKeyDown&&r.handleKeyDown(...a))},[(A(!0),W(nt,null,jt(r.menus,(a,l)=>(A(),_e(s,{key:l,ref_for:!0,ref:c=>r.menuList[l]=c,index:l,nodes:[...a]},null,8,["index","nodes"]))),128))],34)}var wb=Xe(Whe,[["render",qhe],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);wb.install=r=>{r.component(wb.name,wb)};const n4=wb,Xhe=n4,vT=Ye({type:{type:String,values:["success","info","warning","danger",""],default:""},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:{type:String,default:""},size:{type:String,values:ma,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),Khe={close:r=>r instanceof MouseEvent,click:r=>r instanceof MouseEvent},Yhe=ne({name:"ElTag"}),Jhe=ne({...Yhe,props:vT,emits:Khe,setup(r,{emit:e}){const t=r,i=Ci(),o=Pe("tag"),n=N(()=>{const{type:l,hit:c,effect:u,closable:d,round:h}=t;return[o.b(),o.is("closable",d),o.m(l),o.m(i.value),o.m(u),o.is("hit",c),o.is("round",h)]}),s=l=>{e("close",l)},a=l=>{e("click",l)};return(l,c)=>l.disableTransitions?(A(),W("span",{key:0,class:k(f(n)),style:ct({backgroundColor:l.color}),onClick:a},[X("span",{class:k(f(o).e("content"))},[Oe(l.$slots,"default")],2),l.closable?(A(),_e(f(st),{key:0,class:k(f(o).e("close")),onClick:vt(s,["stop"])},{default:se(()=>[ee(f(Vs))]),_:1},8,["class","onClick"])):we("v-if",!0)],6)):(A(),_e(fi,{key:1,name:`${f(o).namespace.value}-zoom-in-center`,appear:""},{default:se(()=>[X("span",{class:k(f(n)),style:ct({backgroundColor:l.color}),onClick:a},[X("span",{class:k(f(o).e("content"))},[Oe(l.$slots,"default")],2),l.closable?(A(),_e(f(st),{key:0,class:k(f(o).e("close")),onClick:vt(s,["stop"])},{default:se(()=>[ee(f(Vs))]),_:1},8,["class","onClick"])):we("v-if",!0)],6)]),_:3},8,["name"]))}});var Zhe=Xe(Jhe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const Ym=Bt(Zhe),Qhe=Ye({...i4,size:bo,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Te(Function),default:(r,e)=>r.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Te(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:ro.teleported,tagType:{...vT.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),epe={[Vt]:r=>!!r||r===null,[Fr]:r=>!!r||r===null,focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent,visibleChange:r=>Ti(r),expandChange:r=>!!r,removeTag:r=>!!r},tpe={key:0},rpe=["placeholder","onKeydown"],ipe=["onClick"],ope="ElCascader",npe=ne({name:ope}),spe=ne({...npe,props:Qhe,emits:epe,setup(r,{expose:e,emit:t}){const i=r,o={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:q})=>{const{modifiersData:oe,placement:fe}=q;["right","left","bottom","top"].includes(fe)||(oe.arrow.x=35)},requires:["arrow"]}]},n=du();let s=0,a=0;const l=Pe("cascader"),c=Pe("input"),{t:u}=ir(),{form:d,formItem:h}=Jo(),p=V(null),m=V(null),g=V(null),v=V(null),y=V(null),b=V(!1),x=V(!1),_=V(!1),S=V(!1),w=V(""),M=V(""),T=V([]),E=V([]),C=V([]),B=V(!1),I=N(()=>n.style),L=N(()=>i.disabled||(d==null?void 0:d.disabled)),P=N(()=>i.placeholder||u("el.cascader.placeholder")),U=N(()=>M.value||T.value.length>0||B.value?"":P.value),G=Ci(),R=N(()=>["small"].includes(G.value)?"small":"default"),F=N(()=>!!i.props.multiple),O=N(()=>!i.filterable||F.value),H=N(()=>F.value?M.value:w.value),$=N(()=>{var q;return((q=v.value)==null?void 0:q.checkedNodes)||[]}),j=N(()=>!i.clearable||L.value||_.value||!x.value?!1:!!$.value.length),J=N(()=>{const{showAllLevels:q,separator:oe}=i,fe=$.value;return fe.length?F.value?"":fe[0].calcText(q,oe):""}),ce=N({get(){return Iy(i.modelValue)},set(q){t(Vt,q),t(Fr,q),i.validateEvent&&(h==null||h.validate("change").catch(oe=>{}))}}),ve=N(()=>[l.b(),l.m(G.value),l.is("disabled",L.value),n.class]),xe=N(()=>[c.e("icon"),"icon-arrow-down",l.is("reverse",b.value)]),te=N(()=>l.is("focus",b.value||S.value)),Z=N(()=>{var q,oe;return(oe=(q=p.value)==null?void 0:q.popperRef)==null?void 0:oe.contentRef}),de=q=>{var oe,fe,ie;L.value||(q=q??!b.value,q!==b.value&&(b.value=q,(fe=(oe=m.value)==null?void 0:oe.input)==null||fe.setAttribute("aria-expanded",`${q}`),q?(Ce(),lt((ie=v.value)==null?void 0:ie.scrollToExpandingNode)):i.filterable&&Y(),t("visibleChange",q)))},Ce=()=>{lt(()=>{var q;(q=p.value)==null||q.updatePopper()})},ue=()=>{_.value=!1},D=q=>{const{showAllLevels:oe,separator:fe}=i;return{node:q,key:q.uid,text:q.calcText(oe,fe),hitState:!1,closable:!L.value&&!q.isDisabled,isCollapseTag:!1}},K=q=>{var oe;const fe=q.node;fe.doCheck(!1),(oe=v.value)==null||oe.calculateCheckedValue(),t("removeTag",fe.valueByOption)},re=()=>{if(!F.value)return;const q=$.value,oe=[],fe=[];if(q.forEach(ie=>fe.push(D(ie))),E.value=fe,q.length){q.slice(0,i.maxCollapseTags).forEach(et=>oe.push(D(et)));const ie=q.slice(i.maxCollapseTags),De=ie.length;De&&(i.collapseTags?oe.push({key:-1,text:`+ ${De}`,closable:!1,isCollapseTag:!0}):ie.forEach(et=>oe.push(D(et))))}T.value=oe},ae=()=>{var q,oe;const{filterMethod:fe,showAllLevels:ie,separator:De}=i,et=(oe=(q=v.value)==null?void 0:q.getFlattedNodes(!i.props.checkStrictly))==null?void 0:oe.filter(ht=>ht.isDisabled?!1:(ht.calcText(ie,De),fe(ht,H.value)));F.value&&(T.value.forEach(ht=>{ht.hitState=!1}),E.value.forEach(ht=>{ht.hitState=!1})),_.value=!0,C.value=et,Ce()},le=()=>{var q;let oe;_.value&&y.value?oe=y.value.$el.querySelector(`.${l.e("suggestion-item")}`):oe=(q=v.value)==null?void 0:q.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),oe&&(oe.focus(),!_.value&&oe.click())},Se=()=>{var q,oe;const fe=(q=m.value)==null?void 0:q.input,ie=g.value,De=(oe=y.value)==null?void 0:oe.$el;if(!(!Jt||!fe)){if(De){const et=De.querySelector(`.${l.e("suggestion-list")}`);et.style.minWidth=`${fe.offsetWidth}px`}if(ie){const{offsetHeight:et}=ie,ht=T.value.length>0?`${Math.max(et+6,s)}px`:`${s}px`;fe.style.height=ht,Ce()}}},Ae=q=>{var oe;return(oe=v.value)==null?void 0:oe.getCheckedNodes(q)},Ne=q=>{Ce(),t("expandChange",q)},Me=q=>{var oe;const fe=(oe=q.target)==null?void 0:oe.value;if(q.type==="compositionend")B.value=!1,lt(()=>Ve(fe));else{const ie=fe[fe.length-1]||"";B.value=!$y(ie)}},Le=q=>{if(!B.value)switch(q.code){case ft.enter:de();break;case ft.down:de(!0),lt(le),q.preventDefault();break;case ft.esc:b.value===!0&&(q.preventDefault(),q.stopPropagation(),de(!1));break;case ft.tab:de(!1);break}},je=()=>{var q;(q=v.value)==null||q.clearCheckedNodes(),!b.value&&i.filterable&&Y(),de(!1)},Y=()=>{const{value:q}=J;w.value=q,M.value=q},z=q=>{var oe,fe;const{checked:ie}=q;F.value?(oe=v.value)==null||oe.handleCheckChange(q,!ie,!1):(!ie&&((fe=v.value)==null||fe.handleCheckChange(q,!0,!1)),de(!1))},me=q=>{const oe=q.target,{code:fe}=q;switch(fe){case ft.up:case ft.down:{const ie=fe===ft.up?-1:1;My(x3(oe,ie,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case ft.enter:oe.click();break}},Ie=()=>{const q=T.value,oe=q[q.length-1];a=M.value?0:a+1,!(!oe||!a||i.collapseTags&&q.length>1)&&(oe.hitState?K(oe):oe.hitState=!0)},Ue=q=>{const oe=q.target,fe=l.e("search-input");oe.className===fe&&(S.value=!0),t("focus",q)},Re=q=>{S.value=!1,t("blur",q)},$e=Xo(()=>{const{value:q}=H;if(!q)return;const oe=i.beforeFilter(q);$f(oe)?oe.then(ae).catch(()=>{}):oe!==!1?ae():ue()},i.debounce),Ve=(q,oe)=>{!b.value&&de(!0),!(oe!=null&&oe.isComposing)&&(q?$e():ue())},ye=q=>Number.parseFloat(Tq(c.cssVarName("input-height"),q).value)-2;return ke(_,Ce),ke([$,L],re),ke(T,()=>{lt(()=>Se())}),ke(G,async()=>{await lt();const q=m.value.input;s=ye(q)||s,Se()}),ke(J,Y,{immediate:!0}),Rt(()=>{const q=m.value.input,oe=ye(q);s=q.offsetHeight||oe,ko(q,Se)}),e({getCheckedNodes:Ae,cascaderPanelRef:v,togglePopperVisible:de,contentRef:Z}),(q,oe)=>(A(),_e(f(Zo),{ref_key:"tooltipRef",ref:p,visible:b.value,teleported:q.teleported,"popper-class":[f(l).e("dropdown"),q.popperClass],"popper-options":o,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${f(l).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:ue},{default:se(()=>[At((A(),W("div",{class:k(f(ve)),style:ct(f(I)),onClick:oe[5]||(oe[5]=()=>de(f(O)?void 0:!0)),onKeydown:Le,onMouseenter:oe[6]||(oe[6]=fe=>x.value=!0),onMouseleave:oe[7]||(oe[7]=fe=>x.value=!1)},[ee(f(Io),{ref_key:"input",ref:m,modelValue:w.value,"onUpdate:modelValue":oe[1]||(oe[1]=fe=>w.value=fe),placeholder:f(U),readonly:f(O),disabled:f(L),"validate-event":!1,size:f(G),class:k(f(te)),tabindex:f(F)&&q.filterable&&!f(L)?-1:void 0,onCompositionstart:Me,onCompositionupdate:Me,onCompositionend:Me,onFocus:Ue,onBlur:Re,onInput:Ve},{suffix:se(()=>[f(j)?(A(),_e(f(st),{key:"clear",class:k([f(c).e("icon"),"icon-circle-close"]),onClick:vt(je,["stop"])},{default:se(()=>[ee(f(tc))]),_:1},8,["class","onClick"])):(A(),_e(f(st),{key:"arrow-down",class:k(f(xe)),onClick:oe[0]||(oe[0]=vt(fe=>de(),["stop"]))},{default:se(()=>[ee(f(Ql))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),f(F)?(A(),W("div",{key:0,ref_key:"tagWrapper",ref:g,class:k(f(l).e("tags"))},[(A(!0),W(nt,null,jt(T.value,fe=>(A(),_e(f(Ym),{key:fe.key,type:q.tagType,size:f(R),hit:fe.hitState,closable:fe.closable,"disable-transitions":"",onClose:ie=>K(fe)},{default:se(()=>[fe.isCollapseTag===!1?(A(),W("span",tpe,ze(fe.text),1)):(A(),_e(f(Zo),{key:1,disabled:b.value||!q.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:se(()=>[X("span",null,ze(fe.text),1)]),content:se(()=>[X("div",{class:k(f(l).e("collapse-tags"))},[(A(!0),W(nt,null,jt(E.value.slice(q.maxCollapseTags),(ie,De)=>(A(),W("div",{key:De,class:k(f(l).e("collapse-tag"))},[(A(),_e(f(Ym),{key:ie.key,class:"in-tooltip",type:q.tagType,size:f(R),hit:ie.hitState,closable:ie.closable,"disable-transitions":"",onClose:et=>K(ie)},{default:se(()=>[X("span",null,ze(ie.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),q.filterable&&!f(L)?At((A(),W("input",{key:0,"onUpdate:modelValue":oe[2]||(oe[2]=fe=>M.value=fe),type:"text",class:k(f(l).e("search-input")),placeholder:f(J)?"":f(P),onInput:oe[3]||(oe[3]=fe=>Ve(M.value,fe)),onClick:oe[4]||(oe[4]=vt(fe=>de(!0),["stop"])),onKeydown:Qt(Ie,["delete"]),onCompositionstart:Me,onCompositionupdate:Me,onCompositionend:Me,onFocus:Ue,onBlur:Re},null,42,rpe)),[[xS,M.value]]):we("v-if",!0)],2)):we("v-if",!0)],38)),[[f(fc),()=>de(!1),f(Z)]])]),content:se(()=>[At(ee(f(n4),{ref_key:"cascaderPanelRef",ref:v,modelValue:f(ce),"onUpdate:modelValue":oe[8]||(oe[8]=fe=>Ar(ce)?ce.value=fe:null),options:q.options,props:i.props,border:!1,"render-label":q.$slots.default,onExpandChange:Ne,onClose:oe[9]||(oe[9]=fe=>q.$nextTick(()=>de(!1)))},null,8,["modelValue","options","props","render-label"]),[[nr,!_.value]]),q.filterable?At((A(),_e(f(sl),{key:0,ref_key:"suggestionPanel",ref:y,tag:"ul",class:k(f(l).e("suggestion-panel")),"view-class":f(l).e("suggestion-list"),onKeydown:me},{default:se(()=>[C.value.length?(A(!0),W(nt,{key:0},jt(C.value,fe=>(A(),W("li",{key:fe.uid,class:k([f(l).e("suggestion-item"),f(l).is("checked",fe.checked)]),tabindex:-1,onClick:ie=>z(fe)},[X("span",null,ze(fe.text),1),fe.checked?(A(),_e(f(st),{key:0},{default:se(()=>[ee(f(km))]),_:1})):we("v-if",!0)],10,ipe))),128)):Oe(q.$slots,"empty",{key:1},()=>[X("li",{class:k(f(l).e("empty-text"))},ze(f(u)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[nr,_.value]]):we("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var Sb=Xe(spe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);Sb.install=r=>{r.component(Sb.name,Sb)};const ape=Sb,lpe=ape,cpe=Ye({checked:{type:Boolean,default:!1}}),upe={"update:checked":r=>Ti(r),[Fr]:r=>Ti(r)},dpe=ne({name:"ElCheckTag"}),hpe=ne({...dpe,props:cpe,emits:upe,setup(r,{emit:e}){const t=r,i=Pe("check-tag"),o=N(()=>[i.b(),i.is("checked",t.checked)]),n=()=>{const s=!t.checked;e(Fr,s),e("update:checked",s)};return(s,a)=>(A(),W("span",{class:k(f(o)),onClick:n},[Oe(s.$slots,"default")],2))}});var ppe=Xe(hpe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/check-tag/src/check-tag.vue"]]);const fpe=Bt(ppe),s4=Symbol("rowContextKey"),mpe=["start","center","end","space-around","space-between","space-evenly"],gpe=["top","middle","bottom"],vpe=Ye({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:mpe,default:"start"},align:{type:String,values:gpe}}),ype=ne({name:"ElRow"}),bpe=ne({...ype,props:vpe,setup(r){const e=r,t=Pe("row"),i=N(()=>e.gutter);Wt(s4,{gutter:i});const o=N(()=>{const s={};return e.gutter&&(s.marginRight=s.marginLeft=`-${e.gutter/2}px`),s}),n=N(()=>[t.b(),t.is(`justify-${e.justify}`,e.justify!=="start"),t.is(`align-${e.align}`,!!e.align)]);return(s,a)=>(A(),_e(Ht(s.tag),{class:k(f(n)),style:ct(f(o))},{default:se(()=>[Oe(s.$slots,"default")]),_:3},8,["class","style"]))}});var xpe=Xe(bpe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]);const _pe=Bt(xpe),wpe=Ye({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Te([Number,Object]),default:()=>qr({})},sm:{type:Te([Number,Object]),default:()=>qr({})},md:{type:Te([Number,Object]),default:()=>qr({})},lg:{type:Te([Number,Object]),default:()=>qr({})},xl:{type:Te([Number,Object]),default:()=>qr({})}}),Spe=ne({name:"ElCol"}),Mpe=ne({...Spe,props:wpe,setup(r){const e=r,{gutter:t}=ot(s4,{gutter:N(()=>0)}),i=Pe("col"),o=N(()=>{const s={};return t.value&&(s.paddingLeft=s.paddingRight=`${t.value/2}px`),s}),n=N(()=>{const s=[];return["span","offset","pull","push"].forEach(a=>{const l=e[a];wt(l)&&(a==="span"?s.push(i.b(`${e[a]}`)):l>0&&s.push(i.b(`${a}-${e[a]}`)))}),["xs","sm","md","lg","xl"].forEach(a=>{wt(e[a])?s.push(i.b(`${a}-${e[a]}`)):zt(e[a])&&Object.entries(e[a]).forEach(([l,c])=>{s.push(l!=="span"?i.b(`${a}-${l}-${c}`):i.b(`${a}-${c}`))})}),t.value&&s.push(i.is("guttered")),[i.b(),s]});return(s,a)=>(A(),_e(Ht(s.tag),{class:k(f(n)),style:ct(f(o))},{default:se(()=>[Oe(s.$slots,"default")]),_:3},8,["class","style"]))}});var Tpe=Xe(Mpe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const Epe=Bt(Tpe),a4=r=>typeof wt(r),Cpe=Ye({accordion:Boolean,modelValue:{type:Te([Array,String,Number]),default:()=>qr([])}}),Npe={[Vt]:a4,[Fr]:a4},l4=Symbol("collapseContextKey"),Ape=(r,e)=>{const t=V(wu(r.modelValue)),i=n=>{t.value=n;const s=r.accordion?t.value[0]:t.value;e(Vt,s),e(Fr,s)},o=n=>{if(r.accordion)i([t.value[0]===n?"":n]);else{const s=[...t.value],a=s.indexOf(n);a>-1?s.splice(a,1):s.push(n),i(s)}};return ke(()=>r.modelValue,()=>t.value=wu(r.modelValue),{deep:!0}),Wt(l4,{activeNames:t,handleItemClick:o}),{activeNames:t,setActiveNames:i}},Rpe=()=>{const r=Pe("collapse");return{rootKls:N(()=>r.b())}},Lpe=ne({name:"ElCollapse"}),Ope=ne({...Lpe,props:Cpe,emits:Npe,setup(r,{expose:e,emit:t}){const i=r,{activeNames:o,setActiveNames:n}=Ape(i,t),{rootKls:s}=Rpe();return e({activeNames:o,setActiveNames:n}),(a,l)=>(A(),W("div",{class:k(f(s)),role:"tablist","aria-multiselectable":"true"},[Oe(a.$slots,"default")],2))}});var kpe=Xe(Ope,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const Ipe=ne({name:"ElCollapseTransition"}),Ppe=ne({...Ipe,setup(r){const e=Pe("collapse-transition"),t=o=>{o.style.maxHeight="",o.style.overflow=o.dataset.oldOverflow,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom},i={beforeEnter(o){o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.style.maxHeight=0,o.style.paddingTop=0,o.style.paddingBottom=0},enter(o){o.dataset.oldOverflow=o.style.overflow,o.scrollHeight!==0?o.style.maxHeight=`${o.scrollHeight}px`:o.style.maxHeight=0,o.style.paddingTop=o.dataset.oldPaddingTop,o.style.paddingBottom=o.dataset.oldPaddingBottom,o.style.overflow="hidden"},afterEnter(o){o.style.maxHeight="",o.style.overflow=o.dataset.oldOverflow},enterCancelled(o){t(o)},beforeLeave(o){o.dataset||(o.dataset={}),o.dataset.oldPaddingTop=o.style.paddingTop,o.dataset.oldPaddingBottom=o.style.paddingBottom,o.dataset.oldOverflow=o.style.overflow,o.style.maxHeight=`${o.scrollHeight}px`,o.style.overflow="hidden"},leave(o){o.scrollHeight!==0&&(o.style.maxHeight=0,o.style.paddingTop=0,o.style.paddingBottom=0)},afterLeave(o){t(o)},leaveCancelled(o){t(o)}};return(o,n)=>(A(),_e(fi,$t({name:f(e).b()},FW(i)),{default:se(()=>[Oe(o.$slots,"default")]),_:3},16,["name"]))}});var Mb=Xe(Ppe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);Mb.install=r=>{r.component(Mb.name,Mb)};const Tb=Mb,Dpe=Tb,Bpe=Ye({title:{type:String,default:""},name:{type:Te([String,Number]),default:()=>qy()},disabled:Boolean}),Fpe=r=>{const e=ot(l4),t=V(!1),i=V(!1),o=V(qy()),n=N(()=>e==null?void 0:e.activeNames.value.includes(r.name));return{focusing:t,id:o,isActive:n,handleFocus:()=>{setTimeout(()=>{i.value?i.value=!1:t.value=!0},50)},handleHeaderClick:()=>{r.disabled||(e==null||e.handleItemClick(r.name),t.value=!1,i.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(r.name)}}},Upe=(r,{focusing:e,isActive:t,id:i})=>{const o=Pe("collapse"),n=N(()=>[o.b("item"),o.is("active",f(t)),o.is("disabled",r.disabled)]),s=N(()=>[o.be("item","header"),o.is("active",f(t)),{focusing:f(e)&&!r.disabled}]),a=N(()=>[o.be("item","arrow"),o.is("active",f(t))]),l=N(()=>o.be("item","wrap")),c=N(()=>o.be("item","content")),u=N(()=>o.b(`content-${f(i)}`)),d=N(()=>o.b(`head-${f(i)}`));return{arrowKls:a,headKls:s,rootKls:n,itemWrapperKls:l,itemContentKls:c,scopedContentId:u,scopedHeadId:d}},zpe=["aria-expanded","aria-controls","aria-describedby"],Vpe=["id","tabindex"],Gpe=["id","aria-hidden","aria-labelledby"],Hpe=ne({name:"ElCollapseItem"}),jpe=ne({...Hpe,props:Bpe,setup(r,{expose:e}){const t=r,{focusing:i,id:o,isActive:n,handleFocus:s,handleHeaderClick:a,handleEnterClick:l}=Fpe(t),{arrowKls:c,headKls:u,rootKls:d,itemWrapperKls:h,itemContentKls:p,scopedContentId:m,scopedHeadId:g}=Upe(t,{focusing:i,isActive:n,id:o});return e({isActive:n}),(v,y)=>(A(),W("div",{class:k(f(d))},[X("div",{role:"tab","aria-expanded":f(n),"aria-controls":f(m),"aria-describedby":f(m)},[X("div",{id:f(g),class:k(f(u)),role:"button",tabindex:v.disabled?-1:0,onClick:y[0]||(y[0]=(...b)=>f(a)&&f(a)(...b)),onKeypress:y[1]||(y[1]=Qt(vt((...b)=>f(l)&&f(l)(...b),["stop","prevent"]),["space","enter"])),onFocus:y[2]||(y[2]=(...b)=>f(s)&&f(s)(...b)),onBlur:y[3]||(y[3]=b=>i.value=!1)},[Oe(v.$slots,"title",{},()=>[rr(ze(v.title),1)]),ee(f(st),{class:k(f(c))},{default:se(()=>[ee(f(Ko))]),_:1},8,["class"])],42,Vpe)],8,zpe),ee(f(Tb),null,{default:se(()=>[At(X("div",{id:f(m),class:k(f(h)),role:"tabpanel","aria-hidden":!f(n),"aria-labelledby":f(g)},[X("div",{class:k(f(p))},[Oe(v.$slots,"default")],2)],10,Gpe),[[nr,f(n)]])]),_:3})],2))}});var c4=Xe(jpe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const $pe=Bt(kpe,{CollapseItem:c4}),Wpe=ii(c4),qpe=Ye({color:{type:Te(Object),required:!0},vertical:{type:Boolean,default:!1}});let yT=!1;function Jm(r,e){if(!Jt)return;const t=function(n){var s;(s=e.drag)==null||s.call(e,n)},i=function(n){var s;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",i),document.onselectstart=null,document.ondragstart=null,yT=!1,(s=e.end)==null||s.call(e,n)},o=function(n){var s;yT||(n.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",t),document.addEventListener("mouseup",i),document.addEventListener("touchmove",t),document.addEventListener("touchend",i),yT=!0,(s=e.start)==null||s.call(e,n))};r.addEventListener("mousedown",o),r.addEventListener("touchstart",o)}const Xpe=r=>{const e=It(),t=Rr(),i=Rr();function o(s){s.target!==t.value&&n(s)}function n(s){if(!i.value||!t.value)return;const a=e.vnode.el.getBoundingClientRect(),{clientX:l,clientY:c}=OS(s);if(r.vertical){let u=c-a.top;u=Math.max(t.value.offsetHeight/2,u),u=Math.min(u,a.height-t.value.offsetHeight/2),r.color.set("alpha",Math.round((u-t.value.offsetHeight/2)/(a.height-t.value.offsetHeight)*100))}else{let u=l-a.left;u=Math.max(t.value.offsetWidth/2,u),u=Math.min(u,a.width-t.value.offsetWidth/2),r.color.set("alpha",Math.round((u-t.value.offsetWidth/2)/(a.width-t.value.offsetWidth)*100))}}return{thumb:t,bar:i,handleDrag:n,handleClick:o}},Kpe=(r,{bar:e,thumb:t,handleDrag:i})=>{const o=It(),n=Pe("color-alpha-slider"),s=V(0),a=V(0),l=V();function c(){if(!t.value||r.vertical)return 0;const b=o.vnode.el,x=r.color.get("alpha");return b?Math.round(x*(b.offsetWidth-t.value.offsetWidth/2)/100):0}function u(){if(!t.value)return 0;const b=o.vnode.el;if(!r.vertical)return 0;const x=r.color.get("alpha");return b?Math.round(x*(b.offsetHeight-t.value.offsetHeight/2)/100):0}function d(){if(r.color&&r.color.value){const{r:b,g:x,b:_}=r.color.toRgb();return`linear-gradient(to right, rgba(${b}, ${x}, ${_}, 0) 0%, rgba(${b}, ${x}, ${_}, 1) 100%)`}return""}function h(){s.value=c(),a.value=u(),l.value=d()}Rt(()=>{if(!e.value||!t.value)return;const b={drag:x=>{i(x)},end:x=>{i(x)}};Jm(e.value,b),Jm(t.value,b),h()}),ke(()=>r.color.get("alpha"),()=>h()),ke(()=>r.color.value,()=>h());const p=N(()=>[n.b(),n.is("vertical",r.vertical)]),m=N(()=>n.e("bar")),g=N(()=>n.e("thumb")),v=N(()=>({background:l.value})),y=N(()=>({left:hi(s.value),top:hi(a.value)}));return{rootKls:p,barKls:m,barStyle:v,thumbKls:g,thumbStyle:y,update:h}},Ype="ElColorAlphaSlider",Jpe=ne({name:Ype}),Zpe=ne({...Jpe,props:qpe,setup(r,{expose:e}){const t=r,{bar:i,thumb:o,handleDrag:n,handleClick:s}=Xpe(t),{rootKls:a,barKls:l,barStyle:c,thumbKls:u,thumbStyle:d,update:h}=Kpe(t,{bar:i,thumb:o,handleDrag:n});return e({update:h,bar:i,thumb:o}),(p,m)=>(A(),W("div",{class:k(f(a))},[X("div",{ref_key:"bar",ref:i,class:k(f(l)),style:ct(f(c)),onClick:m[0]||(m[0]=(...g)=>f(s)&&f(s)(...g))},null,6),X("div",{ref_key:"thumb",ref:o,class:k(f(u)),style:ct(f(d))},null,6)],2))}});var Qpe=Xe(Zpe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const efe=ne({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(r){const e=Pe("color-hue-slider"),t=It(),i=V(),o=V(),n=V(0),s=V(0),a=N(()=>r.color.get("hue"));ke(()=>a.value,()=>{h()});function l(p){p.target!==i.value&&c(p)}function c(p){if(!o.value||!i.value)return;const m=t.vnode.el.getBoundingClientRect(),{clientX:g,clientY:v}=OS(p);let y;if(r.vertical){let b=v-m.top;b=Math.min(b,m.height-i.value.offsetHeight/2),b=Math.max(i.value.offsetHeight/2,b),y=Math.round((b-i.value.offsetHeight/2)/(m.height-i.value.offsetHeight)*360)}else{let b=g-m.left;b=Math.min(b,m.width-i.value.offsetWidth/2),b=Math.max(i.value.offsetWidth/2,b),y=Math.round((b-i.value.offsetWidth/2)/(m.width-i.value.offsetWidth)*360)}r.color.set("hue",y)}function u(){if(!i.value)return 0;const p=t.vnode.el;if(r.vertical)return 0;const m=r.color.get("hue");return p?Math.round(m*(p.offsetWidth-i.value.offsetWidth/2)/360):0}function d(){if(!i.value)return 0;const p=t.vnode.el;if(!r.vertical)return 0;const m=r.color.get("hue");return p?Math.round(m*(p.offsetHeight-i.value.offsetHeight/2)/360):0}function h(){n.value=u(),s.value=d()}return Rt(()=>{if(!o.value||!i.value)return;const p={drag:m=>{c(m)},end:m=>{c(m)}};Jm(o.value,p),Jm(i.value,p),h()}),{bar:o,thumb:i,thumbLeft:n,thumbTop:s,hueValue:a,handleClick:l,update:h,ns:e}}});function tfe(r,e,t,i,o,n){return A(),W("div",{class:k([r.ns.b(),r.ns.is("vertical",r.vertical)])},[X("div",{ref:"bar",class:k(r.ns.e("bar")),onClick:e[0]||(e[0]=(...s)=>r.handleClick&&r.handleClick(...s))},null,2),X("div",{ref:"thumb",class:k(r.ns.e("thumb")),style:ct({left:r.thumbLeft+"px",top:r.thumbTop+"px"})},null,6)],2)}var rfe=Xe(efe,[["render",tfe],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const ife=Ye({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:bo,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:Te(Array)},validateEvent:{type:Boolean,default:!0}}),ofe={[Vt]:r=>Tt(r)||Mi(r),[Fr]:r=>Tt(r)||Mi(r),activeChange:r=>Tt(r)||Mi(r)},u4=Symbol("colorPickerContextKey"),d4=function(r,e,t){return[r,e*t/((r=(2-e)*t)<1?r:2-r)||0,r/2]},nfe=function(r){return typeof r=="string"&&r.includes(".")&&Number.parseFloat(r)===1},sfe=function(r){return typeof r=="string"&&r.includes("%")},Zh=function(r,e){nfe(r)&&(r="100%");const t=sfe(r);return r=Math.min(e,Math.max(0,Number.parseFloat(`${r}`))),t&&(r=Number.parseInt(`${r*e}`,10)/100),Math.abs(r-e)<1e-6?1:r%e/Number.parseFloat(e)},h4={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Eb=r=>{r=Math.min(Math.round(r),255);const e=Math.floor(r/16),t=r%16;return`${h4[e]||e}${h4[t]||t}`},p4=function({r,g:e,b:t}){return Number.isNaN(+r)||Number.isNaN(+e)||Number.isNaN(+t)?"":`#${Eb(r)}${Eb(e)}${Eb(t)}`},bT={A:10,B:11,C:12,D:13,E:14,F:15},ku=function(r){return r.length===2?(bT[r[0].toUpperCase()]||+r[0])*16+(bT[r[1].toUpperCase()]||+r[1]):bT[r[1].toUpperCase()]||+r[1]},afe=function(r,e,t){e=e/100,t=t/100;let i=e;const o=Math.max(t,.01);t*=2,e*=t<=1?t:2-t,i*=o<=1?o:2-o;const n=(t+e)/2,s=t===0?2*i/(o+i):2*e/(t+e);return{h:r,s:s*100,v:n*100}},f4=(r,e,t)=>{r=Zh(r,255),e=Zh(e,255),t=Zh(t,255);const i=Math.max(r,e,t),o=Math.min(r,e,t);let n;const s=i,a=i-o,l=i===0?0:a/i;if(i===o)n=0;else{switch(i){case r:{n=(e-t)/a+(e<t?6:0);break}case e:{n=(t-r)/a+2;break}case t:{n=(r-e)/a+4;break}}n/=6}return{h:n*360,s:l*100,v:s*100}},Zm=function(r,e,t){r=Zh(r,360)*6,e=Zh(e,100),t=Zh(t,100);const i=Math.floor(r),o=r-i,n=t*(1-e),s=t*(1-o*e),a=t*(1-(1-o)*e),l=i%6,c=[t,s,n,n,a,t][l],u=[a,t,t,s,n,n][l],d=[n,n,a,t,t,s][l];return{r:Math.round(c*255),g:Math.round(u*255),b:Math.round(d*255)}};let Qm=class{constructor(r={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const e in r)Yt(r,e)&&(this[e]=r[e]);r.value?this.fromString(r.value):this.doOnChange()}set(r,e){if(arguments.length===1&&typeof r=="object"){for(const t in r)Yt(r,t)&&this.set(t,r[t]);return}this[`_${r}`]=e,this.doOnChange()}get(r){return r==="alpha"?Math.floor(this[`_${r}`]):this[`_${r}`]}toRgb(){return Zm(this._hue,this._saturation,this._value)}fromString(r){if(!r){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const e=(t,i,o)=>{this._hue=Math.max(0,Math.min(360,t)),this._saturation=Math.max(0,Math.min(100,i)),this._value=Math.max(0,Math.min(100,o)),this.doOnChange()};if(r.includes("hsl")){const t=r.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,o)=>o>2?Number.parseFloat(i):Number.parseInt(i,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:i,s:o,v:n}=afe(t[0],t[1],t[2]);e(i,o,n)}}else if(r.includes("hsv")){const t=r.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,o)=>o>2?Number.parseFloat(i):Number.parseInt(i,10));t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3&&e(t[0],t[1],t[2])}else if(r.includes("rgb")){const t=r.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,o)=>o>2?Number.parseFloat(i):Number.parseInt(i,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:i,s:o,v:n}=f4(t[0],t[1],t[2]);e(i,o,n)}}else if(r.includes("#")){const t=r.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(t))return;let i,o,n;t.length===3?(i=ku(t[0]+t[0]),o=ku(t[1]+t[1]),n=ku(t[2]+t[2])):(t.length===6||t.length===8)&&(i=ku(t.slice(0,2)),o=ku(t.slice(2,4)),n=ku(t.slice(4,6))),t.length===8?this._alpha=ku(t.slice(6))/255*100:(t.length===3||t.length===6)&&(this._alpha=100);const{h:s,s:a,v:l}=f4(i,o,n);e(s,a,l)}}compare(r){return Math.abs(r._hue-this._hue)<2&&Math.abs(r._saturation-this._saturation)<1&&Math.abs(r._value-this._value)<1&&Math.abs(r._alpha-this._alpha)<1}doOnChange(){const{_hue:r,_saturation:e,_value:t,_alpha:i,format:o}=this;if(this.enableAlpha)switch(o){case"hsl":{const n=d4(r,e/100,t/100);this.value=`hsla(${r}, ${Math.round(n[1]*100)}%, ${Math.round(n[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${r}, ${Math.round(e)}%, ${Math.round(t)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${p4(Zm(r,e,t))}${Eb(i*255/100)}`;break}default:{const{r:n,g:s,b:a}=Zm(r,e,t);this.value=`rgba(${n}, ${s}, ${a}, ${this.get("alpha")/100})`}}else switch(o){case"hsl":{const n=d4(r,e/100,t/100);this.value=`hsl(${r}, ${Math.round(n[1]*100)}%, ${Math.round(n[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${r}, ${Math.round(e)}%, ${Math.round(t)}%)`;break}case"rgb":{const{r:n,g:s,b:a}=Zm(r,e,t);this.value=`rgb(${n}, ${s}, ${a})`;break}default:this.value=p4(Zm(r,e,t))}}};const lfe=ne({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(r){const e=Pe("color-predefine"),{currentColor:t}=ot(u4),i=V(n(r.colors,r.color));ke(()=>t.value,s=>{const a=new Qm;a.fromString(s),i.value.forEach(l=>{l.selected=a.compare(l)})}),Vn(()=>{i.value=n(r.colors,r.color)});function o(s){r.color.fromString(r.colors[s])}function n(s,a){return s.map(l=>{const c=new Qm;return c.enableAlpha=!0,c.format="rgba",c.fromString(l),c.selected=c.value===a.value,c})}return{rgbaColors:i,handleSelect:o,ns:e}}}),cfe=["onClick"];function ufe(r,e,t,i,o,n){return A(),W("div",{class:k(r.ns.b())},[X("div",{class:k(r.ns.e("colors"))},[(A(!0),W(nt,null,jt(r.rgbaColors,(s,a)=>(A(),W("div",{key:r.colors[a],class:k([r.ns.e("color-selector"),r.ns.is("alpha",s._alpha<100),{selected:s.selected}]),onClick:l=>r.handleSelect(a)},[X("div",{style:ct({backgroundColor:s.value})},null,4)],10,cfe))),128))],2)],2)}var dfe=Xe(lfe,[["render",ufe],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const hfe=ne({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(r){const e=Pe("color-svpanel"),t=It(),i=V(0),o=V(0),n=V("hsl(0, 100%, 50%)"),s=N(()=>{const c=r.color.get("hue"),u=r.color.get("value");return{hue:c,value:u}});function a(){const c=r.color.get("saturation"),u=r.color.get("value"),d=t.vnode.el,{clientWidth:h,clientHeight:p}=d;o.value=c*h/100,i.value=(100-u)*p/100,n.value=`hsl(${r.color.get("hue")}, 100%, 50%)`}function l(c){const u=t.vnode.el.getBoundingClientRect(),{clientX:d,clientY:h}=OS(c);let p=d-u.left,m=h-u.top;p=Math.max(0,p),p=Math.min(p,u.width),m=Math.max(0,m),m=Math.min(m,u.height),o.value=p,i.value=m,r.color.set({saturation:p/u.width*100,value:100-m/u.height*100})}return ke(()=>s.value,()=>{a()}),Rt(()=>{Jm(t.vnode.el,{drag:c=>{l(c)},end:c=>{l(c)}}),a()}),{cursorTop:i,cursorLeft:o,background:n,colorValue:s,handleDrag:l,update:a,ns:e}}}),pfe=X("div",null,null,-1),ffe=[pfe];function mfe(r,e,t,i,o,n){return A(),W("div",{class:k(r.ns.b()),style:ct({backgroundColor:r.background})},[X("div",{class:k(r.ns.e("white"))},null,2),X("div",{class:k(r.ns.e("black"))},null,2),X("div",{class:k(r.ns.e("cursor")),style:ct({top:r.cursorTop+"px",left:r.cursorLeft+"px"})},ffe,6)],6)}var gfe=Xe(hfe,[["render",mfe],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const vfe=["id","aria-label","aria-labelledby","aria-description","tabindex","onKeydown"],yfe=ne({name:"ElColorPicker"}),bfe=ne({...yfe,props:ife,emits:ofe,setup(r,{expose:e,emit:t}){const i=r,{t:o}=ir(),n=Pe("color"),{formItem:s}=Jo(),a=Ci(),l=bn(),{inputId:c,isLabeledByFormItem:u}=lc(i,{formItemContext:s}),d=V(),h=V(),p=V(),m=V();let g=!0;const v=ur(new Qm({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue})),y=V(!1),b=V(!1),x=V(""),_=N(()=>!i.modelValue&&!b.value?"transparent":E(v,i.showAlpha)),S=N(()=>!i.modelValue&&!b.value?"":v.value),w=N(()=>u.value?void 0:i.label||o("el.colorpicker.defaultLabel")),M=N(()=>u.value?s==null?void 0:s.labelId:void 0),T=N(()=>[n.b("picker"),n.is("disabled",l.value),n.bm("picker",a.value)]);function E(O,H){if(!(O instanceof Qm))throw new TypeError("color should be instance of _color Class");const{r:$,g:j,b:J}=O.toRgb();return H?`rgba(${$}, ${j}, ${J}, ${O.get("alpha")/100})`:`rgb(${$}, ${j}, ${J})`}function C(O){y.value=O}const B=Xo(C,100);function I(){l.value||C(!0)}function L(){B(!1),P()}function P(){lt(()=>{i.modelValue?v.fromString(i.modelValue):(v.value="",lt(()=>{b.value=!1}))})}function U(){l.value||B(!y.value)}function G(){v.fromString(x.value)}function R(){const O=v.value;t(Vt,O),t("change",O),i.validateEvent&&(s==null||s.validate("change").catch(H=>{})),B(!1),lt(()=>{const H=new Qm({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue});v.compare(H)||P()})}function F(){B(!1),t(Vt,null),t("change",null),i.modelValue!==null&&i.validateEvent&&(s==null||s.validate("change").catch(O=>{})),P()}return Rt(()=>{i.modelValue&&(x.value=S.value)}),ke(()=>i.modelValue,O=>{O?O&&O!==v.value&&(g=!1,v.fromString(O)):b.value=!1}),ke(()=>S.value,O=>{x.value=O,g&&t("activeChange",O),g=!0}),ke(()=>v.value,()=>{!i.modelValue&&!b.value&&(b.value=!0)}),ke(()=>y.value,()=>{lt(()=>{var O,H,$;(O=d.value)==null||O.update(),(H=h.value)==null||H.update(),($=p.value)==null||$.update()})}),Wt(u4,{currentColor:S}),e({color:v,show:I,hide:L}),(O,H)=>(A(),_e(f(Zo),{ref_key:"popper",ref:m,visible:y.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[f(n).be("picker","panel"),f(n).b("dropdown"),O.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${f(n).namespace.value}-zoom-in-top`,persistent:""},{content:se(()=>[At((A(),W("div",null,[X("div",{class:k(f(n).be("dropdown","main-wrapper"))},[ee(rfe,{ref_key:"hue",ref:d,class:"hue-slider",color:f(v),vertical:""},null,8,["color"]),ee(gfe,{ref_key:"sv",ref:h,color:f(v)},null,8,["color"])],2),O.showAlpha?(A(),_e(Qpe,{key:0,ref_key:"alpha",ref:p,color:f(v)},null,8,["color"])):we("v-if",!0),O.predefine?(A(),_e(dfe,{key:1,ref:"predefine",color:f(v),colors:O.predefine},null,8,["color","colors"])):we("v-if",!0),X("div",{class:k(f(n).be("dropdown","btns"))},[X("span",{class:k(f(n).be("dropdown","value"))},[ee(f(Io),{modelValue:x.value,"onUpdate:modelValue":H[0]||(H[0]=$=>x.value=$),"validate-event":!1,size:"small",onKeyup:Qt(G,["enter"]),onBlur:G},null,8,["modelValue","onKeyup"])],2),ee(f(_o),{class:k(f(n).be("dropdown","link-btn")),text:"",size:"small",onClick:F},{default:se(()=>[rr(ze(f(o)("el.colorpicker.clear")),1)]),_:1},8,["class"]),ee(f(_o),{plain:"",size:"small",class:k(f(n).be("dropdown","btn")),onClick:R},{default:se(()=>[rr(ze(f(o)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)])),[[f(fc),L]])]),default:se(()=>[X("div",{id:f(c),class:k(f(T)),role:"button","aria-label":f(w),"aria-labelledby":f(M),"aria-description":f(o)("el.colorpicker.description",{color:O.modelValue||""}),tabindex:O.tabindex,onKeydown:Qt(U,["enter"])},[f(l)?(A(),W("div",{key:0,class:k(f(n).be("picker","mask"))},null,2)):we("v-if",!0),X("div",{class:k(f(n).be("picker","trigger")),onClick:U},[X("span",{class:k([f(n).be("picker","color"),f(n).is("alpha",O.showAlpha)])},[X("span",{class:k(f(n).be("picker","color-inner")),style:ct({backgroundColor:f(_)})},[At(ee(f(st),{class:k([f(n).be("picker","icon"),f(n).is("icon-arrow-down")])},{default:se(()=>[ee(f(Ql))]),_:1},8,["class"]),[[nr,O.modelValue||b.value]]),!O.modelValue&&!b.value?(A(),_e(f(st),{key:0,class:k([f(n).be("picker","empty"),f(n).is("icon-close")])},{default:se(()=>[ee(f(Vs))]),_:1},8,["class"])):we("v-if",!0)],6)],2)],2)],42,vfe)]),_:1},8,["visible","popper-class","transition"]))}});var xfe=Xe(bfe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const _fe=Bt(xfe),wfe=ne({name:"ElContainer"}),Sfe=ne({...wfe,props:{direction:{type:String}},setup(r){const e=r,t=yo(),i=Pe("container"),o=N(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(n=>{const s=n.type.name;return s==="ElHeader"||s==="ElFooter"}):!1);return(n,s)=>(A(),W("section",{class:k([f(i).b(),f(i).is("vertical",f(o))])},[Oe(n.$slots,"default")],2))}});var Mfe=Xe(Sfe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const Tfe=ne({name:"ElAside"}),Efe=ne({...Tfe,props:{width:{type:String,default:null}},setup(r){const e=r,t=Pe("aside"),i=N(()=>e.width?t.cssVarBlock({width:e.width}):{});return(o,n)=>(A(),W("aside",{class:k(f(t).b()),style:ct(f(i))},[Oe(o.$slots,"default")],6))}});var m4=Xe(Efe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const Cfe=ne({name:"ElFooter"}),Nfe=ne({...Cfe,props:{height:{type:String,default:null}},setup(r){const e=r,t=Pe("footer"),i=N(()=>e.height?t.cssVarBlock({height:e.height}):{});return(o,n)=>(A(),W("footer",{class:k(f(t).b()),style:ct(f(i))},[Oe(o.$slots,"default")],6))}});var g4=Xe(Nfe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const Afe=ne({name:"ElHeader"}),Rfe=ne({...Afe,props:{height:{type:String,default:null}},setup(r){const e=r,t=Pe("header"),i=N(()=>e.height?t.cssVarBlock({height:e.height}):{});return(o,n)=>(A(),W("header",{class:k(f(t).b()),style:ct(f(i))},[Oe(o.$slots,"default")],6))}});var v4=Xe(Rfe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const Lfe=ne({name:"ElMain"}),Ofe=ne({...Lfe,setup(r){const e=Pe("main");return(t,i)=>(A(),W("main",{class:k(f(e).b())},[Oe(t.$slots,"default")],2))}});var y4=Xe(Ofe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const kfe=Bt(Mfe,{Aside:m4,Footer:g4,Header:v4,Main:y4}),Ife=ii(m4),Pfe=ii(g4),Dfe=ii(v4),Bfe=ii(y4);var b4={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ll,function(){return function(t,i){var o=i.prototype,n=o.format;o.format=function(s){var a=this,l=this.$locale();if(!this.isValid())return n.bind(this)(s);var c=this.$utils(),u=(s||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((a.$M+1)/3);case"Do":return l.ordinal(a.$D);case"gggg":return a.weekYear();case"GGGG":return a.isoWeekYear();case"wo":return l.ordinal(a.week(),"W");case"w":case"ww":return c.s(a.week(),d==="w"?1:2,"0");case"W":case"WW":return c.s(a.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return c.s(String(a.$H===0?24:a.$H),d==="k"?1:2,"0");case"X":return Math.floor(a.$d.getTime()/1e3);case"x":return a.$d.getTime();case"z":return"["+a.offsetName()+"]";case"zzz":return"["+a.offsetName("long")+"]";default:return d}});return n.bind(this)(u)}}})})(b4);var Ffe=b4.exports;const Ufe=_a(Ffe);var x4={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ll,function(){var t="week",i="year";return function(o,n,s){var a=n.prototype;a.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=s(this).startOf(i).add(1,i).date(c),d=s(this).endOf(t);if(u.isBefore(d))return 1}var h=s(this).startOf(i).date(c).startOf(t).subtract(1,"millisecond"),p=this.diff(h,t,!0);return p<0?s(this).startOf("week").week():Math.ceil(p)},a.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(x4);var zfe=x4.exports;const Vfe=_a(zfe);var _4={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ll,function(){return function(t,i){i.prototype.weekYear=function(){var o=this.month(),n=this.week(),s=this.year();return n===1&&o===11?s+1:o===0&&n>=52?s-1:s}}})})(_4);var Gfe=_4.exports;const Hfe=_a(Gfe);var w4={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ll,function(){return function(t,i,o){i.prototype.dayOfYear=function(n){var s=Math.round((o(this).startOf("day")-o(this).startOf("year"))/864e5)+1;return n==null?s:this.add(n-s,"day")}}})})(w4);var jfe=w4.exports;const $fe=_a(jfe);var S4={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ll,function(){return function(t,i){i.prototype.isSameOrAfter=function(o,n){return this.isSame(o,n)||this.isAfter(o,n)}}})})(S4);var Wfe=S4.exports;const qfe=_a(Wfe);var M4={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(ll,function(){return function(t,i){i.prototype.isSameOrBefore=function(o,n){return this.isSame(o,n)||this.isBefore(o,n)}}})})(M4);var Xfe=M4.exports;const Kfe=_a(Xfe),xT=Symbol(),Yfe=Ye({...rT,type:{type:Te(String),default:"date"}}),Jfe=["date","dates","year","month","week","range"],_T=Ye({disabledDate:{type:Te(Function)},date:{type:Te(Object),required:!0},minDate:{type:Te(Object)},maxDate:{type:Te(Object)},parsedValue:{type:Te([Object,Array])},rangeState:{type:Te(Object),default:()=>({endDate:null,selecting:!1})}}),T4=Ye({type:{type:Te(String),required:!0,values:Doe}}),E4=Ye({unlinkPanels:Boolean,parsedValue:{type:Te(Array)}}),C4=r=>({type:String,values:Jfe,default:r}),Zfe=Ye({...T4,parsedValue:{type:Te([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),Qfe=Ye({..._T,cellClassName:{type:Te(Function)},showWeekNumber:Boolean,selectionMode:C4("date")}),wT=r=>{if(!it(r))return!1;const[e,t]=r;return Pt.isDayjs(e)&&Pt.isDayjs(t)&&e.isSameOrBefore(t)},N4=(r,{lang:e,unit:t,unlinkPanels:i})=>{let o;if(it(r)){let[n,s]=r.map(a=>Pt(a).locale(e));return i||(s=n.add(1,t)),[n,s]}else r?o=Pt(r):o=Pt();return o=o.locale(e),[o,o.add(1,t)]},eme=(r,e,{columnIndexOffset:t,startDate:i,nextEndDate:o,now:n,unit:s,relativeDateGetter:a,setCellMetadata:l,setRowMetadata:c})=>{for(let u=0;u<r.row;u++){const d=e[u];for(let h=0;h<r.column;h++){let p=d[h+t];p||(p={row:u,column:h,type:"normal",inRange:!1,start:!1,end:!1});const m=u*r.column+h,g=a(m);p.dayjs=g,p.date=g.toDate(),p.timestamp=g.valueOf(),p.type="normal",p.inRange=!!(i&&g.isSameOrAfter(i,s)&&o&&g.isSameOrBefore(o,s))||!!(i&&g.isSameOrBefore(i,s)&&o&&g.isSameOrAfter(o,s)),i!=null&&i.isSameOrAfter(o)?(p.start=!!o&&g.isSame(o,s),p.end=i&&g.isSame(i,s)):(p.start=!!i&&g.isSame(i,s),p.end=!!o&&g.isSame(o,s)),g.isSame(n,s)&&(p.type="today"),l==null||l(p,{rowIndex:u,columnIndex:h}),d[h+t]=p}c==null||c(d)}},tme=Ye({cell:{type:Te(Object)}});var rme=ne({name:"ElDatePickerCell",props:tme,setup(r){const e=Pe("date-table-cell"),{slots:t}=ot(xT);return()=>{const{cell:i}=r;if(t.default){const o=t.default(i).filter(n=>n.patchFlag!==-2&&n.type.toString()!=="Symbol(Comment)");if(o.length)return o}return ee("div",{class:e.b()},[ee("span",{class:e.e("text")},[i==null?void 0:i.text])])}}});const ime=["aria-label","onMousedown"],ome={key:0,scope:"col"},nme=["aria-label"],sme=["aria-current","aria-selected","tabindex"],ame=ne({__name:"basic-date-table",props:Qfe,emits:["changerange","pick","select"],setup(r,{expose:e,emit:t}){const i=r,o=Pe("date-table"),{t:n,lang:s}=ir(),a=V(),l=V(),c=V(),u=V(),d=V([[],[],[],[],[],[]]);let h=!1;const p=i.date.$locale().weekStart||7,m=i.date.locale("en").localeData().weekdaysShort().map(j=>j.toLowerCase()),g=N(()=>p>3?7-p:-p),v=N(()=>{const j=i.date.startOf("month");return j.subtract(j.day()||7,"day")}),y=N(()=>m.concat(m).slice(p,p+7)),b=N(()=>hP(T.value).some(j=>j.isCurrent)),x=N(()=>{const j=i.date.startOf("month"),J=j.day()||7,ce=j.daysInMonth(),ve=j.subtract(1,"month").daysInMonth();return{startOfMonthDay:J,dateCountOfMonth:ce,dateCountOfLastMonth:ve}}),_=N(()=>i.selectionMode==="dates"?il(i.parsedValue):[]),S=(j,{count:J,rowIndex:ce,columnIndex:ve})=>{const{startOfMonthDay:xe,dateCountOfMonth:te,dateCountOfLastMonth:Z}=f(x),de=f(g);if(ce>=0&&ce<=1){const Ce=xe+de<0?7+xe+de:xe+de;if(ve+ce*7>=Ce)return j.text=J,!0;j.text=Z-(Ce-ve%7)+1+ce*7,j.type="prev-month"}else return J<=te?j.text=J:(j.text=J-te,j.type="next-month"),!0;return!1},w=(j,{columnIndex:J,rowIndex:ce},ve)=>{const{disabledDate:xe,cellClassName:te}=i,Z=f(_),de=S(j,{count:ve,rowIndex:ce,columnIndex:J}),Ce=j.dayjs.toDate();return j.selected=Z.find(ue=>ue.valueOf()===j.dayjs.valueOf()),j.isSelected=!!j.selected,j.isCurrent=B(j),j.disabled=xe==null?void 0:xe(Ce),j.customClass=te==null?void 0:te(Ce),de},M=j=>{if(i.selectionMode==="week"){const[J,ce]=i.showWeekNumber?[1,7]:[0,6],ve=$(j[J+1]);j[J].inRange=ve,j[J].start=ve,j[ce].inRange=ve,j[ce].end=ve}},T=N(()=>{const{minDate:j,maxDate:J,rangeState:ce,showWeekNumber:ve}=i,xe=g.value,te=d.value,Z="day";let de=1;if(ve)for(let Ce=0;Ce<6;Ce++)te[Ce][0]||(te[Ce][0]={type:"week",text:v.value.add(Ce*7+1,Z).week()});return eme({row:6,column:7},te,{startDate:j,columnIndexOffset:ve?1:0,nextEndDate:ce.endDate||J||ce.selecting&&j||null,now:Pt().locale(f(s)).startOf(Z),unit:Z,relativeDateGetter:Ce=>v.value.add(Ce-xe,Z),setCellMetadata:(...Ce)=>{w(...Ce,de)&&(de+=1)},setRowMetadata:M}),te});ke(()=>i.date,async()=>{var j,J;(j=a.value)!=null&&j.contains(document.activeElement)&&(await lt(),(J=l.value)==null||J.focus())});const E=async()=>{var j;(j=l.value)==null||j.focus()},C=(j="")=>["normal","today"].includes(j),B=j=>i.selectionMode==="date"&&C(j.type)&&I(j,i.parsedValue),I=(j,J)=>J?Pt(J).locale(s.value).isSame(i.date.date(Number(j.text)),"day"):!1,L=j=>{const J=[];return C(j.type)&&!j.disabled?(J.push("available"),j.type==="today"&&J.push("today")):J.push(j.type),B(j)&&J.push("current"),j.inRange&&(C(j.type)||i.selectionMode==="week")&&(J.push("in-range"),j.start&&J.push("start-date"),j.end&&J.push("end-date")),j.disabled&&J.push("disabled"),j.selected&&J.push("selected"),j.customClass&&J.push(j.customClass),J.join(" ")},P=(j,J)=>{const ce=j*7+(J-(i.showWeekNumber?1:0))-g.value;return v.value.add(ce,"day")},U=j=>{var J;if(!i.rangeState.selecting)return;let ce=j.target;if(ce.tagName==="SPAN"&&(ce=(J=ce.parentNode)==null?void 0:J.parentNode),ce.tagName==="DIV"&&(ce=ce.parentNode),ce.tagName!=="TD")return;const ve=ce.parentNode.rowIndex-1,xe=ce.cellIndex;T.value[ve][xe].disabled||(ve!==c.value||xe!==u.value)&&(c.value=ve,u.value=xe,t("changerange",{selecting:!0,endDate:P(ve,xe)}))},G=j=>!b.value&&(j==null?void 0:j.text)===1&&j.type==="normal"||j.isCurrent,R=j=>{h||b.value||i.selectionMode!=="date"||H(j,!0)},F=j=>{j.target.closest("td")&&(h=!0)},O=j=>{j.target.closest("td")&&(h=!1)},H=(j,J=!1)=>{const ce=j.target.closest("td");if(!ce)return;const ve=ce.parentNode.rowIndex-1,xe=ce.cellIndex,te=T.value[ve][xe];if(te.disabled||te.type==="week")return;const Z=P(ve,xe);if(i.selectionMode==="range")!i.rangeState.selecting||!i.minDate?(t("pick",{minDate:Z,maxDate:null}),t("select",!0)):(Z>=i.minDate?t("pick",{minDate:i.minDate,maxDate:Z}):t("pick",{minDate:Z,maxDate:i.minDate}),t("select",!1));else if(i.selectionMode==="date")t("pick",Z,J);else if(i.selectionMode==="week"){const de=Z.week(),Ce=`${Z.year()}w${de}`;t("pick",{year:Z.year(),week:de,value:Ce,date:Z.startOf("week")})}else if(i.selectionMode==="dates"){const de=te.selected?il(i.parsedValue).filter(Ce=>(Ce==null?void 0:Ce.valueOf())!==Z.valueOf()):il(i.parsedValue).concat([Z]);t("pick",de)}},$=j=>{if(i.selectionMode!=="week")return!1;let J=i.date.startOf("day");if(j.type==="prev-month"&&(J=J.subtract(1,"month")),j.type==="next-month"&&(J=J.add(1,"month")),J=J.date(Number.parseInt(j.text,10)),i.parsedValue&&!Array.isArray(i.parsedValue)){const ce=(i.parsedValue.day()-p+7)%7-1;return i.parsedValue.subtract(ce,"day").isSame(J,"day")}return!1};return e({focus:E}),(j,J)=>(A(),W("table",{role:"grid","aria-label":f(n)("el.datepicker.dateTablePrompt"),cellspacing:"0",cellpadding:"0",class:k([f(o).b(),{"is-week-mode":j.selectionMode==="week"}]),onClick:H,onMousemove:U,onMousedown:vt(F,["prevent"]),onMouseup:O},[X("tbody",{ref_key:"tbodyRef",ref:a},[X("tr",null,[j.showWeekNumber?(A(),W("th",ome,ze(f(n)("el.datepicker.week")),1)):we("v-if",!0),(A(!0),W(nt,null,jt(f(y),(ce,ve)=>(A(),W("th",{key:ve,scope:"col","aria-label":f(n)("el.datepicker.weeksFull."+ce)},ze(f(n)("el.datepicker.weeks."+ce)),9,nme))),128))]),(A(!0),W(nt,null,jt(f(T),(ce,ve)=>(A(),W("tr",{key:ve,class:k([f(o).e("row"),{current:$(ce[1])}])},[(A(!0),W(nt,null,jt(ce,(xe,te)=>(A(),W("td",{key:`${ve}.${te}`,ref_for:!0,ref:Z=>G(xe)&&(l.value=Z),class:k(L(xe)),"aria-current":xe.isCurrent?"date":void 0,"aria-selected":xe.isCurrent,tabindex:G(xe)?0:-1,onFocus:R},[ee(f(rme),{cell:xe},null,8,["cell"])],42,sme))),128))],2))),128))],512)],42,ime))}});var ST=Xe(ame,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-date-table.vue"]]);const lme=Ye({..._T,selectionMode:C4("month")}),cme=["aria-label"],ume=["aria-selected","aria-label","tabindex","onKeydown"],dme={class:"cell"},hme=ne({__name:"basic-month-table",props:lme,emits:["changerange","pick","select"],setup(r,{expose:e,emit:t}){const i=r,o=(_,S,w)=>{const M=Pt().locale(w).startOf("month").month(S).year(_),T=M.daysInMonth();return hc(T).map(E=>M.add(E,"day").toDate())},n=Pe("month-table"),{t:s,lang:a}=ir(),l=V(),c=V(),u=V(i.date.locale("en").localeData().monthsShort().map(_=>_.toLowerCase())),d=V([[],[],[]]),h=V(),p=V(),m=N(()=>{var _,S;const w=d.value,M=Pt().locale(a.value).startOf("month");for(let T=0;T<3;T++){const E=w[T];for(let C=0;C<4;C++){const B=E[C]||(E[C]={row:T,column:C,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});B.type="normal";const I=T*4+C,L=i.date.startOf("year").month(I),P=i.rangeState.endDate||i.maxDate||i.rangeState.selecting&&i.minDate||null;B.inRange=!!(i.minDate&&L.isSameOrAfter(i.minDate,"month")&&P&&L.isSameOrBefore(P,"month"))||!!(i.minDate&&L.isSameOrBefore(i.minDate,"month")&&P&&L.isSameOrAfter(P,"month")),(_=i.minDate)!=null&&_.isSameOrAfter(P)?(B.start=!!(P&&L.isSame(P,"month")),B.end=i.minDate&&L.isSame(i.minDate,"month")):(B.start=!!(i.minDate&&L.isSame(i.minDate,"month")),B.end=!!(P&&L.isSame(P,"month"))),M.isSame(L)&&(B.type="today"),B.text=I,B.disabled=((S=i.disabledDate)==null?void 0:S.call(i,L.toDate()))||!1}}return w}),g=()=>{var _;(_=c.value)==null||_.focus()},v=_=>{const S={},w=i.date.year(),M=new Date,T=_.text;return S.disabled=i.disabledDate?o(w,T,a.value).every(i.disabledDate):!1,S.current=il(i.parsedValue).findIndex(E=>Pt.isDayjs(E)&&E.year()===w&&E.month()===T)>=0,S.today=M.getFullYear()===w&&M.getMonth()===T,_.inRange&&(S["in-range"]=!0,_.start&&(S["start-date"]=!0),_.end&&(S["end-date"]=!0)),S},y=_=>{const S=i.date.year(),w=_.text;return il(i.date).findIndex(M=>M.year()===S&&M.month()===w)>=0},b=_=>{var S;if(!i.rangeState.selecting)return;let w=_.target;if(w.tagName==="A"&&(w=(S=w.parentNode)==null?void 0:S.parentNode),w.tagName==="DIV"&&(w=w.parentNode),w.tagName!=="TD")return;const M=w.parentNode.rowIndex,T=w.cellIndex;m.value[M][T].disabled||(M!==h.value||T!==p.value)&&(h.value=M,p.value=T,t("changerange",{selecting:!0,endDate:i.date.startOf("year").month(M*4+T)}))},x=_=>{var S;const w=(S=_.target)==null?void 0:S.closest("td");if((w==null?void 0:w.tagName)!=="TD"||zs(w,"disabled"))return;const M=w.cellIndex,T=w.parentNode.rowIndex*4+M,E=i.date.startOf("year").month(T);i.selectionMode==="range"?i.rangeState.selecting?(i.minDate&&E>=i.minDate?t("pick",{minDate:i.minDate,maxDate:E}):t("pick",{minDate:E,maxDate:i.minDate}),t("select",!1)):(t("pick",{minDate:E,maxDate:null}),t("select",!0)):t("pick",T)};return ke(()=>i.date,async()=>{var _,S;(_=l.value)!=null&&_.contains(document.activeElement)&&(await lt(),(S=c.value)==null||S.focus())}),e({focus:g}),(_,S)=>(A(),W("table",{role:"grid","aria-label":f(s)("el.datepicker.monthTablePrompt"),class:k(f(n).b()),onClick:x,onMousemove:b},[X("tbody",{ref_key:"tbodyRef",ref:l},[(A(!0),W(nt,null,jt(f(m),(w,M)=>(A(),W("tr",{key:M},[(A(!0),W(nt,null,jt(w,(T,E)=>(A(),W("td",{key:E,ref_for:!0,ref:C=>y(T)&&(c.value=C),class:k(v(T)),"aria-selected":`${y(T)}`,"aria-label":f(s)(`el.datepicker.month${+T.text+1}`),tabindex:y(T)?0:-1,onKeydown:[Qt(vt(x,["prevent","stop"]),["space"]),Qt(vt(x,["prevent","stop"]),["enter"])]},[X("div",null,[X("span",dme,ze(f(s)("el.datepicker.months."+u.value[T.text])),1)])],42,ume))),128))]))),128))],512)],42,cme))}});var MT=Xe(hme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-month-table.vue"]]);const{date:pme,disabledDate:fme,parsedValue:mme}=_T,gme=Ye({date:pme,disabledDate:fme,parsedValue:mme}),vme=["aria-label"],yme=["aria-selected","tabindex","onKeydown"],bme={class:"cell"},xme={key:1},_me=ne({__name:"basic-year-table",props:gme,emits:["pick"],setup(r,{expose:e,emit:t}){const i=r,o=(g,v)=>{const y=Pt(String(g)).locale(v).startOf("year"),b=y.endOf("year").dayOfYear();return hc(b).map(x=>y.add(x,"day").toDate())},n=Pe("year-table"),{t:s,lang:a}=ir(),l=V(),c=V(),u=N(()=>Math.floor(i.date.year()/10)*10),d=()=>{var g;(g=c.value)==null||g.focus()},h=g=>{const v={},y=Pt().locale(a.value);return v.disabled=i.disabledDate?o(g,a.value).every(i.disabledDate):!1,v.current=il(i.parsedValue).findIndex(b=>b.year()===g)>=0,v.today=y.year()===g,v},p=g=>g===u.value&&i.date.year()<u.value&&i.date.year()>u.value+9||il(i.date).findIndex(v=>v.year()===g)>=0,m=g=>{const v=g.target.closest("td");if(v&&v.textContent){if(zs(v,"disabled"))return;const y=v.textContent||v.innerText;t("pick",Number(y))}};return ke(()=>i.date,async()=>{var g,v;(g=l.value)!=null&&g.contains(document.activeElement)&&(await lt(),(v=c.value)==null||v.focus())}),e({focus:d}),(g,v)=>(A(),W("table",{role:"grid","aria-label":f(s)("el.datepicker.yearTablePrompt"),class:k(f(n).b()),onClick:m},[X("tbody",{ref_key:"tbodyRef",ref:l},[(A(),W(nt,null,jt(3,(y,b)=>X("tr",{key:b},[(A(),W(nt,null,jt(4,(x,_)=>(A(),W(nt,{key:b+"_"+_},[b*4+_<10?(A(),W("td",{key:0,ref_for:!0,ref:S=>p(f(u)+b*4+_)&&(c.value=S),class:k(["available",h(f(u)+b*4+_)]),"aria-selected":`${p(f(u)+b*4+_)}`,tabindex:p(f(u)+b*4+_)?0:-1,onKeydown:[Qt(vt(m,["prevent","stop"]),["space"]),Qt(vt(m,["prevent","stop"]),["enter"])]},[X("span",bme,ze(f(u)+b*4+_),1)],42,yme)):(A(),W("td",xme))],64))),64))])),64))],512)],10,vme))}});var wme=Xe(_me,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-year-table.vue"]]);const Sme=["onClick"],Mme=["aria-label"],Tme=["aria-label"],Eme=["aria-label"],Cme=["aria-label"],Nme=ne({__name:"panel-date-pick",props:Zfe,emits:["pick","set-picker-option","panel-change"],setup(r,{emit:e}){const t=r,i=(ye,q,oe)=>!0,o=Pe("picker-panel"),n=Pe("date-picker"),s=du(),a=yo(),{t:l,lang:c}=ir(),u=ot("EP_PICKER_BASE"),d=ot(hb),{shortcuts:h,disabledDate:p,cellClassName:m,defaultTime:g}=u.props,v=Yr(u.props,"defaultValue"),y=V(),b=V(Pt().locale(c.value)),x=V(!1);let _=!1;const S=N(()=>Pt(g).locale(c.value)),w=N(()=>b.value.month()),M=N(()=>b.value.year()),T=V([]),E=V(null),C=V(null),B=ye=>T.value.length>0?i(ye,T.value,t.format||"HH:mm:ss"):!0,I=ye=>g&&!re.value&&!x.value&&!_?S.value.year(ye.year()).month(ye.month()).date(ye.date()):xe.value?ye.millisecond(0):ye.startOf("day"),L=(ye,...q)=>{if(!ye)e("pick",ye,...q);else if(it(ye)){const oe=ye.map(I);e("pick",oe,...q)}else e("pick",I(ye),...q);E.value=null,C.value=null,x.value=!1,_=!1},P=(ye,q)=>{if(H.value==="date"){ye=ye;let oe=t.parsedValue?t.parsedValue.year(ye.year()).month(ye.month()).date(ye.date()):ye;B(oe)||(oe=T.value[0][0].year(ye.year()).month(ye.month()).date(ye.date())),b.value=oe,L(oe,xe.value||q)}else H.value==="week"?L(ye.date):H.value==="dates"&&L(ye,!0)},U=ye=>{const q=ye?"add":"subtract";b.value=b.value[q](1,"month"),Ve("month")},G=ye=>{const q=b.value,oe=ye?"add":"subtract";b.value=R.value==="year"?q[oe](10,"year"):q[oe](1,"year"),Ve("year")},R=V("date"),F=N(()=>{const ye=l("el.datepicker.year");if(R.value==="year"){const q=Math.floor(M.value/10)*10;return ye?`${q} ${ye} - ${q+9} ${ye}`:`${q} - ${q+9}`}return`${M.value} ${ye}`}),O=ye=>{const q=St(ye.value)?ye.value():ye.value;if(q){_=!0,L(Pt(q).locale(c.value));return}ye.onClick&&ye.onClick({attrs:s,slots:a,emit:e})},H=N(()=>{const{type:ye}=t;return["week","month","year","dates"].includes(ye)?ye:"date"}),$=N(()=>H.value==="date"?R.value:H.value),j=N(()=>!!h.length),J=async ye=>{b.value=b.value.startOf("month").month(ye),H.value==="month"?L(b.value,!1):(R.value="date",["month","year","date","week"].includes(H.value)&&(L(b.value,!0),await lt(),Ue())),Ve("month")},ce=async ye=>{H.value==="year"?(b.value=b.value.startOf("year").year(ye),L(b.value,!1)):(b.value=b.value.year(ye),R.value="month",["month","year","date","week"].includes(H.value)&&(L(b.value,!0),await lt(),Ue())),Ve("year")},ve=async ye=>{R.value=ye,await lt(),Ue()},xe=N(()=>t.type==="datetime"||t.type==="datetimerange"),te=N(()=>xe.value||H.value==="dates"),Z=N(()=>p?t.parsedValue?it(t.parsedValue)?p(t.parsedValue[0].toDate()):p(t.parsedValue.toDate()):!0:!1),de=()=>{if(H.value==="dates")L(t.parsedValue);else{let ye=t.parsedValue;if(!ye){const q=Pt(g).locale(c.value),oe=Ie();ye=q.year(oe.year()).month(oe.month()).date(oe.date())}b.value=ye,L(ye)}},Ce=N(()=>p?p(Pt().locale(c.value).toDate()):!1),ue=()=>{const ye=Pt().locale(c.value).toDate();x.value=!0,(!p||!p(ye))&&B(ye)&&(b.value=Pt().locale(c.value),L(b.value))},D=N(()=>dF(t.format)),K=N(()=>uF(t.format)),re=N(()=>{if(C.value)return C.value;if(!(!t.parsedValue&&!v.value))return(t.parsedValue||b.value).format(D.value)}),ae=N(()=>{if(E.value)return E.value;if(!(!t.parsedValue&&!v.value))return(t.parsedValue||b.value).format(K.value)}),le=V(!1),Se=()=>{le.value=!0},Ae=()=>{le.value=!1},Ne=ye=>({hour:ye.hour(),minute:ye.minute(),second:ye.second(),year:ye.year(),month:ye.month(),date:ye.date()}),Me=(ye,q,oe)=>{const{hour:fe,minute:ie,second:De}=Ne(ye),et=t.parsedValue?t.parsedValue.hour(fe).minute(ie).second(De):ye;b.value=et,L(b.value,!0),oe||(le.value=q)},Le=ye=>{const q=Pt(ye,D.value).locale(c.value);if(q.isValid()&&B(q)){const{year:oe,month:fe,date:ie}=Ne(b.value);b.value=q.year(oe).month(fe).date(ie),C.value=null,le.value=!1,L(b.value,!0)}},je=ye=>{const q=Pt(ye,K.value).locale(c.value);if(q.isValid()){if(p&&p(q.toDate()))return;const{hour:oe,minute:fe,second:ie}=Ne(b.value);b.value=q.hour(oe).minute(fe).second(ie),E.value=null,L(b.value,!0)}},Y=ye=>Pt.isDayjs(ye)&&ye.isValid()&&(p?!p(ye.toDate()):!0),z=ye=>H.value==="dates"?ye.map(q=>q.format(t.format)):ye.format(t.format),me=ye=>Pt(ye,t.format).locale(c.value),Ie=()=>{const ye=Pt(v.value).locale(c.value);if(!v.value){const q=S.value;return Pt().hour(q.hour()).minute(q.minute()).second(q.second()).locale(c.value)}return ye},Ue=async()=>{var ye;["week","month","year","date"].includes(H.value)&&((ye=y.value)==null||ye.focus(),H.value==="week"&&$e(ft.down))},Re=ye=>{const{code:q}=ye;[ft.up,ft.down,ft.left,ft.right,ft.home,ft.end,ft.pageUp,ft.pageDown].includes(q)&&($e(q),ye.stopPropagation(),ye.preventDefault()),[ft.enter,ft.space,ft.numpadEnter].includes(q)&&E.value===null&&C.value===null&&(ye.preventDefault(),L(b.value,!1))},$e=ye=>{var q;const{up:oe,down:fe,left:ie,right:De,home:et,end:ht,pageUp:be,pageDown:mt}=ft,at={year:{[oe]:-4,[fe]:4,[ie]:-1,[De]:1,offset:(he,Ee)=>he.setFullYear(he.getFullYear()+Ee)},month:{[oe]:-4,[fe]:4,[ie]:-1,[De]:1,offset:(he,Ee)=>he.setMonth(he.getMonth()+Ee)},week:{[oe]:-1,[fe]:1,[ie]:-1,[De]:1,offset:(he,Ee)=>he.setDate(he.getDate()+Ee*7)},date:{[oe]:-7,[fe]:7,[ie]:-1,[De]:1,[et]:he=>-he.getDay(),[ht]:he=>-he.getDay()+6,[be]:he=>-new Date(he.getFullYear(),he.getMonth(),0).getDate(),[mt]:he=>new Date(he.getFullYear(),he.getMonth()+1,0).getDate(),offset:(he,Ee)=>he.setDate(he.getDate()+Ee)}},xt=b.value.toDate();for(;Math.abs(b.value.diff(xt,"year",!0))<1;){const he=at[$.value];if(!he)return;if(he.offset(xt,St(he[ye])?he[ye](xt):(q=he[ye])!=null?q:0),p&&p(xt))break;const Ee=Pt(xt).locale(c.value);b.value=Ee,e("pick",Ee,!0);break}},Ve=ye=>{e("panel-change",b.value.toDate(),ye,R.value)};return ke(()=>H.value,ye=>{if(["month","year"].includes(ye)){R.value=ye;return}R.value="date"},{immediate:!0}),ke(()=>R.value,()=>{d==null||d.updatePopper()}),ke(()=>v.value,ye=>{ye&&(b.value=Ie())},{immediate:!0}),ke(()=>t.parsedValue,ye=>{if(ye){if(H.value==="dates"||Array.isArray(ye))return;b.value=ye}else b.value=Ie()},{immediate:!0}),e("set-picker-option",["isValidValue",Y]),e("set-picker-option",["formatToString",z]),e("set-picker-option",["parseUserInput",me]),e("set-picker-option",["handleFocusPicker",Ue]),(ye,q)=>(A(),W("div",{class:k([f(o).b(),f(n).b(),{"has-sidebar":ye.$slots.sidebar||f(j),"has-time":f(xe)}])},[X("div",{class:k(f(o).e("body-wrapper"))},[Oe(ye.$slots,"sidebar",{class:k(f(o).e("sidebar"))}),f(j)?(A(),W("div",{key:0,class:k(f(o).e("sidebar"))},[(A(!0),W(nt,null,jt(f(h),(oe,fe)=>(A(),W("button",{key:fe,type:"button",class:k(f(o).e("shortcut")),onClick:ie=>O(oe)},ze(oe.text),11,Sme))),128))],2)):we("v-if",!0),X("div",{class:k(f(o).e("body"))},[f(xe)?(A(),W("div",{key:0,class:k(f(n).e("time-header"))},[X("span",{class:k(f(n).e("editor-wrap"))},[ee(f(Io),{placeholder:f(l)("el.datepicker.selectDate"),"model-value":f(ae),size:"small","validate-event":!1,onInput:q[0]||(q[0]=oe=>E.value=oe),onChange:je},null,8,["placeholder","model-value"])],2),At((A(),W("span",{class:k(f(n).e("editor-wrap"))},[ee(f(Io),{placeholder:f(l)("el.datepicker.selectTime"),"model-value":f(re),size:"small","validate-event":!1,onFocus:Se,onInput:q[1]||(q[1]=oe=>C.value=oe),onChange:Le},null,8,["placeholder","model-value"]),ee(f(xb),{visible:le.value,format:f(D),"parsed-value":b.value,onPick:Me},null,8,["visible","format","parsed-value"])],2)),[[f(fc),Ae]])],2)):we("v-if",!0),At(X("div",{class:k([f(n).e("header"),(R.value==="year"||R.value==="month")&&f(n).e("header--bordered")])},[X("span",{class:k(f(n).e("prev-btn"))},[X("button",{type:"button","aria-label":f(l)("el.datepicker.prevYear"),class:k(["d-arrow-left",f(o).e("icon-btn")]),onClick:q[2]||(q[2]=oe=>G(!1))},[ee(f(st),null,{default:se(()=>[ee(f(kh))]),_:1})],10,Mme),At(X("button",{type:"button","aria-label":f(l)("el.datepicker.prevMonth"),class:k([f(o).e("icon-btn"),"arrow-left"]),onClick:q[3]||(q[3]=oe=>U(!1))},[ee(f(st),null,{default:se(()=>[ee(f(ec))]),_:1})],10,Tme),[[nr,R.value==="date"]])],2),X("span",{role:"button",class:k(f(n).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:q[4]||(q[4]=Qt(oe=>ve("year"),["enter"])),onClick:q[5]||(q[5]=oe=>ve("year"))},ze(f(F)),35),At(X("span",{role:"button","aria-live":"polite",tabindex:"0",class:k([f(n).e("header-label"),{active:R.value==="month"}]),onKeydown:q[6]||(q[6]=Qt(oe=>ve("month"),["enter"])),onClick:q[7]||(q[7]=oe=>ve("month"))},ze(f(l)(`el.datepicker.month${f(w)+1}`)),35),[[nr,R.value==="date"]]),X("span",{class:k(f(n).e("next-btn"))},[At(X("button",{type:"button","aria-label":f(l)("el.datepicker.nextMonth"),class:k([f(o).e("icon-btn"),"arrow-right"]),onClick:q[8]||(q[8]=oe=>U(!0))},[ee(f(st),null,{default:se(()=>[ee(f(Ko))]),_:1})],10,Eme),[[nr,R.value==="date"]]),X("button",{type:"button","aria-label":f(l)("el.datepicker.nextYear"),class:k([f(o).e("icon-btn"),"d-arrow-right"]),onClick:q[9]||(q[9]=oe=>G(!0))},[ee(f(st),null,{default:se(()=>[ee(f(Ih))]),_:1})],10,Cme)],2)],2),[[nr,R.value!=="time"]]),X("div",{class:k(f(o).e("content")),onKeydown:Re},[R.value==="date"?(A(),_e(ST,{key:0,ref_key:"currentViewRef",ref:y,"selection-mode":f(H),date:b.value,"parsed-value":ye.parsedValue,"disabled-date":f(p),"cell-class-name":f(m),onPick:P},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):we("v-if",!0),R.value==="year"?(A(),_e(wme,{key:1,ref_key:"currentViewRef",ref:y,date:b.value,"disabled-date":f(p),"parsed-value":ye.parsedValue,onPick:ce},null,8,["date","disabled-date","parsed-value"])):we("v-if",!0),R.value==="month"?(A(),_e(MT,{key:2,ref_key:"currentViewRef",ref:y,date:b.value,"parsed-value":ye.parsedValue,"disabled-date":f(p),onPick:J},null,8,["date","parsed-value","disabled-date"])):we("v-if",!0)],34)],2)],2),At(X("div",{class:k(f(o).e("footer"))},[At(ee(f(_o),{text:"",size:"small",class:k(f(o).e("link-btn")),disabled:f(Ce),onClick:ue},{default:se(()=>[rr(ze(f(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[nr,f(H)!=="dates"]]),ee(f(_o),{plain:"",size:"small",class:k(f(o).e("link-btn")),disabled:f(Z),onClick:de},{default:se(()=>[rr(ze(f(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[nr,f(te)&&R.value==="date"]])],2))}});var Ame=Xe(Nme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-pick.vue"]]);const Rme=Ye({...T4,...E4}),Lme=r=>{const{emit:e}=It(),t=du(),i=yo();return o=>{const n=St(o.value)?o.value():o.value;if(n){e("pick",[Pt(n[0]).locale(r.value),Pt(n[1]).locale(r.value)]);return}o.onClick&&o.onClick({attrs:t,slots:i,emit:e})}},A4=(r,{defaultValue:e,leftDate:t,rightDate:i,unit:o,onParsedValueChanged:n})=>{const{emit:s}=It(),{pickerNs:a}=ot(xT),l=Pe("date-range-picker"),{t:c,lang:u}=ir(),d=Lme(u),h=V(),p=V(),m=V({endDate:null,selecting:!1}),g=x=>{m.value=x},v=(x=!1)=>{const _=f(h),S=f(p);wT([_,S])&&s("pick",[_,S],x)},y=x=>{m.value.selecting=x,x||(m.value.endDate=null)},b=()=>{const[x,_]=N4(f(e),{lang:f(u),unit:o,unlinkPanels:r.unlinkPanels});h.value=void 0,p.value=void 0,t.value=x,i.value=_};return ke(e,x=>{x&&b()},{immediate:!0}),ke(()=>r.parsedValue,x=>{if(it(x)&&x.length===2){const[_,S]=x;h.value=_,t.value=_,p.value=S,n(f(h),f(p))}else b()},{immediate:!0}),{minDate:h,maxDate:p,rangeState:m,lang:u,ppNs:a,drpNs:l,handleChangeRange:g,handleRangeConfirm:v,handleShortcutClick:d,onSelect:y,t:c}},Ome=["onClick"],kme=["disabled"],Ime=["disabled"],Pme=["disabled"],Dme=["disabled"],Cb="month",Bme=ne({__name:"panel-date-range",props:Rme,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(r,{emit:e}){const t=r,i=ot("EP_PICKER_BASE"),{disabledDate:o,cellClassName:n,format:s,defaultTime:a,clearable:l}=i.props,c=Yr(i.props,"shortcuts"),u=Yr(i.props,"defaultValue"),{lang:d}=ir(),h=V(Pt().locale(d.value)),p=V(Pt().locale(d.value).add(1,Cb)),{minDate:m,maxDate:g,rangeState:v,ppNs:y,drpNs:b,handleChangeRange:x,handleRangeConfirm:_,handleShortcutClick:S,onSelect:w,t:M}=A4(t,{defaultValue:u,leftDate:h,rightDate:p,unit:Cb,onParsedValueChanged:q}),T=V({min:null,max:null}),E=V({min:null,max:null}),C=N(()=>`${h.value.year()} ${M("el.datepicker.year")} ${M(`el.datepicker.month${h.value.month()+1}`)}`),B=N(()=>`${p.value.year()} ${M("el.datepicker.year")} ${M(`el.datepicker.month${p.value.month()+1}`)}`),I=N(()=>h.value.year()),L=N(()=>h.value.month()),P=N(()=>p.value.year()),U=N(()=>p.value.month()),G=N(()=>!!c.value.length),R=N(()=>T.value.min!==null?T.value.min:m.value?m.value.format(j.value):""),F=N(()=>T.value.max!==null?T.value.max:g.value||m.value?(g.value||m.value).format(j.value):""),O=N(()=>E.value.min!==null?E.value.min:m.value?m.value.format($.value):""),H=N(()=>E.value.max!==null?E.value.max:g.value||m.value?(g.value||m.value).format($.value):""),$=N(()=>dF(s)),j=N(()=>uF(s)),J=oe=>wT(oe)&&(o?!o(oe[0].toDate())&&!o(oe[1].toDate()):!0),ce=()=>{h.value=h.value.subtract(1,"year"),t.unlinkPanels||(p.value=h.value.add(1,"month")),D("year")},ve=()=>{h.value=h.value.subtract(1,"month"),t.unlinkPanels||(p.value=h.value.add(1,"month")),D("month")},xe=()=>{t.unlinkPanels?p.value=p.value.add(1,"year"):(h.value=h.value.add(1,"year"),p.value=h.value.add(1,"month")),D("year")},te=()=>{t.unlinkPanels?p.value=p.value.add(1,"month"):(h.value=h.value.add(1,"month"),p.value=h.value.add(1,"month")),D("month")},Z=()=>{h.value=h.value.add(1,"year"),D("year")},de=()=>{h.value=h.value.add(1,"month"),D("month")},Ce=()=>{p.value=p.value.subtract(1,"year"),D("year")},ue=()=>{p.value=p.value.subtract(1,"month"),D("month")},D=oe=>{e("panel-change",[h.value.toDate(),p.value.toDate()],oe)},K=N(()=>{const oe=(L.value+1)%12,fe=L.value+1>=12?1:0;return t.unlinkPanels&&new Date(I.value+fe,oe)<new Date(P.value,U.value)}),re=N(()=>t.unlinkPanels&&P.value*12+U.value-(I.value*12+L.value+1)>=12),ae=N(()=>!(m.value&&g.value&&!v.value.selecting&&wT([m.value,g.value]))),le=N(()=>t.type==="datetime"||t.type==="datetimerange"),Se=(oe,fe)=>{if(oe)return a?Pt(a[fe]||a).locale(d.value).year(oe.year()).month(oe.month()).date(oe.date()):oe},Ae=(oe,fe=!0)=>{const ie=oe.minDate,De=oe.maxDate,et=Se(ie,0),ht=Se(De,1);g.value===ht&&m.value===et||(e("calendar-change",[ie.toDate(),De&&De.toDate()]),g.value=ht,m.value=et,!(!fe||le.value)&&_())},Ne=V(!1),Me=V(!1),Le=()=>{Ne.value=!1},je=()=>{Me.value=!1},Y=(oe,fe)=>{T.value[fe]=oe;const ie=Pt(oe,j.value).locale(d.value);if(ie.isValid()){if(o&&o(ie.toDate()))return;fe==="min"?(h.value=ie,m.value=(m.value||h.value).year(ie.year()).month(ie.month()).date(ie.date()),!t.unlinkPanels&&(!g.value||g.value.isBefore(m.value))&&(p.value=ie.add(1,"month"),g.value=m.value.add(1,"month"))):(p.value=ie,g.value=(g.value||p.value).year(ie.year()).month(ie.month()).date(ie.date()),!t.unlinkPanels&&(!m.value||m.value.isAfter(g.value))&&(h.value=ie.subtract(1,"month"),m.value=g.value.subtract(1,"month")))}},z=(oe,fe)=>{T.value[fe]=null},me=(oe,fe)=>{E.value[fe]=oe;const ie=Pt(oe,$.value).locale(d.value);ie.isValid()&&(fe==="min"?(Ne.value=!0,m.value=(m.value||h.value).hour(ie.hour()).minute(ie.minute()).second(ie.second()),(!g.value||g.value.isBefore(m.value))&&(g.value=m.value)):(Me.value=!0,g.value=(g.value||p.value).hour(ie.hour()).minute(ie.minute()).second(ie.second()),p.value=g.value,g.value&&g.value.isBefore(m.value)&&(m.value=g.value)))},Ie=(oe,fe)=>{E.value[fe]=null,fe==="min"?(h.value=m.value,Ne.value=!1):(p.value=g.value,Me.value=!1)},Ue=(oe,fe,ie)=>{E.value.min||(oe&&(h.value=oe,m.value=(m.value||h.value).hour(oe.hour()).minute(oe.minute()).second(oe.second())),ie||(Ne.value=fe),(!g.value||g.value.isBefore(m.value))&&(g.value=m.value,p.value=oe))},Re=(oe,fe,ie)=>{E.value.max||(oe&&(p.value=oe,g.value=(g.value||p.value).hour(oe.hour()).minute(oe.minute()).second(oe.second())),ie||(Me.value=fe),g.value&&g.value.isBefore(m.value)&&(m.value=g.value))},$e=()=>{h.value=N4(f(u),{lang:f(d),unit:"month",unlinkPanels:t.unlinkPanels})[0],p.value=h.value.add(1,"month"),e("pick",null)},Ve=oe=>it(oe)?oe.map(fe=>fe.format(s)):oe.format(s),ye=oe=>it(oe)?oe.map(fe=>Pt(fe,s).locale(d.value)):Pt(oe,s).locale(d.value);function q(oe,fe){if(t.unlinkPanels&&fe){const ie=(oe==null?void 0:oe.year())||0,De=(oe==null?void 0:oe.month())||0,et=fe.year(),ht=fe.month();p.value=ie===et&&De===ht?fe.add(1,Cb):fe}else p.value=h.value.add(1,Cb),fe&&(p.value=p.value.hour(fe.hour()).minute(fe.minute()).second(fe.second()))}return e("set-picker-option",["isValidValue",J]),e("set-picker-option",["parseUserInput",ye]),e("set-picker-option",["formatToString",Ve]),e("set-picker-option",["handleClear",$e]),(oe,fe)=>(A(),W("div",{class:k([f(y).b(),f(b).b(),{"has-sidebar":oe.$slots.sidebar||f(G),"has-time":f(le)}])},[X("div",{class:k(f(y).e("body-wrapper"))},[Oe(oe.$slots,"sidebar",{class:k(f(y).e("sidebar"))}),f(G)?(A(),W("div",{key:0,class:k(f(y).e("sidebar"))},[(A(!0),W(nt,null,jt(f(c),(ie,De)=>(A(),W("button",{key:De,type:"button",class:k(f(y).e("shortcut")),onClick:et=>f(S)(ie)},ze(ie.text),11,Ome))),128))],2)):we("v-if",!0),X("div",{class:k(f(y).e("body"))},[f(le)?(A(),W("div",{key:0,class:k(f(b).e("time-header"))},[X("span",{class:k(f(b).e("editors-wrap"))},[X("span",{class:k(f(b).e("time-picker-wrap"))},[ee(f(Io),{size:"small",disabled:f(v).selecting,placeholder:f(M)("el.datepicker.startDate"),class:k(f(b).e("editor")),"model-value":f(R),"validate-event":!1,onInput:fe[0]||(fe[0]=ie=>Y(ie,"min")),onChange:fe[1]||(fe[1]=ie=>z(ie,"min"))},null,8,["disabled","placeholder","class","model-value"])],2),At((A(),W("span",{class:k(f(b).e("time-picker-wrap"))},[ee(f(Io),{size:"small",class:k(f(b).e("editor")),disabled:f(v).selecting,placeholder:f(M)("el.datepicker.startTime"),"model-value":f(O),"validate-event":!1,onFocus:fe[2]||(fe[2]=ie=>Ne.value=!0),onInput:fe[3]||(fe[3]=ie=>me(ie,"min")),onChange:fe[4]||(fe[4]=ie=>Ie(ie,"min"))},null,8,["class","disabled","placeholder","model-value"]),ee(f(xb),{visible:Ne.value,format:f($),"datetime-role":"start","parsed-value":h.value,onPick:Ue},null,8,["visible","format","parsed-value"])],2)),[[f(fc),Le]])],2),X("span",null,[ee(f(st),null,{default:se(()=>[ee(f(Ko))]),_:1})]),X("span",{class:k([f(b).e("editors-wrap"),"is-right"])},[X("span",{class:k(f(b).e("time-picker-wrap"))},[ee(f(Io),{size:"small",class:k(f(b).e("editor")),disabled:f(v).selecting,placeholder:f(M)("el.datepicker.endDate"),"model-value":f(F),readonly:!f(m),"validate-event":!1,onInput:fe[5]||(fe[5]=ie=>Y(ie,"max")),onChange:fe[6]||(fe[6]=ie=>z(ie,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"])],2),At((A(),W("span",{class:k(f(b).e("time-picker-wrap"))},[ee(f(Io),{size:"small",class:k(f(b).e("editor")),disabled:f(v).selecting,placeholder:f(M)("el.datepicker.endTime"),"model-value":f(H),readonly:!f(m),"validate-event":!1,onFocus:fe[7]||(fe[7]=ie=>f(m)&&(Me.value=!0)),onInput:fe[8]||(fe[8]=ie=>me(ie,"max")),onChange:fe[9]||(fe[9]=ie=>Ie(ie,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"]),ee(f(xb),{"datetime-role":"end",visible:Me.value,format:f($),"parsed-value":p.value,onPick:Re},null,8,["visible","format","parsed-value"])],2)),[[f(fc),je]])],2)],2)):we("v-if",!0),X("div",{class:k([[f(y).e("content"),f(b).e("content")],"is-left"])},[X("div",{class:k(f(b).e("header"))},[X("button",{type:"button",class:k([f(y).e("icon-btn"),"d-arrow-left"]),onClick:ce},[ee(f(st),null,{default:se(()=>[ee(f(kh))]),_:1})],2),X("button",{type:"button",class:k([f(y).e("icon-btn"),"arrow-left"]),onClick:ve},[ee(f(st),null,{default:se(()=>[ee(f(ec))]),_:1})],2),oe.unlinkPanels?(A(),W("button",{key:0,type:"button",disabled:!f(re),class:k([[f(y).e("icon-btn"),{"is-disabled":!f(re)}],"d-arrow-right"]),onClick:Z},[ee(f(st),null,{default:se(()=>[ee(f(Ih))]),_:1})],10,kme)):we("v-if",!0),oe.unlinkPanels?(A(),W("button",{key:1,type:"button",disabled:!f(K),class:k([[f(y).e("icon-btn"),{"is-disabled":!f(K)}],"arrow-right"]),onClick:de},[ee(f(st),null,{default:se(()=>[ee(f(Ko))]),_:1})],10,Ime)):we("v-if",!0),X("div",null,ze(f(C)),1)],2),ee(ST,{"selection-mode":"range",date:h.value,"min-date":f(m),"max-date":f(g),"range-state":f(v),"disabled-date":f(o),"cell-class-name":f(n),onChangerange:f(x),onPick:Ae,onSelect:f(w)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),X("div",{class:k([[f(y).e("content"),f(b).e("content")],"is-right"])},[X("div",{class:k(f(b).e("header"))},[oe.unlinkPanels?(A(),W("button",{key:0,type:"button",disabled:!f(re),class:k([[f(y).e("icon-btn"),{"is-disabled":!f(re)}],"d-arrow-left"]),onClick:Ce},[ee(f(st),null,{default:se(()=>[ee(f(kh))]),_:1})],10,Pme)):we("v-if",!0),oe.unlinkPanels?(A(),W("button",{key:1,type:"button",disabled:!f(K),class:k([[f(y).e("icon-btn"),{"is-disabled":!f(K)}],"arrow-left"]),onClick:ue},[ee(f(st),null,{default:se(()=>[ee(f(ec))]),_:1})],10,Dme)):we("v-if",!0),X("button",{type:"button",class:k([f(y).e("icon-btn"),"d-arrow-right"]),onClick:xe},[ee(f(st),null,{default:se(()=>[ee(f(Ih))]),_:1})],2),X("button",{type:"button",class:k([f(y).e("icon-btn"),"arrow-right"]),onClick:te},[ee(f(st),null,{default:se(()=>[ee(f(Ko))]),_:1})],2),X("div",null,ze(f(B)),1)],2),ee(ST,{"selection-mode":"range",date:p.value,"min-date":f(m),"max-date":f(g),"range-state":f(v),"disabled-date":f(o),"cell-class-name":f(n),onChangerange:f(x),onPick:Ae,onSelect:f(w)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),f(le)?(A(),W("div",{key:0,class:k(f(y).e("footer"))},[f(l)?(A(),_e(f(_o),{key:0,text:"",size:"small",class:k(f(y).e("link-btn")),onClick:$e},{default:se(()=>[rr(ze(f(M)("el.datepicker.clear")),1)]),_:1},8,["class"])):we("v-if",!0),ee(f(_o),{plain:"",size:"small",class:k(f(y).e("link-btn")),disabled:f(ae),onClick:fe[10]||(fe[10]=ie=>f(_)(!1))},{default:se(()=>[rr(ze(f(M)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2)):we("v-if",!0)],2))}});var Fme=Xe(Bme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-range.vue"]]);const Ume=Ye({...E4}),zme=["pick","set-picker-option"],Vme=({unlinkPanels:r,leftDate:e,rightDate:t})=>{const{t:i}=ir(),o=()=>{e.value=e.value.subtract(1,"year"),r.value||(t.value=t.value.subtract(1,"year"))},n=()=>{r.value||(e.value=e.value.add(1,"year")),t.value=t.value.add(1,"year")},s=()=>{e.value=e.value.add(1,"year")},a=()=>{t.value=t.value.subtract(1,"year")},l=N(()=>`${e.value.year()} ${i("el.datepicker.year")}`),c=N(()=>`${t.value.year()} ${i("el.datepicker.year")}`),u=N(()=>e.value.year()),d=N(()=>t.value.year()===e.value.year()?e.value.year()+1:t.value.year());return{leftPrevYear:o,rightNextYear:n,leftNextYear:s,rightPrevYear:a,leftLabel:l,rightLabel:c,leftYear:u,rightYear:d}},Gme=["onClick"],Hme=["disabled"],jme=["disabled"],Nb="year",$me=ne({name:"DatePickerMonthRange"}),Wme=ne({...$me,props:Ume,emits:zme,setup(r,{emit:e}){const t=r,{lang:i}=ir(),o=ot("EP_PICKER_BASE"),{shortcuts:n,disabledDate:s,format:a}=o.props,l=Yr(o.props,"defaultValue"),c=V(Pt().locale(i.value)),u=V(Pt().locale(i.value).add(1,Nb)),{minDate:d,maxDate:h,rangeState:p,ppNs:m,drpNs:g,handleChangeRange:v,handleRangeConfirm:y,handleShortcutClick:b,onSelect:x}=A4(t,{defaultValue:l,leftDate:c,rightDate:u,unit:Nb,onParsedValueChanged:G}),_=N(()=>!!n.length),{leftPrevYear:S,rightNextYear:w,leftNextYear:M,rightPrevYear:T,leftLabel:E,rightLabel:C,leftYear:B,rightYear:I}=Vme({unlinkPanels:Yr(t,"unlinkPanels"),leftDate:c,rightDate:u}),L=N(()=>t.unlinkPanels&&I.value>B.value+1),P=(R,F=!0)=>{const O=R.minDate,H=R.maxDate;h.value===H&&d.value===O||(h.value=H,d.value=O,F&&y())},U=R=>R.map(F=>F.format(a));function G(R,F){if(t.unlinkPanels&&F){const O=(R==null?void 0:R.year())||0,H=F.year();u.value=O===H?F.add(1,Nb):F}else u.value=c.value.add(1,Nb)}return e("set-picker-option",["formatToString",U]),(R,F)=>(A(),W("div",{class:k([f(m).b(),f(g).b(),{"has-sidebar":!!R.$slots.sidebar||f(_)}])},[X("div",{class:k(f(m).e("body-wrapper"))},[Oe(R.$slots,"sidebar",{class:k(f(m).e("sidebar"))}),f(_)?(A(),W("div",{key:0,class:k(f(m).e("sidebar"))},[(A(!0),W(nt,null,jt(f(n),(O,H)=>(A(),W("button",{key:H,type:"button",class:k(f(m).e("shortcut")),onClick:$=>f(b)(O)},ze(O.text),11,Gme))),128))],2)):we("v-if",!0),X("div",{class:k(f(m).e("body"))},[X("div",{class:k([[f(m).e("content"),f(g).e("content")],"is-left"])},[X("div",{class:k(f(g).e("header"))},[X("button",{type:"button",class:k([f(m).e("icon-btn"),"d-arrow-left"]),onClick:F[0]||(F[0]=(...O)=>f(S)&&f(S)(...O))},[ee(f(st),null,{default:se(()=>[ee(f(kh))]),_:1})],2),R.unlinkPanels?(A(),W("button",{key:0,type:"button",disabled:!f(L),class:k([[f(m).e("icon-btn"),{[f(m).is("disabled")]:!f(L)}],"d-arrow-right"]),onClick:F[1]||(F[1]=(...O)=>f(M)&&f(M)(...O))},[ee(f(st),null,{default:se(()=>[ee(f(Ih))]),_:1})],10,Hme)):we("v-if",!0),X("div",null,ze(f(E)),1)],2),ee(MT,{"selection-mode":"range",date:c.value,"min-date":f(d),"max-date":f(h),"range-state":f(p),"disabled-date":f(s),onChangerange:f(v),onPick:P,onSelect:f(x)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),X("div",{class:k([[f(m).e("content"),f(g).e("content")],"is-right"])},[X("div",{class:k(f(g).e("header"))},[R.unlinkPanels?(A(),W("button",{key:0,type:"button",disabled:!f(L),class:k([[f(m).e("icon-btn"),{"is-disabled":!f(L)}],"d-arrow-left"]),onClick:F[2]||(F[2]=(...O)=>f(T)&&f(T)(...O))},[ee(f(st),null,{default:se(()=>[ee(f(kh))]),_:1})],10,jme)):we("v-if",!0),X("button",{type:"button",class:k([f(m).e("icon-btn"),"d-arrow-right"]),onClick:F[3]||(F[3]=(...O)=>f(w)&&f(w)(...O))},[ee(f(st),null,{default:se(()=>[ee(f(Ih))]),_:1})],2),X("div",null,ze(f(C)),1)],2),ee(MT,{"selection-mode":"range",date:u.value,"min-date":f(d),"max-date":f(h),"range-state":f(p),"disabled-date":f(s),onChangerange:f(v),onPick:P,onSelect:f(x)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var qme=Xe(Wme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-month-range.vue"]]);const Xme=function(r){switch(r){case"daterange":case"datetimerange":return Fme;case"monthrange":return qme;default:return Ame}};Pt.extend(FF),Pt.extend(Ufe),Pt.extend(ZM),Pt.extend(Vfe),Pt.extend(Hfe),Pt.extend($fe),Pt.extend(qfe),Pt.extend(Kfe);var Kme=ne({name:"ElDatePicker",install:null,props:Yfe,emits:["update:modelValue"],setup(r,{expose:e,emit:t,slots:i}){const o=Pe("picker-panel");Wt("ElPopperOptions",ur(Yr(r,"popperOptions"))),Wt(xT,{slots:i,pickerNs:o});const n=V();e({focus:(a=!0)=>{var l;(l=n.value)==null||l.focus(a)},handleOpen:()=>{var a;(a=n.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=n.value)==null||a.handleClose()}});const s=a=>{t("update:modelValue",a)};return()=>{var a;const l=(a=r.format)!=null?a:Iue[r.type]||Yh,c=Xme(r.type);return ee(yF,$t(r,{format:l,type:r.type,ref:n,"onUpdate:modelValue":s}),{default:u=>ee(c,u,null),"range-separator":i["range-separator"]})}}});const Ab=Kme;Ab.install=r=>{r.component(Ab.name,Ab)};const Yme=Ab,TT=Symbol("elDescriptions");var eg=ne({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:ot(TT,{})}},render(){var r,e,t,i,o,n;const s=Voe(this.cell),{border:a,direction:l}=this.descriptions,c=l==="vertical",u=((t=(e=(r=this.cell)==null?void 0:r.children)==null?void 0:e.label)==null?void 0:t.call(e))||s.label,d=(n=(o=(i=this.cell)==null?void 0:i.children)==null?void 0:o.default)==null?void 0:n.call(o),h=s.span,p=s.align?`is-${s.align}`:"",m=s.labelAlign?`is-${s.labelAlign}`:p,g=s.className,v=s.labelClassName,y={width:hi(s.width),minWidth:hi(s.minWidth)},b=Pe("descriptions");switch(this.type){case"label":return pt(this.tag,{style:y,class:[b.e("cell"),b.e("label"),b.is("bordered-label",a),b.is("vertical-label",c),m,v],colSpan:c?h:1},u);case"content":return pt(this.tag,{style:y,class:[b.e("cell"),b.e("content"),b.is("bordered-content",a),b.is("vertical-content",c),p,g],colSpan:c?h:h*2-1},d);default:return pt("td",{style:y,class:[b.e("cell"),p],colSpan:h},[Mi(u)?void 0:pt("span",{class:[b.e("label"),v]},u),pt("span",{class:[b.e("content"),g]},d)])}}});const Jme=Ye({row:{type:Array,default:()=>[]}}),Zme={key:1},Qme=ne({name:"ElDescriptionsRow"}),ege=ne({...Qme,props:Jme,setup(r){const e=ot(TT,{});return(t,i)=>f(e).direction==="vertical"?(A(),W(nt,{key:0},[X("tr",null,[(A(!0),W(nt,null,jt(t.row,(o,n)=>(A(),_e(f(eg),{key:`tr1-${n}`,cell:o,tag:"th",type:"label"},null,8,["cell"]))),128))]),X("tr",null,[(A(!0),W(nt,null,jt(t.row,(o,n)=>(A(),_e(f(eg),{key:`tr2-${n}`,cell:o,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(A(),W("tr",Zme,[(A(!0),W(nt,null,jt(t.row,(o,n)=>(A(),W(nt,{key:`tr3-${n}`},[f(e).border?(A(),W(nt,{key:0},[ee(f(eg),{cell:o,tag:"td",type:"label"},null,8,["cell"]),ee(f(eg),{cell:o,tag:"td",type:"content"},null,8,["cell"])],64)):(A(),_e(f(eg),{key:1,cell:o,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var tge=Xe(ege,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const rge=Ye({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:bo,title:{type:String,default:""},extra:{type:String,default:""}}),ige=ne({name:"ElDescriptions"}),oge=ne({...ige,props:rge,setup(r){const e=r,t=Pe("descriptions"),i=Ci(),o=yo();Wt(TT,e);const n=N(()=>[t.b(),t.m(i.value)]),s=(l,c,u,d=!1)=>(l.props||(l.props={}),c>u&&(l.props.span=u),d&&(l.props.span=c),l),a=()=>{var l;const c=Ph((l=o.default)==null?void 0:l.call(o)).filter(m=>{var g;return((g=m==null?void 0:m.type)==null?void 0:g.name)==="ElDescriptionsItem"}),u=[];let d=[],h=e.column,p=0;return c.forEach((m,g)=>{var v;const y=((v=m.props)==null?void 0:v.span)||1;if(g<c.length-1&&(p+=y>h?h:y),g===c.length-1){const b=e.column-p%e.column;d.push(s(m,b,h,!0)),u.push(d);return}y<h?(h-=y,d.push(m)):(d.push(s(m,y,h)),u.push(d),h=e.column,d=[])}),u};return(l,c)=>(A(),W("div",{class:k(f(n))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(A(),W("div",{key:0,class:k(f(t).e("header"))},[X("div",{class:k(f(t).e("title"))},[Oe(l.$slots,"title",{},()=>[rr(ze(l.title),1)])],2),X("div",{class:k(f(t).e("extra"))},[Oe(l.$slots,"extra",{},()=>[rr(ze(l.extra),1)])],2)],2)):we("v-if",!0),X("div",{class:k(f(t).e("body"))},[X("table",{class:k([f(t).e("table"),f(t).is("bordered",l.border)])},[X("tbody",null,[(A(!0),W(nt,null,jt(a(),(u,d)=>(A(),_e(tge,{key:d,row:u},null,8,["row"]))),128))])],2)],2)],2))}});var nge=Xe(oge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]),R4=ne({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const sge=Bt(nge,{DescriptionsItem:R4}),age=ii(R4),lge=Ye({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Te([String,Array,Object])},zIndex:{type:Te([String,Number])}}),cge={click:r=>r instanceof MouseEvent},uge="overlay";var dge=ne({name:"ElOverlay",props:lge,emits:cge,setup(r,{slots:e,emit:t}){const i=Pe(uge),o=l=>{t("click",l)},{onClick:n,onMousedown:s,onMouseup:a}=TM(r.customMaskEvent?void 0:o);return()=>r.mask?ee("div",{class:[i.b(),r.overlayClass],style:{zIndex:r.zIndex},onClick:n,onMousedown:s,onMouseup:a},[Oe(e,"default")],ms.STYLE|ms.CLASS|ms.PROPS,["onClick","onMouseup","onMousedown"]):pt("div",{class:r.overlayClass,style:{zIndex:r.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Oe(e,"default")])}});const ET=dge,L4=Symbol("dialogInjectionKey"),O4=Ye({center:Boolean,alignCenter:Boolean,closeIcon:{type:Lr},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),hge={close:()=>!0},pge=["aria-level"],fge=["aria-label"],mge=["id"],gge=ne({name:"ElDialogContent"}),vge=ne({...gge,props:O4,emits:hge,setup(r){const e=r,{t}=ir(),{Close:i}=uD,{dialogRef:o,headerRef:n,bodyId:s,ns:a,style:l}=ot(L4),{focusTrapRef:c}=ot(HM),u=N(()=>[a.b(),a.is("fullscreen",e.fullscreen),a.is("draggable",e.draggable),a.is("align-center",e.alignCenter),{[a.m("center")]:e.center},e.customClass]),d=Hy(c,o),h=N(()=>e.draggable);return fD(o,n,h),(p,m)=>(A(),W("div",{ref:f(d),class:k(f(u)),style:ct(f(l)),tabindex:"-1"},[X("header",{ref_key:"headerRef",ref:n,class:k(f(a).e("header"))},[Oe(p.$slots,"header",{},()=>[X("span",{role:"heading","aria-level":p.ariaLevel,class:k(f(a).e("title"))},ze(p.title),11,pge)]),p.showClose?(A(),W("button",{key:0,"aria-label":f(t)("el.dialog.close"),class:k(f(a).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=g=>p.$emit("close"))},[ee(f(st),{class:k(f(a).e("close"))},{default:se(()=>[(A(),_e(Ht(p.closeIcon||f(i))))]),_:1},8,["class"])],10,fge)):we("v-if",!0)],2),X("div",{id:f(s),class:k(f(a).e("body"))},[Oe(p.$slots,"default")],10,mge),p.$slots.footer?(A(),W("footer",{key:0,class:k(f(a).e("footer"))},[Oe(p.$slots,"footer")],2)):we("v-if",!0)],6))}});var yge=Xe(vge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const k4=Ye({...O4,appendToBody:Boolean,beforeClose:{type:Te(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),I4={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Vt]:r=>Ti(r),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},P4=(r,e)=>{const t=It().emit,{nextZIndex:i}=Hh();let o="";const n=bs(),s=bs(),a=V(!1),l=V(!1),c=V(!1),u=V(r.zIndex||i());let d,h;const p=rb("namespace",Im),m=N(()=>{const L={},P=`--${p.value}-dialog`;return r.fullscreen||(r.top&&(L[`${P}-margin-top`]=r.top),r.width&&(L[`${P}-width`]=hi(r.width))),L}),g=N(()=>r.alignCenter?{display:"flex"}:{});function v(){t("opened")}function y(){t("closed"),t(Vt,!1),r.destroyOnClose&&(c.value=!1)}function b(){t("close")}function x(){h==null||h(),d==null||d(),r.openDelay&&r.openDelay>0?{stop:d}=vu(()=>M(),r.openDelay):M()}function _(){d==null||d(),h==null||h(),r.closeDelay&&r.closeDelay>0?{stop:h}=vu(()=>T(),r.closeDelay):T()}function S(){function L(P){P||(l.value=!0,a.value=!1)}r.beforeClose?r.beforeClose(L):_()}function w(){r.closeOnClickModal&&S()}function M(){Jt&&(a.value=!0)}function T(){a.value=!1}function E(){t("openAutoFocus")}function C(){t("closeAutoFocus")}function B(L){var P;((P=L.detail)==null?void 0:P.focusReason)==="pointer"&&L.preventDefault()}r.lockScroll&&vD(a);function I(){r.closeOnPressEscape&&S()}return ke(()=>r.modelValue,L=>{L?(l.value=!1,x(),c.value=!0,u.value=r.zIndex?u.value++:i(),lt(()=>{t("open"),e.value&&(e.value.scrollTop=0)})):a.value&&_()}),ke(()=>r.fullscreen,L=>{e.value&&(L?(o=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=o)}),Rt(()=>{r.modelValue&&(a.value=!0,c.value=!0,x())}),{afterEnter:v,afterLeave:y,beforeLeave:b,handleClose:S,onModalClick:w,close:_,doClose:T,onOpenAutoFocus:E,onCloseAutoFocus:C,onCloseRequested:I,onFocusoutPrevented:B,titleId:n,bodyId:s,closed:l,style:m,overlayDialogStyle:g,rendered:c,visible:a,zIndex:u}},bge=["aria-label","aria-labelledby","aria-describedby"],xge=ne({name:"ElDialog",inheritAttrs:!1}),_ge=ne({...xge,props:k4,emits:I4,setup(r,{expose:e}){const t=r,i=yo();ga({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},N(()=>!!i.title)),ga({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},N(()=>!!t.customClass));const o=Pe("dialog"),n=V(),s=V(),a=V(),{visible:l,titleId:c,bodyId:u,style:d,overlayDialogStyle:h,rendered:p,zIndex:m,afterEnter:g,afterLeave:v,beforeLeave:y,handleClose:b,onModalClick:x,onOpenAutoFocus:_,onCloseAutoFocus:S,onCloseRequested:w,onFocusoutPrevented:M}=P4(t,n);Wt(L4,{dialogRef:n,headerRef:s,bodyId:u,ns:o,rendered:p,style:d});const T=TM(x),E=N(()=>t.draggable&&!t.fullscreen);return e({visible:l,dialogContentRef:a}),(C,B)=>(A(),_e(sm,{to:"body",disabled:!C.appendToBody},[ee(fi,{name:"dialog-fade",onAfterEnter:f(g),onAfterLeave:f(v),onBeforeLeave:f(y),persisted:""},{default:se(()=>[At(ee(f(ET),{"custom-mask-event":"",mask:C.modal,"overlay-class":C.modalClass,"z-index":f(m)},{default:se(()=>[X("div",{role:"dialog","aria-modal":"true","aria-label":C.title||void 0,"aria-labelledby":C.title?void 0:f(c),"aria-describedby":f(u),class:k(`${f(o).namespace.value}-overlay-dialog`),style:ct(f(h)),onClick:B[0]||(B[0]=(...I)=>f(T).onClick&&f(T).onClick(...I)),onMousedown:B[1]||(B[1]=(...I)=>f(T).onMousedown&&f(T).onMousedown(...I)),onMouseup:B[2]||(B[2]=(...I)=>f(T).onMouseup&&f(T).onMouseup(...I))},[ee(f(db),{loop:"",trapped:f(l),"focus-start-el":"container",onFocusAfterTrapped:f(_),onFocusAfterReleased:f(S),onFocusoutPrevented:f(M),onReleaseRequested:f(w)},{default:se(()=>[f(p)?(A(),_e(yge,$t({key:0,ref_key:"dialogContentRef",ref:a},C.$attrs,{"custom-class":C.customClass,center:C.center,"align-center":C.alignCenter,"close-icon":C.closeIcon,draggable:f(E),fullscreen:C.fullscreen,"show-close":C.showClose,title:C.title,"aria-level":C.headerAriaLevel,onClose:f(b)}),Ya({header:se(()=>[C.$slots.title?Oe(C.$slots,"title",{key:1}):Oe(C.$slots,"header",{key:0,close:f(b),titleId:f(c),titleClass:f(o).e("title")})]),default:se(()=>[Oe(C.$slots,"default")]),_:2},[C.$slots.footer?{name:"footer",fn:se(()=>[Oe(C.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):we("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,bge)]),_:3},8,["mask","overlay-class","z-index"]),[[nr,f(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var wge=Xe(_ge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Sge=Bt(wge),Mge=Ye({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Te(String),default:"solid"}}),Tge=ne({name:"ElDivider"}),Ege=ne({...Tge,props:Mge,setup(r){const e=r,t=Pe("divider"),i=N(()=>t.cssVar({"border-style":e.borderStyle}));return(o,n)=>(A(),W("div",{class:k([f(t).b(),f(t).m(o.direction)]),style:ct(f(i)),role:"separator"},[o.$slots.default&&o.direction!=="vertical"?(A(),W("div",{key:0,class:k([f(t).e("text"),f(t).is(o.contentPosition)])},[Oe(o.$slots,"default")],2)):we("v-if",!0)],6))}});var Cge=Xe(Ege,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const D4=Bt(Cge),Nge=Ye({...k4,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),Age=I4,Rge=ne({name:"ElDrawer",components:{ElOverlay:ET,ElFocusTrap:db,ElIcon:st,Close:Vs},inheritAttrs:!1,props:Nge,emits:Age,setup(r,{slots:e}){ga({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},N(()=>!!e.title)),ga({scope:"el-drawer",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/drawer.html#attributes",type:"Attribute"},N(()=>!!r.customClass));const t=V(),i=V(),o=Pe("drawer"),{t:n}=ir(),s=N(()=>r.direction==="rtl"||r.direction==="ltr"),a=N(()=>hi(r.size));return{...P4(r,t),drawerRef:t,focusStartRef:i,isHorizontal:s,drawerSize:a,ns:o,t:n}}}),Lge=["aria-label","aria-labelledby","aria-describedby"],Oge=["id","aria-level"],kge=["aria-label"],Ige=["id"];function Pge(r,e,t,i,o,n){const s=_t("close"),a=_t("el-icon"),l=_t("el-focus-trap"),c=_t("el-overlay");return A(),_e(sm,{to:"body",disabled:!r.appendToBody},[ee(fi,{name:r.ns.b("fade"),onAfterEnter:r.afterEnter,onAfterLeave:r.afterLeave,onBeforeLeave:r.beforeLeave,persisted:""},{default:se(()=>[At(ee(c,{mask:r.modal,"overlay-class":r.modalClass,"z-index":r.zIndex,onClick:r.onModalClick},{default:se(()=>[ee(l,{loop:"",trapped:r.visible,"focus-trap-el":r.drawerRef,"focus-start-el":r.focusStartRef,onReleaseRequested:r.onCloseRequested},{default:se(()=>[X("div",$t({ref:"drawerRef","aria-modal":"true","aria-label":r.title||void 0,"aria-labelledby":r.title?void 0:r.titleId,"aria-describedby":r.bodyId},r.$attrs,{class:[r.ns.b(),r.direction,r.visible&&"open",r.customClass],style:r.isHorizontal?"width: "+r.drawerSize:"height: "+r.drawerSize,role:"dialog",onClick:e[1]||(e[1]=vt(()=>{},["stop"]))}),[X("span",{ref:"focusStartRef",class:k(r.ns.e("sr-focus")),tabindex:"-1"},null,2),r.withHeader?(A(),W("header",{key:0,class:k(r.ns.e("header"))},[r.$slots.title?Oe(r.$slots,"title",{key:1},()=>[we(" DEPRECATED SLOT ")]):Oe(r.$slots,"header",{key:0,close:r.handleClose,titleId:r.titleId,titleClass:r.ns.e("title")},()=>[r.$slots.title?we("v-if",!0):(A(),W("span",{key:0,id:r.titleId,role:"heading","aria-level":r.headerAriaLevel,class:k(r.ns.e("title"))},ze(r.title),11,Oge))]),r.showClose?(A(),W("button",{key:2,"aria-label":r.t("el.drawer.close"),class:k(r.ns.e("close-btn")),type:"button",onClick:e[0]||(e[0]=(...u)=>r.handleClose&&r.handleClose(...u))},[ee(a,{class:k(r.ns.e("close"))},{default:se(()=>[ee(s)]),_:1},8,["class"])],10,kge)):we("v-if",!0)],2)):we("v-if",!0),r.rendered?(A(),W("div",{key:1,id:r.bodyId,class:k(r.ns.e("body"))},[Oe(r.$slots,"default")],10,Ige)):we("v-if",!0),r.$slots.footer?(A(),W("div",{key:2,class:k(r.ns.e("footer"))},[Oe(r.$slots,"footer")],2)):we("v-if",!0)],16,Lge)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[nr,r.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var Dge=Xe(Rge,[["render",Pge],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const Bge=Bt(Dge),Fge=ne({inheritAttrs:!1});function Uge(r,e,t,i,o,n){return Oe(r.$slots,"default")}var zge=Xe(Fge,[["render",Uge],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const Vge=ne({name:"ElCollectionItem",inheritAttrs:!1});function Gge(r,e,t,i,o,n){return Oe(r.$slots,"default")}var Hge=Xe(Vge,[["render",Gge],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const B4="data-el-collection-item",F4=r=>{const e=`El${r}Collection`,t=`${e}Item`,i=Symbol(e),o=Symbol(t),n={...zge,name:e,setup(){const a=V(null),l=new Map;Wt(i,{itemMap:l,getItems:()=>{const c=f(a);if(!c)return[];const u=Array.from(c.querySelectorAll(`[${B4}]`));return[...l.values()].sort((d,h)=>u.indexOf(d.ref)-u.indexOf(h.ref))},collectionRef:a})}},s={...Hge,name:t,setup(a,{attrs:l}){const c=V(null),u=ot(i,void 0);Wt(o,{collectionItemRef:c}),Rt(()=>{const d=f(c);d&&u.itemMap.set(d,{ref:d,...l})}),Vr(()=>{const d=f(c);u.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:i,COLLECTION_ITEM_INJECTION_KEY:o,ElCollection:n,ElCollectionItem:s}},jge=Ye({style:{type:Te([String,Array,Object])},currentTabId:{type:Te(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Te(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:$ge,ElCollectionItem:Wge,COLLECTION_INJECTION_KEY:CT,COLLECTION_ITEM_INJECTION_KEY:qge}=F4("RovingFocusGroup"),NT=Symbol("elRovingFocusGroup"),U4=Symbol("elRovingFocusGroupItem"),Xge={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Kge=(r,e)=>{if(e!=="rtl")return r;switch(r){case ft.right:return ft.left;case ft.left:return ft.right;default:return r}},Yge=(r,e,t)=>{const i=Kge(r.key,t);if(!(e==="vertical"&&[ft.left,ft.right].includes(i))&&!(e==="horizontal"&&[ft.up,ft.down].includes(i)))return Xge[i]},Jge=(r,e)=>r.map((t,i)=>r[(i+e)%r.length]),AT=r=>{const{activeElement:e}=document;for(const t of r)if(t===e||(t.focus(),e!==document.activeElement))return},z4="currentTabIdChange",V4="rovingFocusGroup.entryFocus",Zge={bubbles:!1,cancelable:!0},Qge=ne({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:jge,emits:[z4,"entryFocus"],setup(r,{emit:e}){var t;const i=V((t=r.currentTabId||r.defaultCurrentTabId)!=null?t:null),o=V(!1),n=V(!1),s=V(null),{getItems:a}=ot(CT,void 0),l=N(()=>[{outline:"none"},r.style]),c=g=>{e(z4,g)},u=()=>{o.value=!0},d=ti(g=>{var v;(v=r.onMousedown)==null||v.call(r,g)},()=>{n.value=!0}),h=ti(g=>{var v;(v=r.onFocus)==null||v.call(r,g)},g=>{const v=!f(n),{target:y,currentTarget:b}=g;if(y===b&&v&&!f(o)){const x=new Event(V4,Zge);if(b==null||b.dispatchEvent(x),!x.defaultPrevented){const _=a().filter(T=>T.focusable),S=_.find(T=>T.active),w=_.find(T=>T.id===f(i)),M=[S,w,..._].filter(Boolean).map(T=>T.ref);AT(M)}}n.value=!1}),p=ti(g=>{var v;(v=r.onBlur)==null||v.call(r,g)},()=>{o.value=!1}),m=(...g)=>{e("entryFocus",...g)};Wt(NT,{currentTabbedId:su(i),loop:Yr(r,"loop"),tabIndex:N(()=>f(o)?-1:0),rovingFocusGroupRef:s,rovingFocusGroupRootStyle:l,orientation:Yr(r,"orientation"),dir:Yr(r,"dir"),onItemFocus:c,onItemShiftTab:u,onBlur:p,onFocus:h,onMousedown:d}),ke(()=>r.currentTabId,g=>{i.value=g??null}),Hr(s,V4,m)}});function eve(r,e,t,i,o,n){return Oe(r.$slots,"default")}var tve=Xe(Qge,[["render",eve],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const rve=ne({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:$ge,ElRovingFocusGroupImpl:tve}});function ive(r,e,t,i,o,n){const s=_t("el-roving-focus-group-impl"),a=_t("el-focus-group-collection");return A(),_e(a,null,{default:se(()=>[ee(s,Is(yy(r.$attrs)),{default:se(()=>[Oe(r.$slots,"default")]),_:3},16)]),_:3})}var ove=Xe(rve,[["render",ive],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const nve=ne({components:{ElRovingFocusCollectionItem:Wge},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(r,{emit:e}){const{currentTabbedId:t,loop:i,onItemFocus:o,onItemShiftTab:n}=ot(NT,void 0),{getItems:s}=ot(CT,void 0),a=bs(),l=V(null),c=ti(p=>{e("mousedown",p)},p=>{r.focusable?o(f(a)):p.preventDefault()}),u=ti(p=>{e("focus",p)},()=>{o(f(a))}),d=ti(p=>{e("keydown",p)},p=>{const{key:m,shiftKey:g,target:v,currentTarget:y}=p;if(m===ft.tab&&g){n();return}if(v!==y)return;const b=Yge(p);if(b){p.preventDefault();let x=s().filter(_=>_.focusable).map(_=>_.ref);switch(b){case"last":{x.reverse();break}case"prev":case"next":{b==="prev"&&x.reverse();const _=x.indexOf(y);x=i.value?Jge(x,_+1):x.slice(_+1);break}}lt(()=>{AT(x)})}}),h=N(()=>t.value===f(a));return Wt(U4,{rovingFocusGroupItemRef:l,tabIndex:N(()=>f(h)?0:-1),handleMousedown:c,handleFocus:u,handleKeydown:d}),{id:a,handleKeydown:d,handleFocus:u,handleMousedown:c}}});function sve(r,e,t,i,o,n){const s=_t("el-roving-focus-collection-item");return A(),_e(s,{id:r.id,focusable:r.focusable,active:r.active},{default:se(()=>[Oe(r.$slots,"default")]),_:3},8,["id","focusable","active"])}var ave=Xe(nve,[["render",sve],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const Rb=Ye({trigger:Km.trigger,effect:{...ro.effect,default:"light"},type:{type:Te(String)},placement:{type:Te(String),default:"bottom"},popperOptions:{type:Te(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Te([Number,String]),default:0},maxHeight:{type:Te([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:Te(Object)},teleported:ro.teleported}),G4=Ye({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Lr}}),lve=Ye({onKeydown:{type:Te(Function)}}),cve=[ft.down,ft.pageDown,ft.home],H4=[ft.up,ft.pageUp,ft.end],uve=[...cve,...H4],{ElCollection:dve,ElCollectionItem:hve,COLLECTION_INJECTION_KEY:pve,COLLECTION_ITEM_INJECTION_KEY:fve}=F4("Dropdown"),Lb=Symbol("elDropdown"),{ButtonGroup:mve}=_o,gve=ne({name:"ElDropdown",components:{ElButton:_o,ElButtonGroup:mve,ElScrollbar:sl,ElDropdownCollection:dve,ElTooltip:Zo,ElRovingFocusGroup:ove,ElOnlyChild:kB,ElIcon:st,ArrowDown:Ql},props:Rb,emits:["visible-change","click","command"],setup(r,{emit:e}){const t=It(),i=Pe("dropdown"),{t:o}=ir(),n=V(),s=V(),a=V(null),l=V(null),c=V(null),u=V(null),d=V(!1),h=[ft.enter,ft.space,ft.down],p=N(()=>({maxHeight:hi(r.maxHeight)})),m=N(()=>[i.m(S.value)]),g=N(()=>wu(r.trigger)),v=bs().value,y=N(()=>r.id||v);ke([n,g],([U,G],[R])=>{var F,O,H;(F=R==null?void 0:R.$el)!=null&&F.removeEventListener&&R.$el.removeEventListener("pointerenter",M),(O=U==null?void 0:U.$el)!=null&&O.removeEventListener&&U.$el.removeEventListener("pointerenter",M),(H=U==null?void 0:U.$el)!=null&&H.addEventListener&&G.includes("hover")&&U.$el.addEventListener("pointerenter",M)},{immediate:!0}),Vr(()=>{var U,G;(G=(U=n.value)==null?void 0:U.$el)!=null&&G.removeEventListener&&n.value.$el.removeEventListener("pointerenter",M)});function b(){x()}function x(){var U;(U=a.value)==null||U.onClose()}function _(){var U;(U=a.value)==null||U.onOpen()}const S=Ci();function w(...U){e("command",...U)}function M(){var U,G;(G=(U=n.value)==null?void 0:U.$el)==null||G.focus()}function T(){}function E(){const U=f(l);g.value.includes("hover")&&(U==null||U.focus()),u.value=null}function C(U){u.value=U}function B(U){d.value||(U.preventDefault(),U.stopImmediatePropagation())}function I(){e("visible-change",!0)}function L(U){(U==null?void 0:U.type)==="keydown"&&l.value.focus()}function P(){e("visible-change",!1)}return Wt(Lb,{contentRef:l,role:N(()=>r.role),triggerId:y,isUsingKeyboard:d,onItemEnter:T,onItemLeave:E}),Wt("elDropdown",{instance:t,dropdownSize:S,handleClick:b,commandHandler:w,trigger:Yr(r,"trigger"),hideOnClick:Yr(r,"hideOnClick")}),{t:o,ns:i,scrollbar:c,wrapStyle:p,dropdownTriggerKls:m,dropdownSize:S,triggerId:y,triggerKeys:h,currentTabId:u,handleCurrentTabIdChange:C,handlerMainButtonClick:U=>{e("click",U)},handleEntryFocus:B,handleClose:x,handleOpen:_,handleBeforeShowTooltip:I,handleShowTooltip:L,handleBeforeHideTooltip:P,onFocusAfterTrapped:U=>{var G,R;U.preventDefault(),(R=(G=l.value)==null?void 0:G.focus)==null||R.call(G,{preventScroll:!0})},popperRef:a,contentRef:l,triggeringElementRef:n,referenceElementRef:s}}});function vve(r,e,t,i,o,n){var s;const a=_t("el-dropdown-collection"),l=_t("el-roving-focus-group"),c=_t("el-scrollbar"),u=_t("el-only-child"),d=_t("el-tooltip"),h=_t("el-button"),p=_t("arrow-down"),m=_t("el-icon"),g=_t("el-button-group");return A(),W("div",{class:k([r.ns.b(),r.ns.is("disabled",r.disabled)])},[ee(d,{ref:"popperRef",role:r.role,effect:r.effect,"fallback-placements":["bottom","top"],"popper-options":r.popperOptions,"gpu-acceleration":!1,"hide-after":r.trigger==="hover"?r.hideTimeout:0,"manual-mode":!0,placement:r.placement,"popper-class":[r.ns.e("popper"),r.popperClass],"reference-element":(s=r.referenceElementRef)==null?void 0:s.$el,trigger:r.trigger,"trigger-keys":r.triggerKeys,"trigger-target-el":r.contentRef,"show-after":r.trigger==="hover"?r.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":r.triggeringElementRef,"virtual-triggering":r.splitButton,disabled:r.disabled,transition:`${r.ns.namespace.value}-zoom-in-top`,teleported:r.teleported,pure:"",persistent:"",onBeforeShow:r.handleBeforeShowTooltip,onShow:r.handleShowTooltip,onBeforeHide:r.handleBeforeHideTooltip},Ya({content:se(()=>[ee(c,{ref:"scrollbar","wrap-style":r.wrapStyle,tag:"div","view-class":r.ns.e("list")},{default:se(()=>[ee(l,{loop:r.loop,"current-tab-id":r.currentTabId,orientation:"horizontal",onCurrentTabIdChange:r.handleCurrentTabIdChange,onEntryFocus:r.handleEntryFocus},{default:se(()=>[ee(a,null,{default:se(()=>[Oe(r.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[r.splitButton?void 0:{name:"default",fn:se(()=>[ee(u,{id:r.triggerId,ref:"triggeringElementRef",role:"button",tabindex:r.tabindex},{default:se(()=>[Oe(r.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),r.splitButton?(A(),_e(g,{key:0},{default:se(()=>[ee(h,$t({ref:"referenceElementRef"},r.buttonProps,{size:r.dropdownSize,type:r.type,disabled:r.disabled,tabindex:r.tabindex,onClick:r.handlerMainButtonClick}),{default:se(()=>[Oe(r.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),ee(h,$t({id:r.triggerId,ref:"triggeringElementRef"},r.buttonProps,{role:"button",size:r.dropdownSize,type:r.type,class:r.ns.e("caret-button"),disabled:r.disabled,tabindex:r.tabindex,"aria-label":r.t("el.dropdown.toggleDropdown")}),{default:se(()=>[ee(m,{class:k(r.ns.e("icon"))},{default:se(()=>[ee(p)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):we("v-if",!0)],2)}var yve=Xe(gve,[["render",vve],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const bve=ne({name:"DropdownItemImpl",components:{ElIcon:st},props:G4,emits:["pointermove","pointerleave","click","clickimpl"],setup(r,{emit:e}){const t=Pe("dropdown"),{role:i}=ot(Lb,void 0),{collectionItemRef:o}=ot(fve,void 0),{collectionItemRef:n}=ot(qge,void 0),{rovingFocusGroupItemRef:s,tabIndex:a,handleFocus:l,handleKeydown:c,handleMousedown:u}=ot(U4,void 0),d=Hy(o,n,s),h=N(()=>i.value==="menu"?"menuitem":i.value==="navigation"?"link":"button"),p=ti(m=>{const{code:g}=m;if(g===ft.enter||g===ft.space)return m.preventDefault(),m.stopImmediatePropagation(),e("clickimpl",m),!0},c);return{ns:t,itemRef:d,dataset:{[B4]:""},role:h,tabIndex:a,handleFocus:l,handleKeydown:p,handleMousedown:u}}}),xve=["aria-disabled","tabindex","role"];function _ve(r,e,t,i,o,n){const s=_t("el-icon");return A(),W(nt,null,[r.divided?(A(),W("li",$t({key:0,role:"separator",class:r.ns.bem("menu","item","divided")},r.$attrs),null,16)):we("v-if",!0),X("li",$t({ref:r.itemRef},{...r.dataset,...r.$attrs},{"aria-disabled":r.disabled,class:[r.ns.be("menu","item"),r.ns.is("disabled",r.disabled)],tabindex:r.tabIndex,role:r.role,onClick:e[0]||(e[0]=a=>r.$emit("clickimpl",a)),onFocus:e[1]||(e[1]=(...a)=>r.handleFocus&&r.handleFocus(...a)),onKeydown:e[2]||(e[2]=vt((...a)=>r.handleKeydown&&r.handleKeydown(...a),["self"])),onMousedown:e[3]||(e[3]=(...a)=>r.handleMousedown&&r.handleMousedown(...a)),onPointermove:e[4]||(e[4]=a=>r.$emit("pointermove",a)),onPointerleave:e[5]||(e[5]=a=>r.$emit("pointerleave",a))}),[r.icon?(A(),_e(s,{key:0},{default:se(()=>[(A(),_e(Ht(r.icon)))]),_:1})):we("v-if",!0),Oe(r.$slots,"default")],16,xve)],64)}var wve=Xe(bve,[["render",_ve],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const j4=()=>{const r=ot("elDropdown",{}),e=N(()=>r==null?void 0:r.dropdownSize);return{elDropdown:r,_elDropdownSize:e}},Sve=ne({name:"ElDropdownItem",components:{ElDropdownCollectionItem:hve,ElRovingFocusItem:ave,ElDropdownItemImpl:wve},inheritAttrs:!1,props:G4,emits:["pointermove","pointerleave","click"],setup(r,{emit:e,attrs:t}){const{elDropdown:i}=j4(),o=It(),n=V(null),s=N(()=>{var p,m;return(m=(p=f(n))==null?void 0:p.textContent)!=null?m:""}),{onItemEnter:a,onItemLeave:l}=ot(Lb,void 0),c=ti(p=>(e("pointermove",p),p.defaultPrevented),_3(p=>{if(r.disabled){l(p);return}const m=p.currentTarget;m===document.activeElement||m.contains(document.activeElement)||(a(p),p.defaultPrevented||(m==null||m.focus()))})),u=ti(p=>(e("pointerleave",p),p.defaultPrevented),_3(p=>{l(p)})),d=ti(p=>{if(!r.disabled)return e("click",p),p.type!=="keydown"&&p.defaultPrevented},p=>{var m,g,v;if(r.disabled){p.stopImmediatePropagation();return}(m=i==null?void 0:i.hideOnClick)!=null&&m.value&&((g=i.handleClick)==null||g.call(i)),(v=i.commandHandler)==null||v.call(i,r.command,o,p)}),h=N(()=>({...r,...t}));return{handleClick:d,handlePointerMove:c,handlePointerLeave:u,textContent:s,propsAndAttrs:h}}});function Mve(r,e,t,i,o,n){var s;const a=_t("el-dropdown-item-impl"),l=_t("el-roving-focus-item"),c=_t("el-dropdown-collection-item");return A(),_e(c,{disabled:r.disabled,"text-value":(s=r.textValue)!=null?s:r.textContent},{default:se(()=>[ee(l,{focusable:!r.disabled},{default:se(()=>[ee(a,$t(r.propsAndAttrs,{onPointerleave:r.handlePointerLeave,onPointermove:r.handlePointerMove,onClickimpl:r.handleClick}),{default:se(()=>[Oe(r.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var $4=Xe(Sve,[["render",Mve],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const Tve=ne({name:"ElDropdownMenu",props:lve,setup(r){const e=Pe("dropdown"),{_elDropdownSize:t}=j4(),i=t.value,{focusTrapRef:o,onKeydown:n}=ot(HM,void 0),{contentRef:s,role:a,triggerId:l}=ot(Lb,void 0),{collectionRef:c,getItems:u}=ot(pve,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:h,tabIndex:p,onBlur:m,onFocus:g,onMousedown:v}=ot(NT,void 0),{collectionRef:y}=ot(CT,void 0),b=N(()=>[e.b("menu"),e.bm("menu",i==null?void 0:i.value)]),x=Hy(s,c,o,d,y),_=ti(S=>{var w;(w=r.onKeydown)==null||w.call(r,S)},S=>{const{currentTarget:w,code:M,target:T}=S;if(w.contains(T),ft.tab===M&&S.stopImmediatePropagation(),S.preventDefault(),T!==f(s)||!uve.includes(M))return;const E=u().filter(C=>!C.disabled).map(C=>C.ref);H4.includes(M)&&E.reverse(),AT(E)});return{size:i,rovingFocusGroupRootStyle:h,tabIndex:p,dropdownKls:b,role:a,triggerId:l,dropdownListWrapperRef:x,handleKeydown:S=>{_(S),n(S)},onBlur:m,onFocus:g,onMousedown:v}}}),Eve=["role","aria-labelledby"];function Cve(r,e,t,i,o,n){return A(),W("ul",{ref:r.dropdownListWrapperRef,class:k(r.dropdownKls),style:ct(r.rovingFocusGroupRootStyle),tabindex:-1,role:r.role,"aria-labelledby":r.triggerId,onBlur:e[0]||(e[0]=(...s)=>r.onBlur&&r.onBlur(...s)),onFocus:e[1]||(e[1]=(...s)=>r.onFocus&&r.onFocus(...s)),onKeydown:e[2]||(e[2]=vt((...s)=>r.handleKeydown&&r.handleKeydown(...s),["self"])),onMousedown:e[3]||(e[3]=vt((...s)=>r.onMousedown&&r.onMousedown(...s),["self"]))},[Oe(r.$slots,"default")],46,Eve)}var W4=Xe(Tve,[["render",Cve],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const Nve=Bt(yve,{DropdownItem:$4,DropdownMenu:W4}),Ave=ii($4),Rve=ii(W4),Lve={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Ove=["id"],kve=["stop-color"],Ive=["stop-color"],Pve=["id"],Dve=["stop-color"],Bve=["stop-color"],Fve=["id"],Uve={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},zve={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},Vve={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},Gve=["fill"],Hve=["fill"],jve={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},$ve=["fill"],Wve=["fill"],qve=["fill"],Xve=["fill"],Kve=["fill"],Yve={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},Jve=["fill","xlink:href"],Zve=["fill","mask"],Qve=["fill"],e0e=ne({name:"ImgEmpty"}),t0e=ne({...e0e,setup(r){const e=Pe("empty"),t=bs();return(i,o)=>(A(),W("svg",Lve,[X("defs",null,[X("linearGradient",{id:`linearGradient-1-${f(t)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[X("stop",{"stop-color":`var(${f(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,kve),X("stop",{"stop-color":`var(${f(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,Ive)],8,Ove),X("linearGradient",{id:`linearGradient-2-${f(t)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[X("stop",{"stop-color":`var(${f(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,Dve),X("stop",{"stop-color":`var(${f(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,Bve)],8,Pve),X("rect",{id:`path-3-${f(t)}`,x:"0",y:"0",width:"17",height:"36"},null,8,Fve)]),X("g",Uve,[X("g",zve,[X("g",Vve,[X("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${f(e).cssVarBlockName("fill-color-3")})`},null,8,Gve),X("polygon",{id:"Rectangle-Copy-14",fill:`var(${f(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,Hve),X("g",jve,[X("polygon",{id:"Rectangle-Copy-10",fill:`var(${f(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,$ve),X("polygon",{id:"Rectangle-Copy-11",fill:`var(${f(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,Wve),X("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${f(t)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,qve),X("polygon",{id:"Rectangle-Copy-13",fill:`var(${f(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,Xve)]),X("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${f(t)})`,x:"13",y:"45",width:"40",height:"36"},null,8,Kve),X("g",Yve,[X("use",{id:"Mask",fill:`var(${f(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${f(t)}`},null,8,Jve),X("polygon",{id:"Rectangle-Copy",fill:`var(${f(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${f(t)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,Zve)]),X("polygon",{id:"Rectangle-Copy-18",fill:`var(${f(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,Qve)])])])]))}});var r0e=Xe(t0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/img-empty.vue"]]);const i0e=Ye({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),o0e=["src"],n0e={key:1},s0e=ne({name:"ElEmpty"}),a0e=ne({...s0e,props:i0e,setup(r){const e=r,{t}=ir(),i=Pe("empty"),o=N(()=>e.description||t("el.table.emptyText")),n=N(()=>({width:hi(e.imageSize)}));return(s,a)=>(A(),W("div",{class:k(f(i).b())},[X("div",{class:k(f(i).e("image")),style:ct(f(n))},[s.image?(A(),W("img",{key:0,src:s.image,ondragstart:"return false"},null,8,o0e)):Oe(s.$slots,"image",{key:1},()=>[ee(r0e)])],6),X("div",{class:k(f(i).e("description"))},[s.$slots.description?Oe(s.$slots,"description",{key:0}):(A(),W("p",n0e,ze(f(o)),1))],2),s.$slots.default?(A(),W("div",{key:0,class:k(f(i).e("bottom"))},[Oe(s.$slots,"default")],2)):we("v-if",!0)],2))}});var l0e=Xe(a0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/empty.vue"]]);const q4=Bt(l0e),c0e=Ye({urlList:{type:Te(Array),default:()=>qr([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),u0e={close:()=>!0,switch:r=>wt(r)},d0e=["src"],h0e=ne({name:"ElImageViewer"}),p0e=ne({...h0e,props:c0e,emits:u0e,setup(r,{expose:e,emit:t}){const i=r,o={CONTAIN:{name:"contain",icon:au(are)},ORIGINAL:{name:"original",icon:au(wie)}},{t:n}=ir(),s=Pe("image-viewer"),{nextZIndex:a}=Hh(),l=V(),c=V([]),u=ek(),d=V(!0),h=V(i.initialIndex),p=Rr(o.CONTAIN),m=V({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),g=N(()=>{const{urlList:O}=i;return O.length<=1}),v=N(()=>h.value===0),y=N(()=>h.value===i.urlList.length-1),b=N(()=>i.urlList[h.value]),x=N(()=>[s.e("btn"),s.e("prev"),s.is("disabled",!i.infinite&&v.value)]),_=N(()=>[s.e("btn"),s.e("next"),s.is("disabled",!i.infinite&&y.value)]),S=N(()=>{const{scale:O,deg:H,offsetX:$,offsetY:j,enableTransition:J}=m.value;let ce=$/O,ve=j/O;switch(H%360){case 90:case-270:[ce,ve]=[ve,-ce];break;case 180:case-180:[ce,ve]=[-ce,-ve];break;case 270:case-90:[ce,ve]=[-ve,ce];break}const xe={transform:`scale(${O}) rotate(${H}deg) translate(${ce}px, ${ve}px)`,transition:J?"transform .3s":""};return p.value.name===o.CONTAIN.name&&(xe.maxWidth=xe.maxHeight="100%"),xe}),w=N(()=>wt(i.zIndex)?i.zIndex:a());function M(){E(),t("close")}function T(){const O=Mu($=>{switch($.code){case ft.esc:i.closeOnPressEscape&&M();break;case ft.space:P();break;case ft.left:G();break;case ft.up:F("zoomIn");break;case ft.right:R();break;case ft.down:F("zoomOut");break}}),H=Mu($=>{const j=$.deltaY||$.deltaX;F(j<0?"zoomIn":"zoomOut",{zoomRate:i.zoomRate,enableTransition:!1})});u.run(()=>{Hr(document,"keydown",O),Hr(document,"wheel",H)})}function E(){u.stop()}function C(){d.value=!1}function B(O){d.value=!1,O.target.alt=n("el.image.error")}function I(O){if(d.value||O.button!==0||!l.value)return;m.value.enableTransition=!1;const{offsetX:H,offsetY:$}=m.value,j=O.pageX,J=O.pageY,ce=Mu(xe=>{m.value={...m.value,offsetX:H+xe.pageX-j,offsetY:$+xe.pageY-J}}),ve=Hr(document,"mousemove",ce);Hr(document,"mouseup",()=>{ve()}),O.preventDefault()}function L(){m.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function P(){if(d.value)return;const O=Om(o),H=Object.values(o),$=p.value.name,j=(H.findIndex(J=>J.name===$)+1)%O.length;p.value=o[O[j]],L()}function U(O){const H=i.urlList.length;h.value=(O+H)%H}function G(){v.value&&!i.infinite||U(h.value-1)}function R(){y.value&&!i.infinite||U(h.value+1)}function F(O,H={}){if(d.value)return;const{zoomRate:$,rotateDeg:j,enableTransition:J}={zoomRate:i.zoomRate,rotateDeg:90,enableTransition:!0,...H};switch(O){case"zoomOut":m.value.scale>.2&&(m.value.scale=Number.parseFloat((m.value.scale/$).toFixed(3)));break;case"zoomIn":m.value.scale<7&&(m.value.scale=Number.parseFloat((m.value.scale*$).toFixed(3)));break;case"clockwise":m.value.deg+=j;break;case"anticlockwise":m.value.deg-=j;break}m.value.enableTransition=J}return ke(b,()=>{lt(()=>{const O=c.value[0];O!=null&&O.complete||(d.value=!0)})}),ke(h,O=>{L(),t("switch",O)}),Rt(()=>{var O,H;T(),(H=(O=l.value)==null?void 0:O.focus)==null||H.call(O)}),e({setActiveItem:U}),(O,H)=>(A(),_e(sm,{to:"body",disabled:!O.teleported},[ee(fi,{name:"viewer-fade",appear:""},{default:se(()=>[X("div",{ref_key:"wrapper",ref:l,tabindex:-1,class:k(f(s).e("wrapper")),style:ct({zIndex:f(w)})},[X("div",{class:k(f(s).e("mask")),onClick:H[0]||(H[0]=vt($=>O.hideOnClickModal&&M(),["self"]))},null,2),we(" CLOSE "),X("span",{class:k([f(s).e("btn"),f(s).e("close")]),onClick:M},[ee(f(st),null,{default:se(()=>[ee(f(Vs))]),_:1})],2),we(" ARROW "),f(g)?we("v-if",!0):(A(),W(nt,{key:0},[X("span",{class:k(f(x)),onClick:G},[ee(f(st),null,{default:se(()=>[ee(f(ec))]),_:1})],2),X("span",{class:k(f(_)),onClick:R},[ee(f(st),null,{default:se(()=>[ee(f(Ko))]),_:1})],2)],64)),we(" ACTIONS "),X("div",{class:k([f(s).e("btn"),f(s).e("actions")])},[X("div",{class:k(f(s).e("actions__inner"))},[ee(f(st),{onClick:H[1]||(H[1]=$=>F("zoomOut"))},{default:se(()=>[ee(f(koe))]),_:1}),ee(f(st),{onClick:H[2]||(H[2]=$=>F("zoomIn"))},{default:se(()=>[ee(f(lD))]),_:1}),X("i",{class:k(f(s).e("actions__divider"))},null,2),ee(f(st),{onClick:P},{default:se(()=>[(A(),_e(Ht(f(p).icon)))]),_:1}),X("i",{class:k(f(s).e("actions__divider"))},null,2),ee(f(st),{onClick:H[3]||(H[3]=$=>F("anticlockwise"))},{default:se(()=>[ee(f(uie))]),_:1}),ee(f(st),{onClick:H[4]||(H[4]=$=>F("clockwise"))},{default:se(()=>[ee(f(gie))]),_:1})],2)],2),we(" CANVAS "),X("div",{class:k(f(s).e("canvas"))},[(A(!0),W(nt,null,jt(O.urlList,($,j)=>At((A(),W("img",{ref_for:!0,ref:J=>c.value[j]=J,key:$,src:$,style:ct(f(S)),class:k(f(s).e("img")),onLoad:C,onError:B,onMousedown:I},null,46,d0e)),[[nr,j===h.value]])),128))],2),Oe(O.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var f0e=Xe(p0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const X4=Bt(f0e),m0e=Ye({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:Te([String,Object])},previewSrcList:{type:Te(Array),default:()=>qr([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),g0e={load:r=>r instanceof Event,error:r=>r instanceof Event,switch:r=>wt(r),close:()=>!0,show:()=>!0},v0e=["src","loading"],y0e={key:0},b0e=ne({name:"ElImage",inheritAttrs:!1}),x0e=ne({...b0e,props:m0e,emits:g0e,setup(r,{emit:e}){const t=r;let i="";const{t:o}=ir(),n=Pe("image"),s=du(),a=fM(),l=V(),c=V(!1),u=V(!0),d=V(!1),h=V(),p=V(),m=Jt&&"loading"in HTMLImageElement.prototype;let g,v;const y=N(()=>[n.e("inner"),_.value&&n.e("preview"),u.value&&n.is("loading")]),b=N(()=>s.style),x=N(()=>{const{fit:F}=t;return Jt&&F?{objectFit:F}:{}}),_=N(()=>{const{previewSrcList:F}=t;return Array.isArray(F)&&F.length>0}),S=N(()=>{const{previewSrcList:F,initialIndex:O}=t;let H=O;return O>F.length-1&&(H=0),H}),w=N(()=>t.loading==="eager"?!1:!m&&t.loading==="lazy"||t.lazy),M=()=>{Jt&&(u.value=!0,c.value=!1,l.value=t.src)};function T(F){u.value=!1,c.value=!1,e("load",F)}function E(F){u.value=!1,c.value=!0,e("error",F)}function C(){Bq(h.value,p.value)&&(M(),L())}const B=N3(C,200,!0);async function I(){var F;if(!Jt)return;await lt();const{scrollContainer:O}=t;fs(O)?p.value=O:Tt(O)&&O!==""?p.value=(F=document.querySelector(O))!=null?F:void 0:h.value&&(p.value=sM(h.value)),p.value&&(g=Hr(p,"scroll",B),setTimeout(()=>C(),100))}function L(){!Jt||!p.value||!B||(g==null||g(),p.value=void 0)}function P(F){if(F.ctrlKey&&(F.deltaY<0||F.deltaY>0))return F.preventDefault(),!1}function U(){_.value&&(v=Hr("wheel",P,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",d.value=!0,e("show"))}function G(){v==null||v(),document.body.style.overflow=i,d.value=!1,e("close")}function R(F){e("switch",F)}return ke(()=>t.src,()=>{w.value?(u.value=!0,c.value=!1,L(),I()):M()}),Rt(()=>{w.value?I():M()}),(F,O)=>(A(),W("div",{ref_key:"container",ref:h,class:k([f(n).b(),F.$attrs.class]),style:ct(f(b))},[c.value?Oe(F.$slots,"error",{key:0},()=>[X("div",{class:k(f(n).e("error"))},ze(f(o)("el.image.error")),3)]):(A(),W(nt,{key:1},[l.value!==void 0?(A(),W("img",$t({key:0},f(a),{src:l.value,loading:F.loading,style:f(x),class:f(y),onClick:U,onLoad:T,onError:E}),null,16,v0e)):we("v-if",!0),u.value?(A(),W("div",{key:1,class:k(f(n).e("wrapper"))},[Oe(F.$slots,"placeholder",{},()=>[X("div",{class:k(f(n).e("placeholder"))},null,2)])],2)):we("v-if",!0)],64)),f(_)?(A(),W(nt,{key:2},[d.value?(A(),_e(f(X4),{key:0,"z-index":F.zIndex,"initial-index":f(S),infinite:F.infinite,"zoom-rate":F.zoomRate,"url-list":F.previewSrcList,"hide-on-click-modal":F.hideOnClickModal,teleported:F.previewTeleported,"close-on-press-escape":F.closeOnPressEscape,onClose:G,onSwitch:R},{default:se(()=>[F.$slots.viewer?(A(),W("div",y0e,[Oe(F.$slots,"viewer")])):we("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):we("v-if",!0)],64)):we("v-if",!0)],6))}});var _0e=Xe(x0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const w0e=Bt(_0e),S0e=Ye({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:bo,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:r=>r===null||wt(r)||["min","max"].includes(r),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:r=>r>=0&&r===Number.parseInt(`${r}`,10)},validateEvent:{type:Boolean,default:!0}}),M0e={[Fr]:(r,e)=>e!==r,blur:r=>r instanceof FocusEvent,focus:r=>r instanceof FocusEvent,[Yo]:r=>wt(r)||Mi(r),[Vt]:r=>wt(r)||Mi(r)},T0e=["aria-label","onKeydown"],E0e=["aria-label","onKeydown"],C0e=ne({name:"ElInputNumber"}),N0e=ne({...C0e,props:S0e,emits:M0e,setup(r,{expose:e,emit:t}){const i=r,{t:o}=ir(),n=Pe("input-number"),s=V(),a=ur({currentValue:i.modelValue,userInput:null}),{formItem:l}=Jo(),c=N(()=>wt(i.modelValue)&&i.modelValue<=i.min),u=N(()=>wt(i.modelValue)&&i.modelValue>=i.max),d=N(()=>{const L=y(i.step);return Pi(i.precision)?Math.max(y(i.modelValue),L):(L>i.precision,i.precision)}),h=N(()=>i.controls&&i.controlsPosition==="right"),p=Ci(),m=bn(),g=N(()=>{if(a.userInput!==null)return a.userInput;let L=a.currentValue;if(Mi(L))return"";if(wt(L)){if(Number.isNaN(L))return"";Pi(i.precision)||(L=L.toFixed(i.precision))}return L}),v=(L,P)=>{if(Pi(P)&&(P=d.value),P===0)return Math.round(L);let U=String(L);const G=U.indexOf(".");if(G===-1||!U.replace(".","").split("")[G+P])return L;const R=U.length;return U.charAt(R-1)==="5"&&(U=`${U.slice(0,Math.max(0,R-1))}6`),Number.parseFloat(Number(U).toFixed(P))},y=L=>{if(Mi(L))return 0;const P=L.toString(),U=P.indexOf(".");let G=0;return U!==-1&&(G=P.length-U-1),G},b=(L,P=1)=>wt(L)?v(L+i.step*P):a.currentValue,x=()=>{if(i.readonly||m.value||u.value)return;const L=Number(g.value)||0,P=b(L);w(P),t(Yo,a.currentValue)},_=()=>{if(i.readonly||m.value||c.value)return;const L=Number(g.value)||0,P=b(L,-1);w(P),t(Yo,a.currentValue)},S=(L,P)=>{const{max:U,min:G,step:R,precision:F,stepStrictly:O,valueOnClear:H}=i;U<G&&Ei("InputNumber","min should not be greater than max.");let $=Number(L);if(Mi(L)||Number.isNaN($))return null;if(L===""){if(H===null)return null;$=Tt(H)?{min:G,max:U}[H]:H}return O&&($=v(Math.round($/R)*R,F)),Pi(F)||($=v($,F)),($>U||$<G)&&($=$>U?U:G,P&&t(Vt,$)),$},w=(L,P=!0)=>{var U;const G=a.currentValue,R=S(L);if(!P){t(Vt,R);return}G!==R&&(a.userInput=null,t(Vt,R),t(Fr,R,G),i.validateEvent&&((U=l==null?void 0:l.validate)==null||U.call(l,"change").catch(F=>{})),a.currentValue=R)},M=L=>{a.userInput=L;const P=L===""?null:Number(L);t(Yo,P),w(P,!1)},T=L=>{const P=L!==""?Number(L):"";(wt(P)&&!Number.isNaN(P)||L==="")&&w(P),a.userInput=null},E=()=>{var L,P;(P=(L=s.value)==null?void 0:L.focus)==null||P.call(L)},C=()=>{var L,P;(P=(L=s.value)==null?void 0:L.blur)==null||P.call(L)},B=L=>{t("focus",L)},I=L=>{var P;t("blur",L),i.validateEvent&&((P=l==null?void 0:l.validate)==null||P.call(l,"blur").catch(U=>{}))};return ke(()=>i.modelValue,L=>{const P=S(a.userInput),U=S(L,!0);!wt(P)&&(!P||P!==U)&&(a.currentValue=U,a.userInput=null)},{immediate:!0}),Rt(()=>{var L;const{min:P,max:U,modelValue:G}=i,R=(L=s.value)==null?void 0:L.input;if(R.setAttribute("role","spinbutton"),Number.isFinite(U)?R.setAttribute("aria-valuemax",String(U)):R.removeAttribute("aria-valuemax"),Number.isFinite(P)?R.setAttribute("aria-valuemin",String(P)):R.removeAttribute("aria-valuemin"),R.setAttribute("aria-valuenow",a.currentValue||a.currentValue===0?String(a.currentValue):""),R.setAttribute("aria-disabled",String(m.value)),!wt(G)&&G!=null){let F=Number(G);Number.isNaN(F)&&(F=null),t(Vt,F)}}),Ka(()=>{var L,P;const U=(L=s.value)==null?void 0:L.input;U==null||U.setAttribute("aria-valuenow",`${(P=a.currentValue)!=null?P:""}`)}),e({focus:E,blur:C}),(L,P)=>(A(),W("div",{class:k([f(n).b(),f(n).m(f(p)),f(n).is("disabled",f(m)),f(n).is("without-controls",!L.controls),f(n).is("controls-right",f(h))]),onDragstart:P[1]||(P[1]=vt(()=>{},["prevent"]))},[L.controls?At((A(),W("span",{key:0,role:"button","aria-label":f(o)("el.inputNumber.decrease"),class:k([f(n).e("decrease"),f(n).is("disabled",f(c))]),onKeydown:Qt(_,["enter"])},[ee(f(st),null,{default:se(()=>[f(h)?(A(),_e(f(Ql),{key:0})):(A(),_e(f(Rre),{key:1}))]),_:1})],42,T0e)),[[f(mb),_]]):we("v-if",!0),L.controls?At((A(),W("span",{key:1,role:"button","aria-label":f(o)("el.inputNumber.increase"),class:k([f(n).e("increase"),f(n).is("disabled",f(u))]),onKeydown:Qt(x,["enter"])},[ee(f(st),null,{default:se(()=>[f(h)?(A(),_e(f(zy),{key:0})):(A(),_e(f(sD),{key:1}))]),_:1})],42,E0e)),[[f(mb),x]]):we("v-if",!0),ee(f(Io),{id:L.id,ref_key:"input",ref:s,type:"number",step:L.step,"model-value":f(g),placeholder:L.placeholder,readonly:L.readonly,disabled:f(m),size:f(p),max:L.max,min:L.min,name:L.name,label:L.label,"validate-event":!1,onWheel:P[0]||(P[0]=vt(()=>{},["prevent"])),onKeydown:[Qt(vt(x,["prevent"]),["up"]),Qt(vt(_,["prevent"]),["down"])],onBlur:I,onFocus:B,onInput:M,onChange:T},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var A0e=Xe(N0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const K4=Bt(A0e),R0e=Ye({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:Lr}}),L0e={click:r=>r instanceof MouseEvent},O0e=["href"],k0e=ne({name:"ElLink"}),I0e=ne({...k0e,props:R0e,emits:L0e,setup(r,{emit:e}){const t=r,i=Pe("link"),o=N(()=>[i.b(),i.m(t.type),i.is("disabled",t.disabled),i.is("underline",t.underline&&!t.disabled)]);function n(s){t.disabled||e("click",s)}return(s,a)=>(A(),W("a",{class:k(f(o)),href:s.disabled||!s.href?void 0:s.href,onClick:n},[s.icon?(A(),_e(f(st),{key:0},{default:se(()=>[(A(),_e(Ht(s.icon)))]),_:1})):we("v-if",!0),s.$slots.default?(A(),W("span",{key:1,class:k(f(i).e("inner"))},[Oe(s.$slots,"default")],2)):we("v-if",!0),s.$slots.icon?Oe(s.$slots,"icon",{key:2}):we("v-if",!0)],10,O0e))}});var P0e=Xe(I0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const D0e=Bt(P0e);let B0e=class{constructor(r,e){this.parent=r,this.domNode=e,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(r){r===this.subMenuItems.length?r=0:r<0&&(r=this.subMenuItems.length-1),this.subMenuItems[r].focus(),this.subIndex=r}addListeners(){const r=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,e=>{e.addEventListener("keydown",t=>{let i=!1;switch(t.code){case ft.down:{this.gotoSubIndex(this.subIndex+1),i=!0;break}case ft.up:{this.gotoSubIndex(this.subIndex-1),i=!0;break}case ft.tab:{Sy(r,"mouseleave");break}case ft.enter:case ft.space:{i=!0,t.currentTarget.click();break}}return i&&(t.preventDefault(),t.stopPropagation()),!1})})}},F0e=class{constructor(r,e){this.domNode=r,this.submenu=null,this.submenu=null,this.init(e)}init(r){this.domNode.setAttribute("tabindex","0");const e=this.domNode.querySelector(`.${r}-menu`);e&&(this.submenu=new B0e(this,e)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",r=>{let e=!1;switch(r.code){case ft.down:{Sy(r.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),e=!0;break}case ft.up:{Sy(r.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),e=!0;break}case ft.tab:{Sy(r.currentTarget,"mouseleave");break}case ft.enter:case ft.space:{e=!0,r.currentTarget.click();break}}e&&r.preventDefault()})}},U0e=class{constructor(r,e){this.domNode=r,this.init(e)}init(r){const e=this.domNode.childNodes;Array.from(e).forEach(t=>{t.nodeType===1&&new F0e(t,r)})}};const z0e=ne({name:"ElMenuCollapseTransition",setup(){const r=Pe("menu");return{listeners:{onBeforeEnter:e=>e.style.opacity="0.2",onEnter(e,t){fa(e,`${r.namespace.value}-opacity-transition`),e.style.opacity="1",t()},onAfterEnter(e){gn(e,`${r.namespace.value}-opacity-transition`),e.style.opacity=""},onBeforeLeave(e){e.dataset||(e.dataset={}),zs(e,r.m("collapse"))?(gn(e,r.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),fa(e,r.m("collapse"))):(fa(e,r.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),gn(e,r.m("collapse"))),e.style.width=`${e.scrollWidth}px`,e.style.overflow="hidden"},onLeave(e){fa(e,"horizontal-collapse-transition"),e.style.width=`${e.dataset.scrollWidth}px`}}}}});function V0e(r,e,t,i,o,n){return A(),_e(fi,$t({mode:"out-in"},r.listeners),{default:se(()=>[Oe(r.$slots,"default")]),_:3},16)}var G0e=Xe(z0e,[["render",V0e],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function Y4(r,e){const t=N(()=>{let i=r.parent;const o=[e.value];for(;i.type.name!=="ElMenu";)i.props.index&&o.unshift(i.props.index),i=i.parent;return o});return{parentMenu:N(()=>{let i=r.parent;for(;i&&!["ElMenu","ElSubMenu"].includes(i.type.name);)i=i.parent;return i}),indexPath:t}}function H0e(r){return N(()=>{const e=r.backgroundColor;return e?new oF(e).shade(20).toString():""})}const J4=(r,e)=>{const t=Pe("menu");return N(()=>t.cssVarBlock({"text-color":r.textColor||"","hover-text-color":r.textColor||"","bg-color":r.backgroundColor||"","hover-bg-color":H0e(r).value||"","active-color":r.activeTextColor||"",level:`${e}`}))},j0e=Ye({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},teleported:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6},expandCloseIcon:{type:Lr},expandOpenIcon:{type:Lr},collapseCloseIcon:{type:Lr},collapseOpenIcon:{type:Lr}}),Ob="ElSubMenu";var RT=ne({name:Ob,props:j0e,setup(r,{slots:e,expose:t}){ga({from:"popper-append-to-body",replacement:"teleported",scope:Ob,version:"2.3.0",ref:"https://element-plus.org/en-US/component/menu.html#submenu-attributes"},N(()=>r.popperAppendToBody!==void 0));const i=It(),{indexPath:o,parentMenu:n}=Y4(i,N(()=>r.index)),s=Pe("menu"),a=Pe("sub-menu"),l=ot("rootMenu");l||Ei(Ob,"can not inject root menu");const c=ot(`subMenu:${n.value.uid}`);c||Ei(Ob,"can not inject sub menu");const u=V({}),d=V({});let h;const p=V(!1),m=V(),g=V(null),v=N(()=>B.value==="horizontal"&&b.value?"bottom-start":"right-start"),y=N(()=>B.value==="horizontal"&&b.value||B.value==="vertical"&&!l.props.collapse?r.expandCloseIcon&&r.expandOpenIcon?w.value?r.expandOpenIcon:r.expandCloseIcon:Ql:r.collapseCloseIcon&&r.collapseOpenIcon?w.value?r.collapseOpenIcon:r.collapseCloseIcon:Ko),b=N(()=>c.level===0),x=N(()=>{var H;const $=(H=r.teleported)!=null?H:r.popperAppendToBody;return $===void 0?b.value:$}),_=N(()=>l.props.collapse?`${s.namespace.value}-zoom-in-left`:`${s.namespace.value}-zoom-in-top`),S=N(()=>B.value==="horizontal"&&b.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),w=N(()=>l.openedMenus.includes(r.index)),M=N(()=>{let H=!1;return Object.values(u.value).forEach($=>{$.active&&(H=!0)}),Object.values(d.value).forEach($=>{$.active&&(H=!0)}),H}),T=N(()=>l.props.backgroundColor||""),E=N(()=>l.props.activeTextColor||""),C=N(()=>l.props.textColor||""),B=N(()=>l.props.mode),I=ur({index:r.index,indexPath:o,active:M}),L=J4(l.props,c.level+1),P=N(()=>B.value!=="horizontal"?{color:C.value}:{borderBottomColor:M.value?l.props.activeTextColor?E.value:"":"transparent",color:M.value?E.value:C.value}),U=()=>{var H,$,j;return(j=($=(H=g.value)==null?void 0:H.popperRef)==null?void 0:$.popperInstanceRef)==null?void 0:j.destroy()},G=H=>{H||U()},R=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||r.disabled||l.handleSubMenuClick({index:r.index,indexPath:o.value,active:M.value})},F=(H,$=r.showTimeout)=>{var j;H.type!=="focus"&&(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||r.disabled||(c.mouseInChild.value=!0,h==null||h(),{stop:h}=vu(()=>{l.openMenu(r.index,o.value)},$),x.value&&((j=n.value.vnode.el)==null||j.dispatchEvent(new MouseEvent("mouseenter")))))},O=(H=!1)=>{var $,j;l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||(h==null||h(),c.mouseInChild.value=!1,{stop:h}=vu(()=>!p.value&&l.closeMenu(r.index,o.value),r.hideTimeout),x.value&&H&&(($=i.parent)==null?void 0:$.type.name)==="ElSubMenu"&&((j=c.handleMouseleave)==null||j.call(c,!0)))};ke(()=>l.props.collapse,H=>G(!!H));{const H=j=>{d.value[j.index]=j},$=j=>{delete d.value[j.index]};Wt(`subMenu:${i.uid}`,{addSubMenu:H,removeSubMenu:$,handleMouseleave:O,mouseInChild:p,level:c.level+1})}return t({opened:w}),Rt(()=>{l.addSubMenu(I),c.addSubMenu(I)}),Vr(()=>{c.removeSubMenu(I),l.removeSubMenu(I)}),()=>{var H;const $=[(H=e.title)==null?void 0:H.call(e),pt(st,{class:a.e("icon-arrow"),style:{transform:w.value?r.expandCloseIcon&&r.expandOpenIcon||r.collapseCloseIcon&&r.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>Tt(y.value)?pt(i.appContext.components[y.value]):pt(y.value)})],j=l.isMenuPopup?pt(Zo,{ref:g,visible:w.value,effect:"light",pure:!0,offset:r.popperOffset,showArrow:!1,persistent:!0,popperClass:r.popperClass,placement:v.value,teleported:x.value,fallbackPlacements:S.value,transition:_.value,gpuAcceleration:!1},{content:()=>{var J;return pt("div",{class:[s.m(B.value),s.m("popup-container"),r.popperClass],onMouseenter:ce=>F(ce,100),onMouseleave:()=>O(!0),onFocus:ce=>F(ce,100)},[pt("ul",{class:[s.b(),s.m("popup"),s.m(`popup-${v.value}`)],style:L.value},[(J=e.default)==null?void 0:J.call(e)])])},default:()=>pt("div",{class:a.e("title"),style:[P.value,{backgroundColor:T.value}],onClick:R},$)}):pt(nt,{},[pt("div",{class:a.e("title"),style:[P.value,{backgroundColor:T.value}],ref:m,onClick:R},$),pt(Tb,{},{default:()=>{var J;return At(pt("ul",{role:"menu",class:[s.b(),s.m("inline")],style:L.value},[(J=e.default)==null?void 0:J.call(e)]),[[nr,w.value]])}})]);return pt("li",{class:[a.b(),a.is("active",M.value),a.is("opened",w.value),a.is("disabled",r.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:w.value,onMouseenter:F,onMouseleave:()=>O(!0),onFocus:F},[j])}}});const $0e=Ye({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Te(Array),default:()=>qr([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperEffect:{type:String,values:["dark","light"],default:"dark"}}),LT=r=>Array.isArray(r)&&r.every(e=>Tt(e));var W0e=ne({name:"ElMenu",props:$0e,emits:{close:(r,e)=>Tt(r)&&LT(e),open:(r,e)=>Tt(r)&&LT(e),select:(r,e,t,i)=>Tt(r)&&LT(e)&&zt(t)&&(i===void 0||i instanceof Promise)},setup(r,{emit:e,slots:t,expose:i}){const o=It(),n=o.appContext.config.globalProperties.$router,s=V(),a=Pe("menu"),l=Pe("sub-menu"),c=V(-1),u=V(r.defaultOpeneds&&!r.collapse?r.defaultOpeneds.slice(0):[]),d=V(r.defaultActive),h=V({}),p=V({}),m=N(()=>r.mode==="horizontal"||r.mode==="vertical"&&r.collapse),g=()=>{const B=d.value&&h.value[d.value];!B||r.mode==="horizontal"||r.collapse||B.indexPath.forEach(I=>{const L=p.value[I];L&&v(I,L.indexPath)})},v=(B,I)=>{u.value.includes(B)||(r.uniqueOpened&&(u.value=u.value.filter(L=>I.includes(L))),u.value.push(B),e("open",B,I))},y=B=>{const I=u.value.indexOf(B);I!==-1&&u.value.splice(I,1)},b=(B,I)=>{y(B),e("close",B,I)},x=({index:B,indexPath:I})=>{u.value.includes(B)?b(B,I):v(B,I)},_=B=>{(r.mode==="horizontal"||r.collapse)&&(u.value=[]);const{index:I,indexPath:L}=B;if(!(Mi(I)||Mi(L)))if(r.router&&n){const P=B.route||I,U=n.push(P).then(G=>(G||(d.value=I),G));e("select",I,L,{index:I,indexPath:L,route:P},U)}else d.value=I,e("select",I,L,{index:I,indexPath:L})},S=B=>{const I=h.value,L=I[B]||d.value&&I[d.value]||I[r.defaultActive];L?d.value=L.index:d.value=B},w=()=>{var B,I;if(!s.value)return-1;const L=Array.from((I=(B=s.value)==null?void 0:B.childNodes)!=null?I:[]).filter(H=>H.nodeName!=="#comment"&&(H.nodeName!=="#text"||H.nodeValue)),P=64,U=Number.parseInt(getComputedStyle(s.value).paddingLeft,10),G=Number.parseInt(getComputedStyle(s.value).paddingRight,10),R=s.value.clientWidth-U-G;let F=0,O=0;return L.forEach((H,$)=>{F+=H.offsetWidth||0,F<=R-P&&(O=$+1)}),O===L.length?-1:O},M=(B,I=33.34)=>{let L;return()=>{L&&clearTimeout(L),L=setTimeout(()=>{B()},I)}};let T=!0;const E=()=>{const B=()=>{c.value=-1,lt(()=>{c.value=w()})};T?B():M(B)(),T=!1};ke(()=>r.defaultActive,B=>{h.value[B]||(d.value=""),S(B)}),ke(()=>r.collapse,B=>{B&&(u.value=[])}),ke(h.value,g);let C;Vn(()=>{r.mode==="horizontal"&&r.ellipsis?C=ko(s,E).stop:C==null||C()});{const B=L=>{p.value[L.index]=L},I=L=>{delete p.value[L.index]};Wt("rootMenu",ur({props:r,openedMenus:u,items:h,subMenus:p,activeIndex:d,isMenuPopup:m,addMenuItem:L=>{h.value[L.index]=L},removeMenuItem:L=>{delete h.value[L.index]},addSubMenu:B,removeSubMenu:I,openMenu:v,closeMenu:b,handleMenuItemClick:_,handleSubMenuClick:x})),Wt(`subMenu:${o.uid}`,{addSubMenu:B,removeSubMenu:I,mouseInChild:V(!1),level:0})}return Rt(()=>{r.mode==="horizontal"&&new U0e(o.vnode.el,a.namespace.value)}),i({open:B=>{const{indexPath:I}=p.value[B];I.forEach(L=>v(L,I))},close:y,handleResize:E}),()=>{var B,I;let L=(I=(B=t.default)==null?void 0:B.call(t))!=null?I:[];const P=[];if(r.mode==="horizontal"&&s.value){const R=Ph(L),F=c.value===-1?R:R.slice(0,c.value),O=c.value===-1?[]:R.slice(c.value);O!=null&&O.length&&r.ellipsis&&(L=F,P.push(pt(RT,{index:"sub-menu-more",class:l.e("hide-arrow")},{title:()=>pt(st,{class:l.e("icon-more")},{default:()=>pt(Vre)}),default:()=>O})))}const U=J4(r,0),G=pt("ul",{key:String(r.collapse),role:"menubar",ref:s,style:U.value,class:{[a.b()]:!0,[a.m(r.mode)]:!0,[a.m("collapse")]:r.collapse}},[...L,...P]);return r.collapseTransition&&r.mode==="vertical"?pt(G0e,()=>G):G}}});const q0e=Ye({index:{type:Te([String,null]),default:null},route:{type:Te([String,Object])},disabled:Boolean}),X0e={click:r=>Tt(r.index)&&Array.isArray(r.indexPath)},OT="ElMenuItem",K0e=ne({name:OT,components:{ElTooltip:Zo},props:q0e,emits:X0e,setup(r,{emit:e}){const t=It(),i=ot("rootMenu"),o=Pe("menu"),n=Pe("menu-item");i||Ei(OT,"can not inject root menu");const{parentMenu:s,indexPath:a}=Y4(t,Yr(r,"index")),l=ot(`subMenu:${s.value.uid}`);l||Ei(OT,"can not inject sub menu");const c=N(()=>r.index===i.activeIndex),u=ur({index:r.index,indexPath:a,active:c}),d=()=>{r.disabled||(i.handleMenuItemClick({index:r.index,indexPath:a.value,route:r.route}),e("click",u))};return Rt(()=>{l.addSubMenu(u),i.addMenuItem(u)}),Vr(()=>{l.removeSubMenu(u),i.removeMenuItem(u)}),{parentMenu:s,rootMenu:i,active:c,nsMenu:o,nsMenuItem:n,handleClick:d}}});function Y0e(r,e,t,i,o,n){const s=_t("el-tooltip");return A(),W("li",{class:k([r.nsMenuItem.b(),r.nsMenuItem.is("active",r.active),r.nsMenuItem.is("disabled",r.disabled)]),role:"menuitem",tabindex:"-1",onClick:e[0]||(e[0]=(...a)=>r.handleClick&&r.handleClick(...a))},[r.parentMenu.type.name==="ElMenu"&&r.rootMenu.props.collapse&&r.$slots.title?(A(),_e(s,{key:0,effect:r.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:se(()=>[Oe(r.$slots,"title")]),default:se(()=>[X("div",{class:k(r.nsMenu.be("tooltip","trigger"))},[Oe(r.$slots,"default")],2)]),_:3},8,["effect"])):(A(),W(nt,{key:1},[Oe(r.$slots,"default"),Oe(r.$slots,"title")],64))],2)}var Z4=Xe(K0e,[["render",Y0e],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const J0e={title:String},Z0e="ElMenuItemGroup",Q0e=ne({name:Z0e,props:J0e,setup(){return{ns:Pe("menu-item-group")}}});function eye(r,e,t,i,o,n){return A(),W("li",{class:k(r.ns.b())},[X("div",{class:k(r.ns.e("title"))},[r.$slots.title?Oe(r.$slots,"title",{key:1}):(A(),W(nt,{key:0},[rr(ze(r.title),1)],64))],2),X("ul",null,[Oe(r.$slots,"default")])],2)}var Q4=Xe(Q0e,[["render",eye],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const tye=Bt(W0e,{MenuItem:Z4,MenuItemGroup:Q4,SubMenu:RT}),rye=ii(Z4),iye=ii(Q4),oye=ii(RT),nye=Ye({icon:{type:Lr,default:()=>wee},title:String,content:{type:String,default:""}}),sye={back:()=>!0},aye=["aria-label"],lye=ne({name:"ElPageHeader"}),cye=ne({...lye,props:nye,emits:sye,setup(r,{emit:e}){const t=yo(),{t:i}=ir(),o=Pe("page-header"),n=N(()=>[o.b(),{[o.m("has-breadcrumb")]:!!t.breadcrumb,[o.m("has-extra")]:!!t.extra,[o.is("contentful")]:!!t.default}]);function s(){e("back")}return(a,l)=>(A(),W("div",{class:k(f(n))},[a.$slots.breadcrumb?(A(),W("div",{key:0,class:k(f(o).e("breadcrumb"))},[Oe(a.$slots,"breadcrumb")],2)):we("v-if",!0),X("div",{class:k(f(o).e("header"))},[X("div",{class:k(f(o).e("left"))},[X("div",{class:k(f(o).e("back")),role:"button",tabindex:"0",onClick:s},[a.icon||a.$slots.icon?(A(),W("div",{key:0,"aria-label":a.title||f(i)("el.pageHeader.title"),class:k(f(o).e("icon"))},[Oe(a.$slots,"icon",{},()=>[a.icon?(A(),_e(f(st),{key:0},{default:se(()=>[(A(),_e(Ht(a.icon)))]),_:1})):we("v-if",!0)])],10,aye)):we("v-if",!0),X("div",{class:k(f(o).e("title"))},[Oe(a.$slots,"title",{},()=>[rr(ze(a.title||f(i)("el.pageHeader.title")),1)])],2)],2),ee(f(D4),{direction:"vertical"}),X("div",{class:k(f(o).e("content"))},[Oe(a.$slots,"content",{},()=>[rr(ze(a.content),1)])],2)],2),a.$slots.extra?(A(),W("div",{key:0,class:k(f(o).e("extra"))},[Oe(a.$slots,"extra")],2)):we("v-if",!0)],2),a.$slots.default?(A(),W("div",{key:1,class:k(f(o).e("main"))},[Oe(a.$slots,"default")],2)):we("v-if",!0)],2))}});var uye=Xe(cye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/page-header/src/page-header.vue"]]);const dye=Bt(uye),eU=Symbol("elPaginationKey"),hye=Ye({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:Lr}}),pye={click:r=>r instanceof MouseEvent},fye=["disabled","aria-label","aria-disabled"],mye={key:0},gye=ne({name:"ElPaginationPrev"}),vye=ne({...gye,props:hye,emits:pye,setup(r){const e=r,{t}=ir(),i=N(()=>e.disabled||e.currentPage<=1);return(o,n)=>(A(),W("button",{type:"button",class:"btn-prev",disabled:f(i),"aria-label":o.prevText||f(t)("el.pagination.prev"),"aria-disabled":f(i),onClick:n[0]||(n[0]=s=>o.$emit("click",s))},[o.prevText?(A(),W("span",mye,ze(o.prevText),1)):(A(),_e(f(st),{key:1},{default:se(()=>[(A(),_e(Ht(o.prevIcon)))]),_:1}))],8,fye))}});var yye=Xe(vye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/prev.vue"]]);const bye=Ye({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:Lr}}),xye=["disabled","aria-label","aria-disabled"],_ye={key:0},wye=ne({name:"ElPaginationNext"}),Sye=ne({...wye,props:bye,emits:["click"],setup(r){const e=r,{t}=ir(),i=N(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(o,n)=>(A(),W("button",{type:"button",class:"btn-next",disabled:f(i),"aria-label":o.nextText||f(t)("el.pagination.next"),"aria-disabled":f(i),onClick:n[0]||(n[0]=s=>o.$emit("click",s))},[o.nextText?(A(),W("span",_ye,ze(o.nextText),1)):(A(),_e(f(st),{key:1},{default:se(()=>[(A(),_e(Ht(o.nextIcon)))]),_:1}))],8,xye))}});var Mye=Xe(Sye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/next.vue"]]);const tU=Symbol("ElSelectGroup"),tg=Symbol("ElSelect");function Tye(r,e){const t=ot(tg),i=ot(tU,{disabled:!1}),o=N(()=>Object.prototype.toString.call(r.value).toLowerCase()==="[object object]"),n=N(()=>t.props.multiple?d(t.props.modelValue,r.value):h(r.value,t.props.modelValue)),s=N(()=>{if(t.props.multiple){const g=t.props.modelValue||[];return!n.value&&g.length>=t.props.multipleLimit&&t.props.multipleLimit>0}else return!1}),a=N(()=>r.label||(o.value?"":r.value)),l=N(()=>r.value||r.label||""),c=N(()=>r.disabled||e.groupDisabled||s.value),u=It(),d=(g=[],v)=>{if(o.value){const y=t.props.valueKey;return g&&g.some(b=>fr(Wr(b,y))===Wr(v,y))}else return g&&g.includes(v)},h=(g,v)=>{if(o.value){const{valueKey:y}=t.props;return Wr(g,y)===Wr(v,y)}else return g===v},p=()=>{!r.disabled&&!i.disabled&&(t.hoverIndex=t.optionsArray.indexOf(u.proxy))};ke(()=>a.value,()=>{!r.created&&!t.props.remote&&t.setSelected()}),ke(()=>r.value,(g,v)=>{const{remote:y,valueKey:b}=t.props;if(Object.is(g,v)||(t.onOptionDestroy(v,u.proxy),t.onOptionCreate(u.proxy)),!r.created&&!y){if(b&&typeof g=="object"&&typeof v=="object"&&g[b]===v[b])return;t.setSelected()}}),ke(()=>i.disabled,()=>{e.groupDisabled=i.disabled},{immediate:!0});const{queryChange:m}=fr(t);return ke(m,g=>{const{query:v}=f(g),y=new RegExp(QP(v),"i");e.visible=y.test(a.value)||r.created,e.visible||t.filteredOptionsCount--},{immediate:!0}),{select:t,currentLabel:a,currentValue:l,itemSelected:n,isDisabled:c,hoverItem:p}}const Eye=ne({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(r){const e=Pe("select"),t=N(()=>[e.be("dropdown","item"),e.is("disabled",f(s)),{selected:f(n),hover:f(u)}]),i=ur({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:o,itemSelected:n,isDisabled:s,select:a,hoverItem:l}=Tye(r,i),{visible:c,hover:u}=qi(i),d=It().proxy;a.onOptionCreate(d),Vr(()=>{const p=d.value,{selected:m}=a,g=(a.props.multiple?m:[m]).some(v=>v.value===d.value);lt(()=>{a.cachedOptions.get(p)===d&&!g&&a.cachedOptions.delete(p)}),a.onOptionDestroy(p,d)});function h(){r.disabled!==!0&&i.groupDisabled!==!0&&a.handleOptionSelect(d)}return{ns:e,containerKls:t,currentLabel:o,itemSelected:n,isDisabled:s,select:a,hoverItem:l,visible:c,hover:u,selectOptionClick:h,states:i}}});function Cye(r,e,t,i,o,n){return At((A(),W("li",{class:k(r.containerKls),onMouseenter:e[0]||(e[0]=(...s)=>r.hoverItem&&r.hoverItem(...s)),onClick:e[1]||(e[1]=vt((...s)=>r.selectOptionClick&&r.selectOptionClick(...s),["stop"]))},[Oe(r.$slots,"default",{},()=>[X("span",null,ze(r.currentLabel),1)])],34)),[[nr,r.visible]])}var kT=Xe(Eye,[["render",Cye],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const Nye=ne({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const r=ot(tg),e=Pe("select"),t=N(()=>r.props.popperClass),i=N(()=>r.props.multiple),o=N(()=>r.props.fitInputWidth),n=V("");function s(){var a;n.value=`${(a=r.selectWrapper)==null?void 0:a.offsetWidth}px`}return Rt(()=>{s(),ko(r.selectWrapper,s)}),{ns:e,minWidth:n,popperClass:t,isMultiple:i,isFitInputWidth:o}}});function Aye(r,e,t,i,o,n){return A(),W("div",{class:k([r.ns.b("dropdown"),r.ns.is("multiple",r.isMultiple),r.popperClass]),style:ct({[r.isFitInputWidth?"width":"minWidth"]:r.minWidth})},[Oe(r.$slots,"default")],6)}var Rye=Xe(Nye,[["render",Aye],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function Lye(r){const{t:e}=ir();return ur({options:new Map,cachedOptions:new Map,disabledOptions:new Map,createdLabel:null,createdSelected:!1,selected:r.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:e("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,prefixWidth:11,mouseEnter:!1,focused:!1})}const Oye=(r,e,t)=>{const{t:i}=ir(),o=Pe("select");ga({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},N(()=>r.suffixTransition===!1));const n=V(null),s=V(null),a=V(null),l=V(null),c=V(null),u=V(null),d=V(null),h=V(null),p=V(-1),m=Rr({query:""}),g=Rr(""),v=V([]);let y=0;const{form:b,formItem:x}=Jo(),_=N(()=>!r.filterable||r.multiple||!e.visible),S=N(()=>r.disabled||(b==null?void 0:b.disabled)),w=N(()=>{const he=r.multiple?Array.isArray(r.modelValue)&&r.modelValue.length>0:r.modelValue!==void 0&&r.modelValue!==null&&r.modelValue!=="";return r.clearable&&!S.value&&e.inputHovering&&he}),M=N(()=>r.remote&&r.filterable&&!r.remoteShowSuffix?"":r.suffixIcon),T=N(()=>o.is("reverse",M.value&&e.visible&&r.suffixTransition)),E=N(()=>(b==null?void 0:b.statusIcon)&&(x==null?void 0:x.validateState)&&dM[x==null?void 0:x.validateState]),C=N(()=>r.remote?300:0),B=N(()=>r.loading?r.loadingText||i("el.select.loading"):r.remote&&e.query===""&&e.options.size===0?!1:r.filterable&&e.query&&e.options.size>0&&e.filteredOptionsCount===0?r.noMatchText||i("el.select.noMatch"):e.options.size===0?r.noDataText||i("el.select.noData"):null),I=N(()=>{const he=Array.from(e.options.values()),Ee=[];return v.value.forEach(pe=>{const Be=he.findIndex(Lt=>Lt.currentLabel===pe);Be>-1&&Ee.push(he[Be])}),Ee.length?Ee:he}),L=N(()=>Array.from(e.cachedOptions.values())),P=N(()=>{const he=I.value.filter(Ee=>!Ee.created).some(Ee=>Ee.currentLabel===e.query);return r.filterable&&r.allowCreate&&e.query!==""&&!he}),U=Ci(),G=N(()=>["small"].includes(U.value)?"small":"default"),R=N({get(){return e.visible&&B.value!==!1},set(he){e.visible=he}});ke([()=>S.value,()=>U.value,()=>b==null?void 0:b.size],()=>{lt(()=>{F()})}),ke(()=>r.placeholder,he=>{e.cachedPlaceHolder=e.currentPlaceholder=he,r.multiple&&Array.isArray(r.modelValue)&&r.modelValue.length>0&&(e.currentPlaceholder="")}),ke(()=>r.modelValue,(he,Ee)=>{r.multiple&&(F(),he&&he.length>0||s.value&&e.query!==""?e.currentPlaceholder="":e.currentPlaceholder=e.cachedPlaceHolder,r.filterable&&!r.reserveKeyword&&(e.query="",O(e.query))),j(),r.filterable&&!r.multiple&&(e.inputLength=20),!mn(he,Ee)&&r.validateEvent&&(x==null||x.validate("change").catch(pe=>{}))},{flush:"post",deep:!0}),ke(()=>e.visible,he=>{var Ee,pe,Be,Lt,Ot;he?((pe=(Ee=l.value)==null?void 0:Ee.updatePopper)==null||pe.call(Ee),r.filterable&&(e.filteredOptionsCount=e.optionsCount,e.query=r.remote?"":e.selectedLabel,(Lt=(Be=a.value)==null?void 0:Be.focus)==null||Lt.call(Be),r.multiple?(Ot=s.value)==null||Ot.focus():e.selectedLabel&&(e.currentPlaceholder=`${e.selectedLabel}`,e.selectedLabel=""),O(e.query),!r.multiple&&!r.remote&&(m.value.query="",Jf(m),Jf(g)))):(r.filterable&&(St(r.filterMethod)&&r.filterMethod(""),St(r.remoteMethod)&&r.remoteMethod("")),e.query="",e.previousQuery=null,e.selectedLabel="",e.inputLength=20,e.menuVisibleOnFocus=!1,ce(),lt(()=>{s.value&&s.value.value===""&&e.selected.length===0&&(e.currentPlaceholder=e.cachedPlaceHolder)}),r.multiple||(e.selected&&(r.filterable&&r.allowCreate&&e.createdSelected&&e.createdLabel?e.selectedLabel=e.createdLabel:e.selectedLabel=e.selected.currentLabel,r.filterable&&(e.query=e.selectedLabel)),r.filterable&&(e.currentPlaceholder=e.cachedPlaceHolder))),t.emit("visible-change",he)}),ke(()=>e.options.entries(),()=>{var he,Ee,pe;if(!Jt)return;(Ee=(he=l.value)==null?void 0:he.updatePopper)==null||Ee.call(he),r.multiple&&F();const Be=((pe=d.value)==null?void 0:pe.querySelectorAll("input"))||[];(!r.filterable&&!r.defaultFirstOption&&!Pi(r.modelValue)||!Array.from(Be).includes(document.activeElement))&&j(),r.defaultFirstOption&&(r.filterable||r.remote)&&e.filteredOptionsCount&&$()},{flush:"post"}),ke(()=>e.hoverIndex,he=>{wt(he)&&he>-1?p.value=I.value[he]||{}:p.value={},I.value.forEach(Ee=>{Ee.hover=p.value===Ee})});const F=()=>{lt(()=>{var he,Ee;if(!n.value)return;const pe=n.value.$el.querySelector("input");y=y||(pe.clientHeight>0?pe.clientHeight+2:0);const Be=u.value,Lt=Foe(U.value||(b==null?void 0:b.size)),Ot=U.value||Lt===y||y<=0?Lt:y;pe.offsetParent!==null&&(pe.style.height=`${(e.selected.length===0?Ot:Math.max(Be?Be.clientHeight+(Be.clientHeight>Ot?6:0):0,Ot))-2}px`),e.visible&&B.value!==!1&&((Ee=(he=l.value)==null?void 0:he.updatePopper)==null||Ee.call(he))})},O=async he=>{if(!(e.previousQuery===he||e.isOnComposition)){if(e.previousQuery===null&&(St(r.filterMethod)||St(r.remoteMethod))){e.previousQuery=he;return}e.previousQuery=he,lt(()=>{var Ee,pe;e.visible&&((pe=(Ee=l.value)==null?void 0:Ee.updatePopper)==null||pe.call(Ee))}),e.hoverIndex=-1,r.multiple&&r.filterable&&lt(()=>{if(!S.value){const Ee=s.value.value.length*15+20;e.inputLength=r.collapseTags?Math.min(50,Ee):Ee,H()}F()}),r.remote&&St(r.remoteMethod)?(e.hoverIndex=-1,r.remoteMethod(he)):St(r.filterMethod)?(r.filterMethod(he),Jf(g)):(e.filteredOptionsCount=e.optionsCount,m.value.query=he,Jf(m),Jf(g)),r.defaultFirstOption&&(r.filterable||r.remote)&&e.filteredOptionsCount&&(await lt(),$())}},H=()=>{e.currentPlaceholder!==""&&(e.currentPlaceholder=s.value.value?"":e.cachedPlaceHolder)},$=()=>{const he=I.value.filter(Be=>Be.visible&&!Be.disabled&&!Be.states.groupDisabled),Ee=he.find(Be=>Be.created),pe=he[0];e.hoverIndex=le(I.value,Ee||pe)},j=()=>{var he;if(r.multiple)e.selectedLabel="";else{const pe=J(r.modelValue);(he=pe.props)!=null&&he.created?(e.createdLabel=pe.props.value,e.createdSelected=!0):e.createdSelected=!1,e.selectedLabel=pe.currentLabel,e.selected=pe,r.filterable&&(e.query=e.selectedLabel);return}const Ee=[];Array.isArray(r.modelValue)&&r.modelValue.forEach(pe=>{Ee.push(J(pe))}),e.selected=Ee,lt(()=>{F()})},J=he=>{let Ee;const pe=$0(he).toLowerCase()==="object",Be=$0(he).toLowerCase()==="null",Lt=$0(he).toLowerCase()==="undefined";for(let Tr=e.cachedOptions.size-1;Tr>=0;Tr--){const Br=L.value[Tr];if(pe?Wr(Br.value,r.valueKey)===Wr(he,r.valueKey):Br.value===he){Ee={value:he,currentLabel:Br.currentLabel,isDisabled:Br.isDisabled};break}}if(Ee)return Ee;const Ot=pe?he.label:!Be&&!Lt?he:"",zr={value:he,currentLabel:Ot};return r.multiple&&(zr.hitState=!1),zr},ce=()=>{setTimeout(()=>{const he=r.valueKey;r.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map(Ee=>I.value.findIndex(pe=>Wr(pe,he)===Wr(Ee,he)))):e.hoverIndex=-1:e.hoverIndex=I.value.findIndex(Ee=>fe(Ee)===fe(e.selected))},300)},ve=()=>{var he,Ee;xe(),(Ee=(he=l.value)==null?void 0:he.updatePopper)==null||Ee.call(he),r.multiple&&F()},xe=()=>{var he;e.inputWidth=(he=n.value)==null?void 0:he.$el.offsetWidth},te=()=>{r.filterable&&e.query!==e.selectedLabel&&(e.query=e.selectedLabel,O(e.query))},Z=Xo(()=>{te()},C.value),de=Xo(he=>{O(he.target.value)},C.value),Ce=he=>{mn(r.modelValue,he)||t.emit(Fr,he)},ue=he=>EQ(he,Ee=>!e.disabledOptions.has(Ee)),D=he=>{if(he.code!==ft.delete){if(he.target.value.length<=0&&!je()){const Ee=r.modelValue.slice(),pe=ue(Ee);if(pe<0)return;Ee.splice(pe,1),t.emit(Vt,Ee),Ce(Ee)}he.target.value.length===1&&r.modelValue.length===0&&(e.currentPlaceholder=e.cachedPlaceHolder)}},K=(he,Ee)=>{const pe=e.selected.indexOf(Ee);if(pe>-1&&!S.value){const Be=r.modelValue.slice();Be.splice(pe,1),t.emit(Vt,Be),Ce(Be),t.emit("remove-tag",Ee.value)}he.stopPropagation(),Ie()},re=he=>{he.stopPropagation();const Ee=r.multiple?[]:"";if(!Tt(Ee))for(const pe of e.selected)pe.isDisabled&&Ee.push(pe.value);t.emit(Vt,Ee),Ce(Ee),e.hoverIndex=-1,e.visible=!1,t.emit("clear"),Ie()},ae=he=>{var Ee;if(r.multiple){const pe=(r.modelValue||[]).slice(),Be=le(pe,he.value);Be>-1?pe.splice(Be,1):(r.multipleLimit<=0||pe.length<r.multipleLimit)&&pe.push(he.value),t.emit(Vt,pe),Ce(pe),he.created&&(e.query="",O(""),e.inputLength=20),r.filterable&&((Ee=s.value)==null||Ee.focus())}else t.emit(Vt,he.value),Ce(he.value),e.visible=!1;Se(),!e.visible&&lt(()=>{Ae(he)})},le=(he=[],Ee)=>{if(!zt(Ee))return he.indexOf(Ee);const pe=r.valueKey;let Be=-1;return he.some((Lt,Ot)=>fr(Wr(Lt,pe))===Wr(Ee,pe)?(Be=Ot,!0):!1),Be},Se=()=>{const he=s.value||n.value;he&&(he==null||he.focus())},Ae=he=>{var Ee,pe,Be,Lt,Ot;const zr=Array.isArray(he)?he[0]:he;let Tr=null;if(zr!=null&&zr.value){const Br=I.value.filter(Ls=>Ls.value===zr.value);Br.length>0&&(Tr=Br[0].$el)}if(l.value&&Tr){const Br=(Lt=(Be=(pe=(Ee=l.value)==null?void 0:Ee.popperRef)==null?void 0:pe.contentRef)==null?void 0:Be.querySelector)==null?void 0:Lt.call(Be,`.${o.be("dropdown","wrap")}`);Br&&rD(Br,Tr)}(Ot=h.value)==null||Ot.handleScroll()},Ne=he=>{e.optionsCount++,e.filteredOptionsCount++,e.options.set(he.value,he),e.cachedOptions.set(he.value,he),he.disabled&&e.disabledOptions.set(he.value,he)},Me=(he,Ee)=>{e.options.get(he)===Ee&&(e.optionsCount--,e.filteredOptionsCount--,e.options.delete(he))},Le=he=>{he.code!==ft.backspace&&je(!1),e.inputLength=s.value.value.length*15+20,F()},je=he=>{if(!Array.isArray(e.selected))return;const Ee=ue(e.selected.map(Be=>Be.value)),pe=e.selected[Ee];if(pe)return he===!0||he===!1?(pe.hitState=he,he):(pe.hitState=!pe.hitState,pe.hitState)},Y=he=>{const Ee=he.target.value;if(he.type==="compositionend")e.isOnComposition=!1,lt(()=>O(Ee));else{const pe=Ee[Ee.length-1]||"";e.isOnComposition=!$y(pe)}},z=()=>{lt(()=>Ae(e.selected))},me=he=>{e.focused||((r.automaticDropdown||r.filterable)&&(r.filterable&&!e.visible&&(e.menuVisibleOnFocus=!0),e.visible=!0),e.focused=!0,t.emit("focus",he))},Ie=()=>{var he,Ee;e.visible?(he=s.value||n.value)==null||he.focus():(Ee=n.value)==null||Ee.focus()},Ue=()=>{var he,Ee,pe;e.visible=!1,(he=n.value)==null||he.blur(),(pe=(Ee=a.value)==null?void 0:Ee.blur)==null||pe.call(Ee)},Re=he=>{var Ee,pe,Be;(Ee=l.value)!=null&&Ee.isFocusInsideContent(he)||(pe=c.value)!=null&&pe.isFocusInsideContent(he)||(Be=d.value)!=null&&Be.contains(he.relatedTarget)||(e.visible&&Ve(),e.focused=!1,t.emit("blur",he))},$e=he=>{re(he)},Ve=()=>{e.visible=!1},ye=he=>{e.visible&&(he.preventDefault(),he.stopPropagation(),e.visible=!1)},q=he=>{he&&!e.mouseEnter||S.value||(e.menuVisibleOnFocus?e.menuVisibleOnFocus=!1:(!l.value||!l.value.isFocusInsideContent())&&(e.visible=!e.visible),Ie())},oe=()=>{e.visible?I.value[e.hoverIndex]&&ae(I.value[e.hoverIndex]):q()},fe=he=>zt(he.value)?Wr(he.value,r.valueKey):he.value,ie=N(()=>I.value.filter(he=>he.visible).every(he=>he.disabled)),De=N(()=>e.selected.slice(0,r.maxCollapseTags)),et=N(()=>e.selected.slice(r.maxCollapseTags)),ht=he=>{if(!e.visible){e.visible=!0;return}if(!(e.options.size===0||e.filteredOptionsCount===0)&&!e.isOnComposition&&!ie.value){he==="next"?(e.hoverIndex++,e.hoverIndex===e.options.size&&(e.hoverIndex=0)):he==="prev"&&(e.hoverIndex--,e.hoverIndex<0&&(e.hoverIndex=e.options.size-1));const Ee=I.value[e.hoverIndex];(Ee.disabled===!0||Ee.states.groupDisabled===!0||!Ee.visible)&&ht(he),lt(()=>Ae(p.value))}},be=()=>{e.mouseEnter=!0},mt=()=>{e.mouseEnter=!1},at=(he,Ee)=>{var pe,Be;K(he,Ee),(Be=(pe=c.value)==null?void 0:pe.updatePopper)==null||Be.call(pe)},xt=N(()=>({maxWidth:`${f(e.inputWidth)-32-(E.value?22:0)}px`,width:"100%"}));return{optionList:v,optionsArray:I,selectSize:U,handleResize:ve,debouncedOnInputChange:Z,debouncedQueryChange:de,deletePrevTag:D,deleteTag:K,deleteSelected:re,handleOptionSelect:ae,scrollToOption:Ae,readonly:_,resetInputHeight:F,showClose:w,iconComponent:M,iconReverse:T,showNewOption:P,collapseTagSize:G,setSelected:j,managePlaceholder:H,selectDisabled:S,emptyText:B,toggleLastOptionHitState:je,resetInputState:Le,handleComposition:Y,onOptionCreate:Ne,onOptionDestroy:Me,handleMenuEnter:z,handleFocus:me,focus:Ie,blur:Ue,handleBlur:Re,handleClearClick:$e,handleClose:Ve,handleKeydownEscape:ye,toggleMenu:q,selectOption:oe,getValueKey:fe,navigateOptions:ht,handleDeleteTooltipTag:at,dropMenuVisible:R,queryChange:m,groupQueryChange:g,showTagList:De,collapseTagList:et,selectTagsStyle:xt,reference:n,input:s,iOSInput:a,tooltipRef:l,tagTooltipRef:c,tags:u,selectWrapper:d,scrollbar:h,handleMouseEnter:be,handleMouseLeave:mt}};var kye=ne({name:"ElOptions",emits:["update-options"],setup(r,{slots:e,emit:t}){let i=[];function o(n,s){if(n.length!==s.length)return!1;for(const[a]of n.entries())if(n[a]!=s[a])return!1;return!0}return()=>{var n,s;const a=(n=e.default)==null?void 0:n.call(e),l=[];function c(u){Array.isArray(u)&&u.forEach(d=>{var h,p,m,g;const v=(h=(d==null?void 0:d.type)||{})==null?void 0:h.name;v==="ElOptionGroup"?c(!Tt(d.children)&&!Array.isArray(d.children)&&St((p=d.children)==null?void 0:p.default)?(m=d.children)==null?void 0:m.default():d.children):v==="ElOption"?l.push((g=d.props)==null?void 0:g.label):Array.isArray(d.children)&&c(d.children)})}return a.length&&c((s=a[0])==null?void 0:s.children),o(l,i)||(i=l,t("update-options",l)),a}}});const rU="ElSelect",Iye=ne({name:rU,componentName:rU,components:{ElInput:Io,ElSelectMenu:Rye,ElOption:kT,ElOptions:kye,ElTag:Ym,ElScrollbar:sl,ElTooltip:Zo,ElIcon:st},directives:{ClickOutside:fc},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:jy},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:ro.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Lr,default:tc},fitInputWidth:Boolean,suffixIcon:{type:Lr,default:Ql},tagType:{...vT.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,suffixTransition:{type:Boolean,default:!0},placement:{type:String,values:Eu,default:"bottom-start"},ariaLabel:{type:String,default:void 0}},emits:[Vt,Fr,"remove-tag","clear","visible-change","focus","blur"],setup(r,e){const t=Pe("select"),i=Pe("input"),{t:o}=ir(),n=Lye(r),{optionList:s,optionsArray:a,selectSize:l,readonly:c,handleResize:u,collapseTagSize:d,debouncedOnInputChange:h,debouncedQueryChange:p,deletePrevTag:m,deleteTag:g,deleteSelected:v,handleOptionSelect:y,scrollToOption:b,setSelected:x,resetInputHeight:_,managePlaceholder:S,showClose:w,selectDisabled:M,iconComponent:T,iconReverse:E,showNewOption:C,emptyText:B,toggleLastOptionHitState:I,resetInputState:L,handleComposition:P,onOptionCreate:U,onOptionDestroy:G,handleMenuEnter:R,handleFocus:F,focus:O,blur:H,handleBlur:$,handleClearClick:j,handleClose:J,handleKeydownEscape:ce,toggleMenu:ve,selectOption:xe,getValueKey:te,navigateOptions:Z,handleDeleteTooltipTag:de,dropMenuVisible:Ce,reference:ue,input:D,iOSInput:K,tooltipRef:re,tagTooltipRef:ae,tags:le,selectWrapper:Se,scrollbar:Ae,queryChange:Ne,groupQueryChange:Me,handleMouseEnter:Le,handleMouseLeave:je,showTagList:Y,collapseTagList:z,selectTagsStyle:me}=Oye(r,n,e),{inputWidth:Ie,selected:Ue,inputLength:Re,filteredOptionsCount:$e,visible:Ve,selectedLabel:ye,hoverIndex:q,query:oe,inputHovering:fe,currentPlaceholder:ie,menuVisibleOnFocus:De,isOnComposition:et,options:ht,cachedOptions:be,optionsCount:mt,prefixWidth:at}=qi(n),xt=N(()=>{const Br=[t.b()],Ls=f(l);return Ls&&Br.push(t.m(Ls)),r.disabled&&Br.push(t.m("disabled")),Br}),he=N(()=>[t.e("tags"),t.is("disabled",f(M))]),Ee=N(()=>[t.b("tags-wrapper"),{"has-prefix":f(at)&&f(Ue).length}]),pe=N(()=>[t.e("input"),t.is(f(l)),t.is("disabled",f(M))]),Be=N(()=>[t.e("input"),t.is(f(l)),t.em("input","iOS")]),Lt=N(()=>[t.is("empty",!r.allowCreate&&!!f(oe)&&f($e)===0)]),Ot=N(()=>({maxWidth:`${f(Ie)>123?f(Ie)-123:f(Ie)-75}px`})),zr=N(()=>({marginLeft:`${f(at)}px`,flexGrow:1,width:`${f(Re)/(f(Ie)-32)}%`,maxWidth:`${f(Ie)-42}px`}));Wt(tg,ur({props:r,options:ht,optionsArray:a,cachedOptions:be,optionsCount:mt,filteredOptionsCount:$e,hoverIndex:q,handleOptionSelect:y,onOptionCreate:U,onOptionDestroy:G,selectWrapper:Se,selected:Ue,setSelected:x,queryChange:Ne,groupQueryChange:Me})),Rt(()=>{n.cachedPlaceHolder=ie.value=r.placeholder||(()=>o("el.select.placeholder")),r.multiple&&Array.isArray(r.modelValue)&&r.modelValue.length>0&&(ie.value=""),ko(Se,u),r.remote&&r.multiple&&_(),lt(()=>{const Br=ue.value&&ue.value.$el;if(Br&&(Ie.value=Br.getBoundingClientRect().width,e.slots.prefix)){const Ls=Br.querySelector(`.${i.e("prefix")}`);at.value=Math.max(Ls.getBoundingClientRect().width+11,30)}}),x()}),r.multiple&&!Array.isArray(r.modelValue)&&e.emit(Vt,[]),!r.multiple&&Array.isArray(r.modelValue)&&e.emit(Vt,"");const Tr=N(()=>{var Br,Ls;return(Ls=(Br=re.value)==null?void 0:Br.popperRef)==null?void 0:Ls.contentRef});return{isIOS:E3,onOptionsRendered:Br=>{s.value=Br},prefixWidth:at,selectSize:l,readonly:c,handleResize:u,collapseTagSize:d,debouncedOnInputChange:h,debouncedQueryChange:p,deletePrevTag:m,deleteTag:g,handleDeleteTooltipTag:de,deleteSelected:v,handleOptionSelect:y,scrollToOption:b,inputWidth:Ie,selected:Ue,inputLength:Re,filteredOptionsCount:$e,visible:Ve,selectedLabel:ye,hoverIndex:q,query:oe,inputHovering:fe,currentPlaceholder:ie,menuVisibleOnFocus:De,isOnComposition:et,options:ht,resetInputHeight:_,managePlaceholder:S,showClose:w,selectDisabled:M,iconComponent:T,iconReverse:E,showNewOption:C,emptyText:B,toggleLastOptionHitState:I,resetInputState:L,handleComposition:P,handleMenuEnter:R,handleFocus:F,focus:O,blur:H,handleBlur:$,handleClearClick:j,handleClose:J,handleKeydownEscape:ce,toggleMenu:ve,selectOption:xe,getValueKey:te,navigateOptions:Z,dropMenuVisible:Ce,reference:ue,input:D,iOSInput:K,tooltipRef:re,popperPaneRef:Tr,tags:le,selectWrapper:Se,scrollbar:Ae,wrapperKls:xt,tagsKls:he,tagWrapperKls:Ee,inputKls:pe,iOSInputKls:Be,scrollbarKls:Lt,selectTagsStyle:me,nsSelect:t,tagTextStyle:Ot,inputStyle:zr,handleMouseEnter:Le,handleMouseLeave:je,showTagList:Y,collapseTagList:z,tagTooltipRef:ae}}}),Pye=["disabled","autocomplete","aria-label"],Dye=["disabled"],Bye={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function Fye(r,e,t,i,o,n){const s=_t("el-tag"),a=_t("el-tooltip"),l=_t("el-icon"),c=_t("el-input"),u=_t("el-option"),d=_t("el-options"),h=_t("el-scrollbar"),p=_t("el-select-menu"),m=bh("click-outside");return At((A(),W("div",{ref:"selectWrapper",class:k(r.wrapperKls),onMouseenter:e[22]||(e[22]=(...g)=>r.handleMouseEnter&&r.handleMouseEnter(...g)),onMouseleave:e[23]||(e[23]=(...g)=>r.handleMouseLeave&&r.handleMouseLeave(...g)),onClick:e[24]||(e[24]=vt((...g)=>r.toggleMenu&&r.toggleMenu(...g),["stop"]))},[ee(a,{ref:"tooltipRef",visible:r.dropMenuVisible,placement:r.placement,teleported:r.teleported,"popper-class":[r.nsSelect.e("popper"),r.popperClass],"popper-options":r.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:r.effect,pure:"",trigger:"click",transition:`${r.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:r.persistent,onShow:r.handleMenuEnter},{default:se(()=>[X("div",{class:"select-trigger",onMouseenter:e[20]||(e[20]=g=>r.inputHovering=!0),onMouseleave:e[21]||(e[21]=g=>r.inputHovering=!1)},[r.multiple?(A(),W("div",{key:0,ref:"tags",tabindex:"-1",class:k(r.tagsKls),style:ct(r.selectTagsStyle),onClick:e[15]||(e[15]=(...g)=>r.focus&&r.focus(...g))},[r.collapseTags&&r.selected.length?(A(),_e(fi,{key:0,onAfterLeave:r.resetInputHeight},{default:se(()=>[X("span",{class:k(r.tagWrapperKls)},[(A(!0),W(nt,null,jt(r.showTagList,g=>(A(),_e(s,{key:r.getValueKey(g),closable:!r.selectDisabled&&!g.isDisabled,size:r.collapseTagSize,hit:g.hitState,type:r.tagType,"disable-transitions":"",onClose:v=>r.deleteTag(v,g)},{default:se(()=>[X("span",{class:k(r.nsSelect.e("tags-text")),style:ct(r.tagTextStyle)},ze(g.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128)),r.selected.length>r.maxCollapseTags?(A(),_e(s,{key:0,closable:!1,size:r.collapseTagSize,type:r.tagType,"disable-transitions":""},{default:se(()=>[r.collapseTagsTooltip?(A(),_e(a,{key:0,ref:"tagTooltipRef",disabled:r.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:r.effect,placement:"bottom",teleported:r.teleported},{default:se(()=>[X("span",{class:k(r.nsSelect.e("tags-text"))},"+ "+ze(r.selected.length-r.maxCollapseTags),3)]),content:se(()=>[X("div",{class:k(r.nsSelect.e("collapse-tags"))},[(A(!0),W(nt,null,jt(r.collapseTagList,g=>(A(),W("div",{key:r.getValueKey(g),class:k(r.nsSelect.e("collapse-tag"))},[ee(s,{class:"in-tooltip",closable:!r.selectDisabled&&!g.isDisabled,size:r.collapseTagSize,hit:g.hitState,type:r.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:v=>r.handleDeleteTooltipTag(v,g)},{default:se(()=>[X("span",{class:k(r.nsSelect.e("tags-text")),style:ct({maxWidth:r.inputWidth-75+"px"})},ze(g.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):(A(),W("span",{key:1,class:k(r.nsSelect.e("tags-text"))},"+ "+ze(r.selected.length-r.maxCollapseTags),3))]),_:1},8,["size","type"])):we("v-if",!0)],2)]),_:1},8,["onAfterLeave"])):we("v-if",!0),r.collapseTags?we("v-if",!0):(A(),_e(fi,{key:1,onAfterLeave:r.resetInputHeight},{default:se(()=>[X("span",{class:k(r.tagWrapperKls),style:ct(r.prefixWidth&&r.selected.length?{marginLeft:`${r.prefixWidth}px`}:"")},[(A(!0),W(nt,null,jt(r.selected,g=>(A(),_e(s,{key:r.getValueKey(g),closable:!r.selectDisabled&&!g.isDisabled,size:r.collapseTagSize,hit:g.hitState,type:r.tagType,"disable-transitions":"",onClose:v=>r.deleteTag(v,g)},{default:se(()=>[X("span",{class:k(r.nsSelect.e("tags-text")),style:ct({maxWidth:r.inputWidth-75+"px"})},ze(g.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],6)]),_:1},8,["onAfterLeave"])),r.filterable&&!r.selectDisabled?At((A(),W("input",{key:2,ref:"input","onUpdate:modelValue":e[0]||(e[0]=g=>r.query=g),type:"text",class:k(r.inputKls),disabled:r.selectDisabled,autocomplete:r.autocomplete,style:ct(r.inputStyle),"aria-label":r.ariaLabel,onFocus:e[1]||(e[1]=(...g)=>r.handleFocus&&r.handleFocus(...g)),onBlur:e[2]||(e[2]=(...g)=>r.handleBlur&&r.handleBlur(...g)),onKeyup:e[3]||(e[3]=(...g)=>r.managePlaceholder&&r.managePlaceholder(...g)),onKeydown:[e[4]||(e[4]=(...g)=>r.resetInputState&&r.resetInputState(...g)),e[5]||(e[5]=Qt(vt(g=>r.navigateOptions("next"),["prevent"]),["down"])),e[6]||(e[6]=Qt(vt(g=>r.navigateOptions("prev"),["prevent"]),["up"])),e[7]||(e[7]=Qt((...g)=>r.handleKeydownEscape&&r.handleKeydownEscape(...g),["esc"])),e[8]||(e[8]=Qt(vt((...g)=>r.selectOption&&r.selectOption(...g),["stop","prevent"]),["enter"])),e[9]||(e[9]=Qt((...g)=>r.deletePrevTag&&r.deletePrevTag(...g),["delete"])),e[10]||(e[10]=Qt(g=>r.visible=!1,["tab"]))],onCompositionstart:e[11]||(e[11]=(...g)=>r.handleComposition&&r.handleComposition(...g)),onCompositionupdate:e[12]||(e[12]=(...g)=>r.handleComposition&&r.handleComposition(...g)),onCompositionend:e[13]||(e[13]=(...g)=>r.handleComposition&&r.handleComposition(...g)),onInput:e[14]||(e[14]=(...g)=>r.debouncedQueryChange&&r.debouncedQueryChange(...g))},null,46,Pye)),[[xS,r.query]]):we("v-if",!0)],6)):we("v-if",!0),we(" fix: https://github.com/element-plus/element-plus/issues/11415 "),r.isIOS&&!r.multiple&&r.filterable&&r.readonly?(A(),W("input",{key:1,ref:"iOSInput",class:k(r.iOSInputKls),disabled:r.selectDisabled,type:"text"},null,10,Dye)):we("v-if",!0),ee(c,{id:r.id,ref:"reference",modelValue:r.selectedLabel,"onUpdate:modelValue":e[16]||(e[16]=g=>r.selectedLabel=g),type:"text",placeholder:typeof r.currentPlaceholder=="function"?r.currentPlaceholder():r.currentPlaceholder,name:r.name,autocomplete:r.autocomplete,size:r.selectSize,disabled:r.selectDisabled,readonly:r.readonly,"validate-event":!1,class:k([r.nsSelect.is("focus",r.visible)]),tabindex:r.multiple&&r.filterable?-1:void 0,label:r.ariaLabel,onFocus:r.handleFocus,onBlur:r.handleBlur,onInput:r.debouncedOnInputChange,onPaste:r.debouncedOnInputChange,onCompositionstart:r.handleComposition,onCompositionupdate:r.handleComposition,onCompositionend:r.handleComposition,onKeydown:[e[17]||(e[17]=Qt(vt(g=>r.navigateOptions("next"),["stop","prevent"]),["down"])),e[18]||(e[18]=Qt(vt(g=>r.navigateOptions("prev"),["stop","prevent"]),["up"])),Qt(vt(r.selectOption,["stop","prevent"]),["enter"]),Qt(r.handleKeydownEscape,["esc"]),e[19]||(e[19]=Qt(g=>r.visible=!1,["tab"]))]},Ya({suffix:se(()=>[r.iconComponent&&!r.showClose?(A(),_e(l,{key:0,class:k([r.nsSelect.e("caret"),r.nsSelect.e("icon"),r.iconReverse])},{default:se(()=>[(A(),_e(Ht(r.iconComponent)))]),_:1},8,["class"])):we("v-if",!0),r.showClose&&r.clearIcon?(A(),_e(l,{key:1,class:k([r.nsSelect.e("caret"),r.nsSelect.e("icon")]),onClick:r.handleClearClick},{default:se(()=>[(A(),_e(Ht(r.clearIcon)))]),_:1},8,["class","onClick"])):we("v-if",!0)]),_:2},[r.$slots.prefix?{name:"prefix",fn:se(()=>[X("div",Bye,[Oe(r.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","label","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])],32)]),content:se(()=>[ee(p,null,{default:se(()=>[At(ee(h,{ref:"scrollbar",tag:"ul","wrap-class":r.nsSelect.be("dropdown","wrap"),"view-class":r.nsSelect.be("dropdown","list"),class:k(r.scrollbarKls)},{default:se(()=>[r.showNewOption?(A(),_e(u,{key:0,value:r.query,created:!0},null,8,["value"])):we("v-if",!0),ee(d,{onUpdateOptions:r.onOptionsRendered},{default:se(()=>[Oe(r.$slots,"default")]),_:3},8,["onUpdateOptions"])]),_:3},8,["wrap-class","view-class","class"]),[[nr,r.options.size>0&&!r.loading]]),r.emptyText&&(!r.allowCreate||r.loading||r.allowCreate&&r.options.size===0)?(A(),W(nt,{key:0},[r.$slots.empty?Oe(r.$slots,"empty",{key:0}):(A(),W("p",{key:1,class:k(r.nsSelect.be("dropdown","empty"))},ze(r.emptyText),3))],64)):we("v-if",!0)]),_:3})]),_:3},8,["visible","placement","teleported","popper-class","popper-options","effect","transition","persistent","onShow"])],34)),[[m,r.handleClose,r.popperPaneRef]])}var Uye=Xe(Iye,[["render",Fye],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const zye=ne({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(r){const e=Pe("select"),t=V(!0),i=It(),o=V([]);Wt(tU,ur({...qi(r)}));const n=ot(tg);Rt(()=>{o.value=s(i.subTree)});const s=l=>{const c=[];return Array.isArray(l.children)&&l.children.forEach(u=>{var d;u.type&&u.type.name==="ElOption"&&u.component&&u.component.proxy?c.push(u.component.proxy):(d=u.children)!=null&&d.length&&c.push(...s(u))}),c},{groupQueryChange:a}=fr(n);return ke(a,()=>{t.value=o.value.some(l=>l.visible===!0)},{flush:"post"}),{visible:t,ns:e}}});function Vye(r,e,t,i,o,n){return At((A(),W("ul",{class:k(r.ns.be("group","wrap"))},[X("li",{class:k(r.ns.be("group","title"))},ze(r.label),3),X("li",null,[X("ul",{class:k(r.ns.b("group"))},[Oe(r.$slots,"default")],2)])],2)),[[nr,r.visible]])}var iU=Xe(zye,[["render",Vye],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const Iu=Bt(Uye,{Option:kT,OptionGroup:iU}),kb=ii(kT),Gye=ii(iU),IT=()=>ot(eU,{}),Hye=Ye({pageSize:{type:Number,required:!0},pageSizes:{type:Te(Array),default:()=>qr([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,size:{type:String,values:ma}}),jye=ne({name:"ElPaginationSizes"}),$ye=ne({...jye,props:Hye,emits:["page-size-change"],setup(r,{emit:e}){const t=r,{t:i}=ir(),o=Pe("pagination"),n=IT(),s=V(t.pageSize);ke(()=>t.pageSizes,(c,u)=>{if(!mn(c,u)&&Array.isArray(c)){const d=c.includes(t.pageSize)?t.pageSize:t.pageSizes[0];e("page-size-change",d)}}),ke(()=>t.pageSize,c=>{s.value=c});const a=N(()=>t.pageSizes);function l(c){var u;c!==s.value&&(s.value=c,(u=n.handleSizeChange)==null||u.call(n,Number(c)))}return(c,u)=>(A(),W("span",{class:k(f(o).e("sizes"))},[ee(f(Iu),{"model-value":s.value,disabled:c.disabled,"popper-class":c.popperClass,size:c.size,"validate-event":!1,onChange:l},{default:se(()=>[(A(!0),W(nt,null,jt(f(a),d=>(A(),_e(f(kb),{key:d,value:d,label:d+f(i)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size"])],2))}});var Wye=Xe($ye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/sizes.vue"]]);const qye=Ye({size:{type:String,values:ma}}),Xye=["disabled"],Kye=ne({name:"ElPaginationJumper"}),Yye=ne({...Kye,props:qye,setup(r){const{t:e}=ir(),t=Pe("pagination"),{pageCount:i,disabled:o,currentPage:n,changeEvent:s}=IT(),a=V(),l=N(()=>{var d;return(d=a.value)!=null?d:n==null?void 0:n.value});function c(d){a.value=d?+d:""}function u(d){d=Math.trunc(+d),s==null||s(d),a.value=void 0}return(d,h)=>(A(),W("span",{class:k(f(t).e("jump")),disabled:f(o)},[X("span",{class:k([f(t).e("goto")])},ze(f(e)("el.pagination.goto")),3),ee(f(Io),{size:d.size,class:k([f(t).e("editor"),f(t).is("in-pagination")]),min:1,max:f(i),disabled:f(o),"model-value":f(l),"validate-event":!1,label:f(e)("el.pagination.page"),type:"number","onUpdate:modelValue":c,onChange:u},null,8,["size","class","max","disabled","model-value","label"]),X("span",{class:k([f(t).e("classifier")])},ze(f(e)("el.pagination.pageClassifier")),3)],10,Xye))}});var Jye=Xe(Yye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/jumper.vue"]]);const Zye=Ye({total:{type:Number,default:1e3}}),Qye=["disabled"],ebe=ne({name:"ElPaginationTotal"}),tbe=ne({...ebe,props:Zye,setup(r){const{t:e}=ir(),t=Pe("pagination"),{disabled:i}=IT();return(o,n)=>(A(),W("span",{class:k(f(t).e("total")),disabled:f(i)},ze(f(e)("el.pagination.total",{total:o.total})),11,Qye))}});var rbe=Xe(tbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/total.vue"]]);const ibe=Ye({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),obe=["onKeyup"],nbe=["aria-current","aria-label","tabindex"],sbe=["tabindex","aria-label"],abe=["aria-current","aria-label","tabindex"],lbe=["tabindex","aria-label"],cbe=["aria-current","aria-label","tabindex"],ube=ne({name:"ElPaginationPager"}),dbe=ne({...ube,props:ibe,emits:["change"],setup(r,{emit:e}){const t=r,i=Pe("pager"),o=Pe("icon"),{t:n}=ir(),s=V(!1),a=V(!1),l=V(!1),c=V(!1),u=V(!1),d=V(!1),h=N(()=>{const _=t.pagerCount,S=(_-1)/2,w=Number(t.currentPage),M=Number(t.pageCount);let T=!1,E=!1;M>_&&(w>_-S&&(T=!0),w<M-S&&(E=!0));const C=[];if(T&&!E){const B=M-(_-2);for(let I=B;I<M;I++)C.push(I)}else if(!T&&E)for(let B=2;B<_;B++)C.push(B);else if(T&&E){const B=Math.floor(_/2)-1;for(let I=w-B;I<=w+B;I++)C.push(I)}else for(let B=2;B<M;B++)C.push(B);return C}),p=N(()=>["more","btn-quickprev",o.b(),i.is("disabled",t.disabled)]),m=N(()=>["more","btn-quicknext",o.b(),i.is("disabled",t.disabled)]),g=N(()=>t.disabled?-1:0);Vn(()=>{const _=(t.pagerCount-1)/2;s.value=!1,a.value=!1,t.pageCount>t.pagerCount&&(t.currentPage>t.pagerCount-_&&(s.value=!0),t.currentPage<t.pageCount-_&&(a.value=!0))});function v(_=!1){t.disabled||(_?l.value=!0:c.value=!0)}function y(_=!1){_?u.value=!0:d.value=!0}function b(_){const S=_.target;if(S.tagName.toLowerCase()==="li"&&Array.from(S.classList).includes("number")){const w=Number(S.textContent);w!==t.currentPage&&e("change",w)}else S.tagName.toLowerCase()==="li"&&Array.from(S.classList).includes("more")&&x(_)}function x(_){const S=_.target;if(S.tagName.toLowerCase()==="ul"||t.disabled)return;let w=Number(S.textContent);const M=t.pageCount,T=t.currentPage,E=t.pagerCount-2;S.className.includes("more")&&(S.className.includes("quickprev")?w=T-E:S.className.includes("quicknext")&&(w=T+E)),Number.isNaN(+w)||(w<1&&(w=1),w>M&&(w=M)),w!==T&&e("change",w)}return(_,S)=>(A(),W("ul",{class:k(f(i).b()),onClick:x,onKeyup:Qt(b,["enter"])},[_.pageCount>0?(A(),W("li",{key:0,class:k([[f(i).is("active",_.currentPage===1),f(i).is("disabled",_.disabled)],"number"]),"aria-current":_.currentPage===1,"aria-label":f(n)("el.pagination.currentPage",{pager:1}),tabindex:f(g)}," 1 ",10,nbe)):we("v-if",!0),s.value?(A(),W("li",{key:1,class:k(f(p)),tabindex:f(g),"aria-label":f(n)("el.pagination.prevPages",{pager:_.pagerCount-2}),onMouseenter:S[0]||(S[0]=w=>v(!0)),onMouseleave:S[1]||(S[1]=w=>l.value=!1),onFocus:S[2]||(S[2]=w=>y(!0)),onBlur:S[3]||(S[3]=w=>u.value=!1)},[(l.value||u.value)&&!_.disabled?(A(),_e(f(kh),{key:0})):(A(),_e(f(nD),{key:1}))],42,sbe)):we("v-if",!0),(A(!0),W(nt,null,jt(f(h),w=>(A(),W("li",{key:w,class:k([[f(i).is("active",_.currentPage===w),f(i).is("disabled",_.disabled)],"number"]),"aria-current":_.currentPage===w,"aria-label":f(n)("el.pagination.currentPage",{pager:w}),tabindex:f(g)},ze(w),11,abe))),128)),a.value?(A(),W("li",{key:2,class:k(f(m)),tabindex:f(g),"aria-label":f(n)("el.pagination.nextPages",{pager:_.pagerCount-2}),onMouseenter:S[4]||(S[4]=w=>v()),onMouseleave:S[5]||(S[5]=w=>c.value=!1),onFocus:S[6]||(S[6]=w=>y()),onBlur:S[7]||(S[7]=w=>d.value=!1)},[(c.value||d.value)&&!_.disabled?(A(),_e(f(Ih),{key:0})):(A(),_e(f(nD),{key:1}))],42,lbe)):we("v-if",!0),_.pageCount>1?(A(),W("li",{key:3,class:k([[f(i).is("active",_.currentPage===_.pageCount),f(i).is("disabled",_.disabled)],"number"]),"aria-current":_.currentPage===_.pageCount,"aria-label":f(n)("el.pagination.currentPage",{pager:_.pageCount}),tabindex:f(g)},ze(_.pageCount),11,cbe)):we("v-if",!0)],42,obe))}});var hbe=Xe(dbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/pager.vue"]]);const Qo=r=>typeof r!="number",pbe=Ye({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:r=>wt(r)&&Math.trunc(r)===r&&r>4&&r<22&&r%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Te(Array),default:()=>qr([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:Lr,default:()=>ec},nextText:{type:String,default:""},nextIcon:{type:Lr,default:()=>Ko},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean});var fbe=ne({name:"ElPagination",props:pbe,emits:{"update:current-page":r=>wt(r),"update:page-size":r=>wt(r),"size-change":r=>wt(r),"current-change":r=>wt(r),"prev-click":r=>wt(r),"next-click":r=>wt(r)},setup(r,{emit:e,slots:t}){const{t:i}=ir(),o=Pe("pagination"),n=It().vnode.props||{},s="onUpdate:currentPage"in n||"onUpdate:current-page"in n||"onCurrentChange"in n,a="onUpdate:pageSize"in n||"onUpdate:page-size"in n||"onSizeChange"in n,l=N(()=>{if(Qo(r.total)&&Qo(r.pageCount)||!Qo(r.currentPage)&&!s)return!1;if(r.layout.includes("sizes")){if(Qo(r.pageCount)){if(!Qo(r.total)&&!Qo(r.pageSize)&&!a)return!1}else if(!a)return!1}return!0}),c=V(Qo(r.defaultPageSize)?10:r.defaultPageSize),u=V(Qo(r.defaultCurrentPage)?1:r.defaultCurrentPage),d=N({get(){return Qo(r.pageSize)?c.value:r.pageSize},set(x){Qo(r.pageSize)&&(c.value=x),a&&(e("update:page-size",x),e("size-change",x))}}),h=N(()=>{let x=0;return Qo(r.pageCount)?Qo(r.total)||(x=Math.max(1,Math.ceil(r.total/d.value))):x=r.pageCount,x}),p=N({get(){return Qo(r.currentPage)?u.value:r.currentPage},set(x){let _=x;x<1?_=1:x>h.value&&(_=h.value),Qo(r.currentPage)&&(u.value=_),s&&(e("update:current-page",_),e("current-change",_))}});ke(h,x=>{p.value>x&&(p.value=x)});function m(x){p.value=x}function g(x){d.value=x;const _=h.value;p.value>_&&(p.value=_)}function v(){r.disabled||(p.value-=1,e("prev-click",p.value))}function y(){r.disabled||(p.value+=1,e("next-click",p.value))}function b(x,_){x&&(x.props||(x.props={}),x.props.class=[x.props.class,_].join(" "))}return Wt(eU,{pageCount:h,disabled:N(()=>r.disabled),currentPage:p,changeEvent:m,handleSizeChange:g}),()=>{var x,_;if(!l.value)return i("el.pagination.deprecationWarning"),null;if(!r.layout||r.hideOnSinglePage&&h.value<=1)return null;const S=[],w=[],M=pt("div",{class:o.e("rightwrapper")},w),T={prev:pt(yye,{disabled:r.disabled,currentPage:p.value,prevText:r.prevText,prevIcon:r.prevIcon,onClick:v}),jumper:pt(Jye,{size:r.small?"small":"default"}),pager:pt(hbe,{currentPage:p.value,pageCount:h.value,pagerCount:r.pagerCount,onChange:m,disabled:r.disabled}),next:pt(Mye,{disabled:r.disabled,currentPage:p.value,pageCount:h.value,nextText:r.nextText,nextIcon:r.nextIcon,onClick:y}),sizes:pt(Wye,{pageSize:d.value,pageSizes:r.pageSizes,popperClass:r.popperClass,disabled:r.disabled,size:r.small?"small":"default"}),slot:(_=(x=t==null?void 0:t.default)==null?void 0:x.call(t))!=null?_:null,total:pt(rbe,{total:Qo(r.total)?0:r.total})},E=r.layout.split(",").map(B=>B.trim());let C=!1;return E.forEach(B=>{if(B==="->"){C=!0;return}C?w.push(T[B]):S.push(T[B])}),b(S[0],o.is("first")),b(S[S.length-1],o.is("last")),C&&w.length>0&&(b(w[0],o.is("first")),b(w[w.length-1],o.is("last")),S.push(M)),pt("div",{class:[o.b(),o.is("background",r.background),{[o.m("small")]:r.small}]},S)}}});const mbe=Bt(fbe),gbe=Ye({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:WM,default:"primary"},cancelButtonType:{type:String,values:WM,default:"text"},icon:{type:Lr,default:()=>oie},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:ro.teleported,persistent:ro.persistent,width:{type:[String,Number],default:150}}),vbe={confirm:r=>r instanceof MouseEvent,cancel:r=>r instanceof MouseEvent},ybe=ne({name:"ElPopconfirm"}),bbe=ne({...ybe,props:gbe,emits:vbe,setup(r,{emit:e}){const t=r,{t:i}=ir(),o=Pe("popconfirm"),n=V(),s=()=>{var h,p;(p=(h=n.value)==null?void 0:h.onClose)==null||p.call(h)},a=N(()=>({width:hi(t.width)})),l=h=>{e("confirm",h),s()},c=h=>{e("cancel",h),s()},u=N(()=>t.confirmButtonText||i("el.popconfirm.confirmButtonText")),d=N(()=>t.cancelButtonText||i("el.popconfirm.cancelButtonText"));return(h,p)=>(A(),_e(f(Zo),$t({ref_key:"tooltipRef",ref:n,trigger:"click",effect:"light"},h.$attrs,{"popper-class":`${f(o).namespace.value}-popover`,"popper-style":f(a),teleported:h.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":h.hideAfter,persistent:h.persistent}),{content:se(()=>[X("div",{class:k(f(o).b())},[X("div",{class:k(f(o).e("main"))},[!h.hideIcon&&h.icon?(A(),_e(f(st),{key:0,class:k(f(o).e("icon")),style:ct({color:h.iconColor})},{default:se(()=>[(A(),_e(Ht(h.icon)))]),_:1},8,["class","style"])):we("v-if",!0),rr(" "+ze(h.title),1)],2),X("div",{class:k(f(o).e("action"))},[ee(f(_o),{size:"small",type:h.cancelButtonType==="text"?"":h.cancelButtonType,text:h.cancelButtonType==="text",onClick:c},{default:se(()=>[rr(ze(f(d)),1)]),_:1},8,["type","text"]),ee(f(_o),{size:"small",type:h.confirmButtonType==="text"?"":h.confirmButtonType,text:h.confirmButtonType==="text",onClick:l},{default:se(()=>[rr(ze(f(u)),1)]),_:1},8,["type","text"])],2)],2)]),default:se(()=>[h.$slots.reference?Oe(h.$slots,"reference",{key:0}):we("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var xbe=Xe(bbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popconfirm/src/popconfirm.vue"]]);const _be=Bt(xbe),wbe=Ye({trigger:Km.trigger,placement:Rb.placement,disabled:Km.disabled,visible:ro.visible,transition:ro.transition,popperOptions:Rb.popperOptions,tabindex:Rb.tabindex,content:ro.content,popperStyle:ro.popperStyle,popperClass:ro.popperClass,enterable:{...ro.enterable,default:!0},effect:{...ro.effect,default:"light"},teleported:ro.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),Sbe={"update:visible":r=>Ti(r),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},Mbe="onUpdate:visible",Tbe=ne({name:"ElPopover"}),Ebe=ne({...Tbe,props:wbe,emits:Sbe,setup(r,{expose:e,emit:t}){const i=r,o=N(()=>i[Mbe]),n=Pe("popover"),s=V(),a=N(()=>{var v;return(v=f(s))==null?void 0:v.popperRef}),l=N(()=>[{width:hi(i.width)},i.popperStyle]),c=N(()=>[n.b(),i.popperClass,{[n.m("plain")]:!!i.content}]),u=N(()=>i.transition===`${n.namespace.value}-fade-in-linear`),d=()=>{var v;(v=s.value)==null||v.hide()},h=()=>{t("before-enter")},p=()=>{t("before-leave")},m=()=>{t("after-enter")},g=()=>{t("update:visible",!1),t("after-leave")};return e({popperRef:a,hide:d}),(v,y)=>(A(),_e(f(Zo),$t({ref_key:"tooltipRef",ref:s},v.$attrs,{trigger:v.trigger,placement:v.placement,disabled:v.disabled,visible:v.visible,transition:v.transition,"popper-options":v.popperOptions,tabindex:v.tabindex,content:v.content,offset:v.offset,"show-after":v.showAfter,"hide-after":v.hideAfter,"auto-close":v.autoClose,"show-arrow":v.showArrow,"aria-label":v.title,effect:v.effect,enterable:v.enterable,"popper-class":f(c),"popper-style":f(l),teleported:v.teleported,persistent:v.persistent,"gpu-acceleration":f(u),"onUpdate:visible":f(o),onBeforeShow:h,onBeforeHide:p,onShow:m,onHide:g}),{content:se(()=>[v.title?(A(),W("div",{key:0,class:k(f(n).e("title")),role:"title"},ze(v.title),3)):we("v-if",!0),Oe(v.$slots,"default",{},()=>[rr(ze(v.content),1)])]),default:se(()=>[v.$slots.reference?Oe(v.$slots,"reference",{key:0}):we("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var Cbe=Xe(Ebe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const oU=(r,e)=>{const t=e.arg||e.value,i=t==null?void 0:t.popperRef;i&&(i.triggerRef=r)};var Nbe={mounted(r,e){oU(r,e)},updated(r,e){oU(r,e)}};const Abe="popover",nU=Poe(Nbe,Abe),Rbe=Bt(Cbe,{directive:nU}),Lbe=Ye({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:r=>r>=0&&r<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Te(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Te([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Te(Function),default:r=>`${r}%`}}),Obe=["aria-valuenow"],kbe={viewBox:"0 0 100 100"},Ibe=["d","stroke","stroke-linecap","stroke-width"],Pbe=["d","stroke","opacity","stroke-linecap","stroke-width"],Dbe={key:0},Bbe=ne({name:"ElProgress"}),Fbe=ne({...Bbe,props:Lbe,setup(r){const e=r,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},i=Pe("progress"),o=N(()=>({width:`${e.percentage}%`,animationDuration:`${e.duration}s`,backgroundColor:b(e.percentage)})),n=N(()=>(e.strokeWidth/e.width*100).toFixed(1)),s=N(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(n.value)/2}`,10):0),a=N(()=>{const x=s.value,_=e.type==="dashboard";return`
          M 50 50
          m 0 ${_?"":"-"}${x}
          a ${x} ${x} 0 1 1 0 ${_?"-":""}${x*2}
          a ${x} ${x} 0 1 1 0 ${_?"":"-"}${x*2}
          `}),l=N(()=>2*Math.PI*s.value),c=N(()=>e.type==="dashboard"?.75:1),u=N(()=>`${-1*l.value*(1-c.value)/2}px`),d=N(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:u.value})),h=N(()=>({strokeDasharray:`${l.value*c.value*(e.percentage/100)}px, ${l.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),p=N(()=>{let x;return e.color?x=b(e.percentage):x=t[e.status]||t.default,x}),m=N(()=>e.status==="warning"?Gy:e.type==="line"?e.status==="success"?aM:tc:e.status==="success"?km:Vs),g=N(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),v=N(()=>e.format(e.percentage));function y(x){const _=100/x.length;return x.map((S,w)=>Tt(S)?{color:S,percentage:(w+1)*_}:S).sort((S,w)=>S.percentage-w.percentage)}const b=x=>{var _;const{color:S}=e;if(St(S))return S(x);if(Tt(S))return S;{const w=y(S);for(const M of w)if(M.percentage>x)return M.color;return(_=w[w.length-1])==null?void 0:_.color}};return(x,_)=>(A(),W("div",{class:k([f(i).b(),f(i).m(x.type),f(i).is(x.status),{[f(i).m("without-text")]:!x.showText,[f(i).m("text-inside")]:x.textInside}]),role:"progressbar","aria-valuenow":x.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[x.type==="line"?(A(),W("div",{key:0,class:k(f(i).b("bar"))},[X("div",{class:k(f(i).be("bar","outer")),style:ct({height:`${x.strokeWidth}px`})},[X("div",{class:k([f(i).be("bar","inner"),{[f(i).bem("bar","inner","indeterminate")]:x.indeterminate},{[f(i).bem("bar","inner","striped")]:x.striped},{[f(i).bem("bar","inner","striped-flow")]:x.stripedFlow}]),style:ct(f(o))},[(x.showText||x.$slots.default)&&x.textInside?(A(),W("div",{key:0,class:k(f(i).be("bar","innerText"))},[Oe(x.$slots,"default",{percentage:x.percentage},()=>[X("span",null,ze(f(v)),1)])],2)):we("v-if",!0)],6)],6)],2)):(A(),W("div",{key:1,class:k(f(i).b("circle")),style:ct({height:`${x.width}px`,width:`${x.width}px`})},[(A(),W("svg",kbe,[X("path",{class:k(f(i).be("circle","track")),d:f(a),stroke:`var(${f(i).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":x.strokeLinecap,"stroke-width":f(n),fill:"none",style:ct(f(d))},null,14,Ibe),X("path",{class:k(f(i).be("circle","path")),d:f(a),stroke:f(p),fill:"none",opacity:x.percentage?1:0,"stroke-linecap":x.strokeLinecap,"stroke-width":f(n),style:ct(f(h))},null,14,Pbe)]))],6)),(x.showText||x.$slots.default)&&!x.textInside?(A(),W("div",{key:2,class:k(f(i).e("text")),style:ct({fontSize:`${f(g)}px`})},[Oe(x.$slots,"default",{percentage:x.percentage},()=>[x.status?(A(),_e(f(st),{key:1},{default:se(()=>[(A(),_e(Ht(f(m))))]),_:1})):(A(),W("span",Dbe,ze(f(v)),1))])],6)):we("v-if",!0)],10,Obe))}});var Ube=Xe(Fbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const sU=Bt(Ube),zbe=Ye({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Te([Array,Object]),default:()=>qr(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:Te([Array,Object]),default:()=>[Vy,Vy,Vy]},voidIcon:{type:Lr,default:()=>soe},disabledVoidIcon:{type:Lr,default:()=>Vy},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:Te(Array),default:()=>qr(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:bo,label:{type:String,default:void 0},clearable:{type:Boolean,default:!1}}),Vbe={[Fr]:r=>wt(r),[Vt]:r=>wt(r)},Gbe=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],Hbe=["onMousemove","onClick"],jbe=ne({name:"ElRate"}),$be=ne({...jbe,props:zbe,emits:Vbe,setup(r,{expose:e,emit:t}){const i=r;function o(G,R){const F=$=>zt($),O=Object.keys(R).map($=>+$).filter($=>{const j=R[$];return F(j)&&j.excluded?G<$:G<=$}).sort(($,j)=>$-j),H=R[O[0]];return F(H)&&H.value||H}const n=ot(Nu,void 0),s=ot(xa,void 0),a=Ci(),l=Pe("rate"),{inputId:c,isLabeledByFormItem:u}=lc(i,{formItemContext:s}),d=V(i.modelValue),h=V(-1),p=V(!0),m=N(()=>[l.b(),l.m(a.value)]),g=N(()=>i.disabled||(n==null?void 0:n.disabled)),v=N(()=>l.cssVarBlock({"void-color":i.voidColor,"disabled-void-color":i.disabledVoidColor,"fill-color":_.value})),y=N(()=>{let G="";return i.showScore?G=i.scoreTemplate.replace(/\{\s*value\s*\}/,g.value?`${i.modelValue}`:`${d.value}`):i.showText&&(G=i.texts[Math.ceil(d.value)-1]),G}),b=N(()=>i.modelValue*100-Math.floor(i.modelValue)*100),x=N(()=>it(i.colors)?{[i.lowThreshold]:i.colors[0],[i.highThreshold]:{value:i.colors[1],excluded:!0},[i.max]:i.colors[2]}:i.colors),_=N(()=>{const G=o(d.value,x.value);return zt(G)?"":G}),S=N(()=>{let G="";return g.value?G=`${b.value}%`:i.allowHalf&&(G="50%"),{color:_.value,width:G}}),w=N(()=>{let G=it(i.icons)?[...i.icons]:{...i.icons};return G=au(G),it(G)?{[i.lowThreshold]:G[0],[i.highThreshold]:{value:G[1],excluded:!0},[i.max]:G[2]}:G}),M=N(()=>o(i.modelValue,w.value)),T=N(()=>g.value?Tt(i.disabledVoidIcon)?i.disabledVoidIcon:au(i.disabledVoidIcon):Tt(i.voidIcon)?i.voidIcon:au(i.voidIcon)),E=N(()=>o(d.value,w.value));function C(G){const R=g.value&&b.value>0&&G-1<i.modelValue&&G>i.modelValue,F=i.allowHalf&&p.value&&G-.5<=d.value&&G>d.value;return R||F}function B(G){i.clearable&&G===i.modelValue&&(G=0),t(Vt,G),i.modelValue!==G&&t("change",G)}function I(G){g.value||(i.allowHalf&&p.value?B(d.value):B(G))}function L(G){if(g.value)return;let R=d.value;const F=G.code;return F===ft.up||F===ft.right?(i.allowHalf?R+=.5:R+=1,G.stopPropagation(),G.preventDefault()):(F===ft.left||F===ft.down)&&(i.allowHalf?R-=.5:R-=1,G.stopPropagation(),G.preventDefault()),R=R<0?0:R,R=R>i.max?i.max:R,t(Vt,R),t("change",R),R}function P(G,R){if(!g.value){if(i.allowHalf&&R){let F=R.target;zs(F,l.e("item"))&&(F=F.querySelector(`.${l.e("icon")}`)),(F.clientWidth===0||zs(F,l.e("decimal")))&&(F=F.parentNode),p.value=R.offsetX*2<=F.clientWidth,d.value=p.value?G-.5:G}else d.value=G;h.value=G}}function U(){g.value||(i.allowHalf&&(p.value=i.modelValue!==Math.floor(i.modelValue)),d.value=i.modelValue,h.value=-1)}return ke(()=>i.modelValue,G=>{d.value=G,p.value=i.modelValue!==Math.floor(i.modelValue)}),i.modelValue||t(Vt,0),e({setCurrentValue:P,resetCurrentValue:U}),(G,R)=>{var F;return A(),W("div",{id:f(c),class:k([f(m),f(l).is("disabled",f(g))]),role:"slider","aria-label":f(u)?void 0:G.label||"rating","aria-labelledby":f(u)?(F=f(s))==null?void 0:F.labelId:void 0,"aria-valuenow":d.value,"aria-valuetext":f(y)||void 0,"aria-valuemin":"0","aria-valuemax":G.max,tabindex:"0",style:ct(f(v)),onKeydown:L},[(A(!0),W(nt,null,jt(G.max,(O,H)=>(A(),W("span",{key:H,class:k(f(l).e("item")),onMousemove:$=>P(O,$),onMouseleave:U,onClick:$=>I(O)},[ee(f(st),{class:k([f(l).e("icon"),{hover:h.value===O},f(l).is("active",O<=d.value)])},{default:se(()=>[C(O)?we("v-if",!0):(A(),W(nt,{key:0},[At((A(),_e(Ht(f(E)),null,null,512)),[[nr,O<=d.value]]),At((A(),_e(Ht(f(T)),null,null,512)),[[nr,!(O<=d.value)]])],64)),C(O)?(A(),_e(f(st),{key:1,style:ct(f(S)),class:k([f(l).e("icon"),f(l).e("decimal")])},{default:se(()=>[(A(),_e(Ht(f(M))))]),_:1},8,["style","class"])):we("v-if",!0)]),_:2},1032,["class"])],42,Hbe))),128)),G.showText||G.showScore?(A(),W("span",{key:0,class:k(f(l).e("text"))},ze(f(y)),3)):we("v-if",!0)],46,Gbe)}}});var Wbe=Xe($be,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const qbe=Bt(Wbe),Qh={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},aU={[Qh.success]:Yee,[Qh.warning]:Gy,[Qh.error]:lM,[Qh.info]:cM},Xbe=Ye({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),Kbe=ne({name:"ElResult"}),Ybe=ne({...Kbe,props:Xbe,setup(r){const e=r,t=Pe("result"),i=N(()=>{const o=e.icon,n=o&&Qh[o]?Qh[o]:"icon-info",s=aU[n]||aU["icon-info"];return{class:n,component:s}});return(o,n)=>(A(),W("div",{class:k(f(t).b())},[X("div",{class:k(f(t).e("icon"))},[Oe(o.$slots,"icon",{},()=>[f(i).component?(A(),_e(Ht(f(i).component),{key:0,class:k(f(i).class)},null,8,["class"])):we("v-if",!0)])],2),o.title||o.$slots.title?(A(),W("div",{key:0,class:k(f(t).e("title"))},[Oe(o.$slots,"title",{},()=>[X("p",null,ze(o.title),1)])],2)):we("v-if",!0),o.subTitle||o.$slots["sub-title"]?(A(),W("div",{key:1,class:k(f(t).e("subtitle"))},[Oe(o.$slots,"sub-title",{},()=>[X("p",null,ze(o.subTitle),1)])],2)):we("v-if",!0),o.$slots.extra?(A(),W("div",{key:2,class:k(f(t).e("extra"))},[Oe(o.$slots,"extra")],2)):we("v-if",!0)],2))}});var Jbe=Xe(Ybe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/result/src/result.vue"]]);const Zbe=Bt(Jbe);var lU=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function Qbe(r,e){return!!(r===e||lU(r)&&lU(e))}function exe(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(!Qbe(r[t],e[t]))return!1;return!0}function txe(r,e){e===void 0&&(e=exe);var t=null;function i(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];if(t&&t.lastThis===this&&e(o,t.lastArgs))return t.lastResult;var s=r.apply(this,o);return t={lastResult:s,lastArgs:o,lastThis:this},s}return i.clear=function(){t=null},i}const cU=()=>{const r=It().proxy.$props;return N(()=>{const e=(t,i,o)=>({});return r.perfMode?Ly(e):txe(e)})},PT=50,Ib="itemRendered",Pb="scroll",ep="forward",Db="backward",ws="auto",Bb="smart",rg="start",wa="center",ig="end",tp="horizontal",DT="vertical",rxe="ltr",rp="rtl",og="negative",BT="positive-ascending",FT="positive-descending",ixe={[tp]:"left",[DT]:"top"},oxe=20,nxe={[tp]:"deltaX",[DT]:"deltaY"},sxe=({atEndEdge:r,atStartEdge:e,layout:t},i)=>{let o,n=0;const s=a=>a<0&&e.value||a>0&&r.value;return{hasReachedEdge:s,onWheel:a=>{Wy(o);const l=a[nxe[t.value]];s(n)&&s(n+l)||(n+=l,B3()||a.preventDefault(),o=Dh(()=>{i(n),n=0}))}}},UT=Gs({type:Te([Number,Function]),required:!0}),zT=Gs({type:Number}),VT=Gs({type:Number,default:2}),axe=Gs({type:String,values:["ltr","rtl"],default:"ltr"}),GT=Gs({type:Number,default:0}),Fb=Gs({type:Number,required:!0}),uU=Gs({type:String,values:["horizontal","vertical"],default:DT}),dU=Ye({className:{type:String,default:""},containerElement:{type:Te([String,Object]),default:"div"},data:{type:Te(Array),default:()=>qr([])},direction:axe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Te([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),hU=Ye({cache:VT,estimatedItemSize:zT,layout:uU,initScrollOffset:GT,total:Fb,itemSize:UT,...dU}),HT={type:Number,default:6},pU={type:Number,default:0},fU={type:Number,default:2},Pu=Ye({columnCache:VT,columnWidth:UT,estimatedColumnWidth:zT,estimatedRowHeight:zT,initScrollLeft:GT,initScrollTop:GT,itemKey:{type:Te(Function),default:({columnIndex:r,rowIndex:e})=>`${e}:${r}`},rowCache:VT,rowHeight:UT,totalColumn:Fb,totalRow:Fb,hScrollbarSize:HT,vScrollbarSize:HT,scrollbarStartGap:pU,scrollbarEndGap:fU,role:String,...dU}),mU=Ye({alwaysOn:Boolean,class:String,layout:uU,total:Fb,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:HT,startGap:pU,endGap:fU,visible:Boolean}),Du=(r,e)=>r<e?ep:Db,ng=r=>r===rxe||r===rp||r===tp,gU=r=>r===rp;let ip=null;function Ub(r=!1){if(ip===null||r){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const i=document.createElement("div"),o=i.style;return o.width="100px",o.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?ip=FT:(e.scrollLeft=1,e.scrollLeft===0?ip=og:ip=BT),document.body.removeChild(e),ip}return ip}function lxe({move:r,size:e,bar:t},i){const o={},n=`translate${t.axis}(${r}px)`;return o[t.size]=e,o.transform=n,o.msTransform=n,o.webkitTransform=n,i==="horizontal"?o.height="100%":o.width="100%",o}const jT=ne({name:"ElVirtualScrollBar",props:mU,emits:["scroll","start-move","stop-move"],setup(r,{emit:e}){const t=N(()=>r.startGap+r.endGap),i=Pe("virtual-scrollbar"),o=Pe("scrollbar"),n=V(),s=V();let a=null,l=null;const c=ur({isDragging:!1,traveled:0}),u=N(()=>CB[r.layout]),d=N(()=>r.clientSize-f(t)),h=N(()=>({position:"absolute",width:`${tp===r.layout?d.value:r.scrollbarSize}px`,height:`${tp===r.layout?r.scrollbarSize:d.value}px`,[ixe[r.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),p=N(()=>{const w=r.ratio,M=r.clientSize;if(w>=100)return Number.POSITIVE_INFINITY;if(w>=50)return w*M/100;const T=M/3;return Math.floor(Math.min(Math.max(w*M,oxe),T))}),m=N(()=>{if(!Number.isFinite(p.value))return{display:"none"};const w=`${p.value}px`;return lxe({bar:u.value,size:w,move:c.traveled},r.layout)}),g=N(()=>Math.floor(r.clientSize-p.value-f(t))),v=()=>{window.addEventListener("mousemove",_),window.addEventListener("mouseup",x);const w=f(s);w&&(l=document.onselectstart,document.onselectstart=()=>!1,w.addEventListener("touchmove",_),w.addEventListener("touchend",x))},y=()=>{window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",x),document.onselectstart=l,l=null;const w=f(s);w&&(w.removeEventListener("touchmove",_),w.removeEventListener("touchend",x))},b=w=>{w.stopImmediatePropagation(),!(w.ctrlKey||[1,2].includes(w.button))&&(c.isDragging=!0,c[u.value.axis]=w.currentTarget[u.value.offset]-(w[u.value.client]-w.currentTarget.getBoundingClientRect()[u.value.direction]),e("start-move"),v())},x=()=>{c.isDragging=!1,c[u.value.axis]=0,e("stop-move"),y()},_=w=>{const{isDragging:M}=c;if(!M||!s.value||!n.value)return;const T=c[u.value.axis];if(!T)return;Wy(a);const E=(n.value.getBoundingClientRect()[u.value.direction]-w[u.value.client])*-1,C=s.value[u.value.offset]-T,B=E-C;a=Dh(()=>{c.traveled=Math.max(r.startGap,Math.min(B,g.value)),e("scroll",B,g.value)})},S=w=>{const M=Math.abs(w.target.getBoundingClientRect()[u.value.direction]-w[u.value.client]),T=s.value[u.value.offset]/2,E=M-T;c.traveled=Math.max(0,Math.min(E,g.value)),e("scroll",E,g.value)};return ke(()=>r.scrollFrom,w=>{c.isDragging||(c.traveled=Math.ceil(w*g.value))}),Vr(()=>{y()}),()=>pt("div",{role:"presentation",ref:n,class:[i.b(),r.class,(r.alwaysOn||c.isDragging)&&"always-on"],style:h.value,onMousedown:vt(S,["stop","prevent"]),onTouchstartPrevent:b},pt("div",{ref:s,class:o.e("thumb"),style:m.value,onMousedown:b},[]))}}),vU=({name:r,getOffset:e,getItemSize:t,getItemOffset:i,getEstimatedTotalSize:o,getStartIndexForOffset:n,getStopIndexForStartIndex:s,initCache:a,clearCache:l,validateProps:c})=>ne({name:r??"ElVirtualList",props:hU,emits:[Ib,Pb],setup(u,{emit:d,expose:h}){c(u);const p=It(),m=Pe("vl"),g=V(a(u,p)),v=cU(),y=V(),b=V(),x=V(),_=V({isScrolling:!1,scrollDir:"forward",scrollOffset:wt(u.initScrollOffset)?u.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:u.scrollbarAlwaysOn}),S=N(()=>{const{total:J,cache:ce}=u,{isScrolling:ve,scrollDir:xe,scrollOffset:te}=f(_);if(J===0)return[0,0,0,0];const Z=n(u,te,f(g)),de=s(u,Z,te,f(g)),Ce=!ve||xe===Db?Math.max(1,ce):1,ue=!ve||xe===ep?Math.max(1,ce):1;return[Math.max(0,Z-Ce),Math.max(0,Math.min(J-1,de+ue)),Z,de]}),w=N(()=>o(u,f(g))),M=N(()=>ng(u.layout)),T=N(()=>[{position:"relative",[`overflow-${M.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:u.direction,height:wt(u.height)?`${u.height}px`:u.height,width:wt(u.width)?`${u.width}px`:u.width},u.style]),E=N(()=>{const J=f(w),ce=f(M);return{height:ce?"100%":`${J}px`,pointerEvents:f(_).isScrolling?"none":void 0,width:ce?`${J}px`:"100%"}}),C=N(()=>M.value?u.width:u.height),{onWheel:B}=sxe({atStartEdge:N(()=>_.value.scrollOffset<=0),atEndEdge:N(()=>_.value.scrollOffset>=w.value),layout:N(()=>u.layout)},J=>{var ce,ve;(ve=(ce=x.value).onMouseUp)==null||ve.call(ce),R(Math.min(_.value.scrollOffset+J,w.value-C.value))}),I=()=>{const{total:J}=u;if(J>0){const[te,Z,de,Ce]=f(S);d(Ib,te,Z,de,Ce)}const{scrollDir:ce,scrollOffset:ve,updateRequested:xe}=f(_);d(Pb,ce,ve,xe)},L=J=>{const{clientHeight:ce,scrollHeight:ve,scrollTop:xe}=J.currentTarget,te=f(_);if(te.scrollOffset===xe)return;const Z=Math.max(0,Math.min(xe,ve-ce));_.value={...te,isScrolling:!0,scrollDir:Du(te.scrollOffset,Z),scrollOffset:Z,updateRequested:!1},lt(H)},P=J=>{const{clientWidth:ce,scrollLeft:ve,scrollWidth:xe}=J.currentTarget,te=f(_);if(te.scrollOffset===ve)return;const{direction:Z}=u;let de=ve;if(Z===rp)switch(Ub()){case og:{de=-ve;break}case FT:{de=xe-ce-ve;break}}de=Math.max(0,Math.min(de,xe-ce)),_.value={...te,isScrolling:!0,scrollDir:Du(te.scrollOffset,de),scrollOffset:de,updateRequested:!1},lt(H)},U=J=>{f(M)?P(J):L(J),I()},G=(J,ce)=>{const ve=(w.value-C.value)/ce*J;R(Math.min(w.value-C.value,ve))},R=J=>{J=Math.max(J,0),J!==f(_).scrollOffset&&(_.value={...f(_),scrollOffset:J,scrollDir:Du(f(_).scrollOffset,J),updateRequested:!0},lt(H))},F=(J,ce=ws)=>{const{scrollOffset:ve}=f(_);J=Math.max(0,Math.min(J,u.total-1)),R(e(u,J,ce,ve,f(g)))},O=J=>{const{direction:ce,itemSize:ve,layout:xe}=u,te=v.value(l&&ve,l&&xe,l&&ce);let Z;if(Yt(te,String(J)))Z=te[J];else{const de=i(u,J,f(g)),Ce=t(u,J,f(g)),ue=f(M),D=ce===rp,K=ue?de:0;te[J]=Z={position:"absolute",left:D?void 0:`${K}px`,right:D?`${K}px`:void 0,top:ue?0:`${de}px`,height:ue?"100%":`${Ce}px`,width:ue?`${Ce}px`:"100%"}}return Z},H=()=>{_.value.isScrolling=!1,lt(()=>{v.value(-1,null,null)})},$=()=>{const J=y.value;J&&(J.scrollTop=0)};Rt(()=>{if(!Jt)return;const{initScrollOffset:J}=u,ce=f(y);wt(J)&&ce&&(f(M)?ce.scrollLeft=J:ce.scrollTop=J),I()}),Ka(()=>{const{direction:J,layout:ce}=u,{scrollOffset:ve,updateRequested:xe}=f(_),te=f(y);if(xe&&te)if(ce===tp)if(J===rp)switch(Ub()){case og:{te.scrollLeft=-ve;break}case BT:{te.scrollLeft=ve;break}default:{const{clientWidth:Z,scrollWidth:de}=te;te.scrollLeft=de-Z-ve;break}}else te.scrollLeft=ve;else te.scrollTop=ve});const j={ns:m,clientSize:C,estimatedTotalSize:w,windowStyle:T,windowRef:y,innerRef:b,innerStyle:E,itemsToRender:S,scrollbarRef:x,states:_,getItemStyle:O,onScroll:U,onScrollbarScroll:G,onWheel:B,scrollTo:R,scrollToItem:F,resetScrollTop:$};return h({windowRef:y,innerRef:b,getItemStyleCache:v,scrollTo:R,scrollToItem:F,resetScrollTop:$,states:_}),j},render(u){var d;const{$slots:h,className:p,clientSize:m,containerElement:g,data:v,getItemStyle:y,innerElement:b,itemsToRender:x,innerStyle:_,layout:S,total:w,onScroll:M,onScrollbarScroll:T,onWheel:E,states:C,useIsScrolling:B,windowStyle:I,ns:L}=u,[P,U]=x,G=Ht(g),R=Ht(b),F=[];if(w>0)for(let j=P;j<=U;j++)F.push((d=h.default)==null?void 0:d.call(h,{data:v,key:j,index:j,isScrolling:B?C.isScrolling:void 0,style:y(j)}));const O=[pt(R,{style:_,ref:"innerRef"},Tt(R)?F:{default:()=>F})],H=pt(jT,{ref:"scrollbarRef",clientSize:m,layout:S,onScroll:T,ratio:m*100/this.estimatedTotalSize,scrollFrom:C.scrollOffset/(this.estimatedTotalSize-m),total:w}),$=pt(G,{class:[L.e("window"),p],style:I,onScroll:M,onWheel:E,ref:"windowRef",key:0},Tt(G)?[O]:{default:()=>[O]});return pt("div",{key:0,class:[L.e("wrapper"),C.scrollbarAlwaysOn?"always-on":""]},[$,H])}}),yU=vU({name:"ElFixedSizeList",getItemOffset:({itemSize:r},e)=>e*r,getItemSize:({itemSize:r})=>r,getEstimatedTotalSize:({total:r,itemSize:e})=>e*r,getOffset:({height:r,total:e,itemSize:t,layout:i,width:o},n,s,a)=>{const l=ng(i)?o:r,c=Math.max(0,e*t-l),u=Math.min(c,n*t),d=Math.max(0,(n+1)*t-l);switch(s===Bb&&(a>=d-l&&a<=u+l?s=ws:s=wa),s){case rg:return u;case ig:return d;case wa:{const h=Math.round(d+(u-d)/2);return h<Math.ceil(l/2)?0:h>c+Math.floor(l/2)?c:h}case ws:default:return a>=d&&a<=u?a:a<d?d:u}},getStartIndexForOffset:({total:r,itemSize:e},t)=>Math.max(0,Math.min(r-1,Math.floor(t/e))),getStopIndexForStartIndex:({height:r,total:e,itemSize:t,layout:i,width:o},n,s)=>{const a=n*t,l=ng(i)?o:r,c=Math.ceil((l+s-a)/t);return Math.max(0,Math.min(e-1,n+c-1))},initCache(){},clearCache:!0,validateProps(){}}),op=(r,e,t)=>{const{itemSize:i}=r,{items:o,lastVisitedIndex:n}=t;if(e>n){let s=0;if(n>=0){const a=o[n];s=a.offset+a.size}for(let a=n+1;a<=e;a++){const l=i(a);o[a]={offset:s,size:l},s+=l}t.lastVisitedIndex=e}return o[e]},cxe=(r,e,t)=>{const{items:i,lastVisitedIndex:o}=e;return(o>0?i[o].offset:0)>=t?bU(r,e,0,o,t):uxe(r,e,Math.max(0,o),t)},bU=(r,e,t,i,o)=>{for(;t<=i;){const n=t+Math.floor((i-t)/2),s=op(r,n,e).offset;if(s===o)return n;s<o?t=n+1:s>o&&(i=n-1)}return Math.max(0,t-1)},uxe=(r,e,t,i)=>{const{total:o}=r;let n=1;for(;t<o&&op(r,t,e).offset<i;)t+=n,n*=2;return bU(r,e,Math.floor(t/2),Math.min(t,o-1),i)},xU=({total:r},{items:e,estimatedItemSize:t,lastVisitedIndex:i})=>{let o=0;if(i>=r&&(i=r-1),i>=0){const s=e[i];o=s.offset+s.size}const n=(r-i-1)*t;return o+n},dxe=vU({name:"ElDynamicSizeList",getItemOffset:(r,e,t)=>op(r,e,t).offset,getItemSize:(r,e,{items:t})=>t[e].size,getEstimatedTotalSize:xU,getOffset:(r,e,t,i,o)=>{const{height:n,layout:s,width:a}=r,l=ng(s)?a:n,c=op(r,e,o),u=xU(r,o),d=Math.max(0,Math.min(u-l,c.offset)),h=Math.max(0,c.offset-l+c.size);switch(t===Bb&&(i>=h-l&&i<=d+l?t=ws:t=wa),t){case rg:return d;case ig:return h;case wa:return Math.round(h+(d-h)/2);case ws:default:return i>=h&&i<=d?i:i<h?h:d}},getStartIndexForOffset:(r,e,t)=>cxe(r,t,e),getStopIndexForStartIndex:(r,e,t,i)=>{const{height:o,total:n,layout:s,width:a}=r,l=ng(s)?a:o,c=op(r,e,i),u=t+l;let d=c.offset+c.size,h=e;for(;h<n-1&&d<u;)h++,d+=op(r,h,i).size;return h},initCache({estimatedItemSize:r=PT},e){const t={items:{},estimatedItemSize:r,lastVisitedIndex:-1};return t.clearCacheAfterIndex=(i,o=!0)=>{var n,s;t.lastVisitedIndex=Math.min(t.lastVisitedIndex,i-1),(n=e.exposed)==null||n.getItemStyleCache(-1),o&&((s=e.proxy)==null||s.$forceUpdate())},t},clearCache:!1,validateProps:({itemSize:r})=>{}}),hxe=({atXEndEdge:r,atXStartEdge:e,atYEndEdge:t,atYStartEdge:i},o)=>{let n=null,s=0,a=0;const l=(c,u)=>{const d=c<=0&&e.value||c>=0&&r.value,h=u<=0&&i.value||u>=0&&t.value;return d&&h};return{hasReachedEdge:l,onWheel:c=>{Wy(n);let u=c.deltaX,d=c.deltaY;Math.abs(u)>Math.abs(d)?d=0:u=0,c.shiftKey&&d!==0&&(u=d,d=0),!(l(s,a)&&l(s+u,a+d))&&(s+=u,a+=d,c.preventDefault(),n=Dh(()=>{o(s,a),s=0,a=0}))}}},_U=({name:r,clearCache:e,getColumnPosition:t,getColumnStartIndexForOffset:i,getColumnStopIndexForStartIndex:o,getEstimatedTotalHeight:n,getEstimatedTotalWidth:s,getColumnOffset:a,getRowOffset:l,getRowPosition:c,getRowStartIndexForOffset:u,getRowStopIndexForStartIndex:d,initCache:h,injectToInstance:p,validateProps:m})=>ne({name:r??"ElVirtualList",props:Pu,emits:[Ib,Pb],setup(g,{emit:v,expose:y,slots:b}){const x=Pe("vl");m(g);const _=It(),S=V(h(g,_));p==null||p(_,S);const w=V(),M=V(),T=V(),E=V(null),C=V({isScrolling:!1,scrollLeft:wt(g.initScrollLeft)?g.initScrollLeft:0,scrollTop:wt(g.initScrollTop)?g.initScrollTop:0,updateRequested:!1,xAxisScrollDir:ep,yAxisScrollDir:ep}),B=cU(),I=N(()=>Number.parseInt(`${g.height}`,10)),L=N(()=>Number.parseInt(`${g.width}`,10)),P=N(()=>{const{totalColumn:le,totalRow:Se,columnCache:Ae}=g,{isScrolling:Ne,xAxisScrollDir:Me,scrollLeft:Le}=f(C);if(le===0||Se===0)return[0,0,0,0];const je=i(g,Le,f(S)),Y=o(g,je,Le,f(S)),z=!Ne||Me===Db?Math.max(1,Ae):1,me=!Ne||Me===ep?Math.max(1,Ae):1;return[Math.max(0,je-z),Math.max(0,Math.min(le-1,Y+me)),je,Y]}),U=N(()=>{const{totalColumn:le,totalRow:Se,rowCache:Ae}=g,{isScrolling:Ne,yAxisScrollDir:Me,scrollTop:Le}=f(C);if(le===0||Se===0)return[0,0,0,0];const je=u(g,Le,f(S)),Y=d(g,je,Le,f(S)),z=!Ne||Me===Db?Math.max(1,Ae):1,me=!Ne||Me===ep?Math.max(1,Ae):1;return[Math.max(0,je-z),Math.max(0,Math.min(Se-1,Y+me)),je,Y]}),G=N(()=>n(g,f(S))),R=N(()=>s(g,f(S))),F=N(()=>{var le;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:g.direction,height:wt(g.height)?`${g.height}px`:g.height,width:wt(g.width)?`${g.width}px`:g.width},(le=g.style)!=null?le:{}]}),O=N(()=>{const le=`${f(R)}px`;return{height:`${f(G)}px`,pointerEvents:f(C).isScrolling?"none":void 0,width:le}}),H=()=>{const{totalColumn:le,totalRow:Se}=g;if(le>0&&Se>0){const[Y,z,me,Ie]=f(P),[Ue,Re,$e,Ve]=f(U);v(Ib,{columnCacheStart:Y,columnCacheEnd:z,rowCacheStart:Ue,rowCacheEnd:Re,columnVisibleStart:me,columnVisibleEnd:Ie,rowVisibleStart:$e,rowVisibleEnd:Ve})}const{scrollLeft:Ae,scrollTop:Ne,updateRequested:Me,xAxisScrollDir:Le,yAxisScrollDir:je}=f(C);v(Pb,{xAxisScrollDir:Le,scrollLeft:Ae,yAxisScrollDir:je,scrollTop:Ne,updateRequested:Me})},$=le=>{const{clientHeight:Se,clientWidth:Ae,scrollHeight:Ne,scrollLeft:Me,scrollTop:Le,scrollWidth:je}=le.currentTarget,Y=f(C);if(Y.scrollTop===Le&&Y.scrollLeft===Me)return;let z=Me;if(gU(g.direction))switch(Ub()){case og:z=-Me;break;case FT:z=je-Ae-Me;break}C.value={...Y,isScrolling:!0,scrollLeft:z,scrollTop:Math.max(0,Math.min(Le,Ne-Se)),updateRequested:!0,xAxisScrollDir:Du(Y.scrollLeft,z),yAxisScrollDir:Du(Y.scrollTop,Le)},lt(()=>Z()),de(),H()},j=(le,Se)=>{const Ae=f(I),Ne=(G.value-Ae)/Se*le;ve({scrollTop:Math.min(G.value-Ae,Ne)})},J=(le,Se)=>{const Ae=f(L),Ne=(R.value-Ae)/Se*le;ve({scrollLeft:Math.min(R.value-Ae,Ne)})},{onWheel:ce}=hxe({atXStartEdge:N(()=>C.value.scrollLeft<=0),atXEndEdge:N(()=>C.value.scrollLeft>=R.value-f(L)),atYStartEdge:N(()=>C.value.scrollTop<=0),atYEndEdge:N(()=>C.value.scrollTop>=G.value-f(I))},(le,Se)=>{var Ae,Ne,Me,Le;(Ne=(Ae=M.value)==null?void 0:Ae.onMouseUp)==null||Ne.call(Ae),(Le=(Me=T.value)==null?void 0:Me.onMouseUp)==null||Le.call(Me);const je=f(L),Y=f(I);ve({scrollLeft:Math.min(C.value.scrollLeft+le,R.value-je),scrollTop:Math.min(C.value.scrollTop+Se,G.value-Y)})}),ve=({scrollLeft:le=C.value.scrollLeft,scrollTop:Se=C.value.scrollTop})=>{le=Math.max(le,0),Se=Math.max(Se,0);const Ae=f(C);Se===Ae.scrollTop&&le===Ae.scrollLeft||(C.value={...Ae,xAxisScrollDir:Du(Ae.scrollLeft,le),yAxisScrollDir:Du(Ae.scrollTop,Se),scrollLeft:le,scrollTop:Se,updateRequested:!0},lt(()=>Z()),de(),H())},xe=(le=0,Se=0,Ae=ws)=>{const Ne=f(C);Se=Math.max(0,Math.min(Se,g.totalColumn-1)),le=Math.max(0,Math.min(le,g.totalRow-1));const Me=tD(x.namespace.value),Le=f(S),je=n(g,Le),Y=s(g,Le);ve({scrollLeft:a(g,Se,Ae,Ne.scrollLeft,Le,Y>g.width?Me:0),scrollTop:l(g,le,Ae,Ne.scrollTop,Le,je>g.height?Me:0)})},te=(le,Se)=>{const{columnWidth:Ae,direction:Ne,rowHeight:Me}=g,Le=B.value(e&&Ae,e&&Me,e&&Ne),je=`${le},${Se}`;if(Yt(Le,je))return Le[je];{const[,Y]=t(g,Se,f(S)),z=f(S),me=gU(Ne),[Ie,Ue]=c(g,le,z),[Re]=t(g,Se,z);return Le[je]={position:"absolute",left:me?void 0:`${Y}px`,right:me?`${Y}px`:void 0,top:`${Ue}px`,height:`${Ie}px`,width:`${Re}px`},Le[je]}},Z=()=>{C.value.isScrolling=!1,lt(()=>{B.value(-1,null,null)})};Rt(()=>{if(!Jt)return;const{initScrollLeft:le,initScrollTop:Se}=g,Ae=f(w);Ae&&(wt(le)&&(Ae.scrollLeft=le),wt(Se)&&(Ae.scrollTop=Se)),H()});const de=()=>{const{direction:le}=g,{scrollLeft:Se,scrollTop:Ae,updateRequested:Ne}=f(C),Me=f(w);if(Ne&&Me){if(le===rp)switch(Ub()){case og:{Me.scrollLeft=-Se;break}case BT:{Me.scrollLeft=Se;break}default:{const{clientWidth:Le,scrollWidth:je}=Me;Me.scrollLeft=je-Le-Se;break}}else Me.scrollLeft=Math.max(0,Se);Me.scrollTop=Math.max(0,Ae)}},{resetAfterColumnIndex:Ce,resetAfterRowIndex:ue,resetAfter:D}=_.proxy;y({windowRef:w,innerRef:E,getItemStyleCache:B,scrollTo:ve,scrollToItem:xe,states:C,resetAfterColumnIndex:Ce,resetAfterRowIndex:ue,resetAfter:D});const K=()=>{const{scrollbarAlwaysOn:le,scrollbarStartGap:Se,scrollbarEndGap:Ae,totalColumn:Ne,totalRow:Me}=g,Le=f(L),je=f(I),Y=f(R),z=f(G),{scrollLeft:me,scrollTop:Ie}=f(C),Ue=pt(jT,{ref:M,alwaysOn:le,startGap:Se,endGap:Ae,class:x.e("horizontal"),clientSize:Le,layout:"horizontal",onScroll:J,ratio:Le*100/Y,scrollFrom:me/(Y-Le),total:Me,visible:!0}),Re=pt(jT,{ref:T,alwaysOn:le,startGap:Se,endGap:Ae,class:x.e("vertical"),clientSize:je,layout:"vertical",onScroll:j,ratio:je*100/z,scrollFrom:Ie/(z-je),total:Ne,visible:!0});return{horizontalScrollbar:Ue,verticalScrollbar:Re}},re=()=>{var le;const[Se,Ae]=f(P),[Ne,Me]=f(U),{data:Le,totalColumn:je,totalRow:Y,useIsScrolling:z,itemKey:me}=g,Ie=[];if(Y>0&&je>0)for(let Ue=Ne;Ue<=Me;Ue++)for(let Re=Se;Re<=Ae;Re++)Ie.push((le=b.default)==null?void 0:le.call(b,{columnIndex:Re,data:Le,key:me({columnIndex:Re,data:Le,rowIndex:Ue}),isScrolling:z?f(C).isScrolling:void 0,style:te(Ue,Re),rowIndex:Ue}));return Ie},ae=()=>{const le=Ht(g.innerElement),Se=re();return[pt(le,{style:f(O),ref:E},Tt(le)?Se:{default:()=>Se})]};return()=>{const le=Ht(g.containerElement),{horizontalScrollbar:Se,verticalScrollbar:Ae}=K(),Ne=ae();return pt("div",{key:0,class:x.e("wrapper"),role:g.role},[pt(le,{class:g.className,style:f(F),onScroll:$,onWheel:ce,ref:w},Tt(le)?Ne:{default:()=>Ne}),Se,Ae])}}}),pxe=_U({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:r},e)=>[r,e*r],getRowPosition:({rowHeight:r},e)=>[r,e*r],getEstimatedTotalHeight:({totalRow:r,rowHeight:e})=>e*r,getEstimatedTotalWidth:({totalColumn:r,columnWidth:e})=>e*r,getColumnOffset:({totalColumn:r,columnWidth:e,width:t},i,o,n,s,a)=>{t=Number(t);const l=Math.max(0,r*e-t),c=Math.min(l,i*e),u=Math.max(0,i*e-t+a+e);switch(o==="smart"&&(n>=u-t&&n<=c+t?o=ws:o=wa),o){case rg:return c;case ig:return u;case wa:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(t/2)?0:d>l+Math.floor(t/2)?l:d}case ws:default:return n>=u&&n<=c?n:u>c||n<u?u:c}},getRowOffset:({rowHeight:r,height:e,totalRow:t},i,o,n,s,a)=>{e=Number(e);const l=Math.max(0,t*r-e),c=Math.min(l,i*r),u=Math.max(0,i*r-e+a+r);switch(o===Bb&&(n>=u-e&&n<=c+e?o=ws:o=wa),o){case rg:return c;case ig:return u;case wa:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(e/2)?0:d>l+Math.floor(e/2)?l:d}case ws:default:return n>=u&&n<=c?n:u>c||n<u?u:c}},getColumnStartIndexForOffset:({columnWidth:r,totalColumn:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/r))),getColumnStopIndexForStartIndex:({columnWidth:r,totalColumn:e,width:t},i,o)=>{const n=i*r,s=Math.ceil((t+o-n)/r);return Math.max(0,Math.min(e-1,i+s-1))},getRowStartIndexForOffset:({rowHeight:r,totalRow:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/r))),getRowStopIndexForStartIndex:({rowHeight:r,totalRow:e,height:t},i,o)=>{const n=i*r,s=Math.ceil((t+o-n)/r);return Math.max(0,Math.min(e-1,i+s-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:r,rowHeight:e})=>{}}),{max:zb,min:wU,floor:SU}=Math,fxe={column:"columnWidth",row:"rowHeight"},$T={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},cl=(r,e,t,i)=>{const[o,n,s]=[t[i],r[fxe[i]],t[$T[i]]];if(e>s){let a=0;if(s>=0){const l=o[s];a=l.offset+l.size}for(let l=s+1;l<=e;l++){const c=n(l);o[l]={offset:a,size:c},a+=c}t[$T[i]]=e}return o[e]},MU=(r,e,t,i,o,n)=>{for(;t<=i;){const s=t+SU((i-t)/2),a=cl(r,s,e,n).offset;if(a===o)return s;a<o?t=s+1:i=s-1}return zb(0,t-1)},mxe=(r,e,t,i,o)=>{const n=o==="column"?r.totalColumn:r.totalRow;let s=1;for(;t<n&&cl(r,t,e,o).offset<i;)t+=s,s*=2;return MU(r,e,SU(t/2),wU(t,n-1),i,o)},TU=(r,e,t,i)=>{const[o,n]=[e[i],e[$T[i]]];return(n>0?o[n].offset:0)>=t?MU(r,e,0,n,t,i):mxe(r,e,zb(0,n),t,i)},EU=({totalRow:r},{estimatedRowHeight:e,lastVisitedRowIndex:t,row:i})=>{let o=0;if(t>=r&&(t=r-1),t>=0){const s=i[t];o=s.offset+s.size}const n=(r-t-1)*e;return o+n},CU=({totalColumn:r},{column:e,estimatedColumnWidth:t,lastVisitedColumnIndex:i})=>{let o=0;if(i>r&&(i=r-1),i>=0){const s=e[i];o=s.offset+s.size}const n=(r-i-1)*t;return o+n},gxe={column:CU,row:EU},NU=(r,e,t,i,o,n,s)=>{const[a,l]=[n==="row"?r.height:r.width,gxe[n]],c=cl(r,e,o,n),u=l(r,o),d=zb(0,wU(u-a,c.offset)),h=zb(0,c.offset-a+s+c.size);switch(t===Bb&&(i>=h-a&&i<=d+a?t=ws:t=wa),t){case rg:return d;case ig:return h;case wa:return Math.round(h+(d-h)/2);case ws:default:return i>=h&&i<=d?i:h>d||i<h?h:d}},vxe=_U({name:"ElDynamicSizeGrid",getColumnPosition:(r,e,t)=>{const i=cl(r,e,t,"column");return[i.size,i.offset]},getRowPosition:(r,e,t)=>{const i=cl(r,e,t,"row");return[i.size,i.offset]},getColumnOffset:(r,e,t,i,o,n)=>NU(r,e,t,i,o,"column",n),getRowOffset:(r,e,t,i,o,n)=>NU(r,e,t,i,o,"row",n),getColumnStartIndexForOffset:(r,e,t)=>TU(r,t,e,"column"),getColumnStopIndexForStartIndex:(r,e,t,i)=>{const o=cl(r,e,i,"column"),n=t+r.width;let s=o.offset+o.size,a=e;for(;a<r.totalColumn-1&&s<n;)a++,s+=cl(r,e,i,"column").size;return a},getEstimatedTotalHeight:EU,getEstimatedTotalWidth:CU,getRowStartIndexForOffset:(r,e,t)=>TU(r,t,e,"row"),getRowStopIndexForStartIndex:(r,e,t,i)=>{const{totalRow:o,height:n}=r,s=cl(r,e,i,"row"),a=t+n;let l=s.size+s.offset,c=e;for(;c<o-1&&l<a;)c++,l+=cl(r,c,i,"row").size;return c},injectToInstance:(r,e)=>{const t=({columnIndex:n,rowIndex:s},a)=>{var l,c;a=Pi(a)?!0:a,wt(n)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,n-1)),wt(s)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,s-1)),(l=r.exposed)==null||l.getItemStyleCache.value(-1,null,null),a&&((c=r.proxy)==null||c.$forceUpdate())},i=(n,s)=>{t({columnIndex:n},s)},o=(n,s)=>{t({rowIndex:n},s)};Object.assign(r.proxy,{resetAfterColumnIndex:i,resetAfterRowIndex:o,resetAfter:t})},initCache:({estimatedColumnWidth:r=PT,estimatedRowHeight:e=PT})=>({column:{},estimatedColumnWidth:r,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:r,rowHeight:e})=>{}}),yxe=ne({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){return{ns:Pe("select")}}});function bxe(r,e,t,i,o,n){return r.item.isTitle?(A(),W("div",{key:0,class:k(r.ns.be("group","title")),style:ct([r.style,{lineHeight:`${r.height}px`}])},ze(r.item.label),7)):(A(),W("div",{key:1,class:k(r.ns.be("group","split")),style:ct(r.style)},[X("span",{class:k(r.ns.be("group","split-dash")),style:ct({top:`${r.height/2}px`})},null,6)],6))}var xxe=Xe(yxe,[["render",bxe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/group-item.vue"]]);function _xe(r,{emit:e}){return{hoverItem:()=>{r.disabled||e("hover",r.index)},selectOptionClick:()=>{r.disabled||e("select",r.item,r.index)}}}const wxe={allowCreate:Boolean,autocomplete:{type:String,default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:tc},effect:{type:String,default:"light"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},teleported:ro.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:jy},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},placement:{type:Te(String),values:Eu,default:"bottom-start"}},Sxe={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,created:Boolean},Mxe=ne({props:Sxe,emits:["select","hover"],setup(r,{emit:e}){const t=Pe("select"),{hoverItem:i,selectOptionClick:o}=_xe(r,{emit:e});return{ns:t,hoverItem:i,selectOptionClick:o}}}),Txe=["aria-selected"];function Exe(r,e,t,i,o,n){return A(),W("li",{"aria-selected":r.selected,style:ct(r.style),class:k([r.ns.be("dropdown","option-item"),r.ns.is("selected",r.selected),r.ns.is("disabled",r.disabled),r.ns.is("created",r.created),{hover:r.hovering}]),onMouseenter:e[0]||(e[0]=(...s)=>r.hoverItem&&r.hoverItem(...s)),onClick:e[1]||(e[1]=vt((...s)=>r.selectOptionClick&&r.selectOptionClick(...s),["stop"]))},[Oe(r.$slots,"default",{item:r.item,index:r.index,disabled:r.disabled},()=>[X("span",null,ze(r.item.label),1)])],46,Txe)}var Cxe=Xe(Mxe,[["render",Exe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/option-item.vue"]]);const AU=Symbol("ElSelectV2Injection");var Nxe=ne({name:"ElSelectDropdown",props:{data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(r,{slots:e,expose:t}){const i=ot(AU),o=Pe("select"),n=V([]),s=V(),a=N(()=>r.data.length);ke(()=>a.value,()=>{var w,M;(M=(w=i.popper.value).updatePopper)==null||M.call(w)});const l=N(()=>Pi(i.props.estimatedOptionHeight)),c=N(()=>l.value?{itemSize:i.props.itemHeight}:{estimatedSize:i.props.estimatedOptionHeight,itemSize:w=>n.value[w]}),u=(w=[],M)=>{const{props:{valueKey:T}}=i;return zt(M)?w&&w.some(E=>Wr(E,T)===Wr(M,T)):w.includes(M)},d=(w,M)=>{if(zt(M)){const{valueKey:T}=i.props;return Wr(w,T)===Wr(M,T)}else return w===M},h=(w,M)=>{const{valueKey:T}=i.props;return i.props.multiple?u(w,Wr(M,T)):d(w,Wr(M,T))},p=(w,M)=>{const{disabled:T,multiple:E,multipleLimit:C}=i.props;return T||!M&&(E?C>0&&w.length>=C:!1)},m=w=>r.hoveringIndex===w;t({listRef:s,isSized:l,isItemDisabled:p,isItemHovering:m,isItemSelected:h,scrollToItem:w=>{const M=s.value;M&&M.scrollToItem(w)},resetScrollTop:()=>{const w=s.value;w&&w.resetScrollTop()}});const g=w=>{const{index:M,data:T,style:E}=w,C=f(l),{itemSize:B,estimatedSize:I}=f(c),{modelValue:L}=i.props,{onSelect:P,onHover:U}=i,G=T[M];if(G.type==="Group")return ee(xxe,{item:G,style:E,height:C?B:I},null);const R=h(L,G),F=p(L,R),O=m(M);return ee(Cxe,$t(w,{selected:R,disabled:G.disabled||F,created:!!G.created,hovering:O,item:G,onSelect:P,onHover:U}),{default:H=>{var $;return(($=e.default)==null?void 0:$.call(e,H))||ee("span",null,[G.label])}})},{onKeyboardNavigate:v,onKeyboardSelect:y}=i,b=()=>{v("forward")},x=()=>{v("backward")},_=()=>{i.expanded=!1},S=w=>{const{code:M}=w,{tab:T,esc:E,down:C,up:B,enter:I}=ft;switch(M!==T&&(w.preventDefault(),w.stopPropagation()),M){case T:case E:{_();break}case C:{b();break}case B:{x();break}case I:{y();break}}};return()=>{var w;const{data:M,width:T}=r,{height:E,multiple:C,scrollbarAlwaysOn:B}=i.props;if(M.length===0)return ee("div",{class:o.b("dropdown"),style:{width:`${T}px`}},[(w=e.empty)==null?void 0:w.call(e)]);const I=f(l)?yU:dxe;return ee("div",{class:[o.b("dropdown"),o.is("multiple",C)]},[ee(I,$t({ref:s},f(c),{className:o.be("dropdown","list"),scrollbarAlwaysOn:B,data:M,height:E,width:T,total:M.length,onKeydown:S}),{default:L=>ee(g,L,null)})])}}});function Axe(r,e){const t=V(0),i=V(null),o=N(()=>r.allowCreate&&r.filterable);function n(u){const d=h=>h.value===u;return r.options&&r.options.some(d)||e.createdOptions.some(d)}function s(u){o.value&&(r.multiple&&u.created?t.value++:i.value=u)}function a(u){if(o.value)if(u&&u.length>0&&!n(u)){const d={value:u,label:u,created:!0,disabled:!1};e.createdOptions.length>=t.value?e.createdOptions[t.value]=d:e.createdOptions.push(d)}else if(r.multiple)e.createdOptions.length=t.value;else{const d=i.value;e.createdOptions.length=0,d&&d.created&&e.createdOptions.push(d)}}function l(u){if(!o.value||!u||!u.created||u.created&&r.reserveKeyword&&e.inputValue===u.label)return;const d=e.createdOptions.findIndex(h=>h.value===u.value);~d&&(e.createdOptions.splice(d,1),t.value--)}function c(){o.value&&(e.createdOptions.length=0,t.value=0)}return{createNewOption:a,removeNewOption:l,selectNewOption:s,clearAllNewOption:c}}const Rxe=r=>{const e=[];return r.forEach(t=>{it(t.options)?(e.push({label:t.label,isTitle:!0,type:"Group"}),t.options.forEach(i=>{e.push(i)}),e.push({type:"Group"})):e.push(t)}),e};function Lxe(r){const e=V(!1);return{handleCompositionStart:()=>{e.value=!0},handleCompositionUpdate:t=>{const i=t.target.value,o=i[i.length-1]||"";e.value=!$y(o)},handleCompositionEnd:t=>{e.value&&(e.value=!1,St(r)&&r(t))}}}const RU="",LU=11,Oxe={larget:51,default:42,small:33},kxe=(r,e)=>{const{t}=ir(),i=Pe("select-v2"),o=Pe("input"),{form:n,formItem:s}=Jo(),a=ur({inputValue:RU,displayInputValue:RU,calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:void 0,query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),l=V(-1),c=V(-1),u=V(null),d=V(null),h=V(null),p=V(null),m=V(null),g=V(null),v=V(null),y=V(!1),b=N(()=>r.disabled||(n==null?void 0:n.disabled)),x=N(()=>{const pe=I.value.length*34;return pe>r.height?r.height:pe}),_=N(()=>!Mi(r.modelValue)),S=N(()=>{const pe=r.multiple?Array.isArray(r.modelValue)&&r.modelValue.length>0:_.value;return r.clearable&&!b.value&&a.comboBoxHovering&&pe}),w=N(()=>r.remote&&r.filterable?"":zy),M=N(()=>w.value&&i.is("reverse",y.value)),T=N(()=>(s==null?void 0:s.validateState)||""),E=N(()=>dM[T.value]),C=N(()=>r.remote?300:0),B=N(()=>{const pe=I.value;return r.loading?r.loadingText||t("el.select.loading"):r.remote&&a.inputValue===""&&pe.length===0?!1:r.filterable&&a.inputValue&&pe.length>0?r.noMatchText||t("el.select.noMatch"):pe.length===0?r.noDataText||t("el.select.noData"):null}),I=N(()=>{const pe=Be=>{const Lt=a.inputValue,Ot=new RegExp(QP(Lt),"i");return Lt?Ot.test(Be.label||""):!0};return r.loading?[]:Rxe(r.options.concat(a.createdOptions).map(Be=>{if(it(Be.options)){const Lt=Be.options.filter(pe);if(Lt.length>0)return{...Be,options:Lt}}else if(r.remote||pe(Be))return Be;return null}).filter(Be=>Be!==null))}),L=N(()=>{const pe=new Map;return I.value.forEach((Be,Lt)=>{pe.set(je(Be),{option:Be,index:Lt})}),pe}),P=N(()=>I.value.every(pe=>pe.disabled)),U=Ci(),G=N(()=>U.value==="small"?"small":"default"),R=N(()=>{const pe=g.value,Be=G.value||"default",Lt=pe?Number.parseInt(getComputedStyle(pe).paddingLeft):0,Ot=pe?Number.parseInt(getComputedStyle(pe).paddingRight):0;return a.selectWidth-Ot-Lt-Oxe[Be]}),F=()=>{var pe;c.value=((pe=m.value)==null?void 0:pe.offsetWidth)||200},O=N(()=>({width:`${a.calculatedWidth===0?LU:Math.ceil(a.calculatedWidth)+LU}px`})),H=N(()=>it(r.modelValue)?r.modelValue.length===0&&!a.displayInputValue:r.filterable?a.displayInputValue.length===0:!0),$=N(()=>{const pe=r.placeholder||t("el.select.placeholder");return r.multiple||Mi(r.modelValue)?pe:a.selectedLabel}),j=N(()=>{var pe,Be;return(Be=(pe=p.value)==null?void 0:pe.popperRef)==null?void 0:Be.contentRef}),J=N(()=>{if(r.multiple){const pe=r.modelValue.length;if(r.modelValue.length>0&&L.value.has(r.modelValue[pe-1])){const{index:Be}=L.value.get(r.modelValue[pe-1]);return Be}}else if(r.modelValue&&L.value.has(r.modelValue)){const{index:pe}=L.value.get(r.modelValue);return pe}return-1}),ce=N({get(){return y.value&&B.value!==!1},set(pe){y.value=pe}}),ve=N(()=>a.cachedOptions.slice(0,r.maxCollapseTags)),xe=N(()=>a.cachedOptions.slice(r.maxCollapseTags)),{createNewOption:te,removeNewOption:Z,selectNewOption:de,clearAllNewOption:Ce}=Axe(r,a),{handleCompositionStart:ue,handleCompositionUpdate:D,handleCompositionEnd:K}=Lxe(pe=>mt(pe)),re=()=>{var pe,Be,Lt;(Be=(pe=d.value)==null?void 0:pe.focus)==null||Be.call(pe),(Lt=p.value)==null||Lt.updatePopper()},ae=()=>{if(!r.automaticDropdown&&!b.value)return a.isComposing&&(a.softFocus=!0),lt(()=>{var pe,Be;y.value=!y.value,(Be=(pe=d.value)==null?void 0:pe.focus)==null||Be.call(pe)})},le=()=>(r.filterable&&a.inputValue!==a.selectedLabel&&(a.query=a.selectedLabel),Ae(a.inputValue),lt(()=>{te(a.inputValue)})),Se=Xo(le,C.value),Ae=pe=>{a.previousQuery!==pe&&(a.previousQuery=pe,r.filterable&&St(r.filterMethod)?r.filterMethod(pe):r.filterable&&r.remote&&St(r.remoteMethod)&&r.remoteMethod(pe))},Ne=pe=>{mn(r.modelValue,pe)||e(Fr,pe)},Me=pe=>{e(Vt,pe),Ne(pe),a.previousValue=pe==null?void 0:pe.toString()},Le=(pe=[],Be)=>{if(!zt(Be))return pe.indexOf(Be);const Lt=r.valueKey;let Ot=-1;return pe.some((zr,Tr)=>Wr(zr,Lt)===Wr(Be,Lt)?(Ot=Tr,!0):!1),Ot},je=pe=>zt(pe)?Wr(pe,r.valueKey):pe,Y=pe=>zt(pe)?pe.label:pe,z=()=>lt(()=>{var pe,Be;if(!d.value)return;const Lt=g.value;m.value.height=Lt.offsetHeight,y.value&&B.value!==!1&&((Be=(pe=p.value)==null?void 0:pe.updatePopper)==null||Be.call(pe))}),me=()=>{var pe,Be;if(Ie(),F(),(Be=(pe=p.value)==null?void 0:pe.updatePopper)==null||Be.call(pe),r.multiple)return z()},Ie=()=>{const pe=g.value;pe&&(a.selectWidth=pe.getBoundingClientRect().width)},Ue=(pe,Be,Lt=!0)=>{var Ot,zr;if(r.multiple){let Tr=r.modelValue.slice();const Br=Le(Tr,je(pe));Br>-1?(Tr=[...Tr.slice(0,Br),...Tr.slice(Br+1)],a.cachedOptions.splice(Br,1),Z(pe)):(r.multipleLimit<=0||Tr.length<r.multipleLimit)&&(Tr=[...Tr,je(pe)],a.cachedOptions.push(pe),de(pe),et(Be)),Me(Tr),pe.created&&(a.query="",Ae(""),a.inputLength=20),r.filterable&&!r.reserveKeyword&&((zr=(Ot=d.value).focus)==null||zr.call(Ot),fe("")),r.filterable&&(a.calculatedWidth=v.value.getBoundingClientRect().width),z(),be()}else l.value=Be,a.selectedLabel=pe.label,Me(je(pe)),y.value=!1,a.isComposing=!1,a.isSilentBlur=Lt,de(pe),pe.created||Ce(),et(Be)},Re=(pe,Be)=>{const{valueKey:Lt}=r,Ot=r.modelValue.indexOf(Wr(Be,Lt));if(Ot>-1&&!b.value){const zr=[...r.modelValue.slice(0,Ot),...r.modelValue.slice(Ot+1)];return a.cachedOptions.splice(Ot,1),Me(zr),e("remove-tag",Wr(Be,Lt)),a.softFocus=!0,Z(Be),lt(re)}pe.stopPropagation()},$e=pe=>{const Be=a.isComposing;a.isComposing=!0,a.softFocus?a.softFocus=!1:Be||e("focus",pe)},Ve=pe=>(a.softFocus=!1,lt(()=>{var Be,Lt;(Lt=(Be=d.value)==null?void 0:Be.blur)==null||Lt.call(Be),v.value&&(a.calculatedWidth=v.value.getBoundingClientRect().width),a.isSilentBlur?a.isSilentBlur=!1:a.isComposing&&e("blur",pe),a.isComposing=!1})),ye=()=>{a.displayInputValue.length>0?fe(""):y.value=!1},q=pe=>{if(a.displayInputValue.length===0){pe.preventDefault();const Be=r.modelValue.slice();Be.pop(),Z(a.cachedOptions.pop()),Me(Be)}},oe=()=>{let pe;return it(r.modelValue)?pe=[]:pe=void 0,a.softFocus=!0,r.multiple?a.cachedOptions=[]:a.selectedLabel="",y.value=!1,Me(pe),e("clear"),Ce(),lt(re)},fe=pe=>{a.displayInputValue=pe,a.inputValue=pe},ie=(pe,Be=void 0)=>{const Lt=I.value;if(!["forward","backward"].includes(pe)||b.value||Lt.length<=0||P.value)return;if(!y.value)return ae();Be===void 0&&(Be=a.hoveringIndex);let Ot=-1;pe==="forward"?(Ot=Be+1,Ot>=Lt.length&&(Ot=0)):pe==="backward"&&(Ot=Be-1,(Ot<0||Ot>=Lt.length)&&(Ot=Lt.length-1));const zr=Lt[Ot];if(zr.disabled||zr.type==="Group")return ie(pe,Ot);et(Ot),he(Ot)},De=()=>{if(y.value)~a.hoveringIndex&&I.value[a.hoveringIndex]&&Ue(I.value[a.hoveringIndex],a.hoveringIndex,!1);else return ae()},et=pe=>{a.hoveringIndex=pe},ht=()=>{a.hoveringIndex=-1},be=()=>{var pe;const Be=d.value;Be&&((pe=Be.focus)==null||pe.call(Be))},mt=pe=>{const Be=pe.target.value;if(fe(Be),a.displayInputValue.length>0&&!y.value&&(y.value=!0),a.calculatedWidth=v.value.getBoundingClientRect().width,r.multiple&&z(),r.remote)Se();else return le()},at=()=>(y.value=!1,Ve()),xt=()=>(a.inputValue=a.displayInputValue,lt(()=>{~J.value&&(et(J.value),he(a.hoveringIndex))})),he=pe=>{h.value.scrollToItem(pe)},Ee=()=>{if(ht(),r.multiple)if(r.modelValue.length>0){let pe=!1;a.cachedOptions.length=0,a.previousValue=r.modelValue.toString();for(const Be of r.modelValue)if(L.value.has(Be)){const{index:Lt,option:Ot}=L.value.get(Be);a.cachedOptions.push(Ot),pe||et(Lt),pe=!0}}else a.cachedOptions=[],a.previousValue=void 0;else if(_.value){a.previousValue=r.modelValue;const pe=I.value,Be=pe.findIndex(Lt=>je(Lt)===je(r.modelValue));~Be?(a.selectedLabel=pe[Be].label,et(Be)):a.selectedLabel=`${r.modelValue}`}else a.selectedLabel="",a.previousValue=void 0;Ce(),F()};return ke(y,pe=>{var Be,Lt;e("visible-change",pe),pe?(Lt=(Be=p.value).update)==null||Lt.call(Be):(a.displayInputValue="",a.previousQuery=null,te(""))}),ke(()=>r.modelValue,(pe,Be)=>{var Lt;(!pe||pe.toString()!==a.previousValue)&&Ee(),!mn(pe,Be)&&r.validateEvent&&((Lt=s==null?void 0:s.validate)==null||Lt.call(s,"change").catch(Ot=>{}))},{deep:!0}),ke(()=>r.options,()=>{const pe=d.value;(!pe||pe&&document.activeElement!==pe)&&Ee()},{deep:!0}),ke(I,()=>lt(h.value.resetScrollTop)),ke(()=>ce.value,pe=>{pe||ht()}),Rt(()=>{Ee()}),ko(m,me),{collapseTagSize:G,currentPlaceholder:$,expanded:y,emptyText:B,popupHeight:x,debounce:C,filteredOptions:I,iconComponent:w,iconReverse:M,inputWrapperStyle:O,popperSize:c,dropdownMenuVisible:ce,hasModelValue:_,shouldShowPlaceholder:H,selectDisabled:b,selectSize:U,showClearBtn:S,states:a,tagMaxWidth:R,nsSelectV2:i,nsInput:o,calculatorRef:v,controlRef:u,inputRef:d,menuRef:h,popper:p,selectRef:m,selectionRef:g,popperRef:j,validateState:T,validateIcon:E,showTagList:ve,collapseTagList:xe,debouncedOnInputChange:Se,deleteTag:Re,getLabel:Y,getValueKey:je,handleBlur:Ve,handleClear:oe,handleClickOutside:at,handleDel:q,handleEsc:ye,handleFocus:$e,handleMenuEnter:xt,handleResize:me,toggleMenu:ae,scrollTo:he,onInput:mt,onKeyboardNavigate:ie,onKeyboardSelect:De,onSelect:Ue,onHover:et,onUpdateInputValue:fe,handleCompositionStart:ue,handleCompositionEnd:K,handleCompositionUpdate:D}},Ixe=ne({name:"ElSelectV2",components:{ElSelectMenu:Nxe,ElTag:Ym,ElTooltip:Zo,ElIcon:st},directives:{ClickOutside:fc,ModelText:xS},props:wxe,emits:[Vt,Fr,"remove-tag","clear","visible-change","focus","blur"],setup(r,{emit:e}){const t=N(()=>{const{modelValue:o,multiple:n}=r,s=n?[]:void 0;return it(o)?n?o:s:n?s:o}),i=kxe(ur({...qi(r),modelValue:t}),e);return Wt(AU,{props:ur({...qi(r),height:i.popupHeight,modelValue:t}),popper:i.popper,onSelect:i.onSelect,onHover:i.onHover,onKeyboardNavigate:i.onKeyboardNavigate,onKeyboardSelect:i.onKeyboardSelect}),{...i,modelValue:t}}}),Pxe={key:0},Dxe=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],Bxe=["textContent"],Fxe=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],Uxe=["textContent"];function zxe(r,e,t,i,o,n){const s=_t("el-tag"),a=_t("el-tooltip"),l=_t("el-icon"),c=_t("el-select-menu"),u=bh("model-text"),d=bh("click-outside");return At((A(),W("div",{ref:"selectRef",class:k([r.nsSelectV2.b(),r.nsSelectV2.m(r.selectSize)]),onClick:e[24]||(e[24]=vt((...h)=>r.toggleMenu&&r.toggleMenu(...h),["stop"])),onMouseenter:e[25]||(e[25]=h=>r.states.comboBoxHovering=!0),onMouseleave:e[26]||(e[26]=h=>r.states.comboBoxHovering=!1)},[ee(a,{ref:"popper",visible:r.dropdownMenuVisible,teleported:r.teleported,"popper-class":[r.nsSelectV2.e("popper"),r.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":r.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:r.effect,placement:r.placement,pure:"",transition:`${r.nsSelectV2.namespace.value}-zoom-in-top`,trigger:"click",persistent:r.persistent,onBeforeShow:r.handleMenuEnter,onHide:e[23]||(e[23]=h=>r.states.inputValue=r.states.displayInputValue)},{default:se(()=>[X("div",{ref:"selectionRef",class:k([r.nsSelectV2.e("wrapper"),r.nsSelectV2.is("focused",r.states.isComposing||r.expanded),r.nsSelectV2.is("hovering",r.states.comboBoxHovering),r.nsSelectV2.is("filterable",r.filterable),r.nsSelectV2.is("disabled",r.selectDisabled)])},[r.$slots.prefix?(A(),W("div",Pxe,[Oe(r.$slots,"prefix")])):we("v-if",!0),r.multiple?(A(),W("div",{key:1,class:k(r.nsSelectV2.e("selection"))},[r.collapseTags&&r.modelValue.length>0?(A(),W(nt,{key:0},[(A(!0),W(nt,null,jt(r.showTagList,h=>(A(),W("div",{key:r.getValueKey(h),class:k(r.nsSelectV2.e("selected-item"))},[ee(s,{closable:!r.selectDisabled&&!(h!=null&&h.disable),size:r.collapseTagSize,type:"info","disable-transitions":"",onClose:p=>r.deleteTag(p,h)},{default:se(()=>[X("span",{class:k(r.nsSelectV2.e("tags-text")),style:ct({maxWidth:`${r.tagMaxWidth}px`})},ze(h==null?void 0:h.label),7)]),_:2},1032,["closable","size","onClose"])],2))),128)),X("div",{class:k(r.nsSelectV2.e("selected-item"))},[r.modelValue.length>r.maxCollapseTags?(A(),_e(s,{key:0,closable:!1,size:r.collapseTagSize,type:"info","disable-transitions":""},{default:se(()=>[r.collapseTagsTooltip?(A(),_e(a,{key:0,disabled:r.dropdownMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:r.effect,placement:"bottom",teleported:!1},{default:se(()=>[X("span",{class:k(r.nsSelectV2.e("tags-text")),style:ct({maxWidth:`${r.tagMaxWidth}px`})},"+ "+ze(r.modelValue.length-r.maxCollapseTags),7)]),content:se(()=>[X("div",{class:k(r.nsSelectV2.e("selection"))},[(A(!0),W(nt,null,jt(r.collapseTagList,h=>(A(),W("div",{key:r.getValueKey(h),class:k(r.nsSelectV2.e("selected-item"))},[ee(s,{closable:!r.selectDisabled&&!h.disabled,size:r.collapseTagSize,class:"in-tooltip",type:"info","disable-transitions":"",onClose:p=>r.deleteTag(p,h)},{default:se(()=>[X("span",{class:k(r.nsSelectV2.e("tags-text")),style:ct({maxWidth:`${r.tagMaxWidth}px`})},ze(r.getLabel(h)),7)]),_:2},1032,["closable","size","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect"])):(A(),W("span",{key:1,class:k(r.nsSelectV2.e("tags-text")),style:ct({maxWidth:`${r.tagMaxWidth}px`})},"+ "+ze(r.modelValue.length-r.maxCollapseTags),7))]),_:1},8,["size"])):we("v-if",!0)],2)],64)):(A(!0),W(nt,{key:1},jt(r.states.cachedOptions,h=>(A(),W("div",{key:r.getValueKey(h),class:k(r.nsSelectV2.e("selected-item"))},[ee(s,{closable:!r.selectDisabled&&!h.disabled,size:r.collapseTagSize,type:"info","disable-transitions":"",onClose:p=>r.deleteTag(p,h)},{default:se(()=>[X("span",{class:k(r.nsSelectV2.e("tags-text")),style:ct({maxWidth:`${r.tagMaxWidth}px`})},ze(r.getLabel(h)),7)]),_:2},1032,["closable","size","onClose"])],2))),128)),X("div",{class:k([r.nsSelectV2.e("selected-item"),r.nsSelectV2.e("input-wrapper")]),style:ct(r.inputWrapperStyle)},[At(X("input",{id:r.id,ref:"inputRef",autocomplete:r.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":r.expanded,"aria-labelledby":r.label,class:k([r.nsSelectV2.is(r.selectSize),r.nsSelectV2.e("combobox-input")]),disabled:r.disabled,role:"combobox",readonly:!r.filterable,spellcheck:"false",type:"text",name:r.name,unselectable:r.expanded?"on":void 0,"onUpdate:modelValue":e[0]||(e[0]=(...h)=>r.onUpdateInputValue&&r.onUpdateInputValue(...h)),onFocus:e[1]||(e[1]=(...h)=>r.handleFocus&&r.handleFocus(...h)),onBlur:e[2]||(e[2]=(...h)=>r.handleBlur&&r.handleBlur(...h)),onInput:e[3]||(e[3]=(...h)=>r.onInput&&r.onInput(...h)),onCompositionstart:e[4]||(e[4]=(...h)=>r.handleCompositionStart&&r.handleCompositionStart(...h)),onCompositionupdate:e[5]||(e[5]=(...h)=>r.handleCompositionUpdate&&r.handleCompositionUpdate(...h)),onCompositionend:e[6]||(e[6]=(...h)=>r.handleCompositionEnd&&r.handleCompositionEnd(...h)),onKeydown:[e[7]||(e[7]=Qt(vt(h=>r.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),e[8]||(e[8]=Qt(vt(h=>r.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),e[9]||(e[9]=Qt(vt((...h)=>r.onKeyboardSelect&&r.onKeyboardSelect(...h),["stop","prevent"]),["enter"])),e[10]||(e[10]=Qt(vt((...h)=>r.handleEsc&&r.handleEsc(...h),["stop","prevent"]),["esc"])),e[11]||(e[11]=Qt(vt((...h)=>r.handleDel&&r.handleDel(...h),["stop"]),["delete"]))]},null,42,Dxe),[[u,r.states.displayInputValue]]),r.filterable?(A(),W("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:k(r.nsSelectV2.e("input-calculator")),textContent:ze(r.states.displayInputValue)},null,10,Bxe)):we("v-if",!0)],6)],2)):(A(),W(nt,{key:2},[X("div",{class:k([r.nsSelectV2.e("selected-item"),r.nsSelectV2.e("input-wrapper")])},[At(X("input",{id:r.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":r.label,"aria-expanded":r.expanded,autocapitalize:"off",autocomplete:r.autocomplete,class:k(r.nsSelectV2.e("combobox-input")),disabled:r.disabled,name:r.name,role:"combobox",readonly:!r.filterable,spellcheck:"false",type:"text",unselectable:r.expanded?"on":void 0,onCompositionstart:e[12]||(e[12]=(...h)=>r.handleCompositionStart&&r.handleCompositionStart(...h)),onCompositionupdate:e[13]||(e[13]=(...h)=>r.handleCompositionUpdate&&r.handleCompositionUpdate(...h)),onCompositionend:e[14]||(e[14]=(...h)=>r.handleCompositionEnd&&r.handleCompositionEnd(...h)),onFocus:e[15]||(e[15]=(...h)=>r.handleFocus&&r.handleFocus(...h)),onBlur:e[16]||(e[16]=(...h)=>r.handleBlur&&r.handleBlur(...h)),onInput:e[17]||(e[17]=(...h)=>r.onInput&&r.onInput(...h)),onKeydown:[e[18]||(e[18]=Qt(vt(h=>r.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),e[19]||(e[19]=Qt(vt(h=>r.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),e[20]||(e[20]=Qt(vt((...h)=>r.onKeyboardSelect&&r.onKeyboardSelect(...h),["stop","prevent"]),["enter"])),e[21]||(e[21]=Qt(vt((...h)=>r.handleEsc&&r.handleEsc(...h),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":e[22]||(e[22]=(...h)=>r.onUpdateInputValue&&r.onUpdateInputValue(...h))},null,42,Fxe),[[u,r.states.displayInputValue]])],2),r.filterable?(A(),W("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:k([r.nsSelectV2.e("selected-item"),r.nsSelectV2.e("input-calculator")]),textContent:ze(r.states.displayInputValue)},null,10,Uxe)):we("v-if",!0)],64)),r.shouldShowPlaceholder?(A(),W("span",{key:3,class:k([r.nsSelectV2.e("placeholder"),r.nsSelectV2.is("transparent",r.multiple?r.modelValue.length===0:!r.hasModelValue)])},ze(r.currentPlaceholder),3)):we("v-if",!0),X("span",{class:k(r.nsSelectV2.e("suffix"))},[r.iconComponent?At((A(),_e(l,{key:0,class:k([r.nsSelectV2.e("caret"),r.nsInput.e("icon"),r.iconReverse])},{default:se(()=>[(A(),_e(Ht(r.iconComponent)))]),_:1},8,["class"])),[[nr,!r.showClearBtn]]):we("v-if",!0),r.showClearBtn&&r.clearIcon?(A(),_e(l,{key:1,class:k([r.nsSelectV2.e("caret"),r.nsInput.e("icon")]),onClick:vt(r.handleClear,["prevent","stop"])},{default:se(()=>[(A(),_e(Ht(r.clearIcon)))]),_:1},8,["class","onClick"])):we("v-if",!0),r.validateState&&r.validateIcon?(A(),_e(l,{key:2,class:k([r.nsInput.e("icon"),r.nsInput.e("validateIcon")])},{default:se(()=>[(A(),_e(Ht(r.validateIcon)))]),_:1},8,["class"])):we("v-if",!0)],2)],2)]),content:se(()=>[ee(c,{ref:"menuRef",data:r.filteredOptions,width:r.popperSize,"hovering-index":r.states.hoveringIndex,"scrollbar-always-on":r.scrollbarAlwaysOn},{default:se(h=>[Oe(r.$slots,"default",Is(yy(h)))]),empty:se(()=>[Oe(r.$slots,"empty",{},()=>[X("p",{class:k(r.nsSelectV2.e("empty"))},ze(r.emptyText?r.emptyText:""),3)])]),_:3},8,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","effect","placement","transition","persistent","onBeforeShow"])],34)),[[d,r.handleClickOutside,r.popperRef]])}var Vb=Xe(Ixe,[["render",zxe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/select.vue"]]);Vb.install=r=>{r.component(Vb.name,Vb)};const Vxe=Vb,Gxe=Vxe,Hxe=Ye({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),jxe=Ye({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),$xe=ne({name:"ElSkeletonItem"}),Wxe=ne({...$xe,props:jxe,setup(r){const e=Pe("skeleton");return(t,i)=>(A(),W("div",{class:k([f(e).e("item"),f(e).e(t.variant)])},[t.variant==="image"?(A(),_e(f(qre),{key:0})):we("v-if",!0)],2))}});var Gb=Xe(Wxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton-item.vue"]]);const qxe=ne({name:"ElSkeleton"}),Xxe=ne({...qxe,props:Hxe,setup(r,{expose:e}){const t=r,i=Pe("skeleton"),o=tse(Yr(t,"loading"),t.throttle);return e({uiLoading:o}),(n,s)=>f(o)?(A(),W("div",$t({key:0,class:[f(i).b(),f(i).is("animated",n.animated)]},n.$attrs),[(A(!0),W(nt,null,jt(n.count,a=>(A(),W(nt,{key:a},[n.loading?Oe(n.$slots,"template",{key:a},()=>[ee(Gb,{class:k(f(i).is("first")),variant:"p"},null,8,["class"]),(A(!0),W(nt,null,jt(n.rows,l=>(A(),_e(Gb,{key:l,class:k([f(i).e("paragraph"),f(i).is("last",l===n.rows&&n.rows>1)]),variant:"p"},null,8,["class"]))),128))]):we("v-if",!0)],64))),128))],16)):Oe(n.$slots,"default",Is($t({key:1},n.$attrs)))}});var Kxe=Xe(Xxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton.vue"]]);const Yxe=Bt(Kxe,{SkeletonItem:Gb}),Jxe=ii(Gb),OU=Symbol("sliderContextKey"),Zxe=Ye({modelValue:{type:Te([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:bo,inputSize:bo,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Te(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Te(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:Eu,default:"top"},marks:{type:Te(Object)},validateEvent:{type:Boolean,default:!0}}),WT=r=>wt(r)||it(r)&&r.every(wt),Qxe={[Vt]:WT,[Yo]:WT,[Fr]:WT},e1e=(r,e,t)=>{const i=V();return Rt(async()=>{r.range?(Array.isArray(r.modelValue)?(e.firstValue=Math.max(r.min,r.modelValue[0]),e.secondValue=Math.min(r.max,r.modelValue[1])):(e.firstValue=r.min,e.secondValue=r.max),e.oldValue=[e.firstValue,e.secondValue]):(typeof r.modelValue!="number"||Number.isNaN(r.modelValue)?e.firstValue=r.min:e.firstValue=Math.min(r.max,Math.max(r.min,r.modelValue)),e.oldValue=e.firstValue),Hr(window,"resize",t),await lt(),t()}),{sliderWrapper:i}},t1e=r=>N(()=>r.marks?Object.keys(r.marks).map(Number.parseFloat).sort((e,t)=>e-t).filter(e=>e<=r.max&&e>=r.min).map(e=>({point:e,position:(e-r.min)*100/(r.max-r.min),mark:r.marks[e]})):[]),r1e=(r,e,t)=>{const{form:i,formItem:o}=Jo(),n=Rr(),s=V(),a=V(),l={firstButton:s,secondButton:a},c=N(()=>r.disabled||(i==null?void 0:i.disabled)||!1),u=N(()=>Math.min(e.firstValue,e.secondValue)),d=N(()=>Math.max(e.firstValue,e.secondValue)),h=N(()=>r.range?`${100*(d.value-u.value)/(r.max-r.min)}%`:`${100*(e.firstValue-r.min)/(r.max-r.min)}%`),p=N(()=>r.range?`${100*(u.value-r.min)/(r.max-r.min)}%`:"0%"),m=N(()=>r.vertical?{height:r.height}:{}),g=N(()=>r.vertical?{height:h.value,bottom:p.value}:{width:h.value,left:p.value}),v=()=>{n.value&&(e.sliderSize=n.value[`client${r.vertical?"Height":"Width"}`])},y=T=>{const E=r.min+T*(r.max-r.min)/100;if(!r.range)return s;let C;return Math.abs(u.value-E)<Math.abs(d.value-E)?C=e.firstValue<e.secondValue?"firstButton":"secondButton":C=e.firstValue>e.secondValue?"firstButton":"secondButton",l[C]},b=T=>{const E=y(T);return E.value.setPosition(T),E},x=T=>{e.firstValue=T,S(r.range?[u.value,d.value]:T)},_=T=>{e.secondValue=T,r.range&&S([u.value,d.value])},S=T=>{t(Vt,T),t(Yo,T)},w=async()=>{await lt(),t(Fr,r.range?[u.value,d.value]:r.modelValue)},M=T=>{var E,C,B,I,L,P;if(c.value||e.dragging)return;v();let U=0;if(r.vertical){const G=(B=(C=(E=T.touches)==null?void 0:E.item(0))==null?void 0:C.clientY)!=null?B:T.clientY;U=(n.value.getBoundingClientRect().bottom-G)/e.sliderSize*100}else{const G=(P=(L=(I=T.touches)==null?void 0:I.item(0))==null?void 0:L.clientX)!=null?P:T.clientX,R=n.value.getBoundingClientRect().left;U=(G-R)/e.sliderSize*100}if(!(U<0||U>100))return b(U)};return{elFormItem:o,slider:n,firstButton:s,secondButton:a,sliderDisabled:c,minValue:u,maxValue:d,runwayStyle:m,barStyle:g,resetSize:v,setPosition:b,emitChange:w,onSliderWrapperPrevent:T=>{var E,C;((E=l.firstButton.value)!=null&&E.dragging||(C=l.secondButton.value)!=null&&C.dragging)&&T.preventDefault()},onSliderClick:T=>{M(T)&&w()},onSliderDown:async T=>{const E=M(T);E&&(await lt(),E.value.onButtonDown(T))},setFirstValue:x,setSecondValue:_}},{left:i1e,down:o1e,right:n1e,up:s1e,home:a1e,end:l1e,pageUp:c1e,pageDown:u1e}=ft,d1e=(r,e,t)=>{const i=V(),o=V(!1),n=N(()=>e.value instanceof Function),s=N(()=>n.value&&e.value(r.modelValue)||r.modelValue),a=Xo(()=>{t.value&&(o.value=!0)},50),l=Xo(()=>{t.value&&(o.value=!1)},50);return{tooltip:i,tooltipVisible:o,formatValue:s,displayTooltip:a,hideTooltip:l}},h1e=(r,e,t)=>{const{disabled:i,min:o,max:n,step:s,showTooltip:a,precision:l,sliderSize:c,formatTooltip:u,emitChange:d,resetSize:h,updateDragging:p}=ot(OU),{tooltip:m,tooltipVisible:g,formatValue:v,displayTooltip:y,hideTooltip:b}=d1e(r,u,a),x=V(),_=N(()=>`${(r.modelValue-o.value)/(n.value-o.value)*100}%`),S=N(()=>r.vertical?{bottom:_.value}:{left:_.value}),w=()=>{e.hovering=!0,y()},M=()=>{e.hovering=!1,e.dragging||b()},T=j=>{i.value||(j.preventDefault(),F(j),window.addEventListener("mousemove",O),window.addEventListener("touchmove",O),window.addEventListener("mouseup",H),window.addEventListener("touchend",H),window.addEventListener("contextmenu",H),x.value.focus())},E=j=>{i.value||(e.newPosition=Number.parseFloat(_.value)+j/(n.value-o.value)*100,$(e.newPosition),d())},C=()=>{E(-s.value)},B=()=>{E(s.value)},I=()=>{E(-s.value*4)},L=()=>{E(s.value*4)},P=()=>{i.value||($(0),d())},U=()=>{i.value||($(100),d())},G=j=>{let J=!0;[i1e,o1e].includes(j.key)?C():[n1e,s1e].includes(j.key)?B():j.key===a1e?P():j.key===l1e?U():j.key===u1e?I():j.key===c1e?L():J=!1,J&&j.preventDefault()},R=j=>{let J,ce;return j.type.startsWith("touch")?(ce=j.touches[0].clientY,J=j.touches[0].clientX):(ce=j.clientY,J=j.clientX),{clientX:J,clientY:ce}},F=j=>{e.dragging=!0,e.isClick=!0;const{clientX:J,clientY:ce}=R(j);r.vertical?e.startY=ce:e.startX=J,e.startPosition=Number.parseFloat(_.value),e.newPosition=e.startPosition},O=j=>{if(e.dragging){e.isClick=!1,y(),h();let J;const{clientX:ce,clientY:ve}=R(j);r.vertical?(e.currentY=ve,J=(e.startY-e.currentY)/c.value*100):(e.currentX=ce,J=(e.currentX-e.startX)/c.value*100),e.newPosition=e.startPosition+J,$(e.newPosition)}},H=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||b(),e.isClick||$(e.newPosition),d()},0),window.removeEventListener("mousemove",O),window.removeEventListener("touchmove",O),window.removeEventListener("mouseup",H),window.removeEventListener("touchend",H),window.removeEventListener("contextmenu",H))},$=async j=>{if(j===null||Number.isNaN(+j))return;j<0?j=0:j>100&&(j=100);const J=100/((n.value-o.value)/s.value);let ce=Math.round(j/J)*J*(n.value-o.value)*.01+o.value;ce=Number.parseFloat(ce.toFixed(l.value)),ce!==r.modelValue&&t(Vt,ce),!e.dragging&&r.modelValue!==e.oldValue&&(e.oldValue=r.modelValue),await lt(),e.dragging&&y(),m.value.updatePopper()};return ke(()=>e.dragging,j=>{p(j)}),{disabled:i,button:x,tooltip:m,tooltipVisible:g,showTooltip:a,wrapperStyle:S,formatValue:v,handleMouseEnter:w,handleMouseLeave:M,onButtonDown:T,onKeyDown:G,setPosition:$}},p1e=(r,e,t,i)=>({stops:N(()=>{if(!r.showStops||r.min>r.max)return[];if(r.step===0)return[];const o=(r.max-r.min)/r.step,n=100*r.step/(r.max-r.min),s=Array.from({length:o-1}).map((a,l)=>(l+1)*n);return r.range?s.filter(a=>a<100*(t.value-r.min)/(r.max-r.min)||a>100*(i.value-r.min)/(r.max-r.min)):s.filter(a=>a>100*(e.firstValue-r.min)/(r.max-r.min))}),getStopStyle:o=>r.vertical?{bottom:`${o}%`}:{left:`${o}%`}}),f1e=(r,e,t,i,o,n)=>{const s=c=>{o(Vt,c),o(Yo,c)},a=()=>r.range?![t.value,i.value].every((c,u)=>c===e.oldValue[u]):r.modelValue!==e.oldValue,l=()=>{var c,u;r.min>r.max&&Ei("Slider","min should not be greater than max.");const d=r.modelValue;r.range&&Array.isArray(d)?d[1]<r.min?s([r.min,r.min]):d[0]>r.max?s([r.max,r.max]):d[0]<r.min?s([r.min,d[1]]):d[1]>r.max?s([d[0],r.max]):(e.firstValue=d[0],e.secondValue=d[1],a()&&(r.validateEvent&&((c=n==null?void 0:n.validate)==null||c.call(n,"change").catch(h=>{})),e.oldValue=d.slice())):!r.range&&typeof d=="number"&&!Number.isNaN(d)&&(d<r.min?s(r.min):d>r.max?s(r.max):(e.firstValue=d,a()&&(r.validateEvent&&((u=n==null?void 0:n.validate)==null||u.call(n,"change").catch(h=>{})),e.oldValue=d)))};l(),ke(()=>e.dragging,c=>{c||l()}),ke(()=>r.modelValue,(c,u)=>{e.dragging||Array.isArray(c)&&Array.isArray(u)&&c.every((d,h)=>d===u[h])&&e.firstValue===c[0]&&e.secondValue===c[1]||l()},{deep:!0}),ke(()=>[r.min,r.max],()=>{l()})},m1e=Ye({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:Eu,default:"top"}}),g1e={[Vt]:r=>wt(r)},v1e=["tabindex"],y1e=ne({name:"ElSliderButton"}),b1e=ne({...y1e,props:m1e,emits:g1e,setup(r,{expose:e,emit:t}){const i=r,o=Pe("slider"),n=ur({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:i.modelValue}),{disabled:s,button:a,tooltip:l,showTooltip:c,tooltipVisible:u,wrapperStyle:d,formatValue:h,handleMouseEnter:p,handleMouseLeave:m,onButtonDown:g,onKeyDown:v,setPosition:y}=h1e(i,n,t),{hovering:b,dragging:x}=qi(n);return e({onButtonDown:g,onKeyDown:v,setPosition:y,hovering:b,dragging:x}),(_,S)=>(A(),W("div",{ref_key:"button",ref:a,class:k([f(o).e("button-wrapper"),{hover:f(b),dragging:f(x)}]),style:ct(f(d)),tabindex:f(s)?-1:0,onMouseenter:S[0]||(S[0]=(...w)=>f(p)&&f(p)(...w)),onMouseleave:S[1]||(S[1]=(...w)=>f(m)&&f(m)(...w)),onMousedown:S[2]||(S[2]=(...w)=>f(g)&&f(g)(...w)),onTouchstart:S[3]||(S[3]=(...w)=>f(g)&&f(g)(...w)),onFocus:S[4]||(S[4]=(...w)=>f(p)&&f(p)(...w)),onBlur:S[5]||(S[5]=(...w)=>f(m)&&f(m)(...w)),onKeydown:S[6]||(S[6]=(...w)=>f(v)&&f(v)(...w))},[ee(f(Zo),{ref_key:"tooltip",ref:l,visible:f(u),placement:_.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":_.tooltipClass,disabled:!f(c),persistent:""},{content:se(()=>[X("span",null,ze(f(h)),1)]),default:se(()=>[X("div",{class:k([f(o).e("button"),{hover:f(b),dragging:f(x)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,v1e))}});var kU=Xe(b1e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const x1e=Ye({mark:{type:Te([String,Object]),default:void 0}});var _1e=ne({name:"ElSliderMarker",props:x1e,setup(r){const e=Pe("slider"),t=N(()=>Tt(r.mark)?r.mark:r.mark.label),i=N(()=>Tt(r.mark)?void 0:r.mark.style);return()=>pt("div",{class:e.e("marks-text"),style:i.value},t.value)}});const w1e=["id","role","aria-label","aria-labelledby"],S1e={key:1},M1e=ne({name:"ElSlider"}),T1e=ne({...M1e,props:Zxe,emits:Qxe,setup(r,{expose:e,emit:t}){const i=r,o=Pe("slider"),{t:n}=ir(),s=ur({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:a,slider:l,firstButton:c,secondButton:u,sliderDisabled:d,minValue:h,maxValue:p,runwayStyle:m,barStyle:g,resetSize:v,emitChange:y,onSliderWrapperPrevent:b,onSliderClick:x,onSliderDown:_,setFirstValue:S,setSecondValue:w}=r1e(i,s,t),{stops:M,getStopStyle:T}=p1e(i,s,h,p),{inputId:E,isLabeledByFormItem:C}=lc(i,{formItemContext:a}),B=Ci(),I=N(()=>i.inputSize||B.value),L=N(()=>i.label||n("el.slider.defaultLabel",{min:i.min,max:i.max})),P=N(()=>i.range?i.rangeStartLabel||n("el.slider.defaultRangeStartLabel"):L.value),U=N(()=>i.formatValueText?i.formatValueText(j.value):`${j.value}`),G=N(()=>i.rangeEndLabel||n("el.slider.defaultRangeEndLabel")),R=N(()=>i.formatValueText?i.formatValueText(J.value):`${J.value}`),F=N(()=>[o.b(),o.m(B.value),o.is("vertical",i.vertical),{[o.m("with-input")]:i.showInput}]),O=t1e(i);f1e(i,s,h,p,t,a);const H=N(()=>{const xe=[i.min,i.max,i.step].map(te=>{const Z=`${te}`.split(".")[1];return Z?Z.length:0});return Math.max.apply(null,xe)}),{sliderWrapper:$}=e1e(i,s,v),{firstValue:j,secondValue:J,sliderSize:ce}=qi(s),ve=xe=>{s.dragging=xe};return Wt(OU,{...qi(i),sliderSize:ce,disabled:d,precision:H,emitChange:y,resetSize:v,updateDragging:ve}),e({onSliderClick:x}),(xe,te)=>{var Z,de;return A(),W("div",{id:xe.range?f(E):void 0,ref_key:"sliderWrapper",ref:$,class:k(f(F)),role:xe.range?"group":void 0,"aria-label":xe.range&&!f(C)?f(L):void 0,"aria-labelledby":xe.range&&f(C)?(Z=f(a))==null?void 0:Z.labelId:void 0,onTouchstart:te[2]||(te[2]=(...Ce)=>f(b)&&f(b)(...Ce)),onTouchmove:te[3]||(te[3]=(...Ce)=>f(b)&&f(b)(...Ce))},[X("div",{ref_key:"slider",ref:l,class:k([f(o).e("runway"),{"show-input":xe.showInput&&!xe.range},f(o).is("disabled",f(d))]),style:ct(f(m)),onMousedown:te[0]||(te[0]=(...Ce)=>f(_)&&f(_)(...Ce)),onTouchstart:te[1]||(te[1]=(...Ce)=>f(_)&&f(_)(...Ce))},[X("div",{class:k(f(o).e("bar")),style:ct(f(g))},null,6),ee(kU,{id:xe.range?void 0:f(E),ref_key:"firstButton",ref:c,"model-value":f(j),vertical:xe.vertical,"tooltip-class":xe.tooltipClass,placement:xe.placement,role:"slider","aria-label":xe.range||!f(C)?f(P):void 0,"aria-labelledby":!xe.range&&f(C)?(de=f(a))==null?void 0:de.labelId:void 0,"aria-valuemin":xe.min,"aria-valuemax":xe.range?f(J):xe.max,"aria-valuenow":f(j),"aria-valuetext":f(U),"aria-orientation":xe.vertical?"vertical":"horizontal","aria-disabled":f(d),"onUpdate:modelValue":f(S)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),xe.range?(A(),_e(kU,{key:0,ref_key:"secondButton",ref:u,"model-value":f(J),vertical:xe.vertical,"tooltip-class":xe.tooltipClass,placement:xe.placement,role:"slider","aria-label":f(G),"aria-valuemin":f(j),"aria-valuemax":xe.max,"aria-valuenow":f(J),"aria-valuetext":f(R),"aria-orientation":xe.vertical?"vertical":"horizontal","aria-disabled":f(d),"onUpdate:modelValue":f(w)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):we("v-if",!0),xe.showStops?(A(),W("div",S1e,[(A(!0),W(nt,null,jt(f(M),(Ce,ue)=>(A(),W("div",{key:ue,class:k(f(o).e("stop")),style:ct(f(T)(Ce))},null,6))),128))])):we("v-if",!0),f(O).length>0?(A(),W(nt,{key:2},[X("div",null,[(A(!0),W(nt,null,jt(f(O),(Ce,ue)=>(A(),W("div",{key:ue,style:ct(f(T)(Ce.position)),class:k([f(o).e("stop"),f(o).e("marks-stop")])},null,6))),128))]),X("div",{class:k(f(o).e("marks"))},[(A(!0),W(nt,null,jt(f(O),(Ce,ue)=>(A(),_e(f(_1e),{key:ue,mark:Ce.mark,style:ct(f(T)(Ce.position))},null,8,["mark","style"]))),128))],2)],64)):we("v-if",!0)],38),xe.showInput&&!xe.range?(A(),_e(f(K4),{key:0,ref:"input","model-value":f(j),class:k(f(o).e("input")),step:xe.step,disabled:f(d),controls:xe.showInputControls,min:xe.min,max:xe.max,debounce:xe.debounce,size:f(I),"onUpdate:modelValue":f(S),onChange:f(y)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):we("v-if",!0)],42,w1e)}}});var E1e=Xe(T1e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const C1e=Bt(E1e),N1e=Ye({prefixCls:{type:String}}),IU=ne({name:"ElSpaceItem",props:N1e,setup(r,{slots:e}){const t=Pe("space"),i=N(()=>`${r.prefixCls||t.b()}__item`);return()=>pt("div",{class:i.value},Oe(e,"default"))}}),PU={small:8,default:12,large:16};function A1e(r){const e=Pe("space"),t=N(()=>[e.b(),e.m(r.direction),r.class]),i=V(0),o=V(0),n=N(()=>{const a=r.wrap||r.fill?{flexWrap:"wrap",marginBottom:`-${o.value}px`}:{},l={alignItems:r.alignment};return[a,l,r.style]}),s=N(()=>{const a={paddingBottom:`${o.value}px`,marginRight:`${i.value}px`},l=r.fill?{flexGrow:1,minWidth:`${r.fillRatio}%`}:{};return[a,l]});return Vn(()=>{const{size:a="small",wrap:l,direction:c,fill:u}=r;if(it(a)){const[d=0,h=0]=a;i.value=d,o.value=h}else{let d;wt(a)?d=a:d=PU[a||"small"]||PU.small,(l||u)&&c==="horizontal"?i.value=o.value=d:c==="horizontal"?(i.value=d,o.value=0):(o.value=d,i.value=0)}}),{classes:t,containerStyle:n,itemStyle:s}}const R1e=Ye({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Te([String,Object,Array]),default:""},style:{type:Te([String,Array,Object]),default:""},alignment:{type:Te(String),default:"center"},prefixCls:{type:String},spacer:{type:Te([Object,String,Number,Array]),default:null,validator:r=>$r(r)||wt(r)||Tt(r)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:ma,validator:r=>wt(r)||it(r)&&r.length===2&&r.every(wt)}}),L1e=ne({name:"ElSpace",props:R1e,setup(r,{slots:e}){const{classes:t,containerStyle:i,itemStyle:o}=A1e(r);function n(s,a="",l=[]){const{prefixCls:c}=r;return s.forEach((u,d)=>{pM(u)?it(u.children)&&u.children.forEach((h,p)=>{pM(h)&&it(h.children)?n(h.children,`${a+p}-`,l):l.push(ee(IU,{style:o.value,prefixCls:c,key:`nested-${a+p}`},{default:()=>[h]},ms.PROPS|ms.STYLE,["style","prefixCls"]))}):zoe(u)&&l.push(ee(IU,{style:o.value,prefixCls:c,key:`LoopKey${a+d}`},{default:()=>[u]},ms.PROPS|ms.STYLE,["style","prefixCls"]))}),l}return()=>{var s;const{spacer:a,direction:l}=r,c=Oe(e,"default",{key:0},()=>[]);if(((s=c.children)!=null?s:[]).length===0)return null;if(it(c.children)){let u=n(c.children);if(a){const d=u.length-1;u=u.reduce((h,p,m)=>{const g=[...h,p];return m!==d&&g.push(ee("span",{style:[o.value,l==="vertical"?"width: 100%":null],key:m},[$r(a)?a:rr(a,ms.TEXT)],ms.STYLE)),g},[])}return ee("div",{class:t.value,style:i.value},u,ms.STYLE|ms.CLASS)}return c.children}}}),O1e=Bt(L1e),k1e=Ye({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:Te([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:Te([String,Object,Array])}}),I1e=ne({name:"ElStatistic"}),P1e=ne({...I1e,props:k1e,setup(r,{expose:e}){const t=r,i=Pe("statistic"),o=N(()=>{const{value:n,formatter:s,precision:a,decimalSeparator:l,groupSeparator:c}=t;if(St(s))return s(n);if(!wt(n))return n;let[u,d=""]=String(n).split(".");return d=d.padEnd(a,"0").slice(0,a>0?a:0),u=u.replace(/\B(?=(\d{3})+(?!\d))/g,c),[u,d].join(d?l:"")});return e({displayValue:o}),(n,s)=>(A(),W("div",{class:k(f(i).b())},[n.$slots.title||n.title?(A(),W("div",{key:0,class:k(f(i).e("head"))},[Oe(n.$slots,"title",{},()=>[rr(ze(n.title),1)])],2)):we("v-if",!0),X("div",{class:k(f(i).e("content"))},[n.$slots.prefix||n.prefix?(A(),W("div",{key:0,class:k(f(i).e("prefix"))},[Oe(n.$slots,"prefix",{},()=>[X("span",null,ze(n.prefix),1)])],2)):we("v-if",!0),X("span",{class:k(f(i).e("number")),style:ct(n.valueStyle)},ze(f(o)),7),n.$slots.suffix||n.suffix?(A(),W("div",{key:1,class:k(f(i).e("suffix"))},[Oe(n.$slots,"suffix",{},()=>[X("span",null,ze(n.suffix),1)])],2)):we("v-if",!0)],2)],2))}});var D1e=Xe(P1e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/statistic/src/statistic.vue"]]);const DU=Bt(D1e),B1e=Ye({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:Te([Number,Object]),default:0},valueStyle:{type:Te([String,Object,Array])}}),F1e={finish:()=>!0,[Fr]:r=>wt(r)},U1e=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],BU=r=>wt(r)?new Date(r).getTime():r.valueOf(),FU=(r,e)=>{let t=r;const i=/\[([^\]]*)]/g;return U1e.reduce((o,[n,s])=>{const a=new RegExp(`${n}+(?![^\\[\\]]*\\])`,"g");if(a.test(o)){const l=Math.floor(t/s);return t-=l*s,o.replace(a,c=>String(l).padStart(c.length,"0"))}return o},e).replace(i,"$1")},z1e=ne({name:"ElCountdown"}),V1e=ne({...z1e,props:B1e,emits:F1e,setup(r,{expose:e,emit:t}){const i=r;let o;const n=V(BU(i.value)-Date.now()),s=N(()=>FU(n.value,i.format)),a=u=>FU(u,i.format),l=()=>{o&&(Wy(o),o=void 0)},c=()=>{const u=BU(i.value),d=()=>{let h=u-Date.now();t("change",h),h<=0?(h=0,l(),t("finish")):o=Dh(d),n.value=h};o=Dh(d)};return ke(()=>[i.value,i.format],()=>{l(),c()},{immediate:!0}),Vr(()=>{l()}),e({displayValue:s}),(u,d)=>(A(),_e(f(DU),{value:n.value,title:u.title,prefix:u.prefix,suffix:u.suffix,"value-style":u.valueStyle,formatter:a},Ya({_:2},[jt(u.$slots,(h,p)=>({name:p,fn:se(()=>[Oe(u.$slots,p)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var G1e=Xe(V1e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/countdown/src/countdown.vue"]]);const H1e=Bt(G1e),j1e=Ye({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),$1e={[Fr]:(r,e)=>[r,e].every(wt)},W1e=ne({name:"ElSteps"}),q1e=ne({...W1e,props:j1e,emits:$1e,setup(r,{emit:e}){const t=r,i=Pe("steps"),{children:o,addChild:n,removeChild:s}=LM(It(),"ElStep");return ke(o,()=>{o.value.forEach((a,l)=>{a.setIndex(l)})}),Wt("ElSteps",{props:t,steps:o,addStep:n,removeStep:s}),ke(()=>t.active,(a,l)=>{e(Fr,a,l)}),(a,l)=>(A(),W("div",{class:k([f(i).b(),f(i).m(a.simple?"simple":a.direction)])},[Oe(a.$slots,"default")],2))}});var X1e=Xe(q1e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/steps.vue"]]);const K1e=Ye({title:{type:String,default:""},icon:{type:Lr},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),Y1e=ne({name:"ElStep"}),J1e=ne({...Y1e,props:K1e,setup(r){const e=r,t=Pe("step"),i=V(-1),o=V({}),n=V(""),s=ot("ElSteps"),a=It();Rt(()=>{ke([()=>s.props.active,()=>s.props.processStatus,()=>s.props.finishStatus],([w])=>{_(w)},{immediate:!0})}),Vr(()=>{s.removeStep(S.uid)});const l=N(()=>e.status||n.value),c=N(()=>{const w=s.steps.value[i.value-1];return w?w.currentStatus:"wait"}),u=N(()=>s.props.alignCenter),d=N(()=>s.props.direction==="vertical"),h=N(()=>s.props.simple),p=N(()=>s.steps.value.length),m=N(()=>{var w;return((w=s.steps.value[p.value-1])==null?void 0:w.uid)===(a==null?void 0:a.uid)}),g=N(()=>h.value?"":s.props.space),v=N(()=>[t.b(),t.is(h.value?"simple":s.props.direction),t.is("flex",m.value&&!g.value&&!u.value),t.is("center",u.value&&!d.value&&!h.value)]),y=N(()=>{const w={flexBasis:wt(g.value)?`${g.value}px`:g.value?g.value:`${100/(p.value-(u.value?0:1))}%`};return d.value||m.value&&(w.maxWidth=`${100/p.value}%`),w}),b=w=>{i.value=w},x=w=>{const M=w==="wait",T={transitionDelay:`${M?"-":""}${150*i.value}ms`},E=w===s.props.processStatus||M?0:100;T.borderWidth=E&&!h.value?"1px":0,T[s.props.direction==="vertical"?"height":"width"]=`${E}%`,o.value=T},_=w=>{w>i.value?n.value=s.props.finishStatus:w===i.value&&c.value!=="error"?n.value=s.props.processStatus:n.value="wait";const M=s.steps.value[i.value-1];M&&M.calcProgress(n.value)},S=ur({uid:a.uid,currentStatus:l,setIndex:b,calcProgress:x});return s.addStep(S),(w,M)=>(A(),W("div",{style:ct(f(y)),class:k(f(v))},[we(" icon & line "),X("div",{class:k([f(t).e("head"),f(t).is(f(l))])},[f(h)?we("v-if",!0):(A(),W("div",{key:0,class:k(f(t).e("line"))},[X("i",{class:k(f(t).e("line-inner")),style:ct(o.value)},null,6)],2)),X("div",{class:k([f(t).e("icon"),f(t).is(w.icon||w.$slots.icon?"icon":"text")])},[Oe(w.$slots,"icon",{},()=>[w.icon?(A(),_e(f(st),{key:0,class:k(f(t).e("icon-inner"))},{default:se(()=>[(A(),_e(Ht(w.icon)))]),_:1},8,["class"])):f(l)==="success"?(A(),_e(f(st),{key:1,class:k([f(t).e("icon-inner"),f(t).is("status")])},{default:se(()=>[ee(f(km))]),_:1},8,["class"])):f(l)==="error"?(A(),_e(f(st),{key:2,class:k([f(t).e("icon-inner"),f(t).is("status")])},{default:se(()=>[ee(f(Vs))]),_:1},8,["class"])):f(h)?we("v-if",!0):(A(),W("div",{key:3,class:k(f(t).e("icon-inner"))},ze(i.value+1),3))])],2)],2),we(" title & description "),X("div",{class:k(f(t).e("main"))},[X("div",{class:k([f(t).e("title"),f(t).is(f(l))])},[Oe(w.$slots,"title",{},()=>[rr(ze(w.title),1)])],2),f(h)?(A(),W("div",{key:0,class:k(f(t).e("arrow"))},null,2)):(A(),W("div",{key:1,class:k([f(t).e("description"),f(t).is(f(l))])},[Oe(w.$slots,"description",{},()=>[rr(ze(w.description),1)])],2))],2)],6))}});var UU=Xe(J1e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/item.vue"]]);const Z1e=Bt(X1e,{Step:UU}),Q1e=ii(UU),e_e=Ye({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:jy},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:Lr},activeActionIcon:{type:Lr},activeIcon:{type:Lr},inactiveIcon:{type:Lr},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Te(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1}}),t_e={[Vt]:r=>Ti(r)||Tt(r)||wt(r),[Fr]:r=>Ti(r)||Tt(r)||wt(r),[Yo]:r=>Ti(r)||Tt(r)||wt(r)},r_e=["onClick"],i_e=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],o_e=["aria-hidden"],n_e=["aria-hidden"],s_e=["aria-hidden"],qT="ElSwitch",a_e=ne({name:qT}),l_e=ne({...a_e,props:e_e,emits:t_e,setup(r,{expose:e,emit:t}){const i=r,o=It(),{formItem:n}=Jo(),s=Ci(),a=Pe("switch");(M=>{M.forEach(T=>{ga({from:T[0],replacement:T[1],scope:qT,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},N(()=>{var E;return!!((E=o.vnode.props)!=null&&E[T[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:l}=lc(i,{formItemContext:n}),c=bn(N(()=>i.loading)),u=V(i.modelValue!==!1),d=V(),h=V(),p=N(()=>[a.b(),a.m(s.value),a.is("disabled",c.value),a.is("checked",b.value)]),m=N(()=>[a.e("label"),a.em("label","left"),a.is("active",!b.value)]),g=N(()=>[a.e("label"),a.em("label","right"),a.is("active",b.value)]),v=N(()=>({width:hi(i.width)}));ke(()=>i.modelValue,()=>{u.value=!0}),ke(()=>i.value,()=>{u.value=!1});const y=N(()=>u.value?i.modelValue:i.value),b=N(()=>y.value===i.activeValue);[i.activeValue,i.inactiveValue].includes(y.value)||(t(Vt,i.inactiveValue),t(Fr,i.inactiveValue),t(Yo,i.inactiveValue)),ke(b,M=>{var T;d.value.checked=M,i.validateEvent&&((T=n==null?void 0:n.validate)==null||T.call(n,"change").catch(E=>{}))});const x=()=>{const M=b.value?i.inactiveValue:i.activeValue;t(Vt,M),t(Fr,M),t(Yo,M),lt(()=>{d.value.checked=b.value})},_=()=>{if(c.value)return;const{beforeChange:M}=i;if(!M){x();return}const T=M();[$f(T),Ti(T)].includes(!0)||Ei(qT,"beforeChange must return type `Promise<boolean>` or `boolean`"),$f(T)?T.then(E=>{E&&x()}).catch(E=>{}):T&&x()},S=N(()=>a.cssVarBlock({...i.activeColor?{"on-color":i.activeColor}:null,...i.inactiveColor?{"off-color":i.inactiveColor}:null,...i.borderColor?{"border-color":i.borderColor}:null})),w=()=>{var M,T;(T=(M=d.value)==null?void 0:M.focus)==null||T.call(M)};return Rt(()=>{d.value.checked=b.value}),e({focus:w,checked:b}),(M,T)=>(A(),W("div",{class:k(f(p)),style:ct(f(S)),onClick:vt(_,["prevent"])},[X("input",{id:f(l),ref_key:"input",ref:d,class:k(f(a).e("input")),type:"checkbox",role:"switch","aria-checked":f(b),"aria-disabled":f(c),name:M.name,"true-value":M.activeValue,"false-value":M.inactiveValue,disabled:f(c),tabindex:M.tabindex,onChange:x,onKeydown:Qt(_,["enter"])},null,42,i_e),!M.inlinePrompt&&(M.inactiveIcon||M.inactiveText)?(A(),W("span",{key:0,class:k(f(m))},[M.inactiveIcon?(A(),_e(f(st),{key:0},{default:se(()=>[(A(),_e(Ht(M.inactiveIcon)))]),_:1})):we("v-if",!0),!M.inactiveIcon&&M.inactiveText?(A(),W("span",{key:1,"aria-hidden":f(b)},ze(M.inactiveText),9,o_e)):we("v-if",!0)],2)):we("v-if",!0),X("span",{ref_key:"core",ref:h,class:k(f(a).e("core")),style:ct(f(v))},[M.inlinePrompt?(A(),W("div",{key:0,class:k(f(a).e("inner"))},[M.activeIcon||M.inactiveIcon?(A(),_e(f(st),{key:0,class:k(f(a).is("icon"))},{default:se(()=>[(A(),_e(Ht(f(b)?M.activeIcon:M.inactiveIcon)))]),_:1},8,["class"])):M.activeText||M.inactiveText?(A(),W("span",{key:1,class:k(f(a).is("text")),"aria-hidden":!f(b)},ze(f(b)?M.activeText:M.inactiveText),11,n_e)):we("v-if",!0)],2)):we("v-if",!0),X("div",{class:k(f(a).e("action"))},[M.loading?(A(),_e(f(st),{key:0,class:k(f(a).is("loading"))},{default:se(()=>[ee(f(rc))]),_:1},8,["class"])):M.activeActionIcon&&f(b)?(A(),_e(f(st),{key:1},{default:se(()=>[(A(),_e(Ht(M.activeActionIcon)))]),_:1})):M.inactiveActionIcon&&!f(b)?(A(),_e(f(st),{key:2},{default:se(()=>[(A(),_e(Ht(M.inactiveActionIcon)))]),_:1})):we("v-if",!0)],2)],6),!M.inlinePrompt&&(M.activeIcon||M.activeText)?(A(),W("span",{key:1,class:k(f(g))},[M.activeIcon?(A(),_e(f(st),{key:0},{default:se(()=>[(A(),_e(Ht(M.activeIcon)))]),_:1})):we("v-if",!0),!M.activeIcon&&M.activeText?(A(),W("span",{key:1,"aria-hidden":!f(b)},ze(M.activeText),9,s_e)):we("v-if",!0)],2)):we("v-if",!0)],14,r_e))}});var c_e=Xe(l_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const u_e=Bt(c_e);var d_e=/["'&<>]/,h_e=p_e;function p_e(r){var e=""+r,t=d_e.exec(e);if(!t)return e;var i,o="",n=0,s=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==n&&(o+=e.substring(s,n)),s=n+1,o+=i}return s!==n?o+e.substring(s,n):o}const f_e=_a(h_e),XT=function(r){var e;return(e=r.target)==null?void 0:e.closest("td")},m_e=function(r,e,t,i,o){if(!e&&!i&&(!o||Array.isArray(o)&&!o.length))return r;typeof t=="string"?t=t==="descending"?-1:1:t=t&&t<0?-1:1;const n=i?null:function(a,l){return o?(Array.isArray(o)||(o=[o]),o.map(c=>typeof c=="string"?Wr(a,c):c(a,l,r))):(e!=="$key"&&zt(a)&&"$value"in a&&(a=a.$value),[zt(a)?Wr(a,e):a])},s=function(a,l){if(i)return i(a.value,l.value);for(let c=0,u=a.key.length;c<u;c++){if(a.key[c]<l.key[c])return-1;if(a.key[c]>l.key[c])return 1}return 0};return r.map((a,l)=>({value:a,index:l,key:n?n(a,l):null})).sort((a,l)=>{let c=s(a,l);return c||(c=a.index-l.index),c*+t}).map(a=>a.value)},zU=function(r,e){let t=null;return r.columns.forEach(i=>{i.id===e&&(t=i)}),t},g_e=function(r,e){let t=null;for(let i=0;i<r.columns.length;i++){const o=r.columns[i];if(o.columnKey===e){t=o;break}}return t||Ei("ElTable",`No column matching with column-key: ${e}`),t},VU=function(r,e,t){const i=(e.className||"").match(new RegExp(`${t}-table_[^\\s]+`,"gm"));return i?zU(r,i[0]):null},wo=(r,e)=>{if(!r)throw new Error("Row is required when get row identity");if(typeof e=="string"){if(!e.includes("."))return`${r[e]}`;const t=e.split(".");let i=r;for(const o of t)i=i[o];return`${i}`}else if(typeof e=="function")return e.call(null,r)},Bu=function(r,e){const t={};return(r||[]).forEach((i,o)=>{t[wo(i,e)]={row:i,index:o}}),t};function v_e(r,e){const t={};let i;for(i in r)t[i]=r[i];for(i in e)if(Yt(e,i)){const o=e[i];typeof o<"u"&&(t[i]=o)}return t}function KT(r){return r===""||r!==void 0&&(r=Number.parseInt(r,10),Number.isNaN(r)&&(r="")),r}function GU(r){return r===""||r!==void 0&&(r=KT(r),Number.isNaN(r)&&(r=80)),r}function y_e(r){return typeof r=="number"?r:typeof r=="string"?/^\d+(?:px)?$/.test(r)?Number.parseInt(r,10):r:null}function b_e(...r){return r.length===0?e=>e:r.length===1?r[0]:r.reduce((e,t)=>(...i)=>e(t(...i)))}function sg(r,e,t){let i=!1;const o=r.indexOf(e),n=o!==-1,s=a=>{a==="add"?r.push(e):r.splice(o,1),i=!0,it(e.children)&&e.children.forEach(l=>{sg(r,l,t??!n)})};return Ti(t)?t&&!n?s("add"):!t&&n&&s("remove"):s(n?"remove":"add"),i}function x_e(r,e,t="children",i="hasChildren"){const o=s=>!(Array.isArray(s)&&s.length);function n(s,a,l){e(s,a,l),a.forEach(c=>{if(c[i]){e(c,null,l+1);return}const u=c[t];o(u)||n(c,u,l+1)})}r.forEach(s=>{if(s[i]){e(s,null,0);return}const a=s[t];o(a)||n(s,a,0)})}let Sa;function __e(r,e,t,i,o){o=JP({enterable:!0,showArrow:!0},o);const n=r==null?void 0:r.dataset.prefix,s=r==null?void 0:r.querySelector(`.${n}-scrollbar__wrap`);function a(){const v=o.effect==="light",y=document.createElement("div");return y.className=[`${n}-popper`,v?"is-light":"is-dark",o.popperClass||""].join(" "),t=f_e(t),y.innerHTML=t,y.style.zIndex=String(i()),r==null||r.appendChild(y),y}function l(){const v=document.createElement("div");return v.className=`${n}-popper__arrow`,v}function c(){u&&u.update()}Sa==null||Sa(),Sa=()=>{try{u&&u.destroy(),p&&(r==null||r.removeChild(p)),e.removeEventListener("mouseenter",d),e.removeEventListener("mouseleave",h),s==null||s.removeEventListener("scroll",Sa),Sa=void 0}catch{}};let u=null,d=c,h=Sa;o.enterable&&({onOpen:d,onClose:h}=qD({showAfter:o.showAfter,hideAfter:o.hideAfter,open:c,close:Sa}));const p=a();p.onmouseenter=d,p.onmouseleave=h;const m=[];if(o.offset&&m.push({name:"offset",options:{offset:[0,o.offset]}}),o.showArrow){const v=p.appendChild(l());m.push({name:"arrow",options:{element:v,padding:10}})}const g=o.popperOptions||{};return u=zD(e,p,{placement:o.placement||"top",strategy:"fixed",...g,modifiers:g.modifiers?m.concat(g.modifiers):m}),e.addEventListener("mouseenter",d),e.addEventListener("mouseleave",h),s==null||s.addEventListener("scroll",Sa),u}function HU(r){return r.children?AQ(r.children,HU):[r]}function jU(r,e){return r+e.colSpan}const $U=(r,e,t,i)=>{let o=0,n=r;const s=t.states.columns.value;if(i){const l=HU(i[r]);o=s.slice(0,s.indexOf(l[0])).reduce(jU,0),n=o+l.reduce(jU,0)-1}else o=r;let a;switch(e){case"left":n<t.states.fixedLeafColumnsLength.value&&(a="left");break;case"right":o>=s.length-t.states.rightFixedLeafColumnsLength.value&&(a="right");break;default:n<t.states.fixedLeafColumnsLength.value?a="left":o>=s.length-t.states.rightFixedLeafColumnsLength.value&&(a="right")}return a?{direction:a,start:o,after:n}:{}},YT=(r,e,t,i,o,n=0)=>{const s=[],{direction:a,start:l,after:c}=$U(e,t,i,o);if(a){const u=a==="left";s.push(`${r}-fixed-column--${a}`),u&&c+n===i.states.fixedLeafColumnsLength.value-1?s.push("is-last-column"):!u&&l-n===i.states.columns.value.length-i.states.rightFixedLeafColumnsLength.value&&s.push("is-first-column")}return s};function WU(r,e){return r+(e.realWidth===null||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const JT=(r,e,t,i)=>{const{direction:o,start:n=0,after:s=0}=$U(r,e,t,i);if(!o)return;const a={},l=o==="left",c=t.states.columns.value;return l?a.left=c.slice(0,n).reduce(WU,0):a.right=c.slice(s+1).reverse().reduce(WU,0),a},np=(r,e)=>{r&&(Number.isNaN(r[e])||(r[e]=`${r[e]}px`))};function w_e(r){const e=It(),t=V(!1),i=V([]);return{updateExpandRows:()=>{const o=r.data.value||[],n=r.rowKey.value;if(t.value)i.value=o.slice();else if(n){const s=Bu(i.value,n);i.value=o.reduce((a,l)=>{const c=wo(l,n);return s[c]&&a.push(l),a},[])}else i.value=[]},toggleRowExpansion:(o,n)=>{sg(i.value,o,n)&&e.emit("expand-change",o,i.value.slice())},setExpandRowKeys:o=>{e.store.assertRowKey();const n=r.data.value||[],s=r.rowKey.value,a=Bu(n,s);i.value=o.reduce((l,c)=>{const u=a[c];return u&&l.push(u.row),l},[])},isRowExpanded:o=>{const n=r.rowKey.value;return n?!!Bu(i.value,n)[wo(o,n)]:i.value.includes(o)},states:{expandRows:i,defaultExpandAll:t}}}function S_e(r){const e=It(),t=V(null),i=V(null),o=a=>{e.store.assertRowKey(),t.value=a,s(a)},n=()=>{t.value=null},s=a=>{const{data:l,rowKey:c}=r;let u=null;c.value&&(u=(f(l)||[]).find(d=>wo(d,c.value)===a)),i.value=u,e.emit("current-change",i.value,null)};return{setCurrentRowKey:o,restoreCurrentRowKey:n,setCurrentRowByKey:s,updateCurrentRow:a=>{const l=i.value;if(a&&a!==l){i.value=a,e.emit("current-change",i.value,l);return}!a&&l&&(i.value=null,e.emit("current-change",null,l))},updateCurrentRowData:()=>{const a=r.rowKey.value,l=r.data.value||[],c=i.value;if(!l.includes(c)&&c){if(a){const u=wo(c,a);s(u)}else i.value=null;i.value===null&&e.emit("current-change",null,c)}else t.value&&(s(t.value),n())},states:{_currentRowKey:t,currentRow:i}}}function M_e(r){const e=V([]),t=V({}),i=V(16),o=V(!1),n=V({}),s=V("hasChildren"),a=V("children"),l=It(),c=N(()=>{if(!r.rowKey.value)return{};const y=r.data.value||[];return d(y)}),u=N(()=>{const y=r.rowKey.value,b=Object.keys(n.value),x={};return b.length&&b.forEach(_=>{if(n.value[_].length){const S={children:[]};n.value[_].forEach(w=>{const M=wo(w,y);S.children.push(M),w[s.value]&&!x[M]&&(x[M]={children:[]})}),x[_]=S}}),x}),d=y=>{const b=r.rowKey.value,x={};return x_e(y,(_,S,w)=>{const M=wo(_,b);Array.isArray(S)?x[M]={children:S.map(T=>wo(T,b)),level:w}:o.value&&(x[M]={children:[],lazy:!0,level:w})},a.value,s.value),x},h=(y=!1,b=(x=>(x=l.store)==null?void 0:x.states.defaultExpandAll.value)())=>{var x;const _=c.value,S=u.value,w=Object.keys(_),M={};if(w.length){const T=f(t),E=[],C=(I,L)=>{if(y)return e.value?b||e.value.includes(L):!!(b||I!=null&&I.expanded);{const P=b||e.value&&e.value.includes(L);return!!(I!=null&&I.expanded||P)}};w.forEach(I=>{const L=T[I],P={..._[I]};if(P.expanded=C(L,I),P.lazy){const{loaded:U=!1,loading:G=!1}=L||{};P.loaded=!!U,P.loading=!!G,E.push(I)}M[I]=P});const B=Object.keys(S);o.value&&B.length&&E.length&&B.forEach(I=>{const L=T[I],P=S[I].children;if(E.includes(I)){if(M[I].children.length!==0)throw new Error("[ElTable]children must be an empty array.");M[I].children=P}else{const{loaded:U=!1,loading:G=!1}=L||{};M[I]={lazy:!0,loaded:!!U,loading:!!G,expanded:C(L,I),children:P,level:""}}})}t.value=M,(x=l.store)==null||x.updateTableScrollY()};ke(()=>e.value,()=>{h(!0)}),ke(()=>c.value,()=>{h()}),ke(()=>u.value,()=>{h()});const p=y=>{e.value=y,h()},m=(y,b)=>{l.store.assertRowKey();const x=r.rowKey.value,_=wo(y,x),S=_&&t.value[_];if(_&&S&&"expanded"in S){const w=S.expanded;b=typeof b>"u"?!S.expanded:b,t.value[_].expanded=b,w!==b&&l.emit("expand-change",y,b),l.store.updateTableScrollY()}},g=y=>{l.store.assertRowKey();const b=r.rowKey.value,x=wo(y,b),_=t.value[x];o.value&&_&&"loaded"in _&&!_.loaded?v(y,x,_):m(y,void 0)},v=(y,b,x)=>{const{load:_}=l.props;_&&!t.value[b].loaded&&(t.value[b].loading=!0,_(y,x,S=>{if(!Array.isArray(S))throw new TypeError("[ElTable] data must be an array");t.value[b].loading=!1,t.value[b].loaded=!0,t.value[b].expanded=!0,S.length&&(n.value[b]=S),l.emit("expand-change",y,!0)}))};return{loadData:v,loadOrToggle:g,toggleTreeExpansion:m,updateTreeExpandKeys:p,updateTreeData:h,normalize:d,states:{expandRowKeys:e,treeData:t,indent:i,lazy:o,lazyTreeNodeMap:n,lazyColumnIdentifier:s,childrenColumnName:a}}}const T_e=(r,e)=>{const t=e.sortingColumn;return!t||typeof t.sortable=="string"?r:m_e(r,e.sortProp,e.sortOrder,t.sortMethod,t.sortBy)},Hb=r=>{const e=[];return r.forEach(t=>{t.children&&t.children.length>0?e.push.apply(e,Hb(t.children)):e.push(t)}),e};function E_e(){var r;const e=It(),{size:t}=qi((r=e.proxy)==null?void 0:r.$props),i=V(null),o=V([]),n=V([]),s=V(!1),a=V([]),l=V([]),c=V([]),u=V([]),d=V([]),h=V([]),p=V([]),m=V([]),g=[],v=V(0),y=V(0),b=V(0),x=V(!1),_=V([]),S=V(!1),w=V(!1),M=V(null),T=V({}),E=V(null),C=V(null),B=V(null),I=V(null),L=V(null);ke(o,()=>e.state&&R(!1),{deep:!0});const P=()=>{if(!i.value)throw new Error("[ElTable] prop row-key is required")},U=Re=>{var $e;($e=Re.children)==null||$e.forEach(Ve=>{Ve.fixed=Re.fixed,U(Ve)})},G=()=>{a.value.forEach(q=>{U(q)}),u.value=a.value.filter(q=>q.fixed===!0||q.fixed==="left"),d.value=a.value.filter(q=>q.fixed==="right"),u.value.length>0&&a.value[0]&&a.value[0].type==="selection"&&!a.value[0].fixed&&(a.value[0].fixed=!0,u.value.unshift(a.value[0]));const Re=a.value.filter(q=>!q.fixed);l.value=[].concat(u.value).concat(Re).concat(d.value);const $e=Hb(Re),Ve=Hb(u.value),ye=Hb(d.value);v.value=$e.length,y.value=Ve.length,b.value=ye.length,c.value=[].concat(Ve).concat($e).concat(ye),s.value=u.value.length>0||d.value.length>0},R=(Re,$e=!1)=>{Re&&G(),$e?e.state.doLayout():e.state.debouncedUpdateLayout()},F=Re=>_.value.includes(Re),O=()=>{x.value=!1,_.value.length&&(_.value=[],e.emit("selection-change",[]))},H=()=>{let Re;if(i.value){Re=[];const $e=Bu(_.value,i.value),Ve=Bu(o.value,i.value);for(const ye in $e)Yt($e,ye)&&!Ve[ye]&&Re.push($e[ye].row)}else Re=_.value.filter($e=>!o.value.includes($e));if(Re.length){const $e=_.value.filter(Ve=>!Re.includes(Ve));_.value=$e,e.emit("selection-change",$e.slice())}},$=()=>(_.value||[]).slice(),j=(Re,$e=void 0,Ve=!0)=>{if(sg(_.value,Re,$e)){const ye=(_.value||[]).slice();Ve&&e.emit("select",ye,Re),e.emit("selection-change",ye)}},J=()=>{var Re,$e;const Ve=w.value?!x.value:!(x.value||_.value.length);x.value=Ve;let ye=!1,q=0;const oe=($e=(Re=e==null?void 0:e.store)==null?void 0:Re.states)==null?void 0:$e.rowKey.value;o.value.forEach((fe,ie)=>{const De=ie+q;M.value?M.value.call(null,fe,De)&&sg(_.value,fe,Ve)&&(ye=!0):sg(_.value,fe,Ve)&&(ye=!0),q+=xe(wo(fe,oe))}),ye&&e.emit("selection-change",_.value?_.value.slice():[]),e.emit("select-all",_.value)},ce=()=>{const Re=Bu(_.value,i.value);o.value.forEach($e=>{const Ve=wo($e,i.value),ye=Re[Ve];ye&&(_.value[ye.index]=$e)})},ve=()=>{var Re,$e,Ve;if(((Re=o.value)==null?void 0:Re.length)===0){x.value=!1;return}let ye;i.value&&(ye=Bu(_.value,i.value));const q=function(De){return ye?!!ye[wo(De,i.value)]:_.value.includes(De)};let oe=!0,fe=0,ie=0;for(let De=0,et=(o.value||[]).length;De<et;De++){const ht=(Ve=($e=e==null?void 0:e.store)==null?void 0:$e.states)==null?void 0:Ve.rowKey.value,be=De+ie,mt=o.value[De],at=M.value&&M.value.call(null,mt,be);if(q(mt))fe++;else if(!M.value||at){oe=!1;break}ie+=xe(wo(mt,ht))}fe===0&&(oe=!1),x.value=oe},xe=Re=>{var $e;if(!e||!e.store)return 0;const{treeData:Ve}=e.store.states;let ye=0;const q=($e=Ve.value[Re])==null?void 0:$e.children;return q&&(ye+=q.length,q.forEach(oe=>{ye+=xe(oe)})),ye},te=(Re,$e)=>{Array.isArray(Re)||(Re=[Re]);const Ve={};return Re.forEach(ye=>{T.value[ye.id]=$e,Ve[ye.columnKey||ye.id]=$e}),Ve},Z=(Re,$e,Ve)=>{C.value&&C.value!==Re&&(C.value.order=null),C.value=Re,B.value=$e,I.value=Ve},de=()=>{let Re=f(n);Object.keys(T.value).forEach($e=>{const Ve=T.value[$e];if(!Ve||Ve.length===0)return;const ye=zU({columns:c.value},$e);ye&&ye.filterMethod&&(Re=Re.filter(q=>Ve.some(oe=>ye.filterMethod.call(null,oe,q,ye))))}),E.value=Re},Ce=()=>{o.value=T_e(E.value,{sortingColumn:C.value,sortProp:B.value,sortOrder:I.value})},ue=(Re=void 0)=>{Re&&Re.filter||de(),Ce()},D=Re=>{const{tableHeaderRef:$e}=e.refs;if(!$e)return;const Ve=Object.assign({},$e.filterPanels),ye=Object.keys(Ve);if(ye.length)if(typeof Re=="string"&&(Re=[Re]),Array.isArray(Re)){const q=Re.map(oe=>g_e({columns:c.value},oe));ye.forEach(oe=>{const fe=q.find(ie=>ie.id===oe);fe&&(fe.filteredValue=[])}),e.store.commit("filterChange",{column:q,values:[],silent:!0,multi:!0})}else ye.forEach(q=>{const oe=c.value.find(fe=>fe.id===q);oe&&(oe.filteredValue=[])}),T.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},K=()=>{C.value&&(Z(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:re,toggleRowExpansion:ae,updateExpandRows:le,states:Se,isRowExpanded:Ae}=w_e({data:o,rowKey:i}),{updateTreeExpandKeys:Ne,toggleTreeExpansion:Me,updateTreeData:Le,loadOrToggle:je,states:Y}=M_e({data:o,rowKey:i}),{updateCurrentRowData:z,updateCurrentRow:me,setCurrentRowKey:Ie,states:Ue}=S_e({data:o,rowKey:i});return{assertRowKey:P,updateColumns:G,scheduleLayout:R,isSelected:F,clearSelection:O,cleanSelection:H,getSelectionRows:$,toggleRowSelection:j,_toggleAllSelection:J,toggleAllSelection:null,updateSelectionByRowKey:ce,updateAllSelected:ve,updateFilters:te,updateCurrentRow:me,updateSort:Z,execFilter:de,execSort:Ce,execQuery:ue,clearFilter:D,clearSort:K,toggleRowExpansion:ae,setExpandRowKeysAdapter:Re=>{re(Re),Ne(Re)},setCurrentRowKey:Ie,toggleRowExpansionAdapter:(Re,$e)=>{c.value.some(({type:Ve})=>Ve==="expand")?ae(Re,$e):Me(Re,$e)},isRowExpanded:Ae,updateExpandRows:le,updateCurrentRowData:z,loadOrToggle:je,updateTreeData:Le,states:{tableSize:t,rowKey:i,data:o,_data:n,isComplex:s,_columns:a,originColumns:l,columns:c,fixedColumns:u,rightFixedColumns:d,leafColumns:h,fixedLeafColumns:p,rightFixedLeafColumns:m,updateOrderFns:g,leafColumnsLength:v,fixedLeafColumnsLength:y,rightFixedLeafColumnsLength:b,isAllSelected:x,selection:_,reserveSelection:S,selectOnIndeterminate:w,selectable:M,filters:T,filteredData:E,sortingColumn:C,sortProp:B,sortOrder:I,hoverRow:L,...Se,...Y,...Ue}}}function ZT(r,e){return r.map(t=>{var i;return t.id===e.id?e:((i=t.children)!=null&&i.length&&(t.children=ZT(t.children,e)),t)})}function QT(r){r.forEach(e=>{var t,i;e.no=(t=e.getColumnIndex)==null?void 0:t.call(e),(i=e.children)!=null&&i.length&&QT(e.children)}),r.sort((e,t)=>e.no-t.no)}function C_e(){const r=It(),e=E_e();return{ns:Pe("table"),...e,mutations:{setData(t,i){const o=f(t._data)!==i;t.data.value=i,t._data.value=i,r.store.execQuery(),r.store.updateCurrentRowData(),r.store.updateExpandRows(),r.store.updateTreeData(r.store.states.defaultExpandAll.value),f(t.reserveSelection)?(r.store.assertRowKey(),r.store.updateSelectionByRowKey()):o?r.store.clearSelection():r.store.cleanSelection(),r.store.updateAllSelected(),r.$ready&&r.store.scheduleLayout()},insertColumn(t,i,o,n){const s=f(t._columns);let a=[];o?(o&&!o.children&&(o.children=[]),o.children.push(i),a=ZT(s,o)):(s.push(i),a=s),QT(a),t._columns.value=a,t.updateOrderFns.push(n),i.type==="selection"&&(t.selectable.value=i.selectable,t.reserveSelection.value=i.reserveSelection),r.$ready&&(r.store.updateColumns(),r.store.scheduleLayout())},updateColumnOrder(t,i){var o;((o=i.getColumnIndex)==null?void 0:o.call(i))!==i.no&&(QT(t._columns.value),r.$ready&&r.store.updateColumns())},removeColumn(t,i,o,n){const s=f(t._columns)||[];if(o)o.children.splice(o.children.findIndex(l=>l.id===i.id),1),lt(()=>{var l;((l=o.children)==null?void 0:l.length)===0&&delete o.children}),t._columns.value=ZT(s,o);else{const l=s.indexOf(i);l>-1&&(s.splice(l,1),t._columns.value=s)}const a=t.updateOrderFns.indexOf(n);a>-1&&t.updateOrderFns.splice(a,1),r.$ready&&(r.store.updateColumns(),r.store.scheduleLayout())},sort(t,i){const{prop:o,order:n,init:s}=i;if(o){const a=f(t.columns).find(l=>l.property===o);a&&(a.order=n,r.store.updateSort(a,o,n),r.store.commit("changeSortCondition",{init:s}))}},changeSortCondition(t,i){const{sortingColumn:o,sortProp:n,sortOrder:s}=t,a=f(o),l=f(n),c=f(s);c===null&&(t.sortingColumn.value=null,t.sortProp.value=null);const u={filter:!0};r.store.execQuery(u),(!i||!(i.silent||i.init))&&r.emit("sort-change",{column:a,prop:l,order:c}),r.store.updateTableScrollY()},filterChange(t,i){const{column:o,values:n,silent:s}=i,a=r.store.updateFilters(o,n);r.store.execQuery(),s||r.emit("filter-change",a),r.store.updateTableScrollY()},toggleAllSelection(){r.store.toggleAllSelection()},rowSelectedChanged(t,i){r.store.toggleRowSelection(i),r.store.updateAllSelected()},setHoverRow(t,i){t.hoverRow.value=i},setCurrentRow(t,i){r.store.updateCurrentRow(i)}},commit:function(t,...i){const o=r.store.mutations;if(o[t])o[t].apply(r,[r.store.states].concat(i));else throw new Error(`Action not found: ${t}`)},updateTableScrollY:function(){lt(()=>r.layout.updateScrollY.apply(r.layout))}}}const ag={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"}};function N_e(r,e){if(!r)throw new Error("Table is required.");const t=C_e();return t.toggleAllSelection=Xo(t._toggleAllSelection,10),Object.keys(ag).forEach(i=>{qU(XU(e,i),i,t)}),A_e(t,e),t}function A_e(r,e){Object.keys(ag).forEach(t=>{ke(()=>XU(e,t),i=>{qU(i,t,r)})})}function qU(r,e,t){let i=r,o=ag[e];typeof ag[e]=="object"&&(o=o.key,i=i||ag[e].default),t.states[o].value=i}function XU(r,e){if(e.includes(".")){const t=e.split(".");let i=r;return t.forEach(o=>{i=i[o]}),i}else return r[e]}class R_e{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=V(null),this.scrollX=V(!1),this.scrollY=V(!1),this.bodyWidth=V(null),this.fixedWidth=V(null),this.rightFixedWidth=V(null),this.gutterWidth=0;for(const t in e)Yt(e,t)&&(Ar(this[t])?this[t].value=e[t]:this[t]=e[t]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const e=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(e!=null&&e.wrapRef)){let t=!0;const i=this.scrollY.value;return t=e.wrapRef.scrollHeight>e.wrapRef.clientHeight,this.scrollY.value=t,i!==t}return!1}setHeight(e,t="height"){if(!Jt)return;const i=this.table.vnode.el;if(e=y_e(e),this.height.value=Number(e),!i&&(e||e===0))return lt(()=>this.setHeight(e,t));typeof e=="number"?(i.style[t]=`${e}px`,this.updateElsHeight()):typeof e=="string"&&(i.style[t]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(t=>{t.isColumnGroup?e.push.apply(e,t.columns):e.push(t)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let t=e;for(;t.tagName!=="DIV";){if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}updateColumnsWidth(){if(!Jt)return;const e=this.fit,t=this.table.vnode.el.clientWidth;let i=0;const o=this.getFlattenColumns(),n=o.filter(l=>typeof l.width!="number");if(o.forEach(l=>{typeof l.width=="number"&&l.realWidth&&(l.realWidth=null)}),n.length>0&&e){if(o.forEach(l=>{i+=Number(l.width||l.minWidth||80)}),i<=t){this.scrollX.value=!1;const l=t-i;if(n.length===1)n[0].realWidth=Number(n[0].minWidth||80)+l;else{const c=n.reduce((h,p)=>h+Number(p.minWidth||80),0),u=l/c;let d=0;n.forEach((h,p)=>{if(p===0)return;const m=Math.floor(Number(h.minWidth||80)*u);d+=m,h.realWidth=Number(h.minWidth||80)+m}),n[0].realWidth=Number(n[0].minWidth||80)+l-d}}else this.scrollX.value=!0,n.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(i,t),this.table.state.resizeState.value.width=this.bodyWidth.value}else o.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),i+=l.realWidth}),this.scrollX.value=i>t,this.bodyWidth.value=i;const s=this.store.states.fixedColumns.value;if(s.length>0){let l=0;s.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.fixedWidth.value=l}const a=this.store.states.rightFixedColumns.value;if(a.length>0){let l=0;a.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const t=this.observers.indexOf(e);t!==-1&&this.observers.splice(t,1)}notifyObservers(e){this.observers.forEach(t=>{var i,o;switch(e){case"columns":(i=t.state)==null||i.onColumnsChange(this);break;case"scrollable":(o=t.state)==null||o.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:L_e}=_s,O_e=ne({name:"ElTableFilterPanel",components:{ElCheckbox:_s,ElCheckboxGroup:L_e,ElScrollbar:sl,ElTooltip:Zo,ElIcon:st,ArrowDown:Ql,ArrowUp:zy},directives:{ClickOutside:fc},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(r){const e=It(),{t}=ir(),i=Pe("table-filter"),o=e==null?void 0:e.parent;o.filterPanels.value[r.column.id]||(o.filterPanels.value[r.column.id]=e);const n=V(!1),s=V(null),a=N(()=>r.column&&r.column.filters),l=N({get:()=>{var _;return(((_=r.column)==null?void 0:_.filteredValue)||[])[0]},set:_=>{c.value&&(typeof _<"u"&&_!==null?c.value.splice(0,1,_):c.value.splice(0,1))}}),c=N({get(){return r.column?r.column.filteredValue||[]:[]},set(_){r.column&&r.upDataColumn("filteredValue",_)}}),u=N(()=>r.column?r.column.filterMultiple:!0),d=_=>_.value===l.value,h=()=>{n.value=!1},p=_=>{_.stopPropagation(),n.value=!n.value},m=()=>{n.value=!1},g=()=>{b(c.value),h()},v=()=>{c.value=[],b(c.value),h()},y=_=>{l.value=_,b(typeof _<"u"&&_!==null?c.value:[]),h()},b=_=>{r.store.commit("filterChange",{column:r.column,values:_}),r.store.updateAllSelected()};ke(n,_=>{r.column&&r.upDataColumn("filterOpened",_)},{immediate:!0});const x=N(()=>{var _,S;return(S=(_=s.value)==null?void 0:_.popperRef)==null?void 0:S.contentRef});return{tooltipVisible:n,multiple:u,filteredValue:c,filterValue:l,filters:a,handleConfirm:g,handleReset:v,handleSelect:y,isActive:d,t,ns:i,showFilterPanel:p,hideFilterPanel:m,popperPaneRef:x,tooltip:s}}}),k_e={key:0},I_e=["disabled"],P_e=["label","onClick"];function D_e(r,e,t,i,o,n){const s=_t("el-checkbox"),a=_t("el-checkbox-group"),l=_t("el-scrollbar"),c=_t("arrow-up"),u=_t("arrow-down"),d=_t("el-icon"),h=_t("el-tooltip"),p=bh("click-outside");return A(),_e(h,{ref:"tooltip",visible:r.tooltipVisible,offset:0,placement:r.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":r.ns.b(),persistent:""},{content:se(()=>[r.multiple?(A(),W("div",k_e,[X("div",{class:k(r.ns.e("content"))},[ee(l,{"wrap-class":r.ns.e("wrap")},{default:se(()=>[ee(a,{modelValue:r.filteredValue,"onUpdate:modelValue":e[0]||(e[0]=m=>r.filteredValue=m),class:k(r.ns.e("checkbox-group"))},{default:se(()=>[(A(!0),W(nt,null,jt(r.filters,m=>(A(),_e(s,{key:m.value,label:m.value},{default:se(()=>[rr(ze(m.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),X("div",{class:k(r.ns.e("bottom"))},[X("button",{class:k({[r.ns.is("disabled")]:r.filteredValue.length===0}),disabled:r.filteredValue.length===0,type:"button",onClick:e[1]||(e[1]=(...m)=>r.handleConfirm&&r.handleConfirm(...m))},ze(r.t("el.table.confirmFilter")),11,I_e),X("button",{type:"button",onClick:e[2]||(e[2]=(...m)=>r.handleReset&&r.handleReset(...m))},ze(r.t("el.table.resetFilter")),1)],2)])):(A(),W("ul",{key:1,class:k(r.ns.e("list"))},[X("li",{class:k([r.ns.e("list-item"),{[r.ns.is("active")]:r.filterValue===void 0||r.filterValue===null}]),onClick:e[3]||(e[3]=m=>r.handleSelect(null))},ze(r.t("el.table.clearFilter")),3),(A(!0),W(nt,null,jt(r.filters,m=>(A(),W("li",{key:m.value,class:k([r.ns.e("list-item"),r.ns.is("active",r.isActive(m))]),label:m.value,onClick:g=>r.handleSelect(m.value)},ze(m.text),11,P_e))),128))],2))]),default:se(()=>[At((A(),W("span",{class:k([`${r.ns.namespace.value}-table__column-filter-trigger`,`${r.ns.namespace.value}-none-outline`]),onClick:e[4]||(e[4]=(...m)=>r.showFilterPanel&&r.showFilterPanel(...m))},[ee(d,null,{default:se(()=>[r.column.filterOpened?(A(),_e(c,{key:0})):(A(),_e(u,{key:1}))]),_:1})],2)),[[p,r.hideFilterPanel,r.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var B_e=Xe(O_e,[["render",D_e],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/filter-panel.vue"]]);function KU(r){const e=It();hy(()=>{t.value.addObserver(e)}),Rt(()=>{i(t.value),o(t.value)}),Ka(()=>{i(t.value),o(t.value)}),Gn(()=>{t.value.removeObserver(e)});const t=N(()=>{const n=r.layout;if(!n)throw new Error("Can not find table layout.");return n}),i=n=>{var s;const a=((s=r.vnode.el)==null?void 0:s.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const l=n.getFlattenColumns(),c={};l.forEach(u=>{c[u.id]=u});for(let u=0,d=a.length;u<d;u++){const h=a[u],p=h.getAttribute("name"),m=c[p];m&&h.setAttribute("width",m.realWidth||m.width)}},o=n=>{var s,a;const l=((s=r.vnode.el)==null?void 0:s.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let u=0,d=l.length;u<d;u++)l[u].setAttribute("width",n.scrollY.value?n.gutterWidth:"0");const c=((a=r.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let u=0,d=c.length;u<d;u++){const h=c[u];h.style.width=n.scrollY.value?`${n.gutterWidth}px`:"0",h.style.display=n.scrollY.value?"":"none"}};return{tableLayout:t.value,onColumnsChange:i,onScrollableChange:o}}const Ma=Symbol("ElTable");function F_e(r,e){const t=It(),i=ot(Ma),o=g=>{g.stopPropagation()},n=(g,v)=>{!v.filters&&v.sortable?m(g,v,!1):v.filterable&&!v.sortable&&o(g),i==null||i.emit("header-click",v,g)},s=(g,v)=>{i==null||i.emit("header-contextmenu",v,g)},a=V(null),l=V(!1),c=V({}),u=(g,v)=>{if(Jt&&!(v.children&&v.children.length>0)&&a.value&&r.border){l.value=!0;const y=i;e("set-drag-visible",!0);const b=(y==null?void 0:y.vnode.el).getBoundingClientRect().left,x=t.vnode.el.querySelector(`th.${v.id}`),_=x.getBoundingClientRect(),S=_.left-b+30;fa(x,"noclick"),c.value={startMouseLeft:g.clientX,startLeft:_.right-b,startColumnLeft:_.left-b,tableLeft:b};const w=y==null?void 0:y.refs.resizeProxy;w.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const M=E=>{const C=E.clientX-c.value.startMouseLeft,B=c.value.startLeft+C;w.style.left=`${Math.max(S,B)}px`},T=()=>{if(l.value){const{startColumnLeft:E,startLeft:C}=c.value,B=Number.parseInt(w.style.left,10)-E;v.width=v.realWidth=B,y==null||y.emit("header-dragend",v.width,C-E,v,g),requestAnimationFrame(()=>{r.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,a.value=null,c.value={},e("set-drag-visible",!1)}document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",T),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{gn(x,"noclick")},0)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",T)}},d=(g,v)=>{if(v.children&&v.children.length>0)return;const y=g.target;if(!fs(y))return;const b=y==null?void 0:y.closest("th");if(!(!v||!v.resizable)&&!l.value&&r.border){const x=b.getBoundingClientRect(),_=document.body.style;x.width>12&&x.right-g.pageX<8?(_.cursor="col-resize",zs(b,"is-sortable")&&(b.style.cursor="col-resize"),a.value=v):l.value||(_.cursor="",zs(b,"is-sortable")&&(b.style.cursor="pointer"),a.value=null)}},h=()=>{Jt&&(document.body.style.cursor="")},p=({order:g,sortOrders:v})=>{if(g==="")return v[0];const y=v.indexOf(g||null);return v[y>v.length-2?0:y+1]},m=(g,v,y)=>{var b;g.stopPropagation();const x=v.order===y?null:y||p(v),_=(b=g.target)==null?void 0:b.closest("th");if(_&&zs(_,"noclick")){gn(_,"noclick");return}if(!v.sortable)return;const S=r.store.states;let w=S.sortProp.value,M;const T=S.sortingColumn.value;(T!==v||T===v&&T.order===null)&&(T&&(T.order=null),S.sortingColumn.value=v,w=v.property),x?M=v.order=x:M=v.order=null,S.sortProp.value=w,S.sortOrder.value=M,i==null||i.store.commit("changeSortCondition")};return{handleHeaderClick:n,handleHeaderContextMenu:s,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:m,handleFilterClick:o}}function U_e(r){const e=ot(Ma),t=Pe("table");return{getHeaderRowStyle:i=>{const o=e==null?void 0:e.props.headerRowStyle;return typeof o=="function"?o.call(null,{rowIndex:i}):o},getHeaderRowClass:i=>{const o=[],n=e==null?void 0:e.props.headerRowClassName;return typeof n=="string"?o.push(n):typeof n=="function"&&o.push(n.call(null,{rowIndex:i})),o.join(" ")},getHeaderCellStyle:(i,o,n,s)=>{var a;let l=(a=e==null?void 0:e.props.headerCellStyle)!=null?a:{};typeof l=="function"&&(l=l.call(null,{rowIndex:i,columnIndex:o,row:n,column:s}));const c=JT(o,s.fixed,r.store,n);return np(c,"left"),np(c,"right"),Object.assign({},l,c)},getHeaderCellClass:(i,o,n,s)=>{const a=YT(t.b(),o,s.fixed,r.store,n),l=[s.id,s.order,s.headerAlign,s.className,s.labelClassName,...a];s.children||l.push("is-leaf"),s.sortable&&l.push("is-sortable");const c=e==null?void 0:e.props.headerCellClassName;return typeof c=="string"?l.push(c):typeof c=="function"&&l.push(c.call(null,{rowIndex:i,columnIndex:o,row:n,column:s})),l.push(t.e("cell")),l.filter(u=>!!u).join(" ")}}}const YU=r=>{const e=[];return r.forEach(t=>{t.children?(e.push(t),e.push.apply(e,YU(t.children))):e.push(t)}),e},z_e=r=>{let e=1;const t=(o,n)=>{if(n&&(o.level=n.level+1,e<o.level&&(e=o.level)),o.children){let s=0;o.children.forEach(a=>{t(a,o),s+=a.colSpan}),o.colSpan=s}else o.colSpan=1};r.forEach(o=>{o.level=1,t(o,void 0)});const i=[];for(let o=0;o<e;o++)i.push([]);return YU(r).forEach(o=>{o.children?(o.rowSpan=1,o.children.forEach(n=>n.isSubColumn=!0)):o.rowSpan=e-o.level+1,i[o.level-1].push(o)}),i};function V_e(r){const e=ot(Ma),t=N(()=>z_e(r.store.states.originColumns.value));return{isGroup:N(()=>{const i=t.value.length>1;return i&&e&&(e.state.isGroup.value=!0),i}),toggleAllSelection:i=>{i.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:t}}var G_e=ne({name:"ElTableHeader",components:{ElCheckbox:_s},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(r,{emit:e}){const t=It(),i=ot(Ma),o=Pe("table"),n=V({}),{onColumnsChange:s,onScrollableChange:a}=KU(i);Rt(async()=>{await lt(),await lt();const{prop:w,order:M}=r.defaultSort;i==null||i.store.commit("sort",{prop:w,order:M,init:!0})});const{handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:p,handleFilterClick:m}=F_e(r,e),{getHeaderRowStyle:g,getHeaderRowClass:v,getHeaderCellStyle:y,getHeaderCellClass:b}=U_e(r),{isGroup:x,toggleAllSelection:_,columnRows:S}=V_e(r);return t.state={onColumnsChange:s,onScrollableChange:a},t.filterPanels=n,{ns:o,filterPanels:n,onColumnsChange:s,onScrollableChange:a,columnRows:S,getHeaderRowClass:v,getHeaderRowStyle:g,getHeaderCellClass:b,getHeaderCellStyle:y,handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:p,handleFilterClick:m,isGroup:x,toggleAllSelection:_}},render(){const{ns:r,isGroup:e,columnRows:t,getHeaderCellStyle:i,getHeaderCellClass:o,getHeaderRowClass:n,getHeaderRowStyle:s,handleHeaderClick:a,handleHeaderContextMenu:l,handleMouseDown:c,handleMouseMove:u,handleSortClick:d,handleMouseOut:h,store:p,$parent:m}=this;let g=1;return pt("thead",{class:{[r.is("group")]:e}},t.map((v,y)=>pt("tr",{class:n(y),key:y,style:s(y)},v.map((b,x)=>(b.rowSpan>g&&(g=b.rowSpan),pt("th",{class:o(y,x,v,b),colspan:b.colSpan,key:`${b.id}-thead`,rowspan:b.rowSpan,style:i(y,x,v,b),onClick:_=>a(_,b),onContextmenu:_=>l(_,b),onMousedown:_=>c(_,b),onMousemove:_=>u(_,b),onMouseout:h},[pt("div",{class:["cell",b.filteredValue&&b.filteredValue.length>0?"highlight":""]},[b.renderHeader?b.renderHeader({column:b,$index:x,store:p,_self:m}):b.label,b.sortable&&pt("span",{onClick:_=>d(_,b),class:"caret-wrapper"},[pt("i",{onClick:_=>d(_,b,"ascending"),class:"sort-caret ascending"}),pt("i",{onClick:_=>d(_,b,"descending"),class:"sort-caret descending"})]),b.filterable&&pt(B_e,{store:p,placement:b.filterPlacement||"bottom-start",column:b,upDataColumn:(_,S)=>{b[_]=S}})])]))))))}});function H_e(r){const e=ot(Ma),t=V(""),i=V(pt("div")),{nextZIndex:o}=Hh(),n=(h,p,m)=>{var g;const v=e,y=XT(h);let b;const x=(g=v==null?void 0:v.vnode.el)==null?void 0:g.dataset.prefix;y&&(b=VU({columns:r.store.states.columns.value},y,x),b&&(v==null||v.emit(`cell-${m}`,p,b,y,h))),v==null||v.emit(`row-${m}`,p,b,h)},s=(h,p)=>{n(h,p,"dblclick")},a=(h,p)=>{r.store.commit("setCurrentRow",p),n(h,p,"click")},l=(h,p)=>{n(h,p,"contextmenu")},c=Xo(h=>{r.store.commit("setHoverRow",h)},30),u=Xo(()=>{r.store.commit("setHoverRow",null)},30),d=h=>{const p=window.getComputedStyle(h,null),m=Number.parseInt(p.paddingLeft,10)||0,g=Number.parseInt(p.paddingRight,10)||0,v=Number.parseInt(p.paddingTop,10)||0,y=Number.parseInt(p.paddingBottom,10)||0;return{left:m,right:g,top:v,bottom:y}};return{handleDoubleClick:s,handleClick:a,handleContextMenu:l,handleMouseEnter:c,handleMouseLeave:u,handleCellMouseEnter:(h,p,m)=>{var g;const v=e,y=XT(h),b=(g=v==null?void 0:v.vnode.el)==null?void 0:g.dataset.prefix;if(y){const L=VU({columns:r.store.states.columns.value},y,b),P=v.hoverState={cell:y,column:L,row:p};v==null||v.emit("cell-mouse-enter",P.row,P.column,P.cell,h)}if(!m)return;const x=h.target.querySelector(".cell");if(!(zs(x,`${b}-tooltip`)&&x.childNodes.length))return;const _=document.createRange();_.setStart(x,0),_.setEnd(x,x.childNodes.length);let S=_.getBoundingClientRect().width,w=_.getBoundingClientRect().height;S-Math.floor(S)<.001&&(S=Math.floor(S)),w-Math.floor(w)<.001&&(w=Math.floor(w));const{top:M,left:T,right:E,bottom:C}=d(x),B=T+E,I=M+C;(S+B>x.offsetWidth||w+I>x.offsetHeight||x.scrollWidth>x.offsetWidth)&&__e(e==null?void 0:e.refs.tableWrapper,y,y.innerText||y.textContent,o,m)},handleCellMouseLeave:h=>{if(!XT(h))return;const p=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",p==null?void 0:p.row,p==null?void 0:p.column,p==null?void 0:p.cell,h)},tooltipContent:t,tooltipTrigger:i}}function j_e(r){const e=ot(Ma),t=Pe("table");return{getRowStyle:(i,o)=>{const n=e==null?void 0:e.props.rowStyle;return typeof n=="function"?n.call(null,{row:i,rowIndex:o}):n||null},getRowClass:(i,o)=>{const n=[t.e("row")];e!=null&&e.props.highlightCurrentRow&&i===r.store.states.currentRow.value&&n.push("current-row"),r.stripe&&o%2===1&&n.push(t.em("row","striped"));const s=e==null?void 0:e.props.rowClassName;return typeof s=="string"?n.push(s):typeof s=="function"&&n.push(s.call(null,{row:i,rowIndex:o})),n},getCellStyle:(i,o,n,s)=>{const a=e==null?void 0:e.props.cellStyle;let l=a??{};typeof a=="function"&&(l=a.call(null,{rowIndex:i,columnIndex:o,row:n,column:s}));const c=JT(o,r==null?void 0:r.fixed,r.store);return np(c,"left"),np(c,"right"),Object.assign({},l,c)},getCellClass:(i,o,n,s,a)=>{const l=YT(t.b(),o,r==null?void 0:r.fixed,r.store,void 0,a),c=[s.id,s.align,s.className,...l],u=e==null?void 0:e.props.cellClassName;return typeof u=="string"?c.push(u):typeof u=="function"&&c.push(u.call(null,{rowIndex:i,columnIndex:o,row:n,column:s})),c.push(t.e("cell")),c.filter(d=>!!d).join(" ")},getSpan:(i,o,n,s)=>{let a=1,l=1;const c=e==null?void 0:e.props.spanMethod;if(typeof c=="function"){const u=c({row:i,column:o,rowIndex:n,columnIndex:s});Array.isArray(u)?(a=u[0],l=u[1]):typeof u=="object"&&(a=u.rowspan,l=u.colspan)}return{rowspan:a,colspan:l}},getColspanRealWidth:(i,o,n)=>{if(o<1)return i[n].realWidth;const s=i.map(({realWidth:a,width:l})=>a||l).slice(n,n+o);return Number(s.reduce((a,l)=>Number(a)+Number(l),-1))}}}function $_e(r){const e=ot(Ma),t=Pe("table"),{handleDoubleClick:i,handleClick:o,handleContextMenu:n,handleMouseEnter:s,handleMouseLeave:a,handleCellMouseEnter:l,handleCellMouseLeave:c,tooltipContent:u,tooltipTrigger:d}=H_e(r),{getRowStyle:h,getRowClass:p,getCellStyle:m,getCellClass:g,getSpan:v,getColspanRealWidth:y}=j_e(r),b=N(()=>r.store.states.columns.value.findIndex(({type:w})=>w==="default")),x=(w,M)=>{const T=e.props.rowKey;return T?wo(w,T):M},_=(w,M,T,E=!1)=>{const{tooltipEffect:C,tooltipOptions:B,store:I}=r,{indent:L,columns:P}=I.states,U=p(w,M);let G=!0;return T&&(U.push(t.em("row",`level-${T.level}`)),G=T.display),pt("tr",{style:[G?null:{display:"none"},h(w,M)],class:U,key:x(w,M),onDblclick:R=>i(R,w),onClick:R=>o(R,w),onContextmenu:R=>n(R,w),onMouseenter:()=>s(M),onMouseleave:a},P.value.map((R,F)=>{const{rowspan:O,colspan:H}=v(w,R,M,F);if(!O||!H)return null;const $=Object.assign({},R);$.realWidth=y(P.value,H,F);const j={store:r.store,_self:r.context||e,column:$,row:w,$index:M,cellIndex:F,expanded:E};F===b.value&&T&&(j.treeNode={indent:T.level*L.value,level:T.level},typeof T.expanded=="boolean"&&(j.treeNode.expanded=T.expanded,"loading"in T&&(j.treeNode.loading=T.loading),"noLazyChildren"in T&&(j.treeNode.noLazyChildren=T.noLazyChildren)));const J=`${M},${F}`,ce=$.columnKey||$.rawColumnKey||"",ve=S(F,R,j),xe=R.showOverflowTooltip&&JP({effect:C},B,R.showOverflowTooltip);return pt("td",{style:m(M,F,w,R),class:g(M,F,w,R,H-1),key:`${ce}${J}`,rowspan:O,colspan:H,onMouseenter:te=>l(te,w,xe),onMouseleave:c},[ve])}))},S=(w,M,T)=>M.renderCell(T);return{wrappedRowRender:(w,M)=>{const T=r.store,{isRowExpanded:E,assertRowKey:C}=T,{treeData:B,lazyTreeNodeMap:I,childrenColumnName:L,rowKey:P}=T.states,U=T.states.columns.value;if(U.some(({type:G})=>G==="expand")){const G=E(w),R=_(w,M,void 0,G),F=e.renderExpanded;return G?F?[[R,pt("tr",{key:`expanded-row__${R.key}`},[pt("td",{colspan:U.length,class:`${t.e("cell")} ${t.e("expanded-cell")}`},[F({row:w,$index:M,store:T,expanded:G})])])]]:(console.error("[Element Error]renderExpanded is required."),R):[[R]]}else if(Object.keys(B.value).length){C();const G=wo(w,P.value);let R=B.value[G],F=null;R&&(F={expanded:R.expanded,level:R.level,display:!0},typeof R.lazy=="boolean"&&(typeof R.loaded=="boolean"&&R.loaded&&(F.noLazyChildren=!(R.children&&R.children.length)),F.loading=R.loading));const O=[_(w,M,F)];if(R){let H=0;const $=(J,ce)=>{J&&J.length&&ce&&J.forEach(ve=>{const xe={display:ce.display&&ce.expanded,level:ce.level+1,expanded:!1,noLazyChildren:!1,loading:!1},te=wo(ve,P.value);if(te==null)throw new Error("For nested data item, row-key is required.");if(R={...B.value[te]},R&&(xe.expanded=R.expanded,R.level=R.level||xe.level,R.display=!!(R.expanded&&xe.display),typeof R.lazy=="boolean"&&(typeof R.loaded=="boolean"&&R.loaded&&(xe.noLazyChildren=!(R.children&&R.children.length)),xe.loading=R.loading)),H++,O.push(_(ve,M+H,xe)),R){const Z=I.value[te]||ve[L.value];$(Z,R)}})};R.display=!0;const j=I.value[G]||w[L.value];$(j,R)}return O}else return _(w,M,void 0)},tooltipContent:u,tooltipTrigger:d}}var W_e=ne({name:"ElTableBody",props:{store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean},setup(r){const e=It(),t=ot(Ma),i=Pe("table"),{wrappedRowRender:o,tooltipContent:n,tooltipTrigger:s}=$_e(r),{onColumnsChange:a,onScrollableChange:l}=KU(t);return ke(r.store.states.hoverRow,(c,u)=>{!r.store.states.isComplex.value||!Jt||Dh(()=>{const d=e==null?void 0:e.vnode.el,h=Array.from((d==null?void 0:d.children)||[]).filter(g=>g==null?void 0:g.classList.contains(`${i.e("row")}`)),p=h[u],m=h[c];p&&gn(p,"hover-row"),m&&fa(m,"hover-row")})}),Gn(()=>{var c;(c=Sa)==null||c()}),{ns:i,onColumnsChange:a,onScrollableChange:l,wrappedRowRender:o,tooltipContent:n,tooltipTrigger:s}},render(){const{wrappedRowRender:r,store:e}=this,t=e.states.data.value||[];return pt("tbody",{},[t.reduce((i,o)=>i.concat(r(o,i.length)),[])])}});function eE(r){const e=r.tableLayout==="auto";let t=r.columns||[];e&&t.every(o=>o.width===void 0)&&(t=[]);const i=o=>{const n={key:`${r.tableLayout}_${o.id}`,style:{},name:void 0};return e?n.style={width:`${o.width}px`}:n.name=o.id,n};return pt("colgroup",{},t.map(o=>pt("col",i(o))))}eE.props=["columns","tableLayout"];function q_e(){const r=ot(Ma),e=r==null?void 0:r.store,t=N(()=>e.states.fixedLeafColumnsLength.value),i=N(()=>e.states.rightFixedColumns.value.length),o=N(()=>e.states.columns.value.length),n=N(()=>e.states.fixedColumns.value.length),s=N(()=>e.states.rightFixedColumns.value.length);return{leftFixedLeafCount:t,rightFixedLeafCount:i,columnsCount:o,leftFixedCount:n,rightFixedCount:s,columns:e.states.columns}}function X_e(r){const{columns:e}=q_e(),t=Pe("table");return{getCellClasses:(i,o)=>{const n=i[o],s=[t.e("cell"),n.id,n.align,n.labelClassName,...YT(t.b(),o,n.fixed,r.store)];return n.className&&s.push(n.className),n.children||s.push(t.is("leaf")),s},getCellStyles:(i,o)=>{const n=JT(o,i.fixed,r.store);return np(n,"left"),np(n,"right"),n},columns:e}}var K_e=ne({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(r){const{getCellClasses:e,getCellStyles:t,columns:i}=X_e(r);return{ns:Pe("table"),getCellClasses:e,getCellStyles:t,columns:i}},render(){const{columns:r,getCellStyles:e,getCellClasses:t,summaryMethod:i,sumText:o,ns:n}=this,s=this.store.states.data.value;let a=[];return i?a=i({columns:r,data:s}):r.forEach((l,c)=>{if(c===0){a[c]=o;return}const u=s.map(m=>Number(m[l.property])),d=[];let h=!0;u.forEach(m=>{if(!Number.isNaN(+m)){h=!1;const g=`${m}`.split(".")[1];d.push(g?g.length:0)}});const p=Math.max.apply(null,d);h?a[c]="":a[c]=u.reduce((m,g)=>{const v=Number(g);return Number.isNaN(+v)?m:Number.parseFloat((m+g).toFixed(Math.min(p,20)))},0)}),pt("table",{class:n.e("footer"),cellspacing:"0",cellpadding:"0",border:"0"},[eE({columns:r}),pt("tbody",[pt("tr",{},[...r.map((l,c)=>pt("td",{key:c,colspan:l.colSpan,rowspan:l.rowSpan,class:t(r,c),style:e(l,c)},[pt("div",{class:["cell",l.labelClassName]},[a[c]])]))])])])}});function Y_e(r){return{setCurrentRow:e=>{r.commit("setCurrentRow",e)},getSelectionRows:()=>r.getSelectionRows(),toggleRowSelection:(e,t)=>{r.toggleRowSelection(e,t,!1),r.updateAllSelected()},clearSelection:()=>{r.clearSelection()},clearFilter:e=>{r.clearFilter(e)},toggleAllSelection:()=>{r.commit("toggleAllSelection")},toggleRowExpansion:(e,t)=>{r.toggleRowExpansionAdapter(e,t)},clearSort:()=>{r.clearSort()},sort:(e,t)=>{r.commit("sort",{prop:e,order:t})}}}function J_e(r,e,t,i){const o=V(!1),n=V(null),s=V(!1),a=F=>{s.value=F},l=V({width:null,height:null,headerHeight:null}),c=V(!1),u={display:"inline-block",verticalAlign:"middle"},d=V(),h=V(0),p=V(0),m=V(0),g=V(0),v=V(0);Vn(()=>{e.setHeight(r.height)}),Vn(()=>{e.setMaxHeight(r.maxHeight)}),ke(()=>[r.currentRowKey,t.states.rowKey],([F,O])=>{!f(O)||!f(F)||t.setCurrentRowKey(`${F}`)},{immediate:!0}),ke(()=>r.data,F=>{i.store.commit("setData",F)},{immediate:!0,deep:!0}),Vn(()=>{r.expandRowKeys&&t.setExpandRowKeysAdapter(r.expandRowKeys)});const y=()=>{i.store.commit("setHoverRow",null),i.hoverState&&(i.hoverState=null)},b=(F,O)=>{const{pixelX:H,pixelY:$}=O;Math.abs(H)>=Math.abs($)&&(i.refs.bodyWrapper.scrollLeft+=O.pixelX/5)},x=N(()=>r.height||r.maxHeight||t.states.fixedColumns.value.length>0||t.states.rightFixedColumns.value.length>0),_=N(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),S=()=>{x.value&&e.updateElsHeight(),e.updateColumnsWidth(),requestAnimationFrame(E)};Rt(async()=>{await lt(),t.updateColumns(),C(),requestAnimationFrame(S);const F=i.vnode.el,O=i.refs.headerWrapper;r.flexible&&F&&F.parentElement&&(F.parentElement.style.minWidth="0"),l.value={width:d.value=F.offsetWidth,height:F.offsetHeight,headerHeight:r.showHeader&&O?O.offsetHeight:null},t.states.columns.value.forEach(H=>{H.filteredValue&&H.filteredValue.length&&i.store.commit("filterChange",{column:H,values:H.filteredValue,silent:!0})}),i.$ready=!0});const w=(F,O)=>{if(!F)return;const H=Array.from(F.classList).filter($=>!$.startsWith("is-scrolling-"));H.push(e.scrollX.value?O:"is-scrolling-none"),F.className=H.join(" ")},M=F=>{const{tableWrapper:O}=i.refs;w(O,F)},T=F=>{const{tableWrapper:O}=i.refs;return!!(O&&O.classList.contains(F))},E=function(){if(!i.refs.scrollBarRef)return;if(!e.scrollX.value){const ve="is-scrolling-none";T(ve)||M(ve);return}const F=i.refs.scrollBarRef.wrapRef;if(!F)return;const{scrollLeft:O,offsetWidth:H,scrollWidth:$}=F,{headerWrapper:j,footerWrapper:J}=i.refs;j&&(j.scrollLeft=O),J&&(J.scrollLeft=O);const ce=$-H-1;O>=ce?M("is-scrolling-right"):M(O===0?"is-scrolling-left":"is-scrolling-middle")},C=()=>{i.refs.scrollBarRef&&(i.refs.scrollBarRef.wrapRef&&Hr(i.refs.scrollBarRef.wrapRef,"scroll",E,{passive:!0}),r.fit?ko(i.vnode.el,B):Hr(window,"resize",B),ko(i.refs.bodyWrapper,()=>{var F,O;B(),(O=(F=i.refs)==null?void 0:F.scrollBarRef)==null||O.update()}))},B=()=>{var F,O,H,$;const j=i.vnode.el;if(!i.$ready||!j)return;let J=!1;const{width:ce,height:ve,headerHeight:xe}=l.value,te=d.value=j.offsetWidth;ce!==te&&(J=!0);const Z=j.offsetHeight;(r.height||x.value)&&ve!==Z&&(J=!0);const de=r.tableLayout==="fixed"?i.refs.headerWrapper:(F=i.refs.tableHeaderRef)==null?void 0:F.$el;r.showHeader&&(de==null?void 0:de.offsetHeight)!==xe&&(J=!0),h.value=((O=i.refs.tableWrapper)==null?void 0:O.scrollHeight)||0,m.value=(de==null?void 0:de.scrollHeight)||0,g.value=((H=i.refs.footerWrapper)==null?void 0:H.offsetHeight)||0,v.value=(($=i.refs.appendWrapper)==null?void 0:$.offsetHeight)||0,p.value=h.value-m.value-g.value-v.value,J&&(l.value={width:te,height:Z,headerHeight:r.showHeader&&(de==null?void 0:de.offsetHeight)||0},S())},I=Ci(),L=N(()=>{const{bodyWidth:F,scrollY:O,gutterWidth:H}=e;return F.value?`${F.value-(O.value?H:0)}px`:""}),P=N(()=>r.maxHeight?"fixed":r.tableLayout),U=N(()=>{if(r.data&&r.data.length)return null;let F="100%";r.height&&p.value&&(F=`${p.value}px`);const O=d.value;return{width:O?`${O}px`:"",height:F}}),G=N(()=>r.height?{height:Number.isNaN(Number(r.height))?r.height:`${r.height}px`}:r.maxHeight?{maxHeight:Number.isNaN(Number(r.maxHeight))?r.maxHeight:`${r.maxHeight}px`}:{}),R=N(()=>r.height?{height:"100%"}:r.maxHeight?Number.isNaN(Number(r.maxHeight))?{maxHeight:`calc(${r.maxHeight} - ${m.value+g.value}px)`}:{maxHeight:`${r.maxHeight-m.value-g.value}px`}:{});return{isHidden:o,renderExpanded:n,setDragVisible:a,isGroup:c,handleMouseLeave:y,handleHeaderFooterMousewheel:b,tableSize:I,emptyBlockStyle:U,handleFixedMousewheel:(F,O)=>{const H=i.refs.bodyWrapper;if(Math.abs(O.spinY)>0){const $=H.scrollTop;O.pixelY<0&&$!==0&&F.preventDefault(),O.pixelY>0&&H.scrollHeight-H.clientHeight>$&&F.preventDefault(),H.scrollTop+=Math.ceil(O.pixelY/5)}else H.scrollLeft+=Math.ceil(O.pixelX/5)},resizeProxyVisible:s,bodyWidth:L,resizeState:l,doLayout:S,tableBodyStyles:_,tableLayout:P,scrollbarViewStyle:u,tableInnerStyle:G,scrollbarStyle:R}}function Z_e(r){const e=V(),t=()=>{const i=r.vnode.el.querySelector(".hidden-columns"),o={childList:!0,subtree:!0},n=r.store.states.updateOrderFns;e.value=new MutationObserver(()=>{n.forEach(s=>s())}),e.value.observe(i,o)};Rt(()=>{t()}),Gn(()=>{var i;(i=e.value)==null||i.disconnect()})}var Q_e={data:{type:Array,default:()=>[]},size:bo,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean,showOverflowTooltip:[Boolean,Object]};const ewe=()=>{const r=V(),e=(i,o)=>{const n=r.value;n&&n.scrollTo(i,o)},t=(i,o)=>{const n=r.value;n&&wt(o)&&["Top","Left"].includes(i)&&n[`setScroll${i}`](o)};return{scrollBarRef:r,scrollTo:e,setScrollTop:i=>t("Top",i),setScrollLeft:i=>t("Left",i)}};let twe=1;const rwe=ne({name:"ElTable",directives:{Mousewheel:Kue},components:{TableHeader:G_e,TableBody:W_e,TableFooter:K_e,ElScrollbar:sl,hColgroup:eE},props:Q_e,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(r){const{t:e}=ir(),t=Pe("table"),i=It();Wt(Ma,i);const o=N_e(i,r);i.store=o;const n=new R_e({store:i.store,table:i,fit:r.fit,showHeader:r.showHeader});i.layout=n;const s=N(()=>(o.states.data.value||[]).length===0),{setCurrentRow:a,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:p,clearSort:m,sort:g}=Y_e(o),{isHidden:v,renderExpanded:y,setDragVisible:b,isGroup:x,handleMouseLeave:_,handleHeaderFooterMousewheel:S,tableSize:w,emptyBlockStyle:M,handleFixedMousewheel:T,resizeProxyVisible:E,bodyWidth:C,resizeState:B,doLayout:I,tableBodyStyles:L,tableLayout:P,scrollbarViewStyle:U,tableInnerStyle:G,scrollbarStyle:R}=J_e(r,n,o,i),{scrollBarRef:F,scrollTo:O,setScrollLeft:H,setScrollTop:$}=ewe(),j=Xo(I,50),J=`${t.namespace.value}-table_${twe++}`;i.tableId=J,i.state={isGroup:x,resizeState:B,doLayout:I,debouncedUpdateLayout:j};const ce=N(()=>r.sumText||e("el.table.sumText")),ve=N(()=>r.emptyText||e("el.table.emptyText"));return Z_e(i),{ns:t,layout:n,store:o,handleHeaderFooterMousewheel:S,handleMouseLeave:_,tableId:J,tableSize:w,isHidden:v,isEmpty:s,renderExpanded:y,resizeProxyVisible:E,resizeState:B,isGroup:x,bodyWidth:C,tableBodyStyles:L,emptyBlockStyle:M,debouncedUpdateLayout:j,handleFixedMousewheel:T,setCurrentRow:a,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:p,clearSort:m,doLayout:I,sort:g,t:e,setDragVisible:b,context:i,computedSumText:ce,computedEmptyText:ve,tableLayout:P,scrollbarViewStyle:U,tableInnerStyle:G,scrollbarStyle:R,scrollBarRef:F,scrollTo:O,setScrollLeft:H,setScrollTop:$}}}),iwe=["data-prefix"],owe={ref:"hiddenColumns",class:"hidden-columns"};function nwe(r,e,t,i,o,n){const s=_t("hColgroup"),a=_t("table-header"),l=_t("table-body"),c=_t("el-scrollbar"),u=_t("table-footer"),d=bh("mousewheel");return A(),W("div",{ref:"tableWrapper",class:k([{[r.ns.m("fit")]:r.fit,[r.ns.m("striped")]:r.stripe,[r.ns.m("border")]:r.border||r.isGroup,[r.ns.m("hidden")]:r.isHidden,[r.ns.m("group")]:r.isGroup,[r.ns.m("fluid-height")]:r.maxHeight,[r.ns.m("scrollable-x")]:r.layout.scrollX.value,[r.ns.m("scrollable-y")]:r.layout.scrollY.value,[r.ns.m("enable-row-hover")]:!r.store.states.isComplex.value,[r.ns.m("enable-row-transition")]:(r.store.states.data.value||[]).length!==0&&(r.store.states.data.value||[]).length<100,"has-footer":r.showSummary},r.ns.m(r.tableSize),r.className,r.ns.b(),r.ns.m(`layout-${r.tableLayout}`)]),style:ct(r.style),"data-prefix":r.ns.namespace.value,onMouseleave:e[0]||(e[0]=(...h)=>r.handleMouseLeave&&r.handleMouseLeave(...h))},[X("div",{class:k(r.ns.e("inner-wrapper")),style:ct(r.tableInnerStyle)},[X("div",owe,[Oe(r.$slots,"default")],512),r.showHeader&&r.tableLayout==="fixed"?At((A(),W("div",{key:0,ref:"headerWrapper",class:k(r.ns.e("header-wrapper"))},[X("table",{ref:"tableHeader",class:k(r.ns.e("header")),style:ct(r.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[ee(s,{columns:r.store.states.columns.value,"table-layout":r.tableLayout},null,8,["columns","table-layout"]),ee(a,{ref:"tableHeaderRef",border:r.border,"default-sort":r.defaultSort,store:r.store,onSetDragVisible:r.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[d,r.handleHeaderFooterMousewheel]]):we("v-if",!0),X("div",{ref:"bodyWrapper",class:k(r.ns.e("body-wrapper"))},[ee(c,{ref:"scrollBarRef","view-style":r.scrollbarViewStyle,"wrap-style":r.scrollbarStyle,always:r.scrollbarAlwaysOn},{default:se(()=>[X("table",{ref:"tableBody",class:k(r.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:ct({width:r.bodyWidth,tableLayout:r.tableLayout})},[ee(s,{columns:r.store.states.columns.value,"table-layout":r.tableLayout},null,8,["columns","table-layout"]),r.showHeader&&r.tableLayout==="auto"?(A(),_e(a,{key:0,ref:"tableHeaderRef",border:r.border,"default-sort":r.defaultSort,store:r.store,onSetDragVisible:r.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])):we("v-if",!0),ee(l,{context:r.context,highlight:r.highlightCurrentRow,"row-class-name":r.rowClassName,"tooltip-effect":r.tooltipEffect,"tooltip-options":r.tooltipOptions,"row-style":r.rowStyle,store:r.store,stripe:r.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"])],6),r.isEmpty?(A(),W("div",{key:0,ref:"emptyBlock",style:ct(r.emptyBlockStyle),class:k(r.ns.e("empty-block"))},[X("span",{class:k(r.ns.e("empty-text"))},[Oe(r.$slots,"empty",{},()=>[rr(ze(r.computedEmptyText),1)])],2)],6)):we("v-if",!0),r.$slots.append?(A(),W("div",{key:1,ref:"appendWrapper",class:k(r.ns.e("append-wrapper"))},[Oe(r.$slots,"append")],2)):we("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),r.showSummary?At((A(),W("div",{key:1,ref:"footerWrapper",class:k(r.ns.e("footer-wrapper"))},[ee(u,{border:r.border,"default-sort":r.defaultSort,store:r.store,style:ct(r.tableBodyStyles),"sum-text":r.computedSumText,"summary-method":r.summaryMethod},null,8,["border","default-sort","store","style","sum-text","summary-method"])],2)),[[nr,!r.isEmpty],[d,r.handleHeaderFooterMousewheel]]):we("v-if",!0),r.border||r.isGroup?(A(),W("div",{key:2,class:k(r.ns.e("border-left-patch"))},null,2)):we("v-if",!0)],6),At(X("div",{ref:"resizeProxy",class:k(r.ns.e("column-resize-proxy"))},null,2),[[nr,r.resizeProxyVisible]])],46,iwe)}var swe=Xe(rwe,[["render",nwe],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/table.vue"]]);const awe={selection:"table-column--selection",expand:"table__expand-column"},lwe={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},cwe=r=>awe[r]||"",uwe={selection:{renderHeader({store:r,column:e}){function t(){return r.states.data.value&&r.states.data.value.length===0}return pt(_s,{disabled:t(),size:r.states.tableSize.value,indeterminate:r.states.selection.value.length>0&&!r.states.isAllSelected.value,"onUpdate:modelValue":r.toggleAllSelection,modelValue:r.states.isAllSelected.value,ariaLabel:e.label})},renderCell({row:r,column:e,store:t,$index:i}){return pt(_s,{disabled:e.selectable?!e.selectable.call(null,r,i):!1,size:t.states.tableSize.value,onChange:()=>{t.commit("rowSelectedChanged",r)},onClick:o=>o.stopPropagation(),modelValue:t.isSelected(r),ariaLabel:e.label})},sortable:!1,resizable:!1},index:{renderHeader({column:r}){return r.label||"#"},renderCell({column:r,$index:e}){let t=e+1;const i=r.index;return typeof i=="number"?t=e+i:typeof i=="function"&&(t=i(e)),pt("div",{},[t])},sortable:!1},expand:{renderHeader({column:r}){return r.label||""},renderCell({row:r,store:e,expanded:t}){const{ns:i}=e,o=[i.e("expand-icon")];return t&&o.push(i.em("expand-icon","expanded")),pt("div",{class:o,onClick:function(n){n.stopPropagation(),e.toggleRowExpansion(r)}},{default:()=>[pt(st,null,{default:()=>[pt(Ko)]})]})},sortable:!1,resizable:!1}};function dwe({row:r,column:e,$index:t}){var i;const o=e.property,n=o&&Fy(r,o).value;return e&&e.formatter?e.formatter(r,e,n,t):((i=n==null?void 0:n.toString)==null?void 0:i.call(n))||""}function hwe({row:r,treeNode:e,store:t},i=!1){const{ns:o}=t;if(!e)return i?[pt("span",{class:o.e("placeholder")})]:null;const n=[],s=function(a){a.stopPropagation(),!e.loading&&t.loadOrToggle(r)};if(e.indent&&n.push(pt("span",{class:o.e("indent"),style:{"padding-left":`${e.indent}px`}})),typeof e.expanded=="boolean"&&!e.noLazyChildren){const a=[o.e("expand-icon"),e.expanded?o.em("expand-icon","expanded"):""];let l=Ko;e.loading&&(l=rc),n.push(pt("div",{class:a,onClick:s},{default:()=>[pt(st,{class:{[o.is("loading")]:e.loading}},{default:()=>[pt(l)]})]}))}else n.push(pt("span",{class:o.e("placeholder")}));return n}function JU(r,e){return r.reduce((t,i)=>(t[i]=i,t),e)}function pwe(r,e){const t=It();return{registerComplexWatchers:()=>{const i=["fixed"],o={realWidth:"width",realMinWidth:"minWidth"},n=JU(i,o);Object.keys(n).forEach(s=>{const a=o[s];Yt(e,a)&&ke(()=>e[a],l=>{let c=l;a==="width"&&s==="realWidth"&&(c=KT(l)),a==="minWidth"&&s==="realMinWidth"&&(c=GU(l)),t.columnConfig.value[a]=c,t.columnConfig.value[s]=c;const u=a==="fixed";r.value.store.scheduleLayout(u)})})},registerNormalWatchers:()=>{const i=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],o={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},n=JU(i,o);Object.keys(n).forEach(s=>{const a=o[s];Yt(e,a)&&ke(()=>e[a],l=>{t.columnConfig.value[s]=l})})}}}function fwe(r,e,t){const i=It(),o=V(""),n=V(!1),s=V(),a=V(),l=Pe("table");Vn(()=>{s.value=r.align?`is-${r.align}`:null,s.value}),Vn(()=>{a.value=r.headerAlign?`is-${r.headerAlign}`:s.value,a.value});const c=N(()=>{let v=i.vnode.vParent||i.parent;for(;v&&!v.tableId&&!v.columnId;)v=v.vnode.vParent||v.parent;return v}),u=N(()=>{const{store:v}=i.parent;if(!v)return!1;const{treeData:y}=v.states,b=y.value;return b&&Object.keys(b).length>0}),d=V(KT(r.width)),h=V(GU(r.minWidth)),p=v=>(d.value&&(v.width=d.value),h.value&&(v.minWidth=h.value),!d.value&&h.value&&(v.width=void 0),v.minWidth||(v.minWidth=80),v.realWidth=Number(v.width===void 0?v.minWidth:v.width),v),m=v=>{const y=v.type,b=uwe[y]||{};Object.keys(b).forEach(_=>{const S=b[_];_!=="className"&&S!==void 0&&(v[_]=S)});const x=cwe(y);if(x){const _=`${f(l.namespace)}-${x}`;v.className=v.className?`${v.className} ${_}`:_}return v},g=v=>{Array.isArray(v)?v.forEach(b=>y(b)):y(v);function y(b){var x;((x=b==null?void 0:b.type)==null?void 0:x.name)==="ElTableColumn"&&(b.vParent=i)}};return{columnId:o,realAlign:s,isSubColumn:n,realHeaderAlign:a,columnOrTableParent:c,setColumnWidth:p,setColumnForcedProps:m,setColumnRenders:v=>{r.renderHeader||v.type!=="selection"&&(v.renderHeader=b=>{i.columnConfig.value.label;const x=e.header;return x?x(b):v.label});let y=v.renderCell;return v.type==="expand"?(v.renderCell=b=>pt("div",{class:"cell"},[y(b)]),t.value.renderExpanded=b=>e.default?e.default(b):e.default):(y=y||dwe,v.renderCell=b=>{let x=null;if(e.default){const E=e.default(b);x=E.some(C=>C.type!==$o)?E:y(b)}else x=y(b);const{columns:_}=t.value.store.states,S=_.value.findIndex(E=>E.type==="default"),w=u.value&&b.cellIndex===S,M=hwe(b,w),T={class:"cell",style:{}};return v.showOverflowTooltip&&(T.class=`${T.class} ${f(l.namespace)}-tooltip`,T.style={width:`${(b.column.realWidth||Number(b.column.width))-1}px`}),g(x),pt("div",T,[M,x])}),v},getPropsData:(...v)=>v.reduce((y,b)=>(Array.isArray(b)&&b.forEach(x=>{y[x]=r[x]}),y),{}),getColumnElIndex:(v,y)=>Array.prototype.indexOf.call(v,y),updateColumnOrder:()=>{t.value.store.commit("updateColumnOrder",i.columnConfig.value)}}}var mwe={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:r=>r.every(e=>["ascending","descending",null].includes(e))}};let gwe=1;var ZU=ne({name:"ElTableColumn",components:{ElCheckbox:_s},props:mwe,setup(r,{slots:e}){const t=It(),i=V({}),o=N(()=>{let x=t.parent;for(;x&&!x.tableId;)x=x.parent;return x}),{registerNormalWatchers:n,registerComplexWatchers:s}=pwe(o,r),{columnId:a,isSubColumn:l,realHeaderAlign:c,columnOrTableParent:u,setColumnWidth:d,setColumnForcedProps:h,setColumnRenders:p,getPropsData:m,getColumnElIndex:g,realAlign:v,updateColumnOrder:y}=fwe(r,e,o),b=u.value;a.value=`${b.tableId||b.columnId}_column_${gwe++}`,hy(()=>{l.value=o.value!==b;const x=r.type||"default",_=r.sortable===""?!0:r.sortable,S=Pi(r.showOverflowTooltip)?b.props.showOverflowTooltip:r.showOverflowTooltip,w={...lwe[x],id:a.value,type:x,property:r.prop||r.property,align:v,headerAlign:c,showOverflowTooltip:S,filterable:r.filters||r.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:_,index:r.index,rawColumnKey:t.vnode.key};let M=m(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);M=v_e(w,M),M=b_e(p,d,h)(M),i.value=M,n(),s()}),Rt(()=>{var x;const _=u.value,S=l.value?_.vnode.el.children:(x=_.refs.hiddenColumns)==null?void 0:x.children,w=()=>g(S||[],t.vnode.el);i.value.getColumnIndex=w,w()>-1&&o.value.store.commit("insertColumn",i.value,l.value?_.columnConfig.value:null,y)}),Vr(()=>{o.value.store.commit("removeColumn",i.value,l.value?b.columnConfig.value:null,y)}),t.columnId=a.value,t.columnConfig=i},render(){var r,e,t;try{const i=(e=(r=this.$slots).default)==null?void 0:e.call(r,{row:{},column:{},$index:-1}),o=[];if(Array.isArray(i))for(const n of i)((t=n.type)==null?void 0:t.name)==="ElTableColumn"||n.shapeFlag&2?o.push(n):n.type===nt&&Array.isArray(n.children)&&n.children.forEach(s=>{(s==null?void 0:s.patchFlag)!==1024&&!Tt(s==null?void 0:s.children)&&o.push(s)});return pt("div",o)}catch{return pt("div",[])}}});const vwe=Bt(swe,{TableColumn:ZU}),ywe=ii(ZU);var lg=(r=>(r.ASC="asc",r.DESC="desc",r))(lg||{}),cg=(r=>(r.CENTER="center",r.RIGHT="right",r))(cg||{}),QU=(r=>(r.LEFT="left",r.RIGHT="right",r))(QU||{});const tE={asc:"desc",desc:"asc"},ug=Symbol("placeholder"),bwe=(r,e,t)=>{var i;const o={flexGrow:0,flexShrink:0,...t?{}:{flexGrow:r.flexGrow||0,flexShrink:r.flexShrink||1}};t||(o.flexShrink=1);const n={...(i=r.style)!=null?i:{},...o,flexBasis:"auto",width:r.width};return e||(r.maxWidth&&(n.maxWidth=r.maxWidth),r.minWidth&&(n.minWidth=r.minWidth)),n};function xwe(r,e,t){const i=N(()=>f(e).filter(g=>!g.hidden)),o=N(()=>f(i).filter(g=>g.fixed==="left"||g.fixed===!0)),n=N(()=>f(i).filter(g=>g.fixed==="right")),s=N(()=>f(i).filter(g=>!g.fixed)),a=N(()=>{const g=[];return f(o).forEach(v=>{g.push({...v,placeholderSign:ug})}),f(s).forEach(v=>{g.push(v)}),f(n).forEach(v=>{g.push({...v,placeholderSign:ug})}),g}),l=N(()=>f(o).length||f(n).length),c=N(()=>f(e).reduce((g,v)=>(g[v.key]=bwe(v,f(t),r.fixed),g),{})),u=N(()=>f(i).reduce((g,v)=>g+v.width,0)),d=g=>f(e).find(v=>v.key===g),h=g=>f(c)[g],p=(g,v)=>{g.width=v};function m(g){var v;const{key:y}=g.currentTarget.dataset;if(!y)return;const{sortState:b,sortBy:x}=r;let _=lg.ASC;zt(b)?_=tE[b[y]]:_=tE[x.order],(v=r.onColumnSort)==null||v.call(r,{column:d(y),key:y,order:_})}return{columns:e,columnsStyles:c,columnsTotalWidth:u,fixedColumnsOnLeft:o,fixedColumnsOnRight:n,hasFixedColumns:l,mainColumns:a,normalColumns:s,visibleColumns:i,getColumn:d,getColumnStyle:h,updateColumnWidth:p,onColumnSorted:m}}const _we=(r,{mainTableRef:e,leftTableRef:t,rightTableRef:i,onMaybeEndReached:o})=>{const n=V({scrollLeft:0,scrollTop:0});function s(p){var m,g,v;const{scrollTop:y}=p;(m=e.value)==null||m.scrollTo(p),(g=t.value)==null||g.scrollToTop(y),(v=i.value)==null||v.scrollToTop(y)}function a(p){n.value=p,s(p)}function l(p){n.value.scrollTop=p,s(f(n))}function c(p){var m,g;n.value.scrollLeft=p,(g=(m=e.value)==null?void 0:m.scrollTo)==null||g.call(m,f(n))}function u(p){var m;a(p),(m=r.onScroll)==null||m.call(r,p)}function d({scrollTop:p}){const{scrollTop:m}=f(n);p!==m&&l(p)}function h(p,m="auto"){var g;(g=e.value)==null||g.scrollToRow(p,m)}return ke(()=>f(n).scrollTop,(p,m)=>{p>m&&o()}),{scrollPos:n,scrollTo:a,scrollToLeft:c,scrollToTop:l,scrollToRow:h,onScroll:u,onVerticalScroll:d}},wwe=(r,{mainTableRef:e,leftTableRef:t,rightTableRef:i})=>{const o=It(),{emit:n}=o,s=Rr(!1),a=Rr(null),l=V(r.defaultExpandedRowKeys||[]),c=V(-1),u=Rr(null),d=V({}),h=V({}),p=Rr({}),m=Rr({}),g=Rr({}),v=N(()=>wt(r.estimatedRowHeight));function y(T){var E;(E=r.onRowsRendered)==null||E.call(r,T),T.rowCacheEnd>f(c)&&(c.value=T.rowCacheEnd)}function b({hovered:T,rowKey:E}){a.value=T?E:null}function x({expanded:T,rowData:E,rowIndex:C,rowKey:B}){var I,L;const P=[...f(l)],U=P.indexOf(B);T?U===-1&&P.push(B):U>-1&&P.splice(U,1),l.value=P,n("update:expandedRowKeys",P),(I=r.onRowExpand)==null||I.call(r,{expanded:T,rowData:E,rowIndex:C,rowKey:B}),(L=r.onExpandedRowsChange)==null||L.call(r,P)}const _=Xo(()=>{var T,E,C,B;s.value=!0,d.value={...f(d),...f(h)},S(f(u),!1),h.value={},u.value=null,(T=e.value)==null||T.forceUpdate(),(E=t.value)==null||E.forceUpdate(),(C=i.value)==null||C.forceUpdate(),(B=o.proxy)==null||B.$forceUpdate(),s.value=!1},0);function S(T,E=!1){f(v)&&[e,t,i].forEach(C=>{const B=f(C);B&&B.resetAfterRowIndex(T,E)})}function w(T,E,C){const B=f(u);(B===null||B>C)&&(u.value=C),h.value[T]=E}function M({rowKey:T,height:E,rowIndex:C},B){B?B===QU.RIGHT?g.value[T]=E:p.value[T]=E:m.value[T]=E;const I=Math.max(...[p,g,m].map(L=>L.value[T]||0));f(d)[T]!==I&&(w(T,I,C),_())}return{hoveringRowKey:a,expandedRowKeys:l,lastRenderedRowIndex:c,isDynamic:v,isResetting:s,rowHeights:d,resetAfterIndex:S,onRowExpanded:x,onRowHovered:b,onRowsRendered:y,onRowHeightChange:M}},Swe=(r,{expandedRowKeys:e,lastRenderedRowIndex:t,resetAfterIndex:i})=>{const o=V({}),n=N(()=>{const a={},{data:l,rowKey:c}=r,u=f(e);if(!u||!u.length)return l;const d=[],h=new Set;u.forEach(m=>h.add(m));let p=l.slice();for(p.forEach(m=>a[m[c]]=0);p.length>0;){const m=p.shift();d.push(m),h.has(m[c])&&Array.isArray(m.children)&&m.children.length>0&&(p=[...m.children,...p],m.children.forEach(g=>a[g[c]]=a[m[c]]+1))}return o.value=a,d}),s=N(()=>{const{data:a,expandColumnKey:l}=r;return l?f(n):a});return ke(s,(a,l)=>{a!==l&&(t.value=-1,i(0,!0))}),{data:s,depthMap:o}},Mwe=(r,e)=>r+e,jb=r=>it(r)?r.reduce(Mwe,0):r,Fu=(r,e,t={})=>St(r)?r(e):r??t,mc=r=>(["width","maxWidth","minWidth","height"].forEach(e=>{r[e]=hi(r[e])}),r),ez=r=>$r(r)?e=>pt(r,e):r,Twe=(r,{columnsTotalWidth:e,data:t,fixedColumnsOnLeft:i,fixedColumnsOnRight:o})=>{const n=N(()=>{const{fixed:x,width:_,vScrollbarSize:S}=r,w=_-S;return x?Math.max(Math.round(f(e)),w):w}),s=N(()=>f(n)+(r.fixed?r.vScrollbarSize:0)),a=N(()=>{const{height:x=0,maxHeight:_=0,footerHeight:S,hScrollbarSize:w}=r;if(_>0){const M=f(m),T=f(l),E=f(p)+M+T+w;return Math.min(E,_-S)}return x-S}),l=N(()=>{const{rowHeight:x,estimatedRowHeight:_}=r,S=f(t);return wt(_)?S.length*_:S.length*x}),c=N(()=>{const{maxHeight:x}=r,_=f(a);if(wt(x)&&x>0)return _;const S=f(l)+f(p)+f(m);return Math.min(_,S)}),u=x=>x.width,d=N(()=>jb(f(i).map(u))),h=N(()=>jb(f(o).map(u))),p=N(()=>jb(r.headerHeight)),m=N(()=>{var x;return(((x=r.fixedData)==null?void 0:x.length)||0)*r.rowHeight}),g=N(()=>f(a)-f(p)-f(m)),v=N(()=>{const{style:x={},height:_,width:S}=r;return mc({...x,height:_,width:S})}),y=N(()=>mc({height:r.footerHeight})),b=N(()=>({top:hi(f(p)),bottom:hi(r.footerHeight),width:hi(r.width)}));return{bodyWidth:n,fixedTableHeight:c,mainTableHeight:a,leftTableWidth:d,rightTableWidth:h,headerWidth:s,rowsHeight:l,windowHeight:g,footerHeight:y,emptyStyle:b,rootStyle:v,headerHeight:p}},Ewe=r=>{const e=V(),t=V(0),i=V(0);let o;return Rt(()=>{o=ko(e,([n])=>{const{width:s,height:a}=n.contentRect,{paddingLeft:l,paddingRight:c,paddingTop:u,paddingBottom:d}=getComputedStyle(n.target),h=Number.parseInt(l)||0,p=Number.parseInt(c)||0,m=Number.parseInt(u)||0,g=Number.parseInt(d)||0;t.value=s-h-p,i.value=a-m-g}).stop}),Vr(()=>{o==null||o()}),ke([t,i],([n,s])=>{var a;(a=r.onResize)==null||a.call(r,{width:n,height:s})}),{sizer:e,width:t,height:i}};function Cwe(r){const e=V(),t=V(),i=V(),{columns:o,columnsStyles:n,columnsTotalWidth:s,fixedColumnsOnLeft:a,fixedColumnsOnRight:l,hasFixedColumns:c,mainColumns:u,onColumnSorted:d}=xwe(r,Yr(r,"columns"),Yr(r,"fixed")),{scrollTo:h,scrollToLeft:p,scrollToTop:m,scrollToRow:g,onScroll:v,onVerticalScroll:y,scrollPos:b}=_we(r,{mainTableRef:e,leftTableRef:t,rightTableRef:i,onMaybeEndReached:D}),{expandedRowKeys:x,hoveringRowKey:_,lastRenderedRowIndex:S,isDynamic:w,isResetting:M,rowHeights:T,resetAfterIndex:E,onRowExpanded:C,onRowHeightChange:B,onRowHovered:I,onRowsRendered:L}=wwe(r,{mainTableRef:e,leftTableRef:t,rightTableRef:i}),{data:P,depthMap:U}=Swe(r,{expandedRowKeys:x,lastRenderedRowIndex:S,resetAfterIndex:E}),{bodyWidth:G,fixedTableHeight:R,mainTableHeight:F,leftTableWidth:O,rightTableWidth:H,headerWidth:$,rowsHeight:j,windowHeight:J,footerHeight:ce,emptyStyle:ve,rootStyle:xe,headerHeight:te}=Twe(r,{columnsTotalWidth:s,data:P,fixedColumnsOnLeft:a,fixedColumnsOnRight:l}),Z=Rr(!1),de=V(),Ce=N(()=>{const K=f(P).length===0;return it(r.fixedData)?r.fixedData.length===0&&K:K});function ue(K){const{estimatedRowHeight:re,rowHeight:ae,rowKey:le}=r;return re?f(T)[f(P)[K][le]]||re:ae}function D(){const{onEndReached:K}=r;if(!K)return;const{scrollTop:re}=f(b),ae=f(j),le=f(J),Se=ae-(re+le)+r.hScrollbarSize;f(S)>=0&&ae===re+f(F)-f(te)&&K(Se)}return ke(()=>r.expandedRowKeys,K=>x.value=K,{deep:!0}),{columns:o,containerRef:de,mainTableRef:e,leftTableRef:t,rightTableRef:i,isDynamic:w,isResetting:M,isScrolling:Z,hoveringRowKey:_,hasFixedColumns:c,columnsStyles:n,columnsTotalWidth:s,data:P,expandedRowKeys:x,depthMap:U,fixedColumnsOnLeft:a,fixedColumnsOnRight:l,mainColumns:u,bodyWidth:G,emptyStyle:ve,rootStyle:xe,headerWidth:$,footerHeight:ce,mainTableHeight:F,fixedTableHeight:R,leftTableWidth:O,rightTableWidth:H,showEmpty:Ce,getRowHeight:ue,onColumnSorted:d,onRowHovered:I,onRowExpanded:C,onRowsRendered:L,onRowHeightChange:B,scrollTo:h,scrollToLeft:p,scrollToTop:m,scrollToRow:g,onScroll:v,onVerticalScroll:y}}const rE=Symbol("tableV2"),tz=String,dg={type:Te(Array),required:!0},iE={type:Te(Array)},rz={...iE,required:!0},Nwe=String,iz={type:Te(Array),default:()=>qr([])},Uu={type:Number,required:!0},oz={type:Te([String,Number,Symbol]),default:"id"},nz={type:Te(Object)},zu=Ye({class:String,columns:dg,columnsStyles:{type:Te(Object),required:!0},depth:Number,expandColumnKey:Nwe,estimatedRowHeight:{...Pu.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:Te(Function)},onRowHover:{type:Te(Function)},onRowHeightChange:{type:Te(Function)},rowData:{type:Te(Object),required:!0},rowEventHandlers:{type:Te(Object)},rowIndex:{type:Number,required:!0},rowKey:oz,style:{type:Te(Object)}}),oE={type:Number,required:!0},nE=Ye({class:String,columns:dg,fixedHeaderData:{type:Te(Array)},headerData:{type:Te(Array),required:!0},headerHeight:{type:Te([Number,Array]),default:50},rowWidth:oE,rowHeight:{type:Number,default:50},height:oE,width:oE}),$b=Ye({columns:dg,data:rz,fixedData:iE,estimatedRowHeight:zu.estimatedRowHeight,width:Uu,height:Uu,headerWidth:Uu,headerHeight:nE.headerHeight,bodyWidth:Uu,rowHeight:Uu,cache:hU.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:Pu.scrollbarAlwaysOn,scrollbarStartGap:Pu.scrollbarStartGap,scrollbarEndGap:Pu.scrollbarEndGap,class:tz,style:nz,containerStyle:nz,getRowHeight:{type:Te(Function),required:!0},rowKey:zu.rowKey,onRowsRendered:{type:Te(Function)},onScroll:{type:Te(Function)}}),Awe=Ye({cache:$b.cache,estimatedRowHeight:zu.estimatedRowHeight,rowKey:oz,headerClass:{type:Te([String,Function])},headerProps:{type:Te([Object,Function])},headerCellProps:{type:Te([Object,Function])},headerHeight:nE.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:Te([String,Function])},rowProps:{type:Te([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:Te([Object,Function])},columns:dg,data:rz,dataGetter:{type:Te(Function)},fixedData:iE,expandColumnKey:zu.expandColumnKey,expandedRowKeys:iz,defaultExpandedRowKeys:iz,class:tz,fixed:Boolean,style:{type:Te(Object)},width:Uu,height:Uu,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:Pu.hScrollbarSize,vScrollbarSize:Pu.vScrollbarSize,scrollbarAlwaysOn:mU.alwaysOn,sortBy:{type:Te(Object),default:()=>({})},sortState:{type:Te(Object),default:void 0},onColumnSort:{type:Te(Function)},onExpandedRowsChange:{type:Te(Function)},onEndReached:{type:Te(Function)},onRowExpand:zu.onRowExpand,onScroll:$b.onScroll,onRowsRendered:$b.onRowsRendered,rowEventHandlers:zu.rowEventHandlers}),sE=(r,{slots:e})=>{var t;const{cellData:i,style:o}=r,n=((t=i==null?void 0:i.toString)==null?void 0:t.call(i))||"";return ee("div",{class:r.class,title:n,style:o},[e.default?e.default(r):n])};sE.displayName="ElTableV2Cell",sE.inheritAttrs=!1;const aE=(r,{slots:e})=>{var t,i;return e.default?e.default(r):ee("div",{class:r.class,title:(t=r.column)==null?void 0:t.title},[(i=r.column)==null?void 0:i.title])};aE.displayName="ElTableV2HeaderCell",aE.inheritAttrs=!1;const Rwe=Ye({class:String,columns:dg,columnsStyles:{type:Te(Object),required:!0},headerIndex:Number,style:{type:Te(Object)}}),Lwe=ne({name:"ElTableV2HeaderRow",props:Rwe,setup(r,{slots:e}){return()=>{const{columns:t,columnsStyles:i,headerIndex:o,style:n}=r;let s=t.map((a,l)=>e.cell({columns:t,column:a,columnIndex:l,headerIndex:o,style:i[a.key]}));return e.header&&(s=e.header({cells:s.map(a=>it(a)&&a.length===1?a[0]:a),columns:t,headerIndex:o})),ee("div",{class:r.class,style:n,role:"row"},[s])}}}),Owe="ElTableV2Header",kwe=ne({name:Owe,props:nE,setup(r,{slots:e,expose:t}){const i=Pe("table-v2"),o=V(),n=N(()=>mc({width:r.width,height:r.height})),s=N(()=>mc({width:r.rowWidth,height:r.height})),a=N(()=>wu(f(r.headerHeight))),l=d=>{const h=f(o);lt(()=>{h!=null&&h.scroll&&h.scroll({left:d})})},c=()=>{const d=i.e("fixed-header-row"),{columns:h,fixedHeaderData:p,rowHeight:m}=r;return p==null?void 0:p.map((g,v)=>{var y;const b=mc({height:m,width:"100%"});return(y=e.fixed)==null?void 0:y.call(e,{class:d,columns:h,rowData:g,rowIndex:-(v+1),style:b})})},u=()=>{const d=i.e("dynamic-header-row"),{columns:h}=r;return f(a).map((p,m)=>{var g;const v=mc({width:"100%",height:p});return(g=e.dynamic)==null?void 0:g.call(e,{class:d,columns:h,headerIndex:m,style:v})})};return t({scrollToLeft:l}),()=>{if(!(r.height<=0))return ee("div",{ref:o,class:r.class,style:f(n),role:"rowgroup"},[ee("div",{style:f(s),class:i.e("header")},[u(),c()])])}}}),Iwe=r=>{const{isScrolling:e}=ot(rE),t=V(!1),i=V(),o=N(()=>wt(r.estimatedRowHeight)&&r.rowIndex>=0),n=(l=!1)=>{const c=f(i);if(!c)return;const{columns:u,onRowHeightChange:d,rowKey:h,rowIndex:p,style:m}=r,{height:g}=c.getBoundingClientRect();t.value=!0,lt(()=>{if(l||g!==Number.parseInt(m.height)){const v=u[0],y=(v==null?void 0:v.placeholderSign)===ug;d==null||d({rowKey:h,height:g,rowIndex:p},v&&!y&&v.fixed)}})},s=N(()=>{const{rowData:l,rowIndex:c,rowKey:u,onRowHover:d}=r,h=r.rowEventHandlers||{},p={};return Object.entries(h).forEach(([m,g])=>{St(g)&&(p[m]=v=>{g({event:v,rowData:l,rowIndex:c,rowKey:u})})}),d&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:m,hovered:g})=>{const v=p[m];p[m]=y=>{d({event:y,hovered:g,rowData:l,rowIndex:c,rowKey:u}),v==null||v(y)}}),p}),a=l=>{const{onRowExpand:c,rowData:u,rowIndex:d,rowKey:h}=r;c==null||c({expanded:l,rowData:u,rowIndex:d,rowKey:h})};return Rt(()=>{f(o)&&n(!0)}),{isScrolling:e,measurable:o,measured:t,rowRef:i,eventHandlers:s,onExpand:a}},Pwe="ElTableV2TableRow",Dwe=ne({name:Pwe,props:zu,setup(r,{expose:e,slots:t,attrs:i}){const{eventHandlers:o,isScrolling:n,measurable:s,measured:a,rowRef:l,onExpand:c}=Iwe(r);return e({onExpand:c}),()=>{const{columns:u,columnsStyles:d,expandColumnKey:h,depth:p,rowData:m,rowIndex:g,style:v}=r;let y=u.map((b,x)=>{const _=it(m.children)&&m.children.length>0&&b.key===h;return t.cell({column:b,columns:u,columnIndex:x,depth:p,style:d[b.key],rowData:m,rowIndex:g,isScrolling:f(n),expandIconProps:_?{rowData:m,rowIndex:g,onExpand:c}:void 0})});if(t.row&&(y=t.row({cells:y.map(b=>it(b)&&b.length===1?b[0]:b),style:v,columns:u,depth:p,rowData:m,rowIndex:g,isScrolling:f(n)})),f(s)){const{height:b,...x}=v||{},_=f(a);return ee("div",$t({ref:l,class:r.class,style:_?v:x,role:"row"},i,f(o)),[y])}return ee("div",$t(i,{ref:l,class:r.class,style:v,role:"row"},f(o)),[y])}}}),Bwe=r=>{const{sortOrder:e}=r;return ee(st,{size:14,class:r.class},{default:()=>[e===lg.ASC?ee(Kie,null,null):ee(Hie,null,null)]})},Fwe=r=>{const{expanded:e,expandable:t,onExpand:i,style:o,size:n}=r,s={onClick:t?()=>i(!e):void 0,class:r.class};return ee(st,$t(s,{size:n,style:o}),{default:()=>[ee(Ko,null,null)]})},Uwe="ElTableV2Grid",zwe=r=>{const e=V(),t=V(),i=N(()=>{const{data:g,rowHeight:v,estimatedRowHeight:y}=r;if(!y)return g.length*v}),o=N(()=>{const{fixedData:g,rowHeight:v}=r;return((g==null?void 0:g.length)||0)*v}),n=N(()=>jb(r.headerHeight)),s=N(()=>{const{height:g}=r;return Math.max(0,g-f(n)-f(o))}),a=N(()=>f(n)+f(o)>0),l=({data:g,rowIndex:v})=>g[v][r.rowKey];function c({rowCacheStart:g,rowCacheEnd:v,rowVisibleStart:y,rowVisibleEnd:b}){var x;(x=r.onRowsRendered)==null||x.call(r,{rowCacheStart:g,rowCacheEnd:v,rowVisibleStart:y,rowVisibleEnd:b})}function u(g,v){var y;(y=t.value)==null||y.resetAfterRowIndex(g,v)}function d(g,v){const y=f(e),b=f(t);!y||!b||(zt(g)?(y.scrollToLeft(g.scrollLeft),b.scrollTo(g)):(y.scrollToLeft(g),b.scrollTo({scrollLeft:g,scrollTop:v})))}function h(g){var v;(v=f(t))==null||v.scrollTo({scrollTop:g})}function p(g,v){var y;(y=f(t))==null||y.scrollToItem(g,1,v)}function m(){var g,v;(g=f(t))==null||g.$forceUpdate(),(v=f(e))==null||v.$forceUpdate()}return{bodyRef:t,forceUpdate:m,fixedRowHeight:o,gridHeight:s,hasHeader:a,headerHeight:n,headerRef:e,totalHeight:i,itemKey:l,onItemRendered:c,resetAfterRowIndex:u,scrollTo:d,scrollToTop:h,scrollToRow:p}},lE=ne({name:Uwe,props:$b,setup(r,{slots:e,expose:t}){const{ns:i}=ot(rE),{bodyRef:o,fixedRowHeight:n,gridHeight:s,hasHeader:a,headerRef:l,headerHeight:c,totalHeight:u,forceUpdate:d,itemKey:h,onItemRendered:p,resetAfterRowIndex:m,scrollTo:g,scrollToTop:v,scrollToRow:y}=zwe(r);t({forceUpdate:d,totalHeight:u,scrollTo:g,scrollToTop:v,scrollToRow:y,resetAfterRowIndex:m});const b=()=>r.bodyWidth;return()=>{const{cache:x,columns:_,data:S,fixedData:w,useIsScrolling:M,scrollbarAlwaysOn:T,scrollbarEndGap:E,scrollbarStartGap:C,style:B,rowHeight:I,bodyWidth:L,estimatedRowHeight:P,headerWidth:U,height:G,width:R,getRowHeight:F,onScroll:O}=r,H=wt(P),$=H?vxe:pxe,j=f(c);return ee("div",{role:"table",class:[i.e("table"),r.class],style:B},[ee($,{ref:o,data:S,useIsScrolling:M,itemKey:h,columnCache:0,columnWidth:H?b:L,totalColumn:1,totalRow:S.length,rowCache:x,rowHeight:H?F:I,width:R,height:f(s),class:i.e("body"),role:"rowgroup",scrollbarStartGap:C,scrollbarEndGap:E,scrollbarAlwaysOn:T,onScroll:O,onItemRendered:p,perfMode:!1},{default:J=>{var ce;const ve=S[J.rowIndex];return(ce=e.row)==null?void 0:ce.call(e,{...J,columns:_,rowData:ve})}}),f(a)&&ee(kwe,{ref:l,class:i.e("header-wrapper"),columns:_,headerData:S,headerHeight:r.headerHeight,fixedHeaderData:w,rowWidth:U,rowHeight:I,width:R,height:Math.min(j+f(n),G)},{dynamic:e.header,fixed:e.row})])}}});function Vwe(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!$r(r)}const Gwe=(r,{slots:e})=>{const{mainTableRef:t,...i}=r;return ee(lE,$t({ref:t},i),Vwe(e)?e:{default:()=>[e]})};function Hwe(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!$r(r)}const jwe=(r,{slots:e})=>{if(!r.columns.length)return;const{leftTableRef:t,...i}=r;return ee(lE,$t({ref:t},i),Hwe(e)?e:{default:()=>[e]})};function $we(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!$r(r)}const Wwe=(r,{slots:e})=>{if(!r.columns.length)return;const{rightTableRef:t,...i}=r;return ee(lE,$t({ref:t},i),$we(e)?e:{default:()=>[e]})};function qwe(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!$r(r)}const Xwe=(r,{slots:e})=>{const{columns:t,columnsStyles:i,depthMap:o,expandColumnKey:n,expandedRowKeys:s,estimatedRowHeight:a,hasFixedColumns:l,hoveringRowKey:c,rowData:u,rowIndex:d,style:h,isScrolling:p,rowProps:m,rowClass:g,rowKey:v,rowEventHandlers:y,ns:b,onRowHovered:x,onRowExpanded:_}=r,S=Fu(g,{columns:t,rowData:u,rowIndex:d},""),w=Fu(m,{columns:t,rowData:u,rowIndex:d}),M=u[v],T=o[M]||0,E=!!n,C=d<0,B=[b.e("row"),S,{[b.e(`row-depth-${T}`)]:E&&d>=0,[b.is("expanded")]:E&&s.includes(M),[b.is("hovered")]:!p&&M===c,[b.is("fixed")]:!T&&C,[b.is("customized")]:!!e.row}],I=l?x:void 0,L={...w,columns:t,columnsStyles:i,class:B,depth:T,expandColumnKey:n,estimatedRowHeight:C?void 0:a,isScrolling:p,rowIndex:d,rowData:u,rowKey:M,rowEventHandlers:y,style:h};return ee(Dwe,$t(L,{onRowHover:I,onRowExpand:_}),qwe(e)?e:{default:()=>[e]})},cE=({columns:r,column:e,columnIndex:t,depth:i,expandIconProps:o,isScrolling:n,rowData:s,rowIndex:a,style:l,expandedRowKeys:c,ns:u,cellProps:d,expandColumnKey:h,indentSize:p,iconSize:m,rowKey:g},{slots:v})=>{const y=mc(l);if(e.placeholderSign===ug)return ee("div",{class:u.em("row-cell","placeholder"),style:y},null);const{cellRenderer:b,dataKey:x,dataGetter:_}=e,S=ez(b)||v.default||(U=>ee(sE,U,null)),w=St(_)?_({columns:r,column:e,columnIndex:t,rowData:s,rowIndex:a}):Wr(s,x??""),M=Fu(d,{cellData:w,columns:r,column:e,columnIndex:t,rowIndex:a,rowData:s}),T={class:u.e("cell-text"),columns:r,column:e,columnIndex:t,cellData:w,isScrolling:n,rowData:s,rowIndex:a},E=S(T),C=[u.e("row-cell"),e.class,e.align===cg.CENTER&&u.is("align-center"),e.align===cg.RIGHT&&u.is("align-right")],B=a>=0&&h&&e.key===h,I=a>=0&&c.includes(s[g]);let L;const P=`margin-inline-start: ${i*p}px;`;return B&&(zt(o)?L=ee(Fwe,$t(o,{class:[u.e("expand-icon"),u.is("expanded",I)],size:m,expanded:I,style:P,expandable:!0}),null):L=ee("div",{style:[P,`width: ${m}px; height: ${m}px;`].join(" ")},null)),ee("div",$t({class:C,style:y},M,{role:"cell"}),[L,E])};cE.inheritAttrs=!1;function Kwe(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!$r(r)}const Ywe=({columns:r,columnsStyles:e,headerIndex:t,style:i,headerClass:o,headerProps:n,ns:s},{slots:a})=>{const l={columns:r,headerIndex:t},c=[s.e("header-row"),Fu(o,l,""),{[s.is("customized")]:!!a.header}],u={...Fu(n,l),columnsStyles:e,class:c,columns:r,headerIndex:t,style:i};return ee(Lwe,u,Kwe(a)?a:{default:()=>[a]})},sz=(r,{slots:e})=>{const{column:t,ns:i,style:o,onColumnSorted:n}=r,s=mc(o);if(t.placeholderSign===ug)return ee("div",{class:i.em("header-row-cell","placeholder"),style:s},null);const{headerCellRenderer:a,headerClass:l,sortable:c}=t,u={...r,class:i.e("header-cell-text")},d=(ez(a)||e.default||(x=>ee(aE,x,null)))(u),{sortBy:h,sortState:p,headerCellProps:m}=r;let g,v;if(p){const x=p[t.key];g=!!tE[x],v=g?x:lg.ASC}else g=t.key===h.key,v=g?h.order:lg.ASC;const y=[i.e("header-cell"),Fu(l,r,""),t.align===cg.CENTER&&i.is("align-center"),t.align===cg.RIGHT&&i.is("align-right"),c&&i.is("sortable")],b={...Fu(m,r),onClick:t.sortable?n:void 0,class:y,style:s,"data-key":t.key};return ee("div",$t(b,{role:"columnheader"}),[d,c&&ee(Bwe,{class:[i.e("sort-icon"),g&&i.is("sorting")],sortOrder:v},null)])},az=(r,{slots:e})=>{var t;return ee("div",{class:r.class,style:r.style},[(t=e.default)==null?void 0:t.call(e)])};az.displayName="ElTableV2Footer";const lz=(r,{slots:e})=>ee("div",{class:r.class,style:r.style},[e.default?e.default():ee(q4,null,null)]);lz.displayName="ElTableV2Empty";const cz=(r,{slots:e})=>{var t;return ee("div",{class:r.class,style:r.style},[(t=e.default)==null?void 0:t.call(e)])};cz.displayName="ElTableV2Overlay";function hg(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!$r(r)}const Jwe="ElTableV2",Zwe=ne({name:Jwe,props:Awe,setup(r,{slots:e,expose:t}){const i=Pe("table-v2"),{columnsStyles:o,fixedColumnsOnLeft:n,fixedColumnsOnRight:s,mainColumns:a,mainTableHeight:l,fixedTableHeight:c,leftTableWidth:u,rightTableWidth:d,data:h,depthMap:p,expandedRowKeys:m,hasFixedColumns:g,hoveringRowKey:v,mainTableRef:y,leftTableRef:b,rightTableRef:x,isDynamic:_,isResetting:S,isScrolling:w,bodyWidth:M,emptyStyle:T,rootStyle:E,headerWidth:C,footerHeight:B,showEmpty:I,scrollTo:L,scrollToLeft:P,scrollToTop:U,scrollToRow:G,getRowHeight:R,onColumnSorted:F,onRowHeightChange:O,onRowHovered:H,onRowExpanded:$,onRowsRendered:j,onScroll:J,onVerticalScroll:ce}=Cwe(r);return t({scrollTo:L,scrollToLeft:P,scrollToTop:U,scrollToRow:G}),Wt(rE,{ns:i,isResetting:S,hoveringRowKey:v,isScrolling:w}),()=>{const{cache:ve,cellProps:xe,estimatedRowHeight:te,expandColumnKey:Z,fixedData:de,headerHeight:Ce,headerClass:ue,headerProps:D,headerCellProps:K,sortBy:re,sortState:ae,rowHeight:le,rowClass:Se,rowEventHandlers:Ae,rowKey:Ne,rowProps:Me,scrollbarAlwaysOn:Le,indentSize:je,iconSize:Y,useIsScrolling:z,vScrollbarSize:me,width:Ie}=r,Ue=f(h),Re={cache:ve,class:i.e("main"),columns:f(a),data:Ue,fixedData:de,estimatedRowHeight:te,bodyWidth:f(M)+me,headerHeight:Ce,headerWidth:f(C),height:f(l),mainTableRef:y,rowKey:Ne,rowHeight:le,scrollbarAlwaysOn:Le,scrollbarStartGap:2,scrollbarEndGap:me,useIsScrolling:z,width:Ie,getRowHeight:R,onRowsRendered:j,onScroll:J},$e=f(u),Ve=f(c),ye={cache:ve,class:i.e("left"),columns:f(n),data:Ue,estimatedRowHeight:te,leftTableRef:b,rowHeight:le,bodyWidth:$e,headerWidth:$e,headerHeight:Ce,height:Ve,rowKey:Ne,scrollbarAlwaysOn:Le,scrollbarStartGap:2,scrollbarEndGap:me,useIsScrolling:z,width:$e,getRowHeight:R,onScroll:ce},q=f(d)+me,oe={cache:ve,class:i.e("right"),columns:f(s),data:Ue,estimatedRowHeight:te,rightTableRef:x,rowHeight:le,bodyWidth:q,headerWidth:q,headerHeight:Ce,height:Ve,rowKey:Ne,scrollbarAlwaysOn:Le,scrollbarStartGap:2,scrollbarEndGap:me,width:q,style:`--${f(i.namespace)}-table-scrollbar-size: ${me}px`,useIsScrolling:z,getRowHeight:R,onScroll:ce},fe=f(o),ie={ns:i,depthMap:f(p),columnsStyles:fe,expandColumnKey:Z,expandedRowKeys:f(m),estimatedRowHeight:te,hasFixedColumns:f(g),hoveringRowKey:f(v),rowProps:Me,rowClass:Se,rowKey:Ne,rowEventHandlers:Ae,onRowHovered:H,onRowExpanded:$,onRowHeightChange:O},De={cellProps:xe,expandColumnKey:Z,indentSize:je,iconSize:Y,rowKey:Ne,expandedRowKeys:f(m),ns:i},et={ns:i,headerClass:ue,headerProps:D,columnsStyles:fe},ht={ns:i,sortBy:re,sortState:ae,headerCellProps:K,onColumnSorted:F},be={row:xt=>ee(Xwe,$t(xt,ie),{row:e.row,cell:he=>{let Ee;return e.cell?ee(cE,$t(he,De,{style:fe[he.column.key]}),hg(Ee=e.cell(he))?Ee:{default:()=>[Ee]}):ee(cE,$t(he,De,{style:fe[he.column.key]}),null)}}),header:xt=>ee(Ywe,$t(xt,et),{header:e.header,cell:he=>{let Ee;return e["header-cell"]?ee(sz,$t(he,ht,{style:fe[he.column.key]}),hg(Ee=e["header-cell"](he))?Ee:{default:()=>[Ee]}):ee(sz,$t(he,ht,{style:fe[he.column.key]}),null)}})},mt=[r.class,i.b(),i.e("root"),{[i.is("dynamic")]:f(_)}],at={class:i.e("footer"),style:f(B)};return ee("div",{class:mt,style:f(E)},[ee(Gwe,Re,hg(be)?be:{default:()=>[be]}),ee(jwe,ye,hg(be)?be:{default:()=>[be]}),ee(Wwe,oe,hg(be)?be:{default:()=>[be]}),e.footer&&ee(az,at,{default:e.footer}),f(I)&&ee(lz,{class:i.e("empty"),style:f(T)},{default:e.empty}),e.overlay&&ee(cz,{class:i.e("overlay")},{default:e.overlay})])}}}),Qwe=Ye({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:Te(Function)}}),eSe=ne({name:"ElAutoResizer",props:Qwe,setup(r,{slots:e}){const t=Pe("auto-resizer"),{height:i,width:o,sizer:n}=Ewe(r),s={width:"100%",height:"100%"};return()=>{var a;return ee("div",{ref:n,class:t.b(),style:s},[(a=e.default)==null?void 0:a.call(e,{height:i.value,width:o.value})])}}}),tSe=Bt(Zwe),rSe=Bt(eSe),Wb=Symbol("tabsRootContextKey"),iSe=Ye({tabs:{type:Te(Array),default:()=>qr([])}}),uz="ElTabBar",oSe=ne({name:uz}),nSe=ne({...oSe,props:iSe,setup(r,{expose:e}){const t=r,i=It(),o=ot(Wb);o||Ei(uz,"<el-tabs><el-tab-bar /></el-tabs>");const n=Pe("tabs"),s=V(),a=V(),l=()=>{let u=0,d=0;const h=["top","bottom"].includes(o.props.tabPosition)?"width":"height",p=h==="width"?"x":"y",m=p==="x"?"left":"top";return t.tabs.every(g=>{var v,y;const b=(y=(v=i.parent)==null?void 0:v.refs)==null?void 0:y[`tab-${g.uid}`];if(!b)return!1;if(!g.active)return!0;u=b[`offset${pa(m)}`],d=b[`client${pa(h)}`];const x=window.getComputedStyle(b);return h==="width"&&(t.tabs.length>1&&(d-=Number.parseFloat(x.paddingLeft)+Number.parseFloat(x.paddingRight)),u+=Number.parseFloat(x.paddingLeft)),!1}),{[h]:`${d}px`,transform:`translate${pa(p)}(${u}px)`}},c=()=>a.value=l();return ke(()=>t.tabs,async()=>{await lt(),c()},{immediate:!0}),ko(s,()=>c()),e({ref:s,update:c}),(u,d)=>(A(),W("div",{ref_key:"barRef",ref:s,class:k([f(n).e("active-bar"),f(n).is(f(o).props.tabPosition)]),style:ct(a.value)},null,6))}});var sSe=Xe(nSe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const aSe=Ye({panes:{type:Te(Array),default:()=>qr([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),lSe={tabClick:(r,e,t)=>t instanceof Event,tabRemove:(r,e)=>e instanceof Event},dz="ElTabNav",cSe=ne({name:dz,props:aSe,emits:lSe,setup(r,{expose:e,emit:t}){const i=It(),o=ot(Wb);o||Ei(dz,"<el-tabs><tab-nav /></el-tabs>");const n=Pe("tabs"),s=Eq(),a=Pq(),l=V(),c=V(),u=V(),d=V(),h=V(!1),p=V(0),m=V(!1),g=V(!0),v=N(()=>["top","bottom"].includes(o.props.tabPosition)?"width":"height"),y=N(()=>({transform:`translate${v.value==="width"?"X":"Y"}(-${p.value}px)`})),b=()=>{if(!l.value)return;const E=l.value[`offset${pa(v.value)}`],C=p.value;if(!C)return;const B=C>E?C-E:0;p.value=B},x=()=>{if(!l.value||!c.value)return;const E=c.value[`offset${pa(v.value)}`],C=l.value[`offset${pa(v.value)}`],B=p.value;if(E-B<=C)return;const I=E-B>C*2?B+C:E-C;p.value=I},_=async()=>{const E=c.value;if(!h.value||!u.value||!l.value||!E)return;await lt();const C=u.value.querySelector(".is-active");if(!C)return;const B=l.value,I=["top","bottom"].includes(o.props.tabPosition),L=C.getBoundingClientRect(),P=B.getBoundingClientRect(),U=I?E.offsetWidth-P.width:E.offsetHeight-P.height,G=p.value;let R=G;I?(L.left<P.left&&(R=G-(P.left-L.left)),L.right>P.right&&(R=G+L.right-P.right)):(L.top<P.top&&(R=G-(P.top-L.top)),L.bottom>P.bottom&&(R=G+(L.bottom-P.bottom))),R=Math.max(R,0),p.value=Math.min(R,U)},S=()=>{var E;if(!c.value||!l.value)return;r.stretch&&((E=d.value)==null||E.update());const C=c.value[`offset${pa(v.value)}`],B=l.value[`offset${pa(v.value)}`],I=p.value;B<C?(h.value=h.value||{},h.value.prev=I,h.value.next=I+B<C,C-I<B&&(p.value=C-B)):(h.value=!1,I>0&&(p.value=0))},w=E=>{const C=E.code,{up:B,down:I,left:L,right:P}=ft;if(![B,I,L,P].includes(C))return;const U=Array.from(E.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),G=U.indexOf(E.target);let R;C===L||C===B?G===0?R=U.length-1:R=G-1:G<U.length-1?R=G+1:R=0,U[R].focus({preventScroll:!0}),U[R].click(),M()},M=()=>{g.value&&(m.value=!0)},T=()=>m.value=!1;return ke(s,E=>{E==="hidden"?g.value=!1:E==="visible"&&setTimeout(()=>g.value=!0,50)}),ke(a,E=>{E?setTimeout(()=>g.value=!0,50):g.value=!1}),ko(u,S),Rt(()=>setTimeout(()=>_(),0)),Ka(()=>S()),e({scrollToActiveTab:_,removeFocus:T}),ke(()=>r.panes,()=>i.update(),{flush:"post",deep:!0}),()=>{const E=h.value?[ee("span",{class:[n.e("nav-prev"),n.is("disabled",!h.value.prev)],onClick:b},[ee(st,null,{default:()=>[ee(ec,null,null)]})]),ee("span",{class:[n.e("nav-next"),n.is("disabled",!h.value.next)],onClick:x},[ee(st,null,{default:()=>[ee(Ko,null,null)]})])]:null,C=r.panes.map((B,I)=>{var L,P,U,G;const R=B.uid,F=B.props.disabled,O=(P=(L=B.props.name)!=null?L:B.index)!=null?P:`${I}`,H=!F&&(B.isClosable||r.editable);B.index=`${I}`;const $=H?ee(st,{class:"is-icon-close",onClick:ce=>t("tabRemove",B,ce)},{default:()=>[ee(Vs,null,null)]}):null,j=((G=(U=B.slots).label)==null?void 0:G.call(U))||B.props.label,J=!F&&B.active?0:-1;return ee("div",{ref:`tab-${R}`,class:[n.e("item"),n.is(o.props.tabPosition),n.is("active",B.active),n.is("disabled",F),n.is("closable",H),n.is("focus",m.value)],id:`tab-${O}`,key:`tab-${R}`,"aria-controls":`pane-${O}`,role:"tab","aria-selected":B.active,tabindex:J,onFocus:()=>M(),onBlur:()=>T(),onClick:ce=>{T(),t("tabClick",B,O,ce)},onKeydown:ce=>{H&&(ce.code===ft.delete||ce.code===ft.backspace)&&t("tabRemove",B,ce)}},[j,$])});return ee("div",{ref:u,class:[n.e("nav-wrap"),n.is("scrollable",!!h.value),n.is(o.props.tabPosition)]},[E,ee("div",{class:n.e("nav-scroll"),ref:l},[ee("div",{class:[n.e("nav"),n.is(o.props.tabPosition),n.is("stretch",r.stretch&&["top","bottom"].includes(o.props.tabPosition))],ref:c,style:y.value,role:"tablist",onKeydown:w},[r.type?null:ee(sSe,{ref:d,tabs:[...r.panes]},null),C])])])}}}),uSe=Ye({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Te(Function),default:()=>!0},stretch:Boolean}),uE=r=>Tt(r)||wt(r),dSe={[Vt]:r=>uE(r),tabClick:(r,e)=>e instanceof Event,tabChange:r=>uE(r),edit:(r,e)=>["remove","add"].includes(e),tabRemove:r=>uE(r),tabAdd:()=>!0};var hSe=ne({name:"ElTabs",props:uSe,emits:dSe,setup(r,{emit:e,slots:t,expose:i}){var o,n;const s=Pe("tabs"),{children:a,addChild:l,removeChild:c}=LM(It(),"ElTabPane"),u=V(),d=V((n=(o=r.modelValue)!=null?o:r.activeName)!=null?n:"0"),h=y=>{d.value=y,e(Vt,y),e("tabChange",y)},p=async y=>{var b,x,_;if(!(d.value===y||Pi(y)))try{await((b=r.beforeLeave)==null?void 0:b.call(r,y,d.value))!==!1&&(h(y),(_=(x=u.value)==null?void 0:x.removeFocus)==null||_.call(x))}catch{}},m=(y,b,x)=>{y.props.disabled||(p(b),e("tabClick",y,x))},g=(y,b)=>{y.props.disabled||Pi(y.props.name)||(b.stopPropagation(),e("edit",y.props.name,"remove"),e("tabRemove",y.props.name))},v=()=>{e("edit",void 0,"add"),e("tabAdd")};return ga({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},N(()=>!!r.activeName)),ke(()=>r.activeName,y=>p(y)),ke(()=>r.modelValue,y=>p(y)),ke(d,async()=>{var y;await lt(),(y=u.value)==null||y.scrollToActiveTab()}),Wt(Wb,{props:r,currentName:d,registerPane:l,unregisterPane:c}),i({currentName:d}),()=>{const y=r.editable||r.addable?ee("span",{class:s.e("new-tab"),tabindex:"0",onClick:v,onKeydown:_=>{_.code===ft.enter&&v()}},[ee(st,{class:s.is("icon-plus")},{default:()=>[ee(sD,null,null)]})]):null,b=ee("div",{class:[s.e("header"),s.is(r.tabPosition)]},[y,ee(cSe,{ref:u,currentName:d.value,editable:r.editable,type:r.type,panes:a.value,stretch:r.stretch,onTabClick:m,onTabRemove:g},null)]),x=ee("div",{class:s.e("content")},[Oe(t,"default")]);return ee("div",{class:[s.b(),s.m(r.tabPosition),{[s.m("card")]:r.type==="card",[s.m("border-card")]:r.type==="border-card"}]},[...r.tabPosition!=="bottom"?[b,x]:[x,b]])}}});const pSe=Ye({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),fSe=["id","aria-hidden","aria-labelledby"],hz="ElTabPane",mSe=ne({name:hz}),gSe=ne({...mSe,props:pSe,setup(r){const e=r,t=It(),i=yo(),o=ot(Wb);o||Ei(hz,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=Pe("tab-pane"),s=V(),a=N(()=>e.closable||o.props.closable),l=M3(()=>{var p;return o.currentName.value===((p=e.name)!=null?p:s.value)}),c=V(l.value),u=N(()=>{var p;return(p=e.name)!=null?p:s.value}),d=M3(()=>!e.lazy||c.value||l.value);ke(l,p=>{p&&(c.value=!0)});const h=ur({uid:t.uid,slots:i,props:e,paneName:u,active:l,index:s,isClosable:a});return Rt(()=>{o.registerPane(h)}),Gn(()=>{o.unregisterPane(h.uid)}),(p,m)=>f(d)?At((A(),W("div",{key:0,id:`pane-${f(u)}`,class:k(f(n).b()),role:"tabpanel","aria-hidden":!f(l),"aria-labelledby":`tab-${f(u)}`},[Oe(p.$slots,"default")],10,fSe)),[[nr,f(l)]]):we("v-if",!0)}});var pz=Xe(gSe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const vSe=Bt(hSe,{TabPane:pz}),ySe=ii(pz),bSe=Ye({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:ma,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),xSe=ne({name:"ElText"}),_Se=ne({...xSe,props:bSe,setup(r){const e=r,t=Ci(),i=Pe("text"),o=N(()=>[i.b(),i.m(e.type),i.m(t.value),i.is("truncated",e.truncated)]);return(n,s)=>(A(),_e(Ht(n.tag),{class:k(f(o))},{default:se(()=>[Oe(n.$slots,"default")]),_:3},8,["class"]))}});var wSe=Xe(_Se,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const SSe=Bt(wSe),MSe=Ye({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:String,default:"light"},clearable:{type:Boolean,default:!0},size:bo,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:Te([String,Object]),default:()=>oD},clearIcon:{type:Te([String,Object]),default:()=>tc}}),ul=r=>{const e=(r||"").split(":");if(e.length>=2){let t=Number.parseInt(e[0],10);const i=Number.parseInt(e[1],10),o=r.toUpperCase();return o.includes("AM")&&t===12?t=0:o.includes("PM")&&t!==12&&(t+=12),{hours:t,minutes:i}}return null},dE=(r,e)=>{const t=ul(r);if(!t)return-1;const i=ul(e);if(!i)return-1;const o=t.minutes+t.hours*60,n=i.minutes+i.hours*60;return o===n?0:o>n?1:-1},fz=r=>`${r}`.padStart(2,"0"),sp=r=>`${fz(r.hours)}:${fz(r.minutes)}`,TSe=(r,e)=>{const t=ul(r);if(!t)return"";const i=ul(e);if(!i)return"";const o={hours:t.hours,minutes:t.minutes};return o.minutes+=i.minutes,o.hours+=i.hours,o.hours+=Math.floor(o.minutes/60),o.minutes=o.minutes%60,sp(o)},ESe=ne({name:"ElTimeSelect"}),CSe=ne({...ESe,props:MSe,emits:["change","blur","focus","update:modelValue"],setup(r,{expose:e}){const t=r;Pt.extend(ZM);const{Option:i}=Iu,o=Pe("input"),n=V(),s=bn(),a=N(()=>t.modelValue),l=N(()=>{const m=ul(t.start);return m?sp(m):null}),c=N(()=>{const m=ul(t.end);return m?sp(m):null}),u=N(()=>{const m=ul(t.step);return m?sp(m):null}),d=N(()=>{const m=ul(t.minTime||"");return m?sp(m):null}),h=N(()=>{const m=ul(t.maxTime||"");return m?sp(m):null}),p=N(()=>{const m=[];if(t.start&&t.end&&t.step){let g=l.value,v;for(;g&&c.value&&dE(g,c.value)<=0;)v=Pt(g,"HH:mm").format(t.format),m.push({value:v,disabled:dE(g,d.value||"-1:-1")<=0||dE(g,h.value||"100:100")>=0}),g=TSe(g,u.value)}return m});return e({blur:()=>{var m,g;(g=(m=n.value)==null?void 0:m.blur)==null||g.call(m)},focus:()=>{var m,g;(g=(m=n.value)==null?void 0:m.focus)==null||g.call(m)}}),(m,g)=>(A(),_e(f(Iu),{ref_key:"select",ref:n,"model-value":f(a),disabled:f(s),clearable:m.clearable,"clear-icon":m.clearIcon,size:m.size,effect:m.effect,placeholder:m.placeholder,"default-first-option":"",filterable:m.editable,"onUpdate:modelValue":g[0]||(g[0]=v=>m.$emit("update:modelValue",v)),onChange:g[1]||(g[1]=v=>m.$emit("change",v)),onBlur:g[2]||(g[2]=v=>m.$emit("blur",v)),onFocus:g[3]||(g[3]=v=>m.$emit("focus",v))},{prefix:se(()=>[m.prefixIcon?(A(),_e(f(st),{key:0,class:k(f(o).e("prefix-icon"))},{default:se(()=>[(A(),_e(Ht(m.prefixIcon)))]),_:1},8,["class"])):we("v-if",!0)]),default:se(()=>[(A(!0),W(nt,null,jt(f(p),v=>(A(),_e(f(i),{key:v.value,label:v.value,value:v.value,disabled:v.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable"]))}});var qb=Xe(CSe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-select/src/time-select.vue"]]);qb.install=r=>{r.component(qb.name,qb)};const NSe=qb,ASe=NSe,RSe=ne({name:"ElTimeline",setup(r,{slots:e}){const t=Pe("timeline");return Wt("timeline",e),()=>pt("ul",{class:[t.b()]},[Oe(e,"default")])}}),LSe=Ye({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:Lr},hollow:{type:Boolean,default:!1}}),OSe=ne({name:"ElTimelineItem"}),kSe=ne({...OSe,props:LSe,setup(r){const e=r,t=Pe("timeline-item"),i=N(()=>[t.e("node"),t.em("node",e.size||""),t.em("node",e.type||""),t.is("hollow",e.hollow)]);return(o,n)=>(A(),W("li",{class:k([f(t).b(),{[f(t).e("center")]:o.center}])},[X("div",{class:k(f(t).e("tail"))},null,2),o.$slots.dot?we("v-if",!0):(A(),W("div",{key:0,class:k(f(i)),style:ct({backgroundColor:o.color})},[o.icon?(A(),_e(f(st),{key:0,class:k(f(t).e("icon"))},{default:se(()=>[(A(),_e(Ht(o.icon)))]),_:1},8,["class"])):we("v-if",!0)],6)),o.$slots.dot?(A(),W("div",{key:1,class:k(f(t).e("dot"))},[Oe(o.$slots,"dot")],2)):we("v-if",!0),X("div",{class:k(f(t).e("wrapper"))},[!o.hideTimestamp&&o.placement==="top"?(A(),W("div",{key:0,class:k([f(t).e("timestamp"),f(t).is("top")])},ze(o.timestamp),3)):we("v-if",!0),X("div",{class:k(f(t).e("content"))},[Oe(o.$slots,"default")],2),!o.hideTimestamp&&o.placement==="bottom"?(A(),W("div",{key:1,class:k([f(t).e("timestamp"),f(t).is("bottom")])},ze(o.timestamp),3)):we("v-if",!0)],2)],2))}});var mz=Xe(kSe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/timeline/src/timeline-item.vue"]]);const ISe=Bt(RSe,{TimelineItem:mz}),PSe=ii(mz),gz=Ye({nowrap:Boolean});var vz=(r=>(r.top="top",r.bottom="bottom",r.left="left",r.right="right",r))(vz||{});const DSe=Object.values(vz),hE=Ye({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:Te(Object),default:null}}),BSe=Ye({side:{type:Te(String),values:DSe,required:!0}}),FSe=["absolute","fixed"],USe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],pE=Ye({ariaLabel:String,arrowPadding:{type:Te(Number),default:5},effect:{type:String,default:""},contentClass:String,placement:{type:Te(String),values:USe,default:"bottom"},reference:{type:Te(Object),default:null},offset:{type:Number,default:8},strategy:{type:Te(String),values:FSe,default:"absolute"},showArrow:{type:Boolean,default:!1}}),fE=Ye({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:Te(Function)},"onUpdate:open":{type:Te(Function)}}),ap={type:Te(Function)},mE=Ye({onBlur:ap,onClick:ap,onFocus:ap,onMouseDown:ap,onMouseEnter:ap,onMouseLeave:ap}),zSe=Ye({...fE,...hE,...mE,...pE,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:Te(Object),default:null},teleported:Boolean,to:{type:Te(String),default:"body"}}),Xb=Symbol("tooltipV2"),yz=Symbol("tooltipV2Content"),gE="tooltip_v2.open",VSe=ne({name:"ElTooltipV2Root"}),GSe=ne({...VSe,props:fE,setup(r,{expose:e}){const t=r,i=V(t.defaultOpen),o=V(null),n=N({get:()=>$Q(t.open)?i.value:t.open,set:g=>{var v;i.value=g,(v=t["onUpdate:open"])==null||v.call(t,g)}}),s=N(()=>wt(t.delayDuration)&&t.delayDuration>0),{start:a,stop:l}=vu(()=>{n.value=!0},N(()=>t.delayDuration),{immediate:!1}),c=Pe("tooltip-v2"),u=bs(),d=()=>{l(),n.value=!0},h=()=>{f(s)?a():d()},p=d,m=()=>{l(),n.value=!1};return ke(n,g=>{var v;g&&(document.dispatchEvent(new CustomEvent(gE)),p()),(v=t.onOpenChange)==null||v.call(t,g)}),Rt(()=>{document.addEventListener(gE,m)}),Vr(()=>{l(),document.removeEventListener(gE,m)}),Wt(Xb,{contentId:u,triggerRef:o,ns:c,onClose:m,onDelayOpen:h,onOpen:p}),e({onOpen:p,onClose:m}),(g,v)=>Oe(g.$slots,"default",{open:f(n)})}});var HSe=Xe(GSe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/root.vue"]]);const jSe=ne({name:"ElTooltipV2Arrow"}),$Se=ne({...jSe,props:{...hE,...BSe},setup(r){const e=r,{ns:t}=ot(Xb),{arrowRef:i}=ot(yz),o=N(()=>{const{style:n,width:s,height:a}=e,l=t.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${s}px`,[`--${l}-tooltip-v2-arrow-height`]:`${a}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${s/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:s/2-1,...n||{}}});return(n,s)=>(A(),W("span",{ref_key:"arrowRef",ref:i,style:ct(f(o)),class:k(f(t).e("arrow"))},null,6))}});var bz=Xe($Se,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/arrow.vue"]]);const WSe=Ye({style:{type:Te([String,Object,Array]),default:()=>({})}}),qSe=ne({name:"ElVisuallyHidden"}),XSe=ne({...qSe,props:WSe,setup(r){const e=r,t=N(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(i,o)=>(A(),W("span",$t(i.$attrs,{style:f(t)}),[Oe(i.$slots,"default")],16))}});var KSe=Xe(XSe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/visual-hidden/src/visual-hidden.vue"]]);const YSe=["data-side"],JSe=ne({name:"ElTooltipV2Content"}),ZSe=ne({...JSe,props:{...pE,...gz},setup(r){const e=r,{triggerRef:t,contentId:i}=ot(Xb),o=V(e.placement),n=V(e.strategy),s=V(null),{referenceRef:a,contentRef:l,middlewareData:c,x:u,y:d,update:h}=Pse({placement:o,strategy:n,middleware:N(()=>{const x=[gse(e.offset)];return e.showArrow&&x.push(Dse({arrowRef:s})),x})}),p=Hh().nextZIndex(),m=Pe("tooltip-v2"),g=N(()=>o.value.split("-")[0]),v=N(()=>({position:f(n),top:`${f(d)||0}px`,left:`${f(u)||0}px`,zIndex:p})),y=N(()=>{if(!e.showArrow)return{};const{arrow:x}=f(c);return{[`--${m.namespace.value}-tooltip-v2-arrow-x`]:`${x==null?void 0:x.x}px`||"",[`--${m.namespace.value}-tooltip-v2-arrow-y`]:`${x==null?void 0:x.y}px`||""}}),b=N(()=>[m.e("content"),m.is("dark",e.effect==="dark"),m.is(f(n)),e.contentClass]);return ke(s,()=>h()),ke(()=>e.placement,x=>o.value=x),Rt(()=>{ke(()=>e.reference||t.value,x=>{a.value=x||void 0},{immediate:!0})}),Wt(yz,{arrowRef:s}),(x,_)=>(A(),W("div",{ref_key:"contentRef",ref:l,style:ct(f(v)),"data-tooltip-v2-root":""},[x.nowrap?we("v-if",!0):(A(),W("div",{key:0,"data-side":f(g),class:k(f(b))},[Oe(x.$slots,"default",{contentStyle:f(v),contentClass:f(b)}),ee(f(KSe),{id:f(i),role:"tooltip"},{default:se(()=>[x.ariaLabel?(A(),W(nt,{key:0},[rr(ze(x.ariaLabel),1)],64)):Oe(x.$slots,"default",{key:1})]),_:3},8,["id"]),Oe(x.$slots,"arrow",{style:ct(f(y)),side:f(g)})],10,YSe))],4))}});var xz=Xe(ZSe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/content.vue"]]);const QSe=Ye({setRef:{type:Te(Function),required:!0},onlyChild:Boolean});var eMe=ne({props:QSe,setup(r,{slots:e}){const t=V(),i=Hy(t,o=>{o?r.setRef(o.nextElementSibling):r.setRef(null)});return()=>{var o;const[n]=((o=e.default)==null?void 0:o.call(e))||[],s=r.onlyChild?Goe(n.children):n.children;return ee(nt,{ref:i},[s])}}});const tMe=ne({name:"ElTooltipV2Trigger"}),rMe=ne({...tMe,props:{...gz,...mE},setup(r){const e=r,{onClose:t,onOpen:i,onDelayOpen:o,triggerRef:n,contentId:s}=ot(Xb);let a=!1;const l=b=>{n.value=b},c=()=>{a=!1},u=ti(e.onMouseEnter,o),d=ti(e.onMouseLeave,t),h=ti(e.onMouseDown,()=>{t(),a=!0,document.addEventListener("mouseup",c,{once:!0})}),p=ti(e.onFocus,()=>{a||i()}),m=ti(e.onBlur,t),g=ti(e.onClick,b=>{b.detail===0&&t()}),v={blur:m,click:g,focus:p,mousedown:h,mouseenter:u,mouseleave:d},y=(b,x,_)=>{b&&Object.entries(x).forEach(([S,w])=>{b[_](S,w)})};return ke(n,(b,x)=>{y(b,v,"addEventListener"),y(x,v,"removeEventListener"),b&&b.setAttribute("aria-describedby",s.value)}),Vr(()=>{y(n.value,v,"removeEventListener"),document.removeEventListener("mouseup",c)}),(b,x)=>b.nowrap?(A(),_e(f(eMe),{key:0,"set-ref":l,"only-child":""},{default:se(()=>[Oe(b.$slots,"default")]),_:3})):(A(),W("button",$t({key:1,ref_key:"triggerRef",ref:n},b.$attrs),[Oe(b.$slots,"default")],16))}});var iMe=Xe(rMe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/trigger.vue"]]);const oMe=ne({name:"ElTooltipV2"}),nMe=ne({...oMe,props:zSe,setup(r){const e=qi(r),t=ur(rl(e,Object.keys(hE))),i=ur(rl(e,Object.keys(pE))),o=ur(rl(e,Object.keys(fE))),n=ur(rl(e,Object.keys(mE)));return(s,a)=>(A(),_e(HSe,Is(yy(o)),{default:se(({open:l})=>[ee(iMe,$t(n,{nowrap:""}),{default:se(()=>[Oe(s.$slots,"trigger")]),_:3},16),(A(),_e(sm,{to:s.to,disabled:!s.teleported},[s.fullTransition?(A(),_e(fi,Is($t({key:0},s.transitionProps)),{default:se(()=>[s.alwaysOn||l?(A(),_e(xz,Is($t({key:0},i)),{arrow:se(({style:c,side:u})=>[s.showArrow?(A(),_e(bz,$t({key:0},t,{style:c,side:u}),null,16,["style","side"])):we("v-if",!0)]),default:se(()=>[Oe(s.$slots,"default")]),_:3},16)):we("v-if",!0)]),_:2},1040)):(A(),W(nt,{key:1},[s.alwaysOn||l?(A(),_e(xz,Is($t({key:0},i)),{arrow:se(({style:c,side:u})=>[s.showArrow?(A(),_e(bz,$t({key:0},t,{style:c,side:u}),null,16,["style","side"])):we("v-if",!0)]),default:se(()=>[Oe(s.$slots,"default")]),_:3},16)):we("v-if",!0)],64))],8,["to","disabled"]))]),_:3},16))}});var sMe=Xe(nMe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/tooltip.vue"]]);const aMe=Bt(sMe),_z="left-check-change",wz="right-check-change",lp=Ye({data:{type:Te(Array),default:()=>[]},titles:{type:Te(Array),default:()=>[]},buttonTexts:{type:Te(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:Te(Function)},leftDefaultChecked:{type:Te(Array),default:()=>[]},rightDefaultChecked:{type:Te(Array),default:()=>[]},renderContent:{type:Te(Function)},modelValue:{type:Te(Array),default:()=>[]},format:{type:Te(Object),default:()=>({})},filterable:Boolean,props:{type:Te(Object),default:()=>qr({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),vE=(r,e)=>[r,e].every(it)||it(r)&&Mi(e),lMe={[Fr]:(r,e,t)=>[r,t].every(it)&&["left","right"].includes(e),[Vt]:r=>it(r),[_z]:vE,[wz]:vE},yE="checked-change",cMe=Ye({data:lp.data,optionRender:{type:Te(Function)},placeholder:String,title:String,filterable:Boolean,format:lp.format,filterMethod:lp.filterMethod,defaultChecked:lp.leftDefaultChecked,props:lp.props}),uMe={[yE]:vE},pg=r=>{const e={label:"label",key:"key",disabled:"disabled"};return N(()=>({...e,...r.props}))},dMe=(r,e,t)=>{const i=pg(r),o=N(()=>r.data.filter(u=>St(r.filterMethod)?r.filterMethod(e.query,u):String(u[i.value.label]||u[i.value.key]).toLowerCase().includes(e.query.toLowerCase()))),n=N(()=>o.value.filter(u=>!u[i.value.disabled])),s=N(()=>{const u=e.checked.length,d=r.data.length,{noChecked:h,hasChecked:p}=r.format;return h&&p?u>0?p.replace(/\${checked}/g,u.toString()).replace(/\${total}/g,d.toString()):h.replace(/\${total}/g,d.toString()):`${u}/${d}`}),a=N(()=>{const u=e.checked.length;return u>0&&u<n.value.length}),l=()=>{const u=n.value.map(d=>d[i.value.key]);e.allChecked=u.length>0&&u.every(d=>e.checked.includes(d))},c=u=>{e.checked=u?n.value.map(d=>d[i.value.key]):[]};return ke(()=>e.checked,(u,d)=>{if(l(),e.checkChangeByUser){const h=u.concat(d).filter(p=>!u.includes(p)||!d.includes(p));t(yE,u,h)}else t(yE,u),e.checkChangeByUser=!0}),ke(n,()=>{l()}),ke(()=>r.data,()=>{const u=[],d=o.value.map(h=>h[i.value.key]);e.checked.forEach(h=>{d.includes(h)&&u.push(h)}),e.checkChangeByUser=!1,e.checked=u}),ke(()=>r.defaultChecked,(u,d)=>{if(d&&u.length===d.length&&u.every(m=>d.includes(m)))return;const h=[],p=n.value.map(m=>m[i.value.key]);u.forEach(m=>{p.includes(m)&&h.push(m)}),e.checkChangeByUser=!1,e.checked=h},{immediate:!0}),{filteredData:o,checkableData:n,checkedSummary:s,isIndeterminate:a,updateAllChecked:l,handleAllCheckedChange:c}},hMe=(r,e)=>({onSourceCheckedChange:(t,i)=>{r.leftChecked=t,i&&e(_z,t,i)},onTargetCheckedChange:(t,i)=>{r.rightChecked=t,i&&e(wz,t,i)}}),pMe=r=>{const e=pg(r),t=N(()=>r.data.reduce((n,s)=>(n[s[e.value.key]]=s)&&n,{})),i=N(()=>r.data.filter(n=>!r.modelValue.includes(n[e.value.key]))),o=N(()=>r.targetOrder==="original"?r.data.filter(n=>r.modelValue.includes(n[e.value.key])):r.modelValue.reduce((n,s)=>{const a=t.value[s];return a&&n.push(a),n},[]));return{sourceData:i,targetData:o}},fMe=(r,e,t)=>{const i=pg(r),o=(n,s,a)=>{t(Vt,n),t(Fr,n,s,a)};return{addToLeft:()=>{const n=r.modelValue.slice();e.rightChecked.forEach(s=>{const a=n.indexOf(s);a>-1&&n.splice(a,1)}),o(n,"left",e.rightChecked)},addToRight:()=>{let n=r.modelValue.slice();const s=r.data.filter(a=>{const l=a[i.value.key];return e.leftChecked.includes(l)&&!r.modelValue.includes(l)}).map(a=>a[i.value.key]);n=r.targetOrder==="unshift"?s.concat(n):n.concat(s),r.targetOrder==="original"&&(n=r.data.filter(a=>n.includes(a[i.value.key])).map(a=>a[i.value.key])),o(n,"right",e.leftChecked)}}},mMe=ne({name:"ElTransferPanel"}),gMe=ne({...mMe,props:cMe,emits:uMe,setup(r,{expose:e,emit:t}){const i=r,o=yo(),n=({option:x})=>x,{t:s}=ir(),a=Pe("transfer"),l=ur({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=pg(i),{filteredData:u,checkedSummary:d,isIndeterminate:h,handleAllCheckedChange:p}=dMe(i,l,t),m=N(()=>!ps(l.query)&&ps(u.value)),g=N(()=>!ps(o.default()[0].children)),{checked:v,allChecked:y,query:b}=qi(l);return e({query:b}),(x,_)=>(A(),W("div",{class:k(f(a).b("panel"))},[X("p",{class:k(f(a).be("panel","header"))},[ee(f(_s),{modelValue:f(y),"onUpdate:modelValue":_[0]||(_[0]=S=>Ar(y)?y.value=S:null),indeterminate:f(h),"validate-event":!1,onChange:f(p)},{default:se(()=>[rr(ze(x.title)+" ",1),X("span",null,ze(f(d)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),X("div",{class:k([f(a).be("panel","body"),f(a).is("with-footer",f(g))])},[x.filterable?(A(),_e(f(Io),{key:0,modelValue:f(b),"onUpdate:modelValue":_[1]||(_[1]=S=>Ar(b)?b.value=S:null),class:k(f(a).be("panel","filter")),size:"default",placeholder:x.placeholder,"prefix-icon":f(Nie),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):we("v-if",!0),At(ee(f(XF),{modelValue:f(v),"onUpdate:modelValue":_[2]||(_[2]=S=>Ar(v)?v.value=S:null),"validate-event":!1,class:k([f(a).is("filterable",x.filterable),f(a).be("panel","list")])},{default:se(()=>[(A(!0),W(nt,null,jt(f(u),S=>(A(),_e(f(_s),{key:S[f(c).key],class:k(f(a).be("panel","item")),label:S[f(c).key],disabled:S[f(c).disabled],"validate-event":!1},{default:se(()=>{var w;return[ee(n,{option:(w=x.optionRender)==null?void 0:w.call(x,S)},null,8,["option"])]}),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[nr,!f(m)&&!f(ps)(x.data)]]),At(X("p",{class:k(f(a).be("panel","empty"))},ze(f(m)?f(s)("el.transfer.noMatch"):f(s)("el.transfer.noData")),3),[[nr,f(m)||f(ps)(x.data)]])],2),f(g)?(A(),W("p",{key:0,class:k(f(a).be("panel","footer"))},[Oe(x.$slots,"default")],2)):we("v-if",!0)],2))}});var Sz=Xe(gMe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const vMe={key:0},yMe={key:0},bMe=ne({name:"ElTransfer"}),xMe=ne({...bMe,props:lp,emits:lMe,setup(r,{expose:e,emit:t}){const i=r,o=yo(),{t:n}=ir(),s=Pe("transfer"),{formItem:a}=Jo(),l=ur({leftChecked:[],rightChecked:[]}),c=pg(i),{sourceData:u,targetData:d}=pMe(i),{onSourceCheckedChange:h,onTargetCheckedChange:p}=hMe(l,t),{addToLeft:m,addToRight:g}=fMe(i,l,t),v=V(),y=V(),b=T=>{switch(T){case"left":v.value.query="";break;case"right":y.value.query="";break}},x=N(()=>i.buttonTexts.length===2),_=N(()=>i.titles[0]||n("el.transfer.titles.0")),S=N(()=>i.titles[1]||n("el.transfer.titles.1")),w=N(()=>i.filterPlaceholder||n("el.transfer.filterPlaceholder"));ke(()=>i.modelValue,()=>{var T;i.validateEvent&&((T=a==null?void 0:a.validate)==null||T.call(a,"change").catch(E=>{}))});const M=N(()=>T=>i.renderContent?i.renderContent(pt,T):o.default?o.default({option:T}):pt("span",T[c.value.label]||T[c.value.key]));return e({clearQuery:b,leftPanel:v,rightPanel:y}),(T,E)=>(A(),W("div",{class:k(f(s).b())},[ee(Sz,{ref_key:"leftPanel",ref:v,data:f(u),"option-render":f(M),placeholder:f(w),title:f(_),filterable:T.filterable,format:T.format,"filter-method":T.filterMethod,"default-checked":T.leftDefaultChecked,props:i.props,onCheckedChange:f(h)},{default:se(()=>[Oe(T.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),X("div",{class:k(f(s).e("buttons"))},[ee(f(_o),{type:"primary",class:k([f(s).e("button"),f(s).is("with-texts",f(x))]),disabled:f(ps)(l.rightChecked),onClick:f(m)},{default:se(()=>[ee(f(st),null,{default:se(()=>[ee(f(ec))]),_:1}),f(Pi)(T.buttonTexts[0])?we("v-if",!0):(A(),W("span",vMe,ze(T.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),ee(f(_o),{type:"primary",class:k([f(s).e("button"),f(s).is("with-texts",f(x))]),disabled:f(ps)(l.leftChecked),onClick:f(g)},{default:se(()=>[f(Pi)(T.buttonTexts[1])?we("v-if",!0):(A(),W("span",yMe,ze(T.buttonTexts[1]),1)),ee(f(st),null,{default:se(()=>[ee(f(Ko))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),ee(Sz,{ref_key:"rightPanel",ref:y,data:f(d),"option-render":f(M),placeholder:f(w),filterable:T.filterable,format:T.format,"filter-method":T.filterMethod,title:f(S),"default-checked":T.rightDefaultChecked,props:i.props,onCheckedChange:f(p)},{default:se(()=>[Oe(T.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var _Me=Xe(xMe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer.vue"]]);const wMe=Bt(_Me),cp="$treeNodeId",Mz=function(r,e){!e||e[cp]||Object.defineProperty(e,cp,{value:r.id,enumerable:!1,configurable:!1,writable:!1})},bE=function(r,e){return r?e[r]:e[cp]},xE=(r,e,t)=>{const i=r.value.currentNode;t();const o=r.value.currentNode;i!==o&&e("current-change",o?o.data:null,o)},_E=r=>{let e=!0,t=!0,i=!0;for(let o=0,n=r.length;o<n;o++){const s=r[o];(s.checked!==!0||s.indeterminate)&&(e=!1,s.disabled||(i=!1)),(s.checked!==!1||s.indeterminate)&&(t=!1)}return{all:e,none:t,allWithoutDisable:i,half:!e&&!t}},Kb=function(r){if(r.childNodes.length===0||r.loading)return;const{all:e,none:t,half:i}=_E(r.childNodes);e?(r.checked=!0,r.indeterminate=!1):i?(r.checked=!1,r.indeterminate=!0):t&&(r.checked=!1,r.indeterminate=!1);const o=r.parent;!o||o.level===0||r.store.checkStrictly||Kb(o)},Yb=function(r,e){const t=r.store.props,i=r.data||{},o=t[e];if(typeof o=="function")return o(i,r);if(typeof o=="string")return i[o];if(typeof o>"u"){const n=i[e];return n===void 0?"":n}};let SMe=0,wE=class Nw{constructor(e){this.id=SMe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)Yt(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const t=e.props;if(t&&typeof t.isLeaf<"u"){const n=Yb(this,"isLeaf");typeof n=="boolean"&&(this.isLeafByUser=n)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||Mz(this,this.data),!this.data)return;const i=e.defaultExpandedKeys,o=e.key;o&&i&&i.includes(this.key)&&this.expand(null,e.autoExpandParent),o&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Array.isArray(e)||Mz(this,e),this.data=e,this.childNodes=[];let t;this.level===0&&Array.isArray(this.data)?t=this.data:t=Yb(this,"children")||[];for(let i=0,o=t.length;i<o;i++)this.insertChild({data:t[i]})}get label(){return Yb(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return Yb(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some(i=>i===e||t&&i.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,t,i){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof Nw)){if(!i){const o=this.getChildren(!0);o.includes(e.data)||(typeof t>"u"||t<0?o.push(e.data):o.splice(t,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=ur(new Nw(e)),e instanceof Nw&&e.initialize()}e.level=this.level+1,typeof t>"u"||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),this.updateLeafState()}insertBefore(e,t){let i;t&&(i=this.childNodes.indexOf(t)),this.insertChild(e,i)}insertAfter(e,t){let i;t&&(i=this.childNodes.indexOf(t),i!==-1&&(i+=1)),this.insertChild(e,i)}removeChild(e){const t=this.getChildren()||[],i=t.indexOf(e.data);i>-1&&t.splice(i,1);const o=this.childNodes.indexOf(e);o>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(o,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){t=this.childNodes[i];break}t&&this.removeChild(t)}expand(e,t){const i=()=>{if(t){let o=this.parent;for(;o.level>0;)o.expanded=!0,o=o.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(o=>{o.canFocus=!0})};this.shouldLoadData()?this.loadData(o=>{Array.isArray(o)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||Kb(this),i())}):i()}doCreateChildren(e,t={}){e.forEach(i=>{this.insertChild(Object.assign({data:i},t),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,t,i,o){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:s,allWithoutDisable:a}=_E(this.childNodes);!this.isLeaf&&!s&&a&&(this.checked=!1,e=!1);const l=()=>{if(t){const c=this.childNodes;for(let h=0,p=c.length;h<p;h++){const m=c[h];o=o||e!==!1;const g=m.disabled?m.checked:o;m.setChecked(g,t,!0,o)}const{half:u,all:d}=_E(c);d||(this.checked=d,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{l(),Kb(this)},{checked:e!==!1});return}else l()}const n=this.parent;!n||n.level===0||i||Kb(n)}getChildren(e=!1){if(this.level===0)return this.data;const t=this.data;if(!t)return null;const i=this.store.props;let o="children";return i&&(o=i.children||"children"),t[o]===void 0&&(t[o]=null),e&&!t[o]&&(t[o]=[]),t[o]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map(n=>n.data),i={},o=[];e.forEach((n,s)=>{const a=n[cp];a&&t.findIndex(l=>l[cp]===a)>=0?i[a]={index:s,data:n}:o.push({index:s,data:n})}),this.store.lazy||t.forEach(n=>{i[n[cp]]||this.removeChildByData(n)}),o.forEach(({index:n,data:s})=>{this.insertChild({data:s},n)}),this.updateLeafState()}loadData(e,t={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(t).length)){this.loading=!0;const i=o=>{this.childNodes=[],this.doCreateChildren(o,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,o)};this.store.load(this,i)}else e&&e.call(this)}};class MMe{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const t in e)Yt(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new wE({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,t=>{this.root.doCreateChildren(t),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,i=this.lazy,o=function(n){const s=n.root?n.root.childNodes:n.childNodes;if(s.forEach(a=>{a.visible=t.call(a,e,a.data,a),o(a)}),!n.visible&&s.length){let a=!0;a=!s.some(l=>l.visible),n.root?n.root.visible=a===!1:n.visible=a===!1}e&&n.visible&&!n.isLeaf&&!i&&n.expand()};o(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof wE)return e;const t=zt(e)?bE(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){const i=this.getNode(t);i.parent.insertBefore({data:e},i)}insertAfter(e,t){const i=this.getNode(t);i.parent.insertAfter({data:e},i)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const i=t?this.getNode(t):this.root;i&&i.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach(i=>{const o=t[i];o&&o.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;!e||!e.data||(t?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(t=>{this.deregisterNode(t)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const i=[],o=function(n){(n.root?n.root.childNodes:n.childNodes).forEach(s=>{(s.checked||t&&s.indeterminate)&&(!e||e&&s.isLeaf)&&i.push(s.data),o(s)})};return o(this),i}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(t=>(t||{})[this.key])}getHalfCheckedNodes(){const e=[],t=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(o=>{o.indeterminate&&e.push(o.data),t(o)})};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],t=this.nodesMap;for(const i in t)Yt(t,i)&&e.push(t[i]);return e}updateChildren(e,t){const i=this.nodesMap[e];if(!i)return;const o=i.childNodes;for(let n=o.length-1;n>=0;n--){const s=o[n];this.remove(s.data)}for(let n=0,s=t.length;n<s;n++){const a=t[n];this.append(a,i.data)}}_setCheckedKeys(e,t=!1,i){const o=this._getAllNodes().sort((a,l)=>l.level-a.level),n=Object.create(null),s=Object.keys(i);o.forEach(a=>a.setChecked(!1,!1));for(let a=0,l=o.length;a<l;a++){const c=o[a],u=c.data[e].toString();if(!s.includes(u)){c.checked&&!n[u]&&c.setChecked(!1,!1);continue}let d=c.parent;for(;d&&d.level>0;)n[d.data[e]]=!0,d=d.parent;if(c.isLeaf||this.checkStrictly){c.setChecked(!0,!1);continue}if(c.setChecked(!0,!0),t){c.setChecked(!1,!1);const h=function(p){p.childNodes.forEach(m=>{m.isLeaf||m.setChecked(!1,!1),h(m)})};h(c)}}}setCheckedNodes(e,t=!1){const i=this.key,o={};e.forEach(n=>{o[(n||{})[i]]=!0}),this._setCheckedKeys(i,t,o)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const i=this.key,o={};e.forEach(n=>{o[n]=!0}),this._setCheckedKeys(i,t,o)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(t=>{const i=this.getNode(t);i&&i.expand(null,this.autoExpandParent)})}setChecked(e,t,i){const o=this.getNode(e);o&&o.setChecked(!!t,i)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){const i=e[this.key],o=this.nodesMap[i];this.setCurrentNode(o),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,t=!0){if(e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const i=this.getNode(e);i&&(this.setCurrentNode(i),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const TMe=ne({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(r){const e=Pe("tree"),t=ot("NodeInstance"),i=ot("RootTree");return()=>{const o=r.node,{data:n,store:s}=o;return r.renderContent?r.renderContent(pt,{_self:t,node:o,data:n,store:s}):i.ctx.slots.default?i.ctx.slots.default({node:o,data:n}):pt("span",{class:e.be("node","label")},[o.label])}}});var EMe=Xe(TMe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function Tz(r){const e=ot("TreeNodeMap",null),t={treeNodeExpand:i=>{r.node!==i&&r.node.collapse()},children:[]};return e&&e.children.push(t),Wt("TreeNodeMap",t),{broadcastExpanded:i=>{if(r.accordion)for(const o of t.children)o.treeNodeExpand(i)}}}const Ez=Symbol("dragEvents");function CMe({props:r,ctx:e,el$:t,dropIndicator$:i,store:o}){const n=Pe("tree"),s=V({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Wt(Ez,{treeNodeDragStart:({event:a,treeNode:l})=>{if(typeof r.allowDrag=="function"&&!r.allowDrag(l.node))return a.preventDefault(),!1;a.dataTransfer.effectAllowed="move";try{a.dataTransfer.setData("text/plain","")}catch{}s.value.draggingNode=l,e.emit("node-drag-start",l.node,a)},treeNodeDragOver:({event:a,treeNode:l})=>{const c=l,u=s.value.dropNode;u&&u.node.id!==c.node.id&&gn(u.$el,n.is("drop-inner"));const d=s.value.draggingNode;if(!d||!c)return;let h=!0,p=!0,m=!0,g=!0;typeof r.allowDrop=="function"&&(h=r.allowDrop(d.node,c.node,"prev"),g=p=r.allowDrop(d.node,c.node,"inner"),m=r.allowDrop(d.node,c.node,"next")),a.dataTransfer.dropEffect=p||h||m?"move":"none",(h||p||m)&&(u==null?void 0:u.node.id)!==c.node.id&&(u&&e.emit("node-drag-leave",d.node,u.node,a),e.emit("node-drag-enter",d.node,c.node,a)),(h||p||m)&&(s.value.dropNode=c),c.node.nextSibling===d.node&&(m=!1),c.node.previousSibling===d.node&&(h=!1),c.node.contains(d.node,!1)&&(p=!1),(d.node===c.node||d.node.contains(c.node))&&(h=!1,p=!1,m=!1);const v=c.$el.querySelector(`.${n.be("node","content")}`).getBoundingClientRect(),y=t.value.getBoundingClientRect();let b;const x=h?p?.25:m?.45:1:-1,_=m?p?.75:h?.55:0:1;let S=-9999;const w=a.clientY-v.top;w<v.height*x?b="before":w>v.height*_?b="after":p?b="inner":b="none";const M=c.$el.querySelector(`.${n.be("node","expand-icon")}`).getBoundingClientRect(),T=i.value;b==="before"?S=M.top-y.top:b==="after"&&(S=M.bottom-y.top),T.style.top=`${S}px`,T.style.left=`${M.right-y.left}px`,b==="inner"?fa(c.$el,n.is("drop-inner")):gn(c.$el,n.is("drop-inner")),s.value.showDropIndicator=b==="before"||b==="after",s.value.allowDrop=s.value.showDropIndicator||g,s.value.dropType=b,e.emit("node-drag-over",d.node,c.node,a)},treeNodeDragEnd:a=>{const{draggingNode:l,dropType:c,dropNode:u}=s.value;if(a.preventDefault(),a.dataTransfer.dropEffect="move",l&&u){const d={data:l.node.data};c!=="none"&&l.node.remove(),c==="before"?u.node.parent.insertBefore(d,u.node):c==="after"?u.node.parent.insertAfter(d,u.node):c==="inner"&&u.node.insertChild(d),c!=="none"&&o.value.registerNode(d),gn(u.$el,n.is("drop-inner")),e.emit("node-drag-end",l.node,u.node,c,a),c!=="none"&&e.emit("node-drop",l.node,u.node,c,a)}l&&!u&&e.emit("node-drag-end",l.node,null,c,a),s.value.showDropIndicator=!1,s.value.draggingNode=null,s.value.dropNode=null,s.value.allowDrop=!0}}),{dragState:s}}const NMe=ne({name:"ElTreeNode",components:{ElCollapseTransition:Tb,ElCheckbox:_s,NodeContent:EMe,ElIcon:st,Loading:rc},props:{node:{type:wE,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(r,e){const t=Pe("tree"),{broadcastExpanded:i}=Tz(r),o=ot("RootTree"),n=V(!1),s=V(!1),a=V(null),l=V(null),c=V(null),u=ot(Ez),d=It();Wt("NodeInstance",d),r.node.expanded&&(n.value=!0,s.value=!0);const h=o.props.props.children||"children";ke(()=>{const _=r.node.data[h];return _&&[..._]},()=>{r.node.updateChildren()}),ke(()=>r.node.indeterminate,_=>{g(r.node.checked,_)}),ke(()=>r.node.checked,_=>{g(_,r.node.indeterminate)}),ke(()=>r.node.expanded,_=>{lt(()=>n.value=_),_&&(s.value=!0)});const p=_=>bE(o.props.nodeKey,_.data),m=_=>{const S=r.props.class;if(!S)return{};let w;if(St(S)){const{data:M}=_;w=S(M,_)}else w=S;return Tt(w)?{[w]:!0}:w},g=(_,S)=>{(a.value!==_||l.value!==S)&&o.ctx.emit("check-change",r.node.data,_,S),a.value=_,l.value=S},v=_=>{xE(o.store,o.ctx.emit,()=>o.store.value.setCurrentNode(r.node)),o.currentNode.value=r.node,o.props.expandOnClickNode&&b(),o.props.checkOnClickNode&&!r.node.disabled&&x(null,{target:{checked:!r.node.checked}}),o.ctx.emit("node-click",r.node.data,r.node,d,_)},y=_=>{o.instance.vnode.props.onNodeContextmenu&&(_.stopPropagation(),_.preventDefault()),o.ctx.emit("node-contextmenu",_,r.node.data,r.node,d)},b=()=>{r.node.isLeaf||(n.value?(o.ctx.emit("node-collapse",r.node.data,r.node,d),r.node.collapse()):(r.node.expand(),e.emit("node-expand",r.node.data,r.node,d)))},x=(_,S)=>{r.node.setChecked(S.target.checked,!o.props.checkStrictly),lt(()=>{const w=o.store.value;o.ctx.emit("check",r.node.data,{checkedNodes:w.getCheckedNodes(),checkedKeys:w.getCheckedKeys(),halfCheckedNodes:w.getHalfCheckedNodes(),halfCheckedKeys:w.getHalfCheckedKeys()})})};return{ns:t,node$:c,tree:o,expanded:n,childNodeRendered:s,oldChecked:a,oldIndeterminate:l,getNodeKey:p,getNodeClass:m,handleSelectChange:g,handleClick:v,handleContextMenu:y,handleExpandIconClick:b,handleCheckChange:x,handleChildNodeExpand:(_,S,w)=>{i(S),o.ctx.emit("node-expand",_,S,w)},handleDragStart:_=>{o.props.draggable&&u.treeNodeDragStart({event:_,treeNode:r})},handleDragOver:_=>{_.preventDefault(),o.props.draggable&&u.treeNodeDragOver({event:_,treeNode:{$el:c.value,node:r.node}})},handleDrop:_=>{_.preventDefault()},handleDragEnd:_=>{o.props.draggable&&u.treeNodeDragEnd(_)},CaretRight:iD}}}),AMe=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],RMe=["aria-expanded"];function LMe(r,e,t,i,o,n){const s=_t("el-icon"),a=_t("el-checkbox"),l=_t("loading"),c=_t("node-content"),u=_t("el-tree-node"),d=_t("el-collapse-transition");return At((A(),W("div",{ref:"node$",class:k([r.ns.b("node"),r.ns.is("expanded",r.expanded),r.ns.is("current",r.node.isCurrent),r.ns.is("hidden",!r.node.visible),r.ns.is("focusable",!r.node.disabled),r.ns.is("checked",!r.node.disabled&&r.node.checked),r.getNodeClass(r.node)]),role:"treeitem",tabindex:"-1","aria-expanded":r.expanded,"aria-disabled":r.node.disabled,"aria-checked":r.node.checked,draggable:r.tree.props.draggable,"data-key":r.getNodeKey(r.node),onClick:e[1]||(e[1]=vt((...h)=>r.handleClick&&r.handleClick(...h),["stop"])),onContextmenu:e[2]||(e[2]=(...h)=>r.handleContextMenu&&r.handleContextMenu(...h)),onDragstart:e[3]||(e[3]=vt((...h)=>r.handleDragStart&&r.handleDragStart(...h),["stop"])),onDragover:e[4]||(e[4]=vt((...h)=>r.handleDragOver&&r.handleDragOver(...h),["stop"])),onDragend:e[5]||(e[5]=vt((...h)=>r.handleDragEnd&&r.handleDragEnd(...h),["stop"])),onDrop:e[6]||(e[6]=vt((...h)=>r.handleDrop&&r.handleDrop(...h),["stop"]))},[X("div",{class:k(r.ns.be("node","content")),style:ct({paddingLeft:(r.node.level-1)*r.tree.props.indent+"px"})},[r.tree.props.icon||r.CaretRight?(A(),_e(s,{key:0,class:k([r.ns.be("node","expand-icon"),r.ns.is("leaf",r.node.isLeaf),{expanded:!r.node.isLeaf&&r.expanded}]),onClick:vt(r.handleExpandIconClick,["stop"])},{default:se(()=>[(A(),_e(Ht(r.tree.props.icon||r.CaretRight)))]),_:1},8,["class","onClick"])):we("v-if",!0),r.showCheckbox?(A(),_e(a,{key:1,"model-value":r.node.checked,indeterminate:r.node.indeterminate,disabled:!!r.node.disabled,onClick:e[0]||(e[0]=vt(()=>{},["stop"])),onChange:r.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):we("v-if",!0),r.node.loading?(A(),_e(s,{key:2,class:k([r.ns.be("node","loading-icon"),r.ns.is("loading")])},{default:se(()=>[ee(l)]),_:1},8,["class"])):we("v-if",!0),ee(c,{node:r.node,"render-content":r.renderContent},null,8,["node","render-content"])],6),ee(d,null,{default:se(()=>[!r.renderAfterExpand||r.childNodeRendered?At((A(),W("div",{key:0,class:k(r.ns.be("node","children")),role:"group","aria-expanded":r.expanded},[(A(!0),W(nt,null,jt(r.node.childNodes,h=>(A(),_e(u,{key:r.getNodeKey(h),"render-content":r.renderContent,"render-after-expand":r.renderAfterExpand,"show-checkbox":r.showCheckbox,node:h,accordion:r.accordion,props:r.props,onNodeExpand:r.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,RMe)),[[nr,r.expanded]]):we("v-if",!0)]),_:1})],42,AMe)),[[nr,r.node.visible]])}var OMe=Xe(NMe,[["render",LMe],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function kMe({el$:r},e){const t=Pe("tree"),i=Rr([]),o=Rr([]);Rt(()=>{n()}),Ka(()=>{i.value=Array.from(r.value.querySelectorAll("[role=treeitem]")),o.value=Array.from(r.value.querySelectorAll("input[type=checkbox]"))}),ke(o,s=>{s.forEach(a=>{a.setAttribute("tabindex","-1")})}),Hr(r,"keydown",s=>{const a=s.target;if(!a.className.includes(t.b("node")))return;const l=s.code;i.value=Array.from(r.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`));const c=i.value.indexOf(a);let u;if([ft.up,ft.down].includes(l)){if(s.preventDefault(),l===ft.up){u=c===-1?0:c!==0?c-1:i.value.length-1;const h=u;for(;!e.value.getNode(i.value[u].dataset.key).canFocus;){if(u--,u===h){u=-1;break}u<0&&(u=i.value.length-1)}}else{u=c===-1?0:c<i.value.length-1?c+1:0;const h=u;for(;!e.value.getNode(i.value[u].dataset.key).canFocus;){if(u++,u===h){u=-1;break}u>=i.value.length&&(u=0)}}u!==-1&&i.value[u].focus()}[ft.left,ft.right].includes(l)&&(s.preventDefault(),a.click());const d=a.querySelector('[type="checkbox"]');[ft.enter,ft.space].includes(l)&&d&&(s.preventDefault(),d.click())});const n=()=>{var s;i.value=Array.from(r.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`)),o.value=Array.from(r.value.querySelectorAll("input[type=checkbox]"));const a=r.value.querySelectorAll(`.${t.is("checked")}[role=treeitem]`);if(a.length){a[0].setAttribute("tabindex","0");return}(s=i.value[0])==null||s.setAttribute("tabindex","0")}}const IMe=ne({name:"ElTree",components:{ElTreeNode:OMe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:Lr}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(r,e){const{t}=ir(),i=Pe("tree"),o=V(new MMe({key:r.nodeKey,data:r.data,lazy:r.lazy,props:r.props,load:r.load,currentNodeKey:r.currentNodeKey,checkStrictly:r.checkStrictly,checkDescendants:r.checkDescendants,defaultCheckedKeys:r.defaultCheckedKeys,defaultExpandedKeys:r.defaultExpandedKeys,autoExpandParent:r.autoExpandParent,defaultExpandAll:r.defaultExpandAll,filterNodeMethod:r.filterNodeMethod}));o.value.initialize();const n=V(o.value.root),s=V(null),a=V(null),l=V(null),{broadcastExpanded:c}=Tz(r),{dragState:u}=CMe({props:r,ctx:e,el$:a,dropIndicator$:l,store:o});kMe({el$:a},o);const d=N(()=>{const{childNodes:R}=n.value;return!R||R.length===0||R.every(({visible:F})=>!F)});ke(()=>r.currentNodeKey,R=>{o.value.setCurrentNodeKey(R)}),ke(()=>r.defaultCheckedKeys,R=>{o.value.setDefaultCheckedKey(R)}),ke(()=>r.defaultExpandedKeys,R=>{o.value.setDefaultExpandedKeys(R)}),ke(()=>r.data,R=>{o.value.setData(R)},{deep:!0}),ke(()=>r.checkStrictly,R=>{o.value.checkStrictly=R});const h=R=>{if(!r.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");o.value.filter(R)},p=R=>bE(r.nodeKey,R.data),m=R=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const F=o.value.getNode(R);if(!F)return[];const O=[F.data];let H=F.parent;for(;H&&H!==n.value;)O.push(H.data),H=H.parent;return O.reverse()},g=(R,F)=>o.value.getCheckedNodes(R,F),v=R=>o.value.getCheckedKeys(R),y=()=>{const R=o.value.getCurrentNode();return R?R.data:null},b=()=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const R=y();return R?R[r.nodeKey]:null},x=(R,F)=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");o.value.setCheckedNodes(R,F)},_=(R,F)=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");o.value.setCheckedKeys(R,F)},S=(R,F,O)=>{o.value.setChecked(R,F,O)},w=()=>o.value.getHalfCheckedNodes(),M=()=>o.value.getHalfCheckedKeys(),T=(R,F=!0)=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");xE(o,e.emit,()=>o.value.setUserCurrentNode(R,F))},E=(R,F=!0)=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");xE(o,e.emit,()=>o.value.setCurrentNodeKey(R,F))},C=R=>o.value.getNode(R),B=R=>{o.value.remove(R)},I=(R,F)=>{o.value.append(R,F)},L=(R,F)=>{o.value.insertBefore(R,F)},P=(R,F)=>{o.value.insertAfter(R,F)},U=(R,F,O)=>{c(F),e.emit("node-expand",R,F,O)},G=(R,F)=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");o.value.updateChildren(R,F)};return Wt("RootTree",{ctx:e,props:r,store:o,root:n,currentNode:s,instance:It()}),Wt(xa,void 0),{ns:i,store:o,root:n,currentNode:s,dragState:u,el$:a,dropIndicator$:l,isEmpty:d,filter:h,getNodeKey:p,getNodePath:m,getCheckedNodes:g,getCheckedKeys:v,getCurrentNode:y,getCurrentKey:b,setCheckedNodes:x,setCheckedKeys:_,setChecked:S,getHalfCheckedNodes:w,getHalfCheckedKeys:M,setCurrentNode:T,setCurrentKey:E,t,getNode:C,remove:B,append:I,insertBefore:L,insertAfter:P,handleNodeExpand:U,updateKeyChildren:G}}});function PMe(r,e,t,i,o,n){const s=_t("el-tree-node");return A(),W("div",{ref:"el$",class:k([r.ns.b(),r.ns.is("dragging",!!r.dragState.draggingNode),r.ns.is("drop-not-allow",!r.dragState.allowDrop),r.ns.is("drop-inner",r.dragState.dropType==="inner"),{[r.ns.m("highlight-current")]:r.highlightCurrent}]),role:"tree"},[(A(!0),W(nt,null,jt(r.root.childNodes,a=>(A(),_e(s,{key:r.getNodeKey(a),node:a,props:r.props,accordion:r.accordion,"render-after-expand":r.renderAfterExpand,"show-checkbox":r.showCheckbox,"render-content":r.renderContent,onNodeExpand:r.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),r.isEmpty?(A(),W("div",{key:0,class:k(r.ns.e("empty-block"))},[Oe(r.$slots,"empty",{},()=>{var a;return[X("span",{class:k(r.ns.e("empty-text"))},ze((a=r.emptyText)!=null?a:r.t("el.tree.emptyText")),3)]})],2)):we("v-if",!0),At(X("div",{ref:"dropIndicator$",class:k(r.ns.e("drop-indicator"))},null,2),[[nr,r.dragState.showDropIndicator]])],2)}var Jb=Xe(IMe,[["render",PMe],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);Jb.install=r=>{r.component(Jb.name,Jb)};const Zb=Jb,DMe=Zb,BMe=(r,{attrs:e},{tree:t,key:i})=>{const o=Pe("tree-select"),n={...rl(qi(r),Object.keys(Iu.props)),...e,valueKey:i,popperClass:N(()=>{const s=[o.e("popper")];return r.popperClass&&s.push(r.popperClass),s.join(" ")}),filterMethod:(s="")=>{r.filterMethod&&r.filterMethod(s),lt(()=>{var a;(a=t.value)==null||a.filter(s)})},onVisibleChange:s=>{var a;(a=e.onVisibleChange)==null||a.call(e,s),r.filterable&&s&&n.filterMethod()}};return n},FMe=ne({extends:kb,setup(r,e){const t=kb.setup(r,e);delete t.selectOptionClick;const i=It().proxy;return lt(()=>{t.select.cachedOptions.get(i.value)||t.select.onOptionCreate(i)}),t},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function SE(r){return r||r===0}function ME(r){return Array.isArray(r)&&r.length}function fg(r){return Array.isArray(r)?r:SE(r)?[r]:[]}function Qb(r,e,t,i,o){for(let n=0;n<r.length;n++){const s=r[n];if(e(s,n,r,o))return i?i(s,n,r,o):s;{const a=t(s);if(ME(a)){const l=Qb(a,e,t,i,s);if(l)return l}}}}function Cz(r,e,t,i){for(let o=0;o<r.length;o++){const n=r[o];e(n,o,r,i);const s=t(n);ME(s)&&Cz(s,e,t,n)}}const UMe=(r,{attrs:e,slots:t,emit:i},{select:o,tree:n,key:s})=>{ke(()=>r.modelValue,()=>{r.showCheckbox&&lt(()=>{const h=n.value;h&&!mn(h.getCheckedKeys(),fg(r.modelValue))&&h.setCheckedKeys(fg(r.modelValue))})},{immediate:!0,deep:!0});const a=N(()=>({value:s.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...r.props})),l=(h,p)=>{var m;const g=a.value[h];return St(g)?g(p,(m=n.value)==null?void 0:m.getNode(l("value",p))):p[g]},c=fg(r.modelValue).map(h=>Qb(r.data||[],p=>l("value",p)===h,p=>l("children",p),(p,m,g,v)=>v&&l("value",v))).filter(h=>SE(h)),u=N(()=>{if(!r.renderAfterExpand&&!r.lazy)return[];const h=[];return Cz(r.data.concat(r.cacheData),p=>{const m=l("value",p);h.push({value:m,currentLabel:l("label",p),isDisabled:l("disabled",p)})},p=>l("children",p)),h}),d=N(()=>u.value.reduce((h,p)=>({...h,[p.value]:p}),{}));return{...rl(qi(r),Object.keys(Zb.props)),...e,nodeKey:s,expandOnClickNode:N(()=>!r.checkStrictly&&r.expandOnClickNode),defaultExpandedKeys:N(()=>r.defaultExpandedKeys?r.defaultExpandedKeys.concat(c):c),renderContent:(h,{node:p,data:m,store:g})=>h(FMe,{value:l("value",m),label:l("label",m),disabled:l("disabled",m)},r.renderContent?()=>r.renderContent(h,{node:p,data:m,store:g}):t.default?()=>t.default({node:p,data:m,store:g}):void 0),filterNodeMethod:(h,p,m)=>{var g;return r.filterNodeMethod?r.filterNodeMethod(h,p,m):h?(g=l("label",p))==null?void 0:g.includes(h):!0},onNodeClick:(h,p,m)=>{var g,v,y;if((g=e.onNodeClick)==null||g.call(e,h,p,m),!(r.showCheckbox&&r.checkOnClickNode))if(!r.showCheckbox&&(r.checkStrictly||p.isLeaf)){if(!l("disabled",h)){const b=(v=o.value)==null?void 0:v.options.get(l("value",h));(y=o.value)==null||y.handleOptionSelect(b)}}else r.expandOnClickNode&&m.proxy.handleExpandIconClick()},onCheck:(h,p)=>{if(!r.showCheckbox)return;const m=l("value",h),g=p.checkedKeys,v=r.multiple?fg(r.modelValue).filter(b=>b in d.value&&!n.value.getNode(b)&&!g.includes(b)):[],y=g.concat(v);if(r.checkStrictly)i(Vt,r.multiple?y:y.includes(m)?m:void 0);else if(r.multiple)i(Vt,n.value.getCheckedKeys(!0));else{const b=Qb([h],S=>!ME(l("children",S))&&!l("disabled",S),S=>l("children",S)),x=b?l("value",b):void 0,_=SE(r.modelValue)&&!!Qb([h],S=>l("value",S)===r.modelValue,S=>l("children",S));i(Vt,x===r.modelValue||_?void 0:x)}lt(()=>{var b;const x=fg(r.modelValue);n.value.setCheckedKeys(x),(b=e.onCheck)==null||b.call(e,h,{checkedKeys:n.value.getCheckedKeys(),checkedNodes:n.value.getCheckedNodes(),halfCheckedKeys:n.value.getHalfCheckedKeys(),halfCheckedNodes:n.value.getHalfCheckedNodes()})})},cacheOptions:u}};var zMe=ne({props:{data:{type:Array,default:()=>[]}},setup(r){const e=ot(tg);return ke(()=>r.data,()=>{var t;r.data.forEach(o=>{e.cachedOptions.has(o.value)||e.cachedOptions.set(o.value,o)});const i=((t=e.selectWrapper)==null?void 0:t.querySelectorAll("input"))||[];Array.from(i).includes(document.activeElement)||e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const VMe=ne({name:"ElTreeSelect",inheritAttrs:!1,props:{...Iu.props,...Zb.props,cacheData:{type:Array,default:()=>[]}},setup(r,e){const{slots:t,expose:i}=e,o=V(),n=V(),s=N(()=>r.nodeKey||r.valueKey||"value"),a=BMe(r,e,{select:o,tree:n,key:s}),{cacheOptions:l,...c}=UMe(r,e,{select:o,tree:n,key:s}),u=ur({});return i(u),Rt(()=>{Object.assign(u,{...rl(n.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...rl(o.value,["focus","blur"])})}),()=>pt(Iu,ur({...a,ref:d=>o.value=d}),{...t,default:()=>[pt(zMe,{data:l.value}),pt(Zb,ur({...c,ref:d=>n.value=d}))]})}});var ex=Xe(VMe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);ex.install=r=>{r.component(ex.name,ex)};const GMe=ex,HMe=GMe,TE=Symbol(),jMe={key:-1,level:-1,data:{}};var mg=(r=>(r.KEY="id",r.LABEL="label",r.CHILDREN="children",r.DISABLED="disabled",r))(mg||{}),EE=(r=>(r.ADD="add",r.DELETE="delete",r))(EE||{});const Nz={type:Number,default:26},$Me=Ye({data:{type:Te(Array),default:()=>qr([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Te(Object),default:()=>qr({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:Te(Array),default:()=>qr([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:Te(Array),default:()=>qr([])},indent:{type:Number,default:16},itemSize:Nz,icon:{type:Lr},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:Te([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:Te(Function)},perfMode:{type:Boolean,default:!0}}),WMe=Ye({node:{type:Te(Object),default:()=>qr(jMe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:Nz}),qMe=Ye({node:{type:Te(Object),required:!0}}),Az="node-click",Rz="node-expand",Lz="node-collapse",Oz="current-change",kz="check",Iz="check-change",Pz="node-contextmenu",XMe={[Az]:(r,e,t)=>r&&e&&t,[Rz]:(r,e)=>r&&e,[Lz]:(r,e)=>r&&e,[Oz]:(r,e)=>r&&e,[kz]:(r,e)=>r&&e,[Iz]:(r,e)=>r&&typeof e=="boolean",[Pz]:(r,e,t)=>r&&e&&t},KMe={click:(r,e)=>!!(r&&e),toggle:r=>!!r,check:(r,e)=>r&&typeof e=="boolean"};function YMe(r,e){const t=V(new Set),i=V(new Set),{emit:o}=It();ke([()=>e.value,()=>r.defaultCheckedKeys],()=>lt(()=>{b(r.defaultCheckedKeys)}),{immediate:!0});const n=()=>{if(!e.value||!r.showCheckbox||r.checkStrictly)return;const{levelTreeNodeMap:x,maxLevel:_}=e.value,S=t.value,w=new Set;for(let M=_-1;M>=1;--M){const T=x.get(M);T&&T.forEach(E=>{const C=E.children;if(C){let B=!0,I=!1;for(const L of C){const P=L.key;if(S.has(P))I=!0;else if(w.has(P)){B=!1,I=!0;break}else B=!1}B?S.add(E.key):I?(w.add(E.key),S.delete(E.key)):(S.delete(E.key),w.delete(E.key))}})}i.value=w},s=x=>t.value.has(x.key),a=x=>i.value.has(x.key),l=(x,_,S=!0)=>{const w=t.value,M=(T,E)=>{w[E?EE.ADD:EE.DELETE](T.key);const C=T.children;!r.checkStrictly&&C&&C.forEach(B=>{B.disabled||M(B,E)})};M(x,_),n(),S&&c(x,_)},c=(x,_)=>{const{checkedNodes:S,checkedKeys:w}=m(),{halfCheckedNodes:M,halfCheckedKeys:T}=g();o(kz,x.data,{checkedKeys:w,checkedNodes:S,halfCheckedKeys:T,halfCheckedNodes:M}),o(Iz,x.data,_)};function u(x=!1){return m(x).checkedKeys}function d(x=!1){return m(x).checkedNodes}function h(){return g().halfCheckedKeys}function p(){return g().halfCheckedNodes}function m(x=!1){const _=[],S=[];if(e!=null&&e.value&&r.showCheckbox){const{treeNodeMap:w}=e.value;t.value.forEach(M=>{const T=w.get(M);T&&(!x||x&&T.isLeaf)&&(S.push(M),_.push(T.data))})}return{checkedKeys:S,checkedNodes:_}}function g(){const x=[],_=[];if(e!=null&&e.value&&r.showCheckbox){const{treeNodeMap:S}=e.value;i.value.forEach(w=>{const M=S.get(w);M&&(_.push(w),x.push(M.data))})}return{halfCheckedNodes:x,halfCheckedKeys:_}}function v(x){t.value.clear(),i.value.clear(),b(x)}function y(x,_){if(e!=null&&e.value&&r.showCheckbox){const S=e.value.treeNodeMap.get(x);S&&l(S,_,!1)}}function b(x){if(e!=null&&e.value){const{treeNodeMap:_}=e.value;if(r.showCheckbox&&_&&x)for(const S of x){const w=_.get(S);w&&!s(w)&&l(w,!0,!1)}}}return{updateCheckedKeys:n,toggleCheckbox:l,isChecked:s,isIndeterminate:a,getCheckedKeys:u,getCheckedNodes:d,getHalfCheckedKeys:h,getHalfCheckedNodes:p,setChecked:y,setCheckedKeys:v}}function JMe(r,e){const t=V(new Set([])),i=V(new Set([])),o=N(()=>St(r.filterMethod));function n(a){var l;if(!o.value)return;const c=new Set,u=i.value,d=t.value,h=[],p=((l=e.value)==null?void 0:l.treeNodes)||[],m=r.filterMethod;d.clear();function g(v){v.forEach(y=>{h.push(y),m!=null&&m(a,y.data)?h.forEach(x=>{c.add(x.key)}):y.isLeaf&&d.add(y.key);const b=y.children;if(b&&g(b),!y.isLeaf){if(!c.has(y.key))d.add(y.key);else if(b){let x=!0;for(const _ of b)if(!d.has(_.key)){x=!1;break}x?u.add(y.key):u.delete(y.key)}}h.pop()})}return g(p),c}function s(a){return i.value.has(a.key)}return{hiddenExpandIconKeySet:i,hiddenNodeKeySet:t,doFilter:n,isForceHiddenExpandIcon:s}}function ZMe(r,e){const t=V(new Set(r.defaultExpandedKeys)),i=V(),o=Rr();ke(()=>r.currentNodeKey,Z=>{i.value=Z},{immediate:!0}),ke(()=>r.data,Z=>{xe(Z)},{immediate:!0});const{isIndeterminate:n,isChecked:s,toggleCheckbox:a,getCheckedKeys:l,getCheckedNodes:c,getHalfCheckedKeys:u,getHalfCheckedNodes:d,setChecked:h,setCheckedKeys:p}=YMe(r,o),{doFilter:m,hiddenNodeKeySet:g,isForceHiddenExpandIcon:v}=JMe(r,o),y=N(()=>{var Z;return((Z=r.props)==null?void 0:Z.value)||mg.KEY}),b=N(()=>{var Z;return((Z=r.props)==null?void 0:Z.children)||mg.CHILDREN}),x=N(()=>{var Z;return((Z=r.props)==null?void 0:Z.disabled)||mg.DISABLED}),_=N(()=>{var Z;return((Z=r.props)==null?void 0:Z.label)||mg.LABEL}),S=N(()=>{const Z=t.value,de=g.value,Ce=[],ue=o.value&&o.value.treeNodes||[];function D(){const K=[];for(let re=ue.length-1;re>=0;--re)K.push(ue[re]);for(;K.length;){const re=K.pop();if(re&&(de.has(re.key)||Ce.push(re),Z.has(re.key))){const ae=re.children;if(ae){const le=ae.length;for(let Se=le-1;Se>=0;--Se)K.push(ae[Se])}}}}return D(),Ce}),w=N(()=>S.value.length>0);function M(Z){const de=new Map,Ce=new Map;let ue=1;function D(re,ae=1,le=void 0){var Se;const Ae=[];for(const Ne of re){const Me=C(Ne),Le={level:ae,key:Me,data:Ne};Le.label=I(Ne),Le.parent=le;const je=E(Ne);Le.disabled=B(Ne),Le.isLeaf=!je||je.length===0,je&&je.length&&(Le.children=D(je,ae+1,Le)),Ae.push(Le),de.set(Me,Le),Ce.has(ae)||Ce.set(ae,[]),(Se=Ce.get(ae))==null||Se.push(Le)}return ae>ue&&(ue=ae),Ae}const K=D(Z);return{treeNodeMap:de,levelTreeNodeMap:Ce,maxLevel:ue,treeNodes:K}}function T(Z){const de=m(Z);de&&(t.value=de)}function E(Z){return Z[b.value]}function C(Z){return Z?Z[y.value]:""}function B(Z){return Z[x.value]}function I(Z){return Z[_.value]}function L(Z){t.value.has(Z.key)?O(Z):F(Z)}function P(Z){t.value=new Set(Z)}function U(Z,de){e(Az,Z.data,Z,de),G(Z),r.expandOnClickNode&&L(Z),r.showCheckbox&&r.checkOnClickNode&&!Z.disabled&&a(Z,!s(Z),!0)}function G(Z){j(Z)||(i.value=Z.key,e(Oz,Z.data,Z))}function R(Z,de){a(Z,de)}function F(Z){const de=t.value;if(o.value&&r.accordion){const{treeNodeMap:Ce}=o.value;de.forEach(ue=>{const D=Ce.get(ue);Z&&Z.level===(D==null?void 0:D.level)&&de.delete(ue)})}de.add(Z.key),e(Rz,Z.data,Z)}function O(Z){t.value.delete(Z.key),e(Lz,Z.data,Z)}function H(Z){return t.value.has(Z.key)}function $(Z){return!!Z.disabled}function j(Z){const de=i.value;return de!==void 0&&de===Z.key}function J(){var Z,de;if(i.value)return(de=(Z=o.value)==null?void 0:Z.treeNodeMap.get(i.value))==null?void 0:de.data}function ce(){return i.value}function ve(Z){i.value=Z}function xe(Z){lt(()=>o.value=M(Z))}function te(Z){var de;const Ce=zt(Z)?C(Z):Z;return(de=o.value)==null?void 0:de.treeNodeMap.get(Ce)}return{tree:o,flattenTree:S,isNotEmpty:w,getKey:C,getChildren:E,toggleExpand:L,toggleCheckbox:a,isExpanded:H,isChecked:s,isIndeterminate:n,isDisabled:$,isCurrent:j,isForceHiddenExpandIcon:v,handleNodeClick:U,handleNodeCheck:R,getCurrentNode:J,getCurrentKey:ce,setCurrentKey:ve,getCheckedKeys:l,getCheckedNodes:c,getHalfCheckedKeys:u,getHalfCheckedNodes:d,setChecked:h,setCheckedKeys:p,filter:T,setData:xe,getNode:te,expandNode:F,collapseNode:O,setExpandedKeys:P}}var QMe=ne({name:"ElTreeNodeContent",props:qMe,setup(r){const e=ot(TE),t=Pe("tree");return()=>{const i=r.node,{data:o}=i;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:i,data:o}):pt("span",{class:t.be("node","label")},[i==null?void 0:i.label])}}});const eTe=["aria-expanded","aria-disabled","aria-checked","data-key","onClick"],tTe=ne({name:"ElTreeNode"}),rTe=ne({...tTe,props:WMe,emits:KMe,setup(r,{emit:e}){const t=r,i=ot(TE),o=Pe("tree"),n=N(()=>{var d;return(d=i==null?void 0:i.props.indent)!=null?d:16}),s=N(()=>{var d;return(d=i==null?void 0:i.props.icon)!=null?d:iD}),a=d=>{e("click",t.node,d)},l=()=>{e("toggle",t.node)},c=d=>{e("check",t.node,d)},u=d=>{var h,p,m,g;(m=(p=(h=i==null?void 0:i.instance)==null?void 0:h.vnode)==null?void 0:p.props)!=null&&m.onNodeContextmenu&&(d.stopPropagation(),d.preventDefault()),i==null||i.ctx.emit(Pz,d,(g=t.node)==null?void 0:g.data,t.node)};return(d,h)=>{var p,m,g;return A(),W("div",{ref:"node$",class:k([f(o).b("node"),f(o).is("expanded",d.expanded),f(o).is("current",d.current),f(o).is("focusable",!d.disabled),f(o).is("checked",!d.disabled&&d.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":d.expanded,"aria-disabled":d.disabled,"aria-checked":d.checked,"data-key":(p=d.node)==null?void 0:p.key,onClick:vt(a,["stop"]),onContextmenu:u},[X("div",{class:k(f(o).be("node","content")),style:ct({paddingLeft:`${(d.node.level-1)*f(n)}px`,height:d.itemSize+"px"})},[f(s)?(A(),_e(f(st),{key:0,class:k([f(o).is("leaf",!!((m=d.node)!=null&&m.isLeaf)),f(o).is("hidden",d.hiddenExpandIcon),{expanded:!((g=d.node)!=null&&g.isLeaf)&&d.expanded},f(o).be("node","expand-icon")]),onClick:vt(l,["stop"])},{default:se(()=>[(A(),_e(Ht(f(s))))]),_:1},8,["class","onClick"])):we("v-if",!0),d.showCheckbox?(A(),_e(f(_s),{key:1,"model-value":d.checked,indeterminate:d.indeterminate,disabled:d.disabled,onChange:c,onClick:h[0]||(h[0]=vt(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled"])):we("v-if",!0),ee(f(QMe),{node:d.node},null,8,["node"])],6)],42,eTe)}}});var iTe=Xe(rTe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree-node.vue"]]);const oTe=ne({name:"ElTreeV2"}),nTe=ne({...oTe,props:$Me,emits:XMe,setup(r,{expose:e,emit:t}){const i=r,o=yo(),n=N(()=>i.itemSize);Wt(TE,{ctx:{emit:t,slots:o},props:i,instance:It()}),Wt(xa,void 0);const{t:s}=ir(),a=Pe("tree"),{flattenTree:l,isNotEmpty:c,toggleExpand:u,isExpanded:d,isIndeterminate:h,isChecked:p,isDisabled:m,isCurrent:g,isForceHiddenExpandIcon:v,handleNodeClick:y,handleNodeCheck:b,toggleCheckbox:x,getCurrentNode:_,getCurrentKey:S,setCurrentKey:w,getCheckedKeys:M,getCheckedNodes:T,getHalfCheckedKeys:E,getHalfCheckedNodes:C,setChecked:B,setCheckedKeys:I,filter:L,setData:P,getNode:U,expandNode:G,collapseNode:R,setExpandedKeys:F}=ZMe(i,t);return e({toggleCheckbox:x,getCurrentNode:_,getCurrentKey:S,setCurrentKey:w,getCheckedKeys:M,getCheckedNodes:T,getHalfCheckedKeys:E,getHalfCheckedNodes:C,setChecked:B,setCheckedKeys:I,filter:L,setData:P,getNode:U,expandNode:G,collapseNode:R,setExpandedKeys:F}),(O,H)=>{var $;return A(),W("div",{class:k([f(a).b(),{[f(a).m("highlight-current")]:O.highlightCurrent}]),role:"tree"},[f(c)?(A(),_e(f(yU),{key:0,"class-name":f(a).b("virtual-list"),data:f(l),total:f(l).length,height:O.height,"item-size":f(n),"perf-mode":O.perfMode},{default:se(({data:j,index:J,style:ce})=>[(A(),_e(iTe,{key:j[J].key,style:ct(ce),node:j[J],expanded:f(d)(j[J]),"show-checkbox":O.showCheckbox,checked:f(p)(j[J]),indeterminate:f(h)(j[J]),"item-size":f(n),disabled:f(m)(j[J]),current:f(g)(j[J]),"hidden-expand-icon":f(v)(j[J]),onClick:f(y),onToggle:f(u),onCheck:f(b)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(A(),W("div",{key:1,class:k(f(a).e("empty-block"))},[X("span",{class:k(f(a).e("empty-text"))},ze(($=O.emptyText)!=null?$:f(s)("el.tree.emptyText")),3)],2))],2)}}});var sTe=Xe(nTe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree.vue"]]);const aTe=Bt(sTe),Dz=Symbol("uploadContextKey"),lTe="ElUpload";class cTe extends Error{constructor(e,t,i,o){super(e),this.name="UploadAjaxError",this.status=t,this.method=i,this.url=o}}function Bz(r,e,t){let i;return t.response?i=`${t.response.error||t.response}`:t.responseText?i=`${t.responseText}`:i=`fail to ${e.method} ${r} ${t.status}`,new cTe(i,t.status,e.method,r)}function uTe(r){const e=r.responseText||r.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const dTe=r=>{typeof XMLHttpRequest>"u"&&Ei(lTe,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,t=r.action;e.upload&&e.upload.addEventListener("progress",n=>{const s=n;s.percent=n.total>0?n.loaded/n.total*100:0,r.onProgress(s)});const i=new FormData;if(r.data)for(const[n,s]of Object.entries(r.data))it(s)&&s.length?i.append(n,...s):i.append(n,s);i.append(r.filename,r.file,r.file.name),e.addEventListener("error",()=>{r.onError(Bz(t,r,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return r.onError(Bz(t,r,e));r.onSuccess(uTe(e))}),e.open(r.method,t,!0),r.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const o=r.headers||{};if(o instanceof Headers)o.forEach((n,s)=>e.setRequestHeader(s,n));else for(const[n,s]of Object.entries(o))Mi(s)||e.setRequestHeader(n,String(s));return e.send(i),e},Fz=["text","picture","picture-card"];let hTe=1;const CE=()=>Date.now()+hTe++,Uz=Ye({action:{type:String,default:"#"},headers:{type:Te(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>qr({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:Te(Array),default:()=>qr([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Fz,default:"text"},httpRequest:{type:Te(Function),default:dTe},disabled:Boolean,limit:Number}),pTe=Ye({...Uz,beforeUpload:{type:Te(Function),default:_r},beforeRemove:{type:Te(Function)},onRemove:{type:Te(Function),default:_r},onChange:{type:Te(Function),default:_r},onPreview:{type:Te(Function),default:_r},onSuccess:{type:Te(Function),default:_r},onProgress:{type:Te(Function),default:_r},onError:{type:Te(Function),default:_r},onExceed:{type:Te(Function),default:_r}}),fTe=Ye({files:{type:Te(Array),default:()=>qr([])},disabled:{type:Boolean,default:!1},handlePreview:{type:Te(Function),default:_r},listType:{type:String,values:Fz,default:"text"}}),mTe={remove:r=>!!r},gTe=["onKeydown"],vTe=["src"],yTe=["onClick"],bTe=["title"],xTe=["onClick"],_Te=["onClick"],wTe=ne({name:"ElUploadList"}),STe=ne({...wTe,props:fTe,emits:mTe,setup(r,{emit:e}){const{t}=ir(),i=Pe("upload"),o=Pe("icon"),n=Pe("list"),s=bn(),a=V(!1),l=c=>{e("remove",c)};return(c,u)=>(A(),_e(PI,{tag:"ul",class:k([f(i).b("list"),f(i).bm("list",c.listType),f(i).is("disabled",f(s))]),name:f(n).b()},{default:se(()=>[(A(!0),W(nt,null,jt(c.files,d=>(A(),W("li",{key:d.uid||d.name,class:k([f(i).be("list","item"),f(i).is(d.status),{focusing:a.value}]),tabindex:"0",onKeydown:Qt(h=>!f(s)&&l(d),["delete"]),onFocus:u[0]||(u[0]=h=>a.value=!0),onBlur:u[1]||(u[1]=h=>a.value=!1),onClick:u[2]||(u[2]=h=>a.value=!1)},[Oe(c.$slots,"default",{file:d},()=>[c.listType==="picture"||d.status!=="uploading"&&c.listType==="picture-card"?(A(),W("img",{key:0,class:k(f(i).be("list","item-thumbnail")),src:d.url,alt:""},null,10,vTe)):we("v-if",!0),d.status==="uploading"||c.listType!=="picture-card"?(A(),W("div",{key:1,class:k(f(i).be("list","item-info"))},[X("a",{class:k(f(i).be("list","item-name")),onClick:vt(h=>c.handlePreview(d),["prevent"])},[ee(f(st),{class:k(f(o).m("document"))},{default:se(()=>[ee(f(tre))]),_:1},8,["class"]),X("span",{class:k(f(i).be("list","item-file-name")),title:d.name},ze(d.name),11,bTe)],10,yTe),d.status==="uploading"?(A(),_e(f(sU),{key:0,type:c.listType==="picture-card"?"circle":"line","stroke-width":c.listType==="picture-card"?6:2,percentage:Number(d.percentage),style:ct(c.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):we("v-if",!0)],2)):we("v-if",!0),X("label",{class:k(f(i).be("list","item-status-label"))},[c.listType==="text"?(A(),_e(f(st),{key:0,class:k([f(o).m("upload-success"),f(o).m("circle-check")])},{default:se(()=>[ee(f(aM))]),_:1},8,["class"])):["picture-card","picture"].includes(c.listType)?(A(),_e(f(st),{key:1,class:k([f(o).m("upload-success"),f(o).m("check")])},{default:se(()=>[ee(f(km))]),_:1},8,["class"])):we("v-if",!0)],2),f(s)?we("v-if",!0):(A(),_e(f(st),{key:2,class:k(f(o).m("close")),onClick:h=>l(d)},{default:se(()=>[ee(f(Vs))]),_:2},1032,["class","onClick"])),we(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),we(" This is a bug which needs to be fixed "),we(" TODO: Fix the incorrect navigation interaction "),f(s)?we("v-if",!0):(A(),W("i",{key:3,class:k(f(o).m("close-tip"))},ze(f(t)("el.upload.deleteTip")),3)),c.listType==="picture-card"?(A(),W("span",{key:4,class:k(f(i).be("list","item-actions"))},[X("span",{class:k(f(i).be("list","item-preview")),onClick:h=>c.handlePreview(d)},[ee(f(st),{class:k(f(o).m("zoom-in"))},{default:se(()=>[ee(f(lD))]),_:1},8,["class"])],10,xTe),f(s)?we("v-if",!0):(A(),W("span",{key:0,class:k(f(i).be("list","item-delete")),onClick:h=>l(d)},[ee(f(st),{class:k(f(o).m("delete"))},{default:se(()=>[ee(f(Kte))]),_:1},8,["class"])],10,_Te))],2)):we("v-if",!0)])],42,gTe))),128)),Oe(c.$slots,"append")]),_:3},8,["class","name"]))}});var zz=Xe(STe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const MTe=Ye({disabled:{type:Boolean,default:!1}}),TTe={file:r=>it(r)},ETe=["onDrop","onDragover"],Vz="ElUploadDrag",CTe=ne({name:Vz}),NTe=ne({...CTe,props:MTe,emits:TTe,setup(r,{emit:e}){const t=ot(Dz);t||Ei(Vz,"usage: <el-upload><el-upload-dragger /></el-upload>");const i=Pe("upload"),o=V(!1),n=bn(),s=l=>{if(n.value)return;o.value=!1,l.stopPropagation();const c=Array.from(l.dataTransfer.files),u=t.accept.value;if(!u){e("file",c);return}const d=c.filter(h=>{const{type:p,name:m}=h,g=m.includes(".")?`.${m.split(".").pop()}`:"",v=p.replace(/\/.*$/,"");return u.split(",").map(y=>y.trim()).filter(y=>y).some(y=>y.startsWith(".")?g===y:/\/\*$/.test(y)?v===y.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(y)?p===y:!1)});e("file",d)},a=()=>{n.value||(o.value=!0)};return(l,c)=>(A(),W("div",{class:k([f(i).b("dragger"),f(i).is("dragover",o.value)]),onDrop:vt(s,["prevent"]),onDragover:vt(a,["prevent"]),onDragleave:c[0]||(c[0]=vt(u=>o.value=!1,["prevent"]))},[Oe(l.$slots,"default")],42,ETe))}});var ATe=Xe(NTe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const RTe=Ye({...Uz,beforeUpload:{type:Te(Function),default:_r},onRemove:{type:Te(Function),default:_r},onStart:{type:Te(Function),default:_r},onSuccess:{type:Te(Function),default:_r},onProgress:{type:Te(Function),default:_r},onError:{type:Te(Function),default:_r},onExceed:{type:Te(Function),default:_r}}),LTe=["onKeydown"],OTe=["name","multiple","accept"],kTe=ne({name:"ElUploadContent",inheritAttrs:!1}),ITe=ne({...kTe,props:RTe,setup(r,{expose:e}){const t=r,i=Pe("upload"),o=bn(),n=Rr({}),s=Rr(),a=p=>{if(p.length===0)return;const{autoUpload:m,limit:g,fileList:v,multiple:y,onStart:b,onExceed:x}=t;if(g&&v.length+p.length>g){x(p,v);return}y||(p=p.slice(0,1));for(const _ of p){const S=_;S.uid=CE(),b(S),m&&l(S)}},l=async p=>{if(s.value.value="",!t.beforeUpload)return c(p);let m,g={};try{const y=t.data,b=t.beforeUpload(p);g=zt(t.data)?Iy(t.data):t.data,m=await b,zt(t.data)&&mn(y,g)&&(g=Iy(t.data))}catch{m=!1}if(m===!1){t.onRemove(p);return}let v=p;m instanceof Blob&&(m instanceof File?v=m:v=new File([m],p.name,{type:p.type})),c(Object.assign(v,{uid:p.uid}),g)},c=(p,m)=>{const{headers:g,data:v,method:y,withCredentials:b,name:x,action:_,onProgress:S,onSuccess:w,onError:M,httpRequest:T}=t,{uid:E}=p,C={headers:g||{},withCredentials:b,file:p,data:m??v,method:y,filename:x,action:_,onProgress:I=>{S(I,p)},onSuccess:I=>{w(I,p),delete n.value[E]},onError:I=>{M(I,p),delete n.value[E]}},B=T(C);n.value[E]=B,B instanceof Promise&&B.then(C.onSuccess,C.onError)},u=p=>{const m=p.target.files;m&&a(Array.from(m))},d=()=>{o.value||(s.value.value="",s.value.click())},h=()=>{d()};return e({abort:p=>{qQ(n.value).filter(p?([m])=>String(p.uid)===m:()=>!0).forEach(([m,g])=>{g instanceof XMLHttpRequest&&g.abort(),delete n.value[m]})},upload:l}),(p,m)=>(A(),W("div",{class:k([f(i).b(),f(i).m(p.listType),f(i).is("drag",p.drag)]),tabindex:"0",onClick:d,onKeydown:Qt(vt(h,["self"]),["enter","space"])},[p.drag?(A(),_e(ATe,{key:0,disabled:f(o),onFile:a},{default:se(()=>[Oe(p.$slots,"default")]),_:3},8,["disabled"])):Oe(p.$slots,"default",{key:1}),X("input",{ref_key:"inputRef",ref:s,class:k(f(i).e("input")),name:p.name,multiple:p.multiple,accept:p.accept,type:"file",onChange:u,onClick:m[0]||(m[0]=vt(()=>{},["stop"]))},null,42,OTe)],42,LTe))}});var Gz=Xe(ITe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const PTe="ElUpload",DTe=r=>{var e;(e=r.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(r.url)},BTe=(r,e)=>{const t=Iq(r,"fileList",void 0,{passive:!0}),i=h=>t.value.find(p=>p.uid===h.uid);function o(h){var p;(p=e.value)==null||p.abort(h)}function n(h=["ready","uploading","success","fail"]){t.value=t.value.filter(p=>!h.includes(p.status))}const s=(h,p)=>{const m=i(p);m&&(console.error(h),m.status="fail",t.value.splice(t.value.indexOf(m),1),r.onError(h,m,t.value),r.onChange(m,t.value))},a=(h,p)=>{const m=i(p);m&&(r.onProgress(h,m,t.value),m.status="uploading",m.percentage=Math.round(h.percent))},l=(h,p)=>{const m=i(p);m&&(m.status="success",m.response=h,r.onSuccess(h,m,t.value),r.onChange(m,t.value))},c=h=>{Mi(h.uid)&&(h.uid=CE());const p={name:h.name,percentage:0,status:"ready",size:h.size,raw:h,uid:h.uid};if(r.listType==="picture-card"||r.listType==="picture")try{p.url=URL.createObjectURL(h)}catch(m){m.message,r.onError(m,p,t.value)}t.value=[...t.value,p],r.onChange(p,t.value)},u=async h=>{const p=h instanceof File?i(h):h;p||Ei(PTe,"file to be removed not found");const m=g=>{o(g);const v=t.value;v.splice(v.indexOf(g),1),r.onRemove(g,v),DTe(g)};r.beforeRemove?await r.beforeRemove(p,t.value)!==!1&&m(p):m(p)};function d(){t.value.filter(({status:h})=>h==="ready").forEach(({raw:h})=>{var p;return h&&((p=e.value)==null?void 0:p.upload(h))})}return ke(()=>r.listType,h=>{h!=="picture-card"&&h!=="picture"||(t.value=t.value.map(p=>{const{raw:m,url:g}=p;if(!g&&m)try{p.url=URL.createObjectURL(m)}catch(v){r.onError(v,p,t.value)}return p}))}),ke(t,h=>{for(const p of h)p.uid||(p.uid=CE()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:t,abort:o,clearFiles:n,handleError:s,handleProgress:a,handleStart:c,handleSuccess:l,handleRemove:u,submit:d}},FTe=ne({name:"ElUpload"}),UTe=ne({...FTe,props:pTe,setup(r,{expose:e}){const t=r,i=bn(),o=Rr(),{abort:n,submit:s,clearFiles:a,uploadFiles:l,handleStart:c,handleError:u,handleRemove:d,handleSuccess:h,handleProgress:p}=BTe(t,o),m=N(()=>t.listType==="picture-card"),g=N(()=>({...t,fileList:l.value,onStart:c,onProgress:p,onSuccess:h,onError:u,onRemove:d}));return Vr(()=>{l.value.forEach(({url:v})=>{v!=null&&v.startsWith("blob:")&&URL.revokeObjectURL(v)})}),Wt(Dz,{accept:Yr(t,"accept")}),e({abort:n,submit:s,clearFiles:a,handleStart:c,handleRemove:d}),(v,y)=>(A(),W("div",null,[f(m)&&v.showFileList?(A(),_e(zz,{key:0,disabled:f(i),"list-type":v.listType,files:f(l),"handle-preview":v.onPreview,onRemove:f(d)},Ya({append:se(()=>[ee(Gz,$t({ref_key:"uploadRef",ref:o},f(g)),{default:se(()=>[v.$slots.trigger?Oe(v.$slots,"trigger",{key:0}):we("v-if",!0),!v.$slots.trigger&&v.$slots.default?Oe(v.$slots,"default",{key:1}):we("v-if",!0)]),_:3},16)]),_:2},[v.$slots.file?{name:"default",fn:se(({file:b})=>[Oe(v.$slots,"file",{file:b})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):we("v-if",!0),!f(m)||f(m)&&!v.showFileList?(A(),_e(Gz,$t({key:1,ref_key:"uploadRef",ref:o},f(g)),{default:se(()=>[v.$slots.trigger?Oe(v.$slots,"trigger",{key:0}):we("v-if",!0),!v.$slots.trigger&&v.$slots.default?Oe(v.$slots,"default",{key:1}):we("v-if",!0)]),_:3},16)):we("v-if",!0),v.$slots.trigger?Oe(v.$slots,"default",{key:2}):we("v-if",!0),Oe(v.$slots,"tip"),!f(m)&&v.showFileList?(A(),_e(zz,{key:3,disabled:f(i),"list-type":v.listType,files:f(l),"handle-preview":v.onPreview,onRemove:f(d)},Ya({_:2},[v.$slots.file?{name:"default",fn:se(({file:b})=>[Oe(v.$slots,"file",{file:b})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):we("v-if",!0)]))}});var zTe=Xe(UTe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const VTe=Bt(zTe);var GTe=[Zse,cae,Pce,rSe,Gce,Kce,KB,lue,cue,_o,sF,Nde,kde,qde,Xde,lpe,Xhe,fpe,_s,fhe,XF,Epe,$pe,Wpe,Dpe,_fe,jse,kfe,Ife,Pfe,Dfe,Bfe,Yme,sge,age,Sge,D4,Bge,Nve,Ave,Rve,q4,rle,ile,st,w0e,X4,Io,K4,D0e,tye,rye,iye,oye,dye,mbe,_be,Rbe,WB,sU,t4,Rhe,Ahe,qbe,Zbe,_pe,sl,Iu,kb,Gye,Gxe,Yxe,Jxe,C1e,O1e,DU,H1e,Z1e,Q1e,u_e,vwe,ywe,tSe,vSe,ySe,Ym,SSe,sde,ASe,ISe,PSe,Zo,aMe,wMe,DMe,HMe,aTe,VTe];const Ws="ElInfiniteScroll",HTe=50,jTe=200,$Te=0,WTe={delay:{type:Number,default:jTe},distance:{type:Number,default:$Te},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},NE=(r,e)=>Object.entries(WTe).reduce((t,[i,o])=>{var n,s;const{type:a,default:l}=o,c=r.getAttribute(`infinite-scroll-${i}`);let u=(s=(n=e[c])!=null?n:c)!=null?s:l;return u=u==="false"?!1:u,u=a(u),t[i]=Number.isNaN(u)?l:u,t},{}),Hz=r=>{const{observer:e}=r[Ws];e&&(e.disconnect(),delete r[Ws].observer)},qTe=(r,e)=>{const{container:t,containerEl:i,instance:o,observer:n,lastScrollTop:s}=r[Ws],{disabled:a,distance:l}=NE(r,o),{clientHeight:c,scrollHeight:u,scrollTop:d}=i,h=d-s;if(r[Ws].lastScrollTop=d,n||a||h<0)return;let p=!1;if(t===r)p=u-(c+d)<=l;else{const{clientTop:m,scrollHeight:g}=r,v=Fq(r,i);p=d+c>=v+m+g-l}p&&e.call(o)};function AE(r,e){const{containerEl:t,instance:i}=r[Ws],{disabled:o}=NE(r,i);o||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?e.call(i):Hz(r))}const XTe={async mounted(r,e){const{instance:t,value:i}=e;St(i)||Ei(Ws,"'v-infinite-scroll' binding value must be a function"),await lt();const{delay:o,immediate:n}=NE(r,t),s=sM(r,!0),a=s===window?document.documentElement:s,l=Mu(qTe.bind(null,r,i),o);if(s){if(r[Ws]={instance:t,container:s,containerEl:a,delay:o,cb:i,onScroll:l,lastScrollTop:a.scrollTop},n){const c=new MutationObserver(Mu(AE.bind(null,r,i),HTe));r[Ws].observer=c,c.observe(r,{childList:!0,subtree:!0}),AE(r,i)}s.addEventListener("scroll",l)}},unmounted(r){const{container:e,onScroll:t}=r[Ws];e==null||e.removeEventListener("scroll",t),Hz(r)},async updated(r){if(!r[Ws])await lt();else{const{containerEl:e,cb:t,observer:i}=r[Ws];e.clientHeight&&i&&AE(r,t)}}},RE=XTe;RE.install=r=>{r.directive("InfiniteScroll",RE)};const KTe=RE;function YTe(r){let e;const t=V(!1),i=ur({...r,originalPosition:"",originalOverflow:"",visible:!1});function o(h){i.text=h}function n(){const h=i.parent,p=d.ns;if(!h.vLoadingAddClassList){let m=h.getAttribute("loading-number");m=Number.parseInt(m)-1,m?h.setAttribute("loading-number",m.toString()):(gn(h,p.bm("parent","relative")),h.removeAttribute("loading-number")),gn(h,p.bm("parent","hidden"))}s(),u.unmount()}function s(){var h,p;(p=(h=d.$el)==null?void 0:h.parentNode)==null||p.removeChild(d.$el)}function a(){var h;r.beforeClose&&!r.beforeClose()||(t.value=!0,clearTimeout(e),e=window.setTimeout(l,400),i.visible=!1,(h=r.closed)==null||h.call(r))}function l(){if(!t.value)return;const h=i.parent;t.value=!1,h.vLoadingAddClassList=void 0,n()}const c=ne({name:"ElLoading",setup(h,{expose:p}){const{ns:m,zIndex:g}=ib("loading");return p({ns:m,zIndex:g}),()=>{const v=i.spinner||i.svg,y=pt("svg",{class:"circular",viewBox:i.svgViewBox?i.svgViewBox:"0 0 50 50",...v?{innerHTML:v}:{}},[pt("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),b=i.text?pt("p",{class:m.b("text")},[i.text]):void 0;return pt(fi,{name:m.b("fade"),onAfterLeave:l},{default:se(()=>[At(ee("div",{style:{backgroundColor:i.background||""},class:[m.b("mask"),i.customClass,i.fullscreen?"is-fullscreen":""]},[pt("div",{class:m.b("spinner")},[y,b])]),[[nr,i.visible]])])})}}}),u=HI(c),d=u.mount(document.createElement("div"));return{...qi(i),setText:o,removeElLoadingChild:s,close:a,handleAfterLeave:l,vm:d,get $el(){return d.$el}}}let tx;const LE=function(r={}){if(!Jt)return;const e=JTe(r);if(e.fullscreen&&tx)return tx;const t=YTe({...e,closed:()=>{var o;(o=e.closed)==null||o.call(e),e.fullscreen&&(tx=void 0)}});ZTe(e,e.parent,t),jz(e,e.parent,t),e.parent.vLoadingAddClassList=()=>jz(e,e.parent,t);let i=e.parent.getAttribute("loading-number");return i?i=`${Number.parseInt(i)+1}`:i="1",e.parent.setAttribute("loading-number",i),e.parent.appendChild(t.$el),lt(()=>t.visible.value=e.visible),e.fullscreen&&(tx=t),t},JTe=r=>{var e,t,i,o;let n;return Tt(r.target)?n=(e=document.querySelector(r.target))!=null?e:document.body:n=r.target||document.body,{parent:n===document.body||r.body?document.body:n,background:r.background||"",svg:r.svg||"",svgViewBox:r.svgViewBox||"",spinner:r.spinner||!1,text:r.text||"",fullscreen:n===document.body&&((t=r.fullscreen)!=null?t:!0),lock:(i=r.lock)!=null?i:!1,customClass:r.customClass||"",visible:(o=r.visible)!=null?o:!0,target:n}},ZTe=async(r,e,t)=>{const{nextZIndex:i}=t.vm.zIndex||t.vm._.exposed.zIndex,o={};if(r.fullscreen)t.originalPosition.value=Zl(document.body,"position"),t.originalOverflow.value=Zl(document.body,"overflow"),o.zIndex=i();else if(r.parent===document.body){t.originalPosition.value=Zl(document.body,"position"),await lt();for(const n of["top","left"]){const s=n==="top"?"scrollTop":"scrollLeft";o[n]=`${r.target.getBoundingClientRect()[n]+document.body[s]+document.documentElement[s]-Number.parseInt(Zl(document.body,`margin-${n}`),10)}px`}for(const n of["height","width"])o[n]=`${r.target.getBoundingClientRect()[n]}px`}else t.originalPosition.value=Zl(e,"position");for(const[n,s]of Object.entries(o))t.$el.style[n]=s},jz=(r,e,t)=>{const i=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?gn(e,i.bm("parent","relative")):fa(e,i.bm("parent","relative")),r.fullscreen&&r.lock?fa(e,i.bm("parent","hidden")):gn(e,i.bm("parent","hidden"))},OE=Symbol("ElLoading"),$z=(r,e)=>{var t,i,o,n;const s=e.instance,a=h=>zt(e.value)?e.value[h]:void 0,l=h=>{const p=Tt(h)&&(s==null?void 0:s[h])||h;return p&&V(p)},c=h=>l(a(h)||r.getAttribute(`element-loading-${zl(h)}`)),u=(t=a("fullscreen"))!=null?t:e.modifiers.fullscreen,d={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:u,target:(i=a("target"))!=null?i:u?void 0:r,body:(o=a("body"))!=null?o:e.modifiers.body,lock:(n=a("lock"))!=null?n:e.modifiers.lock};r[OE]={options:d,instance:LE(d)}},QTe=(r,e)=>{for(const t of Object.keys(e))Ar(e[t])&&(e[t].value=r[t])},Wz={mounted(r,e){e.value&&$z(r,e)},updated(r,e){const t=r[OE];e.oldValue!==e.value&&(e.value&&!e.oldValue?$z(r,e):e.value&&e.oldValue?zt(e.value)&&QTe(e.value,t.options):t==null||t.instance.close())},unmounted(r){var e;(e=r[OE])==null||e.instance.close()}},eEe={install(r){r.directive("loading",Wz),r.config.globalProperties.$loading=LE},directive:Wz,service:LE},qz=["success","info","warning","error"],_n=qr({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Jt?document.body:void 0}),tEe=Ye({customClass:{type:String,default:_n.customClass},center:{type:Boolean,default:_n.center},dangerouslyUseHTMLString:{type:Boolean,default:_n.dangerouslyUseHTMLString},duration:{type:Number,default:_n.duration},icon:{type:Lr,default:_n.icon},id:{type:String,default:_n.id},message:{type:Te([String,Object,Function]),default:_n.message},onClose:{type:Te(Function),required:!1},showClose:{type:Boolean,default:_n.showClose},type:{type:String,values:qz,default:_n.type},offset:{type:Number,default:_n.offset},zIndex:{type:Number,default:_n.zIndex},grouping:{type:Boolean,default:_n.grouping},repeatNum:{type:Number,default:_n.repeatNum}}),rEe={destroy:()=>!0},qs=Gw([]),iEe=r=>{const e=qs.findIndex(o=>o.id===r),t=qs[e];let i;return e>0&&(i=qs[e-1]),{current:t,prev:i}},oEe=r=>{const{prev:e}=iEe(r);return e?e.vm.exposed.bottom.value:0},nEe=(r,e)=>qs.findIndex(t=>t.id===r)>0?20:e,sEe=["id"],aEe=["innerHTML"],lEe=ne({name:"ElMessage"}),cEe=ne({...lEe,props:tEe,emits:rEe,setup(r,{expose:e}){const t=r,{Close:i}=uM,{ns:o,zIndex:n}=ib("message"),{currentZIndex:s,nextZIndex:a}=n,l=V(),c=V(!1),u=V(0);let d;const h=N(()=>t.type?t.type==="error"?"danger":t.type:"info"),p=N(()=>{const M=t.type;return{[o.bm("icon",M)]:M&&ic[M]}}),m=N(()=>t.icon||ic[t.type]||""),g=N(()=>oEe(t.id)),v=N(()=>nEe(t.id,t.offset)+g.value),y=N(()=>u.value+v.value),b=N(()=>({top:`${v.value}px`,zIndex:s.value}));function x(){t.duration!==0&&({stop:d}=vu(()=>{S()},t.duration))}function _(){d==null||d()}function S(){c.value=!1}function w({code:M}){M===ft.esc&&S()}return Rt(()=>{x(),a(),c.value=!0}),ke(()=>t.repeatNum,()=>{_(),x()}),Hr(document,"keydown",w),ko(l,()=>{u.value=l.value.getBoundingClientRect().height}),e({visible:c,bottom:y,close:S}),(M,T)=>(A(),_e(fi,{name:f(o).b("fade"),onBeforeLeave:M.onClose,onAfterLeave:T[0]||(T[0]=E=>M.$emit("destroy")),persisted:""},{default:se(()=>[At(X("div",{id:M.id,ref_key:"messageRef",ref:l,class:k([f(o).b(),{[f(o).m(M.type)]:M.type&&!M.icon},f(o).is("center",M.center),f(o).is("closable",M.showClose),M.customClass]),style:ct(f(b)),role:"alert",onMouseenter:_,onMouseleave:x},[M.repeatNum>1?(A(),_e(f(KB),{key:0,value:M.repeatNum,type:f(h),class:k(f(o).e("badge"))},null,8,["value","type","class"])):we("v-if",!0),f(m)?(A(),_e(f(st),{key:1,class:k([f(o).e("icon"),f(p)])},{default:se(()=>[(A(),_e(Ht(f(m))))]),_:1},8,["class"])):we("v-if",!0),Oe(M.$slots,"default",{},()=>[M.dangerouslyUseHTMLString?(A(),W(nt,{key:1},[we(" Caution here, message could've been compromised, never use user's input as message "),X("p",{class:k(f(o).e("content")),innerHTML:M.message},null,10,aEe)],2112)):(A(),W("p",{key:0,class:k(f(o).e("content"))},ze(M.message),3))]),M.showClose?(A(),_e(f(st),{key:2,class:k(f(o).e("closeBtn")),onClick:vt(S,["stop"])},{default:se(()=>[ee(f(i))]),_:1},8,["class","onClick"])):we("v-if",!0)],46,sEe),[[nr,c.value]])]),_:3},8,["name","onBeforeLeave"]))}});var uEe=Xe(cEe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let dEe=1;const Xz=r=>{const e=!r||Tt(r)||$r(r)||St(r)?{message:r}:r,t={..._n,...e};if(!t.appendTo)t.appendTo=document.body;else if(Tt(t.appendTo)){let i=document.querySelector(t.appendTo);fs(i)||(i=document.body),t.appendTo=i}return t},hEe=r=>{const e=qs.indexOf(r);if(e===-1)return;qs.splice(e,1);const{handler:t}=r;t.close()},pEe=({appendTo:r,...e},t)=>{const i=`message_${dEe++}`,o=e.onClose,n=document.createElement("div"),s={...e,id:i,onClose:()=>{o==null||o(),hEe(c)},onDestroy:()=>{Mh(null,n)}},a=ee(uEe,s,St(s.message)||$r(s.message)?{default:St(s.message)?s.message:()=>s.message}:null);a.appContext=t||up._context,Mh(a,n),r.appendChild(n.firstElementChild);const l=a.component,c={id:i,vnode:a,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:a.component.props};return c},up=(r={},e)=>{if(!Jt)return{close:()=>{}};if(wt(kM.max)&&qs.length>=kM.max)return{close:()=>{}};const t=Xz(r);if(t.grouping&&qs.length){const o=qs.find(({vnode:n})=>{var s;return((s=n.props)==null?void 0:s.message)===t.message});if(o)return o.props.repeatNum+=1,o.props.type=t.type,o.handler}const i=pEe(t,e);return qs.push(i),i.handler};qz.forEach(r=>{up[r]=(e={},t)=>{const i=Xz(e);return up({...i,type:r},t)}});function fEe(r){for(const e of qs)(!r||r===e.props.type)&&e.handler.close()}up.closeAll=fEe,up._context=null;const mEe=dD(up,"$message"),gEe=ne({name:"ElMessageBox",directives:{TrapFocus:Gue},components:{ElButton:_o,ElFocusTrap:db,ElInput:Io,ElOverlay:ET,ElIcon:st,...uM},inheritAttrs:!1,props:{buttonSize:{type:String,validator:jy},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(r,{emit:e}){const{locale:t,zIndex:i,ns:o,size:n}=ib("message-box",N(()=>r.buttonSize)),{t:s}=t,{nextZIndex:a}=i,l=V(!1),c=ur({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:a()}),u=N(()=>{const U=c.type;return{[o.bm("icon",U)]:U&&ic[U]}}),d=bs(),h=bs(),p=N(()=>c.icon||ic[c.type]||""),m=N(()=>!!c.message),g=V(),v=V(),y=V(),b=V(),x=V(),_=N(()=>c.confirmButtonClass);ke(()=>c.inputValue,async U=>{await lt(),r.boxType==="prompt"&&U!==null&&B()},{immediate:!0}),ke(()=>l.value,U=>{var G,R;U&&(r.boxType!=="prompt"&&(c.autofocus?y.value=(R=(G=x.value)==null?void 0:G.$el)!=null?R:g.value:y.value=g.value),c.zIndex=a()),r.boxType==="prompt"&&(U?lt().then(()=>{var F;b.value&&b.value.$el&&(c.autofocus?y.value=(F=I())!=null?F:g.value:y.value=g.value)}):(c.editorErrorMessage="",c.validateError=!1))});const S=N(()=>r.draggable);fD(g,v,S),Rt(async()=>{await lt(),r.closeOnHashChange&&window.addEventListener("hashchange",w)}),Vr(()=>{r.closeOnHashChange&&window.removeEventListener("hashchange",w)});function w(){l.value&&(l.value=!1,lt(()=>{c.action&&e("action",c.action)}))}const M=()=>{r.closeOnClickModal&&C(c.distinguishCancelAndClose?"close":"cancel")},T=TM(M),E=U=>{if(c.inputType!=="textarea")return U.preventDefault(),C("confirm")},C=U=>{var G;r.boxType==="prompt"&&U==="confirm"&&!B()||(c.action=U,c.beforeClose?(G=c.beforeClose)==null||G.call(c,U,c,w):w())},B=()=>{if(r.boxType==="prompt"){const U=c.inputPattern;if(U&&!U.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||s("el.messagebox.error"),c.validateError=!0,!1;const G=c.inputValidator;if(typeof G=="function"){const R=G(c.inputValue);if(R===!1)return c.editorErrorMessage=c.inputErrorMessage||s("el.messagebox.error"),c.validateError=!0,!1;if(typeof R=="string")return c.editorErrorMessage=R,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},I=()=>{const U=b.value.$refs;return U.input||U.textarea},L=()=>{C("close")},P=()=>{r.closeOnPressEscape&&L()};return r.lockScroll&&vD(l),{...qi(c),ns:o,overlayEvent:T,visible:l,hasMessage:m,typeClass:u,contentId:d,inputId:h,btnSize:n,iconComponent:p,confirmButtonClasses:_,rootRef:g,focusStartRef:y,headerRef:v,inputRef:b,confirmRef:x,doClose:w,handleClose:L,onCloseRequested:P,handleWrapperClick:M,handleInputEnter:E,handleAction:C,t:s}}}),vEe=["aria-label","aria-describedby"],yEe=["aria-label"],bEe=["id"];function xEe(r,e,t,i,o,n){const s=_t("el-icon"),a=_t("close"),l=_t("el-input"),c=_t("el-button"),u=_t("el-focus-trap"),d=_t("el-overlay");return A(),_e(fi,{name:"fade-in-linear",onAfterLeave:e[11]||(e[11]=h=>r.$emit("vanish")),persisted:""},{default:se(()=>[At(ee(d,{"z-index":r.zIndex,"overlay-class":[r.ns.is("message-box"),r.modalClass],mask:r.modal},{default:se(()=>[X("div",{role:"dialog","aria-label":r.title,"aria-modal":"true","aria-describedby":r.showInput?void 0:r.contentId,class:k(`${r.ns.namespace.value}-overlay-message-box`),onClick:e[8]||(e[8]=(...h)=>r.overlayEvent.onClick&&r.overlayEvent.onClick(...h)),onMousedown:e[9]||(e[9]=(...h)=>r.overlayEvent.onMousedown&&r.overlayEvent.onMousedown(...h)),onMouseup:e[10]||(e[10]=(...h)=>r.overlayEvent.onMouseup&&r.overlayEvent.onMouseup(...h))},[ee(u,{loop:"",trapped:r.visible,"focus-trap-el":r.rootRef,"focus-start-el":r.focusStartRef,onReleaseRequested:r.onCloseRequested},{default:se(()=>[X("div",{ref:"rootRef",class:k([r.ns.b(),r.customClass,r.ns.is("draggable",r.draggable),{[r.ns.m("center")]:r.center}]),style:ct(r.customStyle),tabindex:"-1",onClick:e[7]||(e[7]=vt(()=>{},["stop"]))},[r.title!==null&&r.title!==void 0?(A(),W("div",{key:0,ref:"headerRef",class:k(r.ns.e("header"))},[X("div",{class:k(r.ns.e("title"))},[r.iconComponent&&r.center?(A(),_e(s,{key:0,class:k([r.ns.e("status"),r.typeClass])},{default:se(()=>[(A(),_e(Ht(r.iconComponent)))]),_:1},8,["class"])):we("v-if",!0),X("span",null,ze(r.title),1)],2),r.showClose?(A(),W("button",{key:0,type:"button",class:k(r.ns.e("headerbtn")),"aria-label":r.t("el.messagebox.close"),onClick:e[0]||(e[0]=h=>r.handleAction(r.distinguishCancelAndClose?"close":"cancel")),onKeydown:e[1]||(e[1]=Qt(vt(h=>r.handleAction(r.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[ee(s,{class:k(r.ns.e("close"))},{default:se(()=>[ee(a)]),_:1},8,["class"])],42,yEe)):we("v-if",!0)],2)):we("v-if",!0),X("div",{id:r.contentId,class:k(r.ns.e("content"))},[X("div",{class:k(r.ns.e("container"))},[r.iconComponent&&!r.center&&r.hasMessage?(A(),_e(s,{key:0,class:k([r.ns.e("status"),r.typeClass])},{default:se(()=>[(A(),_e(Ht(r.iconComponent)))]),_:1},8,["class"])):we("v-if",!0),r.hasMessage?(A(),W("div",{key:1,class:k(r.ns.e("message"))},[Oe(r.$slots,"default",{},()=>[r.dangerouslyUseHTMLString?(A(),_e(Ht(r.showInput?"label":"p"),{key:1,for:r.showInput?r.inputId:void 0,innerHTML:r.message},null,8,["for","innerHTML"])):(A(),_e(Ht(r.showInput?"label":"p"),{key:0,for:r.showInput?r.inputId:void 0},{default:se(()=>[rr(ze(r.dangerouslyUseHTMLString?"":r.message),1)]),_:1},8,["for"]))])],2)):we("v-if",!0)],2),At(X("div",{class:k(r.ns.e("input"))},[ee(l,{id:r.inputId,ref:"inputRef",modelValue:r.inputValue,"onUpdate:modelValue":e[2]||(e[2]=h=>r.inputValue=h),type:r.inputType,placeholder:r.inputPlaceholder,"aria-invalid":r.validateError,class:k({invalid:r.validateError}),onKeydown:Qt(r.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),X("div",{class:k(r.ns.e("errormsg")),style:ct({visibility:r.editorErrorMessage?"visible":"hidden"})},ze(r.editorErrorMessage),7)],2),[[nr,r.showInput]])],10,bEe),X("div",{class:k(r.ns.e("btns"))},[r.showCancelButton?(A(),_e(c,{key:0,loading:r.cancelButtonLoading,class:k([r.cancelButtonClass]),round:r.roundButton,size:r.btnSize,onClick:e[3]||(e[3]=h=>r.handleAction("cancel")),onKeydown:e[4]||(e[4]=Qt(vt(h=>r.handleAction("cancel"),["prevent"]),["enter"]))},{default:se(()=>[rr(ze(r.cancelButtonText||r.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):we("v-if",!0),At(ee(c,{ref:"confirmRef",type:"primary",loading:r.confirmButtonLoading,class:k([r.confirmButtonClasses]),round:r.roundButton,disabled:r.confirmButtonDisabled,size:r.btnSize,onClick:e[5]||(e[5]=h=>r.handleAction("confirm")),onKeydown:e[6]||(e[6]=Qt(vt(h=>r.handleAction("confirm"),["prevent"]),["enter"]))},{default:se(()=>[rr(ze(r.confirmButtonText||r.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[nr,r.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,vEe)]),_:3},8,["z-index","overlay-class","mask"]),[[nr,r.visible]])]),_:3})}var _Ee=Xe(gEe,[["render",xEe],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const gg=new Map,wEe=r=>{let e=document.body;return r.appendTo&&(Tt(r.appendTo)&&(e=document.querySelector(r.appendTo)),fs(r.appendTo)&&(e=r.appendTo),fs(e)||(e=document.body)),e},SEe=(r,e,t=null)=>{const i=ee(_Ee,r,St(r.message)||$r(r.message)?{default:St(r.message)?r.message:()=>r.message}:null);return i.appContext=t,Mh(i,e),wEe(r).appendChild(e.firstElementChild),i.component},MEe=()=>document.createElement("div"),TEe=(r,e)=>{const t=MEe();r.onVanish=()=>{Mh(null,t),gg.delete(o)},r.onAction=n=>{const s=gg.get(o);let a;r.showInput?a={value:o.inputValue,action:n}:a=n,r.callback?r.callback(a,i.proxy):n==="cancel"||n==="close"?r.distinguishCancelAndClose&&n!=="cancel"?s.reject("close"):s.reject("cancel"):s.resolve(a)};const i=SEe(r,t,e),o=i.proxy;for(const n in r)Yt(r,n)&&!Yt(o.$props,n)&&(o[n]=r[n]);return o.visible=!0,o};function dp(r,e=null){if(!Jt)return Promise.reject();let t;return Tt(r)||$r(r)?r={message:r}:t=r.callback,new Promise((i,o)=>{const n=TEe(r,e??dp._context);gg.set(n,{options:r,callback:t,resolve:i,reject:o})})}const EEe=["alert","confirm","prompt"],CEe={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};EEe.forEach(r=>{dp[r]=NEe(r)});function NEe(r){return(e,t,i,o)=>{let n="";return zt(t)?(i=t,n=""):Pi(t)?n="":n=t,dp(Object.assign({title:n,message:e,type:"",...CEe[r]},i,{boxType:r}),o)}}dp.close=()=>{gg.forEach((r,e)=>{e.doClose()}),gg.clear()},dp._context=null;const gc=dp;gc.install=r=>{gc._context=r._context,r.config.globalProperties.$msgbox=gc,r.config.globalProperties.$messageBox=gc,r.config.globalProperties.$alert=gc.alert,r.config.globalProperties.$confirm=gc.confirm,r.config.globalProperties.$prompt=gc.prompt};const Kz=gc,Yz=["success","info","warning","error"],AEe=Ye({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:Lr},id:{type:String,default:""},message:{type:Te([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Te(Function),default:()=>{}},onClose:{type:Te(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...Yz,""],default:""},zIndex:Number}),REe={destroy:()=>!0},LEe=["id"],OEe=["textContent"],kEe={key:0},IEe=["innerHTML"],PEe=ne({name:"ElNotification"}),DEe=ne({...PEe,props:AEe,emits:REe,setup(r,{expose:e}){const t=r,{ns:i,zIndex:o}=ib("notification"),{nextZIndex:n,currentZIndex:s}=o,{Close:a}=uD,l=V(!1);let c;const u=N(()=>{const x=t.type;return x&&ic[t.type]?i.m(x):""}),d=N(()=>t.type&&ic[t.type]||t.icon),h=N(()=>t.position.endsWith("right")?"right":"left"),p=N(()=>t.position.startsWith("top")?"top":"bottom"),m=N(()=>{var x;return{[p.value]:`${t.offset}px`,zIndex:(x=t.zIndex)!=null?x:s.value}});function g(){t.duration>0&&({stop:c}=vu(()=>{l.value&&y()},t.duration))}function v(){c==null||c()}function y(){l.value=!1}function b({code:x}){x===ft.delete||x===ft.backspace?v():x===ft.esc?l.value&&y():g()}return Rt(()=>{g(),n(),l.value=!0}),Hr(document,"keydown",b),e({visible:l,close:y}),(x,_)=>(A(),_e(fi,{name:f(i).b("fade"),onBeforeLeave:x.onClose,onAfterLeave:_[1]||(_[1]=S=>x.$emit("destroy")),persisted:""},{default:se(()=>[At(X("div",{id:x.id,class:k([f(i).b(),x.customClass,f(h)]),style:ct(f(m)),role:"alert",onMouseenter:v,onMouseleave:g,onClick:_[0]||(_[0]=(...S)=>x.onClick&&x.onClick(...S))},[f(d)?(A(),_e(f(st),{key:0,class:k([f(i).e("icon"),f(u)])},{default:se(()=>[(A(),_e(Ht(f(d))))]),_:1},8,["class"])):we("v-if",!0),X("div",{class:k(f(i).e("group"))},[X("h2",{class:k(f(i).e("title")),textContent:ze(x.title)},null,10,OEe),At(X("div",{class:k(f(i).e("content")),style:ct(x.title?void 0:{margin:0})},[Oe(x.$slots,"default",{},()=>[x.dangerouslyUseHTMLString?(A(),W(nt,{key:1},[we(" Caution here, message could've been compromised, never use user's input as message "),X("p",{innerHTML:x.message},null,8,IEe)],2112)):(A(),W("p",kEe,ze(x.message),1))])],6),[[nr,x.message]]),x.showClose?(A(),_e(f(st),{key:0,class:k(f(i).e("closeBtn")),onClick:vt(y,["stop"])},{default:se(()=>[ee(f(a))]),_:1},8,["class","onClick"])):we("v-if",!0)],2)],46,LEe),[[nr,l.value]])]),_:3},8,["name","onBeforeLeave"]))}});var BEe=Xe(DEe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const rx={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},kE=16;let FEe=1;const hp=function(r={},e=null){if(!Jt)return{close:()=>{}};(typeof r=="string"||$r(r))&&(r={message:r});const t=r.position||"top-right";let i=r.offset||0;rx[t].forEach(({vm:u})=>{var d;i+=(((d=u.el)==null?void 0:d.offsetHeight)||0)+kE}),i+=kE;const o=`notification_${FEe++}`,n=r.onClose,s={...r,offset:i,id:o,onClose:()=>{UEe(o,t,n)}};let a=document.body;fs(r.appendTo)?a=r.appendTo:Tt(r.appendTo)&&(a=document.querySelector(r.appendTo)),fs(a)||(a=document.body);const l=document.createElement("div"),c=ee(BEe,s,$r(s.message)?{default:()=>s.message}:null);return c.appContext=e??hp._context,c.props.onDestroy=()=>{Mh(null,l)},Mh(c,l),rx[t].push({vm:c}),a.appendChild(l.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};Yz.forEach(r=>{hp[r]=(e={})=>((typeof e=="string"||$r(e))&&(e={message:e}),hp({...e,type:r}))});function UEe(r,e,t){const i=rx[e],o=i.findIndex(({vm:c})=>{var u;return((u=c.component)==null?void 0:u.props.id)===r});if(o===-1)return;const{vm:n}=i[o];if(!n)return;t==null||t(n);const s=n.el.offsetHeight,a=e.split("-")[0];i.splice(o,1);const l=i.length;if(!(l<1))for(let c=o;c<l;c++){const{el:u,component:d}=i[c].vm,h=Number.parseInt(u.style[a],10)-s-kE;d.props.offset=h}}function zEe(){for(const r of Object.values(rx))r.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}hp.closeAll=zEe,hp._context=null;const IE=dD(hp,"$notify");var VEe=[KTe,eEe,mEe,Kz,IE,nU],GEe=Wse([...GTe,...VEe]),HEe="store";function pp(r,e){Object.keys(r).forEach(function(t){return e(r[t],t)})}function jEe(r){return r!==null&&typeof r=="object"}function $Ee(r){return r&&typeof r.then=="function"}function WEe(r,e){return function(){return r(e)}}function Jz(r,e,t){return e.indexOf(r)<0&&(t&&t.prepend?e.unshift(r):e.push(r)),function(){var i=e.indexOf(r);i>-1&&e.splice(i,1)}}function Zz(r,e){r._actions=Object.create(null),r._mutations=Object.create(null),r._wrappedGetters=Object.create(null),r._modulesNamespaceMap=Object.create(null);var t=r.state;ix(r,t,[],r._modules.root,!0),PE(r,t,e)}function PE(r,e,t){var i=r._state,o=r._scope;r.getters={},r._makeLocalGettersCache=Object.create(null);var n=r._wrappedGetters,s={},a={},l=ek(!0);l.run(function(){pp(n,function(c,u){s[u]=WEe(c,r),a[u]=N(function(){return s[u]()}),Object.defineProperty(r.getters,u,{get:function(){return a[u].value},enumerable:!0})})}),r._state=ur({data:e}),r._scope=l,r.strict&&JEe(r),i&&t&&r._withCommit(function(){i.data=null}),o&&o.stop()}function ix(r,e,t,i,o){var n=!t.length,s=r._modules.getNamespace(t);if(i.namespaced&&(r._modulesNamespaceMap[s],r._modulesNamespaceMap[s]=i),!n&&!o){var a=DE(e,t.slice(0,-1)),l=t[t.length-1];r._withCommit(function(){a[l]=i.state})}var c=i.context=qEe(r,s,t);i.forEachMutation(function(u,d){var h=s+d;XEe(r,h,u,c)}),i.forEachAction(function(u,d){var h=u.root?d:s+d,p=u.handler||u;KEe(r,h,p,c)}),i.forEachGetter(function(u,d){var h=s+d;YEe(r,h,u,c)}),i.forEachChild(function(u,d){ix(r,e,t.concat(d),u,o)})}function qEe(r,e,t){var i=e==="",o={dispatch:i?r.dispatch:function(n,s,a){var l=ox(n,s,a),c=l.payload,u=l.options,d=l.type;return(!u||!u.root)&&(d=e+d),r.dispatch(d,c)},commit:i?r.commit:function(n,s,a){var l=ox(n,s,a),c=l.payload,u=l.options,d=l.type;(!u||!u.root)&&(d=e+d),r.commit(d,c,u)}};return Object.defineProperties(o,{getters:{get:i?function(){return r.getters}:function(){return Qz(r,e)}},state:{get:function(){return DE(r.state,t)}}}),o}function Qz(r,e){if(!r._makeLocalGettersCache[e]){var t={},i=e.length;Object.keys(r.getters).forEach(function(o){if(o.slice(0,i)===e){var n=o.slice(i);Object.defineProperty(t,n,{get:function(){return r.getters[o]},enumerable:!0})}}),r._makeLocalGettersCache[e]=t}return r._makeLocalGettersCache[e]}function XEe(r,e,t,i){var o=r._mutations[e]||(r._mutations[e]=[]);o.push(function(n){t.call(r,i.state,n)})}function KEe(r,e,t,i){var o=r._actions[e]||(r._actions[e]=[]);o.push(function(n){var s=t.call(r,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:r.getters,rootState:r.state},n);return $Ee(s)||(s=Promise.resolve(s)),r._devtoolHook?s.catch(function(a){throw r._devtoolHook.emit("vuex:error",a),a}):s})}function YEe(r,e,t,i){r._wrappedGetters[e]||(r._wrappedGetters[e]=function(o){return t(i.state,i.getters,o.state,o.getters)})}function JEe(r){ke(function(){return r._state.data},function(){},{deep:!0,flush:"sync"})}function DE(r,e){return e.reduce(function(t,i){return t[i]},r)}function ox(r,e,t){return jEe(r)&&r.type&&(t=e,e=r,r=r.type),{type:r,payload:e,options:t}}var ZEe="vuex bindings",eV="vuex:mutations",BE="vuex:actions",fp="vuex",QEe=0;function eCe(r,e){Q9({id:"org.vuejs.vuex",app:r,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[ZEe]},function(t){t.addTimelineLayer({id:eV,label:"Vuex Mutations",color:tV}),t.addTimelineLayer({id:BE,label:"Vuex Actions",color:tV}),t.addInspector({id:fp,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),t.on.getInspectorTree(function(i){if(i.app===r&&i.inspectorId===fp)if(i.filter){var o=[];nV(o,e._modules.root,i.filter,""),i.rootNodes=o}else i.rootNodes=[oV(e._modules.root,"")]}),t.on.getInspectorState(function(i){if(i.app===r&&i.inspectorId===fp){var o=i.nodeId;Qz(e,o),i.state=iCe(nCe(e._modules,o),o==="root"?e.getters:e._makeLocalGettersCache,o)}}),t.on.editInspectorState(function(i){if(i.app===r&&i.inspectorId===fp){var o=i.nodeId,n=i.path;o!=="root"&&(n=o.split("/").filter(Boolean).concat(n)),e._withCommit(function(){i.set(e._state.data,n,i.state.value)})}}),e.subscribe(function(i,o){var n={};i.payload&&(n.payload=i.payload),n.state=o,t.notifyComponentUpdate(),t.sendInspectorTree(fp),t.sendInspectorState(fp),t.addTimelineEvent({layerId:eV,event:{time:Date.now(),title:i.type,data:n}})}),e.subscribeAction({before:function(i,o){var n={};i.payload&&(n.payload=i.payload),i._id=QEe++,i._time=Date.now(),n.state=o,t.addTimelineEvent({layerId:BE,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:n}})},after:function(i,o){var n={},s=Date.now()-i._time;n.duration={_custom:{type:"duration",display:s+"ms",tooltip:"Action duration",value:s}},i.payload&&(n.payload=i.payload),n.state=o,t.addTimelineEvent({layerId:BE,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:n}})}})})}var tV=8702998,tCe=6710886,rCe=16777215,rV={label:"namespaced",textColor:rCe,backgroundColor:tCe};function iV(r){return r&&r!=="root"?r.split("/").slice(-2,-1)[0]:"Root"}function oV(r,e){return{id:e||"root",label:iV(e),tags:r.namespaced?[rV]:[],children:Object.keys(r._children).map(function(t){return oV(r._children[t],e+t+"/")})}}function nV(r,e,t,i){i.includes(t)&&r.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[rV]:[]}),Object.keys(e._children).forEach(function(o){nV(r,e._children[o],t,i+o+"/")})}function iCe(r,e,t){e=t==="root"?e:e[t];var i=Object.keys(e),o={state:Object.keys(r.state).map(function(s){return{key:s,editable:!0,value:r.state[s]}})};if(i.length){var n=oCe(e);o.getters=Object.keys(n).map(function(s){return{key:s.endsWith("/")?iV(s):s,editable:!1,value:FE(function(){return n[s]})}})}return o}function oCe(r){var e={};return Object.keys(r).forEach(function(t){var i=t.split("/");if(i.length>1){var o=e,n=i.pop();i.forEach(function(s){o[s]||(o[s]={_custom:{value:{},display:s,tooltip:"Module",abstract:!0}}),o=o[s]._custom.value}),o[n]=FE(function(){return r[t]})}else e[t]=FE(function(){return r[t]})}),e}function nCe(r,e){var t=e.split("/").filter(function(i){return i});return t.reduce(function(i,o,n){var s=i[o];if(!s)throw new Error('Missing module "'+o+'" for path "'+e+'".');return n===t.length-1?s:s._children},e==="root"?r:r.root._children)}function FE(r){try{return r()}catch(e){return e}}var Xs=function(r,e){this.runtime=e,this._children=Object.create(null),this._rawModule=r;var t=r.state;this.state=(typeof t=="function"?t():t)||{}},sV={namespaced:{configurable:!0}};sV.namespaced.get=function(){return!!this._rawModule.namespaced},Xs.prototype.addChild=function(r,e){this._children[r]=e},Xs.prototype.removeChild=function(r){delete this._children[r]},Xs.prototype.getChild=function(r){return this._children[r]},Xs.prototype.hasChild=function(r){return r in this._children},Xs.prototype.update=function(r){this._rawModule.namespaced=r.namespaced,r.actions&&(this._rawModule.actions=r.actions),r.mutations&&(this._rawModule.mutations=r.mutations),r.getters&&(this._rawModule.getters=r.getters)},Xs.prototype.forEachChild=function(r){pp(this._children,r)},Xs.prototype.forEachGetter=function(r){this._rawModule.getters&&pp(this._rawModule.getters,r)},Xs.prototype.forEachAction=function(r){this._rawModule.actions&&pp(this._rawModule.actions,r)},Xs.prototype.forEachMutation=function(r){this._rawModule.mutations&&pp(this._rawModule.mutations,r)},Object.defineProperties(Xs.prototype,sV);var Vu=function(r){this.register([],r,!1)};Vu.prototype.get=function(r){return r.reduce(function(e,t){return e.getChild(t)},this.root)},Vu.prototype.getNamespace=function(r){var e=this.root;return r.reduce(function(t,i){return e=e.getChild(i),t+(e.namespaced?i+"/":"")},"")},Vu.prototype.update=function(r){aV([],this.root,r)},Vu.prototype.register=function(r,e,t){var i=this;t===void 0&&(t=!0);var o=new Xs(e,t);if(r.length===0)this.root=o;else{var n=this.get(r.slice(0,-1));n.addChild(r[r.length-1],o)}e.modules&&pp(e.modules,function(s,a){i.register(r.concat(a),s,t)})},Vu.prototype.unregister=function(r){var e=this.get(r.slice(0,-1)),t=r[r.length-1],i=e.getChild(t);i&&i.runtime&&e.removeChild(t)},Vu.prototype.isRegistered=function(r){var e=this.get(r.slice(0,-1)),t=r[r.length-1];return e?e.hasChild(t):!1};function aV(r,e,t){if(e.update(t),t.modules)for(var i in t.modules){if(!e.getChild(i))return;aV(r.concat(i),e.getChild(i),t.modules[i])}}function sCe(r){return new wn(r)}var wn=function(r){var e=this;r===void 0&&(r={});var t=r.plugins;t===void 0&&(t=[]);var i=r.strict;i===void 0&&(i=!1);var o=r.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Vu(r),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=o;var n=this,s=this,a=s.dispatch,l=s.commit;this.dispatch=function(u,d){return a.call(n,u,d)},this.commit=function(u,d,h){return l.call(n,u,d,h)},this.strict=i;var c=this._modules.root.state;ix(this,c,[],this._modules.root),PE(this,c),t.forEach(function(u){return u(e)})},UE={state:{configurable:!0}};wn.prototype.install=function(r,e){r.provide(e||HEe,this),r.config.globalProperties.$store=this;var t=this._devtools!==void 0?this._devtools:!1;t&&eCe(r,this)},UE.state.get=function(){return this._state.data},UE.state.set=function(r){},wn.prototype.commit=function(r,e,t){var i=this,o=ox(r,e,t),n=o.type,s=o.payload,a={type:n,payload:s},l=this._mutations[n];l&&(this._withCommit(function(){l.forEach(function(c){c(s)})}),this._subscribers.slice().forEach(function(c){return c(a,i.state)}))},wn.prototype.dispatch=function(r,e){var t=this,i=ox(r,e),o=i.type,n=i.payload,s={type:o,payload:n},a=this._actions[o];if(a){try{this._actionSubscribers.slice().filter(function(c){return c.before}).forEach(function(c){return c.before(s,t.state)})}catch{}var l=a.length>1?Promise.all(a.map(function(c){return c(n)})):a[0](n);return new Promise(function(c,u){l.then(function(d){try{t._actionSubscribers.filter(function(h){return h.after}).forEach(function(h){return h.after(s,t.state)})}catch{}c(d)},function(d){try{t._actionSubscribers.filter(function(h){return h.error}).forEach(function(h){return h.error(s,t.state,d)})}catch{}u(d)})})}},wn.prototype.subscribe=function(r,e){return Jz(r,this._subscribers,e)},wn.prototype.subscribeAction=function(r,e){var t=typeof r=="function"?{before:r}:r;return Jz(t,this._actionSubscribers,e)},wn.prototype.watch=function(r,e,t){var i=this;return ke(function(){return r(i.state,i.getters)},e,Object.assign({},t))},wn.prototype.replaceState=function(r){var e=this;this._withCommit(function(){e._state.data=r})},wn.prototype.registerModule=function(r,e,t){t===void 0&&(t={}),typeof r=="string"&&(r=[r]),this._modules.register(r,e),ix(this,this.state,r,this._modules.get(r),t.preserveState),PE(this,this.state)},wn.prototype.unregisterModule=function(r){var e=this;typeof r=="string"&&(r=[r]),this._modules.unregister(r),this._withCommit(function(){var t=DE(e.state,r.slice(0,-1));delete t[r[r.length-1]]}),Zz(this)},wn.prototype.hasModule=function(r){return typeof r=="string"&&(r=[r]),this._modules.isRegistered(r)},wn.prototype.hotUpdate=function(r){this._modules.update(r),Zz(this,!0)},wn.prototype._withCommit=function(r){var e=this._committing;this._committing=!0,r(),this._committing=e},Object.defineProperties(wn.prototype,UE);const aCe={setTheme(r){const e=document.getElementById("themeStyle");e.href=e.href.replace(/\/([^/]+)\.css$/,`/${r}.css`)}},lCe={theme:localStorage.getItem("theme")||"dark",isLoading:!0,isNetBusy:!1,isWorldView:!0,isFloating:!1,projects:[],projectName:localStorage.getItem("projectName")||"shared"},br=sCe({state:lCe,mutations:{selectProject(r,e){r.projectName=e,r.isWorldView=!0,localStorage.setItem("projectName",e)},createProject(r,e){r.projects.push(e),r.projects=[...r.projects],r.projectName=e,r.isWorldView=!0,localStorage.setItem("projectName",e)},renameProject(r,e){const t=r.projects.indexOf(r.projectName);t!==-1?r.projects.splice(t,1,e):r.projects.push(e),r.projects=[...r.projects],r.projectName=e,localStorage.setItem("projectName",e)}},actions:{selectProject(r,e){r.commit("selectProject",e)},createProject(r,e){r.commit("renameProject",e)},renameProject(r,e){r.commit("renameProject",e)}}});ke(()=>br.state.theme,r=>{localStorage.setItem("theme",r),aCe.setTheme(r)}),ke(()=>br.state.projectName,r=>{localStorage.setItem("projectName",r)}),br.state;const nx={request(r){return new Promise((e,t)=>{const i=new XMLHttpRequest;if(i.open(r.method||"GET",r.url,!0),r.headers)for(const[o,n]of Object.entries(r.headers))i.setRequestHeader(o,n);r.withCredentials&&(i.withCredentials=r.withCredentials),i.onerror=o=>{t(o)},i.onreadystatechange=()=>{i.readyState===XMLHttpRequest.DONE&&i.status===200&&e(i.responseText)},i.send(r.data)})},requestSync(r){const e=new XMLHttpRequest;if(e.open(r.method||"GET",r.url,!1),r.headers)for(const[i,o]of Object.entries(r.headers))e.setRequestHeader(i,o);r.withCredentials&&(e.withCredentials=r.withCredentials),e.onerror=i=>{throw i};let t=null;if(e.onreadystatechange=()=>{e.readyState===XMLHttpRequest.DONE&&e.status===200&&(t=e.responseText)},e.send(r.data),e.status!==200)throw new Error(e.responseText);return t}};let lV=0;const zE={async request(r,...e){const t={jsonrpc:"2.0",id:lV++,method:"",params:e},i={"Content-Type":"application/json",...r.headers};let o=await nx.request({...r,data:JSON.stringify(t),method:"POST",headers:i});return typeof o=="string"&&(o=JSON.parse(o)),o.result},requestSync(r,...e){const t={jsonrpc:"2.0",id:lV++,method:"",params:e};({...r.headers});let i=nx.requestSync({...r,data:JSON.stringify(t),method:"POST"});return typeof i=="string"&&(i=JSON.parse(i)),i.result}},sx={async projects(){const r=await zE.request({url:"/fs/ls"});return Object.entries(r).filter(e=>e[1]).map(([e])=>e)},async createProject(r){await zE.request({url:`/fs/mkdir/${r}`},["images","sounds"])},async renameProject(r,e){await zE.request({url:`/fs/rename/${r}`},e)},async write(r,e){!(e instanceof ArrayBuffer)&&typeof e=="object"&&(e=JSON.stringify(e,null,2)),await nx.request({url:r,data:e,method:"POST"})}},mp="157",Gu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Hu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},VE=0,ax=1,GE=2,cCe=3,uCe=0,HE=1,lx=2,Ta=3,Ss=0,Ni=1,io=2,cV=2,So=0,qn=1,dl=2,vc=3,yc=4,vg=5,Sn=100,yg=101,bg=102,xg=103,_g=104,wg=200,Sg=201,Mg=202,Tg=203,gp=204,vp=205,Eg=206,Cg=207,Ng=208,Ag=209,Rg=210,Lg=0,Og=1,kg=2,ju=3,Ig=4,Pg=5,Dg=6,Bg=7,yp=0,jE=1,$E=2,Mn=0,Fg=1,Ug=2,zg=3,$u=4,WE=5,Vg=300,Ms=301,Ks=302,hl=303,pl=304,Wu=306,bc=1e3,oo=1001,xc=1002,Nr=1003,_c=1004,uV=1004,Ea=1005,dV=1005,oi=1006,Gg=1007,hV=1007,Tn=1008,pV=1008,En=1009,cx=1010,ux=1011,qu=1012,Hg=1013,Cn=1014,Di=1015,no=1016,jg=1017,$g=1018,Xn=1020,Wg=1021,Po=1023,qg=1024,Xg=1025,Do=1026,Nn=1027,bp=1028,xp=1029,_p=1030,Kg=1031,Yg=1033,wc=33776,fl=33777,ml=33778,gl=33779,wp=35840,Sp=35841,Mp=35842,Tp=35843,dx=36196,Xu=37492,Ku=37496,Yu=37808,Ju=37809,Zu=37810,Qu=37811,ed=37812,td=37813,rd=37814,id=37815,od=37816,nd=37817,sd=37818,ad=37819,ld=37820,cd=37821,Sc=36492,hx=36494,px=36495,fx=36283,Ep=36284,Cp=36285,Np=36286,fV=2200,mV=2201,gV=2202,Jg=2300,Zg=2301,mx=2302,ud=2400,dd=2401,Qg=2402,gx=2500,qE=2501,dCe=0,hCe=1,pCe=2,ev=3e3,Ca=3001,XE=3200,vx=3201,Ys=0,yx=1,so="",Ft="srgb",en="srgb-linear",tv="display-p3",Ap="display-p3-linear",rv="linear",Jr="srgb",iv="rec709",ov="p3",KE=0,Rp=7680,YE=7681,JE=7682,ZE=7683,QE=34055,eC=34056,tC=5386,rC=512,iC=513,oC=514,nC=515,sC=516,aC=517,lC=518,bx=519,nv=512,Lp=513,sv=514,av=515,lv=516,cv=517,uv=518,dv=519,Op=35044,xx=35048,fCe=35040,mCe=35045,gCe=35049,vCe=35041,yCe=35046,bCe=35050,xCe=35042,vV="100",_x="300 es",kp=1035,Ts=2e3,hd=2001;class ao{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const i=t.slice(0);for(let o=0,n=i.length;o<n;o++)i[o].call(this,e);e.target=null}}}const Bo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let yV=1234567;const pd=Math.PI/180,Ip=180/Math.PI;function Kn(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Bo[r&255]+Bo[r>>8&255]+Bo[r>>16&255]+Bo[r>>24&255]+"-"+Bo[e&255]+Bo[e>>8&255]+"-"+Bo[e>>16&15|64]+Bo[e>>24&255]+"-"+Bo[t&63|128]+Bo[t>>8&255]+"-"+Bo[t>>16&255]+Bo[t>>24&255]+Bo[i&255]+Bo[i>>8&255]+Bo[i>>16&255]+Bo[i>>24&255]).toLowerCase()}function xi(r,e,t){return Math.max(e,Math.min(t,r))}function cC(r,e){return(r%e+e)%e}function _Ce(r,e,t,i,o){return i+(r-e)*(o-i)/(t-e)}function wCe(r,e,t){return r!==e?(t-r)/(e-r):0}function hv(r,e,t){return(1-t)*r+t*e}function SCe(r,e,t,i){return hv(r,e,1-Math.exp(-t*i))}function MCe(r,e=1){return e-Math.abs(cC(r,e*2)-e)}function TCe(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function ECe(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function CCe(r,e){return r+Math.floor(Math.random()*(e-r+1))}function NCe(r,e){return r+Math.random()*(e-r)}function ACe(r){return r*(.5-Math.random())}function RCe(r){r!==void 0&&(yV=r);let e=yV+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function LCe(r){return r*pd}function OCe(r){return r*Ip}function uC(r){return(r&r-1)===0&&r!==0}function bV(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function wx(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function kCe(r,e,t,i,o){const n=Math.cos,s=Math.sin,a=n(t/2),l=s(t/2),c=n((e+i)/2),u=s((e+i)/2),d=n((e-i)/2),h=s((e-i)/2),p=n((i-e)/2),m=s((i-e)/2);switch(o){case"XYX":r.set(a*u,l*d,l*h,a*c);break;case"YZY":r.set(l*h,a*u,l*d,a*c);break;case"ZXZ":r.set(l*d,l*h,a*u,a*c);break;case"XZX":r.set(a*u,l*m,l*p,a*c);break;case"YXY":r.set(l*p,a*u,l*m,a*c);break;case"ZYZ":r.set(l*m,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function An(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function pr(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const vl={DEG2RAD:pd,RAD2DEG:Ip,generateUUID:Kn,clamp:xi,euclideanModulo:cC,mapLinear:_Ce,inverseLerp:wCe,lerp:hv,damp:SCe,pingpong:MCe,smoothstep:TCe,smootherstep:ECe,randInt:CCe,randFloat:NCe,randFloatSpread:ACe,seededRandom:RCe,degToRad:LCe,radToDeg:OCe,isPowerOfTwo:uC,ceilPowerOfTwo:bV,floorPowerOfTwo:wx,setQuaternionFromProperEuler:kCe,normalize:pr,denormalize:An};class We{constructor(e=0,t=0){We.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6],this.y=o[1]*t+o[4]*i+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(xi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),o=Math.sin(t),n=this.x-e.x,s=this.y-e.y;return this.x=n*i-s*o+e.x,this.y=n*o+s*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class er{constructor(e,t,i,o,n,s,a,l,c){er.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,o,n,s,a,l,c)}set(e,t,i,o,n,s,a,l,c){const u=this.elements;return u[0]=e,u[1]=o,u[2]=a,u[3]=t,u[4]=n,u[5]=l,u[6]=i,u[7]=s,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,o=t.elements,n=this.elements,s=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],p=i[5],m=i[8],g=o[0],v=o[3],y=o[6],b=o[1],x=o[4],_=o[7],S=o[2],w=o[5],M=o[8];return n[0]=s*g+a*b+l*S,n[3]=s*v+a*x+l*w,n[6]=s*y+a*_+l*M,n[1]=c*g+u*b+d*S,n[4]=c*v+u*x+d*w,n[7]=c*y+u*_+d*M,n[2]=h*g+p*b+m*S,n[5]=h*v+p*x+m*w,n[8]=h*y+p*_+m*M,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],o=e[2],n=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*s*u-t*a*c-i*n*u+i*a*l+o*n*c-o*s*l}invert(){const e=this.elements,t=e[0],i=e[1],o=e[2],n=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*s-a*c,h=a*l-u*n,p=c*n-s*l,m=t*d+i*h+o*p;if(m===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/m;return e[0]=d*g,e[1]=(o*c-u*i)*g,e[2]=(a*i-o*s)*g,e[3]=h*g,e[4]=(u*t-o*l)*g,e[5]=(o*n-a*t)*g,e[6]=p*g,e[7]=(i*l-c*t)*g,e[8]=(s*t-i*n)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,o,n,s,a){const l=Math.cos(n),c=Math.sin(n);return this.set(i*l,i*c,-i*(l*s+c*a)+s+e,-o*c,o*l,-o*(-c*s+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(dC.makeScale(e,t)),this}rotate(e){return this.premultiply(dC.makeRotation(-e)),this}translate(e,t){return this.premultiply(dC.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let o=0;o<9;o++)if(t[o]!==i[o])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const dC=new er;function xV(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const ICe={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Pp(r,e){return new ICe[r](e)}function pv(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function hC(){const r=pv("canvas");return r.style.display="block",r}const _V={};function fv(r){r in _V||(_V[r]=!0,console.warn(r))}const wV=new er().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),SV=new er().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Sx={[en]:{transfer:rv,primaries:iv,toReference:r=>r,fromReference:r=>r},[Ft]:{transfer:Jr,primaries:iv,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[Ap]:{transfer:rv,primaries:ov,toReference:r=>r.applyMatrix3(SV),fromReference:r=>r.applyMatrix3(wV)},[tv]:{transfer:Jr,primaries:ov,toReference:r=>r.convertSRGBToLinear().applyMatrix3(SV),fromReference:r=>r.applyMatrix3(wV).convertLinearToSRGB()}},PCe=new Set([en,Ap]),Ur={enabled:!0,_workingColorSpace:en,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(r){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!r},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!PCe.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const i=Sx[e].toReference,o=Sx[t].fromReference;return o(i(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return Sx[r].primaries},getTransfer:function(r){return r===so?rv:Sx[r].transfer}};function Dp(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function pC(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let Bp;class fC{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Bp===void 0&&(Bp=pv("canvas")),Bp.width=e.width,Bp.height=e.height;const i=Bp.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Bp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=pv("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const o=i.getImageData(0,0,e.width,e.height),n=o.data;for(let s=0;s<n.length;s++)n[s]=Dp(n[s]/255)*255;return i.putImageData(o,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Dp(t[i]/255)*255):t[i]=Dp(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let DCe=0;class Mc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:DCe++}),this.uuid=Kn(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},o=this.data;if(o!==null){let n;if(Array.isArray(o)){n=[];for(let s=0,a=o.length;s<a;s++)o[s].isDataTexture?n.push(mC(o[s].image)):n.push(mC(o[s]))}else n=mC(o);i.url=n}return t||(e.images[this.uuid]=i),i}}function mC(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?fC.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let BCe=0;class mi extends ao{constructor(e=mi.DEFAULT_IMAGE,t=mi.DEFAULT_MAPPING,i=oo,o=oo,n=oi,s=Tn,a=Po,l=En,c=mi.DEFAULT_ANISOTROPY,u=so){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:BCe++}),this.uuid=Kn(),this.name="",this.source=new Mc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=o,this.magFilter=n,this.minFilter=s,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new We(0,0),this.repeat=new We(1,1),this.center=new We(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new er,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(fv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Ca?Ft:so),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Vg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case bc:e.x=e.x-Math.floor(e.x);break;case oo:e.x=e.x<0?0:1;break;case xc:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case bc:e.y=e.y-Math.floor(e.y);break;case oo:e.y=e.y<0?0:1;break;case xc:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return fv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Ft?Ca:ev}set encoding(e){fv("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ca?Ft:so}}mi.DEFAULT_IMAGE=null,mi.DEFAULT_MAPPING=Vg,mi.DEFAULT_ANISOTROPY=1;class Kt{constructor(e=0,t=0,i=0,o=1){Kt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,o){return this.x=e,this.y=t,this.z=i,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,o=this.z,n=this.w,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*o+s[12]*n,this.y=s[1]*t+s[5]*i+s[9]*o+s[13]*n,this.z=s[2]*t+s[6]*i+s[10]*o+s[14]*n,this.w=s[3]*t+s[7]*i+s[11]*o+s[15]*n,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,o,n;const s=e.elements,a=s[0],l=s[4],c=s[8],u=s[1],d=s[5],h=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(l-u)<.01&&Math.abs(c-p)<.01&&Math.abs(h-m)<.01){if(Math.abs(l+u)<.1&&Math.abs(c+p)<.1&&Math.abs(h+m)<.1&&Math.abs(a+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const y=(a+1)/2,b=(d+1)/2,x=(g+1)/2,_=(l+u)/4,S=(c+p)/4,w=(h+m)/4;return y>b&&y>x?y<.01?(i=0,o=.707106781,n=.707106781):(i=Math.sqrt(y),o=_/i,n=S/i):b>x?b<.01?(i=.707106781,o=0,n=.707106781):(o=Math.sqrt(b),i=_/o,n=w/o):x<.01?(i=.707106781,o=.707106781,n=0):(n=Math.sqrt(x),i=S/n,o=w/n),this.set(i,o,n,t),this}let v=Math.sqrt((m-h)*(m-h)+(c-p)*(c-p)+(u-l)*(u-l));return Math.abs(v)<.001&&(v=1),this.x=(m-h)/v,this.y=(c-p)/v,this.z=(u-l)/v,this.w=Math.acos((a+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class gC extends ao{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Kt(0,0,e,t),this.scissorTest=!1,this.viewport=new Kt(0,0,e,t);const o={width:e,height:t,depth:1};i.encoding!==void 0&&(fv("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Ca?Ft:so),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:oi,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new mi(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Mc(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ki extends gC{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class mv extends mi{constructor(e=null,t=1,i=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:o},this.magFilter=Nr,this.minFilter=Nr,this.wrapR=oo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class FCe extends Ki{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new mv(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Mx extends mi{constructor(e=null,t=1,i=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:o},this.magFilter=Nr,this.minFilter=Nr,this.wrapR=oo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class UCe extends Ki{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Mx(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class zCe extends Ki{constructor(e=1,t=1,i=1,o={}){super(e,t,o),this.isWebGLMultipleRenderTargets=!0;const n=this.texture;this.texture=[];for(let s=0;s<i;s++)this.texture[s]=n.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let o=0,n=this.texture.length;o<n;o++)this.texture[o].image.width=e,this.texture[o].image.height=t,this.texture[o].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class jr{constructor(e=0,t=0,i=0,o=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=o}static slerpFlat(e,t,i,o,n,s,a){let l=i[o+0],c=i[o+1],u=i[o+2],d=i[o+3];const h=n[s+0],p=n[s+1],m=n[s+2],g=n[s+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=h,e[t+1]=p,e[t+2]=m,e[t+3]=g;return}if(d!==g||l!==h||c!==p||u!==m){let v=1-a;const y=l*h+c*p+u*m+d*g,b=y>=0?1:-1,x=1-y*y;if(x>Number.EPSILON){const S=Math.sqrt(x),w=Math.atan2(S,y*b);v=Math.sin(v*w)/S,a=Math.sin(a*w)/S}const _=a*b;if(l=l*v+h*_,c=c*v+p*_,u=u*v+m*_,d=d*v+g*_,v===1-a){const S=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=S,c*=S,u*=S,d*=S}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,o,n,s){const a=i[o],l=i[o+1],c=i[o+2],u=i[o+3],d=n[s],h=n[s+1],p=n[s+2],m=n[s+3];return e[t]=a*m+u*d+l*p-c*h,e[t+1]=l*m+u*h+c*d-a*p,e[t+2]=c*m+u*p+a*h-l*d,e[t+3]=u*m-a*d-l*h-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,o){return this._x=e,this._y=t,this._z=i,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,o=e._y,n=e._z,s=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(o/2),d=a(n/2),h=l(i/2),p=l(o/2),m=l(n/2);switch(s){case"XYZ":this._x=h*u*d+c*p*m,this._y=c*p*d-h*u*m,this._z=c*u*m+h*p*d,this._w=c*u*d-h*p*m;break;case"YXZ":this._x=h*u*d+c*p*m,this._y=c*p*d-h*u*m,this._z=c*u*m-h*p*d,this._w=c*u*d+h*p*m;break;case"ZXY":this._x=h*u*d-c*p*m,this._y=c*p*d+h*u*m,this._z=c*u*m+h*p*d,this._w=c*u*d-h*p*m;break;case"ZYX":this._x=h*u*d-c*p*m,this._y=c*p*d+h*u*m,this._z=c*u*m-h*p*d,this._w=c*u*d+h*p*m;break;case"YZX":this._x=h*u*d+c*p*m,this._y=c*p*d+h*u*m,this._z=c*u*m-h*p*d,this._w=c*u*d-h*p*m;break;case"XZY":this._x=h*u*d-c*p*m,this._y=c*p*d-h*u*m,this._z=c*u*m+h*p*d,this._w=c*u*d+h*p*m;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,o=Math.sin(i);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],o=t[4],n=t[8],s=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-l)*p,this._y=(n-c)*p,this._z=(s-o)*p}else if(i>a&&i>d){const p=2*Math.sqrt(1+i-a-d);this._w=(u-l)/p,this._x=.25*p,this._y=(o+s)/p,this._z=(n+c)/p}else if(a>d){const p=2*Math.sqrt(1+a-i-d);this._w=(n-c)/p,this._x=(o+s)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-i-a);this._w=(s-o)/p,this._x=(n+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(xi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const o=Math.min(1,t/i);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,o=e._y,n=e._z,s=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+s*a+o*c-n*l,this._y=o*u+s*l+n*a-i*c,this._z=n*u+s*c+i*l-o*a,this._w=s*u-i*a-o*l-n*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,o=this._y,n=this._z,s=this._w;let a=s*e._w+i*e._x+o*e._y+n*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=i,this._y=o,this._z=n,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*s+t*this._w,this._x=p*i+t*this._x,this._y=p*o+t*this._y,this._z=p*n+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=s*d+this._w*h,this._x=i*d+this._x*h,this._y=o*d+this._y*h,this._z=n*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),o=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(t*Math.cos(o),i*Math.sin(n),i*Math.cos(n),t*Math.sin(o))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Q{constructor(e=0,t=0,i=0){Q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(MV.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(MV.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,o=this.z,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6]*o,this.y=n[1]*t+n[4]*i+n[7]*o,this.z=n[2]*t+n[5]*i+n[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,o=this.z,n=e.elements,s=1/(n[3]*t+n[7]*i+n[11]*o+n[15]);return this.x=(n[0]*t+n[4]*i+n[8]*o+n[12])*s,this.y=(n[1]*t+n[5]*i+n[9]*o+n[13])*s,this.z=(n[2]*t+n[6]*i+n[10]*o+n[14])*s,this}applyQuaternion(e){const t=this.x,i=this.y,o=this.z,n=e.x,s=e.y,a=e.z,l=e.w,c=l*t+s*o-a*i,u=l*i+a*t-n*o,d=l*o+n*i-s*t,h=-n*t-s*i-a*o;return this.x=c*l+h*-n+u*-a-d*-s,this.y=u*l+h*-s+d*-n-c*-a,this.z=d*l+h*-a+c*-s-u*-n,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,o=this.z,n=e.elements;return this.x=n[0]*t+n[4]*i+n[8]*o,this.y=n[1]*t+n[5]*i+n[9]*o,this.z=n[2]*t+n[6]*i+n[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,o=e.y,n=e.z,s=t.x,a=t.y,l=t.z;return this.x=o*l-n*a,this.y=n*s-i*l,this.z=i*a-o*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return vC.copy(this).projectOnVector(e),this.sub(vC)}reflect(e){return this.sub(vC.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(xi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,o=this.z-e.z;return t*t+i*i+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const o=Math.sin(t)*e;return this.x=o*Math.sin(i),this.y=Math.cos(t)*e,this.z=o*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=o,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const vC=new Q,MV=new jr;class Yn{constructor(e=new Q(1/0,1/0,1/0),t=new Q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(bl.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(bl.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=bl.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Fp.copy(e.boundingBox),Fp.applyMatrix4(e.matrixWorld),this.union(Fp);else{const o=e.geometry;if(o!==void 0)if(t&&o.attributes!==void 0&&o.attributes.position!==void 0){const n=o.attributes.position;for(let s=0,a=n.count;s<a;s++)bl.fromBufferAttribute(n,s).applyMatrix4(e.matrixWorld),this.expandByPoint(bl)}else o.boundingBox===null&&o.computeBoundingBox(),Fp.copy(o.boundingBox),Fp.applyMatrix4(e.matrixWorld),this.union(Fp)}const i=e.children;for(let o=0,n=i.length;o<n;o++)this.expandByObject(i[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,bl),bl.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(gv),Tx.subVectors(this.max,gv),Up.subVectors(e.a,gv),zp.subVectors(e.b,gv),Vp.subVectors(e.c,gv),Tc.subVectors(zp,Up),Ec.subVectors(Vp,zp),fd.subVectors(Up,Vp);let t=[0,-Tc.z,Tc.y,0,-Ec.z,Ec.y,0,-fd.z,fd.y,Tc.z,0,-Tc.x,Ec.z,0,-Ec.x,fd.z,0,-fd.x,-Tc.y,Tc.x,0,-Ec.y,Ec.x,0,-fd.y,fd.x,0];return!yC(t,Up,zp,Vp,Tx)||(t=[1,0,0,0,1,0,0,0,1],!yC(t,Up,zp,Vp,Tx))?!1:(Ex.crossVectors(Tc,Ec),t=[Ex.x,Ex.y,Ex.z],yC(t,Up,zp,Vp,Tx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,bl).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(bl).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(yl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),yl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),yl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),yl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),yl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),yl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),yl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),yl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(yl),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const yl=[new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q],bl=new Q,Fp=new Yn,Up=new Q,zp=new Q,Vp=new Q,Tc=new Q,Ec=new Q,fd=new Q,gv=new Q,Tx=new Q,Ex=new Q,md=new Q;function yC(r,e,t,i,o){for(let n=0,s=r.length-3;n<=s;n+=3){md.fromArray(r,n);const a=o.x*Math.abs(md.x)+o.y*Math.abs(md.y)+o.z*Math.abs(md.z),l=e.dot(md),c=t.dot(md),u=i.dot(md);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const VCe=new Yn,vv=new Q,bC=new Q;class Jn{constructor(e=new Q,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):VCe.setFromPoints(e).getCenter(i);let o=0;for(let n=0,s=e.length;n<s;n++)o=Math.max(o,i.distanceToSquared(e[n]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;vv.subVectors(e,this.center);const t=vv.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),o=(i-this.radius)*.5;this.center.addScaledVector(vv,o/i),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(bC.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(vv.copy(e.center).add(bC)),this.expandByPoint(vv.copy(e.center).sub(bC))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const xl=new Q,xC=new Q,Cx=new Q,Cc=new Q,_C=new Q,Nx=new Q,wC=new Q;class gd{constructor(e=new Q,t=new Q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,xl)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=xl.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(xl.copy(this.origin).addScaledVector(this.direction,t),xl.distanceToSquared(e))}distanceSqToSegment(e,t,i,o){xC.copy(e).add(t).multiplyScalar(.5),Cx.copy(t).sub(e).normalize(),Cc.copy(this.origin).sub(xC);const n=e.distanceTo(t)*.5,s=-this.direction.dot(Cx),a=Cc.dot(this.direction),l=-Cc.dot(Cx),c=Cc.lengthSq(),u=Math.abs(1-s*s);let d,h,p,m;if(u>0)if(d=s*l-a,h=s*a-l,m=n*u,d>=0)if(h>=-m)if(h<=m){const g=1/u;d*=g,h*=g,p=d*(d+s*h+2*a)+h*(s*d+h+2*l)+c}else h=n,d=Math.max(0,-(s*h+a)),p=-d*d+h*(h+2*l)+c;else h=-n,d=Math.max(0,-(s*h+a)),p=-d*d+h*(h+2*l)+c;else h<=-m?(d=Math.max(0,-(-s*n+a)),h=d>0?-n:Math.min(Math.max(-n,-l),n),p=-d*d+h*(h+2*l)+c):h<=m?(d=0,h=Math.min(Math.max(-n,-l),n),p=h*(h+2*l)+c):(d=Math.max(0,-(s*n+a)),h=d>0?n:Math.min(Math.max(-n,-l),n),p=-d*d+h*(h+2*l)+c);else h=s>0?-n:n,d=Math.max(0,-(s*h+a)),p=-d*d+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),o&&o.copy(xC).addScaledVector(Cx,h),p}intersectSphere(e,t){xl.subVectors(e.center,this.origin);const i=xl.dot(this.direction),o=xl.dot(xl)-i*i,n=e.radius*e.radius;if(o>n)return null;const s=Math.sqrt(n-o),a=i-s,l=i+s;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,o,n,s,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,o=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,o=(e.min.x-h.x)*c),u>=0?(n=(e.min.y-h.y)*u,s=(e.max.y-h.y)*u):(n=(e.max.y-h.y)*u,s=(e.min.y-h.y)*u),i>s||n>o||((n>i||isNaN(i))&&(i=n),(s<o||isNaN(o))&&(o=s),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>o)||((a>i||i!==i)&&(i=a),(l<o||o!==o)&&(o=l),o<0)?null:this.at(i>=0?i:o,t)}intersectsBox(e){return this.intersectBox(e,xl)!==null}intersectTriangle(e,t,i,o,n){_C.subVectors(t,e),Nx.subVectors(i,e),wC.crossVectors(_C,Nx);let s=this.direction.dot(wC),a;if(s>0){if(o)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Cc.subVectors(this.origin,e);const l=a*this.direction.dot(Nx.crossVectors(Cc,Nx));if(l<0)return null;const c=a*this.direction.dot(_C.cross(Cc));if(c<0||l+c>s)return null;const u=-a*Cc.dot(wC);return u<0?null:this.at(u/s,n)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Xt{constructor(e,t,i,o,n,s,a,l,c,u,d,h,p,m,g,v){Xt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,o,n,s,a,l,c,u,d,h,p,m,g,v)}set(e,t,i,o,n,s,a,l,c,u,d,h,p,m,g,v){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=o,y[1]=n,y[5]=s,y[9]=a,y[13]=l,y[2]=c,y[6]=u,y[10]=d,y[14]=h,y[3]=p,y[7]=m,y[11]=g,y[15]=v,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Xt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,o=1/Gp.setFromMatrixColumn(e,0).length(),n=1/Gp.setFromMatrixColumn(e,1).length(),s=1/Gp.setFromMatrixColumn(e,2).length();return t[0]=i[0]*o,t[1]=i[1]*o,t[2]=i[2]*o,t[3]=0,t[4]=i[4]*n,t[5]=i[5]*n,t[6]=i[6]*n,t[7]=0,t[8]=i[8]*s,t[9]=i[9]*s,t[10]=i[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,o=e.y,n=e.z,s=Math.cos(i),a=Math.sin(i),l=Math.cos(o),c=Math.sin(o),u=Math.cos(n),d=Math.sin(n);if(e.order==="XYZ"){const h=s*u,p=s*d,m=a*u,g=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=p+m*c,t[5]=h-g*c,t[9]=-a*l,t[2]=g-h*c,t[6]=m+p*c,t[10]=s*l}else if(e.order==="YXZ"){const h=l*u,p=l*d,m=c*u,g=c*d;t[0]=h+g*a,t[4]=m*a-p,t[8]=s*c,t[1]=s*d,t[5]=s*u,t[9]=-a,t[2]=p*a-m,t[6]=g+h*a,t[10]=s*l}else if(e.order==="ZXY"){const h=l*u,p=l*d,m=c*u,g=c*d;t[0]=h-g*a,t[4]=-s*d,t[8]=m+p*a,t[1]=p+m*a,t[5]=s*u,t[9]=g-h*a,t[2]=-s*c,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){const h=s*u,p=s*d,m=a*u,g=a*d;t[0]=l*u,t[4]=m*c-p,t[8]=h*c+g,t[1]=l*d,t[5]=g*c+h,t[9]=p*c-m,t[2]=-c,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){const h=s*l,p=s*c,m=a*l,g=a*c;t[0]=l*u,t[4]=g-h*d,t[8]=m*d+p,t[1]=d,t[5]=s*u,t[9]=-a*u,t[2]=-c*u,t[6]=p*d+m,t[10]=h-g*d}else if(e.order==="XZY"){const h=s*l,p=s*c,m=a*l,g=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+g,t[5]=s*u,t[9]=p*d-m,t[2]=m*d-p,t[6]=a*u,t[10]=g*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(GCe,e,HCe)}lookAt(e,t,i){const o=this.elements;return Zn.subVectors(e,t),Zn.lengthSq()===0&&(Zn.z=1),Zn.normalize(),Nc.crossVectors(i,Zn),Nc.lengthSq()===0&&(Math.abs(i.z)===1?Zn.x+=1e-4:Zn.z+=1e-4,Zn.normalize(),Nc.crossVectors(i,Zn)),Nc.normalize(),Ax.crossVectors(Zn,Nc),o[0]=Nc.x,o[4]=Ax.x,o[8]=Zn.x,o[1]=Nc.y,o[5]=Ax.y,o[9]=Zn.y,o[2]=Nc.z,o[6]=Ax.z,o[10]=Zn.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,o=t.elements,n=this.elements,s=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],p=i[13],m=i[2],g=i[6],v=i[10],y=i[14],b=i[3],x=i[7],_=i[11],S=i[15],w=o[0],M=o[4],T=o[8],E=o[12],C=o[1],B=o[5],I=o[9],L=o[13],P=o[2],U=o[6],G=o[10],R=o[14],F=o[3],O=o[7],H=o[11],$=o[15];return n[0]=s*w+a*C+l*P+c*F,n[4]=s*M+a*B+l*U+c*O,n[8]=s*T+a*I+l*G+c*H,n[12]=s*E+a*L+l*R+c*$,n[1]=u*w+d*C+h*P+p*F,n[5]=u*M+d*B+h*U+p*O,n[9]=u*T+d*I+h*G+p*H,n[13]=u*E+d*L+h*R+p*$,n[2]=m*w+g*C+v*P+y*F,n[6]=m*M+g*B+v*U+y*O,n[10]=m*T+g*I+v*G+y*H,n[14]=m*E+g*L+v*R+y*$,n[3]=b*w+x*C+_*P+S*F,n[7]=b*M+x*B+_*U+S*O,n[11]=b*T+x*I+_*G+S*H,n[15]=b*E+x*L+_*R+S*$,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],o=e[8],n=e[12],s=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],p=e[14],m=e[3],g=e[7],v=e[11],y=e[15];return m*(+n*l*d-o*c*d-n*a*h+i*c*h+o*a*p-i*l*p)+g*(+t*l*p-t*c*h+n*s*h-o*s*p+o*c*u-n*l*u)+v*(+t*c*d-t*a*p-n*s*d+i*s*p+n*a*u-i*c*u)+y*(-o*a*u-t*l*d+t*a*h+o*s*d-i*s*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=t,o[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],o=e[2],n=e[3],s=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],m=e[12],g=e[13],v=e[14],y=e[15],b=d*v*c-g*h*c+g*l*p-a*v*p-d*l*y+a*h*y,x=m*h*c-u*v*c-m*l*p+s*v*p+u*l*y-s*h*y,_=u*g*c-m*d*c+m*a*p-s*g*p-u*a*y+s*d*y,S=m*d*l-u*g*l-m*a*h+s*g*h+u*a*v-s*d*v,w=t*b+i*x+o*_+n*S;if(w===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const M=1/w;return e[0]=b*M,e[1]=(g*h*n-d*v*n-g*o*p+i*v*p+d*o*y-i*h*y)*M,e[2]=(a*v*n-g*l*n+g*o*c-i*v*c-a*o*y+i*l*y)*M,e[3]=(d*l*n-a*h*n-d*o*c+i*h*c+a*o*p-i*l*p)*M,e[4]=x*M,e[5]=(u*v*n-m*h*n+m*o*p-t*v*p-u*o*y+t*h*y)*M,e[6]=(m*l*n-s*v*n-m*o*c+t*v*c+s*o*y-t*l*y)*M,e[7]=(s*h*n-u*l*n+u*o*c-t*h*c-s*o*p+t*l*p)*M,e[8]=_*M,e[9]=(m*d*n-u*g*n-m*i*p+t*g*p+u*i*y-t*d*y)*M,e[10]=(s*g*n-m*a*n+m*i*c-t*g*c-s*i*y+t*a*y)*M,e[11]=(u*a*n-s*d*n-u*i*c+t*d*c+s*i*p-t*a*p)*M,e[12]=S*M,e[13]=(u*g*o-m*d*o+m*i*h-t*g*h-u*i*v+t*d*v)*M,e[14]=(m*a*o-s*g*o-m*i*l+t*g*l+s*i*v-t*a*v)*M,e[15]=(s*d*o-u*a*o+u*i*l-t*d*l-s*i*h+t*a*h)*M,this}scale(e){const t=this.elements,i=e.x,o=e.y,n=e.z;return t[0]*=i,t[4]*=o,t[8]*=n,t[1]*=i,t[5]*=o,t[9]*=n,t[2]*=i,t[6]*=o,t[10]*=n,t[3]*=i,t[7]*=o,t[11]*=n,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,o))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),o=Math.sin(t),n=1-i,s=e.x,a=e.y,l=e.z,c=n*s,u=n*a;return this.set(c*s+i,c*a-o*l,c*l+o*a,0,c*a+o*l,u*a+i,u*l-o*s,0,c*l-o*a,u*l+o*s,n*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,o,n,s){return this.set(1,i,n,0,e,1,s,0,t,o,1,0,0,0,0,1),this}compose(e,t,i){const o=this.elements,n=t._x,s=t._y,a=t._z,l=t._w,c=n+n,u=s+s,d=a+a,h=n*c,p=n*u,m=n*d,g=s*u,v=s*d,y=a*d,b=l*c,x=l*u,_=l*d,S=i.x,w=i.y,M=i.z;return o[0]=(1-(g+y))*S,o[1]=(p+_)*S,o[2]=(m-x)*S,o[3]=0,o[4]=(p-_)*w,o[5]=(1-(h+y))*w,o[6]=(v+b)*w,o[7]=0,o[8]=(m+x)*M,o[9]=(v-b)*M,o[10]=(1-(h+g))*M,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,t,i){const o=this.elements;let n=Gp.set(o[0],o[1],o[2]).length();const s=Gp.set(o[4],o[5],o[6]).length(),a=Gp.set(o[8],o[9],o[10]).length();this.determinant()<0&&(n=-n),e.x=o[12],e.y=o[13],e.z=o[14],Js.copy(this);const l=1/n,c=1/s,u=1/a;return Js.elements[0]*=l,Js.elements[1]*=l,Js.elements[2]*=l,Js.elements[4]*=c,Js.elements[5]*=c,Js.elements[6]*=c,Js.elements[8]*=u,Js.elements[9]*=u,Js.elements[10]*=u,t.setFromRotationMatrix(Js),i.x=n,i.y=s,i.z=a,this}makePerspective(e,t,i,o,n,s,a=Ts){const l=this.elements,c=2*n/(t-e),u=2*n/(i-o),d=(t+e)/(t-e),h=(i+o)/(i-o);let p,m;if(a===Ts)p=-(s+n)/(s-n),m=-2*s*n/(s-n);else if(a===hd)p=-s/(s-n),m=-s*n/(s-n);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=m,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,o,n,s,a=Ts){const l=this.elements,c=1/(t-e),u=1/(i-o),d=1/(s-n),h=(t+e)*c,p=(i+o)*u;let m,g;if(a===Ts)m=(s+n)*d,g=-2*d;else if(a===hd)m=n*d,g=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=g,l[14]=-m,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let o=0;o<16;o++)if(t[o]!==i[o])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Gp=new Q,Js=new Xt,GCe=new Q(0,0,0),HCe=new Q(1,1,1),Nc=new Q,Ax=new Q,Zn=new Q,TV=new Xt,EV=new jr;class Rn{constructor(e=0,t=0,i=0,o=Rn.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,o=this._order){return this._x=e,this._y=t,this._z=i,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const o=e.elements,n=o[0],s=o[4],a=o[8],l=o[1],c=o[5],u=o[9],d=o[2],h=o[6],p=o[10];switch(t){case"XYZ":this._y=Math.asin(xi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-s,n)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-xi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,n),this._z=0);break;case"ZXY":this._x=Math.asin(xi(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(l,n));break;case"ZYX":this._y=Math.asin(-xi(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,n)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(xi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,n)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-xi(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,n)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return TV.makeRotationFromQuaternion(e),this.setFromRotationMatrix(TV,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return EV.setFromEuler(this),this.setFromQuaternion(EV,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Rn.DEFAULT_ORDER="XYZ";class Rx{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let jCe=0;const CV=new Q,Hp=new jr,_l=new Xt,Lx=new Q,yv=new Q,$Ce=new Q,WCe=new jr,NV=new Q(1,0,0),AV=new Q(0,1,0),RV=new Q(0,0,1),qCe={type:"added"},XCe={type:"removed"};class mr extends ao{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:jCe++}),this.uuid=Kn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=mr.DEFAULT_UP.clone();const e=new Q,t=new Rn,i=new jr,o=new Q(1,1,1);function n(){i.setFromEuler(t,!1)}function s(){t.setFromQuaternion(i,void 0,!1)}t._onChange(n),i._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new Xt},normalMatrix:{value:new er}}),this.matrix=new Xt,this.matrixWorld=new Xt,this.matrixAutoUpdate=mr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=mr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Rx,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Hp.setFromAxisAngle(e,t),this.quaternion.multiply(Hp),this}rotateOnWorldAxis(e,t){return Hp.setFromAxisAngle(e,t),this.quaternion.premultiply(Hp),this}rotateX(e){return this.rotateOnAxis(NV,e)}rotateY(e){return this.rotateOnAxis(AV,e)}rotateZ(e){return this.rotateOnAxis(RV,e)}translateOnAxis(e,t){return CV.copy(e).applyQuaternion(this.quaternion),this.position.add(CV.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(NV,e)}translateY(e){return this.translateOnAxis(AV,e)}translateZ(e){return this.translateOnAxis(RV,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_l.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Lx.copy(e):Lx.set(e,t,i);const o=this.parent;this.updateWorldMatrix(!0,!1),yv.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_l.lookAt(yv,Lx,this.up):_l.lookAt(Lx,yv,this.up),this.quaternion.setFromRotationMatrix(_l),o&&(_l.extractRotation(o.matrixWorld),Hp.setFromRotationMatrix(_l),this.quaternion.premultiply(Hp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(qCe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(XCe)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),_l.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_l.multiply(e.parent.matrixWorld)),e.applyMatrix4(_l),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,o=this.children.length;i<o;i++){const n=this.children[i].getObjectByProperty(e,t);if(n!==void 0)return n}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let o=0,n=this.children.length;o<n;o++){const s=this.children[o].getObjectsByProperty(e,t);s.length>0&&(i=i.concat(s))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yv,e,$Ce),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(yv,WCe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,o=t.length;i<o;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,o=t.length;i<o;i++){const n=t[i];(n.matrixWorldAutoUpdate===!0||e===!0)&&n.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const o=this.children;for(let n=0,s=o.length;n<s;n++){const a=o[n];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON()));function n(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=n(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];n(e.shapes,d)}else n(e.shapes,l)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(n(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(n(e.materials,this.material[l]));o.material=a}else o.material=n(e.materials,this.material);if(this.children.length>0){o.children=[];for(let a=0;a<this.children.length;a++)o.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];o.animations.push(n(e.animations,l))}}if(t){const a=s(e.geometries),l=s(e.materials),c=s(e.textures),u=s(e.images),d=s(e.shapes),h=s(e.skeletons),p=s(e.animations),m=s(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),p.length>0&&(i.animations=p),m.length>0&&(i.nodes=m)}return i.object=o,i;function s(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const o=e.children[i];this.add(o.clone())}return this}}mr.DEFAULT_UP=new Q(0,1,0),mr.DEFAULT_MATRIX_AUTO_UPDATE=!0,mr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Zs=new Q,wl=new Q,SC=new Q,Sl=new Q,jp=new Q,$p=new Q,LV=new Q,MC=new Q,TC=new Q,EC=new Q;let Ox=!1;class Ln{constructor(e=new Q,t=new Q,i=new Q){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,o){o.subVectors(i,t),Zs.subVectors(e,t),o.cross(Zs);const n=o.lengthSq();return n>0?o.multiplyScalar(1/Math.sqrt(n)):o.set(0,0,0)}static getBarycoord(e,t,i,o,n){Zs.subVectors(o,t),wl.subVectors(i,t),SC.subVectors(e,t);const s=Zs.dot(Zs),a=Zs.dot(wl),l=Zs.dot(SC),c=wl.dot(wl),u=wl.dot(SC),d=s*c-a*a;if(d===0)return n.set(-2,-1,-1);const h=1/d,p=(c*l-a*u)*h,m=(s*u-a*l)*h;return n.set(1-p-m,m,p)}static containsPoint(e,t,i,o){return this.getBarycoord(e,t,i,o,Sl),Sl.x>=0&&Sl.y>=0&&Sl.x+Sl.y<=1}static getUV(e,t,i,o,n,s,a,l){return Ox===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ox=!0),this.getInterpolation(e,t,i,o,n,s,a,l)}static getInterpolation(e,t,i,o,n,s,a,l){return this.getBarycoord(e,t,i,o,Sl),l.setScalar(0),l.addScaledVector(n,Sl.x),l.addScaledVector(s,Sl.y),l.addScaledVector(a,Sl.z),l}static isFrontFacing(e,t,i,o){return Zs.subVectors(i,t),wl.subVectors(e,t),Zs.cross(wl).dot(o)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,o){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,t,i,o){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Zs.subVectors(this.c,this.b),wl.subVectors(this.a,this.b),Zs.cross(wl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ln.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ln.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,o,n){return Ox===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Ox=!0),Ln.getInterpolation(e,this.a,this.b,this.c,t,i,o,n)}getInterpolation(e,t,i,o,n){return Ln.getInterpolation(e,this.a,this.b,this.c,t,i,o,n)}containsPoint(e){return Ln.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ln.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,o=this.b,n=this.c;let s,a;jp.subVectors(o,i),$p.subVectors(n,i),MC.subVectors(e,i);const l=jp.dot(MC),c=$p.dot(MC);if(l<=0&&c<=0)return t.copy(i);TC.subVectors(e,o);const u=jp.dot(TC),d=$p.dot(TC);if(u>=0&&d<=u)return t.copy(o);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return s=l/(l-u),t.copy(i).addScaledVector(jp,s);EC.subVectors(e,n);const p=jp.dot(EC),m=$p.dot(EC);if(m>=0&&p<=m)return t.copy(n);const g=p*c-l*m;if(g<=0&&c>=0&&m<=0)return a=c/(c-m),t.copy(i).addScaledVector($p,a);const v=u*m-p*d;if(v<=0&&d-u>=0&&p-m>=0)return LV.subVectors(n,o),a=(d-u)/(d-u+(p-m)),t.copy(o).addScaledVector(LV,a);const y=1/(v+g+h);return s=g*y,a=h*y,t.copy(i).addScaledVector(jp,s).addScaledVector($p,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let KCe=0;class ai extends ao{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:KCe++}),this.uuid=Kn(),this.name="",this.type="Material",this.blending=qn,this.side=Ss,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=gp,this.blendDst=vp,this.blendEquation=Sn,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ju,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bx,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rp,this.stencilZFail=Rp,this.stencilZPass=Rp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const o=this[t];if(o===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(i):o&&o.isVector3&&i&&i.isVector3?o.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==qn&&(i.blending=this.blending),this.side!==Ss&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function o(n){const s=[];for(const a in n){const l=n[a];delete l.metadata,s.push(l)}return s}if(t){const n=o(e.textures),s=o(e.images);n.length>0&&(i.textures=n),s.length>0&&(i.images=s)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const o=t.length;i=new Array(o);for(let n=0;n!==o;++n)i[n]=t[n].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const OV={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Ac={h:0,s:0,l:0},kx={h:0,s:0,l:0};function CC(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class bt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Ft){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ur.toWorkingColorSpace(this,t),this}setRGB(e,t,i,o=Ur.workingColorSpace){return this.r=e,this.g=t,this.b=i,Ur.toWorkingColorSpace(this,o),this}setHSL(e,t,i,o=Ur.workingColorSpace){if(e=cC(e,1),t=xi(t,0,1),i=xi(i,0,1),t===0)this.r=this.g=this.b=i;else{const n=i<=.5?i*(1+t):i+t-i*t,s=2*i-n;this.r=CC(s,n,e+1/3),this.g=CC(s,n,e),this.b=CC(s,n,e-1/3)}return Ur.toWorkingColorSpace(this,o),this}setStyle(e,t=Ft){function i(n){n!==void 0&&parseFloat(n)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let n;const s=o[1],a=o[2];switch(s){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(n[4]),this.setRGB(Math.min(255,parseInt(n[1],10))/255,Math.min(255,parseInt(n[2],10))/255,Math.min(255,parseInt(n[3],10))/255,t);if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(n[4]),this.setRGB(Math.min(100,parseInt(n[1],10))/100,Math.min(100,parseInt(n[2],10))/100,Math.min(100,parseInt(n[3],10))/100,t);break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(n[4]),this.setHSL(parseFloat(n[1])/360,parseFloat(n[2])/100,parseFloat(n[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=o[1],s=n.length;if(s===3)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Ft){const i=OV[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Dp(e.r),this.g=Dp(e.g),this.b=Dp(e.b),this}copyLinearToSRGB(e){return this.r=pC(e.r),this.g=pC(e.g),this.b=pC(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Ft){return Ur.fromWorkingColorSpace(Fo.copy(this),e),Math.round(xi(Fo.r*255,0,255))*65536+Math.round(xi(Fo.g*255,0,255))*256+Math.round(xi(Fo.b*255,0,255))}getHexString(e=Ft){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ur.workingColorSpace){Ur.fromWorkingColorSpace(Fo.copy(this),t);const i=Fo.r,o=Fo.g,n=Fo.b,s=Math.max(i,o,n),a=Math.min(i,o,n);let l,c;const u=(a+s)/2;if(a===s)l=0,c=0;else{const d=s-a;switch(c=u<=.5?d/(s+a):d/(2-s-a),s){case i:l=(o-n)/d+(o<n?6:0);break;case o:l=(n-i)/d+2;break;case n:l=(i-o)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Ur.workingColorSpace){return Ur.fromWorkingColorSpace(Fo.copy(this),t),e.r=Fo.r,e.g=Fo.g,e.b=Fo.b,e}getStyle(e=Ft){Ur.fromWorkingColorSpace(Fo.copy(this),e);const t=Fo.r,i=Fo.g,o=Fo.b;return e!==Ft?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(o*255)})`}offsetHSL(e,t,i){return this.getHSL(Ac),this.setHSL(Ac.h+e,Ac.s+t,Ac.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Ac),e.getHSL(kx);const i=hv(Ac.h,kx.h,t),o=hv(Ac.s,kx.s,t),n=hv(Ac.l,kx.l,t);return this.setHSL(i,o,n),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,o=this.b,n=e.elements;return this.r=n[0]*t+n[3]*i+n[6]*o,this.g=n[1]*t+n[4]*i+n[7]*o,this.b=n[2]*t+n[5]*i+n[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Fo=new bt;bt.NAMES=OV;class Uo extends ai{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ml=YCe();function YCe(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),i=new Uint32Array(512),o=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,o[l]=24,o[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,o[l]=-c-1,o[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,o[l]=13,o[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,o[l]=24,o[l|256]=24):(i[l]=31744,i[l|256]=64512,o[l]=13,o[l|256]=13)}const n=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,n[l]=c|u}for(let l=1024;l<2048;++l)n[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:o,mantissaTable:n,exponentTable:s,offsetTable:a}}function On(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=xi(r,-65504,65504),Ml.floatView[0]=r;const e=Ml.uint32View[0],t=e>>23&511;return Ml.baseTable[t]+((e&8388607)>>Ml.shiftTable[t])}function bv(r){const e=r>>10;return Ml.uint32View[0]=Ml.mantissaTable[Ml.offsetTable[e]+(r&1023)]+Ml.exponentTable[e],Ml.floatView[0]}const JCe={toHalfFloat:On,fromHalfFloat:bv},Bi=new Q,Ix=new We;class Zr{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Op,this.updateRange={offset:0,count:-1},this.gpuType=Di,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let o=0,n=this.itemSize;o<n;o++)this.array[e+o]=t.array[i+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Ix.fromBufferAttribute(this,t),Ix.applyMatrix3(e),this.setXY(t,Ix.x,Ix.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Bi.fromBufferAttribute(this,t),Bi.applyMatrix3(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Bi.fromBufferAttribute(this,t),Bi.applyMatrix4(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Bi.fromBufferAttribute(this,t),Bi.applyNormalMatrix(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Bi.fromBufferAttribute(this,t),Bi.transformDirection(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=An(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=pr(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=An(t,this.array)),t}setX(e,t){return this.normalized&&(t=pr(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=An(t,this.array)),t}setY(e,t){return this.normalized&&(t=pr(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=An(t,this.array)),t}setZ(e,t){return this.normalized&&(t=pr(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=An(t,this.array)),t}setW(e,t){return this.normalized&&(t=pr(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=pr(t,this.array),i=pr(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,o){return e*=this.itemSize,this.normalized&&(t=pr(t,this.array),i=pr(i,this.array),o=pr(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=o,this}setXYZW(e,t,i,o,n){return e*=this.itemSize,this.normalized&&(t=pr(t,this.array),i=pr(i,this.array),o=pr(o,this.array),n=pr(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=o,this.array[e+3]=n,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Op&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class ZCe extends Zr{constructor(e,t,i){super(new Int8Array(e),t,i)}}class QCe extends Zr{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class eNe extends Zr{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class tNe extends Zr{constructor(e,t,i){super(new Int16Array(e),t,i)}}class Px extends Zr{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class rNe extends Zr{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Dx extends Zr{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class NC extends Zr{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=bv(this.array[e*this.itemSize]);return this.normalized&&(t=An(t,this.array)),t}setX(e,t){return this.normalized&&(t=pr(t,this.array)),this.array[e*this.itemSize]=On(t),this}getY(e){let t=bv(this.array[e*this.itemSize+1]);return this.normalized&&(t=An(t,this.array)),t}setY(e,t){return this.normalized&&(t=pr(t,this.array)),this.array[e*this.itemSize+1]=On(t),this}getZ(e){let t=bv(this.array[e*this.itemSize+2]);return this.normalized&&(t=An(t,this.array)),t}setZ(e,t){return this.normalized&&(t=pr(t,this.array)),this.array[e*this.itemSize+2]=On(t),this}getW(e){let t=bv(this.array[e*this.itemSize+3]);return this.normalized&&(t=An(t,this.array)),t}setW(e,t){return this.normalized&&(t=pr(t,this.array)),this.array[e*this.itemSize+3]=On(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=pr(t,this.array),i=pr(i,this.array)),this.array[e+0]=On(t),this.array[e+1]=On(i),this}setXYZ(e,t,i,o){return e*=this.itemSize,this.normalized&&(t=pr(t,this.array),i=pr(i,this.array),o=pr(o,this.array)),this.array[e+0]=On(t),this.array[e+1]=On(i),this.array[e+2]=On(o),this}setXYZW(e,t,i,o,n){return e*=this.itemSize,this.normalized&&(t=pr(t,this.array),i=pr(i,this.array),o=pr(o,this.array),n=pr(n,this.array)),this.array[e+0]=On(t),this.array[e+1]=On(i),this.array[e+2]=On(o),this.array[e+3]=On(n),this}}class kt extends Zr{constructor(e,t,i){super(new Float32Array(e),t,i)}}class iNe extends Zr{constructor(e,t,i){super(new Float64Array(e),t,i)}}let oNe=0;const Es=new Xt,AC=new mr,Wp=new Q,Qn=new Yn,xv=new Yn,lo=new Q;class dr extends ao{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:oNe++}),this.uuid=Kn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(xV(e)?Dx:Px)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const n=new er().getNormalMatrix(e);i.applyNormalMatrix(n),i.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Es.makeRotationFromQuaternion(e),this.applyMatrix4(Es),this}rotateX(e){return Es.makeRotationX(e),this.applyMatrix4(Es),this}rotateY(e){return Es.makeRotationY(e),this.applyMatrix4(Es),this}rotateZ(e){return Es.makeRotationZ(e),this.applyMatrix4(Es),this}translate(e,t,i){return Es.makeTranslation(e,t,i),this.applyMatrix4(Es),this}scale(e,t,i){return Es.makeScale(e,t,i),this.applyMatrix4(Es),this}lookAt(e){return AC.lookAt(e),AC.updateMatrix(),this.applyMatrix4(AC.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Wp).negate(),this.translate(Wp.x,Wp.y,Wp.z),this}setFromPoints(e){const t=[];for(let i=0,o=e.length;i<o;i++){const n=e[i];t.push(n.x,n.y,n.z||0)}return this.setAttribute("position",new kt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Q(-1/0,-1/0,-1/0),new Q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,o=t.length;i<o;i++){const n=t[i];Qn.setFromBufferAttribute(n),this.morphTargetsRelative?(lo.addVectors(this.boundingBox.min,Qn.min),this.boundingBox.expandByPoint(lo),lo.addVectors(this.boundingBox.max,Qn.max),this.boundingBox.expandByPoint(lo)):(this.boundingBox.expandByPoint(Qn.min),this.boundingBox.expandByPoint(Qn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Jn);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Q,1/0);return}if(e){const i=this.boundingSphere.center;if(Qn.setFromBufferAttribute(e),t)for(let n=0,s=t.length;n<s;n++){const a=t[n];xv.setFromBufferAttribute(a),this.morphTargetsRelative?(lo.addVectors(Qn.min,xv.min),Qn.expandByPoint(lo),lo.addVectors(Qn.max,xv.max),Qn.expandByPoint(lo)):(Qn.expandByPoint(xv.min),Qn.expandByPoint(xv.max))}Qn.getCenter(i);let o=0;for(let n=0,s=e.count;n<s;n++)lo.fromBufferAttribute(e,n),o=Math.max(o,i.distanceToSquared(lo));if(t)for(let n=0,s=t.length;n<s;n++){const a=t[n],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)lo.fromBufferAttribute(a,c),l&&(Wp.fromBufferAttribute(e,c),lo.add(Wp)),o=Math.max(o,i.distanceToSquared(lo))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,o=t.position.array,n=t.normal.array,s=t.uv.array,a=o.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Zr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let C=0;C<a;C++)c[C]=new Q,u[C]=new Q;const d=new Q,h=new Q,p=new Q,m=new We,g=new We,v=new We,y=new Q,b=new Q;function x(C,B,I){d.fromArray(o,C*3),h.fromArray(o,B*3),p.fromArray(o,I*3),m.fromArray(s,C*2),g.fromArray(s,B*2),v.fromArray(s,I*2),h.sub(d),p.sub(d),g.sub(m),v.sub(m);const L=1/(g.x*v.y-v.x*g.y);isFinite(L)&&(y.copy(h).multiplyScalar(v.y).addScaledVector(p,-g.y).multiplyScalar(L),b.copy(p).multiplyScalar(g.x).addScaledVector(h,-v.x).multiplyScalar(L),c[C].add(y),c[B].add(y),c[I].add(y),u[C].add(b),u[B].add(b),u[I].add(b))}let _=this.groups;_.length===0&&(_=[{start:0,count:i.length}]);for(let C=0,B=_.length;C<B;++C){const I=_[C],L=I.start,P=I.count;for(let U=L,G=L+P;U<G;U+=3)x(i[U+0],i[U+1],i[U+2])}const S=new Q,w=new Q,M=new Q,T=new Q;function E(C){M.fromArray(n,C*3),T.copy(M);const B=c[C];S.copy(B),S.sub(M.multiplyScalar(M.dot(B))).normalize(),w.crossVectors(T,B);const I=w.dot(u[C])<0?-1:1;l[C*4]=S.x,l[C*4+1]=S.y,l[C*4+2]=S.z,l[C*4+3]=I}for(let C=0,B=_.length;C<B;++C){const I=_[C],L=I.start,P=I.count;for(let U=L,G=L+P;U<G;U+=3)E(i[U+0]),E(i[U+1]),E(i[U+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Zr(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);const o=new Q,n=new Q,s=new Q,a=new Q,l=new Q,c=new Q,u=new Q,d=new Q;if(e)for(let h=0,p=e.count;h<p;h+=3){const m=e.getX(h+0),g=e.getX(h+1),v=e.getX(h+2);o.fromBufferAttribute(t,m),n.fromBufferAttribute(t,g),s.fromBufferAttribute(t,v),u.subVectors(s,n),d.subVectors(o,n),u.cross(d),a.fromBufferAttribute(i,m),l.fromBufferAttribute(i,g),c.fromBufferAttribute(i,v),a.add(u),l.add(u),c.add(u),i.setXYZ(m,a.x,a.y,a.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(v,c.x,c.y,c.z)}else for(let h=0,p=t.count;h<p;h+=3)o.fromBufferAttribute(t,h+0),n.fromBufferAttribute(t,h+1),s.fromBufferAttribute(t,h+2),u.subVectors(s,n),d.subVectors(o,n),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)lo.fromBufferAttribute(e,t),lo.normalize(),e.setXYZ(t,lo.x,lo.y,lo.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let p=0,m=0;for(let g=0,v=l.length;g<v;g++){a.isInterleavedBufferAttribute?p=l[g]*a.data.stride+a.offset:p=l[g]*u;for(let y=0;y<u;y++)h[m++]=c[p++]}return new Zr(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new dr,i=this.index.array,o=this.attributes;for(const a in o){const l=o[a],c=e(l,i);t.setAttribute(a,c)}const n=this.morphAttributes;for(const a in n){const l=[],c=n[a];for(let u=0,d=c.length;u<d;u++){const h=c[u],p=e(h,i);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const c=s[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const o={};let n=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(o[l]=u,n=!0)}n&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const o=e.attributes;for(const c in o){const u=o[c];this.setAttribute(c,u.clone(t))}const n=e.morphAttributes;for(const c in n){const u=[],d=n[c];for(let h=0,p=d.length;h<p;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let c=0,u=s.length;c<u;c++){const d=s[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const kV=new Xt,vd=new gd,Bx=new Jn,IV=new Q,qp=new Q,Xp=new Q,Kp=new Q,RC=new Q,Fx=new Q,Ux=new We,zx=new We,Vx=new We,PV=new Q,DV=new Q,BV=new Q,Gx=new Q,Hx=new Q;class yt extends mr{constructor(e=new dr,t=new Uo){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,n=i.length;o<n;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}getVertexPosition(e,t){const i=this.geometry,o=i.attributes.position,n=i.morphAttributes.position,s=i.morphTargetsRelative;t.fromBufferAttribute(o,e);const a=this.morphTargetInfluences;if(n&&a){Fx.set(0,0,0);for(let l=0,c=n.length;l<c;l++){const u=a[l],d=n[l];u!==0&&(RC.fromBufferAttribute(d,e),s?Fx.addScaledVector(RC,u):Fx.addScaledVector(RC.sub(t),u))}t.add(Fx)}return t}raycast(e,t){const i=this.geometry,o=this.material,n=this.matrixWorld;o!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Bx.copy(i.boundingSphere),Bx.applyMatrix4(n),vd.copy(e.ray).recast(e.near),!(Bx.containsPoint(vd.origin)===!1&&(vd.intersectSphere(Bx,IV)===null||vd.origin.distanceToSquared(IV)>(e.far-e.near)**2))&&(kV.copy(n).invert(),vd.copy(e.ray).applyMatrix4(kV),!(i.boundingBox!==null&&vd.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,vd)))}_computeIntersections(e,t,i){let o;const n=this.geometry,s=this.material,a=n.index,l=n.attributes.position,c=n.attributes.uv,u=n.attributes.uv1,d=n.attributes.normal,h=n.groups,p=n.drawRange;if(a!==null)if(Array.isArray(s))for(let m=0,g=h.length;m<g;m++){const v=h[m],y=s[v.materialIndex],b=Math.max(v.start,p.start),x=Math.min(a.count,Math.min(v.start+v.count,p.start+p.count));for(let _=b,S=x;_<S;_+=3){const w=a.getX(_),M=a.getX(_+1),T=a.getX(_+2);o=jx(this,y,e,i,c,u,d,w,M,T),o&&(o.faceIndex=Math.floor(_/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const m=Math.max(0,p.start),g=Math.min(a.count,p.start+p.count);for(let v=m,y=g;v<y;v+=3){const b=a.getX(v),x=a.getX(v+1),_=a.getX(v+2);o=jx(this,s,e,i,c,u,d,b,x,_),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}else if(l!==void 0)if(Array.isArray(s))for(let m=0,g=h.length;m<g;m++){const v=h[m],y=s[v.materialIndex],b=Math.max(v.start,p.start),x=Math.min(l.count,Math.min(v.start+v.count,p.start+p.count));for(let _=b,S=x;_<S;_+=3){const w=_,M=_+1,T=_+2;o=jx(this,y,e,i,c,u,d,w,M,T),o&&(o.faceIndex=Math.floor(_/3),o.face.materialIndex=v.materialIndex,t.push(o))}}else{const m=Math.max(0,p.start),g=Math.min(l.count,p.start+p.count);for(let v=m,y=g;v<y;v+=3){const b=v,x=v+1,_=v+2;o=jx(this,s,e,i,c,u,d,b,x,_),o&&(o.faceIndex=Math.floor(v/3),t.push(o))}}}}function nNe(r,e,t,i,o,n,s,a){let l;if(e.side===Ni?l=i.intersectTriangle(s,n,o,!0,a):l=i.intersectTriangle(o,n,s,e.side===Ss,a),l===null)return null;Hx.copy(a),Hx.applyMatrix4(r.matrixWorld);const c=t.ray.origin.distanceTo(Hx);return c<t.near||c>t.far?null:{distance:c,point:Hx.clone(),object:r}}function jx(r,e,t,i,o,n,s,a,l,c){r.getVertexPosition(a,qp),r.getVertexPosition(l,Xp),r.getVertexPosition(c,Kp);const u=nNe(r,e,t,i,qp,Xp,Kp,Gx);if(u){o&&(Ux.fromBufferAttribute(o,a),zx.fromBufferAttribute(o,l),Vx.fromBufferAttribute(o,c),u.uv=Ln.getInterpolation(Gx,qp,Xp,Kp,Ux,zx,Vx,new We)),n&&(Ux.fromBufferAttribute(n,a),zx.fromBufferAttribute(n,l),Vx.fromBufferAttribute(n,c),u.uv1=Ln.getInterpolation(Gx,qp,Xp,Kp,Ux,zx,Vx,new We),u.uv2=u.uv1),s&&(PV.fromBufferAttribute(s,a),DV.fromBufferAttribute(s,l),BV.fromBufferAttribute(s,c),u.normal=Ln.getInterpolation(Gx,qp,Xp,Kp,PV,DV,BV,new Q),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new Q,materialIndex:0};Ln.getNormal(qp,Xp,Kp,d.normal),u.face=d}return u}class ni extends dr{constructor(e=1,t=1,i=1,o=1,n=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:o,heightSegments:n,depthSegments:s};const a=this;o=Math.floor(o),n=Math.floor(n),s=Math.floor(s);const l=[],c=[],u=[],d=[];let h=0,p=0;m("z","y","x",-1,-1,i,t,e,s,n,0),m("z","y","x",1,-1,i,t,-e,s,n,1),m("x","z","y",1,1,e,i,t,o,s,2),m("x","z","y",1,-1,e,i,-t,o,s,3),m("x","y","z",1,-1,e,t,i,o,n,4),m("x","y","z",-1,-1,e,t,-i,o,n,5),this.setIndex(l),this.setAttribute("position",new kt(c,3)),this.setAttribute("normal",new kt(u,3)),this.setAttribute("uv",new kt(d,2));function m(g,v,y,b,x,_,S,w,M,T,E){const C=_/M,B=S/T,I=_/2,L=S/2,P=w/2,U=M+1,G=T+1;let R=0,F=0;const O=new Q;for(let H=0;H<G;H++){const $=H*B-L;for(let j=0;j<U;j++){const J=j*C-I;O[g]=J*b,O[v]=$*x,O[y]=P,c.push(O.x,O.y,O.z),O[g]=0,O[v]=0,O[y]=w>0?1:-1,u.push(O.x,O.y,O.z),d.push(j/M),d.push(1-H/T),R+=1}}for(let H=0;H<T;H++)for(let $=0;$<M;$++){const j=h+$+U*H,J=h+$+U*(H+1),ce=h+($+1)+U*(H+1),ve=h+($+1)+U*H;l.push(j,J,ve),l.push(J,ce,ve),F+=6}a.addGroup(p,F,E),p+=F,h+=R}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ni(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Yp(r){const e={};for(const t in r){e[t]={};for(const i in r[t]){const o=r[t][i];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=o.clone():Array.isArray(o)?e[t][i]=o.slice():e[t][i]=o}}return e}function tn(r){const e={};for(let t=0;t<r.length;t++){const i=Yp(r[t]);for(const o in i)e[o]=i[o]}return e}function sNe(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function FV(r){return r.getRenderTarget()===null?r.outputColorSpace:Ur.workingColorSpace}const Rc={clone:Yp,merge:tn};var aNe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,lNe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class gi extends ai{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=aNe,this.fragmentShader=lNe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Yp(e.uniforms),this.uniformsGroups=sNe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const o in this.uniforms){const n=this.uniforms[o].value;n&&n.isTexture?t.uniforms[o]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[o]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[o]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[o]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[o]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[o]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[o]={type:"m4",value:n.toArray()}:t.uniforms[o]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const o in this.extensions)this.extensions[o]===!0&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Lc extends mr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Xt,this.projectionMatrix=new Xt,this.projectionMatrixInverse=new Xt,this.coordinateSystem=Ts}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class li extends Lc{constructor(e=50,t=1,i=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=o,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ip*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(pd*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ip*2*Math.atan(Math.tan(pd*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,o,n,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=o,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(pd*.5*this.fov)/this.zoom,i=2*t,o=this.aspect*i,n=-.5*o;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,c=s.fullHeight;n+=s.offsetX*o/l,t-=s.offsetY*i/c,o*=s.width/l,i*=s.height/c}const a=this.filmOffset;a!==0&&(n+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+o,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Jp=-90,Zp=1;class $x extends mr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const o=new li(Jp,Zp,e,t);o.layers=this.layers,this.add(o);const n=new li(Jp,Zp,e,t);n.layers=this.layers,this.add(n);const s=new li(Jp,Zp,e,t);s.layers=this.layers,this.add(s);const a=new li(Jp,Zp,e,t);a.layers=this.layers,this.add(a);const l=new li(Jp,Zp,e,t);l.layers=this.layers,this.add(l);const c=new li(Jp,Zp,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,o,n,s,a,l]=t;for(const c of t)this.remove(c);if(e===Ts)i.up.set(0,1,0),i.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),n.up.set(0,0,-1),n.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===hd)i.up.set(0,-1,0),i.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),n.up.set(0,0,1),n.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:o}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[n,s,a,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),m=e.xr.enabled;e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,o),e.render(t,n),e.setRenderTarget(i,1,o),e.render(t,s),e.setRenderTarget(i,2,o),e.render(t,a),e.setRenderTarget(i,3,o),e.render(t,l),e.setRenderTarget(i,4,o),e.render(t,c),i.texture.generateMipmaps=g,e.setRenderTarget(i,5,o),e.render(t,u),e.setRenderTarget(d,h,p),e.xr.enabled=m,i.texture.needsPMREMUpdate=!0}}class yd extends mi{constructor(e,t,i,o,n,s,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Ms,super(e,t,i,o,n,s,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class LC extends Ki{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},o=[i,i,i,i,i,i];t.encoding!==void 0&&(fv("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ca?Ft:so),this.texture=new yd(o,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:oi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new ni(5,5,5),n=new gi({name:"CubemapFromEquirect",uniforms:Yp(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Ni,blending:So});n.uniforms.tEquirect.value=t;const s=new yt(o,n),a=t.minFilter;return t.minFilter===Tn&&(t.minFilter=oi),new $x(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,i,o){const n=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,i,o);e.setRenderTarget(n)}}const OC=new Q,cNe=new Q,uNe=new er;class Tl{constructor(e=new Q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,o){return this.normal.set(e,t,i),this.constant=o,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const o=OC.subVectors(i,t).cross(cNe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(OC),o=this.normal.dot(i);if(o===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const n=-(e.start.dot(this.normal)+this.constant)/o;return n<0||n>1?null:t.copy(e.start).addScaledVector(i,n)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||uNe.getNormalMatrix(e),o=this.coplanarPoint(OC).applyMatrix4(e),n=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(n),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const bd=new Jn,Wx=new Q;class _v{constructor(e=new Tl,t=new Tl,i=new Tl,o=new Tl,n=new Tl,s=new Tl){this.planes=[e,t,i,o,n,s]}set(e,t,i,o,n,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(o),a[4].copy(n),a[5].copy(s),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ts){const i=this.planes,o=e.elements,n=o[0],s=o[1],a=o[2],l=o[3],c=o[4],u=o[5],d=o[6],h=o[7],p=o[8],m=o[9],g=o[10],v=o[11],y=o[12],b=o[13],x=o[14],_=o[15];if(i[0].setComponents(l-n,h-c,v-p,_-y).normalize(),i[1].setComponents(l+n,h+c,v+p,_+y).normalize(),i[2].setComponents(l+s,h+u,v+m,_+b).normalize(),i[3].setComponents(l-s,h-u,v-m,_-b).normalize(),i[4].setComponents(l-a,h-d,v-g,_-x).normalize(),t===Ts)i[5].setComponents(l+a,h+d,v+g,_+x).normalize();else if(t===hd)i[5].setComponents(a,d,g,x).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),bd.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),bd.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(bd)}intersectsSprite(e){return bd.center.set(0,0,0),bd.radius=.7071067811865476,bd.applyMatrix4(e.matrixWorld),this.intersectsSphere(bd)}intersectsSphere(e){const t=this.planes,i=e.center,o=-e.radius;for(let n=0;n<6;n++)if(t[n].distanceToPoint(i)<o)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const o=t[i];if(Wx.x=o.normal.x>0?e.max.x:e.min.x,Wx.y=o.normal.y>0?e.max.y:e.min.y,Wx.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(Wx)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function UV(){let r=null,e=!1,t=null,i=null;function o(n,s){t(n,s),i=r.requestAnimationFrame(o)}return{start:function(){e!==!0&&t!==null&&(i=r.requestAnimationFrame(o),e=!0)},stop:function(){r.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(n){t=n},setContext:function(n){r=n}}}function dNe(r,e){const t=e.isWebGL2,i=new WeakMap;function o(c,u){const d=c.array,h=c.usage,p=r.createBuffer();r.bindBuffer(u,p),r.bufferData(u,d,h),c.onUploadCallback();let m;if(d instanceof Float32Array)m=r.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)m=r.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else m=r.UNSIGNED_SHORT;else if(d instanceof Int16Array)m=r.SHORT;else if(d instanceof Uint32Array)m=r.UNSIGNED_INT;else if(d instanceof Int32Array)m=r.INT;else if(d instanceof Int8Array)m=r.BYTE;else if(d instanceof Uint8Array)m=r.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)m=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:p,type:m,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function n(c,u,d){const h=u.array,p=u.updateRange;r.bindBuffer(d,c),p.count===-1?r.bufferSubData(d,0,h):(t?r.bufferSubData(d,p.offset*h.BYTES_PER_ELEMENT,h,p.offset,p.count):r.bufferSubData(d,p.offset*h.BYTES_PER_ELEMENT,h.subarray(p.offset,p.offset+p.count)),p.count=-1),u.onUploadCallback()}function s(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(r.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);(!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d===void 0?i.set(c,o(c,u)):d.version<c.version&&(n(d.buffer,c,u),d.version=c.version)}return{get:s,remove:a,update:l}}class xd extends dr{constructor(e=1,t=1,i=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:o};const n=e/2,s=t/2,a=Math.floor(i),l=Math.floor(o),c=a+1,u=l+1,d=e/a,h=t/l,p=[],m=[],g=[],v=[];for(let y=0;y<u;y++){const b=y*h-s;for(let x=0;x<c;x++){const _=x*d-n;m.push(_,-b,0),g.push(0,0,1),v.push(x/a),v.push(1-y/l)}}for(let y=0;y<l;y++)for(let b=0;b<a;b++){const x=b+c*y,_=b+c*(y+1),S=b+1+c*(y+1),w=b+1+c*y;p.push(x,_,w),p.push(_,S,w)}this.setIndex(p),this.setAttribute("position",new kt(m,3)),this.setAttribute("normal",new kt(g,3)),this.setAttribute("uv",new kt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xd(e.width,e.height,e.widthSegments,e.heightSegments)}}var hNe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,pNe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,fNe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,mNe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,gNe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,vNe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,yNe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,bNe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,xNe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,_Ne=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,wNe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,SNe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,MNe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,TNe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,ENe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,CNe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,NNe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,ANe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,RNe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,LNe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,ONe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,kNe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,INe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,PNe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,DNe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,BNe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,FNe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,UNe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,zNe="gl_FragColor = linearToOutputTexel( gl_FragColor );",VNe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,GNe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,HNe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,jNe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$Ne=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,WNe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,qNe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,XNe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,KNe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,YNe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,JNe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,ZNe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,QNe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,e2e=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,t2e=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,r2e=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,i2e=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,o2e=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,n2e=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,s2e=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,a2e=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,l2e=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,c2e=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,u2e=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal;
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,d2e=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,h2e=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,p2e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,f2e=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,m2e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,g2e=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,v2e=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,y2e=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,b2e=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,x2e=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,_2e=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,w2e=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,S2e=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,M2e=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,T2e=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,E2e=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,C2e=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,N2e=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,A2e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,R2e=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,L2e=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,O2e=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,k2e=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,I2e=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,P2e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,D2e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,B2e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,F2e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,U2e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,z2e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,V2e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,G2e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,H2e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,j2e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$2e=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,W2e=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,q2e=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,X2e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,K2e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Y2e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,J2e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Z2e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Q2e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,eAe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tAe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,rAe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,iAe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,oAe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,nAe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sAe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,aAe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,lAe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const cAe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,uAe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,dAe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,hAe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,pAe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fAe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,mAe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,gAe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,vAe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,yAe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,bAe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,xAe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_Ae=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,wAe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,SAe=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,MAe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TAe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,EAe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CAe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,NAe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AAe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,RAe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,LAe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OAe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kAe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,IAe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PAe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DAe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,BAe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,FAe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,UAe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zAe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,VAe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,GAe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,lr={alphahash_fragment:hNe,alphahash_pars_fragment:pNe,alphamap_fragment:fNe,alphamap_pars_fragment:mNe,alphatest_fragment:gNe,alphatest_pars_fragment:vNe,aomap_fragment:yNe,aomap_pars_fragment:bNe,begin_vertex:xNe,beginnormal_vertex:_Ne,bsdfs:wNe,iridescence_fragment:SNe,bumpmap_pars_fragment:MNe,clipping_planes_fragment:TNe,clipping_planes_pars_fragment:ENe,clipping_planes_pars_vertex:CNe,clipping_planes_vertex:NNe,color_fragment:ANe,color_pars_fragment:RNe,color_pars_vertex:LNe,color_vertex:ONe,common:kNe,cube_uv_reflection_fragment:INe,defaultnormal_vertex:PNe,displacementmap_pars_vertex:DNe,displacementmap_vertex:BNe,emissivemap_fragment:FNe,emissivemap_pars_fragment:UNe,colorspace_fragment:zNe,colorspace_pars_fragment:VNe,envmap_fragment:GNe,envmap_common_pars_fragment:HNe,envmap_pars_fragment:jNe,envmap_pars_vertex:$Ne,envmap_physical_pars_fragment:i2e,envmap_vertex:WNe,fog_vertex:qNe,fog_pars_vertex:XNe,fog_fragment:KNe,fog_pars_fragment:YNe,gradientmap_pars_fragment:JNe,lightmap_fragment:ZNe,lightmap_pars_fragment:QNe,lights_lambert_fragment:e2e,lights_lambert_pars_fragment:t2e,lights_pars_begin:r2e,lights_toon_fragment:o2e,lights_toon_pars_fragment:n2e,lights_phong_fragment:s2e,lights_phong_pars_fragment:a2e,lights_physical_fragment:l2e,lights_physical_pars_fragment:c2e,lights_fragment_begin:u2e,lights_fragment_maps:d2e,lights_fragment_end:h2e,logdepthbuf_fragment:p2e,logdepthbuf_pars_fragment:f2e,logdepthbuf_pars_vertex:m2e,logdepthbuf_vertex:g2e,map_fragment:v2e,map_pars_fragment:y2e,map_particle_fragment:b2e,map_particle_pars_fragment:x2e,metalnessmap_fragment:_2e,metalnessmap_pars_fragment:w2e,morphcolor_vertex:S2e,morphnormal_vertex:M2e,morphtarget_pars_vertex:T2e,morphtarget_vertex:E2e,normal_fragment_begin:C2e,normal_fragment_maps:N2e,normal_pars_fragment:A2e,normal_pars_vertex:R2e,normal_vertex:L2e,normalmap_pars_fragment:O2e,clearcoat_normal_fragment_begin:k2e,clearcoat_normal_fragment_maps:I2e,clearcoat_pars_fragment:P2e,iridescence_pars_fragment:D2e,opaque_fragment:B2e,packing:F2e,premultiplied_alpha_fragment:U2e,project_vertex:z2e,dithering_fragment:V2e,dithering_pars_fragment:G2e,roughnessmap_fragment:H2e,roughnessmap_pars_fragment:j2e,shadowmap_pars_fragment:$2e,shadowmap_pars_vertex:W2e,shadowmap_vertex:q2e,shadowmask_pars_fragment:X2e,skinbase_vertex:K2e,skinning_pars_vertex:Y2e,skinning_vertex:J2e,skinnormal_vertex:Z2e,specularmap_fragment:Q2e,specularmap_pars_fragment:eAe,tonemapping_fragment:tAe,tonemapping_pars_fragment:rAe,transmission_fragment:iAe,transmission_pars_fragment:oAe,uv_pars_fragment:nAe,uv_pars_vertex:sAe,uv_vertex:aAe,worldpos_vertex:lAe,background_vert:cAe,background_frag:uAe,backgroundCube_vert:dAe,backgroundCube_frag:hAe,cube_vert:pAe,cube_frag:fAe,depth_vert:mAe,depth_frag:gAe,distanceRGBA_vert:vAe,distanceRGBA_frag:yAe,equirect_vert:bAe,equirect_frag:xAe,linedashed_vert:_Ae,linedashed_frag:wAe,meshbasic_vert:SAe,meshbasic_frag:MAe,meshlambert_vert:TAe,meshlambert_frag:EAe,meshmatcap_vert:CAe,meshmatcap_frag:NAe,meshnormal_vert:AAe,meshnormal_frag:RAe,meshphong_vert:LAe,meshphong_frag:OAe,meshphysical_vert:kAe,meshphysical_frag:IAe,meshtoon_vert:PAe,meshtoon_frag:DAe,points_vert:BAe,points_frag:FAe,shadow_vert:UAe,shadow_frag:zAe,sprite_vert:VAe,sprite_frag:GAe},Mt={common:{diffuse:{value:new bt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new er},alphaMap:{value:null},alphaMapTransform:{value:new er},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new er}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new er}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new er}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new er},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new er},normalScale:{value:new We(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new er},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new er}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new er}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new er}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new bt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new bt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new er},alphaTest:{value:0},uvTransform:{value:new er}},sprite:{diffuse:{value:new bt(16777215)},opacity:{value:1},center:{value:new We(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new er},alphaMap:{value:null},alphaMapTransform:{value:new er},alphaTest:{value:0}}},Ai={basic:{uniforms:tn([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.fog]),vertexShader:lr.meshbasic_vert,fragmentShader:lr.meshbasic_frag},lambert:{uniforms:tn([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,Mt.lights,{emissive:{value:new bt(0)}}]),vertexShader:lr.meshlambert_vert,fragmentShader:lr.meshlambert_frag},phong:{uniforms:tn([Mt.common,Mt.specularmap,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,Mt.lights,{emissive:{value:new bt(0)},specular:{value:new bt(1118481)},shininess:{value:30}}]),vertexShader:lr.meshphong_vert,fragmentShader:lr.meshphong_frag},standard:{uniforms:tn([Mt.common,Mt.envmap,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.roughnessmap,Mt.metalnessmap,Mt.fog,Mt.lights,{emissive:{value:new bt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:lr.meshphysical_vert,fragmentShader:lr.meshphysical_frag},toon:{uniforms:tn([Mt.common,Mt.aomap,Mt.lightmap,Mt.emissivemap,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.gradientmap,Mt.fog,Mt.lights,{emissive:{value:new bt(0)}}]),vertexShader:lr.meshtoon_vert,fragmentShader:lr.meshtoon_frag},matcap:{uniforms:tn([Mt.common,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,Mt.fog,{matcap:{value:null}}]),vertexShader:lr.meshmatcap_vert,fragmentShader:lr.meshmatcap_frag},points:{uniforms:tn([Mt.points,Mt.fog]),vertexShader:lr.points_vert,fragmentShader:lr.points_frag},dashed:{uniforms:tn([Mt.common,Mt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:lr.linedashed_vert,fragmentShader:lr.linedashed_frag},depth:{uniforms:tn([Mt.common,Mt.displacementmap]),vertexShader:lr.depth_vert,fragmentShader:lr.depth_frag},normal:{uniforms:tn([Mt.common,Mt.bumpmap,Mt.normalmap,Mt.displacementmap,{opacity:{value:1}}]),vertexShader:lr.meshnormal_vert,fragmentShader:lr.meshnormal_frag},sprite:{uniforms:tn([Mt.sprite,Mt.fog]),vertexShader:lr.sprite_vert,fragmentShader:lr.sprite_frag},background:{uniforms:{uvTransform:{value:new er},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:lr.background_vert,fragmentShader:lr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:lr.backgroundCube_vert,fragmentShader:lr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:lr.cube_vert,fragmentShader:lr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:lr.equirect_vert,fragmentShader:lr.equirect_frag},distanceRGBA:{uniforms:tn([Mt.common,Mt.displacementmap,{referencePosition:{value:new Q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:lr.distanceRGBA_vert,fragmentShader:lr.distanceRGBA_frag},shadow:{uniforms:tn([Mt.lights,Mt.fog,{color:{value:new bt(0)},opacity:{value:1}}]),vertexShader:lr.shadow_vert,fragmentShader:lr.shadow_frag}};Ai.physical={uniforms:tn([Ai.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new er},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new er},clearcoatNormalScale:{value:new We(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new er},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new er},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new er},sheen:{value:0},sheenColor:{value:new bt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new er},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new er},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new er},transmissionSamplerSize:{value:new We},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new er},attenuationDistance:{value:0},attenuationColor:{value:new bt(0)},specularColor:{value:new bt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new er},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new er},anisotropyVector:{value:new We},anisotropyMap:{value:null},anisotropyMapTransform:{value:new er}}]),vertexShader:lr.meshphysical_vert,fragmentShader:lr.meshphysical_frag};const qx={r:0,b:0,g:0};function HAe(r,e,t,i,o,n,s){const a=new bt(0);let l=n===!0?0:1,c,u,d=null,h=0,p=null;function m(v,y){let b=!1,x=y.isScene===!0?y.background:null;x&&x.isTexture&&(x=(y.backgroundBlurriness>0?t:e).get(x)),x===null?g(a,l):x&&x.isColor&&(g(x,1),b=!0);const _=r.xr.getEnvironmentBlendMode();_==="additive"?i.buffers.color.setClear(0,0,0,1,s):_==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,s),(r.autoClear||b)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),x&&(x.isCubeTexture||x.mapping===Wu)?(u===void 0&&(u=new yt(new ni(1,1,1),new gi({name:"BackgroundCubeMaterial",uniforms:Yp(Ai.backgroundCube.uniforms),vertexShader:Ai.backgroundCube.vertexShader,fragmentShader:Ai.backgroundCube.fragmentShader,side:Ni,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(S,w,M){this.matrixWorld.copyPosition(M.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(u)),u.material.uniforms.envMap.value=x,u.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=y.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,u.material.toneMapped=Ur.getTransfer(x.colorSpace)!==Jr,(d!==x||h!==x.version||p!==r.toneMapping)&&(u.material.needsUpdate=!0,d=x,h=x.version,p=r.toneMapping),u.layers.enableAll(),v.unshift(u,u.geometry,u.material,0,0,null)):x&&x.isTexture&&(c===void 0&&(c=new yt(new xd(2,2),new gi({name:"BackgroundMaterial",uniforms:Yp(Ai.background.uniforms),vertexShader:Ai.background.vertexShader,fragmentShader:Ai.background.fragmentShader,side:Ss,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(c)),c.material.uniforms.t2D.value=x,c.material.uniforms.backgroundIntensity.value=y.backgroundIntensity,c.material.toneMapped=Ur.getTransfer(x.colorSpace)!==Jr,x.matrixAutoUpdate===!0&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),(d!==x||h!==x.version||p!==r.toneMapping)&&(c.material.needsUpdate=!0,d=x,h=x.version,p=r.toneMapping),c.layers.enableAll(),v.unshift(c,c.geometry,c.material,0,0,null))}function g(v,y){v.getRGB(qx,FV(r)),i.buffers.color.setClear(qx.r,qx.g,qx.b,y,s)}return{getClearColor:function(){return a},setClearColor:function(v,y=1){a.set(v),l=y,g(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(v){l=v,g(a,l)},render:m}}function jAe(r,e,t,i){const o=r.getParameter(r.MAX_VERTEX_ATTRIBS),n=i.isWebGL2?null:e.get("OES_vertex_array_object"),s=i.isWebGL2||n!==null,a={},l=v(null);let c=l,u=!1;function d(P,U,G,R,F){let O=!1;if(s){const H=g(R,G,U);c!==H&&(c=H,p(c.object)),O=y(P,R,G,F),O&&b(P,R,G,F)}else{const H=U.wireframe===!0;(c.geometry!==R.id||c.program!==G.id||c.wireframe!==H)&&(c.geometry=R.id,c.program=G.id,c.wireframe=H,O=!0)}F!==null&&t.update(F,r.ELEMENT_ARRAY_BUFFER),(O||u)&&(u=!1,T(P,U,G,R),F!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.get(F).buffer))}function h(){return i.isWebGL2?r.createVertexArray():n.createVertexArrayOES()}function p(P){return i.isWebGL2?r.bindVertexArray(P):n.bindVertexArrayOES(P)}function m(P){return i.isWebGL2?r.deleteVertexArray(P):n.deleteVertexArrayOES(P)}function g(P,U,G){const R=G.wireframe===!0;let F=a[P.id];F===void 0&&(F={},a[P.id]=F);let O=F[U.id];O===void 0&&(O={},F[U.id]=O);let H=O[R];return H===void 0&&(H=v(h()),O[R]=H),H}function v(P){const U=[],G=[],R=[];for(let F=0;F<o;F++)U[F]=0,G[F]=0,R[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:G,attributeDivisors:R,object:P,attributes:{},index:null}}function y(P,U,G,R){const F=c.attributes,O=U.attributes;let H=0;const $=G.getAttributes();for(const j in $)if($[j].location>=0){const J=F[j];let ce=O[j];if(ce===void 0&&(j==="instanceMatrix"&&P.instanceMatrix&&(ce=P.instanceMatrix),j==="instanceColor"&&P.instanceColor&&(ce=P.instanceColor)),J===void 0||J.attribute!==ce||ce&&J.data!==ce.data)return!0;H++}return c.attributesNum!==H||c.index!==R}function b(P,U,G,R){const F={},O=U.attributes;let H=0;const $=G.getAttributes();for(const j in $)if($[j].location>=0){let J=O[j];J===void 0&&(j==="instanceMatrix"&&P.instanceMatrix&&(J=P.instanceMatrix),j==="instanceColor"&&P.instanceColor&&(J=P.instanceColor));const ce={};ce.attribute=J,J&&J.data&&(ce.data=J.data),F[j]=ce,H++}c.attributes=F,c.attributesNum=H,c.index=R}function x(){const P=c.newAttributes;for(let U=0,G=P.length;U<G;U++)P[U]=0}function _(P){S(P,0)}function S(P,U){const G=c.newAttributes,R=c.enabledAttributes,F=c.attributeDivisors;G[P]=1,R[P]===0&&(r.enableVertexAttribArray(P),R[P]=1),F[P]!==U&&((i.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](P,U),F[P]=U)}function w(){const P=c.newAttributes,U=c.enabledAttributes;for(let G=0,R=U.length;G<R;G++)U[G]!==P[G]&&(r.disableVertexAttribArray(G),U[G]=0)}function M(P,U,G,R,F,O,H){H===!0?r.vertexAttribIPointer(P,U,G,F,O):r.vertexAttribPointer(P,U,G,R,F,O)}function T(P,U,G,R){if(i.isWebGL2===!1&&(P.isInstancedMesh||R.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const F=R.attributes,O=G.getAttributes(),H=U.defaultAttributeValues;for(const $ in O){const j=O[$];if(j.location>=0){let J=F[$];if(J===void 0&&($==="instanceMatrix"&&P.instanceMatrix&&(J=P.instanceMatrix),$==="instanceColor"&&P.instanceColor&&(J=P.instanceColor)),J!==void 0){const ce=J.normalized,ve=J.itemSize,xe=t.get(J);if(xe===void 0)continue;const te=xe.buffer,Z=xe.type,de=xe.bytesPerElement,Ce=i.isWebGL2===!0&&(Z===r.INT||Z===r.UNSIGNED_INT||J.gpuType===Hg);if(J.isInterleavedBufferAttribute){const ue=J.data,D=ue.stride,K=J.offset;if(ue.isInstancedInterleavedBuffer){for(let re=0;re<j.locationSize;re++)S(j.location+re,ue.meshPerAttribute);P.isInstancedMesh!==!0&&R._maxInstanceCount===void 0&&(R._maxInstanceCount=ue.meshPerAttribute*ue.count)}else for(let re=0;re<j.locationSize;re++)_(j.location+re);r.bindBuffer(r.ARRAY_BUFFER,te);for(let re=0;re<j.locationSize;re++)M(j.location+re,ve/j.locationSize,Z,ce,D*de,(K+ve/j.locationSize*re)*de,Ce)}else{if(J.isInstancedBufferAttribute){for(let ue=0;ue<j.locationSize;ue++)S(j.location+ue,J.meshPerAttribute);P.isInstancedMesh!==!0&&R._maxInstanceCount===void 0&&(R._maxInstanceCount=J.meshPerAttribute*J.count)}else for(let ue=0;ue<j.locationSize;ue++)_(j.location+ue);r.bindBuffer(r.ARRAY_BUFFER,te);for(let ue=0;ue<j.locationSize;ue++)M(j.location+ue,ve/j.locationSize,Z,ce,ve*de,ve/j.locationSize*ue*de,Ce)}}else if(H!==void 0){const ce=H[$];if(ce!==void 0)switch(ce.length){case 2:r.vertexAttrib2fv(j.location,ce);break;case 3:r.vertexAttrib3fv(j.location,ce);break;case 4:r.vertexAttrib4fv(j.location,ce);break;default:r.vertexAttrib1fv(j.location,ce)}}}}w()}function E(){I();for(const P in a){const U=a[P];for(const G in U){const R=U[G];for(const F in R)m(R[F].object),delete R[F];delete U[G]}delete a[P]}}function C(P){if(a[P.id]===void 0)return;const U=a[P.id];for(const G in U){const R=U[G];for(const F in R)m(R[F].object),delete R[F];delete U[G]}delete a[P.id]}function B(P){for(const U in a){const G=a[U];if(G[P.id]===void 0)continue;const R=G[P.id];for(const F in R)m(R[F].object),delete R[F];delete G[P.id]}}function I(){L(),u=!0,c!==l&&(c=l,p(c.object))}function L(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:I,resetDefaultState:L,dispose:E,releaseStatesOfGeometry:C,releaseStatesOfProgram:B,initAttributes:x,enableAttribute:_,disableUnusedAttributes:w}}function $Ae(r,e,t,i){const o=i.isWebGL2;let n;function s(c){n=c}function a(c,u){r.drawArrays(n,c,u),t.update(u,n,1)}function l(c,u,d){if(d===0)return;let h,p;if(o)h=r,p="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[p](n,c,u,d),t.update(u,n,d)}this.setMode=s,this.render=a,this.renderInstances=l}function WAe(r,e,t){let i;function o(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function n(M){if(M==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&r.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=n(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=s||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),h=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=r.getParameter(r.MAX_TEXTURE_SIZE),m=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),g=r.getParameter(r.MAX_VERTEX_ATTRIBS),v=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),y=r.getParameter(r.MAX_VARYING_VECTORS),b=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),x=h>0,_=s||e.has("OES_texture_float"),S=x&&_,w=s?r.getParameter(r.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:c,getMaxAnisotropy:o,getMaxPrecision:n,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:m,maxAttributes:g,maxVertexUniforms:v,maxVaryings:y,maxFragmentUniforms:b,vertexTextures:x,floatFragmentTextures:_,floatVertexTextures:S,maxSamples:w}}function qAe(r){const e=this;let t=null,i=0,o=!1,n=!1;const s=new Tl,a=new er,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const p=d.length!==0||h||i!==0||o;return o=h,i=d.length,p},this.beginShadows=function(){n=!0,u(null)},this.endShadows=function(){n=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,p){const m=d.clippingPlanes,g=d.clipIntersection,v=d.clipShadows,y=r.get(d);if(!o||m===null||m.length===0||n&&!v)n?u(null):c();else{const b=n?0:i,x=b*4;let _=y.clippingState||null;l.value=_,_=u(m,h,x,p);for(let S=0;S!==x;++S)_[S]=t[S];y.clippingState=_,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=b}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,p,m){const g=d!==null?d.length:0;let v=null;if(g!==0){if(v=l.value,m!==!0||v===null){const y=p+g*4,b=h.matrixWorldInverse;a.getNormalMatrix(b),(v===null||v.length<y)&&(v=new Float32Array(y));for(let x=0,_=p;x!==g;++x,_+=4)s.copy(d[x]).applyMatrix4(b,a),s.normal.toArray(v,_),v[_+3]=s.constant}l.value=v,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,v}}function XAe(r){let e=new WeakMap;function t(s,a){return a===hl?s.mapping=Ms:a===pl&&(s.mapping=Ks),s}function i(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const a=s.mapping;if(a===hl||a===pl)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const c=new LC(l.height/2);return c.fromEquirectangularTexture(r,s),e.set(s,c),s.addEventListener("dispose",o),t(c.texture,s.mapping)}else return null}}return s}function o(s){const a=s.target;a.removeEventListener("dispose",o);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function n(){e=new WeakMap}return{get:i,dispose:n}}class Na extends Lc{constructor(e=-1,t=1,i=1,o=-1,n=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=o,this.near=n,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,o,n,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=o,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let n=i-e,s=i+e,a=o+t,l=o-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=c*this.view.offsetX,s=n+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(n,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Qp=4,zV=[.125,.215,.35,.446,.526,.582],_d=20,kC=new Na,VV=new bt;let IC=null;const wd=(1+Math.sqrt(5))/2,ef=1/wd,GV=[new Q(1,1,1),new Q(-1,1,1),new Q(1,1,-1),new Q(-1,1,-1),new Q(0,wd,ef),new Q(0,wd,-ef),new Q(ef,0,wd),new Q(-ef,0,wd),new Q(wd,ef,0),new Q(-wd,ef,0)];class PC{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,o=100){IC=this._renderer.getRenderTarget(),this._setSize(256);const n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(e,i,o,n),t>0&&this._blur(n,0,0,t),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=$V(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=jV(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(IC),e.scissorTest=!1,Xx(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ms||e.mapping===Ks?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),IC=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:oi,minFilter:oi,generateMipmaps:!1,type:no,format:Po,colorSpace:en,depthBuffer:!1},o=HV(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=HV(e,t,i);const{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=KAe(n)),this._blurMaterial=YAe(n,e,t)}return o}_compileMaterial(e){const t=new yt(this._lodPlanes[0],e);this._renderer.compile(t,kC)}_sceneToCubeUV(e,t,i,o){const n=new li(90,1,t,i),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,u=l.toneMapping;l.getClearColor(VV),l.toneMapping=Mn,l.autoClear=!1;const d=new Uo({name:"PMREM.Background",side:Ni,depthWrite:!1,depthTest:!1}),h=new yt(new ni,d);let p=!1;const m=e.background;m?m.isColor&&(d.color.copy(m),e.background=null,p=!0):(d.color.copy(VV),p=!0);for(let g=0;g<6;g++){const v=g%3;v===0?(n.up.set(0,s[g],0),n.lookAt(a[g],0,0)):v===1?(n.up.set(0,0,s[g]),n.lookAt(0,a[g],0)):(n.up.set(0,s[g],0),n.lookAt(0,0,a[g]));const y=this._cubeSize;Xx(o,v*y,g>2?y:0,y,y),l.setRenderTarget(o),p&&l.render(h,n),l.render(e,n)}h.geometry.dispose(),h.material.dispose(),l.toneMapping=u,l.autoClear=c,e.background=m}_textureToCubeUV(e,t){const i=this._renderer,o=e.mapping===Ms||e.mapping===Ks;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=$V()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=jV());const n=o?this._cubemapMaterial:this._equirectMaterial,s=new yt(this._lodPlanes[0],n),a=n.uniforms;a.envMap.value=e;const l=this._cubeSize;Xx(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(s,kC)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){const n=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),s=GV[(o-1)%GV.length];this._blur(e,o-1,o,n,s)}t.autoClear=i}_blur(e,t,i,o,n){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,i,o,"latitudinal",n),this._halfBlur(s,e,i,i,o,"longitudinal",n)}_halfBlur(e,t,i,o,n,s,a){const l=this._renderer,c=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new yt(this._lodPlanes[o],c),h=c.uniforms,p=this._sizeLods[i]-1,m=isFinite(n)?Math.PI/(2*p):2*Math.PI/(2*_d-1),g=n/m,v=isFinite(n)?1+Math.floor(u*g):_d;v>_d&&console.warn(`sigmaRadians, ${n}, is too large and will clip, as it requested ${v} samples when the maximum is set to ${_d}`);const y=[];let b=0;for(let M=0;M<_d;++M){const T=M/g,E=Math.exp(-T*T/2);y.push(E),M===0?b+=E:M<v&&(b+=2*E)}for(let M=0;M<y.length;M++)y[M]=y[M]/b;h.envMap.value=e.texture,h.samples.value=v,h.weights.value=y,h.latitudinal.value=s==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:x}=this;h.dTheta.value=m,h.mipInt.value=x-i;const _=this._sizeLods[o],S=3*_*(o>x-Qp?o-x+Qp:0),w=4*(this._cubeSize-_);Xx(t,S,w,3*_,2*_),l.setRenderTarget(t),l.render(d,kC)}}function KAe(r){const e=[],t=[],i=[];let o=r;const n=r-Qp+1+zV.length;for(let s=0;s<n;s++){const a=Math.pow(2,o);t.push(a);let l=1/a;s>r-Qp?l=zV[s-r+Qp-1]:s===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,m=6,g=3,v=2,y=1,b=new Float32Array(g*m*p),x=new Float32Array(v*m*p),_=new Float32Array(y*m*p);for(let w=0;w<p;w++){const M=w%3*2/3-1,T=w>2?0:-1,E=[M,T,0,M+2/3,T,0,M+2/3,T+1,0,M,T,0,M+2/3,T+1,0,M,T+1,0];b.set(E,g*m*w),x.set(h,v*m*w);const C=[w,w,w,w,w,w];_.set(C,y*m*w)}const S=new dr;S.setAttribute("position",new Zr(b,g)),S.setAttribute("uv",new Zr(x,v)),S.setAttribute("faceIndex",new Zr(_,y)),e.push(S),o>Qp&&o--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function HV(r,e,t){const i=new Ki(r,e,t);return i.texture.mapping=Wu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Xx(r,e,t,i,o){r.viewport.set(e,t,i,o),r.scissor.set(e,t,i,o)}function YAe(r,e,t){const i=new Float32Array(_d),o=new Q(0,1,0);return new gi({name:"SphericalGaussianBlur",defines:{n:_d,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:DC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function jV(){return new gi({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:DC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function $V(){return new gi({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:DC(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:So,depthTest:!1,depthWrite:!1})}function DC(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function JAe(r){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===hl||l===pl,u=l===Ms||l===Ks;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new PC(r)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&o(d)){t===null&&(t=new PC(r));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",n),h.texture}else return null}}}return a}function o(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function n(a){const l=a.target;l.removeEventListener("dispose",n);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:s}}function ZAe(r){const e={};function t(i){if(e[i]!==void 0)return e[i];let o;switch(i){case"WEBGL_depth_texture":o=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=r.getExtension(i)}return e[i]=o,o}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const o=t(i);return o===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),o}}}function QAe(r,e,t,i){const o={},n=new WeakMap;function s(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const m in h.attributes)e.remove(h.attributes[m]);for(const m in h.morphAttributes){const g=h.morphAttributes[m];for(let v=0,y=g.length;v<y;v++)e.remove(g[v])}h.removeEventListener("dispose",s),delete o[h.id];const p=n.get(h);p&&(e.remove(p),n.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return o[h.id]===!0||(h.addEventListener("dispose",s),o[h.id]=!0,t.memory.geometries++),h}function l(d){const h=d.attributes;for(const m in h)e.update(h[m],r.ARRAY_BUFFER);const p=d.morphAttributes;for(const m in p){const g=p[m];for(let v=0,y=g.length;v<y;v++)e.update(g[v],r.ARRAY_BUFFER)}}function c(d){const h=[],p=d.index,m=d.attributes.position;let g=0;if(p!==null){const b=p.array;g=p.version;for(let x=0,_=b.length;x<_;x+=3){const S=b[x+0],w=b[x+1],M=b[x+2];h.push(S,w,w,M,M,S)}}else if(m!==void 0){const b=m.array;g=m.version;for(let x=0,_=b.length/3-1;x<_;x+=3){const S=x+0,w=x+1,M=x+2;h.push(S,w,w,M,M,S)}}else return;const v=new(xV(h)?Dx:Px)(h,1);v.version=g;const y=n.get(d);y&&e.remove(y),n.set(d,v)}function u(d){const h=n.get(d);if(h){const p=d.index;p!==null&&h.version<p.version&&c(d)}else c(d);return n.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function eRe(r,e,t,i){const o=i.isWebGL2;let n;function s(h){n=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function u(h,p){r.drawElements(n,p,a,h*l),t.update(p,n,1)}function d(h,p,m){if(m===0)return;let g,v;if(o)g=r,v="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),v="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[v](n,p,a,h*l,m),t.update(p,n,m)}this.setMode=s,this.setIndex=c,this.render=u,this.renderInstances=d}function tRe(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(n,s,a){switch(t.calls++,s){case r.TRIANGLES:t.triangles+=a*(n/3);break;case r.LINES:t.lines+=a*(n/2);break;case r.LINE_STRIP:t.lines+=a*(n-1);break;case r.LINE_LOOP:t.lines+=a*n;break;case r.POINTS:t.points+=a*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function o(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:o,update:i}}function rRe(r,e){return r[0]-e[0]}function iRe(r,e){return Math.abs(e[1])-Math.abs(r[1])}function oRe(r,e,t){const i={},o=new Float32Array(8),n=new WeakMap,s=new Kt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,d){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,m=p!==void 0?p.length:0;let g=n.get(u);if(g===void 0||g.count!==m){let b=function(){L.dispose(),n.delete(u),u.removeEventListener("dispose",b)};g!==void 0&&g.texture.dispose();const x=u.morphAttributes.position!==void 0,_=u.morphAttributes.normal!==void 0,S=u.morphAttributes.color!==void 0,w=u.morphAttributes.position||[],M=u.morphAttributes.normal||[],T=u.morphAttributes.color||[];let E=0;x===!0&&(E=1),_===!0&&(E=2),S===!0&&(E=3);let C=u.attributes.position.count*E,B=1;C>e.maxTextureSize&&(B=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const I=new Float32Array(C*B*4*m),L=new mv(I,C,B,m);L.type=Di,L.needsUpdate=!0;const P=E*4;for(let U=0;U<m;U++){const G=w[U],R=M[U],F=T[U],O=C*B*4*U;for(let H=0;H<G.count;H++){const $=H*P;x===!0&&(s.fromBufferAttribute(G,H),I[O+$+0]=s.x,I[O+$+1]=s.y,I[O+$+2]=s.z,I[O+$+3]=0),_===!0&&(s.fromBufferAttribute(R,H),I[O+$+4]=s.x,I[O+$+5]=s.y,I[O+$+6]=s.z,I[O+$+7]=0),S===!0&&(s.fromBufferAttribute(F,H),I[O+$+8]=s.x,I[O+$+9]=s.y,I[O+$+10]=s.z,I[O+$+11]=F.itemSize===4?s.w:1)}}g={count:m,texture:L,size:new We(C,B)},n.set(u,g),u.addEventListener("dispose",b)}let v=0;for(let b=0;b<h.length;b++)v+=h[b];const y=u.morphTargetsRelative?1:1-v;d.getUniforms().setValue(r,"morphTargetBaseInfluence",y),d.getUniforms().setValue(r,"morphTargetInfluences",h),d.getUniforms().setValue(r,"morphTargetsTexture",g.texture,t),d.getUniforms().setValue(r,"morphTargetsTextureSize",g.size)}else{const p=h===void 0?0:h.length;let m=i[u.id];if(m===void 0||m.length!==p){m=[];for(let x=0;x<p;x++)m[x]=[x,0];i[u.id]=m}for(let x=0;x<p;x++){const _=m[x];_[0]=x,_[1]=h[x]}m.sort(iRe);for(let x=0;x<8;x++)x<p&&m[x][1]?(a[x][0]=m[x][0],a[x][1]=m[x][1]):(a[x][0]=Number.MAX_SAFE_INTEGER,a[x][1]=0);a.sort(rRe);const g=u.morphAttributes.position,v=u.morphAttributes.normal;let y=0;for(let x=0;x<8;x++){const _=a[x],S=_[0],w=_[1];S!==Number.MAX_SAFE_INTEGER&&w?(g&&u.getAttribute("morphTarget"+x)!==g[S]&&u.setAttribute("morphTarget"+x,g[S]),v&&u.getAttribute("morphNormal"+x)!==v[S]&&u.setAttribute("morphNormal"+x,v[S]),o[x]=w,y+=w):(g&&u.hasAttribute("morphTarget"+x)===!0&&u.deleteAttribute("morphTarget"+x),v&&u.hasAttribute("morphNormal"+x)===!0&&u.deleteAttribute("morphNormal"+x),o[x]=0)}const b=u.morphTargetsRelative?1:1-y;d.getUniforms().setValue(r,"morphTargetBaseInfluence",b),d.getUniforms().setValue(r,"morphTargetInfluences",o)}}return{update:l}}function nRe(r,e,t,i){let o=new WeakMap;function n(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);if(o.get(d)!==c&&(e.update(d),o.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),o.get(l)!==c&&(t.update(l.instanceMatrix,r.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,r.ARRAY_BUFFER),o.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;o.get(h)!==c&&(h.update(),o.set(h,c))}return d}function s(){o=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:n,dispose:s}}const WV=new mi,qV=new mv,XV=new Mx,KV=new yd,YV=[],JV=[],ZV=new Float32Array(16),QV=new Float32Array(9),e6=new Float32Array(4);function tf(r,e,t){const i=r[0];if(i<=0||i>0)return r;const o=e*t;let n=YV[o];if(n===void 0&&(n=new Float32Array(o),YV[o]=n),e!==0){i.toArray(n,0);for(let s=1,a=0;s!==e;++s)a+=t,r[s].toArray(n,a)}return n}function Yi(r,e){if(r.length!==e.length)return!1;for(let t=0,i=r.length;t<i;t++)if(r[t]!==e[t])return!1;return!0}function Ji(r,e){for(let t=0,i=e.length;t<i;t++)r[t]=e[t]}function Kx(r,e){let t=JV[e];t===void 0&&(t=new Int32Array(e),JV[e]=t);for(let i=0;i!==e;++i)t[i]=r.allocateTextureUnit();return t}function sRe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function aRe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yi(t,e))return;r.uniform2fv(this.addr,e),Ji(t,e)}}function lRe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Yi(t,e))return;r.uniform3fv(this.addr,e),Ji(t,e)}}function cRe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yi(t,e))return;r.uniform4fv(this.addr,e),Ji(t,e)}}function uRe(r,e){const t=this.cache,i=e.elements;if(i===void 0){if(Yi(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),Ji(t,e)}else{if(Yi(t,i))return;e6.set(i),r.uniformMatrix2fv(this.addr,!1,e6),Ji(t,i)}}function dRe(r,e){const t=this.cache,i=e.elements;if(i===void 0){if(Yi(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),Ji(t,e)}else{if(Yi(t,i))return;QV.set(i),r.uniformMatrix3fv(this.addr,!1,QV),Ji(t,i)}}function hRe(r,e){const t=this.cache,i=e.elements;if(i===void 0){if(Yi(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),Ji(t,e)}else{if(Yi(t,i))return;ZV.set(i),r.uniformMatrix4fv(this.addr,!1,ZV),Ji(t,i)}}function pRe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function fRe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yi(t,e))return;r.uniform2iv(this.addr,e),Ji(t,e)}}function mRe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Yi(t,e))return;r.uniform3iv(this.addr,e),Ji(t,e)}}function gRe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yi(t,e))return;r.uniform4iv(this.addr,e),Ji(t,e)}}function vRe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function yRe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yi(t,e))return;r.uniform2uiv(this.addr,e),Ji(t,e)}}function bRe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Yi(t,e))return;r.uniform3uiv(this.addr,e),Ji(t,e)}}function xRe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yi(t,e))return;r.uniform4uiv(this.addr,e),Ji(t,e)}}function _Re(r,e,t){const i=this.cache,o=t.allocateTextureUnit();i[0]!==o&&(r.uniform1i(this.addr,o),i[0]=o),t.setTexture2D(e||WV,o)}function wRe(r,e,t){const i=this.cache,o=t.allocateTextureUnit();i[0]!==o&&(r.uniform1i(this.addr,o),i[0]=o),t.setTexture3D(e||XV,o)}function SRe(r,e,t){const i=this.cache,o=t.allocateTextureUnit();i[0]!==o&&(r.uniform1i(this.addr,o),i[0]=o),t.setTextureCube(e||KV,o)}function MRe(r,e,t){const i=this.cache,o=t.allocateTextureUnit();i[0]!==o&&(r.uniform1i(this.addr,o),i[0]=o),t.setTexture2DArray(e||qV,o)}function TRe(r){switch(r){case 5126:return sRe;case 35664:return aRe;case 35665:return lRe;case 35666:return cRe;case 35674:return uRe;case 35675:return dRe;case 35676:return hRe;case 5124:case 35670:return pRe;case 35667:case 35671:return fRe;case 35668:case 35672:return mRe;case 35669:case 35673:return gRe;case 5125:return vRe;case 36294:return yRe;case 36295:return bRe;case 36296:return xRe;case 35678:case 36198:case 36298:case 36306:case 35682:return _Re;case 35679:case 36299:case 36307:return wRe;case 35680:case 36300:case 36308:case 36293:return SRe;case 36289:case 36303:case 36311:case 36292:return MRe}}function ERe(r,e){r.uniform1fv(this.addr,e)}function CRe(r,e){const t=tf(e,this.size,2);r.uniform2fv(this.addr,t)}function NRe(r,e){const t=tf(e,this.size,3);r.uniform3fv(this.addr,t)}function ARe(r,e){const t=tf(e,this.size,4);r.uniform4fv(this.addr,t)}function RRe(r,e){const t=tf(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function LRe(r,e){const t=tf(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function ORe(r,e){const t=tf(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function kRe(r,e){r.uniform1iv(this.addr,e)}function IRe(r,e){r.uniform2iv(this.addr,e)}function PRe(r,e){r.uniform3iv(this.addr,e)}function DRe(r,e){r.uniform4iv(this.addr,e)}function BRe(r,e){r.uniform1uiv(this.addr,e)}function FRe(r,e){r.uniform2uiv(this.addr,e)}function URe(r,e){r.uniform3uiv(this.addr,e)}function zRe(r,e){r.uniform4uiv(this.addr,e)}function VRe(r,e,t){const i=this.cache,o=e.length,n=Kx(t,o);Yi(i,n)||(r.uniform1iv(this.addr,n),Ji(i,n));for(let s=0;s!==o;++s)t.setTexture2D(e[s]||WV,n[s])}function GRe(r,e,t){const i=this.cache,o=e.length,n=Kx(t,o);Yi(i,n)||(r.uniform1iv(this.addr,n),Ji(i,n));for(let s=0;s!==o;++s)t.setTexture3D(e[s]||XV,n[s])}function HRe(r,e,t){const i=this.cache,o=e.length,n=Kx(t,o);Yi(i,n)||(r.uniform1iv(this.addr,n),Ji(i,n));for(let s=0;s!==o;++s)t.setTextureCube(e[s]||KV,n[s])}function jRe(r,e,t){const i=this.cache,o=e.length,n=Kx(t,o);Yi(i,n)||(r.uniform1iv(this.addr,n),Ji(i,n));for(let s=0;s!==o;++s)t.setTexture2DArray(e[s]||qV,n[s])}function $Re(r){switch(r){case 5126:return ERe;case 35664:return CRe;case 35665:return NRe;case 35666:return ARe;case 35674:return RRe;case 35675:return LRe;case 35676:return ORe;case 5124:case 35670:return kRe;case 35667:case 35671:return IRe;case 35668:case 35672:return PRe;case 35669:case 35673:return DRe;case 5125:return BRe;case 36294:return FRe;case 36295:return URe;case 36296:return zRe;case 35678:case 36198:case 36298:case 36306:case 35682:return VRe;case 35679:case 36299:case 36307:return GRe;case 35680:case 36300:case 36308:case 36293:return HRe;case 36289:case 36303:case 36311:case 36292:return jRe}}class WRe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=TRe(t.type)}}class qRe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=$Re(t.type)}}class XRe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const o=this.seq;for(let n=0,s=o.length;n!==s;++n){const a=o[n];a.setValue(e,t[a.id],i)}}}const BC=/(\w+)(\])?(\[|\.)?/g;function t6(r,e){r.seq.push(e),r.map[e.id]=e}function KRe(r,e,t){const i=r.name,o=i.length;for(BC.lastIndex=0;;){const n=BC.exec(i),s=BC.lastIndex;let a=n[1];const l=n[2]==="]",c=n[3];if(l&&(a=a|0),c===void 0||c==="["&&s+2===o){t6(t,c===void 0?new WRe(a,r,e):new qRe(a,r,e));break}else{let u=t.map[a];u===void 0&&(u=new XRe(a),t6(t,u)),t=u}}}class Yx{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let o=0;o<i;++o){const n=e.getActiveUniform(t,o),s=e.getUniformLocation(t,n.name);KRe(n,s,this)}}setValue(e,t,i,o){const n=this.map[t];n!==void 0&&n.setValue(e,i,o)}setOptional(e,t,i){const o=t[i];o!==void 0&&this.setValue(e,i,o)}static upload(e,t,i,o){for(let n=0,s=t.length;n!==s;++n){const a=t[n],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,o)}}static seqWithValue(e,t){const i=[];for(let o=0,n=e.length;o!==n;++o){const s=e[o];s.id in t&&i.push(s)}return i}}function r6(r,e,t){const i=r.createShader(e);return r.shaderSource(i,t),r.compileShader(i),i}let YRe=0;function JRe(r,e){const t=r.split(`
`),i=[],o=Math.max(e-6,0),n=Math.min(e+6,t.length);for(let s=o;s<n;s++){const a=s+1;i.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return i.join(`
`)}function ZRe(r){const e=Ur.getPrimaries(Ur.workingColorSpace),t=Ur.getPrimaries(r);let i;switch(e===t?i="":e===ov&&t===iv?i="LinearDisplayP3ToLinearSRGB":e===iv&&t===ov&&(i="LinearSRGBToLinearDisplayP3"),r){case en:case Ap:return[i,"LinearTransferOETF"];case Ft:case tv:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[i,"LinearTransferOETF"]}}function i6(r,e,t){const i=r.getShaderParameter(e,r.COMPILE_STATUS),o=r.getShaderInfoLog(e).trim();if(i&&o==="")return"";const n=/ERROR: 0:(\d+)/.exec(o);if(n){const s=parseInt(n[1]);return t.toUpperCase()+`

`+o+`

`+JRe(r.getShaderSource(e),s)}else return o}function QRe(r,e){const t=ZRe(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function eLe(r,e){let t;switch(e){case Fg:t="Linear";break;case Ug:t="Reinhard";break;case zg:t="OptimizedCineon";break;case $u:t="ACESFilmic";break;case WE:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function tLe(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.normalMapTangentSpace||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(wv).join(`
`)}function rLe(r){const e=[];for(const t in r){const i=r[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function iLe(r,e){const t={},i=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let o=0;o<i;o++){const n=r.getActiveAttrib(e,o),s=n.name;let a=1;n.type===r.FLOAT_MAT2&&(a=2),n.type===r.FLOAT_MAT3&&(a=3),n.type===r.FLOAT_MAT4&&(a=4),t[s]={type:n.type,location:r.getAttribLocation(e,s),locationSize:a}}return t}function wv(r){return r!==""}function o6(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function n6(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const oLe=/^[ \t]*#include +<([\w\d./]+)>/gm;function FC(r){return r.replace(oLe,sLe)}const nLe=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function sLe(r,e){let t=lr[e];if(t===void 0){const i=nLe.get(e);if(i!==void 0)t=lr[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return FC(t)}const aLe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function s6(r){return r.replace(aLe,lLe)}function lLe(r,e,t,i){let o="";for(let n=parseInt(e);n<parseInt(t);n++)o+=i.replace(/\[\s*i\s*\]/g,"[ "+n+" ]").replace(/UNROLLED_LOOP_INDEX/g,n);return o}function a6(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function cLe(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===HE?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===lx?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Ta&&(e="SHADOWMAP_TYPE_VSM"),e}function uLe(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Ms:case Ks:e="ENVMAP_TYPE_CUBE";break;case Wu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function dLe(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case Ks:e="ENVMAP_MODE_REFRACTION";break}return e}function hLe(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case yp:e="ENVMAP_BLENDING_MULTIPLY";break;case jE:e="ENVMAP_BLENDING_MIX";break;case $E:e="ENVMAP_BLENDING_ADD";break}return e}function pLe(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function fLe(r,e,t,i){const o=r.getContext(),n=t.defines;let s=t.vertexShader,a=t.fragmentShader;const l=cLe(t),c=uLe(t),u=dLe(t),d=hLe(t),h=pLe(t),p=t.isWebGL2?"":tLe(t),m=rLe(n),g=o.createProgram();let v,y,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(wv).join(`
`),v.length>0&&(v+=`
`),y=[p,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m].filter(wv).join(`
`),y.length>0&&(y+=`
`)):(v=[a6(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(wv).join(`
`),y=[p,a6(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,m,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Mn?"#define TONE_MAPPING":"",t.toneMapping!==Mn?lr.tonemapping_pars_fragment:"",t.toneMapping!==Mn?eLe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",lr.colorspace_pars_fragment,QRe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(wv).join(`
`)),s=FC(s),s=o6(s,t),s=n6(s,t),a=FC(a),a=o6(a,t),a=n6(a,t),s=s6(s),a=s6(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,v=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+v,y=["#define varying in",t.glslVersion===_x?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===_x?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const x=b+v+s,_=b+y+a,S=r6(o,o.VERTEX_SHADER,x),w=r6(o,o.FRAGMENT_SHADER,_);if(o.attachShader(g,S),o.attachShader(g,w),t.index0AttributeName!==void 0?o.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),r.debug.checkShaderErrors){const E=o.getProgramInfoLog(g).trim(),C=o.getShaderInfoLog(S).trim(),B=o.getShaderInfoLog(w).trim();let I=!0,L=!0;if(o.getProgramParameter(g,o.LINK_STATUS)===!1)if(I=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(o,g,S,w);else{const P=i6(o,S,"vertex"),U=i6(o,w,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(g,o.VALIDATE_STATUS)+`

Program Info Log: `+E+`
`+P+`
`+U)}else E!==""?console.warn("THREE.WebGLProgram: Program Info Log:",E):(C===""||B==="")&&(L=!1);L&&(this.diagnostics={runnable:I,programLog:E,vertexShader:{log:C,prefix:v},fragmentShader:{log:B,prefix:y}})}o.deleteShader(S),o.deleteShader(w);let M;this.getUniforms=function(){return M===void 0&&(M=new Yx(o,g)),M};let T;return this.getAttributes=function(){return T===void 0&&(T=iLe(o,g)),T},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=YRe++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=S,this.fragmentShader=w,this}let mLe=0;class gLe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,o=this._getShaderStage(t),n=this._getShaderStage(i),s=this._getShaderCacheForMaterial(e);return s.has(o)===!1&&(s.add(o),o.usedTimes++),s.has(n)===!1&&(s.add(n),n.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new vLe(e),t.set(e,i)),i}}class vLe{constructor(e){this.id=mLe++,this.code=e,this.usedTimes=0}}function yLe(r,e,t,i,o,n,s){const a=new Rx,l=new gLe,c=[],u=o.isWebGL2,d=o.logarithmicDepthBuffer,h=o.vertexTextures;let p=o.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(E){return E===0?"uv":`uv${E}`}function v(E,C,B,I,L){const P=I.fog,U=L.geometry,G=E.isMeshStandardMaterial?I.environment:null,R=(E.isMeshStandardMaterial?t:e).get(E.envMap||G),F=R&&R.mapping===Wu?R.image.height:null,O=m[E.type];E.precision!==null&&(p=o.getMaxPrecision(E.precision),p!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",p,"instead."));const H=U.morphAttributes.position||U.morphAttributes.normal||U.morphAttributes.color,$=H!==void 0?H.length:0;let j=0;U.morphAttributes.position!==void 0&&(j=1),U.morphAttributes.normal!==void 0&&(j=2),U.morphAttributes.color!==void 0&&(j=3);let J,ce,ve,xe;if(O){const Lt=Ai[O];J=Lt.vertexShader,ce=Lt.fragmentShader}else J=E.vertexShader,ce=E.fragmentShader,l.update(E),ve=l.getVertexShaderID(E),xe=l.getFragmentShaderID(E);const te=r.getRenderTarget(),Z=L.isInstancedMesh===!0,de=!!E.map,Ce=!!E.matcap,ue=!!R,D=!!E.aoMap,K=!!E.lightMap,re=!!E.bumpMap,ae=!!E.normalMap,le=!!E.displacementMap,Se=!!E.emissiveMap,Ae=!!E.metalnessMap,Ne=!!E.roughnessMap,Me=E.anisotropy>0,Le=E.clearcoat>0,je=E.iridescence>0,Y=E.sheen>0,z=E.transmission>0,me=Me&&!!E.anisotropyMap,Ie=Le&&!!E.clearcoatMap,Ue=Le&&!!E.clearcoatNormalMap,Re=Le&&!!E.clearcoatRoughnessMap,$e=je&&!!E.iridescenceMap,Ve=je&&!!E.iridescenceThicknessMap,ye=Y&&!!E.sheenColorMap,q=Y&&!!E.sheenRoughnessMap,oe=!!E.specularMap,fe=!!E.specularColorMap,ie=!!E.specularIntensityMap,De=z&&!!E.transmissionMap,et=z&&!!E.thicknessMap,ht=!!E.gradientMap,be=!!E.alphaMap,mt=E.alphaTest>0,at=!!E.alphaHash,xt=!!E.extensions,he=!!U.attributes.uv1,Ee=!!U.attributes.uv2,pe=!!U.attributes.uv3;let Be=Mn;return E.toneMapped&&(te===null||te.isXRRenderTarget===!0)&&(Be=r.toneMapping),{isWebGL2:u,shaderID:O,shaderType:E.type,shaderName:E.name,vertexShader:J,fragmentShader:ce,defines:E.defines,customVertexShaderID:ve,customFragmentShaderID:xe,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:p,instancing:Z,instancingColor:Z&&L.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:te===null?r.outputColorSpace:te.isXRRenderTarget===!0?te.texture.colorSpace:en,map:de,matcap:Ce,envMap:ue,envMapMode:ue&&R.mapping,envMapCubeUVHeight:F,aoMap:D,lightMap:K,bumpMap:re,normalMap:ae,displacementMap:h&&le,emissiveMap:Se,normalMapObjectSpace:ae&&E.normalMapType===yx,normalMapTangentSpace:ae&&E.normalMapType===Ys,metalnessMap:Ae,roughnessMap:Ne,anisotropy:Me,anisotropyMap:me,clearcoat:Le,clearcoatMap:Ie,clearcoatNormalMap:Ue,clearcoatRoughnessMap:Re,iridescence:je,iridescenceMap:$e,iridescenceThicknessMap:Ve,sheen:Y,sheenColorMap:ye,sheenRoughnessMap:q,specularMap:oe,specularColorMap:fe,specularIntensityMap:ie,transmission:z,transmissionMap:De,thicknessMap:et,gradientMap:ht,opaque:E.transparent===!1&&E.blending===qn,alphaMap:be,alphaTest:mt,alphaHash:at,combine:E.combine,mapUv:de&&g(E.map.channel),aoMapUv:D&&g(E.aoMap.channel),lightMapUv:K&&g(E.lightMap.channel),bumpMapUv:re&&g(E.bumpMap.channel),normalMapUv:ae&&g(E.normalMap.channel),displacementMapUv:le&&g(E.displacementMap.channel),emissiveMapUv:Se&&g(E.emissiveMap.channel),metalnessMapUv:Ae&&g(E.metalnessMap.channel),roughnessMapUv:Ne&&g(E.roughnessMap.channel),anisotropyMapUv:me&&g(E.anisotropyMap.channel),clearcoatMapUv:Ie&&g(E.clearcoatMap.channel),clearcoatNormalMapUv:Ue&&g(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Re&&g(E.clearcoatRoughnessMap.channel),iridescenceMapUv:$e&&g(E.iridescenceMap.channel),iridescenceThicknessMapUv:Ve&&g(E.iridescenceThicknessMap.channel),sheenColorMapUv:ye&&g(E.sheenColorMap.channel),sheenRoughnessMapUv:q&&g(E.sheenRoughnessMap.channel),specularMapUv:oe&&g(E.specularMap.channel),specularColorMapUv:fe&&g(E.specularColorMap.channel),specularIntensityMapUv:ie&&g(E.specularIntensityMap.channel),transmissionMapUv:De&&g(E.transmissionMap.channel),thicknessMapUv:et&&g(E.thicknessMap.channel),alphaMapUv:be&&g(E.alphaMap.channel),vertexTangents:!!U.attributes.tangent&&(ae||Me),vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!U.attributes.color&&U.attributes.color.itemSize===4,vertexUv1s:he,vertexUv2s:Ee,vertexUv3s:pe,pointsUvs:L.isPoints===!0&&!!U.attributes.uv&&(de||be),fog:!!P,useFog:E.fog===!0,fogExp2:P&&P.isFogExp2,flatShading:E.flatShading===!0,sizeAttenuation:E.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:L.isSkinnedMesh===!0,morphTargets:U.morphAttributes.position!==void 0,morphNormals:U.morphAttributes.normal!==void 0,morphColors:U.morphAttributes.color!==void 0,morphTargetsCount:$,morphTextureStride:j,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:E.dithering,shadowMapEnabled:r.shadowMap.enabled&&B.length>0,shadowMapType:r.shadowMap.type,toneMapping:Be,useLegacyLights:r._useLegacyLights,decodeVideoTexture:de&&E.map.isVideoTexture===!0&&Ur.getTransfer(E.map.colorSpace)===Jr,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===io,flipSided:E.side===Ni,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionDerivatives:xt&&E.extensions.derivatives===!0,extensionFragDepth:xt&&E.extensions.fragDepth===!0,extensionDrawBuffers:xt&&E.extensions.drawBuffers===!0,extensionShaderTextureLOD:xt&&E.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:E.customProgramCacheKey()}}function y(E){const C=[];if(E.shaderID?C.push(E.shaderID):(C.push(E.customVertexShaderID),C.push(E.customFragmentShaderID)),E.defines!==void 0)for(const B in E.defines)C.push(B),C.push(E.defines[B]);return E.isRawShaderMaterial===!1&&(b(C,E),x(C,E),C.push(r.outputColorSpace)),C.push(E.customProgramCacheKey),C.join()}function b(E,C){E.push(C.precision),E.push(C.outputColorSpace),E.push(C.envMapMode),E.push(C.envMapCubeUVHeight),E.push(C.mapUv),E.push(C.alphaMapUv),E.push(C.lightMapUv),E.push(C.aoMapUv),E.push(C.bumpMapUv),E.push(C.normalMapUv),E.push(C.displacementMapUv),E.push(C.emissiveMapUv),E.push(C.metalnessMapUv),E.push(C.roughnessMapUv),E.push(C.anisotropyMapUv),E.push(C.clearcoatMapUv),E.push(C.clearcoatNormalMapUv),E.push(C.clearcoatRoughnessMapUv),E.push(C.iridescenceMapUv),E.push(C.iridescenceThicknessMapUv),E.push(C.sheenColorMapUv),E.push(C.sheenRoughnessMapUv),E.push(C.specularMapUv),E.push(C.specularColorMapUv),E.push(C.specularIntensityMapUv),E.push(C.transmissionMapUv),E.push(C.thicknessMapUv),E.push(C.combine),E.push(C.fogExp2),E.push(C.sizeAttenuation),E.push(C.morphTargetsCount),E.push(C.morphAttributeCount),E.push(C.numDirLights),E.push(C.numPointLights),E.push(C.numSpotLights),E.push(C.numSpotLightMaps),E.push(C.numHemiLights),E.push(C.numRectAreaLights),E.push(C.numDirLightShadows),E.push(C.numPointLightShadows),E.push(C.numSpotLightShadows),E.push(C.numSpotLightShadowsWithMaps),E.push(C.numLightProbes),E.push(C.shadowMapType),E.push(C.toneMapping),E.push(C.numClippingPlanes),E.push(C.numClipIntersection),E.push(C.depthPacking)}function x(E,C){a.disableAll(),C.isWebGL2&&a.enable(0),C.supportsVertexTextures&&a.enable(1),C.instancing&&a.enable(2),C.instancingColor&&a.enable(3),C.matcap&&a.enable(4),C.envMap&&a.enable(5),C.normalMapObjectSpace&&a.enable(6),C.normalMapTangentSpace&&a.enable(7),C.clearcoat&&a.enable(8),C.iridescence&&a.enable(9),C.alphaTest&&a.enable(10),C.vertexColors&&a.enable(11),C.vertexAlphas&&a.enable(12),C.vertexUv1s&&a.enable(13),C.vertexUv2s&&a.enable(14),C.vertexUv3s&&a.enable(15),C.vertexTangents&&a.enable(16),C.anisotropy&&a.enable(17),E.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.useLegacyLights&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.transmission&&a.enable(15),C.sheen&&a.enable(16),C.opaque&&a.enable(17),C.pointsUvs&&a.enable(18),C.decodeVideoTexture&&a.enable(19),E.push(a.mask)}function _(E){const C=m[E.type];let B;if(C){const I=Ai[C];B=Rc.clone(I.uniforms)}else B=E.uniforms;return B}function S(E,C){let B;for(let I=0,L=c.length;I<L;I++){const P=c[I];if(P.cacheKey===C){B=P,++B.usedTimes;break}}return B===void 0&&(B=new fLe(r,C,E,n),c.push(B)),B}function w(E){if(--E.usedTimes===0){const C=c.indexOf(E);c[C]=c[c.length-1],c.pop(),E.destroy()}}function M(E){l.remove(E)}function T(){l.dispose()}return{getParameters:v,getProgramCacheKey:y,getUniforms:_,acquireProgram:S,releaseProgram:w,releaseShaderCache:M,programs:c,dispose:T}}function bLe(){let r=new WeakMap;function e(n){let s=r.get(n);return s===void 0&&(s={},r.set(n,s)),s}function t(n){r.delete(n)}function i(n,s,a){r.get(n)[s]=a}function o(){r=new WeakMap}return{get:e,remove:t,update:i,dispose:o}}function xLe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function l6(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function c6(){const r=[];let e=0;const t=[],i=[],o=[];function n(){e=0,t.length=0,i.length=0,o.length=0}function s(d,h,p,m,g,v){let y=r[e];return y===void 0?(y={id:d.id,object:d,geometry:h,material:p,groupOrder:m,renderOrder:d.renderOrder,z:g,group:v},r[e]=y):(y.id=d.id,y.object=d,y.geometry=h,y.material=p,y.groupOrder=m,y.renderOrder=d.renderOrder,y.z=g,y.group=v),e++,y}function a(d,h,p,m,g,v){const y=s(d,h,p,m,g,v);p.transmission>0?i.push(y):p.transparent===!0?o.push(y):t.push(y)}function l(d,h,p,m,g,v){const y=s(d,h,p,m,g,v);p.transmission>0?i.unshift(y):p.transparent===!0?o.unshift(y):t.unshift(y)}function c(d,h){t.length>1&&t.sort(d||xLe),i.length>1&&i.sort(h||l6),o.length>1&&o.sort(h||l6)}function u(){for(let d=e,h=r.length;d<h;d++){const p=r[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:i,transparent:o,init:n,push:a,unshift:l,finish:u,sort:c}}function _Le(){let r=new WeakMap;function e(i,o){const n=r.get(i);let s;return n===void 0?(s=new c6,r.set(i,[s])):o>=n.length?(s=new c6,n.push(s)):s=n[o],s}function t(){r=new WeakMap}return{get:e,dispose:t}}function wLe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Q,color:new bt};break;case"SpotLight":t={position:new Q,direction:new Q,color:new bt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Q,color:new bt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Q,skyColor:new bt,groundColor:new bt};break;case"RectAreaLight":t={color:new bt,position:new Q,halfWidth:new Q,halfHeight:new Q};break}return r[e.id]=t,t}}}function SLe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let MLe=0;function TLe(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function ELe(r,e){const t=new wLe,i=SLe(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)o.probe.push(new Q);const n=new Q,s=new Xt,a=new Xt;function l(u,d){let h=0,p=0,m=0;for(let I=0;I<9;I++)o.probe[I].set(0,0,0);let g=0,v=0,y=0,b=0,x=0,_=0,S=0,w=0,M=0,T=0,E=0;u.sort(TLe);const C=d===!0?Math.PI:1;for(let I=0,L=u.length;I<L;I++){const P=u[I],U=P.color,G=P.intensity,R=P.distance,F=P.shadow&&P.shadow.map?P.shadow.map.texture:null;if(P.isAmbientLight)h+=U.r*G*C,p+=U.g*G*C,m+=U.b*G*C;else if(P.isLightProbe){for(let O=0;O<9;O++)o.probe[O].addScaledVector(P.sh.coefficients[O],G);E++}else if(P.isDirectionalLight){const O=t.get(P);if(O.color.copy(P.color).multiplyScalar(P.intensity*C),P.castShadow){const H=P.shadow,$=i.get(P);$.shadowBias=H.bias,$.shadowNormalBias=H.normalBias,$.shadowRadius=H.radius,$.shadowMapSize=H.mapSize,o.directionalShadow[g]=$,o.directionalShadowMap[g]=F,o.directionalShadowMatrix[g]=P.shadow.matrix,_++}o.directional[g]=O,g++}else if(P.isSpotLight){const O=t.get(P);O.position.setFromMatrixPosition(P.matrixWorld),O.color.copy(U).multiplyScalar(G*C),O.distance=R,O.coneCos=Math.cos(P.angle),O.penumbraCos=Math.cos(P.angle*(1-P.penumbra)),O.decay=P.decay,o.spot[y]=O;const H=P.shadow;if(P.map&&(o.spotLightMap[M]=P.map,M++,H.updateMatrices(P),P.castShadow&&T++),o.spotLightMatrix[y]=H.matrix,P.castShadow){const $=i.get(P);$.shadowBias=H.bias,$.shadowNormalBias=H.normalBias,$.shadowRadius=H.radius,$.shadowMapSize=H.mapSize,o.spotShadow[y]=$,o.spotShadowMap[y]=F,w++}y++}else if(P.isRectAreaLight){const O=t.get(P);O.color.copy(U).multiplyScalar(G),O.halfWidth.set(P.width*.5,0,0),O.halfHeight.set(0,P.height*.5,0),o.rectArea[b]=O,b++}else if(P.isPointLight){const O=t.get(P);if(O.color.copy(P.color).multiplyScalar(P.intensity*C),O.distance=P.distance,O.decay=P.decay,P.castShadow){const H=P.shadow,$=i.get(P);$.shadowBias=H.bias,$.shadowNormalBias=H.normalBias,$.shadowRadius=H.radius,$.shadowMapSize=H.mapSize,$.shadowCameraNear=H.camera.near,$.shadowCameraFar=H.camera.far,o.pointShadow[v]=$,o.pointShadowMap[v]=F,o.pointShadowMatrix[v]=P.shadow.matrix,S++}o.point[v]=O,v++}else if(P.isHemisphereLight){const O=t.get(P);O.skyColor.copy(P.color).multiplyScalar(G*C),O.groundColor.copy(P.groundColor).multiplyScalar(G*C),o.hemi[x]=O,x++}}b>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=Mt.LTC_FLOAT_1,o.rectAreaLTC2=Mt.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=Mt.LTC_HALF_1,o.rectAreaLTC2=Mt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=h,o.ambient[1]=p,o.ambient[2]=m;const B=o.hash;(B.directionalLength!==g||B.pointLength!==v||B.spotLength!==y||B.rectAreaLength!==b||B.hemiLength!==x||B.numDirectionalShadows!==_||B.numPointShadows!==S||B.numSpotShadows!==w||B.numSpotMaps!==M||B.numLightProbes!==E)&&(o.directional.length=g,o.spot.length=y,o.rectArea.length=b,o.point.length=v,o.hemi.length=x,o.directionalShadow.length=_,o.directionalShadowMap.length=_,o.pointShadow.length=S,o.pointShadowMap.length=S,o.spotShadow.length=w,o.spotShadowMap.length=w,o.directionalShadowMatrix.length=_,o.pointShadowMatrix.length=S,o.spotLightMatrix.length=w+M-T,o.spotLightMap.length=M,o.numSpotLightShadowsWithMaps=T,o.numLightProbes=E,B.directionalLength=g,B.pointLength=v,B.spotLength=y,B.rectAreaLength=b,B.hemiLength=x,B.numDirectionalShadows=_,B.numPointShadows=S,B.numSpotShadows=w,B.numSpotMaps=M,B.numLightProbes=E,o.version=MLe++)}function c(u,d){let h=0,p=0,m=0,g=0,v=0;const y=d.matrixWorldInverse;for(let b=0,x=u.length;b<x;b++){const _=u[b];if(_.isDirectionalLight){const S=o.directional[h];S.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(y),h++}else if(_.isSpotLight){const S=o.spot[m];S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(y),S.direction.setFromMatrixPosition(_.matrixWorld),n.setFromMatrixPosition(_.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(y),m++}else if(_.isRectAreaLight){const S=o.rectArea[g];S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(y),a.identity(),s.copy(_.matrixWorld),s.premultiply(y),a.extractRotation(s),S.halfWidth.set(_.width*.5,0,0),S.halfHeight.set(0,_.height*.5,0),S.halfWidth.applyMatrix4(a),S.halfHeight.applyMatrix4(a),g++}else if(_.isPointLight){const S=o.point[p];S.position.setFromMatrixPosition(_.matrixWorld),S.position.applyMatrix4(y),p++}else if(_.isHemisphereLight){const S=o.hemi[v];S.direction.setFromMatrixPosition(_.matrixWorld),S.direction.transformDirection(y),v++}}}return{setup:l,setupView:c,state:o}}function u6(r,e){const t=new ELe(r,e),i=[],o=[];function n(){i.length=0,o.length=0}function s(u){i.push(u)}function a(u){o.push(u)}function l(u){t.setup(i,u)}function c(u){t.setupView(i,u)}return{init:n,state:{lightsArray:i,shadowsArray:o,lights:t},setupLights:l,setupLightsView:c,pushLight:s,pushShadow:a}}function CLe(r,e){let t=new WeakMap;function i(n,s=0){const a=t.get(n);let l;return a===void 0?(l=new u6(r,e),t.set(n,[l])):s>=a.length?(l=new u6(r,e),a.push(l)):l=a[s],l}function o(){t=new WeakMap}return{get:i,dispose:o}}class Sv extends ai{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=XE,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Jx extends ai{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const NLe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,ALe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function RLe(r,e,t){let i=new _v;const o=new We,n=new We,s=new Kt,a=new Sv({depthPacking:vx}),l=new Jx,c={},u=t.maxTextureSize,d={[Ss]:Ni,[Ni]:Ss,[io]:io},h=new gi({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new We},radius:{value:4}},vertexShader:NLe,fragmentShader:ALe}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const m=new dr;m.setAttribute("position",new Zr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new yt(m,h),v=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=HE;let y=this.type;this.render=function(S,w,M){if(v.enabled===!1||v.autoUpdate===!1&&v.needsUpdate===!1||S.length===0)return;const T=r.getRenderTarget(),E=r.getActiveCubeFace(),C=r.getActiveMipmapLevel(),B=r.state;B.setBlending(So),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);const I=y!==Ta&&this.type===Ta,L=y===Ta&&this.type!==Ta;for(let P=0,U=S.length;P<U;P++){const G=S[P],R=G.shadow;if(R===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(R.autoUpdate===!1&&R.needsUpdate===!1)continue;o.copy(R.mapSize);const F=R.getFrameExtents();if(o.multiply(F),n.copy(R.mapSize),(o.x>u||o.y>u)&&(o.x>u&&(n.x=Math.floor(u/F.x),o.x=n.x*F.x,R.mapSize.x=n.x),o.y>u&&(n.y=Math.floor(u/F.y),o.y=n.y*F.y,R.mapSize.y=n.y)),R.map===null||I===!0||L===!0){const H=this.type!==Ta?{minFilter:Nr,magFilter:Nr}:{};R.map!==null&&R.map.dispose(),R.map=new Ki(o.x,o.y,H),R.map.texture.name=G.name+".shadowMap",R.camera.updateProjectionMatrix()}r.setRenderTarget(R.map),r.clear();const O=R.getViewportCount();for(let H=0;H<O;H++){const $=R.getViewport(H);s.set(n.x*$.x,n.y*$.y,n.x*$.z,n.y*$.w),B.viewport(s),R.updateMatrices(G,H),i=R.getFrustum(),_(w,M,R.camera,G,this.type)}R.isPointLightShadow!==!0&&this.type===Ta&&b(R,M),R.needsUpdate=!1}y=this.type,v.needsUpdate=!1,r.setRenderTarget(T,E,C)};function b(S,w){const M=e.update(g);h.defines.VSM_SAMPLES!==S.blurSamples&&(h.defines.VSM_SAMPLES=S.blurSamples,p.defines.VSM_SAMPLES=S.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new Ki(o.x,o.y)),h.uniforms.shadow_pass.value=S.map.texture,h.uniforms.resolution.value=S.mapSize,h.uniforms.radius.value=S.radius,r.setRenderTarget(S.mapPass),r.clear(),r.renderBufferDirect(w,null,M,h,g,null),p.uniforms.shadow_pass.value=S.mapPass.texture,p.uniforms.resolution.value=S.mapSize,p.uniforms.radius.value=S.radius,r.setRenderTarget(S.map),r.clear(),r.renderBufferDirect(w,null,M,p,g,null)}function x(S,w,M,T){let E=null;const C=M.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(C!==void 0)E=C;else if(E=M.isPointLight===!0?l:a,r.localClippingEnabled&&w.clipShadows===!0&&Array.isArray(w.clippingPlanes)&&w.clippingPlanes.length!==0||w.displacementMap&&w.displacementScale!==0||w.alphaMap&&w.alphaTest>0||w.map&&w.alphaTest>0){const B=E.uuid,I=w.uuid;let L=c[B];L===void 0&&(L={},c[B]=L);let P=L[I];P===void 0&&(P=E.clone(),L[I]=P),E=P}if(E.visible=w.visible,E.wireframe=w.wireframe,T===Ta?E.side=w.shadowSide!==null?w.shadowSide:w.side:E.side=w.shadowSide!==null?w.shadowSide:d[w.side],E.alphaMap=w.alphaMap,E.alphaTest=w.alphaTest,E.map=w.map,E.clipShadows=w.clipShadows,E.clippingPlanes=w.clippingPlanes,E.clipIntersection=w.clipIntersection,E.displacementMap=w.displacementMap,E.displacementScale=w.displacementScale,E.displacementBias=w.displacementBias,E.wireframeLinewidth=w.wireframeLinewidth,E.linewidth=w.linewidth,M.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const B=r.properties.get(E);B.light=M}return E}function _(S,w,M,T,E){if(S.visible===!1)return;if(S.layers.test(w.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&E===Ta)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(M.matrixWorldInverse,S.matrixWorld);const B=e.update(S),I=S.material;if(Array.isArray(I)){const L=B.groups;for(let P=0,U=L.length;P<U;P++){const G=L[P],R=I[G.materialIndex];if(R&&R.visible){const F=x(S,R,T,E);r.renderBufferDirect(M,null,B,F,S,G)}}}else if(I.visible){const L=x(S,I,T,E);r.renderBufferDirect(M,null,B,L,S,null)}}const C=S.children;for(let B=0,I=C.length;B<I;B++)_(C[B],w,M,T,E)}}function LLe(r,e,t){const i=t.isWebGL2;function o(){let be=!1;const mt=new Kt;let at=null;const xt=new Kt(0,0,0,0);return{setMask:function(he){at!==he&&!be&&(r.colorMask(he,he,he,he),at=he)},setLocked:function(he){be=he},setClear:function(he,Ee,pe,Be,Lt){Lt===!0&&(he*=Be,Ee*=Be,pe*=Be),mt.set(he,Ee,pe,Be),xt.equals(mt)===!1&&(r.clearColor(he,Ee,pe,Be),xt.copy(mt))},reset:function(){be=!1,at=null,xt.set(-1,0,0,0)}}}function n(){let be=!1,mt=null,at=null,xt=null;return{setTest:function(he){he?te(r.DEPTH_TEST):Z(r.DEPTH_TEST)},setMask:function(he){mt!==he&&!be&&(r.depthMask(he),mt=he)},setFunc:function(he){if(at!==he){switch(he){case Lg:r.depthFunc(r.NEVER);break;case Og:r.depthFunc(r.ALWAYS);break;case kg:r.depthFunc(r.LESS);break;case ju:r.depthFunc(r.LEQUAL);break;case Ig:r.depthFunc(r.EQUAL);break;case Pg:r.depthFunc(r.GEQUAL);break;case Dg:r.depthFunc(r.GREATER);break;case Bg:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}at=he}},setLocked:function(he){be=he},setClear:function(he){xt!==he&&(r.clearDepth(he),xt=he)},reset:function(){be=!1,mt=null,at=null,xt=null}}}function s(){let be=!1,mt=null,at=null,xt=null,he=null,Ee=null,pe=null,Be=null,Lt=null;return{setTest:function(Ot){be||(Ot?te(r.STENCIL_TEST):Z(r.STENCIL_TEST))},setMask:function(Ot){mt!==Ot&&!be&&(r.stencilMask(Ot),mt=Ot)},setFunc:function(Ot,zr,Tr){(at!==Ot||xt!==zr||he!==Tr)&&(r.stencilFunc(Ot,zr,Tr),at=Ot,xt=zr,he=Tr)},setOp:function(Ot,zr,Tr){(Ee!==Ot||pe!==zr||Be!==Tr)&&(r.stencilOp(Ot,zr,Tr),Ee=Ot,pe=zr,Be=Tr)},setLocked:function(Ot){be=Ot},setClear:function(Ot){Lt!==Ot&&(r.clearStencil(Ot),Lt=Ot)},reset:function(){be=!1,mt=null,at=null,xt=null,he=null,Ee=null,pe=null,Be=null,Lt=null}}}const a=new o,l=new n,c=new s,u=new WeakMap,d=new WeakMap;let h={},p={},m=new WeakMap,g=[],v=null,y=!1,b=null,x=null,_=null,S=null,w=null,M=null,T=null,E=!1,C=null,B=null,I=null,L=null,P=null;const U=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let G=!1,R=0;const F=r.getParameter(r.VERSION);F.indexOf("WebGL")!==-1?(R=parseFloat(/^WebGL (\d)/.exec(F)[1]),G=R>=1):F.indexOf("OpenGL ES")!==-1&&(R=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),G=R>=2);let O=null,H={};const $=r.getParameter(r.SCISSOR_BOX),j=r.getParameter(r.VIEWPORT),J=new Kt().fromArray($),ce=new Kt().fromArray(j);function ve(be,mt,at,xt){const he=new Uint8Array(4),Ee=r.createTexture();r.bindTexture(be,Ee),r.texParameteri(be,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(be,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let pe=0;pe<at;pe++)i&&(be===r.TEXTURE_3D||be===r.TEXTURE_2D_ARRAY)?r.texImage3D(mt,0,r.RGBA,1,1,xt,0,r.RGBA,r.UNSIGNED_BYTE,he):r.texImage2D(mt+pe,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,he);return Ee}const xe={};xe[r.TEXTURE_2D]=ve(r.TEXTURE_2D,r.TEXTURE_2D,1),xe[r.TEXTURE_CUBE_MAP]=ve(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(xe[r.TEXTURE_2D_ARRAY]=ve(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),xe[r.TEXTURE_3D]=ve(r.TEXTURE_3D,r.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),te(r.DEPTH_TEST),l.setFunc(ju),le(!1),Se(ax),te(r.CULL_FACE),re(So);function te(be){h[be]!==!0&&(r.enable(be),h[be]=!0)}function Z(be){h[be]!==!1&&(r.disable(be),h[be]=!1)}function de(be,mt){return p[be]!==mt?(r.bindFramebuffer(be,mt),p[be]=mt,i&&(be===r.DRAW_FRAMEBUFFER&&(p[r.FRAMEBUFFER]=mt),be===r.FRAMEBUFFER&&(p[r.DRAW_FRAMEBUFFER]=mt)),!0):!1}function Ce(be,mt){let at=g,xt=!1;if(be)if(at=m.get(mt),at===void 0&&(at=[],m.set(mt,at)),be.isWebGLMultipleRenderTargets){const he=be.texture;if(at.length!==he.length||at[0]!==r.COLOR_ATTACHMENT0){for(let Ee=0,pe=he.length;Ee<pe;Ee++)at[Ee]=r.COLOR_ATTACHMENT0+Ee;at.length=he.length,xt=!0}}else at[0]!==r.COLOR_ATTACHMENT0&&(at[0]=r.COLOR_ATTACHMENT0,xt=!0);else at[0]!==r.BACK&&(at[0]=r.BACK,xt=!0);xt&&(t.isWebGL2?r.drawBuffers(at):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(at))}function ue(be){return v!==be?(r.useProgram(be),v=be,!0):!1}const D={[Sn]:r.FUNC_ADD,[yg]:r.FUNC_SUBTRACT,[bg]:r.FUNC_REVERSE_SUBTRACT};if(i)D[xg]=r.MIN,D[_g]=r.MAX;else{const be=e.get("EXT_blend_minmax");be!==null&&(D[xg]=be.MIN_EXT,D[_g]=be.MAX_EXT)}const K={[wg]:r.ZERO,[Sg]:r.ONE,[Mg]:r.SRC_COLOR,[gp]:r.SRC_ALPHA,[Rg]:r.SRC_ALPHA_SATURATE,[Ng]:r.DST_COLOR,[Eg]:r.DST_ALPHA,[Tg]:r.ONE_MINUS_SRC_COLOR,[vp]:r.ONE_MINUS_SRC_ALPHA,[Ag]:r.ONE_MINUS_DST_COLOR,[Cg]:r.ONE_MINUS_DST_ALPHA};function re(be,mt,at,xt,he,Ee,pe,Be){if(be===So){y===!0&&(Z(r.BLEND),y=!1);return}if(y===!1&&(te(r.BLEND),y=!0),be!==vg){if(be!==b||Be!==E){if((x!==Sn||w!==Sn)&&(r.blendEquation(r.FUNC_ADD),x=Sn,w=Sn),Be)switch(be){case qn:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case dl:r.blendFunc(r.ONE,r.ONE);break;case vc:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case yc:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",be);break}else switch(be){case qn:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case dl:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case vc:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case yc:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",be);break}_=null,S=null,M=null,T=null,b=be,E=Be}return}he=he||mt,Ee=Ee||at,pe=pe||xt,(mt!==x||he!==w)&&(r.blendEquationSeparate(D[mt],D[he]),x=mt,w=he),(at!==_||xt!==S||Ee!==M||pe!==T)&&(r.blendFuncSeparate(K[at],K[xt],K[Ee],K[pe]),_=at,S=xt,M=Ee,T=pe),b=be,E=!1}function ae(be,mt){be.side===io?Z(r.CULL_FACE):te(r.CULL_FACE);let at=be.side===Ni;mt&&(at=!at),le(at),be.blending===qn&&be.transparent===!1?re(So):re(be.blending,be.blendEquation,be.blendSrc,be.blendDst,be.blendEquationAlpha,be.blendSrcAlpha,be.blendDstAlpha,be.premultipliedAlpha),l.setFunc(be.depthFunc),l.setTest(be.depthTest),l.setMask(be.depthWrite),a.setMask(be.colorWrite);const xt=be.stencilWrite;c.setTest(xt),xt&&(c.setMask(be.stencilWriteMask),c.setFunc(be.stencilFunc,be.stencilRef,be.stencilFuncMask),c.setOp(be.stencilFail,be.stencilZFail,be.stencilZPass)),Ne(be.polygonOffset,be.polygonOffsetFactor,be.polygonOffsetUnits),be.alphaToCoverage===!0?te(r.SAMPLE_ALPHA_TO_COVERAGE):Z(r.SAMPLE_ALPHA_TO_COVERAGE)}function le(be){C!==be&&(be?r.frontFace(r.CW):r.frontFace(r.CCW),C=be)}function Se(be){be!==VE?(te(r.CULL_FACE),be!==B&&(be===ax?r.cullFace(r.BACK):be===GE?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):Z(r.CULL_FACE),B=be}function Ae(be){be!==I&&(G&&r.lineWidth(be),I=be)}function Ne(be,mt,at){be?(te(r.POLYGON_OFFSET_FILL),(L!==mt||P!==at)&&(r.polygonOffset(mt,at),L=mt,P=at)):Z(r.POLYGON_OFFSET_FILL)}function Me(be){be?te(r.SCISSOR_TEST):Z(r.SCISSOR_TEST)}function Le(be){be===void 0&&(be=r.TEXTURE0+U-1),O!==be&&(r.activeTexture(be),O=be)}function je(be,mt,at){at===void 0&&(O===null?at=r.TEXTURE0+U-1:at=O);let xt=H[at];xt===void 0&&(xt={type:void 0,texture:void 0},H[at]=xt),(xt.type!==be||xt.texture!==mt)&&(O!==at&&(r.activeTexture(at),O=at),r.bindTexture(be,mt||xe[be]),xt.type=be,xt.texture=mt)}function Y(){const be=H[O];be!==void 0&&be.type!==void 0&&(r.bindTexture(be.type,null),be.type=void 0,be.texture=void 0)}function z(){try{r.compressedTexImage2D.apply(r,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function me(){try{r.compressedTexImage3D.apply(r,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Ie(){try{r.texSubImage2D.apply(r,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Ue(){try{r.texSubImage3D.apply(r,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Re(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function $e(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function Ve(){try{r.texStorage2D.apply(r,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function ye(){try{r.texStorage3D.apply(r,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function q(){try{r.texImage2D.apply(r,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function oe(){try{r.texImage3D.apply(r,arguments)}catch(be){console.error("THREE.WebGLState:",be)}}function fe(be){J.equals(be)===!1&&(r.scissor(be.x,be.y,be.z,be.w),J.copy(be))}function ie(be){ce.equals(be)===!1&&(r.viewport(be.x,be.y,be.z,be.w),ce.copy(be))}function De(be,mt){let at=d.get(mt);at===void 0&&(at=new WeakMap,d.set(mt,at));let xt=at.get(be);xt===void 0&&(xt=r.getUniformBlockIndex(mt,be.name),at.set(be,xt))}function et(be,mt){const at=d.get(mt).get(be);u.get(mt)!==at&&(r.uniformBlockBinding(mt,at,be.__bindingPointIndex),u.set(mt,at))}function ht(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),i===!0&&(r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),h={},O=null,H={},p={},m=new WeakMap,g=[],v=null,y=!1,b=null,x=null,_=null,S=null,w=null,M=null,T=null,E=!1,C=null,B=null,I=null,L=null,P=null,J.set(0,0,r.canvas.width,r.canvas.height),ce.set(0,0,r.canvas.width,r.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:te,disable:Z,bindFramebuffer:de,drawBuffers:Ce,useProgram:ue,setBlending:re,setMaterial:ae,setFlipSided:le,setCullFace:Se,setLineWidth:Ae,setPolygonOffset:Ne,setScissorTest:Me,activeTexture:Le,bindTexture:je,unbindTexture:Y,compressedTexImage2D:z,compressedTexImage3D:me,texImage2D:q,texImage3D:oe,updateUBOMapping:De,uniformBlockBinding:et,texStorage2D:Ve,texStorage3D:ye,texSubImage2D:Ie,texSubImage3D:Ue,compressedTexSubImage2D:Re,compressedTexSubImage3D:$e,scissor:fe,viewport:ie,reset:ht}}function OLe(r,e,t,i,o,n,s){const a=o.isWebGL2,l=o.maxTextures,c=o.maxCubemapSize,u=o.maxTextureSize,d=o.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),m=new WeakMap;let g;const v=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(Y,z){return y?new OffscreenCanvas(Y,z):pv("canvas")}function x(Y,z,me,Ie){let Ue=1;if((Y.width>Ie||Y.height>Ie)&&(Ue=Ie/Math.max(Y.width,Y.height)),Ue<1||z===!0)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap){const Re=z?wx:Math.floor,$e=Re(Ue*Y.width),Ve=Re(Ue*Y.height);g===void 0&&(g=b($e,Ve));const ye=me?b($e,Ve):g;return ye.width=$e,ye.height=Ve,ye.getContext("2d").drawImage(Y,0,0,$e,Ve),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Y.width+"x"+Y.height+") to ("+$e+"x"+Ve+")."),ye}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Y.width+"x"+Y.height+")."),Y;return Y}function _(Y){return uC(Y.width)&&uC(Y.height)}function S(Y){return a?!1:Y.wrapS!==oo||Y.wrapT!==oo||Y.minFilter!==Nr&&Y.minFilter!==oi}function w(Y,z){return Y.generateMipmaps&&z&&Y.minFilter!==Nr&&Y.minFilter!==oi}function M(Y){r.generateMipmap(Y)}function T(Y,z,me,Ie,Ue=!1){if(a===!1)return z;if(Y!==null){if(r[Y]!==void 0)return r[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let Re=z;if(z===r.RED&&(me===r.FLOAT&&(Re=r.R32F),me===r.HALF_FLOAT&&(Re=r.R16F),me===r.UNSIGNED_BYTE&&(Re=r.R8)),z===r.RED_INTEGER&&(me===r.UNSIGNED_BYTE&&(Re=r.R8UI),me===r.UNSIGNED_SHORT&&(Re=r.R16UI),me===r.UNSIGNED_INT&&(Re=r.R32UI),me===r.BYTE&&(Re=r.R8I),me===r.SHORT&&(Re=r.R16I),me===r.INT&&(Re=r.R32I)),z===r.RG&&(me===r.FLOAT&&(Re=r.RG32F),me===r.HALF_FLOAT&&(Re=r.RG16F),me===r.UNSIGNED_BYTE&&(Re=r.RG8)),z===r.RGBA){const $e=Ue?rv:Ur.getTransfer(Ie);me===r.FLOAT&&(Re=r.RGBA32F),me===r.HALF_FLOAT&&(Re=r.RGBA16F),me===r.UNSIGNED_BYTE&&(Re=$e===Jr?r.SRGB8_ALPHA8:r.RGBA8),me===r.UNSIGNED_SHORT_4_4_4_4&&(Re=r.RGBA4),me===r.UNSIGNED_SHORT_5_5_5_1&&(Re=r.RGB5_A1)}return(Re===r.R16F||Re===r.R32F||Re===r.RG16F||Re===r.RG32F||Re===r.RGBA16F||Re===r.RGBA32F)&&e.get("EXT_color_buffer_float"),Re}function E(Y,z,me){return w(Y,me)===!0||Y.isFramebufferTexture&&Y.minFilter!==Nr&&Y.minFilter!==oi?Math.log2(Math.max(z.width,z.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?z.mipmaps.length:1}function C(Y){return Y===Nr||Y===_c||Y===Ea?r.NEAREST:r.LINEAR}function B(Y){const z=Y.target;z.removeEventListener("dispose",B),L(z),z.isVideoTexture&&m.delete(z)}function I(Y){const z=Y.target;z.removeEventListener("dispose",I),U(z)}function L(Y){const z=i.get(Y);if(z.__webglInit===void 0)return;const me=Y.source,Ie=v.get(me);if(Ie){const Ue=Ie[z.__cacheKey];Ue.usedTimes--,Ue.usedTimes===0&&P(Y),Object.keys(Ie).length===0&&v.delete(me)}i.remove(Y)}function P(Y){const z=i.get(Y);r.deleteTexture(z.__webglTexture);const me=Y.source,Ie=v.get(me);delete Ie[z.__cacheKey],s.memory.textures--}function U(Y){const z=Y.texture,me=i.get(Y),Ie=i.get(z);if(Ie.__webglTexture!==void 0&&(r.deleteTexture(Ie.__webglTexture),s.memory.textures--),Y.depthTexture&&Y.depthTexture.dispose(),Y.isWebGLCubeRenderTarget)for(let Ue=0;Ue<6;Ue++){if(Array.isArray(me.__webglFramebuffer[Ue]))for(let Re=0;Re<me.__webglFramebuffer[Ue].length;Re++)r.deleteFramebuffer(me.__webglFramebuffer[Ue][Re]);else r.deleteFramebuffer(me.__webglFramebuffer[Ue]);me.__webglDepthbuffer&&r.deleteRenderbuffer(me.__webglDepthbuffer[Ue])}else{if(Array.isArray(me.__webglFramebuffer))for(let Ue=0;Ue<me.__webglFramebuffer.length;Ue++)r.deleteFramebuffer(me.__webglFramebuffer[Ue]);else r.deleteFramebuffer(me.__webglFramebuffer);if(me.__webglDepthbuffer&&r.deleteRenderbuffer(me.__webglDepthbuffer),me.__webglMultisampledFramebuffer&&r.deleteFramebuffer(me.__webglMultisampledFramebuffer),me.__webglColorRenderbuffer)for(let Ue=0;Ue<me.__webglColorRenderbuffer.length;Ue++)me.__webglColorRenderbuffer[Ue]&&r.deleteRenderbuffer(me.__webglColorRenderbuffer[Ue]);me.__webglDepthRenderbuffer&&r.deleteRenderbuffer(me.__webglDepthRenderbuffer)}if(Y.isWebGLMultipleRenderTargets)for(let Ue=0,Re=z.length;Ue<Re;Ue++){const $e=i.get(z[Ue]);$e.__webglTexture&&(r.deleteTexture($e.__webglTexture),s.memory.textures--),i.remove(z[Ue])}i.remove(z),i.remove(Y)}let G=0;function R(){G=0}function F(){const Y=G;return Y>=l&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+l),G+=1,Y}function O(Y){const z=[];return z.push(Y.wrapS),z.push(Y.wrapT),z.push(Y.wrapR||0),z.push(Y.magFilter),z.push(Y.minFilter),z.push(Y.anisotropy),z.push(Y.internalFormat),z.push(Y.format),z.push(Y.type),z.push(Y.generateMipmaps),z.push(Y.premultiplyAlpha),z.push(Y.flipY),z.push(Y.unpackAlignment),z.push(Y.colorSpace),z.join()}function H(Y,z){const me=i.get(Y);if(Y.isVideoTexture&&Le(Y),Y.isRenderTargetTexture===!1&&Y.version>0&&me.__version!==Y.version){const Ie=Y.image;if(Ie===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Ie.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{de(me,Y,z);return}}t.bindTexture(r.TEXTURE_2D,me.__webglTexture,r.TEXTURE0+z)}function $(Y,z){const me=i.get(Y);if(Y.version>0&&me.__version!==Y.version){de(me,Y,z);return}t.bindTexture(r.TEXTURE_2D_ARRAY,me.__webglTexture,r.TEXTURE0+z)}function j(Y,z){const me=i.get(Y);if(Y.version>0&&me.__version!==Y.version){de(me,Y,z);return}t.bindTexture(r.TEXTURE_3D,me.__webglTexture,r.TEXTURE0+z)}function J(Y,z){const me=i.get(Y);if(Y.version>0&&me.__version!==Y.version){Ce(me,Y,z);return}t.bindTexture(r.TEXTURE_CUBE_MAP,me.__webglTexture,r.TEXTURE0+z)}const ce={[bc]:r.REPEAT,[oo]:r.CLAMP_TO_EDGE,[xc]:r.MIRRORED_REPEAT},ve={[Nr]:r.NEAREST,[_c]:r.NEAREST_MIPMAP_NEAREST,[Ea]:r.NEAREST_MIPMAP_LINEAR,[oi]:r.LINEAR,[Gg]:r.LINEAR_MIPMAP_NEAREST,[Tn]:r.LINEAR_MIPMAP_LINEAR},xe={[nv]:r.NEVER,[dv]:r.ALWAYS,[Lp]:r.LESS,[av]:r.LEQUAL,[sv]:r.EQUAL,[uv]:r.GEQUAL,[lv]:r.GREATER,[cv]:r.NOTEQUAL};function te(Y,z,me){if(me?(r.texParameteri(Y,r.TEXTURE_WRAP_S,ce[z.wrapS]),r.texParameteri(Y,r.TEXTURE_WRAP_T,ce[z.wrapT]),(Y===r.TEXTURE_3D||Y===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Y,r.TEXTURE_WRAP_R,ce[z.wrapR]),r.texParameteri(Y,r.TEXTURE_MAG_FILTER,ve[z.magFilter]),r.texParameteri(Y,r.TEXTURE_MIN_FILTER,ve[z.minFilter])):(r.texParameteri(Y,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(Y,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(Y===r.TEXTURE_3D||Y===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Y,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),(z.wrapS!==oo||z.wrapT!==oo)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(Y,r.TEXTURE_MAG_FILTER,C(z.magFilter)),r.texParameteri(Y,r.TEXTURE_MIN_FILTER,C(z.minFilter)),z.minFilter!==Nr&&z.minFilter!==oi&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),z.compareFunction&&(r.texParameteri(Y,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(Y,r.TEXTURE_COMPARE_FUNC,xe[z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Ie=e.get("EXT_texture_filter_anisotropic");if(z.magFilter===Nr||z.minFilter!==Ea&&z.minFilter!==Tn||z.type===Di&&e.has("OES_texture_float_linear")===!1||a===!1&&z.type===no&&e.has("OES_texture_half_float_linear")===!1)return;(z.anisotropy>1||i.get(z).__currentAnisotropy)&&(r.texParameterf(Y,Ie.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(z.anisotropy,o.getMaxAnisotropy())),i.get(z).__currentAnisotropy=z.anisotropy)}}function Z(Y,z){let me=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,z.addEventListener("dispose",B));const Ie=z.source;let Ue=v.get(Ie);Ue===void 0&&(Ue={},v.set(Ie,Ue));const Re=O(z);if(Re!==Y.__cacheKey){Ue[Re]===void 0&&(Ue[Re]={texture:r.createTexture(),usedTimes:0},s.memory.textures++,me=!0),Ue[Re].usedTimes++;const $e=Ue[Y.__cacheKey];$e!==void 0&&(Ue[Y.__cacheKey].usedTimes--,$e.usedTimes===0&&P(z)),Y.__cacheKey=Re,Y.__webglTexture=Ue[Re].texture}return me}function de(Y,z,me){let Ie=r.TEXTURE_2D;(z.isDataArrayTexture||z.isCompressedArrayTexture)&&(Ie=r.TEXTURE_2D_ARRAY),z.isData3DTexture&&(Ie=r.TEXTURE_3D);const Ue=Z(Y,z),Re=z.source;t.bindTexture(Ie,Y.__webglTexture,r.TEXTURE0+me);const $e=i.get(Re);if(Re.version!==$e.__version||Ue===!0){t.activeTexture(r.TEXTURE0+me);const Ve=Ur.getPrimaries(Ur.workingColorSpace),ye=z.colorSpace===so?null:Ur.getPrimaries(z.colorSpace),q=z.colorSpace===so||Ve===ye?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,z.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,z.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,q);const oe=S(z)&&_(z.image)===!1;let fe=x(z.image,oe,!1,u);fe=je(z,fe);const ie=_(fe)||a,De=n.convert(z.format,z.colorSpace);let et=n.convert(z.type),ht=T(z.internalFormat,De,et,z.colorSpace,z.isVideoTexture);te(Ie,z,ie);let be;const mt=z.mipmaps,at=a&&z.isVideoTexture!==!0,xt=$e.__version===void 0||Ue===!0,he=E(z,fe,ie);if(z.isDepthTexture)ht=r.DEPTH_COMPONENT,a?z.type===Di?ht=r.DEPTH_COMPONENT32F:z.type===Cn?ht=r.DEPTH_COMPONENT24:z.type===Xn?ht=r.DEPTH24_STENCIL8:ht=r.DEPTH_COMPONENT16:z.type===Di&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),z.format===Do&&ht===r.DEPTH_COMPONENT&&z.type!==qu&&z.type!==Cn&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),z.type=Cn,et=n.convert(z.type)),z.format===Nn&&ht===r.DEPTH_COMPONENT&&(ht=r.DEPTH_STENCIL,z.type!==Xn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),z.type=Xn,et=n.convert(z.type))),xt&&(at?t.texStorage2D(r.TEXTURE_2D,1,ht,fe.width,fe.height):t.texImage2D(r.TEXTURE_2D,0,ht,fe.width,fe.height,0,De,et,null));else if(z.isDataTexture)if(mt.length>0&&ie){at&&xt&&t.texStorage2D(r.TEXTURE_2D,he,ht,mt[0].width,mt[0].height);for(let Ee=0,pe=mt.length;Ee<pe;Ee++)be=mt[Ee],at?t.texSubImage2D(r.TEXTURE_2D,Ee,0,0,be.width,be.height,De,et,be.data):t.texImage2D(r.TEXTURE_2D,Ee,ht,be.width,be.height,0,De,et,be.data);z.generateMipmaps=!1}else at?(xt&&t.texStorage2D(r.TEXTURE_2D,he,ht,fe.width,fe.height),t.texSubImage2D(r.TEXTURE_2D,0,0,0,fe.width,fe.height,De,et,fe.data)):t.texImage2D(r.TEXTURE_2D,0,ht,fe.width,fe.height,0,De,et,fe.data);else if(z.isCompressedTexture)if(z.isCompressedArrayTexture){at&&xt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,he,ht,mt[0].width,mt[0].height,fe.depth);for(let Ee=0,pe=mt.length;Ee<pe;Ee++)be=mt[Ee],z.format!==Po?De!==null?at?t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ee,0,0,0,be.width,be.height,fe.depth,De,be.data,0,0):t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Ee,ht,be.width,be.height,fe.depth,0,be.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):at?t.texSubImage3D(r.TEXTURE_2D_ARRAY,Ee,0,0,0,be.width,be.height,fe.depth,De,et,be.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Ee,ht,be.width,be.height,fe.depth,0,De,et,be.data)}else{at&&xt&&t.texStorage2D(r.TEXTURE_2D,he,ht,mt[0].width,mt[0].height);for(let Ee=0,pe=mt.length;Ee<pe;Ee++)be=mt[Ee],z.format!==Po?De!==null?at?t.compressedTexSubImage2D(r.TEXTURE_2D,Ee,0,0,be.width,be.height,De,be.data):t.compressedTexImage2D(r.TEXTURE_2D,Ee,ht,be.width,be.height,0,be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):at?t.texSubImage2D(r.TEXTURE_2D,Ee,0,0,be.width,be.height,De,et,be.data):t.texImage2D(r.TEXTURE_2D,Ee,ht,be.width,be.height,0,De,et,be.data)}else if(z.isDataArrayTexture)at?(xt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,he,ht,fe.width,fe.height,fe.depth),t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,fe.width,fe.height,fe.depth,De,et,fe.data)):t.texImage3D(r.TEXTURE_2D_ARRAY,0,ht,fe.width,fe.height,fe.depth,0,De,et,fe.data);else if(z.isData3DTexture)at?(xt&&t.texStorage3D(r.TEXTURE_3D,he,ht,fe.width,fe.height,fe.depth),t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,fe.width,fe.height,fe.depth,De,et,fe.data)):t.texImage3D(r.TEXTURE_3D,0,ht,fe.width,fe.height,fe.depth,0,De,et,fe.data);else if(z.isFramebufferTexture){if(xt)if(at)t.texStorage2D(r.TEXTURE_2D,he,ht,fe.width,fe.height);else{let Ee=fe.width,pe=fe.height;for(let Be=0;Be<he;Be++)t.texImage2D(r.TEXTURE_2D,Be,ht,Ee,pe,0,De,et,null),Ee>>=1,pe>>=1}}else if(mt.length>0&&ie){at&&xt&&t.texStorage2D(r.TEXTURE_2D,he,ht,mt[0].width,mt[0].height);for(let Ee=0,pe=mt.length;Ee<pe;Ee++)be=mt[Ee],at?t.texSubImage2D(r.TEXTURE_2D,Ee,0,0,De,et,be):t.texImage2D(r.TEXTURE_2D,Ee,ht,De,et,be);z.generateMipmaps=!1}else at?(xt&&t.texStorage2D(r.TEXTURE_2D,he,ht,fe.width,fe.height),t.texSubImage2D(r.TEXTURE_2D,0,0,0,De,et,fe)):t.texImage2D(r.TEXTURE_2D,0,ht,De,et,fe);w(z,ie)&&M(Ie),$e.__version=Re.version,z.onUpdate&&z.onUpdate(z)}Y.__version=z.version}function Ce(Y,z,me){if(z.image.length!==6)return;const Ie=Z(Y,z),Ue=z.source;t.bindTexture(r.TEXTURE_CUBE_MAP,Y.__webglTexture,r.TEXTURE0+me);const Re=i.get(Ue);if(Ue.version!==Re.__version||Ie===!0){t.activeTexture(r.TEXTURE0+me);const $e=Ur.getPrimaries(Ur.workingColorSpace),Ve=z.colorSpace===so?null:Ur.getPrimaries(z.colorSpace),ye=z.colorSpace===so||$e===Ve?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,z.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,z.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,ye);const q=z.isCompressedTexture||z.image[0].isCompressedTexture,oe=z.image[0]&&z.image[0].isDataTexture,fe=[];for(let Ee=0;Ee<6;Ee++)!q&&!oe?fe[Ee]=x(z.image[Ee],!1,!0,c):fe[Ee]=oe?z.image[Ee].image:z.image[Ee],fe[Ee]=je(z,fe[Ee]);const ie=fe[0],De=_(ie)||a,et=n.convert(z.format,z.colorSpace),ht=n.convert(z.type),be=T(z.internalFormat,et,ht,z.colorSpace),mt=a&&z.isVideoTexture!==!0,at=Re.__version===void 0||Ie===!0;let xt=E(z,ie,De);te(r.TEXTURE_CUBE_MAP,z,De);let he;if(q){mt&&at&&t.texStorage2D(r.TEXTURE_CUBE_MAP,xt,be,ie.width,ie.height);for(let Ee=0;Ee<6;Ee++){he=fe[Ee].mipmaps;for(let pe=0;pe<he.length;pe++){const Be=he[pe];z.format!==Po?et!==null?mt?t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,pe,0,0,Be.width,Be.height,et,Be.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,pe,be,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):mt?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,pe,0,0,Be.width,Be.height,et,ht,Be.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,pe,be,Be.width,Be.height,0,et,ht,Be.data)}}}else{he=z.mipmaps,mt&&at&&(he.length>0&&xt++,t.texStorage2D(r.TEXTURE_CUBE_MAP,xt,be,fe[0].width,fe[0].height));for(let Ee=0;Ee<6;Ee++)if(oe){mt?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,0,0,fe[Ee].width,fe[Ee].height,et,ht,fe[Ee].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,be,fe[Ee].width,fe[Ee].height,0,et,ht,fe[Ee].data);for(let pe=0;pe<he.length;pe++){const Be=he[pe].image[Ee].image;mt?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,pe+1,0,0,Be.width,Be.height,et,ht,Be.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,pe+1,be,Be.width,Be.height,0,et,ht,Be.data)}}else{mt?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,0,0,et,ht,fe[Ee]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,be,et,ht,fe[Ee]);for(let pe=0;pe<he.length;pe++){const Be=he[pe];mt?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,pe+1,0,0,et,ht,Be.image[Ee]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,pe+1,be,et,ht,Be.image[Ee])}}}w(z,De)&&M(r.TEXTURE_CUBE_MAP),Re.__version=Ue.version,z.onUpdate&&z.onUpdate(z)}Y.__version=z.version}function ue(Y,z,me,Ie,Ue,Re){const $e=n.convert(me.format,me.colorSpace),Ve=n.convert(me.type),ye=T(me.internalFormat,$e,Ve,me.colorSpace);if(!i.get(z).__hasExternalTextures){const q=Math.max(1,z.width>>Re),oe=Math.max(1,z.height>>Re);Ue===r.TEXTURE_3D||Ue===r.TEXTURE_2D_ARRAY?t.texImage3D(Ue,Re,ye,q,oe,z.depth,0,$e,Ve,null):t.texImage2D(Ue,Re,ye,q,oe,0,$e,Ve,null)}t.bindFramebuffer(r.FRAMEBUFFER,Y),Me(z)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Ie,Ue,i.get(me).__webglTexture,0,Ne(z)):(Ue===r.TEXTURE_2D||Ue>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Ue<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Ie,Ue,i.get(me).__webglTexture,Re),t.bindFramebuffer(r.FRAMEBUFFER,null)}function D(Y,z,me){if(r.bindRenderbuffer(r.RENDERBUFFER,Y),z.depthBuffer&&!z.stencilBuffer){let Ie=a===!0?r.DEPTH_COMPONENT24:r.DEPTH_COMPONENT16;if(me||Me(z)){const Ue=z.depthTexture;Ue&&Ue.isDepthTexture&&(Ue.type===Di?Ie=r.DEPTH_COMPONENT32F:Ue.type===Cn&&(Ie=r.DEPTH_COMPONENT24));const Re=Ne(z);Me(z)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Re,Ie,z.width,z.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,Re,Ie,z.width,z.height)}else r.renderbufferStorage(r.RENDERBUFFER,Ie,z.width,z.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,Y)}else if(z.depthBuffer&&z.stencilBuffer){const Ie=Ne(z);me&&Me(z)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Ie,r.DEPTH24_STENCIL8,z.width,z.height):Me(z)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ie,r.DEPTH24_STENCIL8,z.width,z.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,z.width,z.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,Y)}else{const Ie=z.isWebGLMultipleRenderTargets===!0?z.texture:[z.texture];for(let Ue=0;Ue<Ie.length;Ue++){const Re=Ie[Ue],$e=n.convert(Re.format,Re.colorSpace),Ve=n.convert(Re.type),ye=T(Re.internalFormat,$e,Ve,Re.colorSpace),q=Ne(z);me&&Me(z)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,q,ye,z.width,z.height):Me(z)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,q,ye,z.width,z.height):r.renderbufferStorage(r.RENDERBUFFER,ye,z.width,z.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function K(Y,z){if(z&&z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,Y),!(z.depthTexture&&z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(z.depthTexture).__webglTexture||z.depthTexture.image.width!==z.width||z.depthTexture.image.height!==z.height)&&(z.depthTexture.image.width=z.width,z.depthTexture.image.height=z.height,z.depthTexture.needsUpdate=!0),H(z.depthTexture,0);const me=i.get(z.depthTexture).__webglTexture,Ie=Ne(z);if(z.depthTexture.format===Do)Me(z)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,me,0,Ie):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,me,0);else if(z.depthTexture.format===Nn)Me(z)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,me,0,Ie):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,me,0);else throw new Error("Unknown depthTexture format")}function re(Y){const z=i.get(Y),me=Y.isWebGLCubeRenderTarget===!0;if(Y.depthTexture&&!z.__autoAllocateDepthBuffer){if(me)throw new Error("target.depthTexture not supported in Cube render targets");K(z.__webglFramebuffer,Y)}else if(me){z.__webglDepthbuffer=[];for(let Ie=0;Ie<6;Ie++)t.bindFramebuffer(r.FRAMEBUFFER,z.__webglFramebuffer[Ie]),z.__webglDepthbuffer[Ie]=r.createRenderbuffer(),D(z.__webglDepthbuffer[Ie],Y,!1)}else t.bindFramebuffer(r.FRAMEBUFFER,z.__webglFramebuffer),z.__webglDepthbuffer=r.createRenderbuffer(),D(z.__webglDepthbuffer,Y,!1);t.bindFramebuffer(r.FRAMEBUFFER,null)}function ae(Y,z,me){const Ie=i.get(Y);z!==void 0&&ue(Ie.__webglFramebuffer,Y,Y.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),me!==void 0&&re(Y)}function le(Y){const z=Y.texture,me=i.get(Y),Ie=i.get(z);Y.addEventListener("dispose",I),Y.isWebGLMultipleRenderTargets!==!0&&(Ie.__webglTexture===void 0&&(Ie.__webglTexture=r.createTexture()),Ie.__version=z.version,s.memory.textures++);const Ue=Y.isWebGLCubeRenderTarget===!0,Re=Y.isWebGLMultipleRenderTargets===!0,$e=_(Y)||a;if(Ue){me.__webglFramebuffer=[];for(let Ve=0;Ve<6;Ve++)if(a&&z.mipmaps&&z.mipmaps.length>0){me.__webglFramebuffer[Ve]=[];for(let ye=0;ye<z.mipmaps.length;ye++)me.__webglFramebuffer[Ve][ye]=r.createFramebuffer()}else me.__webglFramebuffer[Ve]=r.createFramebuffer()}else{if(a&&z.mipmaps&&z.mipmaps.length>0){me.__webglFramebuffer=[];for(let Ve=0;Ve<z.mipmaps.length;Ve++)me.__webglFramebuffer[Ve]=r.createFramebuffer()}else me.__webglFramebuffer=r.createFramebuffer();if(Re)if(o.drawBuffers){const Ve=Y.texture;for(let ye=0,q=Ve.length;ye<q;ye++){const oe=i.get(Ve[ye]);oe.__webglTexture===void 0&&(oe.__webglTexture=r.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Y.samples>0&&Me(Y)===!1){const Ve=Re?z:[z];me.__webglMultisampledFramebuffer=r.createFramebuffer(),me.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,me.__webglMultisampledFramebuffer);for(let ye=0;ye<Ve.length;ye++){const q=Ve[ye];me.__webglColorRenderbuffer[ye]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,me.__webglColorRenderbuffer[ye]);const oe=n.convert(q.format,q.colorSpace),fe=n.convert(q.type),ie=T(q.internalFormat,oe,fe,q.colorSpace,Y.isXRRenderTarget===!0),De=Ne(Y);r.renderbufferStorageMultisample(r.RENDERBUFFER,De,ie,Y.width,Y.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+ye,r.RENDERBUFFER,me.__webglColorRenderbuffer[ye])}r.bindRenderbuffer(r.RENDERBUFFER,null),Y.depthBuffer&&(me.__webglDepthRenderbuffer=r.createRenderbuffer(),D(me.__webglDepthRenderbuffer,Y,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Ue){t.bindTexture(r.TEXTURE_CUBE_MAP,Ie.__webglTexture),te(r.TEXTURE_CUBE_MAP,z,$e);for(let Ve=0;Ve<6;Ve++)if(a&&z.mipmaps&&z.mipmaps.length>0)for(let ye=0;ye<z.mipmaps.length;ye++)ue(me.__webglFramebuffer[Ve][ye],Y,z,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,ye);else ue(me.__webglFramebuffer[Ve],Y,z,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0);w(z,$e)&&M(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Re){const Ve=Y.texture;for(let ye=0,q=Ve.length;ye<q;ye++){const oe=Ve[ye],fe=i.get(oe);t.bindTexture(r.TEXTURE_2D,fe.__webglTexture),te(r.TEXTURE_2D,oe,$e),ue(me.__webglFramebuffer,Y,oe,r.COLOR_ATTACHMENT0+ye,r.TEXTURE_2D,0),w(oe,$e)&&M(r.TEXTURE_2D)}t.unbindTexture()}else{let Ve=r.TEXTURE_2D;if((Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(a?Ve=Y.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Ve,Ie.__webglTexture),te(Ve,z,$e),a&&z.mipmaps&&z.mipmaps.length>0)for(let ye=0;ye<z.mipmaps.length;ye++)ue(me.__webglFramebuffer[ye],Y,z,r.COLOR_ATTACHMENT0,Ve,ye);else ue(me.__webglFramebuffer,Y,z,r.COLOR_ATTACHMENT0,Ve,0);w(z,$e)&&M(Ve),t.unbindTexture()}Y.depthBuffer&&re(Y)}function Se(Y){const z=_(Y)||a,me=Y.isWebGLMultipleRenderTargets===!0?Y.texture:[Y.texture];for(let Ie=0,Ue=me.length;Ie<Ue;Ie++){const Re=me[Ie];if(w(Re,z)){const $e=Y.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,Ve=i.get(Re).__webglTexture;t.bindTexture($e,Ve),M($e),t.unbindTexture()}}}function Ae(Y){if(a&&Y.samples>0&&Me(Y)===!1){const z=Y.isWebGLMultipleRenderTargets?Y.texture:[Y.texture],me=Y.width,Ie=Y.height;let Ue=r.COLOR_BUFFER_BIT;const Re=[],$e=Y.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Ve=i.get(Y),ye=Y.isWebGLMultipleRenderTargets===!0;if(ye)for(let q=0;q<z.length;q++)t.bindFramebuffer(r.FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+q,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,Ve.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+q,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Ve.__webglFramebuffer);for(let q=0;q<z.length;q++){Re.push(r.COLOR_ATTACHMENT0+q),Y.depthBuffer&&Re.push($e);const oe=Ve.__ignoreDepthValues!==void 0?Ve.__ignoreDepthValues:!1;if(oe===!1&&(Y.depthBuffer&&(Ue|=r.DEPTH_BUFFER_BIT),Y.stencilBuffer&&(Ue|=r.STENCIL_BUFFER_BIT)),ye&&r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Ve.__webglColorRenderbuffer[q]),oe===!0&&(r.invalidateFramebuffer(r.READ_FRAMEBUFFER,[$e]),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[$e])),ye){const fe=i.get(z[q]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,fe,0)}r.blitFramebuffer(0,0,me,Ie,0,0,me,Ie,Ue,r.NEAREST),p&&r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Re)}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),ye)for(let q=0;q<z.length;q++){t.bindFramebuffer(r.FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+q,r.RENDERBUFFER,Ve.__webglColorRenderbuffer[q]);const oe=i.get(z[q]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,Ve.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+q,r.TEXTURE_2D,oe,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Ve.__webglMultisampledFramebuffer)}}function Ne(Y){return Math.min(d,Y.samples)}function Me(Y){const z=i.get(Y);return a&&Y.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&z.__useRenderToTexture!==!1}function Le(Y){const z=s.render.frame;m.get(Y)!==z&&(m.set(Y,z),Y.update())}function je(Y,z){const me=Y.colorSpace,Ie=Y.format,Ue=Y.type;return Y.isCompressedTexture===!0||Y.isVideoTexture===!0||Y.format===kp||me!==en&&me!==so&&(Ur.getTransfer(me)===Jr?a===!1?e.has("EXT_sRGB")===!0&&Ie===Po?(Y.format=kp,Y.minFilter=oi,Y.generateMipmaps=!1):z=fC.sRGBToLinear(z):(Ie!==Po||Ue!==En)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",me)),z}this.allocateTextureUnit=F,this.resetTextureUnits=R,this.setTexture2D=H,this.setTexture2DArray=$,this.setTexture3D=j,this.setTextureCube=J,this.rebindTextures=ae,this.setupRenderTarget=le,this.updateRenderTargetMipmap=Se,this.updateMultisampleRenderTarget=Ae,this.setupDepthRenderbuffer=re,this.setupFrameBufferTexture=ue,this.useMultisampledRTT=Me}function d6(r,e,t){const i=t.isWebGL2;function o(n,s=so){let a;const l=Ur.getTransfer(s);if(n===En)return r.UNSIGNED_BYTE;if(n===jg)return r.UNSIGNED_SHORT_4_4_4_4;if(n===$g)return r.UNSIGNED_SHORT_5_5_5_1;if(n===cx)return r.BYTE;if(n===ux)return r.SHORT;if(n===qu)return r.UNSIGNED_SHORT;if(n===Hg)return r.INT;if(n===Cn)return r.UNSIGNED_INT;if(n===Di)return r.FLOAT;if(n===no)return i?r.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(n===Wg)return r.ALPHA;if(n===Po)return r.RGBA;if(n===qg)return r.LUMINANCE;if(n===Xg)return r.LUMINANCE_ALPHA;if(n===Do)return r.DEPTH_COMPONENT;if(n===Nn)return r.DEPTH_STENCIL;if(n===kp)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(n===bp)return r.RED;if(n===xp)return r.RED_INTEGER;if(n===_p)return r.RG;if(n===Kg)return r.RG_INTEGER;if(n===Yg)return r.RGBA_INTEGER;if(n===wc||n===fl||n===ml||n===gl)if(l===Jr)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(n===wc)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===fl)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===ml)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===gl)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(n===wc)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===fl)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===ml)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===gl)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===wp||n===Sp||n===Mp||n===Tp)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(n===wp)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===Sp)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Mp)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Tp)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===dx)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===Xu||n===Ku)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(n===Xu)return l===Jr?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(n===Ku)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===Yu||n===Ju||n===Zu||n===Qu||n===ed||n===td||n===rd||n===id||n===od||n===nd||n===sd||n===ad||n===ld||n===cd)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(n===Yu)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Ju)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Zu)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Qu)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===ed)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===td)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===rd)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===id)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===od)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===nd)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===sd)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===ad)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===ld)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===cd)return l===Jr?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===Sc||n===hx||n===px)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(n===Sc)return l===Jr?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===hx)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===px)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===fx||n===Ep||n===Cp||n===Np)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(n===Sc)return a.COMPRESSED_RED_RGTC1_EXT;if(n===Ep)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===Cp)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Np)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Xn?i?r.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):r[n]!==void 0?r[n]:null}return{convert:o}}class UC extends li{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class rf extends mr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const kLe={type:"move"};class zC{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new rf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new rf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new rf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let o=null,n=null,s=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){s=!0;for(const g of e.hand.values()){const v=t.getJointPose(g,i),y=this._getHandJoint(c,g);v!==null&&(y.matrix.fromArray(v.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=v.radius),y.visible=v!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),p=.02,m=.005;c.inputState.pinching&&h>p+m?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=p-m&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(n=t.getPose(e.gripSpace,i),n!==null&&(l.matrix.fromArray(n.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,n.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(n.linearVelocity)):l.hasLinearVelocity=!1,n.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(n.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(o=t.getPose(e.targetRaySpace,i),o===null&&n!==null&&(o=n),o!==null&&(a.matrix.fromArray(o.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,o.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(o.linearVelocity)):a.hasLinearVelocity=!1,o.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(o.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(kLe)))}return a!==null&&(a.visible=o!==null),l!==null&&(l.visible=n!==null),c!==null&&(c.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new rf;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Sd extends mi{constructor(e,t,i,o,n,s,a,l,c,u){if(u=u!==void 0?u:Do,u!==Do&&u!==Nn)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Do&&(i=Cn),i===void 0&&u===Nn&&(i=Xn),super(null,o,n,s,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Nr,this.minFilter=l!==void 0?l:Nr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class ILe extends ao{constructor(e,t){super();const i=this;let o=null,n=1,s=null,a="local-floor",l=1,c=null,u=null,d=null,h=null,p=null,m=null;const g=t.getContextAttributes();let v=null,y=null;const b=[],x=[],_=new li;_.layers.enable(1),_.viewport=new Kt;const S=new li;S.layers.enable(2),S.viewport=new Kt;const w=[_,S],M=new UC;M.layers.enable(1),M.layers.enable(2);let T=null,E=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function($){let j=b[$];return j===void 0&&(j=new zC,b[$]=j),j.getTargetRaySpace()},this.getControllerGrip=function($){let j=b[$];return j===void 0&&(j=new zC,b[$]=j),j.getGripSpace()},this.getHand=function($){let j=b[$];return j===void 0&&(j=new zC,b[$]=j),j.getHandSpace()};function C($){const j=x.indexOf($.inputSource);if(j===-1)return;const J=b[j];J!==void 0&&(J.update($.inputSource,$.frame,c||s),J.dispatchEvent({type:$.type,data:$.inputSource}))}function B(){o.removeEventListener("select",C),o.removeEventListener("selectstart",C),o.removeEventListener("selectend",C),o.removeEventListener("squeeze",C),o.removeEventListener("squeezestart",C),o.removeEventListener("squeezeend",C),o.removeEventListener("end",B),o.removeEventListener("inputsourceschange",I);for(let $=0;$<b.length;$++){const j=x[$];j!==null&&(x[$]=null,b[$].disconnect(j))}T=null,E=null,e.setRenderTarget(v),p=null,h=null,d=null,o=null,y=null,H.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function($){n=$,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($){a=$,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function($){c=$},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return d},this.getFrame=function(){return m},this.getSession=function(){return o},this.setSession=async function($){if(o=$,o!==null){if(v=e.getRenderTarget(),o.addEventListener("select",C),o.addEventListener("selectstart",C),o.addEventListener("selectend",C),o.addEventListener("squeeze",C),o.addEventListener("squeezestart",C),o.addEventListener("squeezeend",C),o.addEventListener("end",B),o.addEventListener("inputsourceschange",I),g.xrCompatible!==!0&&await t.makeXRCompatible(),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const j={antialias:o.renderState.layers===void 0?g.antialias:!0,alpha:!0,depth:g.depth,stencil:g.stencil,framebufferScaleFactor:n};p=new XRWebGLLayer(o,t,j),o.updateRenderState({baseLayer:p}),y=new Ki(p.framebufferWidth,p.framebufferHeight,{format:Po,type:En,colorSpace:e.outputColorSpace,stencilBuffer:g.stencil})}else{let j=null,J=null,ce=null;g.depth&&(ce=g.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,j=g.stencil?Nn:Do,J=g.stencil?Xn:Cn);const ve={colorFormat:t.RGBA8,depthFormat:ce,scaleFactor:n};d=new XRWebGLBinding(o,t),h=d.createProjectionLayer(ve),o.updateRenderState({layers:[h]}),y=new Ki(h.textureWidth,h.textureHeight,{format:Po,type:En,depthTexture:new Sd(h.textureWidth,h.textureHeight,J,void 0,void 0,void 0,void 0,void 0,void 0,j),stencilBuffer:g.stencil,colorSpace:e.outputColorSpace,samples:g.antialias?4:0});const xe=e.properties.get(y);xe.__ignoreDepthValues=h.ignoreDepthValues}y.isXRRenderTarget=!0,this.setFoveation(l),c=null,s=await o.requestReferenceSpace(a),H.setContext(o),H.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode};function I($){for(let j=0;j<$.removed.length;j++){const J=$.removed[j],ce=x.indexOf(J);ce>=0&&(x[ce]=null,b[ce].disconnect(J))}for(let j=0;j<$.added.length;j++){const J=$.added[j];let ce=x.indexOf(J);if(ce===-1){for(let xe=0;xe<b.length;xe++)if(xe>=x.length){x.push(J),ce=xe;break}else if(x[xe]===null){x[xe]=J,ce=xe;break}if(ce===-1)break}const ve=b[ce];ve&&ve.connect(J)}}const L=new Q,P=new Q;function U($,j,J){L.setFromMatrixPosition(j.matrixWorld),P.setFromMatrixPosition(J.matrixWorld);const ce=L.distanceTo(P),ve=j.projectionMatrix.elements,xe=J.projectionMatrix.elements,te=ve[14]/(ve[10]-1),Z=ve[14]/(ve[10]+1),de=(ve[9]+1)/ve[5],Ce=(ve[9]-1)/ve[5],ue=(ve[8]-1)/ve[0],D=(xe[8]+1)/xe[0],K=te*ue,re=te*D,ae=ce/(-ue+D),le=ae*-ue;j.matrixWorld.decompose($.position,$.quaternion,$.scale),$.translateX(le),$.translateZ(ae),$.matrixWorld.compose($.position,$.quaternion,$.scale),$.matrixWorldInverse.copy($.matrixWorld).invert();const Se=te+ae,Ae=Z+ae,Ne=K-le,Me=re+(ce-le),Le=de*Z/Ae*Se,je=Ce*Z/Ae*Se;$.projectionMatrix.makePerspective(Ne,Me,Le,je,Se,Ae),$.projectionMatrixInverse.copy($.projectionMatrix).invert()}function G($,j){j===null?$.matrixWorld.copy($.matrix):$.matrixWorld.multiplyMatrices(j.matrixWorld,$.matrix),$.matrixWorldInverse.copy($.matrixWorld).invert()}this.updateCamera=function($){if(o===null)return;M.near=S.near=_.near=$.near,M.far=S.far=_.far=$.far,(T!==M.near||E!==M.far)&&(o.updateRenderState({depthNear:M.near,depthFar:M.far}),T=M.near,E=M.far);const j=$.parent,J=M.cameras;G(M,j);for(let ce=0;ce<J.length;ce++)G(J[ce],j);J.length===2?U(M,_,S):M.projectionMatrix.copy(_.projectionMatrix),R($,M,j)};function R($,j,J){J===null?$.matrix.copy(j.matrixWorld):($.matrix.copy(J.matrixWorld),$.matrix.invert(),$.matrix.multiply(j.matrixWorld)),$.matrix.decompose($.position,$.quaternion,$.scale),$.updateMatrixWorld(!0),$.projectionMatrix.copy(j.projectionMatrix),$.projectionMatrixInverse.copy(j.projectionMatrixInverse),$.isPerspectiveCamera&&($.fov=Ip*2*Math.atan(1/$.projectionMatrix.elements[5]),$.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(h===null&&p===null))return l},this.setFoveation=function($){l=$,h!==null&&(h.fixedFoveation=$),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=$)};let F=null;function O($,j){if(u=j.getViewerPose(c||s),m=j,u!==null){const J=u.views;p!==null&&(e.setRenderTargetFramebuffer(y,p.framebuffer),e.setRenderTarget(y));let ce=!1;J.length!==M.cameras.length&&(M.cameras.length=0,ce=!0);for(let ve=0;ve<J.length;ve++){const xe=J[ve];let te=null;if(p!==null)te=p.getViewport(xe);else{const de=d.getViewSubImage(h,xe);te=de.viewport,ve===0&&(e.setRenderTargetTextures(y,de.colorTexture,h.ignoreDepthValues?void 0:de.depthStencilTexture),e.setRenderTarget(y))}let Z=w[ve];Z===void 0&&(Z=new li,Z.layers.enable(ve),Z.viewport=new Kt,w[ve]=Z),Z.matrix.fromArray(xe.transform.matrix),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.projectionMatrix.fromArray(xe.projectionMatrix),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert(),Z.viewport.set(te.x,te.y,te.width,te.height),ve===0&&(M.matrix.copy(Z.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),ce===!0&&M.cameras.push(Z)}}for(let J=0;J<b.length;J++){const ce=x[J],ve=b[J];ce!==null&&ve!==void 0&&ve.update(ce,j,c||s)}F&&F($,j),j.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:j}),m=null}const H=new UV;H.setAnimationLoop(O),this.setAnimationLoop=function($){F=$},this.dispose=function(){}}}function PLe(r,e){function t(v,y){v.matrixAutoUpdate===!0&&v.updateMatrix(),y.value.copy(v.matrix)}function i(v,y){y.color.getRGB(v.fogColor.value,FV(r)),y.isFog?(v.fogNear.value=y.near,v.fogFar.value=y.far):y.isFogExp2&&(v.fogDensity.value=y.density)}function o(v,y,b,x,_){y.isMeshBasicMaterial||y.isMeshLambertMaterial?n(v,y):y.isMeshToonMaterial?(n(v,y),d(v,y)):y.isMeshPhongMaterial?(n(v,y),u(v,y)):y.isMeshStandardMaterial?(n(v,y),h(v,y),y.isMeshPhysicalMaterial&&p(v,y,_)):y.isMeshMatcapMaterial?(n(v,y),m(v,y)):y.isMeshDepthMaterial?n(v,y):y.isMeshDistanceMaterial?(n(v,y),g(v,y)):y.isMeshNormalMaterial?n(v,y):y.isLineBasicMaterial?(s(v,y),y.isLineDashedMaterial&&a(v,y)):y.isPointsMaterial?l(v,y,b,x):y.isSpriteMaterial?c(v,y):y.isShadowMaterial?(v.color.value.copy(y.color),v.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function n(v,y){v.opacity.value=y.opacity,y.color&&v.diffuse.value.copy(y.color),y.emissive&&v.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(v.map.value=y.map,t(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,t(y.alphaMap,v.alphaMapTransform)),y.bumpMap&&(v.bumpMap.value=y.bumpMap,t(y.bumpMap,v.bumpMapTransform),v.bumpScale.value=y.bumpScale,y.side===Ni&&(v.bumpScale.value*=-1)),y.normalMap&&(v.normalMap.value=y.normalMap,t(y.normalMap,v.normalMapTransform),v.normalScale.value.copy(y.normalScale),y.side===Ni&&v.normalScale.value.negate()),y.displacementMap&&(v.displacementMap.value=y.displacementMap,t(y.displacementMap,v.displacementMapTransform),v.displacementScale.value=y.displacementScale,v.displacementBias.value=y.displacementBias),y.emissiveMap&&(v.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,v.emissiveMapTransform)),y.specularMap&&(v.specularMap.value=y.specularMap,t(y.specularMap,v.specularMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest);const b=e.get(y).envMap;if(b&&(v.envMap.value=b,v.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,v.reflectivity.value=y.reflectivity,v.ior.value=y.ior,v.refractionRatio.value=y.refractionRatio),y.lightMap){v.lightMap.value=y.lightMap;const x=r._useLegacyLights===!0?Math.PI:1;v.lightMapIntensity.value=y.lightMapIntensity*x,t(y.lightMap,v.lightMapTransform)}y.aoMap&&(v.aoMap.value=y.aoMap,v.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,v.aoMapTransform))}function s(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,y.map&&(v.map.value=y.map,t(y.map,v.mapTransform))}function a(v,y){v.dashSize.value=y.dashSize,v.totalSize.value=y.dashSize+y.gapSize,v.scale.value=y.scale}function l(v,y,b,x){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.size.value=y.size*b,v.scale.value=x*.5,y.map&&(v.map.value=y.map,t(y.map,v.uvTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,t(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}function c(v,y){v.diffuse.value.copy(y.color),v.opacity.value=y.opacity,v.rotation.value=y.rotation,y.map&&(v.map.value=y.map,t(y.map,v.mapTransform)),y.alphaMap&&(v.alphaMap.value=y.alphaMap,t(y.alphaMap,v.alphaMapTransform)),y.alphaTest>0&&(v.alphaTest.value=y.alphaTest)}function u(v,y){v.specular.value.copy(y.specular),v.shininess.value=Math.max(y.shininess,1e-4)}function d(v,y){y.gradientMap&&(v.gradientMap.value=y.gradientMap)}function h(v,y){v.metalness.value=y.metalness,y.metalnessMap&&(v.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,v.metalnessMapTransform)),v.roughness.value=y.roughness,y.roughnessMap&&(v.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,v.roughnessMapTransform)),e.get(y).envMap&&(v.envMapIntensity.value=y.envMapIntensity)}function p(v,y,b){v.ior.value=y.ior,y.sheen>0&&(v.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),v.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(v.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,v.sheenColorMapTransform)),y.sheenRoughnessMap&&(v.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,v.sheenRoughnessMapTransform))),y.clearcoat>0&&(v.clearcoat.value=y.clearcoat,v.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(v.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,v.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,v.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(v.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,v.clearcoatNormalMapTransform),v.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Ni&&v.clearcoatNormalScale.value.negate())),y.iridescence>0&&(v.iridescence.value=y.iridescence,v.iridescenceIOR.value=y.iridescenceIOR,v.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],v.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(v.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,v.iridescenceMapTransform)),y.iridescenceThicknessMap&&(v.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,v.iridescenceThicknessMapTransform))),y.transmission>0&&(v.transmission.value=y.transmission,v.transmissionSamplerMap.value=b.texture,v.transmissionSamplerSize.value.set(b.width,b.height),y.transmissionMap&&(v.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,v.transmissionMapTransform)),v.thickness.value=y.thickness,y.thicknessMap&&(v.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,v.thicknessMapTransform)),v.attenuationDistance.value=y.attenuationDistance,v.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(v.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(v.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,v.anisotropyMapTransform))),v.specularIntensity.value=y.specularIntensity,v.specularColor.value.copy(y.specularColor),y.specularColorMap&&(v.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,v.specularColorMapTransform)),y.specularIntensityMap&&(v.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,v.specularIntensityMapTransform))}function m(v,y){y.matcap&&(v.matcap.value=y.matcap)}function g(v,y){const b=e.get(y).light;v.referencePosition.value.setFromMatrixPosition(b.matrixWorld),v.nearDistance.value=b.shadow.camera.near,v.farDistance.value=b.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:o}}function DLe(r,e,t,i){let o={},n={},s=[];const a=t.isWebGL2?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(b,x){const _=x.program;i.uniformBlockBinding(b,_)}function c(b,x){let _=o[b.id];_===void 0&&(m(b),_=u(b),o[b.id]=_,b.addEventListener("dispose",v));const S=x.program;i.updateUBOMapping(b,S);const w=e.render.frame;n[b.id]!==w&&(h(b),n[b.id]=w)}function u(b){const x=d();b.__bindingPointIndex=x;const _=r.createBuffer(),S=b.__size,w=b.usage;return r.bindBuffer(r.UNIFORM_BUFFER,_),r.bufferData(r.UNIFORM_BUFFER,S,w),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,x,_),_}function d(){for(let b=0;b<a;b++)if(s.indexOf(b)===-1)return s.push(b),b;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(b){const x=o[b.id],_=b.uniforms,S=b.__cache;r.bindBuffer(r.UNIFORM_BUFFER,x);for(let w=0,M=_.length;w<M;w++){const T=_[w];if(p(T,w,S)===!0){const E=T.__offset,C=Array.isArray(T.value)?T.value:[T.value];let B=0;for(let I=0;I<C.length;I++){const L=C[I],P=g(L);typeof L=="number"?(T.__data[0]=L,r.bufferSubData(r.UNIFORM_BUFFER,E+B,T.__data)):L.isMatrix3?(T.__data[0]=L.elements[0],T.__data[1]=L.elements[1],T.__data[2]=L.elements[2],T.__data[3]=L.elements[0],T.__data[4]=L.elements[3],T.__data[5]=L.elements[4],T.__data[6]=L.elements[5],T.__data[7]=L.elements[0],T.__data[8]=L.elements[6],T.__data[9]=L.elements[7],T.__data[10]=L.elements[8],T.__data[11]=L.elements[0]):(L.toArray(T.__data,B),B+=P.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,E,T.__data)}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function p(b,x,_){const S=b.value;if(_[x]===void 0){if(typeof S=="number")_[x]=S;else{const w=Array.isArray(S)?S:[S],M=[];for(let T=0;T<w.length;T++)M.push(w[T].clone());_[x]=M}return!0}else if(typeof S=="number"){if(_[x]!==S)return _[x]=S,!0}else{const w=Array.isArray(_[x])?_[x]:[_[x]],M=Array.isArray(S)?S:[S];for(let T=0;T<w.length;T++){const E=w[T];if(E.equals(M[T])===!1)return E.copy(M[T]),!0}}return!1}function m(b){const x=b.uniforms;let _=0;const S=16;let w=0;for(let M=0,T=x.length;M<T;M++){const E=x[M],C={boundary:0,storage:0},B=Array.isArray(E.value)?E.value:[E.value];for(let I=0,L=B.length;I<L;I++){const P=B[I],U=g(P);C.boundary+=U.boundary,C.storage+=U.storage}if(E.__data=new Float32Array(C.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=_,M>0){w=_%S;const I=S-w;w!==0&&I-C.boundary<0&&(_+=S-w,E.__offset=_)}_+=C.storage}return w=_%S,w>0&&(_+=S-w),b.__size=_,b.__cache={},this}function g(b){const x={boundary:0,storage:0};return typeof b=="number"?(x.boundary=4,x.storage=4):b.isVector2?(x.boundary=8,x.storage=8):b.isVector3||b.isColor?(x.boundary=16,x.storage=12):b.isVector4?(x.boundary=16,x.storage=16):b.isMatrix3?(x.boundary=48,x.storage=48):b.isMatrix4?(x.boundary=64,x.storage=64):b.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",b),x}function v(b){const x=b.target;x.removeEventListener("dispose",v);const _=s.indexOf(x.__bindingPointIndex);s.splice(_,1),r.deleteBuffer(o[x.id]),delete o[x.id],delete n[x.id]}function y(){for(const b in o)r.deleteBuffer(o[b]);s=[],o={},n={}}return{bind:l,update:c,dispose:y}}class VC{constructor(e={}){const{canvas:t=hC(),context:i=null,depth:o=!0,stencil:n=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let h;i!==null?h=i.getContextAttributes().alpha:h=s;const p=new Uint32Array(4),m=new Int32Array(4);let g=null,v=null;const y=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Ft,this._useLegacyLights=!1,this.toneMapping=Mn,this.toneMappingExposure=1;const x=this;let _=!1,S=0,w=0,M=null,T=-1,E=null;const C=new Kt,B=new Kt;let I=null;const L=new bt(0);let P=0,U=t.width,G=t.height,R=1,F=null,O=null;const H=new Kt(0,0,U,G),$=new Kt(0,0,U,G);let j=!1;const J=new _v;let ce=!1,ve=!1,xe=null;const te=new Xt,Z=new We,de=new Q,Ce={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ue(){return M===null?R:1}let D=i;function K(ge,He){for(let rt=0;rt<ge.length;rt++){const Ke=ge[rt],tt=t.getContext(Ke,He);if(tt!==null)return tt}return null}try{const ge={alpha:!0,depth:o,stencil:n,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${mp}`),t.addEventListener("webglcontextlost",mt,!1),t.addEventListener("webglcontextrestored",at,!1),t.addEventListener("webglcontextcreationerror",xt,!1),D===null){const He=["webgl2","webgl","experimental-webgl"];if(x.isWebGL1Renderer===!0&&He.shift(),D=K(He,ge),D===null)throw K(He)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&D instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),D.getShaderPrecisionFormat===void 0&&(D.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ge){throw console.error("THREE.WebGLRenderer: "+ge.message),ge}let re,ae,le,Se,Ae,Ne,Me,Le,je,Y,z,me,Ie,Ue,Re,$e,Ve,ye,q,oe,fe,ie,De,et;function ht(){re=new ZAe(D),ae=new WAe(D,re,e),re.init(ae),ie=new d6(D,re,ae),le=new LLe(D,re,ae),Se=new tRe(D),Ae=new bLe,Ne=new OLe(D,re,le,Ae,ae,ie,Se),Me=new XAe(x),Le=new JAe(x),je=new dNe(D,ae),De=new jAe(D,re,je,ae),Y=new QAe(D,je,Se,De),z=new nRe(D,Y,je,Se),q=new oRe(D,ae,Ne),$e=new qAe(Ae),me=new yLe(x,Me,Le,re,ae,De,$e),Ie=new PLe(x,Ae),Ue=new _Le,Re=new CLe(re,ae),ye=new HAe(x,Me,Le,le,z,h,l),Ve=new RLe(x,z,ae),et=new DLe(D,Se,ae,le),oe=new $Ae(D,re,Se,ae),fe=new eRe(D,re,Se,ae),Se.programs=me.programs,x.capabilities=ae,x.extensions=re,x.properties=Ae,x.renderLists=Ue,x.shadowMap=Ve,x.state=le,x.info=Se}ht();const be=new ILe(x,D);this.xr=be,this.getContext=function(){return D},this.getContextAttributes=function(){return D.getContextAttributes()},this.forceContextLoss=function(){const ge=re.get("WEBGL_lose_context");ge&&ge.loseContext()},this.forceContextRestore=function(){const ge=re.get("WEBGL_lose_context");ge&&ge.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(ge){ge!==void 0&&(R=ge,this.setSize(U,G,!1))},this.getSize=function(ge){return ge.set(U,G)},this.setSize=function(ge,He,rt=!0){if(be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}U=ge,G=He,t.width=Math.floor(ge*R),t.height=Math.floor(He*R),rt===!0&&(t.style.width=ge+"px",t.style.height=He+"px"),this.setViewport(0,0,ge,He)},this.getDrawingBufferSize=function(ge){return ge.set(U*R,G*R).floor()},this.setDrawingBufferSize=function(ge,He,rt){U=ge,G=He,R=rt,t.width=Math.floor(ge*rt),t.height=Math.floor(He*rt),this.setViewport(0,0,ge,He)},this.getCurrentViewport=function(ge){return ge.copy(C)},this.getViewport=function(ge){return ge.copy(H)},this.setViewport=function(ge,He,rt,Ke){ge.isVector4?H.set(ge.x,ge.y,ge.z,ge.w):H.set(ge,He,rt,Ke),le.viewport(C.copy(H).multiplyScalar(R).floor())},this.getScissor=function(ge){return ge.copy($)},this.setScissor=function(ge,He,rt,Ke){ge.isVector4?$.set(ge.x,ge.y,ge.z,ge.w):$.set(ge,He,rt,Ke),le.scissor(B.copy($).multiplyScalar(R).floor())},this.getScissorTest=function(){return j},this.setScissorTest=function(ge){le.setScissorTest(j=ge)},this.setOpaqueSort=function(ge){F=ge},this.setTransparentSort=function(ge){O=ge},this.getClearColor=function(ge){return ge.copy(ye.getClearColor())},this.setClearColor=function(){ye.setClearColor.apply(ye,arguments)},this.getClearAlpha=function(){return ye.getClearAlpha()},this.setClearAlpha=function(){ye.setClearAlpha.apply(ye,arguments)},this.clear=function(ge=!0,He=!0,rt=!0){let Ke=0;if(ge){let tt=!1;if(M!==null){const Nt=M.texture.format;tt=Nt===Yg||Nt===Kg||Nt===xp}if(tt){const Nt=M.texture.type,tr=Nt===En||Nt===Cn||Nt===qu||Nt===Xn||Nt===jg||Nt===$g,sr=ye.getClearColor(),cr=ye.getClearAlpha(),Er=sr.r,vr=sr.g,yr=sr.b;tr?(p[0]=Er,p[1]=vr,p[2]=yr,p[3]=cr,D.clearBufferuiv(D.COLOR,0,p)):(m[0]=Er,m[1]=vr,m[2]=yr,m[3]=cr,D.clearBufferiv(D.COLOR,0,m))}else Ke|=D.COLOR_BUFFER_BIT}He&&(Ke|=D.DEPTH_BUFFER_BIT),rt&&(Ke|=D.STENCIL_BUFFER_BIT),D.clear(Ke)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",mt,!1),t.removeEventListener("webglcontextrestored",at,!1),t.removeEventListener("webglcontextcreationerror",xt,!1),Ue.dispose(),Re.dispose(),Ae.dispose(),Me.dispose(),Le.dispose(),z.dispose(),De.dispose(),et.dispose(),me.dispose(),be.dispose(),be.removeEventListener("sessionstart",Ot),be.removeEventListener("sessionend",zr),xe&&(xe.dispose(),xe=null),Tr.stop()};function mt(ge){ge.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function at(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const ge=Se.autoReset,He=Ve.enabled,rt=Ve.autoUpdate,Ke=Ve.needsUpdate,tt=Ve.type;ht(),Se.autoReset=ge,Ve.enabled=He,Ve.autoUpdate=rt,Ve.needsUpdate=Ke,Ve.type=tt}function xt(ge){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ge.statusMessage)}function he(ge){const He=ge.target;He.removeEventListener("dispose",he),Ee(He)}function Ee(ge){pe(ge),Ae.remove(ge)}function pe(ge){const He=Ae.get(ge).programs;He!==void 0&&(He.forEach(function(rt){me.releaseProgram(rt)}),ge.isShaderMaterial&&me.releaseShaderCache(ge))}this.renderBufferDirect=function(ge,He,rt,Ke,tt,Nt){He===null&&(He=Ce);const tr=tt.isMesh&&tt.matrixWorld.determinant()<0,sr=uze(ge,He,rt,Ke,tt);le.setMaterial(Ke,tr);let cr=rt.index,Er=1;if(Ke.wireframe===!0){if(cr=Y.getWireframeAttribute(rt),cr===void 0)return;Er=2}const vr=rt.drawRange,yr=rt.attributes.position;let go=vr.start*Er,Ii=(vr.start+vr.count)*Er;Nt!==null&&(go=Math.max(go,Nt.start*Er),Ii=Math.min(Ii,(Nt.start+Nt.count)*Er)),cr!==null?(go=Math.max(go,0),Ii=Math.min(Ii,cr.count)):yr!=null&&(go=Math.max(go,0),Ii=Math.min(Ii,yr.count));const Os=Ii-go;if(Os<0||Os===1/0)return;De.setup(tt,Ke,sr,rt,cr);let Ul,Wi=oe;if(cr!==null&&(Ul=je.get(cr),Wi=fe,Wi.setIndex(Ul)),tt.isMesh)Ke.wireframe===!0?(le.setLineWidth(Ke.wireframeLinewidth*ue()),Wi.setMode(D.LINES)):Wi.setMode(D.TRIANGLES);else if(tt.isLine){let Cr=Ke.linewidth;Cr===void 0&&(Cr=1),le.setLineWidth(Cr*ue()),tt.isLineSegments?Wi.setMode(D.LINES):tt.isLineLoop?Wi.setMode(D.LINE_LOOP):Wi.setMode(D.LINE_STRIP)}else tt.isPoints?Wi.setMode(D.POINTS):tt.isSprite&&Wi.setMode(D.TRIANGLES);if(tt.isInstancedMesh)Wi.renderInstances(go,Os,tt.count);else if(rt.isInstancedBufferGeometry){const Cr=rt._maxInstanceCount!==void 0?rt._maxInstanceCount:1/0,VO=Math.min(rt.instanceCount,Cr);Wi.renderInstances(go,Os,VO)}else Wi.render(go,Os)},this.compile=function(ge,He){function rt(Ke,tt,Nt){Ke.transparent===!0&&Ke.side===io&&Ke.forceSinglePass===!1?(Ke.side=Ni,Ke.needsUpdate=!0,Cw(Ke,tt,Nt),Ke.side=Ss,Ke.needsUpdate=!0,Cw(Ke,tt,Nt),Ke.side=io):Cw(Ke,tt,Nt)}v=Re.get(ge),v.init(),b.push(v),ge.traverseVisible(function(Ke){Ke.isLight&&Ke.layers.test(He.layers)&&(v.pushLight(Ke),Ke.castShadow&&v.pushShadow(Ke))}),v.setupLights(x._useLegacyLights),ge.traverse(function(Ke){const tt=Ke.material;if(tt)if(Array.isArray(tt))for(let Nt=0;Nt<tt.length;Nt++){const tr=tt[Nt];rt(tr,ge,Ke)}else rt(tt,ge,Ke)}),b.pop(),v=null};let Be=null;function Lt(ge){Be&&Be(ge)}function Ot(){Tr.stop()}function zr(){Tr.start()}const Tr=new UV;Tr.setAnimationLoop(Lt),typeof self<"u"&&Tr.setContext(self),this.setAnimationLoop=function(ge){Be=ge,be.setAnimationLoop(ge),ge===null?Tr.stop():Tr.start()},be.addEventListener("sessionstart",Ot),be.addEventListener("sessionend",zr),this.render=function(ge,He){if(He!==void 0&&He.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(_===!0)return;ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),He.parent===null&&He.matrixWorldAutoUpdate===!0&&He.updateMatrixWorld(),be.enabled===!0&&be.isPresenting===!0&&(be.cameraAutoUpdate===!0&&be.updateCamera(He),He=be.getCamera()),ge.isScene===!0&&ge.onBeforeRender(x,ge,He,M),v=Re.get(ge,b.length),v.init(),b.push(v),te.multiplyMatrices(He.projectionMatrix,He.matrixWorldInverse),J.setFromProjectionMatrix(te),ve=this.localClippingEnabled,ce=$e.init(this.clippingPlanes,ve),g=Ue.get(ge,y.length),g.init(),y.push(g),Br(ge,He,0,x.sortObjects),g.finish(),x.sortObjects===!0&&g.sort(F,O),this.info.render.frame++,ce===!0&&$e.beginShadows();const rt=v.state.shadowsArray;if(Ve.render(rt,ge,He),ce===!0&&$e.endShadows(),this.info.autoReset===!0&&this.info.reset(),ye.render(g,ge),v.setupLights(x._useLegacyLights),He.isArrayCamera){const Ke=He.cameras;for(let tt=0,Nt=Ke.length;tt<Nt;tt++){const tr=Ke[tt];Ls(g,ge,tr,tr.viewport)}}else Ls(g,ge,He);M!==null&&(Ne.updateMultisampleRenderTarget(M),Ne.updateRenderTargetMipmap(M)),ge.isScene===!0&&ge.onAfterRender(x,ge,He),De.resetDefaultState(),T=-1,E=null,b.pop(),b.length>0?v=b[b.length-1]:v=null,y.pop(),y.length>0?g=y[y.length-1]:g=null};function Br(ge,He,rt,Ke){if(ge.visible===!1)return;if(ge.layers.test(He.layers)){if(ge.isGroup)rt=ge.renderOrder;else if(ge.isLOD)ge.autoUpdate===!0&&ge.update(He);else if(ge.isLight)v.pushLight(ge),ge.castShadow&&v.pushShadow(ge);else if(ge.isSprite){if(!ge.frustumCulled||J.intersectsSprite(ge)){Ke&&de.setFromMatrixPosition(ge.matrixWorld).applyMatrix4(te);const Nt=z.update(ge),tr=ge.material;tr.visible&&g.push(ge,Nt,tr,rt,de.z,null)}}else if((ge.isMesh||ge.isLine||ge.isPoints)&&(!ge.frustumCulled||J.intersectsObject(ge))){const Nt=z.update(ge),tr=ge.material;if(Ke&&(ge.boundingSphere!==void 0?(ge.boundingSphere===null&&ge.computeBoundingSphere(),de.copy(ge.boundingSphere.center)):(Nt.boundingSphere===null&&Nt.computeBoundingSphere(),de.copy(Nt.boundingSphere.center)),de.applyMatrix4(ge.matrixWorld).applyMatrix4(te)),Array.isArray(tr)){const sr=Nt.groups;for(let cr=0,Er=sr.length;cr<Er;cr++){const vr=sr[cr],yr=tr[vr.materialIndex];yr&&yr.visible&&g.push(ge,Nt,yr,rt,de.z,vr)}}else tr.visible&&g.push(ge,Nt,tr,rt,de.z,null)}}const tt=ge.children;for(let Nt=0,tr=tt.length;Nt<tr;Nt++)Br(tt[Nt],He,rt,Ke)}function Ls(ge,He,rt,Ke){const tt=ge.opaque,Nt=ge.transmissive,tr=ge.transparent;v.setupLightsView(rt),ce===!0&&$e.setGlobalState(x.clippingPlanes,rt),Nt.length>0&&cze(tt,Nt,He,rt),Ke&&le.viewport(C.copy(Ke)),tt.length>0&&Ew(tt,He,rt),Nt.length>0&&Ew(Nt,He,rt),tr.length>0&&Ew(tr,He,rt),le.buffers.depth.setTest(!0),le.buffers.depth.setMask(!0),le.buffers.color.setMask(!0),le.setPolygonOffset(!1)}function cze(ge,He,rt,Ke){const tt=ae.isWebGL2;xe===null&&(xe=new Ki(1,1,{generateMipmaps:!0,type:re.has("EXT_color_buffer_half_float")?no:En,minFilter:Tn,samples:tt?4:0})),x.getDrawingBufferSize(Z),tt?xe.setSize(Z.x,Z.y):xe.setSize(wx(Z.x),wx(Z.y));const Nt=x.getRenderTarget();x.setRenderTarget(xe),x.getClearColor(L),P=x.getClearAlpha(),P<1&&x.setClearColor(16777215,.5),x.clear();const tr=x.toneMapping;x.toneMapping=Mn,Ew(ge,rt,Ke),Ne.updateMultisampleRenderTarget(xe),Ne.updateRenderTargetMipmap(xe);let sr=!1;for(let cr=0,Er=He.length;cr<Er;cr++){const vr=He[cr],yr=vr.object,go=vr.geometry,Ii=vr.material,Os=vr.group;if(Ii.side===io&&yr.layers.test(Ke.layers)){const Ul=Ii.side;Ii.side=Ni,Ii.needsUpdate=!0,y$(yr,rt,Ke,go,Ii,Os),Ii.side=Ul,Ii.needsUpdate=!0,sr=!0}}sr===!0&&(Ne.updateMultisampleRenderTarget(xe),Ne.updateRenderTargetMipmap(xe)),x.setRenderTarget(Nt),x.setClearColor(L,P),x.toneMapping=tr}function Ew(ge,He,rt){const Ke=He.isScene===!0?He.overrideMaterial:null;for(let tt=0,Nt=ge.length;tt<Nt;tt++){const tr=ge[tt],sr=tr.object,cr=tr.geometry,Er=Ke===null?tr.material:Ke,vr=tr.group;sr.layers.test(rt.layers)&&y$(sr,He,rt,cr,Er,vr)}}function y$(ge,He,rt,Ke,tt,Nt){ge.onBeforeRender(x,He,rt,Ke,tt,Nt),ge.modelViewMatrix.multiplyMatrices(rt.matrixWorldInverse,ge.matrixWorld),ge.normalMatrix.getNormalMatrix(ge.modelViewMatrix),tt.onBeforeRender(x,He,rt,Ke,ge,Nt),tt.transparent===!0&&tt.side===io&&tt.forceSinglePass===!1?(tt.side=Ni,tt.needsUpdate=!0,x.renderBufferDirect(rt,He,Ke,tt,ge,Nt),tt.side=Ss,tt.needsUpdate=!0,x.renderBufferDirect(rt,He,Ke,tt,ge,Nt),tt.side=io):x.renderBufferDirect(rt,He,Ke,tt,ge,Nt),ge.onAfterRender(x,He,rt,Ke,tt,Nt)}function Cw(ge,He,rt){He.isScene!==!0&&(He=Ce);const Ke=Ae.get(ge),tt=v.state.lights,Nt=v.state.shadowsArray,tr=tt.state.version,sr=me.getParameters(ge,tt.state,Nt,He,rt),cr=me.getProgramCacheKey(sr);let Er=Ke.programs;Ke.environment=ge.isMeshStandardMaterial?He.environment:null,Ke.fog=He.fog,Ke.envMap=(ge.isMeshStandardMaterial?Le:Me).get(ge.envMap||Ke.environment),Er===void 0&&(ge.addEventListener("dispose",he),Er=new Map,Ke.programs=Er);let vr=Er.get(cr);if(vr!==void 0){if(Ke.currentProgram===vr&&Ke.lightsStateVersion===tr)return b$(ge,sr),vr}else sr.uniforms=me.getUniforms(ge),ge.onBuild(rt,sr,x),ge.onBeforeCompile(sr,x),vr=me.acquireProgram(sr,cr),Er.set(cr,vr),Ke.uniforms=sr.uniforms;const yr=Ke.uniforms;(!ge.isShaderMaterial&&!ge.isRawShaderMaterial||ge.clipping===!0)&&(yr.clippingPlanes=$e.uniform),b$(ge,sr),Ke.needsLights=hze(ge),Ke.lightsStateVersion=tr,Ke.needsLights&&(yr.ambientLightColor.value=tt.state.ambient,yr.lightProbe.value=tt.state.probe,yr.directionalLights.value=tt.state.directional,yr.directionalLightShadows.value=tt.state.directionalShadow,yr.spotLights.value=tt.state.spot,yr.spotLightShadows.value=tt.state.spotShadow,yr.rectAreaLights.value=tt.state.rectArea,yr.ltc_1.value=tt.state.rectAreaLTC1,yr.ltc_2.value=tt.state.rectAreaLTC2,yr.pointLights.value=tt.state.point,yr.pointLightShadows.value=tt.state.pointShadow,yr.hemisphereLights.value=tt.state.hemi,yr.directionalShadowMap.value=tt.state.directionalShadowMap,yr.directionalShadowMatrix.value=tt.state.directionalShadowMatrix,yr.spotShadowMap.value=tt.state.spotShadowMap,yr.spotLightMatrix.value=tt.state.spotLightMatrix,yr.spotLightMap.value=tt.state.spotLightMap,yr.pointShadowMap.value=tt.state.pointShadowMap,yr.pointShadowMatrix.value=tt.state.pointShadowMatrix);const go=vr.getUniforms(),Ii=Yx.seqWithValue(go.seq,yr);return Ke.currentProgram=vr,Ke.uniformsList=Ii,vr}function b$(ge,He){const rt=Ae.get(ge);rt.outputColorSpace=He.outputColorSpace,rt.instancing=He.instancing,rt.instancingColor=He.instancingColor,rt.skinning=He.skinning,rt.morphTargets=He.morphTargets,rt.morphNormals=He.morphNormals,rt.morphColors=He.morphColors,rt.morphTargetsCount=He.morphTargetsCount,rt.numClippingPlanes=He.numClippingPlanes,rt.numIntersection=He.numClipIntersection,rt.vertexAlphas=He.vertexAlphas,rt.vertexTangents=He.vertexTangents,rt.toneMapping=He.toneMapping}function uze(ge,He,rt,Ke,tt){He.isScene!==!0&&(He=Ce),Ne.resetTextureUnits();const Nt=He.fog,tr=Ke.isMeshStandardMaterial?He.environment:null,sr=M===null?x.outputColorSpace:M.isXRRenderTarget===!0?M.texture.colorSpace:en,cr=(Ke.isMeshStandardMaterial?Le:Me).get(Ke.envMap||tr),Er=Ke.vertexColors===!0&&!!rt.attributes.color&&rt.attributes.color.itemSize===4,vr=!!rt.attributes.tangent&&(!!Ke.normalMap||Ke.anisotropy>0),yr=!!rt.morphAttributes.position,go=!!rt.morphAttributes.normal,Ii=!!rt.morphAttributes.color;let Os=Mn;Ke.toneMapped&&(M===null||M.isXRRenderTarget===!0)&&(Os=x.toneMapping);const Ul=rt.morphAttributes.position||rt.morphAttributes.normal||rt.morphAttributes.color,Wi=Ul!==void 0?Ul.length:0,Cr=Ae.get(Ke),VO=v.state.lights;if(ce===!0&&(ve===!0||ge!==E)){const ns=ge===E&&Ke.id===T;$e.setState(Ke,ge,ns)}let GO=!1;Ke.version===Cr.__version?(Cr.needsLights&&Cr.lightsStateVersion!==VO.state.version||Cr.outputColorSpace!==sr||tt.isInstancedMesh&&Cr.instancing===!1||!tt.isInstancedMesh&&Cr.instancing===!0||tt.isSkinnedMesh&&Cr.skinning===!1||!tt.isSkinnedMesh&&Cr.skinning===!0||tt.isInstancedMesh&&Cr.instancingColor===!0&&tt.instanceColor===null||tt.isInstancedMesh&&Cr.instancingColor===!1&&tt.instanceColor!==null||Cr.envMap!==cr||Ke.fog===!0&&Cr.fog!==Nt||Cr.numClippingPlanes!==void 0&&(Cr.numClippingPlanes!==$e.numPlanes||Cr.numIntersection!==$e.numIntersection)||Cr.vertexAlphas!==Er||Cr.vertexTangents!==vr||Cr.morphTargets!==yr||Cr.morphNormals!==go||Cr.morphColors!==Ii||Cr.toneMapping!==Os||ae.isWebGL2===!0&&Cr.morphTargetsCount!==Wi)&&(GO=!0):(GO=!0,Cr.__version=Ke.version);let uh=Cr.currentProgram;GO===!0&&(uh=Cw(Ke,He,tt));let x$=!1,G0=!1,HO=!1;const hn=uh.getUniforms(),dh=Cr.uniforms;if(le.useProgram(uh.program)&&(x$=!0,G0=!0,HO=!0),Ke.id!==T&&(T=Ke.id,G0=!0),x$||E!==ge){hn.setValue(D,"projectionMatrix",ge.projectionMatrix),hn.setValue(D,"viewMatrix",ge.matrixWorldInverse);const ns=hn.map.cameraPosition;ns!==void 0&&ns.setValue(D,de.setFromMatrixPosition(ge.matrixWorld)),ae.logarithmicDepthBuffer&&hn.setValue(D,"logDepthBufFC",2/(Math.log(ge.far+1)/Math.LN2)),(Ke.isMeshPhongMaterial||Ke.isMeshToonMaterial||Ke.isMeshLambertMaterial||Ke.isMeshBasicMaterial||Ke.isMeshStandardMaterial||Ke.isShaderMaterial)&&hn.setValue(D,"isOrthographic",ge.isOrthographicCamera===!0),E!==ge&&(E=ge,G0=!0,HO=!0)}if(tt.isSkinnedMesh){hn.setOptional(D,tt,"bindMatrix"),hn.setOptional(D,tt,"bindMatrixInverse");const ns=tt.skeleton;ns&&(ae.floatVertexTextures?(ns.boneTexture===null&&ns.computeBoneTexture(),hn.setValue(D,"boneTexture",ns.boneTexture,Ne),hn.setValue(D,"boneTextureSize",ns.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const jO=rt.morphAttributes;if((jO.position!==void 0||jO.normal!==void 0||jO.color!==void 0&&ae.isWebGL2===!0)&&q.update(tt,rt,uh),(G0||Cr.receiveShadow!==tt.receiveShadow)&&(Cr.receiveShadow=tt.receiveShadow,hn.setValue(D,"receiveShadow",tt.receiveShadow)),Ke.isMeshGouraudMaterial&&Ke.envMap!==null&&(dh.envMap.value=cr,dh.flipEnvMap.value=cr.isCubeTexture&&cr.isRenderTargetTexture===!1?-1:1),G0&&(hn.setValue(D,"toneMappingExposure",x.toneMappingExposure),Cr.needsLights&&dze(dh,HO),Nt&&Ke.fog===!0&&Ie.refreshFogUniforms(dh,Nt),Ie.refreshMaterialUniforms(dh,Ke,R,G,xe),Yx.upload(D,Cr.uniformsList,dh,Ne)),Ke.isShaderMaterial&&Ke.uniformsNeedUpdate===!0&&(Yx.upload(D,Cr.uniformsList,dh,Ne),Ke.uniformsNeedUpdate=!1),Ke.isSpriteMaterial&&hn.setValue(D,"center",tt.center),hn.setValue(D,"modelViewMatrix",tt.modelViewMatrix),hn.setValue(D,"normalMatrix",tt.normalMatrix),hn.setValue(D,"modelMatrix",tt.matrixWorld),Ke.isShaderMaterial||Ke.isRawShaderMaterial){const ns=Ke.uniformsGroups;for(let $O=0,pze=ns.length;$O<pze;$O++)if(ae.isWebGL2){const _$=ns[$O];et.update(_$,uh),et.bind(_$,uh)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return uh}function dze(ge,He){ge.ambientLightColor.needsUpdate=He,ge.lightProbe.needsUpdate=He,ge.directionalLights.needsUpdate=He,ge.directionalLightShadows.needsUpdate=He,ge.pointLights.needsUpdate=He,ge.pointLightShadows.needsUpdate=He,ge.spotLights.needsUpdate=He,ge.spotLightShadows.needsUpdate=He,ge.rectAreaLights.needsUpdate=He,ge.hemisphereLights.needsUpdate=He}function hze(ge){return ge.isMeshLambertMaterial||ge.isMeshToonMaterial||ge.isMeshPhongMaterial||ge.isMeshStandardMaterial||ge.isShadowMaterial||ge.isShaderMaterial&&ge.lights===!0}this.getActiveCubeFace=function(){return S},this.getActiveMipmapLevel=function(){return w},this.getRenderTarget=function(){return M},this.setRenderTargetTextures=function(ge,He,rt){Ae.get(ge.texture).__webglTexture=He,Ae.get(ge.depthTexture).__webglTexture=rt;const Ke=Ae.get(ge);Ke.__hasExternalTextures=!0,Ke.__hasExternalTextures&&(Ke.__autoAllocateDepthBuffer=rt===void 0,Ke.__autoAllocateDepthBuffer||re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ke.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ge,He){const rt=Ae.get(ge);rt.__webglFramebuffer=He,rt.__useDefaultFramebuffer=He===void 0},this.setRenderTarget=function(ge,He=0,rt=0){M=ge,S=He,w=rt;let Ke=!0,tt=null,Nt=!1,tr=!1;if(ge){const sr=Ae.get(ge);sr.__useDefaultFramebuffer!==void 0?(le.bindFramebuffer(D.FRAMEBUFFER,null),Ke=!1):sr.__webglFramebuffer===void 0?Ne.setupRenderTarget(ge):sr.__hasExternalTextures&&Ne.rebindTextures(ge,Ae.get(ge.texture).__webglTexture,Ae.get(ge.depthTexture).__webglTexture);const cr=ge.texture;(cr.isData3DTexture||cr.isDataArrayTexture||cr.isCompressedArrayTexture)&&(tr=!0);const Er=Ae.get(ge).__webglFramebuffer;ge.isWebGLCubeRenderTarget?(Array.isArray(Er[He])?tt=Er[He][rt]:tt=Er[He],Nt=!0):ae.isWebGL2&&ge.samples>0&&Ne.useMultisampledRTT(ge)===!1?tt=Ae.get(ge).__webglMultisampledFramebuffer:Array.isArray(Er)?tt=Er[rt]:tt=Er,C.copy(ge.viewport),B.copy(ge.scissor),I=ge.scissorTest}else C.copy(H).multiplyScalar(R).floor(),B.copy($).multiplyScalar(R).floor(),I=j;if(le.bindFramebuffer(D.FRAMEBUFFER,tt)&&ae.drawBuffers&&Ke&&le.drawBuffers(ge,tt),le.viewport(C),le.scissor(B),le.setScissorTest(I),Nt){const sr=Ae.get(ge.texture);D.framebufferTexture2D(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,D.TEXTURE_CUBE_MAP_POSITIVE_X+He,sr.__webglTexture,rt)}else if(tr){const sr=Ae.get(ge.texture),cr=He||0;D.framebufferTextureLayer(D.FRAMEBUFFER,D.COLOR_ATTACHMENT0,sr.__webglTexture,rt||0,cr)}T=-1},this.readRenderTargetPixels=function(ge,He,rt,Ke,tt,Nt,tr){if(!(ge&&ge.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let sr=Ae.get(ge).__webglFramebuffer;if(ge.isWebGLCubeRenderTarget&&tr!==void 0&&(sr=sr[tr]),sr){le.bindFramebuffer(D.FRAMEBUFFER,sr);try{const cr=ge.texture,Er=cr.format,vr=cr.type;if(Er!==Po&&ie.convert(Er)!==D.getParameter(D.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const yr=vr===no&&(re.has("EXT_color_buffer_half_float")||ae.isWebGL2&&re.has("EXT_color_buffer_float"));if(vr!==En&&ie.convert(vr)!==D.getParameter(D.IMPLEMENTATION_COLOR_READ_TYPE)&&!(vr===Di&&(ae.isWebGL2||re.has("OES_texture_float")||re.has("WEBGL_color_buffer_float")))&&!yr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}He>=0&&He<=ge.width-Ke&&rt>=0&&rt<=ge.height-tt&&D.readPixels(He,rt,Ke,tt,ie.convert(Er),ie.convert(vr),Nt)}finally{const cr=M!==null?Ae.get(M).__webglFramebuffer:null;le.bindFramebuffer(D.FRAMEBUFFER,cr)}}},this.copyFramebufferToTexture=function(ge,He,rt=0){const Ke=Math.pow(2,-rt),tt=Math.floor(He.image.width*Ke),Nt=Math.floor(He.image.height*Ke);Ne.setTexture2D(He,0),D.copyTexSubImage2D(D.TEXTURE_2D,rt,0,0,ge.x,ge.y,tt,Nt),le.unbindTexture()},this.copyTextureToTexture=function(ge,He,rt,Ke=0){const tt=He.image.width,Nt=He.image.height,tr=ie.convert(rt.format),sr=ie.convert(rt.type);Ne.setTexture2D(rt,0),D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,rt.flipY),D.pixelStorei(D.UNPACK_PREMULTIPLY_ALPHA_WEBGL,rt.premultiplyAlpha),D.pixelStorei(D.UNPACK_ALIGNMENT,rt.unpackAlignment),He.isDataTexture?D.texSubImage2D(D.TEXTURE_2D,Ke,ge.x,ge.y,tt,Nt,tr,sr,He.image.data):He.isCompressedTexture?D.compressedTexSubImage2D(D.TEXTURE_2D,Ke,ge.x,ge.y,He.mipmaps[0].width,He.mipmaps[0].height,tr,He.mipmaps[0].data):D.texSubImage2D(D.TEXTURE_2D,Ke,ge.x,ge.y,tr,sr,He.image),Ke===0&&rt.generateMipmaps&&D.generateMipmap(D.TEXTURE_2D),le.unbindTexture()},this.copyTextureToTexture3D=function(ge,He,rt,Ke,tt=0){if(x.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Nt=ge.max.x-ge.min.x+1,tr=ge.max.y-ge.min.y+1,sr=ge.max.z-ge.min.z+1,cr=ie.convert(Ke.format),Er=ie.convert(Ke.type);let vr;if(Ke.isData3DTexture)Ne.setTexture3D(Ke,0),vr=D.TEXTURE_3D;else if(Ke.isDataArrayTexture)Ne.setTexture2DArray(Ke,0),vr=D.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,Ke.flipY),D.pixelStorei(D.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ke.premultiplyAlpha),D.pixelStorei(D.UNPACK_ALIGNMENT,Ke.unpackAlignment);const yr=D.getParameter(D.UNPACK_ROW_LENGTH),go=D.getParameter(D.UNPACK_IMAGE_HEIGHT),Ii=D.getParameter(D.UNPACK_SKIP_PIXELS),Os=D.getParameter(D.UNPACK_SKIP_ROWS),Ul=D.getParameter(D.UNPACK_SKIP_IMAGES),Wi=rt.isCompressedTexture?rt.mipmaps[0]:rt.image;D.pixelStorei(D.UNPACK_ROW_LENGTH,Wi.width),D.pixelStorei(D.UNPACK_IMAGE_HEIGHT,Wi.height),D.pixelStorei(D.UNPACK_SKIP_PIXELS,ge.min.x),D.pixelStorei(D.UNPACK_SKIP_ROWS,ge.min.y),D.pixelStorei(D.UNPACK_SKIP_IMAGES,ge.min.z),rt.isDataTexture||rt.isData3DTexture?D.texSubImage3D(vr,tt,He.x,He.y,He.z,Nt,tr,sr,cr,Er,Wi.data):rt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),D.compressedTexSubImage3D(vr,tt,He.x,He.y,He.z,Nt,tr,sr,cr,Wi.data)):D.texSubImage3D(vr,tt,He.x,He.y,He.z,Nt,tr,sr,cr,Er,Wi),D.pixelStorei(D.UNPACK_ROW_LENGTH,yr),D.pixelStorei(D.UNPACK_IMAGE_HEIGHT,go),D.pixelStorei(D.UNPACK_SKIP_PIXELS,Ii),D.pixelStorei(D.UNPACK_SKIP_ROWS,Os),D.pixelStorei(D.UNPACK_SKIP_IMAGES,Ul),tt===0&&Ke.generateMipmaps&&D.generateMipmap(vr),le.unbindTexture()},this.initTexture=function(ge){ge.isCubeTexture?Ne.setTextureCube(ge,0):ge.isData3DTexture?Ne.setTexture3D(ge,0):ge.isDataArrayTexture||ge.isCompressedArrayTexture?Ne.setTexture2DArray(ge,0):Ne.setTexture2D(ge,0),le.unbindTexture()},this.resetState=function(){S=0,w=0,M=null,le.reset(),De.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ts}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===tv?"display-p3":"srgb",t.unpackColorSpace=Ur.workingColorSpace===Ap?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Ft?Ca:ev}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ca?Ft:en}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class h6 extends VC{}h6.prototype.isWebGL1Renderer=!0;class Mv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new bt(e),this.density=t}clone(){return new Mv(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Tv{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new bt(e),this.near=t,this.far=i}clone(){return new Tv(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Oc extends mr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Ev{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Op,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Kn()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let o=0,n=this.stride;o<n;o++)this.array[e+o]=t.array[i+o];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Kn()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Kn()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const rn=new Q;class kn{constructor(e,t,i,o=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)rn.fromBufferAttribute(this,t),rn.applyMatrix4(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)rn.fromBufferAttribute(this,t),rn.applyNormalMatrix(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)rn.fromBufferAttribute(this,t),rn.transformDirection(e),this.setXYZ(t,rn.x,rn.y,rn.z);return this}setX(e,t){return this.normalized&&(t=pr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=pr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=pr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=pr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=An(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=An(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=An(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=An(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=pr(t,this.array),i=pr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=pr(t,this.array),i=pr(i,this.array),o=pr(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=o,this}setXYZW(e,t,i,o,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=pr(t,this.array),i=pr(i,this.array),o=pr(o,this.array),n=pr(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=o,this.data.array[e+3]=n,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[o+n])}return new Zr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new kn(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let n=0;n<this.itemSize;n++)t.push(this.data.array[o+n])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class kc extends ai{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new bt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let of;const Cv=new Q,nf=new Q,sf=new Q,af=new We,Nv=new We,p6=new Xt,Zx=new Q,Av=new Q,Qx=new Q,f6=new We,GC=new We,m6=new We;class Ic extends mr{constructor(e=new kc){if(super(),this.isSprite=!0,this.type="Sprite",of===void 0){of=new dr;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Ev(t,5);of.setIndex([0,1,2,0,2,3]),of.setAttribute("position",new kn(i,3,0,!1)),of.setAttribute("uv",new kn(i,2,3,!1))}this.geometry=of,this.material=e,this.center=new We(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),nf.setFromMatrixScale(this.matrixWorld),p6.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),sf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&nf.multiplyScalar(-sf.z);const i=this.material.rotation;let o,n;i!==0&&(n=Math.cos(i),o=Math.sin(i));const s=this.center;e1(Zx.set(-.5,-.5,0),sf,s,nf,o,n),e1(Av.set(.5,-.5,0),sf,s,nf,o,n),e1(Qx.set(.5,.5,0),sf,s,nf,o,n),f6.set(0,0),GC.set(1,0),m6.set(1,1);let a=e.ray.intersectTriangle(Zx,Av,Qx,!1,Cv);if(a===null&&(e1(Av.set(-.5,.5,0),sf,s,nf,o,n),GC.set(0,1),a=e.ray.intersectTriangle(Zx,Qx,Av,!1,Cv),a===null))return;const l=e.ray.origin.distanceTo(Cv);l<e.near||l>e.far||t.push({distance:l,point:Cv.clone(),uv:Ln.getInterpolation(Cv,Zx,Av,Qx,f6,GC,m6,new We),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function e1(r,e,t,i,o,n){af.subVectors(r,t).addScalar(.5).multiply(i),o!==void 0?(Nv.x=n*af.x-o*af.y,Nv.y=o*af.x+n*af.y):Nv.copy(af),r.copy(e),r.x+=Nv.x,r.y+=Nv.y,r.applyMatrix4(p6)}const t1=new Q,g6=new Q;class v6 extends mr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,o=t.length;i<o;i++){const n=t[i];this.addLevel(n.object.clone(),n.distance,n.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const o=this.levels;let n;for(n=0;n<o.length&&!(t<o[n].distance);n++);return o.splice(n,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,o;for(i=1,o=t.length;i<o;i++){let n=t[i].distance;if(t[i].object.visible&&(n-=n*t[i].hysteresis),e<n)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){t1.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(t1);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){t1.setFromMatrixPosition(e.matrixWorld),g6.setFromMatrixPosition(this.matrixWorld);const i=t1.distanceTo(g6)/e.zoom;t[0].object.visible=!0;let o,n;for(o=1,n=t.length;o<n;o++){let s=t[o].distance;if(t[o].object.visible&&(s-=s*t[o].hysteresis),i>=s)t[o-1].object.visible=!1,t[o].object.visible=!0;else break}for(this._currentLevel=o-1;o<n;o++)t[o].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let o=0,n=i.length;o<n;o++){const s=i[o];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const y6=new Q,b6=new Kt,x6=new Kt,BLe=new Q,_6=new Xt,lf=new Q,HC=new Jn,w6=new Xt,jC=new gd;class S6 extends yt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Xt,this.bindMatrixInverse=new Xt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Yn),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)lf.fromBufferAttribute(t,i),this.applyBoneTransform(i,lf),this.boundingBox.expandByPoint(lf)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Jn),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)lf.fromBufferAttribute(t,i),this.applyBoneTransform(i,lf),this.boundingSphere.expandByPoint(lf)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,o=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),HC.copy(this.boundingSphere),HC.applyMatrix4(o),e.ray.intersectsSphere(HC)!==!1&&(w6.copy(o).invert(),jC.copy(e.ray).applyMatrix4(w6),!(this.boundingBox!==null&&jC.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,jC)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Kt,t=this.geometry.attributes.skinWeight;for(let i=0,o=t.count;i<o;i++){e.fromBufferAttribute(t,i);const n=1/e.manhattanLength();n!==1/0?e.multiplyScalar(n):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,o=this.geometry;b6.fromBufferAttribute(o.attributes.skinIndex,e),x6.fromBufferAttribute(o.attributes.skinWeight,e),y6.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let n=0;n<4;n++){const s=x6.getComponent(n);if(s!==0){const a=b6.getComponent(n);_6.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(BLe.copy(y6).applyMatrix4(_6),s)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class $C extends mr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Md extends mi{constructor(e=null,t=1,i=1,o,n,s,a,l,c=Nr,u=Nr,d,h){super(null,s,a,l,c,u,o,n,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const M6=new Xt,FLe=new Xt;class r1{constructor(e=[],t=[]){this.uuid=Kn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,o=this.bones.length;i<o;i++)this.boneInverses.push(new Xt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Xt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,o=this.boneTexture;for(let n=0,s=e.length;n<s;n++){const a=e[n]?e[n].matrixWorld:FLe;M6.multiplyMatrices(a,t[n]),M6.toArray(i,n*16)}o!==null&&(o.needsUpdate=!0)}clone(){return new r1(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=bV(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Md(t,e,e,Po,Di);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const o=this.bones[t];if(o.name===e)return o}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,o=e.bones.length;i<o;i++){const n=e.bones[i];let s=t[n];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",n),s=new $C),this.bones.push(s),this.boneInverses.push(new Xt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let o=0,n=t.length;o<n;o++){const s=t[o];e.bones.push(s.uuid);const a=i[o];e.boneInverses.push(a.toArray())}return e}}class cf extends Zr{constructor(e,t,i,o=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const uf=new Xt,T6=new Xt,i1=[],E6=new Yn,ULe=new Xt,Rv=new yt,Lv=new Jn;class WC extends yt{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new cf(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let o=0;o<i;o++)this.setMatrixAt(o,ULe)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Yn),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,uf),E6.copy(e.boundingBox).applyMatrix4(uf),this.boundingBox.union(E6)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Jn),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,uf),Lv.copy(e.boundingSphere).applyMatrix4(uf),this.boundingSphere.union(Lv)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,o=this.count;if(Rv.geometry=this.geometry,Rv.material=this.material,Rv.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Lv.copy(this.boundingSphere),Lv.applyMatrix4(i),e.ray.intersectsSphere(Lv)!==!1))for(let n=0;n<o;n++){this.getMatrixAt(n,uf),T6.multiplyMatrices(i,uf),Rv.matrixWorld=T6,Rv.raycast(e,i1);for(let s=0,a=i1.length;s<a;s++){const l=i1[s];l.instanceId=n,l.object=this,t.push(l)}i1.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new cf(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Fi extends ai{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new bt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const C6=new Q,N6=new Q,A6=new Xt,qC=new gd,o1=new Jn;class zo extends mr{constructor(e=new dr,t=new Fi){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let o=1,n=t.count;o<n;o++)C6.fromBufferAttribute(t,o-1),N6.fromBufferAttribute(t,o),i[o]=i[o-1],i[o]+=C6.distanceTo(N6);e.setAttribute("lineDistance",new kt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,o=this.matrixWorld,n=e.params.Line.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),o1.copy(i.boundingSphere),o1.applyMatrix4(o),o1.radius+=n,e.ray.intersectsSphere(o1)===!1)return;A6.copy(o).invert(),qC.copy(e.ray).applyMatrix4(A6);const a=n/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new Q,u=new Q,d=new Q,h=new Q,p=this.isLineSegments?2:1,m=i.index,g=i.attributes.position;if(m!==null){const v=Math.max(0,s.start),y=Math.min(m.count,s.start+s.count);for(let b=v,x=y-1;b<x;b+=p){const _=m.getX(b),S=m.getX(b+1);if(c.fromBufferAttribute(g,_),u.fromBufferAttribute(g,S),qC.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,s.start),y=Math.min(g.count,s.start+s.count);for(let b=v,x=y-1;b<x;b+=p){if(c.fromBufferAttribute(g,b),u.fromBufferAttribute(g,b+1),qC.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const _=e.ray.origin.distanceTo(h);_<e.near||_>e.far||t.push({distance:_,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,n=i.length;o<n;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}}const R6=new Q,L6=new Q;class Aa extends zo{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let o=0,n=t.count;o<n;o+=2)R6.fromBufferAttribute(t,o),L6.fromBufferAttribute(t,o+1),i[o]=o===0?0:i[o-1],i[o+1]=i[o]+R6.distanceTo(L6);e.setAttribute("lineDistance",new kt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class O6 extends zo{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Td extends ai{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new bt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const k6=new Xt,XC=new gd,n1=new Jn,s1=new Q;class I6 extends mr{constructor(e=new dr,t=new Td){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,o=this.matrixWorld,n=e.params.Points.threshold,s=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),n1.copy(i.boundingSphere),n1.applyMatrix4(o),n1.radius+=n,e.ray.intersectsSphere(n1)===!1)return;k6.copy(o).invert(),XC.copy(e.ray).applyMatrix4(k6);const a=n/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,u=i.attributes.position;if(c!==null){const d=Math.max(0,s.start),h=Math.min(c.count,s.start+s.count);for(let p=d,m=h;p<m;p++){const g=c.getX(p);s1.fromBufferAttribute(u,g),P6(s1,g,l,o,e,t,this)}}else{const d=Math.max(0,s.start),h=Math.min(u.count,s.start+s.count);for(let p=d,m=h;p<m;p++)s1.fromBufferAttribute(u,p),P6(s1,p,l,o,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,n=i.length;o<n;o++){const s=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[s]=o}}}}}function P6(r,e,t,i,o,n,s){const a=XC.distanceSqToPoint(r);if(a<t){const l=new Q;XC.closestPointToPoint(r,l),l.applyMatrix4(i);const c=o.ray.origin.distanceTo(l);if(c<o.near||c>o.far)return;n.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}class D6 extends mi{constructor(e,t,i,o,n,s,a,l,c){super(e,t,i,o,n,s,a,l,c),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:oi,this.magFilter=n!==void 0?n:oi,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class a1 extends mi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Nr,this.minFilter=Nr,this.generateMipmaps=!1,this.needsUpdate=!0}}class Ov extends mi{constructor(e,t,i,o,n,s,a,l,c,u,d,h){super(null,s,a,l,c,u,o,n,d,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class B6 extends Ov{constructor(e,t,i,o,n,s){super(e,t,i,n,s),this.isCompressedArrayTexture=!0,this.image.depth=o,this.wrapR=oo}}class zLe extends Ov{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Ms),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class KC extends mi{constructor(e,t,i,o,n,s,a,l,c){super(e,t,i,o,n,s,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Qs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,o=this.getPoint(0),n=0;t.push(0);for(let s=1;s<=e;s++)i=this.getPoint(s/e),n+=i.distanceTo(o),t.push(n),o=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let o=0;const n=i.length;let s;t?s=t:s=e*i[n-1];let a=0,l=n-1,c;for(;a<=l;)if(o=Math.floor(a+(l-a)/2),c=i[o]-s,c<0)a=o+1;else if(c>0)l=o-1;else{l=o;break}if(o=l,i[o]===s)return o/(n-1);const u=i[o],d=i[o+1]-u,h=(s-u)/d;return(o+h)/(n-1)}getTangent(e,t){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const n=this.getPoint(i),s=this.getPoint(o),a=t||(n.isVector2?new We:new Q);return a.copy(s).sub(n).normalize(),a}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new Q,o=[],n=[],s=[],a=new Q,l=new Xt;for(let p=0;p<=e;p++){const m=p/e;o[p]=this.getTangentAt(m,new Q)}n[0]=new Q,s[0]=new Q;let c=Number.MAX_VALUE;const u=Math.abs(o[0].x),d=Math.abs(o[0].y),h=Math.abs(o[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(o[0],i).normalize(),n[0].crossVectors(o[0],a),s[0].crossVectors(o[0],n[0]);for(let p=1;p<=e;p++){if(n[p]=n[p-1].clone(),s[p]=s[p-1].clone(),a.crossVectors(o[p-1],o[p]),a.length()>Number.EPSILON){a.normalize();const m=Math.acos(xi(o[p-1].dot(o[p]),-1,1));n[p].applyMatrix4(l.makeRotationAxis(a,m))}s[p].crossVectors(o[p],n[p])}if(t===!0){let p=Math.acos(xi(n[0].dot(n[e]),-1,1));p/=e,o[0].dot(a.crossVectors(n[0],n[e]))>0&&(p=-p);for(let m=1;m<=e;m++)n[m].applyMatrix4(l.makeRotationAxis(o[m],p*m)),s[m].crossVectors(o[m],n[m])}return{tangents:o,normals:n,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class l1 extends Qs{constructor(e=0,t=0,i=1,o=1,n=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=o,this.aStartAngle=n,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new We,o=Math.PI*2;let n=this.aEndAngle-this.aStartAngle;const s=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=o;for(;n>o;)n-=o;n<Number.EPSILON&&(s?n=0:n=o),this.aClockwise===!0&&!s&&(n===o?n=-o:n=n-o);const a=this.aStartAngle+e*n;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,p=c-this.aY;l=h*u-p*d+this.aX,c=h*d+p*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class F6 extends l1{constructor(e,t,i,o,n,s){super(e,t,i,i,o,n,s),this.isArcCurve=!0,this.type="ArcCurve"}}function YC(){let r=0,e=0,t=0,i=0;function o(n,s,a,l){r=n,e=a,t=-3*n+3*s-2*a-l,i=2*n-2*s+a+l}return{initCatmullRom:function(n,s,a,l,c){o(s,a,c*(a-n),c*(l-s))},initNonuniformCatmullRom:function(n,s,a,l,c,u,d){let h=(s-n)/c-(a-n)/(c+u)+(a-s)/u,p=(a-s)/u-(l-s)/(u+d)+(l-a)/d;h*=u,p*=u,o(s,a,h,p)},calc:function(n){const s=n*n,a=s*n;return r+e*n+t*s+i*a}}}const c1=new Q,JC=new YC,ZC=new YC,QC=new YC;class U6 extends Qs{constructor(e=[],t=!1,i="centripetal",o=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=o}getPoint(e,t=new Q){const i=t,o=this.points,n=o.length,s=(n-(this.closed?0:1))*e;let a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/n)+1)*n:l===0&&a===n-1&&(a=n-2,l=1);let c,u;this.closed||a>0?c=o[(a-1)%n]:(c1.subVectors(o[0],o[1]).add(o[0]),c=c1);const d=o[a%n],h=o[(a+1)%n];if(this.closed||a+2<n?u=o[(a+2)%n]:(c1.subVectors(o[n-1],o[n-2]).add(o[n-1]),u=c1),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let m=Math.pow(c.distanceToSquared(d),p),g=Math.pow(d.distanceToSquared(h),p),v=Math.pow(h.distanceToSquared(u),p);g<1e-4&&(g=1),m<1e-4&&(m=g),v<1e-4&&(v=g),JC.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,m,g,v),ZC.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,m,g,v),QC.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,m,g,v)}else this.curveType==="catmullrom"&&(JC.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),ZC.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),QC.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return i.set(JC.calc(l),ZC.calc(l),QC.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const o=e.points[t];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const o=this.points[t];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const o=e.points[t];this.points.push(new Q().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function z6(r,e,t,i,o){const n=(i-e)*.5,s=(o-t)*.5,a=r*r,l=r*a;return(2*t-2*i+n+s)*l+(-3*t+3*i-2*n-s)*a+n*r+t}function VLe(r,e){const t=1-r;return t*t*e}function GLe(r,e){return 2*(1-r)*r*e}function HLe(r,e){return r*r*e}function kv(r,e,t,i){return VLe(r,e)+GLe(r,t)+HLe(r,i)}function jLe(r,e){const t=1-r;return t*t*t*e}function $Le(r,e){const t=1-r;return 3*t*t*r*e}function WLe(r,e){return 3*(1-r)*r*r*e}function qLe(r,e){return r*r*r*e}function Iv(r,e,t,i,o){return jLe(r,e)+$Le(r,t)+WLe(r,i)+qLe(r,o)}class eN extends Qs{constructor(e=new We,t=new We,i=new We,o=new We){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=o}getPoint(e,t=new We){const i=t,o=this.v0,n=this.v1,s=this.v2,a=this.v3;return i.set(Iv(e,o.x,n.x,s.x,a.x),Iv(e,o.y,n.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class tN extends Qs{constructor(e=new Q,t=new Q,i=new Q,o=new Q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=o}getPoint(e,t=new Q){const i=t,o=this.v0,n=this.v1,s=this.v2,a=this.v3;return i.set(Iv(e,o.x,n.x,s.x,a.x),Iv(e,o.y,n.y,s.y,a.y),Iv(e,o.z,n.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rN extends Qs{constructor(e=new We,t=new We){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new We){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new We){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class V6 extends Qs{constructor(e=new Q,t=new Q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Q){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class iN extends Qs{constructor(e=new We,t=new We,i=new We){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new We){const i=t,o=this.v0,n=this.v1,s=this.v2;return i.set(kv(e,o.x,n.x,s.x),kv(e,o.y,n.y,s.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oN extends Qs{constructor(e=new Q,t=new Q,i=new Q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Q){const i=t,o=this.v0,n=this.v1,s=this.v2;return i.set(kv(e,o.x,n.x,s.x),kv(e,o.y,n.y,s.y),kv(e,o.z,n.z,s.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class nN extends Qs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new We){const i=t,o=this.points,n=(o.length-1)*e,s=Math.floor(n),a=n-s,l=o[s===0?s:s-1],c=o[s],u=o[s>o.length-2?o.length-1:s+1],d=o[s>o.length-3?o.length-1:s+2];return i.set(z6(a,l.x,c.x,u.x,d.x),z6(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const o=e.points[t];this.points.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const o=this.points[t];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const o=e.points[t];this.points.push(new We().fromArray(o))}return this}}var u1=Object.freeze({__proto__:null,ArcCurve:F6,CatmullRomCurve3:U6,CubicBezierCurve:eN,CubicBezierCurve3:tN,EllipseCurve:l1,LineCurve:rN,LineCurve3:V6,QuadraticBezierCurve:iN,QuadraticBezierCurve3:oN,SplineCurve:nN});class G6 extends Qs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new u1[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),o=this.getCurveLengths();let n=0;for(;n<o.length;){if(o[n]>=i){const s=o[n]-i,a=this.curves[n],l=a.getLength(),c=l===0?0:1-s/l;return a.getPointAt(c,t)}n++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,o=this.curves.length;i<o;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let o=0,n=this.curves;o<n.length;o++){const s=n[o],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const o=e.curves[t];this.curves.push(o.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const o=this.curves[t];e.curves.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const o=e.curves[t];this.curves.push(new u1[o.type]().fromJSON(o))}return this}}class Pv extends G6{constructor(e){super(),this.type="Path",this.currentPoint=new We,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new rN(this.currentPoint.clone(),new We(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,o){const n=new iN(this.currentPoint.clone(),new We(e,t),new We(i,o));return this.curves.push(n),this.currentPoint.set(i,o),this}bezierCurveTo(e,t,i,o,n,s){const a=new eN(this.currentPoint.clone(),new We(e,t),new We(i,o),new We(n,s));return this.curves.push(a),this.currentPoint.set(n,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new nN(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,o,n,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,o,n,s),this}absarc(e,t,i,o,n,s){return this.absellipse(e,t,i,i,o,n,s),this}ellipse(e,t,i,o,n,s,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,o,n,s,a,l),this}absellipse(e,t,i,o,n,s,a,l){const c=new l1(e,t,i,o,n,s,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Dv extends dr{constructor(e=[new We(0,-.5),new We(.5,0),new We(0,.5)],t=12,i=0,o=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:o},t=Math.floor(t),o=xi(o,0,Math.PI*2);const n=[],s=[],a=[],l=[],c=[],u=1/t,d=new Q,h=new We,p=new Q,m=new Q,g=new Q;let v=0,y=0;for(let b=0;b<=e.length-1;b++)switch(b){case 0:v=e[b+1].x-e[b].x,y=e[b+1].y-e[b].y,p.x=y*1,p.y=-v,p.z=y*0,g.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:v=e[b+1].x-e[b].x,y=e[b+1].y-e[b].y,p.x=y*1,p.y=-v,p.z=y*0,m.copy(p),p.x+=g.x,p.y+=g.y,p.z+=g.z,p.normalize(),l.push(p.x,p.y,p.z),g.copy(m)}for(let b=0;b<=t;b++){const x=i+b*u*o,_=Math.sin(x),S=Math.cos(x);for(let w=0;w<=e.length-1;w++){d.x=e[w].x*_,d.y=e[w].y,d.z=e[w].x*S,s.push(d.x,d.y,d.z),h.x=b/t,h.y=w/(e.length-1),a.push(h.x,h.y);const M=l[3*w+0]*_,T=l[3*w+1],E=l[3*w+0]*S;c.push(M,T,E)}}for(let b=0;b<t;b++)for(let x=0;x<e.length-1;x++){const _=x+b*e.length,S=_,w=_+e.length,M=_+e.length+1,T=_+1;n.push(S,w,T),n.push(M,T,w)}this.setIndex(n),this.setAttribute("position",new kt(s,3)),this.setAttribute("uv",new kt(a,2)),this.setAttribute("normal",new kt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dv(e.points,e.segments,e.phiStart,e.phiLength)}}class d1 extends Dv{constructor(e=1,t=1,i=4,o=8){const n=new Pv;n.absarc(0,-t/2,e,Math.PI*1.5,0),n.absarc(0,t/2,e,0,Math.PI*.5),super(n.getPoints(i),o),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:o}}static fromJSON(e){return new d1(e.radius,e.length,e.capSegments,e.radialSegments)}}class h1 extends dr{constructor(e=1,t=32,i=0,o=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:o},t=Math.max(3,t);const n=[],s=[],a=[],l=[],c=new Q,u=new We;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=t;d++,h+=3){const p=i+d/t*o;c.x=e*Math.cos(p),c.y=e*Math.sin(p),s.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(s[h]/e+1)/2,u.y=(s[h+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)n.push(d,d+1,0);this.setIndex(n),this.setAttribute("position",new kt(s,3)),this.setAttribute("normal",new kt(a,3)),this.setAttribute("uv",new kt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new h1(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Ui extends dr{constructor(e=1,t=1,i=1,o=32,n=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:o,heightSegments:n,openEnded:s,thetaStart:a,thetaLength:l};const c=this;o=Math.floor(o),n=Math.floor(n);const u=[],d=[],h=[],p=[];let m=0;const g=[],v=i/2;let y=0;b(),s===!1&&(e>0&&x(!0),t>0&&x(!1)),this.setIndex(u),this.setAttribute("position",new kt(d,3)),this.setAttribute("normal",new kt(h,3)),this.setAttribute("uv",new kt(p,2));function b(){const _=new Q,S=new Q;let w=0;const M=(t-e)/i;for(let T=0;T<=n;T++){const E=[],C=T/n,B=C*(t-e)+e;for(let I=0;I<=o;I++){const L=I/o,P=L*l+a,U=Math.sin(P),G=Math.cos(P);S.x=B*U,S.y=-C*i+v,S.z=B*G,d.push(S.x,S.y,S.z),_.set(U,M,G).normalize(),h.push(_.x,_.y,_.z),p.push(L,1-C),E.push(m++)}g.push(E)}for(let T=0;T<o;T++)for(let E=0;E<n;E++){const C=g[E][T],B=g[E+1][T],I=g[E+1][T+1],L=g[E][T+1];u.push(C,B,L),u.push(B,I,L),w+=6}c.addGroup(y,w,0),y+=w}function x(_){const S=m,w=new We,M=new Q;let T=0;const E=_===!0?e:t,C=_===!0?1:-1;for(let I=1;I<=o;I++)d.push(0,v*C,0),h.push(0,C,0),p.push(.5,.5),m++;const B=m;for(let I=0;I<=o;I++){const L=I/o*l+a,P=Math.cos(L),U=Math.sin(L);M.x=E*U,M.y=v*C,M.z=E*P,d.push(M.x,M.y,M.z),h.push(0,C,0),w.x=P*.5+.5,w.y=U*.5*C+.5,p.push(w.x,w.y),m++}for(let I=0;I<o;I++){const L=S+I,P=B+I;_===!0?u.push(P,P+1,L):u.push(P+1,P,L),T+=3}c.addGroup(y,T,_===!0?1:2),y+=T}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ui(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class p1 extends Ui{constructor(e=1,t=1,i=32,o=1,n=!1,s=0,a=Math.PI*2){super(0,e,t,i,o,n,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:o,openEnded:n,thetaStart:s,thetaLength:a}}static fromJSON(e){return new p1(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Pc extends dr{constructor(e=[],t=[],i=1,o=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:o};const n=[],s=[];a(o),c(i),u(),this.setAttribute("position",new kt(n,3)),this.setAttribute("normal",new kt(n.slice(),3)),this.setAttribute("uv",new kt(s,2)),o===0?this.computeVertexNormals():this.normalizeNormals();function a(b){const x=new Q,_=new Q,S=new Q;for(let w=0;w<t.length;w+=3)p(t[w+0],x),p(t[w+1],_),p(t[w+2],S),l(x,_,S,b)}function l(b,x,_,S){const w=S+1,M=[];for(let T=0;T<=w;T++){M[T]=[];const E=b.clone().lerp(_,T/w),C=x.clone().lerp(_,T/w),B=w-T;for(let I=0;I<=B;I++)I===0&&T===w?M[T][I]=E:M[T][I]=E.clone().lerp(C,I/B)}for(let T=0;T<w;T++)for(let E=0;E<2*(w-T)-1;E++){const C=Math.floor(E/2);E%2===0?(h(M[T][C+1]),h(M[T+1][C]),h(M[T][C])):(h(M[T][C+1]),h(M[T+1][C+1]),h(M[T+1][C]))}}function c(b){const x=new Q;for(let _=0;_<n.length;_+=3)x.x=n[_+0],x.y=n[_+1],x.z=n[_+2],x.normalize().multiplyScalar(b),n[_+0]=x.x,n[_+1]=x.y,n[_+2]=x.z}function u(){const b=new Q;for(let x=0;x<n.length;x+=3){b.x=n[x+0],b.y=n[x+1],b.z=n[x+2];const _=v(b)/2/Math.PI+.5,S=y(b)/Math.PI+.5;s.push(_,1-S)}m(),d()}function d(){for(let b=0;b<s.length;b+=6){const x=s[b+0],_=s[b+2],S=s[b+4],w=Math.max(x,_,S),M=Math.min(x,_,S);w>.9&&M<.1&&(x<.2&&(s[b+0]+=1),_<.2&&(s[b+2]+=1),S<.2&&(s[b+4]+=1))}}function h(b){n.push(b.x,b.y,b.z)}function p(b,x){const _=b*3;x.x=e[_+0],x.y=e[_+1],x.z=e[_+2]}function m(){const b=new Q,x=new Q,_=new Q,S=new Q,w=new We,M=new We,T=new We;for(let E=0,C=0;E<n.length;E+=9,C+=6){b.set(n[E+0],n[E+1],n[E+2]),x.set(n[E+3],n[E+4],n[E+5]),_.set(n[E+6],n[E+7],n[E+8]),w.set(s[C+0],s[C+1]),M.set(s[C+2],s[C+3]),T.set(s[C+4],s[C+5]),S.copy(b).add(x).add(_).divideScalar(3);const B=v(S);g(w,C+0,b,B),g(M,C+2,x,B),g(T,C+4,_,B)}}function g(b,x,_,S){S<0&&b.x===1&&(s[x]=b.x-1),_.x===0&&_.z===0&&(s[x]=S/2/Math.PI+.5)}function v(b){return Math.atan2(b.z,-b.x)}function y(b){return Math.atan2(-b.y,Math.sqrt(b.x*b.x+b.z*b.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pc(e.vertices,e.indices,e.radius,e.details)}}class f1 extends Pc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,o=1/i,n=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-i,0,-o,i,0,o,-i,0,o,i,-o,-i,0,-o,i,0,o,-i,0,o,i,0,-i,0,-o,i,0,-o,-i,0,o,i,0,o],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(n,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new f1(e.radius,e.detail)}}const m1=new Q,g1=new Q,sN=new Q,v1=new Ln;class H6 extends dr{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),o=Math.cos(pd*t),n=e.getIndex(),s=e.getAttribute("position"),a=n?n.count:s.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let p=0;p<a;p+=3){n?(l[0]=n.getX(p),l[1]=n.getX(p+1),l[2]=n.getX(p+2)):(l[0]=p,l[1]=p+1,l[2]=p+2);const{a:m,b:g,c:v}=v1;if(m.fromBufferAttribute(s,l[0]),g.fromBufferAttribute(s,l[1]),v.fromBufferAttribute(s,l[2]),v1.getNormal(sN),u[0]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,u[1]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,u[2]=`${Math.round(v.x*i)},${Math.round(v.y*i)},${Math.round(v.z*i)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let y=0;y<3;y++){const b=(y+1)%3,x=u[y],_=u[b],S=v1[c[y]],w=v1[c[b]],M=`${x}_${_}`,T=`${_}_${x}`;T in d&&d[T]?(sN.dot(d[T].normal)<=o&&(h.push(S.x,S.y,S.z),h.push(w.x,w.y,w.z)),d[T]=null):M in d||(d[M]={index0:l[y],index1:l[b],normal:sN.clone()})}}for(const p in d)if(d[p]){const{index0:m,index1:g}=d[p];m1.fromBufferAttribute(s,m),g1.fromBufferAttribute(s,g),h.push(m1.x,m1.y,m1.z),h.push(g1.x,g1.y,g1.z)}this.setAttribute("position",new kt(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Ed extends Pv{constructor(e){super(e),this.uuid=Kn(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,o=this.holes.length;i<o;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const o=e.holes[t];this.holes.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const o=this.holes[t];e.holes.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const o=e.holes[t];this.holes.push(new Pv().fromJSON(o))}return this}}const XLe={triangulate:function(r,e,t=2){const i=e&&e.length,o=i?e[0]*t:r.length;let n=j6(r,0,o,t,!0);const s=[];if(!n||n.next===n.prev)return s;let a,l,c,u,d,h,p;if(i&&(n=QLe(r,e,n,t)),r.length>80*t){a=c=r[0],l=u=r[1];for(let m=t;m<o;m+=t)d=r[m],h=r[m+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);p=Math.max(c-a,u-l),p=p!==0?32767/p:0}return Bv(n,s,t,a,l,p,0),s}};function j6(r,e,t,i,o){let n,s;if(o===uOe(r,e,t,i)>0)for(n=e;n<t;n+=i)s=q6(n,r[n],r[n+1],s);else for(n=t-i;n>=e;n-=i)s=q6(n,r[n],r[n+1],s);return s&&y1(s,s.next)&&(Uv(s),s=s.next),s}function Cd(r,e){if(!r)return r;e||(e=r);let t=r,i;do if(i=!1,!t.steiner&&(y1(t,t.next)||vi(t.prev,t,t.next)===0)){if(Uv(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Bv(r,e,t,i,o,n,s){if(!r)return;!s&&n&&oOe(r,i,o,n);let a=r,l,c;for(;r.prev!==r.next;){if(l=r.prev,c=r.next,n?YLe(r,i,o,n):KLe(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(c.i/t|0),Uv(r),r=c.next,a=c.next;continue}if(r=c,r===a){s?s===1?(r=JLe(Cd(r),e,t),Bv(r,e,t,i,o,n,2)):s===2&&ZLe(r,e,t,i,o,n):Bv(Cd(r),e,t,i,o,n,1);break}}}function KLe(r){const e=r.prev,t=r,i=r.next;if(vi(e,t,i)>=0)return!1;const o=e.x,n=t.x,s=i.x,a=e.y,l=t.y,c=i.y,u=o<n?o<s?o:s:n<s?n:s,d=a<l?a<c?a:c:l<c?l:c,h=o>n?o>s?o:s:n>s?n:s,p=a>l?a>c?a:c:l>c?l:c;let m=i.next;for(;m!==e;){if(m.x>=u&&m.x<=h&&m.y>=d&&m.y<=p&&df(o,a,n,l,s,c,m.x,m.y)&&vi(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function YLe(r,e,t,i){const o=r.prev,n=r,s=r.next;if(vi(o,n,s)>=0)return!1;const a=o.x,l=n.x,c=s.x,u=o.y,d=n.y,h=s.y,p=a<l?a<c?a:c:l<c?l:c,m=u<d?u<h?u:h:d<h?d:h,g=a>l?a>c?a:c:l>c?l:c,v=u>d?u>h?u:h:d>h?d:h,y=aN(p,m,e,t,i),b=aN(g,v,e,t,i);let x=r.prevZ,_=r.nextZ;for(;x&&x.z>=y&&_&&_.z<=b;){if(x.x>=p&&x.x<=g&&x.y>=m&&x.y<=v&&x!==o&&x!==s&&df(a,u,l,d,c,h,x.x,x.y)&&vi(x.prev,x,x.next)>=0||(x=x.prevZ,_.x>=p&&_.x<=g&&_.y>=m&&_.y<=v&&_!==o&&_!==s&&df(a,u,l,d,c,h,_.x,_.y)&&vi(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;x&&x.z>=y;){if(x.x>=p&&x.x<=g&&x.y>=m&&x.y<=v&&x!==o&&x!==s&&df(a,u,l,d,c,h,x.x,x.y)&&vi(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;_&&_.z<=b;){if(_.x>=p&&_.x<=g&&_.y>=m&&_.y<=v&&_!==o&&_!==s&&df(a,u,l,d,c,h,_.x,_.y)&&vi(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function JLe(r,e,t){let i=r;do{const o=i.prev,n=i.next.next;!y1(o,n)&&$6(o,i,i.next,n)&&Fv(o,n)&&Fv(n,o)&&(e.push(o.i/t|0),e.push(i.i/t|0),e.push(n.i/t|0),Uv(i),Uv(i.next),i=r=n),i=i.next}while(i!==r);return Cd(i)}function ZLe(r,e,t,i,o,n){let s=r;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&aOe(s,a)){let l=W6(s,a);s=Cd(s,s.next),l=Cd(l,l.next),Bv(s,e,t,i,o,n,0),Bv(l,e,t,i,o,n,0);return}a=a.next}s=s.next}while(s!==r)}function QLe(r,e,t,i){const o=[];let n,s,a,l,c;for(n=0,s=e.length;n<s;n++)a=e[n]*i,l=n<s-1?e[n+1]*i:r.length,c=j6(r,a,l,i,!1),c===c.next&&(c.steiner=!0),o.push(sOe(c));for(o.sort(eOe),n=0;n<o.length;n++)t=tOe(o[n],t);return t}function eOe(r,e){return r.x-e.x}function tOe(r,e){const t=rOe(r,e);if(!t)return e;const i=W6(t,r);return Cd(i,i.next),Cd(t,t.next)}function rOe(r,e){let t=e,i=-1/0,o;const n=r.x,s=r.y;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const h=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=n&&h>i&&(i=h,o=t.x<t.next.x?t:t.next,h===n))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,c=o.y;let u=1/0,d;t=o;do n>=t.x&&t.x>=l&&n!==t.x&&df(s<c?n:i,s,l,c,s<c?i:n,s,t.x,t.y)&&(d=Math.abs(s-t.y)/(n-t.x),Fv(t,r)&&(d<u||d===u&&(t.x>o.x||t.x===o.x&&iOe(o,t)))&&(o=t,u=d)),t=t.next;while(t!==a);return o}function iOe(r,e){return vi(r.prev,r,e.prev)<0&&vi(e.next,r,r.next)<0}function oOe(r,e,t,i){let o=r;do o.z===0&&(o.z=aN(o.x,o.y,e,t,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==r);o.prevZ.nextZ=null,o.prevZ=null,nOe(o)}function nOe(r){let e,t,i,o,n,s,a,l,c=1;do{for(t=r,r=null,n=null,s=0;t;){for(s++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(o=t,t=t.nextZ,a--):(o=i,i=i.nextZ,l--),n?n.nextZ=o:r=o,o.prevZ=n,n=o;t=i}n.nextZ=null,c*=2}while(s>1);return r}function aN(r,e,t,i,o){return r=(r-t)*o|0,e=(e-i)*o|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function sOe(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function df(r,e,t,i,o,n,s,a){return(o-s)*(e-a)>=(r-s)*(n-a)&&(r-s)*(i-a)>=(t-s)*(e-a)&&(t-s)*(n-a)>=(o-s)*(i-a)}function aOe(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!lOe(r,e)&&(Fv(r,e)&&Fv(e,r)&&cOe(r,e)&&(vi(r.prev,r,e.prev)||vi(r,e.prev,e))||y1(r,e)&&vi(r.prev,r,r.next)>0&&vi(e.prev,e,e.next)>0)}function vi(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function y1(r,e){return r.x===e.x&&r.y===e.y}function $6(r,e,t,i){const o=x1(vi(r,e,t)),n=x1(vi(r,e,i)),s=x1(vi(t,i,r)),a=x1(vi(t,i,e));return!!(o!==n&&s!==a||o===0&&b1(r,t,e)||n===0&&b1(r,i,e)||s===0&&b1(t,r,i)||a===0&&b1(t,e,i))}function b1(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function x1(r){return r>0?1:r<0?-1:0}function lOe(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&$6(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Fv(r,e){return vi(r.prev,r,r.next)<0?vi(r,e,r.next)>=0&&vi(r,r.prev,e)>=0:vi(r,e,r.prev)<0||vi(r,r.next,e)<0}function cOe(r,e){let t=r,i=!1;const o=(r.x+e.x)/2,n=(r.y+e.y)/2;do t.y>n!=t.next.y>n&&t.next.y!==t.y&&o<(t.next.x-t.x)*(n-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==r);return i}function W6(r,e){const t=new lN(r.i,r.x,r.y),i=new lN(e.i,e.x,e.y),o=r.next,n=e.prev;return r.next=e,e.prev=r,t.next=o,o.prev=t,i.next=t,t.prev=i,n.next=i,i.prev=n,i}function q6(r,e,t,i){const o=new lN(r,e,t);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function Uv(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function lN(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function uOe(r,e,t,i){let o=0;for(let n=e,s=t-i;n<t;n+=i)o+=(r[s]-r[n])*(r[n+1]+r[s+1]),s=n;return o}class Ra{static area(e){const t=e.length;let i=0;for(let o=t-1,n=0;n<t;o=n++)i+=e[o].x*e[n].y-e[n].x*e[o].y;return i*.5}static isClockWise(e){return Ra.area(e)<0}static triangulateShape(e,t){const i=[],o=[],n=[];X6(e),K6(i,e);let s=e.length;t.forEach(X6);for(let l=0;l<t.length;l++)o.push(s),s+=t[l].length,K6(i,t[l]);const a=XLe.triangulate(i,o);for(let l=0;l<a.length;l+=3)n.push(a.slice(l,l+3));return n}}function X6(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function K6(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class _1 extends dr{constructor(e=new Ed([new We(.5,.5),new We(-.5,.5),new We(-.5,-.5),new We(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,o=[],n=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];s(c)}this.setAttribute("position",new kt(o,3)),this.setAttribute("uv",new kt(n,2)),this.computeVertexNormals();function s(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,m=t.bevelSize!==void 0?t.bevelSize:p-.1,g=t.bevelOffset!==void 0?t.bevelOffset:0,v=t.bevelSegments!==void 0?t.bevelSegments:3;const y=t.extrudePath,b=t.UVGenerator!==void 0?t.UVGenerator:dOe;let x,_=!1,S,w,M,T;y&&(x=y.getSpacedPoints(u),_=!0,h=!1,S=y.computeFrenetFrames(u,!1),w=new Q,M=new Q,T=new Q),h||(v=0,p=0,m=0,g=0);const E=a.extractPoints(c);let C=E.shape;const B=E.holes;if(!Ra.isClockWise(C)){C=C.reverse();for(let ue=0,D=B.length;ue<D;ue++){const K=B[ue];Ra.isClockWise(K)&&(B[ue]=K.reverse())}}const I=Ra.triangulateShape(C,B),L=C;for(let ue=0,D=B.length;ue<D;ue++){const K=B[ue];C=C.concat(K)}function P(ue,D,K){return D||console.error("THREE.ExtrudeGeometry: vec does not exist"),ue.clone().addScaledVector(D,K)}const U=C.length,G=I.length;function R(ue,D,K){let re,ae,le;const Se=ue.x-D.x,Ae=ue.y-D.y,Ne=K.x-ue.x,Me=K.y-ue.y,Le=Se*Se+Ae*Ae,je=Se*Me-Ae*Ne;if(Math.abs(je)>Number.EPSILON){const Y=Math.sqrt(Le),z=Math.sqrt(Ne*Ne+Me*Me),me=D.x-Ae/Y,Ie=D.y+Se/Y,Ue=K.x-Me/z,Re=K.y+Ne/z,$e=((Ue-me)*Me-(Re-Ie)*Ne)/(Se*Me-Ae*Ne);re=me+Se*$e-ue.x,ae=Ie+Ae*$e-ue.y;const Ve=re*re+ae*ae;if(Ve<=2)return new We(re,ae);le=Math.sqrt(Ve/2)}else{let Y=!1;Se>Number.EPSILON?Ne>Number.EPSILON&&(Y=!0):Se<-Number.EPSILON?Ne<-Number.EPSILON&&(Y=!0):Math.sign(Ae)===Math.sign(Me)&&(Y=!0),Y?(re=-Ae,ae=Se,le=Math.sqrt(Le)):(re=Se,ae=Ae,le=Math.sqrt(Le/2))}return new We(re/le,ae/le)}const F=[];for(let ue=0,D=L.length,K=D-1,re=ue+1;ue<D;ue++,K++,re++)K===D&&(K=0),re===D&&(re=0),F[ue]=R(L[ue],L[K],L[re]);const O=[];let H,$=F.concat();for(let ue=0,D=B.length;ue<D;ue++){const K=B[ue];H=[];for(let re=0,ae=K.length,le=ae-1,Se=re+1;re<ae;re++,le++,Se++)le===ae&&(le=0),Se===ae&&(Se=0),H[re]=R(K[re],K[le],K[Se]);O.push(H),$=$.concat(H)}for(let ue=0;ue<v;ue++){const D=ue/v,K=p*Math.cos(D*Math.PI/2),re=m*Math.sin(D*Math.PI/2)+g;for(let ae=0,le=L.length;ae<le;ae++){const Se=P(L[ae],F[ae],re);xe(Se.x,Se.y,-K)}for(let ae=0,le=B.length;ae<le;ae++){const Se=B[ae];H=O[ae];for(let Ae=0,Ne=Se.length;Ae<Ne;Ae++){const Me=P(Se[Ae],H[Ae],re);xe(Me.x,Me.y,-K)}}}const j=m+g;for(let ue=0;ue<U;ue++){const D=h?P(C[ue],$[ue],j):C[ue];_?(M.copy(S.normals[0]).multiplyScalar(D.x),w.copy(S.binormals[0]).multiplyScalar(D.y),T.copy(x[0]).add(M).add(w),xe(T.x,T.y,T.z)):xe(D.x,D.y,0)}for(let ue=1;ue<=u;ue++)for(let D=0;D<U;D++){const K=h?P(C[D],$[D],j):C[D];_?(M.copy(S.normals[ue]).multiplyScalar(K.x),w.copy(S.binormals[ue]).multiplyScalar(K.y),T.copy(x[ue]).add(M).add(w),xe(T.x,T.y,T.z)):xe(K.x,K.y,d/u*ue)}for(let ue=v-1;ue>=0;ue--){const D=ue/v,K=p*Math.cos(D*Math.PI/2),re=m*Math.sin(D*Math.PI/2)+g;for(let ae=0,le=L.length;ae<le;ae++){const Se=P(L[ae],F[ae],re);xe(Se.x,Se.y,d+K)}for(let ae=0,le=B.length;ae<le;ae++){const Se=B[ae];H=O[ae];for(let Ae=0,Ne=Se.length;Ae<Ne;Ae++){const Me=P(Se[Ae],H[Ae],re);_?xe(Me.x,Me.y+x[u-1].y,x[u-1].x+K):xe(Me.x,Me.y,d+K)}}}J(),ce();function J(){const ue=o.length/3;if(h){let D=0,K=U*D;for(let re=0;re<G;re++){const ae=I[re];te(ae[2]+K,ae[1]+K,ae[0]+K)}D=u+v*2,K=U*D;for(let re=0;re<G;re++){const ae=I[re];te(ae[0]+K,ae[1]+K,ae[2]+K)}}else{for(let D=0;D<G;D++){const K=I[D];te(K[2],K[1],K[0])}for(let D=0;D<G;D++){const K=I[D];te(K[0]+U*u,K[1]+U*u,K[2]+U*u)}}i.addGroup(ue,o.length/3-ue,0)}function ce(){const ue=o.length/3;let D=0;ve(L,D),D+=L.length;for(let K=0,re=B.length;K<re;K++){const ae=B[K];ve(ae,D),D+=ae.length}i.addGroup(ue,o.length/3-ue,1)}function ve(ue,D){let K=ue.length;for(;--K>=0;){const re=K;let ae=K-1;ae<0&&(ae=ue.length-1);for(let le=0,Se=u+v*2;le<Se;le++){const Ae=U*le,Ne=U*(le+1),Me=D+re+Ae,Le=D+ae+Ae,je=D+ae+Ne,Y=D+re+Ne;Z(Me,Le,je,Y)}}}function xe(ue,D,K){l.push(ue),l.push(D),l.push(K)}function te(ue,D,K){de(ue),de(D),de(K);const re=o.length/3,ae=b.generateTopUV(i,o,re-3,re-2,re-1);Ce(ae[0]),Ce(ae[1]),Ce(ae[2])}function Z(ue,D,K,re){de(ue),de(D),de(re),de(D),de(K),de(re);const ae=o.length/3,le=b.generateSideWallUV(i,o,ae-6,ae-3,ae-2,ae-1);Ce(le[0]),Ce(le[1]),Ce(le[3]),Ce(le[1]),Ce(le[2]),Ce(le[3])}function de(ue){o.push(l[ue*3+0]),o.push(l[ue*3+1]),o.push(l[ue*3+2])}function Ce(ue){n.push(ue.x),n.push(ue.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return hOe(t,i,e)}static fromJSON(e,t){const i=[];for(let n=0,s=e.shapes.length;n<s;n++){const a=t[e.shapes[n]];i.push(a)}const o=e.options.extrudePath;return o!==void 0&&(e.options.extrudePath=new u1[o.type]().fromJSON(o)),new _1(i,e.options)}}const dOe={generateTopUV:function(r,e,t,i,o){const n=e[t*3],s=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[o*3],u=e[o*3+1];return[new We(n,s),new We(a,l),new We(c,u)]},generateSideWallUV:function(r,e,t,i,o,n){const s=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],d=e[i*3+2],h=e[o*3],p=e[o*3+1],m=e[o*3+2],g=e[n*3],v=e[n*3+1],y=e[n*3+2];return Math.abs(a-u)<Math.abs(s-c)?[new We(s,1-l),new We(c,1-d),new We(h,1-m),new We(g,1-y)]:[new We(a,1-l),new We(u,1-d),new We(p,1-m),new We(v,1-y)]}};function hOe(r,e,t){if(t.shapes=[],Array.isArray(r))for(let i=0,o=r.length;i<o;i++){const n=r[i];t.shapes.push(n.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class w1 extends Pc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,o=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],n=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(o,n,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new w1(e.radius,e.detail)}}class El extends Pc{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,o,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new El(e.radius,e.detail)}}class S1 extends dr{constructor(e=.5,t=1,i=32,o=1,n=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:o,thetaStart:n,thetaLength:s},i=Math.max(3,i),o=Math.max(1,o);const a=[],l=[],c=[],u=[];let d=e;const h=(t-e)/o,p=new Q,m=new We;for(let g=0;g<=o;g++){for(let v=0;v<=i;v++){const y=n+v/i*s;p.x=d*Math.cos(y),p.y=d*Math.sin(y),l.push(p.x,p.y,p.z),c.push(0,0,1),m.x=(p.x/t+1)/2,m.y=(p.y/t+1)/2,u.push(m.x,m.y)}d+=h}for(let g=0;g<o;g++){const v=g*(i+1);for(let y=0;y<i;y++){const b=y+v,x=b,_=b+i+1,S=b+i+2,w=b+1;a.push(x,_,w),a.push(_,S,w)}}this.setIndex(a),this.setAttribute("position",new kt(l,3)),this.setAttribute("normal",new kt(c,3)),this.setAttribute("uv",new kt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S1(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class M1 extends dr{constructor(e=new Ed([new We(0,.5),new We(-.5,-.5),new We(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],o=[],n=[],s=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new kt(o,3)),this.setAttribute("normal",new kt(n,3)),this.setAttribute("uv",new kt(s,2));function c(u){const d=o.length/3,h=u.extractPoints(t);let p=h.shape;const m=h.holes;Ra.isClockWise(p)===!1&&(p=p.reverse());for(let v=0,y=m.length;v<y;v++){const b=m[v];Ra.isClockWise(b)===!0&&(m[v]=b.reverse())}const g=Ra.triangulateShape(p,m);for(let v=0,y=m.length;v<y;v++){const b=m[v];p=p.concat(b)}for(let v=0,y=p.length;v<y;v++){const b=p[v];o.push(b.x,b.y,0),n.push(0,0,1),s.push(b.x,b.y)}for(let v=0,y=g.length;v<y;v++){const b=g[v],x=b[0]+d,_=b[1]+d,S=b[2]+d;i.push(x,_,S),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return pOe(t,e)}static fromJSON(e,t){const i=[];for(let o=0,n=e.shapes.length;o<n;o++){const s=t[e.shapes[o]];i.push(s)}return new M1(i,e.curveSegments)}}function pOe(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,i=r.length;t<i;t++){const o=r[t];e.shapes.push(o.uuid)}else e.shapes.push(r.uuid);return e}class Dc extends dr{constructor(e=1,t=32,i=16,o=0,n=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:o,phiLength:n,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(s+a,Math.PI);let c=0;const u=[],d=new Q,h=new Q,p=[],m=[],g=[],v=[];for(let y=0;y<=i;y++){const b=[],x=y/i;let _=0;y===0&&s===0?_=.5/t:y===i&&l===Math.PI&&(_=-.5/t);for(let S=0;S<=t;S++){const w=S/t;d.x=-e*Math.cos(o+w*n)*Math.sin(s+x*a),d.y=e*Math.cos(s+x*a),d.z=e*Math.sin(o+w*n)*Math.sin(s+x*a),m.push(d.x,d.y,d.z),h.copy(d).normalize(),g.push(h.x,h.y,h.z),v.push(w+_,1-x),b.push(c++)}u.push(b)}for(let y=0;y<i;y++)for(let b=0;b<t;b++){const x=u[y][b+1],_=u[y][b],S=u[y+1][b],w=u[y+1][b+1];(y!==0||s>0)&&p.push(x,_,w),(y!==i-1||l<Math.PI)&&p.push(_,S,w)}this.setIndex(p),this.setAttribute("position",new kt(m,3)),this.setAttribute("normal",new kt(g,3)),this.setAttribute("uv",new kt(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dc(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class T1 extends Pc{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,o,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new T1(e.radius,e.detail)}}class Cl extends dr{constructor(e=1,t=.4,i=12,o=48,n=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:o,arc:n},i=Math.floor(i),o=Math.floor(o);const s=[],a=[],l=[],c=[],u=new Q,d=new Q,h=new Q;for(let p=0;p<=i;p++)for(let m=0;m<=o;m++){const g=m/o*n,v=p/i*Math.PI*2;d.x=(e+t*Math.cos(v))*Math.cos(g),d.y=(e+t*Math.cos(v))*Math.sin(g),d.z=t*Math.sin(v),a.push(d.x,d.y,d.z),u.x=e*Math.cos(g),u.y=e*Math.sin(g),h.subVectors(d,u).normalize(),l.push(h.x,h.y,h.z),c.push(m/o),c.push(p/i)}for(let p=1;p<=i;p++)for(let m=1;m<=o;m++){const g=(o+1)*p+m-1,v=(o+1)*(p-1)+m-1,y=(o+1)*(p-1)+m,b=(o+1)*p+m;s.push(g,v,b),s.push(v,y,b)}this.setIndex(s),this.setAttribute("position",new kt(a,3)),this.setAttribute("normal",new kt(l,3)),this.setAttribute("uv",new kt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cl(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class E1 extends dr{constructor(e=1,t=.4,i=64,o=8,n=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:o,p:n,q:s},i=Math.floor(i),o=Math.floor(o);const a=[],l=[],c=[],u=[],d=new Q,h=new Q,p=new Q,m=new Q,g=new Q,v=new Q,y=new Q;for(let x=0;x<=i;++x){const _=x/i*n*Math.PI*2;b(_,n,s,e,p),b(_+.01,n,s,e,m),v.subVectors(m,p),y.addVectors(m,p),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize();for(let S=0;S<=o;++S){const w=S/o*Math.PI*2,M=-t*Math.cos(w),T=t*Math.sin(w);d.x=p.x+(M*y.x+T*g.x),d.y=p.y+(M*y.y+T*g.y),d.z=p.z+(M*y.z+T*g.z),l.push(d.x,d.y,d.z),h.subVectors(d,p).normalize(),c.push(h.x,h.y,h.z),u.push(x/i),u.push(S/o)}}for(let x=1;x<=i;x++)for(let _=1;_<=o;_++){const S=(o+1)*(x-1)+(_-1),w=(o+1)*x+(_-1),M=(o+1)*x+_,T=(o+1)*(x-1)+_;a.push(S,w,T),a.push(w,M,T)}this.setIndex(a),this.setAttribute("position",new kt(l,3)),this.setAttribute("normal",new kt(c,3)),this.setAttribute("uv",new kt(u,2));function b(x,_,S,w,M){const T=Math.cos(x),E=Math.sin(x),C=S/_*x,B=Math.cos(C);M.x=w*(2+B)*.5*T,M.y=w*(2+B)*E*.5,M.z=w*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new E1(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class C1 extends dr{constructor(e=new oN(new Q(-1,-1,0),new Q(-1,1,0),new Q(1,1,0)),t=64,i=1,o=8,n=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:o,closed:n};const s=e.computeFrenetFrames(t,n);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new Q,l=new Q,c=new We;let u=new Q;const d=[],h=[],p=[],m=[];g(),this.setIndex(m),this.setAttribute("position",new kt(d,3)),this.setAttribute("normal",new kt(h,3)),this.setAttribute("uv",new kt(p,2));function g(){for(let x=0;x<t;x++)v(x);v(n===!1?t:0),b(),y()}function v(x){u=e.getPointAt(x/t,u);const _=s.normals[x],S=s.binormals[x];for(let w=0;w<=o;w++){const M=w/o*Math.PI*2,T=Math.sin(M),E=-Math.cos(M);l.x=E*_.x+T*S.x,l.y=E*_.y+T*S.y,l.z=E*_.z+T*S.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,d.push(a.x,a.y,a.z)}}function y(){for(let x=1;x<=t;x++)for(let _=1;_<=o;_++){const S=(o+1)*(x-1)+(_-1),w=(o+1)*x+(_-1),M=(o+1)*x+_,T=(o+1)*(x-1)+_;m.push(S,w,T),m.push(w,M,T)}}function b(){for(let x=0;x<=t;x++)for(let _=0;_<=o;_++)c.x=x/t,c.y=_/o,p.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new C1(new u1[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class cN extends dr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,o=new Q,n=new Q;if(e.index!==null){const s=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],h=d.start,p=d.count;for(let m=h,g=h+p;m<g;m+=3)for(let v=0;v<3;v++){const y=a.getX(m+v),b=a.getX(m+(v+1)%3);o.fromBufferAttribute(s,y),n.fromBufferAttribute(s,b),Y6(o,n,i)===!0&&(t.push(o.x,o.y,o.z),t.push(n.x,n.y,n.z))}}}else{const s=e.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;o.fromBufferAttribute(s,u),n.fromBufferAttribute(s,d),Y6(o,n,i)===!0&&(t.push(o.x,o.y,o.z),t.push(n.x,n.y,n.z))}}this.setAttribute("position",new kt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Y6(r,e,t){const i=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,o=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(i)===!0||t.has(o)===!0?!1:(t.add(i),t.add(o),!0)}var J6=Object.freeze({__proto__:null,BoxGeometry:ni,CapsuleGeometry:d1,CircleGeometry:h1,ConeGeometry:p1,CylinderGeometry:Ui,DodecahedronGeometry:f1,EdgesGeometry:H6,ExtrudeGeometry:_1,IcosahedronGeometry:w1,LatheGeometry:Dv,OctahedronGeometry:El,PlaneGeometry:xd,PolyhedronGeometry:Pc,RingGeometry:S1,ShapeGeometry:M1,SphereGeometry:Dc,TetrahedronGeometry:T1,TorusGeometry:Cl,TorusKnotGeometry:E1,TubeGeometry:C1,WireframeGeometry:cN});class uN extends ai{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new bt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class N1 extends gi{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Nd extends ai{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new bt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ys,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hf extends Nd{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new We(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return xi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new bt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new bt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new bt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class A1 extends ai{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new bt(16777215),this.specular=new bt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ys,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class dN extends ai{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new bt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ys,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class R1 extends ai{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ys,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class L1 extends ai{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new bt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new bt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ys,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=yp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hN extends ai{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new bt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ys,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zv extends Fi{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ad(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function Z6(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function Q6(r){function e(o,n){return r[o]-r[n]}const t=r.length,i=new Array(t);for(let o=0;o!==t;++o)i[o]=o;return i.sort(e),i}function pN(r,e,t){const i=r.length,o=new r.constructor(i);for(let n=0,s=0;s!==i;++n){const a=t[n]*e;for(let l=0;l!==e;++l)o[s++]=r[a+l]}return o}function fN(r,e,t,i){let o=1,n=r[0];for(;n!==void 0&&n[i]===void 0;)n=r[o++];if(n===void 0)return;let s=n[i];if(s!==void 0)if(Array.isArray(s))do s=n[i],s!==void 0&&(e.push(n.time),t.push.apply(t,s)),n=r[o++];while(n!==void 0);else if(s.toArray!==void 0)do s=n[i],s!==void 0&&(e.push(n.time),s.toArray(t,t.length)),n=r[o++];while(n!==void 0);else do s=n[i],s!==void 0&&(e.push(n.time),t.push(s)),n=r[o++];while(n!==void 0)}function fOe(r,e,t,i,o=30){const n=r.clone();n.name=e;const s=[];for(let l=0;l<n.tracks.length;++l){const c=n.tracks[l],u=c.getValueSize(),d=[],h=[];for(let p=0;p<c.times.length;++p){const m=c.times[p]*o;if(!(m<t||m>=i)){d.push(c.times[p]);for(let g=0;g<u;++g)h.push(c.values[p*u+g])}}d.length!==0&&(c.times=Ad(d,c.times.constructor),c.values=Ad(h,c.values.constructor),s.push(c))}n.tracks=s;let a=1/0;for(let l=0;l<n.tracks.length;++l)a>n.tracks[l].times[0]&&(a=n.tracks[l].times[0]);for(let l=0;l<n.tracks.length;++l)n.tracks[l].shift(-1*a);return n.resetDuration(),n}function mOe(r,e=0,t=r,i=30){i<=0&&(i=30);const o=t.tracks.length,n=e/i;for(let s=0;s<o;++s){const a=t.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=r.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);const m=a.times.length-1;let g;if(n<=a.times[0]){const y=u,b=d-u;g=a.values.slice(y,b)}else if(n>=a.times[m]){const y=m*d+u,b=y+d-u;g=a.values.slice(y,b)}else{const y=a.createInterpolant(),b=u,x=d-u;y.evaluate(n),g=y.resultBuffer.slice(b,x)}l==="quaternion"&&new jr().fromArray(g).normalize().conjugate().toArray(g);const v=c.times.length;for(let y=0;y<v;++y){const b=y*p+h;if(l==="quaternion")jr.multiplyQuaternionsFlat(c.values,b,g,0,c.values,b);else{const x=p-h*2;for(let _=0;_<x;++_)c.values[b+_]-=g[_]}}}return r.blendMode=qE,r}const gOe={convertArray:Ad,isTypedArray:Z6,getKeyframeOrder:Q6,sortedArray:pN,flattenJSON:fN,subclip:fOe,makeClipAdditive:mOe};class Vv{constructor(e,t,i,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,o=t[i],n=t[i-1];e:{t:{let s;r:{i:if(!(e<o)){for(let a=i+2;;){if(o===void 0){if(e<n)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(n=o,o=t[++i],e<o)break t}s=t.length;break r}if(!(e>=n)){const a=t[1];e<a&&(i=2,n=a);for(let l=i-2;;){if(n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(o=n,n=t[--i-1],e>=n)break t}s=i,i=0;break r}break e}for(;i<s;){const a=i+s>>>1;e<t[a]?s=a:i=a+1}if(o=t[i],n=t[i-1],n===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(o===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,n,o)}return this.interpolate_(i,n,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,o=this.valueSize,n=e*o;for(let s=0;s!==o;++s)t[s]=i[n+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class e5 extends Vv{constructor(e,t,i,o){super(e,t,i,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ud,endingEnd:ud}}intervalChanged_(e,t,i){const o=this.parameterPositions;let n=e-2,s=e+1,a=o[n],l=o[s];if(a===void 0)switch(this.getSettings_().endingStart){case dd:n=e,a=2*t-i;break;case Qg:n=o.length-2,a=t+o[n]-o[n+1];break;default:n=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case dd:s=e,l=2*i-t;break;case Qg:s=1,l=i+o[1]-o[0];break;default:s=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=n*u,this._offsetNext=s*u}interpolate_(e,t,i,o){const n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,p=this._weightNext,m=(i-t)/(o-t),g=m*m,v=g*m,y=-h*v+2*h*g-h*m,b=(1+h)*v+(-1.5-2*h)*g+(-.5+h)*m+1,x=(-1-p)*v+(1.5+p)*g+.5*m,_=p*v-p*g;for(let S=0;S!==a;++S)n[S]=y*s[u+S]+b*s[c+S]+x*s[l+S]+_*s[d+S];return n}}class mN extends Vv{constructor(e,t,i,o){super(e,t,i,o)}interpolate_(e,t,i,o){const n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(o-t),d=1-u;for(let h=0;h!==a;++h)n[h]=s[c+h]*d+s[l+h]*u;return n}}class t5 extends Vv{constructor(e,t,i,o){super(e,t,i,o)}interpolate_(e){return this.copySampleValue_(e-1)}}class ea{constructor(e,t,i,o){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ad(t,this.TimeBufferType),this.values=Ad(i,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ad(e.times,Array),values:Ad(e.values,Array)};const o=e.getInterpolation();o!==e.DefaultInterpolation&&(i.interpolation=o)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new t5(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new mN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new e5(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Jg:t=this.InterpolantFactoryMethodDiscrete;break;case Zg:t=this.InterpolantFactoryMethodLinear;break;case mx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Jg;case this.InterpolantFactoryMethodLinear:return Zg;case this.InterpolantFactoryMethodSmooth:return mx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,o=t.length;i!==o;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,o=t.length;i!==o;++i)t[i]*=e}return this}trim(e,t){const i=this.times,o=i.length;let n=0,s=o-1;for(;n!==o&&i[n]<e;)++n;for(;s!==-1&&i[s]>t;)--s;if(++s,n!==0||s!==o){n>=s&&(s=Math.max(s,1),n=s-1);const a=this.getValueSize();this.times=i.slice(n,s),this.values=this.values.slice(n*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,o=this.values,n=i.length;n===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==n;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(o!==void 0&&Z6(o))for(let a=0,l=o.length;a!==l;++a){const c=o[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),o=this.getInterpolation()===mx,n=e.length-1;let s=1;for(let a=1;a<n;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(o)l=!0;else{const d=a*i,h=d-i,p=d+i;for(let m=0;m!==i;++m){const g=t[d+m];if(g!==t[h+m]||g!==t[p+m]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const d=a*i,h=s*i;for(let p=0;p!==i;++p)t[h+p]=t[d+p]}++s}}if(n>0){e[s]=e[n];for(let a=n*i,l=s*i,c=0;c!==i;++c)t[l+c]=t[a+c];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,o=new i(this.name,e,t);return o.createInterpolant=this.createInterpolant,o}}ea.prototype.TimeBufferType=Float32Array,ea.prototype.ValueBufferType=Float32Array,ea.prototype.DefaultInterpolation=Zg;class Rd extends ea{}Rd.prototype.ValueTypeName="bool",Rd.prototype.ValueBufferType=Array,Rd.prototype.DefaultInterpolation=Jg,Rd.prototype.InterpolantFactoryMethodLinear=void 0,Rd.prototype.InterpolantFactoryMethodSmooth=void 0;class gN extends ea{}gN.prototype.ValueTypeName="color";class Gv extends ea{}Gv.prototype.ValueTypeName="number";class r5 extends Vv{constructor(e,t,i,o){super(e,t,i,o)}interpolate_(e,t,i,o){const n=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(i-t)/(o-t);let c=e*a;for(let u=c+a;c!==u;c+=4)jr.slerpFlat(n,0,s,c-a,s,c,l);return n}}class pf extends ea{InterpolantFactoryMethodLinear(e){return new r5(this.times,this.values,this.getValueSize(),e)}}pf.prototype.ValueTypeName="quaternion",pf.prototype.DefaultInterpolation=Zg,pf.prototype.InterpolantFactoryMethodSmooth=void 0;class Ld extends ea{}Ld.prototype.ValueTypeName="string",Ld.prototype.ValueBufferType=Array,Ld.prototype.DefaultInterpolation=Jg,Ld.prototype.InterpolantFactoryMethodLinear=void 0,Ld.prototype.InterpolantFactoryMethodSmooth=void 0;class Hv extends ea{}Hv.prototype.ValueTypeName="vector";class jv{constructor(e,t=-1,i,o=gx){this.name=e,this.tracks=i,this.duration=t,this.blendMode=o,this.uuid=Kn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,o=1/(e.fps||1);for(let s=0,a=i.length;s!==a;++s)t.push(yOe(i[s]).scale(o));const n=new this(e.name,e.duration,t,e.blendMode);return n.uuid=e.uuid,n}static toJSON(e){const t=[],i=e.tracks,o={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let n=0,s=i.length;n!==s;++n)t.push(ea.toJSON(i[n]));return o}static CreateFromMorphTargetSequence(e,t,i,o){const n=t.length,s=[];for(let a=0;a<n;a++){let l=[],c=[];l.push((a+n-1)%n,a,(a+1)%n),c.push(0,1,0);const u=Q6(l);l=pN(l,1,u),c=pN(c,1,u),!o&&l[0]===0&&(l.push(n),c.push(c[0])),s.push(new Gv(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,s)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const o=e;i=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<i.length;o++)if(i[o].name===t)return i[o];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const o={},n=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(n);if(u&&u.length>1){const d=u[1];let h=o[d];h||(o[d]=h=[]),h.push(c)}}const s=[];for(const a in o)s.push(this.CreateFromMorphTargetSequence(a,o[a],t,i));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(u,d,h,p,m){if(h.length!==0){const g=[],v=[];fN(h,g,v,p),g.length!==0&&m.push(new u(d,g,v))}},o=[],n=e.name||"default",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const d=c[u].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const h={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let m=0;m<d[p].morphTargets.length;m++)h[d[p].morphTargets[m]]=-1;for(const m in h){const g=[],v=[];for(let y=0;y!==d[p].morphTargets.length;++y){const b=d[p];g.push(b.time),v.push(b.morphTarget===m?1:0)}o.push(new Gv(".morphTargetInfluence["+m+"]",g,v))}l=h.length*s}else{const h=".bones["+t[u].name+"]";i(Hv,h+".position",d,"pos",o),i(pf,h+".quaternion",d,"rot",o),i(Hv,h+".scale",d,"scl",o)}}return o.length===0?null:new this(n,l,o,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,o=e.length;i!==o;++i){const n=this.tracks[i];t=Math.max(t,n.times[n.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function vOe(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gv;case"vector":case"vector2":case"vector3":case"vector4":return Hv;case"color":return gN;case"quaternion":return pf;case"bool":case"boolean":return Rd;case"string":return Ld}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function yOe(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=vOe(r.type);if(r.times===void 0){const t=[],i=[];fN(r.keys,t,i,"value"),r.times=t,r.values=i}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const Od={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class vN{constructor(e,t,i){const o=this;let n=!1,s=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,n===!1&&o.onStart!==void 0&&o.onStart(u,s,a),n=!0},this.itemEnd=function(u){s++,o.onProgress!==void 0&&o.onProgress(u,s,a),s===a&&(n=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(u){o.onError!==void 0&&o.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const p=c[d],m=c[d+1];if(p.global&&(p.lastIndex=0),p.test(u))return m}return null}}}const i5=new vN;class on{constructor(e){this.manager=e!==void 0?e:i5,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(o,n){i.load(e,o,t,n)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}on.DEFAULT_MATERIAL_NAME="__DEFAULT";const Nl={};class bOe extends Error{constructor(e,t){super(e),this.response=t}}class La extends on{constructor(e){super(e)}load(e,t,i,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const n=Od.get(e);if(n!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(n),this.manager.itemEnd(e)},0),n;if(Nl[e]!==void 0){Nl[e].push({onLoad:t,onProgress:i,onError:o});return}Nl[e]=[],Nl[e].push({onLoad:t,onProgress:i,onError:o});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Nl[e],d=c.body.getReader(),h=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),p=h?parseInt(h):0,m=p!==0;let g=0;const v=new ReadableStream({start(y){b();function b(){d.read().then(({done:x,value:_})=>{if(x)y.close();else{g+=_.byteLength;const S=new ProgressEvent("progress",{lengthComputable:m,loaded:g,total:p});for(let w=0,M=u.length;w<M;w++){const T=u[w];T.onProgress&&T.onProgress(S)}y.enqueue(_),b()}})}}});return new Response(v)}else throw new bOe(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),d=u&&u[1]?u[1].toLowerCase():void 0,h=new TextDecoder(d);return c.arrayBuffer().then(p=>h.decode(p))}}}).then(c=>{Od.add(e,c);const u=Nl[e];delete Nl[e];for(let d=0,h=u.length;d<h;d++){const p=u[d];p.onLoad&&p.onLoad(c)}}).catch(c=>{const u=Nl[e];if(u===void 0)throw this.manager.itemError(e),c;delete Nl[e];for(let d=0,h=u.length;d<h;d++){const p=u[d];p.onError&&p.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class xOe extends on{constructor(e){super(e)}load(e,t,i,o){const n=this,s=new La(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(n.parse(JSON.parse(a)))}catch(l){o?o(l):console.error(l),n.manager.itemError(e)}},i,o)}parse(e){const t=[];for(let i=0;i<e.length;i++){const o=jv.parse(e[i]);t.push(o)}return t}}class _Oe extends on{constructor(e){super(e)}load(e,t,i,o){const n=this,s=[],a=new Ov,l=new La(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(n.withCredentials);let c=0;function u(d){l.load(e[d],function(h){const p=n.parse(h,!0);s[d]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},c+=1,c===6&&(p.mipmapCount===1&&(a.minFilter=oi),a.image=s,a.format=p.format,a.needsUpdate=!0,t&&t(a))},i,o)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)u(d);else l.load(e,function(d){const h=n.parse(d,!0);if(h.isCubemap){const p=h.mipmaps.length/h.mipmapCount;for(let m=0;m<p;m++){s[m]={mipmaps:[]};for(let g=0;g<h.mipmapCount;g++)s[m].mipmaps.push(h.mipmaps[m*h.mipmapCount+g]),s[m].format=h.format,s[m].width=h.width,s[m].height=h.height}a.image=s}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=oi),a.format=h.format,a.needsUpdate=!0,t&&t(a)},i,o);return a}}class $v extends on{constructor(e){super(e)}load(e,t,i,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const n=this,s=Od.get(e);if(s!==void 0)return n.manager.itemStart(e),setTimeout(function(){t&&t(s),n.manager.itemEnd(e)},0),s;const a=pv("img");function l(){u(),Od.add(e,this),t&&t(this),n.manager.itemEnd(e)}function c(d){u(),o&&o(d),n.manager.itemError(e),n.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),n.manager.itemStart(e),a.src=e,a}}class wOe extends on{constructor(e){super(e)}load(e,t,i,o){const n=new yd;n.colorSpace=Ft;const s=new $v(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(c){s.load(e[c],function(u){n.images[c]=u,a++,a===6&&(n.needsUpdate=!0,t&&t(n))},void 0,o)}for(let c=0;c<e.length;++c)l(c);return n}}class SOe extends on{constructor(e){super(e)}load(e,t,i,o){const n=this,s=new Md,a=new La(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(n.withCredentials),a.load(e,function(l){let c;try{c=n.parse(l)}catch(u){if(o!==void 0)o(u);else{console.error(u);return}}c.image!==void 0?s.image=c.image:c.data!==void 0&&(s.image.width=c.width,s.image.height=c.height,s.image.data=c.data),s.wrapS=c.wrapS!==void 0?c.wrapS:oo,s.wrapT=c.wrapT!==void 0?c.wrapT:oo,s.magFilter=c.magFilter!==void 0?c.magFilter:oi,s.minFilter=c.minFilter!==void 0?c.minFilter:oi,s.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?s.colorSpace=c.colorSpace:c.encoding!==void 0&&(s.encoding=c.encoding),c.flipY!==void 0&&(s.flipY=c.flipY),c.format!==void 0&&(s.format=c.format),c.type!==void 0&&(s.type=c.type),c.mipmaps!==void 0&&(s.mipmaps=c.mipmaps,s.minFilter=Tn),c.mipmapCount===1&&(s.minFilter=oi),c.generateMipmaps!==void 0&&(s.generateMipmaps=c.generateMipmaps),s.needsUpdate=!0,t&&t(s,c)},i,o),s}}class MOe extends on{constructor(e){super(e)}load(e,t,i,o){const n=new mi,s=new $v(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){n.image=a,n.needsUpdate=!0,t!==void 0&&t(n)},i,o),n}}class Al extends mr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new bt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class kd extends Al{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(mr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new bt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const yN=new Xt,o5=new Q,n5=new Q;class bN{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new We(512,512),this.map=null,this.mapPass=null,this.matrix=new Xt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _v,this._frameExtents=new We(1,1),this._viewportCount=1,this._viewports=[new Kt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;o5.setFromMatrixPosition(e.matrixWorld),t.position.copy(o5),n5.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(n5),t.updateMatrixWorld(),yN.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yN),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(yN)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class TOe extends bN{constructor(){super(new li(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Ip*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,n=e.distance||t.far;(i!==t.fov||o!==t.aspect||n!==t.far)&&(t.fov=i,t.aspect=o,t.far=n,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Bc extends Al{constructor(e,t,i=0,o=Math.PI/3,n=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(mr.DEFAULT_UP),this.updateMatrix(),this.target=new mr,this.distance=i,this.angle=o,this.penumbra=n,this.decay=s,this.map=null,this.shadow=new TOe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const s5=new Xt,Wv=new Q,xN=new Q;class EOe extends bN{constructor(){super(new li(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new We(4,2),this._viewportCount=6,this._viewports=[new Kt(2,1,1,1),new Kt(0,1,1,1),new Kt(3,1,1,1),new Kt(1,1,1,1),new Kt(3,0,1,1),new Kt(1,0,1,1)],this._cubeDirections=[new Q(1,0,0),new Q(-1,0,0),new Q(0,0,1),new Q(0,0,-1),new Q(0,1,0),new Q(0,-1,0)],this._cubeUps=[new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,0,1),new Q(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,o=this.matrix,n=e.distance||i.far;n!==i.far&&(i.far=n,i.updateProjectionMatrix()),Wv.setFromMatrixPosition(e.matrixWorld),i.position.copy(Wv),xN.copy(i.position),xN.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(xN),i.updateMatrixWorld(),o.makeTranslation(-Wv.x,-Wv.y,-Wv.z),s5.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(s5)}}class Id extends Al{constructor(e,t,i=0,o=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=o,this.shadow=new EOe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class COe extends bN{constructor(){super(new Na(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Pd extends Al{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(mr.DEFAULT_UP),this.updateMatrix(),this.target=new mr,this.shadow=new COe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class ff extends Al{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class _N extends Al{constructor(e,t,i=10,o=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class wN{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,o=e.y,n=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*o),t.addScaledVector(s[2],.488603*n),t.addScaledVector(s[3],.488603*i),t.addScaledVector(s[4],1.092548*(i*o)),t.addScaledVector(s[5],1.092548*(o*n)),t.addScaledVector(s[6],.315392*(3*n*n-1)),t.addScaledVector(s[7],1.092548*(i*n)),t.addScaledVector(s[8],.546274*(i*i-o*o)),t}getIrradianceAt(e,t){const i=e.x,o=e.y,n=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*o),t.addScaledVector(s[2],2*.511664*n),t.addScaledVector(s[3],2*.511664*i),t.addScaledVector(s[4],2*.429043*i*o),t.addScaledVector(s[5],2*.429043*o*n),t.addScaledVector(s[6],.743125*n*n-.247708),t.addScaledVector(s[7],2*.429043*i*n),t.addScaledVector(s[8],.429043*(i*i-o*o)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let o=0;o<9;o++)i[o].fromArray(e,t+o*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let o=0;o<9;o++)i[o].toArray(e,t+o*3);return e}static getBasisAt(e,t){const i=e.x,o=e.y,n=e.z;t[0]=.282095,t[1]=.488603*o,t[2]=.488603*n,t[3]=.488603*i,t[4]=1.092548*i*o,t[5]=1.092548*o*n,t[6]=.315392*(3*n*n-1),t[7]=1.092548*i*n,t[8]=.546274*(i*i-o*o)}}class SN extends Al{constructor(e=new wN,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Rl extends on{constructor(e){super(e),this.textures={}}load(e,t,i,o){const n=this,s=new La(n.manager);s.setPath(n.path),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(a){try{t(n.parse(JSON.parse(a)))}catch(l){o?o(l):console.error(l),n.manager.itemError(e)}},i,o)}parse(e){const t=this.textures;function i(n){return t[n]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",n),t[n]}const o=Rl.createMaterialFromType(e.type);if(e.uuid!==void 0&&(o.uuid=e.uuid),e.name!==void 0&&(o.name=e.name),e.color!==void 0&&o.color!==void 0&&o.color.setHex(e.color),e.roughness!==void 0&&(o.roughness=e.roughness),e.metalness!==void 0&&(o.metalness=e.metalness),e.sheen!==void 0&&(o.sheen=e.sheen),e.sheenColor!==void 0&&(o.sheenColor=new bt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(o.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&o.emissive!==void 0&&o.emissive.setHex(e.emissive),e.specular!==void 0&&o.specular!==void 0&&o.specular.setHex(e.specular),e.specularIntensity!==void 0&&(o.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&o.specularColor!==void 0&&o.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(o.shininess=e.shininess),e.clearcoat!==void 0&&(o.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(o.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(o.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(o.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(o.transmission=e.transmission),e.thickness!==void 0&&(o.thickness=e.thickness),e.attenuationDistance!==void 0&&(o.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&o.attenuationColor!==void 0&&o.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(o.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(o.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(o.fog=e.fog),e.flatShading!==void 0&&(o.flatShading=e.flatShading),e.blending!==void 0&&(o.blending=e.blending),e.combine!==void 0&&(o.combine=e.combine),e.side!==void 0&&(o.side=e.side),e.shadowSide!==void 0&&(o.shadowSide=e.shadowSide),e.opacity!==void 0&&(o.opacity=e.opacity),e.transparent!==void 0&&(o.transparent=e.transparent),e.alphaTest!==void 0&&(o.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(o.alphaHash=e.alphaHash),e.depthTest!==void 0&&(o.depthTest=e.depthTest),e.depthWrite!==void 0&&(o.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(o.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(o.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(o.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(o.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(o.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(o.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(o.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(o.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(o.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(o.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(o.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(o.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(o.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(o.rotation=e.rotation),e.linewidth!==void 0&&(o.linewidth=e.linewidth),e.dashSize!==void 0&&(o.dashSize=e.dashSize),e.gapSize!==void 0&&(o.gapSize=e.gapSize),e.scale!==void 0&&(o.scale=e.scale),e.polygonOffset!==void 0&&(o.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(o.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(o.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(o.dithering=e.dithering),e.alphaToCoverage!==void 0&&(o.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(o.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(o.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(o.visible=e.visible),e.toneMapped!==void 0&&(o.toneMapped=e.toneMapped),e.userData!==void 0&&(o.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?o.vertexColors=e.vertexColors>0:o.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const n in e.uniforms){const s=e.uniforms[n];switch(o.uniforms[n]={},s.type){case"t":o.uniforms[n].value=i(s.value);break;case"c":o.uniforms[n].value=new bt().setHex(s.value);break;case"v2":o.uniforms[n].value=new We().fromArray(s.value);break;case"v3":o.uniforms[n].value=new Q().fromArray(s.value);break;case"v4":o.uniforms[n].value=new Kt().fromArray(s.value);break;case"m3":o.uniforms[n].value=new er().fromArray(s.value);break;case"m4":o.uniforms[n].value=new Xt().fromArray(s.value);break;default:o.uniforms[n].value=s.value}}if(e.defines!==void 0&&(o.defines=e.defines),e.vertexShader!==void 0&&(o.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(o.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(o.glslVersion=e.glslVersion),e.extensions!==void 0)for(const n in e.extensions)o.extensions[n]=e.extensions[n];if(e.lights!==void 0&&(o.lights=e.lights),e.clipping!==void 0&&(o.clipping=e.clipping),e.size!==void 0&&(o.size=e.size),e.sizeAttenuation!==void 0&&(o.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(o.map=i(e.map)),e.matcap!==void 0&&(o.matcap=i(e.matcap)),e.alphaMap!==void 0&&(o.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(o.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(o.bumpScale=e.bumpScale),e.normalMap!==void 0&&(o.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(o.normalMapType=e.normalMapType),e.normalScale!==void 0){let n=e.normalScale;Array.isArray(n)===!1&&(n=[n,n]),o.normalScale=new We().fromArray(n)}return e.displacementMap!==void 0&&(o.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(o.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(o.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(o.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(o.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(o.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(o.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(o.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(o.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(o.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(o.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(o.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(o.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(o.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(o.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(o.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(o.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(o.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(o.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(o.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(o.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(o.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(o.clearcoatNormalScale=new We().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(o.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(o.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(o.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(o.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(o.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(o.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(o.sheenRoughnessMap=i(e.sheenRoughnessMap)),o}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:uN,SpriteMaterial:kc,RawShaderMaterial:N1,ShaderMaterial:gi,PointsMaterial:Td,MeshPhysicalMaterial:hf,MeshStandardMaterial:Nd,MeshPhongMaterial:A1,MeshToonMaterial:dN,MeshNormalMaterial:R1,MeshLambertMaterial:L1,MeshDepthMaterial:Sv,MeshDistanceMaterial:Jx,MeshBasicMaterial:Uo,MeshMatcapMaterial:hN,LineDashedMaterial:zv,LineBasicMaterial:Fi,Material:ai};return new t[e]}}class MN{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,o=e.length;i<o;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class TN extends dr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class a5 extends on{constructor(e){super(e)}load(e,t,i,o){const n=this,s=new La(n.manager);s.setPath(n.path),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(a){try{t(n.parse(JSON.parse(a)))}catch(l){o?o(l):console.error(l),n.manager.itemError(e)}},i,o)}parse(e){const t={},i={};function o(h,p){if(t[p]!==void 0)return t[p];const m=h.interleavedBuffers[p],g=n(h,m.buffer),v=Pp(m.type,g),y=new Ev(v,m.stride);return y.uuid=m.uuid,t[p]=y,y}function n(h,p){if(i[p]!==void 0)return i[p];const m=h.arrayBuffers[p],g=new Uint32Array(m).buffer;return i[p]=g,g}const s=e.isInstancedBufferGeometry?new TN:new dr,a=e.data.index;if(a!==void 0){const h=Pp(a.type,a.array);s.setIndex(new Zr(h,1))}const l=e.data.attributes;for(const h in l){const p=l[h];let m;if(p.isInterleavedBufferAttribute){const g=o(e.data,p.data);m=new kn(g,p.itemSize,p.offset,p.normalized)}else{const g=Pp(p.type,p.array),v=p.isInstancedBufferAttribute?cf:Zr;m=new v(g,p.itemSize,p.normalized)}p.name!==void 0&&(m.name=p.name),p.usage!==void 0&&m.setUsage(p.usage),p.updateRange!==void 0&&(m.updateRange.offset=p.updateRange.offset,m.updateRange.count=p.updateRange.count),s.setAttribute(h,m)}const c=e.data.morphAttributes;if(c)for(const h in c){const p=c[h],m=[];for(let g=0,v=p.length;g<v;g++){const y=p[g];let b;if(y.isInterleavedBufferAttribute){const x=o(e.data,y.data);b=new kn(x,y.itemSize,y.offset,y.normalized)}else{const x=Pp(y.type,y.array);b=new Zr(x,y.itemSize,y.normalized)}y.name!==void 0&&(b.name=y.name),m.push(b)}s.morphAttributes[h]=m}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let h=0,p=u.length;h!==p;++h){const m=u[h];s.addGroup(m.start,m.count,m.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const h=new Q;d.center!==void 0&&h.fromArray(d.center),s.boundingSphere=new Jn(h,d.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class EN extends on{constructor(e){super(e)}load(e,t,i,o){const n=this,s=this.path===""?MN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new La(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){o!==void 0&&o(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){o!==void 0&&o(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}n.parse(c,t)},i,o)}async loadAsync(e,t){const i=this,o=this.path===""?MN.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const n=new La(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials);const s=await n.loadAsync(e,t),a=JSON.parse(s),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),o=this.parseShapes(e.shapes),n=this.parseGeometries(e.geometries,o),s=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,n,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let d=!1;for(const h in s)if(s[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,i),n=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,n),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,o,a,s,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,o=e.length;i<o;i++){const n=new Ed().fromJSON(e[i]);t[n.uuid]=n}return t}parseSkeletons(e,t){const i={},o={};if(t.traverse(function(n){n.isBone&&(o[n.uuid]=n)}),e!==void 0)for(let n=0,s=e.length;n<s;n++){const a=new r1().fromJSON(e[n],o);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const o=new a5;for(let n=0,s=e.length;n<s;n++){let a;const l=e[n];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=o.parse(l);break;default:l.type in J6?a=J6[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},o={};if(e!==void 0){const n=new Rl;n.setTextures(t);for(let s=0,a=e.length;s<a;s++){const l=e[s];i[l.uuid]===void 0&&(i[l.uuid]=n.parse(l)),o[l.uuid]=i[l.uuid]}}return o}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const o=e[i],n=jv.parse(o);t[n.uuid]=n}return t}parseImages(e,t){const i=this,o={};let n;function s(l){return i.manager.itemStart(l),n.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return s(u)}else return l.data?{data:Pp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new vN(t);n=new $v(l),n.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],h=d.url;if(Array.isArray(h)){const p=[];for(let m=0,g=h.length;m<g;m++){const v=h[m],y=a(v);y!==null&&(y instanceof HTMLImageElement?p.push(y):p.push(new Md(y.data,y.width,y.height)))}o[d.uuid]=new Mc(p)}else{const p=a(d.url);o[d.uuid]=new Mc(p)}}}return o}async parseImagesAsync(e){const t=this,i={};let o;async function n(s){if(typeof s=="string"){const a=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await o.loadAsync(l)}else return s.data?{data:Pp(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){o=new $v(this.manager),o.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){const l=e[s],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d],m=await n(p);m!==null&&(m instanceof HTMLImageElement?u.push(m):u.push(new Md(m.data,m.width,m.height)))}i[l.uuid]=new Mc(u)}else{const u=await n(l.url);i[l.uuid]=new Mc(u)}}}return i}parseTextures(e,t){function i(n,s){return typeof n=="number"?n:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",n),s[n])}const o={};if(e!==void 0)for(let n=0,s=e.length;n<s;n++){const a=e[n];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new yd,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Md:u=new mi,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,NOe)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],l5),u.wrapT=i(a.wrap[1],l5)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,c5)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,c5)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),o[a.uuid]=u}return o}parseObject(e,t,i,o,n){let s;function a(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const p=[];for(let m=0,g=h.length;m<g;m++){const v=h[m];i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),p.push(i[v])}return p}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function c(h){return o[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),o[h]}let u,d;switch(e.type){case"Scene":s=new Oc,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new bt(e.background):s.background=c(e.background)),e.environment!==void 0&&(s.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new Tv(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new Mv(e.fog.color,e.fog.density)),e.fog.name!==""&&(s.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new li(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Na(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new ff(e.color,e.intensity);break;case"DirectionalLight":s=new Pd(e.color,e.intensity);break;case"PointLight":s=new Id(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new _N(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new Bc(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new kd(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new SN().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),d=l(e.material),s=new S6(u,d),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),d=l(e.material),s=new yt(u,d);break;case"InstancedMesh":u=a(e.geometry),d=l(e.material);const h=e.count,p=e.instanceMatrix,m=e.instanceColor;s=new WC(u,d,h),s.instanceMatrix=new cf(new Float32Array(p.array),16),m!==void 0&&(s.instanceColor=new cf(new Float32Array(m.array),m.itemSize));break;case"LOD":s=new v6;break;case"Line":s=new zo(a(e.geometry),l(e.material));break;case"LineLoop":s=new O6(a(e.geometry),l(e.material));break;case"LineSegments":s=new Aa(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new I6(a(e.geometry),l(e.material));break;case"Sprite":s=new Ic(l(e.material));break;case"Group":s=new rf;break;case"Bone":s=new $C;break;default:s=new mr}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let p=0;p<h.length;p++)s.add(this.parseObject(h[p],t,i,o,n))}if(e.animations!==void 0){const h=e.animations;for(let p=0;p<h.length;p++){const m=h[p];s.animations.push(n[m])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const h=e.levels;for(let p=0;p<h.length;p++){const m=h[p],g=s.getObjectByProperty("uuid",m.object);g!==void 0&&s.addLevel(g,m.distance,m.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const o=t[i.skeleton];o===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(o,i.bindMatrix)}})}}const NOe={UVMapping:Vg,CubeReflectionMapping:Ms,CubeRefractionMapping:Ks,EquirectangularReflectionMapping:hl,EquirectangularRefractionMapping:pl,CubeUVReflectionMapping:Wu},l5={RepeatWrapping:bc,ClampToEdgeWrapping:oo,MirroredRepeatWrapping:xc},c5={NearestFilter:Nr,NearestMipmapNearestFilter:_c,NearestMipmapLinearFilter:Ea,LinearFilter:oi,LinearMipmapNearestFilter:Gg,LinearMipmapLinearFilter:Tn};class AOe extends on{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const n=this,s=Od.get(e);if(s!==void 0)return n.manager.itemStart(e),setTimeout(function(){t&&t(s),n.manager.itemEnd(e)},0),s;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(n.options,{colorSpaceConversion:"none"}))}).then(function(l){Od.add(e,l),t&&t(l),n.manager.itemEnd(e)}).catch(function(l){o&&o(l),n.manager.itemError(e),n.manager.itemEnd(e)}),n.manager.itemStart(e)}}let O1;class CN{static getContext(){return O1===void 0&&(O1=new(window.AudioContext||window.webkitAudioContext)),O1}static setContext(e){O1=e}}class ROe extends on{constructor(e){super(e)}load(e,t,i,o){const n=this,s=new La(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const c=l.slice(0);CN.getContext().decodeAudioData(c,function(u){t(u)},a)}catch(c){a(c)}},i,o);function a(l){o?o(l):console.error(l),n.manager.itemError(e)}}}const u5=new Xt,d5=new Xt,Dd=new Xt;class h5{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new li,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new li,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Dd.copy(e.projectionMatrix);const i=t.eyeSep/2,o=i*t.near/t.focus,n=t.near*Math.tan(pd*t.fov*.5)/t.zoom;let s,a;d5.elements[12]=-i,u5.elements[12]=i,s=-n*t.aspect+o,a=n*t.aspect+o,Dd.elements[0]=2*t.near/(a-s),Dd.elements[8]=(a+s)/(a-s),this.cameraL.projectionMatrix.copy(Dd),s=-n*t.aspect-o,a=n*t.aspect-o,Dd.elements[0]=2*t.near/(a-s),Dd.elements[8]=(a+s)/(a-s),this.cameraR.projectionMatrix.copy(Dd)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(d5),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(u5)}}class k1{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=p5(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=p5();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function p5(){return(typeof performance>"u"?Date:performance).now()}const Bd=new Q,f5=new jr,LOe=new Q,Fd=new Q;class OOe extends mr{constructor(){super(),this.type="AudioListener",this.context=CN.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new k1}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Bd,f5,LOe),Fd.set(0,0,-1).applyQuaternion(f5),t.positionX){const o=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Bd.x,o),t.positionY.linearRampToValueAtTime(Bd.y,o),t.positionZ.linearRampToValueAtTime(Bd.z,o),t.forwardX.linearRampToValueAtTime(Fd.x,o),t.forwardY.linearRampToValueAtTime(Fd.y,o),t.forwardZ.linearRampToValueAtTime(Fd.z,o),t.upX.linearRampToValueAtTime(i.x,o),t.upY.linearRampToValueAtTime(i.y,o),t.upZ.linearRampToValueAtTime(i.z,o)}else t.setPosition(Bd.x,Bd.y,Bd.z),t.setOrientation(Fd.x,Fd.y,Fd.z,i.x,i.y,i.z)}}class m5 extends mr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Ud=new Q,g5=new jr,kOe=new Q,zd=new Q;class IOe extends m5{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Ud,g5,kOe),zd.set(0,0,1).applyQuaternion(g5);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Ud.x,i),t.positionY.linearRampToValueAtTime(Ud.y,i),t.positionZ.linearRampToValueAtTime(Ud.z,i),t.orientationX.linearRampToValueAtTime(zd.x,i),t.orientationY.linearRampToValueAtTime(zd.y,i),t.orientationZ.linearRampToValueAtTime(zd.z,i)}else t.setPosition(Ud.x,Ud.y,Ud.z),t.setOrientation(zd.x,zd.y,zd.z)}}class POe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class v5{constructor(e,t,i){this.binding=e,this.valueSize=i;let o,n,s;switch(t){case"quaternion":o=this._slerp,n=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":o=this._select,n=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:o=this._lerp,n=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=n,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,o=this.valueSize,n=e*o+o;let s=this.cumulativeWeight;if(s===0){for(let a=0;a!==o;++a)i[n+a]=i[a];s=t}else{s+=t;const a=t/s;this._mixBufferRegion(i,n,0,a,o)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,o=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,o,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,o=e*t+t,n=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,n<1){const l=t*this._origIndex;this._mixBufferRegion(i,o,l,1-n,t)}s>0&&this._mixBufferRegionAdditive(i,o,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,o);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,o=i*this._origIndex;e.getValue(t,o);for(let n=i,s=o;n!==s;++n)t[n]=t[o+n%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,o,n){if(o>=.5)for(let s=0;s!==n;++s)e[t+s]=e[i+s]}_slerp(e,t,i,o){jr.slerpFlat(e,t,e,t,e,i,o)}_slerpAdditive(e,t,i,o,n){const s=this._workIndex*n;jr.multiplyQuaternionsFlat(e,s,e,t,e,i),jr.slerpFlat(e,t,e,t,e,s,o)}_lerp(e,t,i,o,n){const s=1-o;for(let a=0;a!==n;++a){const l=t+a;e[l]=e[l]*s+e[i+a]*o}}_lerpAdditive(e,t,i,o,n){for(let s=0;s!==n;++s){const a=t+s;e[a]=e[a]+e[i+s]*o}}}const NN="\\[\\]\\.:\\/",DOe=new RegExp("["+NN+"]","g"),AN="[^"+NN+"]",BOe="[^"+NN.replace("\\.","")+"]",FOe=/((?:WC+[\/:])*)/.source.replace("WC",AN),UOe=/(WCOD+)?/.source.replace("WCOD",BOe),zOe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",AN),VOe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",AN),GOe=new RegExp("^"+FOe+UOe+zOe+VOe+"$"),HOe=["material","materials","bones","map"];class jOe{constructor(e,t,i){const o=i||Or.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,o)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,o=this._bindings[i];o!==void 0&&o.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let o=this._targetGroup.nCachedObjects_,n=i.length;o!==n;++o)i[o].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class Or{constructor(e,t,i){this.path=t,this.parsedPath=i||Or.parseTrackName(t),this.node=Or.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new Or.Composite(e,t,i):new Or(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(DOe,"")}static parseTrackName(e){const t=GOe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},o=i.nodeName&&i.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){const n=i.nodeName.substring(o+1);HOe.indexOf(n)!==-1&&(i.nodeName=i.nodeName.substring(0,o),i.objectName=n)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(n){for(let s=0;s<n.length;s++){const a=n[s];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},o=i(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let o=0,n=i.length;o!==n;++o)e[t++]=i[o]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let o=0,n=i.length;o!==n;++o)i[o]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let o=0,n=i.length;o!==n;++o)i[o]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let o=0,n=i.length;o!==n;++o)i[o]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,o=t.propertyName;let n=t.propertyIndex;if(e||(e=Or.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const s=e[o];if(s===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+o+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(n!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[n]!==void 0&&(n=e.morphTargetDictionary[n])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=n}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=o;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Or.Composite=jOe,Or.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Or.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Or.prototype.GetterByBindingType=[Or.prototype._getValue_direct,Or.prototype._getValue_array,Or.prototype._getValue_arrayElement,Or.prototype._getValue_toArray],Or.prototype.SetterByBindingTypeAndVersioning=[[Or.prototype._setValue_direct,Or.prototype._setValue_direct_setNeedsUpdate,Or.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Or.prototype._setValue_array,Or.prototype._setValue_array_setNeedsUpdate,Or.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Or.prototype._setValue_arrayElement,Or.prototype._setValue_arrayElement_setNeedsUpdate,Or.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Or.prototype._setValue_fromArray,Or.prototype._setValue_fromArray_setNeedsUpdate,Or.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class $Oe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Kn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,o=arguments.length;i!==o;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,o=this._parsedPaths,n=this._bindings,s=n.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const h=arguments[u],p=h.uuid;let m=t[p];if(m===void 0){m=l++,t[p]=m,e.push(h);for(let g=0,v=s;g!==v;++g)n[g].push(new Or(h,i[g],o[g]))}else if(m<c){a=e[m];const g=--c,v=e[g];t[v.uuid]=m,e[m]=v,t[p]=g,e[g]=h;for(let y=0,b=s;y!==b;++y){const x=n[y],_=x[g];let S=x[m];x[m]=_,S===void 0&&(S=new Or(h,i[y],o[y])),x[g]=S}}else e[m]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,o=i.length;let n=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const l=arguments[s],c=l.uuid,u=t[c];if(u!==void 0&&u>=n){const d=n++,h=e[d];t[h.uuid]=u,e[u]=h,t[c]=d,e[d]=l;for(let p=0,m=o;p!==m;++p){const g=i[p],v=g[d],y=g[u];g[u]=v,g[d]=y}}}this.nCachedObjects_=n}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,o=i.length;let n=this.nCachedObjects_,s=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=t[u];if(d!==void 0)if(delete t[u],d<n){const h=--n,p=e[h],m=--s,g=e[m];t[p.uuid]=d,e[d]=p,t[g.uuid]=h,e[h]=g,e.pop();for(let v=0,y=o;v!==y;++v){const b=i[v],x=b[h],_=b[m];b[d]=x,b[h]=_,b.pop()}}else{const h=--s,p=e[h];h>0&&(t[p.uuid]=d),e[d]=p,e.pop();for(let m=0,g=o;m!==g;++m){const v=i[m];v[d]=v[h],v.pop()}}}this.nCachedObjects_=n}subscribe_(e,t){const i=this._bindingsIndicesByPath;let o=i[e];const n=this._bindings;if(o!==void 0)return n[o];const s=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);o=n.length,i[e]=o,s.push(e),a.push(t),n.push(d);for(let h=u,p=l.length;h!==p;++h){const m=l[h];d[h]=new Or(m,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const o=this._paths,n=this._parsedPaths,s=this._bindings,a=s.length-1,l=s[a],c=e[a];t[c]=i,s[i]=l,s.pop(),n[i]=n[a],n.pop(),o[i]=o[a],o.pop()}}}class y5{constructor(e,t,i=null,o=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=o;const n=t.tracks,s=n.length,a=new Array(s),l={endingStart:ud,endingEnd:ud};for(let c=0;c!==s;++c){const u=n[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=mV,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const o=this._clip.duration,n=e._clip.duration,s=n/o,a=o/n;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const o=this._mixer,n=o.time,s=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=o._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=n,l[1]=n+i,c[0]=e/s,c[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,o){if(!this.enabled){this._updateWeight(e);return}const n=this._startTime;if(n!==null){const l=(e-n)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case qE:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(s),c[u].accumulateAdditive(a);break;case gx:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(s),c[u].accumulate(o,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const o=i.evaluate(e)[0];t*=o,e>i.parameterPositions[1]&&(this.stopFading(),o===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const o=i.evaluate(e)[0];t*=o,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let o=this.time+e,n=this._loopCount;const s=i===gV;if(e===0)return n===-1?o:s&&(n&1)===1?t-o:o;if(i===fV){n===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=t)o=t;else if(o<0)o=0;else{this.time=o;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(n===-1&&(e>=0?(n=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),o>=t||o<0){const a=Math.floor(o/t);o-=t*a,n+=Math.abs(a);const l=this.repetitions-n;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?t:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,s)}else this._setEndings(!1,!1,s);this._loopCount=n,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=o;if(s&&(n&1)===1)return t-o}return o}_setEndings(e,t,i){const o=this._interpolantSettings;i?(o.endingStart=dd,o.endingEnd=dd):(e?o.endingStart=this.zeroSlopeAtStart?dd:ud:o.endingStart=Qg,t?o.endingEnd=this.zeroSlopeAtEnd?dd:ud:o.endingEnd=Qg)}_scheduleFading(e,t,i){const o=this._mixer,n=o.time;let s=this._weightInterpolant;s===null&&(s=o._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=n,l[0]=t,a[1]=n+e,l[1]=i,this}}const WOe=new Float32Array(1);class qOe extends ao{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,o=e._clip.tracks,n=o.length,s=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==n;++d){const h=o[d],p=h.name;let m=u[p];if(m!==void 0)++m.referenceCount,s[d]=m;else{if(m=s[d],m!==void 0){m._cacheIndex===null&&(++m.referenceCount,this._addInactiveBinding(m,l,p));continue}const g=t&&t._propertyBindings[d].binding.parsedPath;m=new v5(Or.create(i,p,g),h.ValueTypeName,h.getValueSize()),++m.referenceCount,this._addInactiveBinding(m,l,p),s[d]=m}a[d].resultBuffer=m.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,o=e._clip.uuid,n=this._actionsByClip[o];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,o,i)}const t=e._propertyBindings;for(let i=0,o=t.length;i!==o;++i){const n=t[i];n.useCount++===0&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,o=t.length;i!==o;++i){const n=t[i];--n.useCount===0&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const o=this._actions,n=this._actionsByClip;let s=n[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,n[t]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=o.length,o.push(e),s.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],o=e._cacheIndex;i._cacheIndex=o,t[o]=i,t.pop(),e._cacheIndex=null;const n=e._clip.uuid,s=this._actionsByClip,a=s[n],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],l.length===0&&delete s[n],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,o=t.length;i!==o;++i){const n=t[i];--n.referenceCount===0&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,o=this._nActiveActions++,n=t[o];e._cacheIndex=o,t[o]=e,n._cacheIndex=i,t[i]=n}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,o=--this._nActiveActions,n=t[o];e._cacheIndex=o,t[o]=e,n._cacheIndex=i,t[i]=n}_addInactiveBinding(e,t,i){const o=this._bindingsByRootAndName,n=this._bindings;let s=o[t];s===void 0&&(s={},o[t]=s),s[i]=e,e._cacheIndex=n.length,n.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,o=i.rootNode.uuid,n=i.path,s=this._bindingsByRootAndName,a=s[o],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[n],Object.keys(a).length===0&&delete s[o]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,o=this._nActiveBindings++,n=t[o];e._cacheIndex=o,t[o]=e,n._cacheIndex=i,t[i]=n}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,o=--this._nActiveBindings,n=t[o];e._cacheIndex=o,t[o]=e,n._cacheIndex=i,t[i]=n}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new mN(new Float32Array(2),new Float32Array(2),1,WOe),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,o=--this._nActiveControlInterpolants,n=t[o];e.__cacheIndex=o,t[o]=e,n.__cacheIndex=i,t[i]=n}clipAction(e,t,i){const o=t||this._root,n=o.uuid;let s=typeof e=="string"?jv.findByName(o,e):e;const a=s!==null?s.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(s!==null?i=s.blendMode:i=gx),l!==void 0){const d=l.actionByRoot[n];if(d!==void 0&&d.blendMode===i)return d;c=l.knownActions[0],s===null&&(s=c._clip)}if(s===null)return null;const u=new y5(this,s,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,n),u}existingAction(e,t){const i=t||this._root,o=i.uuid,n=typeof e=="string"?jv.findByName(i,e):e,s=n?n.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[o]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,o=this.time+=e,n=Math.sign(e),s=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(o,e,n,s);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,o=this._actionsByClip,n=o[i];if(n!==void 0){const s=n.knownActions;for(let a=0,l=s.length;a!==l;++a){const c=s[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete o[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const s in i){const a=i[s].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const o=this._bindingsByRootAndName,n=o[t];if(n!==void 0)for(const s in n){const a=n[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}let XOe=class w${constructor(e){this.value=e}clone(){return new w$(this.value.clone===void 0?this.value:this.value.clone())}},KOe=0,YOe=class extends ao{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:KOe++}),this.name="",this.usage=Op,this.uniforms=[]}add(r){return this.uniforms.push(r),this}remove(r){const e=this.uniforms.indexOf(r);return e!==-1&&this.uniforms.splice(e,1),this}setName(r){return this.name=r,this}setUsage(r){return this.usage=r,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(r){this.name=r.name,this.usage=r.usage;const e=r.uniforms;this.uniforms.length=0;for(let t=0,i=e.length;t<i;t++)this.uniforms.push(e[t].clone());return this}clone(){return new this.constructor().copy(this)}};class qv extends Ev{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class JOe{constructor(e,t,i,o,n){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=o,this.count=n,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class I1{constructor(e,t,i=0,o=1/0){this.ray=new gd(e,t),this.near=i,this.far=o,this.camera=null,this.layers=new Rx,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return RN(e,this,i,t),i.sort(b5),i}intersectObjects(e,t=!0,i=[]){for(let o=0,n=e.length;o<n;o++)RN(e[o],this,i,t);return i.sort(b5),i}}function b5(r,e){return r.distance-e.distance}function RN(r,e,t,i){if(r.layers.test(e.layers)&&r.raycast(e,t),i===!0){const o=r.children;for(let n=0,s=o.length;n<s;n++)RN(o[n],e,t,!0)}}class LN{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(xi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class ZOe{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const x5=new We;class QOe{constructor(e=new We(1/0,1/0),t=new We(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=x5.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,x5).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const _5=new Q,P1=new Q;class w5{constructor(e=new Q,t=new Q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){_5.subVectors(e,this.start),P1.subVectors(this.end,this.start);const i=P1.dot(P1);let o=P1.dot(_5)/i;return t&&(o=xi(o,0,1)),o}closestPointToPoint(e,t,i){const o=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(o).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const S5=new Q;class M5 extends mr{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new dr,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){const c=s/l*Math.PI*2,u=a/l*Math.PI*2;o.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new kt(o,3));const n=new Fi({fog:!1,toneMapped:!1});this.cone=new Aa(i,n),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),S5.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(S5),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Fc=new Q,D1=new Xt,ON=new Xt;class eke extends Aa{constructor(e){const t=T5(e),i=new dr,o=[],n=[],s=new bt(0,0,1),a=new bt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),n.push(s.r,s.g,s.b),n.push(a.r,a.g,a.b))}i.setAttribute("position",new kt(o,3)),i.setAttribute("color",new kt(n,3));const l=new Fi({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,o=i.getAttribute("position");ON.copy(this.root.matrixWorld).invert();for(let n=0,s=0;n<t.length;n++){const a=t[n];a.parent&&a.parent.isBone&&(D1.multiplyMatrices(ON,a.matrixWorld),Fc.setFromMatrixPosition(D1),o.setXYZ(s,Fc.x,Fc.y,Fc.z),D1.multiplyMatrices(ON,a.parent.matrixWorld),Fc.setFromMatrixPosition(D1),o.setXYZ(s+1,Fc.x,Fc.y,Fc.z),s+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function T5(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,T5(r.children[t]));return e}class E5 extends yt{constructor(e,t,i){const o=new Dc(t,4,2),n=new Uo({wireframe:!0,fog:!1,toneMapped:!1});super(o,n),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const tke=new Q,C5=new bt,N5=new bt;class A5 extends mr{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const o=new El(t);o.rotateY(Math.PI*.5),this.material=new Uo({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const n=o.getAttribute("position"),s=new Float32Array(n.count*3);o.setAttribute("color",new Zr(s,3)),this.add(new yt(o,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");C5.copy(this.light.color),N5.copy(this.light.groundColor);for(let i=0,o=t.count;i<o;i++){const n=i<o/2?C5:N5;t.setXYZ(i,n.r,n.g,n.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(tke.setFromMatrixPosition(this.light.matrixWorld).negate())}}class R5 extends Aa{constructor(e=10,t=10,i=4473924,o=8947848){i=new bt(i),o=new bt(o);const n=t/2,s=e/t,a=e/2,l=[],c=[];for(let h=0,p=0,m=-a;h<=t;h++,m+=s){l.push(-a,0,m,a,0,m),l.push(m,0,-a,m,0,a);const g=h===n?i:o;g.toArray(c,p),p+=3,g.toArray(c,p),p+=3,g.toArray(c,p),p+=3,g.toArray(c,p),p+=3}const u=new dr;u.setAttribute("position",new kt(l,3)),u.setAttribute("color",new kt(c,3));const d=new Fi({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class rke extends Aa{constructor(e=10,t=16,i=8,o=64,n=4473924,s=8947848){n=new bt(n),s=new bt(s);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const h=d/t*(Math.PI*2),p=Math.sin(h)*e,m=Math.cos(h)*e;a.push(0,0,0),a.push(p,0,m);const g=d&1?n:s;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let d=0;d<i;d++){const h=d&1?n:s,p=e-e/i*d;for(let m=0;m<o;m++){let g=m/o*(Math.PI*2),v=Math.sin(g)*p,y=Math.cos(g)*p;a.push(v,0,y),l.push(h.r,h.g,h.b),g=(m+1)/o*(Math.PI*2),v=Math.sin(g)*p,y=Math.cos(g)*p,a.push(v,0,y),l.push(h.r,h.g,h.b)}}const c=new dr;c.setAttribute("position",new kt(a,3)),c.setAttribute("color",new kt(l,3));const u=new Fi({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const L5=new Q,B1=new Q,O5=new Q;class k5 extends mr{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let o=new dr;o.setAttribute("position",new kt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const n=new Fi({fog:!1,toneMapped:!1});this.lightPlane=new zo(o,n),this.add(this.lightPlane),o=new dr,o.setAttribute("position",new kt([0,0,0,0,0,1],3)),this.targetLine=new zo(o,n),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),L5.setFromMatrixPosition(this.light.matrixWorld),B1.setFromMatrixPosition(this.light.target.matrixWorld),O5.subVectors(B1,L5),this.lightPlane.lookAt(B1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(B1),this.targetLine.scale.z=O5.length()}}const F1=new Q,_i=new Lc;class I5 extends Aa{constructor(e){const t=new dr,i=new Fi({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],n=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(m,g){l(m),l(g)}function l(m){o.push(0,0,0),n.push(0,0,0),s[m]===void 0&&(s[m]=[]),s[m].push(o.length/3-1)}t.setAttribute("position",new kt(o,3)),t.setAttribute("color",new kt(n,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const c=new bt(16755200),u=new bt(16711680),d=new bt(43775),h=new bt(16777215),p=new bt(3355443);this.setColors(c,u,d,h,p)}setColors(e,t,i,o,n){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,i.r,i.g,i.b),s.setXYZ(33,i.r,i.g,i.b),s.setXYZ(34,i.r,i.g,i.b),s.setXYZ(35,i.r,i.g,i.b),s.setXYZ(36,i.r,i.g,i.b),s.setXYZ(37,i.r,i.g,i.b),s.setXYZ(38,o.r,o.g,o.b),s.setXYZ(39,o.r,o.g,o.b),s.setXYZ(40,n.r,n.g,n.b),s.setXYZ(41,n.r,n.g,n.b),s.setXYZ(42,n.r,n.g,n.b),s.setXYZ(43,n.r,n.g,n.b),s.setXYZ(44,n.r,n.g,n.b),s.setXYZ(45,n.r,n.g,n.b),s.setXYZ(46,n.r,n.g,n.b),s.setXYZ(47,n.r,n.g,n.b),s.setXYZ(48,n.r,n.g,n.b),s.setXYZ(49,n.r,n.g,n.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,o=1;_i.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ri("c",t,e,_i,0,0,-1),Ri("t",t,e,_i,0,0,1),Ri("n1",t,e,_i,-i,-o,-1),Ri("n2",t,e,_i,i,-o,-1),Ri("n3",t,e,_i,-i,o,-1),Ri("n4",t,e,_i,i,o,-1),Ri("f1",t,e,_i,-i,-o,1),Ri("f2",t,e,_i,i,-o,1),Ri("f3",t,e,_i,-i,o,1),Ri("f4",t,e,_i,i,o,1),Ri("u1",t,e,_i,i*.7,o*1.1,-1),Ri("u2",t,e,_i,-i*.7,o*1.1,-1),Ri("u3",t,e,_i,0,o*2,-1),Ri("cf1",t,e,_i,-i,0,1),Ri("cf2",t,e,_i,i,0,1),Ri("cf3",t,e,_i,0,-o,1),Ri("cf4",t,e,_i,0,o,1),Ri("cn1",t,e,_i,-i,0,-1),Ri("cn2",t,e,_i,i,0,-1),Ri("cn3",t,e,_i,0,-o,-1),Ri("cn4",t,e,_i,0,o,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ri(r,e,t,i,o,n,s){F1.set(o,n,s).unproject(i);const a=e[r];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],F1.x,F1.y,F1.z)}}const U1=new Yn;class ike extends Aa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(8*3),n=new dr;n.setIndex(new Zr(i,1)),n.setAttribute("position",new Zr(o,3)),super(n,new Fi({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&U1.setFromObject(this.object),U1.isEmpty())return;const t=U1.min,i=U1.max,o=this.geometry.attributes.position,n=o.array;n[0]=i.x,n[1]=i.y,n[2]=i.z,n[3]=t.x,n[4]=i.y,n[5]=i.z,n[6]=t.x,n[7]=t.y,n[8]=i.z,n[9]=i.x,n[10]=t.y,n[11]=i.z,n[12]=i.x,n[13]=i.y,n[14]=t.z,n[15]=t.x,n[16]=i.y,n[17]=t.z,n[18]=t.x,n[19]=t.y,n[20]=t.z,n[21]=i.x,n[22]=t.y,n[23]=t.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class oke extends Aa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],n=new dr;n.setIndex(new Zr(i,1)),n.setAttribute("position",new kt(o,3)),super(n,new Fi({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class nke extends zo{constructor(e,t=1,i=16776960){const o=i,n=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new dr;s.setAttribute("position",new kt(n,3)),s.computeBoundingSphere(),super(s,new Fi({color:o,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new dr;l.setAttribute("position",new kt(a,3)),l.computeBoundingSphere(),this.add(new yt(l,new Uo({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const P5=new Q;let z1,kN;class ske extends mr{constructor(e=new Q(0,0,1),t=new Q(0,0,0),i=1,o=16776960,n=i*.2,s=n*.2){super(),this.type="ArrowHelper",z1===void 0&&(z1=new dr,z1.setAttribute("position",new kt([0,0,0,0,1,0],3)),kN=new Ui(0,.5,1,5,1),kN.translate(0,-.5,0)),this.position.copy(t),this.line=new zo(z1,new Fi({color:o,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new yt(kN,new Uo({color:o,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,n,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{P5.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(P5,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ake extends Aa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new dr;o.setAttribute("position",new kt(t,3)),o.setAttribute("color",new kt(i,3));const n=new Fi({vertexColors:!0,toneMapped:!1});super(o,n),this.type="AxesHelper"}setColors(e,t,i){const o=new bt,n=this.geometry.attributes.color.array;return o.set(e),o.toArray(n,0),o.toArray(n,3),o.set(t),o.toArray(n,6),o.toArray(n,9),o.set(i),o.toArray(n,12),o.toArray(n,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lke{constructor(){this.type="ShapePath",this.color=new bt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Pv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,o){return this.currentPath.quadraticCurveTo(e,t,i,o),this}bezierCurveTo(e,t,i,o,n,s){return this.currentPath.bezierCurveTo(e,t,i,o,n,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(y){const b=[];for(let x=0,_=y.length;x<_;x++){const S=y[x],w=new Ed;w.curves=S.curves,b.push(w)}return b}function i(y,b){const x=b.length;let _=!1;for(let S=x-1,w=0;w<x;S=w++){let M=b[S],T=b[w],E=T.x-M.x,C=T.y-M.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(M=b[w],E=-E,T=b[S],C=-C),y.y<M.y||y.y>T.y)continue;if(y.y===M.y){if(y.x===M.x)return!0}else{const B=C*(y.x-M.x)-E*(y.y-M.y);if(B===0)return!0;if(B<0)continue;_=!_}}else{if(y.y!==M.y)continue;if(T.x<=y.x&&y.x<=M.x||M.x<=y.x&&y.x<=T.x)return!0}}return _}const o=Ra.isClockWise,n=this.subPaths;if(n.length===0)return[];let s,a,l;const c=[];if(n.length===1)return a=n[0],l=new Ed,l.curves=a.curves,c.push(l),c;let u=!o(n[0].getPoints());u=e?!u:u;const d=[],h=[];let p=[],m=0,g;h[m]=void 0,p[m]=[];for(let y=0,b=n.length;y<b;y++)a=n[y],g=a.getPoints(),s=o(g),s=e?!s:s,s?(!u&&h[m]&&m++,h[m]={s:new Ed,p:g},h[m].s.curves=a.curves,u&&m++,p[m]=[]):p[m].push({h:a,p:g[0]});if(!h[0])return t(n);if(h.length>1){let y=!1,b=0;for(let x=0,_=h.length;x<_;x++)d[x]=[];for(let x=0,_=h.length;x<_;x++){const S=p[x];for(let w=0;w<S.length;w++){const M=S[w];let T=!0;for(let E=0;E<h.length;E++)i(M.p,h[E].p)&&(x!==E&&b++,T?(T=!1,d[E].push(M)):y=!0);T&&d[x].push(M)}}b>0&&y===!1&&(p=d)}let v;for(let y=0,b=h.length;y<b;y++){l=h[y].s,c.push(l),v=p[y];for(let x=0,_=v.length;x<_;x++)l.holes.push(v[x].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:mp}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=mp);const IN=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:$u,AddEquation:Sn,AddOperation:$E,AdditiveAnimationBlendMode:qE,AdditiveBlending:dl,AlphaFormat:Wg,AlwaysCompare:dv,AlwaysDepth:Og,AlwaysStencilFunc:bx,AmbientLight:ff,AnimationAction:y5,AnimationClip:jv,AnimationLoader:xOe,AnimationMixer:qOe,AnimationObjectGroup:$Oe,AnimationUtils:gOe,ArcCurve:F6,ArrayCamera:UC,ArrowHelper:ske,Audio:m5,AudioAnalyser:POe,AudioContext:CN,AudioListener:OOe,AudioLoader:ROe,AxesHelper:ake,BackSide:Ni,BasicDepthPacking:XE,BasicShadowMap:uCe,Bone:$C,BooleanKeyframeTrack:Rd,Box2:QOe,Box3:Yn,Box3Helper:oke,BoxGeometry:ni,BoxHelper:ike,BufferAttribute:Zr,BufferGeometry:dr,BufferGeometryLoader:a5,ByteType:cx,Cache:Od,Camera:Lc,CameraHelper:I5,CanvasTexture:KC,CapsuleGeometry:d1,CatmullRomCurve3:U6,CineonToneMapping:zg,CircleGeometry:h1,ClampToEdgeWrapping:oo,Clock:k1,Color:bt,ColorKeyframeTrack:gN,ColorManagement:Ur,CompressedArrayTexture:B6,CompressedCubeTexture:zLe,CompressedTexture:Ov,CompressedTextureLoader:_Oe,ConeGeometry:p1,CubeCamera:$x,CubeReflectionMapping:Ms,CubeRefractionMapping:Ks,CubeTexture:yd,CubeTextureLoader:wOe,CubeUVReflectionMapping:Wu,CubicBezierCurve:eN,CubicBezierCurve3:tN,CubicInterpolant:e5,CullFaceBack:ax,CullFaceFront:GE,CullFaceFrontBack:cCe,CullFaceNone:VE,Curve:Qs,CurvePath:G6,CustomBlending:vg,CustomToneMapping:WE,CylinderGeometry:Ui,Cylindrical:ZOe,Data3DTexture:Mx,DataArrayTexture:mv,DataTexture:Md,DataTextureLoader:SOe,DataUtils:JCe,DecrementStencilOp:ZE,DecrementWrapStencilOp:eC,DefaultLoadingManager:i5,DepthFormat:Do,DepthStencilFormat:Nn,DepthTexture:Sd,DirectionalLight:Pd,DirectionalLightHelper:k5,DiscreteInterpolant:t5,DisplayP3ColorSpace:tv,DodecahedronGeometry:f1,DoubleSide:io,DstAlphaFactor:Eg,DstColorFactor:Ng,DynamicCopyUsage:bCe,DynamicDrawUsage:xx,DynamicReadUsage:gCe,EdgesGeometry:H6,EllipseCurve:l1,EqualCompare:sv,EqualDepth:Ig,EqualStencilFunc:oC,EquirectangularReflectionMapping:hl,EquirectangularRefractionMapping:pl,Euler:Rn,EventDispatcher:ao,ExtrudeGeometry:_1,FileLoader:La,Float16BufferAttribute:NC,Float32BufferAttribute:kt,Float64BufferAttribute:iNe,FloatType:Di,Fog:Tv,FogExp2:Mv,FramebufferTexture:a1,FrontSide:Ss,Frustum:_v,GLBufferAttribute:JOe,GLSL1:vV,GLSL3:_x,GreaterCompare:lv,GreaterDepth:Dg,GreaterEqualCompare:uv,GreaterEqualDepth:Pg,GreaterEqualStencilFunc:lC,GreaterStencilFunc:sC,GridHelper:R5,Group:rf,HalfFloatType:no,HemisphereLight:kd,HemisphereLightHelper:A5,IcosahedronGeometry:w1,ImageBitmapLoader:AOe,ImageLoader:$v,ImageUtils:fC,IncrementStencilOp:JE,IncrementWrapStencilOp:QE,InstancedBufferAttribute:cf,InstancedBufferGeometry:TN,InstancedInterleavedBuffer:qv,InstancedMesh:WC,Int16BufferAttribute:tNe,Int32BufferAttribute:rNe,Int8BufferAttribute:ZCe,IntType:Hg,InterleavedBuffer:Ev,InterleavedBufferAttribute:kn,Interpolant:Vv,InterpolateDiscrete:Jg,InterpolateLinear:Zg,InterpolateSmooth:mx,InvertStencilOp:tC,KeepStencilOp:Rp,KeyframeTrack:ea,LOD:v6,LatheGeometry:Dv,Layers:Rx,LessCompare:Lp,LessDepth:kg,LessEqualCompare:av,LessEqualDepth:ju,LessEqualStencilFunc:nC,LessStencilFunc:iC,Light:Al,LightProbe:SN,Line:zo,Line3:w5,LineBasicMaterial:Fi,LineCurve:rN,LineCurve3:V6,LineDashedMaterial:zv,LineLoop:O6,LineSegments:Aa,LinearDisplayP3ColorSpace:Ap,LinearEncoding:ev,LinearFilter:oi,LinearInterpolant:mN,LinearMipMapLinearFilter:pV,LinearMipMapNearestFilter:hV,LinearMipmapLinearFilter:Tn,LinearMipmapNearestFilter:Gg,LinearSRGBColorSpace:en,LinearToneMapping:Fg,LinearTransfer:rv,Loader:on,LoaderUtils:MN,LoadingManager:vN,LoopOnce:fV,LoopPingPong:gV,LoopRepeat:mV,LuminanceAlphaFormat:Xg,LuminanceFormat:qg,MOUSE:Gu,Material:ai,MaterialLoader:Rl,MathUtils:vl,Matrix3:er,Matrix4:Xt,MaxEquation:_g,Mesh:yt,MeshBasicMaterial:Uo,MeshDepthMaterial:Sv,MeshDistanceMaterial:Jx,MeshLambertMaterial:L1,MeshMatcapMaterial:hN,MeshNormalMaterial:R1,MeshPhongMaterial:A1,MeshPhysicalMaterial:hf,MeshStandardMaterial:Nd,MeshToonMaterial:dN,MinEquation:xg,MirroredRepeatWrapping:xc,MixOperation:jE,MultiplyBlending:yc,MultiplyOperation:yp,NearestFilter:Nr,NearestMipMapLinearFilter:dV,NearestMipMapNearestFilter:uV,NearestMipmapLinearFilter:Ea,NearestMipmapNearestFilter:_c,NeverCompare:nv,NeverDepth:Lg,NeverStencilFunc:rC,NoBlending:So,NoColorSpace:so,NoToneMapping:Mn,NormalAnimationBlendMode:gx,NormalBlending:qn,NotEqualCompare:cv,NotEqualDepth:Bg,NotEqualStencilFunc:aC,NumberKeyframeTrack:Gv,Object3D:mr,ObjectLoader:EN,ObjectSpaceNormalMap:yx,OctahedronGeometry:El,OneFactor:Sg,OneMinusDstAlphaFactor:Cg,OneMinusDstColorFactor:Ag,OneMinusSrcAlphaFactor:vp,OneMinusSrcColorFactor:Tg,OrthographicCamera:Na,P3Primaries:ov,PCFShadowMap:HE,PCFSoftShadowMap:lx,PMREMGenerator:PC,Path:Pv,PerspectiveCamera:li,Plane:Tl,PlaneGeometry:xd,PlaneHelper:nke,PointLight:Id,PointLightHelper:E5,Points:I6,PointsMaterial:Td,PolarGridHelper:rke,PolyhedronGeometry:Pc,PositionalAudio:IOe,PropertyBinding:Or,PropertyMixer:v5,QuadraticBezierCurve:iN,QuadraticBezierCurve3:oN,Quaternion:jr,QuaternionKeyframeTrack:pf,QuaternionLinearInterpolant:r5,RED_GREEN_RGTC2_Format:Cp,RED_RGTC1_Format:fx,REVISION:mp,RGBADepthPacking:vx,RGBAFormat:Po,RGBAIntegerFormat:Yg,RGBA_ASTC_10x10_Format:ad,RGBA_ASTC_10x5_Format:od,RGBA_ASTC_10x6_Format:nd,RGBA_ASTC_10x8_Format:sd,RGBA_ASTC_12x10_Format:ld,RGBA_ASTC_12x12_Format:cd,RGBA_ASTC_4x4_Format:Yu,RGBA_ASTC_5x4_Format:Ju,RGBA_ASTC_5x5_Format:Zu,RGBA_ASTC_6x5_Format:Qu,RGBA_ASTC_6x6_Format:ed,RGBA_ASTC_8x5_Format:td,RGBA_ASTC_8x6_Format:rd,RGBA_ASTC_8x8_Format:id,RGBA_BPTC_Format:Sc,RGBA_ETC2_EAC_Format:Ku,RGBA_PVRTC_2BPPV1_Format:Tp,RGBA_PVRTC_4BPPV1_Format:Mp,RGBA_S3TC_DXT1_Format:fl,RGBA_S3TC_DXT3_Format:ml,RGBA_S3TC_DXT5_Format:gl,RGB_BPTC_SIGNED_Format:hx,RGB_BPTC_UNSIGNED_Format:px,RGB_ETC1_Format:dx,RGB_ETC2_Format:Xu,RGB_PVRTC_2BPPV1_Format:Sp,RGB_PVRTC_4BPPV1_Format:wp,RGB_S3TC_DXT1_Format:wc,RGFormat:_p,RGIntegerFormat:Kg,RawShaderMaterial:N1,Ray:gd,Raycaster:I1,Rec709Primaries:iv,RectAreaLight:_N,RedFormat:bp,RedIntegerFormat:xp,ReinhardToneMapping:Ug,RenderTarget:gC,RepeatWrapping:bc,ReplaceStencilOp:YE,ReverseSubtractEquation:bg,RingGeometry:S1,SIGNED_RED_GREEN_RGTC2_Format:Np,SIGNED_RED_RGTC1_Format:Ep,SRGBColorSpace:Ft,SRGBTransfer:Jr,Scene:Oc,ShaderChunk:lr,ShaderLib:Ai,ShaderMaterial:gi,ShadowMaterial:uN,Shape:Ed,ShapeGeometry:M1,ShapePath:lke,ShapeUtils:Ra,ShortType:ux,Skeleton:r1,SkeletonHelper:eke,SkinnedMesh:S6,Source:Mc,Sphere:Jn,SphereGeometry:Dc,Spherical:LN,SphericalHarmonics3:wN,SplineCurve:nN,SpotLight:Bc,SpotLightHelper:M5,Sprite:Ic,SpriteMaterial:kc,SrcAlphaFactor:gp,SrcAlphaSaturateFactor:Rg,SrcColorFactor:Mg,StaticCopyUsage:yCe,StaticDrawUsage:Op,StaticReadUsage:mCe,StereoCamera:h5,StreamCopyUsage:xCe,StreamDrawUsage:fCe,StreamReadUsage:vCe,StringKeyframeTrack:Ld,SubtractEquation:yg,SubtractiveBlending:vc,TOUCH:Hu,TangentSpaceNormalMap:Ys,TetrahedronGeometry:T1,Texture:mi,TextureLoader:MOe,TorusGeometry:Cl,TorusKnotGeometry:E1,Triangle:Ln,TriangleFanDrawMode:pCe,TriangleStripDrawMode:hCe,TrianglesDrawMode:dCe,TubeGeometry:C1,TwoPassDoubleSide:cV,UVMapping:Vg,Uint16BufferAttribute:Px,Uint32BufferAttribute:Dx,Uint8BufferAttribute:QCe,Uint8ClampedBufferAttribute:eNe,Uniform:XOe,UniformsGroup:YOe,UniformsLib:Mt,UniformsUtils:Rc,UnsignedByteType:En,UnsignedInt248Type:Xn,UnsignedIntType:Cn,UnsignedShort4444Type:jg,UnsignedShort5551Type:$g,UnsignedShortType:qu,VSMShadowMap:Ta,Vector2:We,Vector3:Q,Vector4:Kt,VectorKeyframeTrack:Hv,VideoTexture:D6,WebGL1Renderer:h6,WebGL3DRenderTarget:UCe,WebGLArrayRenderTarget:FCe,WebGLCoordinateSystem:Ts,WebGLCubeRenderTarget:LC,WebGLMultipleRenderTargets:zCe,WebGLRenderTarget:Ki,WebGLRenderer:VC,WebGLUtils:d6,WebGPUCoordinateSystem:hd,WireframeGeometry:cN,WrapAroundEnding:Qg,ZeroCurvatureEnding:ud,ZeroFactor:wg,ZeroSlopeEnding:dd,ZeroStencilOp:KE,_SRGBAFormat:kp,createCanvasElement:hC,sRGBEncoding:Ca},Symbol.toStringTag,{value:"Module"})),PN={VERTEX:"vertex",FRAGMENT:"fragment"},Qr={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},cke={BOOLEAN:"bool",INTEGER:"int",FLOAT:"float",VECTOR2:"vec2",VECTOR3:"vec3",VECTOR4:"vec4",MATRIX3:"mat3",MATRIX4:"mat4"},mf=["fragment","vertex"],D5=["setup","analyze","generate"],B5=[...mf,"compute"],V1=["x","y","z","w"];function G1(r){let e="{";r.isNode===!0&&(e+=`uuid:"${r.uuid}"`);for(const{property:t,index:i,childNode:o}of Xv(r)){let n=G1(o);n.includes(",")||(n=n.slice(n.indexOf('"'),n.indexOf("}"))),e+=`,${t}${i!==void 0?"/"+i:""}:${n}`}return e+="}",e}function*Xv(r,e=!1){for(const t in r){if(t.startsWith("_")===!0)continue;const i=r[t];if(Array.isArray(i)===!0)for(let o=0;o<i.length;o++){const n=i[o];n&&(n.isNode===!0||e&&typeof n.toJSON=="function")&&(yield{property:t,index:o,childNode:n})}else if(i&&i.isNode===!0)yield{property:t,childNode:i};else if(typeof i=="object")for(const o in i){const n=i[o];n&&(n.isNode===!0||e&&typeof n.toJSON=="function")&&(yield{property:t,index:o,childNode:n})}}}function Uc(r){if(r==null)return null;const e=typeof r;return r.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":r.isVector2===!0?"vec2":r.isVector3===!0?"vec3":r.isVector4===!0?"vec4":r.isMatrix3===!0?"mat3":r.isMatrix4===!0?"mat4":r.isColor===!0?"color":r instanceof ArrayBuffer?"ArrayBuffer":null}function DN(r,...e){const t=r?r.slice(-4):void 0;return(t==="vec2"||t==="vec3"||t==="vec4")&&e.length===1&&(e=t==="vec2"?[e[0],e[0]]:[e[0],e[0],e[0]]),r==="color"?new bt(...e):t==="vec2"?new We(...e):t==="vec3"?new Q(...e):t==="vec4"?new Kt(...e):t==="mat3"?new er(...e):t==="mat4"?new Xt(...e):r==="bool"?e[0]||!1:r==="float"||r==="int"||r==="uint"?e[0]||0:r==="string"?e[0]||"":r==="ArrayBuffer"?FN(e[0]):null}function BN(r){let e="";const t=new Uint8Array(r);for(let i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return btoa(e)}function FN(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0)).buffer}const uke=Object.freeze(Object.defineProperty({__proto__:null,arrayBufferToBase64:BN,base64ToArrayBuffer:FN,getCacheKey:G1,getNodeChildren:Xv,getValueFromType:DN,getValueType:Uc},Symbol.toStringTag,{value:"Module"})),UN=new Map;let dke=0;const qt=class extends ao{constructor(r=null){super(),this.nodeType=r,this.updateType=Qr.NONE,this.updateBeforeType=Qr.NONE,this.uuid=vl.generateUUID(),this.isNode=!0,Object.defineProperty(this,"id",{value:dke++})}get type(){return this.constructor.type}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return!1}*getChildren(){const r=this;for(const{property:e,index:t,childNode:i}of Xv(this))yield{childNode:i,replaceNode(o){t===void 0?r[e]=o:r[e][t]=o}}}dispose(){this.dispatchEvent({type:"dispose"})}traverse(r,e=null){r(this,e);for(const{childNode:t,replaceNode:i}of this.getChildren())t.traverse(r,i)}getCacheKey(){return G1(this)}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getNodeType(r){const e=r.getNodeProperties(this);return e.outputNode?e.outputNode.getNodeType(r):this.nodeType}getShared(r){const e=this.getHash(r);return r.getNodeFromHash(e)||this}setup(r){const e=r.getNodeProperties(this);for(const{childNode:t}of this.getChildren())e["_node"+t.id]=t;return null}construct(r){return console.warn("THREE.Node: construct() is deprecated. Use setup() instead."),this.setup(r)}analyze(r){const e=r.getDataFromNode(this);if(e.dependenciesCount=e.dependenciesCount===void 0?1:e.dependenciesCount+1,e.dependenciesCount===1){const t=r.getNodeProperties(this);for(const i of Object.values(t))i&&i.isNode===!0&&i.build(r)}}generate(r,e){const{outputNode:t}=r.getNodeProperties(this);if(t&&t.isNode===!0)return t.build(r,e)}updateBefore(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(r,e=null){const t=this.getShared(r);if(this!==t)return t.build(r,e);r.addNode(this),r.addChain(this);let i=null;const o=r.getBuildStage();if(o==="setup"){const n=r.getNodeProperties(this);if(n.initialized!==!0||r.context.tempRead===!1){const s=r.stack.nodes.length;n.initialized=!0,n.outputNode=this.setup(r),n.outputNode!==null&&r.stack.nodes.length!==s&&(n.outputNode=r.stack);for(const a of Object.values(n))a&&a.isNode===!0&&a.build(r)}}else if(o==="analyze")this.analyze(r);else if(o==="generate")if(this.generate.length===1){const n=this.getNodeType(r),s=r.getDataFromNode(this);i=s.snippet,i===void 0&&(i=this.generate(r)||"",s.snippet=i),i=r.format(i,n,e)}else i=this.generate(r,e)||"";return r.removeChain(this),i}getSerializeChildren(){return Xv(this)}serialize(r){const e=this.getSerializeChildren(),t={};for(const{property:i,index:o,childNode:n}of e)o!==void 0?(t[i]===void 0&&(t[i]=Number.isInteger(o)?[]:{}),t[i][o]=n.toJSON(r.meta).uuid):t[i]=n.toJSON(r.meta).uuid;Object.keys(t).length>0&&(r.inputNodes=t)}deserialize(r){if(r.inputNodes!==void 0){const e=r.meta.nodes;for(const t in r.inputNodes)if(Array.isArray(r.inputNodes[t])){const i=[];for(const o of r.inputNodes[t])i.push(e[o]);this[t]=i}else if(typeof r.inputNodes[t]=="object"){const i={};for(const o in r.inputNodes[t]){const n=r.inputNodes[t][o];i[o]=e[n]}this[t]=i}else{const i=r.inputNodes[t];this[t]=e[i]}}}toJSON(r){const{uuid:e,type:t}=this,i=r===void 0||typeof r=="string";i&&(r={textures:{},images:{},nodes:{}});let o=r.nodes[e];o===void 0&&(o={uuid:e,type:t,meta:r,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},i!==!0&&(r.nodes[o.uuid]=o),this.serialize(o),delete o.meta);function n(s){const a=[];for(const l in s){const c=s[l];delete c.metadata,a.push(c)}return a}if(i){const s=n(r.textures),a=n(r.images),l=n(r.nodes);s.length>0&&(o.textures=s),a.length>0&&(o.images=a),l.length>0&&(o.nodes=l)}return o}};function ut(r,e){if(typeof e!="function"||!r)throw new Error(`Node class ${r} is not a class`);if(UN.has(r))throw new Error(`Redefinition of node class ${r}`);UN.set(r,e),e.type=r}function zN(r){const e=UN.get(r);if(e!==void 0)return new e}class F5 extends qt{constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?Uc(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=Uc(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=BN(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?DN(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}const VN=F5;ut("InputNode",F5);class U5 extends qt{constructor(e,t){super(),this.node=e,this.indexNode=t}getNodeType(e){return this.node.getNodeType(e)}generate(e){const t=this.node.build(e),i=this.indexNode.build(e,"uint");return`${t}[ ${i} ]`}}const Kv=U5;ut("ArrayElementNode",U5);class z5 extends qt{constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let i=null;for(const o of this.convertTo.split("|"))(i===null||e.getTypeLength(t)===e.getTypeLength(o))&&(i=o);return i}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const i=this.node,o=this.getNodeType(e),n=i.build(e,o);return e.format(n,o,t)}}const Yv=z5;ut("ConvertNode",z5);class V5 extends qt{constructor(e){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).dependenciesCount>1}build(e,t){if(e.getBuildStage()==="generate"){const i=e.getVectorType(this.getNodeType(e,t)),o=e.getDataFromNode(this);if(e.context.tempRead!==!1&&o.propertyName!==void 0)return e.format(o.propertyName,i,t);if(e.context.tempWrite!==!1&&i!=="void"&&t!=="void"&&this.hasDependencies(e)){const n=super.build(e,i),s=e.getVarFromNode(this,i),a=e.getPropertyName(s);return e.addLineFlowCode(`${a} = ${n}`),o.snippet=n,o.propertyName=a,e.format(o.propertyName,i,t)}}return super.build(e,t)}}const Li=V5;ut("TempNode",V5);class G5 extends Li{constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,i)=>t+e.getTypeLength(i.getNodeType(e)),0))}generate(e,t){const i=this.getNodeType(e),o=this.nodes,n=[];for(const a of o){const l=a.build(e);n.push(l)}const s=`${e.getType(i)}( ${n.join(", ")} )`;return e.format(s,i,t)}}const H5=G5;ut("JoinNode",G5);const hke=V1.join("");class j5 extends qt{constructor(e,t="x"){super(),this.node=e,this.components=t}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(V1.indexOf(t)+1,e);return e}getNodeType(e){return e.getTypeFromLength(this.components.length)}generate(e,t){const i=this.node,o=e.getTypeLength(i.getNodeType(e));let n=null;if(o>1){let s=null;this.getVectorLength()>=o&&(s=e.getTypeFromLength(this.getVectorLength()));const a=i.build(e,s);this.components.length===o&&this.components===hke.slice(0,this.components.length)?n=e.format(a,s,t):n=e.format(`${a}.${this.components}`,this.getNodeType(e),t)}else n=i.build(e,t);return n}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}const H1=j5;ut("SplitNode",j5);class $5 extends Li{constructor(e,t,i){super(),this.sourceNode=e,this.components=t,this.targetNode=i}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:i,targetNode:o}=this,n=this.getNodeType(e),s=e.getTypeFromLength(i.length),a=o.build(e,s),l=t.build(e,n),c=e.getTypeLength(n),u=[];for(let d=0;d<c;d++){const h=V1[d];h===i[0]?(u.push(a),d+=i.length-1):u.push(l+"."+h)}return`${e.getType(n)}( ${u.join(", ")} )`}}const W5=$5;ut("SetNode",$5);class q5 extends VN{constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.getConst(this.getNodeType(e),this.value)}generate(e,t){const i=this.getNodeType(e);return e.format(this.generateConst(e),i,t)}}const hr=q5;ut("ConstNode",q5);const gf=new Map;function Je(r,e){if(gf.has(r))throw new Error(`Redefinition of node element ${r}`);if(typeof e!="function")throw new Error(`Node element ${r} is not a function`);gf.set(r,e)}const X5=r=>r.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),K5={setup(r,e){const t=e.shift();return r(Jv(t),...e)},get:function(r,e,t){if(typeof e=="string"&&r[e]===void 0)if(gf.has(e)){const i=gf.get(e);return(...o)=>i(t,...o)}else{if(e==="self")return r;if(e.endsWith("Assign")&&gf.has(e.slice(0,e.length-6))){const i=gf.get(e.slice(0,e.length-6));return(...o)=>t.assign(i(t,...o))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=X5(e),Ut(new H1(r,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=X5(e.slice(3).toLowerCase()),e=e.split("").sort().join(""),i=>Ut(new W5(r,e,i));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),Ut(new H1(r,e));if(/^\d+$/.test(e)===!0)return Ut(new Kv(r,new hr(Number(e),"uint")))}}return r[e]}},GN=new WeakMap,pke=function(r,e=null){const t=Uc(r);if(t==="node"){let i=GN.get(r);return i===void 0&&(i=new Proxy(r,K5),GN.set(r,i),GN.set(i,i)),i}else{if(e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string")return Ut(WN(r,e));if(t==="shader")return Mr(r)}return r},fke=function(r,e=null){for(const t in r)r[t]=Ut(r[t],e);return r},mke=function(r,e=null){const t=r.length;for(let i=0;i<t;i++)r[i]=Ut(r[i],e);return r},gke=function(r,e=null,t=null,i=null){const o=n=>Ut(i!==null?Object.assign(n,i):n);return e===null?(...n)=>o(new r(...Vd(n))):t!==null?(t=Ut(t),(...n)=>o(new r(e,...Vd(n),t))):(...n)=>o(new r(e,...Vd(n)))},vke=function(r,...e){return Ut(new r(...Vd(e)))};class yke extends qt{constructor(e,t){super(),this.shaderNode=e,this.inputNodes=t}getNodeType(e){const{outputNode:t}=e.getNodeProperties(this);return t?t.getNodeType(e):super.getNodeType(e)}call(e){const{shaderNode:t,inputNodes:i}=this,o=t.jsFunc,n=i!==null?o(Jv(i),e.stack,e):o(e.stack,e);return Ut(n)}setup(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,t){const{outputNode:i}=e.getNodeProperties(this);return i===null?this.call(e).build(e,t):super.generate(e,t)}}class bke extends qt{constructor(e){super(),this.jsFunc=e}call(e=null){return Ut(new yke(this,e))}setup(){return this.call()}}const xke=[!1,!0],_ke=[0,1,2,3],wke=[-1,-2],Y5=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],HN=new Map;for(const r of xke)HN.set(r,new hr(r));const jN=new Map;for(const r of _ke)jN.set(r,new hr(r,"uint"));const $N=new Map([...jN].map(r=>new hr(r.value,"int")));for(const r of wke)$N.set(r,new hr(r,"int"));const j1=new Map([...$N].map(r=>new hr(r.value)));for(const r of Y5)j1.set(r,new hr(r));for(const r of Y5)j1.set(-r,new hr(-r));const $1={bool:HN,uint:jN,ints:$N,float:j1},J5=new Map([...HN,...j1]),WN=(r,e)=>J5.has(r)?J5.get(r):r.isNode===!0?r:new hr(r,e),Ske=r=>{try{return r.getNodeType()}catch{return}},ci=function(r,e=null){return(...t)=>{if((t.length===0||!["bool","float","int","uint"].includes(r)&&t.every(o=>typeof o!="object"))&&(t=[DN(r,...t)]),t.length===1&&e!==null&&e.has(t[0]))return Ut(e.get(t[0]));if(t.length===1){const o=WN(t[0],r);return Ske(o)===r?Ut(o):Ut(new Yv(o,r))}const i=t.map(o=>WN(o));return Ut(new H5(i,r))}},Z5=r=>r!=null?r.nodeType||r.convertTo||(typeof r=="string"?r:null):null;function Oa(r){return new Proxy(new bke(r),K5)}const Ut=(r,e=null)=>pke(r,e),Jv=(r,e=null)=>new fke(r,e),Vd=(r,e=null)=>new mke(r,e),Ze=(...r)=>new gke(...r),gt=(...r)=>new vke(...r),Mke=r=>(console.warn("TSL: shader() is deprecated. Use tslFn() instead."),new Oa(r)),Mr=r=>{const e=new Oa(r);return t=>e.call(t)};ut("ShaderNode",Oa);const Q5=new ci("color"),Dt=new ci("float",$1.float),Zv=new ci("int",$1.int),qN=new ci("uint",$1.uint),XN=new ci("bool",$1.bool),kr=new ci("vec2"),KN=new ci("ivec2"),YN=new ci("uvec2"),JN=new ci("bvec2"),Gt=new ci("vec3"),ZN=new ci("ivec3"),QN=new ci("uvec3"),e2=new ci("bvec3"),Ir=new ci("vec4"),t2=new ci("ivec4"),r2=new ci("uvec4"),i2=new ci("bvec4"),ka=new ci("mat3"),o2=new ci("imat3"),n2=new ci("umat3"),s2=new ci("bmat3"),W1=new ci("mat4"),a2=new ci("imat4"),l2=new ci("umat4"),c2=new ci("bmat4"),e8=(r="")=>Ut(new hr(r,"string")),t8=r=>Ut(new hr(r,"ArrayBuffer"));Je("color",Q5),Je("float",Dt),Je("int",Zv),Je("uint",qN),Je("bool",XN),Je("vec2",kr),Je("ivec2",KN),Je("uvec2",YN),Je("bvec2",JN),Je("vec3",Gt),Je("ivec3",ZN),Je("uvec3",QN),Je("bvec3",e2),Je("vec4",Ir),Je("ivec4",t2),Je("uvec4",r2),Je("bvec4",i2),Je("mat3",ka),Je("imat3",o2),Je("umat3",n2),Je("bmat3",s2),Je("mat4",W1),Je("imat4",a2),Je("umat4",l2),Je("bmat4",c2),Je("string",e8),Je("arrayBuffer",t8);const u2=Ze(Kv),d2=(r,e)=>Ut(new Yv(Ut(r),e)),Tke=(r,e)=>Ut(new H1(Ut(r),e));Je("element",u2),Je("convert",d2);class h2 extends VN{constructor(e,t=null){super(e,t),this.isUniformNode=!0}getUniformHash(e){return this.getHash(e)}generate(e,t){const i=this.getNodeType(e),o=this.getUniformHash(e);let n=e.getNodeFromHash(o);n===void 0&&(e.setHashNode(this,o),n=this);const s=n.getInputType(e),a=e.getUniformFromNode(n,s,e.shaderStage,e.context.label),l=e.getPropertyName(a);return e.context.label!==void 0&&delete e.context.label,e.format(l,i,t)}}const gr=h2,Zi=(r,e)=>{const t=Z5(e||r),i=r&&r.isNode===!0?r.node&&r.node.value||r.value:r;return Ut(new h2(i,t))};ut("UniformNode",h2);class r8 extends gr{constructor(e=[]){super(),this.isArrayUniformNode=!0,this.nodes=e}getNodeType(e){return this.nodes[0].getNodeType(e)}}const i8=r8;ut("ArrayUniformNode",r8);class p2 extends qt{constructor(e,t=null){super(),this.node=e,this.name=t}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{name:t,node:i}=this,o=this.getNodeType(e),n=e.getVaryingFromNode(this,o);n.needsInterpolation||(n.needsInterpolation=e.shaderStage==="fragment"),t!==null&&(n.name=t);const s=e.getPropertyName(n,PN.VERTEX);return e.flowNodeFromShaderStage(PN.VERTEX,i,o,s),e.getPropertyName(n)}}const f2=p2,Xr=Ze(p2);Je("varying",Xr),ut("VaryingNode",p2);class m2 extends qt{constructor(e,t=null){super(t),this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=super.getNodeType(e);if(t===null){const i=this.getAttributeName(e);if(e.hasGeometryAttribute(i)){const o=e.geometry.getAttribute(i);t=e.getTypeFromAttribute(o)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),i=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const o=e.geometry.getAttribute(t),n=e.getTypeFromAttribute(o),s=e.getAttribute(t,n);return e.shaderStage==="vertex"?e.format(s.name,n,i):Xr(this).build(e,i)}else return console.warn(`AttributeNode: Attribute "${t}" not found.`),e.getConst(i)}}const q1=m2,nn=(r,e)=>Ut(new m2(r,e));ut("AttributeNode",m2);class g2 extends qt{constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t),this.outputNode.build(e)}}const v2=g2,Qv=Ze(g2);Je("bypass",Qv),ut("BypassNode",g2);let Eke=0;class Cke{constructor(){this.id=Eke++,this.nodesData=new WeakMap}getNodeData(e){return this.nodesData.get(e)}setNodeData(e,t){this.nodesData.set(e,t)}}const X1=Cke;class y2 extends qt{constructor(e,t=new X1){super(),this.isCacheNode=!0,this.node=e,this.cache=t}getNodeType(e){return this.node.getNodeType(e)}build(e,...t){const i=e.getCache();e.setCache(this.cache);const o=this.node.build(e,...t);return e.setCache(i),o}}const b2=y2,e0=Ze(y2);Je("cache",e0),ut("CacheNode",y2);class x2 extends qt{constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.context=t}getNodeType(e){return this.node.getNodeType(e)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.context});const i=this.node.build(e);return e.setContext(t),i}generate(e,t){const i=e.getContext();e.setContext({...e.context,...this.context});const o=this.node.build(e,t);return e.setContext(i),o}}const Gd=x2,es=Ze(x2),t0=(r,e)=>es(r,{label:e});Je("context",es),Je("label",t0),ut("ContextNode",x2);class ta extends qt{constructor(e){super("uint"),this.scope=e,this.isInstanceIndexNode=!0}generate(e){const t=this.getNodeType(e),i=this.scope;let o;if(i===ta.VERTEX)o=e.getVertexIndex();else if(i===ta.INSTANCE)o=e.getInstanceIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+i);let n;return e.shaderStage==="vertex"||e.shaderStage==="compute"?n=o:n=Xr(this).build(e,t),n}}ta.VERTEX="vertex",ta.INSTANCE="instance";const Nke=ta,Ake=gt(ta,ta.VERTEX),o8=gt(ta,ta.INSTANCE);ut("IndexNode",ta);class Rke{init(){}direct(){}indirectDiffuse(){}indirectSpecular(){}ambientOcclusion(){}}const _2=Rke;class Lke{constructor(e,t,i=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=i}}const K1=Lke;class Oke{constructor(e,t,i,o=void 0){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=i.getSelf(),this.needsUpdate=o}get value(){return this.node.value}set value(e){this.node.value=e}}const w2=Oke;class kke{constructor(e,t){this.isNodeVar=!0,this.name=e,this.type=t}}const Y1=kke;class Ike extends Y1{constructor(e,t){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0}}const S2=Ike;class Pke{constructor(e,t,i=""){this.name=e,this.type=t,this.code=i,Object.defineProperty(this,"isNodeCode",{value:!0})}}const M2=Pke;class Dke{constructor(){this.keywords=[],this.nodes=[],this.keywordsCallback={}}getNode(e){let t=this.nodes[e];return t===void 0&&this.keywordsCallback[e]!==void 0&&(t=this.keywordsCallback[e](e),this.nodes[e]=t),t}addKeyword(e,t){return this.keywords.push(e),this.keywordsCallback[e]=t,this}parse(e){const t=this.keywords,i=new RegExp(`\\b${t.join("\\b|\\b")}\\b`,"g"),o=e.match(i),n=[];if(o!==null)for(const s of o){const a=this.getNode(s);a!==void 0&&n.indexOf(a)===-1&&n.push(a)}return n}include(e,t){const i=this.parse(t);for(const o of i)o.build(e)}}const T2=Dke;class co extends qt{constructor(e,t=null){super(e),this.name=t}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){const t=e.getVarFromNode(this,this.getNodeType(e)),i=this.name;return i!==null&&(t.name=i),e.getPropertyName(t)}}const ra=co,Ia=(r,e)=>Ut(new co(r,e)),uo=gt(co,"vec4","DiffuseColor"),Hd=gt(co,"float","Roughness"),E2=gt(co,"float","Metalness"),C2=gt(co,"float","Clearcoat"),J1=gt(co,"float","ClearcoatRoughness"),vf=gt(co,"vec3","Sheen"),N2=gt(co,"float","SheenRoughness"),A2=gt(co,"float","Iridescence"),n8=gt(co,"float","IridescenceIOR"),s8=gt(co,"float","IridescenceThickness"),ia=gt(co,"color","SpecularColor"),Z1=gt(co,"float","Shininess"),a8=gt(co,"vec4","Output"),yf=gt(co,"float","dashSize"),Q1=gt(co,"float","gapSize");ut("PropertyNode",co);class R2 extends q1{constructor(e=0){super(null,"vec2"),this.isUVNode=!0,this.index=e}getAttributeName(){const e=this.index;return"uv"+(e>0?e:"")}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}const L2=R2,ui=(...r)=>Ut(new R2(...r));ut("UVNode",R2);class l8 extends qt{constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const i=this.textureNode.build(e,"property"),o=this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${i}, ${o} )`,this.getNodeType(e),t)}}const c8=Ze(l8);Je("textureSize",c8),ut("TextureSizeNode",l8);class yi extends Li{constructor(e,t,i,...o){if(super(),this.op=e,o.length>0){let n=i;for(let s=0;s<o.length;s++)n=new yi(e,n,o[s]);i=n}this.aNode=t,this.bNode=i}hasDependencies(e){return this.op!=="="?super.hasDependencies(e):!1}getNodeType(e,t){const i=this.op,o=this.aNode,n=this.bNode,s=o.getNodeType(e),a=n.getNodeType(e);if(s==="void"||a==="void")return"void";if(i==="="||i==="%")return s;if(i==="&"||i==="|"||i==="^"||i===">>"||i==="<<")return e.getIntegerType(s);if(i==="=="||i==="&&"||i==="||"||i==="^^")return"bool";if(i==="<"||i===">"||i==="<="||i===">="){const l=t?e.getTypeLength(t):Math.max(e.getTypeLength(s),e.getTypeLength(a));return l>1?`bvec${l}`:"bool"}else return s==="float"&&e.isMatrix(a)?a:e.isMatrix(s)&&e.isVector(a)?e.getVectorFromMatrix(s):e.isVector(s)&&e.isMatrix(a)?e.getVectorFromMatrix(a):e.getTypeLength(a)>e.getTypeLength(s)?a:s}generate(e,t){const i=this.op,o=this.aNode,n=this.bNode,s=this.getNodeType(e,t);let a=null,l=null;s!=="void"?(a=o.getNodeType(e),l=n.getNodeType(e),i==="="?l=a:i==="<"||i===">"||i==="<="||i===">="||i==="=="?e.isVector(a)?l=a:a=l="float":i===">>"||i==="<<"?(a=s,l=e.changeComponentType(l,"uint")):e.isMatrix(a)&&e.isVector(l)?l=e.getVectorFromMatrix(a):e.isVector(a)&&e.isMatrix(l)?a=e.getVectorFromMatrix(l):a=l=s):a=l=s;const c=o.build(e,a),u=n.build(e,l),d=e.getTypeLength(t);if(t!=="void")return i==="="?(e.addLineFlowCode(`${c} ${this.op} ${u}`),c):i==="<"&&d>1?e.format(`${e.getMethod("lessThan")}( ${c}, ${u} )`,s,t):i==="<="&&d>1?e.format(`${e.getMethod("lessThanEqual")}( ${c}, ${u} )`,s,t):i===">"&&d>1?e.format(`${e.getMethod("greaterThan")}( ${c}, ${u} )`,s,t):i===">="&&d>1?e.format(`${e.getMethod("greaterThanEqual")}( ${c}, ${u} )`,s,t):e.format(`( ${c} ${this.op} ${u} )`,s,t);if(a!=="void")return e.format(`${c} ${this.op} ${u}`,s,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const Pr=yi,sn=Ze(yi,"+"),r0=Ze(yi,"-"),Mo=Ze(yi,"*"),jd=Ze(yi,"/"),O2=Ze(yi,"%"),k2=Ze(yi,"=="),e_=Ze(yi,"="),I2=Ze(yi,"<"),P2=Ze(yi,">"),D2=Ze(yi,"<="),B2=Ze(yi,">="),F2=Ze(yi,"&&"),U2=Ze(yi,"||"),z2=Ze(yi,"^^"),V2=Ze(yi,"&"),G2=Ze(yi,"|"),H2=Ze(yi,"^"),j2=Ze(yi,"<<"),$2=Ze(yi,">>");Je("add",sn),Je("sub",r0),Je("mul",Mo),Je("div",jd),Je("remainder",O2),Je("equal",k2),Je("assign",e_),Je("lessThan",I2),Je("greaterThan",P2),Je("lessThanEqual",D2),Je("greaterThanEqual",B2),Je("and",F2),Je("or",U2),Je("xor",z2),Je("bitAnd",V2),Je("bitOr",G2),Je("bitXor",H2),Je("shiftLeft",j2),Je("shiftRight",$2),ut("OperatorNode",yi);class Fe extends Li{constructor(e,t,i=null,o=null){super(),this.method=e,this.aNode=t,this.bNode=i,this.cNode=o}getInputType(e){const t=this.aNode.getNodeType(e),i=this.bNode?this.bNode.getNodeType(e):null,o=this.cNode?this.cNode.getNodeType(e):null,n=e.isMatrix(t)?0:e.getTypeLength(t),s=e.isMatrix(i)?0:e.getTypeLength(i),a=e.isMatrix(o)?0:e.getTypeLength(o);return n>s&&n>a?t:s>a?i:a>n?o:t}getNodeType(e){const t=this.method;return t===Fe.LENGTH||t===Fe.DISTANCE||t===Fe.DOT?"float":t===Fe.CROSS?"vec3":this.getInputType(e)}generate(e,t){const i=this.method,o=this.getNodeType(e),n=this.getInputType(e),s=this.aNode,a=this.bNode,l=this.cNode,c=e.renderer.isWebGLRenderer===!0;if(i===Fe.TRANSFORM_DIRECTION){let u=s,d=a;e.isMatrix(u.getNodeType(e))?d=Ir(Gt(d),0):u=Ir(Gt(u),0);const h=Mo(u,d).xyz;return In(h).build(e,t)}else{if(i===Fe.NEGATE)return e.format("( - "+s.build(e,n)+" )",o,t);if(i===Fe.ONE_MINUS)return r0(1,s).build(e,t);if(i===Fe.RECIPROCAL)return jd(1,s).build(e,t);if(i===Fe.DIFFERENCE)return bf(r0(s,a)).build(e,t);{const u=[];return i===Fe.CROSS?u.push(s.build(e,o),a.build(e,o)):i===Fe.STEP?u.push(s.build(e,e.getTypeLength(s.getNodeType(e))===1?"float":n),a.build(e,n)):c&&(i===Fe.MIN||i===Fe.MAX)||i===Fe.MOD?u.push(s.build(e,n),a.build(e,e.getTypeLength(a.getNodeType(e))===1?"float":n)):i===Fe.REFRACT?u.push(s.build(e,n),a.build(e,n),l.build(e,"float")):i===Fe.MIX?u.push(s.build(e,n),a.build(e,n),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":n)):(u.push(s.build(e,n)),a!==null&&u.push(a.build(e,n)),l!==null&&u.push(l.build(e,n))),e.format(`${e.getMethod(i)}( ${u.join(", ")} )`,o,t)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Fe.RADIANS="radians",Fe.DEGREES="degrees",Fe.EXP="exp",Fe.EXP2="exp2",Fe.LOG="log",Fe.LOG2="log2",Fe.SQRT="sqrt",Fe.INVERSE_SQRT="inversesqrt",Fe.FLOOR="floor",Fe.CEIL="ceil",Fe.NORMALIZE="normalize",Fe.FRACT="fract",Fe.SIN="sin",Fe.COS="cos",Fe.TAN="tan",Fe.ASIN="asin",Fe.ACOS="acos",Fe.ATAN="atan",Fe.ABS="abs",Fe.SIGN="sign",Fe.LENGTH="length",Fe.NEGATE="negate",Fe.ONE_MINUS="oneMinus",Fe.DFDX="dFdx",Fe.DFDY="dFdy",Fe.ROUND="round",Fe.RECIPROCAL="reciprocal",Fe.TRUNC="trunc",Fe.FWIDTH="fwidth",Fe.ATAN2="atan2",Fe.MIN="min",Fe.MAX="max",Fe.MOD="mod",Fe.STEP="step",Fe.REFLECT="reflect",Fe.DISTANCE="distance",Fe.DIFFERENCE="difference",Fe.DOT="dot",Fe.CROSS="cross",Fe.POW="pow",Fe.TRANSFORM_DIRECTION="transformDirection",Fe.MIX="mix",Fe.CLAMP="clamp",Fe.REFRACT="refract",Fe.SMOOTHSTEP="smoothstep",Fe.FACEFORWARD="faceforward";const dt=Fe,t_=Dt(1e-6),u8=Dt(1e6),W2=Ze(Fe,Fe.RADIANS),q2=Ze(Fe,Fe.DEGREES),X2=Ze(Fe,Fe.EXP),K2=Ze(Fe,Fe.EXP2),Y2=Ze(Fe,Fe.LOG),J2=Ze(Fe,Fe.LOG2),Z2=Ze(Fe,Fe.SQRT),d8=Ze(Fe,Fe.INVERSE_SQRT),i0=Ze(Fe,Fe.FLOOR),r_=Ze(Fe,Fe.CEIL),In=Ze(Fe,Fe.NORMALIZE),o0=Ze(Fe,Fe.FRACT),Q2=Ze(Fe,Fe.SIN),eA=Ze(Fe,Fe.COS),tA=Ze(Fe,Fe.TAN),rA=Ze(Fe,Fe.ASIN),iA=Ze(Fe,Fe.ACOS),oA=Ze(Fe,Fe.ATAN),bf=Ze(Fe,Fe.ABS),nA=Ze(Fe,Fe.SIGN),sA=Ze(Fe,Fe.LENGTH),aA=Ze(Fe,Fe.NEGATE),h8=Ze(Fe,Fe.ONE_MINUS),i_=Ze(Fe,Fe.DFDX),o_=Ze(Fe,Fe.DFDY),lA=Ze(Fe,Fe.ROUND),cA=Ze(Fe,Fe.RECIPROCAL),p8=Ze(Fe,Fe.TRUNC),f8=Ze(Fe,Fe.FWIDTH),uA=Ze(Fe,Fe.ATAN2),dA=Ze(Fe,Fe.MIN),hA=Ze(Fe,Fe.MAX),n_=Ze(Fe,Fe.MOD),pA=Ze(Fe,Fe.STEP),fA=Ze(Fe,Fe.REFLECT),mA=Ze(Fe,Fe.DISTANCE),gA=Ze(Fe,Fe.DIFFERENCE),Ll=Ze(Fe,Fe.DOT),vA=Ze(Fe,Fe.CROSS),s_=Ze(Fe,Fe.POW),yA=Ze(Fe,Fe.POW,2),bA=Ze(Fe,Fe.POW,3),xA=Ze(Fe,Fe.POW,4),_A=Ze(Fe,Fe.TRANSFORM_DIRECTION),Pn=Ze(Fe,Fe.MIX),xf=(r,e=0,t=1)=>Ut(new Fe(Fe.CLAMP,Ut(r),Ut(e),Ut(t))),m8=r=>xf(r),wA=Ze(Fe,Fe.REFRACT),Ol=Ze(Fe,Fe.SMOOTHSTEP),g8=Ze(Fe,Fe.FACEFORWARD),Bke=(r,e,t)=>Pn(e,t,r),Fke=(r,e,t)=>Ol(e,t,r);Je("radians",W2),Je("degrees",q2),Je("exp",X2),Je("exp2",K2),Je("log",Y2),Je("log2",J2),Je("sqrt",Z2),Je("inverseSqrt",d8),Je("floor",i0),Je("ceil",r_),Je("normalize",In),Je("fract",o0),Je("sin",Q2),Je("cos",eA),Je("tan",tA),Je("asin",rA),Je("acos",iA),Je("atan",oA),Je("abs",bf),Je("sign",nA),Je("length",sA),Je("negate",aA),Je("oneMinus",h8),Je("dFdx",i_),Je("dFdy",o_),Je("round",lA),Je("reciprocal",cA),Je("trunc",p8),Je("fwidth",f8),Je("atan2",uA),Je("min",dA),Je("max",hA),Je("mod",n_),Je("step",pA),Je("reflect",fA),Je("distance",mA),Je("dot",Ll),Je("cross",vA),Je("pow",s_),Je("pow2",yA),Je("pow3",bA),Je("pow4",xA),Je("transformDirection",_A),Je("mix",Bke),Je("clamp",xf),Je("refract",wA),Je("smoothstep",Fke),Je("faceForward",g8),Je("difference",gA),Je("saturate",m8),ut("MathNode",Fe);const Uke=Mr(r=>{const{value:e}=r,{rgb:t}=e,i=t.mul(.9478672986).add(.0521327014).pow(2.4),o=t.mul(.0773993808),n=t.lessThanEqual(.04045),s=Pn(i,o,n);return Ir(s,e.a)}),zke=Mr(r=>{const{value:e}=r,{rgb:t}=e,i=t.pow(.41666).mul(1.055).sub(.055),o=t.mul(12.92),n=t.lessThanEqual(.0031308),s=Pn(i,o,n);return Ir(s,e.a)}),v8=r=>{let e=null;return r===en?e="Linear":r===Ft&&(e="sRGB"),e},y8=(r,e)=>v8(r)+"To"+v8(e);class an extends Li{constructor(e,t){super("vec4"),this.method=e,this.node=t}setup(){const{method:e,node:t}=this;return e===an.LINEAR_TO_LINEAR?t:Vke[e]({value:t})}}an.LINEAR_TO_LINEAR="LinearToLinear",an.LINEAR_TO_sRGB="LinearTosRGB",an.sRGB_TO_LINEAR="sRGBToLinear";const Vke={[an.LINEAR_TO_sRGB]:zke,[an.sRGB_TO_LINEAR]:Uke},kl=an,b8=(r,e)=>Ut(new an(y8(en,e),Ut(r))),a_=(r,e)=>Ut(new an(y8(e,en),Ut(r))),x8=Ze(an,an.LINEAR_TO_sRGB),_8=Ze(an,an.sRGB_TO_LINEAR);Je("linearTosRGB",x8),Je("sRGBToLinear",_8),Je("linearToColorSpace",b8),Je("colorSpaceToLinear",a_),ut("ColorSpaceNode",an);class SA extends qt{constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const i=this.getNodeType(e),o=this.snippet;if(i==="void")e.addLineFlowCode(o);else return e.format(`( ${o} )`,i,t)}}const MA=SA,$d=Ze(SA);ut("ExpressionNode",SA);class TA extends gr{constructor(e,t=null,i=null,o=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=i,this.compareNode=o,this.updateMatrix=!1,this.updateType=Qr.NONE,this.setUpdateMatrix(t===null)}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":"vec4"}getInputType(){return"texture"}getDefaultUV(){return ui(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){const t=this.value;return Zi(t.matrix).mul(Gt(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?Qr.FRAME:Qr.NONE,this}setup(e){const t=e.getNodeProperties(this);let i=this.uvNode;i===null&&e.context.getUVNode&&(i=e.context.getUVNode(this)),i||(i=this.getDefaultUV()),this.updateMatrix===!0&&(i=this.getTransformedUV(i));let o=this.levelNode;o===null&&e.context.getSamplerLevelNode&&(o=e.context.getSamplerLevelNode(this)),t.uvNode=i,t.levelNode=o?e.context.getMIPLevelAlgorithmNode(this,o):null}generate(e,t){const{uvNode:i,levelNode:o}=e.getNodeProperties(this),n=this.compareNode,s=this.value;if(!s||s.isTexture!==!0)throw new Error("TextureNode: Need a three.js texture.");const a=super.generate(e,"property");if(t==="sampler")return a+"_sampler";if(e.isReference(t))return a;{const l=this.getNodeType(e),c=e.getDataFromNode(this);let u=c.propertyName;if(u===void 0){const h=i.build(e,"vec2"),p=e.getVarFromNode(this,l);u=e.getPropertyName(p);let m=null;if(o&&o.isNode===!0){const g=o.build(e,"float");m=e.getTextureLevel(s,a,h,g)}else if(n!==null){const g=n.build(e,"float");m=e.getTextureCompare(s,a,h,g)}else m=e.getTexture(s,a,h);e.addLineFlowCode(`${u} = ${m}`),e.context.tempWrite!==!1&&(c.snippet=m,c.propertyName=u)}let d=u;return e.needsColorSpaceToLinear(this.value)&&(d=a_($d(d,l),this.value.colorSpace).setup(e).build(e,l)),e.format(d,l,t)}}uv(e){const t=this.clone();return t.uvNode=e,Ut(t)}level(e){const t=this.clone();return t.levelNode=e,es(t,{getMIPLevelAlgorithmNode:(i,o)=>o})}size(e){return c8(this,e)}compare(e){const t=this.clone();return t.compareNode=Ut(e),Ut(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value]}update(){const e=this.value;e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){return new this.constructor(this.value,this.uvNode,this.levelNode,this.compareNode)}}const _f=TA,ho=Ze(TA),Gke=r=>(r.isNode===!0?r:ho(r)).convert("sampler");Je("texture",ho),ut("TextureNode",TA);class EA extends qt{constructor(e,t,i=null){super(),this.property=e,this.uniformType=t,this.object=i,this.reference=null,this.node=null,this.updateType=Qr.OBJECT,this.setNodeType(t)}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setNodeType(e){let t=null;e==="texture"?t=ho(null):t=Zi(e),this.node=t}getNodeType(e){return this.node.getNodeType(e)}update(){this.node.value=this.reference[this.property]}setup(){return this.node}}const n0=EA,Vo=(r,e,t)=>Ut(new EA(r,e,t));ut("ReferenceNode",EA);class CA extends n0{constructor(e,t,i=null){super(e,t,i),this.material=i,this.updateType=Qr.RENDER}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}setup(e){const t=this.material!==null?this.material:e.material;return this.node.value=t[this.property],super.setup(e)}}const NA=CA,Wd=(r,e,t)=>Ut(new CA(r,e,t));ut("MaterialReferenceNode",CA);const w8=new Map;class Ct extends qt{constructor(e){super(),this.scope=e}getCache(e,t){let i=w8.get(e);return i===void 0&&(i=Wd(e,t),w8.set(e,i)),i}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e,"texture")}setup(e){const t=e.context.material,i=this.scope;let o=null;if(i===Ct.ALPHA_TEST||i===Ct.SHININESS||i===Ct.REFLECTIVITY||i===Ct.ROTATION||i===Ct.IRIDESCENCE||i===Ct.IRIDESCENCE_IOR)o=this.getFloat(i);else if(i===Ct.SPECULAR_COLOR)o=this.getColor("specular");else if(i===Ct.COLOR){const n=this.getColor("color");t.map&&t.map.isTexture===!0?o=n.mul(this.getTexture("map")):o=n}else if(i===Ct.OPACITY){const n=this.getFloat("opacity");t.alphaMap&&t.alphaMap.isTexture===!0?o=n.mul(this.getTexture("alphaMap")):o=n}else if(i===Ct.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?o=this.getTexture("specularMap").r:o=Dt(1);else if(i===Ct.ROUGHNESS){const n=this.getFloat("roughness");t.roughnessMap&&t.roughnessMap.isTexture===!0?o=n.mul(this.getTexture("roughnessMap").g):o=n}else if(i===Ct.METALNESS){const n=this.getFloat("metalness");t.metalnessMap&&t.metalnessMap.isTexture===!0?o=n.mul(this.getTexture("metalnessMap").b):o=n}else if(i===Ct.EMISSIVE){const n=this.getColor("emissive");t.emissiveMap&&t.emissiveMap.isTexture===!0?o=n.mul(this.getTexture("emissiveMap")):o=n}else if(i===Ct.CLEARCOAT){const n=this.getFloat("clearcoat");t.clearcoatMap&&t.clearcoatMap.isTexture===!0?o=n.mul(this.getTexture("clearcoatMap").r):o=n}else if(i===Ct.CLEARCOAT_ROUGHNESS){const n=this.getFloat("clearcoatRoughness");t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?o=n.mul(this.getTexture("clearcoatRoughnessMap").r):o=n}else if(i===Ct.SHEEN){const n=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?o=n.mul(this.getTexture("sheenColorMap").rgb):o=n}else if(i===Ct.SHEEN_ROUGHNESS){const n=this.getFloat("sheenRoughness");t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?o=n.mul(this.getTexture("sheenRoughnessMap").a):o=n,o=o.clamp(.07,1)}else if(i===Ct.IRIDESCENCE_THICKNESS){const n=Vo(1,"float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const s=Vo(0,"float",t.iridescenceThicknessRange);o=n.sub(s).mul(this.getTexture("iridescenceThicknessMap").g).add(s)}else o=n}else{const n=this.getNodeType(e);o=Wd(i,n)}return o}}Ct.ALPHA_TEST="alphaTest",Ct.COLOR="color",Ct.OPACITY="opacity",Ct.SHININESS="shininess",Ct.SPECULAR="specular",Ct.SPECULAR_STRENGTH="specularStrength",Ct.REFLECTIVITY="reflectivity",Ct.ROUGHNESS="roughness",Ct.METALNESS="metalness",Ct.CLEARCOAT="clearcoat",Ct.CLEARCOAT_ROUGHNESS="clearcoatRoughness",Ct.EMISSIVE="emissive",Ct.ROTATION="rotation",Ct.SHEEN="sheen",Ct.SHEEN_ROUGHNESS="sheenRoughness",Ct.IRIDESCENCE="iridescence",Ct.IRIDESCENCE_IOR="iridescenceIOR",Ct.IRIDESCENCE_THICKNESS="iridescenceThickness";const bi=Ct,AA=gt(Ct,Ct.ALPHA_TEST),l_=gt(Ct,Ct.COLOR),S8=gt(Ct,Ct.SHININESS),RA=gt(Ct,Ct.EMISSIVE),c_=gt(Ct,Ct.OPACITY),M8=gt(Ct,Ct.SPECULAR_COLOR),Hke=gt(Ct,Ct.SPECULAR_STRENGTH),jke=gt(Ct,Ct.REFLECTIVITY),LA=gt(Ct,Ct.ROUGHNESS),OA=gt(Ct,Ct.METALNESS),$ke=gt(Ct,Ct.CLEARCOAT),Wke=gt(Ct,Ct.CLEARCOAT_ROUGHNESS),kA=gt(Ct,Ct.ROTATION),T8=gt(Ct,Ct.SHEEN),E8=gt(Ct,Ct.SHEEN_ROUGHNESS),qke=gt(Ct,Ct.IRIDESCENCE),Xke=gt(Ct,Ct.IRIDESCENCE_IOR),Kke=gt(Ct,Ct.IRIDESCENCE_THICKNESS);ut("MaterialNode",Ct);class or extends qt{constructor(e=or.VIEW_MATRIX,t=null){super(),this.scope=e,this.object3d=t,this.updateType=Qr.OBJECT,this._uniformNode=new gr(null)}getNodeType(){const e=this.scope;if(e===or.WORLD_MATRIX||e===or.VIEW_MATRIX)return"mat4";if(e===or.NORMAL_MATRIX)return"mat3";if(e===or.POSITION||e===or.VIEW_POSITION||e===or.DIRECTION||e===or.SCALE)return"vec3"}update(e){const t=this.object3d,i=this._uniformNode,o=this.scope;if(o===or.VIEW_MATRIX)i.value=t.modelViewMatrix;else if(o===or.NORMAL_MATRIX)i.value=t.normalMatrix;else if(o===or.WORLD_MATRIX)i.value=t.matrixWorld;else if(o===or.POSITION)i.value=i.value||new Q,i.value.setFromMatrixPosition(t.matrixWorld);else if(o===or.SCALE)i.value=i.value||new Q,i.value.setFromMatrixScale(t.matrixWorld);else if(o===or.DIRECTION)i.value=i.value||new Q,t.getWorldDirection(i.value);else if(o===or.VIEW_POSITION){const n=e.camera;i.value=i.value||new Q,i.value.setFromMatrixPosition(t.matrixWorld),i.value.applyMatrix4(n.matrixWorldInverse)}}generate(e){const t=this.scope;return t===or.WORLD_MATRIX||t===or.VIEW_MATRIX?this._uniformNode.nodeType="mat4":t===or.NORMAL_MATRIX?this._uniformNode.nodeType="mat3":(t===or.POSITION||t===or.VIEW_POSITION||t===or.DIRECTION||t===or.SCALE)&&(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}or.VIEW_MATRIX="viewMatrix",or.NORMAL_MATRIX="normalMatrix",or.WORLD_MATRIX="worldMatrix",or.POSITION="position",or.SCALE="scale",or.VIEW_POSITION="viewPosition",or.DIRECTION="direction";const Oi=or,Yke=Ze(or,or.DIRECTION),Jke=Ze(or,or.VIEW_MATRIX),Zke=Ze(or,or.NORMAL_MATRIX),Qke=Ze(or,or.WORLD_MATRIX),u_=Ze(or,or.POSITION),eIe=Ze(or,or.SCALE),IA=Ze(or,or.VIEW_POSITION);ut("Object3DNode",or);class Dr extends Oi{constructor(e=Dr.POSITION){super(e)}getNodeType(e){const t=this.scope;return t===Dr.PROJECTION_MATRIX?"mat4":t===Dr.NEAR||t===Dr.FAR?"float":super.getNodeType(e)}update(e){const t=e.camera,i=this._uniformNode,o=this.scope;o===Dr.VIEW_MATRIX?i.value=t.matrixWorldInverse:o===Dr.PROJECTION_MATRIX?i.value=t.projectionMatrix:o===Dr.NEAR?i.value=t.near:o===Dr.FAR?i.value=t.far:(this.object3d=t,super.update(e))}generate(e){const t=this.scope;return t===Dr.PROJECTION_MATRIX?this._uniformNode.nodeType="mat4":(t===Dr.NEAR||t===Dr.FAR)&&(this._uniformNode.nodeType="float"),super.generate(e)}}Dr.PROJECTION_MATRIX="projectionMatrix",Dr.NEAR="near",Dr.FAR="far";const Il=Dr,Pa=t0(gt(Dr,Dr.PROJECTION_MATRIX),"projectionMatrix"),d_=gt(Dr,Dr.NEAR),h_=gt(Dr,Dr.FAR),Da=gt(Dr,Dr.VIEW_MATRIX),C8=gt(Dr,Dr.NORMAL_MATRIX),N8=gt(Dr,Dr.WORLD_MATRIX),A8=gt(Dr,Dr.POSITION);ut("CameraNode",Dr);class po extends Oi{constructor(e=po.VIEW_MATRIX){super(e)}update(e){this.object3d=e.object,super.update(e)}}const tIe=gt(po,po.DIRECTION),zc=t0(gt(po,po.VIEW_MATRIX),"modelViewMatrix"),p_=gt(po,po.NORMAL_MATRIX),wf=gt(po,po.WORLD_MATRIX),R8=gt(po,po.POSITION),rIe=gt(po,po.SCALE),L8=gt(po,po.VIEW_POSITION);ut("ModelNode",po);class zi extends qt{constructor(e=zi.LOCAL){super("vec3"),this.scope=e}isGlobal(){return!0}getHash(){return`normal-${this.scope}`}generate(e){const t=this.scope;let i=null;if(t===zi.GEOMETRY)i=nn("normal","vec3");else if(t===zi.LOCAL)i=Xr(Sf);else if(t===zi.VIEW){const o=p_.mul(Vc);i=In(Xr(o))}else if(t===zi.WORLD){const o=oa.transformDirection(Da);i=In(Xr(o))}return i.build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}zi.GEOMETRY="geometry",zi.LOCAL="local",zi.VIEW="view",zi.WORLD="world";const Pl=zi,Sf=gt(zi,zi.GEOMETRY),Vc=gt(zi,zi.LOCAL),oa=gt(zi,zi.VIEW),qd=gt(zi,zi.WORLD),wi=Ia("vec3","TransformedNormalView"),O8=wi.transformDirection(Da).normalize(),Xd=Ia("vec3","TransformedClearcoatNormalView");ut("NormalNode",zi);class PA extends qt{constructor(e,t=null){super(),this.node=e,this.name=t}assign(e){return e.traverse((t,i)=>{i&&t.uuid===this.uuid&&i(this.node)}),this.node=e,this}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const t=this.node,i=this.name;if(i===null&&t.isTempNode===!0)return t.build(e);const o=e.getVectorType(this.getNodeType(e)),n=t.build(e,o),s=e.getVarFromNode(this,o);i!==null&&(s.name=i);const a=e.getPropertyName(s);return e.addLineFlowCode(`${a} = ${n}`),a}}const f_=PA,Mf=Ze(PA);Je("temp",Mf),ut("VarNode",PA);class ki extends qt{constructor(e=ki.LOCAL){super(),this.scope=e}getHash(){return`tangent-${this.scope}`}getNodeType(){return this.scope===ki.GEOMETRY?"vec4":"vec3"}generate(e){const t=this.scope;let i=null;if(t===ki.GEOMETRY)i=nn("tangent","vec4");else if(t===ki.LOCAL)i=Xr(Tf.xyz);else if(t===ki.VIEW){const o=zc.mul(s0).xyz;i=In(Xr(o))}else if(t===ki.WORLD){const o=Ef.transformDirection(Da);i=In(Xr(o))}return i.build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}ki.GEOMETRY="geometry",ki.LOCAL="local",ki.VIEW="view",ki.WORLD="world";const Ba=ki,Tf=gt(ki,ki.GEOMETRY),s0=gt(ki,ki.LOCAL),Ef=gt(ki,ki.VIEW),DA=gt(ki,ki.WORLD),m_=Mf(Ef,"TransformedTangentView"),k8=In(m_.transformDirection(Da));ut("TangentNode",ki);class Vi extends qt{constructor(e=Vi.LOCAL){super("vec3"),this.scope=e}getHash(){return`bitangent-${this.scope}`}generate(e){const t=this.scope;let i;t===Vi.GEOMETRY?i=Sf.cross(Tf):t===Vi.LOCAL?i=Vc.cross(s0):t===Vi.VIEW?i=oa.cross(Ef):t===Vi.WORLD&&(i=qd.cross(DA));const o=i.mul(Tf.w).xyz;return In(Xr(o)).build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}Vi.GEOMETRY="geometry",Vi.LOCAL="local",Vi.VIEW="view",Vi.WORLD="world";const Fa=Vi,I8=gt(Vi,Vi.GEOMETRY),P8=gt(Vi,Vi.LOCAL),BA=gt(Vi,Vi.VIEW),D8=gt(Vi,Vi.WORLD),FA=In(wi.cross(m_).mul(Tf.w)),B8=In(FA.transformDirection(Da));ut("BitangentNode",Vi);class Kr extends qt{constructor(e=Kr.LOCAL){super("vec3"),this.scope=e}isGlobal(){return!0}getHash(){return`position-${this.scope}`}generate(e){const t=this.scope;let i=null;if(t===Kr.GEOMETRY)i=nn("position","vec3");else if(t===Kr.LOCAL)i=Xr(ln);else if(t===Kr.WORLD){const o=wf.mul(ts);i=Xr(o)}else if(t===Kr.VIEW){const o=zc.mul(ts);i=Xr(o)}else if(t===Kr.VIEW_DIRECTION){const o=Cs.negate();i=In(Xr(o))}else if(t===Kr.WORLD_DIRECTION){const o=ts.transformDirection(wf);i=In(Xr(o))}return i.build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}Kr.GEOMETRY="geometry",Kr.LOCAL="local",Kr.WORLD="world",Kr.WORLD_DIRECTION="worldDirection",Kr.VIEW="view",Kr.VIEW_DIRECTION="viewDirection";const Dn=Kr,ln=gt(Kr,Kr.GEOMETRY),ts=gt(Kr,Kr.LOCAL),g_=gt(Kr,Kr.WORLD),v_=gt(Kr,Kr.WORLD_DIRECTION),Cs=gt(Kr,Kr.VIEW),Gi=gt(Kr,Kr.VIEW_DIRECTION);ut("PositionNode",Kr);class UA extends qt{constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){return e.getFrontFacing()}}const zA=UA,VA=gt(UA),y_=Dt(VA).mul(2).sub(1);ut("FrontFacingNode",UA);const iIe=Mr(r=>{const{eye_pos:e,surf_norm:t,mapN:i,uv:o}=r,n=e.dFdx(),s=e.dFdy(),a=o.dFdx(),l=o.dFdy(),c=t,u=s.cross(c),d=c.cross(n),h=u.mul(a.x).add(d.mul(l.x)),p=u.mul(a.y).add(d.mul(l.y)),m=h.dot(h).max(p.dot(p)),g=y_.mul(m.inverseSqrt());return sn(h.mul(i.x,g),p.mul(i.y,g),c.mul(i.z)).normalize()});class GA extends Li{constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=Ys}setup(e){const{normalMapType:t,scaleNode:i}=this;let o=this.node.mul(2).sub(1);i!==null&&(o=Gt(o.xy.mul(i),o.z));let n=null;return t===yx?n=p_.mul(o).normalize():t===Ys&&(e.hasGeometryAttribute("tangent")===!0?n=jA.mul(o).normalize():n=iIe({eye_pos:Cs,surf_norm:oa,mapN:o,uv:ui()})),n}}const HA=GA,b_=Ze(GA),jA=ka(Ef,BA,oa);ut("NormalMapNode",GA);const oIe=Mr(({bumpTexture:r,bumpScale:e})=>{const t=ui(),i=ho(r,t).x;return kr(ho(r,t.add(t.dFdx())).x.sub(i),ho(r,t.add(t.dFdy())).x.sub(i)).mul(e)}),nIe=Mr(r=>{const{surf_pos:e,surf_norm:t,dHdxy:i}=r,o=e.dFdx(),n=e.dFdy(),s=t,a=n.cross(s),l=s.cross(o),c=o.dot(a).mul(y_),u=c.sign().mul(i.x.mul(a).add(i.y.mul(l)));return c.abs().mul(t).sub(u).normalize()});class $A extends Li{constructor(e,t=null){super("vec3"),this.texture=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=oIe({bumpTexture:this.texture,bumpScale:e});return nIe({surf_pos:Cs.negate(),surf_norm:oa,dHdxy:t})}}const sIe=$A,F8=Ze($A);ut("BumpMapNode",$A);class rs extends bi{constructor(e){super(e)}getNodeType(e){const t=this.scope;let i=null;return(t===rs.NORMAL||t===rs.CLEARCOAT_NORMAL)&&(i="vec3"),i||super.getNodeType(e)}setup(e){const t=e.material,i=this.scope;let o=null;return i===rs.NORMAL?t.normalMap?o=b_(this.getTexture("normalMap"),Wd("normalScale","vec2")):t.bumpMap?o=F8(t.bumpMap,Wd("bumpScale","float")):o=oa:i===rs.CLEARCOAT_NORMAL&&(o=t.clearcoatNormalMap?b_(this.getTexture("clearcoatNormalMap"),Wd("clearcoatNormalScale","vec2")):oa),o||super.setup(e)}}rs.NORMAL="normal",rs.CLEARCOAT_NORMAL="clearcoatNormal";const aIe=rs,U8=gt(rs,rs.NORMAL),lIe=gt(rs,rs.CLEARCOAT_NORMAL);ut("ExtendedMaterialNode",rs);class WA extends Li{constructor(e=ts){super("vec4"),this.positionNode=e}setup(){return Pa.mul(zc).mul(this.positionNode)}}const qA=WA,x_=Ze(WA);ut("ModelViewProjectionNode",WA);class XA extends VN{constructor(e,t=null,i=0,o=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=i,this.bufferOffset=o,this.usage=Op,this.instanced=!1,this.attribute=null,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),i=this.value,o=e.getTypeLength(t),n=this.bufferStride||o,s=this.bufferOffset,a=i.isInterleavedBuffer===!0?i:new Ev(i,n),l=new kn(a,o,s);a.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),i=e.getBufferAttributeFromNode(this,t),o=e.getPropertyName(i);let n=null;return e.shaderStage==="vertex"?n=o:n=Xr(this).build(e,t),n}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this}setInstanced(e){return this.instanced=e,this}}const cIe=XA,a0=(r,e,t,i)=>Ut(new XA(r,e,t,i)),z8=(r,e,t,i)=>a0(r,e,t,i).setUsage(xx),V8=(r,e,t,i)=>a0(r,e,t,i).setInstanced(!0),G8=(r,e,t,i)=>z8(r,e,t,i).setInstanced(!0);Je("toAttribute",r=>a0(r.value)),ut("BufferAttributeNode",XA);class KA extends qt{constructor(e){super("void"),this.instanceMesh=e,this.instanceMatrixNode=null}setup(e){let t=this.instanceMatrixNode;if(t===null){const a=this.instanceMesh.instanceMatrix,l=new qv(a.array,16,1),c=a.usage===xx?G8:V8,u=[c(l,"vec4",16,0),c(l,"vec4",16,4),c(l,"vec4",16,8),c(l,"vec4",16,12)];t=W1(...u),this.instanceMatrixNode=t}const i=t.mul(ts).xyz,o=ka(t[0].xyz,t[1].xyz,t[2].xyz),n=Vc.div(Gt(o[0].dot(o[0]),o[1].dot(o[1]),o[2].dot(o[2]))),s=o.mul(n).xyz;e.stack.assign(ts,i),e.stack.assign(Vc,s)}}const H8=KA,j8=Ze(KA);ut("InstanceNode",KA);class YA extends gr{constructor(e,t,i=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=i}getInputType(){return"buffer"}}const __=YA,w_=(r,e,t)=>Ut(new YA(r,e,t));ut("BufferNode",YA);class JA extends qt{constructor(e){super("void"),this.skinnedMesh=e,this.updateType=Qr.OBJECT,this.skinIndexNode=nn("skinIndex","uvec4"),this.skinWeightNode=nn("skinWeight","vec4"),this.bindMatrixNode=Zi(e.bindMatrix,"mat4"),this.bindMatrixInverseNode=Zi(e.bindMatrixInverse,"mat4"),this.boneMatricesNode=w_(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)}setup(e){const{skinIndexNode:t,skinWeightNode:i,bindMatrixNode:o,bindMatrixInverseNode:n,boneMatricesNode:s}=this,a=s.element(t.x),l=s.element(t.y),c=s.element(t.z),u=s.element(t.w),d=o.mul(ts),h=sn(a.mul(i.x).mul(d),l.mul(i.y).mul(d),c.mul(i.z).mul(d),u.mul(i.w).mul(d)),p=n.mul(h).xyz;let m=sn(i.x.mul(a),i.y.mul(l),i.z.mul(c),i.w.mul(u));m=n.mul(m).mul(o);const g=m.transformDirection(Vc).xyz;e.stack.assign(ts,p),e.stack.assign(Vc,g),e.hasGeometryAttribute("tangent")&&e.stack.assign(s0,g)}update(){this.skinnedMesh.skeleton.update()}}const $8=JA,W8=Ze(JA);ut("SkinningNode",JA);class ZA extends qt{constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=Zi(1),this.updateType=Qr.OBJECT}setupAttribute(e,t,i=ts){const o=this.mesh,n=o.geometry.morphAttributes[t];e.stack.assign(i,i.mul(this.morphBaseInfluence));for(let s=0;s<n.length;s++){const a=n[s],l=a0(a.array,"vec3"),c=Vo(s,"float",o.morphTargetInfluences);e.stack.assign(i,i.add(l.mul(c)))}}setup(e){this.setupAttribute(e,"position")}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,i)=>t+i,0)}}const uIe=ZA,q8=Ze(ZA);ut("MorphNode",ZA);class QA extends qt{constructor(){super("vec3")}getHash(){return"reflectVector"}setup(){return Gi.negate().reflect(wi).transformDirection(Da)}}const eR=QA,tR=gt(QA);ut("ReflectVectorNode",QA);class rR extends _f{constructor(e,t=null,i=null){super(e,t,i),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){return tR}setUpdateMatrix(){}generate(e,t){const{uvNode:i,levelNode:o}=e.getNodeProperties(this),n=this.value;if(!n||n.isCubeTexture!==!0)throw new Error("CubeTextureNode: Need a three.js cube texture.");const s=gr.prototype.generate.call(this,e,"cubeTexture");if(t==="sampler")return s+"_sampler";if(e.isReference(t))return s;{const a=this.getNodeType(e),l=e.getDataFromNode(this);let c=l.propertyName;if(c===void 0){const d=Gt(i.x.negate(),i.yz).build(e,"vec3"),h=e.getVarFromNode(this,"vec4");c=e.getPropertyName(h);let p=null;if(o&&o.isNode===!0){const m=o.build(e,"float");p=e.getTextureLevel(this,s,d,m)}else p=e.getTexture(this,s,d);e.addLineFlowCode(`${c} = ${p}`),e.context.tempWrite!==!1&&(l.snippet=p,l.propertyName=c)}let u=c;return e.needsColorSpaceToLinear(this.value)&&(u=a_($d(u,a),this.value.colorSpace).setup(e).build(e,a)),e.format(u,"vec4",t)}}}const iR=rR,Kd=Ze(rR);Je("cubeTexture",Kd),ut("CubeTextureNode",rR);class X8 extends qt{constructor(){super("vec3")}generate(){console.warn("Abstract function.")}}const l0=X8;ut("LightingNode",X8);let oR=null;class K8 extends l0{constructor(e=null){super(),this.updateType=Qr.FRAME,this.light=e,this.rtt=null,this.shadowNode=null,this.color=new bt,this.colorNode=Zi(this.color)}getHash(){return this.light.uuid}setupShadow(e){let t=this.shadowNode;if(t===null){oR===null&&(oR=e.createNodeMaterial("MeshBasicNodeMaterial"));const i=this.light.shadow,o=e.getRenderTarget(i.mapSize.width,i.mapSize.height),n=new Sd;n.minFilter=Nr,n.magFilter=Nr,n.image.width=i.mapSize.width,n.image.height=i.mapSize.height,n.compareFunction=Lp,o.depthTexture=n,i.camera.updateProjectionMatrix();const s=Vo("bias","float",i),a=Vo("normalBias","float",i);let l=Zi(i.matrix).mul(g_.add(qd.mul(a)));l=l.xyz.div(l.w);const c=l.x.greaterThanEqual(0).and(l.x.lessThanEqual(1)).and(l.y.greaterThanEqual(0)).and(l.y.lessThanEqual(1)).and(l.z.lessThanEqual(1));l=Gt(l.x,l.y.oneMinus(),l.z.add(s).mul(2).sub(1)),t=((u,d,h)=>ho(u,d).compare(h))(n,l.xy,l.z),this.rtt=o,this.colorNode=this.colorNode.mul(c.mix(1,t)),this.shadowNode=t,this.updateBeforeType=Qr.RENDER}}setup(e){this.light.castShadow&&this.setupShadow(e)}updateShadow(e){const{rtt:t,light:i}=this,{renderer:o,scene:n}=e;n.overrideMaterial=oR,t.setSize(i.shadow.mapSize.width,i.shadow.mapSize.height),i.shadow.updateMatrices(i),o.setRenderTarget(t),o.render(n,i.shadow.camera),o.setRenderTarget(null),n.overrideMaterial=null}updateBefore(e){const{light:t}=this;t.castShadow&&this.updateShadow(e)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const Gc=K8;ut("AnalyticLightNode",K8);const S_=new WeakMap,dIe=r=>r.sort((e,t)=>e.id-t.id);class nR extends qt{constructor(e=[]){super("vec3"),this.lightNodes=e,this._hash=null}get hasLight(){return this.lightNodes.length>0}setup(e){const t=this.lightNodes;for(const i of t)i.build(e)}getHash(e){if(this._hash===null){let t="";const i=this.lightNodes;for(const o of i)t+=o.getHash(e)+" ";this._hash=t}return this._hash}getLightNodeByHash(e){const t=this.lightNodes;for(const i of t)if(i.light.uuid===e)return i;return null}fromLights(e=[]){const t=[];e=dIe(e);for(const i of e){let o=this.getLightNodeByHash(i.uuid);if(o===null){const n=i.constructor,s=S_.has(n)?S_.get(n):Gc;o=Ut(new s(i))}t.push(o)}return this.lightNodes=t,this._hash=null,this}}const c0=nR,Y8=r=>Ut(new nR().fromLights(r)),J8=Ze(nR);function Yd(r,e){if(S_.has(r))throw new Error(`Redefinition of light node ${e.type}`);if(typeof r!="function")throw new Error(`Light ${r.name} is not a class`);if(typeof e!="function"||!e.type)throw new Error(`Light node ${e.type} is not a class`);S_.set(r,e)}class Z8 extends l0{constructor(e=null){super(),this.aoNode=e}setup(e){const t=this.aoNode.x.sub(1).mul(1).add(1);e.context.ambientOcclusion.mulAssign(t)}}const sR=Z8;ut("AONode",Z8);class aR extends Gd{constructor(e,t=null,i=null,o=null){super(e),this.lightingModel=t,this.backdropNode=i,this.backdropAlphaNode=o}getNodeType(){return"vec3"}setup(e){const{lightingModel:t,backdropNode:i,backdropAlphaNode:o}=this,n=this.context={},s=e.getNodeProperties(this),a=Gt().temp(),l=Gt().temp(),c=Gt().temp(),u=Gt().temp();let d=sn(a,c);i!==null&&(d=Gt(o!==null?Pn(d,i,o):i));const h=sn(l,u),p=sn(d,h).temp(),m={directDiffuse:a,directSpecular:l,indirectDiffuse:c,indirectSpecular:u,total:p},g={radiance:Gt().temp(),irradiance:Gt().temp(),iblIrradiance:Gt().temp(),ambientOcclusion:Dt(1).temp()};return n.reflectedLight=m,n.lightingModel=t||n.lightingModel,Object.assign(s,m,g),Object.assign(n,g),t&&(t.init(n,e.stack,e),t.indirectDiffuse(n,e.stack,e),t.indirectSpecular(n,e.stack,e),t.ambientOcclusion(n,e.stack,e)),super.setup(e)}generate(e){const{context:t}=this,i=this.getNodeType(e);return super.generate(e,i),t.reflectedLight.total.build(e,i)}}const Q8=aR,M_=Ze(aR);Je("lightingContext",M_),ut("LightingContextNode",aR);class lR extends Li{constructor(e=v_){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,t=e.z.atan2(e.x).mul(1/(Math.PI*2)).add(.5),i=e.y.negate().clamp(-1,1).asin().mul(1/Math.PI).add(.5);return kr(t,i)}}const cR=lR,Cf=Ze(lR);ut("EquirectUVNode",lR);class uR extends gr{constructor(e){super(0),this.textureNode=e,this.updateType=Qr.FRAME}get texture(){return this.textureNode.value}update(){const e=this.texture,t=e.images,i=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(i&&i.width!==void 0){const{width:o,height:n}=i;this.value=Math.log2(Math.max(o,n))}}}const dR=uR,T_=Ze(uR);ut("MaxMipLevelNode",uR);class hR extends qt{constructor(e,t=null){super("float"),this.textureNode=e,this.roughnessNode=t}setup(){const{textureNode:e,roughnessNode:t}=this,i=T_(e),o=t.mul(t).mul(Math.PI).div(t.add(1));return i.add(o.log2()).clamp(0,i)}}const pR=hR,E_=Ze(hR);ut("SpecularMIPLevelNode",hR);const eG=new WeakMap;class tG extends l0{constructor(e=null){super(),this.envNode=e}setup(e){let t=this.envNode;const i=e.getNodeProperties(this);if(t.isTextureNode&&t.value.isCubeTexture!==!0){let c=eG.get(t.value);if(c===void 0){const u=t.value,d=e.renderer,h=e.getCubeRenderTarget(512).fromEquirectangularTexture(d,u);c=Kd(h.texture),eG.set(t.value,c)}t=c}const o=Vo("envMapIntensity","float",e.material),n=es(t,rG(Hd,wi)).mul(o),s=es(t,hIe(O8)).mul(Math.PI).mul(o),a=e0(n);e.context.radiance.addAssign(a),e.context.iblIrradiance.addAssign(s);const l=e.context.lightingModel.clearcoatRadiance;if(l){const c=es(t,rG(J1,Xd)).mul(o),u=e0(c);l.addAssign(u)}i.radiance=a,i.irradiance=s}}const rG=(r,e)=>{let t=null,i=null;return{getUVNode:o=>{let n=null;return t===null&&(t=Gi.negate().reflect(e),t=r.mul(r).mix(t,e).normalize(),t=t.transformDirection(Da)),o.isCubeTextureNode?n=t:o.isTextureNode&&(i===null&&(i=Cf(t)),n=i),n},getSamplerLevelNode:()=>r,getMIPLevelAlgorithmNode:(o,n)=>E_(o,n)}},hIe=r=>{let e=null;return{getUVNode:t=>{let i=null;return t.isCubeTextureNode?i=r:t.isTextureNode&&(e===null&&(e=Cf(r),e=kr(e.x,e.y.oneMinus())),i=e),i},getSamplerLevelNode:()=>Dt(1),getMIPLevelAlgorithmNode:(t,i)=>E_(t,i)}},fR=tG;ut("EnvironmentNode",tG);const mR=new Map;class C_ extends gi{constructor(){super(),this.isNodeMaterial=!0,this.type=this.constructor.type,this.forceSinglePass=!1,this.unlit=this.constructor===C_.prototype.constructor,this.fog=!0,this.lights=!0,this.normals=!0,this.colorSpace=!0,this.lightsNode=null,this.envNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.outputNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+G1(this)}build(e){this.setup(e)}setup(e){e.addStack(),e.stack.outputNode=this.setupPosition(e),e.addFlow("vertex",e.removeStack()),e.addStack();let t;if(this.unlit===!1){this.normals===!0&&this.setupNormal(e),this.setupDiffuseColor(e),this.setupVariants(e);const i=this.setupLighting(e);t=this.setupOutput(e,Ir(i,uo.a)),e.stack.assign(a8,t),this.outputNode!==null&&(t=this.outputNode)}else t=this.setupOutput(e,this.outputNode||Ir(0,0,0,1));e.stack.outputNode=t,e.addFlow("fragment",e.removeStack())}setupPosition(e){const t=e.object,i=t.geometry;return e.addStack(),(i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color)&&e.stack.add(q8(t)),t.isSkinnedMesh===!0&&e.stack.add(W8(t)),t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&e.isAvailable("instance")===!0&&e.stack.add(j8(t)),this.positionNode!==null&&e.stack.assign(ts,this.positionNode),e.context.vertex=e.removeStack(),this.vertexNode||x_()}setupDiffuseColor({stack:e,geometry:t}){let i=this.colorNode?Ir(this.colorNode):l_;this.vertexColors===!0&&t.hasAttribute("color")&&(i=Ir(i.xyz.mul(nn("color")),i.a)),e.assign(uo,i);const o=this.opacityNode?Dt(this.opacityNode):c_;if(e.assign(uo.a,uo.a.mul(o)),this.alphaTestNode!==null||this.alphaTest>0){const n=this.alphaTestNode!==null?Dt(this.alphaTestNode):AA;e.add(uo.a.lessThanEqual(n).discard())}}setupVariants(){}setupNormal({stack:e}){if(this.flatShading===!0){const t=i_(Cs),i=o_(Cs),o=t.cross(i).normalize();e.assign(wi,o)}else{const t=this.normalNode?Gt(this.normalNode):U8;e.assign(wi,t)}}getEnvNode(e){let t=null;return this.envNode?t=this.envNode:this.envMap?t=this.envMap.isCubeTexture?Kd(this.envMap):ho(this.envMap):e.environmentNode&&(t=e.environmentNode),t}setupLights(e){const t=this.getEnvNode(e),i=[];t&&i.push(new fR(t)),e.material.aoMap&&i.push(new sR(ho(e.material.aoMap)));let o=this.lightsNode||e.lightsNode;return i.length>0&&(o=J8([...o.lightNodes,...i])),o}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:i,backdropAlphaNode:o,emissiveNode:n}=this,s=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let a=uo.rgb;if(s&&s.hasLight!==!1){const l=this.setupLightingModel(e);a=M_(s,l,i,o)}else i!==null&&(a=Gt(o!==null?Pn(a,i,o):i));return(n&&n.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(a=a.add(Gt(n||RA))),a}setupOutput(e,t){const i=e.renderer,o=e.toneMappingNode;if(o&&(t=Ir(o.context({color:t.rgb}),t.a)),this.fog===!0){const n=e.fogNode;n&&(t=Ir(n.mixAssign(t.rgb),t.a))}if(this.colorSpace===!0){const n=i.getRenderTarget();let s;n!==null?Array.isArray(n.texture)?s=n.texture[0].colorSpace:s=n.texture.colorSpace:s=i.outputColorSpace,s!==en&&s!==so&&(t=t.linearToColorSpace(s))}return t}setDefaultValues(e){for(const i in e){const o=e[i];this[i]===void 0&&(this[i]=o,o&&o.clone&&(this[i]=o.clone()))}Object.assign(this.defines,e.defines);const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const i in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,i)===void 0&&t[i].get!==void 0&&Object.defineProperty(this.constructor.prototype,i,t[i])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const i=ai.prototype.toJSON.call(this,e),o=Xv(this);i.inputNodes={};for(const{property:s,childNode:a}of o)i.inputNodes[s]=a.toJSON(e).uuid;function n(s){const a=[];for(const l in s){const c=s[l];delete c.metadata,a.push(c)}return a}if(t){const s=n(e.textures),a=n(e.images),l=n(e.nodes);s.length>0&&(i.textures=s),a.length>0&&(i.images=a),l.length>0&&(i.nodes=l)}return i}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.outputNode=e.outputNode,this.vertexNode=e.vertexNode,super.copy(e)}static fromMaterial(e){if(e.isNodeMaterial===!0)return e;const t=e.type.replace("Material","NodeMaterial"),i=Nf(t);if(i===void 0)throw new Error(`NodeMaterial: Material "${e.type}" is not compatible.`);for(const o in e)i[o]=e[o];return i}}const To=C_;function Bn(r,e){if(typeof e!="function"||!r)throw new Error(`Node material ${r} is not a class`);if(mR.has(r))throw new Error(`Redefinition of node material ${r}`);mR.set(r,e),e.type=r}function Nf(r){const e=mR.get(r);if(e!==void 0)return new e}Bn("NodeMaterial",C_);const pIe=Object.freeze(Object.defineProperty({__proto__:null,addNodeMaterial:Bn,createNodeMaterialFromType:Nf,default:To},Symbol.toStringTag,{value:"Module"}));class Jd{constructor(e,t=null){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class fIe extends Jd{constructor(e,t=0){super(e,t),this.isFloatUniform=!0,this.boundary=4,this.itemSize=1}}class mIe extends Jd{constructor(e,t=new We){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class gIe extends Jd{constructor(e,t=new Q){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class vIe extends Jd{constructor(e,t=new Kt){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class yIe extends Jd{constructor(e,t=new bt){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class bIe extends Jd{constructor(e,t=new er){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class xIe extends Jd{constructor(e,t=new Xt){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class _Ie extends fIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class wIe extends mIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class SIe extends gIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class MIe extends vIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class TIe extends yIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class EIe extends bIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class CIe extends xIe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class gR extends qt{constructor(e,t,i=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=i}getNodeType(e){const t=this.ifNode.getNodeType(e);if(this.elseNode!==null){const i=this.elseNode.getNodeType(e);if(e.getTypeLength(i)>e.getTypeLength(t))return i}return t}generate(e){const t=this.getNodeType(e),i={tempWrite:!1},{ifNode:o,elseNode:n}=this,s=o.getNodeType(e)!=="void"||n&&n.getNodeType(e)!=="void",a=s?Ia(t).build(e):"",l=es(this.condNode).build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${l} ) {

`).addFlowTab();let c=es(this.ifNode,i).build(e,t);if(c=s?a+" = "+c+";":c,e.removeFlowTab().addFlowCode(e.tab+"	"+c+`

`+e.tab+"}"),n!==null){e.addFlowCode(` else {

`).addFlowTab();let u=es(n,i).build(e,t);u=a?a+" = "+u+";":u,e.removeFlowTab().addFlowCode(e.tab+"	"+u+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return a}}const N_=gR,Hc=Ze(gR);Je("cond",Hc),ut("CondNode",gR);class vR extends qt{constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode("i".charCodeAt()+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const i={};for(let o=0,n=this.params.length-1;o<n;o++){const s=this.getVarName(o);i[s]=$d(s,"int")}return t.returnsNode=this.params[this.params.length-1](i,e.addStack(),e),t.stackNode=e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),i={tempWrite:!1},o=this.params,n=t.stackNode;for(let l=0,c=o.length-1;l<c;l++){const u=o[l],d=this.getVarName(l);let h=null,p=null,m=null;u.isNode?(h="0",p=u.build(e,"int"),m="forward"):(h=u.start,p=u.end,m=u.direction,typeof h=="number"?h=h.toString():h&&h.isNode&&(h=h.build(e,"int")),typeof p=="number"?p=p.toString():p&&p.isNode&&(p=p.build(e,"int")),h!==void 0&&p===void 0?(h=h+" - 1",p="0",m="backwards"):p!==void 0&&h===void 0&&(h="0",m="forward"),m===void 0&&(Number(h)>Number(p)?m="backwards":m="forward"));const g={start:h,end:p,direction:m},v=g.start,y=g.end;let b="",x="",_="";b+=e.getVar("int",d)+" = "+v,g.direction==="backwards"?(x+=d+" >= "+y,_+=d+" --"):(x+=d+" < "+y,_+=d+" ++");const S=`for ( ${b}; ${x}; ${_} )`;e.addFlowCode((l===0?`
`:"")+e.tab+S+` {

`).addFlowTab()}const s=es(n,i).build(e,"void"),a=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let l=0,c=this.params.length-1;l<c;l++)e.addFlowCode((l===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),a}}const NIe=vR,yR=(...r)=>Ut(new vR(Vd(r,"int")));Je("loop",(r,...e)=>Qv(r,yR(...e))),ut("LoopNode",vR);class bR extends qt{constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}add(e){return this.nodes.push(Qv($d(),e)),this}if(e,t){const i=new Oa(t);return this._currentCond=Hc(e,i),this.add(this._currentCond)}elseif(e,t){const i=new Oa(t),o=Hc(e,i);return this._currentCond.elseNode=o,this._currentCond=o,this}else(e){return this._currentCond.elseNode=new Oa(e),this}assign(e,t){return this.add(e_(e,t))}loop(...e){return this.add(yR(...e))}build(e,...t){for(const i of this.nodes)i.build(e,"void");return this.outputNode?this.outputNode.build(e,...t):super.build(e,...t)}}const iG=bR,xR=Ze(bR);ut("StackNode",bR);class AIe extends LC{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const i=t.minFilter,o=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n=new ni(5,5,5),s=Cf(v_),a=Nf("MeshBasicNodeMaterial");a.colorNode=ho(t,s,0),a.side=Ni,a.blending=So;const l=new yt(n,a),c=new Oc;return c.add(l),t.minFilter===Tn&&(t.minFilter=oi),new $x(1,10,this).update(e,c),t.minFilter=i,t.currentGenerateMipmaps=o,l.geometry.dispose(),l.material.dispose(),this}}const RIe=AIe,LIe=new Map([[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),OIe=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),kIe=new Set([Int32Array,Uint32Array,Float32Array]),A_=r=>(r=Number(r),r+(r%1?"":".0"));class IIe{constructor(e,t,i,o=null,n=null){this.object=e,this.material=n||e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=i,this.scene=o,this.nodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.hashNodes={},this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.toneMappingNode=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:[]},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.codes={vertex:[],fragment:[],compute:[]},this.bindings={vertex:[],fragment:[],compute:[]},this.bindingsOffset={vertex:0,fragment:0,compute:0},this.bindingsArray=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.vars={vertex:[],fragment:[],compute:[]},this.flow={code:""},this.chaining=[],this.stack=xR(),this.tab="	",this.context={keywords:new T2,material:this.material,getMIPLevelAlgorithmNode:(s,a)=>a.mul(T_(s))},this.cache=new X1,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null}getRenderTarget(e,t,i){return new gC(e,t,i)}getCubeRenderTarget(e,t){return new RIe(e,t)}includes(e){return this.nodes.includes(e)}getBindings(){let e=this.bindingsArray;if(e===null){const t=this.bindings;this.bindingsArray=e=this.material!==null?[...t.vertex,...t.fragment]:t.compute}return e}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}buildUpdateNodes(){for(const e of this.nodes){const t=e.getUpdateType(),i=e.getUpdateBeforeType();t!==Qr.NONE&&this.updateNodes.push(e.getSelf()),i!==Qr.NONE&&this.updateBeforeNodes.push(e)}}get currentNode(){return this.chaining[this.chaining.length-1]}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}setCache(e){this.cache=e}getCache(){return this.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}getTexture(){console.warn("Abstract function.")}getTextureLevel(){console.warn("Abstract function.")}getConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new bt:e==="vec2"?t=new We:e==="vec3"?t=new Q:e==="vec4"&&(t=new Kt)),e==="float")return A_(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${A_(t.r)}, ${A_(t.g)}, ${A_(t.b)} )`;const i=this.getTypeLength(e),o=this.getComponentType(e),n=s=>this.getConst(o,s);if(i===2)return`${this.getType(e)}( ${n(t.x)}, ${n(t.y)} )`;if(i===3)return`${this.getType(e)}( ${n(t.x)}, ${n(t.y)}, ${n(t.z)} )`;if(i===4)return`${this.getType(e)}( ${n(t.x)}, ${n(t.y)}, ${n(t.z)}, ${n(t.w)} )`;if(i>4&&t&&(t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(n).join(", ")} )`;if(i>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}generateMethod(e){return e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const i=this.attributes;for(const n of i)if(n.name===e)return n;const o=new K1(e,t);return i.push(o),o}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="texture"||e==="cubeTexture"}needsColorSpaceToLinear(){return!1}getTextureEncodingFromMap(e){return console.warn("THREE.NodeBuilder: Method .getTextureEncodingFromMap replaced by .getTextureColorSpaceFromMap in r152+."),this.getTextureColorSpaceFromMap(e)===Ft?Ca:ev}getTextureColorSpaceFromMap(e){let t;return e&&e.isTexture?t=e.colorSpace:e&&e.isWebGLRenderTarget?t=e.texture.colorSpace:t=so,t}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;const i=LIe.get(e);return(t==="float"?"":t[0])+i}getTypeFromArray(e){return OIe.get(e.constructor)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const i=t.array,o=kIe.has(i.constructor)?e.itemSize:t.stride||e.itemSize,n=e.normalized;let s;return!(e instanceof NC)&&n!==!0&&(s=this.getTypeFromArray(i)),this.getTypeFromLength(o,s)}getTypeLength(e){const t=this.getVectorType(e),i=/vec([2-4])/.exec(t);return i!==null?Number(i[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=xR(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,e}getDataFromNode(e,t=this.shaderStage){const i=e.isGlobal(this)?this.globalCache:this.cache;let o=i.getNodeData(e);return o===void 0&&(o={},i.setNodeData(e,o)),o[t]===void 0&&(o[t]={}),o[t]}getNodeProperties(e,t="any"){const i=this.getDataFromNode(e,t);return i.properties||(i.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const i=this.getDataFromNode(e);let o=i.bufferAttribute;if(o===void 0){const n=this.uniforms.index++;o=new K1("nodeAttribute"+n,t,e),this.bufferAttributes.push(o),i.bufferAttribute=o}return o}getStructTypeFromNode(e,t=this.shaderStage,i=null){const o=this.getDataFromNode(e,t);if(o.structType===void 0){const n=this.structs.index++;e.name=`StructType${n}`,this.structs[t].push(e),o.structType=e}return e}getUniformFromNode(e,t,i=this.shaderStage,o=null){const n=this.getDataFromNode(e,i);let s=n.uniform;if(s===void 0){const a=this.uniforms.index++;s=new w2(o||"nodeUniform"+a,t,e),this.uniforms[i].push(s),n.uniform=s}return s}getVarFromNode(e,t,i=this.shaderStage){const o=this.getDataFromNode(e,i);let n=o.variable;if(n===void 0){const s=this.vars[i],a=s.length;n=new Y1("nodeVar"+a,t),s.push(n),o.variable=n}return n}getVaryingFromNode(e,t){const i=this.getDataFromNode(e,"any");let o=i.varying;if(o===void 0){const n=this.varyings,s=n.length;o=new S2("nodeVarying"+s,t),n.push(o),i.varying=o}return o}getCodeFromNode(e,t,i=this.shaderStage){const o=this.getDataFromNode(e);let n=o.code;if(n===void 0){const s=this.codes[i],a=s.length;n=new M2("nodeCode"+a,t),s.push(n),o.code=n}return n}addLineFlowCode(e){return e===""?this:(e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),i=this.flowChildNode(e,t);return this.flowsData.set(e,i),i}flowChildNode(e,t=null){const i=this.flow,o={code:""};return this.flow=o,o.result=e.build(this,t),this.flow=i,o}flowNodeFromShaderStage(e,t,i=null,o=null){const n=this.shaderStage;this.setShaderStage(e);const s=this.flowChildNode(t,i);return o!==null&&(s.code+=`${this.tab+o} = ${s.result};
`),this.flowCode[e]=this.flowCode[e]+s.code,this.setShaderStage(n),s}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,t){return`${this.getType(e)} ${t}`}getVars(e){let t="";const i=this.vars[e];for(const o of i)t+=`${this.getVar(o.type,o.name)}; `;return t}getUniforms(){console.warn("Abstract function.")}getCodes(e){const t=this.codes[e];let i="";for(const o of t)i+=o.code+`
`;return i}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){for(const e of D5){this.setBuildStage(e),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const t of B5){this.setShaderStage(t);const i=this.flowNodes[t];for(const o of i)e==="generate"?this.flowNode(o):o.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if(t==="float")return new _Ie(e);if(t==="vec2")return new wIe(e);if(t==="vec3")return new SIe(e);if(t==="vec4")return new MIe(e);if(t==="color")return new TIe(e);if(t==="mat3")return new EIe(e);if(t==="mat4")return new CIe(e);throw new Error(`Uniform "${t}" not declared.`)}createNodeMaterial(e){return Nf(e)}format(e,t,i){if(t=this.getVectorType(t),i=this.getVectorType(i),t===i||i===null||this.isReference(i))return e;const o=this.getTypeLength(t),n=this.getTypeLength(i);return o>4||n>4||n===0?e:o===n?`${this.getType(i)}( ${e} )`:o>n?this.format(`${e}.${"xyz".slice(0,n)}`,this.getTypeFromLength(n,this.getComponentType(t)),i):n===4?`${this.getType(i)}( ${this.format(e,t,"vec3")}, 1.0 )`:o===2?`${this.getType(i)}( ${this.format(e,t,"vec2")}, 0.0 )`:`${this.getType(i)}( ${e} )`}getSignature(){return`// Three.js r${mp} - NodeMaterial System
`}}const R_=IIe;class PIe{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.startTime=null,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let i=e.get(t);return i===void 0&&(i={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,i)),i}updateBeforeNode(e){const t=e.getUpdateBeforeType(),i=e.updateReference(this),{frameMap:o,renderMap:n}=this._getMaps(this.updateBeforeMap,i);t===Qr.FRAME?o.get(e)!==this.frameId&&(o.set(e,this.frameId),e.updateBefore(this)):t===Qr.RENDER?(n.get(e)!==this.renderId||o.get(e)!==this.frameId)&&(n.set(e,this.renderId),o.set(e,this.frameId),e.updateBefore(this)):t===Qr.OBJECT&&e.updateBefore(this)}updateNode(e){const t=e.getUpdateType(),i=e.updateReference(this),{frameMap:o,renderMap:n}=this._getMaps(this.updateMap,i);t===Qr.FRAME?o.get(e)!==this.frameId&&(o.set(e,this.frameId),e.update(this)):t===Qr.RENDER?(n.get(e)!==this.renderId||o.get(e)!==this.frameId)&&(n.set(e,this.renderId),o.set(e,this.frameId),e.update(this)):t===Qr.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}const u0=PIe;class oG{constructor(e,t,i=null,o="",n=!1){this.type=e,this.name=t,this.count=i,this.qualifier=o,this.isConst=n}}oG.isNodeFunctionInput=!0;const L_=oG;class nG extends qt{constructor(e){super(),this.types=e,this.isStructTypeNode=!0}getMemberTypes(){return this.types}}const DIe=nG;ut("StructTypeNode",nG);class _R extends qt{constructor(...e){super(),this.isOutputStructNode=!0,this.members=e}setup(e){super.setup(e);const t=this.members,i=[];for(let o=0;o<t.length;o++)i.push(t[o].getNodeType(e));this.nodeType=e.getStructTypeFromNode(new DIe(i)).name}generate(e,t){const i=e.getVarFromNode(this,this.nodeType);i.isOutputStructVar=!0;const o=e.getPropertyName(i),n=this.members,s=o!==""?o+".":"";for(let a=0;a<n.length;a++){const l=n[a].build(e,t);e.addLineFlowCode(`${s}m${a} = ${l}`)}return o}}const BIe=_R,FIe=Ze(_R);ut("OutputStructNode",_R);class wR extends qt{constructor(e){super(),this.seedNode=e}setup(){const e=this.seedNode.uint().mul(747796405).add(2891336453),t=e.shiftRight(e.shiftRight(28).add(4)).bitXor(e).mul(277803737);return t.shiftRight(22).bitXor(t).float().mul(1/2**32)}}const UIe=wR,sG=Ze(wR);Je("hash",sG),ut("HashNode",wR);let SR;class MR extends N_{constructor(e){SR=SR||$d("discard"),super(e,SR)}}const zIe=MR,aG=Ze(MR);Je("discard",aG),ut("DiscardNode",MR);class TR extends Li{constructor(){super("vec2")}setup(){const e=Gt(Gi.z,0,Gi.x.negate()).normalize(),t=Gi.cross(e);return kr(e.dot(wi),t.dot(wi)).mul(.495).add(.5)}}const ER=TR,lG=gt(TR);ut("MatcapUVNode",TR);class Qi extends gr{constructor(e=Qi.LOCAL,t=1,i=0){super(i),this.scope=e,this.scale=t,this.updateType=Qr.FRAME}update(e){const t=this.scope,i=this.scale;t===Qi.LOCAL?this.value+=e.deltaTime*i:t===Qi.DELTA?this.value=e.deltaTime*i:t===Qi.FRAME?this.value=e.frameId:this.value=e.time*i}serialize(e){super.serialize(e),e.scope=this.scope,e.scale=this.scale}deserialize(e){super.deserialize(e),this.scope=e.scope,this.scale=e.scale}}Qi.LOCAL="local",Qi.GLOBAL="global",Qi.DELTA="delta",Qi.FRAME="frame";const Af=Qi,CR=(r,e=0)=>Ut(new Qi(Qi.LOCAL,r,e)),cG=(r,e=0)=>Ut(new Qi(Qi.GLOBAL,r,e)),uG=(r,e=0)=>Ut(new Qi(Qi.DELTA,r,e)),dG=gt(Qi,Qi.FRAME).uint();ut("TimerNode",Qi);class Hi extends qt{constructor(e=Hi.SINE,t=CR()){super(),this.method=e,this.timeNode=t}getNodeType(e){return this.timeNode.getNodeType(e)}setup(){const e=this.method,t=Ut(this.timeNode);let i=null;return e===Hi.SINE?i=t.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5):e===Hi.SQUARE?i=t.fract().round():e===Hi.TRIANGLE?i=t.add(.5).fract().mul(2).sub(1).abs():e===Hi.SAWTOOTH&&(i=t.fract()),i}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Hi.SINE="sine",Hi.SQUARE="square",Hi.TRIANGLE="triangle",Hi.SAWTOOTH="sawtooth";const Ua=Hi,hG=Ze(Hi,Hi.SINE),pG=Ze(Hi,Hi.SQUARE),fG=Ze(Hi,Hi.TRIANGLE),mG=Ze(Hi,Hi.SAWTOOTH);ut("OscNode",Hi);class na extends Li{constructor(e,t){super(),this.scope=e,this.node=t}getNodeType(e){return this.node.getNodeType(e)}setup(){const{scope:e,node:t}=this;let i=null;return e===na.DIRECTION_TO_COLOR?i=t.mul(.5).add(.5):e===na.COLOR_TO_DIRECTION&&(i=t.mul(2).sub(1)),i}}na.DIRECTION_TO_COLOR="directionToColor",na.COLOR_TO_DIRECTION="colorToDirection";const VIe=na,NR=Ze(na,na.DIRECTION_TO_COLOR),gG=Ze(na,na.COLOR_TO_DIRECTION);Je("directionToColor",NR),Je("colorToDirection",gG),ut("PackingNode",na);class O_ extends qt{constructor(e,t,i,o,n){super(),this.node=e,this.inLowNode=t,this.inHighNode=i,this.outLowNode=o,this.outHighNode=n,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:i,outLowNode:o,outHighNode:n,doClamp:s}=this;let a=e.sub(t).div(i.sub(t));return s===!0&&(a=a.clamp()),a.mul(n.sub(o)).add(o)}}const k_=O_,AR=Ze(O_,null,null,{doClamp:!1}),RR=Ze(O_);Je("remap",AR),Je("remapClamp",RR),ut("RemapNode",O_);class LR extends Li{constructor(e,t,i=kr(.5)){super("vec2"),this.uvNode=e,this.rotationNode=t,this.centerNode=i}setup(){const{uvNode:e,rotationNode:t,centerNode:i}=this,o=t.cos(),n=t.sin(),s=e.sub(i);return kr(kr(o,n).dot(s),kr(n.negate(),o).dot(s)).add(i)}}const OR=LR,kR=Ze(LR);Je("rotateUV",kR),ut("RotateUVNode",LR);class IR extends qt{constructor(e,t=ui(),i=Dt(0)){super("vec2"),this.countNode=e,this.uvNode=t,this.frameNode=i}setup(){const{frameNode:e,uvNode:t,countNode:i}=this,{width:o,height:n}=i,s=e.mod(o.mul(n)).floor(),a=s.mod(o),l=n.sub(s.add(1).div(o).ceil()),c=i.reciprocal(),u=kr(a,l);return t.add(u).mul(c)}}const PR=IR,vG=Ze(IR);ut("SpriteSheetUVNode",IR);class DR extends qt{constructor(e,t=null,i=null,o=Dt(1),n=g_,s=qd){super("vec4"),this.textureXNode=e,this.textureYNode=t,this.textureZNode=i,this.scaleNode=o,this.positionNode=n,this.normalNode=s}setup(){const{textureXNode:e,textureYNode:t,textureZNode:i,scaleNode:o,positionNode:n,normalNode:s}=this;let a=s.abs().normalize();a=a.div(a.dot(Gt(1)));const l=n.yz.mul(o),c=n.zx.mul(o),u=n.xy.mul(o),d=e.value,h=t!==null?t.value:d,p=i!==null?i.value:d,m=ho(d,l).mul(a.x),g=ho(h,c).mul(a.y),v=ho(p,u).mul(a.z);return sn(m,g,v)}}const I_=DR,BR=Ze(DR),FR=(...r)=>BR(...r);Je("triplanarTexture",FR),ut("TriplanarTexturesNode",DR);class Eo extends bi{setup(){return this.getFloat(this.scope)}}Eo.SCALE="scale",Eo.DASH_SIZE="dashSize",Eo.GAP_SIZE="gapSize",Eo.LINEWIDTH="linewidth",Eo.DASH_OFFSET="dashOffset";const GIe=Eo,P_=gt(Eo,Eo.SCALE),UR=gt(Eo,Eo.DASH_OFFSET),zR=gt(Eo,Eo.DASH_SIZE),VR=gt(Eo,Eo.GAP_SIZE),Rf=gt(Eo,Eo.LINEWIDTH);ut("LineMaterialNode",Eo);const D_=1/6,yG=r=>Mo(D_,Mo(r,Mo(r,r.negate().add(3)).sub(3)).add(1)),GR=r=>Mo(D_,Mo(r,Mo(r,Mo(3,r).sub(6))).add(4)),bG=r=>Mo(D_,Mo(r,Mo(r,Mo(-3,r).add(3)).add(3)).add(1)),HR=r=>Mo(D_,s_(r,3)),xG=r=>yG(r).add(GR(r)),_G=r=>bG(r).add(HR(r)),wG=r=>sn(-1,GR(r).div(yG(r).add(GR(r)))),SG=r=>sn(1,HR(r).div(bG(r).add(HR(r)))),MG=(r,e,t)=>{const i=r.uvNode,o=Mo(i,e.zw).add(.5),n=i0(o),s=o0(o),a=xG(s.x),l=_G(s.x),c=wG(s.x),u=SG(s.x),d=wG(s.y),h=SG(s.y),p=kr(n.x.add(c),n.y.add(d)).sub(.5).mul(e.xy),m=kr(n.x.add(u),n.y.add(d)).sub(.5).mul(e.xy),g=kr(n.x.add(c),n.y.add(h)).sub(.5).mul(e.xy),v=kr(n.x.add(u),n.y.add(h)).sub(.5).mul(e.xy),y=xG(s.y).mul(sn(a.mul(r.uv(p).level(t)),l.mul(r.uv(m).level(t)))),b=_G(s.y).mul(sn(a.mul(r.uv(g).level(t)),l.mul(r.uv(v).level(t))));return y.add(b)},HIe=(r,e)=>{const t=kr(r.size(Zv(e))),i=kr(r.size(Zv(e.add(1)))),o=jd(1,t),n=jd(1,i),s=MG(r,Ir(o,t),i0(e)),a=MG(r,Ir(n,i),r_(e));return o0(e).mix(s,a)};class jR extends Li{constructor(e,t=Dt(3)){super("vec4"),this.textureNode=e,this.blurNode=t}setup(){return HIe(this.textureNode,this.blurNode)}}const jIe=jR,TG=Ze(jR);Je("bicubic",TG),ut("TextureBicubicNode",jR);class $R extends qt{constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}const WR=$R,EG=gt($R);ut("PointUVNode",$R);class Ns extends qt{constructor(e=Ns.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,i=this.scene!==null?this.scene:e.scene;let o;return t===Ns.BACKGROUND_BLURRINESS?o=Vo("backgroundBlurriness","float",i):t===Ns.BACKGROUND_INTENSITY?o=Vo("backgroundIntensity","float",i):console.error("THREE.SceneNode: Unknown scope:",t),o}}Ns.BACKGROUND_BLURRINESS="backgroundBlurriness",Ns.BACKGROUND_INTENSITY="backgroundIntensity";const $Ie=Ns,CG=gt(Ns,Ns.BACKGROUND_BLURRINESS),NG=gt(Ns,Ns.BACKGROUND_INTENSITY);ut("SceneNode",Ns);class qR extends __{constructor(e,t,i=0){super(e,t,i),this.isStorageBufferNode=!0}getInputType(){return"storageBuffer"}}const AG=(r,e,t)=>Ut(new qR(r,e,t));ut("StorageBufferNode",qR);class XR extends _f{constructor(e,t,i=null){super(e,t),this.storeNode=i,this.isStoreTextureNode=!0}getNodeType(){return"void"}}const WIe=XR,qIe=Ze(XR);ut("TextureStoreNode",XR);class KR extends n0{constructor(e,t,i=null){super(e,t,i),this.userData=i}update(e){this.reference=this.userData!==null?this.userData:e.object.userData,super.update(e)}}const RG=KR,LG=(r,e,t)=>Ut(new KR(r,e,t));ut("UserDataNode",KR);const XIe=Mr(({base:r,blend:e})=>{const t=i=>e[i].lessThan(t_).cond(e[i],r[i].oneMinus().div(e[i]).oneMinus().max(0));return Gt(t("x"),t("y"),t("z"))}),KIe=Mr(({base:r,blend:e})=>{const t=i=>e[i].equal(1).cond(e[i],r[i].div(e[i].oneMinus()).max(0));return Gt(t("x"),t("y"),t("z"))}),YIe=Mr(({base:r,blend:e})=>{const t=i=>r[i].oneMinus().mul(e[i].oneMinus()).oneMinus();return Gt(t("x"),t("y"),t("z"))}),JIe=Mr(({base:r,blend:e})=>{const t=i=>r[i].lessThan(.5).cond(r[i].mul(e[i],2),r[i].oneMinus().mul(e[i].oneMinus()).oneMinus());return Gt(t("x"),t("y"),t("z"))});class eo extends Li{constructor(e,t,i){super(),this.blendMode=e,this.baseNode=t,this.blendNode=i}setup(){const{blendMode:e,baseNode:t,blendNode:i}=this,o={base:t,blend:i};let n=null;return e===eo.BURN?n=XIe(o):e===eo.DODGE?n=KIe(o):e===eo.SCREEN?n=YIe(o):e===eo.OVERLAY&&(n=JIe(o)),n}}eo.BURN="burn",eo.DODGE="dodge",eo.SCREEN="screen",eo.OVERLAY="overlay";const za=eo,YR=Ze(eo,eo.BURN),JR=Ze(eo,eo.DODGE),ZR=Ze(eo,eo.OVERLAY),QR=Ze(eo,eo.SCREEN);Je("burn",YR),Je("dodge",JR),Je("overlay",ZR),Je("screen",QR),ut("BlendModeNode",eo);const ZIe=Mr(({color:r,adjustment:e})=>e.mix(oL(r),r)),QIe=Mr(({color:r,adjustment:e})=>{const t=sn(r.r,r.g,r.b).div(3),i=r.r.max(r.g.max(r.b)),o=i.sub(t).mul(e).mul(-3);return Pn(r,i,o)}),e3e=Mr(({color:r,adjustment:e})=>{const t=ka(.299,.587,.114,.595716,-.274453,-.321263,.211456,-.522591,.311135),i=ka(1,.9563,.621,1,-.2721,-.6474,1,-1.107,1.7046),o=t.mul(r),n=o.z.atan2(o.y).add(e),s=o.yz.length();return i.mul(Gt(o.x,s.mul(n.cos()),s.mul(n.sin())))});class cn extends Li{constructor(e,t,i=Dt(1)){super("vec3"),this.method=e,this.colorNode=t,this.adjustmentNode=i}setup(){const{method:e,colorNode:t,adjustmentNode:i}=this,o={color:t,adjustment:i};let n=null;return e===cn.SATURATION?n=ZIe(o):e===cn.VIBRANCE?n=QIe(o):e===cn.HUE?n=e3e(o):console.error(`${this.type}: Method "${this.method}" not supported!`),n}}cn.SATURATION="saturation",cn.VIBRANCE="vibrance",cn.HUE="hue";const jc=cn,eL=Ze(cn,cn.SATURATION),tL=Ze(cn,cn.VIBRANCE),rL=Ze(cn,cn.HUE),iL=Gt(.2125,.7154,.0721),oL=(r,e=iL)=>Ll(r,e);Je("saturation",eL),Je("vibrance",tL),Je("hue",rL),ut("ColorAdjustmentNode",cn);class nL extends Li{constructor(e,t){super(),this.sourceNode=e,this.stepsNode=t}setup(){const{sourceNode:e,stepsNode:t}=this;return e.mul(t).floor().div(t)}}const sL=nL,aL=Ze(nL);Je("posterize",aL),ut("PosterizeNode",nL);const t3e=Mr(({color:r,exposure:e})=>r.mul(e).clamp()),r3e=Mr(({color:r,exposure:e})=>(r=r.mul(e),r.div(r.add(1)).clamp())),i3e=Mr(({color:r,exposure:e})=>{r=r.mul(e),r=r.sub(.004).max(0);const t=r.mul(r.mul(6.2).add(.5)),i=r.mul(r.mul(6.2).add(1.7)).add(.06);return t.div(i).pow(2.2)}),o3e=Mr(({color:r})=>{const e=r.mul(r.add(.0245786)).sub(90537e-9),t=r.mul(r.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),n3e=Mr(({color:r,exposure:e})=>{const t=ka(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),i=ka(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return r=r.mul(e).div(.6),r=t.mul(r),r=o3e({color:r}),r=i.mul(r),r.clamp()}),s3e={[Fg]:t3e,[Ug]:r3e,[zg]:i3e,[$u]:n3e};class lL extends Li{constructor(e=Mn,t=Dt(1),i=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=i}getCacheKey(){let e=super.getCacheKey();return e="{toneMapping:"+this.toneMapping+",nodes:"+e+"}",e}setup(e){const t=this.colorNode||e.context.color,i=this.toneMapping;if(i===Mn)return t;const o={exposure:this.exposureNode,color:t},n=s3e[i];let s=null;return n?s=n(o):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",i),s=t),s}}const cL=lL,uL=(r,e,t)=>Ut(new lL(r,Ut(e),Ut(t)));ut("ToneMappingNode",lL);let dL,hL;class wr extends qt{constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===wr.COORDINATE||this.scope===wr.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=Qr.NONE;return(this.scope===wr.RESOLUTION||this.scope===wr.VIEWPORT)&&(e=Qr.FRAME),this.updateType=e,e}update({renderer:e}){this.scope===wr.VIEWPORT?e.getViewport(hL):e.getDrawingBufferSize(dL)}setup(e){const t=this.scope;if(t===wr.COORDINATE)return;let i=null;if(t===wr.RESOLUTION)i=Zi(dL||(dL=new We));else if(t===wr.VIEWPORT)i=Zi(hL||(hL=new Kt));else{const o=kr(new wr(wr.COORDINATE)),n=new wr(wr.RESOLUTION);i=o.div(n);let s=i.x,a=i.y;(/top/i.test(t)&&e.isFlipY()||/bottom/i.test(t)&&e.isFlipY()===!1)&&(a=a.oneMinus()),/right/i.test(t)&&(s=s.oneMinus()),i=kr(s,a)}return i}generate(e){return this.scope===wr.COORDINATE?e.getFragCoord():super.generate(e)}}wr.COORDINATE="coordinate",wr.RESOLUTION="resolution",wr.VIEWPORT="viewport",wr.TOP_LEFT="topLeft",wr.BOTTOM_LEFT="bottomLeft",wr.TOP_RIGHT="topRight",wr.BOTTOM_RIGHT="bottomRight";const Fn=wr,OG=gt(wr,wr.COORDINATE),kG=gt(wr,wr.RESOLUTION),B_=gt(wr,wr.VIEWPORT),d0=gt(wr,wr.TOP_LEFT),pL=gt(wr,wr.BOTTOM_LEFT),IG=gt(wr,wr.TOP_RIGHT),PG=gt(wr,wr.BOTTOM_RIGHT);ut("ViewportNode",wr);const h0=new We;class F_ extends _f{constructor(e=d0,t=null,i=null){i===null&&(i=new a1,i.minFilter=Tn),super(i,e,t),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=Qr.FRAME}updateBefore(e){const t=e.renderer;t.getDrawingBufferSize(h0);const i=this.value;(i.image.width!==h0.width||i.image.height!==h0.height)&&(i.image.width=h0.width,i.image.height=h0.height,i.needsUpdate=!0);const o=i.generateMipmaps;i.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(i),i.generateMipmaps=o}clone(){return new this.constructor(this.uvNode,this.levelNode,this.value)}}const fL=F_,DG=Ze(F_),BG=Ze(F_,null,null,{generateMipmaps:!0});Je("viewportTexture",DG),Je("viewportMipTexture",BG),ut("ViewportTextureNode",F_);let mL=null;class gL extends fL{constructor(e=d0,t=null){mL===null&&(mL=new a1),super(e,t,mL)}}const a3e=gL,FG=Ze(gL);Je("viewportSharedTexture",FG),ut("ViewportSharedTextureNode",gL);let Lf=null;class vL extends fL{constructor(e=d0,t=null){Lf===null&&(Lf=new Sd,Lf.minFilter=Tn,Lf.type=Cn,Lf.format=Do),super(e,t,Lf)}}const l3e=vL,yL=Ze(vL);Je("viewportDepthTexture",yL),ut("ViewportDepthTextureNode",vL);class sa extends qt{constructor(e,t=null){super("float"),this.scope=e,this.textureNode=t,this.isViewportDepthNode=!0}setup(){const{scope:e}=this;let t=null;if(e===sa.DEPTH)t=bL(Cs.z,d_,h_);else if(e===sa.DEPTH_TEXTURE){const i=this.textureNode||yL(),o=UG(i,d_,h_);t=bL(o,d_,h_)}return t}}const bL=(r,e,t)=>r.add(e).div(e.sub(t)),c3e=(r,e,t)=>e.sub(t).mul(r).sub(e),u3e=(r,e,t)=>e.add(r).mul(t).div(e.sub(t).mul(r)),UG=(r,e,t)=>e.mul(t).div(t.sub(e).mul(r).sub(t));sa.DEPTH="depth",sa.DEPTH_TEXTURE="depthTexture";const d3e=sa,h3e=gt(sa,sa.DEPTH),p3e=Ze(sa,sa.DEPTH_TEXTURE);ut("ViewportDepthNode",sa);class xL extends qt{constructor(e="",t=[],i=""){super("code"),this.isCodeNode=!0,this.code=e,this.language=i,this._includes=t}setIncludes(e){return this._includes=e,this}getIncludes(){return this._includes}generate(e){const t=this.getIncludes(e);for(const o of t)o.build(e);const i=e.getCodeFromNode(this,this.getNodeType(e));return i.code=this.code,i.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}const Va=xL,p0=Ze(xL),f3e=(r,e)=>p0(r,e,"js"),m3e=(r,e)=>p0(r,e,"wgsl"),_L=(r,e)=>p0(r,e,"glsl");ut("CodeNode",xL);class wL extends Li{constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const t=[],i=this.functionNode,o=i.getInputs(e),n=this.parameters;if(Array.isArray(n))for(let s=0;s<n.length;s++){const a=o[s],l=n[s];t.push(l.build(e,a.type))}else for(const s of o){const a=n[s.name];if(a!==void 0)t.push(a.build(e,s.type));else throw new Error(`FunctionCallNode: Input '${s.name}' not found in FunctionNode.`)}return`${i.build(e,"property")}( ${t.join(", ")} )`}}const Dl=wL,SL=(r,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?Vd(e):Jv(e[0]),Ut(new wL(Ut(r),e)));Je("call",SL),ut("FunctionCallNode",wL);class ML extends Va{constructor(e="",t=[],i=""){super(e,t,i),this.keywords={}}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let i=t.nodeFunction;return i===void 0&&(i=e.parser.parseFunction(this.code),t.nodeFunction=i),i}generate(e,t){super.generate(e);const i=this.getNodeFunction(e),o=i.name,n=i.type,s=e.getCodeFromNode(this,n);o!==""&&(s.name=o);const a=e.getPropertyName(s);let l=this.getNodeFunction(e).getCode(a);const c=this.keywords,u=Object.keys(c);if(u.length>0)for(const d of u){const h=new RegExp(`\\b${d}\\b`,"g"),p=c[d].build(e,"property");l=l.replace(h,p)}return s.code=l,t==="property"?a:e.format(`${a}()`,n,t)}}const zG=ML,VG=(r,e=[],t="")=>{for(let n=0;n<e.length;n++){const s=e[n];typeof s=="function"&&(e[n]=s.functionNode)}const i=Ut(new ML(r,e,t)),o=(...n)=>i.call(...n);return o.functionNode=i,o},un=(r,e)=>VG(r,e,"glsl"),g3e=(r,e)=>VG(r,e,"wgsl");ut("FunctionNode",ML);class TL extends qt{constructor(e=null){super(),this._value=e,this._cache=null,this.inputType=null,this.outpuType=null,this.events=new ao,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return this.outputType!==null}set value(e){this._value!==e&&(this._cache&&this.inputType==="URL"&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=e,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){const e=this.value;if(e&&this._cache===null&&this.inputType==="URL"&&e.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([e.value]));else if(e&&e.value!==null&&e.value!==void 0&&((this.inputType==="URL"||this.inputType==="String")&&typeof e.value=="string"||this.inputType==="Number"&&typeof e.value=="number"||this.inputType==="Vector2"&&e.value.isVector2||this.inputType==="Vector3"&&e.value.isVector3||this.inputType==="Vector4"&&e.value.isVector4||this.inputType==="Color"&&e.value.isColor||this.inputType==="Matrix3"&&e.value.isMatrix3||this.inputType==="Matrix4"&&e.value.isMatrix4))return e.value;return this._cache||e}getNodeType(e){return this.value&&this.value.isNode?this.value.getNodeType(e):"float"}setup(){return this.value&&this.value.isNode?this.value:Dt()}serialize(e){super.serialize(e),this.value!==null?this.inputType==="ArrayBuffer"?e.value=BN(this.value):e.value=this.value?this.value.toJSON(e.meta).uuid:null:e.value=null,e.inputType=this.inputType,e.outputType=this.outputType}deserialize(e){super.deserialize(e);let t=null;e.value!==null&&(e.inputType==="ArrayBuffer"?t=FN(e.value):e.inputType==="Texture"?t=e.meta.textures[e.value]:t=e.meta.nodes[e.value]||null),this.value=t,this.inputType=e.inputType,this.outputType=e.outputType}}const v3e=TL,f0=Ze(TL);Je("scriptableValue",f0),ut("ScriptableValueNode",TL);class GG extends Map{get(e,t=null,...i){if(this.has(e))return super.get(e);if(t!==null){const o=t(...i);return this.set(e,o),o}}}class y3e{constructor(e){this.scriptableNode=e}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(e){return this.scriptableNode.getInputLayout(e)}get(e){const t=this.parameters[e];return t?t.getValue():null}}const U_=new GG;class EL extends qt{constructor(e=null,t={}){super(),this.codeNode=e,this.parameters=t,this._local=new GG,this._output=f0(),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(e,t){return this._local.set(e,t)}getLocal(e){return this._local.get(e)}onRefresh(){this._refresh()}getInputLayout(e){for(const t of this.getLayout())if(t.inputType&&(t.id===e||t.name===e))return t}getOutputLayout(e){for(const t of this.getLayout())if(t.outputType&&(t.id===e||t.name===e))return t}setOutput(e,t){const i=this._outputs;return i[e]===void 0?i[e]=f0(t):i[e].value=t,this}getOutput(e){return this._outputs[e]}getParameter(e){return this.parameters[e]}setParameter(e,t){const i=this.parameters;return t&&t.isScriptableNode?(this.deleteParameter(e),i[e]=t,i[e].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):t&&t.isScriptableValueNode?(this.deleteParameter(e),i[e]=t,i[e].events.addEventListener("refresh",this.onRefresh)):i[e]===void 0?(i[e]=f0(t),i[e].events.addEventListener("refresh",this.onRefresh)):i[e].value=t,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(e){let t=this.parameters[e];return t&&(t.isScriptableNode&&(t=t.getDefaultOutput()),t.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(const e of Object.keys(this.parameters))this.deleteParameter(e);return this.needsUpdate=!0,this}call(e,...t){const i=this.getObject()[e];if(typeof i=="function")return i(...t)}async callAsync(e,...t){const i=this.getObject()[e];if(typeof i=="function")return i.constructor.name==="AsyncFunction"?await i(...t):i(...t)}getNodeType(e){return this.getDefaultOutputNode().getNodeType(e)}refresh(e=null){e!==null?this.getOutput(e).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),this._object!==null)return this._object;const e=()=>this.refresh(),t=(c,u)=>this.setOutput(c,u),i=new y3e(this),o=U_.get("THREE"),n=U_.get("TSL"),s=this.getMethod(this.codeNode),a=[i,this._local,U_,e,t,o,n];this._object=s(...a);const l=this._object.layout;if(l&&(l.cache===!1&&this._local.clear(),this._output.outputType=l.outputType||null,Array.isArray(l.elements)))for(const c of l.elements){const u=c.id||c.name;c.inputType&&(this.getParameter(u)===void 0&&this.setParameter(u,null),this.getParameter(u).inputType=c.inputType),c.outputType&&(this.getOutput(u)===void 0&&this.setOutput(u,null),this.getOutput(u).outputType=c.outputType)}return this._object}deserialize(e){super.deserialize(e);for(const t in this.parameters){let i=this.parameters[t];i.isScriptableNode&&(i=i.getDefaultOutput()),i.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){const e=this.getDefaultOutput().value;return e&&e.isNode?e:Dt()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),this._method!==null)return this._method;const e=["parameters","local","global","refresh","setOutput","THREE","TSL"],t=["layout","init","main","dispose"].join(", "),i="var "+t+`; var output = {};
`,o=`
return { ...output, `+t+" };",n=i+this.codeNode.code+o;return this._method=new Function(...e,n),this._method}dispose(){this._method!==null&&(this._object&&typeof this._object.dispose=="function"&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}set needsUpdate(e){e===!0&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return this.codeNode===null?this:(this._needsOutputUpdate===!0&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value,this)}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}const b3e=EL,HG=Ze(EL);Je("scriptable",HG),ut("ScriptableNode",EL);class CL extends qt{constructor(e,t){super("float"),this.isFogNode=!0,this.colorNode=e,this.factorNode=t}mixAssign(e){return this.mix(e,this.colorNode)}setup(){return this.factorNode}}const m0=CL,NL=Ze(CL);Je("fog",NL),ut("FogNode",CL);class AL extends m0{constructor(e,t,i){super(e),this.isFogRangeNode=!0,this.nearNode=t,this.farNode=i}setup(){return Ol(this.nearNode,this.farNode,Cs.z.negate())}}const RL=AL,z_=Ze(AL);Je("rangeFog",z_),ut("FogRangeNode",AL);class LL extends m0{constructor(e,t){super(e),this.isFogExp2Node=!0,this.densityNode=t}setup(){const e=Cs.z.negate(),t=this.densityNode;return t.mul(t,e,e).negate().exp().oneMinus()}}const OL=LL,kL=Ze(LL);Je("densityFog",kL),ut("FogExp2Node",LL);let Zd=null,Qd=null;class IL extends qt{constructor(e=Dt(),t=Dt()){super(),this.minNode=e,this.maxNode=t}getVectorLength(e){const t=e.getTypeLength(Uc(this.minNode.value)),i=e.getTypeLength(Uc(this.maxNode.value));return t>i?t:i}getNodeType(e){return e.object.isInstancedMesh===!0?e.getTypeFromLength(this.getVectorLength(e)):"float"}setup(e){const t=e.object;let i=null;if(t.isInstancedMesh===!0){const o=this.minNode.value,n=this.maxNode.value,s=e.getTypeLength(Uc(o)),a=e.getTypeLength(Uc(n));Zd=Zd||new Kt,Qd=Qd||new Kt,Zd.setScalar(0),Qd.setScalar(0),s===1?Zd.setScalar(o):o.isColor?Zd.set(o.r,o.g,o.b):Zd.set(o.x,o.y,o.z||0,o.w||0),a===1?Qd.setScalar(n):n.isColor?Qd.set(n.r,n.g,n.b):Qd.set(n.x,n.y,n.z||0,n.w||0);const l=4,c=l*t.count,u=new Float32Array(c);for(let h=0;h<c;h++){const p=h%l,m=Zd.getComponent(p),g=Qd.getComponent(p);u[h]=vl.lerp(m,g,Math.random())}const d=this.getNodeType(e);i=w_(u,"vec4",t.count).element(o8).convert(d)}else i=Dt(0);return i}}const PL=IL,jG=Ze(IL);ut("RangeNode",IL);class DL extends qt{constructor(e,t,i=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=t,this.workgroupSize=i,this.dispatchCount=0,this.version=1,this.updateType=Qr.OBJECT,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}updateDispatchCount(){const{count:e,workgroupSize:t}=this;let i=t[0];for(let o=1;o<t.length;o++)i*=t[o];this.dispatchCount=Math.ceil(e/i)}onInit(){}update({renderer:e}){e.compute(this)}generate(e){const{shaderStage:t}=e;if(t==="compute"){const i=this.computeNode.build(e,"void");i!==""&&e.addLineFlowCode(i)}}}const BL=DL,FL=(r,e,t)=>Ut(new DL(Ut(r),e,t));Je("compute",FL),ut("ComputeNode",DL);class $c extends qt{constructor(e=$c.TARGET_DIRECTION,t=null){super(),this.scope=e,this.light=t}setup(){const{scope:e,light:t}=this;let i=null;return e===$c.TARGET_DIRECTION&&(i=Da.transformDirection(u_(t).sub(u_(t.target)))),i}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}$c.TARGET_DIRECTION="targetDirection";const x3e=$c,UL=Ze($c,$c.TARGET_DIRECTION);ut("LightNode",$c);const zL=Mr(r=>{const{lightDistance:e,cutoffDistance:t,decayExponent:i}=r,o=e.pow(i).max(.01).reciprocal();return t.greaterThan(0).cond(o.mul(e.div(t).pow4().oneMinus().clamp().pow2()),o)});class VL extends Gc{constructor(e=null){super(e),this.cutoffDistanceNode=Zi(0),this.decayExponentNode=Zi(0)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setup(e){const{colorNode:t,cutoffDistanceNode:i,decayExponentNode:o,light:n}=this,s=e.context.lightingModel,a=IA(n).sub(Cs),l=a.normalize(),c=a.length(),u=zL({lightDistance:c,cutoffDistance:i,decayExponent:o}),d=t.mul(u),h=e.context.reflectedLight;s.direct({lightDirection:l,lightColor:d,reflectedLight:h})}}const $G=VL;ut("PointLightNode",VL),Yd(Id,VL);class GL extends Gc{constructor(e=null){super(e)}setup(e){super.setup(e);const t=e.context.lightingModel,i=this.colorNode,o=UL(this.light),n=e.context.reflectedLight;t.direct({lightDirection:o,lightColor:i,reflectedLight:n})}}const _3e=GL;ut("DirectionalLightNode",GL),Yd(Pd,GL);class HL extends Gc{constructor(e=null){super(e),this.coneCosNode=Zi(0),this.penumbraCosNode=Zi(0),this.cutoffDistanceNode=Zi(0),this.decayExponentNode=Zi(0)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e){const{coneCosNode:t,penumbraCosNode:i}=this;return Ol(t,i,e)}setup(e){super.setup(e);const t=e.context.lightingModel,{colorNode:i,cutoffDistanceNode:o,decayExponentNode:n,light:s}=this,a=IA(s).sub(Cs),l=a.normalize(),c=l.dot(UL(s)),u=this.getSpotAttenuation(c),d=a.length(),h=zL({lightDistance:d,cutoffDistance:o,decayExponent:n}),p=i.mul(u).mul(h),m=e.context.reflectedLight;t.direct({lightDirection:l,lightColor:p,reflectedLight:m})}}const WG=HL;ut("SpotLightNode",HL),Yd(Bc,HL);class w3e extends Bc{constructor(e,t,i,o,n,s){super(e,t,i,o,n,s),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}const S3e=w3e;class jL extends WG{getSpotAttenuation(e){const t=this.light.iesMap;let i=null;if(t&&t.isTexture===!0){const o=e.acos().mul(1/Math.PI);i=ho(t,kr(o,0),0).r}else i=super.getSpotAttenuation(e);return i}}const M3e=jL;ut("IESSpotLightNode",jL),Yd(S3e,jL);class $L extends Gc{constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}const T3e=$L;ut("AmbientLightNode",$L),Yd(ff,$L);class WL extends Gc{constructor(e=null){super(e),this.lightPositionNode=u_(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=Zi(new bt)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:i,lightDirectionNode:o}=this,n=oa.dot(o).mul(.5).add(.5),s=Pn(i,t,n);e.context.irradiance.addAssign(s)}}const qG=WL;ut("HemisphereLightNode",WL),Yd(kd,WL);const E3e=Mr(r=>{const e=r.uv.mul(2),t=e.x.floor(),i=e.y.floor();return t.add(i).mod(2).sign()});class qL extends Li{constructor(e=ui()){super("float"),this.uvNode=e}setup(){return E3e({uv:this.uvNode})}}const XL=qL,KL=Ze(qL);Je("checker",KL),ut("CheckerNode",qL);class C3e extends on{constructor(e){super(e),this.textures={}}load(e,t,i,o){const n=new La(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials),n.load(e,s=>{try{t(this.parse(JSON.parse(s)))}catch(a){o?o(a):console.error(a),this.manager.itemError(e)}},i,o)}parseNodes(e){const t={};if(e!==void 0){for(const o of e){const{uuid:n,type:s}=o;t[n]=Ut(zN(s)),t[n].uuid=n}const i={nodes:t,textures:this.textures};for(const o of e)o.meta=i,t[o.uuid].deserialize(o),delete o.meta}return t}parse(e){const t=Ut(zN(e.type));t.uuid=e.uuid;const i={nodes:this.parseNodes(e.nodes),textures:this.textures};return e.meta=i,t.deserialize(e),delete e.meta,t}setTextures(e){return this.textures=e,this}}const XG=C3e,N3e=new Fi;class KG extends To{constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.lights=!1,this.normals=!1,this.setDefaultValues(N3e),this.setValues(e)}}const V_=KG;Bn("LineBasicNodeMaterial",KG);const A3e=new zv;class YG extends To{constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.lights=!1,this.normals=!1,this.setDefaultValues(A3e),this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants({stack:e}){const t=this.offsetNode,i=this.dashScaleNode?Dt(this.dashScaleNode):P_,o=this.dashSizeNode?Dt(this.dashSizeNode):zR,n=this.dashSizeNode?Dt(this.dashGapNode):VR;e.assign(yf,o),e.assign(Q1,n);const s=Xr(nn("lineDistance").mul(i)),a=t?s.add(t):s;e.add(a.mod(yf.add(Q1)).greaterThan(yf).discard())}}const R3e=YG;Bn("LineDashedNodeMaterial",YG);const L3e=new zv;class JG extends To{constructor(e={}){super(),this.normals=!1,this.lights=!1,this.setDefaultValues(L3e),this.useAlphaToCoverage=!0,this.useColor=e.vertexColors,this.useDash=e.dashed,this.useWorldUnits=!1,this.dashOffset=0,this.lineWidth=1,this.lineColorNode=null,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setupShaders(),this.setValues(e)}setupShaders(){const e=this.alphaToCoverage,t=this.useColor,i=this.dashed,o=this.worldUnits,n=Mr(({start:a,end:l})=>{const c=Pa.element(2).element(2),u=Pa.element(3).element(2).mul(-.5).div(c).sub(a.z).div(l.z.sub(a.z));return Ir(Pn(a.xyz,l.xyz,u),l.w)});this.vertexNode=new Oa(a=>{a.assign(Xr(kr(),"vUv"),ui());const l=nn("instanceStart"),c=nn("instanceEnd"),u=Ia("vec4","start"),d=Ia("vec4","end");a.assign(u,zc.mul(Ir(l,1))),a.assign(d,zc.mul(Ir(c,1))),o&&(a.assign(Xr(Gt(),"worldStart"),u.xyz),a.assign(Xr(Gt(),"worldEnd"),d.xyz));const h=B_.z.div(B_.w),p=Pa.element(2).element(3).equal(-1);a.if(p,_=>{_.if(u.z.lessThan(0).and(d.z.greaterThan(0)),S=>{S.assign(d,n({start:u,end:d}))}).elseif(d.z.lessThan(0).and(u.z.greaterThanEqual(0)),S=>{S.assign(u,n({start:d,end:u}))})});const m=Pa.mul(u),g=Pa.mul(d),v=m.xyz.div(m.w),y=g.xyz.div(g.w),b=y.xy.sub(v.xy);a.assign(b.x,b.x.mul(h)),a.assign(b,b.normalize());const x=Mf(Ir());if(o){const _=d.xyz.sub(u.xyz).normalize(),S=ln.y.lessThan(.5).cond(u.xyz.cross(_).normalize(),d.xyz.cross(_).normalize());a.assign(S,ln.x.lessThan(0).cond(S.negate(),S));const w=_.dot(Gt(0,0,1));i||(a.assign(u,u.sub(Ir(_.mul(Rf).mul(.5),0))),a.assign(d,d.add(Ir(_.mul(Rf).mul(.5),0))),a.assign(S,S.sub(Gt(b.mul(w),0))),a.assign(S.z,S.z.add(.5))),a.if(ln.y.greaterThan(1).or(ln.y.lessThan(0)),E=>{E.assign(S,S.add(Gt(b.mul(2).mul(w),0)))}),a.assign(S,S.mul(Rf).mul(.5));const M=Xr(Ir(),"worldPos");a.assign(M,ln.y.lessThan(.5).cond(u,d)),a.assign(M,M.add(Ir(S,0))),a.assign(x,Pa.mul(M));const T=Mf(Gt());a.assign(T,ln.y.lessThan(.5).cond(v,y)),a.assign(x.z,T.z.mul(x.w))}else{const _=Ia("vec2","offset");a.assign(_,kr(b.y,b.x.negate())),a.assign(b.x,b.x.div(h)),a.assign(_.x,_.x.div(h)),a.assign(_,ln.x.lessThan(0).cond(_.negate(),_)),a.if(ln.y.lessThan(0),S=>{S.assign(_,_.sub(b))}).elseif(ln.y.greaterThan(1),S=>{S.assign(_,_.add(b))}),a.assign(_,_.mul(Rf)),a.assign(_,_.div(B_.w)),a.assign(x,ln.y.lessThan(.5).cond(m,g)),a.assign(_,_.mul(x.w)),a.assign(x,x.add(Ir(_,0,0)))}return x});const s=Mr(({p1:a,p2:l,p3:c,p4:u})=>{const d=a.sub(c),h=u.sub(c),p=l.sub(a),m=Ll(d,h),g=Ll(h,p),v=Ll(d,p),y=Ll(h,h),b=Ll(p,p).mul(y).sub(g.mul(g)),x=m.mul(g).sub(v.mul(y)),_=xf(x.div(b),0,1),S=xf(m.add(g.mul(_)).div(y),0,1);return kr(_,S)});this.colorNode=new Oa(a=>{const l=Xr(kr(),"vUv");if(i){const d=this.offsetNode?Dt(this.offsetNodeNode):UR,h=this.dashScaleNode?Dt(this.dashScaleNode):P_,p=this.dashSizeNode?Dt(this.dashSizeNode):zR,m=this.dashSizeNode?Dt(this.dashGapNode):VR;a.assign(yf,p),a.assign(Q1,m);const g=nn("instanceDistanceStart"),v=nn("instanceDistanceEnd"),y=ln.y.lessThan(.5).cond(h.mul(g),P_.mul(v)),b=Xr(y.add(UR)),x=d?b.add(d):b;a.add(l.y.lessThan(-1).or(l.y.greaterThan(1)).discard()),a.add(n_(x,yf.add(Q1)).greaterThan(yf).discard())}const c=Ia("float","alpha");if(a.assign(c,1),o){let d=Xr(Gt(),"worldStart"),h=Xr(Gt(),"worldEnd");const p=Xr(Ir(),"worldPos").xyz.normalize().mul(1e5),m=h.sub(d),g=s({p1:d,p2:h,p3:Gt(0,0,0),p4:p}),v=d.add(m.mul(g.x)),y=p.mul(g.y),b=v.sub(y).length().div(Rf);if(!i)if(e){const x=b.fwidth();a.assign(c,Ol(x.negate().add(.5),x.add(.5),b).oneMinus())}else a.add(b.greaterThan(.5).discard())}else if(e){const d=l.x,h=l.y.greaterThan(0).cond(l.y.sub(1),l.y.add(1)),p=d.mul(d).add(h.mul(h)),m=Ia("float","dlen");a.assign(m,p.fwidth()),a.if(bf(l.y).greaterThan(1),g=>{g.assign(c,Ol(m.oneMinus(),m.add(1),p).oneMinus())})}else a.if(bf(l.y).greaterThan(1),d=>{const h=l.x,p=l.y.greaterThan(0).cond(l.y.sub(1),l.y.add(1)),m=h.mul(h).add(p.mul(p));d.add(m.greaterThan(1).discard())});let u;if(this.lineColorNode)u=this.lineColorNode;else if(t){const d=nn("instanceColorStart"),h=nn("instanceColorEnd");u=Xr(ln.y.lessThan(.5).cond(d,h))}else u=l_;return Ir(u,c)}),this.needsUpdate=!0}get worldUnits(){return this.useWorldUnits}set worldUnits(e){this.useWorldUnits!==e&&(this.useWorldUnits=e,this.setupShaders())}get dashed(){return this.useDash}set dashed(e){this.useDash!==e&&(this.useDash=e,this.setupShaders())}get alphaToCoverage(){return this.useAlphaToCoverage}set alphaToCoverage(e){this.useAlphaToCoverage!==e&&(this.useAlphaToCoverage=e,this.setupShaders())}}const O3e=JG;Bn("Line2NodeMaterial",JG);const k3e=new R1;class ZG extends To{constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.colorSpace=!1,this.setDefaultValues(k3e),this.setValues(e)}setupDiffuseColor({stack:e}){const t=this.opacityNode?Dt(this.opacityNode):c_;e.assign(uo,Ir(NR(wi),t))}}const I3e=ZG;Bn("MeshNormalNodeMaterial",ZG);const P3e=new Uo;class QG extends To{constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!1,this.setDefaultValues(P3e),this.setValues(e)}}const g0=QG;Bn("MeshBasicNodeMaterial",QG);const D3e=Mr(({f0:r,f90:e,dotVH:t})=>{const i=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return r.mul(i.oneMinus()).add(e.mul(i))}),Of=D3e,B3e=Mr(r=>r.diffuseColor.mul(1/Math.PI)),v0=B3e,F3e=()=>Dt(.25),U3e=Mr(({dotNH:r})=>Z1.mul(.5/Math.PI).add(1).mul(r.pow(Z1))),z3e=Mr(({lightDirection:r})=>{const e=r.add(Gi).normalize(),t=wi.dot(e).clamp(),i=Gi.dot(e).clamp(),o=Of({f0:ia,f90:1,dotVH:i}),n=F3e(),s=U3e({dotNH:t});return o.mul(n).mul(s)});class V3e extends _2{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:i}){const o=wi.dot(e).clamp().mul(t);i.directDiffuse.addAssign(o.mul(v0({diffuseColor:uo.rgb}))),this.specular===!0&&i.directSpecular.addAssign(o.mul(z3e({lightDirection:e})).mul(Hke))}indirectDiffuse({irradiance:e,reflectedLight:t}){t.indirectDiffuse.addAssign(e.mul(v0({diffuseColor:uo})))}}const YL=V3e,G3e=new L1;class eH extends To{constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(G3e),this.setValues(e)}setupLightingModel(){return new YL(!1)}}const H3e=eH;Bn("MeshLambertNodeMaterial",eH);const j3e=new A1;class tH extends To{constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(j3e),this.setValues(e)}setupLightingModel(){return new YL}setupVariants({stack:e}){const t=(this.shininessNode?Dt(this.shininessNode):S8).max(1e-4);e.assign(Z1,t);const i=this.specularNode||M8;e.assign(ia,i)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const $3e=tH;Bn("MeshPhongNodeMaterial",tH);const W3e=Mr(()=>{const r=Sf.dFdx().abs().max(Sf.dFdy().abs());return r.x.max(r.y).max(r.z)}),JL=W3e,q3e=Mr(r=>{const{roughness:e}=r,t=JL();let i=e.max(.0525);return i=i.add(t),i=i.min(1),i}),rH=q3e,X3e=Mr(r=>{const{alpha:e,dotNL:t,dotNV:i}=r,o=e.pow2(),n=t.mul(o.add(o.oneMinus().mul(i.pow2())).sqrt()),s=i.mul(o.add(o.oneMinus().mul(t.pow2())).sqrt());return jd(.5,n.add(s).max(t_))}),iH=X3e,K3e=Mr(r=>{const{alpha:e,dotNH:t}=r,i=e.pow2(),o=t.pow2().mul(i.oneMinus()).oneMinus();return i.div(o.pow2()).mul(1/Math.PI)}),oH=K3e,Y3e=Mr(r=>{const{lightDirection:e,f0:t,f90:i,roughness:o,iridescenceFresnel:n}=r,s=r.normalView||wi,a=o.pow2(),l=e.add(Gi).normalize(),c=s.dot(e).clamp(),u=s.dot(Gi).clamp(),d=s.dot(l).clamp(),h=Gi.dot(l).clamp();let p=Of({f0:t,f90:i,dotVH:h});n&&(p=A2.mix(p,n));const m=iH({alpha:a,dotNL:c,dotNV:u}),g=oH({alpha:a,dotNH:d});return p.mul(m).mul(g)}),ZL=Y3e,J3e=Mr(r=>{const{roughness:e}=r,t=r.dotNV||wi.dot(Gi).clamp(),i=Ir(-1,-.0275,-.572,.022),o=Ir(1,.0425,1.04,-.04),n=e.mul(i).add(o),s=n.x.mul(n.x).min(t.mul(-9.28).exp2()).mul(n.x).add(n.y);return kr(-1.04,1.04).mul(s).add(n.zw)}),QL=J3e,Z3e=Mr(r=>{const{dotNV:e,specularColor:t,specularF90:i,roughness:o}=r,n=QL({dotNV:e,roughness:o});return t.mul(n.x).add(i.mul(n.y))}),Q3e=Z3e,ePe=Mr(({f:r,f90:e,dotVH:t})=>{const i=t.oneMinus().saturate(),o=i.mul(i),n=i.mul(o,o).clamp(0,.9999);return r.sub(Gt(e).mul(n)).div(n.oneMinus())}),nH=ePe,tPe=(r,e)=>{const t=r.pow2(),i=Dt(1).div(t),o=e.pow2().oneMinus().max(.0078125);return Dt(2).add(i).mul(o.pow(i.mul(.5))).div(2*Math.PI)},rPe=(r,e)=>Dt(1).div(Dt(4).mul(e.add(r).sub(e.mul(r)))),iPe=Mr(({lightDirection:r})=>{const e=r.add(Gi).normalize(),t=wi.dot(r).clamp(),i=wi.dot(Gi).clamp(),o=wi.dot(e).clamp(),n=tPe(N2,o),s=rPe(i,t);return vf.mul(n).mul(s)}),oPe=iPe,nPe=ka(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),sPe=r=>{const e=r.sqrt();return Gt(1).add(e).div(Gt(1).sub(e))},sH=(r,e)=>r.sub(e).div(r.add(e)).pow2(),aPe=(r,e)=>{const t=r.mul(2*Math.PI*1e-9),i=Gt(54856e-17,44201e-17,52481e-17),o=Gt(1681e3,1795300,2208400),n=Gt(43278e5,93046e5,66121e5),s=Dt(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let a=i.mul(n.mul(2*Math.PI).sqrt()).mul(o.mul(t).add(e).cos()).mul(t.pow2().negate().mul(n).exp());return a=Gt(a.x.add(s),a.y,a.z).div(10685e-11),nPe.mul(a)},lPe=(r,e,t,i,o)=>{const n=Pn(r,e,Ol(0,.03,i)),s=r.div(n).pow2().mul(Dt(1).sub(t.pow2())),a=Dt(1).sub(s).sqrt(),l=sH(n,r),c=Of({f0:l,f90:1,dotVH:t}),u=c.oneMinus(),d=n.lessThan(r).cond(Math.PI,0),h=Dt(Math.PI).sub(d),p=sPe(o.clamp(0,.9999)),m=sH(p,n.vec3()),g=Of({f0:m,f90:1,dotVH:a}),v=Gt(p.x.lessThan(n).cond(Math.PI,0),p.y.lessThan(n).cond(Math.PI,0),p.z.lessThan(n).cond(Math.PI,0)),y=n.mul(i,a,2),b=Gt(h).add(v),x=c.mul(g).clamp(1e-5,.9999),_=x.sqrt(),S=u.pow2().mul(g).div(Gt(1).sub(x));let w=c.add(S),M=S.sub(u);for(let T=1;T<=2;++T){M=M.mul(_);const E=aPe(Dt(T).mul(y),Dt(T).mul(b)).mul(2);w=w.add(M.mul(E))}return w.max(Gt(0))},cPe=(r,e,t)=>{const i=r.dot(e).saturate(),o=t.pow2(),n=Hc(t.lessThan(.25),Dt(-339.2).mul(o).add(Dt(161.4).mul(t)).sub(25.9),Dt(-8.48).mul(o).add(Dt(14.3).mul(t)).sub(9.95)),s=Hc(t.lessThan(.25),Dt(44).mul(o).sub(Dt(23.7).mul(t)).add(3.26),Dt(1.97).mul(o).sub(Dt(3.27).mul(t)).add(.72));return Hc(t.lessThan(.25),0,Dt(.1).mul(t).sub(.025)).add(n.mul(i).add(s).exp()).mul(1/Math.PI).saturate()},eO=Gt(.04),tO=Gt(1);class uPe extends _2{constructor(e=!0,t=!0,i=!0){super(),this.clearcoat=e,this.sheen=t,this.iridescence=i,this.clearcoatRadiance=null,this.clearcoatSpecular=null,this.sheenSpecular=null,this.iridescenceFresnel=null,this.iridescenceF0=null}init({reflectedLight:e}){if(this.clearcoat===!0){this.clearcoatRadiance=Gt().temp(),this.clearcoatSpecular=Gt().temp();const t=Xd.dot(Gi).clamp(),i=Of({dotVH:t,f0:eO,f90:tO}),o=e.total,n=o.mul(C2.mul(i).oneMinus()).add(this.clearcoatSpecular.mul(C2));o.assign(n)}if(this.sheen===!0){this.sheenSpecular=Gt().temp();const t=e.total,i=vf.r.max(vf.g).max(vf.b).mul(.157).oneMinus(),o=t.mul(i).add(this.sheenSpecular);t.assign(o)}if(this.iridescence===!0){const t=wi.dot(Gi).clamp();this.iridescenceFresnel=lPe(Dt(1),n8,t,s8,ia),this.iridescenceF0=nH({f:this.iridescenceFresnel,f90:1,dotVH:t})}}computeMultiscattering(e,t,i=Dt(1)){const o=QL({roughness:Hd}),n=(this.iridescenceF0?A2.mix(ia,this.iridescenceF0):ia).mul(o.x).add(i.mul(o.y)),s=o.x.add(o.y).oneMinus(),a=ia.add(ia.oneMinus().mul(.047619)),l=n.mul(a).div(s.mul(a).oneMinus());e.addAssign(n),t.addAssign(l.mul(s))}direct({lightDirection:e,lightColor:t,reflectedLight:i}){const o=wi.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecular.addAssign(o.mul(oPe({lightDirection:e}))),this.clearcoat===!0){const n=Xd.dot(e).clamp().mul(t);this.clearcoatSpecular.addAssign(n.mul(ZL({lightDirection:e,f0:eO,f90:tO,roughness:J1,normalView:Xd})))}i.directDiffuse.addAssign(o.mul(v0({diffuseColor:uo.rgb}))),i.directSpecular.addAssign(o.mul(ZL({lightDirection:e,f0:ia,f90:1,roughness:Hd,iridescence:this.iridescence,iridescenceFresnel:this.iridescenceFresnel})))}indirectDiffuse({irradiance:e,reflectedLight:t}){t.indirectDiffuse.addAssign(e.mul(v0({diffuseColor:uo})))}indirectSpecular({radiance:e,iblIrradiance:t,reflectedLight:i}){if(this.sheen===!0&&this.sheenSpecular.addAssign(t.mul(vf,cPe(wi,Gi,N2))),this.clearcoat===!0){const c=Xd.dot(Gi).clamp(),u=Q3e({dotNV:c,specularColor:eO,specularF90:tO,roughness:J1});this.clearcoatSpecular.addAssign(this.clearcoatRadiance.mul(u))}const o=Gt().temp(),n=Gt().temp(),s=t.mul(1/Math.PI);this.computeMultiscattering(o,n);const a=o.add(n),l=uo.mul(a.r.max(a.g).max(a.b).oneMinus());i.indirectSpecular.addAssign(e.mul(o)),i.indirectSpecular.addAssign(n.mul(s)),i.indirectDiffuse.addAssign(l.mul(s))}ambientOcclusion({ambientOcclusion:e,reflectedLight:t}){const i=wi.dot(Gi).clamp().add(e),o=Hd.mul(-16).oneMinus().negate().exp2(),n=e.sub(i.pow(o).oneMinus()).clamp();t.indirectDiffuse.mulAssign(e),t.indirectSpecular.mulAssign(n)}}const rO=uPe,dPe=new Nd;class aH extends To{constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(dPe),this.setValues(e)}setupLightingModel(){return new rO(!1,!1)}setupVariants({stack:e}){const t=this.metalnessNode?Dt(this.metalnessNode):OA;e.assign(E2,t);let i=this.roughnessNode?Dt(this.roughnessNode):LA;i=rH({roughness:i}),e.assign(Hd,i);const o=Pn(Gt(.04),uo.rgb,t);e.assign(ia,o),e.assign(uo,Ir(uo.rgb.mul(t.oneMinus()),uo.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const y0=aH;Bn("MeshStandardNodeMaterial",aH);const hPe=new hf;class lH extends y0{constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.setDefaultValues(hPe),this.setValues(e)}setupLightingModel(){return new rO}setupVariants(e){super.setupVariants(e);const{stack:t}=e,i=this.clearcoatNode?Dt(this.clearcoatNode):$ke,o=this.clearcoatRoughnessNode?Dt(this.clearcoatRoughnessNode):Wke;t.assign(C2,i),t.assign(J1,o);const n=this.sheenNode?Gt(this.sheenNode):T8,s=this.sheenRoughnessNode?Dt(this.sheenRoughnessNode):E8;t.assign(vf,n),t.assign(N2,s);const a=this.iridescenceNode?Dt(this.iridescenceNode):qke,l=this.iridescenceIORNode?Dt(this.iridescenceIORNode):Xke,c=this.iridescenceThicknessNode?Dt(this.iridescenceThicknessNode):Kke;t.assign(A2,a),t.assign(n8,l),t.assign(s8,c)}setupNormal(e){super.setupNormal(e);const t=this.clearcoatNormalNode?Gt(this.clearcoatNormalNode):lIe;e.stack.assign(Xd,t)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,super.copy(e)}}const G_=lH;Bn("MeshPhysicalNodeMaterial",lH);const pPe=new Td;class cH extends To{constructor(e){super(),this.isPointsNodeMaterial=!0,this.lights=!1,this.normals=!1,this.transparent=!0,this.colorNode=null,this.opacityNode=null,this.alphaTestNode=null,this.lightNode=null,this.sizeNode=null,this.positionNode=null,this.setDefaultValues(pPe),this.setValues(e)}copy(e){return this.sizeNode=e.sizeNode,super.copy(e)}}const H_=cH;Bn("PointsNodeMaterial",cH);const fPe=new kc;class uH extends To{constructor(e){super(),this.isSpriteNodeMaterial=!0,this.lights=!1,this.normals=!1,this.colorNode=null,this.opacityNode=null,this.alphaTestNode=null,this.lightNode=null,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues(fPe),this.setValues(e)}setupPosition({object:e,context:t}){const{positionNode:i,rotationNode:o,scaleNode:n}=this,s=ts;let a=zc.mul(Gt(i||0)),l=kr(wf[0].xyz.length(),wf[1].xyz.length());n!==null&&(l=l.mul(n));let c=s.xy;e.center&&e.center.isVector2===!0&&(c=c.sub(Zi(e.center).sub(.5))),c=c.mul(l);const u=Dt(o||kA),d=u.cos(),h=u.sin(),p=kr(kr(d,h.negate()).dot(c),kr(h,d).dot(c));a=Ir(a.xy.add(p),a.zw);const m=Pa.mul(a);return t.vertex=s,m}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}}const j_=uH;Bn("SpriteNodeMaterial",uH);const mPe=Rl.createMaterialFromType;Rl.createMaterialFromType=function(r){const e=Nf(r);return e!==void 0?e:mPe.call(this,r)};class gPe extends Rl{constructor(e){super(e),this.nodes={}}parse(e){const t=super.parse(e),i=this.nodes,o=e.inputNodes;for(const n in o){const s=o[n];t[n]=i[s]}return t}setNodes(e){return this.nodes=e,this}}const $_=gPe;class vPe extends EN{constructor(e){super(e),this._nodesJSON=null}parse(e,t){this._nodesJSON=e.nodes;const i=super.parse(e,t);return this._nodesJSON=null,i}parseNodes(e,t){if(e!==void 0){const i=new XG;return i.setTextures(t),i.parseNodes(e)}return{}}parseMaterials(e,t){const i={};if(e!==void 0){const o=this.parseNodes(this._nodesJSON,t),n=new $_;n.setTextures(t),n.setNodes(o);for(let s=0,a=e.length;s<a;s++){const l=e[s];i[l.uuid]=n.parse(l)}}return i}}const yPe=vPe;class bPe{parseFunction(){console.warn("Abstract function.")}}const dH=bPe;class hH{constructor(e,t,i="",o=""){this.type=e,this.inputs=t,this.name=i,this.presicion=o}getCode(){console.warn("Abstract function.")}}hH.isNodeFunction=!0;const pH=hH,xPe=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,_Pe=/[a-z_0-9]+/ig,fH="#pragma main",wPe=r=>{r=r.trim();const e=r.indexOf(fH),t=e!==-1?r.slice(e+fH.length):r,i=t.match(xPe);if(i!==null&&i.length===5){const o=i[4],n=[];let s=null;for(;(s=_Pe.exec(o))!==null;)n.push(s);const a=[];let l=0;for(;l<n.length;){const m=n[l][0]==="const";m===!0&&l++;let g=n[l][0];g==="in"||g==="out"||g==="inout"?l++:g="";const v=n[l++][0];let y=Number.parseInt(n[l][0]);Number.isNaN(y)===!1?l++:y=null;const b=n[l++][0];a.push(new L_(v,b,y,g,m))}const c=t.substring(i[0].length),u=i[3]!==void 0?i[3]:"",d=i[2],h=i[1]!==void 0?i[1]:"",p=e!==-1?r.slice(0,e):"";return{type:d,inputs:a,name:u,presicion:h,inputsCode:o,blockCode:c,headerCode:p}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class SPe extends pH{constructor(e){const{type:t,inputs:i,name:o,presicion:n,inputsCode:s,blockCode:a,headerCode:l}=wPe(e);super(t,i,o,n),this.inputsCode=s,this.blockCode=a,this.headerCode=l}getCode(e=this.name){let t;const i=this.blockCode;if(i!==""){const{type:o,inputsCode:n,headerCode:s,presicion:a}=this;let l=`${o} ${e} ( ${n.trim()} )`;a!==""&&(l=`${a} ${l}`),t=s+l+i}else t="";return t}}const MPe=SPe;class TPe extends dH{parseFunction(e){return new MPe(e)}}const iO=TPe,EPe=_L(`float mx_select(bool b, float t, float f)
{
    return b ? t : f;
}

float mx_negate_if(float val, bool b)
{
    return b ? -val : val;
}

int mx_floor(float x)
{
    return int(floor(x));
}

// return mx_floor as well as the fractional remainder
float mx_floorfrac(float x, out int i)
{
    i = mx_floor(x);
    return x - float(i);
}

float mx_bilerp(float v0, float v1, float v2, float v3, float s, float t)
{
    float s1 = 1.0 - s;
    return (1.0 - t) * (v0*s1 + v1*s) + t * (v2*s1 + v3*s);
}
vec3 mx_bilerp(vec3 v0, vec3 v1, vec3 v2, vec3 v3, float s, float t)
{
    float s1 = 1.0 - s;
    return (1.0 - t) * (v0*s1 + v1*s) + t * (v2*s1 + v3*s);
}
float mx_trilerp(float v0, float v1, float v2, float v3, float v4, float v5, float v6, float v7, float s, float t, float r)
{
    float s1 = 1.0 - s;
    float t1 = 1.0 - t;
    float r1 = 1.0 - r;
    return (r1*(t1*(v0*s1 + v1*s) + t*(v2*s1 + v3*s)) +
            r*(t1*(v4*s1 + v5*s) + t*(v6*s1 + v7*s)));
}
vec3 mx_trilerp(vec3 v0, vec3 v1, vec3 v2, vec3 v3, vec3 v4, vec3 v5, vec3 v6, vec3 v7, float s, float t, float r)
{
    float s1 = 1.0 - s;
    float t1 = 1.0 - t;
    float r1 = 1.0 - r;
    return (r1*(t1*(v0*s1 + v1*s) + t*(v2*s1 + v3*s)) +
            r*(t1*(v4*s1 + v5*s) + t*(v6*s1 + v7*s)));
}

// 2 and 3 dimensional gradient functions - perform a dot product against a
// randomly chosen vector. Note that the gradient vector is not normalized, but
// this only affects the overal "scale" of the result, so we simply account for
// the scale by multiplying in the corresponding "perlin" function.
float mx_gradient_float(uint hash, float x, float y)
{
    // 8 possible directions (+-1,+-2) and (+-2,+-1)
    uint h = hash & 7u;
    float u = mx_select(h<4u, x, y);
    float v = 2.0 * mx_select(h<4u, y, x);
    // compute the dot product with (x,y).
    return mx_negate_if(u, bool(h&1u)) + mx_negate_if(v, bool(h&2u));
}
float mx_gradient_float(uint hash, float x, float y, float z)
{
    // use vectors pointing to the edges of the cube
    uint h = hash & 15u;
    float u = mx_select(h<8u, x, y);
    float v = mx_select(h<4u, y, mx_select((h==12u)||(h==14u), x, z));
    return mx_negate_if(u, bool(h&1u)) + mx_negate_if(v, bool(h&2u));
}
vec3 mx_gradient_vec3(uvec3 hash, float x, float y)
{
    return vec3(mx_gradient_float(hash.x, x, y), mx_gradient_float(hash.y, x, y), mx_gradient_float(hash.z, x, y));
}
vec3 mx_gradient_vec3(uvec3 hash, float x, float y, float z)
{
    return vec3(mx_gradient_float(hash.x, x, y, z), mx_gradient_float(hash.y, x, y, z), mx_gradient_float(hash.z, x, y, z));
}
// Scaling factors to normalize the result of gradients above.
// These factors were experimentally calculated to be:
//    2D:   0.6616
//    3D:   0.9820
float mx_gradient_scale2d(float v) { return 0.6616 * v; }
float mx_gradient_scale3d(float v) { return 0.9820 * v; }
vec3 mx_gradient_scale2d(vec3 v) { return 0.6616 * v; }
vec3 mx_gradient_scale3d(vec3 v) { return 0.9820 * v; }

/// Bitwise circular rotation left by k bits (for 32 bit unsigned integers)
uint mx_rotl32(uint x, int k)
{
    return (x<<k) | (x>>(32-k));
}

void mx_bjmix(inout uint a, inout uint b, inout uint c)
{
    a -= c; a ^= mx_rotl32(c, 4); c += b;
    b -= a; b ^= mx_rotl32(a, 6); a += c;
    c -= b; c ^= mx_rotl32(b, 8); b += a;
    a -= c; a ^= mx_rotl32(c,16); c += b;
    b -= a; b ^= mx_rotl32(a,19); a += c;
    c -= b; c ^= mx_rotl32(b, 4); b += a;
}

// Mix up and combine the bits of a, b, and c (doesn't change them, but
// returns a hash of those three original values).
uint mx_bjfinal(uint a, uint b, uint c)
{
    c ^= b; c -= mx_rotl32(b,14);
    a ^= c; a -= mx_rotl32(c,11);
    b ^= a; b -= mx_rotl32(a,25);
    c ^= b; c -= mx_rotl32(b,16);
    a ^= c; a -= mx_rotl32(c,4);
    b ^= a; b -= mx_rotl32(a,14);
    c ^= b; c -= mx_rotl32(b,24);
    return c;
}

// Convert a 32 bit integer into a floating point number in [0,1]
float mx_bits_to_01(uint bits)
{
    return float(bits) / float(uint(0xffffffff));
}

float mx_fade(float t)
{
   return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}

uint mx_hash_int(int x)
{
    uint len = 1u;
    uint seed = uint(0xdeadbeef) + (len << 2u) + 13u;
    return mx_bjfinal(seed+uint(x), seed, seed);
}

uint mx_hash_int(int x, int y)
{
    uint len = 2u;
    uint a, b, c;
    a = b = c = uint(0xdeadbeef) + (len << 2u) + 13u;
    a += uint(x);
    b += uint(y);
    return mx_bjfinal(a, b, c);
}

uint mx_hash_int(int x, int y, int z)
{
    uint len = 3u;
    uint a, b, c;
    a = b = c = uint(0xdeadbeef) + (len << 2u) + 13u;
    a += uint(x);
    b += uint(y);
    c += uint(z);
    return mx_bjfinal(a, b, c);
}

uint mx_hash_int(int x, int y, int z, int xx)
{
    uint len = 4u;
    uint a, b, c;
    a = b = c = uint(0xdeadbeef) + (len << 2u) + 13u;
    a += uint(x);
    b += uint(y);
    c += uint(z);
    mx_bjmix(a, b, c);
    a += uint(xx);
    return mx_bjfinal(a, b, c);
}

uint mx_hash_int(int x, int y, int z, int xx, int yy)
{
    uint len = 5u;
    uint a, b, c;
    a = b = c = uint(0xdeadbeef) + (len << 2u) + 13u;
    a += uint(x);
    b += uint(y);
    c += uint(z);
    mx_bjmix(a, b, c);
    a += uint(xx);
    b += uint(yy);
    return mx_bjfinal(a, b, c);
}

uvec3 mx_hash_vec3(int x, int y)
{
    uint h = mx_hash_int(x, y);
    // we only need the low-order bits to be random, so split out
    // the 32 bit result into 3 parts for each channel
    uvec3 result;
    result.x = (h      ) & 0xFFu;
    result.y = (h >> 8 ) & 0xFFu;
    result.z = (h >> 16) & 0xFFu;
    return result;
}

uvec3 mx_hash_vec3(int x, int y, int z)
{
    uint h = mx_hash_int(x, y, z);
    // we only need the low-order bits to be random, so split out
    // the 32 bit result into 3 parts for each channel
    uvec3 result;
    result.x = (h      ) & 0xFFu;
    result.y = (h >> 8 ) & 0xFFu;
    result.z = (h >> 16) & 0xFFu;
    return result;
}

float mx_perlin_noise_float(vec2 p)
{
    int X, Y;
    float fx = mx_floorfrac(p.x, X);
    float fy = mx_floorfrac(p.y, Y);
    float u = mx_fade(fx);
    float v = mx_fade(fy);
    float result = mx_bilerp(
        mx_gradient_float(mx_hash_int(X  , Y  ), fx    , fy     ),
        mx_gradient_float(mx_hash_int(X+1, Y  ), fx-1.0, fy     ),
        mx_gradient_float(mx_hash_int(X  , Y+1), fx    , fy-1.0),
        mx_gradient_float(mx_hash_int(X+1, Y+1), fx-1.0, fy-1.0),
        u, v);
    return mx_gradient_scale2d(result);
}

float mx_perlin_noise_float(vec3 p)
{
    int X, Y, Z;
    float fx = mx_floorfrac(p.x, X);
    float fy = mx_floorfrac(p.y, Y);
    float fz = mx_floorfrac(p.z, Z);
    float u = mx_fade(fx);
    float v = mx_fade(fy);
    float w = mx_fade(fz);
    float result = mx_trilerp(
        mx_gradient_float(mx_hash_int(X  , Y  , Z  ), fx    , fy    , fz     ),
        mx_gradient_float(mx_hash_int(X+1, Y  , Z  ), fx-1.0, fy    , fz     ),
        mx_gradient_float(mx_hash_int(X  , Y+1, Z  ), fx    , fy-1.0, fz     ),
        mx_gradient_float(mx_hash_int(X+1, Y+1, Z  ), fx-1.0, fy-1.0, fz     ),
        mx_gradient_float(mx_hash_int(X  , Y  , Z+1), fx    , fy    , fz-1.0),
        mx_gradient_float(mx_hash_int(X+1, Y  , Z+1), fx-1.0, fy    , fz-1.0),
        mx_gradient_float(mx_hash_int(X  , Y+1, Z+1), fx    , fy-1.0, fz-1.0),
        mx_gradient_float(mx_hash_int(X+1, Y+1, Z+1), fx-1.0, fy-1.0, fz-1.0),
        u, v, w);
    return mx_gradient_scale3d(result);
}

vec3 mx_perlin_noise_vec3(vec2 p)
{
    int X, Y;
    float fx = mx_floorfrac(p.x, X);
    float fy = mx_floorfrac(p.y, Y);
    float u = mx_fade(fx);
    float v = mx_fade(fy);
    vec3 result = mx_bilerp(
        mx_gradient_vec3(mx_hash_vec3(X  , Y  ), fx    , fy     ),
        mx_gradient_vec3(mx_hash_vec3(X+1, Y  ), fx-1.0, fy     ),
        mx_gradient_vec3(mx_hash_vec3(X  , Y+1), fx    , fy-1.0),
        mx_gradient_vec3(mx_hash_vec3(X+1, Y+1), fx-1.0, fy-1.0),
        u, v);
    return mx_gradient_scale2d(result);
}

vec3 mx_perlin_noise_vec3(vec3 p)
{
    int X, Y, Z;
    float fx = mx_floorfrac(p.x, X);
    float fy = mx_floorfrac(p.y, Y);
    float fz = mx_floorfrac(p.z, Z);
    float u = mx_fade(fx);
    float v = mx_fade(fy);
    float w = mx_fade(fz);
    vec3 result = mx_trilerp(
        mx_gradient_vec3(mx_hash_vec3(X  , Y  , Z  ), fx    , fy    , fz     ),
        mx_gradient_vec3(mx_hash_vec3(X+1, Y  , Z  ), fx-1.0, fy    , fz     ),
        mx_gradient_vec3(mx_hash_vec3(X  , Y+1, Z  ), fx    , fy-1.0, fz     ),
        mx_gradient_vec3(mx_hash_vec3(X+1, Y+1, Z  ), fx-1.0, fy-1.0, fz     ),
        mx_gradient_vec3(mx_hash_vec3(X  , Y  , Z+1), fx    , fy    , fz-1.0),
        mx_gradient_vec3(mx_hash_vec3(X+1, Y  , Z+1), fx-1.0, fy    , fz-1.0),
        mx_gradient_vec3(mx_hash_vec3(X  , Y+1, Z+1), fx    , fy-1.0, fz-1.0),
        mx_gradient_vec3(mx_hash_vec3(X+1, Y+1, Z+1), fx-1.0, fy-1.0, fz-1.0),
        u, v, w);
    return mx_gradient_scale3d(result);
}

float mx_cell_noise_float(float p)
{
    int ix = mx_floor(p);
    return mx_bits_to_01(mx_hash_int(ix));
}

float mx_cell_noise_float(vec2 p)
{
    int ix = mx_floor(p.x);
    int iy = mx_floor(p.y);
    return mx_bits_to_01(mx_hash_int(ix, iy));
}

float mx_cell_noise_float(vec3 p)
{
    int ix = mx_floor(p.x);
    int iy = mx_floor(p.y);
    int iz = mx_floor(p.z);
    return mx_bits_to_01(mx_hash_int(ix, iy, iz));
}

float mx_cell_noise_float(vec4 p)
{
    int ix = mx_floor(p.x);
    int iy = mx_floor(p.y);
    int iz = mx_floor(p.z);
    int iw = mx_floor(p.w);
    return mx_bits_to_01(mx_hash_int(ix, iy, iz, iw));
}

vec3 mx_cell_noise_vec3(float p)
{
    int ix = mx_floor(p);
    return vec3(
            mx_bits_to_01(mx_hash_int(ix, 0)),
            mx_bits_to_01(mx_hash_int(ix, 1)),
            mx_bits_to_01(mx_hash_int(ix, 2))
    );
}

vec3 mx_cell_noise_vec3(vec2 p)
{
    int ix = mx_floor(p.x);
    int iy = mx_floor(p.y);
    return vec3(
            mx_bits_to_01(mx_hash_int(ix, iy, 0)),
            mx_bits_to_01(mx_hash_int(ix, iy, 1)),
            mx_bits_to_01(mx_hash_int(ix, iy, 2))
    );
}

vec3 mx_cell_noise_vec3(vec3 p)
{
    int ix = mx_floor(p.x);
    int iy = mx_floor(p.y);
    int iz = mx_floor(p.z);
    return vec3(
            mx_bits_to_01(mx_hash_int(ix, iy, iz, 0)),
            mx_bits_to_01(mx_hash_int(ix, iy, iz, 1)),
            mx_bits_to_01(mx_hash_int(ix, iy, iz, 2))
    );
}

vec3 mx_cell_noise_vec3(vec4 p)
{
    int ix = mx_floor(p.x);
    int iy = mx_floor(p.y);
    int iz = mx_floor(p.z);
    int iw = mx_floor(p.w);
    return vec3(
            mx_bits_to_01(mx_hash_int(ix, iy, iz, iw, 0)),
            mx_bits_to_01(mx_hash_int(ix, iy, iz, iw, 1)),
            mx_bits_to_01(mx_hash_int(ix, iy, iz, iw, 2))
    );
}

float mx_fractal_noise_float(vec3 p, int octaves, float lacunarity, float diminish)
{
    float result = 0.0;
    float amplitude = 1.0;
    for (int i = 0;  i < octaves; ++i)
    {
        result += amplitude * mx_perlin_noise_float(p);
        amplitude *= diminish;
        p *= lacunarity;
    }
    return result;
}

vec3 mx_fractal_noise_vec3(vec3 p, int octaves, float lacunarity, float diminish)
{
    vec3 result = vec3(0.0);
    float amplitude = 1.0;
    for (int i = 0;  i < octaves; ++i)
    {
        result += amplitude * mx_perlin_noise_vec3(p);
        amplitude *= diminish;
        p *= lacunarity;
    }
    return result;
}

vec2 mx_fractal_noise_vec2(vec3 p, int octaves, float lacunarity, float diminish)
{
    return vec2(mx_fractal_noise_float(p, octaves, lacunarity, diminish),
                mx_fractal_noise_float(p+vec3(19, 193, 17), octaves, lacunarity, diminish));
}

vec4 mx_fractal_noise_vec4(vec3 p, int octaves, float lacunarity, float diminish)
{
    vec3  c = mx_fractal_noise_vec3(p, octaves, lacunarity, diminish);
    float f = mx_fractal_noise_float(p+vec3(19, 193, 17), octaves, lacunarity, diminish);
    return vec4(c, f);
}

float mx_worley_distance(vec2 p, int x, int y, int xoff, int yoff, float jitter, int metric)
{
    vec3  tmp = mx_cell_noise_vec3(vec2(x+xoff, y+yoff));
    vec2  off = vec2(tmp.x, tmp.y);

    off -= 0.5f;
    off *= jitter;
    off += 0.5f;

    vec2 cellpos = vec2(float(x), float(y)) + off;
    vec2 diff = cellpos - p;
    if (metric == 2)
        return abs(diff.x) + abs(diff.y);       // Manhattan distance
    if (metric == 3)
        return max(abs(diff.x), abs(diff.y));   // Chebyshev distance
    // Either Euclidian or Distance^2
    return dot(diff, diff);
}

float mx_worley_distance(vec3 p, int x, int y, int z, int xoff, int yoff, int zoff, float jitter, int metric)
{
    vec3  off = mx_cell_noise_vec3(vec3(x+xoff, y+yoff, z+zoff));

    off -= 0.5f;
    off *= jitter;
    off += 0.5f;

    vec3 cellpos = vec3(float(x), float(y), float(z)) + off;
    vec3 diff = cellpos - p;
    if (metric == 2)
        return abs(diff.x) + abs(diff.y) + abs(diff.z); // Manhattan distance
    if (metric == 3)
        return max(max(abs(diff.x), abs(diff.y)), abs(diff.z)); // Chebyshev distance
    // Either Euclidian or Distance^2
    return dot(diff, diff);
}

float mx_worley_noise_float(vec2 p, float jitter, int metric)
{
    int X, Y;
    vec2 localpos = vec2(mx_floorfrac(p.x, X), mx_floorfrac(p.y, Y));
    float sqdist = 1e6f;        // Some big number for jitter > 1 (not all GPUs may be IEEE)
    for (int x = -1; x <= 1; ++x)
    {
        for (int y = -1; y <= 1; ++y)
        {
            float dist = mx_worley_distance(localpos, x, y, X, Y, jitter, metric);
            sqdist = min(sqdist, dist);
        }
    }
    if (metric == 0)
        sqdist = sqrt(sqdist);
    return sqdist;
}

vec2 mx_worley_noise_vec2(vec2 p, float jitter, int metric)
{
    int X, Y;
    vec2 localpos = vec2(mx_floorfrac(p.x, X), mx_floorfrac(p.y, Y));
    vec2 sqdist = vec2(1e6f, 1e6f);
    for (int x = -1; x <= 1; ++x)
    {
        for (int y = -1; y <= 1; ++y)
        {
            float dist = mx_worley_distance(localpos, x, y, X, Y, jitter, metric);
            if (dist < sqdist.x)
            {
                sqdist.y = sqdist.x;
                sqdist.x = dist;
            }
            else if (dist < sqdist.y)
            {
                sqdist.y = dist;
            }
        }
    }
    if (metric == 0)
        sqdist = sqrt(sqdist);
    return sqdist;
}

vec3 mx_worley_noise_vec3(vec2 p, float jitter, int metric)
{
    int X, Y;
    vec2 localpos = vec2(mx_floorfrac(p.x, X), mx_floorfrac(p.y, Y));
    vec3 sqdist = vec3(1e6f, 1e6f, 1e6f);
    for (int x = -1; x <= 1; ++x)
    {
        for (int y = -1; y <= 1; ++y)
        {
            float dist = mx_worley_distance(localpos, x, y, X, Y, jitter, metric);
            if (dist < sqdist.x)
            {
                sqdist.z = sqdist.y;
                sqdist.y = sqdist.x;
                sqdist.x = dist;
            }
            else if (dist < sqdist.y)
            {
                sqdist.z = sqdist.y;
                sqdist.y = dist;
            }
            else if (dist < sqdist.z)
            {
                sqdist.z = dist;
            }
        }
    }
    if (metric == 0)
        sqdist = sqrt(sqdist);
    return sqdist;
}

float mx_worley_noise_float(vec3 p, float jitter, int metric)
{
    int X, Y, Z;
    vec3 localpos = vec3(mx_floorfrac(p.x, X), mx_floorfrac(p.y, Y), mx_floorfrac(p.z, Z));
    float sqdist = 1e6f;
    for (int x = -1; x <= 1; ++x)
    {
        for (int y = -1; y <= 1; ++y)
        {
            for (int z = -1; z <= 1; ++z)
            {
                float dist = mx_worley_distance(localpos, x, y, z, X, Y, Z, jitter, metric);
                sqdist = min(sqdist, dist);
            }
        }
    }
    if (metric == 0)
        sqdist = sqrt(sqdist);
    return sqdist;
}

vec2 mx_worley_noise_vec2(vec3 p, float jitter, int metric)
{
    int X, Y, Z;
    vec3 localpos = vec3(mx_floorfrac(p.x, X), mx_floorfrac(p.y, Y), mx_floorfrac(p.z, Z));
    vec2 sqdist = vec2(1e6f, 1e6f);
    for (int x = -1; x <= 1; ++x)
    {
        for (int y = -1; y <= 1; ++y)
        {
            for (int z = -1; z <= 1; ++z)
            {
                float dist = mx_worley_distance(localpos, x, y, z, X, Y, Z, jitter, metric);
                if (dist < sqdist.x)
                {
                    sqdist.y = sqdist.x;
                    sqdist.x = dist;
                }
                else if (dist < sqdist.y)
                {
                    sqdist.y = dist;
                }
            }
        }
    }
    if (metric == 0)
        sqdist = sqrt(sqdist);
    return sqdist;
}

vec3 mx_worley_noise_vec3(vec3 p, float jitter, int metric)
{
    int X, Y, Z;
    vec3 localpos = vec3(mx_floorfrac(p.x, X), mx_floorfrac(p.y, Y), mx_floorfrac(p.z, Z));
    vec3 sqdist = vec3(1e6f, 1e6f, 1e6f);
    for (int x = -1; x <= 1; ++x)
    {
        for (int y = -1; y <= 1; ++y)
        {
            for (int z = -1; z <= 1; ++z)
            {
                float dist = mx_worley_distance(localpos, x, y, z, X, Y, Z, jitter, metric);
                if (dist < sqdist.x)
                {
                    sqdist.z = sqdist.y;
                    sqdist.y = sqdist.x;
                    sqdist.x = dist;
                }
                else if (dist < sqdist.y)
                {
                    sqdist.z = sqdist.y;
                    sqdist.y = dist;
                }
                else if (dist < sqdist.z)
                {
                    sqdist.z = dist;
                }
            }
        }
    }
    if (metric == 0)
        sqdist = sqrt(sqdist);
    return sqdist;
}`),aa=[EPe],mH=un("float mx_perlin_noise_float( any p )",aa),CPe=un("vec2 mx_perlin_noise_vec2( any p )",aa),gH=un("vec3 mx_perlin_noise_vec3( any p )",aa),NPe=un("float mx_cell_noise_float( vec3 p )",aa),APe=un("float mx_worley_noise_float( any p, float jitter, int metric )",aa),RPe=un("float mx_worley_noise_vec2( any p, float jitter, int metric )",aa),LPe=un("float mx_worley_noise_vec3( any p, float jitter, int metric )",aa),OPe=un("float mx_fractal_noise_float( vec3 p, int octaves, float lacunarity, float diminish )",aa),kPe=un("float mx_fractal_noise_vec2( vec3 p, int octaves, float lacunarity, float diminish )",aa),IPe=un("float mx_fractal_noise_vec3( vec3 p, int octaves, float lacunarity, float diminish )",aa),PPe=un("float mx_fractal_noise_vec4( vec3 p, int octaves, float lacunarity, float diminish )",aa),vH=un(`vec3 mx_hsvtorgb(vec3 hsv)
{
    // Reference for this technique: Foley & van Dam
    float h = hsv.x; float s = hsv.y; float v = hsv.z;
    if (s < 0.0001f) {
      return vec3 (v, v, v);
    } else {
        h = 6.0f * (h - floor(h));  // expand to [0..6)
        int hi = int(trunc(h));
        float f = h - float(hi);
        float p = v * (1.0f-s);
        float q = v * (1.0f-s*f);
        float t = v * (1.0f-s*(1.0f-f));
        if (hi == 0)
            return vec3 (v, t, p);
        else if (hi == 1)
            return vec3 (q, v, p);
        else if (hi == 2)
            return vec3 (p, v, t);
        else if (hi == 3)
            return vec3 (p, q, v);
        else if (hi == 4)
            return vec3 (t, p, v);
        return vec3 (v, p, q);
    }
}`),yH=un(`vec3 mx_rgbtohsv(vec3 c)
{
    // See Foley & van Dam
    float r = c.x; float g = c.y; float b = c.z;
    float mincomp = min (r, min(g, b));
    float maxcomp = max (r, max(g, b));
    float delta = maxcomp - mincomp;  // chroma
    float h, s, v;
    v = maxcomp;
    if (maxcomp > 0.0f)
        s = delta / maxcomp;
    else s = 0.0f;
    if (s <= 0.0f)
        h = 0.0f;
    else {
        if      (r >= maxcomp) h = (g-b) / delta;
        else if (g >= maxcomp) h = 2.0f + (b-r) / delta;
        else                   h = 4.0f + (r-g) / delta;
        h *= (1.0f/6.0f);
        if (h < 0.0f)
            h += 1.0f;
    }
    return vec3(h, s, v);
}`),DPe=_L(`#define M_AP1_TO_REC709 mat3(1.705079555511475, -0.1297005265951157, -0.02416634373366833, -0.6242334842681885, 1.138468623161316, -0.1246141716837883, -0.0808461606502533, -0.008768022060394287, 1.148780584335327)

vec3 mx_srgb_texture_to_lin_rec709(vec3 color)
{
    bvec3 isAbove = greaterThan(color, vec3(0.04045));
    vec3 linSeg = color / 12.92;
    vec3 powSeg = pow(max(color + vec3(0.055), vec3(0.0)) / 1.055, vec3(2.4));
    return mix(linSeg, powSeg, isAbove);
}`),BPe=[DPe],FPe=un("vec3 mx_srgb_texture_to_lin_rec709( vec3 color )",BPe),bH=(r,e)=>{r=Dt(r),e=Dt(e);const t=kr(e.dFdx(),e.dFdy()).length().mul(.7071067811865476);return Ol(r.sub(t),r.add(t),e)},xH=(r,e,t,i)=>Pn(r,e,t[i].clamp()),_H=(r,e,t=ui())=>xH(r,e,t,"x"),wH=(r,e,t=ui())=>xH(r,e,t,"y"),SH=(r,e,t,i,o)=>Pn(r,e,bH(t,i[o])),UPe=(r,e,t,i=ui())=>SH(r,e,t,i,"x"),zPe=(r,e,t,i=ui())=>SH(r,e,t,i,"y"),MH=(r=1,e=0,t=ui())=>t.mul(r).add(e),VPe=(r,e=1)=>(r=Dt(r),r.abs().pow(e).mul(r.sign())),GPe=(r,e=1,t=.5)=>Dt(r).sub(t).mul(e).add(t),TH=(r=ui(),e=1,t=0)=>mH(r.convert("vec2|vec3")).mul(e).add(t),EH=(r=ui(),e=1,t=0)=>CPe(r.convert("vec2|vec3")).mul(e).add(t),CH=(r=ui(),e=1,t=0)=>gH(r.convert("vec2|vec3")).mul(e).add(t),NH=(r=ui(),e=1,t=0)=>(r=r.convert("vec2|vec3"),Ir(gH(r),mH(r.add(kr(19,73)))).mul(e).add(t)),AH=(r=ui(),e=1)=>APe(r.convert("vec2|vec3"),e,1),RH=(r=ui(),e=1)=>RPe(r.convert("vec2|vec3"),e,1),LH=(r=ui(),e=1)=>LPe(r.convert("vec2|vec3"),e,1),OH=(r=ui())=>NPe(r.convert("vec2|vec3")),kH=(r=ui(),e=3,t=2,i=.5,o=1)=>OPe(r,e,t,i).mul(o),IH=(r=ui(),e=3,t=2,i=.5,o=1)=>kPe(r,e,t,i).mul(o),PH=(r=ui(),e=3,t=2,i=.5,o=1)=>IPe(r,e,t,i).mul(o),DH=(r=ui(),e=3,t=2,i=.5,o=1)=>PPe(r,e,t,i).mul(o),b0=Object.freeze(Object.defineProperty({__proto__:null,AONode:sR,AmbientLightNode:T3e,AnalyticLightNode:Gc,ArrayElementNode:Kv,ArrayUniformNode:i8,AttributeNode:q1,BRDF_GGX:ZL,BRDF_Lambert:v0,BitangentNode:Fa,BlendModeNode:za,BufferAttributeNode:cIe,BufferNode:__,BumpMapNode:sIe,BypassNode:v2,CacheNode:b2,CameraNode:Il,CheckerNode:XL,CodeNode:Va,ColorAdjustmentNode:jc,ColorSpaceNode:kl,ComputeNode:BL,CondNode:N_,ConstNode:hr,ContextNode:Gd,ConvertNode:Yv,CubeTextureNode:iR,DFGApprox:QL,D_GGX:oH,DirectionalLightNode:_3e,DiscardNode:zIe,EPSILON:t_,EnvironmentNode:fR,EquirectUVNode:cR,ExpressionNode:MA,ExtendedMaterialNode:aIe,F_Schlick:Of,FogExp2Node:OL,FogNode:m0,FogRangeNode:RL,FrontFacingNode:zA,FunctionCallNode:Dl,FunctionNode:zG,GLSLNodeParser:iO,HashNode:UIe,HemisphereLightNode:qG,IESSpotLightNode:M3e,INFINITY:u8,IndexNode:Nke,InstanceNode:H8,JoinNode:H5,LightNode:x3e,LightingContextNode:Q8,LightingModel:_2,LightingNode:l0,LightsNode:c0,Line2NodeMaterial:O3e,LineBasicNodeMaterial:V_,LineDashedNodeMaterial:R3e,LineMaterialNode:GIe,LoopNode:NIe,MatcapUVNode:ER,MaterialNode:bi,MaterialReferenceNode:NA,MathNode:dt,MaxMipLevelNode:dR,MeshBasicNodeMaterial:g0,MeshLambertNodeMaterial:H3e,MeshNormalNodeMaterial:I3e,MeshPhongNodeMaterial:$3e,MeshPhysicalNodeMaterial:G_,MeshStandardNodeMaterial:y0,ModelNode:po,ModelViewProjectionNode:qA,MorphNode:uIe,Node:qt,NodeAttribute:K1,NodeBuilder:R_,NodeCache:X1,NodeCode:M2,NodeFrame:u0,NodeFunctionInput:L_,NodeKeywords:T2,NodeLoader:XG,NodeMaterial:To,NodeMaterialLoader:$_,NodeObjectLoader:yPe,NodeShaderStage:PN,NodeType:cke,NodeUniform:w2,NodeUpdateType:Qr,NodeUtils:uke,NodeVar:Y1,NodeVarying:S2,NormalMapNode:HA,NormalNode:Pl,Object3DNode:Oi,OperatorNode:Pr,OscNode:Ua,OutputStructNode:BIe,PackingNode:VIe,PhongLightingModel:YL,PhysicalLightingModel:rO,PointLightNode:$G,PointUVNode:WR,PointsNodeMaterial:H_,PositionNode:Dn,PosterizeNode:sL,PropertyNode:ra,RangeNode:PL,ReferenceNode:n0,ReflectVectorNode:eR,RemapNode:k_,RotateUVNode:OR,SceneNode:$Ie,Schlick_to_F0:nH,ScriptableNode:b3e,ScriptableValueNode:v3e,SetNode:W5,ShaderNode:Oa,SkinningNode:$8,SpecularMIPLevelNode:pR,SplitNode:H1,SpotLightNode:WG,SpriteNodeMaterial:j_,SpriteSheetUVNode:PR,StackNode:iG,StorageBufferNode:qR,TBNViewMatrix:jA,TangentNode:Ba,TempNode:Li,TextureBicubicNode:jIe,TextureNode:_f,TextureStoreNode:WIe,TimerNode:Af,ToneMappingNode:cL,TriplanarTexturesNode:I_,UVNode:L2,UniformNode:gr,UserDataNode:RG,V_GGX_SmithCorrelated:iH,VarNode:f_,VaryingNode:f2,ViewportDepthNode:d3e,ViewportDepthTextureNode:l3e,ViewportNode:Fn,ViewportSharedTextureNode:a3e,ViewportTextureNode:fL,abs:bf,acos:iA,add:sn,addLightNode:Yd,addNodeClass:ut,addNodeElement:Je,addNodeMaterial:Bn,and:F2,arrayBuffer:t8,asin:rA,assign:e_,atan:oA,atan2:uA,attribute:nn,backgroundBlurriness:CG,backgroundIntensity:NG,bitAnd:V2,bitOr:G2,bitXor:H2,bitangentGeometry:I8,bitangentLocal:P8,bitangentView:BA,bitangentWorld:D8,bmat3:s2,bmat4:c2,bool:XN,buffer:w_,bufferAttribute:a0,bumpMap:F8,burn:YR,bvec2:JN,bvec3:e2,bvec4:i2,bypass:Qv,cache:e0,call:SL,cameraFar:h_,cameraNear:d_,cameraNormalMatrix:C8,cameraPosition:A8,cameraProjectionMatrix:Pa,cameraViewMatrix:Da,cameraWorldMatrix:N8,ceil:r_,checker:KL,clamp:xf,code:p0,color:Q5,colorSpaceToLinear:a_,colorToDirection:gG,compute:FL,cond:Hc,context:es,convert:d2,cos:eA,createNodeFromType:zN,createNodeMaterialFromType:Nf,cross:vA,cubeTexture:Kd,dFdx:i_,dFdy:o_,defaultBuildStages:D5,defaultShaderStages:mf,degrees:q2,densityFog:kL,depth:h3e,depthTexture:p3e,difference:gA,diffuseColor:uo,directionToColor:NR,discard:aG,distance:mA,div:jd,dodge:JR,dot:Ll,dynamicBufferAttribute:z8,element:u2,equal:k2,equirectUV:Cf,exp:X2,exp2:K2,expression:$d,faceDirection:y_,faceForward:g8,float:Dt,floor:i0,fog:NL,fract:o0,frameId:dG,frontFacing:VA,fwidth:f8,getConstNodeType:Z5,getDistanceAttenuation:zL,getGeometryRoughness:JL,getRoughness:rH,global:U_,glsl:_L,glslFn:un,greaterThan:P2,greaterThanEqual:B2,hash:sG,hue:rL,imat3:o2,imat4:a2,instance:j8,instanceIndex:o8,instancedBufferAttribute:V8,instancedDynamicBufferAttribute:G8,int:Zv,inverseSqrt:d8,ivec2:KN,ivec3:ZN,ivec4:t2,js:f3e,label:t0,length:sA,lessThan:I2,lessThanEqual:D2,lightTargetDirection:UL,lightingContext:M_,lights:Y8,lightsWithoutWrap:J8,linearToColorSpace:b8,linearTosRGB:x8,log:Y2,log2:J2,loop:yR,lumaCoeffs:iL,luminance:oL,mat3:ka,mat4:W1,matcapUV:lG,materialAlphaTest:AA,materialColor:l_,materialEmissive:RA,materialLineDashOffset:UR,materialLineDashSize:zR,materialLineGapSize:VR,materialLineScale:P_,materialLineWidth:Rf,materialMetalness:OA,materialNormal:U8,materialOpacity:c_,materialReference:Wd,materialReflectivity:jke,materialRotation:kA,materialRoughness:LA,materialSheen:T8,materialSheenRoughness:E8,materialShininess:S8,materialSpecularColor:M8,max:hA,maxMipLevel:T_,metalness:E2,min:dA,mix:Pn,mod:n_,modelDirection:tIe,modelNormalMatrix:p_,modelPosition:R8,modelScale:rIe,modelViewMatrix:zc,modelViewPosition:L8,modelViewProjection:x_,modelWorldMatrix:wf,morph:q8,mul:Mo,mx_aastep:bH,mx_cell_noise_float:OH,mx_contrast:GPe,mx_fractal_noise_float:kH,mx_fractal_noise_vec2:IH,mx_fractal_noise_vec3:PH,mx_fractal_noise_vec4:DH,mx_hsvtorgb:vH,mx_noise_float:TH,mx_noise_vec2:EH,mx_noise_vec3:CH,mx_noise_vec4:NH,mx_ramplr:_H,mx_ramptb:wH,mx_rgbtohsv:yH,mx_safepower:VPe,mx_splitlr:UPe,mx_splittb:zPe,mx_srgb_texture_to_lin_rec709:FPe,mx_transform_uv:MH,mx_worley_noise_float:AH,mx_worley_noise_vec2:RH,mx_worley_noise_vec3:LH,negate:aA,nodeArray:Vd,nodeImmutable:gt,nodeObject:Ut,nodeObjects:Jv,nodeProxy:Ze,normalGeometry:Sf,normalLocal:Vc,normalMap:b_,normalView:oa,normalWorld:qd,normalize:In,objectDirection:Yke,objectNormalMatrix:Zke,objectPosition:u_,objectScale:eIe,objectViewMatrix:Jke,objectViewPosition:IA,objectWorldMatrix:Qke,oneMinus:h8,or:U2,orthographicDepthToViewZ:c3e,oscSawtooth:mG,oscSine:hG,oscSquare:pG,oscTriangle:fG,output:a8,outputStruct:FIe,overlay:ZR,perspectiveDepthToViewZ:UG,pointUV:EG,positionGeometry:ln,positionLocal:ts,positionView:Cs,positionViewDirection:Gi,positionWorld:g_,positionWorldDirection:v_,posterize:aL,pow:s_,pow2:yA,pow3:bA,pow4:xA,property:Ia,radians:W2,range:jG,rangeFog:z_,reciprocal:cA,reference:Vo,reflect:fA,reflectVector:tR,refract:wA,remainder:O2,remap:AR,remapClamp:RR,rotateUV:kR,roughness:Hd,round:lA,sRGBToLinear:_8,sampler:Gke,saturate:m8,saturation:eL,screen:QR,scriptable:HG,scriptableValue:f0,shader:Mke,shaderStages:B5,shiftLeft:j2,shiftRight:$2,shininess:Z1,sign:nA,sin:Q2,skinning:W8,smoothstep:Ol,specularColor:ia,specularMIPLevel:E_,split:Tke,spritesheetUV:vG,sqrt:Z2,stack:xR,step:pA,storage:AG,string:e8,sub:r0,tan:tA,tangentGeometry:Tf,tangentLocal:s0,tangentView:Ef,tangentWorld:DA,temp:Mf,texture:ho,textureBicubic:TG,textureStore:qIe,timerDelta:uG,timerGlobal:cG,timerLocal:CR,toneMapping:uL,transformDirection:_A,transformedBitangentView:FA,transformedBitangentWorld:B8,transformedClearcoatNormalView:Xd,transformedNormalView:wi,transformedNormalWorld:O8,transformedTangentView:m_,transformedTangentWorld:k8,triplanarTexture:FR,triplanarTextures:BR,trunc:p8,tslFn:Mr,uint:qN,umat3:n2,umat4:l2,uniform:Zi,userData:LG,uv:ui,uvec2:YN,uvec3:QN,uvec4:r2,varying:Xr,vec2:kr,vec3:Gt,vec4:Ir,vectorComponents:V1,vertexIndex:Ake,vibrance:tL,viewZToOrthographicDepth:bL,viewZToPerspectiveDepth:u3e,viewport:B_,viewportBottomLeft:pL,viewportBottomRight:PG,viewportCoordinate:OG,viewportDepthTexture:yL,viewportMipTexture:BG,viewportResolution:kG,viewportSharedTexture:FG,viewportTexture:DG,viewportTopLeft:d0,viewportTopRight:IG,wgsl:m3e,wgslFn:g3e,xor:z2},Symbol.toStringTag,{value:"Module"})),HPe={BitangentNodeScope:{LOCAL:Fa.LOCAL,VIEW:Fa.VIEW,WORLD:Fa.WORLD,GEOMETRY:Fa.GEOMETRY},Blending:{AdditiveBlending:dl,CustomBlending:vg,MultiplyBlending:yc,NoBlending:So,NormalBlending:qn,SubtractiveBlending:vc},BlendingDstFactor:{DstAlphaFactor:Eg,DstColorFactor:Ng,OneFactor:Sg,OneMinusDstAlphaFactor:Cg,OneMinusDstColorFactor:Ag,OneMinusSrcAlphaFactor:vp,OneMinusSrcColorFactor:Tg,SrcAlphaFactor:gp,SrcColorFactor:Mg,ZeroFactor:wg},BlendingSrcFactor:{SrcAlphaSaturateFactor:Rg},BlendingEquation:{AddEquation:Sn,MaxEquation:_g,MinEquation:xg,ReverseSubtractEquation:bg,SubtractEquation:yg},BlendMode:{BURN:za.BURN,DODGE:za.DODGE,SCREEN:za.SCREEN,OVERLAY:za.OVERLAY},CameraNodeScope:{VIEW_MATRIX:Oi.VIEW_MATRIX,NORMAL_MATRIX:Oi.NORMAL_MATRIX,WORLD_MATRIX:Oi.WORLD_MATRIX,POSITION:Oi.POSITION,VIEW_POSITION:Oi.VIEW_POSITION,PROJECTION_MATRIX:Il.PROJECTION_MATRIX},ColorAdjustmentMethod:{SATURATION:jc.SATURATION,VIBRANCE:jc.VIBRANCE,HUE:jc.HUE},ColorSpace:{DisplayP3ColorSpace:tv,LinearDisplayP3ColorSpace:Ap,LinearSRGBColorSpace:en,NoColorSpace:so,SRGBColorSpace:Ft},ColorSpaceNodeMethod:{LINEAR_TO_LINEAR:kl.LINEAR_TO_LINEAR,LINEAR_TO_sRGB:kl.LINEAR_TO_sRGB,sRGB_TO_LINEAR:kl.sRGB_TO_LINEAR},Combine:{AddOperation:$E,MixOperation:jE,MultiplyOperation:yp},CompressedPixelFormat:{RED_GREEN_RGTC2_Format:Cp,RED_RGTC1_Format:fx,RGBA_ASTC_10x10_Format:ad,RGBA_ASTC_10x5_Format:od,RGBA_ASTC_10x6_Format:nd,RGBA_ASTC_10x8_Format:sd,RGBA_ASTC_12x10_Format:ld,RGBA_ASTC_12x12_Format:cd,RGBA_ASTC_4x4_Format:Yu,RGBA_ASTC_5x4_Format:Ju,RGBA_ASTC_5x5_Format:Zu,RGBA_ASTC_6x5_Format:Qu,RGBA_ASTC_6x6_Format:ed,RGBA_ASTC_8x5_Format:td,RGBA_ASTC_8x6_Format:rd,RGBA_ASTC_8x8_Format:id,RGBA_BPTC_Format:Sc,RGBA_ETC2_EAC_Format:Ku,RGBA_PVRTC_2BPPV1_Format:Tp,RGBA_PVRTC_4BPPV1_Format:Mp,RGBA_S3TC_DXT1_Format:fl,RGBA_S3TC_DXT3_Format:ml,RGBA_S3TC_DXT5_Format:gl,RGB_BPTC_SIGNED_Format:hx,RGB_BPTC_UNSIGNED_Format:px,RGB_ETC1_Format:dx,RGB_ETC2_Format:Xu,RGB_PVRTC_2BPPV1_Format:Sp,RGB_PVRTC_4BPPV1_Format:wp,RGB_S3TC_DXT1_Format:wc,SIGNED_RED_GREEN_RGTC2_Format:Np,SIGNED_RED_RGTC1_Format:Ep},CoordinateSystem:{WebGLCoordinateSystem:Ts,WebGPUCoordinateSystem:hd},CubeTextureMapping:{CubeReflectionMapping:Ms,CubeRefractionMapping:Ks,CubeUVReflectionMapping:Wu},DeepTexturePixelFormat:{DepthFormat:Do,DepthStencilFormat:Nn},DepthModes:{AlwaysDepth:Og,EqualDepth:Ig,GreaterDepth:Dg,GreaterEqualDepth:Pg,LessDepth:kg,LessEqualDepth:ju,NeverDepth:Lg,NotEqualDepth:Bg},DepthPackingStrategies:{BasicDepthPacking:XE,RGBADepthPacking:vx},GLSLVersion:{GLSL1:vV,GLSL3:_x},MagnificationTextureFilter:{LinearFilter:oi,NearestFilter:Nr},Mapping:{EquirectangularReflectionMapping:hl,EquirectangularRefractionMapping:pl,UVMapping:Vg},MaterialNodeScope:{ALPHA_TEST:bi.ALPHA_TEST,COLOR:bi.COLOR,OPACITY:bi.OPACITY,ROUGHNESS:bi.ROUGHNESS,METALNESS:bi.METALNESS,EMISSIVE:bi.EMISSIVE,ROTATION:bi.ROTATION},MathNodeMethod1:{RADIANS:dt.RADIANS,DEGREES:dt.DEGREES,EXP:dt.EXP,EXP2:dt.EXP2,LOG:dt.LOG,LOG2:dt.LOG2,SQRT:dt.SQRT,INVERSE_SQRT:dt.INVERSE_SQRT,FLOOR:dt.FLOOR,CEIL:dt.CEIL,NORMALIZE:dt.NORMALIZE,FRACT:dt.FRACT,SIN:dt.SIN,COS:dt.COS,TAN:dt.TAN,ASIN:dt.ASIN,ACOS:dt.ACOS,ATAN:dt.ATAN,ABS:dt.ABS,SIGN:dt.SIGN,LENGTH:dt.LENGTH,NEGATE:dt.NEGATE,ONE_MINUS:dt.ONE_MINUS,DFDX:dt.DFDX,DFDY:dt.DFDY,ROUND:dt.ROUND},MathNodeMethod2:{ATAN2:dt.ATAN2,MIN:dt.MIN,MAX:dt.MAX,MOD:dt.MOD,STEP:dt.STEP,REFLECT:dt.REFLECT,DISTANCE:dt.DISTANCE,DOT:dt.DOT,CROSS:dt.CROSS,POW:dt.POW,TRANSFORM_DIRECTION:dt.TRANSFORM_DIRECTION},MathNodeMethod3:{MIX:dt.MIX,CLAMP:dt.CLAMP,REFRACT:dt.REFRACT,SMOOTHSTEP:dt.SMOOTHSTEP,FACEFORWARD:dt.FACEFORWARD},MinificationTextureFilter:{LinearFilter:oi,LinearMipMapLinearFilter:pV,LinearMipMapNearestFilter:hV,LinearMipmapLinearFilter:Tn,LinearMipmapNearestFilter:Gg,NearestFilter:Nr,NearestMipMapLinearFilter:dV,NearestMipMapNearestFilter:uV,NearestMipmapLinearFilter:Ea,NearestMipmapNearestFilter:_c},NodeTypeOption:"void,bool,int,float,vec2,vec3,vec4,mat3,mat4,code,color,uint,int,property,sampler,texture,cubeTexture,ivec2,uvec2,bvec2,ivec3,uvec3,bvec3,ivec4,uvec4,bvec4,imat3,umat3,bmat3,imat4,umat4,bmat4".split(","),NormalMapTypes:{ObjectSpaceNormalMap:yx,TangentSpaceNormalMap:Ys},NormalNodeScope:{GEOMETRY:Pl.GEOMETRY,LOCAL:Pl.LOCAL,VIEW:Pl.VIEW},Object3DNodeScope:{VIEW_MATRIX:Oi.VIEW_MATRIX,NORMAL_MATRIX:Oi.NORMAL_MATRIX,WORLD_MATRIX:Oi.WORLD_MATRIX,POSITION:Oi.POSITION,VIEW_POSITION:Oi.VIEW_POSITION},OperatorNodeOp:["=","%","&","|","^",">>","<<","==","&&","||","^^","<",">","<=",">=","+","-","*","/"],OscNodeMethod:{SINE:Ua.SINE,SQUARE:Ua.SQUARE,TRIANGLE:Ua.TRIANGLE,SAWTOOTH:Ua.SAWTOOTH},PixelFormatGPU:["ALPHA","DEPTH24_STENCIL8","DEPTH32F_STENCIL8","DEPTH_COMPONENT16","DEPTH_COMPONENT24","DEPTH_COMPONENT32F","LUMINANCE","LUMINANCE_ALPHA","R11F_G11F_B10F","R16F","R16I","R16UI","R32F","R32I","R32UI","R8","R8I","R8UI","R8_SNORM","RED_INTEGER","RG16F","RG16I","RG16UI","RG32F","RG32I","RG32UI","RG8","RG8I","RG8UI","RG8_SNORM","RGB","RGB10_A2","RGB10_A2UI","RGB16F","RGB16I","RGB16UI","RGB32F","RGB32I","RGB32UI","RGB565","RGB5_A1","RGB8","RGB8I","RGB8UI","RGB8_SNORM","RGB9_E5","RGBA","RGBA16F","RGBA16I","RGBA16UI","RGBA32F","RGBA32I","RGBA32UI","RGBA4","RGBA8","RGBA8I","RGBA8UI","RGBA8_SNORM","SRGB8","SRGB8_ALPHA8"],PositionNodeScope:{GEOMETRY:Dn.GEOMETRY,LOCAL:Dn.LOCAL,WORLD:Dn.WORLD,WORLD_DIRECTION:Dn.WORLD_DIRECTION,VIEW:Dn.VIEW,VIEW_DIRECTION:Dn.VIEW_DIRECTION},Precision:["highp","mediump","lowp"],Side:{BackSide:Ni,DoubleSide:io,FrontSide:Ss,TwoPassDoubleSide:cV},StencilFunc:{AlwaysStencilFunc:bx,EqualStencilFunc:oC,GreaterEqualStencilFunc:lC,GreaterStencilFunc:sC,LessEqualStencilFunc:nC,LessStencilFunc:iC,NeverStencilFunc:rC,NotEqualStencilFunc:aC},StencilOp:{DecrementStencilOp:ZE,DecrementWrapStencilOp:eC,IncrementStencilOp:JE,IncrementWrapStencilOp:QE,InvertStencilOp:tC,KeepStencilOp:Rp,ReplaceStencilOp:YE,ZeroStencilOp:KE},TangentNodeScope:{LOCAL:Ba.LOCAL,VIEW:Ba.VIEW,WORLD:Ba.WORLD,GEOMETRY:Ba.GEOMETRY},TextureComparisonFunction:{AlwaysCompare:dv,EqualCompare:sv,GreaterCompare:lv,GreaterEqualCompare:uv,LessCompare:Lp,LessEqualCompare:av,NeverCompare:nv,NotEqualCompare:cv},TextureDataType:{ByteType:cx,FloatType:Di,HalfFloatType:no,IntType:Hg,ShortType:ux,UnsignedByteType:En,UnsignedInt248Type:Xn,UnsignedIntType:Cn,UnsignedShort4444Type:jg,UnsignedShort5551Type:$g,UnsignedShortType:qu},TextureEncoding:{LinearEncoding:ev,sRGBEncoding:Ca},ToneMapping:{NoToneMapping:Mn,LinearToneMapping:Fg,ReinhardToneMapping:Ug,CineonToneMapping:zg,ACESFilmicToneMapping:$u,CustomToneMapping:WE},ViewportNodeScope:{COORDINATE:Fn.COORDINATE,RESOLUTION:Fn.RESOLUTION,TOP_LEFT:Fn.TOP_LEFT,BOTTOM_LEFT:Fn.BOTTOM_LEFT,TOP_RIGHT:Fn.TOP_RIGHT,BOTTOM_RIGHT:Fn.BOTTOM_RIGHT},WebGL1PixelFormat:{AlphaFormat:Wg,DepthFormat:Do,DepthStencilFormat:Nn,LuminanceAlphaFormat:Xg,LuminanceFormat:qg,RGFormat:_p,RedFormat:bp,RedIntegerFormat:xp,_SRGBAFormat:kp},WebGL2PixelFormat:{AlphaFormat:Wg,DepthFormat:Do,DepthStencilFormat:Nn,LuminanceAlphaFormat:Xg,LuminanceFormat:qg,RGBAFormat:Po,RGBAIntegerFormat:Yg,RGFormat:_p,RGIntegerFormat:Kg,RedFormat:bp,RedIntegerFormat:xp,_SRGBAFormat:kp},Wrapping:{ClampToEdgeWrapping:oo,MirroredRepeatWrapping:xc,RepeatWrapping:bc}},W_={AmbientLight:{cls:ff,isAmbientLight:!0,members:{},proto:"Light"},AmbientLightProbe:{cls:void 0,isAmbientLightProbe:!0,members:{},proto:"LightProbe"},ArrayCamera:{cls:UC,isArrayCamera:!0,members:{cameras:"PerspectiveCamera[]"},proto:"PerspectiveCamera"},Camera:{cls:Lc,isCamera:!0,members:{coordinateSystem:"types.CoordinateSystem",matrixWorldInverse:"Matrix4",projectionMatrix:"Matrix4",projectionMatrixInverse:"Matrix4"},proto:"Object3D"},CanvasTexture:{cls:KC,isCanvasTexture:!0,members:{},proto:"Texture"},CompressedArrayTexture:{cls:B6,isCompressedArrayTexture:!0,members:{wrapR:"types.Wrapping"},proto:"CompressedTexture"},CompressedTexture:{cls:Ov,isCompressedTexture:!0,members:{flipY:"boolean",format:"types.CompressedPixelFormat",generateMipmaps:"boolean"},proto:"Texture"},CubeCamera:{cls:$x,members:{coordinateSystem:"types.CoordinateSystem"},proto:"Object3D"},CubeTexture:{cls:yd,isCubeTexture:!0,members:{flipY:"boolean",mapping:"types.CubeTextureMapping"},proto:"Texture"},Data3DTexture:{cls:Mx,isData3DTexture:!0,members:{flipY:"boolean",generateMipmaps:"boolean",magFilter:"types.MagnificationTextureFilter",minFilter:"types.MinificationTextureFilter",unpackAlignment:"number",wrapR:"types.Wrapping"},proto:"Texture"},DataArrayTexture:{cls:mv,isDataArrayTexture:!0,members:{flipY:"boolean",generateMipmaps:"boolean",magFilter:"types.MagnificationTextureFilter",minFilter:"types.MinificationTextureFilter",unpackAlignment:"number",wrapR:"boolean"},proto:"Texture"},DataTexture:{cls:Md,isDataTexture:!0,members:{flipY:"boolean",generateMipmaps:"boolean",magFilter:"types.MagnificationTextureFilter",minFilter:"types.MinificationTextureFilter",unpackAlignment:"number"},proto:"Texture"},DepthTexture:{cls:Sd,isDepthTexture:!0,members:{compareFunction:"types.TextureComparisonFunction | null",flipY:"boolean",format:"types.DeepTexturePixelFormat",generateMipmaps:"boolean",magFilter:"types.MagnificationTextureFilter",minFilter:"types.MinificationTextureFilter",type:"types.TextureDataType"},proto:"Texture"},DirectionalLight:{cls:Pd,isDirectionalLight:!0,members:{castShadow:"boolean",position:"Vector3","shadow.mapSize.x":"Number","shadow.mapSize.y":"Number","shadow.bias":"Number",target:"Object3D"},proto:"Light"},DirectionalLightShadow:{cls:void 0,isDirectionalLightShadow:!0,members:{camera:"OrthographicCamera"},proto:"LightShadow"},Fog:{cls:Tv,isFog:!0,members:{color:"Color",far:"number",near:"number"},proto:"FogBase"},FogExp2:{cls:Mv,isFogExp2:!0,members:{color:"Color",density:"number"},proto:"FogBase"},FramebufferTexture:{cls:a1,isFramebufferTexture:!0,members:{generateMipmaps:"boolean",magFilter:"types.MagnificationTextureFilter",minFilter:"types.MinificationTextureFilter"},proto:"Texture"},HemisphereLight:{cls:kd,isHemisphereLight:!0,members:{color:"Color",groundColor:"Color",position:"Vector3"},proto:"Light"},HemisphereLightProbe:{cls:void 0,isHemisphereLightProbe:!0,members:{},proto:"LightProbe"},InstancedMesh:{cls:WC,members:{count:"number"},proto:"Mesh"},Light:{cls:Al,isLight:!0,members:{color:"Color",intensity:"number",shadow:"LightShadow"},proto:"Object3D"},LightProbe:{cls:SN,isLightProbe:!0,members:{sh:"SphericalHarmonics3"},proto:"Light"},LightShadow:{cls:void 0,members:{bias:"number",blurSamples:"number",camera:"Camera",mapSize:"Vector2",matrix:"Matrix4",normalBias:"number",radius:"number"}},LineBasicMaterial:{cls:Fi,members:{color:"Color",fog:"boolean",linecap:"string",linejoin:"string",linewidth:"number",map:"Texture | null"},proto:"Material"},LineDashedMaterial:{cls:zv,isLineDashedMaterial:!0,members:{dashSize:"number",gapSize:"number",scale:"number"},proto:"LineBasicMaterial"},Material:{cls:ai,isMaterial:!0,members:{alphaHash:"boolean",blendSrc:"types.BlendingSrcFactor | types.BlendingDstFactor",blendSrcAlpha:"number | null",blending:"types.Blending",depthFunc:"types.DepthModes",depthTest:"boolean",depthWrite:"boolean",opacity:"number",precision:"types.Precision | null",premultipliedAlpha:"boolean",shadowSide:"types.Side | null",side:"types.Side",stencilFail:"types.StencilOp",stencilFunc:"types.StencilFunc",stencilFuncMask:"number",stencilRef:"number",stencilWrite:"boolean",stencilWriteMask:"number",stencilZFail:"types.StencilOp",stencilZPass:"types.StencilOp",toneMapped:"boolean",transparent:"boolean",visible:"boolean"},proto:"EventDispatcher"},Mesh:{cls:yt,members:{castShadow:"boolean",receiveShadow:"boolean",material:"Material"},proto:"Object3D"},MeshBasicMaterial:{cls:Uo,members:{alphaMap:"Texture | null",aoMap:"Texture | null",aoMapIntensity:"number",color:"Color",combine:"types.Combine",envMap:"Texture | null",fog:"boolean",lightMap:"Texture | null",lightMapIntensity:"number",map:"Texture | null",reflectivity:"number",refractionRatio:"number",specularMap:"Texture | null",wireframe:"boolean",wireframeLinecap:"string",wireframeLinejoin:"string",wireframeLinewidth:"number"},proto:"Material"},MeshDepthMaterial:{cls:Sv,members:{alphaMap:"Texture | null",depthPacking:"types.DepthPackingStrategies",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",fog:"boolean",map:"Texture | null",wireframe:"boolean",wireframeLinewidth:"number"},proto:"Material"},MeshDistanceMaterial:{cls:Jx,members:{alphaMap:"Texture | null",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",fog:"boolean",map:"Texture | null"},proto:"Material"},MeshLambertMaterial:{cls:L1,members:{alphaMap:"Texture | null",aoMap:"Texture | null",aoMapIntensity:"number",bumpMap:"Texture | null",bumpScale:"number",color:"Color",combine:"types.Combine",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",emissive:"Color",emissiveIntensity:"number",emissiveMap:"Texture | null",envMap:"Texture | null",flatShading:"boolean",fog:"boolean",lightMap:"Texture | null",lightMapIntensity:"number",map:"Texture | null",normalMap:"Texture | null",normalMapType:"types.NormalMapTypes",normalScale:"Vector2",reflectivity:"number",refractionRatio:"number",specularMap:"Texture | null",wireframe:"boolean",wireframeLinecap:"string",wireframeLinejoin:"string",wireframeLinewidth:"number"},proto:"Material"},MeshMatcapMaterial:{cls:hN,members:{alphaMap:"Texture | null",bumpMap:"Texture | null",bumpScale:"number",color:"Color",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",flatShading:"boolean",fog:"boolean",map:"Texture | null",matcap:"Texture | null",normalMap:"Texture | null",normalMapType:"types.NormalMapTypes",normalScale:"Vector2"},proto:"Material"},MeshNormalMaterial:{cls:R1,members:{bumpMap:"Texture | null",bumpScale:"number",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",flatShading:"boolean",normalMap:"Texture | null",normalMapType:"types.NormalMapTypes",normalScale:"Vector2",wireframe:"boolean",wireframeLinewidth:"number"},proto:"Material"},MeshPhongMaterial:{cls:A1,members:{alphaMap:"Texture | null",aoMap:"Texture | null",aoMapIntensity:"number",bumpMap:"Texture | null",bumpScale:"number",color:"Color",combine:"types.Combine",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",emissive:"Color",emissiveIntensity:"number",emissiveMap:"Texture | null",envMap:"Texture | null",flatShading:"boolean",fog:"boolean",lightMap:"Texture | null",lightMapIntensity:"number",map:"Texture | null",metal:"boolean",normalMap:"Texture | null",normalMapType:"types.NormalMapTypes",normalScale:"Vector2",reflectivity:"number",refractionRatio:"number",shininess:"number",specular:"Color",specularMap:"Texture | null",wireframe:"boolean",wireframeLinecap:"string",wireframeLinejoin:"string",wireframeLinewidth:"number"},proto:"Material"},MeshPhysicalMaterial:{cls:hf,members:{anisotropy:"number",anisotropyMap:"Texture | null",anisotropyRotation:"number",attenuationColor:"Color",attenuationDistance:"number",clearcoat:"number",clearcoatMap:"Texture | null",clearcoatNormalMap:"Texture | null",clearcoatNormalScale:"Vector2",clearcoatRoughness:"number",clearcoatRoughnessMap:"Texture | null",ior:"number",iridescence:"number",iridescenceIOR:"number",iridescenceMap:"Texture | null",iridescenceThicknessMap:"Texture | null",iridescenceThicknessRange:"number[]",reflectivity:"number",sheen:"number",sheenColor:"Color",sheenColorMap:"Texture | null",sheenRoughness:"number",sheenRoughnessMap:"Texture | null",specularColor:"Color",specularColorMap:"Texture | null",specularIntensity:"number",specularIntensityMap:"Texture | null",thickness:"number",thicknessMap:"Texture | null",transmission:"number",transmissionMap:"Texture | null"},proto:"MeshStandardMaterial"},MeshStandardMaterial:{cls:Nd,isMeshStandardMaterial:!0,members:{alphaMap:"Texture | null",aoMap:"Texture | null",aoMapIntensity:"number",bumpMap:"Texture | null",bumpScale:"number",color:"Color",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",emissive:"Color",emissiveIntensity:"number",emissiveMap:"Texture | null",envMap:"Texture | null",envMapIntensity:"number",flatShading:"boolean",fog:"boolean",lightMap:"Texture | null",lightMapIntensity:"number",map:"Texture | null",metalness:"number",metalnessMap:"Texture | null",normalMap:"Texture | null",normalMapType:"types.NormalMapTypes",normalScale:"Vector2",roughness:"number",roughnessMap:"Texture | null",wireframe:"boolean",wireframeLinecap:"string",wireframeLinejoin:"string",wireframeLinewidth:"number"},proto:"Material"},MeshToonMaterial:{cls:dN,members:{alphaMap:"Texture | null",aoMap:"Texture | null",aoMapIntensity:"number",bumpMap:"Texture | null",bumpScale:"number",color:"Color",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",emissive:"Color",emissiveIntensity:"number",emissiveMap:"Texture | null",fog:"boolean",gradientMap:"Texture | null",lightMap:"Texture | null",lightMapIntensity:"number",map:"Texture | null",normalMap:"Texture | null",normalMapType:"types.NormalMapTypes",normalScale:"Vector2",wireframe:"boolean",wireframeLinecap:"string",wireframeLinejoin:"string",wireframeLinewidth:"number"},proto:"Material"},Object3D:{cls:mr,isObject3D:!0,members:{up:"Vector3",position:"Vector3",rotation:"Euler",scale:"Vector3"}},OrthographicCamera:{cls:Na,isOrthographicCamera:!0,members:{bottom:"number",far:"number",left:"number",near:"number",right:"number",top:"number",zoom:"number"},proto:"Camera"},PerspectiveCamera:{cls:li,isPerspectiveCamera:!0,members:{aspect:"number",far:"number",filmGauge:"number",filmOffset:"number",focus:"number",fov:"number",near:"number",zoom:"number"},proto:"Camera"},PointLight:{cls:Id,members:{castShadow:"boolean",decay:"number",distance:"number",intensity:"number",power:"number","shadow.mapSize.x":"Number","shadow.mapSize.y":"Number","shadow.bias":"Number"},proto:"Light"},PointLightShadow:{cls:void 0,isPointLightShadow:!0,members:{},proto:"LightShadow"},PointsMaterial:{cls:Td,members:{alphaMap:"Texture | null",color:"Color",fog:"boolean",map:"Texture | null",size:"number",sizeAttenuation:"boolean"},proto:"Material"},RawShaderMaterial:{cls:N1,members:{},proto:"ShaderMaterial"},RectAreaLight:{cls:_N,isRectAreaLight:!0,members:{height:"number",intensity:"number",power:"number",width:"number"},proto:"Light"},Scene:{cls:Oc,isScene:!0,members:{background:"Color | Texture | CubeTexture | null",backgroundBlurriness:"number",backgroundIntensity:"number",environment:"Texture | null",fog:"FogBase | null",overrideMaterial:"Material | null"},proto:"Object3D"},ShaderMaterial:{cls:gi,isShaderMaterial:!0,members:{fog:"boolean",wireframe:"boolean",wireframeLinewidth:"number"},proto:"Material"},ShadowMaterial:{cls:uN,members:{color:"Color",fog:"boolean",transparent:"boolean"},proto:"Material"},Source:{cls:Mc,isSource:!0,members:{}},SphericalHarmonics3:{cls:wN,isSphericalHarmonics3:!0,members:{coefficients:"Vector3[]"}},SpotLight:{cls:Bc,isSpotLight:!0,members:{angle:"number",castShadow:"boolean",decay:"number",distance:"number",intensity:"number",map:"Texture | null",penumbra:"number",position:"Vector3",power:"number","shadow.mapSize.x":"Number","shadow.mapSize.y":"Number","shadow.bias":"Number",target:"Object3D"},proto:"Light"},SpotLightShadow:{cls:void 0,isSpotLightShadow:!0,members:{camera:"PerspectiveCamera",focus:"number"},proto:"LightShadow"},SpriteMaterial:{cls:kc,isSpriteMaterial:!0,members:{alphaMap:"Texture | null",color:"Color",fog:"boolean",map:"Texture | null",rotation:"number",sizeAttenuation:"boolean",transparent:"boolean"},proto:"Material"},StereoCamera:{cls:h5,members:{aspect:"number",cameraL:"PerspectiveCamera",cameraR:"PerspectiveCamera",eyeSep:"number"},proto:"Camera"},Texture:{cls:mi,isTexture:!0,members:{anisotropy:"number",center:"Vector2",channel:"number",colorSpace:"types.ColorSpace",encoding:"types.TextureEncoding",flipY:"boolean",format:"types.WebGL1PixelFormat | types.WebGL2PixelFormat | types.PixelFormat | types.DeepTexturePixelFormat | types.CompressedPixelFormat | types.AnyPixelFormat",generateMipmaps:"boolean",internalFormat:"types.PixelFormatGPU | null",magFilter:"types.MagnificationTextureFilter",mapping:"types.Mapping | types.CubeTextureMapping | types.AnyMapping",matrix:"Matrix3",offset:"Vector2",premultiplyAlpha:"boolean",repeat:"Vector2",rotation:"number",source:"Source",type:"types.TextureDataType",unpackAlignment:"number",wrapS:"types.Wrapping",wrapT:"types.Wrapping"},proto:"EventDispatcher"},VideoTexture:{cls:D6,isVideoTexture:!0,members:{generateMipmaps:"boolean",magFilter:"types.MagnificationTextureFilter",minFilter:"types.MinificationTextureFilter"},proto:"Texture"}},x0={AONode:{cls:sR,group:"lighting",members:{aoNode:"Node | null"},proto:"LightingNode"},AnalyticLightNode:{cls:Gc,group:"lighting",members:{colorNode:"Node",light:"Light | null"},proto:"LightingNode"},ArrayElementNode:{cls:Kv,group:"utils",members:{indexNode:"Node",node:"Node"},proto:"TempNode"},ArrayUniformNode:{cls:i8,group:"core",isArrayUniformNode:!0,members:{nodes:"Node[]"},proto:"UniformNode"},AttributeNode:{cls:q1,group:"core",members:{},proto:"Node"},BitangentNode:{cls:Fa,group:"accessors",members:{scope:"types.BitangentNodeScope"},proto:"Node"},BlendModeNode:{cls:za,group:"display",members:{baseNode:"Node",blendMode:"types.BlendMode",blendNode:"Node"},proto:"TempNode"},BufferNode:{cls:__,group:"accessors",isBufferNode:!0,members:{bufferCount:"number",bufferType:"string"},proto:"UniformNode"},BypassNode:{cls:v2,group:"core",isBypassNode:!0,members:{callNode:"Node",outputNode:"Node"},proto:"Node"},CacheNode:{cls:b2,group:"core",isCacheNode:!0,members:{cache:"NodeCache",node:"Node"},proto:"Node"},CameraNode:{cls:Il,group:"accessors",members:{scope:"types.CameraNodeScope"},proto:"Object3DNode"},CheckerNode:{cls:XL,group:"procedural",members:{uvNode:"Node"},proto:"TempNode"},CodeNode:{cls:Va,group:"code",isCodeNode:!0,members:{code:"string"},proto:"Node"},ColorAdjustmentNode:{cls:jc,group:"display",members:{adjustmentNode:"Node",colorNode:"Node",method:"types.ColorAdjustmentMethod"},proto:"TempNode"},ColorSpaceNode:{cls:kl,group:"display",members:{method:"types.ColorSpaceNodeMethod",node:"Node"},proto:"TempNode"},ComputeNode:{cls:BL,group:"gpgpu",isComputeNode:!0,members:{count:"number",dispatchCount:"number",workgroupSize:"number[]"},proto:"Node"},CondNode:{cls:N_,group:"math",members:{condNode:"Node",elseNode:"Node",ifNode:"Node"},proto:"Node"},ConstNode:{cls:hr,group:"core",isConstNode:!0,members:{},proto:"InputNode"},ContextNode:{cls:Gd,group:"core",isContextNode:!0,members:{context:"Object",node:"Node"},proto:"Node"},ConvertNode:{cls:Yv,group:"utils",members:{convertTo:"types.NodeTypeOption",node:"Node"},proto:"Node"},CubeTextureNode:{cls:iR,group:"accessors",isCubeTextureNode:!0,members:{levelNode:"Node | null",uvNode:"Node | null"},proto:"TextureNode"},EnvironmentNode:{cls:fR,group:"lighting",members:{envNode:"Node | null"},proto:"LightingNode"},EquirectUVNode:{cls:cR,group:"utils",members:{},proto:"TempNode"},ExpressionNode:{cls:MA,group:"code",members:{snipped:"string"},proto:"TempNode"},FogExp2Node:{cls:OL,group:"fog",isFogExp2Node:!0,members:{densityNode:"Node"},proto:"FogNode"},FogNode:{cls:m0,group:"fog",isFogNode:!0,members:{colorNode:"Node",factorNode:"Node"},proto:"Node"},FogRangeNode:{cls:RL,group:"fog",isFogRangeNode:!0,members:{farNode:"Node",nearNode:"Node"},proto:"FogNode"},FrontFacingNode:{cls:zA,group:"display",isFrontFacingNode:!0,members:{},proto:"Node"},FunctionNode:{cls:zG,group:"code",members:{keywords:"{ [key: string]: Node }"},proto:"CodeNode"},HemisphereLightNode:{cls:qG,group:"lighting",members:{groundColorNode:"Node",lightDirectionNode:"Node",lightPositionNode:"Object3DNode"},proto:"AnalyticLightNode"},InputNode:{group:"core",isInputNode:!0,members:{precision:"types.Precision | null",value:"Color | Vector2 | Vector3 | Vector4 | Matrix3 | Matrix4 | boolean | number"},proto:"Node"},LightingNode:{cls:l0,group:"lighting",members:{},proto:"Node"},LightsNode:{cls:c0,group:"lighting",members:{lightNodes:"LightingNode[]"},proto:"Node"},LineBasicNodeMaterial:{cls:V_,group:"materials",isLineBasicNodeMaterial:!0,members:{},proto:["LineBasicMaterial","NodeMaterial"]},MatcapUVNode:{cls:ER,group:"utils",members:{},proto:"TempNode"},MaterialNode:{cls:bi,group:"accessors",members:{scope:"types.MaterialNodeScope"},proto:"Node"},MaterialReferenceNode:{cls:NA,group:"accessors",members:{},proto:"ReferenceNode"},MathNode:{cls:dt,group:"math",members:{aNode:"Node",bNode:"Node | null",cNode:"Node | null",method:"types.MathNodeMethod1 | types.MathNodeMethod2 | types.MathNodeMethod3"},proto:"TempNode"},MaxMipLevelNode:{cls:dR,group:"utils",members:{textureNode:"TextureNode"},proto:"UniformNode"},MeshBasicNodeMaterial:{cls:g0,group:"materials",isMeshBasicNodeMaterial:!0,members:{lights:"true"},proto:["MeshBasicMaterial","NodeMaterial"]},MeshPhysicalNodeMaterial:{cls:G_,group:"materials",members:{attenuationColorNode:"Node | null",attenuationDistanceNode:"Node | null",iridescenceIORNode:"null | Node",iridescenceNode:"null | CheckerNode",iridescenceThicknessNode:"null | Node",specularColorNode:"Node | null",specularIntensityNode:"Node | null",thicknessNode:"Node | null",transmissionNode:"Node | null"},proto:["MeshPhysicalMaterial","MeshStandardNodeMaterial"]},MeshStandardNodeMaterial:{cls:y0,group:"materials",isMeshStandardNodeMaterial:!0,members:{clearcoatNode:"Node | null",clearcoatRoughnessNode:"Node | null",emissiveNode:"Node | null",metalnessNode:"Node | null",roughnessNode:"Node | null"},proto:["MeshStandardMaterial","NodeMaterial"]},ModelViewProjectionNode:{cls:qA,group:"accessors",members:{},proto:"Node"},Node:{cls:qt,group:"core",isNode:!0,members:{}},NodeAttribute:{cls:K1,group:"core",isNodeAttribute:!0,members:{name:"string",type:"string"}},NodeCache:{cls:X1,group:"core",members:{}},NodeCode:{cls:M2,group:"core",isNodeCode:!0,members:{}},NodeFunction:{group:"core",isNodeFunction:!0,members:{inputs:"NodeFunctionInput[]",name:"string",presicion:"string",type:"string"}},NodeFunctionInput:{cls:L_,group:"core",isNodeFunctionInput:!0,members:{count:"null | number",isConst:"boolean",qualifier:"string"}},NodeKeywords:{cls:T2,group:"core",members:{keywords:"string[]",nodes:"Node[]"}},NodeMaterial:{cls:To,group:"materials",isNodeMaterial:!0,members:{alphaTestNode:"Node | null",backdropAlphaNode:"Node | null",backdropNode:"Node | null",colorNode:"Node | null",envNode:"Node | null",lights:"true",lightsNode:"Node | null",normalNode:"Node | null",normals:"true",opacityNode:"Node | null",positionNode:"Node | null"},proto:"ShaderMaterial"},NodeUniform:{cls:w2,group:"core",isNodeUniform:!0,members:{name:"string",needsUpdate:"boolean",node:"InputNode",type:"string",value:"NodeValueOption"}},NodeVar:{cls:Y1,group:"core",isNodeVar:!0,members:{name:"string",type:"string"}},NodeVarying:{cls:S2,group:"core",isNodeVarying:!0,members:{needsInterpolation:"false"},proto:"NodeVar"},NormalMapNode:{cls:HA,group:"display",members:{node:"Node",normalMapType:"types.NormalMapTypes",scaleNode:"Node | null"},proto:"TempNode"},NormalNode:{cls:Pl,group:"accessors",members:{scope:"types.NormalNodeScope"},proto:"Node"},Object3DNode:{cls:Oi,group:"accessors",members:{object3d:"Object3D | null",scope:"types.Object3DNodeScope"},proto:"Node"},OperatorNode:{cls:Pr,group:"math",members:{aNode:"Node",bNode:"Node",op:"types.OperatorNodeOp"},proto:"TempNode"},OscNode:{cls:Ua,group:"utils",members:{method:"types.OscNodeMethod",timeNode:"Node"},proto:"Node"},PointLightNode:{cls:$G,group:"lighting",members:{coneCosNode:"Node",cutoffDistanceNode:"Node",decayExponentNode:"Node",directionNode:"Node",penumbraCosNode:"Node"},proto:"AnalyticLightNode"},PointUVNode:{cls:WR,group:"accessors",isPointUVNode:!0,members:{},proto:"Node"},PointsNodeMaterial:{cls:H_,group:"materials",members:{alphaTestNode:"Node | null",colorNode:"Node | null",isPointsNodeMateria:"true",lightNode:"Node | null",opacityNode:"Node | null",positionNode:"Node | null",sizeNode:"Node | null"},proto:["PointsMaterial","NodeMaterial"]},PositionNode:{cls:Dn,group:"accessors",members:{scope:"types.PositionNodeScope"},proto:"Node"},PosterizeNode:{cls:sL,group:"display",members:{sourceNode:"Node",stepsNode:"Node"},proto:"Node"},PropertyNode:{cls:ra,group:"core",members:{},proto:"Node"},RangeNode:{cls:PL,group:"geometry",members:{max:"number | Color | Vector2 | Vector3 | Vector4",min:"number | Color | Vector2 | Vector3 | Vector4"},proto:"Node"},ReferenceNode:{cls:n0,group:"accessors",members:{node:"Node | null",object:"Object",property:"string",uniformType:"string"},proto:"Node"},ReflectVectorNode:{cls:eR,group:"accessors",members:{},proto:"Node"},RemapNode:{cls:k_,group:"utils",members:{doClamp:"boolean",inHighNode:"Node",inLowNode:"Node",node:"Node",outHighNode:"Node",outLowNode:"Node"},proto:"Node"},RotateUVNode:{cls:OR,group:"utils",members:{centerNode:"Node",rotationNode:"Node",uvNode:"Node"},proto:"TempNode"},SkinningNode:{cls:$8,group:"accessors",members:{bindMatrixInverseNode:"Node",bindMatrixNode:"Node",boneMatricesNode:"Node",skinIndexNode:"Node",skinWeightNode:"Node"},proto:"Node"},SpecularMIPLevelNode:{cls:pR,group:"utils",members:{roughnessNode:"Node | null",textureNode:"TextureNode"},proto:"Node"},SpriteNodeMaterial:{cls:j_,group:"materials",isSpriteNodeMaterial:!0,members:{alphaTestNode:"Node | null",colorNode:"Node | null",lightNode:"Node | null",opacityNode:"Node | null",positionNode:"Node | null",rotationNode:"Node | null",scaleNode:"Node | null"},proto:["SpriteMaterial","NodeMaterial"]},SpriteSheetUVNode:{cls:PR,group:"utils",members:{countNode:"Node",frameNode:"Node",uvNode:"Node"},proto:"Node"},TangentNode:{cls:Ba,group:"accessors",members:{scope:"types.TangentNodeScope"},proto:"Node"},TempNode:{cls:Li,group:"core",isTempNode:!0,members:{},proto:"Node"},TextureNode:{cls:_f,group:"accessors",isTextureNode:!0,members:{levelNode:"Node | null",uvNode:"Node | null"},proto:"UniformNode"},TimerNode:{cls:Af,group:"utils",members:{scale:"number"},proto:"UniformNode"},ToneMappingNode:{cls:cL,group:"display",members:{colorNode:"Node | null",exposureNode:"Node",toneMapping:"types.ToneMapping"},proto:"TempNode"},TriplanarTexturesNode:{cls:I_,group:"utils",members:{normalNode:"PositionNode",positionNode:"PositionNode",scaleNode:"Node",textureXNode:"TextureNode",textureYNode:"TextureNode | null",textureZNode:"TextureNode | null"},proto:"Node"},UVNode:{cls:L2,group:"accessors",isUVNode:!0,members:{index:"number"},proto:"AttributeNode"},UniformNode:{cls:gr,group:"core",isUniformNode:!0,members:{},proto:"InputNode"},VarNode:{cls:f_,group:"core",members:{name:"string | null",node:"Node"},proto:"Node"},VaryingNode:{cls:f2,group:"core",members:{name:"string | null",node:"Node"},proto:"Node"},ViewportNode:{cls:Fn,group:"display",isViewportNode:!0,members:{scope:"types.ViewportNodeScope"},proto:"Node"}},{createNodeMaterialFromType:jPe}=pIe,$Pe=Rl.createMaterialFromType,q_={};Rl.createMaterialFromType=function(r){return jPe(r)||(q_[r]?new q_[r]:$Pe.call(this,r))};function WPe(r){const e=r.name;if(q_[e])throw"exists";q_[e]=r}const _0={};function qPe(r,e){const t=r.userData.extend,i=_0[t];if(!i)return r;const o=i.create();return XPe(r,o,e)}function XPe(r,e,t){r.__proto__=e.__proto__;for(const i in e){if(!Object.hasOwn(e,i)||Object.hasOwn(r,i))continue;const o=e[i];o!==void 0&&(r[i]=o)}return t&&r.deserialize&&r.deserialize(t),e.dispose&&e.dispose(),r}function KPe(r){const e=_0[r];return e?e.create():new IN[r]}function As(r){const e=r.cls.name;if(_0[e])throw"exists";_0[e]=r,W_[e]||(W_[e]=r)}class eh extends Oc{static fromScene(e){const t=new eh;e.__proto__=t.__proto__;for(const i in t){if(!Object.hasOwn(t,i)||Object.hasOwn(e,i))continue;const o=t[i];o!==void 0&&(e[i]=o)}return e}constructor(){super(),this.userData.extend="PhysicalScene"}update(e,t){for(const i of this.children)i.visible&&i.graph&&i.graph.update(e,t)}add(...e){super.add(...e);for(const t of e)t.dispatchEvent&&t.dispatchEvent({type:"onBorn"});return this}remove(...e){super.remove(...e);for(const t of e)t.dispatchEvent&&t.dispatchEvent({type:"onDead"});return this}toJSON(e){return super.toJSON(e)}deserialize(e){}delayFireBornEvent(){for(const e of this.children)e.dispatchEvent&&e.dispatchEvent({type:"onBorn"})}}As({cls:eh,members:{},proto:"Scene",group:"Scenes.Physical Scene",icon:"scene",create:()=>new eh});const BH=new Yn,X_=new Q;class FH extends TN{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new kt(e,3)),this.setAttribute("uv",new kt(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new qv(t,6,1);return this.setAttribute("instanceStart",new kn(i,3,0)),this.setAttribute("instanceEnd",new kn(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new qv(t,6,1);return this.setAttribute("instanceColorStart",new kn(i,3,0)),this.setAttribute("instanceColorEnd",new kn(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new cN(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yn);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),BH.setFromBufferAttribute(t),this.boundingBox.union(BH))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Jn),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let o=0;for(let n=0,s=e.count;n<s;n++)X_.fromBufferAttribute(e,n),o=Math.max(o,i.distanceToSquared(X_)),X_.fromBufferAttribute(t,n),o=Math.max(o,i.distanceToSquared(X_));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}Mt.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new We(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},Ai.line={uniforms:Rc.merge([Mt.common,Mt.fog,Mt.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class oO extends gi{constructor(e){super({type:"LineMaterial",uniforms:Rc.clone(Ai.line.uniforms),vertexShader:Ai.line.vertexShader,fragmentShader:Ai.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1))}}const UH=new Q,zH=new Q,Co=new Kt,No=new Kt,Ga=new Kt,nO=new Q,sO=new Xt,Ao=new w5,VH=new Q,K_=new Yn,Y_=new Jn,Ha=new Kt;let ja,th;function GH(r,e,t){return Ha.set(0,0,-e,1).applyMatrix4(r.projectionMatrix),Ha.multiplyScalar(1/Ha.w),Ha.x=th/t.width,Ha.y=th/t.height,Ha.applyMatrix4(r.projectionMatrixInverse),Ha.multiplyScalar(1/Ha.w),Math.abs(Math.max(Ha.x,Ha.y))}function YPe(r,e){const t=r.matrixWorld,i=r.geometry,o=i.attributes.instanceStart,n=i.attributes.instanceEnd,s=Math.min(i.instanceCount,o.count);for(let a=0,l=s;a<l;a++){Ao.start.fromBufferAttribute(o,a),Ao.end.fromBufferAttribute(n,a),Ao.applyMatrix4(t);const c=new Q,u=new Q;ja.distanceSqToSegment(Ao.start,Ao.end,u,c),u.distanceTo(c)<th*.5&&e.push({point:u,pointOnLine:c,distance:ja.origin.distanceTo(u),object:r,face:null,faceIndex:a,uv:null,uv1:null})}}function JPe(r,e,t){const i=e.projectionMatrix,o=r.material.resolution,n=r.matrixWorld,s=r.geometry,a=s.attributes.instanceStart,l=s.attributes.instanceEnd,c=Math.min(s.instanceCount,a.count),u=-e.near;ja.at(1,Ga),Ga.w=1,Ga.applyMatrix4(e.matrixWorldInverse),Ga.applyMatrix4(i),Ga.multiplyScalar(1/Ga.w),Ga.x*=o.x/2,Ga.y*=o.y/2,Ga.z=0,nO.copy(Ga),sO.multiplyMatrices(e.matrixWorldInverse,n);for(let d=0,h=c;d<h;d++){if(Co.fromBufferAttribute(a,d),No.fromBufferAttribute(l,d),Co.w=1,No.w=1,Co.applyMatrix4(sO),No.applyMatrix4(sO),Co.z>u&&No.z>u)continue;if(Co.z>u){const y=Co.z-No.z,b=(Co.z-u)/y;Co.lerp(No,b)}else if(No.z>u){const y=No.z-Co.z,b=(No.z-u)/y;No.lerp(Co,b)}Co.applyMatrix4(i),No.applyMatrix4(i),Co.multiplyScalar(1/Co.w),No.multiplyScalar(1/No.w),Co.x*=o.x/2,Co.y*=o.y/2,No.x*=o.x/2,No.y*=o.y/2,Ao.start.copy(Co),Ao.start.z=0,Ao.end.copy(No),Ao.end.z=0;const p=Ao.closestPointToPointParameter(nO,!0);Ao.at(p,VH);const m=vl.lerp(Co.z,No.z,p),g=m>=-1&&m<=1,v=nO.distanceTo(VH)<th*.5;if(g&&v){Ao.start.fromBufferAttribute(a,d),Ao.end.fromBufferAttribute(l,d),Ao.start.applyMatrix4(n),Ao.end.applyMatrix4(n);const y=new Q,b=new Q;ja.distanceSqToSegment(Ao.start,Ao.end,b,y),t.push({point:b,pointOnLine:y,distance:ja.origin.distanceTo(b),object:r,face:null,faceIndex:d,uv:null,uv1:null})}}}class ZPe extends yt{constructor(e=new FH,t=new oO({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,o=new Float32Array(2*t.count);for(let s=0,a=0,l=t.count;s<l;s++,a+=2)UH.fromBufferAttribute(t,s),zH.fromBufferAttribute(i,s),o[a]=a===0?0:o[a-1],o[a+1]=o[a]+UH.distanceTo(zH);const n=new qv(o,2,1);return e.setAttribute("instanceDistanceStart",new kn(n,1,0)),e.setAttribute("instanceDistanceEnd",new kn(n,1,1)),this}raycast(e,t){const i=this.material.worldUnits,o=e.camera;o===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const n=e.params.Line2!==void 0&&e.params.Line2.threshold||0;ja=e.ray;const s=this.matrixWorld,a=this.geometry,l=this.material;th=l.linewidth+n,a.boundingSphere===null&&a.computeBoundingSphere(),Y_.copy(a.boundingSphere).applyMatrix4(s);let c;if(i)c=th*.5;else{const d=Math.max(o.near,Y_.distanceToPoint(ja.origin));c=GH(o,d,l.resolution)}if(Y_.radius+=c,ja.intersectsSphere(Y_)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),K_.copy(a.boundingBox).applyMatrix4(s);let u;if(i)u=th*.5;else{const d=Math.max(o.near,K_.distanceToPoint(ja.origin));u=GH(o,d,l.resolution)}K_.expandByScalar(u),ja.intersectsBox(K_)!==!1&&(i?YPe(this,t):JPe(this,o,t))}}class HH extends FH{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let o=0;o<t;o+=3)i[2*o]=e[o],i[2*o+1]=e[o+1],i[2*o+2]=e[o+2],i[2*o+3]=e[o+3],i[2*o+4]=e[o+4],i[2*o+5]=e[o+5];return super.setPositions(i),this}setColors(e){const t=e.length-3,i=new Float32Array(2*t);for(let o=0;o<t;o+=3)i[2*o]=e[o],i[2*o+1]=e[o+1],i[2*o+2]=e[o+2],i[2*o+3]=e[o+3],i[2*o+4]=e[o+4],i[2*o+5]=e[o+5];return super.setColors(i),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class QPe extends ZPe{constructor(e=new HH,t=new oO({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const Et=b0,w0={EPSILON:{clsName:"ConstNode",cls:hr,func:()=>t_,group:"Math.Constants.Epsilon",icon:"letter-e"},INFINITY:{clsName:"ConstNode",cls:hr,func:()=>u8,group:"Math.Constants.Infinity",icon:"infinity"},ShaderNode:{clsName:"undefined",cls:void 0,func:Oa,group:"",icon:""},TBNViewMatrix:{clsName:"undefined",cls:void 0,func:()=>jA,group:"",icon:""},abs:{clsName:"MathNode",cls:dt,func:bf,group:"Math.Functions.Abs",icon:"math-function"},acos:{clsName:"MathNode",cls:dt,func:iA,group:"Math.Functions.Acos",icon:"math-function"},add:{clsName:"OperatorNode",cls:Pr,func:sn,group:"Math.Arithmetic Operators.Addition",icon:"plus"},and:{clsName:"OperatorNode",cls:Pr,func:F2,group:"Math.Logic Operators.And",icon:"ampersand"},arrayBuffer:{clsName:"ConstNode",cls:hr,func:Et.arrayBuffer,group:"",icon:""},asin:{clsName:"MathNode",cls:dt,func:rA,group:"Math.Functions.Asin",icon:"math-function"},assign:{clsName:"OperatorNode",cls:Pr,func:e_,group:"",icon:""},atan:{clsName:"MathNode",cls:dt,func:oA,group:"Math.Functions.Atan",icon:"math-function"},atan2:{clsName:"MathNode",cls:dt,func:uA,group:"Math.Functions.Atan2",icon:"math-function"},attribute:{clsName:"AttributeNode",cls:q1,func:nn,group:"Inputs.Geometry.Attribute",icon:"book-upload"},backgroundBlurriness:{clsName:"undefined",cls:void 0,func:()=>Et.backgroundBlurriness,group:"",icon:""},backgroundIntensity:{clsName:"undefined",cls:void 0,func:()=>Et.backgroundIntensity,group:"",icon:""},bitAnd:{clsName:"OperatorNode",cls:Pr,func:V2,group:"Math.Bitwise Operators.Bitwise AND",icon:"binary"},bitOr:{clsName:"OperatorNode",cls:Pr,func:G2,group:"Math.Bitwise Operators.Bitwise OR",icon:"binary"},bitXor:{clsName:"OperatorNode",cls:Pr,func:H2,group:"Math.Bitwise Operators.Bitwise XOR",icon:"binary"},bitangentGeometry:{clsName:"BitangentNode",cls:Fa,func:()=>I8,group:"Inputs.Bitangent.Bitangent Geometry",icon:"arrows-up-left"},bitangentLocal:{clsName:"BitangentNode",cls:Fa,func:()=>P8,group:"Inputs.Bitangent.Bitangent Local",icon:"arrows-up-left"},bitangentView:{clsName:"BitangentNode",cls:Fa,func:()=>BA,group:"Inputs.Bitangent.Bitangent View",icon:"arrow-up-left"},bitangentWorld:{clsName:"BitangentNode",cls:Fa,func:()=>D8,group:"Inputs.Bitangent.Bitangent World",icon:"arrows-up-left"},bmat3:{clsName:"ConstNode",cls:hr,func:s2,group:"",icon:""},bmat4:{clsName:"ConstNode",cls:hr,func:c2,group:"",icon:""},bool:{clsName:"ConstNode",cls:hr,func:XN,group:"",icon:""},buffer:{clsName:"BufferNode",cls:__,func:w_,group:"",icon:""},bufferAttribute:{clsName:"undefined",cls:void 0,func:Et.bufferAttribute,group:"",icon:""},burn:{clsName:"BlendModeNode",cls:za,func:YR,group:"Filters.Burn",icon:"color-filter"},bvec2:{clsName:"ConstNode",cls:hr,func:JN,group:"Inputs.Primitives.ivec2",icon:"box-multiple-2"},bvec3:{clsName:"ConstNode",cls:hr,func:e2,group:"Inputs.Primitives.ivec3",icon:"box-multiple-3"},bvec4:{clsName:"ConstNode",cls:hr,func:i2,group:"Inputs.Primitives.ivec4",icon:"box-multiple-4"},bypass:{clsName:"BypassNode",cls:v2,func:Qv,group:"",icon:""},cache:{clsName:"CacheNode",cls:b2,func:e0,group:"",icon:""},call:{clsName:"FunctionCallNode",cls:Dl,func:SL,group:"",icon:""},cameraFar:{clsName:"CameraNode",cls:Il,func:()=>Et.cameraFar,group:"",icon:""},cameraNear:{clsName:"CameraNode",cls:Il,func:()=>Et.cameraNear,group:"",icon:""},cameraNormalMatrix:{clsName:"CameraNode",cls:Il,func:()=>C8,group:"Inputs.Camera.Camera Normal Matrix",icon:"video"},cameraPosition:{clsName:"CameraNode",cls:Il,func:()=>A8,group:"Inputs.Camera.Camera Position",icon:"video"},cameraProjectionMatrix:{clsName:"ContextNode",cls:Gd,func:()=>Pa,group:"Inputs.Camera.Camera Projection Matrix",icon:"video"},cameraViewMatrix:{clsName:"CameraNode",cls:Il,func:()=>Da,group:"Inputs.Camera.Camera View Matrix",icon:"video"},cameraWorldMatrix:{clsName:"CameraNode",cls:Il,func:()=>N8,group:"Inputs.Camera.Camera World Matrix",icon:"video"},ceil:{clsName:"MathNode",cls:dt,func:r_,group:"Math.Functions.Ceil",icon:"math-function"},checker:{clsName:"CheckerNode",cls:XL,func:KL,group:"Procedural.Checker",icon:"border-all"},clamp:{clsName:"MathNode",cls:dt,func:xf,group:"Math.Functions.Clamp",icon:"math-function"},code:{clsName:"CodeNode",cls:Va,func:p0,group:"",icon:""},color:{clsName:"UniformNode",cls:gr,func:()=>new gr(new bt),group:"Inputs.Primitives.Color",icon:"palette"},colorSpaceToLinear:{clsName:"ColorSpaceNode",cls:kl,func:Et.colorSpaceToLinear,group:"",icon:""},colorToDirection:{clsName:"undefined",cls:void 0,func:Et.colorToDirection,group:"Conversions.Color To Direction",icon:"arrows-exchange"},compute:{clsName:"ComputeNode",cls:BL,func:FL,group:"",icon:""},cond:{clsName:"CondNode",cls:N_,func:Hc,group:"",icon:""},context:{clsName:"ContextNode",cls:Gd,func:es,group:"",icon:""},convert:{clsName:"ConvertNode",cls:Yv,func:d2,group:"",icon:""},cos:{clsName:"MathNode",cls:dt,func:eA,group:"Math.Functions.Cosine",icon:"math-function"},createNodeFromType:{clsName:"undefined",cls:void 0,func:Et.createNodeFromType,group:"",icon:""},createNodeMaterialFromType:{clsName:"undefined",cls:void 0,func:Et.createNodeMaterialFromType,group:"",icon:""},cross:{clsName:"MathNode",cls:dt,func:vA,group:"Math.Functions.Cross",icon:"math-function"},cubeTexture:{clsName:"CubeTextureNode",cls:iR,func:Kd,group:"",icon:""},dFdx:{clsName:"MathNode",cls:dt,func:i_,group:"Math.Functions.dFdx",icon:"math-function"},dFdy:{clsName:"MathNode",cls:dt,func:o_,group:"Math.Functions.dFdy",icon:"math-function"},degrees:{clsName:"MathNode",cls:dt,func:q2,group:"Math.Functions.Degrees",icon:"math-function"},densityFog:{clsName:"FogExp2Node",cls:OL,func:Et.densityFog,group:"",icon:""},depth:{clsName:"undefined",cls:void 0,func:()=>Et.depth,group:"",icon:""},depthTexture:{clsName:"undefined",cls:void 0,func:Et.depthTexture,group:"",icon:""},difference:{clsName:"MathNode",cls:dt,func:gA,group:"Filters.Difference",icon:"color-filter"},diffuseColor:{clsName:"PropertyNode",cls:ra,func:()=>uo,group:"",icon:""},directionToColor:{clsName:"undefined",cls:void 0,func:Et.directionToColor,group:"Conversions.Direction To Color",icon:"arrows-exchange"},discard:{clsName:"undefined",cls:void 0,func:Et.discard,group:"",icon:""},distance:{clsName:"MathNode",cls:dt,func:mA,group:"Math.Functions.Distance",icon:"math-function"},div:{clsName:"OperatorNode",cls:Pr,func:jd,group:"Math.Arithmetic Operators.Division",icon:"divide"},dodge:{clsName:"BlendModeNode",cls:za,func:JR,group:"Filters.Dodge",icon:"color-filter"},dot:{clsName:"MathNode",cls:dt,func:Ll,group:"Math.Functions.Dot",icon:"math-function"},dynamicBufferAttribute:{clsName:"undefined",cls:void 0,func:Et.dynamicBufferAttribute,group:"",icon:""},element:{clsName:"ArrayElementNode",cls:Kv,func:u2,group:"",icon:""},equal:{clsName:"OperatorNode",cls:Pr,func:k2,group:"Math.Logic Operators.Equality",icon:"equal-double"},equirectUV:{clsName:"EquirectUVNode",cls:cR,func:Cf,group:"",icon:""},exp:{clsName:"MathNode",cls:dt,func:X2,group:"Math.Functions.Exp",icon:"math-function"},exp2:{clsName:"MathNode",cls:dt,func:K2,group:"",icon:""},expression:{clsName:"ExpressionNode",cls:MA,func:$d,group:"",icon:""},faceDirection:{clsName:"OperatorNode",cls:Pr,func:()=>y_,group:"Inputs.Geometry.Face Direction",icon:"brightness"},faceForward:{clsName:"MathNode",cls:dt,func:Et.faceForward,group:"Math.Functions.Face Forward",icon:"math-function"},float:{clsName:"ConstNode",cls:hr,func:Dt,group:"Inputs.Primitives.float",icon:"box-multiple-1"},floor:{clsName:"MathNode",cls:dt,func:i0,group:"Math.Functions.Floor",icon:"math-function"},fog:{clsName:"FogNode",cls:m0,func:NL,group:"",icon:""},fract:{clsName:"MathNode",cls:dt,func:o0,group:"Math.Functions.Fract",icon:"math-function"},frameId:{clsName:"TimerNode",cls:Af,func:()=>dG,group:"",icon:""},frontFacing:{clsName:"FrontFacingNode",cls:zA,func:()=>VA,group:"Inputs.Geometry.Front Facing",icon:"brightness"},fwidth:{clsName:"MathNode",cls:dt,func:Et.fwidth,group:"",icon:""},getConstNodeType:{clsName:"undefined",cls:void 0,func:Et.getConstNodeType,group:"",icon:""},getGeometryRoughness:{clsName:"MathNode",cls:dt,func:JL,group:"",icon:""},glsl:{clsName:"CodeNode",cls:Va,func:Et.glsl,group:"",icon:""},glslFn:{clsName:"undefined",cls:void 0,func:Et.glslFn,group:"",icon:""},greaterThan:{clsName:"OperatorNode",cls:Pr,func:P2,group:"Math.Logic Operators.Greater Than",icon:"math-greater"},greaterThanEqual:{clsName:"OperatorNode",cls:Pr,func:B2,group:"Math.Logic Operators.Greater Than Or Equal",icon:"math-equal-greater"},hash:{clsName:"undefined",cls:void 0,func:Et.hash,group:"",icon:""},hue:{clsName:"ColorAdjustmentNode",cls:jc,func:rL,group:"Filters.Hue",icon:"color-filter"},imat3:{clsName:"ConstNode",cls:hr,func:o2,group:"Inputs.Primitives.imat3",icon:"box-multiple-3"},imat4:{clsName:"ConstNode",cls:hr,func:a2,group:"Inputs.Primitives.imat4",icon:"box-multiple-4"},instance:{clsName:"InstanceNode",cls:H8,func:Et.instance,group:"",icon:""},instanceIndex:{clsName:"undefined",cls:void 0,func:()=>Et.instanceIndex,group:"",icon:""},instancedBufferAttribute:{clsName:"undefined",cls:void 0,func:Et.instancedBufferAttribute,group:"",icon:""},instancedDynamicBufferAttribute:{clsName:"undefined",cls:void 0,func:Et.instancedDynamicBufferAttribute,group:"",icon:""},int:{clsName:"ConstNode",cls:hr,func:Zv,group:"",icon:""},inverseSqrt:{clsName:"MathNode",cls:dt,func:Et.inverseSqrt,group:"",icon:""},ivec2:{clsName:"ConstNode",cls:hr,func:KN,group:"Inputs.Primitives.ivec2",icon:"box-multiple-2"},ivec3:{clsName:"ConstNode",cls:hr,func:ZN,group:"Inputs.Primitives.ivec3",icon:"box-multiple-3"},ivec4:{clsName:"ConstNode",cls:hr,func:t2,group:"Inputs.Primitives.ivec4",icon:"box-multiple-4"},js:{clsName:"CodeNode",cls:Va,func:Et.js,group:"",icon:""},label:{clsName:"ContextNode",cls:Gd,func:t0,group:"",icon:""},length:{clsName:"MathNode",cls:dt,func:sA,group:"Math.Functions.Length",icon:"math-function"},lessThan:{clsName:"OperatorNode",cls:Pr,func:I2,group:"Math.Logic Operators.Less Than",icon:"math-lower"},lessThanEqual:{clsName:"OperatorNode",cls:Pr,func:D2,group:"Math.Logic Operators.Less Than Or Equal",icon:"math-equal-lower"},lightTargetDirection:{clsName:"undefined",cls:void 0,func:Et.lightTargetDirection,group:"",icon:""},lightingContext:{clsName:"LightingContextNode",cls:Q8,func:M_,group:"",icon:""},lights:{clsName:"LightsNode",cls:c0,func:Y8,group:"",icon:""},lightsWithoutWrap:{clsName:"LightsNode",cls:c0,func:Et.lightsWithoutWrap,group:"",icon:""},linearToColorSpace:{clsName:"ColorSpaceNode",cls:kl,func:Et.linearToColorSpace,group:"",icon:""},linearTosRGB:{clsName:"ColorSpaceNode",cls:kl,func:Et.linearTosRGB,group:"",icon:""},log:{clsName:"MathNode",cls:dt,func:Y2,group:"Math.Functions.Log",icon:"math-function"},log2:{clsName:"MathNode",cls:dt,func:J2,group:"Math.Functions.Log2",icon:"math-function"},loop:{clsName:"undefined",cls:void 0,func:Et.loop,group:"",icon:""},lumaCoeffs:{clsName:"ConstNode",cls:hr,func:()=>iL,group:"",icon:""},luminance:{clsName:"MathNode",cls:dt,func:oL,group:"Filters.Luminance",icon:"color-filter"},mat3:{clsName:"ConstNode",cls:hr,func:ka,group:"Inputs.Primitives.mat3",icon:"box-multiple-3"},mat4:{clsName:"ConstNode",cls:hr,func:W1,group:"Inputs.Primitives.mat4",icon:"box-multiple-4"},matcapUV:{clsName:"MatcapUVNode",cls:ER,func:()=>lG,group:"Inputs.UV.Matcap UV",icon:"chart-treemap"},materialAlphaTest:{clsName:"MaterialNode",cls:bi,func:()=>AA,group:"",icon:""},materialColor:{clsName:"MaterialNode",cls:bi,func:()=>l_,group:"",icon:""},materialEmissive:{clsName:"MaterialNode",cls:bi,func:()=>RA,group:"",icon:""},materialMetalness:{clsName:"MaterialNode",cls:bi,func:()=>OA,group:"",icon:""},materialNormal:{clsName:"undefined",cls:void 0,func:()=>Et.materialNormal,group:"",icon:""},materialOpacity:{clsName:"MaterialNode",cls:bi,func:()=>c_,group:"",icon:""},materialReference:{clsName:"MaterialReferenceNode",cls:NA,func:Wd,group:"",icon:""},materialReflectivity:{clsName:"MaterialNode",cls:bi,func:()=>Et.materialReflectivity,group:"",icon:""},materialRotation:{clsName:"MaterialNode",cls:bi,func:()=>kA,group:"",icon:""},materialRoughness:{clsName:"MaterialNode",cls:bi,func:()=>LA,group:"",icon:""},materialSheen:{clsName:"MaterialNode",cls:bi,func:()=>Et.materialSheen,group:"",icon:""},materialSheenRoughness:{clsName:"MaterialNode",cls:bi,func:()=>Et.materialSheenRoughness,group:"",icon:""},materialShininess:{clsName:"MaterialNode",cls:bi,func:()=>Et.materialShininess,group:"",icon:""},materialSpecularColor:{clsName:"MaterialNode",cls:bi,func:()=>Et.materialSpecularColor,group:"",icon:""},max:{clsName:"MathNode",cls:dt,func:hA,group:"Math.Functions.Max",icon:"math-function"},maxMipLevel:{clsName:"MaxMipLevelNode",cls:dR,func:T_,group:"",icon:""},metalness:{clsName:"PropertyNode",cls:ra,func:()=>E2,group:"",icon:""},min:{clsName:"MathNode",cls:dt,func:dA,group:"Math.Functions.Min",icon:"math-function"},mix:{clsName:"MathNode",cls:dt,func:Pn,group:"Math.Functions.Mix",icon:"math-function"},mod:{clsName:"MathNode",cls:dt,func:n_,group:"Math.Functions.Modulo",icon:"math-function"},modelDirection:{clsName:"undefined",cls:void 0,func:()=>Et.modelDirection,group:"Inputs.Model.Model Direction",icon:"box"},modelNormalMatrix:{clsName:"undefined",cls:void 0,func:()=>p_,group:"Inputs.Model.Model Normal Matrix",icon:"box"},modelPosition:{clsName:"undefined",cls:void 0,func:()=>R8,group:"Inputs.Model.Model Position",icon:"box"},modelScale:{clsName:"undefined",cls:void 0,func:()=>Et.modelScale,group:"",icon:""},modelViewMatrix:{clsName:"ContextNode",cls:Gd,func:()=>zc,group:"Inputs.Model.Model View Matrix",icon:"box"},modelViewPosition:{clsName:"undefined",cls:void 0,func:()=>L8,group:"Inputs.Model.Model View Position",icon:"box"},modelViewProjection:{clsName:"ModelViewProjectionNode",cls:qA,func:x_,group:"",icon:""},modelWorldMatrix:{clsName:"undefined",cls:void 0,func:()=>wf,group:"Inputs.Model.Model World Matrix",icon:"box"},morph:{clsName:"undefined",cls:void 0,func:Et.morph,group:"",icon:""},mul:{clsName:"OperatorNode",cls:Pr,func:Mo,group:"Math.Arithmetic Operators.Multiply",icon:"x"},mx_cell_noise_float:{clsName:"FunctionCallNode",cls:Dl,func:OH,group:"",icon:""},mx_fractal_noise_float:{clsName:"OperatorNode",cls:Pr,func:kH,group:"",icon:""},mx_fractal_noise_vec2:{clsName:"OperatorNode",cls:Pr,func:IH,group:"",icon:""},mx_fractal_noise_vec3:{clsName:"OperatorNode",cls:Pr,func:PH,group:"",icon:""},mx_fractal_noise_vec4:{clsName:"OperatorNode",cls:Pr,func:DH,group:"",icon:""},mx_hsvtorgb:{clsName:"FunctionCallNode",cls:Dl,func:vH,group:"",icon:""},mx_noise_float:{clsName:"OperatorNode",cls:Pr,func:TH,group:"",icon:""},mx_noise_vec2:{clsName:"OperatorNode",cls:Pr,func:EH,group:"",icon:""},mx_noise_vec3:{clsName:"OperatorNode",cls:Pr,func:CH,group:"",icon:""},mx_noise_vec4:{clsName:"OperatorNode",cls:Pr,func:NH,group:"",icon:""},mx_ramplr:{clsName:"MathNode",cls:dt,func:_H,group:"",icon:""},mx_ramptb:{clsName:"MathNode",cls:dt,func:wH,group:"",icon:""},mx_rgbtohsv:{clsName:"FunctionCallNode",cls:Dl,func:yH,group:"",icon:""},mx_srgb_texture_to_lin_rec709:{clsName:"FunctionCallNode",cls:Dl,func:Et.mx_srgb_texture_to_lin_rec709,group:"",icon:""},mx_transform_uv:{clsName:"OperatorNode",cls:Pr,func:MH,group:"",icon:""},mx_worley_noise_float:{clsName:"FunctionCallNode",cls:Dl,func:AH,group:"",icon:""},mx_worley_noise_vec2:{clsName:"FunctionCallNode",cls:Dl,func:RH,group:"",icon:""},mx_worley_noise_vec3:{clsName:"FunctionCallNode",cls:Dl,func:LH,group:"",icon:""},negate:{clsName:"MathNode",cls:dt,func:aA,group:"Math.Functions.Negate",icon:"math-function"},nodeObject:{clsName:"undefined",cls:void 0,func:Ut,group:"",icon:""},nodeObjects:{clsName:"undefined",cls:void 0,func:Jv,group:"",icon:""},nodeProxy:{clsName:"undefined",cls:void 0,func:Ze,group:"",icon:""},normalGeometry:{clsName:"NormalNode",cls:Pl,func:()=>Sf,group:"Inputs.Normal.Normal Geometry",icon:"arrow-bar-up"},normalLocal:{clsName:"NormalNode",cls:Pl,func:()=>Vc,group:"Inputs.Normal.Normal Local",icon:"arrow-bar-up"},normalMap:{clsName:"NormalMapNode",cls:HA,func:b_,group:"",icon:""},normalView:{clsName:"NormalNode",cls:Pl,func:()=>oa,group:"Inputs.Normal.Normal View",icon:"arrow-bar-up"},normalWorld:{clsName:"NormalNode",cls:Pl,func:()=>qd,group:"Inputs.Normal.Normal World",icon:"arrow-bar-up"},normalize:{clsName:"MathNode",cls:dt,func:In,group:"Math.Functions.Normalize",icon:"math-function"},objectDirection:{clsName:"Object3DNode",cls:Oi,func:Et.objectDirection,group:"Inputs.Object.Object Direction",icon:"3d-cube-sphere"},objectNormalMatrix:{clsName:"Object3DNode",cls:Oi,func:Et.objectNormalMatrix,group:"Inputs.Object.Object Normal Matrix",icon:"3d-cube-sphere"},objectPosition:{clsName:"Object3DNode",cls:Oi,func:Et.objectPosition,group:"Inputs.Object.Object Position",icon:"3d-cube-sphere"},objectScale:{clsName:"Object3DNode",cls:Oi,func:Et.objectScale,group:"",icon:""},objectViewMatrix:{clsName:"Object3DNode",cls:Oi,func:Et.objectViewMatrix,group:"Inputs.Object.Object View Matrix",icon:"3d-cube-sphere"},objectViewPosition:{clsName:"Object3DNode",cls:Oi,func:Et.objectViewPosition,group:"Inputs.Object.Object View Position",icon:"3d-cube-sphere"},objectWorldMatrix:{clsName:"Object3DNode",cls:Oi,func:Et.objectWorldMatrix,group:"Inputs.Object.Object World Matrix",icon:"3d-cube-sphere"},oneMinus:{clsName:"MathNode",cls:dt,func:Et.oneMinus,group:"Math.Functions.One Minus",icon:"math-function"},or:{clsName:"OperatorNode",cls:Pr,func:U2,group:"Math.Logic Operators.Or",icon:"switch-horizontal"},oscSawtooth:{clsName:"OscNode",cls:Ua,func:mG,group:"",icon:""},oscSine:{clsName:"OscNode",cls:Ua,func:hG,group:"",icon:""},oscSquare:{clsName:"OscNode",cls:Ua,func:pG,group:"",icon:""},oscTriangle:{clsName:"OscNode",cls:Ua,func:fG,group:"",icon:""},output:{clsName:"PropertyNode",cls:ra,func:()=>Et.output,group:"",icon:""},outputStruct:{clsName:"undefined",cls:void 0,func:Et.outputStruct,group:"",icon:""},overlay:{clsName:"BlendModeNode",cls:za,func:ZR,group:"Filters.Overlay",icon:"color-filter"},pointUV:{clsName:"PointUVNode",cls:WR,func:()=>EG,group:"Inputs.UV.Point UV",icon:"chart-treemap"},positionGeometry:{clsName:"PositionNode",cls:Dn,func:()=>ln,group:"Inputs.Position.Position Geometry",icon:"gizmo"},positionLocal:{clsName:"PositionNode",cls:Dn,func:()=>ts,group:"Inputs.Position.Position Local",icon:"gizmo"},positionView:{clsName:"PositionNode",cls:Dn,func:()=>Cs,group:"Inputs.Position.Position View",icon:"gizmo"},positionViewDirection:{clsName:"PositionNode",cls:Dn,func:()=>Gi,group:"Inputs.Position.Position View Direction",icon:"gizmo"},positionWorld:{clsName:"PositionNode",cls:Dn,func:()=>g_,group:"Inputs.Position.Position World",icon:"gizmo"},positionWorldDirection:{clsName:"PositionNode",cls:Dn,func:()=>v_,group:"Inputs.Position.Position World Direction",icon:"gizmo"},posterize:{clsName:"PosterizeNode",cls:sL,func:aL,group:"Filters.Posterize",icon:"color-filter"},pow:{clsName:"MathNode",cls:dt,func:s_,group:"Math.Arithmetic Operators.Power",icon:"arrow-up-right"},pow2:{clsName:"MathNode",cls:dt,func:yA,group:"",icon:""},pow3:{clsName:"MathNode",cls:dt,func:bA,group:"",icon:""},pow4:{clsName:"MathNode",cls:dt,func:xA,group:"",icon:""},property:{clsName:"PropertyNode",cls:ra,func:Ia,group:"",icon:""},radians:{clsName:"MathNode",cls:dt,func:W2,group:"Math.Functions.Radians",icon:"math-function"},range:{clsName:"RangeNode",cls:PL,func:jG,group:"Procedural.Range",icon:"sort-ascending-2"},rangeFog:{clsName:"FogRangeNode",cls:RL,func:z_,group:"",icon:""},reciprocal:{clsName:"MathNode",cls:dt,func:cA,group:"Math.Functions.Reciprocal",icon:"math-function"},reference:{clsName:"ReferenceNode",cls:n0,func:Vo,group:"",icon:""},reflect:{clsName:"MathNode",cls:dt,func:fA,group:"Math.Functions.Reflect",icon:"math-function"},reflectVector:{clsName:"ReflectVectorNode",cls:eR,func:()=>tR,group:"",icon:""},refract:{clsName:"MathNode",cls:dt,func:wA,group:"Math.Functions.Refract",icon:"math-function"},remainder:{clsName:"OperatorNode",cls:Pr,func:O2,group:"Math.Arithmetic Operators.Remainder",icon:"percentage"},remap:{clsName:"RemapNode",cls:k_,func:AR,group:"Math.Functions.Remap",icon:"math-function"},remapClamp:{clsName:"RemapNode",cls:k_,func:RR,group:"",icon:""},rotateUV:{clsName:"RotateUVNode",cls:OR,func:kR,group:"Utils.UV.Rotate UV",icon:"rotate-clockwise-2"},roughness:{clsName:"PropertyNode",cls:ra,func:()=>Hd,group:"",icon:""},round:{clsName:"MathNode",cls:dt,func:lA,group:"Math.Functions.Round",icon:"math-function"},sRGBToLinear:{clsName:"ColorSpaceNode",cls:kl,func:Et.sRGBToLinear,group:"",icon:""},saturate:{clsName:"MathNode",cls:dt,func:Et.saturate,group:"Math.Functions.Saturate",icon:"math-function"},saturation:{clsName:"ColorAdjustmentNode",cls:jc,func:eL,group:"Filters.Saturation",icon:"color-filter"},screen:{clsName:"BlendModeNode",cls:za,func:QR,group:"Filters.Screen",icon:"color-filter"},scriptable:{clsName:"undefined",cls:void 0,func:Et.scriptable,group:"",icon:""},scriptableValue:{clsName:"undefined",cls:void 0,func:Et.scriptableValue,group:"",icon:""},shader:{clsName:"undefined",cls:void 0,func:Et.shader,group:"",icon:""},shiftLeft:{clsName:"OperatorNode",cls:Pr,func:j2,group:"Math.Bitwise Operators.Shift left",icon:"binary"},shiftRight:{clsName:"OperatorNode",cls:Pr,func:$2,group:"Math.Bitwise Operators.Shift right",icon:"binary"},shininess:{clsName:"PropertyNode",cls:ra,func:()=>Et.shininess,group:"",icon:""},sign:{clsName:"MathNode",cls:dt,func:nA,group:"Math.Functions.Sign",icon:"math-function"},sin:{clsName:"MathNode",cls:dt,func:Q2,group:"Math.Functions.Sine",icon:"math-function"},smoothstep:{clsName:"MathNode",cls:dt,func:Ol,group:"Math.Functions.Smoothstep",icon:"math-function"},specularColor:{clsName:"PropertyNode",cls:ra,func:()=>ia,group:"",icon:""},specularMIPLevel:{clsName:"SpecularMIPLevelNode",cls:pR,func:E_,group:"",icon:""},split:{clsName:"undefined",cls:void 0,func:Et.split,group:"",icon:""},spritesheetUV:{clsName:"SpriteSheetUVNode",cls:PR,func:vG,group:"",icon:""},sqrt:{clsName:"MathNode",cls:dt,func:Z2,group:"Math.Functions.Sqrt",icon:"math-function"},stack:{clsName:"StackNode",cls:iG,func:Et.stack,group:"",icon:""},step:{clsName:"MathNode",cls:dt,func:pA,group:"Math.Functions.Step",icon:"math-function"},storage:{clsName:"undefined",cls:void 0,func:AG,group:"",icon:""},string:{clsName:"ConstNode",cls:hr,func:Et.string,group:"Inputs.Primitives.string",icon:"forms"},sub:{clsName:"OperatorNode",cls:Pr,func:r0,group:"Math.Arithmetic Operators.Subtraction",icon:"minus"},tan:{clsName:"MathNode",cls:dt,func:tA,group:"Math.Functions.Tangent",icon:"math-function"},tangentGeometry:{clsName:"TangentNode",cls:Ba,func:()=>Tf,group:"Inputs.Tangent.Tangent Geometry",icon:"arrows-up-right"},tangentLocal:{clsName:"TangentNode",cls:Ba,func:()=>s0,group:"Inputs.Tangent.Tangent Local",icon:"arrows-up-right"},tangentView:{clsName:"TangentNode",cls:Ba,func:()=>Ef,group:"Inputs.Tangent.Tangent View",icon:"arrows-up-right"},tangentWorld:{clsName:"TangentNode",cls:Ba,func:()=>DA,group:"Inputs.Tangent.Tangent World",icon:"arrows-up-right"},temp:{clsName:"VarNode",cls:f_,func:Mf,group:"",icon:""},texture:{clsName:"TextureNode",cls:_f,func:ho,group:"Inputs.Primitives.texture",icon:"photo"},textureBicubic:{clsName:"undefined",cls:void 0,func:Et.textureBicubic,group:"",icon:""},textureStore:{clsName:"undefined",cls:void 0,func:Et.textureStore,group:"",icon:""},timerDelta:{clsName:"TimerNode",cls:Af,func:uG,group:"",icon:""},timerGlobal:{clsName:"TimerNode",cls:Af,func:cG,group:"",icon:""},timerLocal:{clsName:"TimerNode",cls:Af,func:CR,group:"",icon:""},toneMapping:{clsName:"ToneMappingNode",cls:cL,func:uL,group:"",icon:""},transformDirection:{clsName:"MathNode",cls:dt,func:_A,group:"Math.Functions.Transform Direction",icon:"math-function"},transformedBitangentView:{clsName:"MathNode",cls:dt,func:()=>FA,group:"Inputs.Bitangent.Transformed Bitangent View",icon:"arrows-up-left"},transformedBitangentWorld:{clsName:"MathNode",cls:dt,func:()=>B8,group:"Inputs.Bitangent.Transformed Bitangent World",icon:"arrows-up-left"},transformedClearcoatNormalView:{clsName:"PropertyNode",cls:ra,func:()=>Et.transformedClearcoatNormalView,group:"",icon:""},transformedNormalView:{clsName:"PropertyNode",cls:ra,func:()=>wi,group:"Inputs.Normal.Transformed Normal View",icon:"arrow-bar-up"},transformedNormalWorld:{clsName:"MathNode",cls:dt,func:()=>Et.transformedNormalWorld,group:"Inputs.Normal.Transformed Normal World",icon:"arrow-bar-up"},transformedTangentView:{clsName:"VarNode",cls:f_,func:()=>m_,group:"Inputs.Tangent.Transformed Tangent View",icon:"arrows-up-right"},transformedTangentWorld:{clsName:"MathNode",cls:dt,func:()=>k8,group:"Inputs.Tangent.Transformed Tangent World",icon:"arrows-up-right"},triplanarTexture:{clsName:"TriplanarTexturesNode",cls:I_,func:FR,group:"",icon:""},triplanarTextures:{clsName:"TriplanarTexturesNode",cls:I_,func:BR,group:"",icon:""},trunc:{clsName:"MathNode",cls:dt,func:Et.trunc,group:"",icon:""},tslFn:{clsName:"undefined",cls:void 0,func:Et.tslFn,group:"",icon:""},uint:{clsName:"ConstNode",cls:hr,func:qN,group:"",icon:""},umat3:{clsName:"ConstNode",cls:hr,func:n2,group:"Inputs.Primitives.umat3",icon:"box-multiple-3"},umat4:{clsName:"ConstNode",cls:hr,func:l2,group:"Inputs.Primitives.umat4",icon:"box-multiple-4"},uniform:{clsName:"UniformNode",cls:gr,func:Zi,group:"",icon:""},userData:{clsName:"UserDataNode",cls:RG,func:LG,group:"",icon:""},uv:{clsName:"UVNode",cls:L2,func:ui,group:"",icon:""},uvec2:{clsName:"ConstNode",cls:hr,func:YN,group:"Inputs.Primitives.uvec2",icon:"box-multiple-2"},uvec3:{clsName:"ConstNode",cls:hr,func:QN,group:"Inputs.Primitives.uvec3",icon:"box-multiple-3"},uvec4:{clsName:"ConstNode",cls:hr,func:r2,group:"Inputs.Primitives.uvec4",icon:"box-multiple-4"},varying:{clsName:"VaryingNode",cls:f2,func:Et.varying,group:"",icon:""},vec2:{clsName:"ConstNode",cls:hr,func:kr,group:"Inputs.Primitives.vec2",icon:"box-multiple-2"},vec3:{clsName:"ConstNode",cls:hr,func:Gt,group:"Inputs.Primitives.vec3",icon:"box-multiple-3"},vec4:{clsName:"ConstNode",cls:hr,func:Ir,group:"Inputs.Primitives.vec4",icon:"box-multiple-4"},vertexIndex:{clsName:"undefined",cls:void 0,func:()=>Et.vertexIndex,group:"",icon:""},vibrance:{clsName:"ColorAdjustmentNode",cls:jc,func:tL,group:"Filters.Vibrance",icon:"color-filter"},viewportBottomLeft:{clsName:"ViewportNode",cls:Fn,func:()=>pL,group:"Inputs.Viewport.Viewport Bottom Left",icon:"device-desktop"},viewportBottomRight:{clsName:"ViewportNode",cls:Fn,func:()=>PG,group:"Inputs.Viewport.Viewport Bottom Right",icon:"device-desktop"},viewportCoordinate:{clsName:"ViewportNode",cls:Fn,func:()=>OG,group:"Inputs.Viewport.Viewport Coordinate",icon:"device-desktop"},viewportDepthTexture:{clsName:"undefined",cls:void 0,func:Et.viewportDepthTexture,group:"",icon:""},viewportMipTexture:{clsName:"undefined",cls:void 0,func:Et.viewportMipTexture,group:"",icon:""},viewportResolution:{clsName:"ViewportNode",cls:Fn,func:()=>kG,group:"Inputs.Viewport.Viewport Resolution",icon:"device-desktop"},viewportSharedTexture:{clsName:"undefined",cls:void 0,func:Et.viewportSharedTexture,group:"",icon:""},viewportTexture:{clsName:"undefined",cls:void 0,func:Et.viewportTexture,group:"",icon:""},viewportTopLeft:{clsName:"ViewportNode",cls:Fn,func:()=>d0,group:"Inputs.Viewport.Viewport Top Left",icon:"device-desktop"},viewportTopRight:{clsName:"ViewportNode",cls:Fn,func:()=>IG,group:"Inputs.Viewport.Viewport Top Right",icon:"device-desktop"},wgsl:{clsName:"CodeNode",cls:Va,func:Et.wgsl,group:"",icon:""},wgslFn:{clsName:"undefined",cls:void 0,func:Et.wgslFn,group:"",icon:""},xor:{clsName:"OperatorNode",cls:Pr,func:z2,group:"Math.Bitwise Operators.XOR",icon:"binary"}};class eDe extends qt{constructor(e){super(e.nodeType),this.node=null,this.source=null,this.target=null,this.inclusionType="replace",Object.assign(this,e)}generate(e){return this.node.build(e,this.getNodeType(e))}}const di=eDe,J_=new u0;J_.camera=new li;const jH={LineBasicNodeMaterial:Ai.basic,MeshBasicNodeMaterial:Ai.basic,PointsNodeMaterial:Ai.points,MeshStandardNodeMaterial:Ai.standard,MeshPhysicalNodeMaterial:Ai.physical,MeshPhongNodeMaterial:Ai.phong},tDe={[dt.ATAN2]:"atan"},rDe={low:"lowp",medium:"mediump",high:"highp"};function Bl(r){return`#include <${r}>`}function S0(r){return`${r}Shader`}class Z_ extends R_{constructor(e,t,i,o=null){super(e,t,new iO,null,o),this.shader=i,this.slots={vertex:[],fragment:[]},this._parseShaderLib(),this._parseInclude("fragment","lights_physical_fragment","clearcoat_normal_fragment_begin","transmission_fragment"),this._parseObject(),this._sortSlotsToFlow()}getMethod(e){return tDe[e]||e}addSlot(e,t){this.slots[e].push(t)}_parseShaderLib(){const e=this.material;let t=e.type;if(e.isMeshPhysicalNodeMaterial?t="MeshPhysicalNodeMaterial":e.isMeshStandardNodeMaterial?t="MeshStandardNodeMaterial":e.isMeshPhongNodeMaterial?t="MeshPhongNodeMaterial":e.isMeshBasicNodeMaterial?t="MeshBasicNodeMaterial":e.isPointsNodeMaterial?t="PointsNodeMaterial":e.isLineBasicNodeMaterial&&(t="LineBasicNodeMaterial"),jH[t]!==void 0){const i=jH[t],o=this.shader;o.vertexShader=i.vertexShader,o.fragmentShader=i.fragmentShader,o.uniforms=Rc.merge([i.uniforms,Mt.lights])}}_parseObject(){const{material:e,renderer:t}=this;this.addSlot("fragment",new di({node:oa,nodeType:"vec3",source:Bl("clipping_planes_fragment"),target:"vec3 TransformedNormalView = %RESULT%;",inclusionType:"append"})),t.toneMappingNode&&t.toneMappingNode.isNode===!0&&this.addSlot("fragment",new di({node:e.colorNode,nodeType:"vec4",source:Bl("tonemapping_fragment"),target:""})),e.colorNode&&e.colorNode.isNode&&this.addSlot("fragment",new di({node:e.colorNode,nodeType:"vec4",source:"vec4 diffuseColor = vec4( diffuse, opacity );",target:"vec4 diffuseColor = %RESULT%; diffuseColor.a *= opacity;"})),e.opacityNode&&e.opacityNode.isNode&&this.addSlot("fragment",new di({node:e.opacityNode,nodeType:"float",source:Bl("alphatest_fragment"),target:"diffuseColor.a = %RESULT%;",inclusionType:"append"})),e.normalNode&&e.normalNode.isNode&&this.addSlot("fragment",new di({node:e.normalNode,nodeType:"vec3",source:Bl("normal_fragment_begin"),target:"normal = %RESULT%;",inclusionType:"append"})),e.emissiveNode&&e.emissiveNode.isNode&&this.addSlot("fragment",new di({node:e.emissiveNode,nodeType:"vec3",source:Bl("emissivemap_fragment"),target:"totalEmissiveRadiance = %RESULT%;",inclusionType:"append"})),e.isMeshStandardNodeMaterial&&(e.metalnessNode&&e.metalnessNode.isNode&&this.addSlot("fragment",new di({node:e.metalnessNode,nodeType:"float",source:Bl("metalnessmap_fragment"),target:"metalnessFactor = %RESULT%;",inclusionType:"append"})),e.roughnessNode&&e.roughnessNode.isNode&&this.addSlot("fragment",new di({node:e.roughnessNode,nodeType:"float",source:Bl("roughnessmap_fragment"),target:"roughnessFactor = %RESULT%;",inclusionType:"append"})),e.isMeshPhysicalNodeMaterial&&(e.clearcoatNode&&e.clearcoatNode.isNode?(this.addSlot("fragment",new di({node:e.clearcoatNode,nodeType:"float",source:"material.clearcoat = clearcoat;",target:"material.clearcoat = %RESULT%;"})),e.clearcoatRoughnessNode&&e.clearcoatRoughnessNode.isNode&&this.addSlot("fragment",new di({node:e.clearcoatRoughnessNode,nodeType:"float",source:"material.clearcoatRoughness = clearcoatRoughness;",target:"material.clearcoatRoughness = %RESULT%;"})),e.clearcoatNormalNode&&e.clearcoatNormalNode.isNode&&this.addSlot("fragment",new di({node:e.clearcoatNormalNode,nodeType:"vec3",source:"vec3 clearcoatNormal = nonPerturbedNormal;",target:"vec3 clearcoatNormal = %RESULT%;"})),e.defines.USE_CLEARCOAT=""):delete e.defines.USE_CLEARCOAT,e.sheenNode&&e.sheenNode.isNode?(this.addSlot("fragment",new di({node:e.sheenNode,nodeType:"vec3",source:"material.sheenColor = sheenColor;",target:"material.sheenColor = %RESULT%;"})),e.sheenRoughnessNode&&e.sheenRoughnessNode.isNode&&this.addSlot("fragment",new di({node:e.sheenRoughnessNode,nodeType:"float",source:"material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );",target:"material.sheenRoughness = clamp( %RESULT%, 0.07, 1.0 );"})),e.defines.USE_SHEEN=""):delete e.defines.USE_SHEEN,e.iridescenceNode&&e.iridescenceNode.isNode?(this.addSlot("fragment",new di({node:e.iridescenceNode,nodeType:"float",source:"material.iridescence = iridescence;",target:"material.iridescence = %RESULT%;"})),e.iridescenceIORNode&&e.iridescenceIORNode.isNode&&this.addSlot("fragment",new di({node:e.iridescenceIORNode,nodeType:"float",source:"material.iridescenceIOR = iridescenceIOR;",target:"material.iridescenceIOR = %RESULT%;"})),e.iridescenceThicknessNode&&e.iridescenceThicknessNode.isNode&&this.addSlot("fragment",new di({node:e.iridescenceThicknessNode,nodeType:"float",source:"material.iridescenceThickness = iridescenceThicknessMaximum;",target:"material.iridescenceThickness = %RESULT%;"})),e.defines.USE_IRIDESCENCE=""):delete e.defines.USE_IRIDESCENCE,e.iorNode&&e.iorNode.isNode&&this.addSlot("fragment",new di({node:e.iorNode,nodeType:"float",source:"material.ior = ior;",target:"material.ior = %RESULT%;"})),e.specularColorNode&&e.specularColorNode.isNode&&this.addSlot("fragment",new di({node:e.specularColorNode,nodeType:"vec3",source:"vec3 specularColorFactor = specularColor;",target:"vec3 specularColorFactor = %RESULT%;"})),e.specularIntensityNode&&e.specularIntensityNode.isNode&&this.addSlot("fragment",new di({node:e.specularIntensityNode,nodeType:"float",source:"float specularIntensityFactor = specularIntensity;",target:"float specularIntensityFactor = %RESULT%;"})),e.transmissionNode&&e.transmissionNode.isNode?(this.addSlot("fragment",new di({node:e.transmissionNode,nodeType:"float",source:"material.transmission = transmission;",target:"material.transmission = %RESULT%;"})),e.thicknessNode&&e.thicknessNode.isNode&&this.addSlot("fragment",new di({node:e.thicknessNode,nodeType:"float",source:"material.thickness = thickness;",target:"material.thickness = %RESULT%;"})),e.attenuationDistanceNode&&e.attenuationDistanceNode.isNode&&this.addSlot("fragment",new di({node:e.attenuationDistanceNode,nodeType:"float",source:"material.attenuationDistance = attenuationDistance;",target:"material.attenuationDistance = %RESULT%;"})),e.attenuationColorNode&&e.attenuationColorNode.isNode&&this.addSlot("fragment",new di({node:e.attenuationColorNode,nodeType:"vec3",source:"material.attenuationColor = attenuationColor;",target:"material.attenuationColor = %RESULT%;"})),e.transmission=1,e.defines.USE_TRANSMISSION=""):(e.transmission=0,delete e.defines.USE_TRANSMISSION))),e.positionNode&&e.positionNode.isNode&&this.addSlot("vertex",new di({node:e.positionNode,nodeType:"vec3",source:Bl("begin_vertex"),target:"transformed = %RESULT%;",inclusionType:"append"})),e.sizeNode&&e.sizeNode.isNode&&this.addSlot("vertex",new di({node:e.sizeNode,nodeType:"float",source:"gl_PointSize = size;",target:"gl_PointSize = %RESULT%;"}))}getTexture(e,t,i){return e.isTextureCube?`textureCube( ${t}, ${i} )`:`texture2D( ${t}, ${i} )`}getTextureBias(e,t,i,o){return this.material.extensions!==void 0&&(this.material.extensions.shaderTextureLOD=!0),`textureLod( ${t}, ${i}, ${o} )`}getUniforms(e){const t=this.uniforms[e];let i="";for(const o of t){if(/^(modelViewMatrix|projectionMatrix)$/.test(o.name))continue;let n=null;o.type==="texture"?n=`sampler2D ${o.name}; `:o.type==="cubeTexture"?n=`samplerCube ${o.name}; `:n=`${this.getVectorType(o.type)} ${o.name}; `;const s=o.node.precision;s!==null?n="uniform "+rDe[s]+" "+n:n="uniform "+n,i+=n}return i}getAttributes(e){let t="";if(e==="vertex"){const i=this.attributes;for(const o of i)/^(position|normal|uv[1-3]?)$/.test(o.name)||(t+=`attribute ${o.type} ${o.name}; `)}return t}getVaryings(e){let t="";const i=this.varyings;if(e==="vertex")for(const o of i)t+=`${o.needsInterpolation?"varying":"/*varying*/"} ${o.type} ${o.name}; `;else if(e==="fragment")for(const o of i)o.needsInterpolation&&(t+=`varying ${o.type} ${o.name}; `);return t}addCode(e,t,i,o=this){const n=S0(e);let s=o[n];const a=s.indexOf(t);if(a!==-1){const l=s.substring(0,a+t.length),c=s.substring(a+t.length);s=`${l}
${i}
${c}`}o[n]=s}replaceCode(e,t,i,o=this){const n=S0(e);o[n]=o[n].replaceAll(t,i)}getVertexIndex(){return"gl_VertexID"}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord"}isFlipY(){return!0}buildCode(){const e={};for(const t of mf){const i=this.getUniforms(t),o=this.getAttributes(t),n=this.getVaryings(t),s=this.getVars(t),a=this.getCodes(t);e[t]=`${this.getSignature()}
// <node_builder>

// uniforms
${i}

// attributes
${o}

// varyings
${n}

// vars
${s}

// codes
${a}

// </node_builder>

${this.shader[S0(t)]}
`}this.vertexShader=e.vertex,this.fragmentShader=e.fragment}build(){return super.build(),this._addSnippets(),this._addUniforms(),this._updateUniforms(),this.shader.vertexShader=this.vertexShader,this.shader.fragmentShader=this.fragmentShader,this}_parseInclude(e,...t){for(const i of t){const o=Bl(i),n=lr[i],s=S0(e);this.shader[s]=this.shader[s].replaceAll(o,n)}}_sortSlotsToFlow(){for(const e of mf){const t=this.shader[S0(e)],i=this.slots[e].sort((o,n)=>t.indexOf(o.source)>t.indexOf(n.source)?1:-1);for(const o of i)this.addFlow(e,o)}}_addSnippets(){for(const e of mf){for(const t of this.slots[e]){const i=this.getFlowData(t),o=t.inclusionType,n=t.source,s=i.code+`
	`+t.target.replace("%RESULT%",i.result);o==="append"?this.addCode(e,n,s):o==="replace"?this.replaceCode(e,n,s):console.warn(`Inclusion type "${o}" not compatible.`)}this.addCode(e,"main() {",`
	`+this.flowCode[e])}}_addUniforms(){for(const e of mf)for(const t of this.uniforms[e])this.shader.uniforms[t.name]=t}_updateUniforms(){J_.object=this.object,J_.renderer=this.renderer;for(const e of this.updateNodes)J_.updateNode(e)}}const iDe=Z_.prototype._parseShaderLib;Z_.prototype._parseShaderLib=function(r){const e={...this.shader.uniforms};iDe.call(this,r),this.shader.uniforms=Object.assign(e,this.shader.uniforms)};const $H={};function WH(r){const e=Object.entries(r);return e.forEach(t=>delete r[t[0]]),e.sort((t,i)=>t[0].localeCompare(i[0])),e.forEach(t=>r[t[0]]=t[1]),r}function aO(r){return/Material$/.test(r)||!!x0[r]}const oDe=new Set("bool,int,float,vec2,vec3,vec4,mat3,mat4,code,color,uint,int,property,sampler,texture,cubeTexture,ivec2,uvec2,bvec2,ivec3,uvec3,bvec3,ivec4,uvec4,bvec4,imat3,umat3,bmat3,imat4,umat4,bmat4".split(","));function nDe(r){return oDe.has(r)}const sDe=new Set("void,Boolean,Number,String,Script,Color,Vector2,Vector3,Vector4,Matrix3,Matrix4,Euler,Texture,CubeTexture,Material,Object3D,Object".split(","));function aDe(r){return sDe.has(r.split("[")[0])}function lDe(r){return nDe(r)||aDe(r)}function cDe(r,e){for(const t of r)if(!e.includes(t))return!1;return!0}function Q_(r,e){if(r===e)return!0;const t=hDe(r);if(!t||!t.proto)return!1;if(Array.isArray(t.proto)){for(const i of t.proto)if(Q_(i,e))return!0;return!1}return Q_(t.proto,e)}function uDe(r,e){if(e.includes(r))return!0;for(const t of e)if(Q_(r,t))return!0;return!1}function dDe(r){let e=null,t=null;const i=[];for(const o of r){const[,n,s]=/^([^[\]]+)(\[\])?$/.exec(o)||[];if(n.startsWith("types.")){const a=HPe[n.substring(6)];if(!a)throw console.error("not found"),"type not found";Array.isArray(a)?t?t.push(...a):(t=a,i.push(a)):e?Object.assign(e,a):(e=a,i.push(a))}else if(o==="null")i.push(null);else if(n==="boolean"||/true|false/i.test(o))i.push("Boolean"+(s||""));else if(n==="string")i.push("String"+(s||""));else if(n==="number")i.push("Number"+(s||""));else if(!lDe(n)&&!aO(n)){console.warn(`type[${o}] unsupported!`);continue}else i.push(o)}return i}function qH(r,e,t){for(const[i,o]of Object.entries(e)){const n=dDe(o.replace(/\s/mg,"").split("|")),[,s,a]=/^(.+)(Node)$/.exec(i)||[,i],l=!!a||n.findIndex(u=>typeof u=="string"&&aO(u))!==-1,c=r[s]||(r[s]={types:n,direct:t});l&&(c.nname=i),XH(c.types,n)}return r}function XH(r,e){for(const t of e)r.includes(t)||r.push(t)}function KH(r,e){for(const[t,i]of Object.entries(e)){const o=r[t];if(!o){r[t]={...i};continue}if(o.nname&&i.nname&&o.nname!==i.nname)throw"type mismatched!";o.nname||(o.nname=i.nname),XH(o.types,i.types)}return r}function M0(r){const e=t=>{const i=$H[t];if(i)return i;const o={in:{},out:{}},n=x0[t]||W_[t];if(!n)return o;let s=n.proto;if(s){s=Array.isArray(s)?s:[s];for(const a of s){const l=e(a);KH(o.in,l.in),KH(o.out,l.out)}}return qH(o.in,n.members,"in"),n.out&&qH(o.out,n.out,"out"),WH(o.in),WH(o.out),$H[t]=o,o};return e(r)}function lO(r){return M0(kf(r))}function kf(r){return r.constructor.name.replace(/^_/,"")}function hDe(r){return x0[r]||W_[r]}function pDe(r,e){let t;if(r===void 0?t="undefined":r===null?t="null":t=kf(r),!!t){for(const i of e)if(r[`is${i}`]||Q_(t,i))return i}}function If(r,e,t,i){const o=r.name;if(x0[o])throw console.error("exists"),"exists";ut(o,r),x0[o]={cls:r,members:e,proto:t};for(const[n,s]of Object.entries(i))uO(n,s)}const cO=[],ew={};Object.entries(w0).forEach(([r,e])=>{uO(r,e)});function uO(r,e){if(ew[r])throw console.error("exists"),"exists";const t=(e.group||`Others.${r}`).split(".");let i=cO;const o=t.pop();for(const a of t){let l=i.find(c=>c.name===a);l||(l={name:a,icon:"",children:[]},i.push(l)),i=l.children}if(i.find(a=>a.name===r))throw console.error("exists"),"aready exists";const n=M0(e.clsName),s={name:r,title:o||r,icon:e.icon,f:e.func,in:{...n.in},out:{...n.out}};ew[r]=s,w0[r]=e,i.push(s)}function dO(r){return ew[r]}function fDe(r){const e=ew[r];if(!e)throw console.error("not found"),"not found";return e.f()}class hO extends HH{constructor(){super(...arguments);Qe(this,"isBezieoLineGeometry",!0)}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};return t.uuid=this.uuid,t.type="BufferGeometry",t.data={},t}}class T0 extends oO{constructor(){super();Qe(this,"isBezierLineMaterial",!0);this.type="BezierLineMaterial"}}class YH extends QPe{constructor(){super(new hO,new T0);Qe(this,"isBezierLine",!0);Qe(this,"fromPosition",new Q);Qe(this,"toPosition",new Q(1,1,0));Qe(this,"ctrl1",new Q(.2,.1,0));Qe(this,"ctrl2",new Q(.8,.9,0));Qe(this,"density",10);Qe(this,"_tmpSize",new We);this.type="BezierLine",this.material.worldUnits=!0,this.material.linewidth=.1,this.userData.extend="BezierLine",this.onBeforeRender=(t,i,o,n,s,a)=>{const{x:l,y:c}=t.getSize(this._tmpSize);(this.material.resolution.x!==l||this.material.resolution.y!==c)&&(this.material.resolution.set(l,c),this.material.uniformsNeedUpdate=!0)},this.updatePositions()}updatePositions(){const t=new tN(this.fromPosition,this.ctrl1,this.ctrl2,this.toPosition),i=Math.abs(this.fromPosition.clone().distanceTo(this.toPosition)),o=t.getPoints(this.density*i);this.geometry.setPositions(o.map(n=>[n.x,n.y,n.z]).flat()),this.computeLineDistances()}serialize(t){t.type="Mesh",t.fromPosition=this.fromPosition.toArray(),t.toPosition=this.toPosition.toArray(),t.ctrl1=this.ctrl1.toArray(),t.ctrl2=this.ctrl2.toArray(),t.density=this.density}deserialize(t){this.type="BezierLine",this.fromPosition.fromArray(t.fromPosition),this.toPosition.fromArray(t.toPosition),this.ctrl1.fromArray(t.ctrl1),this.ctrl2.fromArray(t.ctrl2),this.density=t.density,this.geometry instanceof hO||(this.geometry=new hO),this.updatePositions()}}WPe(T0),As({cls:YH,create:()=>new YH,members:{fromPosition:"Vector3",toPosition:"Vector3",ctrl1:"Vector3",ctrl2:"Vector3",density:"Number"},proto:"Mesh",group:"Shapes.Bezier Line",icon:"line"}),If(T0,{color:"Color",dashed:"Boolean",dashScale:"Number",dashSize:"Number",dashOffset:"Number",gapSize:"Number",opacity:"Number",linewidth:"Number",alphaToCoverage:"Boolean",worldUnits:"Boolean"},"ShaderMaterial",{bezierLineMaterial:{clsName:"bezierLineMaterial",cls:T0,func:()=>new T0,group:"Material.Bezier Line Material",icon:"brand-medium"}}),As({cls:li,create:()=>new li,members:{},group:"Cameras.Perspective Camera",icon:"camera"}),As({cls:Na,create:()=>new Na,members:{},group:"Cameras.Orthographic Camera",icon:"camera"});class JH extends yt{}class pO extends yt{}class mDe extends yt{}As({cls:JH,create:()=>new JH(new xd(1,1)),members:{},proto:"Mesh",group:"Shapes.Plane",icon:"plane"}),As({cls:pO,create:()=>new pO(new ni(1,1,1,10,10,10)),members:{},proto:"Mesh",group:"Shapes.Box",icon:"box"}),As({cls:mDe,create:()=>new pO(new Dc(1,50,50)),members:{},proto:"Mesh",group:"Shapes.Sphere",icon:"sphere"}),As({cls:Id,create:()=>{const r=new Id;return r.shadow.mapSize.x=2048,r.shadow.mapSize.y=2048,r},members:{},group:"Lights.Point Light",icon:"bulb"}),As({cls:Bc,create:()=>{const r=new Bc;return r.shadow.mapSize.x=2048,r.shadow.mapSize.y=2048,r},members:{},group:"Lights.Spot Light",icon:"bulb"}),As({cls:Pd,create:()=>{const r=new Pd;return r.shadow.mapSize.x=2048,r.shadow.mapSize.y=2048,r.shadow.bias=-.1,r},members:{},group:"Lights.Directional Light",icon:"bulb"}),As({cls:ff,create:()=>new ff,members:{},group:"Lights.Ambient Light",icon:"bulb"}),As({cls:kd,create:()=>new kd,members:{},group:"Lights.Hemisphere Light",icon:"bulb"});const tw=Symbol("getProxyRawObject");class dn extends qt{constructor(t){super("void");Qe(this,"isObject3DNode2",!0);Qe(this,"typesExtended",{in:{},out:{}});Qe(this,"eventDispatcher",null);Qe(this,"_object3d",null);t&&(this.object=t),this.updateType="none"}get objectType(){var t;return(t=this._object3d)==null?void 0:t.constructor.name}get object(){return this._object3d}set object(t){if(typeof t!="object"||!t.isObject3D)throw"not allowed";this._object3d=new Proxy(t,{get(i,o,n){if(o===tw)return i;if(typeof o!="string")return Reflect.get(i,o,n);const s=o.split(".");if(s.length>1){let a=Reflect.get(i,s[0],n);for(let l=1;l<s.length;l++)a=a[s[l]];return a}return Reflect.get(i,o,n)},set:(i,o,n,s)=>{if(typeof o!="string")return Reflect.set(i,o,n,s);if(Reflect.get(i,o,s)===n)return!0;let a=!0;const l=o.split(".");if(l.length>1){let c=Reflect.get(i,l[0],s);const u=l.pop();for(let d=1;d<l.length;d++)c=c[l[d]];if(c[u]===n)return!0;c[u]=n}else a=Reflect.set(i,o,n,s);if(this.eventDispatcher){const c=!!this.typesExtended.in[o];this.eventDispatcher.dispatchEvent({type:c?"nodeEventInputChanged":"nodeEventOutputChanged",source:null,node:this,fields:[o]})}return a}}),Object.defineProperty(this,"_object3d",{writable:!1}),this.initTypes()}getObjectsExtended(){return{in:this.object,out:this.object}}fill(t,i){this._object3d&&typeof this._object3d=="string"&&(this.object=t.getObjectByProperty("uuid",this._object3d))}dispose(){}serialize(t){var i;if(!this._object3d)throw"error";super.serialize(t),t.object=(i=this._object3d)==null?void 0:i.uuid}deserialize(t){super.deserialize(t),this._object3d=t.object}initTypes(){const t=M0(this.objectType);if(!t)throw console.error(`class[${this.objectType}] not found`),`class[${this.objectType}] not found`;Object.assign(this.typesExtended.in,t.in),Object.assign(this.typesExtended.out,t.out)}}If(dn,{object:"Object3D"},"",{object3DRef:{clsName:"Object3DNode2",cls:dn,func:()=>new dn,group:"Object.Object3D Reference",icon:"box"}});function ZH(r){Object.keys(r).forEach(e=>delete r[e])}const QH={Boolean:{fromJson:r=>new Boolean(r),toJson:r=>r},Number:{fromJson:r=>new Number(r||0),toJson:r=>r},String:{fromJson:r=>new String(r||""),toJson:r=>r},Script:{fromJson:r=>new String(r||""),toJson:r=>r},Color:{fromJson:r=>new bt().fromArray(r||[]),toJson:r=>r.toArray()},Vector2:{fromJson:r=>new We().fromArray(r||[]),toJson:r=>r.toArray()},Vector3:{fromJson:r=>new Q().fromArray(r||[]),toJson:r=>r.toArray()},Vector4:{fromJson:r=>new Kt().fromArray(r||[]),toJson:r=>r.toArray()},Euler:{fromJson:r=>new Rn().fromArray(r||[]),toJson:r=>r.toArray()},bool:{label:"bool UniformNode",fromJson:r=>{const e=new gr(!1,"bool");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},float:{label:"float UniformNode",fromJson:r=>{const e=new gr(0,"float");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},color:{label:"color UniformNode",fromJson:r=>{const e=new gr(new bt,"color");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},vec2:{label:"vec2 UniformNode",fromJson:r=>{const e=new gr(new We);return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},vec3:{label:"vec3 UniformNode",fromJson:r=>{const e=new gr(new Q);return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},vec4:{label:"vec4 UniformNode",fromJson:r=>{const e=new gr(new Q);return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},int:{label:void 0,fromJson:r=>{const e=new gr(0,"int");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},mat3:{label:void 0,fromJson:r=>{const e=new gr(new er);return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},mat4:{label:void 0,fromJson:r=>{const e=new gr(new Xt);return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},code:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},uint:{label:void 0,fromJson:r=>{const e=new gr(0,"uint");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},void:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},property:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},sampler:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},texture:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},cubeTexture:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},ivec2:{label:void 0,fromJson:r=>{const e=new gr(new We,"ivec2");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},uvec2:{label:void 0,fromJson:r=>{const e=new gr(new We,"uvec2");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},bvec2:{label:void 0,fromJson:r=>{const e=new gr(new We,"bvec2");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},ivec3:{label:void 0,fromJson:r=>{const e=new gr(new Q,"ivec3");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},uvec3:{label:void 0,fromJson:r=>{const e=new gr(new Q,"uvec3");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},bvec3:{label:void 0,fromJson:r=>{const e=new gr(new Q,"bvec3");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},ivec4:{label:void 0,fromJson:r=>{const e=new gr(new Kt,"ivec4");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},uvec4:{label:void 0,fromJson:r=>{const e=new gr(new Kt,"uvec4");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},bvec4:{label:void 0,fromJson:r=>{const e=new gr(new Kt,"bvec4");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},imat3:{label:void 0,fromJson:r=>{const e=new gr(new er,"imat3");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},umat3:{label:void 0,fromJson:r=>{const e=new gr(new er,"umat3");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},bmat3:{label:void 0,fromJson:r=>{const e=new gr(new er,"bmat3");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},imat4:{label:void 0,fromJson:r=>{const e=new gr(new Xt,"imat4");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},umat4:{label:void 0,fromJson:r=>{const e=new gr(new Xt,"umat4");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},bmat4:{label:void 0,fromJson:r=>{const e=new gr(new Xt,"bmat4");return r&&e.deserialize(r),e},toJson:r=>{const e={};return r.serialize(e),r}},Matrix3:{label:void 0,fromJson:r=>new er,toJson:r=>{const e={};return r.serialize(e),r}},Matrix4:{label:void 0,fromJson:r=>new Xt,toJson:r=>{const e={};return r.serialize(e),r}},Texture:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},CubeTexture:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},Material:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},Object3D:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},Object:{label:void 0,fromJson:r=>r?JSON.parse(r):Object.create({}),toJson:r=>JSON.stringify(r)}};function rw(r,e){return QH[r].fromJson(e)}function ej(r,e){return QH[r].toJson(e)}const gDe=globalThis.AsyncFunction||(async r=>r).constructor;class Pf extends dn{constructor(t){super(t);Qe(this,"isScriptNode",!0);Qe(this,"inputs");Qe(this,"outputs");Qe(this,"enabled",!1);Qe(this,"_parametersProps",["params","out","THREE","TSL","global","window","document"]);Qe(this,"_parameters",[null,null,IN,b0,globalThis,null,null]);Qe(this,"_code","");Qe(this,"_main");this.inputs=new Proxy({},{set:(i,o,n,s)=>typeof o!="string"?Reflect.set(i,o,n,s):Reflect.get(i,o,s)===n?!0:(this.eventDispatcher&&this.eventDispatcher.dispatchEvent({type:"nodeEventInputChanged",source:null,node:this,fields:[o]}),Reflect.set(i,o,n,s))}),this.outputs=new Proxy({},{set:(i,o,n,s)=>typeof o!="string"?Reflect.set(i,o,n,s):Reflect.get(i,o,s)===n?!0:(this.eventDispatcher&&this.eventDispatcher.dispatchEvent({type:"nodeEventOutputChanged",source:null,node:this,fields:[o]}),Reflect.set(i,o,n,s))}),this._parameters[0]=this.inputs,this._parameters[1]=this.outputs,this._main=this.compile()}get code(){return this._code}set code(t){this._code=t;try{this._main=this.compile()}catch(i){console.warn(i)}}async exec(t){this.enabled&&this._code&&this.object&&await this._main.call(this.object,...this._parameters)}getObjectsExtended(){return{in:this.inputs,out:this.outputs}}initTypes(){}addInput(t,i){if(this.typesExtended.in[t])return;this.typesExtended.in[t]={types:[i],direct:"in",nname:/^[a-z]/.test(i)?t:void 0};const o=rw(i);return this.inputs[t]=o,o}removeInput(t){return this.typesExtended.in[t]?(delete this.typesExtended.in[t],delete this.inputs[t],!0):!1}addOutput(t,i){if(this.typesExtended.out[t])return;this.typesExtended.out[t]={types:[i],direct:"out",nname:/^[a-z]/.test(i)?t:void 0};const o=rw(i);return this.outputs[t]=o,o}removeOutput(t){return this.typesExtended.out[t]?(delete this.typesExtended.out[t],delete this.outputs[t],!0):!1}serialize(t){var i;super.serialize(t),t.object=(i=this.object)==null?void 0:i.uuid,t.types={...this.typesExtended},t.enabled=this.enabled,t.inputs={};for(const[o,n]of Object.entries(this.typesExtended.in))t.inputs[o]=ej(n.types[0],this.inputs[o]);t.outputs={};for(const[o,n]of Object.entries(this.typesExtended.out))t.outputs[o]=ej(n.types[0],this.outputs[o]);t.code=this._code}deserialize(t){var i,o;if(super.deserialize(t),ZH(this.typesExtended.in),(i=t.types)==null?void 0:i.in){Object.assign(this.typesExtended.in,t.types.in);for(const[n,s]of Object.entries(this.typesExtended.in)){const a=t.inputs?t.inputs[n]:void 0;this.inputs[n]=rw(s.types[0],a)}}if(ZH(this.typesExtended.out),(o=t.types)==null?void 0:o.out){Object.assign(this.typesExtended.out,t.types.out);for(const[n,s]of Object.entries(this.typesExtended.out)){const a=t.outputs?t.outputs[n]:void 0;this.outputs[n]=rw(s.types[0],a)}}this.code=t.code,this.enabled=t.enabled}compile(){return new gDe(this._parametersProps,this._code)}}If(Pf,{enabled:"Boolean",code:"Script"},"Object3DNode2",{object3D:{clsName:"Object3DNode2",cls:dn,func:()=>new dn,group:"Object.Object3D",icon:"box"}});class iw extends Pf{constructor(t){super(t);Qe(this,"isUpdateNode",!0)}onUpdate(t,i){if(this.enabled&&this._code&&this.object)try{this._main.call(this.object,...this._parameters)}catch(o){console.error(o)}}compile(){return new Function(...this._parametersProps,this._code)}}If(iw,{},"ScriptNode",{update:{clsName:"UpdateNode",cls:iw,func:()=>new iw,group:"Scripts.On Update",icon:"refresh"}});class is extends Pf{constructor(){super(...arguments);Qe(this,"isScriptBlockNode",!0);Qe(this,"_prev");Qe(this,"_next")}get prev(){return this._prev}set prev(t){this._prev=t}get next(){return this._next}set next(t){this._next=t}async exec(t){this.enabled&&this._code&&this.object&&(await this._main.call(this.object,...this._parameters),this._next&&await this._next.exec(t))}fill(t,i){super.fill(t,i),this.prev&&typeof this.prev=="string"&&(this.prev=i[this.prev]),this.next&&typeof this.next=="string"&&(this.next=i[this.next])}serialize(t){var i,o;super.serialize(t),t.prev=(i=this.prev)==null?void 0:i.uuid,t.next=(o=this.next)==null?void 0:o.uuid}deserialize(t){super.deserialize(t),this.prev=t.prev,this.next=t.next}}If(is,{},"ScriptNode",{scriptBlock:{clsName:"UpdateNode",cls:is,func:()=>new is,group:"Scripts.Script Block",icon:"brand-javascript"}});class Rs extends is{constructor(t,i){super(t);Qe(this,"isEventListenerNode",!0);Qe(this,"_event","onBorn");Qe(this,"_listener");i&&(this._event=i)}get object(){return super.object}set object(t){super.object=t,this.resetEventlisten(this._event)}get event(){return this._event}set event(t){this.resetEventlisten(t),this._event=t}serialize(t){super.serialize(t),t.event=this.event}deserialize(t){super.deserialize(t),this.event=t.event}resetEventlisten(t){this.object===null||typeof this.object!="object"||(this._listener&&this.object.removeEventListener(this.event,this._listener),this._listener=i=>{this.exec(i)},this.object.addEventListener(t,this._listener))}dispose(){super.dispose(),this._listener&&typeof this.object=="object"&&this.object.removeEventListener(this.event,this._listener)}}If(Rs,{event:"String"},"ScriptBlockNode",{eventOnBorn:{clsName:"EventListenerNode",cls:Rs,func:()=>new Rs(void 0,"onBorn"),group:"Scripts.On Born",icon:"loader"},eventOnDead:{clsName:"EventListenerNode",cls:Rs,func:()=>new Rs(void 0,"onDead"),group:"Scripts.On Dead",icon:"bell-off"},eventOnCollisionEnter:{clsName:"EventListenerNode",cls:Rs,func:()=>new Rs(void 0,"onCollisionEnter"),group:"Scripts.On Collision Enter",icon:"arrows-shuffle"},eventOnCollisionLeave:{clsName:"EventListenerNode",cls:Rs,func:()=>new Rs(void 0,"onCollisionLeave"),group:"Scripts.On Collision Leave",icon:"arrow-bounce"},eventCustom:{clsName:"EventListenerNode",cls:Rs,func:()=>new Rs(void 0,"onCustomEvent"),group:"Scripts.On Custom Event",icon:"calendar-event"}});const vDe={lineBasicMaterial:{clsName:"LineBasicMaterial",cls:Fi,func:()=>new Fi,group:"Material.Line Basic Material",icon:"brand-medium"},lineBasicNodeMaterial:{clsName:"LineBasicNodeMaterial",cls:V_,func:()=>new V_,group:"Material.Line Basic Material Node",icon:"brand-medium"},meshBasicMaterial:{clsName:"MeshBasicMaterial",cls:Uo,func:()=>new Uo,group:"Material.Mesh Basic Material",icon:"brand-medium"},meshBasicNodeMaterial:{clsName:"MeshBasicNodeMaterial",cls:g0,func:()=>new g0,group:"Material.Mesh Basic Material Node",icon:"brand-medium"},meshPhysicalMaterial:{clsName:"MeshPhysicalMaterial",cls:hf,func:()=>new hf({}),group:"Material.Mesh Physical Material",icon:"brand-medium"},meshPhysicalNodeMaterial:{clsName:"MeshPhysicalNodeMaterial",cls:G_,func:()=>new G_({}),group:"Material.Mesh Physical Material Node",icon:"brand-medium"},meshStandardMaterial:{clsName:"MeshStandardMaterial",cls:Nd,func:()=>new Nd,group:"Material.Mesh Standard Material",icon:"brand-medium"},meshStandardNodeMaterial:{clsName:"MeshStandardNodeMaterial",cls:y0,func:()=>new y0,group:"Material.Mesh Standard Material Node",icon:"brand-medium"},pointsMaterial:{clsName:"PointsMaterial",cls:Td,func:()=>new Td,group:"Material.Points Material",icon:"brand-medium"},pointsNodeMaterial:{clsName:"PointsNodeMaterial",cls:H_,func:()=>new H_,group:"Material.Points Material Node",icon:"brand-medium"},spriteMaterial:{clsName:"SpriteMaterial",cls:kc,func:()=>new kc,group:"Material.Sprite Material",icon:"brand-medium"},spriteNodeMaterial:{clsName:"SpriteNodeMaterial",cls:j_,func:()=>new j_,group:"Material.Sprite Material Node",icon:"brand-medium"}};for(const[r,e]of Object.entries(vDe))uO(r,e);function tj(r,e){return r instanceof dn?r:new Proxy(r,{get(t,i,o){if(i===tw)return t;if(typeof i!="string")return Reflect.get(t,i,o);if(Reflect.has(t,`${i}Node`)){const s=Reflect.get(t,`${i}Node`,o);if(s!==null)return s}const n=i.split(".");if(n.length>1){let s=Reflect.get(t,n[0],o);for(let a=1;a<n.length;a++)s=s[n[a]];return s}return Reflect.get(t,i,o)},set:(t,i,o,n)=>{if(typeof i!="string")return Reflect.set(t,i,o,n);let s=i;Reflect.has(t,`${i}Node`)&&o&&o.isNode&&(s=`${i}Node`);let a=!0;const l=i.split(".");if(l.length>1){let c=Reflect.get(t,l[0],n);const u=l.pop();for(let d=1;d<l.length;d++)c=c[l[d]];if(c[u]===o)return!0;c[u]=o}else{if(Reflect.get(t,s,n)===o)return!0;a=Reflect.set(t,s,o,n)}return a&&e.dispatchEvent({type:"nodeEventInputChanged",source:null,node:r,fields:[i]}),a}})}var rj=(r=>(r[r.None=0]="None",r[r.Ref=1]="Ref",r[r.Push=2]="Push",r[r.Chain=3]="Chain",r))(rj||{});class fO extends ao{constructor(t){super();Qe(this,"nodes",[]);Qe(this,"isLocked",!1);this.object=t,t.graph||(t.graph=this),this.addEventListener("nodeEventOutputChanged",({node:i,fields:o})=>{for(const n of o)this.applyNodePins(i._parentGraphNode,n,"out")})}newGraphNode(t,i){const o=new Proxy({x:0,y:0},{set:(s,a,l,c)=>{if(l===Reflect.get(s,a))return!0;const u=Reflect.set(s,a,l,c);return u&&this.dispatchEvent({type:"graphModified",soure:this,nodes:[n]}),u}}),n={name:i,scoped:tj(t,this),anchor:o,bounds:{},outs:{}};return t._parentGraphNode=n,n}add(t){if(this.nodes.indexOf(t)!==-1)throw"aready exists";t.scoped instanceof dn&&(t.scoped.eventDispatcher=this),this.nodes.push(t),this.dispatchEvent({type:"graphAdded",soure:this,nodes:[t]})}remove(t){const i=this.nodes.indexOf(t);if(i===-1)return!1;this.nodes.splice(i,1),t.scoped instanceof dn&&(t.scoped.eventDispatcher=null);for(const o of Object.keys(t.bounds))this.disconnect({node:t,field:o},!0);for(const o of Object.values(t.outs))for(const n of[...o])this.disconnect({node:n.node,field:n.field},!0);t.scoped.dispose&&t.scoped.dispose(),this.dispatchEvent({type:"graphRemoved",soure:this,nodes:[t]})}get(t){return this.nodes.find(i=>i.scoped.uuid===t)}update(t,i){for(const o of this.nodes)o.scoped instanceof iw&&o.scoped.onUpdate(t,i)}connect(t,i,o){if(!t.field&&t.node.scoped instanceof is||!t.field&&i.node.scoped instanceof is){if(t.node.scoped instanceof is!=i.node.scoped instanceof is){if(o)return 0;throw"not supported"}if(!(t.node.scoped instanceof is)||!(i.node.scoped instanceof is)){if(o)return 0;throw"not supported"}if(t.node.scoped.next===i.node.scoped){if(o)return 3}else if(t.node.scoped.next||i.node.scoped.prev){if(o)return 0;throw"has been bound!"}return o||(t.node.scoped.next=i.node.scoped,i.node.scoped.prev=t.node.scoped,this.dispatchEvent({type:"graphModified",soure:this,nodes:[t.node,i.node]}),this.dispatchEvent({type:"graphConnected",soure:this,from:t.node,to:i.node})),3}if(!i.field){if(o)return 0;throw"not supported"}const n=i.node.bounds[i.field];if(n){if(n.node===t.node&&n.field===t.field)return n.type;if(o)return 0;throw"has been bound!"}const s=kf(t.node.scoped),a=kf(i.node.scoped),{out:l}=t.node.scoped.typesExtended||M0(s),{in:c}=i.node.scoped.typesExtended||M0(a),u=t.field?l[t.field]:{types:[s]},d=i.field?c[i.field]:{types:[a]};if(t.field){if(!cDe(u.types,d.types)){if(o)return 0;throw"type mismatched!"}}else if(!uDe(s,d.types)){if(o)return 0;throw"type mismatched!"}const h=u.types.findIndex(m=>aO(m))!==-1?1:2;if(o)return h;i.node.bounds[i.field]={node:t.node,type:h,field:t.field};const p=t.field||"$";return(t.node.outs[p]||(t.node.outs[p]=[])).push({node:i.node,type:h,field:i.field}),this.applyNodeBounds(i.node),this.dispatchEvent({type:"graphModified",soure:this,nodes:[i.node]}),this.dispatchEvent({type:"graphConnected",soure:this,from:t.node,to:i.node}),h}disconnect(t,i){if(!t.field&&t.node.scoped instanceof is){if(!t.node.scoped.prev)throw"error";t.node.scoped.prev.next=void 0,t.node.scoped.prev=void 0;return}if(!t.field)throw"exeception";const o=t.node.bounds[t.field];if(o===void 0)return;const n=o.node,s=o.field||"$",a=n.outs[s];if(!a)throw console.error("not found"),"not found";const l=t.node.scoped,c=a.findIndex(h=>h.node===t.node&&h.field===t.field);if(c===-1)return;delete t.node.bounds[t.field],a.splice(c,1);const u=l instanceof dn?l.getObjectsExtended().in:l,d=u[t.field];if(d instanceof ai)u[t.field]=new Uo;else{const h=`${t.field}Node`;Object.hasOwn(u,h)?u[h]=null:d&&(d.isNode||d.isMaterial)&&(u[t.field]=null),u instanceof ai&&(u.needsUpdate=!0,u instanceof gi&&(u.uniformsNeedUpdate=!0))}i||(this.dispatchEvent({type:"graphModified",soure:this,nodes:[n,t.node]}),this.dispatchEvent({type:"graphDisconnected",soure:this,from:n,to:t.node}))}clear(){for(const t of this.nodes)t.scoped.dispose&&t.scoped.dispose();this.nodes.length=0}serialize(t){const i={isGraph:!0,nodes:[]};for(const o of this.nodes){t.nodes[o.scoped.uuid]||(t.nodes[o.scoped.uuid]=o.scoped.toJSON(t));const n={};Object.entries(o.outs).forEach(([a,l])=>{n[a]=l.map(c=>({n:c.node.scoped.uuid,f:c.field,t:c.type}))});const s={name:o.name,node:o.scoped.uuid,anchor:{...o.anchor},bounds:Object.fromEntries(Object.entries(o.bounds).map(a=>[a[0],{t:a[1].type,n:a[1].node.scoped.uuid,f:a[1].field}])),outs:n};i.nodes.push(s)}return i}deserialize(t,i){if(!(!t||!t.isGraph)){if(!Array.isArray(t.nodes))throw"error";this.clear();for(const o of t.nodes){let n=i[o.node];if(!n)throw`node[${o.node}] not found`;n instanceof dn?(n.fill(this.object,i),n.eventDispatcher=this):n=tj(Ut(n),this);const s=new Proxy(o.anchor,{set:(l,c,u,d)=>{if(u===Reflect.get(l,c))return!0;const h=Reflect.set(l,c,u,d);return h&&this.dispatchEvent({type:"graphModified",soure:this,nodes:[a]}),h}}),a={name:o.name,scoped:n,anchor:s,bounds:{},outs:{}};n._parentGraphNode=a;for(const[l,c]of Object.entries(o.bounds)){const{n:u,t:d,f:h}=c,p=i[u];if(!p)throw`node[${u}] not found`;a.bounds[l]={type:d,node:p,field:h}}for(const[l,c]of Object.entries(o.outs||{})){const u=a.outs[l]||(a.outs[l]=[]);for(const d of c){const{n:h,t:p,f:m}=d,g=i[h];if(!g)throw`node[${h}] not found`;u.push({node:g,type:p,field:m})}}this.nodes.push(a)}for(const o of this.nodes){for(const n of Object.values(o.bounds)){const s=this.nodes.find(a=>a.scoped.uuid===n.node.uuid);s||console.error(`node[${n.node.uuid}] not found!`),n.node=s}for(const n of Object.values(o.outs))for(const s of n){const a=this.nodes.find(l=>l.scoped.uuid===s.node.uuid);a||console.error(`node[${s.node.uuid}] not found!`),s.node=a}}for(const o of this.nodes)this.applyNodeBounds(o)}}applyNodeBounds(t,i){for(const[o,n]of Object.entries(t.bounds)){if(i&&!i.includes(o))continue;const{node:s,type:a,field:l}=n,c=s.outs[l||"$"];if(!c||!c.find(m=>m.node===t&&m.field===o))throw console.error("not found"),"not found";const u=s.scoped instanceof dn?s.scoped.getObjectsExtended().out:s.scoped;let d=l?u[l]:u;const h=t.scoped instanceof dn?t.scoped.getObjectsExtended().in:t.scoped,p=h[o];if(typeof d=="object"&&(d=d[tw]||d),d!==p){if(a===1){h[o]=d;continue}typeof d=="object"?typeof p.copy=="function"?p.copy(d):typeof d.clone=="function"?h[o]=d.clone():h[o]=d:h[o]=d}}t.scoped instanceof ai&&(t.scoped.needsUpdate=!0,t.scoped instanceof gi&&(t.scoped.uniformsNeedUpdate=!0))}applyNodePins(t,i,o){if(o==="in")t.scoped instanceof ai&&(t.scoped.needsUpdate=!0,t.scoped instanceof gi&&(t.scoped.uniformsNeedUpdate=!0));else{const n=t.outs[i];if(!n)return;for(const s of n)s.type===1?this.applyNodePins(s.node,s.field,"in"):this.applyNodeBounds(s.node,[s.field])}}addType(t,i,o,n){return i?/^[a-z][a-z0-9_]*$/i.test(i)?t.scoped instanceof Pf?(n==="in"?t.scoped.addInput:t.scoped.addOutput).call(t.scoped,i,o)?!0:(this.dispatchEvent({type:"userEventNotice",source:this,level:"error",message:`Failed to create field[${i}] as type[${o}]!`}),!1):(this.dispatchEvent({type:"userEventNotice",source:this,level:"error",message:"It is not a ScriptNode!"}),!1):(this.dispatchEvent({type:"userEventNotice",source:this,level:"error",message:"Illegal name!"}),!1):(this.dispatchEvent({type:"userEventNotice",source:this,level:"error",message:"Empty name!"}),!1)}removeType(t,i,o){if(!(t.scoped instanceof Pf)||!(o==="in"?t.scoped.removeInput:t.scoped.removeOutput).call(t.scoped,i))return!1;if(o==="in")this.disconnect({node:t,field:i,io:o});else{const n=t.outs[i];if(n)for(const s of[...n])this.disconnect({node:s.node,field:s.field})}return!0}}const{createNodeFromType:yDe}=b0;function Wc(r){const e=Object.values(r);return e.forEach(t=>delete t.metadata),e}function bDe(r){const e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},t={};r.traverse(n=>{if(t[n.uuid]=n,n.graph){const s=n.graph.serialize(e);delete s.metadata,n.userData.graph=s}else delete n.userData.graph});const i=r.toJSON(e);i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"};const o=n=>{if(!n.uuid)return;const s=t[n.uuid];if(s&&(s.serialize&&s.serialize(n),Array.isArray(n.children)))for(const a of n.children)o(a)};o(i.object);for(const n of Object.keys(e.materials))e.nodes[n]&&(e.materials[n]={uuid:n});return i.geometries=Wc(e.geometries),i.materials=Wc(e.materials),i.textures=Wc(e.textures),i.images=Wc(e.images),i.shapes=Wc(e.shapes),i.skeletons=Wc(e.skeletons),i.animations=Wc(e.animations),i.nodes=Wc(e.nodes),i}class xDe extends EN{constructor(t){super(t);Qe(this,"_nodesJSON",null);Qe(this,"_nodes")}parse(t,i){this._nodesJSON=t.nodes;const o=super.parse(t,i);this._nodesJSON=null;const n={},s=a=>{if(a.uuid&&(n[a.uuid]=a),a.children)for(const l of a.children)s(l)};s(t.object),o.traverse(a=>{const l=n[a.uuid];qPe(a,l),a.userData.graph&&new fO(a).deserialize(a.userData.graph,this._nodes||{})});for(const a of Object.values(this._nodes||{}))a.fill&&a.fill(o);return o.traverse(a=>{a instanceof eh&&a.delayFireBornEvent()}),o}parseNodes(t,i){if(t!==void 0){const o={},n=new $_;for(const a of t){const{uuid:l,type:c}=a;if(/Material$/.test(c)){const d=n.parse(a);d.uuid=l,o[l]=d;continue}const u=yDe(c);o[l]=u,o[l].uuid=l}const s={nodes:o,textures:i};for(const a of t){a.meta=s;const l=o[a.uuid];l.isMaterial||(l.deserialize(a),delete a.meta)}return o}return{}}parseMaterials(t,i){const o={};if(t!==void 0){const n=this.parseNodes(this._nodesJSON,i);this._nodes=n;const s=new $_;s.setTextures(i),s.setNodes(n);for(let a=0,l=t.length;a<l;a++){const c=t[a],u=n[c.uuid];u?o[c.uuid]=u:o[c.uuid]=s.parse(c)}}else this._nodesJSON&&(this._nodes=this.parseNodes(this._nodesJSON,i));return o}}const ij={width:"auto",height:"auto",useLegacyLights:!1,toneMapping:$u,toneMappingExposure:1,shadowMap:{enabled:!0,type:lx}};function ow(){const r=new li(50,1,.001,1e3);return r.name="defaultCamera",r.position.set(1,1,1),r.lookAt(0,0,0),r}class E0 extends ao{constructor(t){super();Qe(this,"json");Qe(this,"world");Qe(this,"uuid",vl.generateUUID());Qe(this,"scene");Qe(this,"scenes",[]);Qe(this,"cameras",[]);Qe(this,"_revision",0);this.name=t,this.world={...ij},this.json={revision:0,scene:"defaultScene",camera:"defaultCamera",world:this.world,userData:{},children:[]},this.scene=new eh,this.scene.name="defaultScene",this.scenes.push(this.scene);const i=ow();this.cameras.push(i),this.scene.add(i)}get revision(){return this._revision}async load(t){const i=new xDe;let o=await nx.request({url:`/fs/file/${this.name}/index.json`});typeof o=="string"&&(o=JSON.parse(o));const n=await i.parse(o);Object.keys(this.json).forEach(a=>delete this.json[a]),Object.assign(this.json,o);const{object:s}=o;if(s.world&&(Object.keys(this.world).forEach(a=>delete this.world[a]),Object.assign(this.world,{...ij,...s.world})),this._revision=s.revision||0,this.scenes.length=0,this.scenes.push(...n.children),this.scene=this.scenes.find(a=>a.name===s.scene)||this.scenes[0],this.cameras.length=0,this.scene.traverse(a=>{a instanceof Lc&&this.cameras.push(a)}),!this.cameras.length){const a=ow();this.cameras.push(a),this.scene.add(a)}return t||this.dispatchEvent({type:"projectLoaded",soure:this,project:this}),this}toJSON(){const t=new mr;t.children=this.scenes;const i=bDe(t);return t.children=[],t.nodes=void 0,i.object.revision=this.revision,i.object.world=this.world,i.object.scene=this.scene.name,i}async flush(){const t=this.toJSON();return sx.write(`/fs/write/${this.name}/index.json`,t)}newScene(){this.scene=new eh,this.scene.name=this.scene.uuid,this.scenes.push(this.scene);const t=ow();this.cameras.length=0,this.cameras.push(t),this.scene.add(t);const i=new yt(new ni(1,1,1),new g0({opacity:1}));i.onBeforeRender=()=>{i.rotation.x+=.01},i.material.colorNode=new gr(new bt),i.allNodes=[new gr(new bt),new gr(new Q)],this.scene.add(i),this._revision++,this.dispatchEvent({type:"objectAdded",soure:this,object:this.scene}),this.dispatchEvent({type:"sceneChanged",soure:this,scene:this.scene})}setScene(t){const i=this.scenes.find(o=>o.name===t);if(i){if(this.scene=i,this.cameras.length=0,this.scene.traverse(o=>{o instanceof Lc&&this.cameras.push(o)}),!this.cameras.length){const o=ow();this.cameras.length=0,this.cameras.push(o),this.scene.add(o)}this.dispatchEvent({type:"sceneChanged",soure:this,scene:this.scene})}}removeScene(t){if(this.scenes.length===1)return!1;const i=this.scenes.findIndex(n=>n.id===t.id);if(i===-1)return!0;this.scenes.splice(i,1);const o=t.id===this.scene.id;return t.id===this.scene.id&&(this.scene=this.scenes[0]),this._revision++,o&&this.dispatchEvent({type:"sceneChanged",soure:this,scene:this.scene}),!0}addObject(t,i){return i=i||this.scene,t.parent===i||(t.graph||(t.graph=new fO(t)),i.add(t),this._revision++,this.dispatchEvent({type:"objectAdded",soure:this,object:t}),this.dispatchEvent({type:"treeModified",soure:this,root:i})),t}addObjectByClass(t,i,o){const n=KPe(t);return o&&(n.uuid=o),this.addObject(n,i)}removeObject(t){if(t.isScene)return this.removeScene(t);const i=this.scene.getObjectById(t.id);if(!i)return!1;const o=i.parent;i.removeFromParent();const n=this.cameras.indexOf(i);return n!==-1&&this.cameras.splice(n,1),this._revision++,this.dispatchEvent({type:"objectRemoved",soure:this,object:t}),this.dispatchEvent({type:"treeModified",soure:this,root:o||this.scene}),!0}increaseRevision(){this._revision++}}const nw=new class extends E0{constructor(){super("shared")}createDefault(r){const e=new E0(r),t=e.scenes.find(i=>i.name==="default")||e.scene;return this.scene=t,this.scenes.length=0,this.scenes.push(this.scene),e}};class _De extends ao{constructor(){super();Qe(this,"stores",{});Qe(this,"currentStore",null);Qe(this,"scene",null);Qe(this,"isLocked",!1)}setScene(t){this.scene=t,this.currentStore=this.stores[t.uuid]||(this.stores[t.uuid]={cursor:0,points:[]})}push(t){if(!this.currentStore)throw"not allow";this.isLocked||(this.currentStore.cursor!==this.currentStore.points.length&&(this.currentStore.points.length=this.currentStore.cursor),this.currentStore.cursor++,this.currentStore.points.push(t),this.dispatchEvent({type:"historyChanged",source:this}))}canUndo(){return this.currentStore?!(this.currentStore.cursor<1):!1}undo(){if(!this.currentStore)throw"not allow";if(this.currentStore.cursor<1)return;this.currentStore.cursor--;const t=this.currentStore.points[this.currentStore.cursor];this.isLocked=!0,t.undo(),this.isLocked=!1,this.dispatchEvent({type:"historyChanged",source:this})}canRedo(){return this.currentStore?this.currentStore.cursor!=this.currentStore.points.length:!1}redo(){if(!this.currentStore)throw"not allow";if(this.currentStore.cursor==this.currentStore.points.length)return;const t=this.currentStore.points[this.currentStore.cursor];this.currentStore.cursor++,this.isLocked=!0,t.redo(),this.isLocked=!1,this.dispatchEvent({type:"historyChanged",source:this})}}const wDe=["graphAdded","graphModified","graphConnected","graphDisconnected","graphRemoved","objectAdded","objectModified","objectRemoved","worldSettingsModified"],Ge=new class extends ao{constructor(){super();Qe(this,"dragable",null);Qe(this,"history",new _De);Qe(this,"_project",new E0(""));Qe(this,"_world",null);Qe(this,"_editor",null);Qe(this,"_keydownListener");Qe(this,"_metaKeyListeners",{});this._keydownListener=e=>{this.onKeyDown(e)},this.hookDispatchEvent(this.history),window.addEventListener("keydown",this._keydownListener)}get project(){return this._project}set project(e){this._project&&this.unhookDispatchEvent(this._project),this._project=e,this.hookDispatchEvent(this._project)}get world(){return this._world}set world(e){this._world&&this.unhookDispatchEvent(this._world),this._world=e,this.hookDispatchEvent(this._world)}get editor(){return this._editor}set editor(e){this._editor&&this.unhookDispatchEvent(this._editor),this._editor=e,this.hookDispatchEvent(this._editor)}hookDispatchEvent(e){if(e._orgDispatchEvent)return;e._orgDispatchEvent=e.dispatchEvent;const t=i=>{console.log("event forwarding",i),e._orgDispatchEvent.call(e,i),this.dispatchEvent(i)};e.dispatchEvent=t}unhookDispatchEvent(e){e._orgDispatchEvent&&(e.dispatchEvent=e._orgDispatchEvent,delete e._orgDispatchEvent)}dispatchEvent(e){super.dispatchEvent(e),wDe.includes(e.type)&&super.dispatchEvent({type:"projectDirty"})}dispose(){window.removeEventListener("keydown",this._keydownListener)}addKeyListener(e,t){const i=this._metaKeyListeners[e]||(this._metaKeyListeners[e]=[]);typeof t=="function"&&(t={cb:t});const o=t.cb;i.find(n=>n.cb===o)||i.push(t)}removeKeyListener(e,t){const i=this._metaKeyListeners[e];if(!i)return;const o=i.findIndex(n=>n.cb===t);o!==-1&&i.splice(o,1)}onKeyDown(e){if(!e.metaKey||e.ctrlKey)return;const t=this._metaKeyListeners[e.key];if(!t)return;let i=!1;for(const o of t)o.own?o.cb.call(o.own,e):o.cb(e),i=!0;i&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}},oj={async beforeLaunch(r,e,t){},async onLaunched(r,e,t){const i=await sx.projects();e.state.projects=i,await this.load(),e.state.isLoading=!1},async load(){await nw.load(),br.state.projectName!=="shared"?(Ge.project=new E0(br.state.projectName),await Ge.project.load()):(Ge.project=nw,Ge.dispatchEvent({type:"projectLoaded",soure:null,project:nw}))}},nj={Math:{"":"Math",Numbers:{"":"\u6570\u7406",Symbols:{"":"\u7B26\u53F7"},Numbers:{"":"\u6570\u5B57",Units:["\u4E2A","\u5341","\u767E","\u5343","\u4E07","\u5341\u4E07","\u5343\u4E07","\u4EBF"]},SequencesAndPatterns:{"":"\u5E8F\u5217"},SequencesAndShapes:{"":"\u5E8F\u5217\u548C\u5F62\u72B6"},PositiveAndNegative:{"":"\u6B63\u6570\u548C\u8D1F\u6570"},ComparingNumbers:{"":"\u6570\u503C\u6BD4\u8F83"},OrderingNumbers:{"":"\u6570\u503C\u6392\u5E8F"},Estimating:{"":"\u4F30\u7B97"},Rounding:{"":"\u56DB\u820D\u4E94\u5165"},Factors:{"":"\u56E0\u5B50"},Multiples:{"":"\u500D\u6570"},PrimeNumbers:{"":"\u7D20\u6570"},PrimeFactors:{"":"\u7D20\u56E0\u5B50"},SquareNumbers:{"":"\u5E73\u65B9"},SquareRoots:{"":"\u5E73\u65B9\u6839"},CubeNumbers:{"":"\u7ACB\u65B9"},Fractions:{"":"\u5206\u6570"},ImproperFractionsAndMixed:{"":"\u5047\u5206\u6570\u53CA\u7E41\u5206\u6570"},EquivalentFractions:{"":"\u7B49\u503C\u5206\u6570"},SimplifyingFractions:{"":"\u5206\u6570\u7B80\u5316"},FindingAFractionOfAndAmount:{"":"\u5206\u6570\u6C42\u503C"},ComparingFractions:{"":"\u5206\u6570\u6BD4\u8F83"},ComparingUnitFractions:{"":"\u5355\u4F4D\u5206\u6570\u6BD4\u8F83"},ComparingNonUnitFractions:{"":"\u975E\u5355\u4F4D\u5206\u6570\u6BD4\u8F83"},UsingTheLowestCommonDenominator:{"":"\u6700\u5C0F\u516C\u5206\u6BCD"},AddingFractions:{"":"\u5206\u6570\u76F8\u52A0"},SubtractingFractions:{"":"\u5206\u6570\u76F8\u51CF"},MultiplyingFractions:{"":"\u5206\u6570\u76F8\u4E58"},DividingFractions:{"":"\u5206\u6570\u76F8\u9664"},DecimalNumbers:{"":"\u5341\u8FDB\u5236"},ComparingAndOrderingDecimals:{"":"\u5341\u8FDB\u5236\u6BD4\u8F83\u548C\u6392\u5E8F"},RoundingDecimals:{"":"\u5341\u8FDB\u5236\u56DB\u820D\u4E94\u5165"},AddingDecimals:{"":"\u5341\u8FDB\u5236\u76F8\u52A0"},SubtractingDecimals:{"":"\u5341\u8FDB\u5236\u76F8\u51CF"},Percentages:{"":"\u767E\u5206\u6BD4"},CalculatingPercentages:{"":"\u767E\u5206\u6BD4\u8BA1\u7B97"},PercentagesChanges:{"":"\u767E\u5206\u6BD4\u53D8\u6362"},Ratio:{"":"\u6BD4\u7387"},Proportion:{"":"\u6BD4\u4F8B"},Scaling:{"":"\u7F29\u653E"},DifferentWaysToDescribeFractions:{"":"\u5206\u6570\u7684\u4E0D\u540C\u8868\u793A\u6CD5"}},Calculating:{"":"\u8BA1\u7B97",Addition:{"":"\u52A0\u6CD5"},Subtraction:{"":"\u51CF\u6CD5"},Multiplication:{"":"\u4E58\u6CD5"},Division:{"":"\u9664\u6CD5"},TheOrderOfOperation:{"":"\u8FD0\u7B97\u4F18\u5148\u7EA7"}},Measurement:{"":"\u6D4B\u91CF",Length:{"":"\u957F\u5EA6"}},Geometry:{"":"\u51E0\u4F55\u5B66",Line:{"":"\u76F4\u7EBF"}},Statistics:{"":"\u7EDF\u8BA1\u5B66",DataHanding:{"":"\u6570\u636E\u5904\u7406"}},Algebra:{"":"\u4EE3\u6570",Equations:{"":"\u65B9\u7A0B\u5F0F"}}},tips:{inpjname:"Please input project name",ok:"OK",cancel:"Cancel",new:"New"},to(r){const e=r.split(".");let t=nj;for(const i of e)if(t=t[i],!t)throw console.error("not found"),"not found";return typeof t=="object"?t[""]:t}},SDe=nj;function Go(r,e){if(!r||typeof r!="string")return r??"";const t=r.split(".");let i=SDe;for(const o of t){if(typeof i!="object")return e||r;i=i[o]}return typeof i=="object"?i[""]:i||e||r}const sj=r=>(Kw("data-v-7dc6ed78"),r=r(),Yw(),r),MDe={style:{"align-items":"stretch",display:"flex","flex-direction":"column"}},TDe={class:"topbar",style:{"align-items":"stretch",display:"flex","flex-direction":"row",width:"auto"}},EDe={class:"leftside",style:{"align-items":"center",display:"flex",flex:"1 1 auto","flex-direction":"row","font-size":"2rem","padding-left":"0.5rem"}},CDe=sj(()=>X("i",{class:"icon-egg",style:{cursor:"default","font-size":"3rem"}},null,-1)),NDe={class:"toolbar-center"},ADe=["disabled"],RDe=["disabled"],LDe={class:"rightside topbtns",style:{"align-items":"center",display:"flex","flex-direction":"row"}},ODe=["disabled"],kDe=sj(()=>X("p",{style:{flex:"1 1 auto"}},null,-1)),IDe=ne({__name:"topbar",setup(r){let e=br.state.projectName;const t=V(0),i=V(br.state.projectName),o=V(br.state.projectName!=="shared"),n=V(!1),s=V(!1),a=V(!1);function l(){t.value=Ge.project.revision,i.value=Ge.project.name,o.value=Ge.project.name!=="shared",n.value=!1}async function c(x){if(!(!x||e===x))try{await sx.renameProject(e,x),e=x,br.dispatch("renameProject",x)}catch(_){console.log(_)}}async function u(x){e!==x&&(e=x,i.value=x,o.value=x!=="shared",Ge.project=new E0(x),await Ge.project.load(),br.dispatch("selectProject",x))}async function d(){const{action:x,value:_}=await Kz.prompt(Go("tips.inpjname"),Go("tips.new"),{confirmButtonText:Go("tips.ok"),cancelButtonText:Go("tips.cancel"),inputPattern:/\w{1,30}/,inputErrorMessage:Go("tips.invalidName")});x==="confirm"&&_&&(await sx.createProject(_),Ge.project=nw.createDefault(_),await h(),br.dispatch("createProject",_),Ge.dispatchEvent({type:"projectLoaded",soure:Ge.project,project:Ge.project}),e=_,i.value=_)}async function h(){t.value!==Ge.project.revision&&(await Ge.project.flush(),t.value=Ge.project.revision,v())}function p(){a.value=Ge.history.canRedo(),s.value=Ge.history.canUndo()}function m(){Ge.history.canUndo()&&Ge.history.undo()}function g(){Ge.history.canRedo()&&Ge.history.redo()}function v(){n.value=t.value!==Ge.project.revision}function y(x){x.source!==Ge.project&&Ge.project.increaseRevision(),v()}function b(){v(),p()}return Rt(()=>{Ge.addEventListener("projectLoaded",l),Ge.addEventListener("projectDirty",y),Ge.addEventListener("sceneChanged",b),Ge.addEventListener("historyChanged",p),Ge.addKeyListener("s",h),Ge.addKeyListener("z",m),Ge.addKeyListener("r",g)}),Gn(()=>{Ge.removeEventListener("projectLoaded",l),Ge.removeEventListener("projectDirty",y),Ge.removeEventListener("sceneChanged",b),Ge.removeEventListener("historyChanged",p),Ge.removeKeyListener("s",h),Ge.removeKeyListener("z",m),Ge.removeKeyListener("r",g)}),(x,_)=>{const S=_t("el-input"),w=_t("el-dropdown-item"),M=_t("el-dropdown-menu"),T=_t("el-dropdown");return A(),W("div",MDe,[X("div",TDe,[X("div",EDe,[CDe,ee(T,{"split-button":"",type:"primary",onCommand:u},{dropdown:se(()=>[ee(M,null,{default:se(()=>[(A(!0),W(nt,null,jt(f(br).state.projects,E=>(A(),_e(w,{key:E,command:E},{default:se(()=>[rr(ze(E),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:se(()=>[ee(S,{modelValue:i.value,"onUpdate:modelValue":_[0]||(_[0]=E=>i.value=E),placeholder:"Please input",disabled:!o.value,onChange:c},null,8,["modelValue","disabled"])]),_:1}),X("i",{class:"icon-add",style:{"margin-left":"1em"},onClick:d})]),X("div",NDe,[X("i",{class:"icon-undo",action:"undo",disabled:!s.value,onClick:m},null,8,ADe),X("i",{class:"icon-redo",action:"redo",disabled:!a.value,onClick:g},null,8,RDe)]),X("div",LDe,[X("i",{class:"icon-save",action:"save",disabled:!n.value,onClick:h},null,8,ODe),kDe,X("i",{class:k(f(br).state.isFloating?"icon-minimize":"icon-maximize"),action:"maximize",onClick:_[1]||(_[1]=E=>f(br).state.isFloating=!f(br).state.isFloating)},null,2)])])])}}}),qc=(r,e)=>{const t=r.__vccOpts||r;for(const[i,o]of e)t[i]=o;return t},PDe=qc(IDe,[["__scopeId","data-v-7dc6ed78"]]),aj={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Df{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const DDe=new Na(-1,1,1,-1,0,1),mO=new dr;mO.setAttribute("position",new kt([-1,3,0,-1,-1,0,3,-1,0],3)),mO.setAttribute("uv",new kt([0,2,0,0,2,0],2));class gO{constructor(e){this._mesh=new yt(mO,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,DDe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class lj extends Df{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof gi?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Rc.clone(e.uniforms),this.material=new gi({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new gO(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class cj extends Df{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const o=e.getContext(),n=e.state;n.buffers.color.setMask(!1),n.buffers.depth.setMask(!1),n.buffers.color.setLocked(!0),n.buffers.depth.setLocked(!0);let s,a;this.inverse?(s=0,a=1):(s=1,a=0),n.buffers.stencil.setTest(!0),n.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),n.buffers.stencil.setFunc(o.ALWAYS,s,4294967295),n.buffers.stencil.setClear(a),n.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),n.buffers.color.setLocked(!1),n.buffers.depth.setLocked(!1),n.buffers.color.setMask(!0),n.buffers.depth.setMask(!0),n.buffers.stencil.setLocked(!1),n.buffers.stencil.setFunc(o.EQUAL,1,4294967295),n.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),n.buffers.stencil.setLocked(!0)}}class BDe extends Df{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class FDe{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const i=e.getSize(new We);this._width=i.width,this._height=i.height,t=new Ki(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:no}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new lj(aj),this.copyPass.material.blending=So,this.clock=new k1}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let o=0,n=this.passes.length;o<n;o++){const s=this.passes[o];if(s.enabled!==!1){if(s.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(o),s.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),s.needsSwap){if(i){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}cj!==void 0&&(s instanceof cj?i=!0:s instanceof BDe&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new We);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,o=this._height*this._pixelRatio;this.renderTarget1.setSize(i,o),this.renderTarget2.setSize(i,o);for(let n=0;n<this.passes.length;n++)this.passes[n].setSize(i,o)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class UDe extends Df{constructor(e,t,i=null,o=null,n=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=o,this.clearAlpha=n,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new bt}render(e,t,i){const o=e.autoClear;e.autoClear=!1;let n,s;this.overrideMaterial!==null&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),this.clearAlpha!==null&&(n=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(n),this.overrideMaterial!==null&&(this.scene.overrideMaterial=s),e.autoClear=o}}class Xc extends Df{constructor(e,t,i,o){super(),this.renderScene=t,this.renderCamera=i,this.selectedObjects=o!==void 0?o:[],this.visibleEdgeColor=new bt(1,1,1),this.hiddenEdgeColor=new bt(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=e!==void 0?new We(e.x,e.y):new We(256,256);const n=Math.round(this.resolution.x/this.downSampleRatio),s=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Ki(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new Sv,this.depthMaterial.side=io,this.depthMaterial.depthPacking=vx,this.depthMaterial.blending=So,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=io,this.prepareMaskMaterial.fragmentShader=u(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Ki(this.resolution.x,this.resolution.y,{type:no}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Ki(n,s,{type:no}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Ki(n,s,{type:no}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Ki(Math.round(n/2),Math.round(s/2),{type:no}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Ki(n,s,{type:no}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Ki(Math.round(n/2),Math.round(s/2),{type:no}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;const a=4,l=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(a),this.separableBlurMaterial1.uniforms.texSize.value.set(n,s),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(l),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(n/2),Math.round(s/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=l,this.overlayMaterial=this.getOverlayMaterial();const c=aj;this.copyUniforms=Rc.clone(c.uniforms),this.materialCopy=new gi({uniforms:this.copyUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:So,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new bt,this.oldClearAlpha=1,this.fsQuad=new gO(null),this.tempPulseColor1=new bt,this.tempPulseColor2=new bt,this.textureMatrix=new Xt;function u(d,h){const p=h.isPerspectiveCamera?"perspective":"orthographic";return d.replace(/DEPTH_TO_VIEW_Z/g,p+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let i=Math.round(e/this.downSampleRatio),o=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(i,o),this.renderTargetBlurBuffer1.setSize(i,o),this.renderTargetEdgeBuffer1.setSize(i,o),this.separableBlurMaterial1.uniforms.texSize.value.set(i,o),i=Math.round(i/2),o=Math.round(o/2),this.renderTargetBlurBuffer2.setSize(i,o),this.renderTargetEdgeBuffer2.setSize(i,o),this.separableBlurMaterial2.uniforms.texSize.value.set(i,o)}changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;function i(o){o.isMesh&&(e===!0?o.visible=t.get(o):(t.set(o,o.visible),o.visible=e))}for(let o=0;o<this.selectedObjects.length;o++)this.selectedObjects[o].traverse(i)}changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,i=[];function o(s){s.isMesh&&i.push(s)}for(let s=0;s<this.selectedObjects.length;s++)this.selectedObjects[s].traverse(o);function n(s){if(s.isMesh||s.isSprite){let a=!1;for(let l=0;l<i.length;l++)if(i[l].id===s.id){a=!0;break}if(a===!1){const l=s.visible;(e===!1||t.get(s)===!0)&&(s.visible=e),t.set(s,l)}}else(s.isPoints||s.isLine)&&(e===!0?s.visible=t.get(s):(t.set(s,s.visible),s.visible=e))}this.renderScene.traverse(n)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,i,o,n){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,n&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const l=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(l),this.tempPulseColor2.multiplyScalar(l)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Xc.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=Xc.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=Xc.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=Xc.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,n&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(i),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=i.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new gi({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new We(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif
					
					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new gi({uniforms:{maskTexture:{value:null},texSize:{value:new We(.5,.5)},visibleEdgeColor:{value:new Q(1,1,1)},hiddenEdgeColor:{value:new Q(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(e){return new gi({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new We(.5,.5)},direction:{value:new We(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new gi({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:dl,depthTest:!1,depthWrite:!1,transparent:!0})}}Xc.BlurDirectionX=new We(1,0),Xc.BlurDirectionY=new We(0,1);const zDe={uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:`
		precision highp float;

		uniform mat4 modelViewMatrix;
		uniform mat4 projectionMatrix;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
	
		precision highp float;

		uniform sampler2D tDiffuse;

		`+lr.tonemapping_pars_fragment+lr.colorspace_pars_fragment+`

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );

			// tone mapping

			#ifdef LINEAR_TONE_MAPPING

				gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );

			#elif defined( REINHARD_TONE_MAPPING )

				gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );

			#elif defined( CINEON_TONE_MAPPING )

				gl_FragColor.rgb = OptimizedCineonToneMapping( gl_FragColor.rgb );

			#elif defined( ACES_FILMIC_TONE_MAPPING )

				gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );

			#endif

			// color space

			#ifdef SRGB_TRANSFER

				gl_FragColor = sRGBTransferOETF( gl_FragColor );

			#endif

		}`};class VDe extends Df{constructor(){super();const e=zDe;this.uniforms=Rc.clone(e.uniforms),this.material=new N1({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new gO(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,t,i){this.uniforms.tDiffuse.value=i.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,(this._outputColorSpace!==e.outputColorSpace||this._toneMapping!==e.toneMapping)&&(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},Ur.getTransfer(this._outputColorSpace)===Jr&&(this.material.defines.SRGB_TRANSFER=""),this._toneMapping===Fg?this.material.defines.LINEAR_TONE_MAPPING="":this._toneMapping===Ug?this.material.defines.REINHARD_TONE_MAPPING="":this._toneMapping===zg?this.material.defines.CINEON_TONE_MAPPING="":this._toneMapping===$u&&(this.material.defines.ACES_FILMIC_TONE_MAPPING=""),this.material.needsUpdate=!0),this.renderToScreen===!0?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}const GDe={uniforms:{tDiffuse:{value:null},resolution:{value:new We(1/1024,1/512)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
	precision highp float;

	uniform sampler2D tDiffuse;

	uniform vec2 resolution;

	varying vec2 vUv;

	// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)

	//----------------------------------------------------------------------------------
	// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag
	// SDK Version: v3.00
	// Email:       gameworks@nvidia.com
	// Site:        http://developer.nvidia.com/
	//
	// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
	//
	// Redistribution and use in source and binary forms, with or without
	// modification, are permitted provided that the following conditions
	// are met:
	//  * Redistributions of source code must retain the above copyright
	//    notice, this list of conditions and the following disclaimer.
	//  * Redistributions in binary form must reproduce the above copyright
	//    notice, this list of conditions and the following disclaimer in the
	//    documentation and/or other materials provided with the distribution.
	//  * Neither the name of NVIDIA CORPORATION nor the names of its
	//    contributors may be used to endorse or promote products derived
	//    from this software without specific prior written permission.
	//
	// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY
	// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
	// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
	// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
	// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
	// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	//
	//----------------------------------------------------------------------------------

	#ifndef FXAA_DISCARD
			//
			// Only valid for PC OpenGL currently.
			// Probably will not work when FXAA_GREEN_AS_LUMA = 1.
			//
			// 1 = Use discard on pixels which don't need AA.
			//     For APIs which enable concurrent TEX+ROP from same surface.
			// 0 = Return unchanged color on pixels which don't need AA.
			//
			#define FXAA_DISCARD 0
	#endif

	/*--------------------------------------------------------------------------*/
	#define FxaaTexTop(t, p) texture2D(t, p, -100.0)
	#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)
	/*--------------------------------------------------------------------------*/

	#define NUM_SAMPLES 5

	// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha
	float contrast( vec4 a, vec4 b ) {
			vec4 diff = abs( a - b );
			return max( max( max( diff.r, diff.g ), diff.b ), diff.a );
	}

	/*============================================================================

									FXAA3 QUALITY - PC

	============================================================================*/

	/*--------------------------------------------------------------------------*/
	vec4 FxaaPixelShader(
			vec2 posM,
			sampler2D tex,
			vec2 fxaaQualityRcpFrame,
			float fxaaQualityEdgeThreshold,
			float fxaaQualityinvEdgeThreshold
	) {
			vec4 rgbaM = FxaaTexTop(tex, posM);
			vec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);
			// . S .
			// W M E
			// . N .

			bool earlyExit = max( max( max(
					contrast( rgbaM, rgbaN ),
					contrast( rgbaM, rgbaS ) ),
					contrast( rgbaM, rgbaE ) ),
					contrast( rgbaM, rgbaW ) )
					< fxaaQualityEdgeThreshold;
			// . 0 .
			// 0 0 0
			// . 0 .

			#if (FXAA_DISCARD == 1)
					if(earlyExit) FxaaDiscard;
			#else
					if(earlyExit) return rgbaM;
			#endif

			float contrastN = contrast( rgbaM, rgbaN );
			float contrastS = contrast( rgbaM, rgbaS );
			float contrastE = contrast( rgbaM, rgbaE );
			float contrastW = contrast( rgbaM, rgbaW );

			float relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );
			relativeVContrast *= fxaaQualityinvEdgeThreshold;

			bool horzSpan = relativeVContrast > 0.;
			// . 1 .
			// 0 0 0
			// . 1 .

			// 45 deg edge detection and corners of objects, aka V/H contrast is too similar
			if( abs( relativeVContrast ) < .3 ) {
					// locate the edge
					vec2 dirToEdge;
					dirToEdge.x = contrastE > contrastW ? 1. : -1.;
					dirToEdge.y = contrastS > contrastN ? 1. : -1.;
					// . 2 .      . 1 .
					// 1 0 2  ~=  0 0 1
					// . 1 .      . 0 .

					// tap 2 pixels and see which ones are "outside" the edge, to
					// determine if the edge is vertical or horizontal

					vec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongH = contrast( rgbaM, rgbaAlongH );
					// . 1 .
					// 0 0 1
					// . 0 H

					vec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongV = contrast( rgbaM, rgbaAlongV );
					// V 1 .
					// 0 0 1
					// . 0 .

					relativeVContrast = matchAlongV - matchAlongH;
					relativeVContrast *= fxaaQualityinvEdgeThreshold;

					if( abs( relativeVContrast ) < .3 ) { // 45 deg edge
							// 1 1 .
							// 0 0 1
							// . 0 1

							// do a simple blur
							return mix(
									rgbaM,
									(rgbaN + rgbaS + rgbaE + rgbaW) * .25,
									.4
							);
					}

					horzSpan = relativeVContrast > 0.;
			}

			if(!horzSpan) rgbaN = rgbaW;
			if(!horzSpan) rgbaS = rgbaE;
			// . 0 .      1
			// 1 0 1  ->  0
			// . 0 .      1

			bool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );
			if(!pairN) rgbaN = rgbaS;

			vec2 offNP;
			offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;
			offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;

			bool doneN = false;
			bool doneP = false;

			float nDist = 0.;
			float pDist = 0.;

			vec2 posN = posM;
			vec2 posP = posM;

			int iterationsUsed = 0;
			int iterationsUsedN = 0;
			int iterationsUsedP = 0;
			for( int i = 0; i < NUM_SAMPLES; i++ ) {
					iterationsUsed = i;

					float increment = float(i + 1);

					if(!doneN) {
							nDist += increment;
							posN = posM + offNP * nDist;
							vec4 rgbaEndN = FxaaTexTop(tex, posN.xy);
							doneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );
							iterationsUsedN = i;
					}

					if(!doneP) {
							pDist += increment;
							posP = posM - offNP * pDist;
							vec4 rgbaEndP = FxaaTexTop(tex, posP.xy);
							doneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );
							iterationsUsedP = i;
					}

					if(doneN || doneP) break;
			}


			if ( !doneP && !doneN ) return rgbaM; // failed to find end of edge

			float dist = min(
					doneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,
					doneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.
			);

			// hacky way of reduces blurriness of mostly diagonal edges
			// but reduces AA quality
			dist = pow(dist, .5);

			dist = 1. - dist;

			return mix(
					rgbaM,
					rgbaN,
					dist * .5
			);
	}

	void main() {
			const float edgeDetectionQuality = .2;
			const float invEdgeDetectionQuality = 1. / edgeDetectionQuality;

			gl_FragColor = FxaaPixelShader(
					vUv,
					tDiffuse,
					resolution,
					edgeDetectionQuality, // [0,1] contrast needed, otherwise early discard
					invEdgeDetectionQuality
			);

	}
	`},uj={type:"change"},vO={type:"start"},dj={type:"end"},sw=new gd,hj=new Tl,HDe=Math.cos(70*vl.DEG2RAD);class jDe extends ao{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new Q,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Gu.ROTATE,MIDDLE:Gu.DOLLY,RIGHT:Gu.PAN},this.touches={ONE:Hu.ROTATE,TWO:Hu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(q){q.addEventListener("keydown",z),this._domElementKeyEvents=q},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",z),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(uj),i.update(),n=o.NONE},this.update=function(){const q=new Q,oe=new jr().setFromUnitVectors(e.up,new Q(0,1,0)),fe=oe.clone().invert(),ie=new Q,De=new jr,et=new Q,ht=2*Math.PI;return function(be=null){const mt=i.object.position;q.copy(mt).sub(i.target),q.applyQuaternion(oe),a.setFromVector3(q),i.autoRotate&&n===o.NONE&&B(E(be)),i.enableDamping?(a.theta+=l.theta*i.dampingFactor,a.phi+=l.phi*i.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let at=i.minAzimuthAngle,xt=i.maxAzimuthAngle;isFinite(at)&&isFinite(xt)&&(at<-Math.PI?at+=ht:at>Math.PI&&(at-=ht),xt<-Math.PI?xt+=ht:xt>Math.PI&&(xt-=ht),at<=xt?a.theta=Math.max(at,Math.min(xt,a.theta)):a.theta=a.theta>(at+xt)/2?Math.max(at,a.theta):Math.min(xt,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),i.zoomToCursor&&w||i.object.isOrthographicCamera?a.radius=O(a.radius):a.radius=O(a.radius*c),q.setFromSpherical(a),q.applyQuaternion(fe),mt.copy(i.target).add(q),i.object.lookAt(i.target),i.enableDamping===!0?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0));let he=!1;if(i.zoomToCursor&&w){let Ee=null;if(i.object.isPerspectiveCamera){const pe=q.length();Ee=O(pe*c);const Be=pe-Ee;i.object.position.addScaledVector(_,Be),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const pe=new Q(S.x,S.y,0);pe.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),he=!0;const Be=new Q(S.x,S.y,0);Be.unproject(i.object),i.object.position.sub(Be).add(pe),i.object.updateMatrixWorld(),Ee=q.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Ee!==null&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Ee).add(i.object.position):(sw.origin.copy(i.object.position),sw.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(sw.direction))<HDe?e.lookAt(i.target):(hj.setFromNormalAndCoplanarPoint(i.object.up,i.target),sw.intersectPlane(hj,i.target))))}else i.object.isOrthographicCamera&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),he=!0);return c=1,w=!1,he||ie.distanceToSquared(i.object.position)>s||8*(1-De.dot(i.object.quaternion))>s||et.distanceToSquared(i.target)>0?(i.dispatchEvent(uj),ie.copy(i.object.position),De.copy(i.object.quaternion),et.copy(i.target),he=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Ue),i.domElement.removeEventListener("pointerdown",Ae),i.domElement.removeEventListener("pointercancel",Me),i.domElement.removeEventListener("wheel",Y),i.domElement.removeEventListener("pointermove",Ne),i.domElement.removeEventListener("pointerup",Me),i._domElementKeyEvents!==null&&(i._domElementKeyEvents.removeEventListener("keydown",z),i._domElementKeyEvents=null)};const i=this,o={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let n=o.NONE;const s=1e-6,a=new LN,l=new LN;let c=1;const u=new Q,d=new We,h=new We,p=new We,m=new We,g=new We,v=new We,y=new We,b=new We,x=new We,_=new Q,S=new We;let w=!1;const M=[],T={};function E(q){return q!==null?2*Math.PI/60*i.autoRotateSpeed*q:2*Math.PI/60/60*i.autoRotateSpeed}function C(){return Math.pow(.95,i.zoomSpeed)}function B(q){l.theta-=q}function I(q){l.phi-=q}const L=function(){const q=new Q;return function(oe,fe){q.setFromMatrixColumn(fe,0),q.multiplyScalar(-oe),u.add(q)}}(),P=function(){const q=new Q;return function(oe,fe){i.screenSpacePanning===!0?q.setFromMatrixColumn(fe,1):(q.setFromMatrixColumn(fe,0),q.crossVectors(i.object.up,q)),q.multiplyScalar(oe),u.add(q)}}(),U=function(){const q=new Q;return function(oe,fe){const ie=i.domElement;if(i.object.isPerspectiveCamera){const De=i.object.position;q.copy(De).sub(i.target);let et=q.length();et*=Math.tan(i.object.fov/2*Math.PI/180),L(2*oe*et/ie.clientHeight,i.object.matrix),P(2*fe*et/ie.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(L(oe*(i.object.right-i.object.left)/i.object.zoom/ie.clientWidth,i.object.matrix),P(fe*(i.object.top-i.object.bottom)/i.object.zoom/ie.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function G(q){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c/=q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function R(q){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c*=q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function F(q){if(!i.zoomToCursor)return;w=!0;const oe=i.domElement.getBoundingClientRect(),fe=q.clientX-oe.left,ie=q.clientY-oe.top,De=oe.width,et=oe.height;S.x=fe/De*2-1,S.y=-(ie/et)*2+1,_.set(S.x,S.y,1).unproject(i.object).sub(i.object.position).normalize()}function O(q){return Math.max(i.minDistance,Math.min(i.maxDistance,q))}function H(q){d.set(q.clientX,q.clientY)}function $(q){F(q),y.set(q.clientX,q.clientY)}function j(q){m.set(q.clientX,q.clientY)}function J(q){h.set(q.clientX,q.clientY),p.subVectors(h,d).multiplyScalar(i.rotateSpeed);const oe=i.domElement;B(2*Math.PI*p.x/oe.clientHeight),I(2*Math.PI*p.y/oe.clientHeight),d.copy(h),i.update()}function ce(q){b.set(q.clientX,q.clientY),x.subVectors(b,y),x.y>0?G(C()):x.y<0&&R(C()),y.copy(b),i.update()}function ve(q){g.set(q.clientX,q.clientY),v.subVectors(g,m).multiplyScalar(i.panSpeed),U(v.x,v.y),m.copy(g),i.update()}function xe(q){F(q),q.deltaY<0?R(C()):q.deltaY>0&&G(C()),i.update()}function te(q){let oe=!1;switch(q.code){case i.keys.UP:q.ctrlKey||q.metaKey||q.shiftKey?I(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):U(0,i.keyPanSpeed),oe=!0;break;case i.keys.BOTTOM:q.ctrlKey||q.metaKey||q.shiftKey?I(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):U(0,-i.keyPanSpeed),oe=!0;break;case i.keys.LEFT:q.ctrlKey||q.metaKey||q.shiftKey?B(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):U(i.keyPanSpeed,0),oe=!0;break;case i.keys.RIGHT:q.ctrlKey||q.metaKey||q.shiftKey?B(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):U(-i.keyPanSpeed,0),oe=!0;break}oe&&(q.preventDefault(),i.update())}function Z(){if(M.length===1)d.set(M[0].pageX,M[0].pageY);else{const q=.5*(M[0].pageX+M[1].pageX),oe=.5*(M[0].pageY+M[1].pageY);d.set(q,oe)}}function de(){if(M.length===1)m.set(M[0].pageX,M[0].pageY);else{const q=.5*(M[0].pageX+M[1].pageX),oe=.5*(M[0].pageY+M[1].pageY);m.set(q,oe)}}function Ce(){const q=M[0].pageX-M[1].pageX,oe=M[0].pageY-M[1].pageY,fe=Math.sqrt(q*q+oe*oe);y.set(0,fe)}function ue(){i.enableZoom&&Ce(),i.enablePan&&de()}function D(){i.enableZoom&&Ce(),i.enableRotate&&Z()}function K(q){if(M.length==1)h.set(q.pageX,q.pageY);else{const fe=ye(q),ie=.5*(q.pageX+fe.x),De=.5*(q.pageY+fe.y);h.set(ie,De)}p.subVectors(h,d).multiplyScalar(i.rotateSpeed);const oe=i.domElement;B(2*Math.PI*p.x/oe.clientHeight),I(2*Math.PI*p.y/oe.clientHeight),d.copy(h)}function re(q){if(M.length===1)g.set(q.pageX,q.pageY);else{const oe=ye(q),fe=.5*(q.pageX+oe.x),ie=.5*(q.pageY+oe.y);g.set(fe,ie)}v.subVectors(g,m).multiplyScalar(i.panSpeed),U(v.x,v.y),m.copy(g)}function ae(q){const oe=ye(q),fe=q.pageX-oe.x,ie=q.pageY-oe.y,De=Math.sqrt(fe*fe+ie*ie);b.set(0,De),x.set(0,Math.pow(b.y/y.y,i.zoomSpeed)),G(x.y),y.copy(b)}function le(q){i.enableZoom&&ae(q),i.enablePan&&re(q)}function Se(q){i.enableZoom&&ae(q),i.enableRotate&&K(q)}function Ae(q){i.enabled!==!1&&(M.length===0&&(i.domElement.setPointerCapture(q.pointerId),i.domElement.addEventListener("pointermove",Ne),i.domElement.addEventListener("pointerup",Me)),Re(q),q.pointerType==="touch"?me(q):Le(q))}function Ne(q){i.enabled!==!1&&(q.pointerType==="touch"?Ie(q):je(q))}function Me(q){$e(q),M.length===0&&(i.domElement.releasePointerCapture(q.pointerId),i.domElement.removeEventListener("pointermove",Ne),i.domElement.removeEventListener("pointerup",Me)),i.dispatchEvent(dj),n=o.NONE}function Le(q){let oe;switch(q.button){case 0:oe=i.mouseButtons.LEFT;break;case 1:oe=i.mouseButtons.MIDDLE;break;case 2:oe=i.mouseButtons.RIGHT;break;default:oe=-1}switch(oe){case Gu.DOLLY:if(i.enableZoom===!1)return;$(q),n=o.DOLLY;break;case Gu.ROTATE:if(q.ctrlKey||q.metaKey||q.shiftKey){if(i.enablePan===!1)return;j(q),n=o.PAN}else{if(i.enableRotate===!1)return;H(q),n=o.ROTATE}break;case Gu.PAN:if(q.ctrlKey||q.metaKey||q.shiftKey){if(i.enableRotate===!1)return;H(q),n=o.ROTATE}else{if(i.enablePan===!1)return;j(q),n=o.PAN}break;default:n=o.NONE}n!==o.NONE&&i.dispatchEvent(vO)}function je(q){switch(n){case o.ROTATE:if(i.enableRotate===!1)return;J(q);break;case o.DOLLY:if(i.enableZoom===!1)return;ce(q);break;case o.PAN:if(i.enablePan===!1)return;ve(q);break}}function Y(q){i.enabled===!1||i.enableZoom===!1||n!==o.NONE||(q.preventDefault(),i.dispatchEvent(vO),xe(q),i.dispatchEvent(dj))}function z(q){i.enabled===!1||i.enablePan===!1||te(q)}function me(q){switch(Ve(q),M.length){case 1:switch(i.touches.ONE){case Hu.ROTATE:if(i.enableRotate===!1)return;Z(),n=o.TOUCH_ROTATE;break;case Hu.PAN:if(i.enablePan===!1)return;de(),n=o.TOUCH_PAN;break;default:n=o.NONE}break;case 2:switch(i.touches.TWO){case Hu.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;ue(),n=o.TOUCH_DOLLY_PAN;break;case Hu.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;D(),n=o.TOUCH_DOLLY_ROTATE;break;default:n=o.NONE}break;default:n=o.NONE}n!==o.NONE&&i.dispatchEvent(vO)}function Ie(q){switch(Ve(q),n){case o.TOUCH_ROTATE:if(i.enableRotate===!1)return;K(q),i.update();break;case o.TOUCH_PAN:if(i.enablePan===!1)return;re(q),i.update();break;case o.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;le(q),i.update();break;case o.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Se(q),i.update();break;default:n=o.NONE}}function Ue(q){i.enabled!==!1&&q.preventDefault()}function Re(q){M.push(q)}function $e(q){delete T[q.pointerId];for(let oe=0;oe<M.length;oe++)if(M[oe].pointerId==q.pointerId){M.splice(oe,1);return}}function Ve(q){let oe=T[q.pointerId];oe===void 0&&(oe=new We,T[q.pointerId]=oe),oe.set(q.pageX,q.pageY)}function ye(q){const oe=q.pointerId===M[0].pointerId?M[1]:M[0];return T[oe.pointerId]}i.domElement.addEventListener("contextmenu",Ue),i.domElement.addEventListener("pointerdown",Ae),i.domElement.addEventListener("pointercancel",Me),i.domElement.addEventListener("wheel",Y,{passive:!1}),this.update()}}const rh=new I1,Un=new Q,Kc=new Q,pi=new jr,pj={X:new Q(1,0,0),Y:new Q(0,1,0),Z:new Q(0,0,1)},yO={type:"change"},fj={type:"mouseDown"},mj={type:"mouseUp",mode:null},gj={type:"objectChange"};class $De extends mr{constructor(e,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const i=new JDe;this._gizmo=i,this.add(i);const o=new ZDe;this._plane=o,this.add(o);const n=this;function s(b,x){let _=x;Object.defineProperty(n,b,{get:function(){return _!==void 0?_:x},set:function(S){_!==S&&(_=S,o[b]=S,i[b]=S,n.dispatchEvent({type:b+"-changed",value:S}),n.dispatchEvent(yO))}}),n[b]=x,o[b]=x,i[b]=x}s("camera",e),s("object",void 0),s("enabled",!0),s("axis",null),s("mode","translate"),s("translationSnap",null),s("rotationSnap",null),s("scaleSnap",null),s("space","world"),s("size",1),s("dragging",!1),s("showX",!0),s("showY",!0),s("showZ",!0);const a=new Q,l=new Q,c=new jr,u=new jr,d=new Q,h=new jr,p=new Q,m=new Q,g=new Q,v=0,y=new Q;s("worldPosition",a),s("worldPositionStart",l),s("worldQuaternion",c),s("worldQuaternionStart",u),s("cameraPosition",d),s("cameraQuaternion",h),s("pointStart",p),s("pointEnd",m),s("rotationAxis",g),s("rotationAngle",v),s("eye",y),this._offset=new Q,this._startNorm=new Q,this._endNorm=new Q,this._cameraScale=new Q,this._parentPosition=new Q,this._parentQuaternion=new jr,this._parentQuaternionInv=new jr,this._parentScale=new Q,this._worldScaleStart=new Q,this._worldQuaternionInv=new jr,this._worldScale=new Q,this._positionStart=new Q,this._quaternionStart=new jr,this._scaleStart=new Q,this._getPointer=WDe.bind(this),this._onPointerDown=XDe.bind(this),this._onPointerHover=qDe.bind(this),this._onPointerMove=KDe.bind(this),this._onPointerUp=YDe.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;rh.setFromCamera(e,this.camera);const t=bO(this._gizmo.picker[this.mode],rh);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){rh.setFromCamera(e,this.camera);const t=bO(this._plane,rh,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,fj.mode=this.mode,this.dispatchEvent(fj)}}pointerMove(e){const t=this.axis,i=this.mode,o=this.object;let n=this.space;if(i==="scale"?n="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(n="world"),o===void 0||t===null||this.dragging===!1||e.button!==-1)return;rh.setFromCamera(e,this.camera);const s=bO(this._plane,rh,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),n==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),n==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),o.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(n==="local"&&(o.position.applyQuaternion(pi.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.position.applyQuaternion(this._quaternionStart)),n==="world"&&(o.parent&&o.position.add(Un.setFromMatrixPosition(o.parent.matrixWorld)),t.search("X")!==-1&&(o.position.x=Math.round(o.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(o.position.y=Math.round(o.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(o.position.z=Math.round(o.position.z/this.translationSnap)*this.translationSnap),o.parent&&o.position.sub(Un.setFromMatrixPosition(o.parent.matrixWorld))));else if(i==="scale"){if(t.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),Kc.set(a,a,a)}else Un.copy(this.pointStart),Kc.copy(this.pointEnd),Un.applyQuaternion(this._worldQuaternionInv),Kc.applyQuaternion(this._worldQuaternionInv),Kc.divide(Un),t.search("X")===-1&&(Kc.x=1),t.search("Y")===-1&&(Kc.y=1),t.search("Z")===-1&&(Kc.z=1);o.scale.copy(this._scaleStart).multiply(Kc),this.scaleSnap&&(t.search("X")!==-1&&(o.scale.x=Math.round(o.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(o.scale.y=Math.round(o.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(o.scale.z=Math.round(o.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const a=20/this.worldPosition.distanceTo(Un.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(Un.copy(this.rotationAxis).cross(this.eye))*a):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(pj[t]),Un.copy(pj[t]),n==="local"&&Un.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(Un.cross(this.eye).normalize())*a),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),n==="local"&&t!=="E"&&t!=="XYZE"?(o.quaternion.copy(this._quaternionStart),o.quaternion.multiply(pi.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),o.quaternion.copy(pi.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),o.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(yO),this.dispatchEvent(gj)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(mj.mode=this.mode,this.dispatchEvent(mj)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(yO),this.dispatchEvent(gj),this.pointStart.copy(this.pointEnd))}getRaycaster(){return rh}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}}function WDe(r){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:r.button};{const e=this.domElement.getBoundingClientRect();return{x:(r.clientX-e.left)/e.width*2-1,y:-(r.clientY-e.top)/e.height*2+1,button:r.button}}}function qDe(r){if(this.enabled)switch(r.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(r));break}}function XDe(r){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(r.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(r)),this.pointerDown(this._getPointer(r)))}function KDe(r){this.enabled&&this.pointerMove(this._getPointer(r))}function YDe(r){this.enabled&&(this.domElement.releasePointerCapture(r.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(r)))}function bO(r,e,t){const i=e.intersectObject(r,!0);for(let o=0;o<i.length;o++)if(i[o].object.visible||t)return i[o];return!1}const aw=new Rn,ei=new Q(0,1,0),vj=new Q(0,0,0),yj=new Xt,lw=new jr,cw=new jr,$a=new Q,bj=new Xt,C0=new Q(1,0,0),ih=new Q(0,1,0),N0=new Q(0,0,1),uw=new Q,A0=new Q,R0=new Q;class JDe extends mr{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new Uo({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Fi({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=e.clone();i.opacity=.15;const o=t.clone();o.opacity=.5;const n=e.clone();n.color.setHex(16711680);const s=e.clone();s.color.setHex(65280);const a=e.clone();a.color.setHex(255);const l=e.clone();l.color.setHex(16711680),l.opacity=.5;const c=e.clone();c.color.setHex(65280),c.opacity=.5;const u=e.clone();u.color.setHex(255),u.opacity=.5;const d=e.clone();d.opacity=.25;const h=e.clone();h.color.setHex(16776960),h.opacity=.25,e.clone().color.setHex(16776960);const p=e.clone();p.color.setHex(7895160);const m=new Ui(0,.04,.1,12);m.translate(0,.05,0);const g=new ni(.08,.08,.08);g.translate(0,.04,0);const v=new dr;v.setAttribute("position",new kt([0,0,0,1,0,0],3));const y=new Ui(.0075,.0075,.5,3);y.translate(0,.25,0);function b(P,U){const G=new Cl(P,.0075,3,64,U*Math.PI*2);return G.rotateY(Math.PI/2),G.rotateX(Math.PI/2),G}function x(){const P=new dr;return P.setAttribute("position",new kt([0,0,0,1,1,1],3)),P}const _={X:[[new yt(m,n),[.5,0,0],[0,0,-Math.PI/2]],[new yt(m,n),[-.5,0,0],[0,0,Math.PI/2]],[new yt(y,n),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new yt(m,s),[0,.5,0]],[new yt(m,s),[0,-.5,0],[Math.PI,0,0]],[new yt(y,s)]],Z:[[new yt(m,a),[0,0,.5],[Math.PI/2,0,0]],[new yt(m,a),[0,0,-.5],[-Math.PI/2,0,0]],[new yt(y,a),null,[Math.PI/2,0,0]]],XYZ:[[new yt(new El(.1,0),d.clone()),[0,0,0]]],XY:[[new yt(new ni(.15,.15,.01),u.clone()),[.15,.15,0]]],YZ:[[new yt(new ni(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new yt(new ni(.15,.15,.01),c.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},S={X:[[new yt(new Ui(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new yt(new Ui(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new yt(new Ui(.2,0,.6,4),i),[0,.3,0]],[new yt(new Ui(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new yt(new Ui(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new yt(new Ui(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new yt(new El(.2,0),i)]],XY:[[new yt(new ni(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new yt(new ni(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new yt(new ni(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},w={START:[[new yt(new El(.01,2),o),null,null,null,"helper"]],END:[[new yt(new El(.01,2),o),null,null,null,"helper"]],DELTA:[[new zo(x(),o),null,null,null,"helper"]],X:[[new zo(v,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new zo(v,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new zo(v,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},M={XYZE:[[new yt(b(.5,1),p),null,[0,Math.PI/2,0]]],X:[[new yt(b(.5,.5),n)]],Y:[[new yt(b(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new yt(b(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new yt(b(.75,1),h),null,[0,Math.PI/2,0]]]},T={AXIS:[[new zo(v,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},E={XYZE:[[new yt(new Dc(.25,10,8),i)]],X:[[new yt(new Cl(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new yt(new Cl(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new yt(new Cl(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new yt(new Cl(.75,.1,2,24),i)]]},C={X:[[new yt(g,n),[.5,0,0],[0,0,-Math.PI/2]],[new yt(y,n),[0,0,0],[0,0,-Math.PI/2]],[new yt(g,n),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new yt(g,s),[0,.5,0]],[new yt(y,s)],[new yt(g,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new yt(g,a),[0,0,.5],[Math.PI/2,0,0]],[new yt(y,a),[0,0,0],[Math.PI/2,0,0]],[new yt(g,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new yt(new ni(.15,.15,.01),u),[.15,.15,0]]],YZ:[[new yt(new ni(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new yt(new ni(.15,.15,.01),c),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new yt(new ni(.1,.1,.1),d.clone())]]},B={X:[[new yt(new Ui(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new yt(new Ui(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new yt(new Ui(.2,0,.6,4),i),[0,.3,0]],[new yt(new Ui(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new yt(new Ui(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new yt(new Ui(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new yt(new ni(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new yt(new ni(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new yt(new ni(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new yt(new ni(.2,.2,.2),i),[0,0,0]]]},I={X:[[new zo(v,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new zo(v,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new zo(v,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function L(P){const U=new mr;for(const G in P)for(let R=P[G].length;R--;){const F=P[G][R][0].clone(),O=P[G][R][1],H=P[G][R][2],$=P[G][R][3],j=P[G][R][4];F.name=G,F.tag=j,O&&F.position.set(O[0],O[1],O[2]),H&&F.rotation.set(H[0],H[1],H[2]),$&&F.scale.set($[0],$[1],$[2]),F.updateMatrix();const J=F.geometry.clone();J.applyMatrix4(F.matrix),F.geometry=J,F.renderOrder=1/0,F.position.set(0,0,0),F.rotation.set(0,0,0),F.scale.set(1,1,1),U.add(F)}return U}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=L(_)),this.add(this.gizmo.rotate=L(M)),this.add(this.gizmo.scale=L(C)),this.add(this.picker.translate=L(S)),this.add(this.picker.rotate=L(E)),this.add(this.picker.scale=L(B)),this.add(this.helper.translate=L(w)),this.add(this.helper.rotate=L(T)),this.add(this.helper.scale=L(I)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:cw;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let i=[];i=i.concat(this.picker[this.mode].children),i=i.concat(this.gizmo[this.mode].children),i=i.concat(this.helper[this.mode].children);for(let o=0;o<i.length;o++){const n=i[o];n.visible=!0,n.rotation.set(0,0,0),n.position.copy(this.worldPosition);let s;if(this.camera.isOrthographicCamera?s=(this.camera.top-this.camera.bottom)/this.camera.zoom:s=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),n.scale.set(1,1,1).multiplyScalar(s*this.size/4),n.tag==="helper"){n.visible=!1,n.name==="AXIS"?(n.visible=!!this.axis,this.axis==="X"&&(pi.setFromEuler(aw.set(0,0,0)),n.quaternion.copy(t).multiply(pi),Math.abs(ei.copy(C0).applyQuaternion(t).dot(this.eye))>.9&&(n.visible=!1)),this.axis==="Y"&&(pi.setFromEuler(aw.set(0,0,Math.PI/2)),n.quaternion.copy(t).multiply(pi),Math.abs(ei.copy(ih).applyQuaternion(t).dot(this.eye))>.9&&(n.visible=!1)),this.axis==="Z"&&(pi.setFromEuler(aw.set(0,Math.PI/2,0)),n.quaternion.copy(t).multiply(pi),Math.abs(ei.copy(N0).applyQuaternion(t).dot(this.eye))>.9&&(n.visible=!1)),this.axis==="XYZE"&&(pi.setFromEuler(aw.set(0,Math.PI/2,0)),ei.copy(this.rotationAxis),n.quaternion.setFromRotationMatrix(yj.lookAt(vj,ei,ih)),n.quaternion.multiply(pi),n.visible=this.dragging),this.axis==="E"&&(n.visible=!1)):n.name==="START"?(n.position.copy(this.worldPositionStart),n.visible=this.dragging):n.name==="END"?(n.position.copy(this.worldPosition),n.visible=this.dragging):n.name==="DELTA"?(n.position.copy(this.worldPositionStart),n.quaternion.copy(this.worldQuaternionStart),Un.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),Un.applyQuaternion(this.worldQuaternionStart.clone().invert()),n.scale.copy(Un),n.visible=this.dragging):(n.quaternion.copy(t),this.dragging?n.position.copy(this.worldPositionStart):n.position.copy(this.worldPosition),this.axis&&(n.visible=this.axis.search(n.name)!==-1));continue}n.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(n.name==="X"&&Math.abs(ei.copy(C0).applyQuaternion(t).dot(this.eye))>.99&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="Y"&&Math.abs(ei.copy(ih).applyQuaternion(t).dot(this.eye))>.99&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="Z"&&Math.abs(ei.copy(N0).applyQuaternion(t).dot(this.eye))>.99&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="XY"&&Math.abs(ei.copy(N0).applyQuaternion(t).dot(this.eye))<.2&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="YZ"&&Math.abs(ei.copy(C0).applyQuaternion(t).dot(this.eye))<.2&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1),n.name==="XZ"&&Math.abs(ei.copy(ih).applyQuaternion(t).dot(this.eye))<.2&&(n.scale.set(1e-10,1e-10,1e-10),n.visible=!1)):this.mode==="rotate"&&(lw.copy(t),ei.copy(this.eye).applyQuaternion(pi.copy(t).invert()),n.name.search("E")!==-1&&n.quaternion.setFromRotationMatrix(yj.lookAt(this.eye,vj,ih)),n.name==="X"&&(pi.setFromAxisAngle(C0,Math.atan2(-ei.y,ei.z)),pi.multiplyQuaternions(lw,pi),n.quaternion.copy(pi)),n.name==="Y"&&(pi.setFromAxisAngle(ih,Math.atan2(ei.x,ei.z)),pi.multiplyQuaternions(lw,pi),n.quaternion.copy(pi)),n.name==="Z"&&(pi.setFromAxisAngle(N0,Math.atan2(ei.y,ei.x)),pi.multiplyQuaternions(lw,pi),n.quaternion.copy(pi))),n.visible=n.visible&&(n.name.indexOf("X")===-1||this.showX),n.visible=n.visible&&(n.name.indexOf("Y")===-1||this.showY),n.visible=n.visible&&(n.name.indexOf("Z")===-1||this.showZ),n.visible=n.visible&&(n.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),n.material._color=n.material._color||n.material.color.clone(),n.material._opacity=n.material._opacity||n.material.opacity,n.material.color.copy(n.material._color),n.material.opacity=n.material._opacity,this.enabled&&this.axis&&(n.name===this.axis||this.axis.split("").some(function(a){return n.name===a}))&&(n.material.color.setHex(16776960),n.material.opacity=1)}super.updateMatrixWorld(e)}}class ZDe extends yt{constructor(){super(new xd(1e5,1e5,2,2),new Uo({visible:!1,wireframe:!0,side:io,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),uw.copy(C0).applyQuaternion(t==="local"?this.worldQuaternion:cw),A0.copy(ih).applyQuaternion(t==="local"?this.worldQuaternion:cw),R0.copy(N0).applyQuaternion(t==="local"?this.worldQuaternion:cw),ei.copy(A0),this.mode){case"translate":case"scale":switch(this.axis){case"X":ei.copy(this.eye).cross(uw),$a.copy(uw).cross(ei);break;case"Y":ei.copy(this.eye).cross(A0),$a.copy(A0).cross(ei);break;case"Z":ei.copy(this.eye).cross(R0),$a.copy(R0).cross(ei);break;case"XY":$a.copy(R0);break;case"YZ":$a.copy(uw);break;case"XZ":ei.copy(R0),$a.copy(A0);break;case"XYZ":case"E":$a.set(0,0,0);break}break;case"rotate":default:$a.set(0,0,0)}$a.length()===0?this.quaternion.copy(this.cameraQuaternion):(bj.lookAt(Un.set(0,0,0),$a,ei),this.quaternion.setFromRotationMatrix(bj)),super.updateMatrixWorld(e)}}const xO=new WeakMap,Bf=new u0;ai.prototype.onBuild=function(r,e,t){if(Array.isArray(r.material))for(const i of r.material)i.isNodeMaterial===!0&&xO.set(i,new Z_(r,t,e,i).build());else r.material.isNodeMaterial===!0&&xO.set(r.material,new Z_(r,t,e).build())},ai.prototype.onBeforeRender=function(r,e,t,i,o){const n=xO.get(this);if(n!==void 0){Bf.material=this,Bf.camera=t,Bf.object=o,Bf.renderer=r;const s=n.updateNodes;if(s.length>0){r.state.useProgram(null);for(const a of s)Bf.updateNode(a)}}},window.GPUShaderStage===void 0&&(window.GPUShaderStage={VERTEX:1,FRAGMENT:2,COMPUTE:4});let xj=!1;navigator.gpu!==void 0&&await navigator.gpu.requestAdapter()!==null&&(xj=!0);class QDe{static isAvailable(){return xj}static getErrorMessage(){const e='Your browser does not support <a href="https://gpuweb.github.io/gpuweb/" style="color:blue">WebGPU</a> yet',t=document.createElement("div");return t.id="webgpumessage",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.maxWidth="400px",t.style.margin="5em auto 0",t.innerHTML=e,t}}const _j=QDe;class eBe{constructor(){this.nodes=null,this.animationLoop=null,this.requestId=null,this.isAnimating=!1,this.context=self}start(){if(this.isAnimating===!0||this.animationLoop===null||this.nodes===null)return;this.isAnimating=!0;const e=(t,i)=>{this.requestId=self.requestAnimationFrame(e),this.nodes.nodeFrame.update(),this.animationLoop(t,i)};this.requestId=self.requestAnimationFrame(e)}stop(){self.cancelAnimationFrame(this.requestId),this.isAnimating=!1}setAnimationLoop(e){this.animationLoop=e}setNodes(e){this.nodes=e}}const tBe=eBe;class dw{constructor(){this.weakMap=new WeakMap}get(e){if(Array.isArray(e)){let t=this.weakMap;for(let i=0;i<e.length-1;i++)if(t=t.get(e[i]),t===void 0)return;return t.get(e[e.length-1])}else return super.get(e)}set(e,t){if(Array.isArray(e)){let i=this.weakMap;for(let o=0;o<e.length-1;o++){const n=e[o];i.has(n)===!1&&i.set(n,new WeakMap),i=i.get(n)}return i.set(e[e.length-1],t)}else return super.set(e,t)}delete(e){if(Array.isArray(e)){let t=this.weakMap;for(let i=0;i<e.length-1;i++)if(t=t.get(e[i]),t===void 0)return!1;return t.delete(e[e.length-1])}else return super.delete(e)}dispose(){this.weakMap.clear()}}let rBe=0;class iBe{constructor(e,t,i,o,n,s,a,l,c){this._nodes=e,this._geometries=t,this.id=rBe++,this.renderer=i,this.object=o,this.material=n,this.scene=s,this.camera=a,this.lightsNode=l,this.context=c,this.geometry=o.geometry,this.version=n.version,this.attributes=null,this.pipeline=null,this.vertexBuffers=null,this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getIndex(){return this._geometries.getIndex(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,i=[],o=new Set;for(const n of e){const s=n.node&&n.node.attribute?n.node.attribute:t.getAttribute(n.name);i.push(s);const a=s.isInterleavedBufferAttribute?s.data:s;o.add(a)}return this.attributes=i,this.vertexBuffers=Array.from(o.values()),i}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getMaterialCacheKey(){const e=this.material;let t=e.customProgramCacheKey();for(const i in e){if(/^(is[A-Z])|^(visible|version|uuid|name|opacity|userData)$/.test(i))continue;let o=e[i];if(o!==null){const n=typeof o;n==="number"?o=o!==0?"1":"0":n==="object"&&(o="{}")}t+=o+","}return t}getNodesCacheKey(){return this._nodes.getCacheKey(this.scene,this.lightsNode)}getCacheKey(){return`{material:${this.getMaterialCacheKey()},nodes:${this.getNodesCacheKey()}`}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}class oBe{constructor(e,t,i,o,n,s){this.renderer=e,this.nodes=t,this.geometries=i,this.pipelines=o,this.bindings=n,this.info=s,this.chainMaps={}}get(e,t,i,o,n,s,a){const l=this.getChainMap(a),c=[e,t,s,n];let u=l.get(c);return u===void 0?(u=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,i,o,n,s,a),l.set(c,u)):u.version!==t.version&&(u.version=t.version,u.initialCacheKey!==u.getCacheKey()&&(u.dispose(),u=this.get(e,t,i,o,n,s,a))),u}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new dw)}dispose(){this.chainMaps={}}createRenderObject(e,t,i,o,n,s,a,l,c,u){const d=this.getChainMap(u),h=new iBe(e,t,i,o,n,s,a,l,c);return h.onDispose=()=>{this.pipelines.delete(h),this.bindings.delete(h),this.nodes.delete(h),d.delete(h.getChainArray())},h}}const nBe=oBe;class sBe{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data.clear()}}const oh=sBe,Ff={VERTEX:1,INDEX:2,STORAGE:4},Yc=16,aBe=211,lBe=212;class cBe extends oh{constructor(e){super(),this.backend=e}delete(e){super.delete(e)!==void 0&&this.backend.destroyAttribute(e)}update(e,t){const i=this.get(e);if(i.version===void 0)t===Ff.VERTEX?this.backend.createAttribute(e):t===Ff.INDEX?this.backend.createIndexAttribute(e):t===Ff.STORAGE&&this.backend.createStorageAttribute(e),i.version=this._getBufferAttribute(e).version;else{const o=this._getBufferAttribute(e);(i.version<o.version||o.usage===xx)&&(this.backend.updateAttribute(e),i.version=o.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}const uBe=cBe;function dBe(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function wj(r){return r.index!==null?r.index.version:r.attributes.position.version}function Sj(r){const e=[],t=r.index,i=r.attributes.position;if(t!==null){const n=t.array;for(let s=0,a=n.length;s<a;s+=3){const l=n[s+0],c=n[s+1],u=n[s+2];e.push(l,c,c,u,u,l)}}else{const n=i.array;for(let s=0,a=n.length/3-1;s<a;s+=3){const l=s+0,c=s+1,u=s+2;e.push(l,c,c,u,u,l)}}const o=new(dBe(e)?Dx:Px)(e,1);return o.version=wj(r),o}class hBe extends oh{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeFrame=new WeakMap}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,i=this.get(t);i.initialized=!0,this.info.memory.geometries++;const o=()=>{this.info.memory.geometries--;const n=t.index,s=e.getAttributes();n!==null&&this.attributes.delete(n);for(const l of s)this.attributes.delete(l);const a=this.wireframes.get(t);a!==void 0&&this.attributes.delete(a),t.removeEventListener("dispose",o)};t.addEventListener("dispose",o)}updateAttributes(e){const t=e.getAttributes();for(const o of t)this.updateAttribute(o,Ff.VERTEX);const i=this.getIndex(e);i!==null&&this.updateAttribute(i,Ff.INDEX)}updateAttribute(e,t){const i=this.info.render.frame;this.attributeFrame.get(e)!==i&&(this.attributes.update(e,t),this.attributeFrame.set(e,i))}getIndex(e){const{geometry:t,material:i}=e;let o=t.index;if(i.wireframe===!0){const n=this.wireframes;let s=n.get(t);s===void 0?(s=Sj(t),n.set(t,s)):s.version!==wj(t)&&(this.attributes.delete(s),s=Sj(t),n.set(t,s)),o=s}return o}}const pBe=hBe;class fBe{constructor(){this.autoReset=!0,this.render={frame:0,drawCalls:0,triangles:0,points:0,lines:0},this.memory={geometries:0,textures:0}}update(e,t,i){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=i*(t/3):e.isPoints?this.render.points+=i*t:e.isLineSegments?this.render.lines+=i*(t/2):e.isLine?this.render.lines+=i*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.render.frame=0,this.memory.geometries=0,this.memory.textures=0}}const mBe=fBe;class gBe{constructor(e){this.cacheKey=e,this.usedTimes=0}}const Mj=gBe;class vBe extends Mj{constructor(e,t,i){super(e),this.vertexProgram=t,this.fragmentProgram=i}}const yBe=vBe;class bBe extends Mj{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}const xBe=bBe;let _Be=0;class wBe{constructor(e,t){this.id=_Be++,this.code=e,this.stage=t,this.usedTimes=0}}const _O=wBe;class SBe extends oh{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:i}=this,o=this.get(e);if(this._needsComputeUpdate(e)){const n=o.pipeline;n&&(n.usedTimes--,n.computeProgram.usedTimes--);const s=this.nodes.getForCompute(e);let a=this.programs.compute.get(s.computeShader);a===void 0&&(n&&n.computeProgram.usedTimes===0&&this._releaseProgram(n.computeProgram),a=new _O(s.computeShader,"compute"),this.programs.compute.set(s.computeShader,a),i.createProgram(a));const l=this._getComputeCacheKey(e,a);let c=this.caches.get(l);c===void 0&&(n&&n.usedTimes===0&&this._releasePipeline(e),c=this._getComputePipeline(e,a,l,t)),c.usedTimes++,a.usedTimes++,o.version=e.version,o.pipeline=c}return o.pipeline}getForRender(e){const{backend:t}=this,i=this.get(e);if(this._needsRenderUpdate(e)){const o=i.pipeline;o&&(o.usedTimes--,o.vertexProgram.usedTimes--,o.fragmentProgram.usedTimes--);const n=e.getNodeBuilderState();let s=this.programs.vertex.get(n.vertexShader);s===void 0&&(o&&o.vertexProgram.usedTimes===0&&this._releaseProgram(o.vertexProgram),s=new _O(n.vertexShader,"vertex"),this.programs.vertex.set(n.vertexShader,s),t.createProgram(s));let a=this.programs.fragment.get(n.fragmentShader);a===void 0&&(o&&o.fragmentProgram.usedTimes===0&&this._releaseProgram(o.fragmentProgram),a=new _O(n.fragmentShader,"fragment"),this.programs.fragment.set(n.fragmentShader,a),t.createProgram(a));const l=this._getRenderCacheKey(e,s,a);let c=this.caches.get(l);c===void 0?(o&&o.usedTimes===0&&this._releasePipeline(o),c=this._getRenderPipeline(e,s,a,l)):e.pipeline=c,c.usedTimes++,s.usedTimes++,a.usedTimes++,i.pipeline=c}return i.pipeline}delete(e){const t=this.get(e).pipeline;t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,i,o){i=i||this._getComputeCacheKey(e,t);let n=this.caches.get(i);return n===void 0&&(n=new xBe(i,t),this.caches.set(i,n),this.backend.createComputePipeline(n,o)),n}_getRenderPipeline(e,t,i,o){o=o||this._getRenderCacheKey(e,t,i);let n=this.caches.get(o);return n===void 0&&(n=new yBe(o,t,i),this.caches.set(o,n),e.pipeline=n,this.backend.createRenderPipeline(e)),n}_getComputeCacheKey(e,t){return"compute"+e.id+t.id}_getRenderCacheKey(e,t,i){const{material:o}=e;return[t.id,i.id,o.transparent,o.blending,o.premultipliedAlpha,o.blendSrc,o.blendDst,o.blendEquation,o.blendSrcAlpha,o.blendDstAlpha,o.blendEquationAlpha,o.colorWrite,o.depthWrite,o.depthTest,o.depthFunc,o.stencilWrite,o.stencilFunc,o.stencilFail,o.stencilZFail,o.stencilZPass,o.stencilFuncMask,o.stencilWriteMask,o.side,this.backend.getCacheKey(e)].join()}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,i=e.stage;this.programs[i].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){const t=this.get(e),i=e.material;let o=this.backend.needsUpdate(e);return(t.material!==i||t.materialVersion!==i.version||t.transparent!==i.transparent||t.blending!==i.blending||t.premultipliedAlpha!==i.premultipliedAlpha||t.blendSrc!==i.blendSrc||t.blendDst!==i.blendDst||t.blendEquation!==i.blendEquation||t.blendSrcAlpha!==i.blendSrcAlpha||t.blendDstAlpha!==i.blendDstAlpha||t.blendEquationAlpha!==i.blendEquationAlpha||t.colorWrite!==i.colorWrite||t.depthWrite!==i.depthWrite||t.depthTest!==i.depthTest||t.depthFunc!==i.depthFunc||t.stencilWrite!==i.stencilWrite||t.stencilFunc!==i.stencilFunc||t.stencilFail!==i.stencilFail||t.stencilZFail!==i.stencilZFail||t.stencilZPass!==i.stencilZPass||t.stencilFuncMask!==i.stencilFuncMask||t.stencilWriteMask!==i.stencilWriteMask||t.side!==i.side||t.alphaToCoverage!==i.alphaToCoverage)&&(t.material=i,t.materialVersion=i.version,t.transparent=i.transparent,t.blending=i.blending,t.premultipliedAlpha=i.premultipliedAlpha,t.blendSrc=i.blendSrc,t.blendDst=i.blendDst,t.blendEquation=i.blendEquation,t.blendSrcAlpha=i.blendSrcAlpha,t.blendDstAlpha=i.blendDstAlpha,t.blendEquationAlpha=i.blendEquationAlpha,t.colorWrite=i.colorWrite,t.depthWrite=i.depthWrite,t.depthTest=i.depthTest,t.depthFunc=i.depthFunc,t.stencilWrite=i.stencilWrite,t.stencilFunc=i.stencilFunc,t.stencilFail=i.stencilFail,t.stencilZFail=i.stencilZFail,t.stencilZPass=i.stencilZPass,t.stencilFuncMask=i.stencilFuncMask,t.stencilWriteMask=i.stencilWriteMask,t.side=i.side,t.alphaToCoverage=i.alphaToCoverage,o=!0),o||t.pipeline===void 0}}const MBe=SBe;class TBe extends oh{constructor(e,t,i,o,n,s){super(),this.backend=e,this.textures=i,this.pipelines=n,this.attributes=o,this.nodes=t,this.info=s,this.pipelines.bindings=this,this.updateMap=new WeakMap}getForRender(e){const t=e.getBindings(),i=this.get(e);return i.bindings!==t&&(i.bindings=t,this._init(t),this.backend.createBindings(t)),i.bindings}getForCompute(e){const t=this.get(e);if(t.bindings===void 0){const i=this.nodes.getForCompute(e).bindings;t.bindings=i,this._init(i),this.backend.createBindings(i)}return t.bindings}updateForCompute(e){this._update(e,this.getForCompute(e))}updateForRender(e){this._update(e,this.getForRender(e))}_init(e){for(const t of e)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isStorageBuffer){const i=t.attribute;this.attributes.update(i,Ff.STORAGE)}}_update(e,t){const{backend:i}=this,o=this.updateMap,n=this.info.render.frame;let s=!1;for(const a of t)o.get(a)!==n&&(a.isUniformBuffer?a.update()&&i.updateBinding(a):a.isSampledTexture&&(a.needsBindingsUpdate&&(s=!0),a.update()&&this.textures.updateTexture(a.texture)),o.set(a,n));if(s===!0){const a=this.pipelines.getForRender(e);this.backend.updateBindings(t,a)}}dispose(){super.dispose(),this.updateMap=new WeakMap}}const EBe=TBe;function CBe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function NBe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}class ABe{constructor(){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparent=[],this.lightsNode=new c0([]),this.lightsArray=[],this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparent.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,i,o,n,s){let a=this.renderItems[this.renderItemsIndex];return a===void 0?(a={id:e.id,object:e,geometry:t,material:i,groupOrder:o,renderOrder:e.renderOrder,z:n,group:s},this.renderItems[this.renderItemsIndex]=a):(a.id=e.id,a.object=e,a.geometry=t,a.material=i,a.groupOrder=o,a.renderOrder=e.renderOrder,a.z=n,a.group=s),this.renderItemsIndex++,a}push(e,t,i,o,n,s){const a=this.getNextRenderItem(e,t,i,o,n,s);e.occlusionTest===!0&&this.occlusionQueryCount++,(i.transparent===!0?this.transparent:this.opaque).push(a)}unshift(e,t,i,o,n,s){const a=this.getNextRenderItem(e,t,i,o,n,s);(i.transparent===!0?this.transparent:this.opaque).unshift(a)}pushLight(e){this.lightsArray.push(e)}getLightsNode(){return this.lightsNode.fromLights(this.lightsArray)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||CBe),this.transparent.length>1&&this.transparent.sort(t||NBe)}finish(){this.lightsNode.fromLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const i=this.renderItems[e];if(i.id===null)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.groupOrder=null,i.renderOrder=null,i.z=null,i.group=null}}}const RBe=ABe;class LBe{constructor(){this.lists=new dw}get(e,t){const i=this.lists,o=[e,t];let n=i.get(o);return n===void 0&&(n=new RBe,i.set(o,n)),n}dispose(){this.lists=new dw}}const OBe=LBe;let kBe=0;class IBe{constructor(){this.id=kBe++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!0,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new Kt,this.scissor=!1,this.scissorValue=new Kt,this.texture=null,this.depthTexture=null,this.activeCubeFace=0,this.sampleCount=1,this.width=0,this.height=0}}const PBe=IBe;class DBe{constructor(){this.chainMaps={}}get(e,t,i=null){const o=[e,t];let n;if(i===null)n="default";else{let l,c;i.isWebGLMultipleRenderTargets?(l=i.texture[0].format,c=i.texture.length):(l=i.texture.format,c=1),n=`${c}:${l}:${i.samples}:${i.depthBuffer}:${i.stencilBuffer}`}const s=this.getChainMap(n);let a=s.get(o);return a===void 0&&(a=new PBe,s.set(o,a)),i!==null&&(a.sampleCount=i.samples===0?1:i.samples),a}getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new dw)}dispose(){this.chainMaps={}}}const BBe=DBe,FBe=new Q;class UBe extends oh{constructor(e,t){super(),this.backend=e,this.info=t}updateRenderTarget(e,t=0){const i=this.get(e),o=e.samples===0?1:e.samples,n=i.depthTextureMips||(i.depthTextureMips={});let s,a;e.isWebGLMultipleRenderTargets?(a=e.texture,s=e.texture[0]):(a=[e.texture],s=e.texture);const l=this.getSize(s),c=l.width>>t,u=l.height>>t;let d=e.depthTexture||n[t],h=!1;d===void 0&&(d=new Sd,d.format=Nn,d.type=Xn,d.image.width=c,d.image.height=u,n[t]=d),(i.width!==l.width||l.height!==i.height)&&(h=!0,d.needsUpdate=!0,d.image.width=c,d.image.height=u),i.width=l.width,i.height=l.height,i.textures=a,i.depthTexture=d,i.sampleCount!==o&&(h=!0,d.needsUpdate=!0,i.sampleCount=o);const p={sampleCount:o};for(let m=0;m<a.length;m++){const g=a[m];h&&(g.needsUpdate=!0),this.updateTexture(g,p)}if(this.updateTexture(d,p),i.initialized!==!0){i.initialized=!0;const m=()=>{if(e.removeEventListener("dispose",m),a!==void 0)for(let g=0;g<a.length;g++)this._destroyTexture(a[g]);else this._destroyTexture(s);this._destroyTexture(d)};e.addEventListener("dispose",m)}}updateTexture(e,t={}){const i=this.get(e);if(i.initialized===!0&&i.version===e.version)return;const o=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,n=this.backend;o&&i.initialized===!0&&(n.destroySampler(e),n.destroyTexture(e));const{width:s,height:a,depth:l}=this.getSize(e);if(t.width=s,t.height=a,t.depth=l,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,s,a):1,o||e.isStorageTexture===!0)n.createSampler(e),n.createTexture(e,t);else if(i.initialized!==!0&&n.createSampler(e),e.version>0){const c=e.image;if(c===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(c.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const u=[];for(const d of e.images)u.push(this._getUploadImage(d));t.images=u}else t.image=this._getUploadImage(c);(i.isDefaultTexture===void 0||i.isDefaultTexture===!0)&&(n.createTexture(e,t),i.isDefaultTexture=!1),n.updateTexture(e,t),t.needsMipmaps&&n.generateMipmaps(e)}}else n.createDefaultTexture(e),i.isDefaultTexture=!0;if(i.initialized!==!0){i.initialized=!0,this.info.memory.textures++;const c=()=>{e.removeEventListener("dispose",c),this._destroyTexture(e),this.info.memory.textures--};e.addEventListener("dispose",c)}i.version=e.version}getSize(e,t=FBe){let i=e.images?e.images[0]:e.image;return i?(i.image!==void 0&&(i=i.image),t.width=i.width,t.height=i.height,t.depth=e.isCubeTexture?6:i.depth||1):t.width=t.height=t.depth=1,t}getMipLevels(e,t,i){let o;return e.isCompressedTexture?o=e.mipmaps.length:o=Math.floor(Math.log2(Math.max(t,i)))+1,o}needsMipmaps(e){return this.isEnvironmentTexture(e)?!0:e.isCompressedTexture!==!0&&e.minFilter!==Nr&&e.minFilter!==oi}isEnvironmentTexture(e){const t=e.mapping;return t===hl||t===pl||t===Ms||t===Ks}_getUploadImage(e){return this._isHTMLImage(e)?this._imageToCanvas(e):e}_imageToCanvas(e){const{width:t,height:i}=e,o=new OffscreenCanvas(t,i);return o.getContext("2d").drawImage(e,0,0,t,i),o}_isHTMLImage(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement}_destroyTexture(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}const zBe=UBe;let L0;const nh=new bt;class VBe extends oh{constructor(e,t){super(),this.renderer=e,this.nodes=t,this.backgroundMesh=null,this.backgroundMeshNode=null}update(e,t,i){const o=this.renderer,n=this.nodes.getBackgroundNode(e)||e.background;let s=!1;if(n===null)nh.copyLinearToSRGB(o._clearColor),L0=o._clearAlpha;else if(n.isColor===!0)nh.copyLinearToSRGB(n),L0=1,s=!0;else if(n.isNode===!0){const a=this.get(e),l=n;nh.copy(o._clearColor),L0=o._clearAlpha;let c=this.backgroundMesh;if(c===null){this.backgroundMeshNode=es(l,{getUVNode:()=>qd,getSamplerLevelNode:()=>CG}).mul(NG);let d=x_();d=d.setZ(d.w);const h=new To;h.outputNode=this.backgroundMeshNode,h.side=Ni,h.depthTest=!1,h.depthWrite=!1,h.fog=!1,h.vertexNode=d,this.backgroundMesh=c=new yt(new Dc(1,32,32),h),c.frustumCulled=!1,c.onBeforeRender=function(p,m,g){this.matrixWorld.copyPosition(g.matrixWorld)}}const u=l.getCacheKey();a.backgroundCacheKey!==u&&(this.backgroundMeshNode.node=l,c.material.needsUpdate=!0,a.backgroundCacheKey=u),t.unshift(c,c.geometry,c.material,0,0,null)}else console.error("THREE.Renderer: Unsupported background configuration.",n);if(o.autoClear===!0||s===!0){nh.multiplyScalar(L0);const a=i.clearColorValue;a.r=nh.r,a.g=nh.g,a.b=nh.b,a.a=L0,i.depthClearValue=o._clearDepth,i.stencilClearValue=o._clearStencil,i.clearColor=o.autoClearColor===!0,i.clearDepth=o.autoClearDepth===!0,i.clearStencil=o.autoClearStencil===!0}else i.clearColor=!1,i.clearDepth=!1,i.clearStencil=!1}}const GBe=VBe;class HBe{constructor(e,t,i,o,n,s,a){this.vertexShader=e,this.fragmentShader=t,this.computeShader=i,this.nodeAttributes=o,this.bindings=n,this.updateNodes=s,this.updateBeforeNodes=a,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)e.push(t.clone());return e}}const jBe=HBe;class $Be extends oh{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new u0,this.nodeBuilderCache=new Map}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let i=t.nodeBuilderState;if(i===void 0){const{nodeBuilderCache:o}=this,n=this.getForRenderCacheKey(e);if(i=o.get(n),i===void 0){const s=this.backend.createNodeBuilder(e.object,this.renderer,e.scene);s.material=e.material,s.context.material=e.material,s.lightsNode=e.lightsNode,s.environmentNode=this.getEnvironmentNode(e.scene),s.fogNode=this.getFogNode(e.scene),s.toneMappingNode=this.getToneMappingNode(),s.build(),i=this._createNodeBuilderState(s),o.set(n,i)}i.usedTimes++,t.nodeBuilderState=i}return i}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let i=t.nodeBuilderState;if(i===void 0){const o=this.backend.createNodeBuilder(e,this.renderer);o.build(),i=this._createNodeBuilderState(o),t.nodeBuilderState=o}return i}_createNodeBuilderState(e){return new jBe(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes)}getEnvironmentNode(e){return e.environmentNode||this.get(e).environmentNode||null}getBackgroundNode(e){return e.backgroundNode||this.get(e).backgroundNode||null}getFogNode(e){return e.fogNode||this.get(e).fogNode||null}getToneMappingNode(){return this.isToneMappingState===!1?null:this.renderer.toneMappingNode||this.get(this.renderer).toneMappingNode||null}getCacheKey(e,t){const i=this.getEnvironmentNode(e),o=this.getFogNode(e),n=this.getToneMappingNode(),s=[];return t&&s.push("lightsNode:"+t.getCacheKey()),i&&s.push("environmentNode:"+i.getCacheKey()),o&&s.push("fogNode:"+o.getCacheKey()),n&&s.push("toneMappingNode:"+n.getCacheKey()),"{"+s.join(",")+"}"}updateScene(e){this.updateEnvironment(e),this.updateFog(e),this.updateBackground(e),this.updateToneMapping()}get isToneMappingState(){const e=this.renderer.getRenderTarget();return!(e&&e.isCubeRenderTarget)}updateToneMapping(){const e=this.renderer,t=this.get(e),i=e.toneMapping;if(this.isToneMappingState&&i!==Mn){if(t.toneMapping!==i){const o=t.rendererToneMappingNode||uL(i,Vo("toneMappingExposure","float",e));o.toneMapping=i,t.rendererToneMappingNode=o,t.toneMappingNode=o,t.toneMapping=i}}else delete t.toneMappingNode,delete t.toneMapping}updateBackground(e){const t=this.get(e),i=e.background;if(i){if(t.background!==i){let o=null;if(i.isCubeTexture===!0)o=Kd(i,qd);else if(i.isTexture===!0){let n=null;i.mapping===hl||i.mapping===pl?n=Cf():n=pL,o=ho(i,n).setUpdateMatrix(!0)}else i.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",i);t.backgroundNode=o,t.background=i}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}updateFog(e){const t=this.get(e),i=e.fog;if(i){if(t.fog!==i){let o=null;i.isFogExp2?o=kL(Vo("color","color",i),Vo("density","float",i)):i.isFog?o=z_(Vo("color","color",i),Vo("near","float",i),Vo("far","float",i)):console.error("WebGPUNodes: Unsupported fog configuration.",i),t.fogNode=o,t.fog=i}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),i=e.environment;if(i){if(t.environment!==i){let o=null;i.isCubeTexture===!0?o=Kd(i):i.isTexture===!0?o=ho(i):console.error("Nodes: Unsupported environment configuration.",i),t.environmentNode=o,t.environment=i}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e){const t=this.nodeFrame;return t.scene=e.scene,t.object=e.object,t.camera=e.camera,t.renderer=e.renderer,t.material=e.material,t}updateBefore(e){const t=this.getNodeFrame(e),i=e.getNodeBuilderState();for(const o of i.updateBeforeNodes)t.updateBeforeNode(o)}updateForCompute(){}updateForRender(e){const t=this.getNodeFrame(e),i=e.getNodeBuilderState();for(const o of i.updateNodes)t.updateNode(o)}dispose(){super.dispose(),this.nodeFrame=new u0,this.nodeBuilderCache=new Map}}const WBe=$Be,qBe=new Oc,wO=new We,SO=new Kt,MO=new _v,hw=new Xt,O0=new Q;class XBe{constructor(e){this.isRenderer=!0,this.domElement=e.getDomElement(),this.backend=e,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.outputColorSpace=Ft,this.toneMapping=Mn,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=!0,this.stencil=!0,this.info=new mBe,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new Kt(0,0,this._width,this._height),this._scissor=new Kt(0,0,this._width,this._height),this._scissorTest=!1,this._properties=null,this._attributes=null,this._geometries=null,this._nodes=null,this._bindings=null,this._objects=null,this._pipelines=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._animation=new tBe,this._currentRenderContext=null,this._lastRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._clearAlpha=1,this._clearColor=new bt(0),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._initialized=!1,this._initPromise=null,this.shadowMap={enabled:!1,type:null},this.xr={enabled:!1}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{const i=this.backend;try{await i.init(this)}catch(o){t(o);return}this._nodes=new WBe(this,i),this._attributes=new uBe(i),this._background=new GBe(this,this._nodes),this._geometries=new pBe(this._attributes,this.info),this._textures=new zBe(i,this.info),this._pipelines=new MBe(i,this._nodes),this._bindings=new EBe(i,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new nBe(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new OBe,this._renderContexts=new BBe,this._animation.setNodes(this._nodes),this._animation.start(),this._initialized=!0,e()}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compile(){console.warn("THREE.Renderer: .compile() is not implemented yet.")}async render(e,t){this._initialized===!1&&await this.init();const i=this._nodes.nodeFrame,o=i.renderId,n=this._currentRenderContext,s=e.isScene===!0?e:qBe,a=this._renderTarget,l=this._renderContexts.get(e,t,a),c=this._activeCubeFace,u=this._activeMipmapLevel;this._currentRenderContext=l,i.renderId++;const d=this.coordinateSystem;t.coordinateSystem!==d&&(t.coordinateSystem=d,t.updateProjectionMatrix()),this._animation.isAnimating===!1&&i.update(),e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld(),this.info.autoReset===!0&&this.info.reset(),this.info.render.frame++;let h=this._viewport,p=this._scissor,m=this._pixelRatio;a!==null&&(h=a.viewport,p=a.scissor,m=1),this.getDrawingBufferSize(wO),SO.set(0,0,wO.width,wO.height);const g=h.minDepth===void 0?0:h.minDepth,v=h.maxDepth===void 0?1:h.maxDepth;l.viewportValue.copy(h).multiplyScalar(m).floor(),l.viewportValue.width>>=u,l.viewportValue.height>>=u,l.viewportValue.minDepth=g,l.viewportValue.maxDepth=v,l.viewport=l.viewportValue.equals(SO)===!1,l.scissorValue.copy(p).multiplyScalar(m).floor(),l.scissor=this._scissorTest&&l.scissorValue.equals(SO)===!1,l.scissorValue.width>>=u,l.scissorValue.height>>=u,l.depth=this.depth,l.stencil=this.stencil,s.onBeforeRender(this,e,t,a),hw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),MO.setFromProjectionMatrix(hw,d);const y=this._renderLists.get(e,t);if(y.begin(),this._projectObject(e,t,0,y),y.finish(),this.sortObjects===!0&&y.sort(this._opaqueSort,this._transparentSort),a!==null){this._textures.updateRenderTarget(a,u);const S=this._textures.get(a);l.textures=S.textures,l.depthTexture=S.depthTexture,l.width=S.width,l.height=S.height}else l.textures=null,l.depthTexture=null,l.width=this.domElement.width,l.height=this.domElement.height;l.width>>=u,l.height>>=u,l.activeCubeFace=c,l.activeMipmapLevel=u,l.occlusionQueryCount=y.occlusionQueryCount,this._nodes.updateScene(s),this._background.update(s,y,l),this.backend.beginRender(l);const b=y.opaque,x=y.transparent,_=y.lightsNode;b.length>0&&this._renderObjects(b,t,s,_),x.length>0&&this._renderObjects(x,t,s,_),this.backend.finishRender(l),i.renderId=o,this._currentRenderContext=n,this._lastRenderContext=l,s.onAfterRender(this,e,t,a)}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}setAnimationLoop(e){this._initialized===!1&&this.init();const t=this._animation;t.setAnimationLoop(e),e===null?t.stop():t.start()}getArrayBuffer(e){return console.warn("THREE.Renderer: getArrayBuffer() is deprecated. Use getArrayBufferAsync() instead."),this.getArrayBufferAsync(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this._context}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio=e,this.setSize(this._width,this._height,!1)}setDrawingBufferSize(e,t,i){this._width=e,this._height=t,this._pixelRatio=i,this.domElement.width=Math.floor(e*i),this.domElement.height=Math.floor(t*i),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}setSize(e,t,i=!0){this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),i===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,i,o){const n=this._scissor;e.isVector4?n.copy(e):n.set(e,t,i,o)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,i,o,n=0,s=1){const a=this._viewport;e.isVector4?a.copy(e):a.set(e,t,i,o),a.minDepth=n,a.maxDepth=s}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearAlpha=t}getClearAlpha(){return this._clearAlpha}setClearAlpha(e){this._clearAlpha=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext||this._lastRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,i=!0){const o=this._currentRenderContext||this._lastRenderContext;o&&this.backend.clear(o,e,t,i)}clearColor(){this.clear(!0,!1,!1)}clearDepth(){this.clear(!1,!0,!1)}clearStencil(){this.clear(!1,!1,!0)}dispose(){this.info.dispose(),this._objects.dispose(),this._properties.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,i=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=i}getRenderTarget(){return this._renderTarget}async compute(e){this._initialized===!1&&await this.init();const t=this.backend,i=this._pipelines,o=this._bindings,n=this._nodes,s=Array.isArray(e)?e:[e];t.beginCompute(e);for(const a of s){if(i.has(a)===!1){const u=()=>{a.removeEventListener("dispose",u),i.delete(a),o.delete(a),n.delete(a)};a.addEventListener("dispose",u),a.onInit({renderer:this})}n.updateForCompute(a),o.updateForCompute(a);const l=o.getForCompute(a),c=i.getForCompute(a,l);t.compute(e,a,l,c)}t.finishCompute(e)}hasFeature(e){return this.backend.hasFeature(e)}copyFramebufferToTexture(e){const t=this._currentRenderContext||this._lastRenderContext;this._textures.updateTexture(e),this.backend.copyFramebufferToTexture(e,t)}readRenderTargetPixelsAsync(e,t,i,o,n){return this.backend.copyTextureToBuffer(e.texture,t,i,o,n)}_projectObject(e,t,i,o){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)i=e.renderOrder;else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)o.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||MO.intersectsSprite(e)){this.sortObjects===!0&&O0.setFromMatrixPosition(e.matrixWorld).applyMatrix4(hw);const s=e.geometry,a=e.material;a.visible&&o.push(e,s,a,i,O0.z,null)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||MO.intersectsObject(e))){const s=e.geometry,a=e.material;if(this.sortObjects===!0&&(s.boundingSphere===null&&s.computeBoundingSphere(),O0.copy(s.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(hw)),Array.isArray(a)){const l=s.groups;for(let c=0,u=l.length;c<u;c++){const d=l[c],h=a[d.materialIndex];h&&h.visible&&o.push(e,s,h,i,O0.z,d)}}else a.visible&&o.push(e,s,a,i,O0.z,null)}}const n=e.children;for(let s=0,a=n.length;s<a;s++)this._projectObject(n[s],t,i,o)}_renderObjects(e,t,i,o){for(let n=0,s=e.length;n<s;n++){const a=e[n],{object:l,geometry:c,material:u,group:d}=a;if(t.isArrayCamera){const h=t.cameras;for(let p=0,m=h.length;p<m;p++){const g=h[p];if(l.layers.test(g.layers)){const v=g.viewport,y=v.minDepth===void 0?0:v.minDepth,b=v.maxDepth===void 0?1:v.maxDepth,x=this._currentRenderContext.viewportValue;x.copy(v).multiplyScalar(this._pixelRatio).floor(),x.minDepth=y,x.maxDepth=b,this.backend.updateViewport(this._currentRenderContext),this._renderObject(l,i,g,c,u,d,o)}}}else this._renderObject(l,i,t,c,u,d,o)}}_renderObject(e,t,i,o,n,s,a){n=t.overrideMaterial!==null?t.overrideMaterial:n,e.onBeforeRender(this,t,i,o,n,s),n.onBeforeRender(this,t,i,o,n,s),n.transparent===!0&&n.side===io&&n.forceSinglePass===!1?(n.side=Ni,this._renderObjectDirect(e,n,t,i,a,"backSide"),n.side=Ss,this._renderObjectDirect(e,n,t,i,a),n.side=io):this._renderObjectDirect(e,n,t,i,a),e.onAfterRender(this,t,i,o,n,s)}_renderObjectDirect(e,t,i,o,n,s){const a=this._objects.get(e,t,i,o,n,this._currentRenderContext,s);this._nodes.updateBefore(a),e.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),this._nodes.updateForRender(a),this._geometries.updateForRender(a),this._bindings.updateForRender(a),this._pipelines.updateForRender(a),this.backend.draw(a,this.info)}}const KBe=XBe;class YBe{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}const TO=YBe;function Tj(r){return r+(Yc-r%Yc)%Yc}function JBe(r,e=4){const t=Ej(e)*r;return Tj(t)}function Ej(r){return r+(4-r%4)%4}class ZBe extends TO{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){return Tj(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}const Cj=ZBe;class QBe extends Cj{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}const Nj=QBe;class eFe extends Nj{constructor(e){super(e),this.isUniformsGroup=!0,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){let e=0;for(let t=0,i=this.uniforms.length;t<i;t++){const o=this.uniforms[t],n=e%Yc,s=Yc-n;n!==0&&s-o.boundary<0?e+=Yc-n:n%o.boundary!==0&&(e+=n%o.boundary),o.offset=e/this.bytesPerElement,e+=o.itemSize*this.bytesPerElement}return Math.ceil(e/Yc)*Yc}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isFloatUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const i=this.buffer,o=e.getValue(),n=e.offset;return i[n]!==o&&(i[n]=o,t=!0),t}updateVector2(e){let t=!1;const i=this.buffer,o=e.getValue(),n=e.offset;return(i[n+0]!==o.x||i[n+1]!==o.y)&&(i[n+0]=o.x,i[n+1]=o.y,t=!0),t}updateVector3(e){let t=!1;const i=this.buffer,o=e.getValue(),n=e.offset;return(i[n+0]!==o.x||i[n+1]!==o.y||i[n+2]!==o.z)&&(i[n+0]=o.x,i[n+1]=o.y,i[n+2]=o.z,t=!0),t}updateVector4(e){let t=!1;const i=this.buffer,o=e.getValue(),n=e.offset;return(i[n+0]!==o.x||i[n+1]!==o.y||i[n+2]!==o.z||i[n+4]!==o.w)&&(i[n+0]=o.x,i[n+1]=o.y,i[n+2]=o.z,i[n+3]=o.w,t=!0),t}updateColor(e){let t=!1;const i=this.buffer,o=e.getValue(),n=e.offset;return(i[n+0]!==o.r||i[n+1]!==o.g||i[n+2]!==o.b)&&(i[n+0]=o.r,i[n+1]=o.g,i[n+2]=o.b,t=!0),t}updateMatrix3(e){let t=!1;const i=this.buffer,o=e.getValue().elements,n=e.offset;return(i[n+0]!==o[0]||i[n+1]!==o[1]||i[n+2]!==o[2]||i[n+4]!==o[3]||i[n+5]!==o[4]||i[n+6]!==o[5]||i[n+8]!==o[6]||i[n+9]!==o[7]||i[n+10]!==o[8])&&(i[n+0]=o[0],i[n+1]=o[1],i[n+2]=o[2],i[n+4]=o[3],i[n+5]=o[4],i[n+6]=o[5],i[n+8]=o[6],i[n+9]=o[7],i[n+10]=o[8],t=!0),t}updateMatrix4(e){let t=!1;const i=this.buffer,o=e.getValue().elements,n=e.offset;return tFe(i,o,n)===!1&&(i.set(o,n),t=!0),t}}function tFe(r,e,t){for(let i=0,o=e.length;i<o;i++)if(r[t+i]!==e[i])return!1;return!0}const Aj=eFe;let rFe=0;class iFe extends TO{constructor(e,t){super(e),this.id=rFe++,this.texture=t,this.version=t?t.version:0,this.store=!1,this.isSampledTexture=!0}get needsBindingsUpdate(){const{texture:e,version:t}=this;return e.isVideoTexture?!0:t!==e.version}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}}class EO extends iFe{constructor(e,t){super(e,t?t.value:null),this.textureNode=t}get needsBindingsUpdate(){return this.textureNode.value!==this.texture||super.needsBindingsUpdate}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class Rj extends EO{constructor(e,t){super(e,t),this.isSampledCubeTexture=!0}}const oFe={[dt.ATAN2]:"atan",textureDimensions:"textureSize"},nFe={low:"lowp",medium:"mediump",high:"highp"};class sFe extends R_{constructor(e,t,i=null){super(e,t,new iO,i),this.uniformsGroup={}}getMethod(e){return oFe[e]||e}getPropertyName(e,t){return e.isOutputStructVar?"":super.getPropertyName(e,t)}getTexture(e,t,i){return e.isTextureCube?`textureCube( ${t}, ${i} )`:e.isDepthTexture?`texture( ${t}, ${i} ).x`:`texture( ${t}, ${i} )`}getTextureLevel(e,t,i,o){return`textureLod( ${t}, ${i}, ${o} )`}getTextureCompare(e,t,i,o,n=this.shaderStage){if(n==="fragment")return`texture( ${t}, vec3( ${i}, ${o} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${n} shader.`)}getVars(e){const t=[],i=this.vars[e];for(const o of i)o.isOutputStructVar||t.push(`${this.getVar(o.type,o.name)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],i=[],o=[];for(const s of t){let a=null,l=!1;s.type==="texture"?s.node.value.compareFunction?a=`sampler2DShadow ${s.name};`:a=`sampler2D ${s.name};`:s.type==="cubeTexture"?a=`samplerCube ${s.name};`:(a=`${this.getVectorType(s.type)} ${s.name};`,l=!0);const c=s.node.precision;c!==null&&(a=nFe[c]+" "+a),l?(a="	"+a,o.push(a)):(a="uniform "+a,i.push(a))}let n="";return o.length>0&&(n+=this._getGLSLUniformStruct(e+"NodeUniforms",o.join(`
`))+`
`),n+=i.join(`
`),n}getAttributes(e){let t="";if(e==="vertex"){const i=this.attributes;let o=0;for(const n of i)t+=`layout( location = ${o++} ) in ${n.type} ${n.name};
`}return t}getStructMembers(e){const t=[],i=e.getMemberTypes();for(let o=0;o<i.length;o++){const n=i[o];t.push(`layout( location = ${o} ) out ${n} m${o};`)}return t.join(`
`)}getStructs(e){const t=[],i=this.structs[e];if(i.length===0)return`layout( location = 0 ) out vec4 fragColor;
`;for(let o=0,n=i.length;o<n;o++){const s=i[o];let a=`
`;a+=this.getStructMembers(s),a+=`
`,t.push(a)}return t.join(`

`)}getVaryings(e){let t="";const i=this.varyings;if(e==="vertex")for(const o of i)t+=`${o.needsInterpolation?"out":"/*out*/"} ${o.type} ${o.name};
`;else if(e==="fragment")for(const o of i)o.needsInterpolation&&(t+=`in ${o.type} ${o.name};
`);return t}getVertexIndex(){return"gl_VertexID"}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord"}isFlipY(){return!0}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// precision
precision highp float;
precision highp int;

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// precision
precision highp float;
precision highp int;
precision lowp sampler2DShadow;

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};for(const t in e){let i=`// code

`;i+=this.flowCode[t];const o=this.flowNodes[t],n=o[o.length-1];for(const a of o){const l=this.getFlowData(a),c=a.name;c&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${c}
	`),i+=`${l.code}
	`,a===n&&t!=="compute"&&(i+=`// result
	`,t==="vertex"?(i+="gl_Position = ",i+=`${l.result};`):t==="fragment"&&(a.outputNode.isOutputStructNode||(i+="fragColor = ",i+=`${l.result};`)))}const s=e[t];s.uniforms=this.getUniforms(t),s.attributes=this.getAttributes(t),s.varyings=this.getVaryings(t),s.vars=this.getVars(t),s.structs=this.getStructs(t),s.codes=this.getCodes(t),s.flow=i}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):console.warn("GLSLNodeBuilder: compute shaders are not supported.")}getUniformFromNode(e,t,i,o=null){const n=super.getUniformFromNode(e,t,i,o),s=this.getDataFromNode(e,i);let a=s.uniformGPU;if(a===void 0){if(t==="texture")a=new EO(n.name,n.node),this.bindings[i].push(a);else if(t==="cubeTexture")a=new Rj(n.name,n.node),this.bindings[i].push(a);else{let l=this.uniformsGroup[i];l===void 0&&(l=new Aj(i+"NodeUniforms"),this.uniformsGroup[i]=l,this.bindings[i].push(l)),a=this.getNodeUniform(n,t),l.addUniform(a)}s.uniformGPU=a}return n}build(){const{object:e,material:t}=this;return t!==null?To.fromMaterial(t).build(this):this.addFlow("compute",e),super.build()}}const aFe=sFe;let CO=null,NO=null;class lFe{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null}async init(e){this.renderer=e}begin(e){}finish(e){}draw(e,t){}createProgram(e){}destroyProgram(e){}createBindings(e){}updateBindings(e){}createRenderPipeline(e){}createComputePipeline(e,t){}destroyPipeline(e){}needsUpdate(e){}getCacheKey(e){}createNodeBuilder(e){}createSampler(e){}createDefaultTexture(e){}createTexture(e){}copyTextureToBuffer(e,t,i,o,n){}createAttribute(e){}createIndexAttribute(e){}updateAttribute(e){}destroyAttribute(e){}updateSize(){}hasFeature(e){}getInstanceCount(e){const{object:t,geometry:i}=e;return i.isInstancedBufferGeometry?i.instanceCount:t.isInstancedMesh?t.count:1}getDrawingBufferSize(){return CO=CO||new We,this.renderer.getDrawingBufferSize(CO)}getScissor(){return NO=NO||new Kt,this.renderer.getScissor(NO)}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:hC(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${mp}`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){this.data.delete(e)}}const Lj=lFe;class cFe{constructor(e){this.backend=e}createAttribute(e,t){const i=this.backend,{gl:o}=i,n=e.array,s=e.usage||o.STATIC_DRAW,a=o.createBuffer();o.bindBuffer(t,a),o.bufferData(t,n,s),o.bindBuffer(t,null);let l;if(n instanceof Float32Array)l=o.FLOAT;else if(n instanceof Uint16Array)e.isFloat16BufferAttribute?l=o.HALF_FLOAT:l=o.UNSIGNED_SHORT;else if(n instanceof Int16Array)l=o.SHORT;else if(n instanceof Uint32Array)l=o.UNSIGNED_INT;else if(n instanceof Int32Array)l=o.INT;else if(n instanceof Int8Array)l=o.BYTE;else if(n instanceof Uint8Array)l=o.UNSIGNED_BYTE;else if(n instanceof Uint8ClampedArray)l=o.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+n);i.set(e,{bufferGPU:a,type:l,bytesPerElement:n.BYTES_PER_ELEMENT,version:e.version})}}const uFe=cFe;let Oj=!1,AO,k0;class dFe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=null,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,Oj===!1&&(this._init(this.gl),Oj=!0)}_init(e){AO={[Sn]:e.FUNC_ADD,[yg]:e.FUNC_SUBTRACT,[bg]:e.FUNC_REVERSE_SUBTRACT},k0={[wg]:e.ZERO,[Sg]:e.ONE,[Mg]:e.SRC_COLOR,[gp]:e.SRC_ALPHA,[Rg]:e.SRC_ALPHA_SATURATE,[Ng]:e.DST_COLOR,[Eg]:e.DST_ALPHA,[Tg]:e.ONE_MINUS_SRC_COLOR,[vp]:e.ONE_MINUS_SRC_ALPHA,[Ag]:e.ONE_MINUS_DST_COLOR,[Cg]:e.ONE_MINUS_DST_ALPHA}}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==VE?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===ax?t.cullFace(t.BACK):e===GE?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setBlending(e,t,i,o,n,s,a,l){const{gl:c}=this;if(e===So){this.currentBlendingEnabled===!0&&(this.disable(c.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(c.BLEND),this.currentBlendingEnabled=!0),e!==vg){if(e!==this.currentBlending||l!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==Sn||this.currentBlendEquationAlpha!==Sn)&&(c.blendEquation(c.FUNC_ADD),this.currentBlendEquation=Sn,this.currentBlendEquationAlpha=Sn),l)switch(e){case qn:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case dl:c.blendFunc(c.ONE,c.ONE);break;case vc:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case yc:c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ZERO,c.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case qn:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case dl:c.blendFunc(c.SRC_ALPHA,c.ONE);break;case vc:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case yc:c.blendFunc(c.ZERO,c.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=l}return}n=n||t,s=s||i,a=a||o,(t!==this.currentBlendEquation||n!==this.currentBlendEquationAlpha)&&(c.blendEquationSeparate(AO[t],AO[n]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=n),(i!==this.currentBlendSrc||o!==this.currentBlendDst||s!==this.currentBlendSrcAlpha||a!==this.currentBlendDstAlpha)&&(c.blendFuncSeparate(k0[i],k0[o],k0[s],k0[a]),this.currentBlendSrc=i,this.currentBlendDst=o,this.currentBlendSrcAlpha=s,this.currentBlendDstAlpha=a),this.currentBlending=e,this.currentPremultipledAlpha=!1}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case Lg:t.depthFunc(t.NEVER);break;case Og:t.depthFunc(t.ALWAYS);break;case kg:t.depthFunc(t.LESS);break;case ju:t.depthFunc(t.LEQUAL);break;case Ig:t.depthFunc(t.EQUAL);break;case Pg:t.depthFunc(t.GEQUAL);break;case Dg:t.depthFunc(t.GREATER);break;case Bg:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,i){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==i)&&(this.gl.stencilFunc(e,t,i),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=i)}setStencilOp(e,t,i){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==i)&&(this.gl.stencilOp(e,t,i),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=i)}setMaterial(e,t){const{gl:i}=this;e.side===io?this.disable(i.CULL_FACE):this.enable(i.CULL_FACE);let o=e.side===Ni;t&&(o=!o),this.setFlipSided(o),e.blending===qn&&e.transparent===!1?this.setBlending(So):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setDepthMask(e.colorWrite);const n=e.stencilWrite;this.setStencilTest(n),n&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0?this.enable(i.SAMPLE_ALPHA_TO_COVERAGE):this.disable(i.SAMPLE_ALPHA_TO_COVERAGE)}setPolygonOffset(e,t,i){const{gl:o}=this;e?(this.enable(o.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==i)&&(o.polygonOffset(t,i),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=i)):this.disable(o.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}}const hFe=dFe;class pFe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=so){const{gl:i,extensions:o}=this;let n;if(e===En)return i.UNSIGNED_BYTE;if(e===jg)return i.UNSIGNED_SHORT_4_4_4_4;if(e===$g)return i.UNSIGNED_SHORT_5_5_5_1;if(e===cx)return i.BYTE;if(e===ux)return i.SHORT;if(e===qu)return i.UNSIGNED_SHORT;if(e===Hg)return i.INT;if(e===Cn)return i.UNSIGNED_INT;if(e===Di)return i.FLOAT;if(e===no)return i.HALF_FLOAT;if(e===Wg)return i.ALPHA;if(e===Po)return i.RGBA;if(e===qg)return i.LUMINANCE;if(e===Xg)return i.LUMINANCE_ALPHA;if(e===Do)return i.DEPTH_COMPONENT;if(e===Nn)return i.DEPTH_STENCIL;if(e===bp)return i.RED;if(e===xp)return i.RED_INTEGER;if(e===_p)return i.RG;if(e===Kg)return i.RG_INTEGER;if(e===Yg)return i.RGBA_INTEGER;if(e===wc||e===fl||e===ml||e===gl)if(t===Ft)if(n=o.get("WEBGL_compressed_texture_s3tc_srgb"),n!==null){if(e===wc)return n.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===fl)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===ml)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===gl)return n.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(n=o.get("WEBGL_compressed_texture_s3tc"),n!==null){if(e===wc)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===fl)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===ml)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===gl)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===wp||e===Sp||e===Mp||e===Tp)if(n=o.get("WEBGL_compressed_texture_pvrtc"),n!==null){if(e===wp)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===Sp)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===Mp)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===Tp)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===dx)return n=o.get("WEBGL_compressed_texture_etc1"),n!==null?n.COMPRESSED_RGB_ETC1_WEBGL:null;if(e===Xu||e===Ku)if(n=o.get("WEBGL_compressed_texture_etc"),n!==null){if(e===Xu)return t===Ft?n.COMPRESSED_SRGB8_ETC2:n.COMPRESSED_RGB8_ETC2;if(e===Ku)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:n.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===Yu||e===Ju||e===Zu||e===Qu||e===ed||e===td||e===rd||e===id||e===od||e===nd||e===sd||e===ad||e===ld||e===cd)if(n=o.get("WEBGL_compressed_texture_astc"),n!==null){if(e===Yu)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:n.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===Ju)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:n.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===Zu)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:n.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===Qu)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:n.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===ed)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:n.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===td)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:n.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===rd)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:n.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===id)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:n.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===od)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:n.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===nd)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:n.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===sd)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:n.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===ad)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:n.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===ld)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:n.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===cd)return t===Ft?n.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:n.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===Sc)if(n=o.get("EXT_texture_compression_bptc"),n!==null){if(e===Sc)return t===Ft?n.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:n.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===fx||e===Ep||e===Cp||e===Np)if(n=o.get("EXT_texture_compression_rgtc"),n!==null){if(e===Sc)return n.COMPRESSED_RED_RGTC1_EXT;if(e===Ep)return n.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===Cp)return n.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===Np)return n.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===Xn?i.UNSIGNED_INT_24_8:i[e]!==void 0?i[e]:null}}const fFe=pFe;let kj=!1,pw,RO,Ij;class mFe{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,kj===!1&&(this._init(this.gl),kj=!0)}_init(e){pw={[bc]:e.REPEAT,[oo]:e.CLAMP_TO_EDGE,[xc]:e.MIRRORED_REPEAT},RO={[Nr]:e.NEAREST,[_c]:e.NEAREST_MIPMAP_NEAREST,[Ea]:e.NEAREST_MIPMAP_LINEAR,[oi]:e.LINEAR,[Gg]:e.LINEAR_MIPMAP_NEAREST,[Tn]:e.LINEAR_MIPMAP_LINEAR},Ij={[nv]:e.NEVER,[dv]:e.ALWAYS,[Lp]:e.LESS,[av]:e.LEQUAL,[sv]:e.EQUAL,[uv]:e.GEQUAL,[lv]:e.GREATER,[cv]:e.NOTEQUAL}}filterFallback(e){const{gl:t}=this;return e===Nr||e===_c||e===Ea?t.NEAREST:t.LINEAR}getGLTextureType(e){const{gl:t}=this;let i;return e.isCubeTexture===!0?i=t.TEXTURE_CUBE_MAP:i=t.TEXTURE_2D,i}getInternalFormat(e,t,i,o,n=!1){const{gl:s,extensions:a}=this;if(e!==null){if(s[e]!==void 0)return s[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let l=t;return t===s.RED&&(i===s.FLOAT&&(l=s.R32F),i===s.HALF_FLOAT&&(l=s.R16F),i===s.UNSIGNED_BYTE&&(l=s.R8)),t===s.RED_INTEGER&&(i===s.UNSIGNED_BYTE&&(l=s.R8UI),i===s.UNSIGNED_SHORT&&(l=s.R16UI),i===s.UNSIGNED_INT&&(l=s.R32UI),i===s.BYTE&&(l=s.R8I),i===s.SHORT&&(l=s.R16I),i===s.INT&&(l=s.R32I)),t===s.RG&&(i===s.FLOAT&&(l=s.RG32F),i===s.HALF_FLOAT&&(l=s.RG16F),i===s.UNSIGNED_BYTE&&(l=s.RG8)),t===s.RGBA&&(i===s.FLOAT&&(l=s.RGBA32F),i===s.HALF_FLOAT&&(l=s.RGBA16F),i===s.UNSIGNED_BYTE&&(l=o===Ft&&n===!1?s.SRGB8_ALPHA8:s.RGBA8),i===s.UNSIGNED_SHORT_4_4_4_4&&(l=s.RGBA4),i===s.UNSIGNED_SHORT_5_5_5_1&&(l=s.RGB5_A1)),t===s.DEPTH_COMPONENT&&(i===s.UNSIGNED_INT&&(l=s.DEPTH_COMPONENT24),i===s.FLOAT&&(l=s.DEPTH_COMPONENT32F)),t===s.DEPTH_STENCIL&&i===s.UNSIGNED_INT_24_8&&(l=s.DEPTH24_STENCIL8),(l===s.R16F||l===s.R32F||l===s.RG16F||l===s.RG32F||l===s.RGBA16F||l===s.RGBA32F)&&a.get("EXT_color_buffer_float"),l}setTextureParameters(e,t){const{gl:i,extensions:o}=this;if(i.texParameteri(e,i.TEXTURE_WRAP_S,pw[t.wrapS]),i.texParameteri(e,i.TEXTURE_WRAP_T,pw[t.wrapT]),(e===i.TEXTURE_3D||e===i.TEXTURE_2D_ARRAY)&&i.texParameteri(e,i.TEXTURE_WRAP_R,pw[t.wrapR]),i.texParameteri(e,i.TEXTURE_MAG_FILTER,RO[t.magFilter]),i.texParameteri(e,i.TEXTURE_MIN_FILTER,RO[t.minFilter]),t.compareFunction&&(i.texParameteri(e,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(e,i.TEXTURE_COMPARE_FUNC,Ij[t.compareFunction])),o.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===Nr||t.minFilter!==Ea&&t.minFilter!==Tn||t.type===Di&&o.has("OES_texture_float_linear")===!1)return;t.anisotropy>1}}}const gFe=mFe;class vFe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions()}get(e){return this.gl.getExtension(e)}has(e){return this.availableExtensions.includes(e)}}const yFe=vFe;class bFe extends Lj{constructor(e={}){super(e)}async init(e){await super.init(e);const t=this.parameters,i=t.context!==void 0?t.context:e.domElement.getContext("webgl2");this.gl=i,this.extensions=new yFe(this),this.attributeUtils=new uFe(this),this.textureUtils=new gFe(this),this.state=new hFe(this),this.utils=new fFe(this),this.defaultTextures={},this.extensions.get("EXT_color_buffer_float")}get coordinateSystem(){return Ts}beginRender(e){const{gl:t}=this;this._setFramebuffer(e);let i=0;e.clearColor&&(i|=t.COLOR_BUFFER_BIT),e.clearDepth&&(i|=t.DEPTH_BUFFER_BIT),e.clearStencil&&(i|=t.STENCIL_BUFFER_BIT);const o=e.clearColorValue;if(i!==0)if(e.textures===null)t.clearColor(o.r,o.g,o.b,o.a),t.clear(i);else{for(let n=0;n<e.textures.length;n++)t.clearBufferfv(t.COLOR,n,[o.r,o.g,o.b,o.a]);t.clearBufferfi(t.DEPTH_STENCIL,0,1,1)}e.viewport?this.updateViewport(e):t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}finishRender(){}updateViewport(e){const t=this.gl,{x:i,y:o,width:n,height:s}=e.viewportValue;t.viewport(i,o,n,s)}clear(){console.warn("Abstract class.")}beginCompute(){console.warn("Abstract class.")}compute(){console.warn("Abstract class.")}finishCompute(){console.warn("Abstract class.")}draw(e,t){const{pipeline:i,material:o}=e,{programGPU:n,vaoGPU:s}=this.get(i),{gl:a,state:l}=this,c=e.getBindings();for(const v of c){const y=this.get(v),b=y.index;v.isUniformsGroup?a.bindBufferBase(a.UNIFORM_BUFFER,b,y.bufferGPU):v.isSampledTexture&&(a.activeTexture(a.TEXTURE0+b),a.bindTexture(y.glTextureType,y.textureGPU))}l.setMaterial(o),a.useProgram(n),a.bindVertexArray(s);const u=e.getIndex(),d=e.object,h=e.geometry,p=h.drawRange,m=p.start;let g;if(d.isPoints?g=a.POINTS:d.isLine?g=a.LINES:d.isLineLoop?g=a.LINE_LOOP:d.isLineSegments?g=a.LINES:g=a.TRIANGLES,u!==null){const v=this.get(u),y=p.count!==1/0?p.count:u.count;a.drawElements(g,u.count,v.type,m),t.update(d,y,1)}else{const v=h.attributes.position,y=p.count!==1/0?p.count:v.count;a.drawArrays(g,0,y),t.update(d,y,1)}a.bindVertexArray(null)}needsUpdate(e){return!1}getCacheKey(e){return""}createSampler(){}destroySampler(){console.warn("Abstract class.")}createDefaultTexture(e){const{gl:t,textureUtils:i,defaultTextures:o}=this,n=i.getGLTextureType(e);let s=o[n];s===void 0&&(s=t.createTexture(),t.bindTexture(n,s),t.texParameteri(n,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(n,t.TEXTURE_MAG_FILTER,t.NEAREST),o[n]=s),this.set(e,{textureGPU:s,glTextureType:n,isDefault:!0})}createTexture(e,t){const{gl:i,utils:o,textureUtils:n}=this,{levels:s,width:a,height:l}=t,c=o.convert(e.format,e.colorSpace),u=o.convert(e.type),d=n.getInternalFormat(e.internalFormat,c,u,e.colorSpace,e.isVideoTexture),h=i.createTexture(),p=n.getGLTextureType(e);i.bindTexture(p,h),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,e.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,e.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE),n.setTextureParameters(p,e),i.bindTexture(p,h),e.isVideoTexture||i.texStorage2D(p,s,d,a,l),this.set(e,{textureGPU:h,glTextureType:p,glFormat:c,glType:u,glInternalFormat:d})}updateTexture(e,t){const{gl:i}=this,{width:o,height:n}=t,{textureGPU:s,glTextureType:a,glFormat:l,glType:c,glInternalFormat:u}=this.get(e),d=h=>h.isDataTexture?h.image.data:h instanceof ImageBitmap||h instanceof OffscreenCanvas?h:h.data;if(i.bindTexture(a,s),e.isCubeTexture){const h=t.images;for(let p=0;p<6;p++){const m=d(h[p]);i.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,0,0,o,n,l,c,m)}}else if(e.isVideoTexture)e.update(),i.texImage2D(a,0,u,l,c,t.image);else{const h=d(t.image);i.texSubImage2D(a,0,0,0,o,n,l,c,h)}}generateMipmaps(e){const{gl:t}=this,{textureGPU:i,glTextureType:o}=this.get(e);t.bindTexture(o,i),t.generateMipmap(o)}destroyTexture(){console.warn("Abstract class.")}copyTextureToBuffer(){console.warn("Abstract class.")}createNodeBuilder(e,t,i=null){return new aFe(e,t,i)}createProgram(e){const t=this.gl,{stage:i,code:o}=e,n=i==="vertex"?t.createShader(t.VERTEX_SHADER):t.createShader(t.FRAGMENT_SHADER);t.shaderSource(n,o),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLBackend:",t.getShaderInfoLog(n)),this.set(e,{shaderGPU:n})}destroyProgram(){console.warn("Abstract class.")}createRenderPipeline(e){const t=this.gl,i=e.pipeline,{fragmentProgram:o,vertexProgram:n}=i,s=t.createProgram();t.attachShader(s,this.get(o).shaderGPU),t.attachShader(s,this.get(n).shaderGPU),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)===!1&&console.error("THREE.WebGLBackend:",t.getProgramInfoLog(s)),t.useProgram(s);const a=e.getBindings();for(const d of a){const h=this.get(d).index;if(d.isUniformsGroup){const p=t.getUniformBlockIndex(s,d.name);t.uniformBlockBinding(s,p,h)}else if(d.isSampledTexture){const p=t.getUniformLocation(s,d.name);t.uniform1i(p,h)}}const l=t.createVertexArray(),c=e.getIndex(),u=e.getVertexBuffers();if(t.bindVertexArray(l),c!==null){const d=this.get(c);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,d.bufferGPU)}for(let d=0;d<u.length;d++){const h=u[d],p=this.get(h);t.bindBuffer(t.ARRAY_BUFFER,p.bufferGPU),t.enableVertexAttribArray(d),t.vertexAttribPointer(d,h.itemSize,p.type,!1,0,0)}t.bindVertexArray(null),this.set(i,{programGPU:s,vaoGPU:l})}createComputePipeline(){console.warn("Abstract class.")}createBindings(e){this.updateBindings(e)}updateBindings(e){const{gl:t}=this;let i=0,o=0;for(const n of e)if(n.isUniformsGroup){const s=t.createBuffer(),a=n.buffer;t.bindBuffer(t.UNIFORM_BUFFER,s),t.bufferData(t.UNIFORM_BUFFER,a,t.DYNAMIC_DRAW),t.bindBufferBase(t.UNIFORM_BUFFER,i,s),this.set(n,{index:i++,bufferGPU:s})}else if(n.isSampledTexture){const{textureGPU:s,glTextureType:a}=this.get(n.texture);this.set(n,{index:o++,textureGPU:s,glTextureType:a})}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup){const i=this.get(e).bufferGPU,o=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,i),t.bufferData(t.UNIFORM_BUFFER,o,t.DYNAMIC_DRAW)}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(){console.warn("Abstract class.")}updateAttribute(){console.warn("Abstract class.")}destroyAttribute(){console.warn("Abstract class.")}updateSize(){}hasFeature(e){return!0}copyFramebufferToTexture(){console.warn("Abstract class.")}_setFramebuffer(e){const{gl:t}=this;if(e.textures!==null){const i=this.get(e);let o=i.framebuffer;if(o===void 0){o=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,o);const n=e.textures,s=[];for(let a=0;a<n.length;a++){const l=n[a],{textureGPU:c}=this.get(l),u=t.COLOR_ATTACHMENT0+a;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+a,t.TEXTURE_2D,c,0),s.push(u)}if(t.drawBuffers(s),e.depthTexture!==null){const{textureGPU:a}=this.get(e.depthTexture);t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0)}i.framebuffer=o}else t.bindFramebuffer(t.FRAMEBUFFER,o)}else t.bindFramebuffer(t.FRAMEBUFFER,null)}}const xFe=bFe,Uf={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Ro={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},la={Store:"store",Discard:"discard"},ji={Load:"load",Clear:"clear"},LO={CCW:"ccw",CW:"cw"},OO={None:"none",Front:"front",Back:"back"},zf={Uint16:"uint16",Uint32:"uint32"},qe={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10uFloat:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Stencil8:"stencil8",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},kO={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},fw={Linear:"linear",Nearest:"nearest"},Zt={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDstColor:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},sh={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},Pj={None:0,Red:1,Green:2,Blue:4,Alpha:8,All:15},Jc={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},_Fe={Uniform:"uniform",Storage:"storage",ReadOnlyStorage:"read-only-storage"},Dj={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},Bj={OneD:"1d",TwoD:"2d",ThreeD:"3d"},Zc={OneD:"1d",TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",CubeArray:"cube-array",ThreeD:"3d"},wFe={All:"all",StencilOnly:"stencil-only",DepthOnly:"depth-only"},mw={Vertex:"vertex",Instance:"instance"},IO={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable"};class SFe extends TO{constructor(e,t){super(e),this.texture=t,this.version=t?t.version:0,this.isSampler=!0}}const MFe=SFe;class TFe extends MFe{constructor(e,t){super(e,t?t.value:null),this.textureNode=t}}const EFe=TFe;class CFe extends Cj{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}const NFe=CFe;class AFe{constructor(e){this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,o=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:fw.Linear}),this.flipYSampler=e.createSampler({minFilter:fw.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:i}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:o})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Uf.TriangleStrip,stripIndexFormat:zf.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Uf.TriangleStrip,stripIndexFormat:zf.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,i=0){const o=t.format,{width:n,height:s}=t.size,a=this.getTransferPipeline(o),l=this.getFlipYPipeline(o),c=this.device.createTexture({size:{width:n,height:s,depthOrArrayLayers:1},format:o,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),u=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Zc.TwoD,baseArrayLayer:i}),d=c.createView({baseMipLevel:0,mipLevelCount:1,dimension:Zc.TwoD,baseArrayLayer:0}),h=this.device.createCommandEncoder({}),p=(m,g,v)=>{const y=m.getBindGroupLayout(0),b=this.device.createBindGroup({layout:y,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:g}]}),x=h.beginRenderPass({colorAttachments:[{view:v,loadOp:ji.Clear,storeOp:la.Store,clearValue:[0,0,0,0]}]});x.setPipeline(m),x.setBindGroup(0,b),x.draw(4,1,0,0),x.end()};p(a,u,d),p(l,d,u),this.device.queue.submit([h.finish()]),c.destroy()}generateMipmaps(e,t,i=0){const o=this.getTransferPipeline(t.format),n=this.device.createCommandEncoder({}),s=o.getBindGroupLayout(0);let a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:Zc.TwoD,baseArrayLayer:i});for(let l=1;l<t.mipLevelCount;l++){const c=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),u=e.createView({baseMipLevel:l,mipLevelCount:1,dimension:Zc.TwoD,baseArrayLayer:i}),d=n.beginRenderPass({colorAttachments:[{view:u,loadOp:ji.Clear,storeOp:la.Store,clearValue:[0,0,0,0]}]});d.setPipeline(o),d.setBindGroup(0,c),d.draw(4,1,0,0),d.end(),a=u}this.device.queue.submit([n.finish()])}}const RFe=AFe,LFe={[nv]:"never",[Lp]:"less",[sv]:"equal",[av]:"less-equal",[lv]:"greater",[uv]:"greater-equal",[dv]:"always",[cv]:"not-equal"},OFe=[0,1,3,2,4,5];class kFe{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture=null,this.defaultCubeTexture=null}createSampler(e){const t=this.backend,i=t.device,o=t.get(e),n={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:e.anisotropy};e.isDepthTexture&&e.compareFunction!==null&&(n.compare=LFe[e.compareFunction]),o.sampler=i.createSampler(n)}createDefaultTexture(e){let t;e.isCubeTexture?t=this._getDefaultCubeTextureGPU():t=this._getDefaultTextureGPU(),this.backend.get(e).texture=t}createTexture(e,t={}){const i=this.backend,o=i.get(e);if(o.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:n,height:s,depth:a,levels:l}=t,c=this._getDimension(e),u=e.internalFormat||Fj(e,this.device),d=t.sampleCount!==void 0?t.sampleCount:1,h=e.isRenderTargetTexture?1:d;let p=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(p|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&(p|=GPUTextureUsage.RENDER_ATTACHMENT);const m={label:e.name,size:{width:n,height:s,depthOrArrayLayers:a},mipLevelCount:l,sampleCount:h,dimension:c,format:u,usage:p};if(e.isVideoTexture){const g=e.source.data,v=new VideoFrame(g);m.size.width=v.displayWidth,m.size.height=v.displayHeight,v.close(),o.externalTexture=g}else{if(u===void 0)return console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);o.texture=i.device.createTexture(m)}if(e.isRenderTargetTexture&&d>1){const g=Object.assign({},m);g.label=g.label+"-msaa",g.sampleCount=d,o.msaaTexture=i.device.createTexture(g)}o.initialized=!0,o.textureDescriptorGPU=m}destroyTexture(e){const t=this.backend,i=t.get(e);i.texture.destroy(),i.msaaTexture!==void 0&&i.msaaTexture.destroy(),t.delete(e)}destroySampler(e){const t=this.backend.get(e);delete t.sampler}generateMipmaps(e){const t=this.backend.get(e);if(e.isCubeTexture)for(let i=0;i<6;i++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,i);else this._generateMipmaps(t.texture,t.textureDescriptorGPU)}updateTexture(e,t){const i=this.backend.get(e),{textureDescriptorGPU:o}=i;if(!(e.isRenderTargetTexture||o===void 0)){if(e.isDataTexture||e.isDataArrayTexture||e.isData3DTexture)this._copyBufferToTexture(t.image,i.texture,o,0,!1);else if(e.isCompressedTexture)this._copyCompressedBufferToTexture(e.mipmaps,i.texture,o);else if(e.isCubeTexture)this._copyCubeMapToTexture(t.images,i.texture,o,e.flipY);else if(e.isVideoTexture){const n=e.source.data;i.externalTexture=n}else this._copyImageToTexture(t.image,i.texture,o,0,e.flipY);i.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,t,i,o,n){const s=this.backend.device,a=this.backend.get(e),l=a.texture,c=a.textureDescriptorGPU.format,u=this._getBytesPerTexel(c),d=s.createBuffer({size:o*n*u,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),h=s.createCommandEncoder();h.copyTextureToBuffer({texture:l,origin:{x:t,y:i}},{buffer:d,bytesPerRow:o*u},{width:o,height:n});const p=this._getTypedArrayType(c);s.queue.submit([h.finish()]),await d.mapAsync(GPUMapMode.READ);const m=d.getMappedRange();return new p(m)}_isEnvironmentTexture(e){const t=e.mapping;return t===hl||t===pl||t===Ms||t===Ks}_getDefaultTextureGPU(){let e=this.defaultTexture;if(e===null){const t=new mi;t.minFilter=Nr,t.magFilter=Nr,this.createTexture(t,{width:1,height:1}),this.defaultTexture=e=t}return this.backend.get(e).texture}_getDefaultCubeTextureGPU(){let e=this.defaultTexture;if(e===null){const t=new yd;t.minFilter=Nr,t.magFilter=Nr,this.createTexture(t,{width:1,height:1,depth:6}),this.defaultCubeTexture=e=t}return this.backend.get(e).texture}_copyCubeMapToTexture(e,t,i,o){for(let n=0;n<6;n++){const s=e[n],a=o===!0?OFe[n]:n;s.isDataTexture?this._copyBufferToTexture(s.image,t,i,a,o):this._copyImageToTexture(s,t,i,a,o)}}_copyImageToTexture(e,t,i,o,n){this.backend.device.queue.copyExternalImageToTexture({source:e},{texture:t,mipLevel:0,origin:{x:0,y:0,z:o}},{width:e.width,height:e.height,depthOrArrayLayers:1}),n===!0&&this._flipY(t,i,o)}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new RFe(this.backend.device)),e}_generateMipmaps(e,t,i=0){this._getPassUtils().generateMipmaps(e,t,i)}_flipY(e,t,i=0){this._getPassUtils().flipY(e,t,i)}_copyBufferToTexture(e,t,i,o,n){const s=this.backend.device,a=e.data,l=this._getBytesPerTexel(i.format),c=e.width*l;s.queue.writeTexture({texture:t,mipLevel:0,origin:{x:0,y:0,z:o}},a,{offset:0,bytesPerRow:c},{width:e.width,height:e.height,depthOrArrayLayers:e.depth!==void 0?e.depth:1}),n===!0&&this._flipY(t,i,o)}_copyCompressedBufferToTexture(e,t,i){const o=this.backend.device,n=this._getBlockData(i.format);for(let s=0;s<e.length;s++){const a=e[s],l=a.width,c=a.height,u=Math.ceil(l/n.width)*n.byteLength;o.queue.writeTexture({texture:t,mipLevel:s},a.data,{offset:0,bytesPerRow:u},{width:Math.ceil(l/n.width)*n.width,height:Math.ceil(c/n.width)*n.width,depthOrArrayLayers:1})}}_getBlockData(e){if(e===qe.BC1RGBAUnorm||e===qe.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===qe.BC2RGBAUnorm||e===qe.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===qe.BC3RGBAUnorm||e===qe.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===qe.BC4RUnorm||e===qe.BC4RSNorm)return{byteLength:8,width:4,height:4};if(e===qe.BC5RGUnorm||e===qe.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===qe.BC6HRGBUFloat||e===qe.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===qe.BC7RGBAUnorm||e===qe.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===qe.ETC2RGB8Unorm||e===qe.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===qe.ETC2RGB8A1Unorm||e===qe.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===qe.ETC2RGBA8Unorm||e===qe.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===qe.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===qe.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===qe.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===qe.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===qe.ASTC4x4Unorm||e===qe.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===qe.ASTC5x4Unorm||e===qe.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===qe.ASTC5x5Unorm||e===qe.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===qe.ASTC6x5Unorm||e===qe.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===qe.ASTC6x6Unorm||e===qe.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===qe.ASTC8x5Unorm||e===qe.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===qe.ASTC8x6Unorm||e===qe.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===qe.ASTC8x8Unorm||e===qe.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===qe.ASTC10x5Unorm||e===qe.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===qe.ASTC10x6Unorm||e===qe.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===qe.ASTC10x8Unorm||e===qe.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===qe.ASTC10x10Unorm||e===qe.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===qe.ASTC12x10Unorm||e===qe.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===qe.ASTC12x12Unorm||e===qe.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=kO.ClampToEdge;return e===bc?t=kO.Repeat:e===xc&&(t=kO.MirrorRepeat),t}_convertFilterMode(e){let t=fw.Linear;return(e===Nr||e===_c||e===Ea)&&(t=fw.Nearest),t}_getBytesPerTexel(e){if(e===qe.R8Unorm)return 1;if(e===qe.R16Float||e===qe.RG8Unorm)return 2;if(e===qe.RG16Float||e===qe.R32Float||e===qe.RGBA8Unorm||e===qe.RGBA8UnormSRGB)return 4;if(e===qe.RG32Float||e===qe.RGBA16Float)return 8;if(e===qe.RGBA32Float)return 16}_getTypedArrayType(e){if(e===qe.R8Uint)return Uint8Array;if(e===qe.R8Sint)return Int8Array;if(e===qe.R8Unorm)return Uint8Array;if(e===qe.R8Snorm)return Int8Array;if(e===qe.RG8Uint)return Uint8Array;if(e===qe.RG8Sint)return Int8Array;if(e===qe.RG8Unorm)return Uint8Array;if(e===qe.RG8Snorm)return Int8Array;if(e===qe.RGBA8Uint)return Uint8Array;if(e===qe.RGBA8Sint)return Int8Array;if(e===qe.RGBA8Unorm)return Uint8Array;if(e===qe.RGBA8Snorm)return Int8Array;if(e===qe.R16Uint)return Uint16Array;if(e===qe.R16Sint)return Int16Array;if(e===qe.RG16Uint)return Uint16Array;if(e===qe.RG16Sint)return Int16Array;if(e===qe.RGBA16Uint)return Uint16Array;if(e===qe.RGBA16Sint)return Int16Array;if(e===qe.R32Uint)return Uint32Array;if(e===qe.R32Sint)return Int32Array;if(e===qe.R32Float)return Float32Array;if(e===qe.RG32Uint)return Uint32Array;if(e===qe.RG32Sint)return Int32Array;if(e===qe.RG32Float)return Float32Array;if(e===qe.RGBA32Uint)return Uint32Array;if(e===qe.RGBA32Sint)return Int32Array;if(e===qe.RGBA32Float)return Float32Array}_getDimension(e){let t;return e.isData3DTexture?t=Bj.ThreeD:t=Bj.TwoD,t}}function Fj(r,e=null){const t=r.format,i=r.type,o=r.colorSpace;let n;if(r.isFramebufferTexture===!0)n=qe.BGRA8Unorm;else if(r.isCompressedTexture===!0)switch(t){case fl:n=o===Ft?qe.BC1RGBAUnormSRGB:qe.BC1RGBAUnorm;break;case ml:n=o===Ft?qe.BC2RGBAUnormSRGB:qe.BC2RGBAUnorm;break;case gl:n=o===Ft?qe.BC3RGBAUnormSRGB:qe.BC3RGBAUnorm;break;case Xu:n=o===Ft?qe.ETC2RGB8UnormSRGB:qe.ETC2RGB8Unorm;break;case Ku:n=o===Ft?qe.ETC2RGBA8UnormSRGB:qe.ETC2RGBA8Unorm;break;case Yu:n=o===Ft?qe.ASTC4x4UnormSRGB:qe.ASTC4x4Unorm;break;case Ju:n=o===Ft?qe.ASTC5x4UnormSRGB:qe.ASTC5x4Unorm;break;case Zu:n=o===Ft?qe.ASTC5x5UnormSRGB:qe.ASTC5x5Unorm;break;case Qu:n=o===Ft?qe.ASTC6x5UnormSRGB:qe.ASTC6x5Unorm;break;case ed:n=o===Ft?qe.ASTC6x6UnormSRGB:qe.ASTC6x6Unorm;break;case td:n=o===Ft?qe.ASTC8x5UnormSRGB:qe.ASTC8x5Unorm;break;case rd:n=o===Ft?qe.ASTC8x6UnormSRGB:qe.ASTC8x6Unorm;break;case id:n=o===Ft?qe.ASTC8x8UnormSRGB:qe.ASTC8x8Unorm;break;case od:n=o===Ft?qe.ASTC10x5UnormSRGB:qe.ASTC10x5Unorm;break;case nd:n=o===Ft?qe.ASTC10x6UnormSRGB:qe.ASTC10x6Unorm;break;case sd:n=o===Ft?qe.ASTC10x8UnormSRGB:qe.ASTC10x8Unorm;break;case ad:n=o===Ft?qe.ASTC10x10UnormSRGB:qe.ASTC10x10Unorm;break;case ld:n=o===Ft?qe.ASTC12x10UnormSRGB:qe.ASTC12x10Unorm;break;case cd:n=o===Ft?qe.ASTC12x12UnormSRGB:qe.ASTC12x12Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case Po:switch(i){case En:n=o===Ft?qe.RGBA8UnormSRGB:qe.RGBA8Unorm;break;case no:n=qe.RGBA16Float;break;case Di:n=qe.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",i)}break;case bp:switch(i){case En:n=qe.R8Unorm;break;case no:n=qe.R16Float;break;case Di:n=qe.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",i)}break;case _p:switch(i){case En:n=qe.RG8Unorm;break;case no:n=qe.RG16Float;break;case Di:n=qe.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",i)}break;case Do:switch(i){case qu:n=qe.Depth16Unorm;break;case Cn:n=qe.Depth24Plus;break;case Di:n=qe.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",i)}break;case Nn:switch(i){case Xn:n=qe.Depth24PlusStencil8;break;case Di:e&&e.features.has(IO.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),n=qe.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",i)}break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}return n}const IFe=kFe,PFe=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+)?/i,DFe=/[a-z_0-9]+|<(.*?)>+/ig,BFe={f32:"float"},FFe=r=>{r=r.trim();const e=r.match(PFe);if(e!==null&&e.length===4){const t=e[2],i=[];let o=null;for(;(o=DFe.exec(t))!==null;)i.push(o);const n=[];let s=0;for(;s<i.length;){const c=i[s++][0];let u=i[s++][0];u=BFe[u]||u,s<i.length&&i[s][0].startsWith("<")===!0&&s++,n.push(new L_(u,c))}const a=r.substring(e[0].length),l=e[1]!==void 0?e[1]:"";return{type:e[3]||"void",inputs:n,name:l,inputsCode:t,blockCode:a}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class UFe extends pH{constructor(e){const{type:t,inputs:i,name:o,inputsCode:n,blockCode:s}=FFe(e);super(t,i,o),this.inputsCode=n,this.blockCode=s}getCode(e=this.name){const t=this.type!=="void"?"-> "+this.type:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}const zFe=UFe;class VFe extends dH{parseFunction(e){return new zFe(e)}}const GFe=VFe,gw={vertex:GPUShaderStage.VERTEX,fragment:GPUShaderStage.FRAGMENT,compute:GPUShaderStage.COMPUTE},HFe={instance:!0},jFe={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat3:"mat3x3<f32>",imat3:"mat3x3<i32>",umat3:"mat3x3<u32>",bmat3:"mat3x3<bool>",mat4:"mat4x4<f32>",imat4:"mat4x4<i32>",umat4:"mat4x4<u32>",bmat4:"mat4x4<bool>"},$Fe={dFdx:"dpdx",dFdy:"- dpdy",mod:"threejs_mod",lessThanEqual:"threejs_lessThanEqual",inversesqrt:"inverseSqrt"},Uj={lessThanEqual:new Va(`
fn threejs_lessThanEqual( a : vec3<f32>, b : vec3<f32> ) -> vec3<bool> {

	return vec3<bool>( a.x <= b.x, a.y <= b.y, a.z <= b.z );

}
`),mod:new Va(`
fn threejs_mod( x : f32, y : f32 ) -> f32 {

	return x - y * floor( x / y );

}
`),repeatWrapping:new Va(`
fn threejs_repeatWrapping( uv : vec2<f32>, dimension : vec2<u32> ) -> vec2<u32> {

	let uvScaled = vec2<u32>( uv * vec2<f32>( dimension ) );

	return ( ( uvScaled % dimension ) + dimension ) % dimension;

}
`)};class WFe extends R_{constructor(e,t,i=null){super(e,t,new GFe,i),this.uniformsGroup={},this.builtins={vertex:new Map,fragment:new Map,compute:new Map,attribute:new Map}}build(){const{object:e,material:t}=this;return t!==null?To.fromMaterial(t).build(this):this.addFlow("compute",e),super.build()}needsColorSpaceToLinear(e){return e.isVideoTexture===!0&&e.colorSpace!==so}_getSampler(e,t,i,o=this.shaderStage){return o==="fragment"?`textureSample( ${t}, ${t}_sampler, ${i} )`:this.getTextureLoad(e,t,i)}_getVideoSampler(e,t,i=this.shaderStage){if(i==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${t}.x, 1.0 - ${t}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${i} shader.`)}_getSamplerLevel(e,t,i,o,n=this.shaderStage){return n==="fragment"&&this.isUnfilterable(e)===!1?`textureSampleLevel( ${t}, ${t}_sampler, ${i}, ${o} )`:this.getTextureLoad(e,t,i,o)}getTextureLoad(e,t,i,o="0"){this._include("repeatWrapping");const n=`textureDimensions( ${t}, 0 )`;return`textureLoad( ${t}, threejs_repeatWrapping( ${i}, ${n} ), i32( ${o} ) )`}isUnfilterable(e){return e.isDataTexture===!0&&e.type===Di}getTexture(e,t,i,o=this.shaderStage){let n=null;return e.isVideoTexture===!0?n=this._getVideoSampler(t,i,o):this.isUnfilterable(e)?n=this.getTextureLoad(e,t,i):n=this._getSampler(e,t,i,o),n}getTextureCompare(e,t,i,o,n=this.shaderStage){if(n==="fragment")return`textureSampleCompare( ${t}, ${t}_sampler, ${i}, ${o} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${n} shader.`)}getTextureLevel(e,t,i,o,n=this.shaderStage){let s=null;return e.isVideoTexture===!0?s=this._getVideoSampler(t,i,n):s=this._getSamplerLevel(e,t,i,o,n),s}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`NodeVaryings.${e.name}`}else if(e.isNodeUniform===!0){const i=e.name,o=e.type;return o==="texture"||o==="cubeTexture"?i:o==="buffer"||o==="storageBuffer"?`NodeBuffer_${e.node.id}.${i}`:`NodeUniforms.${i}`}return super.getPropertyName(e)}getUniformFromNode(e,t,i,o=null){const n=super.getUniformFromNode(e,t,i,o),s=this.getDataFromNode(e,i);if(s.uniformGPU===void 0){let a;const l=this.bindings[i];if(t==="texture"||t==="cubeTexture"){let c=null;t==="texture"?c=new EO(n.name,n.node):t==="cubeTexture"&&(c=new Rj(n.name,n.node)),c.store=e.isStoreTextureNode===!0,c.setVisibility(gw[i]);const u=l[l.length-1],d=u&&u.isUniformsGroup?l.length-1:l.length;if(i==="fragment"&&this.isUnfilterable(e.value)===!1&&c.store===!1){const h=new EFe(`${n.name}_sampler`,n.node);h.setVisibility(gw[i]),l.splice(d,0,h,c),a=[h,c]}else l.splice(d,0,c),a=[c]}else if(t==="buffer"||t==="storageBuffer"){const c=t==="storageBuffer"?NFe:Nj,u=new c("NodeBuffer_"+e.id,e.value);u.setVisibility(gw[i]);const d=l[l.length-1],h=d&&d.isUniformsGroup?l.length-1:l.length;l.splice(h,0,u),a=u}else{let c=this.uniformsGroup[i];if(c===void 0&&(c=new Aj("nodeUniforms"),c.setVisibility(gw[i]),this.uniformsGroup[i]=c,l.push(c)),e.isArrayUniformNode===!0){a=[];for(const u of e.nodes){const d=this.getNodeUniform(u,t);d.boundary=JBe(d.itemSize),d.itemSize=Ej(d.itemSize),c.addUniform(d),a.push(d)}}else a=this.getNodeUniform(n,t),c.addUniform(a)}s.uniformGPU=a,i==="vertex"&&(this.bindingsOffset.fragment=l.length)}return n}isReference(e){return super.isReference(e)||e==="texture_2d"||e==="texture_cube"||e==="texture_storage_2d"}getBuiltin(e,t,i,o=this.shaderStage){const n=this.builtins[o];return n.has(e)===!1&&n.set(e,{name:e,property:t,type:i}),t}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>","fragment")}isFlipY(){return!1}getAttributes(e){const t=[];if(e==="compute"&&this.getBuiltin("global_invocation_id","id","vec3<u32>","attribute"),e==="vertex"||e==="compute"){for(const{name:o,property:n,type:s}of this.builtins.attribute.values())t.push(`@builtin( ${o} ) ${n} : ${s}`);const i=this.getAttributesArray();for(let o=0,n=i.length;o<n;o++){const s=i[o],a=s.name,l=this.getType(s.type);t.push(`@location( ${o} ) ${a} : ${l}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[],i=e.getMemberTypes();for(let o=0;o<i.length;o++){const n=i[o];t.push(`	@location( ${o} ) m${o} : ${n}<f32>`)}return t.join(`,
`)}getStructs(e){const t=[],i=this.structs[e];for(let o=0,n=i.length;o<n;o++){const s=i[o];let a=`struct ${s.name} {
`;a+=this.getStructMembers(s),a+=`
}`,t.push(a)}return t.join(`

`)}getVar(e,t){return`var ${t} : ${this.getType(e)}`}getVars(e){const t=[],i=this.vars[e];for(const o of i)t.push(`	${this.getVar(o.type,o.name)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const o=this.varyings,n=this.vars[e];for(let s=0;s<o.length;s++){const a=o[s];if(a.needsInterpolation){let l=`@location( ${s} )`;(a.type==="int"||a.type==="uint")&&(l+=" @interpolate( flat )"),t.push(`${l} ${a.name} : ${this.getType(a.type)}`)}else e==="vertex"&&n.includes(a)===!1&&n.push(a)}}for(const{name:o,property:n,type:s}of this.builtins[e].values())t.push(`@builtin( ${o} ) ${n} : ${s}`);const i=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("NodeVaryingsStruct","	"+i):i}getUniforms(e){const t=this.uniforms[e],i=[],o=[],n=[];let s=this.bindingsOffset[e];for(const l of t)if(l.type==="texture"||l.type==="cubeTexture"){const c=l.node.value;e==="fragment"&&this.isUnfilterable(c)===!1&&l.node.isStoreTextureNode!==!0&&(c.isDepthTexture===!0&&c.compareFunction!==null?i.push(`@binding( ${s++} ) @group( 0 ) var ${l.name}_sampler : sampler_comparison;`):i.push(`@binding( ${s++} ) @group( 0 ) var ${l.name}_sampler : sampler;`));let u;c.isCubeTexture===!0?u="texture_cube<f32>":c.isDepthTexture===!0?u="texture_depth_2d":c.isVideoTexture===!0?u="texture_external":l.node.isStoreTextureNode===!0?u="texture_storage_2d<"+Fj(c)+", write>":u="texture_2d<f32>",i.push(`@binding( ${s++} ) @group( 0 ) var ${l.name} : ${u};`)}else if(l.type==="buffer"||l.type==="storageBuffer"){const c=l.node,u=this.getType(c.bufferType),d=c.bufferCount,h=d>0?", "+d:"",p=`	${l.name} : array< ${u}${h} >
`,m=c.isStorageBufferNode?"storage,read_write":"uniform";o.push(this._getWGSLStructBinding("NodeBuffer_"+c.id,p,m,s++))}else{const c=this.getType(this.getVectorType(l.type));if(Array.isArray(l.value)===!0){const u=l.value.length;n.push(`uniform ${c}[ ${u} ] ${l.name}`)}else n.push(`	${l.name} : ${c}`)}let a=i.join(`
`);return a+=o.join(`
`),n.length>0&&(a+=this._getWGSLStructBinding("NodeUniforms",n.join(`,
`),"uniform",s++)),a}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};for(const t in e){let i=`// code

`;i+=this.flowCode[t];const o=this.flowNodes[t],n=o[o.length-1];for(const l of o){const c=this.getFlowData(l),u=l.name;u&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${u}
	`),i+=`${c.code}
	`,l===n&&t!=="compute"&&(i+=`// result
	`,t==="vertex"?i+="NodeVaryings.Vertex = ":t==="fragment"&&(i+="return "),i+=`${c.result};`)}const s=n.outputNode,a=e[t];a.uniforms=this.getUniforms(t),a.attributes=this.getAttributes(t),a.varyings=this.getVaryings(t),a.structs=this.getStructs(t),a.vars=this.getVars(t),a.codes=this.getCodes(t),a.returnType=s!==void 0&&s.isOutputStructNode===!0?s.nodeType:"@location( 0 ) vec4<f32>",a.flow=i}this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e){return Uj[e]!==void 0&&this._include(e),$Fe[e]||e}getType(e){return jFe[e]||e}isAvailable(e){return HFe[e]===!0}_include(e){Uj[e].build(this)}_getWGSLVertexCode(e){return`${this.getSignature()}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> NodeVaryingsStruct {

	// system
	var NodeVaryings: NodeVaryingsStruct;

	// vars
	${e.vars}

	// flow
	${e.flow}

	return NodeVaryings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}

// uniforms
${e.uniforms}

// structs
${e.structs}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){return`${this.getSignature()}
// system
var<private> instanceIndex : u32;

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${t} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = id.x;

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,i,o=0,n=0){const s=e+"Struct";return`${this._getWGSLStruct(s,t)}
@binding( ${o} ) @group( ${n} )
var<${i}> ${e} : ${s};`}}const qFe=WFe;class XFe{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=qe.Depth24PlusStencil8:e.depth&&(t=qe.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).texture.format}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=qe.BGRA8Unorm,t}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return Uf.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return Uf.LineList;if(e.isLine)return Uf.LineStrip;if(e.isMesh)return Uf.TriangleList}getSampleCount(e){return e.textures!==null?e.sampleCount:this.backend.parameters.sampleCount}}const KFe=XFe,YFe=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),JFe=new Map([[NC,["float16"]]]),ZFe=new Map([[Int32Array,"sint32"],[Uint32Array,"uint32"],[Float32Array,"float32"]]);class QFe{constructor(e){this.backend=e}createAttribute(e,t){const i=this._getBufferAttribute(e),o=this.backend,n=o.get(i);let s=n.buffer;if(s===void 0){const a=o.device,l=i.array,c=l.byteLength+(4-l.byteLength%4)%4;s=a.createBuffer({label:i.name,size:c,usage:t,mappedAtCreation:!0}),new l.constructor(s.getMappedRange()).set(l),s.unmap(),n.buffer=s}}updateAttribute(e){const t=this._getBufferAttribute(e),i=this.backend,o=i.device,n=i.get(t).buffer,s=t.array,a=t.updateRange;a.count===-1?o.queue.writeBuffer(n,0,s,0):(o.queue.writeBuffer(n,0,s,a.offset*s.BYTES_PER_ELEMENT,a.count*s.BYTES_PER_ELEMENT),a.count=-1)}createShaderVertexBuffers(e){const t=e.getAttributes(),i=new Map;for(let o=0;o<t.length;o++){const n=t[o],s=n.array.BYTES_PER_ELEMENT,a=this._getBufferAttribute(n);let l=i.get(a);if(l===void 0){let d,h;n.isInterleavedBufferAttribute===!0?(d=n.data.stride*s,h=n.data.isInstancedInterleavedBuffer?mw.Instance:mw.Vertex):(d=n.itemSize*s,h=n.isInstancedBufferAttribute?mw.Instance:mw.Vertex),l={arrayStride:d,attributes:[],stepMode:h},i.set(a,l)}const c=this._getVertexFormat(n),u=n.isInterleavedBufferAttribute===!0?n.offset*s:0;l.attributes.push({shaderLocation:o,offset:u,format:c})}return Array.from(i.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,i=t.device,o=t.get(this._getBufferAttribute(e)),n=o.buffer,s=n.size;let a=o.readBuffer,l=!0;a===void 0&&(a=i.createBuffer({label:e.name,size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),l=!1,o.readBuffer=a);const c=i.createCommandEncoder({});c.copyBufferToBuffer(n,0,a,0,s),l&&a.unmap();const u=c.finish();return i.queue.submit([u]),await a.mapAsync(GPUMapMode.READ),a.getMappedRange()}_getVertexFormat(e){const{itemSize:t,normalized:i}=e,o=e.array.constructor,n=e.constructor;let s;if(t==1)s=ZFe.get(o);else{const a=(JFe.get(n)||YFe.get(o))[i?1:0];if(a){const l=o.BYTES_PER_ELEMENT*t,c=Math.floor((l+3)/4)*4/o.BYTES_PER_ELEMENT;if(c%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");s=`${a}x${c}`}}return s||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),s}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}const e4e=QFe;class t4e{constructor(e){this.backend=e}createBindingsLayout(e){const t=this.backend.device,i=[];let o=0;for(const n of e){const s={binding:o++,visibility:n.visibility};if(n.isUniformBuffer||n.isStorageBuffer){const a={};n.isStorageBuffer&&(a.type=_Fe.Storage),s.buffer=a}else if(n.isSampler){const a={};n.texture.isDepthTexture&&n.texture.compareFunction!==null&&(a.type="comparison"),s.sampler=a}else if(n.isSampledTexture&&n.texture.isVideoTexture)s.externalTexture={};else if(n.isSampledTexture&&n.store){const a=this.backend.get(n.texture).texture.format;s.storageTexture={format:a}}else if(n.isSampledTexture){const a={};n.texture.isDepthTexture?a.sampleType=Dj.Depth:n.texture.isDataTexture&&n.texture.type===Di&&(a.sampleType=Dj.UnfilterableFloat),n.isSampledCubeTexture&&(a.viewDimension=Zc.Cube),s.texture=a}else console.error('WebGPUBindingUtils: Unsupported binding "${ binding }".');i.push(s)}return t.createBindGroupLayout({entries:i})}createBindings(e){const t=this.backend.get(e),i=this.createBindingsLayout(e),o=this.createBindGroup(e,i);t.layout=i,t.group=o,t.bindings=e}updateBinding(e){const t=this.backend,i=t.device,o=e.buffer,n=t.get(e).buffer;i.queue.writeBuffer(n,0,o,0)}createBindGroup(e,t){const i=this.backend,o=i.device;let n=0;const s=[];for(const a of e){if(a.isUniformBuffer){const l=i.get(a);if(l.buffer===void 0){const c=a.byteLength,u=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,d=o.createBuffer({label:"bindingBuffer",size:c,usage:u});l.buffer=d}s.push({binding:n,resource:{buffer:l.buffer}})}else if(a.isStorageBuffer){const l=i.get(a);if(l.buffer===void 0){const c=a.attribute;l.buffer=i.get(c).buffer}s.push({binding:n,resource:{buffer:l.buffer}})}else if(a.isSampler){const l=i.get(a.texture);s.push({binding:n,resource:l.sampler})}else if(a.isSampledTexture){const l=i.get(a.texture);let c;a.isSampledCubeTexture?c=Zc.Cube:c=Zc.TwoD;let u;if(l.externalTexture!==void 0)u=o.importExternalTexture({source:l.externalTexture});else{const d=wFe.All;u=l.texture.createView({aspect:d,dimension:c})}s.push({binding:n,resource:u})}n++}return o.createBindGroup({layout:t,entries:s})}}const r4e=t4e;class i4e{constructor(e){this.backend=e}createRenderPipeline(e){const{object:t,material:i,geometry:o,pipeline:n}=e,{vertexProgram:s,fragmentProgram:a}=n,l=this.backend,c=l.device,u=l.utils,d=l.get(n),h=l.get(e.getBindings()),p=l.attributeUtils.createShaderVertexBuffers(e);let m;i.transparent===!0&&i.blending!==So&&(m=this._getBlending(i));let g={};i.stencilWrite===!0&&(g={compare:this._getStencilCompare(i),failOp:this._getStencilOperation(i.stencilFail),depthFailOp:this._getStencilOperation(i.stencilZFail),passOp:this._getStencilOperation(i.stencilZPass)});const v=this._getColorWriteMask(i),y=[];if(e.context.textures!==null){const T=e.context.textures;for(let E=0;E<T.length;E++){const C=u.getTextureFormatGPU(T[E]);y.push({format:C,blend:m,writeMask:v})}}else{const T=u.getCurrentColorFormat(e.context);y.push({format:T,blend:m,writeMask:v})}const b=l.get(s).module,x=l.get(a).module,_=this._getPrimitiveState(t,o,i),S=this._getDepthCompare(i),w=u.getCurrentDepthStencilFormat(e.context),M=u.getSampleCount(e.context);d.pipeline=c.createRenderPipeline({vertex:Object.assign({},b,{buffers:p}),fragment:Object.assign({},x,{targets:y}),primitive:_,depthStencil:{format:w,depthWriteEnabled:i.depthWrite,depthCompare:S,stencilFront:g,stencilBack:{},stencilReadMask:i.stencilFuncMask,stencilWriteMask:i.stencilWriteMask},multisample:{count:M,alphaToCoverageEnabled:i.alphaToCoverage},layout:c.createPipelineLayout({bindGroupLayouts:[h.layout]})})}createComputePipeline(e,t){const i=this.backend,o=i.device,n=i.get(e.computeProgram).module,s=i.get(e),a=i.get(t);s.pipeline=o.createComputePipeline({compute:n,layout:o.createPipelineLayout({bindGroupLayouts:[a.layout]})})}_getBlending(e){let t,i;const o=e.blending;if(o===vg){const n=e.blendSrcAlpha!==null?e.blendSrcAlpha:Zt.One,s=e.blendDstAlpha!==null?e.blendDstAlpha:Zt.Zero,a=e.blendEquationAlpha!==null?e.blendEquationAlpha:Zt.Add;t={srcFactor:this._getBlendFactor(e.blendSrc),dstFactor:this._getBlendFactor(e.blendDst),operation:this._getBlendOperation(e.blendEquation)},i={srcFactor:this._getBlendFactor(n),dstFactor:this._getBlendFactor(s),operation:this._getBlendOperation(a)}}else{const n=e.premultipliedAlpha,s=(a,l,c,u)=>{t={srcFactor:a,dstFactor:l,operation:sh.Add},i={srcFactor:c,dstFactor:u,operation:sh.Add}};if(n)switch(o){case qn:s(Zt.SrcAlpha,Zt.OneMinusSrcAlpha,Zt.One,Zt.OneMinusSrcAlpha);break;case dl:s(Zt.SrcAlpha,Zt.One,Zt.One,Zt.One);break;case vc:s(Zt.Zero,Zt.OneMinusSrc,Zt.Zero,Zt.One);break;case yc:s(Zt.Zero,Zt.Src,Zt.Zero,Zt.SrcAlpha);break}else switch(o){case qn:s(Zt.SrcAlpha,Zt.OneMinusSrcAlpha,Zt.One,Zt.OneMinusSrcAlpha);break;case dl:s(Zt.SrcAlpha,Zt.One,Zt.SrcAlpha,Zt.One);break;case vc:s(Zt.Zero,Zt.OneMinusSrc,Zt.Zero,Zt.One);break;case yc:s(Zt.Zero,Zt.Src,Zt.Zero,Zt.Src);break}}if(t!==void 0&&i!==void 0)return{color:t,alpha:i};console.error("THREE.WebGPURenderer: Invalid blending: ",o)}_getBlendFactor(e){let t;switch(e){case wg:t=Zt.Zero;break;case Sg:t=Zt.One;break;case Mg:t=Zt.Src;break;case Tg:t=Zt.OneMinusSrc;break;case gp:t=Zt.SrcAlpha;break;case vp:t=Zt.OneMinusSrcAlpha;break;case Ng:t=Zt.Dst;break;case Ag:t=Zt.OneMinusDstColor;break;case Eg:t=Zt.DstAlpha;break;case Cg:t=Zt.OneMinusDstAlpha;break;case Rg:t=Zt.SrcAlphaSaturated;break;case aBe:t=Zt.Constant;break;case lBe:t=Zt.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const i=e.stencilFunc;switch(i){case rC:t=Ro.Never;break;case bx:t=Ro.Always;break;case iC:t=Ro.Less;break;case nC:t=Ro.LessEqual;break;case oC:t=Ro.Equal;break;case lC:t=Ro.GreaterEqual;break;case sC:t=Ro.Greater;break;case aC:t=Ro.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",i)}return t}_getStencilOperation(e){let t;switch(e){case Rp:t=Jc.Keep;break;case KE:t=Jc.Zero;break;case YE:t=Jc.Replace;break;case tC:t=Jc.Invert;break;case JE:t=Jc.IncrementClamp;break;case ZE:t=Jc.DecrementClamp;break;case QE:t=Jc.IncrementWrap;break;case eC:t=Jc.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case Sn:t=sh.Add;break;case yg:t=sh.Subtract;break;case bg:t=sh.ReverseSubtract;break;case xg:t=sh.Min;break;case _g:t=sh.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,i){const o={},n=this.backend.utils;if(o.topology=n.getPrimitiveTopology(e,i),e.isLine===!0&&e.isLineSegments!==!0){const s=t.index?t.index.count:t.attributes.position.count;o.stripIndexFormat=s>65535?zf.Uint32:zf.Uint16}switch(i.side){case Ss:o.frontFace=LO.CCW,o.cullMode=OO.Back;break;case Ni:o.frontFace=LO.CCW,o.cullMode=OO.Front;break;case io:o.frontFace=LO.CCW,o.cullMode=OO.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",i.side);break}return o}_getColorWriteMask(e){return e.colorWrite===!0?Pj.All:Pj.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=Ro.Always;else{const i=e.depthFunc;switch(i){case Lg:t=Ro.Never;break;case Og:t=Ro.Always;break;case kg:t=Ro.Less;break;case ju:t=Ro.LessEqual;break;case Ig:t=Ro.Equal;break;case Pg:t=Ro.GreaterEqual;break;case Dg:t=Ro.Greater;break;case Bg:t=Ro.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",i)}}return t}}const o4e=i4e;let zj=null;navigator.gpu!==void 0&&(zj=await navigator.gpu.requestAdapter());class n4e extends Lj{constructor(e={}){super(e),this.parameters.antialias=e.antialias===!0,this.parameters.antialias===!0?this.parameters.sampleCount=e.sampleCount===void 0?4:e.sampleCount:this.parameters.sampleCount=1,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.adapter=null,this.device=null,this.context=null,this.colorBuffer=null,this.defaultDepthTexture=new Sd,this.defaultDepthTexture.name="depthBuffer",this.utils=new KFe(this),this.attributeUtils=new e4e(this),this.bindingUtils=new r4e(this),this.pipelineUtils=new o4e(this),this.textureUtils=new IFe(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters,i={powerPreference:t.powerPreference},o=await navigator.gpu.requestAdapter(i);if(o===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const n=Object.values(IO),s=[];for(const u of n)o.features.has(u)&&s.push(u);const a={requiredFeatures:s,requiredLimits:t.requiredLimits},l=await o.requestDevice(a),c=t.context!==void 0?t.context:e.domElement.getContext("webgpu");this.adapter=o,this.device=l,this.context=c,this.updateSize()}get coordinateSystem(){return hd}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}beginRender(e){const t=this.get(e),i=this.device,o=e.occlusionQueryCount;let n;o>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,n=i.createQuerySet({type:"occlusion",count:o}),t.occlusionQuerySet=n,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(o),t.lastOcclusionObject=null);const s={colorAttachments:[{view:null}],depthStencilAttachment:{view:null},occlusionQuerySet:n},a=s.colorAttachments[0],l=s.depthStencilAttachment,c=this.parameters.antialias;if(e.textures!==null){const h=e.textures;s.colorAttachments=[];const p=s.colorAttachments;for(let g=0;g<h.length;g++){const v=this.get(h[g]),y=v.texture.createView({baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,dimension:Zc.TwoD});let b,x;v.msaaTexture!==void 0?(b=v.msaaTexture.createView(),x=y):(b=y,x=void 0),p.push({view:b,resolveTarget:x,loadOp:ji.Load,storeOp:la.Store})}const m=this.get(e.depthTexture);l.view=m.texture.createView(),e.stencil&&e.depthTexture.format===Do&&(e.stencil=!1)}else c===!0?(a.view=this.colorBuffer.createView(),a.resolveTarget=this.context.getCurrentTexture().createView()):(a.view=this.context.getCurrentTexture().createView(),a.resolveTarget=void 0),l.view=this._getDepthBufferGPU(e).createView();if(e.textures!==null){const h=s.colorAttachments;for(let p=0;p<h.length;p++){const m=h[p];e.clearColor?(m.clearValue=e.clearColorValue,m.loadOp=ji.Clear,m.storeOp=la.Store):(m.loadOp=ji.Load,m.storeOp=la.Store)}}else e.clearColor?(a.clearValue=e.clearColorValue,a.loadOp=ji.Clear,a.storeOp=la.Store):(a.loadOp=ji.Load,a.storeOp=la.Store);e.depth&&(e.clearDepth?(l.depthClearValue=e.clearDepthValue,l.depthLoadOp=ji.Clear,l.depthStoreOp=la.Store):(l.depthLoadOp=ji.Load,l.depthStoreOp=la.Store)),e.stencil&&(e.clearStencil?(l.stencilClearValue=e.clearStencilValue,l.stencilLoadOp=ji.Clear,l.stencilStoreOp=la.Store):(l.stencilLoadOp=ji.Load,l.stencilStoreOp=la.Store));const u=i.createCommandEncoder({label:"renderContext_"+e.id}),d=u.beginRenderPass(s);if(t.descriptor=s,t.encoder=u,t.currentPass=d,t.currentSets={attributes:{}},e.viewport&&this.updateViewport(e),e.scissor){const{x:h,y:p,width:m,height:g}=e.scissorValue;d.setScissorRect(h,e.height-g-p,m,g)}}finishRender(e){const t=this.get(e),i=e.occlusionQueryCount;if(i>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery(),t.currentPass.end(),i>0){const o=i*8;let n=this.occludedResolveCache.get(o);n===void 0&&(n=this.device.createBuffer({size:o,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(o,n));const s=this.device.createBuffer({size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,i,n,0),t.encoder.copyBufferToBuffer(n,0,s,0,o),t.occlusionQueryBuffer=s,this.resolveOccludedAsync(e)}if(this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const o=e.textures;for(let n=0;n<o.length;n++){const s=o[n];s.generateMipmaps===!0&&this.textureUtils.generateMipmaps(s)}}}isOccluded(e,t){const i=this.get(e);return i.occluded&&i.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:i,currentOcclusionQueryObjects:o}=t;if(i&&o){const n=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await i.mapAsync(GPUMapMode.READ);const s=i.getMappedRange(),a=new BigUint64Array(s);for(let l=0;l<o.length;l++)a[l]!==0n&&n.add(o[l]);i.destroy(),t.occluded=n}}updateViewport(e){const{currentPass:t}=this.get(e);let{x:i,y:o,width:n,height:s,minDepth:a,maxDepth:l}=e.viewportValue;t.setViewport(i,e.height-s-o,n,s,a,l)}clear(e,t,i,o){const n=this.device,s=this.get(e),{descriptor:a}=s;i=i&&e.depth,o=o&&e.stencil;const l=a.colorAttachments[0],c=a.depthStencilAttachment;this.parameters.antialias===!0?(l.view=this.colorBuffer.createView(),l.resolveTarget=this.context.getCurrentTexture().createView()):(l.view=this.context.getCurrentTexture().createView(),l.resolveTarget=void 0),a.depthStencilAttachment.view=this._getDepthBufferGPU(e).createView(),t?(l.loadOp=ji.Clear,l.clearValue=e.clearColorValue):l.loadOp=ji.Load,i?(c.depthLoadOp=ji.Clear,c.depthClearValue=e.clearDepthValue):c.depthLoadOp=ji.Load,o?(c.stencilLoadOp=ji.Clear,c.stencilClearValue=e.clearStencilValue):c.stencilLoadOp=ji.Load,s.encoder=n.createCommandEncoder({}),s.currentPass=s.encoder.beginRenderPass(a),s.currentPass.end(),n.queue.submit([s.encoder.finish()])}beginCompute(e){const t=this.get(e);t.cmdEncoderGPU=this.device.createCommandEncoder({}),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass()}compute(e,t,i,o){const{passEncoderGPU:n}=this.get(e),s=this.get(o).pipeline;n.setPipeline(s);const a=this.get(i).group;n.setBindGroup(0,a),n.dispatchWorkgroups(t.dispatchCount)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.device.queue.submit([t.cmdEncoderGPU.finish()])}draw(e,t){const{object:i,geometry:o,context:n,pipeline:s}=e,a=this.get(e.getBindings()),l=this.get(n),c=this.get(s).pipeline,u=l.currentSets,d=l.currentPass;u.pipeline!==c&&(d.setPipeline(c),u.pipeline=c);const h=a.group;d.setBindGroup(0,h);const p=e.getIndex(),m=p!==null;if(m===!0&&u.index!==p){const x=this.get(p).buffer,_=p.array instanceof Uint16Array?zf.Uint16:zf.Uint32;d.setIndexBuffer(x,_),u.index=p}const g=e.getVertexBuffers();for(let x=0,_=g.length;x<_;x++){const S=g[x];if(u.attributes[x]!==S){const w=this.get(S).buffer;d.setVertexBuffer(x,w),u.attributes[x]=S}}if(l.occlusionQuerySet!==void 0){const x=l.lastOcclusionObject;x!==i&&(x!==null&&x.occlusionTest===!0&&(d.endOcclusionQuery(),l.occlusionQueryIndex++),i.occlusionTest===!0&&(d.beginOcclusionQuery(l.occlusionQueryIndex),l.occlusionQueryObjects[l.occlusionQueryIndex]=i),l.lastOcclusionObject=i)}const v=o.drawRange,y=v.start,b=this.getInstanceCount(e);if(b!==0)if(m===!0){const x=v.count!==1/0?v.count:p.count;d.drawIndexed(x,b,y,0,0),t.update(i,x,b)}else{const x=o.attributes.position,_=v.count!==1/0?v.count:x.count;d.draw(_,b,y,0),t.update(i,_,b)}}needsUpdate(e){const t=this.get(e),{object:i,material:o}=e,n=this.utils,s=n.getSampleCount(e.context),a=n.getCurrentColorSpace(e.context),l=n.getCurrentColorFormat(e.context),c=n.getCurrentDepthStencilFormat(e.context),u=n.getPrimitiveTopology(i,o);let d=!1;return(t.sampleCount!==s||t.colorSpace!==a||t.colorFormat!==l||t.depthStencilFormat!==c||t.primitiveTopology!==u)&&(t.sampleCount=s,t.colorSpace=a,t.colorFormat=l,t.depthStencilFormat=c,t.primitiveTopology=u,d=!0),d}getCacheKey(e){const{object:t,material:i}=e,o=this.utils,n=e.context;return[o.getSampleCount(n),o.getCurrentColorSpace(n),o.getCurrentColorFormat(n),o.getCurrentDepthStencilFormat(n),o.getPrimitiveTopology(t,i)].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,t,i,o,n){return this.textureUtils.copyTextureToBuffer(e,t,i,o,n)}createNodeBuilder(e,t,i=null){return new qFe(e,t,i)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e){this.pipelineUtils.createRenderPipeline(e)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}createBindings(e){this.bindingUtils.createBindings(e)}updateBindings(e){this.bindingUtils.createBindings(e)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this._configureContext(),this._setupColorBuffer()}hasFeature(e){const t=this.adapter||zj;if(Object.values(IO).includes(e)===!1)throw new Error("THREE.WebGPURenderer: Unknown WebGPU GPU feature: "+e);return t.features.has(e)}copyFramebufferToTexture(e,t){const i=this.get(t),{encoder:o,descriptor:n}=i;let s=null;e.isFramebufferTexture?s=this.context.getCurrentTexture():e.isDepthTexture&&(s=this._getDepthBufferGPU(t));const a=this.get(e).texture;i.currentPass.end(),o.copyTextureToTexture({texture:s,origin:{x:0,y:0,z:0}},{texture:a},[e.image.width,e.image.height]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e),n.colorAttachments[0].loadOp=ji.Load,t.depth&&(n.depthStencilAttachment.depthLoadOp=ji.Load),t.stencil&&(n.depthStencilAttachment.stencilLoadOp=ji.Load),i.currentPass=o.beginRenderPass(n),i.currentSets={attributes:{}}}_getDepthBufferGPU(e){const{width:t,height:i}=this.getDrawingBufferSize(),o=this.defaultDepthTexture,n=this.get(o).texture;let s,a;if(e.stencil?(s=Nn,a=Xn):e.depth&&(s=Do,a=Cn),n!==void 0){if(o.image.width===t&&o.image.height===i&&o.format===s&&o.type===a)return n;this.textureUtils.destroyTexture(o)}return o.name="depthBuffer",o.format=s,o.type=a,o.image.width=t,o.image.height=i,this.textureUtils.createTexture(o,{sampleCount:this.parameters.sampleCount,width:t,height:i}),this.get(o).texture}_configureContext(){this.context.configure({device:this.device,format:qe.BGRA8Unorm,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:"premultiplied"})}_setupColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const{width:e,height:t}=this.getDrawingBufferSize();this.colorBuffer=this.device.createTexture({label:"colorBuffer",size:{width:e,height:t,depthOrArrayLayers:1},sampleCount:this.parameters.sampleCount,format:qe.BGRA8Unorm,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC})}}const s4e=n4e;class a4e extends KBe{constructor(e={}){let t;_j.isAvailable()?t=s4e:(t=xFe,console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."));const i=new t(e);super(i),this.isWebGPURenderer=!0}}const l4e=a4e;var I0=function(){var r=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),i(++r%e.children.length)},!1);function t(u){return e.appendChild(u.dom),u}function i(u){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===u?"block":"none";r=u}var o=(performance||Date).now(),n=o,s=0,a=t(new I0.Panel("FPS","#0ff","#002")),l=t(new I0.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new I0.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){o=(performance||Date).now()},end:function(){s++;var u=(performance||Date).now();if(l.update(u-o,200),u>=n+1e3&&(a.update(s*1e3/(u-n),100),n=u,s=0,c)){var d=performance.memory;c.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return u},update:function(){o=this.end()},domElement:e,setMode:i}};I0.Panel=function(r,e,t){var i=1/0,o=0,n=Math.round,s=n(window.devicePixelRatio||1),a=80*s,l=48*s,c=3*s,u=2*s,d=3*s,h=15*s,p=74*s,m=30*s,g=document.createElement("canvas");g.width=a,g.height=l,g.style.cssText="width:80px;height:48px";var v=g.getContext("2d");return v.font="bold "+9*s+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=t,v.fillRect(0,0,a,l),v.fillStyle=e,v.fillText(r,c,u),v.fillRect(d,h,p,m),v.fillStyle=t,v.globalAlpha=.9,v.fillRect(d,h,p,m),{dom:g,update:function(y,b){i=Math.min(i,y),o=Math.max(o,y),v.fillStyle=t,v.globalAlpha=1,v.fillRect(0,0,a,h),v.fillStyle=e,v.fillText(n(y)+" "+r+" ("+n(i)+"-"+n(o)+")",c,u),v.drawImage(g,d+s,h,p-s,m,d,h,p-s,m),v.fillRect(d+p-s,h,s,m),v.fillStyle=t,v.globalAlpha=.9,v.fillRect(d+p-s,h,s,n((1-y/b)*m))}}};const c4e=I0;class u4e extends mr{constructor(e,t){super(),this.isViewHelper=!0,this.animating=!1,this.center=new Q;const i=new bt("#ff3653"),o=new bt("#8adb00"),n=new bt("#2c8fff"),s=[],a=new I1,l=new We,c=new mr,u=new Na(-2,2,2,-2,0,4);u.position.set(0,0,2);const d=new ni(.8,.05,.05).translate(.4,0,0),h=new yt(d,U(i)),p=new yt(d,U(o)),m=new yt(d,U(n));p.rotation.z=Math.PI/2,m.rotation.y=-Math.PI/2,this.add(h),this.add(m),this.add(p);const g=new Ic(G(i,"X"));g.userData.type="posX";const v=new Ic(G(o,"Y"));v.userData.type="posY";const y=new Ic(G(n,"Z"));y.userData.type="posZ";const b=new Ic(G(i));b.userData.type="negX";const x=new Ic(G(o));x.userData.type="negY";const _=new Ic(G(n));_.userData.type="negZ",g.position.x=1,v.position.y=1,y.position.z=1,b.position.x=-1,b.scale.setScalar(.8),x.position.y=-1,x.scale.setScalar(.8),_.position.z=-1,_.scale.setScalar(.8),this.add(g),this.add(v),this.add(y),this.add(b),this.add(x),this.add(_),s.push(g),s.push(v),s.push(y),s.push(b),s.push(x),s.push(_);const S=new Q,w=128,M=2*Math.PI;this.render=function(R){this.quaternion.copy(e.quaternion).invert(),this.updateMatrixWorld(),S.set(0,0,1),S.applyQuaternion(e.quaternion),S.x>=0?(g.material.opacity=1,b.material.opacity=.5):(g.material.opacity=.5,b.material.opacity=1),S.y>=0?(v.material.opacity=1,x.material.opacity=.5):(v.material.opacity=.5,x.material.opacity=1),S.z>=0?(y.material.opacity=1,_.material.opacity=.5):(y.material.opacity=.5,_.material.opacity=1);const F=t.offsetWidth-w;R.clearDepth(),R.getViewport(I),R.setViewport(F,0,w,w),R.render(this,u),R.setViewport(I.x,I.y,I.z,I.w)};const T=new Q,E=new jr,C=new jr,B=new jr,I=new Kt;let L=0;this.handleClick=function(R){if(this.animating===!0)return!1;const F=t.getBoundingClientRect(),O=F.left+(t.offsetWidth-w),H=F.top+(t.offsetHeight-w);l.x=(R.clientX-O)/(F.right-O)*2-1,l.y=-((R.clientY-H)/(F.bottom-H))*2+1,a.setFromCamera(l,u);const $=a.intersectObjects(s);if($.length>0){const j=$[0].object;return P(j,this.center),this.animating=!0,!0}else return!1},this.update=function(R){const F=R*M;C.rotateTowards(B,F),e.position.set(0,0,1).applyQuaternion(C).multiplyScalar(L).add(this.center),e.quaternion.rotateTowards(E,F),C.angleTo(B)===0&&(this.animating=!1)},this.dispose=function(){d.dispose(),h.material.dispose(),p.material.dispose(),m.material.dispose(),g.material.map.dispose(),v.material.map.dispose(),y.material.map.dispose(),b.material.map.dispose(),x.material.map.dispose(),_.material.map.dispose(),g.material.dispose(),v.material.dispose(),y.material.dispose(),b.material.dispose(),x.material.dispose(),_.material.dispose()};function P(R,F){switch(R.userData.type){case"posX":T.set(1,0,0),E.setFromEuler(new Rn(0,Math.PI*.5,0));break;case"posY":T.set(0,1,0),E.setFromEuler(new Rn(-Math.PI*.5,0,0));break;case"posZ":T.set(0,0,1),E.setFromEuler(new Rn);break;case"negX":T.set(-1,0,0),E.setFromEuler(new Rn(0,-Math.PI*.5,0));break;case"negY":T.set(0,-1,0),E.setFromEuler(new Rn(Math.PI*.5,0,0));break;case"negZ":T.set(0,0,-1),E.setFromEuler(new Rn(0,Math.PI,0));break;default:console.error("ViewHelper: Invalid axis.")}L=e.position.distanceTo(F),T.multiplyScalar(L).add(F),c.position.copy(F),c.lookAt(e.position),C.copy(c.quaternion),c.lookAt(T),B.copy(c.quaternion)}function U(R){return new Uo({color:R,toneMapped:!1})}function G(R,F=null){const O=document.createElement("canvas");O.width=64,O.height=64;const H=O.getContext("2d");H.beginPath(),H.arc(32,32,16,0,2*Math.PI),H.closePath(),H.fillStyle=R.getStyle(),H.fill(),F!==null&&(H.font="24px Arial",H.textAlign="center",H.fillStyle="#000000",H.fillText(F,32,41));const $=new KC(O);return new kc({map:$,toneMapped:!1})}}}const vw=new c4e;vw.dom.style.top="unset",vw.dom.style.bottom="0",document.body.appendChild(vw.dom);class d4e extends ao{constructor(t,i){super();Qe(this,"rendererGL");Qe(this,"rendererGPU");Qe(this,"renderer");Qe(this,"clock");Qe(this,"size",{width:640,height:480});Qe(this,"uuid",vl.generateUUID());Qe(this,"root");Qe(this,"currentScene");Qe(this,"currentCamera");Qe(this,"cameraPersp");Qe(this,"cameraOrtho");Qe(this,"composer");Qe(this,"renderPass");Qe(this,"outlinePass");Qe(this,"outputPass");Qe(this,"effectFXAA");Qe(this,"orbit");Qe(this,"controls");Qe(this,"beforeTransformedObject");Qe(this,"beforeTransformed",new mr);Qe(this,"viewHelper");Qe(this,"cameraHelper");Qe(this,"lightHelper",null);Qe(this,"raycaster");Qe(this,"fnPointerDown");Qe(this,"fnPointerUp");Qe(this,"positionDown",new We);Qe(this,"working",!1);Qe(this,"keydownListener");Qe(this,"keyupListener");Qe(this,"useGPU",!1);this.context=t,this.history=i,this.clock=new k1,this.useGPU&&_j.isAvailable()?this.rendererGPU=new l4e({context:this.context.getContext("webgpu"),antialias:!0}):this.rendererGL=new VC({canvas:this.context,antialias:!0}),this.renderer=this.rendererGPU||this.rendererGL,this.renderer.outputColorSpace=Ft,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=lx,this.renderer.autoClear=!1,this.renderer.toneMapping=$u,this.renderer.useLegacyLights=!1,this.renderer.setClearColor(16777215),this.root=new Oc,this.cameraPersp=new li(50,1,.001,1e3),this.cameraPersp.name="Perspective",this.cameraPersp.position.set(3,3,3),this.cameraPersp.lookAt(0,0,0),this.cameraOrtho=new Na(-100,100,100,-100,.01,3e4),this.cameraOrtho.name="Orthographic",this.cameraOrtho.position.set(0,0,100),this.root.add(this.cameraOrtho),this.root.add(this.cameraPersp),this.currentCamera=this.cameraPersp,this.composer=new FDe(this.renderer),this.renderPass=new UDe(this.root,this.currentCamera),this.composer.addPass(this.renderPass),this.outlinePass=new Xc(new We(this.size.width,this.size.height),this.root,this.currentCamera),this.outlinePass.resolution=new We(this.size.width,this.size.height),this.outlinePass.edgeStrength=25,this.outlinePass.edgeGlow=1,this.outlinePass.pulsePeriod=3,this.outlinePass.edgeThickness=1,this.outlinePass.usePatternTexture=!1,this.composer.addPass(this.outlinePass),this.outputPass=new VDe,this.composer.addPass(this.outputPass),this.effectFXAA=new lj(GDe),this.effectFXAA.uniforms.resolution.value.set(1/this.size.width,1/this.size.height),this.composer.addPass(this.effectFXAA);const o=new jDe(this.currentCamera,this.renderer.domElement);o.minDistance=1,o.maxDistance=30,this.orbit=o;const n=new $De(this.currentCamera,this.renderer.domElement);n.addEventListener("dragging-changed",function(a){o.enabled=!a.value}),this.controls=n,this.root.add(this.controls);const s=new R5(20,20,12698049,9276813);this.root.add(s),this.cameraHelper=new I5(this.currentCamera),this.cameraHelper.visible=!1,this.root.add(this.cameraHelper),this.viewHelper=new u4e(this.currentCamera,this.renderer.domElement),this.raycaster=new I1,this.fnPointerDown=a=>{this.onPointerDown(a)},this.fnPointerUp=a=>{this.onPointerUp(a)},window.addEventListener("pointerdown",this.fnPointerDown),window.addEventListener("pointerup",this.fnPointerUp),this.keydownListener=a=>{switch(a.keyCode){case 81:n.setSpace(n.space==="local"?"world":"local");break;case 16:n.setTranslationSnap(100),n.setRotationSnap(vl.degToRad(15)),n.setScaleSnap(.25);break;case 87:n.setMode("translate");break;case 69:n.setMode("rotate");break;case 82:n.setMode("scale");break;case 187:case 107:n.setSize(n.size+.1);break;case 189:case 109:n.setSize(Math.max(n.size-.1,.1));break;case 88:n.showX=!n.showX;break;case 89:n.showY=!n.showY;break;case 90:n.showZ=!n.showZ;break;case 32:n.enabled=!n.enabled;break;case 27:n.reset();break}},this.keyupListener=a=>{switch(a.keyCode){case 16:n.setTranslationSnap(null),n.setRotationSnap(null),n.setScaleSnap(null);break}},this.resize(this.context.width,this.context.height)}resize(t,i){this.context&&(this.renderer.isWebGPURenderer&&(this.renderer.setPixelRatio(1),this.renderer.setSize(t,i)),this.size.width=t,this.size.height=i,this.outlinePass.resolution=new We(this.size.width,this.size.height),this.outlinePass.setSize(this.size.width,this.size.height),this.effectFXAA.uniforms.resolution.value.set(1/this.size.width,1/this.size.height),this.cameraPersp.aspect=this.size.width/this.size.height,this.cameraPersp.updateProjectionMatrix(),this.cameraOrtho.left=-this.size.width/2,this.cameraOrtho.right=this.size.width/2,this.cameraOrtho.top=this.size.height/2,this.cameraOrtho.bottom=-this.size.height/2,this.cameraOrtho.near=1e-4,this.cameraOrtho.near=3e3,this.cameraOrtho.updateProjectionMatrix(),this.currentCamera.parent!==this.root&&this.currentCamera instanceof li&&(this.currentCamera.aspect=this.size.width/this.size.height,this.currentCamera.updateProjectionMatrix()))}updateSettings(t){const i=this.renderer;for(const[o,n]of Object.entries(t))o==="shadowMap"?(i.shadowMap[o].enabled=n.enabled,i.shadowMap[o].type=n.type):i[o]=n}setCamera(t){this.currentCamera!==t&&(this.currentCamera=t,this.currentCamera===this.cameraPersp?this.orbit.enabled=!0:this.orbit.enabled=!1,this.currentCamera.parent!==this.root&&this.currentCamera instanceof li&&(this.currentCamera.aspect=this.size.width/this.size.height,this.currentCamera.updateProjectionMatrix()),this.renderPass.camera=this.currentCamera,this.outlinePass.renderCamera=this.currentCamera)}setScene(t){this.currentScene!==t&&(this.currentScene&&this.root.remove(this.currentScene),this.controls.detach(),this.currentScene=t,this.root.add(this.currentScene))}selectObject(t,i){!i&&t===this.controls.object||(this.controls.object&&(this.controls.detach(),window.removeEventListener("keydown",this.keydownListener),window.removeEventListener("keyup",this.keyupListener)),this.lightHelper&&(this.lightHelper.removeFromParent(),this.lightHelper.dispose(),this.lightHelper=null),t?(t instanceof Lc?(this.cameraHelper.visible=!0,this.cameraHelper.camera=t,this.cameraHelper.matrix=t.matrixWorld,this.cameraHelper.update()):t instanceof Id?(this.lightHelper=new E5(t),this.root.add(this.lightHelper)):t instanceof Bc?(this.lightHelper=new M5(t),this.root.add(this.lightHelper)):t instanceof Pd?(this.lightHelper=new k5(t),this.root.add(this.lightHelper)):t instanceof kd?(this.lightHelper=new A5(t,10),this.root.add(this.lightHelper)):this.cameraHelper.visible=!1,this.controls.attach(t),window.addEventListener("keydown",this.keydownListener),window.addEventListener("keyup",this.keyupListener)):this.cameraHelper.visible=!1,this.dispatchEvent({type:"objectChanged",soure:this,object:t}))}get selected(){return this.controls.object}render(t,i){this.currentScene&&this.currentScene.update(t,i),this.renderer.isWebGPURenderer?(Bf.update(),this.renderer.render(this.root,this.currentCamera)):this.composer.render(t),this.viewHelper.render(this.renderer)}async run(){if(this.working)throw new Error("already working");console.log("world start"),this.dispatchEvent({type:"worldStarted",soure:this,world:this}),this.working=!0,this.clock.start();const t=(i,o)=>{if(!this.working){this.renderer.setAnimationLoop(null);return}const n=this.clock.getDelta(),s=this.clock.oldTime,a=Date.now();this.render(n,s);const l=Date.now();l-a>=100&&console.warn(`render take ${l-a} ms`),vw.update()};this.renderer.setAnimationLoop(t)}onPointerDown(t){if(!this.currentScene)return;this.controls.object&&(this.beforeTransformedObject=this.controls.object,this.beforeTransformed.position.copy(this.controls.object.position),this.beforeTransformed.scale.copy(this.controls.object.scale),this.beforeTransformed.rotation.copy(this.controls.object.rotation));const{left:i,top:o,width:n,height:s}=this.context.getBoundingClientRect();this.positionDown.set((t.clientX-i)/n*2-1,-(t.clientY-o)/s*2+1)}onPointerUp(t){if(!this.currentScene)return;if(this.beforeTransformedObject&&this.controls.object===this.beforeTransformedObject){const c=this.controls.object,u=this.beforeTransformed.position.clone(),d=this.beforeTransformed.scale.clone(),h=this.beforeTransformed.rotation.clone(),p=this.controls.object.position.clone(),m=this.controls.object.scale.clone(),g=this.controls.object.rotation.clone();u.equals(p)&&d.equals(m)&&h.equals(g)||(this.dispatchEvent({type:"objectModified",soure:this,objects:[this.controls.object]}),this.history.push({tip:"Object changed!",undo:()=>{c.position.copy(u),c.scale.copy(d),c.rotation.copy(h)},redo:()=>{c.position.copy(p),c.scale.copy(m),c.rotation.copy(g)}}))}const{left:i,top:o,width:n,height:s}=this.context.getBoundingClientRect(),a=new We((t.clientX-i)/n*2-1,-(t.clientY-o)/s*2+1);if(!a.equals(this.positionDown))return;this.raycaster.setFromCamera(a,this.currentCamera);const l=this.raycaster.intersectObjects(this.currentScene.children,!1);if(l.length>0){const c=l[0].object;this.controls.object!==c&&this.selectObject(c,!0)}}dispose(){window.removeEventListener("pointerdown",this.fnPointerDown),window.removeEventListener("pointerup",this.fnPointerUp),window.removeEventListener("keydown",this.keydownListener),window.removeEventListener("keyup",this.keyupListener),this.viewHelper.dispose(),this.composer.dispose(),this.renderPass&&this.renderPass.dispose(),this.outlinePass&&this.outlinePass.dispose(),this.outputPass.dispose(),this.effectFXAA.dispose(),this.clock.stop(),this.renderer.dispose()}}let h4e=0;class yw extends EventTarget{constructor(){super(),this._id=h4e++,this._serializable=!0}get id(){return this._id}setSerializable(e){return this._serializable=e,this}getSerializable(){return this._serializable}serialize(){console.warn("Serializer: Abstract function.")}deserialize(e){console.warn("Serializer: Abstract function.")}deserializeLib(e,t){}get className(){return this.constructor.name}toJSON(e=null){let t=null;const i=this.id;if(e!==null){const o=e.objects;t=o[i],t===void 0&&(t={objects:o},this.serialize(t),delete t.objects,o[i]=t)}else t={objects:{}},this.serialize(t);return t.id=i,t.type=this.className,t}}class p4e{constructor(){this.x=0,this.y=0,this.started=!1,this._onMoveEvent=e=>{const t=e.touches?e.touches[0]:e;this.x=t.clientX,this.y=t.clientY}}start(){if(!this.started)return this.started=!0,window.addEventListener("wheel",this._onMoveEvent,!0),window.addEventListener("mousedown",this._onMoveEvent,!0),window.addEventListener("touchstart",this._onMoveEvent,!0),window.addEventListener("mousemove",this._onMoveEvent,!0),window.addEventListener("touchmove",this._onMoveEvent,!0),window.addEventListener("dragover",this._onMoveEvent,!0),this}}const Vj=new p4e().start(),P0=(r,e=null,t={})=>{t=Object.assign({className:"dragging",click:!1,bypass:!1},t);let i=null;const{className:o,click:n,bypass:s,postPosChangedEvent:a}=t,l=()=>{let h=r;for(;h&&h!==document;){const p=h.style.zoom;if(p)return Number(p);h=h.parentNode}return 1},c=h=>{const p=h.touches?h.touches[0]:h;s===!1&&h.stopImmediatePropagation(),i={client:{x:p.clientX,y:p.clientY},delta:{x:0,y:0},start:{x:r.offsetLeft,y:r.offsetTop},frame:0,isDown:!0,dragging:!1,isTouch:!!h.touches},n===!0&&(e(i),i.frame++),window.addEventListener("mousemove",u),window.addEventListener("mouseup",d),window.addEventListener("touchmove",u),window.addEventListener("touchend",d)},u=h=>{const{start:p,delta:m,client:g}=i,v=h.touches?h.touches[0]:h,y=l();m.x=(v.clientX-g.x)/y,m.y=(v.clientY-g.y)/y,i.x=p.x+m.x,i.y=p.y+m.y,i.dragging===!0?(e!==null?(e(i),i.frame++):r.style.cssText+=`; left: ${i.x}px; top: ${i.y}px;`,s===!1&&h.stopImmediatePropagation()):(Math.abs(m.x)>2||Math.abs(m.y)>2)&&(i.dragging=!0,r.classList.add("drag"),o&&document.body.classList.add(...o.split(" ")),s===!1&&h.stopImmediatePropagation())},d=h=>{if(s===!1&&h.stopImmediatePropagation(),r.classList.remove("drag"),o&&document.body.classList.remove(...o.split(" ")),window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",d),window.removeEventListener("touchmove",u),window.removeEventListener("touchend",d),e===null&&(r.removeEventListener("mousedown",c),r.removeEventListener("touchstart",c)),i.dragging=!1,i.isDown=!1,e!==null&&(e(i),i.frame++),a){const{delta:p}=i;(p.x||p.y)&&r.dispatchEvent(new Event("positionChanged",{x:i.x,y:i.y}))}};if(r instanceof Event){const h=r;r=h.target,c(h)}else r.addEventListener("mousedown",c),r.addEventListener("touchstart",c)},os=(r,...e)=>{for(const t of r)if(t(...e)===!1)return!1;return!0},Fl=r=>(isNaN(r)===!1&&(r=`${r}px`),r),D0=r=>(isNaN(r)===!1&&(r=`#${r.toString(16).padStart(6,"0")}`),r),f4e=(r,e)=>{e&&e.split(" ").forEach(t=>r.classList.remove(t))},m4e=(r,e)=>{e&&e.split(" ").forEach(t=>r.classList.add(t))};class Ho{constructor(e=null,t=null){Qe(this,"dashed",!1);this.inputElement=e,this.outputElement=t}get lioElement(){return Ho.InputDirection==="left"?this.outputElement:this.inputElement}get rioElement(){return Ho.InputDirection==="left"?this.inputElement:this.outputElement}}Ho.InputDirection="left";let ah=null,Lo=(ch=class extends yw{constructor(t=!1){super();Qe(this,"value");Qe(this,"dom");Qe(this,"inputsDOM");Qe(this,"links");Qe(this,"inputs");this.isElement=!0;const i=document.createElement("f-element");i.element=this;const o=n=>{let s=this;if(n.changedTouches&&n.changedTouches.length>0){const a=n.changedTouches[0];let l=document.elementFromPoint(a.clientX,a.clientY);for(;l&&(!l.element||!l.element.isElement);)l=l.parentNode;s=l?l.element:null}n.type==="mouseout"&&ah===s?ah=null:ah=s};t===!1&&(i.ontouchstart=i.onmousedown=n=>{n.stopPropagation()}),i.addEventListener("mouseup",o,!0),i.addEventListener("mouseover",o),i.addEventListener("mouseout",o),i.addEventListener("touchmove",o),i.addEventListener("touchend",o),this.inputs=[],this.links=[],this.dom=i,this.lioLength=0,this.rioLength=0,this.events={connect:[],connectChildren:[],valid:[]},this.node=null,this.style="",this.color=null,this.object=null,this.objectCallback=null,this.enabledInputs=!0,this.visible=!0,this.inputsDOM=i,this.disconnectDOM=null,this.lioDOM=this._createIO("lio"),this.rioDOM=this._createIO("rio"),this.dom.classList.add(`input-${Ho.InputDirection}`),this.addEventListener("connect",()=>{os(this.events.connect,this)}),this.addEventListener("connectChildren",()=>{os(this.events.connectChildren,this)})}setAttribute(t,i){return this.dom.setAttribute(t,i),this}onValid(t){return this.events.valid.push(t),this}onConnect(t,i=!1){return this.events.connect.push(t),i&&this.events.connectChildren.push(t),this}setObjectCallback(t){return this.objectCallback=t,this}setObject(t){return this.object=t,this}getObject(t=null){return this.objectCallback?this.objectCallback(t):this.object}setVisible(t){return this.visible=t,this.dom.style.display=t?"":"none",this}getVisible(){return this.visible}setEnabledInputs(t){const i=this.dom;return this.enabledInputs||i.classList.remove("inputs-disable"),t||i.classList.add("inputs-disable"),this.enabledInputs=t,this}getEnabledInputs(){return this.enabledInputs}setColor(t){return this.dom.style["background-color"]=D0(t),this.color=null,this}getColor(){if(this.color===null){const t=window.getComputedStyle(this.dom);this.color=t.getPropertyValue("background-color")}return this.color}setStyle(t){const i=this.dom;return this.style&&i.classList.remove(this.style),t&&i.classList.add(t),this.style=t,this.color=null,this}setInput(t){return Ho.InputDirection==="left"?this.setLIO(t):this.setRIO(t)}setInputColor(t){return Ho.InputDirection==="left"?this.setLIOColor(t):this.setRIOColor(t)}setOutput(t){return Ho.InputDirection==="left"?this.setRIO(t):this.setLIO(t)}setOutputColor(t){return Ho.InputDirection==="left"?this.setRIOColor(t):this.setLIOColor(t)}get inputLength(){return Ho.InputDirection==="left"?this.lioLength:this.rioLength}get outputLength(){return Ho.InputDirection==="left"?this.rioLength:this.lioLength}setLIOColor(t){return this.lioDOM.style["border-color"]=D0(t),this}setLIO(t){return this.lioLength=t,this.lioDOM.style.visibility=t>0?"":"hidden",t>0?(this.dom.classList.add("lio"),this.dom.prepend(this.lioDOM)):(this.dom.classList.remove("lio"),this.lioDOM.remove()),this}getLIOColor(){return this.lioDOM.style["border-color"]}setRIOColor(t){return this.rioDOM.style["border-color"]=D0(t),this}getRIOColor(){return this.rioDOM.style["border-color"]}setRIO(t){return this.rioLength=t,this.rioDOM.style.visibility=t>0?"":"hidden",t>0?(this.dom.classList.add("rio"),this.dom.prepend(this.rioDOM)):(this.dom.classList.remove("rio"),this.rioDOM.remove()),this}add(t){return this.inputs.push(t),t.element=this,this.inputsDOM.append(t.dom),this}setHeight(t){return this.dom.style.height=Fl(t),this}getHeight(){return parseInt(this.dom.style.height)}connect(t=null){if(this.disconnectDOM!==null&&this.disconnectDOM.dispatchEvent(new Event("disconnect")),t!==null){if(t=t.baseElement||t,os(this.events.valid,this,t,"connect")===!1)return!1;const i=new Ho(this,t);if(this.links.push(i),this.disconnectDOM===null){this.disconnectDOM=document.createElement("f-disconnect"),this.disconnectDOM.innerHTML=ch.icons.unlink?`<i class='${ch.icons.unlink}'></i>`:"\u2716",this.dom.append(this.disconnectDOM);const o=()=>{this.links=[],this.dom.removeChild(this.disconnectDOM),this.disconnectDOM.removeEventListener("mousedown",a,!0),this.disconnectDOM.removeEventListener("touchstart",a,!0),this.disconnectDOM.removeEventListener("disconnect",o,!0),t.removeEventListener("connect",n),t.removeEventListener("connectChildren",n),t.removeEventListener("nodeConnect",n),t.removeEventListener("nodeConnectChildren",n),t.removeEventListener("dispose",s),this.disconnectDOM=null},n=()=>{this.dispatchEvent(new Event("connectChildren"))},s=()=>{this.connect()},a=l=>{l.stopPropagation(),this.connect()};this.disconnectDOM.addEventListener("mousedown",a,!0),this.disconnectDOM.addEventListener("touchstart",a,!0),this.disconnectDOM.addEventListener("disconnect",o,!0),t.addEventListener("connect",n),t.addEventListener("connectChildren",n),t.addEventListener("nodeConnect",n),t.addEventListener("nodeConnectChildren",n),t.addEventListener("dispose",s)}}return this.dispatchEvent(new Event("connect")),!0}dispose(){this.dispatchEvent(new Event("dispose"))}getInputByProperty(t){for(const i of this.inputs)if(i.getProperty()===t)return i}serialize(t){const i=[],o=[],n=[];for(const s of this.inputs){const a=s.toJSON(t).id,l=s.getProperty();i.push(a),l!==null&&o.push({property:l,id:a})}for(const s of this.links)s.inputElement!==null&&s.outputElement!==null&&n.push(s.outputElement.toJSON(t).id);this.inputLength>0&&(t.inputLength=this.inputLength),this.outputLength>0&&(t.outputLength=this.outputLength),i.length>0&&(t.inputs=i),o.length>0&&(t.properties=o),n.length>0&&(t.links=n),this.style!==""&&(t.style=this.style),t.height=this.getHeight()}deserialize(t){if(t.inputLength!==void 0&&this.setInput(t.inputLength),t.outputLength!==void 0&&this.setOutput(t.outputLength),t.properties!==void 0)for(const{id:i,property:o}of t.properties)t.objects[i]=this.getInputByProperty(o);else if(t.inputs!==void 0){const i=this.inputs;if(i.length>0){let o=0;for(const n of t.inputs)t.objects[n]=i[o++]}else for(const o of t.inputs)this.add(t.objects[o])}if(t.links!==void 0)for(const i of t.links)this.connect(t.objects[i]);t.style!==void 0&&this.setStyle(t.style),t.height!==void 0&&this.setHeight(t.height)}getLinkedObject(t=null){const i=this.getLinkedElement();return i?i.getObject(t):null}getLinkedElement(){const t=this.getLink();return t?t.outputElement:null}getLink(){return this.links[0]}_createIO(t){const{dom:i}=this,o=document.createElement("f-io");o.style.visibility="hidden",o.className=t;const n=s=>{s.preventDefault(),s.stopPropagation(),ah=null;const a=this.node.dom;a.classList.add("io-connect"),o.classList.add("connect"),i.classList.add("select");const l=Ho.InputDirection==="left"?"lio":"rio",c=t===l?new Ho(this):new Ho(null,this),u=new Ho(c.inputElement,c.outputElement);this.links.push(c),P0(s,d=>{u.outputElement&&u.outputElement.dom.classList.remove("invalid"),u.inputElement&&u.inputElement.dom.classList.remove("invalid"),u.inputElement=c.inputElement,u.outputElement=c.outputElement,t===l?u.outputElement=ah:u.inputElement=ah;const h=u.inputElement!==null&&u.outputElement!==null&&u.inputElement.inputLength>0&&u.outputElement.outputLength>0&&os(u.inputElement.events.valid,u.inputElement,u.outputElement,d.dragging?"dragging":"dragged")===!1;if(d.dragging&&h){t===l?u.outputElement&&u.outputElement.dom.classList.add("invalid"):u.inputElement&&u.inputElement.dom.classList.add("invalid");return}if(!d.dragging&&(a.classList.remove("io-connect"),o.classList.remove("connect"),i.classList.remove("select"),this.links.splice(this.links.indexOf(c),1),ah!==null&&!h)){if(c.inputElement=u.inputElement,c.outputElement=u.outputElement,c.outputElement.node.isCircular(c.inputElement.node))return;c.inputElement.inputLength>0&&c.outputElement.outputLength>0&&c.inputElement.connect(c.outputElement)}},{className:"connecting"})};return o.addEventListener("mousedown",n,!0),o.addEventListener("touchstart",n,!0),o}},Qe(ch,"icons",{}),ch);Lo.icons={unlink:""};class Qc extends yw{constructor(t){super();Qe(this,"dom");this.dom=t,this.element=null,this.extra=null,this.tagColor=null,this.property=null,this.events={change:[],click:[]},this.addEventListener("change",()=>{os(this.events.change,this)}),this.addEventListener("click",()=>{os(this.events.click,this)})}setExtra(t){return this.extra=t,this}getExtra(){return this.extra}setProperty(t){return this.property=t,this}getProperty(){return this.property}setTagColor(t){return this.tagColor=t,this.dom.style["border-left"]=`2px solid ${t}`,this}getTagColor(){return this.tagColor}setToolTip(t){const i=document.createElement("f-tooltip");return i.innerText=t,this.dom.append(i),this}onChange(t){return this.events.change.push(t),this}onClick(t){return this.events.click.push(t),this}setReadOnly(t){return this.getInput().readOnly=t,this}getReadOnly(){return this.getInput().readOnly}setValue(t,i=!0){return this.getInput().value=t,i&&this.dispatchEvent(new Event("change")),this}getValue(){return this.getInput().value}getInput(){return this.dom}serialize(t){t.value=this.getValue()}deserialize(t){this.setValue(t.value)}}Qc.prototype.isInput=!0;let bw=class extends yw{constructor(){super();Qe(this,"dom");Qe(this,"elements");Qe(this,"style");Qe(this,"canvas");Qe(this,"resizable");Qe(this,"serializePriority");Qe(this,"events");const e=document.createElement("f-node"),t=()=>{const i=this.canvas;i!==null&&i.select(this)};e.addEventListener("mousedown",t,!0),e.addEventListener("touchstart",t,!0),this._onConnect=i=>{const{target:o}=i;for(const n of this.elements)n!==o&&n.dispatchEvent(new Event("nodeConnect"))},this._onConnectChildren=i=>{const{target:o}=i;for(const n of this.elements)n!==o&&n.dispatchEvent(new Event("nodeConnectChildren"))},this.dom=e,this.style="",this.canvas=null,this.resizable=!1,this.serializePriority=0,this.elements=[],this.events={focus:[],blur:[]},this.setWidth(300).setPosition(0,0)}get baseElement(){return this.elements[0]}setAlign(e){const t=this.dom,i=t.style;if(i.left="",i.top="",i.animation="none",typeof e=="string")t.classList.add(e);else if(e)for(const o in e)i[o]=e[o];return this}setResizable(e){return this.resizable=e===!0,this.resizable?this.dom.classList.add("resizable"):this.dom.classList.remove("resizable"),this.updateSize(),this}onFocus(e){return this.events.focus.push(e),this}onBlur(e){return this.events.blur.push(e),this}setStyle(e){const t=this.dom;return this.style&&t.classList.remove(this.style),e&&t.classList.add(e),this.style=e,this}setPosition(e,t){const i=this.dom;return i.style.left=Fl(e),i.style.top=Fl(t),this}getPosition(){const e=this.dom;return{x:parseInt(e.style.left),y:parseInt(e.style.top)}}setWidth(e){return this.dom.style.width=Fl(e),this.updateSize(),this}getWidth(){return parseInt(this.dom.style.width)}getHeight(){return this.dom.offsetHeight}getBound(){const{x:e,y:t}=this.getPosition(),{width:i,height:o}=this.dom.getBoundingClientRect();return{x:e,y:t,width:i,height:o}}add(e,t){return this.elements.push(e),e.node=this,e.addEventListener("connect",this._onConnect),e.addEventListener("connectChildren",this._onConnectChildren),t?this.dom.insertBefore(e.dom,t.dom):this.dom.append(e.dom),this.updateSize(),this}remove(e){return this.elements.splice(this.elements.indexOf(e),1),e.node=null,e.removeEventListener("connect",this._onConnect),e.removeEventListener("connectChildren",this._onConnectChildren),this.dom.removeChild(e.dom),this.updateSize(),this}dispose(){const e=this.canvas;e!==null&&e.remove(this);for(const t of this.elements)t.dispose();this.dispatchEvent(new Event("dispose"))}isCircular(e){if(e===this)return!0;const t=this.getLinks();for(const i of t)if(i.outputElement.node.isCircular(e))return!0;return!1}getLinks(){const e=[];for(const t of this.elements)e.push(...t.links);return e}getColor(){return this.elements.length>0?this.elements[0].getColor():null}updateSize(){for(const e of this.elements)e.dom.style.width="";if(this.resizable===!0){const e=this.elements[this.elements.length-1];e!==void 0&&(e.dom.style.width=this.dom.style.width)}}serialize(e){const{x:t,y:i}=this.getPosition(),o=[];for(const n of this.elements)o.push(n.toJSON(e).id);e.x=t,e.y=i,e.width=this.getWidth(),e.elements=o,e.autoResize=this.resizable,this.style!==""&&(e.style=this.style)}deserialize(e){this.setPosition(e.x,e.y),this.setWidth(e.width),this.setResizable(e.autoResize),e.style!==void 0&&this.setStyle(e.style);const t=this.elements;if(t.length>0){let i=0;for(const o of e.elements)e.objects[o]=t[i++]}else for(const i of e.elements)this.add(e.objects[i])}};bw.prototype.isNode=!0;class g4e extends Lo{constructor(e=!0){super(!0),this.draggable=e;const t=o=>{o.preventDefault(),this.draggable===!0&&P0(this.node.dom,null,{className:"dragging node",postPosChangedEvent:!0})},{dom:i}=this;i.addEventListener("mousedown",t,!0),i.addEventListener("touchstart",t,!0)}}class Gj extends g4e{constructor(t,i=!0){super(i);Qe(this,"titleDOM");const{dom:o}=this;o.classList.add("title");const n=()=>{this.node.canvas.focusSelected=!this.node.canvas.focusSelected};o.addEventListener("dblclick",n);const s=document.createElement("f-title");s.innerText=t;const a=document.createElement("i"),l=document.createElement("f-toolbar");this.buttons=[],this.titleDOM=s,this.iconDOM=a,this.toolbarDOM=l,o.append(s),o.append(a),o.append(l)}setIcon(t){return this.iconDOM.className=t,this}getIcon(){return this.iconDOM.className}setTitle(t){return this.titleDOM.innerText=t,this}getTitle(){return this.titleDOM.innerText}addButton(t){return this.buttons.push(t),this.toolbarDOM.append(t.dom),this}serialize(t){super.serialize(t);const i=this.getTitle(),o=this.getIcon();t.title=i,o!==""&&(t.icon=o)}deserialize(t){super.deserialize(t),this.setTitle(t.title),t.icon!==void 0&&this.setIcon(t.icon)}}const Hj=(r,e,t,i,o,n,s,a,l=null,c=!1)=>{const u=t-r,d=i-e,h=Math.sqrt(u*u+d*d)*(o?-.3:.3);if(a.beginPath(),a.moveTo(r,e),a.bezierCurveTo(r+h,e,t-h,i,t,i),l!==null&&s!==l){const p=a.createLinearGradient(r,e,t,i);p.addColorStop(0,s),p.addColorStop(1,l),a.strokeStyle=p}else a.strokeStyle=s;c?a.setLineDash([1,0,1]):a.setLineDash([]),a.lineWidth=n,a.stroke()},v4e=["#ff4444","#44ff44","#4444ff"],xw=new bw().add(new Gj("File")).setWidth(250);class y4e extends yw{constructor(){super();Qe(this,"dom");Qe(this,"nodes");Qe(this,"droppedItems");Qe(this,"canvas");const t=document.createElement("f-canvas"),i=document.createElement("f-content"),o=document.createElement("f-area"),n=document.createElement("f-drop"),s=document.createElement("canvas"),a=document.createElement("canvas"),l=document.createElement("canvas"),c=s.getContext("2d"),u=a.getContext("2d"),d=l.getContext("2d");this.dom=t,this.contentDOM=i,this.areaDOM=o,this.dropDOM=n,this.canvas=s,this.frontCanvas=a,this.mapCanvas=l,this.context=c,this.frontContext=u,this.mapContext=d,this.clientX=0,this.clientY=0,this.relativeClientX=0,this.relativeClientY=0,this.nodes=[],this.selected=null,this.updating=!1,this.droppedItems=[],this.events={drop:[]},this._scrollLeft=0,this._scrollTop=0,this._zoom=1,this._width=0,this._height=0,this._focusSelected=!1,this._mapInfo={scale:1,screen:{}},s.className="background",a.className="frontground",l.className="map",n.innerHTML="<span>drop your file</span>",t.append(n),t.append(s),t.append(a),t.append(i),t.append(o),t.append(l);const h=(S,w=this.clientX,M=this.clientY)=>{S=Math.min(Math.max(S,.2),1),this.scrollLeft-=w/this.zoom-w/S,this.scrollTop-=M/this.zoom-M/S,this.zoom=S};let p=null;const m=()=>{p=null},g=(S,w)=>{do if(S.classList&&S.classList.contains(w))return!0;while((S=S.parentElement)&&S!==t);return!1},v=S=>{if(g(S.srcElement,"f-scroll"))return;S.preventDefault(),S.stopImmediatePropagation();const w=S.deltaY*.003;h(this.zoom-w)},y=S=>{if(S.touches&&S.touches.length===2){S.preventDefault(),S.stopImmediatePropagation();const w=(S.touches[0].clientX+S.touches[1].clientX)/2,M=(S.touches[0].clientY+S.touches[1].clientY)/2,T=Math.hypot(S.touches[0].clientX-S.touches[1].clientX,S.touches[0].clientY-S.touches[1].clientY);p===null&&(p={distance:T});const E=(p.distance-T)*.003;p.distance=T,h(this.zoom-E,w,M)}},b=S=>{if(S.touches&&S.touches.length===1){S.preventDefault(),S.stopImmediatePropagation();const w=S.touches[0].clientX,M=S.touches[0].clientY;if(p===null){const{scrollLeft:E,scrollTop:C}=this;p={scrollLeft:E,scrollTop:C,clientX:w,clientY:M}}const T=this.zoom;this.scrollLeft=p.scrollLeft+(w-p.clientX)/T,this.scrollTop=p.scrollTop+(M-p.clientY)/T}};t.addEventListener("wheel",v),t.addEventListener("touchmove",y),t.addEventListener("touchstart",m),s.addEventListener("touchmove",b);let x=0;const _=S=>{S?x++===0&&(this.droppedItems=[],n.classList.add("visible"),this.add(xw)):--x===0&&(n.classList.remove("visible"),this.remove(xw))};t.addEventListener("dragenter",()=>{_(!0)}),t.addEventListener("dragleave",()=>{_(!1)}),t.addEventListener("dragover",S=>{S.preventDefault();const{relativeClientX:w,relativeClientY:M}=this,T=xw.getWidth()/2;xw.setPosition(w-T,M-20)}),t.addEventListener("drop",S=>{S.preventDefault(),_(!1),this.droppedItems=S.dataTransfer.items,os(this.events.drop,this)}),P0(t,S=>{const{delta:w,isTouch:M}=S;if(!M){S.scrollTop===void 0&&(S.scrollLeft=this.scrollLeft,S.scrollTop=this.scrollTop);const T=this.zoom;this.scrollLeft=S.scrollLeft+w.x/T,this.scrollTop=S.scrollTop+w.y/T}S.dragging?t.classList.add("grabbing"):t.classList.remove("grabbing")},{className:"dragging-canvas"}),P0(l,S=>{const{scale:w,screen:M}=this._mapInfo;if(S.scrollLeft===void 0){const T=this.mapCanvas.getBoundingClientRect(),E=S.client.x-T.left,C=S.client.y-T.top;if(!(E>M.x&&C>M.y&&E<M.x+M.width&&C<M.y+M.height)){const B=this._mapInfo.width/this.mapCanvas.width;let I=-this._mapInfo.left-E*B,L=-this._mapInfo.top-C*(this._mapInfo.height/this.mapCanvas.height);I+=M.width/2/w,L+=M.height/2/w,this.scrollLeft=I,this.scrollTop=L}S.scrollLeft=this.scrollLeft,S.scrollTop=this.scrollTop}this.scrollLeft=S.scrollLeft-S.delta.x/w,this.scrollTop=S.scrollTop-S.delta.y/w},{click:!0}),this._onMoveEvent=S=>{const w=S.touches?S.touches[0]:S,{zoom:M,rect:T}=this;this.clientX=w.clientX,this.clientY=w.clientY;const E=(this.clientX-T.left)/M,C=(this.clientY-T.top)/M;this.relativeClientX=E-this.scrollLeft,this.relativeClientY=C-this.scrollTop},this._onUpdate=()=>{this.update()},this.start()}getBounds(){const t={x:1/0,y:1/0,width:-1/0,height:-1/0};for(const i of this.nodes){const{x:o,y:n,width:s,height:a}=i.getBound();t.x=Math.min(t.x,o),t.y=Math.min(t.y,n),t.width=Math.max(t.width,o+s),t.height=Math.max(t.height,n+a)}return t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=Math.round(t.width),t.height=Math.round(t.height),t}get width(){return this._width}get height(){return this._height}get rect(){return this.dom.getBoundingClientRect()}get zoom(){return this._zoom}set zoom(t){this._zoom=t,this.contentDOM.style.zoom=t,t===1?this.dom.classList.remove("zoom"):this.dom.classList.add("zoom"),this.updateMozTransform()}set scrollLeft(t){this._scrollLeft=t,this.contentDOM.style.left=Fl(t),this.updateMozTransform()}get scrollLeft(){return this._scrollLeft}set scrollTop(t){this._scrollTop=t,this.contentDOM.style.top=Fl(t),this.updateMozTransform()}get scrollTop(){return this._scrollTop}set focusSelected(t){if(this._focusSelected===t)return;const i=this.dom.classList;this._focusSelected=t,t?i.add("focusing"):i.remove("focusing")}get focusSelected(){return this._focusSelected}get useTransform(){return navigator.userAgent.match(/firefox/i)!==null}updateMozTransform(){this.useTransform!==!1&&(this.contentDOM.style["-moz-transform"]="scale("+this.zoom+")",this.contentDOM.style["-moz-transform-origin"]="-"+this.contentDOM.style.left+" -"+this.contentDOM.style.top)}onDrop(t){return this.events.drop.push(t),this}start(){this.updating=!0,document.addEventListener("wheel",this._onMoveEvent,!0),document.addEventListener("mousedown",this._onMoveEvent,!0),document.addEventListener("touchstart",this._onMoveEvent,!0),document.addEventListener("mousemove",this._onMoveEvent,!0),document.addEventListener("touchmove",this._onMoveEvent,!0),document.addEventListener("dragover",this._onMoveEvent,!0),requestAnimationFrame(this._onUpdate)}stop(){this.updating=!1,document.removeEventListener("wheel",this._onMoveEvent,!0),document.removeEventListener("mousedown",this._onMoveEvent,!0),document.removeEventListener("touchstart",this._onMoveEvent,!0),document.removeEventListener("mousemove",this._onMoveEvent,!0),document.removeEventListener("touchmove",this._onMoveEvent,!0),document.removeEventListener("dragover",this._onMoveEvent,!0)}add(t){if(t.canvas!==this)return this.nodes.push(t),t.canvas=this,this.contentDOM.append(t.dom),this}remove(t){t===this.selected&&this.select(),this.unlink(t);const i=this.nodes;return i.splice(i.indexOf(t),1),t.canvas=null,this.contentDOM.removeChild(t.dom),t.dispatchEvent(new Event("remove")),this}clear(){const t=this.nodes;for(;t.length>0;)this.remove(t[0]);return this}unlink(t){const i=this.getLinks();for(const o of i)o.inputElement&&o.outputElement&&(o.inputElement.node===t||o.outputElement.node===t)&&o.inputElement.connect()}getLinks(){const t=[];for(const i of this.nodes)t.push(...i.getLinks());return t}centralize(){const t=this.getBounds();return this.scrollLeft=this.canvas.width/2-(-t.x+t.width)/2,this.scrollTop=this.canvas.height/2-(-t.y+t.height)/2,this}setSize(t,i){return this.dom.style.width=`${t}px`,this.dom.style.height=`${i}px`,this._width=t,this._height=i,this.update(),this}select(t=null){if(t===this.selected)return;const i=this.selected;i!==null&&(this.focusSelected=!1,i.dom.classList.remove("selected"),this.selected=null,os(i.events.blur,i)),t!==null&&(t.dom.classList.add("selected"),this.selected=t,os(t.events.focus,t))}updateMap(){const{nodes:t,mapCanvas:i,mapContext:o,scrollLeft:n,scrollTop:s,canvas:a,zoom:l,_mapInfo:c}=this,u=this.getBounds();i.width=300,i.height=200,o.clearRect(0,0,i.width,i.height),o.fillStyle="rgba( 0, 0, 0, 0 )",o.fillRect(0,0,i.width,i.height);const d=-u.x+u.width,h=-u.y+u.height,p=Math.min(i.width/d,i.height/h)*.5,m=d*p,g=h*p,v=i.width/2-m/2,y=i.height/2-g/2;let b=null;for(const M of t){const T=M.getBound(),E=M.getColor();T.x+=-u.x,T.y+=-u.y,T.x*=p,T.y*=p,T.width*=p,T.height*=p,T.x+=v,T.y+=y,M!==this.selected?(o.fillStyle=E,o.fillRect(T.x,T.y,T.width,T.height)):b={nodeBound:T,nodeColor:E}}if(b!==null){const{nodeBound:M,nodeColor:T}=b;o.fillStyle=T,o.fillRect(M.x,M.y,M.width,M.height)}const x=-(n+u.x)*p+v,_=-(s+u.y)*p+y,S=a.width*p/l,w=a.height*p/l;o.fillStyle="rgba( 200, 200, 200, 0.1 )",o.fillRect(x,_,S,w),c.scale=p,c.left=-v/p+u.x,c.top=-y/p+u.y,c.width=i.width/p,c.height=i.height/p,c.screen.x=x,c.screen.y=_,c.screen.width=S,c.screen.height=w}updateLines(){const{dom:t,zoom:i,canvas:o,frontCanvas:n,frontContext:s,context:a,_width:l,_height:c,useTransform:u}=this,d=this.rect;(o.width!==l||o.height!==c)&&(o.width=l,o.height=c,n.width=l,n.height=c),a.clearRect(0,0,l,c),s.clearRect(0,0,l,c),a.globalCompositeOperation="lighter",s.globalCompositeOperation="source-over";const h=this.getLinks(),p={x:0,y:0},m={x:0,y:0},g=10,v=d.x/i,y=d.y/i;let b="";for(const x of h){const{lioElement:_,rioElement:S,dashed:w}=x;let M="",T=0;if(_!==null){const C=_.dom.getBoundingClientRect();T=Math.max(T,_.rioLength),p.x=C.x+C.width-v,p.y=C.y+C.height/2-y,u&&(p.x/=i,p.y/=i)}else p.x=this.clientX-v,p.y=this.clientY-y,M="lio";if(S!==null){const C=S.dom.getBoundingClientRect();T=Math.max(T,S.lioLength),m.x=C.x-v,m.y=C.y+C.height/2-y,u&&(m.x/=i,m.y/=i)}else m.x=this.clientX-v,m.y=this.clientY-y,M="rio";b=b||M;const E=M?s:a;if(M||T===1){let C=null,B=null;M==="rio"?(C=B=_.getRIOColor(),p.x+=g,m.x/=i,m.y/=i):M==="lio"?(C=B=S.getLIOColor(),m.x-=g,p.x/=i,p.y/=i):(C=_.getRIOColor(),B=S.getLIOColor()),Hj(p.x*i,p.y*i,m.x*i,m.y*i,!1,2,C||"#ffffff",E,B||"#ffffff",w)}else{T=Math.min(T,4);for(let C=0;C<T;C++){const B=v4e[C]||"#ffffff",I=4,L=Math.min(_.rioLength,T),P=Math.min(S.lioLength,T),U=_.getRIOColor()||B,G=S.getLIOColor()||B,R=L*I*.5-I/2,F=P*I*.5-I/2,O=Math.min(C,L-1),H=Math.min(C,P-1),$=O*I-1,j=H*I-1;Hj(p.x*i,(p.y+$-R)*i,m.x*i,(m.y+j-F)*i,!1,2,U,E,G,w)}}}a.globalCompositeOperation="destination-in",b!==""?t.classList.add("dragging-"+b):(t.classList.remove("dragging-lio"),t.classList.remove("dragging-rio"))}update(){this.updating!==!1&&(requestAnimationFrame(this._onUpdate),this.updateLines(),this.updateMap())}serialize(t){const i=[],o=this.nodes.sort((n,s)=>n.serializePriority>s.serializePriority?-1:1);for(const n of o)i.push(n.toJSON(t).id);t.nodes=i}deserialize(t){for(const i of t.nodes)this.add(t.objects[i])}}class jj extends EventTarget{constructor(e){super();const t=document.createElement("f-menu");t.className=e+" bottom left hidden";const i=document.createElement("f-list");t.append(i),this.dom=t,this.listDOM=i,this.visible=!1,this.align="bottom left",this.subMenus=new WeakMap,this.domButtons=new WeakMap,this.buttons=[],this.events={}}onContext(e){return this.events.context.push(e),this}setAlign(e){const t=this.dom;return f4e(t,this.align),m4e(t,e),this.align=e,this}getAlign(){return this.align}show(){return this.dom.classList.remove("hidden"),this.visible=!0,this.dispatchEvent(new Event("show")),this}hide(){this.dom.classList.add("hidden"),this.dispatchEvent(new Event("hide")),this.visible=!1}add(e,t=null){const i=document.createElement("f-item");return t!==null&&(i.classList.add("submenu"),i.append(t.dom),this.subMenus.set(e,t),e.dom.addEventListener("mouseover",()=>t.show()),e.dom.addEventListener("mouseout",()=>t.hide())),i.append(e.dom),this.buttons.push(e),this.listDOM.append(i),this.domButtons.set(e,i),this}clear(){for(this.buttons=[],this.subMenus=new WeakMap,this.domButtons=new WeakMap;this.listDOM.firstChild;)this.listDOM.firstChild.remove()}}let eu=null;const $j=r=>{eu&&eu.visible===!0&&r.target.closest("f-menu.context")===null&&eu.hide()};document.body.addEventListener("mousedown",$j,!0),document.body.addEventListener("touchstart",$j,!0);class Wj extends jj{constructor(e=null){super("context"),this.events.context=[],this._lastButtonClick=null,this._onButtonClick=(t=null)=>{const i=t?t.target:null;this._lastButtonClick&&this._lastButtonClick.dom.parentElement.classList.remove("active"),this._lastButtonClick=i,i&&(this.subMenus.has(i)&&this.subMenus.get(i)._onButtonClick(),i.dom.parentElement.classList.add("active"))},this._onButtonMouseOver=t=>{const i=t.target;this.subMenus.has(i)&&this._lastButtonClick!==i&&this._onButtonClick()},this.addEventListener("context",()=>{os(this.events.context,this)}),this.setTarget(e)}openFrom(e){const t=e.getBoundingClientRect();return this.open(t.x+t.width/2,t.y+t.height/2)}open(e=Vj.x,t=Vj.y){return eu!==null&&eu.hide(),eu=this,this.setPosition(e,t),document.body.append(this.dom),this.show()}setWidth(e){return this.dom.style.width=Fl(e),this}setPosition(e,t){const i=this.dom;return i.style.left=Fl(e),i.style.top=Fl(t),this}setTarget(e=null){if(e!==null){const t=i=>{i.preventDefault(),!(i.pointerType!=="mouse"||i.pageX===0&&i.pageY===0)&&(this.dispatchEvent(new Event("context")),this.open())};this.target=e,e.addEventListener("contextmenu",t,!1)}return this}show(){this.opened||(this.dom.style.left="",this.dom.style.transform="");const e=this.dom.getBoundingClientRect();let t=Math.min(window.innerWidth-(e.x+e.width+10),0),i=Math.min(window.innerHeight-(e.y+e.height+10),0);return this.opened?(t<0&&(t=-e.width),i<0&&(i=-e.height),this.setPosition(e.x+t,e.y+i)):(t<0&&(this.dom.style.left="-100%"),i<0&&(this.dom.style.transform="translateY( calc( 32px - 100% ) )")),super.show()}hide(){return this.opened&&(eu=null),super.hide()}add(e,t=null){return e.addEventListener("click",this._onButtonClick),e.addEventListener("mouseover",this._onButtonMouseOver),super.add(e,t)}get opened(){return eu===this}}const qj=r=>r.trim().toLowerCase().replace(/\s\s+/g," ");class Xj extends jj{constructor(){super("search");Qe(this,"inputDOM");Qe(this,"forceAutoComplete");Qe(this,"currentFiltered");this.events.submit=[],this.events.filter=[],this.tags=new WeakMap;const t=document.createElement("input");t.placeholder="Type here";let i=!0,o=!0;t.addEventListener("focusout",()=>{o=!0,this.setValue("")}),t.onkeydown=n=>{const s=n.key;if(s==="ArrowUp"){const a=this.filteredIndex;this.forceAutoComplete?this.filteredIndex=a!==null?(a+1)%(this.filtered.length||1):0:this.filteredIndex=a!==null?Math.min(a+1,this.filtered.length-1):0,n.preventDefault(),i=!1}else if(s==="ArrowDown"){const a=this.filteredIndex;this.forceAutoComplete?(this.filteredIndex=a-1,this.filteredIndex===null&&(this.filteredIndex=this.filtered.length-1)):this.filteredIndex=a!==null?a-1:null,n.preventDefault(),i=!1}else s==="Enter"?(this.value=this.currentFiltered?this.currentFiltered.button.getValue():t.value,this.submit(),n.preventDefault(),i=!1):i=!0},t.onkeyup=()=>{i&&(o&&(this.dispatchEvent(new Event("filter")),o=!1),this.filter(t.value))},this.filtered=[],this.currentFiltered=null,this.value="",this.forceAutoComplete=!1,this.dom.append(t),this.inputDOM=t,this.addEventListener("filter",()=>{os(this.events.filter,this)}),this.addEventListener("submit",()=>{os(this.events.submit,this)})}dom(t){throw new Error("Method not implemented.")}submit(){return this.dispatchEvent(new Event("submit")),this.setValue("")}setValue(t){return this.inputDOM.value=t,this.filter(t),this}getValue(){return this.value}onFilter(t){return this.events.filter.push(t),this}onSubmit(t){return this.events.submit.push(t),this}getFilterByButton(t){for(const i of this.filtered)if(i.button===t)return i;return null}add(t){super.add(t);const i=()=>{const o=this.getFilterByButton(t);this.filteredIndex=this.filtered.indexOf(o),this.value=t.getValue(),this.submit()};return t.dom.addEventListener("mousedown",i),t.dom.addEventListener("touchstart",i),this.domButtons.get(t).remove(),this}set filteredIndex(t){this.currentFiltered&&(this.domButtons.get(this.currentFiltered.button).classList.remove("active"),this.currentFiltered=null);const i=this.filtered[t];i&&(this.domButtons.get(i.button).classList.add("active"),this.currentFiltered=i),this.updateFilter()}get filteredIndex(){return this.currentFiltered?this.filtered.indexOf(this.currentFiltered):null}setTag(t,i){this.tags.set(t,i)}filter(t){t=qj(t);const i=this.tags,o=[];for(const n of this.buttons){this.domButtons.get(n).remove();const s=i.has(n)?" "+i.get(n):"",a=qj(n.getValue()+s);if(t&&a.includes(t)===!0){const l=t.length/a.length;o.push({button:n,score:l})}}o.sort((n,s)=>s.score-n.score),this.filtered=o,this.filteredIndex=this.forceAutoComplete?0:null}updateFilter(){const t=Math.min(this.filteredIndex,this.filteredIndex-3);for(let i=0;i<this.filtered.length;i++){const o=this.filtered[i].button,n=this.domButtons.get(o);n.remove(),i>=t&&this.listDOM.append(n)}}}class tu extends Lo{constructor(e="",t=""){super(),this.labelDOM=document.createElement("f-label"),this.inputsDOM=document.createElement("f-inputs");const i=document.createElement("span");this.spanDOM=i,this.iconDOM=null,this.labelDOM.append(i),this.dom.append(this.labelDOM),this.dom.append(this.inputsDOM),this.serializeLabel=!1,this.setLabel(e),this.setAlign(t)}setIcon(e){return this.iconDOM=this.iconDOM||document.createElement("i"),this.iconDOM.className=e,e?this.labelDOM.prepend(this.iconDOM):this.iconDOM.remove(),this}getIcon(){return this.iconDOM?this.iconDOM.className:null}setAlign(e){this.labelDOM.className=e}setLabel(e){this.spanDOM.innerText=e}getLabel(){return this.spanDOM.innerText}serialize(e){if(super.serialize(e),this.serializeLabel){const t=this.getLabel(),i=this.getIcon();e.label=t,i!==""&&(e.icon=i)}}deserialize(e){super.deserialize(e),this.serializeLabel&&(this.setLabel(e.label),e.icon!==void 0&&this.setIcon(e.icon))}}class Vf extends Qc{constructor(e=""){const t=document.createElement("button"),i=document.createElement("span");t.append(i);const o=document.createElement("i");t.append(o),super(t),this.spanDOM=i,this.iconDOM=o,i.innerText=e,t.onmouseover=()=>{this.dispatchEvent(new Event("mouseover"))},t.onclick=t.ontouchstart=o.onclick=o.ontouchstart=n=>{n.preventDefault(),n.stopPropagation(),this.dispatchEvent(new Event("click"))}}setIcon(e){return this.iconDOM.className=e,this}getIcon(){return this.iconDOM.className}setValue(e){return this.spanDOM.innerText=e,this}getValue(){return this.spanDOM.innerText}}class Kj extends Qc{constructor(e=39423){const t=document.createElement("input");super(t),t.type="color",t.value=D0(e),t.oninput=()=>{this.dispatchEvent(new Event("change"))}}setValue(e,t=!0){return super.setValue(D0(e),t)}getValue(){return parseInt(super.getValue().substr(1),16)}}class fo extends Qc{constructor(e=0,t=-1/0,i=1/0,o=.01){const n=document.createElement("input");super(n),this.min=t,this.max=i,this.step=o,this.integer=!1,n.type="text",n.className="number",n.value=this._getString(e),n.spellcheck=!1,n.autocomplete="off",n.ondragstart=n.oncontextmenu=s=>{s.preventDefault(),s.stopPropagation()},n.onfocus=n.onclick=()=>{n.select()},n.onblur=()=>{this.dom.value=this._getString(this.dom.value),this.dispatchEvent(new Event("blur"))},n.onchange=()=>{this.dispatchEvent(new Event("change"))},n.onkeydown=s=>{if(s.key.length===1&&/\d|\.|-/.test(s.key)!==!0)return!1;s.key==="Enter"&&s.target.blur(),s.stopPropagation()},P0(n,s=>{const{delta:a}=s;if(n.readOnly===!0)return;s.value===void 0&&(s.value=this.getValue());const l=a.x-a.y,c=s.value+l*this.step;n.value=this._getString(c.toFixed(this.precision)),this.dispatchEvent(new Event("change"))})}setStep(e){return this.step=e,this}setRange(e,t,i){return this.min=e,this.max=t,this.step=i,this.dispatchEvent(new Event("range")),this.setValue(this.getValue())}get precision(){if(this.integer===!0)return 0;const e=this.step%1;return e!==0?e.toString().split(".")[1].length:1}setValue(e,t=!0){return super.setValue(this._getString(e),t)}getValue(){return Number(this.dom.value)}serialize(e){const{min:t,max:i}=this;t!==-1/0&&i!==1/0&&(e.min=this.min,e.max=this.max,e.step=this.step),super.serialize(e)}deserialize(e){if(e.min!==void 0){const{min:t,max:i,step:o}=this;this.setRange(t,i,o)}super.deserialize(e)}_getString(e){const t=Math.min(Math.max(Number(e),this.min),this.max);return this.integer===!0?Math.floor(t):t+(t%1?"":".0")}}class Yj extends Qc{constructor(e=[],t=null){const i=document.createElement("select");super(i),i.onchange=()=>{this.dispatchEvent(new Event("change"))},i.onmousedown=i.ontouchstart=()=>{this.dispatchEvent(new Event("click"))},this.setOptions(e,t)}setOptions(e,t=null){const i=this.dom,o=i.value;let n=!1;this.options=e,i.innerHTML="";for(let s=0;s<e.length;s++){let a=e[s];typeof a=="string"&&(a={name:a,value:s});const l=document.createElement("option");l.innerText=a.name,l.value=a.value,n===!1&&o===a.value&&(n=!0),i.append(l)}return i.value=t!==null?t:n?o:"",this}getOptions(){return this._options}serialize(e){e.options=[...this.options],super.serialize(e)}deserialize(e){this.options.length===0&&this.setOptions(e.options),super.deserialize(e)}}class Gf extends Qc{constructor(t=""){const i=document.createElement("f-string");super(i);Qe(this,"inputDOM");const o=document.createElement("input");i.append(o),o.type="text",o.value=t,o.spellcheck=!1,o.autocomplete="off",this._buttonsDOM=null,this._datalistDOM=null,this.iconDOM=null,this.inputDOM=o,this.buttons=[],o.onblur=()=>{this.dispatchEvent(new Event("blur"))},o.onchange=()=>{this.dispatchEvent(new Event("change"))};let n="";o.onkeydown=()=>n=o.value,o.onkeyup=s=>{s.key==="Enter"&&s.target.blur(),s.stopPropagation(),n!==o.value&&this.dispatchEvent(new Event("change"))}}setPlaceHolder(t){return this.inputDOM.placeholder=t,this}setIcon(t){return this.iconDOM=this.iconDOM||document.createElement("i"),this.iconDOM.setAttribute("type","icon"),this.iconDOM.className=t,t?this.dom.prepend(this.iconDOM):this.iconDOM.remove(),this}getIcon(){return this.iconInput?this.iconInput.getIcon():""}addButton(t){return this.buttonsDOM.prepend(t.iconDOM),this.buttons.push(t),this}addOption(t){const i=document.createElement("option");return i.value=t,this.datalistDOM.append(i),this}clearOptions(){this.datalistDOM.remove()}get datalistDOM(){let t=this._datalistDOM;if(t===null){const i="input-dt-"+this.id;t=document.createElement("datalist"),t.id=i,this._datalistDOM=t,this.inputDOM.autocomplete="on",this.inputDOM.setAttribute("list",i),this.dom.prepend(t)}return t}get buttonsDOM(){let t=this._buttonsDOM;return t===null&&(t=document.createElement("f-buttons"),this._buttonsDOM=t,this.dom.prepend(t)),t}getInput(){return this.inputDOM}}class b4e extends Qc{constructor(e=!1){const t=document.createElement("input");super(t),t.type="checkbox",t.className="toggle",t.checked=e,t.onclick=()=>this.dispatchEvent(new Event("click")),t.onchange=()=>this.dispatchEvent(new Event("change"))}setValue(e){return this.dom.checked=e,this.dispatchEvent(new Event("change")),this}getValue(){return this.dom.checked}}class x4e{constructor(e=""){Qe(this,"isNodeClass");const t=document.createElement("f-treeview-node"),i=document.createElement("f-treeview-label"),o=document.createElement("input"),n=document.createElement("spam");i.append(n),n.innerText=e,o.type="checkbox",t.append(o),t.append(i),this.dom=t,this.childrenDOM=null,this.labelSpam=n,this.labelDOM=i,this.inputDOM=o,this.iconDOM=null,this.parent=null,this.children=[],this.selected=!1,this.events={change:[],click:[]},t.addEventListener("click",()=>{os(this.events.click,this)})}setLabel(e){return this.labelSpam.innerText=e,this}getLabel(){return this.labelSpam.innerText}add(e){let t=this.childrenDOM;if(this.childrenDOM===null){const i=this.dom,o=document.createElement("f-arrow");t=document.createElement("f-treeview-children"),i.append(o),i.append(t),this.childrenDOM=t}return this.children.push(e),t.append(e.dom),e.parent=this,this}setOpened(e){return this.inputDOM.checked=e,this}getOpened(){return this.inputDOM.checkbox}setIcon(e){return this.iconDOM=this.iconDOM||document.createElement("i"),this.iconDOM.className=e,e?this.labelDOM.prepend(this.iconDOM):this.iconDOM.remove(),this}getIcon(){return this.iconDOM?this.iconDOM.className:null}setVisible(e){return this.dom.style.display=e?"":"none",this}setSelected(e){return this.selected===e?this:(e?this.dom.classList.add("selected"):this.dom.classList.remove("selected"),this.selected=e,this)}onClick(e){return this.events.click.push(e),this}}class _4e extends Qc{constructor(e=[]){const t=document.createElement("f-treeview");super(t);const i=document.createElement("f-treeview-children");t.append(i),t.setAttribute("type","tree"),this.childrenDOM=i,this.children=[]}add(e){return this.children.push(e),this.childrenDOM.append(e.dom),this}serialize(e){super.serialize(e)}deserialize(e){super.deserialize(e)}}const Jj=(r,...e)=>{for(const t of r)if(t(...e)===!1)return!1;return!0};class w4e extends Lo{constructor(t=""){super();Qe(this,"updateInterval");Qe(this,"editor");Qe(this,"events",{change:[]});Qe(this,"_source");this.updateInterval=500,this._source=t,this.dom.classList.add("no-zoom"),this.setHeight(360);const i=document.createElement("div");i.style.width="100%",i.style.height="100%",this.dom.appendChild(i),this.editor=monaco.editor.create(i,{value:this.source,language:"javascript",theme:"vs-dark",automaticLayout:!0});let o=null;this.editor.getModel().onDidChangeContent(()=>{this._source=this.editor.getValue(),o&&clearTimeout(o),o=setTimeout(()=>{Jj(this.events.change,this)},this.updateInterval)})}set source(t){this._source!==t&&(this._source=t,this.editor&&this.editor.setValue(t),Jj(this.events.change,this))}get source(){return this._source}focus(){this.editor&&this.editor.focus()}onChange(t){return this.events.change.push(t),this}}const PO={};function Zj(r){r!=null&&r.uuid&&(PO[r.uuid]=r)}function _w(r){if(!r)return null;const e=PO[r];return e&&delete PO[r],e||null}function B0(r,e){var t,i;if(!r.dataTransfer)throw new Error("no dataTransfer");Zj(e.soure),r.dataTransfer.setData("type",e.type),r.dataTransfer.setData("soure",((t=e.soure)==null?void 0:t.uuid)||""),e.type==="dragNodeClass"||e.type==="dragObjectClass"?r.dataTransfer.setData("name",e.name):e.type==="dragObject"&&(Zj(e.object),r.dataTransfer.setData("object",((i=e.object)==null?void 0:i.uuid)||""))}function ww(r){if(!r.dataTransfer)return;const e=r.dataTransfer.getData("type");if(e)switch(e){case"dragNodeClass":return{type:"dragNodeClass",soure:_w(r.dataTransfer.getData("source")),name:r.dataTransfer.getData("name")};case"dragObjectClass":return{type:"dragObjectClass",soure:_w(r.dataTransfer.getData("source")),name:r.dataTransfer.getData("name")};case"dragObject":return{type:"dragObject",soure:_w(r.dataTransfer.getData("source")),object:_w(r.dataTransfer.getData("object"))}}}function ru(r,e){const t=r[e];return t!=null&&t.isUniformNode?t.value:t}const Qj=(r,e,t)=>{const i=ru(r,e)??!1,o=new b4e(i).onChange(()=>{r[e]=o.getValue(),t.dispatchEvent(new Event("changeInput"))});return t.add(o),t.setInput(1),t.setOutput(1),t.onConnect((n,s)=>n.setEnabledInputs(!n.getLinkedObject())),t},DO=(r,e,t)=>{const i=ru(r,e)??0,o=new fo(i).onChange(()=>{r[e]=o.getValue(),t.dispatchEvent(new Event("changeInput"))});return t.add(o),t.setInput(1),t.setOutput(1),t.onConnect((n,s)=>n.setEnabledInputs(!n.getLinkedObject())),t},e$=(r,e,t)=>{const i=ru(r,e)??new We,o=()=>{i.set(n.getValue(),s.getValue()),t.dispatchEvent(new Event("changeInput"))},n=new fo(i.x).setTagColor("red").onChange(o),s=new fo(i.y).setTagColor("green").onChange(o);return t.add(n).add(s),t.setInput(2),t.setOutput(2),t.onConnect((a,l)=>a.setEnabledInputs(!a.getLinkedObject())),t},t$=(r,e,t)=>{const i=ru(r,e)??new Q,o=()=>{i.set(n.getValue(),s.getValue(),a.getValue()),t.dispatchEvent(new Event("changeInput"))},n=new fo(i.x).setTagColor("red").onChange(o),s=new fo(i.y).setTagColor("green").onChange(o),a=new fo(i.z).setTagColor("blue").onChange(o);return t.add(n).add(s).add(a),t.setInput(3),t.setOutput(3),t.onConnect((l,c)=>l.setEnabledInputs(!l.getLinkedObject())),t},r$=(r,e,t)=>{const i=ru(r,e)??new Kt,o=()=>{i.set(n.getValue(),s.getValue(),a.getValue(),l.getValue()),t.dispatchEvent(new Event("changeInput"))},n=new fo(i.x).setTagColor("red").onChange(o),s=new fo(i.y).setTagColor("green").onChange(o),a=new fo(i.z).setTagColor("blue").onChange(o),l=new fo(i.w).setTagColor("white").onChange(o);return t.add(n).add(s).add(a).add(l),t.setInput(4),t.setOutput(4),t.onConnect((c,u)=>c.setEnabledInputs(!c.getLinkedObject())),t},S4e=(r,e,t)=>{const i=ru(r,e)??new Rn,o=()=>{i.set(n.getValue(),s.getValue(),a.getValue()),t.dispatchEvent(new Event("changeInput"))},n=new fo(i.x).setTagColor("red").onChange(o),s=new fo(i.y).setTagColor("green").onChange(o),a=new fo(i.z).setTagColor("blue").onChange(o);return t.add(n).add(s).add(a),t.setInput(4),t.setOutput(4),t.onConnect((l,c)=>l.setEnabledInputs(!l.getLinkedObject())),t},M4e=(r,e,t)=>{const i=ru(r,e)??new bt,o=new Kj(i.getHex()).onChange(()=>{i.setHex(o.getValue()),t.dispatchEvent(new Event("changeInput"))});return t.add(o),t.setInput(3),t.setOutput(3),t.onConnect((n,s)=>n.setEnabledInputs(!n.getLinkedObject())),t},i$=(r,e,t,i={})=>{const o=ru(r,e)??new String,n=new Gf(o).onChange(()=>{let a=n.getValue();i.transform==="lowercase"?a=a.toLowerCase():i.transform==="uppercase"&&(a=a.toUpperCase()),r[e]=a,t.dispatchEvent(new Event("changeInput"))});if(t.add(n),i.options)for(const a of i.options)n.addOption(a);const s=n.getInput();return i.allows&&s.addEventListener("input",()=>s.value=s.value.replace(new RegExp("[^\\s"+i.allows+"]","gi"),"")),i.maxLength&&(s.maxLength=i.maxLength),i.transform&&(s.style["text-transform"]=i.transform),t.setInput(1),t.setOutput(1),t.onConnect((a,l)=>a.setEnabledInputs(!a.getLinkedObject())),t},BO=(r,e,t)=>{const i=r[e],o=new Gf((i==null?void 0:i.uuid)||"null");return o.setReadOnly(!0),t.setInput(1),t.setOutput(1),t.add(o)},T4e=(r,e,t,i)=>{const o=r[e],n=new Gf((o==null?void 0:o.uuid)||"null");i?(t.setInput(1),t.setOutput(1)):n.setReadOnly(!0);const s=n.dom.querySelector("input");return s.ondrop=a=>{const l=ww(a);(l==null?void 0:l.type)==="dragObject"&&l.object.uuid!==n.getValue()&&(!i||!pDe(l.object,i)||(r[e]=l.object[tw]||l.object,n.setValue(l.object.uuid),t.dispatchEvent(new Event("changeInput"))))},t.onConnect((a,l)=>a.setEnabledInputs(!a.getLinkedObject())),t.add(n)},E4e=(r,e,t,i)=>{const o=r[e],n=!Array.isArray(i),s=[];Array.isArray(i)?i.forEach(l=>s.push({name:l,value:l})):Object.entries(i).forEach(l=>s.push({name:l[0],value:l[1]}));const a=new Yj(s,o).onChange(()=>{const l=a.getValue();r[e]=n?Number.parseInt(l):l,t.dispatchEvent(new Event("changeInput"))});return t.setOutput(1),t.onConnect((l,c)=>l.setEnabledInputs(!l.getLinkedObject())),t.add(a)},o$=(r,e,t)=>{const i=r[e],o=new w4e(i).onChange(()=>{const n=o.source;r[e]=n,t.dispatchEvent(new Event("changeInput"))});return o.dom.style.marginTop="6px",o.dom.style.marginBottom="6px",t.add(o),t.setInput(0),t.setOutput(0),t},F0={};class Sw extends bw{constructor(t,i,o,n,s){super();Qe(this,"title");Qe(this,"context");Qe(this,"_onPositionChanged");Qe(this,"rmCallback");this.history=i,this.graph=o,this.node=n,F0[n.scoped.uuid]=this,this._onPositionChanged=d=>{const{x:h,y:p}=this.getPosition();(h!==n.anchor.x||p!==n.anchor.y)&&(n.anchor.x=h,n.anchor.y=p,o.dispatchEvent({type:"graphModified",soure:null,nodes:[n]}))},this.dom.addEventListener("positionChanged",this._onPositionChanged),this.setWidth(this.node.anchor.width||300),this.setPosition(n.anchor.x,n.anchor.y);const a=new Gj(t).setObject({node:n}).setSerializable(!1),l=new Vf().onClick(()=>{u.open()}).setIcon("ti ti-dots"),c=()=>{u.removeEventListener("show",c),s.removable&&u.add(new Vf("Remove").setIcon("ti ti-trash").onClick(()=>{this.removeSelf()})),u.add(new Vf("Isolate").setIcon("ti ti-3d-cube-sphere").onClick(()=>{this.context.hide(),this.title.dom.dispatchEvent(new MouseEvent("dblclick"))}))},u=new Wj(this.dom);u.addEventListener("show",c),s.input!==void 0&&a.setInput(s.input),s.output!==void 0&&a.setOutput(s.output),this.title=a,s.icon&&(this.icon=s.icon),this.context=u,a.addButton(l),this.add(a)}set icon(t){this.title.setIcon("ti ti-"+t)}add(t,i){return(t.inputLength||t.outputLength)&&(t.onValid((o,n)=>{if(!n)return!1;const s=o.getObject(),a=n.getObject();return!!this.graph.connect(a,s,!0)}),t.onConnect(o=>{if(this.graph.isLocked)return;const n=o.getObject(),s=o.getLinkedObject();if(!s)return this.graph.disconnect(n);const a=this.graph.connect(s,n);return o.getLink().dashed=a===rj.Push,a})),super.add(t,i)}removeSelf(){this.graph.remove(this.node),this.dispose(),this.rmCallback&&this.rmCallback()}invalidate(t,i){this.graph.dispatchEvent({type:"graphModified",soure:null,nodes:[this.node]}),t&&this.graph.applyNodePins(this.node,t,i)}dispose(){this.dom.removeEventListener("positionChanged",this._onPositionChanged),this.context.hide(),super.dispose(),delete F0[this.node.scoped.uuid]}}class iu extends Sw{constructor(e,t,i,o,n){super(e,t,i,o,{removable:!0,...n});const[,s]=/(\d)+$/.exec(e)||[,"1"];s&&this.title.setOutput(Number.parseInt(s))}}class C4e extends iu{constructor(e,t,i,o,n){super(e,t,i,o,n);const s=Qj(o.scoped,"value",new Lo);s.addEventListener("changeInput",()=>this.invalidate("value")),s.setInput(0),this.add(s)}}class N4e extends iu{constructor(e,t,i,o,n){super(e,t,i,o,n),this.title.setOutput(3);const s=p=>{const m=o.scoped.value,g=m.getHex(),v=g.toString(16).toUpperCase().padStart(6,"0");p!=="color"&&a.setValue(g,!1),p!=="hex"&&l.setValue("#"+v,!1),p!=="rgb"&&(u.setValue(m.r.toFixed(3),!1),d.setValue(m.g.toFixed(3),!1),h.setValue(m.b.toFixed(3),!1)),u.setTagColor(`#${v.slice(0,2)}0000`),d.setTagColor(`#00${v.slice(2,4)}00`),h.setTagColor(`#0000${v.slice(4,6)}`),this.invalidate("value")},a=new Kj(16777215).onChange(()=>{o.scoped.value.setHex(a.getValue()),s("picker")}),l=new Gf().onChange(()=>{const p=l.getValue();if(p.indexOf("#")===0){const m=p.slice(1).padEnd(6,"0");o.scoped.value.setHex(parseInt(m,16)),s("hex")}});l.addEventListener("blur",()=>{s()});const c=()=>{o.scoped.value.setRGB(u.getValue(),d.getValue(),h.getValue()),s("rgb")},u=new fo(1,0,1).setTagColor("red").onChange(c),d=new fo(1,0,1).setTagColor("green").onChange(c),h=new fo(1,0,1).setTagColor("blue").onChange(c);this.add(new Lo().add(a).setSerializable(!1)).add(new tu("Hex").add(l).setSerializable(!1)).add(new tu("RGB").add(u).add(d).add(h)),s()}}class n$ extends iu{constructor(e,t,i,o,n){super(e,t,i,o,n);const s=DO(o.scoped,"value",new Lo);s.addEventListener("changeInput",()=>this.invalidate("value")),s.setInput(0),this.add(s)}}const A4e={Boolean:Qj,Float:DO,Number:DO,Vector2:e$,Vector3:t$,Vector4:r$,Color:M4e,String:i$,Euler:S4e,Object3D:T4e,Script:o$};function Hf(r,e,t){var s;let i,o=null;for(const a of t.types){if(typeof a=="object"){o=a;break}if(i=A4e[a],i)break}i||(s=r[e])!=null&&s.uuid&&(i=BO);const n=i!==o$?new tu(e):new Lo;return o?E4e(r,e,n,o):i?i(r,e,n,t.types):n.setInput(1),n}class R4e extends Sw{constructor(e,t,i,o,n){super(e,t,i,o,{removable:!1,input:0,output:0,...n}),this.title.titleDOM.innerText=`${kf(o.scoped.object)} Reference`,this.node.anchor.width||this.setWidth(360);const s=lO(o.scoped);for(const[c,u]of Object.entries(s.in)){let d;c==="object"?(d=new tu("uuid"),BO(o.scoped,c,d)):d=Hf(o.scoped,c,u),d.setInput(0),d.setOutput(0),this.add(d)}const a=o.scoped.typesExtended,l=o.scoped.getObjectsExtended();for(const[c,u]of Object.entries(a.in)){const d=Hf(l.in,c,u);d.setOutput(0),d.setObject({node:o,field:c}),d.addEventListener("changeInput",()=>this.invalidate(c,"in")),this.add(d)}for(const[c,u]of Object.entries(a.out)){const d=Hf(l.out,c,u);d.setObject({node:o,io:"out",field:c}),d.addEventListener("changeInput",()=>this.invalidate(c,"out")),d.setInput(0),this.add(d)}}}class L4e extends iu{constructor(e,t,i,o,n){super(e,t,i,o,n);const s=i$(o.scoped,"value",new Lo);s.addEventListener("changeInput",()=>this.invalidate("value")),s.setInput(0),this.add(s)}}class O4e extends iu{constructor(e,t,i,o,n){super(e,t,i,o,n);const s=()=>{a.setValue(o.scoped.value.toFixed(3))},a=new fo().onChange(()=>{o.scoped.value=a.getValue()}),l=new fo(1).onChange(()=>{o.scoped.scale=l.getValue()}),c=new Lo().add(new Vf("Reset").onClick(()=>{o.scoped.value=0,s()})).setSerializable(!1);this.add(new Lo().add(a).setSerializable(!1)).add(new tu("Speed").add(l)).add(c),o.scoped._update=o.scoped.update,o.scoped.update=function(...u){o.scoped._update(...u),s()}}}class s$ extends iu{constructor(e,t,i,o,n){super(e,t,i,o,n);const s=e$(o.scoped,"value",new Lo);s.addEventListener("changeInput",()=>this.invalidate("value")),s.setInput(0),this.add(s)}}class a$ extends iu{constructor(e,t,i,o,n){super(e,t,i,o,n);const s=t$(o.scoped,"value",new Lo);s.addEventListener("changeInput",()=>this.invalidate("value")),s.setInput(0),this.add(s)}}class l$ extends iu{constructor(e,t,i,o,n){super(e,t,i,o,n);const s=r$(o.scoped,"value",new Lo);s.addEventListener("changeInput",()=>this.invalidate("value")),s.setInput(0),this.add(s)}}const c$=["Boolean","Number","String","Color","Vector2","Vector3","Vector4","Euler","bool","float","color","vec2","vec3","vec4"];function FO(r){const e=new Vf;return e.setIcon(`ti ti-${r}`),e.dom.classList.toggle("flat-button"),e}function u$(r){const e=new tu(r),t=new Gf(""),i=new Yj(c$.map(o=>({name:o,value:o})),c$[1]);return e.add(t).add(i)}const U0=(r,e,t,i,o,n,s)=>{const a=Hf(i,o,n),l=FO("trash");return l.onClick(()=>{e.removeType(t,o,s)&&(r.remove(a),a.dispose(),r.invalidate())}),a.add(l),a.setObject({node:t,field:o,io:s}),a.addEventListener("changeInput",()=>r.invalidate(o,s)),a};function d$(r,e,t,i,o,n){return r.push({tip:`Add type[${o}] to node[${t.scoped.uuid}][io=${n}]`,undo:()=>{if(!e.removeType(t,i,n))return;const s=F0[t.scoped.uuid];if(s){const a=s.elements.find(l=>{const c=l.getObject();return c?c.field===i&&c.io===n:!1});a&&(s.remove(a),a.dispose()),s.invalidate()}},redo:()=>{if(!e.addType(t,i,o,n))return;const s=F0[t.scoped.uuid];if(s){const a=t.scoped.typesExtended,l=t.scoped.getObjectsExtended(),c=U0(s,e,t,l[n],i,a[n][i],n),u=s.elements.filter(d=>d.getObject()===1911);n==="in"?(c.setOutput(0),s.add(c,u[0])):(c.setInput(0),s.add(c,u[1])),c.setObject({node:t,io:n,field:i}),s.invalidate()}}})}class h$ extends Sw{constructor(e,t,i,o,n){super(e,t,i,o,{removable:!0,input:0,output:0,...n}),this.title.setColor(10053120),this.node.anchor.width||this.setWidth(420);const s=lO(o.scoped);for(const g of["object","enabled","code"]){const v=s.in[g];let y;g==="object"?(y=new tu("uuid"),BO(o.scoped,g,y)):(y=Hf(o.scoped,g,v),y.addEventListener("changeInput",()=>this.invalidate())),y.setInput(0),y.setOutput(0),this.add(y)}const a=this.elements[3],l=new tu("main(params, out) {");this.add(l,a);const c=o.scoped.typesExtended,u=o.scoped.getObjectsExtended();for(const[g,v]of Object.entries(c.in)){const y=U0(this,i,o,u.in,g,v,"in");y.setOutput(0),y.setObject({node:o,io:"in",field:g}),this.add(y,l)}const d=u$("[New Input]"),h=FO("new-section");h.onClick(()=>{const g=d.inputs[0].getValue(),v=d.inputs[1].getValue();if(i.addType(o,g,v,"in")){const y=U0(this,i,o,u.in,g,c.in[g],"in");y.setOutput(0),y.setObject({node:o,io:"in",field:g}),this.add(y,d),this.invalidate(),d$(t,i,o,g,v,"in")}}),d.add(h),d.setObject(1911),this.add(d,l);for(const[g,v]of Object.entries(c.out)){const y=U0(this,i,o,u.out,g,v,"out");y.setInput(0),y.setObject({node:o,io:"out",field:g}),this.add(y,l)}const p=u$("[New Output]"),m=FO("new-section");m.onClick(()=>{const g=p.inputs[0].getValue(),v=p.inputs[1].getValue();if(i.addType(o,g,v,"out")){const y=U0(this,i,o,u.out,g,c.out[g],"out");y.setInput(0),y.setObject({node:o,io:"out",field:g}),this.add(y,p),this.invalidate(),d$(t,i,o,g,v,"out")}}),p.setObject(1911),p.add(m),this.add(p,l)}}class p$ extends h${constructor(e,t,i,o,n){super(e,t,i,o,{input:1,output:1,...n})}}class k4e extends p${constructor(e,t,i,o,n){super(e,t,i,o,{input:0,output:1,...n})}}const I4e={cameraNormalMatrix:[],cameraPosition:[],cameraProjectionMatrix:[],cameraViewMatrix:[],cameraWorldMatrix:[],normalGeometry:[],normalLocal:[],normalView:[],normalWorld:[],transformedNormalView:[],transformedNormalWorld:[],tangentGeometry:[],tangentLocal:[],tangentView:[],tangentWorld:[],transformedTangentView:[],transformedTangentWorld:[],bitangentGeometry:[],bitangentLocal:[],bitangentView:[],bitangentWorld:[],transformedBitangentView:[],transformedBitangentWorld:[],modelDirection:[],modelNormalMatrix:[],modelPosition:[],modelViewMatrix:[],modelViewPosition:[],modelWorldMatrix:[],objectDirection:["object3d"],objectNormalMatrix:["object3d"],objectPosition:["object3d"],objectViewMatrix:["object3d"],objectViewPosition:["object3d"],objectWorldMatrix:["object3d"],positionGeometry:[],positionLocal:[],positionView:[],positionViewDirection:[],positionWorld:[],positionWorldDirection:[],viewportBottomLeft:[],viewportBottomRight:[],viewportCoordinate:[],viewportResolution:[],viewportTopLeft:[],viewportTopRight:[],matcapUV:[],pointUV:[],attribute:["a"],faceDirection:[],frontFacing:[],add:["a","b"],div:["a","b"],mul:["a","b"],pow:["a","b"],remainder:["a","b"],sub:["a","b"],lessThan:["a","b"],lessThanEqual:["a","b"],greaterThan:["a","b"],greaterThanEqual:["a","b"],equal:["a","b"],and:["a","b"],or:["a","b"],bitAnd:["a","b"],bitOr:["a","b"],bitXor:["a","b"],shiftLeft:["a","b"],shiftRight:["a","b"],xor:["a","b"],abs:["a"],acos:["a"],asin:["a"],atan:["aS"],atan2:["a","b"],ceil:["a"],clamp:["a","b","c"],cos:["a"],cross:["a","b"],degrees:["a"],distance:["a","b"],dot:["a","b"],exp:["a"],faceForward:["a","b","c"],floor:["a"],fract:["a"],length:["a"],log:["a"],log2:["a"],max:["a","b"],min:["a","b"],mix:["a","b","c"],mod:["a","b"],negate:["a"],normalize:["a"],oneMinus:["a"],radians:["a"],reciprocal:["a"],reflect:["a","b"],refract:["a","b","c"],remap:["node","inLow","inHigh","outLow","outHigh"],round:["a"],saturate:["a"],sign:["a"],sin:["a"],smoothstep:["a","b","c"],sqrt:["a"],tan:["a"],transformDirection:["a","b"],dFdx:["a"],dFdy:["a"],step:["a","b"],EPSILON:[],INFINITY:[],burn:["blend","base"],difference:["blend","base"],dodge:["blend","base"],hue:["blend","base"],luminance:["blend","base"],overlay:["blend","base"],posterize:["blend","base"],saturation:["blend","base"],screen:["blend","base"],vibrance:["blend","base"],rotateUV:[],colorToDirection:[],directionToColor:[],checker:["uv"],range:["min","max"]};class P4e extends Sw{constructor(e,t,i,o,n){super(e,t,i,o,{removable:!0,output:1,...n}),this.node.anchor.width||this.setWidth(360);const s=lO(o.scoped),a=I4e[o.name],l=Object.entries(s.in).filter(c=>a?a.includes(c[0]):!0);for(const[c,u]of l){const d=Hf(o.scoped,c,u);d.setOutput(0),d.setObject({node:o,io:"in",field:c}),d.addEventListener("changeInput",()=>this.invalidate(c,"in")),this.add(d)}}}const D4e={Color:N4e,Vector2:s$,Vector3:a$,Vector4:l$,Boolean:C4e,Number:n$,String:L4e},B4e={float:n$,timerLocal:O4e,vec2:s$,vec3:a$,vec4:l$};function f$(r,e,t,i,o){let n=B4e[i.name];if(n)return new n(r,e,t,i,o);if(i.scoped.isInputNode){const s=kf(i.scoped.value);if(n=D4e[s],n)return new n(r,e,t,i,o)}return i.scoped instanceof Rs?new k4e(r,e,t,i,o):i.scoped instanceof is?new p$(r,e,t,i,o):i.scoped instanceof Pf?new h$(r,e,t,i,o):i.scoped instanceof dn?new R4e(r,e,t,i,o):new P4e(r,e,t,i,o)}const{global:z0}=b0;Lo.icons.unlink="ti ti-unlink";class m$ extends ao{constructor(t,i,o,n){super();Qe(this,"uuid",vl.generateUUID());Qe(this,"domElement");Qe(this,"canvas");Qe(this,"search",new Xj);Qe(this,"nodesContext");Qe(this,"object");Qe(this,"graph",null);Qe(this,"_eventForward");Qe(this,"_eventDrop");this.scene=t,this.renderer=i,this.history=n,this._eventForward=l=>{l.type==="graphModified"&&this.updateAllMaterialNodes(),this.dispatchEvent(l)};const s=document.createElement("flow"),a=new y4e;this.nodesContext=new Wj(a.canvas).setWidth(300),s.append(a.dom),a.dom.children[1].addEventListener("drop",l=>{this.onDrop(l)}),this.object=null,z0.set("THREE",IN),z0.set("TSL",b0),z0.set("scene",t),z0.set("renderer",i),z0.set("composer",o),this.canvas=a,this.domElement=s,this.initSearch(),this.initNodesContext(),this.initShortcuts(),this.setObject(t)}setSize(t,i){return this.canvas.setSize(t,i),this}centralizeNode(t,i){const o=this.canvas,n=t.dom.getBoundingClientRect(),s=o.width/2-o.scrollLeft-n.width,a=o.height/2-o.scrollTop-n.height;return i.anchor.x=s,i.anchor.y=a,t.setPosition(s,a),this}addWithProtoName(t){const i=dO(t);if(!i)throw console.error("not found"),"not found";return this.addWithProto(i)}addWithProto(t,i){const o=fDe(t.name);return i&&(o.uuid=i),this.addThreeNode(o,t.name,t.title||t.name,t.icon)}addThreeNode(t,i,o,n){t instanceof dn&&(t.object=this.object);const s=this.graph.newGraphNode(t,i);return this.addNode(s,i,o,n)}addNode(t,i,o,n,s=!0){const a=f$(o,this.history,this.graph,t,{icon:n});return a.rmCallback=()=>{this.history.push({tip:`Remove node[${t.scoped.uuid}]`,undo:()=>{this.addNode(t,i,o,n,!1)},redo:()=>{const l=F0[t.scoped.uuid];this.graph.remove(t),l.dispose()}})},this.graph.add(t),this.canvas.add(a),s&&this.centralizeNode(a,t),this.canvas.select(a),t}removeNode(t){this.canvas.nodes.find(i=>i.node===t).dispose(),this.graph.remove(t)}getEditorFromUuid(t){const i=this.graph.get(t);return this.canvas.nodes.find(o=>o.node.sc===i)}setScene(t){this.scene=t}setObject(t){this.object!==t&&(this.clear(),this.object=t,this.graph&&(this.graph.removeEventListener("graphAdded",this._eventForward),this.graph.removeEventListener("graphModified",this._eventForward),this.graph.removeEventListener("graphConnected",this._eventForward),this.graph.removeEventListener("graphRemoved",this._eventForward)),t.graph||(t.graph=new fO(t)),this.graph=t.graph,this.graph.nodes.length?this.loadGraph():this.createDefault(),this.graph.addEventListener("graphAdded",this._eventForward),this.graph.addEventListener("graphModified",this._eventForward),this.graph.addEventListener("graphConnected",this._eventForward),this.graph.addEventListener("graphRemoved",this._eventForward))}updateAllMaterialNodes(){for(const t of this.graph.nodes)t.scoped instanceof ai&&(t.scoped.needsUpdate=!0,t.scoped instanceof To&&(t.scoped.uniformsNeedUpdate=!0))}onDrop(t){const i=ww(t);if(i&&i.type==="dragNodeClass"){const o=dO(i.name);if(!o)throw console.error("not found"),"not found";const n=this.addWithProto(o);this.history.push({tip:`Add node [class=${i.name}]`,undo:()=>{this.removeNode(n)},redo:()=>{this.addNode(n,o.name,o.title||o.name,o.icon)}})}}clear(){this.graph&&(this.graph.isLocked=!0),this.canvas.clear(),this.graph&&(this.graph.isLocked=!1)}dispose(){this._eventForward&&(this.graph.removeEventListener("graphAdded",this._eventForward),this.graph.removeEventListener("graphModified",this._eventForward),this.graph.removeEventListener("graphConnected",this._eventForward),this.graph.removeEventListener("graphRemoved",this._eventForward),this._eventForward=null),this._eventDrop&&(this.canvas.dom.children[1].removeEventListener("drop",this._eventDrop),this._eventDrop=null)}createDefault(){this.addWithProtoName("object3DRef")}loadGraph(){for(const t of this.graph.nodes){const i=dO(t.name);if(!i)throw console.error("not found"),"not found";const o=f$(i.title||i.name,this.history,this.graph,t,{icon:i.icon});this.canvas.add(o)}for(const t of this.canvas.nodes){const i=t.node;if(i.scoped instanceof is&&i.scoped.prev){const o=i.scoped.prev,n=this.canvas.nodes.find(s=>s.node.scoped===o);if(!n)throw"not found";t.title.connect(n.title)}for(const o of t.elements){const n=o.getObject();if(!n||!n.field)continue;const s=i.bounds[n.field];if(!s)continue;const a=this.getElementFrom(s.node,s.field);if(!a)throw console.error("not found"),"not found";o.connect(a)}}}getElementFrom(t,i){const o=this.canvas.nodes.find(n=>n.node===t);if(o)for(const n of o.elements){const s=n.getObject();if(s&&s.field===i)return n}}initShortcuts(){document.addEventListener("keydown",t=>{t.target===document.body&&t.key==="Tab"&&(this.search.inputDOM.focus(),t.preventDefault(),t.stopImmediatePropagation())})}initSearch(){const t=o=>{if(o.children)for(const n of o.children)t(n);else{if(o.name=="object3DRef")return;{const n=new Vf(o.title||o.name);n.setIcon(`ti ti-${o.icon}`),n.addEventListener("complete",()=>{this.addWithProto(o)}),i.add(n),o.tags!==void 0&&i.setTag(n,o.tags)}}},i=new Xj;i.forceAutoComplete=!0,i.onFilter(async()=>{i.clear();for(const o of cO)t(o)}),i.onSubmit(()=>{i.currentFiltered!==null&&i.currentFiltered.button.dispatchEvent(new Event("complete"))}),this.search=i,this.domElement.append(i.dom)}async initNodesContext(){const t=this.nodesContext;t.onContext(()=>{this.canvas}),t.addEventListener("show",()=>{a(),s()});const i=[];let o=[],n=-1;const s=()=>requestAnimationFrame(()=>c.inputDOM.focus()),a=()=>{c.setValue("",!1);for(const h of i)h.setOpened(!1).setVisible(!0).setSelected(!1)},l=new bw;t.add(l);const c=new Gf().setPlaceHolder("Search...").setIcon("ti ti-list-search");c.inputDOM.addEventListener("keydown",h=>{const p=h.key;if(p==="ArrowDown"){const m=o[n];m&&m.setSelected(!1);const g=o[n=(n+1)%o.length];g&&g.setSelected(!0),h.preventDefault(),h.stopImmediatePropagation()}else if(p==="ArrowUp"){const m=o[n];m&&m.setSelected(!1);const g=o[n>0?--n:n=o.length-1];g&&g.setSelected(!0),h.preventDefault(),h.stopImmediatePropagation()}else p==="Enter"?(o[n]!==void 0?o[n].dom.click():t.hide(),h.preventDefault(),h.stopImmediatePropagation()):p==="Escape"&&t.hide()}),c.onChange(()=>{const h=c.getValue().toLowerCase();if(h.length===0)return a();o=[],n=0;for(const p of i){const m=p.getLabel().toLowerCase();p.setVisible(!1).setSelected(!1),m.indexOf(h)!==-1&&p.children.length===0&&o.push(p)}for(const p of o){let m=p;for(;m!==null;)m.setOpened(!0).setVisible(!0),m=m.parent}o[n]!==void 0&&o[n].setSelected(!0)});const u=new _4e;l.add(new Lo().setHeight(30).add(c)),l.add(new Lo().setHeight(200).add(u));const d=h=>{const p=new x4e(h.title||h.name);if(p.setIcon(`ti ti-${h.icon}`),h.children===void 0&&(p.isNodeClass=!0,p.onClick(async()=>{this.addWithProto(h)})),h.tip,i.push(p),h.children)for(const m of h.children){if(m.name=="object3DRef")continue;const g=d(m);p.add(g)}return p};for(const h of cO){const p=d(h);u.add(p)}}}const F4e=["width","height"],U4e=ne({__name:"main",props:{iso:{type:Boolean,default:!1}},setup(r){const e=V(),t=V(),i=V(3840),o=V(2160);function n(){var g,v;if(!e.value)return;const u=e.value.children[0],{width:d,height:h}=e.value.getBoundingClientRect(),p=Ge.project.world;let m=!1;p.width==="auto"&&p.height==="auto"?(i.value=d,o.value=h,u.style.height=`${h}px`):(m=p.width==="auto")||p.height==="auto"?(i.value=m?d:p.width,o.value=m?p.height:h,u.style.height=`${h}px`):(i.value=p.width,o.value=p.height,u.style.height=`${d*p.height/p.width}px`),u.style.width=`${d}px`,(g=Ge.world)==null||g.resize(i.value,o.value),(v=Ge.editor)==null||v.setSize(d,h)}ke(()=>br.state.isFloating,()=>{setTimeout(n,0)});function s(){n(),a()}function a(){Ge.world&&(Ge.world.setScene(Ge.project.scene),Ge.editor.setScene(Ge.project.scene))}ke(()=>br.state.isWorldView,()=>{a()});function l(){window.removeEventListener("monacoReady",l),Ge.editor=new m$(new Oc,Ge.world.renderer,Ge.world.composer,Ge.history),t.value.append(Ge.editor.domElement),n()}Rt(()=>{Ge.world||(Ge.world=new d4e(document.getElementById("canvas"),Ge.history),window.monaco?(Ge.editor=new m$(Ge.world.root,Ge.world.renderer,Ge.world.composer,Ge.history),t.value.append(Ge.editor.domElement)):window.addEventListener("monacoReady",l),Ge.world.run()),n(),window.addEventListener("resize",n),Ge.addEventListener("projectLoaded",s),Ge.addEventListener("worldSettingsModified",n),Ge.addEventListener("sceneChanged",a)}),Gn(()=>{window.removeEventListener("resize",n),Ge.removeEventListener("projectLoaded",s),Ge.removeEventListener("worldSettingsModified",n),Ge.removeEventListener("sceneChanged",a)});function c(u){const d=ww(u);if(!d||d.type!=="dragObjectClass")return;const h=Ge.project.addObjectByClass(d.name);Ge.history.push({tip:`Add object [class=${d.name}][uuid=${h.uuid}]`,undo:()=>{Ge.project.removeObject(h)},redo:()=>{Ge.project.addObject(h)}})}return(u,d)=>(A(),W("div",{ref_key:"root",ref:e,class:"wrap",style:{position:"relative",height:"100%"}},[X("canvas",{id:"canvas",class:"canvas",width:i.value,height:o.value,onDrop:c},null,40,F4e),At(X("div",{ref_key:"graph",ref:t,class:"graph"},null,512),[[nr,!f(br).state.isWorldView]])],512))}}),z4e=qc(U4e,[["__scopeId","data-v-216adc5b"]]),V4e={class:"panel"},G4e={key:0,class:"header"},H4e=ne({__name:"panel",props:{icon:{type:String,default:"icon-egg"},showHeader:{type:Boolean,default:!0}},setup(r){return(e,t)=>(A(),W("div",V4e,[r.showHeader?(A(),W("div",G4e,[X("i",{class:k(r.icon)},null,2),Oe(e.$slots,"header",{},void 0,!0)])):we("",!0),Oe(e.$slots,"default",{},void 0,!0)]))}}),g$=qc(H4e,[["__scopeId","data-v-bcc4cc0c"]]),j4e="3207849",$4e="egg",W4e="iconfont",q4e="icon-",X4e="",K4e=[{icon_id:"747746",name:"keyboard_light",font_class:"keyboard",unicode:"e7a3",unicode_decimal:59299},{icon_id:"162013",name:"\u77E2\u91CF\u56FE",font_class:"vector",unicode:"e756",unicode_decimal:59222},{icon_id:"588125",name:"\u8DEF\u7531",font_class:"router",unicode:"e6a6",unicode_decimal:59046},{icon_id:"826076",name:"web3",font_class:"web",unicode:"e6fd",unicode_decimal:59133},{icon_id:"924427",name:"left-right",font_class:"expand",unicode:"e8f7",unicode_decimal:59639},{icon_id:"5466093",name:"add",font_class:"add-circle",unicode:"e734",unicode_decimal:59188},{icon_id:"5897419",name:"undo",font_class:"undo",unicode:"e7c1",unicode_decimal:59329},{icon_id:"5897423",name:"redo",font_class:"redo",unicode:"e7c2",unicode_decimal:59330},{icon_id:"6231101",name:"close",font_class:"close-line",unicode:"e625",unicode_decimal:58917},{icon_id:"6275359",name:"\u5B9A\u4F4D",font_class:"locator",unicode:"e61f",unicode_decimal:58911},{icon_id:"6664200",name:"radio",font_class:"radio",unicode:"e627",unicode_decimal:58919},{icon_id:"6806277",name:"Design-Software",font_class:"design",unicode:"ea9e",unicode_decimal:60062},{icon_id:"7206010",name:"Alert",font_class:"alert",unicode:"e62e",unicode_decimal:58926},{icon_id:"7674856",name:"\u5C42\u7EA7",font_class:"float",unicode:"e70f",unicode_decimal:59151},{icon_id:"7683693",name:"delete",font_class:"delete",unicode:"e604",unicode_decimal:58884},{icon_id:"7683834",name:"new",font_class:"new",unicode:"e623",unicode_decimal:58915},{icon_id:"9229181",name:"index",font_class:"index",unicode:"e90f",unicode_decimal:59663},{icon_id:"10563018",name:"Tools",font_class:"toolbar",unicode:"e6c3",unicode_decimal:59075},{icon_id:"11982698",name:"Refresh, sync, reload",font_class:"reload",unicode:"e9d3",unicode_decimal:59859},{icon_id:"12907985",name:"search close",font_class:"close",unicode:"e60e",unicode_decimal:58894},{icon_id:"16553867",name:"test",font_class:"test",unicode:"e89e",unicode_decimal:59550},{icon_id:"16711160",name:"link",font_class:"link-hor",unicode:"e626",unicode_decimal:58918},{icon_id:"6807520",name:"Fireworks-1",font_class:"fireworks",unicode:"ec65",unicode_decimal:60517},{icon_id:"1197103",name:"video-camera",font_class:"video-camera",unicode:"e686",unicode_decimal:59014},{icon_id:"8494296",name:"Earth",font_class:"earth",unicode:"e60d",unicode_decimal:58893},{icon_id:"18986705",name:"Layer",font_class:"layer",unicode:"e8c9",unicode_decimal:59593},{icon_id:"432087",name:"Upload",font_class:"upload",unicode:"e828",unicode_decimal:59432},{icon_id:"12896516",name:"3D Model",font_class:"model3d",unicode:"e62a",unicode_decimal:58922},{icon_id:"7206140",name:"Mouse",font_class:"mouse",unicode:"e647",unicode_decimal:58951},{icon_id:"1226737",name:"Time",font_class:"time",unicode:"e6b8",unicode_decimal:59064},{icon_id:"9229176",name:"String",font_class:"string",unicode:"e90d",unicode_decimal:59661},{icon_id:"6807567",name:"Distance",font_class:"distance",unicode:"ec7c",unicode_decimal:60540},{icon_id:"7239686",name:"dash",font_class:"dash",unicode:"e724",unicode_decimal:59172},{icon_id:"11200411",name:"\u7EBF",font_class:"line",unicode:"e602",unicode_decimal:58882},{icon_id:"11981834",name:"mesh_grid",font_class:"mesh",unicode:"e97e",unicode_decimal:59774},{icon_id:"544408",name:"arrow-move",font_class:"arrowmove",unicode:"e6d8",unicode_decimal:59096},{icon_id:"608356",name:"\u7BAD\u5934",font_class:"stream",unicode:"e6af",unicode_decimal:59055},{icon_id:"1203091",name:"\u4EA4\u53C9_cross36",font_class:"vec2",unicode:"e607",unicode_decimal:58887},{icon_id:"29440467",name:"\u4EBA\u673A\u4EA4\u4E923D-\u4E09\u7EF4\u5750\u6807",font_class:"axis",unicode:"efda",unicode_decimal:61402},{icon_id:"1444787",name:"json",font_class:"json",unicode:"e7bd",unicode_decimal:59325},{icon_id:"1445431",name:"texture",font_class:"texture",unicode:"e8e2",unicode_decimal:59618},{icon_id:"5357319",name:"\u4EBA\u673A\u4EA4\u4E923D-\u4E09\u7EF4\u5750\u6807",font_class:"vec3",unicode:"e6e1",unicode_decimal:59105},{icon_id:"12342512",name:"Boolean",font_class:"boolean",unicode:"e639",unicode_decimal:58937},{icon_id:"13413008",name:"\u4E09\u7EF4\u5750\u6807",font_class:"xyz",unicode:"e622",unicode_decimal:58914},{icon_id:"17412150",name:"Color",font_class:"color",unicode:"e660",unicode_decimal:58976},{icon_id:"24341702",name:"flow chart 2-line",font_class:"octets",unicode:"e9ea",unicode_decimal:59882},{icon_id:"399081",name:"remove",font_class:"remove",unicode:"e6f4",unicode_decimal:59124},{icon_id:"401062",name:"remove",font_class:"trash",unicode:"e82a",unicode_decimal:59434},{icon_id:"762250",name:"Press-and-Drag",font_class:"drag",unicode:"e633",unicode_decimal:58931},{icon_id:"1704211",name:"arrows_drag_left_dashed",font_class:"drag-left",unicode:"e690",unicode_decimal:59024},{icon_id:"11494519",name:"scenes",font_class:"scene",unicode:"e79e",unicode_decimal:59294},{icon_id:"212502",name:"lights",font_class:"bulb",unicode:"e6de",unicode_decimal:59102},{icon_id:"1473266",name:"\u673A\u5668\u4EBA",font_class:"xbot",unicode:"e67b",unicode_decimal:59003},{icon_id:"1493286",name:"my_light",font_class:"human",unicode:"e7d5",unicode_decimal:59349},{icon_id:"6802116",name:"Basket-Ball",font_class:"sphere",unicode:"e726",unicode_decimal:59174},{icon_id:"7594407",name:"24gl-square",font_class:"plane",unicode:"ea98",unicode_decimal:60056},{icon_id:"12342509",name:"text",font_class:"text",unicode:"e638",unicode_decimal:58936},{icon_id:"18166094",name:"\u7ACB\u65B9\u4F53,\u6B63\u65B9\u5F62,\u5E94\u7528",font_class:"box",unicode:"e8b2",unicode_decimal:59570},{icon_id:"28528103",name:"\u7ACB\u65B9\u4F53,\u6B63\u65B9\u5F62,\u5E94\u7528",font_class:"unit",unicode:"efd6",unicode_decimal:61398},{icon_id:"29440468",name:"text",font_class:"text3d",unicode:"efdb",unicode_decimal:61403},{icon_id:"29382179",name:"\u7ACB\u65B9\u4F53,\u6B63\u65B9\u5F62,\u5E94\u7528",font_class:"cube",unicode:"efd9",unicode_decimal:61401},{icon_id:"28528107",name:"material",font_class:"material",unicode:"efd7",unicode_decimal:61399},{icon_id:"14679452",name:"waveform_path",font_class:"wave",unicode:"e6e7",unicode_decimal:59111},{icon_id:"3956072",name:"\u6750\u8D28\u6837\u5F0F\u5237",font_class:"brush",unicode:"e63f",unicode_decimal:58943},{icon_id:"12088900",name:"Speech Recognition",font_class:"recognition",unicode:"e99b",unicode_decimal:59803},{icon_id:"23816370",name:"speech",font_class:"recorder",unicode:"e65c",unicode_decimal:58972},{icon_id:"17412934",name:"Timer-1",font_class:"timer",unicode:"e70b",unicode_decimal:59147},{icon_id:"544311",name:"android-hand",font_class:"hand",unicode:"e678",unicode_decimal:59e3},{icon_id:"1503681",name:"number0",font_class:"number",unicode:"e645",unicode_decimal:58949},{icon_id:"15296119",name:"\u8282\u70B9\u6062\u590D",font_class:"reset",unicode:"e620",unicode_decimal:58912},{icon_id:"23701233",name:"Screen-Filled",font_class:"screen",unicode:"e641",unicode_decimal:58945},{icon_id:"27994433",name:"Component",font_class:"component",unicode:"e761",unicode_decimal:59233},{icon_id:"7685334",name:"variable",font_class:"variable",unicode:"e74e",unicode_decimal:59214},{icon_id:"2116652",name:"MINIMIZE",font_class:"minimize",unicode:"e6b7",unicode_decimal:59063},{icon_id:"8474313",name:"maximize",font_class:"maximize",unicode:"e6c0",unicode_decimal:59072},{icon_id:"217427",name:"group",font_class:"group",unicode:"e642",unicode_decimal:58946},{icon_id:"544677",name:"ios-infinite",font_class:"bigint",unicode:"e7df",unicode_decimal:59359},{icon_id:"1306362",name:"aislogo",font_class:"translate",unicode:"e648",unicode_decimal:58952},{icon_id:"6399996",name:"\u516C\u5F0F_\u666E\u901A",font_class:"math",unicode:"e603",unicode_decimal:58883},{icon_id:"8242724",name:"git",font_class:"logic",unicode:"e610",unicode_decimal:58896},{icon_id:"12763007",name:"messages",font_class:"message",unicode:"e644",unicode_decimal:58948},{icon_id:"16516758",name:"\u4EFB\u52A1\u6D41\u7A0B",font_class:"queue",unicode:"e6b6",unicode_decimal:59062},{icon_id:"14636674",name:"start",font_class:"start",unicode:"e670",unicode_decimal:58992},{icon_id:"2596781",name:"\u505C\u6B62",font_class:"stop",unicode:"e76b",unicode_decimal:59243},{icon_id:"160107",name:"Camera2",font_class:"camera",unicode:"e601",unicode_decimal:58881},{icon_id:"10140059",name:"screen-1",font_class:"screen-outline",unicode:"e6aa",unicode_decimal:59050},{icon_id:"11981757",name:"joystick",font_class:"joystick",unicode:"e978",unicode_decimal:59768},{icon_id:"848644",name:"time",font_class:"time-outline",unicode:"e63e",unicode_decimal:58942},{icon_id:"28604396",name:"Egg, dots",font_class:"chick",unicode:"efd8",unicode_decimal:61400},{icon_id:"10561000",name:"Egg, dots",font_class:"egg",unicode:"e646",unicode_decimal:58950},{icon_id:"11399251",name:"save",font_class:"save",unicode:"e600",unicode_decimal:58880},{icon_id:"68291",name:"dot1",font_class:"dot-mini",unicode:"e654",unicode_decimal:58964},{icon_id:"246144",name:"editor-line",font_class:"editor",unicode:"e684",unicode_decimal:59012},{icon_id:"602165",name:"arrow down",font_class:"arrow-dropright",unicode:"e624",unicode_decimal:58916},{icon_id:"645875",name:"LC_icon_desktop_line_2",font_class:"desktop",unicode:"e643",unicode_decimal:58947},{icon_id:"1154647",name:"uE700-audio",font_class:"audio",unicode:"e61b",unicode_decimal:58907},{icon_id:"1363841",name:"remove",font_class:"trash-outline",unicode:"e60c",unicode_decimal:58892},{icon_id:"1471598",name:"robot-img",font_class:"robot",unicode:"e61a",unicode_decimal:58906},{icon_id:"2861028",name:"Loading",font_class:"loading",unicode:"e65d",unicode_decimal:58973},{icon_id:"5758154",name:"plugin",font_class:"chip",unicode:"e66d",unicode_decimal:58989},{icon_id:"15838560",name:"add-bold",font_class:"add",unicode:"e685",unicode_decimal:59013},{icon_id:"20239308",name:"arrow down",font_class:"arrow-dropdown",unicode:"efd3",unicode_decimal:61395},{icon_id:"20239311",name:"arrow down",font_class:"arrow-dropleft",unicode:"efd4",unicode_decimal:61396},{icon_id:"20239353",name:"arrow down",font_class:"arrow-dropup",unicode:"efd5",unicode_decimal:61397}],Y4e={id:j4e,name:$4e,font_family:W4e,css_prefix_text:q4e,description:X4e,glyphs:K4e},J4e=["onDragstart","onDragend","onDrop"],Z4e=["onBlur"],Q4e=ne({__name:"objtree",setup(r){const e={value:"id",label:"name",children:"children"};function t(p,m){p.target.contentEditable=!1;const g=p.target.innerText;if(!/[a-z][0-9a-z]/i.test(g)){console.error(g);return}g!==m.name&&(m.name=g,m.isScene&&Ge.dispatchEvent({type:"sceneChanged",soure:null,scene:Ge.project.scene}),Ge.dispatchEvent({type:"objectModified",soure:null,objects:[m]}))}const i=V([]);function o({detail:p}){i.value=Ge.project.scene?[Ge.project.scene]:[]}function n(p){return Y4e.glyphs.find(m=>m.font_class===p)?`icon-${p}`:"icon-model3d"}function s(p){Ge.world&&(Ge.world.selectObject(p),br.state.isWorldView||Ge.editor.setObject(p))}function a(p,m){const g=ww(m);if(g){if(g.type==="dragObjectClass"){const v=Ge.project.addObjectByClass(g.name,p);Ge.history.push({tip:`Add object [class=${g.name}][uuid=${v.uuid}] to [uuid=${p.uuid}]`,undo:()=>{Ge.project.removeObject(v)},redo:()=>{Ge.project.addObject(v,p)}})}else if(g.type==="dragObject"){const v=g.object;if(v.uuid===p.uuid)return;const y=v.parent;p.add(v),Ge.dispatchEvent({type:"treeModified",soure:null,root:y}),Ge.dispatchEvent({type:"objectModified",soure:null,objects:[v,y,p]}),Ge.history.push({tip:`Move object[${v.uuid}] from [${y==null?void 0:y.uuid}] to [uuid=${p.uuid}]`,undo:()=>{y.add(v),Ge.dispatchEvent({type:"treeModified",soure:null,root:y}),Ge.dispatchEvent({type:"objectModified",soure:null,objects:[v,y,p]})},redo:()=>{p.add(v),Ge.dispatchEvent({type:"treeModified",soure:null,root:y}),Ge.dispatchEvent({type:"objectModified",soure:null,objects:[v,y,p]})}})}}}const l={offsetX:0,offsetY:0,timeStamp:0};function c(p,m,g){const v=g.timeStamp-l.timeStamp;l.offsetX===g.offsetX&&l.offsetY===g.offsetY&&v<=300?(br.state.isWorldView=!1,Ge.world.selected&&Ge.editor.setObject(Ge.world.selected),l.offsetX=0,l.offsetY=0,l.timeStamp=0):(l.offsetX=g.offsetX,l.offsetY=g.offsetY,l.timeStamp=g.timeStamp)}function u(p,m){B0(m,{type:"dragObject",soure:null,object:p})}function d(p,m){var g;(g=m.dataTransfer)!=null&&g.getData("selfRemove")&&h(p)}function h(p){if(p.isScene){if(!Ge.project.removeScene(p)){IE({title:Go("Error"),message:Go("It is the last scene!"),type:"error"});return}}else{const m=p.parent;if(!Ge.project.removeObject(p)){IE({title:Go("Error"),message:Go("Failed to remove object!"),type:"error"});return}Ge.history.push({tip:`Remove object [uuid=${p.uuid}]`,undo:()=>{Ge.project.addObject(p,m)},redo:()=>{Ge.project.removeObject(p)}}),p===Ge.world.selected&&Ge.world.selectObject()}}return Rt(()=>{o({}),Ge.addEventListener("projectLoaded",o),Ge.addEventListener("sceneChanged",o),Ge.addEventListener("treeModified",o)}),Gn(()=>{Ge.removeEventListener("projectLoaded",o),Ge.addEventListener("sceneChanged",o),Ge.removeEventListener("treeModified",o)}),(p,m)=>{const g=_t("el-tree-v2");return A(),_e(g,{height:400,data:i.value,props:e,"expand-on-click-node":!1,onCurrentChange:s,onNodeClick:c},{default:se(({node:v,data:y})=>[X("div",{class:"label-round",draggable:"true",showTrash:"true",onDragstart:b=>u(y,b),onDragend:b=>d(y,b),onDrop:b=>a(y,b)},[X("i",{class:k(n(y.type)),style:{"pointer-events":"none","margin-left":"-8px","margin-right":"6px"}},null,2),X("span",{class:k(["prefix",{"is-leaf":v.isLeaf}]),style:{"pointer-events":"none"}},ze(y.type),3)],40,J4e),X("span",{class:"text-ellipsis",ondblclick:"this.contentEditable=true; this.focus();",onBlur:b=>t(b,y)},ze(v.label||y.uuid),41,Z4e)]),_:1},8,["data"])}}}),eUe=qc(Q4e,[["__scopeId","data-v-f37ff00f"]]),tUe=r=>(Kw("data-v-2261adce"),r=r(),Yw(),r),rUe={class:"props"},iUe={class:"text-ellipsis prop-name"},oUe=tUe(()=>X("p",{style:{flex:"1 1 auto"}},null,-1)),nUe=ne({__name:"props",props:{data:{type:Object,default:{},required:!0},deco:{type:Object,default:{},required:!0}},emits:["change"],setup(r,{emit:e}){const t=r,i=su(t.data||{});function o(n){const s=t.deco[n],a=s==null?void 0:s.validate,l=s==null?void 0:s.transform,c=i.value[n],u=l?l(n,c):c;if(a&&!a(n,u))return console.warn(`Invalid value {${n}:${c}}!`),!1;e("change",n,u)}return(n,s)=>{const a=_t("el-input");return A(),W("div",rUe,[(A(!0),W(nt,null,jt(Object.keys(f(i)),l=>{var c;return A(),W("div",{key:l,class:"prop-item"},[X("label",iUe,ze(((c=r.deco[l])==null?void 0:c.label)||l),1),oUe,ee(a,{modelValue:f(i)[l],"onUpdate:modelValue":u=>f(i)[l]=u,class:"prop-value",size:"small",onChange:u=>o(l)},null,8,["modelValue","onUpdate:modelValue","onChange"])])}),128))])}}}),sUe=qc(nUe,[["__scopeId","data-v-2261adce"]]),aUe=ne({__name:"world",setup(r){const e=V({width:Ge.project.world.width,height:Ge.project.world.height}),t={width:{label:"Width",validate:(n,s)=>s&&(typeof s=="number"||s==="auto"),transform:(n,s)=>s==="auto"?s:Number.parseInt(s)},height:{label:"Height",validate:(n,s)=>s&&(typeof s=="number"||s==="auto"),transform:(n,s)=>s==="auto"?s:Number.parseInt(s)}};function i(n,s){e.value[n]=s,Ge.project.world[n]=s,Ge.dispatchEvent({type:"worldSettingsModified",soure:null,settings:{[n]:s}})}function o(){e.value.width=Ge.project.world.width,e.value.height=Ge.project.world.height}return Rt(()=>{Ge.addEventListener("projectLoaded",o)}),Gn(()=>{Ge.removeEventListener("projectLoaded",o)}),(n,s)=>(A(),_e(sUe,{data:e.value,deco:t,onChange:i},null,8,["data"]))}}),lUe={class:"prop-list"},cUe=["onDragstart"],uUe={class:"prop-slot"},dUe={class:"prop-name text-ellipsis",style:{flex:"1 1 auto"}},hUe=ne({__name:"list",props:{items:{type:Array,default:[]},itemWidth:{type:String,default:"160px"}},emits:["onItemDragstart"],setup(r){return(e,t)=>(A(),W("div",lUe,[(A(!0),W(nt,null,jt(r.items,i=>(A(),W("div",{key:i.name,class:"prop-item",draggable:"true",style:ct({width:r.itemWidth}),onDragstart:o=>e.$emit("onItemDragstart",i,o)},[X("div",uUe,[X("i",{class:k(i.icon)},null,2)]),X("label",dUe,ze(i.label||i.name),1)],44,cUe))),128))]))}}),UO=qc(hUe,[["__scopeId","data-v-a5bf5d35"]]),pUe=ne({__name:"scripts",setup(r){const e=[];for(const[i,o]of Object.entries(w0)){if(!o.group.startsWith("Scripts."))continue;const n=o.group.split(".").pop();e.push({name:i,label:n||i,icon:`ti ti-${o.icon||"brand-javascript"}`})}e.sort((i,o)=>i.label.localeCompare(o.label));function t(i,o){B0(o,{type:"dragNodeClass",soure:null,name:i.name})}return(i,o)=>(A(),_e(UO,{items:e,onOnItemDragstart:t}))}}),fUe=ne({__name:"materials",setup(r){const e=[];for(const[i,o]of Object.entries(w0)){if(!o.group.startsWith("Material."))continue;const n=o.group.split(".").pop();e.push({name:i,label:n||i,icon:`ti ti-${o.icon||"texture"}`})}e.sort((i,o)=>i.label.localeCompare(o.label));function t(i,o){B0(o,{type:"dragNodeClass",soure:null,name:i.name})}return(i,o)=>(A(),_e(UO,{items:e,onOnItemDragstart:t}))}}),mUe=ne({__name:"Math",setup(r){const e=[];for(const[i,o]of Object.entries(w0)){if(!o.group.startsWith("Math."))continue;const n=o.group.split(".").pop();e.push({name:i,label:n||i,icon:`ti ti-${o.icon||"math"}`})}e.sort((i,o)=>i.label.localeCompare(o.label));function t(i,o){B0(o,{type:"dragNodeClass",soure:null,name:i.name})}return(i,o)=>(A(),_e(UO,{items:e,onOnItemDragstart:t}))}}),gUe={class:"grid-list"},vUe=["onDragstart"],yUe={class:"grid-slot"},bUe={class:"grid-name text-ellipsis",style:{flex:"1 1 auto"}},xUe=ne({__name:"grid",props:{items:{type:Array,default:[]},itemWidth:{type:String,default:"160px"}},emits:["onItemDragstart"],setup(r){return(e,t)=>(A(),W("div",gUe,[(A(!0),W(nt,null,jt(r.items,i=>(A(),W("div",{key:i.name,class:"grid-item",draggable:"true",style:ct({width:r.itemWidth}),onDragstart:o=>e.$emit("onItemDragstart",i,o)},[X("div",yUe,[X("i",{class:k(i.icon)},null,2)]),X("label",bUe,ze(i.label||i.name),1)],44,vUe))),128))]))}}),_Ue=qc(xUe,[["__scopeId","data-v-2a6d9949"]]),wUe=ne({__name:"elements",setup(r){const e=[];for(const[i,o]of Object.entries(_0)){if(o.group.startsWith("Scenes."))continue;const n=o.group.split(".").pop();e.push({name:i,label:n||i,icon:`icon-${o.icon||"texture"}`})}e.sort((i,o)=>i.label.localeCompare(o.label));function t(i,o){B0(o,{type:"dragObjectClass",soure:null,name:i.name})}return(i,o)=>(A(),_e(_Ue,{items:e,onOnItemDragstart:t}))}}),SUe={class:"picker-label"},MUe=X("i",{class:"icon-model3d"},null,-1),TUe={style:{"margin-left":"0.2em"}},EUe={class:"picker-label"},CUe=X("i",{class:"icon-fireworks"},null,-1),NUe={style:{"margin-left":"0.2em"}},AUe=X("div",null,"Effect",-1),RUe={class:"picker-label"},LUe=X("i",{class:"icon-component"},null,-1),OUe={style:{"margin-left":"0.2em"}},kUe=X("div",null,"Resource",-1),IUe={class:"picker-label"},PUe=X("i",{class:"icon-earth"},null,-1),DUe={style:{"margin-left":"0.2em"}},BUe={class:"picker-label"},FUe=X("i",{class:"icon-brush"},null,-1),UUe={style:{"margin-left":"0.2em"}},zUe={class:"picker-label"},VUe=X("i",{class:"icon-json"},null,-1),GUe={style:{"margin-left":"0.2em"}},HUe={class:"picker-label"},jUe=X("i",{class:"icon-math"},null,-1),$Ue={style:{"margin-left":"0.2em"}},WUe=ne({__name:"panels",setup(r){return(e,t)=>{const i=_t("el-tab-pane"),o=_t("el-tabs");return A(),_e(o,{class:"picker",type:"border-card",style:{flex:"1 1 auto"}},{default:se(()=>[f(br).state.isWorldView?(A(),_e(i,{key:0},{label:se(()=>[X("div",SUe,[MUe,X("label",TUe,ze(f(Go)("Elements")),1)])]),default:se(()=>[ee(wUe)]),_:1})):we("",!0),f(br).state.isWorldView?(A(),_e(i,{key:1},{label:se(()=>[X("div",EUe,[CUe,X("label",NUe,ze(f(Go)("Effect")),1)])]),default:se(()=>[AUe]),_:1})):we("",!0),f(br).state.isWorldView?(A(),_e(i,{key:2},{label:se(()=>[X("div",RUe,[LUe,X("label",OUe,ze(f(Go)("Resource")),1)])]),default:se(()=>[kUe]),_:1})):we("",!0),f(br).state.isWorldView?(A(),_e(i,{key:3},{label:se(()=>[X("div",IUe,[PUe,X("label",DUe,ze(f(Go)("World")),1)])]),default:se(()=>[ee(aUe)]),_:1})):we("",!0),f(br).state.isWorldView?we("",!0):(A(),_e(i,{key:4},{label:se(()=>[X("div",BUe,[FUe,X("label",UUe,ze(f(Go)("Materials")),1)])]),default:se(()=>[ee(fUe)]),_:1})),f(br).state.isWorldView?we("",!0):(A(),_e(i,{key:5},{label:se(()=>[X("div",zUe,[VUe,X("label",GUe,ze(f(Go)("Scripts")),1)])]),default:se(()=>[ee(pUe)]),_:1})),f(br).state.isWorldView?we("",!0):(A(),_e(i,{key:6},{label:se(()=>[X("div",HUe,[jUe,X("label",$Ue,ze(f(Go)("Math")),1)])]),default:se(()=>[ee(mUe)]),_:1}))]),_:1})}}}),qUe=navigator;navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);const V0="ontouchstart"in window||qUe.maxTouchPoints,mo=document.createElement("div"),$i=document.createElement("i"),Mw=V0?45:30,Tw=V0?90:60;class XUe{constructor(e){Qe(this,"elementClick",null);Qe(this,"elementDragging",null);Qe(this,"elementOver",null);Qe(this,"dataTransfer",null);Qe(this,"isMoved",!1);this.dom=e,mo.isConnected||(mo.style.display="none",mo.style.position="absolute",mo.style.width=`${Mw}px`,mo.style.height=`${Mw}px`,mo.style.marginLeft=`-${Mw/2}px`,mo.style.marginTop=`-${Mw/2}px`,mo.style.borderRadius="50%",mo.style.backgroundColor="#888",mo.style.zIndex="9999",mo.style.pointerEvents="none",document.body.appendChild(mo),$i.style.display="none",$i.style.position="absolute",$i.style.width=`${Tw}px`,$i.style.height=`${Tw}px`,$i.style.borderRadius="50%",$i.style.color="#fff",$i.style.fontSize=`${Tw*2/3}px`,$i.style.backgroundColor="#F56C6C",$i.style.lineHeight=`${Tw}px`,$i.style.textAlign="center",$i.style.zIndex="9998",$i.classList.toggle("trash"),$i.classList.toggle("icon-trash"),$i.ondrop=n=>{n.dataTransfer&&n.dataTransfer.setData("selfRemove","true")},document.body.appendChild($i));const t=n=>{const s=document.elementFromPoint(n.clientX,n.clientY);if(this.elementClick=s,!(!s||s.getAttribute("draggable")!=="true"))return this.dataTransfer=null,this.elementDragging=s,this.isMoved=!1,V0||(e.addEventListener("pointerup",o),e.addEventListener("pointermove",i),e.setPointerCapture(n.pointerId)),n.preventDefault&&(n.preventDefault(),n.stopPropagation()),this.showCursor(n.clientX,n.clientY),!0};V0?(e.addEventListener("touchstart",n=>{t({clientX:n.pageX,clientY:n.pageY})&&(n.preventDefault(),n.stopPropagation())}),e.ontouchmove=n=>{i({clientX:n.pageX,clientY:n.pageY})&&(n.preventDefault(),n.stopPropagation())},e.ontouchend=n=>{o({clientX:n.pageX,clientY:n.pageY})&&(n.preventDefault(),n.stopPropagation())}):e.addEventListener("pointerdown",t);const i=n=>{if(!this.elementDragging)return;if(!this.isMoved){this.isMoved=!0,this.elementDragging.getAttribute("showTrash")&&this.showTrash(),this.dataTransfer=new DataTransfer;const l=new DragEvent("dragstart",{clientX:n.clientX,clientY:n.clientY,dataTransfer:this.dataTransfer});this.elementDragging.dispatchEvent(l)}const s=document.elementFromPoint(n.clientX,n.clientY);if(!s)return!0;if(s!==this.elementOver){if(this.elementOver){this.elementOver.setAttribute("isdragover","false");const l=new DragEvent("dragleave",{clientX:n.clientX,clientY:n.clientY,dataTransfer:this.dataTransfer});this.elementOver.dispatchEvent(l)}this.elementOver=s,this.elementOver.setAttribute("isdragover","true")}this.moveCursor(n.clientX,n.clientY);const a=new DragEvent("dragover",{clientX:n.clientX,clientY:n.clientY,dataTransfer:this.dataTransfer});return s==null||s.dispatchEvent(a),!0},o=n=>{const s=document.elementFromPoint(n.clientX,n.clientY);if(this.hideCursor(),!!this.elementDragging){if(!s)return this.isMoved=!1,this.elementDragging.dispatchEvent(new DragEvent("dragend",{clientX:n.clientX,clientY:n.clientY,dataTransfer:this.dataTransfer})),this.elementDragging=null,!0;if(this.isMoved&&s!==this.elementDragging){const a=new DragEvent("drop",{clientX:n.clientX,clientY:n.clientY,dataTransfer:this.dataTransfer});s.dispatchEvent(a)}else s.dispatchEvent(new Event("click"));return this.elementDragging.dispatchEvent(new DragEvent("dragend",{clientX:n.clientX,clientY:n.clientY,dataTransfer:this.dataTransfer})),this.elementDragging=null,this.elementOver&&(this.elementOver.removeAttribute("isdragover"),this.elementOver=null),V0||(e.removeEventListener("pointermove",i),e.removeEventListener("pointerup",o)),!0}}}showCursor(e,t){mo.style.display="block",mo.style.left=`${e}px`,mo.style.top=`${t}px`;const i=e<window.innerWidth/2?e+240:e-240;$i.style.left=`${i}px`,$i.style.top=`${t-$i.clientHeight/2}px`}showTrash(){$i.style.display="block"}moveCursor(e,t){mo.style.left=`${e}px`,mo.style.top=`${t}px`}hideCursor(){mo.style.display="none",$i.style.display="none"}}const v$=r=>(Kw("data-v-ce5a40f1"),r=r(),Yw(),r),KUe={class:"container"},YUe={class:"body-panels"},JUe={class:"hd-row"},ZUe=v$(()=>X("label",{class:"tip text-ellipsis"},"W: translate | E: rotate | R: scale | +/-: adjust size | Q: world/local | Shift: snap to grid | X: toggle X | Y: toggle Y | Z: toggle Z | Space: toggle enabled | Esc: reset",-1)),QUe=v$(()=>X("i",{class:"icon-video-camera",style:{"margin-left":"0.5em","margin-right":"0.5em"}},null,-1)),eze={style:{"align-items":"center",display:"flex","flex-direction":"row","justify-content":"center",margin:"0 4px"}},tze={class:"ctrl-bar rightside"},rze={class:"hd-row"},ize=ne({__name:"index",setup(r){const e=V(Ge.project.scene.name),t=V(Ge.project.scenes.map(p=>p.name)),i=V("Perspective"),o=V(["Perspective","Orthographic"]),n=V(!0);ke(e,()=>{br.state.isWorldView=!0,Ge.project.setScene(e.value),Ge.history.setScene(Ge.project.scene),c()}),ke(i,()=>{if(!Ge.world)return;const p=[Ge.world.cameraPersp,Ge.world.cameraOrtho,...Ge.project.cameras].find(m=>m.name===i.value);p&&Ge.world.setCamera(p)});function s(){Ge.project.newScene(),e.value=Ge.project.scene.name,t.value=Ge.project.scenes.map(p=>p.name),br.state.isWorldView=!0,a()}function a(){l(),c(),n.value=!0}function l(){e.value=Ge.project.scene.name,t.value=Ge.project.scenes.map(p=>p.name)}function c(){i.value="Perspective",o.value=["Perspective","Orthographic",...Ge.project.cameras.map(p=>p.name)],Ge.world&&Ge.world.setCamera(Ge.world.cameraPersp)}function u(){var p;n.value=!((p=Ge.world)!=null&&p.selected)}function d({objects:p}){for(const m of p)m.uuid===Ge.project.scene.uuid?l():m.isCamera&&c()}function h(){var p;(p=Ge.world)!=null&&p.selected&&(br.state.isWorldView=!br.state.isWorldView)}return Rt(()=>{Ge.dragable||(Ge.dragable=new XUe(document.body)),Ge.addEventListener("projectLoaded",a),Ge.addEventListener("sceneChanged",a),Ge.addEventListener("treeModified",c),Ge.addEventListener("objectModified",d),Ge.addEventListener("objectChanged",u),Ge.addKeyListener("e",h)}),Gn(()=>{Ge.removeEventListener("projectLoaded",a),Ge.removeEventListener("sceneChanged",a),Ge.removeEventListener("treeModified",c),Ge.removeEventListener("objectModified",d),Ge.removeEventListener("objectChanged",u),Ge.removeKeyListener("e",h)}),(p,m)=>{const g=_t("el-option"),v=_t("el-select"),y=_t("el-switch"),b=bh("loading");return At((A(),W("div",KUe,[ee(PDe),X("div",YUe,[ee(g$,{class:"frame main",icon:"icon-vec3",floating:f(br).state.isFloating},{header:se(()=>[X("div",JUe,[ZUe,ee(v,{modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=x=>i.value=x),placeholder:"Select",size:"small"},{default:se(()=>[(A(!0),W(nt,null,jt(o.value,x=>(A(),_e(g,{key:x,label:x,value:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),QUe,X("div",eze,[ee(y,{modelValue:f(br).state.isWorldView,"onUpdate:modelValue":m[1]||(m[1]=x=>f(br).state.isWorldView=x),size:"large",width:"60","inline-prompt":"","active-action-icon":f(Hte),"inactive-action-icon":f(Bie),style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff9900"},disabled:n.value},null,8,["modelValue","active-action-icon","inactive-action-icon","disabled"])])])]),default:se(()=>[ee(z4e)]),_:1},8,["floating"]),X("div",tze,[ee(g$,{class:"objtree frame",icon:"icon-logic"},{header:se(()=>[X("div",rze,[ee(v,{modelValue:e.value,"onUpdate:modelValue":m[2]||(m[2]=x=>e.value=x),placeholder:"Select",size:"small"},{default:se(()=>[(A(!0),W(nt,null,jt(t.value,x=>(A(),_e(g,{key:x,label:x,value:x},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),X("i",{class:"icon-add",style:{"margin-left":"0.5em","margin-right":"0.5em"},onClick:s})])]),default:se(()=>[ee(eUe)]),_:1}),ee(WUe,{class:"frame",style:{"border-radius":"6px",overflow:"hidden"}})])])])),[[b,f(br).state.isLoading]])}}}),oze=qc(ize,[["__scopeId","data-v-ce5a40f1"]]),nze=[{path:"/",redirect:"/index"},{path:"/index",component:oze}];window.setImmediate||(window.setImmediate=window.setTimeout),window.$||(window.$=(r,e)=>e.querySelector(r)),document.title="MASLIB";const lh=HI({render:()=>(A(),_e(_t("router-view")))});window.__app=lh,window.__store=br,lh.use(br);const sze="/",aze=y7(sze),zO=rq({history:aze,routes:nze});lh.use(zO),lh.use(GEe);async function lze(){await oj.beforeLaunch(lh,br,zO);const r=lh.mount("#app");window.__vue=r,r.$nextTick(()=>{oj.onLaunched(lh,br,zO)})}lze()})()});export default vze();
