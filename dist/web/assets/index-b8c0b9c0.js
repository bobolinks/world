var SXe=Object.defineProperty;var TXe=(Ea,Ar,Xo)=>Ar in Ea?SXe(Ea,Ar,{enumerable:!0,configurable:!0,writable:!0,value:Xo}):Ea[Ar]=Xo;var MXe=(Ea,Ar)=>()=>(Ar||Ea((Ar={exports:{}}).exports,Ar),Ar.exports);var vt=(Ea,Ar,Xo)=>(TXe(Ea,typeof Ar!="symbol"?Ar+"":Ar,Xo),Xo);var EXe=MXe((Wo,$o)=>{(async()=>{var Bp;(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))t(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&t(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function t(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();function Ea(r,e){const t=Object.create(null),i=r.split(",");for(let n=0;n<i.length;n++)t[i[n]]=!0;return e?n=>!!t[n.toLowerCase()]:n=>!!t[n]}const Ar={},Xo=[],Lr=()=>{},SK=()=>!1,TK=/^on[^a-z]/,h1=r=>TK.test(r),yT=r=>r.startsWith("onUpdate:"),zi=Object.assign,bT=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},MK=Object.prototype.hasOwnProperty,er=(r,e)=>MK.call(r,e),lt=Array.isArray,Gp=r=>Xg(r)==="[object Map]",p1=r=>Xg(r)==="[object Set]",Md=r=>Xg(r)==="[object Date]",Nt=r=>typeof r=="function",kt=r=>typeof r=="string",Wg=r=>typeof r=="symbol",Ht=r=>r!==null&&typeof r=="object",$g=r=>Ht(r)&&Nt(r.then)&&Nt(r.catch),rP=Object.prototype.toString,Xg=r=>rP.call(r),f1=r=>Xg(r).slice(8,-1),iP=r=>Xg(r)==="[object Object]",xT=r=>kt(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,m1=Ea(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),g1=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},EK=/-(\w)/g,qo=g1(r=>r.replace(EK,(e,t)=>t?t.toUpperCase():"")),CK=/\B([A-Z])/g,Kc=g1(r=>r.replace(CK,"-$1").toLowerCase()),qg=g1(r=>r.charAt(0).toUpperCase()+r.slice(1)),v1=g1(r=>r?`on${qg(r)}`:""),Kg=(r,e)=>!Object.is(r,e),y1=(r,e)=>{for(let t=0;t<r.length;t++)r[t](e)},b1=(r,e,t)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value:t})},wT=r=>{const e=parseFloat(r);return isNaN(e)?r:e},AK=r=>{const e=kt(r)?Number(r):NaN;return isNaN(e)?r:e};let nP;const _T=()=>nP||(nP=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function pt(r){if(lt(r)){const e={};for(let t=0;t<r.length;t++){const i=r[t],n=kt(i)?LK(i):pt(i);if(n)for(const s in n)e[s]=n[s]}return e}else if(kt(r)||Ht(r))return r}const NK=/;(?![^(]*\))/g,RK=/:([^]+)/,kK=/\/\*[^]*?\*\//g;function LK(r){const e={};return r.replace(kK,"").split(NK).forEach(t=>{if(t){const i=t.split(RK);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function j(r){let e="";if(kt(r))e=r;else if(lt(r))for(let t=0;t<r.length;t++){const i=j(r[t]);i&&(e+=i+" ")}else if(Ht(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}function Ca(r){if(!r)return null;let{class:e,style:t}=r;return e&&!kt(e)&&(r.class=j(e)),t&&(r.style=pt(t)),r}const OK="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",PK=Ea(OK);function sP(r){return!!r||r===""}function IK(r,e){if(r.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<r.length;i++)t=jp(r[i],e[i]);return t}function jp(r,e){if(r===e)return!0;let t=Md(r),i=Md(e);if(t||i)return t&&i?r.getTime()===e.getTime():!1;if(t=Wg(r),i=Wg(e),t||i)return r===e;if(t=lt(r),i=lt(e),t||i)return t&&i?IK(r,e):!1;if(t=Ht(r),i=Ht(e),t||i){if(!t||!i)return!1;const n=Object.keys(r).length,s=Object.keys(e).length;if(n!==s)return!1;for(const o in r){const a=r.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!jp(r[o],e[o]))return!1}}return String(r)===String(e)}function oP(r,e){return r.findIndex(t=>jp(t,e))}const $e=r=>kt(r)?r:r==null?"":lt(r)||Ht(r)&&(r.toString===rP||!Nt(r.toString))?JSON.stringify(r,aP,2):String(r),aP=(r,e)=>e&&e.__v_isRef?aP(r,e.value):Gp(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,n])=>(t[`${i} =>`]=n,t),{})}:p1(e)?{[`Set(${e.size})`]:[...e.values()]}:Ht(e)&&!lt(e)&&!iP(e)?String(e):e;let xo;class lP{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=xo,!e&&xo&&(this.index=(xo.scopes||(xo.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=xo;try{return xo=this,e()}finally{xo=t}}}on(){xo=this}off(){xo=this.parent}stop(e){if(this._active){let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0,this._active=!1}}}function cP(r){return new lP(r)}function DK(r,e=xo){e&&e.active&&e.effects.push(r)}function uP(){return xo}function dP(r){xo&&xo.cleanups.push(r)}const ST=r=>{const e=new Set(r);return e.w=0,e.n=0,e},hP=r=>(r.w&Yc)>0,pP=r=>(r.n&Yc)>0,UK=({deps:r})=>{if(r.length)for(let e=0;e<r.length;e++)r[e].w|=Yc},FK=r=>{const{deps:e}=r;if(e.length){let t=0;for(let i=0;i<e.length;i++){const n=e[i];hP(n)&&!pP(n)?n.delete(r):e[t++]=n,n.w&=~Yc,n.n&=~Yc}e.length=t}},x1=new WeakMap;let Yg=0,Yc=1;const TT=30;let Aa;const Ed=Symbol(""),MT=Symbol("");class ET{constructor(e,t=null,i){this.fn=e,this.scheduler=t,this.active=!0,this.deps=[],this.parent=void 0,DK(this,i)}run(){if(!this.active)return this.fn();let e=Aa,t=Zc;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=Aa,Aa=this,Zc=!0,Yc=1<<++Yg,Yg<=TT?UK(this):fP(this),this.fn()}finally{Yg<=TT&&FK(this),Yc=1<<--Yg,Aa=this.parent,Zc=t,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Aa===this?this.deferStop=!0:this.active&&(fP(this),this.onStop&&this.onStop(),this.active=!1)}}function fP(r){const{deps:e}=r;if(e.length){for(let t=0;t<e.length;t++)e[t].delete(r);e.length=0}}let Zc=!0;const mP=[];function Hp(){mP.push(Zc),Zc=!1}function Wp(){const r=mP.pop();Zc=r===void 0?!0:r}function Hs(r,e,t){if(Zc&&Aa){let i=x1.get(r);i||x1.set(r,i=new Map);let n=i.get(t);n||i.set(t,n=ST()),gP(n)}}function gP(r,e){let t=!1;Yg<=TT?pP(r)||(r.n|=Yc,t=!hP(r)):t=!r.has(Aa),t&&(r.add(Aa),Aa.deps.push(r))}function Xl(r,e,t,i,n,s){const o=x1.get(r);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&lt(r)){const l=Number(i);o.forEach((c,u)=>{(u==="length"||u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":lt(r)?xT(t)&&a.push(o.get("length")):(a.push(o.get(Ed)),Gp(r)&&a.push(o.get(MT)));break;case"delete":lt(r)||(a.push(o.get(Ed)),Gp(r)&&a.push(o.get(MT)));break;case"set":Gp(r)&&a.push(o.get(Ed));break}if(a.length===1)a[0]&&CT(a[0]);else{const l=[];for(const c of a)c&&l.push(...c);CT(ST(l))}}function CT(r,e){const t=lt(r)?r:[...r];for(const i of t)i.computed&&vP(i);for(const i of t)i.computed||vP(i)}function vP(r,e){(r!==Aa||r.allowRecurse)&&(r.scheduler?r.scheduler():r.run())}function BK(r,e){var t;return(t=x1.get(r))==null?void 0:t.get(e)}const zK=Ea("__proto__,__v_isRef,__isVue"),yP=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(Wg)),VK=AT(),GK=AT(!1,!0),jK=AT(!0),bP=HK();function HK(){const r={};return["includes","indexOf","lastIndexOf"].forEach(e=>{r[e]=function(...t){const i=Tr(this);for(let s=0,o=this.length;s<o;s++)Hs(i,"get",s+"");const n=i[e](...t);return n===-1||n===!1?i[e](...t.map(Tr)):n}}),["push","pop","shift","unshift","splice"].forEach(e=>{r[e]=function(...t){Hp();const i=Tr(this)[e].apply(this,t);return Wp(),i}}),r}function WK(r){const e=Tr(this);return Hs(e,"has",r),e.hasOwnProperty(r)}function AT(r=!1,e=!1){return function(t,i,n){if(i==="__v_isReactive")return!r;if(i==="__v_isReadonly")return r;if(i==="__v_isShallow")return e;if(i==="__v_raw"&&n===(r?e?aY:AP:e?CP:EP).get(t))return t;const s=lt(t);if(!r){if(s&&er(bP,i))return Reflect.get(bP,i,n);if(i==="hasOwnProperty")return WK}const o=Reflect.get(t,i,n);return(Wg(i)?yP.has(i):zK(i))||(r||Hs(t,"get",i),e)?o:zr(o)?s&&xT(i)?o:o.value:Ht(o)?r?$p(o):br(o):o}}const $K=xP(),XK=xP(!0);function xP(r=!1){return function(e,t,i,n){let s=e[t];if(qp(s)&&zr(s)&&!zr(i))return!1;if(!r&&(!C1(i)&&!qp(i)&&(s=Tr(s),i=Tr(i)),!lt(e)&&zr(s)&&!zr(i)))return s.value=i,!0;const o=lt(e)&&xT(t)?Number(t)<e.length:er(e,t),a=Reflect.set(e,t,i,n);return e===Tr(n)&&(o?Kg(i,s)&&Xl(e,"set",t,i):Xl(e,"add",t,i)),a}}function qK(r,e){const t=er(r,e);r[e];const i=Reflect.deleteProperty(r,e);return i&&t&&Xl(r,"delete",e,void 0),i}function KK(r,e){const t=Reflect.has(r,e);return(!Wg(e)||!yP.has(e))&&Hs(r,"has",e),t}function YK(r){return Hs(r,"iterate",lt(r)?"length":Ed),Reflect.ownKeys(r)}const wP={get:VK,set:$K,deleteProperty:qK,has:KK,ownKeys:YK},ZK={get:jK,set(r,e){return!0},deleteProperty(r,e){return!0}},JK=zi({},wP,{get:GK,set:XK}),NT=r=>r,w1=r=>Reflect.getPrototypeOf(r);function _1(r,e,t=!1,i=!1){r=r.__v_raw;const n=Tr(r),s=Tr(e);t||(e!==s&&Hs(n,"get",e),Hs(n,"get",s));const{has:o}=w1(n),a=i?NT:t?OT:Zg;if(o.call(n,e))return a(r.get(e));if(o.call(n,s))return a(r.get(s));r!==n&&r.get(e)}function S1(r,e=!1){const t=this.__v_raw,i=Tr(t),n=Tr(r);return e||(r!==n&&Hs(i,"has",r),Hs(i,"has",n)),r===n?t.has(r):t.has(r)||t.has(n)}function T1(r,e=!1){return r=r.__v_raw,!e&&Hs(Tr(r),"iterate",Ed),Reflect.get(r,"size",r)}function _P(r){r=Tr(r);const e=Tr(this);return w1(e).has.call(e,r)||(e.add(r),Xl(e,"add",r,r)),this}function SP(r,e){e=Tr(e);const t=Tr(this),{has:i,get:n}=w1(t);let s=i.call(t,r);s||(r=Tr(r),s=i.call(t,r));const o=n.call(t,r);return t.set(r,e),s?Kg(e,o)&&Xl(t,"set",r,e):Xl(t,"add",r,e),this}function TP(r){const e=Tr(this),{has:t,get:i}=w1(e);let n=t.call(e,r);n||(r=Tr(r),n=t.call(e,r)),i&&i.call(e,r);const s=e.delete(r);return n&&Xl(e,"delete",r,void 0),s}function MP(){const r=Tr(this),e=r.size!==0,t=r.clear();return e&&Xl(r,"clear",void 0,void 0),t}function M1(r,e){return function(t,i){const n=this,s=n.__v_raw,o=Tr(s),a=e?NT:r?OT:Zg;return!r&&Hs(o,"iterate",Ed),s.forEach((l,c)=>t.call(i,a(l),a(c),n))}}function E1(r,e,t){return function(...i){const n=this.__v_raw,s=Tr(n),o=Gp(s),a=r==="entries"||r===Symbol.iterator&&o,l=r==="keys"&&o,c=n[r](...i),u=t?NT:e?OT:Zg;return!e&&Hs(s,"iterate",l?MT:Ed),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Jc(r){return function(...e){return r==="delete"?!1:this}}function QK(){const r={get(n){return _1(this,n)},get size(){return T1(this)},has:S1,add:_P,set:SP,delete:TP,clear:MP,forEach:M1(!1,!1)},e={get(n){return _1(this,n,!1,!0)},get size(){return T1(this)},has:S1,add:_P,set:SP,delete:TP,clear:MP,forEach:M1(!1,!0)},t={get(n){return _1(this,n,!0)},get size(){return T1(this,!0)},has(n){return S1.call(this,n,!0)},add:Jc("add"),set:Jc("set"),delete:Jc("delete"),clear:Jc("clear"),forEach:M1(!0,!1)},i={get(n){return _1(this,n,!0,!0)},get size(){return T1(this,!0)},has(n){return S1.call(this,n,!0)},add:Jc("add"),set:Jc("set"),delete:Jc("delete"),clear:Jc("clear"),forEach:M1(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{r[n]=E1(n,!1,!1),t[n]=E1(n,!0,!1),e[n]=E1(n,!1,!0),i[n]=E1(n,!0,!0)}),[r,t,e,i]}const[eY,tY,rY,iY]=QK();function RT(r,e){const t=e?r?iY:rY:r?tY:eY;return(i,n,s)=>n==="__v_isReactive"?!r:n==="__v_isReadonly"?r:n==="__v_raw"?i:Reflect.get(er(t,n)&&n in i?t:i,n,s)}const nY={get:RT(!1,!1)},sY={get:RT(!1,!0)},oY={get:RT(!0,!1)},EP=new WeakMap,CP=new WeakMap,AP=new WeakMap,aY=new WeakMap;function lY(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function cY(r){return r.__v_skip||!Object.isExtensible(r)?0:lY(f1(r))}function br(r){return qp(r)?r:LT(r,!1,wP,nY,EP)}function kT(r){return LT(r,!1,JK,sY,CP)}function $p(r){return LT(r,!0,ZK,oY,AP)}function LT(r,e,t,i,n){if(!Ht(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const s=n.get(r);if(s)return s;const o=cY(r);if(o===0)return r;const a=new Proxy(r,o===2?i:t);return n.set(r,a),a}function Xp(r){return qp(r)?Xp(r.__v_raw):!!(r&&r.__v_isReactive)}function qp(r){return!!(r&&r.__v_isReadonly)}function C1(r){return!!(r&&r.__v_isShallow)}function NP(r){return Xp(r)||qp(r)}function Tr(r){const e=r&&r.__v_raw;return e?Tr(e):r}function Cd(r){return b1(r,"__v_skip",!0),r}const Zg=r=>Ht(r)?br(r):r,OT=r=>Ht(r)?$p(r):r;function RP(r){Zc&&Aa&&(r=Tr(r),gP(r.dep||(r.dep=ST())))}function PT(r,e){r=Tr(r);const t=r.dep;t&&CT(t)}function zr(r){return!!(r&&r.__v_isRef===!0)}function W(r){return kP(r,!1)}function Vr(r){return kP(r,!0)}function kP(r,e){return zr(r)?r:new uY(r,e)}class uY{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:Tr(e),this._value=t?e:Zg(e)}get value(){return RP(this),this._value}set value(e){const t=this.__v_isShallow||C1(e)||qp(e);e=t?e:Tr(e),Kg(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Zg(e),PT(this))}}function Jg(r){PT(r)}function y(r){return zr(r)?r.value:r}const dY={get:(r,e,t)=>y(Reflect.get(r,e,t)),set:(r,e,t,i)=>{const n=r[e];return zr(n)&&!zr(t)?(n.value=t,!0):Reflect.set(r,e,t,i)}};function LP(r){return Xp(r)?r:new Proxy(r,dY)}function fn(r){const e=lt(r)?new Array(r.length):{};for(const t in r)e[t]=OP(r,t);return e}class hY{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return BK(Tr(this._object),this._key)}}class pY{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function ai(r,e,t){return zr(r)?r:Nt(r)?new pY(r):Ht(r)&&arguments.length>1?OP(r,e,t):W(r)}function OP(r,e,t){const i=r[e];return zr(i)?i:new hY(r,e,t)}class fY{constructor(e,t,i,n){this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this._dirty=!0,this.effect=new ET(e,()=>{this._dirty||(this._dirty=!0,PT(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const e=Tr(this);return RP(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}function PP(r,e,t=!1){let i,n;const s=Nt(r);return s?(i=r,n=Lr):(i=r.get,n=r.set),new fY(i,n,s||!n,t)}function mY(r,...e){}function Qc(r,e,t,i){let n;try{n=i?r(...i):r()}catch(s){A1(s,e,t)}return n}function Ko(r,e,t,i){if(Nt(r)){const s=Qc(r,e,t,i);return s&&$g(s)&&s.catch(o=>{A1(o,e,t)}),s}const n=[];for(let s=0;s<r.length;s++)n.push(Ko(r[s],e,t,i));return n}function A1(r,e,t,i=!0){const n=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=t;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](r,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){Qc(l,null,10,[r,o,a]);return}}gY(r,t,n,i)}function gY(r,e,t,i=!0){console.error(r)}let Qg=!1,IT=!1;const ls=[];let hl=0;const Kp=[];let ql=null,Ad=0;const IP=Promise.resolve();let DT=null;function ht(r){const e=DT||IP;return r?e.then(this?r.bind(this):r):e}function vY(r){let e=hl+1,t=ls.length;for(;e<t;){const i=e+t>>>1;ev(ls[i])<r?e=i+1:t=i}return e}function UT(r){(!ls.length||!ls.includes(r,Qg&&r.allowRecurse?hl+1:hl))&&(r.id==null?ls.push(r):ls.splice(vY(r.id),0,r),DP())}function DP(){!Qg&&!IT&&(IT=!0,DT=IP.then(BP))}function yY(r){const e=ls.indexOf(r);e>hl&&ls.splice(e,1)}function bY(r){lt(r)?Kp.push(...r):(!ql||!ql.includes(r,r.allowRecurse?Ad+1:Ad))&&Kp.push(r),DP()}function UP(r,e=Qg?hl+1:0){for(;e<ls.length;e++){const t=ls[e];t&&t.pre&&(ls.splice(e,1),e--,t())}}function FP(r){if(Kp.length){const e=[...new Set(Kp)];if(Kp.length=0,ql){ql.push(...e);return}for(ql=e,ql.sort((t,i)=>ev(t)-ev(i)),Ad=0;Ad<ql.length;Ad++)ql[Ad]();ql=null,Ad=0}}const ev=r=>r.id==null?1/0:r.id,xY=(r,e)=>{const t=ev(r)-ev(e);if(t===0){if(r.pre&&!e.pre)return-1;if(e.pre&&!r.pre)return 1}return t};function BP(r){IT=!1,Qg=!0,ls.sort(xY);const e=Lr;try{for(hl=0;hl<ls.length;hl++){const t=ls[hl];t&&t.active!==!1&&Qc(t,null,14)}}finally{hl=0,ls.length=0,FP(),Qg=!1,DT=null,(ls.length||Kp.length)&&BP()}}function wY(r,e,...t){if(r.isUnmounted)return;const i=r.vnode.props||Ar;let n=t;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in i){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:h}=i[u]||Ar;h&&(n=t.map(p=>kt(p)?p.trim():p)),d&&(n=t.map(wT))}let a,l=i[a=v1(e)]||i[a=v1(qo(e))];!l&&s&&(l=i[a=v1(Kc(e))]),l&&Ko(l,r,6,n);const c=i[a+"Once"];if(c){if(!r.emitted)r.emitted={};else if(r.emitted[a])return;r.emitted[a]=!0,Ko(c,r,6,n)}}function zP(r,e,t=!1){const i=e.emitsCache,n=i.get(r);if(n!==void 0)return n;const s=r.emits;let o={},a=!1;if(!Nt(r)){const l=c=>{const u=zP(c,e,!0);u&&(a=!0,zi(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),r.extends&&l(r.extends),r.mixins&&r.mixins.forEach(l)}return!s&&!a?(Ht(r)&&i.set(r,null),null):(lt(s)?s.forEach(l=>o[l]=null):zi(o,s),Ht(r)&&i.set(r,o),o)}function N1(r,e){return!r||!h1(e)?!1:(e=e.slice(2).replace(/Once$/,""),er(r,e[0].toLowerCase()+e.slice(1))||er(r,Kc(e))||er(r,e))}let Vn=null,R1=null;function k1(r){const e=Vn;return Vn=r,R1=r&&r.type.__scopeId||null,e}function tv(r){R1=r}function rv(){R1=null}function me(r,e=Vn,t){if(!e||r._n)return r;const i=(...n)=>{i._d&&vI(-1);const s=k1(e);let o;try{o=r(...n)}finally{k1(s),i._d&&vI(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function FT(r){const{type:e,vnode:t,proxy:i,withProxy:n,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:h,setupState:p,ctx:f,inheritAttrs:m}=r;let g,v;const x=k1(r);try{if(t.shapeFlag&4){const w=n||i;g=pl(u.call(w,w,d,s,p,h,f)),v=l}else{const w=e;g=pl(w.length>1?w(s,{attrs:l,slots:a,emit:c}):w(s,null)),v=e.props?l:_Y(l)}}catch(w){uv.length=0,A1(w,r,1),g=ue(Ss)}let b=g;if(v&&m!==!1){const w=Object.keys(v),{shapeFlag:_}=b;w.length&&_&7&&(o&&w.some(yT)&&(v=SY(v,o)),b=Jl(b,v))}return t.dirs&&(b=Jl(b),b.dirs=b.dirs?b.dirs.concat(t.dirs):t.dirs),t.transition&&(b.transition=t.transition),g=b,k1(x),g}const _Y=r=>{let e;for(const t in r)(t==="class"||t==="style"||h1(t))&&((e||(e={}))[t]=r[t]);return e},SY=(r,e)=>{const t={};for(const i in r)(!yT(i)||!(i.slice(9)in e))&&(t[i]=r[i]);return t};function TY(r,e,t){const{props:i,children:n,component:s}=r,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?VP(i,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==i[h]&&!N1(c,h))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?VP(i,o,c):!0:!!o;return!1}function VP(r,e,t){const i=Object.keys(e);if(i.length!==Object.keys(r).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(e[s]!==r[s]&&!N1(t,s))return!0}return!1}function MY({vnode:r,parent:e},t){for(;e&&e.subTree===r;)(r=e.vnode).el=t,e=e.parent}const EY=r=>r.__isSuspense;function CY(r,e){e&&e.pendingBranch?lt(r)?e.effects.push(...r):e.effects.push(r):bY(r)}function wo(r,e){return BT(r,null,e)}const L1={};function Ve(r,e,t){return BT(r,e,t)}function BT(r,e,{immediate:t,deep:i,flush:n,onTrack:s,onTrigger:o}=Ar){var a;const l=uP()===((a=An)==null?void 0:a.scope)?An:null;let c,u=!1,d=!1;if(zr(r)?(c=()=>r.value,u=C1(r)):Xp(r)?(c=()=>r,i=!0):lt(r)?(d=!0,u=r.some(w=>Xp(w)||C1(w)),c=()=>r.map(w=>{if(zr(w))return w.value;if(Xp(w))return Nd(w);if(Nt(w))return Qc(w,l,2)})):Nt(r)?e?c=()=>Qc(r,l,2):c=()=>{if(!(l&&l.isUnmounted))return h&&h(),Ko(r,l,3,[p])}:c=Lr,e&&i){const w=c;c=()=>Nd(w())}let h,p=w=>{h=x.onStop=()=>{Qc(w,l,4)}},f;if(hv)if(p=Lr,e?t&&Ko(e,l,3,[c(),d?[]:void 0,p]):c(),n==="sync"){const w=mZ();f=w.__watcherHandles||(w.__watcherHandles=[])}else return Lr;let m=d?new Array(r.length).fill(L1):L1;const g=()=>{if(x.active)if(e){const w=x.run();(i||u||(d?w.some((_,S)=>Kg(_,m[S])):Kg(w,m)))&&(h&&h(),Ko(e,l,3,[w,m===L1?void 0:d&&m[0]===L1?[]:m,p]),m=w)}else x.run()};g.allowRecurse=!!e;let v;n==="sync"?v=g:n==="post"?v=()=>Ws(g,l&&l.suspense):(g.pre=!0,l&&(g.id=l.uid),v=()=>UT(g));const x=new ET(c,v);e?t?g():m=x.run():n==="post"?Ws(x.run.bind(x),l&&l.suspense):x.run();const b=()=>{x.stop(),l&&l.scope&&bT(l.scope.effects,x)};return f&&f.push(b),b}function AY(r,e,t){const i=this.proxy,n=kt(r)?r.includes(".")?GP(i,r):()=>i[r]:r.bind(i,i);let s;Nt(e)?s=e:(s=e.handler,t=e);const o=An;Qp(this);const a=BT(n,s.bind(i),t);return o?Qp(o):Pd(),a}function GP(r,e){const t=e.split(".");return()=>{let i=r;for(let n=0;n<t.length&&i;n++)i=i[t[n]];return i}}function Nd(r,e){if(!Ht(r)||r.__v_skip||(e=e||new Set,e.has(r)))return r;if(e.add(r),zr(r))Nd(r.value,e);else if(lt(r))for(let t=0;t<r.length;t++)Nd(r[t],e);else if(p1(r)||Gp(r))r.forEach(t=>{Nd(t,e)});else if(iP(r))for(const t in r)Nd(r[t],e);return r}function It(r,e){const t=Vn;if(t===null)return r;const i=G1(t)||t.proxy,n=r.dirs||(r.dirs=[]);for(let s=0;s<e.length;s++){let[o,a,l,c=Ar]=e[s];o&&(Nt(o)&&(o={mounted:o,updated:o}),o.deep&&Nd(a),n.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:c}))}return r}function Rd(r,e,t,i){const n=r.dirs,s=e&&e.dirs;for(let o=0;o<n.length;o++){const a=n[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Hp(),Ko(l,t,8,[r.el,a,r,e]),Wp())}}function jP(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Et(()=>{r.isMounted=!0}),Zr(()=>{r.isUnmounting=!0}),r}const Yo=[Function,Array],HP={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Yo,onEnter:Yo,onAfterEnter:Yo,onEnterCancelled:Yo,onBeforeLeave:Yo,onLeave:Yo,onAfterLeave:Yo,onLeaveCancelled:Yo,onBeforeAppear:Yo,onAppear:Yo,onAfterAppear:Yo,onAppearCancelled:Yo},NY={name:"BaseTransition",props:HP,setup(r,{slots:e}){const t=Dt(),i=jP();let n;return()=>{const s=e.default&&VT(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){for(const m of s)if(m.type!==Ss){o=m;break}}const a=Tr(r),{mode:l}=a;if(i.isLeaving)return zT(o);const c=$P(o);if(!c)return zT(o);const u=iv(c,a,i,t);nv(c,u);const d=t.subTree,h=d&&$P(d);let p=!1;const{getTransitionKey:f}=c.type;if(f){const m=f();n===void 0?n=m:m!==n&&(n=m,p=!0)}if(h&&h.type!==Ss&&(!Od(c,h)||p)){const m=iv(h,a,i,t);if(nv(h,m),l==="out-in")return i.isLeaving=!0,m.afterLeave=()=>{i.isLeaving=!1,t.update.active!==!1&&t.update()},zT(o);l==="in-out"&&c.type!==Ss&&(m.delayLeave=(g,v,x)=>{const b=WP(i,h);b[String(h.key)]=h,g._leaveCb=()=>{v(),g._leaveCb=void 0,delete u.delayedLeave},u.delayedLeave=x})}return o}}},RY=NY;function WP(r,e){const{leavingVNodes:t}=r;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function iv(r,e,t,i){const{appear:n,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:h,onAfterLeave:p,onLeaveCancelled:f,onBeforeAppear:m,onAppear:g,onAfterAppear:v,onAppearCancelled:x}=e,b=String(r.key),w=WP(t,r),_=(M,E)=>{M&&Ko(M,i,9,E)},S=(M,E)=>{const C=E[1];_(M,E),lt(M)?M.every(P=>P.length<=1)&&C():M.length<=1&&C()},T={mode:s,persisted:o,beforeEnter(M){let E=a;if(!t.isMounted)if(n)E=m||a;else return;M._leaveCb&&M._leaveCb(!0);const C=w[b];C&&Od(r,C)&&C.el._leaveCb&&C.el._leaveCb(),_(E,[M])},enter(M){let E=l,C=c,P=u;if(!t.isMounted)if(n)E=g||l,C=v||c,P=x||u;else return;let A=!1;const N=M._enterCb=R=>{A||(A=!0,R?_(P,[M]):_(C,[M]),T.delayedLeave&&T.delayedLeave(),M._enterCb=void 0)};E?S(E,[M,N]):N()},leave(M,E){const C=String(r.key);if(M._enterCb&&M._enterCb(!0),t.isUnmounting)return E();_(d,[M]);let P=!1;const A=M._leaveCb=N=>{P||(P=!0,E(),N?_(f,[M]):_(p,[M]),M._leaveCb=void 0,w[C]===r&&delete w[C])};w[C]=r,h?S(h,[M,A]):A()},clone(M){return iv(M,e,t,i)}};return T}function zT(r){if(O1(r))return r=Jl(r),r.children=null,r}function $P(r){return O1(r)?r.children?r.children[0]:void 0:r}function nv(r,e){r.shapeFlag&6&&r.component?nv(r.component.subTree,e):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function VT(r,e=!1,t){let i=[],n=0;for(let s=0;s<r.length;s++){let o=r[s];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:s);o.type===ct?(o.patchFlag&128&&n++,i=i.concat(VT(o.children,e,a))):(e||o.type!==Ss)&&i.push(a!=null?Jl(o,{key:a}):o)}if(n>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}function xe(r,e){return Nt(r)?(()=>zi({name:r.name},e,{setup:r}))():r}const sv=r=>!!r.type.__asyncLoader,O1=r=>r.type.__isKeepAlive;function kY(r,e){qP(r,"a",e)}function XP(r,e){qP(r,"da",e)}function qP(r,e,t=An){const i=r.__wdc||(r.__wdc=()=>{let n=t;for(;n;){if(n.isDeactivated)return;n=n.parent}return r()});if(P1(e,i,t),t){let n=t.parent;for(;n&&n.parent;)O1(n.parent.vnode)&&LY(i,e,t,n),n=n.parent}}function LY(r,e,t,i){const n=P1(e,r,i,!0);ki(()=>{bT(i[e],n)},t)}function P1(r,e,t=An,i=!1){if(t){const n=t[r]||(t[r]=[]),s=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Hp(),Qp(t);const a=Ko(e,t,r,o);return Pd(),Wp(),a});return i?n.unshift(s):n.push(s),s}}const Kl=r=>(e,t=An)=>(!hv||r==="sp")&&P1(r,(...i)=>e(...i),t),I1=Kl("bm"),Et=Kl("m"),KP=Kl("bu"),Yl=Kl("u"),Zr=Kl("bum"),ki=Kl("um"),OY=Kl("sp"),PY=Kl("rtg"),IY=Kl("rtc");function DY(r,e=An){P1("ec",r,e)}const GT="components",UY="directives";function gt(r,e){return jT(GT,r,!0,e)||r}const YP=Symbol.for("v-ndc");function Xt(r){return kt(r)?jT(GT,r,!1)||r:r||YP}function Yp(r){return jT(UY,r)}function jT(r,e,t=!0,i=!1){const n=Vn||An;if(n){const s=n.type;if(r===GT){const a=hZ(s,!1);if(a&&(a===e||a===qo(e)||a===qg(qo(e))))return s}const o=ZP(n[r]||s[r],e)||ZP(n.appContext[r],e);return!o&&i?s:o}}function ZP(r,e){return r&&(r[e]||r[qo(e)]||r[qg(qo(e))])}function Ut(r,e,t,i){let n;const s=t&&t[i];if(lt(r)||kt(r)){n=new Array(r.length);for(let o=0,a=r.length;o<a;o++)n[o]=e(r[o],o,void 0,s&&s[o])}else if(typeof r=="number"){n=new Array(r);for(let o=0;o<r;o++)n[o]=e(o+1,o,void 0,s&&s[o])}else if(Ht(r))if(r[Symbol.iterator])n=Array.from(r,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(r);n=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];n[a]=e(r[c],c,a,s&&s[a])}}else n=[];return t&&(t[i]=n),n}function Zl(r,e){for(let t=0;t<e.length;t++){const i=e[t];if(lt(i))for(let n=0;n<i.length;n++)r[i[n].name]=i[n].fn;else i&&(r[i.name]=i.key?(...n)=>{const s=i.fn(...n);return s&&(s.key=i.key),s}:i.fn)}return r}function ze(r,e,t={},i,n){if(Vn.isCE||Vn.parent&&sv(Vn.parent)&&Vn.parent.isCE)return e!=="default"&&(t.name=e),ue("slot",t,i&&i());let s=r[e];s&&s._c&&(s._d=!1),D();const o=s&&JP(s(t)),a=Ae(ct,{key:t.key||o&&o.key||`_${e}`},o||(i?i():[]),o&&r._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function JP(r){return r.some(e=>ei(e)?!(e.type===Ss||e.type===ct&&!JP(e.children)):!0)?r:null}function FY(r,e){const t={};for(const i in r)t[e&&/[A-Z]/.test(i)?`on:${i}`:v1(i)]=r[i];return t}const HT=r=>r?wI(r)?G1(r)||r.proxy:HT(r.parent):null,ov=zi(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>HT(r.parent),$root:r=>HT(r.root),$emit:r=>r.emit,$options:r=>XT(r),$forceUpdate:r=>r.f||(r.f=()=>UT(r.update)),$nextTick:r=>r.n||(r.n=ht.bind(r.proxy)),$watch:r=>AY.bind(r)}),WT=(r,e)=>r!==Ar&&!r.__isScriptSetup&&er(r,e),BY={get({_:r},e){const{ctx:t,setupState:i,data:n,props:s,accessCache:o,type:a,appContext:l}=r;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return i[e];case 2:return n[e];case 4:return t[e];case 3:return s[e]}else{if(WT(i,e))return o[e]=1,i[e];if(n!==Ar&&er(n,e))return o[e]=2,n[e];if((c=r.propsOptions[0])&&er(c,e))return o[e]=3,s[e];if(t!==Ar&&er(t,e))return o[e]=4,t[e];$T&&(o[e]=0)}}const u=ov[e];let d,h;if(u)return e==="$attrs"&&Hs(r,"get",e),u(r);if((d=a.__cssModules)&&(d=d[e]))return d;if(t!==Ar&&er(t,e))return o[e]=4,t[e];if(h=l.config.globalProperties,er(h,e))return h[e]},set({_:r},e,t){const{data:i,setupState:n,ctx:s}=r;return WT(n,e)?(n[e]=t,!0):i!==Ar&&er(i,e)?(i[e]=t,!0):er(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(s[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:i,appContext:n,propsOptions:s}},o){let a;return!!t[o]||r!==Ar&&er(r,o)||WT(e,o)||(a=s[0])&&er(a,o)||er(i,o)||er(ov,o)||er(n.config.globalProperties,o)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:er(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}};function Gn(){return QP().slots}function kd(){return QP().attrs}function QP(){const r=Dt();return r.setupContext||(r.setupContext=MI(r))}function eI(r){return lt(r)?r.reduce((e,t)=>(e[t]=null,e),{}):r}let $T=!0;function zY(r){const e=XT(r),t=r.proxy,i=r.ctx;$T=!1,e.beforeCreate&&tI(e.beforeCreate,r,"bc");const{data:n,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:f,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:x,destroyed:b,unmounted:w,render:_,renderTracked:S,renderTriggered:T,errorCaptured:M,serverPrefetch:E,expose:C,inheritAttrs:P,components:A,directives:N,filters:R}=e;if(c&&VY(c,i,null),o)for(const B in o){const k=o[B];Nt(k)&&(i[B]=k.bind(t))}if(n){const B=n.call(t,t);Ht(B)&&(r.data=br(B))}if($T=!0,s)for(const B in s){const k=s[B],z=Nt(k)?k.bind(t,t):Nt(k.get)?k.get.bind(t,t):Lr,O=!Nt(k)&&Nt(k.set)?k.set.bind(t):Lr,V=I({get:z,set:O});Object.defineProperty(i,B,{enumerable:!0,configurable:!0,get:()=>V.value,set:U=>V.value=U})}if(a)for(const B in a)rI(a[B],i,t,B);if(l){const B=Nt(l)?l.call(t):l;Reflect.ownKeys(B).forEach(k=>{Yt(k,B[k])})}u&&tI(u,r,"c");function F(B,k){lt(k)?k.forEach(z=>B(z.bind(t))):k&&B(k.bind(t))}if(F(I1,d),F(Et,h),F(KP,p),F(Yl,f),F(kY,m),F(XP,g),F(DY,M),F(IY,S),F(PY,T),F(Zr,x),F(ki,w),F(OY,E),lt(C))if(C.length){const B=r.exposed||(r.exposed={});C.forEach(k=>{Object.defineProperty(B,k,{get:()=>t[k],set:z=>t[k]=z})})}else r.exposed||(r.exposed={});_&&r.render===Lr&&(r.render=_),P!=null&&(r.inheritAttrs=P),A&&(r.components=A),N&&(r.directives=N)}function VY(r,e,t=Lr){lt(r)&&(r=qT(r));for(const i in r){const n=r[i];let s;Ht(n)?"default"in n?s=ut(n.from||i,n.default,!0):s=ut(n.from||i):s=ut(n),zr(s)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[i]=s}}function tI(r,e,t){Ko(lt(r)?r.map(i=>i.bind(e.proxy)):r.bind(e.proxy),e,t)}function rI(r,e,t,i){const n=i.includes(".")?GP(t,i):()=>t[i];if(kt(r)){const s=e[r];Nt(s)&&Ve(n,s)}else if(Nt(r))Ve(n,r.bind(t));else if(Ht(r))if(lt(r))r.forEach(s=>rI(s,e,t,i));else{const s=Nt(r.handler)?r.handler.bind(t):e[r.handler];Nt(s)&&Ve(n,s,r)}}function XT(r){const e=r.type,{mixins:t,extends:i}=e,{mixins:n,optionsCache:s,config:{optionMergeStrategies:o}}=r.appContext,a=s.get(e);let l;return a?l=a:!n.length&&!t&&!i?l=e:(l={},n.length&&n.forEach(c=>D1(l,c,o,!0)),D1(l,e,o)),Ht(e)&&s.set(e,l),l}function D1(r,e,t,i=!1){const{mixins:n,extends:s}=e;s&&D1(r,s,t,!0),n&&n.forEach(o=>D1(r,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=GY[o]||t&&t[o];r[o]=a?a(r[o],e[o]):e[o]}return r}const GY={data:iI,props:nI,emits:nI,methods:av,computed:av,beforeCreate:_s,created:_s,beforeMount:_s,mounted:_s,beforeUpdate:_s,updated:_s,beforeDestroy:_s,beforeUnmount:_s,destroyed:_s,unmounted:_s,activated:_s,deactivated:_s,errorCaptured:_s,serverPrefetch:_s,components:av,directives:av,watch:HY,provide:iI,inject:jY};function iI(r,e){return e?r?function(){return zi(Nt(r)?r.call(this,this):r,Nt(e)?e.call(this,this):e)}:e:r}function jY(r,e){return av(qT(r),qT(e))}function qT(r){if(lt(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function _s(r,e){return r?[...new Set([].concat(r,e))]:e}function av(r,e){return r?zi(Object.create(null),r,e):e}function nI(r,e){return r?lt(r)&&lt(e)?[...new Set([...r,...e])]:zi(Object.create(null),eI(r),eI(e??{})):e}function HY(r,e){if(!r)return e;if(!e)return r;const t=zi(Object.create(null),r);for(const i in e)t[i]=_s(r[i],e[i]);return t}function sI(){return{app:null,config:{isNativeTag:SK,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let WY=0;function $Y(r,e){return function(t,i=null){Nt(t)||(t=zi({},t)),i!=null&&!Ht(i)&&(i=null);const n=sI(),s=new Set;let o=!1;const a=n.app={_uid:WY++,_component:t,_props:i,_container:null,_context:n,_instance:null,version:gZ,get config(){return n.config},set config(l){},use(l,...c){return s.has(l)||(l&&Nt(l.install)?(s.add(l),l.install(a,...c)):Nt(l)&&(s.add(l),l(a,...c))),a},mixin(l){return n.mixins.includes(l)||n.mixins.push(l),a},component(l,c){return c?(n.components[l]=c,a):n.components[l]},directive(l,c){return c?(n.directives[l]=c,a):n.directives[l]},mount(l,c,u){if(!o){const d=ue(t,i);return d.appContext=n,c&&e?e(d,l):r(d,l,u),o=!0,a._container=l,l.__vue_app__=a,G1(d.component)||d.component.proxy}},unmount(){o&&(r(null,a._container),delete a._container.__vue_app__)},provide(l,c){return n.provides[l]=c,a},runWithContext(l){U1=a;try{return l()}finally{U1=null}}};return a}}let U1=null;function Yt(r,e){if(An){let t=An.provides;const i=An.parent&&An.parent.provides;i===t&&(t=An.provides=Object.create(i)),t[r]=e}}function ut(r,e,t=!1){const i=An||Vn;if(i||U1){const n=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:U1._context.provides;if(n&&r in n)return n[r];if(arguments.length>1)return t&&Nt(e)?e.call(i&&i.proxy):e}}function XY(r,e,t,i=!1){const n={},s={};b1(s,B1,1),r.propsDefaults=Object.create(null),oI(r,e,n,s);for(const o in r.propsOptions[0])o in n||(n[o]=void 0);t?r.props=i?n:kT(n):r.type.props?r.props=n:r.props=s,r.attrs=s}function qY(r,e,t,i){const{props:n,attrs:s,vnode:{patchFlag:o}}=r,a=Tr(n),[l]=r.propsOptions;let c=!1;if((i||o>0)&&!(o&16)){if(o&8){const u=r.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(N1(r.emitsOptions,h))continue;const p=e[h];if(l)if(er(s,h))p!==s[h]&&(s[h]=p,c=!0);else{const f=qo(h);n[f]=KT(l,a,f,p,r,!1)}else p!==s[h]&&(s[h]=p,c=!0)}}}else{oI(r,e,n,s)&&(c=!0);let u;for(const d in a)(!e||!er(e,d)&&((u=Kc(d))===d||!er(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(n[d]=KT(l,a,d,void 0,r,!0)):delete n[d]);if(s!==a)for(const d in s)(!e||!er(e,d))&&(delete s[d],c=!0)}c&&Xl(r,"set","$attrs")}function oI(r,e,t,i){const[n,s]=r.propsOptions;let o=!1,a;if(e)for(let l in e){if(m1(l))continue;const c=e[l];let u;n&&er(n,u=qo(l))?!s||!s.includes(u)?t[u]=c:(a||(a={}))[u]=c:N1(r.emitsOptions,l)||(!(l in i)||c!==i[l])&&(i[l]=c,o=!0)}if(s){const l=Tr(t),c=a||Ar;for(let u=0;u<s.length;u++){const d=s[u];t[d]=KT(n,l,d,c[d],r,!er(c,d))}}return o}function KT(r,e,t,i,n,s){const o=r[t];if(o!=null){const a=er(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Nt(l)){const{propsDefaults:c}=n;t in c?i=c[t]:(Qp(n),i=c[t]=l.call(null,e),Pd())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===Kc(t))&&(i=!0))}return i}function aI(r,e,t=!1){const i=e.propsCache,n=i.get(r);if(n)return n;const s=r.props,o={},a=[];let l=!1;if(!Nt(r)){const u=d=>{l=!0;const[h,p]=aI(d,e,!0);zi(o,h),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(u),r.extends&&u(r.extends),r.mixins&&r.mixins.forEach(u)}if(!s&&!l)return Ht(r)&&i.set(r,Xo),Xo;if(lt(s))for(let u=0;u<s.length;u++){const d=qo(s[u]);lI(d)&&(o[d]=Ar)}else if(s)for(const u in s){const d=qo(u);if(lI(d)){const h=s[u],p=o[d]=lt(h)||Nt(h)?{type:h}:zi({},h);if(p){const f=dI(Boolean,p.type),m=dI(String,p.type);p[0]=f>-1,p[1]=m<0||f<m,(f>-1||er(p,"default"))&&a.push(d)}}}const c=[o,a];return Ht(r)&&i.set(r,c),c}function lI(r){return r[0]!=="$"}function cI(r){const e=r&&r.toString().match(/^\s*(function|class) (\w+)/);return e?e[2]:r===null?"null":""}function uI(r,e){return cI(r)===cI(e)}function dI(r,e){return lt(e)?e.findIndex(t=>uI(t,r)):Nt(e)&&uI(e,r)?0:-1}const hI=r=>r[0]==="_"||r==="$stable",YT=r=>lt(r)?r.map(pl):[pl(r)],KY=(r,e,t)=>{if(e._n)return e;const i=me((...n)=>YT(e(...n)),t);return i._c=!1,i},pI=(r,e,t)=>{const i=r._ctx;for(const n in r){if(hI(n))continue;const s=r[n];if(Nt(s))e[n]=KY(n,s,i);else if(s!=null){const o=YT(s);e[n]=()=>o}}},fI=(r,e)=>{const t=YT(e);r.slots.default=()=>t},YY=(r,e)=>{if(r.vnode.shapeFlag&32){const t=e._;t?(r.slots=Tr(e),b1(e,"_",t)):pI(e,r.slots={})}else r.slots={},e&&fI(r,e);b1(r.slots,B1,1)},ZY=(r,e,t)=>{const{vnode:i,slots:n}=r;let s=!0,o=Ar;if(i.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:(zi(n,e),!t&&a===1&&delete n._):(s=!e.$stable,pI(e,n)),o=e}else e&&(fI(r,e),o={default:1});if(s)for(const a in n)!hI(a)&&!(a in o)&&delete n[a]};function ZT(r,e,t,i,n=!1){if(lt(r)){r.forEach((h,p)=>ZT(h,e&&(lt(e)?e[p]:e),t,i,n));return}if(sv(i)&&!n)return;const s=i.shapeFlag&4?G1(i.component)||i.component.proxy:i.el,o=n?null:s,{i:a,r:l}=r,c=e&&e.r,u=a.refs===Ar?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(kt(c)?(u[c]=null,er(d,c)&&(d[c]=null)):zr(c)&&(c.value=null)),Nt(l))Qc(l,a,12,[o,u]);else{const h=kt(l),p=zr(l);if(h||p){const f=()=>{if(r.f){const m=h?er(d,l)?d[l]:u[l]:l.value;n?lt(m)&&bT(m,s):lt(m)?m.includes(s)||m.push(s):h?(u[l]=[s],er(d,l)&&(d[l]=u[l])):(l.value=[s],r.k&&(u[r.k]=l.value))}else h?(u[l]=o,er(d,l)&&(d[l]=o)):p&&(l.value=o,r.k&&(u[r.k]=o))};o?(f.id=-1,Ws(f,t)):f()}}}const Ws=CY;function JY(r){return QY(r)}function QY(r,e){const t=_T();t.__VUE__=!0;const{insert:i,remove:n,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:p=Lr,insertStaticContent:f}=r,m=(L,$,re,te=null,le=null,ge=null,be=!1,_e=null,pe=!!$.dynamicChildren)=>{if(L===$)return;L&&!Od(L,$)&&(te=K(L),G(L,le,ge,!0),L=null),$.patchFlag===-2&&(pe=!1,$.dynamicChildren=null);const{type:Se,ref:Fe,shapeFlag:Y}=$;switch(Se){case Zp:g(L,$,re,te);break;case Ss:v(L,$,re,te);break;case eM:L==null&&x($,re,te,be);break;case ct:A(L,$,re,te,le,ge,be,_e,pe);break;default:Y&1?_(L,$,re,te,le,ge,be,_e,pe):Y&6?N(L,$,re,te,le,ge,be,_e,pe):(Y&64||Y&128)&&Se.process(L,$,re,te,le,ge,be,_e,pe,ce)}Fe!=null&&le&&ZT(Fe,L&&L.ref,ge,$||L,!$)},g=(L,$,re,te)=>{if(L==null)i($.el=a($.children),re,te);else{const le=$.el=L.el;$.children!==L.children&&c(le,$.children)}},v=(L,$,re,te)=>{L==null?i($.el=l($.children||""),re,te):$.el=L.el},x=(L,$,re,te)=>{[L.el,L.anchor]=f(L.children,$,re,te,L.el,L.anchor)},b=({el:L,anchor:$},re,te)=>{let le;for(;L&&L!==$;)le=h(L),i(L,re,te),L=le;i($,re,te)},w=({el:L,anchor:$})=>{let re;for(;L&&L!==$;)re=h(L),n(L),L=re;n($)},_=(L,$,re,te,le,ge,be,_e,pe)=>{be=be||$.type==="svg",L==null?S($,re,te,le,ge,be,_e,pe):E(L,$,le,ge,be,_e,pe)},S=(L,$,re,te,le,ge,be,_e)=>{let pe,Se;const{type:Fe,props:Y,shapeFlag:H,transition:ne,dirs:Le}=L;if(pe=L.el=o(L.type,ge,Y&&Y.is,Y),H&8?u(pe,L.children):H&16&&M(L.children,pe,null,te,le,ge&&Fe!=="foreignObject",be,_e),Le&&Rd(L,null,te,"created"),T(pe,L,L.scopeId,be,te),Y){for(const Ee in Y)Ee!=="value"&&!m1(Ee)&&s(pe,Ee,null,Y[Ee],ge,L.children,te,le,de);"value"in Y&&s(pe,"value",null,Y.value),(Se=Y.onVnodeBeforeMount)&&fl(Se,te,L)}Le&&Rd(L,null,te,"beforeMount");const Pe=(!le||le&&!le.pendingBranch)&&ne&&!ne.persisted;Pe&&ne.beforeEnter(pe),i(pe,$,re),((Se=Y&&Y.onVnodeMounted)||Pe||Le)&&Ws(()=>{Se&&fl(Se,te,L),Pe&&ne.enter(pe),Le&&Rd(L,null,te,"mounted")},le)},T=(L,$,re,te,le)=>{if(re&&p(L,re),te)for(let ge=0;ge<te.length;ge++)p(L,te[ge]);if(le){let ge=le.subTree;if($===ge){const be=le.vnode;T(L,be,be.scopeId,be.slotScopeIds,le.parent)}}},M=(L,$,re,te,le,ge,be,_e,pe=0)=>{for(let Se=pe;Se<L.length;Se++){const Fe=L[Se]=_e?eu(L[Se]):pl(L[Se]);m(null,Fe,$,re,te,le,ge,be,_e)}},E=(L,$,re,te,le,ge,be)=>{const _e=$.el=L.el;let{patchFlag:pe,dynamicChildren:Se,dirs:Fe}=$;pe|=L.patchFlag&16;const Y=L.props||Ar,H=$.props||Ar;let ne;re&&Ld(re,!1),(ne=H.onVnodeBeforeUpdate)&&fl(ne,re,$,L),Fe&&Rd($,L,re,"beforeUpdate"),re&&Ld(re,!0);const Le=le&&$.type!=="foreignObject";if(Se?C(L.dynamicChildren,Se,_e,re,te,Le,ge):be||z(L,$,_e,null,re,te,Le,ge,!1),pe>0){if(pe&16)P(_e,$,Y,H,re,te,le);else if(pe&2&&Y.class!==H.class&&s(_e,"class",null,H.class,le),pe&4&&s(_e,"style",Y.style,H.style,le),pe&8){const Pe=$.dynamicProps;for(let Ee=0;Ee<Pe.length;Ee++){const Ue=Pe[Ee],Be=Y[Ue],ve=H[Ue];(ve!==Be||Ue==="value")&&s(_e,Ue,Be,ve,le,L.children,re,te,de)}}pe&1&&L.children!==$.children&&u(_e,$.children)}else!be&&Se==null&&P(_e,$,Y,H,re,te,le);((ne=H.onVnodeUpdated)||Fe)&&Ws(()=>{ne&&fl(ne,re,$,L),Fe&&Rd($,L,re,"updated")},te)},C=(L,$,re,te,le,ge,be)=>{for(let _e=0;_e<$.length;_e++){const pe=L[_e],Se=$[_e],Fe=pe.el&&(pe.type===ct||!Od(pe,Se)||pe.shapeFlag&70)?d(pe.el):re;m(pe,Se,Fe,null,te,le,ge,be,!0)}},P=(L,$,re,te,le,ge,be)=>{if(re!==te){if(re!==Ar)for(const _e in re)!m1(_e)&&!(_e in te)&&s(L,_e,re[_e],null,be,$.children,le,ge,de);for(const _e in te){if(m1(_e))continue;const pe=te[_e],Se=re[_e];pe!==Se&&_e!=="value"&&s(L,_e,Se,pe,be,$.children,le,ge,de)}"value"in te&&s(L,"value",re.value,te.value)}},A=(L,$,re,te,le,ge,be,_e,pe)=>{const Se=$.el=L?L.el:a(""),Fe=$.anchor=L?L.anchor:a("");let{patchFlag:Y,dynamicChildren:H,slotScopeIds:ne}=$;ne&&(_e=_e?_e.concat(ne):ne),L==null?(i(Se,re,te),i(Fe,re,te),M($.children,re,Fe,le,ge,be,_e,pe)):Y>0&&Y&64&&H&&L.dynamicChildren?(C(L.dynamicChildren,H,re,le,ge,be,_e),($.key!=null||le&&$===le.subTree)&&JT(L,$,!0)):z(L,$,re,Fe,le,ge,be,_e,pe)},N=(L,$,re,te,le,ge,be,_e,pe)=>{$.slotScopeIds=_e,L==null?$.shapeFlag&512?le.ctx.activate($,re,te,be,pe):R($,re,te,le,ge,be,pe):F(L,$,pe)},R=(L,$,re,te,le,ge,be)=>{const _e=L.component=lZ(L,te,le);if(O1(L)&&(_e.ctx.renderer=ce),cZ(_e),_e.asyncDep){if(le&&le.registerDep(_e,B),!L.el){const pe=_e.subTree=ue(Ss);v(null,pe,$,re)}return}B(_e,L,$,re,le,ge,be)},F=(L,$,re)=>{const te=$.component=L.component;if(TY(L,$,re))if(te.asyncDep&&!te.asyncResolved){k(te,$,re);return}else te.next=$,yY(te.update),te.update();else $.el=L.el,te.vnode=$},B=(L,$,re,te,le,ge,be)=>{const _e=()=>{if(L.isMounted){let{next:Fe,bu:Y,u:H,parent:ne,vnode:Le}=L,Pe=Fe,Ee;Ld(L,!1),Fe?(Fe.el=Le.el,k(L,Fe,be)):Fe=Le,Y&&y1(Y),(Ee=Fe.props&&Fe.props.onVnodeBeforeUpdate)&&fl(Ee,ne,Fe,Le),Ld(L,!0);const Ue=FT(L),Be=L.subTree;L.subTree=Ue,m(Be,Ue,d(Be.el),K(Be),L,le,ge),Fe.el=Ue.el,Pe===null&&MY(L,Ue.el),H&&Ws(H,le),(Ee=Fe.props&&Fe.props.onVnodeUpdated)&&Ws(()=>fl(Ee,ne,Fe,Le),le)}else{let Fe;const{el:Y,props:H}=$,{bm:ne,m:Le,parent:Pe}=L,Ee=sv($);if(Ld(L,!1),ne&&y1(ne),!Ee&&(Fe=H&&H.onVnodeBeforeMount)&&fl(Fe,Pe,$),Ld(L,!0),Y&&Z){const Ue=()=>{L.subTree=FT(L),Z(Y,L.subTree,L,le,null)};Ee?$.type.__asyncLoader().then(()=>!L.isUnmounted&&Ue()):Ue()}else{const Ue=L.subTree=FT(L);m(null,Ue,re,te,L,le,ge),$.el=Ue.el}if(Le&&Ws(Le,le),!Ee&&(Fe=H&&H.onVnodeMounted)){const Ue=$;Ws(()=>fl(Fe,Pe,Ue),le)}($.shapeFlag&256||Pe&&sv(Pe.vnode)&&Pe.vnode.shapeFlag&256)&&L.a&&Ws(L.a,le),L.isMounted=!0,$=re=te=null}},pe=L.effect=new ET(_e,()=>UT(Se),L.scope),Se=L.update=()=>pe.run();Se.id=L.uid,Ld(L,!0),Se()},k=(L,$,re)=>{$.component=L;const te=L.vnode.props;L.vnode=$,L.next=null,qY(L,$.props,te,re),ZY(L,$.children,re),Hp(),UP(),Wp()},z=(L,$,re,te,le,ge,be,_e,pe=!1)=>{const Se=L&&L.children,Fe=L?L.shapeFlag:0,Y=$.children,{patchFlag:H,shapeFlag:ne}=$;if(H>0){if(H&128){V(Se,Y,re,te,le,ge,be,_e,pe);return}else if(H&256){O(Se,Y,re,te,le,ge,be,_e,pe);return}}ne&8?(Fe&16&&de(Se,le,ge),Y!==Se&&u(re,Y)):Fe&16?ne&16?V(Se,Y,re,te,le,ge,be,_e,pe):de(Se,le,ge,!0):(Fe&8&&u(re,""),ne&16&&M(Y,re,te,le,ge,be,_e,pe))},O=(L,$,re,te,le,ge,be,_e,pe)=>{L=L||Xo,$=$||Xo;const Se=L.length,Fe=$.length,Y=Math.min(Se,Fe);let H;for(H=0;H<Y;H++){const ne=$[H]=pe?eu($[H]):pl($[H]);m(L[H],ne,re,null,le,ge,be,_e,pe)}Se>Fe?de(L,le,ge,!0,!1,Y):M($,re,te,le,ge,be,_e,pe,Y)},V=(L,$,re,te,le,ge,be,_e,pe)=>{let Se=0;const Fe=$.length;let Y=L.length-1,H=Fe-1;for(;Se<=Y&&Se<=H;){const ne=L[Se],Le=$[Se]=pe?eu($[Se]):pl($[Se]);if(Od(ne,Le))m(ne,Le,re,null,le,ge,be,_e,pe);else break;Se++}for(;Se<=Y&&Se<=H;){const ne=L[Y],Le=$[H]=pe?eu($[H]):pl($[H]);if(Od(ne,Le))m(ne,Le,re,null,le,ge,be,_e,pe);else break;Y--,H--}if(Se>Y){if(Se<=H){const ne=H+1,Le=ne<Fe?$[ne].el:te;for(;Se<=H;)m(null,$[Se]=pe?eu($[Se]):pl($[Se]),re,Le,le,ge,be,_e,pe),Se++}}else if(Se>H)for(;Se<=Y;)G(L[Se],le,ge,!0),Se++;else{const ne=Se,Le=Se,Pe=new Map;for(Se=Le;Se<=H;Se++){const ae=$[Se]=pe?eu($[Se]):pl($[Se]);ae.key!=null&&Pe.set(ae.key,Se)}let Ee,Ue=0;const Be=H-Le+1;let ve=!1,Q=0;const he=new Array(Be);for(Se=0;Se<Be;Se++)he[Se]=0;for(Se=ne;Se<=Y;Se++){const ae=L[Se];if(Ue>=Be){G(ae,le,ge,!0);continue}let De;if(ae.key!=null)De=Pe.get(ae.key);else for(Ee=Le;Ee<=H;Ee++)if(he[Ee-Le]===0&&Od(ae,$[Ee])){De=Ee;break}De===void 0?G(ae,le,ge,!0):(he[De-Le]=Se+1,De>=Q?Q=De:ve=!0,m(ae,$[De],re,null,le,ge,be,_e,pe),Ue++)}const we=ve?eZ(he):Xo;for(Ee=we.length-1,Se=Be-1;Se>=0;Se--){const ae=Le+Se,De=$[ae],We=ae+1<Fe?$[ae+1].el:te;he[Se]===0?m(null,De,re,We,le,ge,be,_e,pe):ve&&(Ee<0||Se!==we[Ee]?U(De,re,We,2):Ee--)}}},U=(L,$,re,te,le=null)=>{const{el:ge,type:be,transition:_e,children:pe,shapeFlag:Se}=L;if(Se&6){U(L.component.subTree,$,re,te);return}if(Se&128){L.suspense.move($,re,te);return}if(Se&64){be.move(L,$,re,ce);return}if(be===ct){i(ge,$,re);for(let Fe=0;Fe<pe.length;Fe++)U(pe[Fe],$,re,te);i(L.anchor,$,re);return}if(be===eM){b(L,$,re);return}if(te!==2&&Se&1&&_e)if(te===0)_e.beforeEnter(ge),i(ge,$,re),Ws(()=>_e.enter(ge),le);else{const{leave:Fe,delayLeave:Y,afterLeave:H}=_e,ne=()=>i(ge,$,re),Le=()=>{Fe(ge,()=>{ne(),H&&H()})};Y?Y(ge,ne,Le):Le()}else i(ge,$,re)},G=(L,$,re,te=!1,le=!1)=>{const{type:ge,props:be,ref:_e,children:pe,dynamicChildren:Se,shapeFlag:Fe,patchFlag:Y,dirs:H}=L;if(_e!=null&&ZT(_e,null,re,L,!0),Fe&256){$.ctx.deactivate(L);return}const ne=Fe&1&&H,Le=!sv(L);let Pe;if(Le&&(Pe=be&&be.onVnodeBeforeUnmount)&&fl(Pe,$,L),Fe&6)se(L.component,re,te);else{if(Fe&128){L.suspense.unmount(re,te);return}ne&&Rd(L,null,$,"beforeUnmount"),Fe&64?L.type.remove(L,$,re,le,ce,te):Se&&(ge!==ct||Y>0&&Y&64)?de(Se,$,re,!1,!0):(ge===ct&&Y&384||!le&&Fe&16)&&de(pe,$,re),te&&X(L)}(Le&&(Pe=be&&be.onVnodeUnmounted)||ne)&&Ws(()=>{Pe&&fl(Pe,$,L),ne&&Rd(L,null,$,"unmounted")},re)},X=L=>{const{type:$,el:re,anchor:te,transition:le}=L;if($===ct){ie(re,te);return}if($===eM){w(L);return}const ge=()=>{n(re),le&&!le.persisted&&le.afterLeave&&le.afterLeave()};if(L.shapeFlag&1&&le&&!le.persisted){const{leave:be,delayLeave:_e}=le,pe=()=>be(re,ge);_e?_e(L.el,ge,pe):pe()}else ge()},ie=(L,$)=>{let re;for(;L!==$;)re=h(L),n(L),L=re;n($)},se=(L,$,re)=>{const{bum:te,scope:le,update:ge,subTree:be,um:_e}=L;te&&y1(te),le.stop(),ge&&(ge.active=!1,G(be,L,$,re)),_e&&Ws(_e,$),Ws(()=>{L.isUnmounted=!0},$),$&&$.pendingBranch&&!$.isUnmounted&&L.asyncDep&&!L.asyncResolved&&L.suspenseId===$.pendingId&&($.deps--,$.deps===0&&$.resolve())},de=(L,$,re,te=!1,le=!1,ge=0)=>{for(let be=ge;be<L.length;be++)G(L[be],$,re,te,le)},K=L=>L.shapeFlag&6?K(L.component.subTree):L.shapeFlag&128?L.suspense.next():h(L.anchor||L.el),q=(L,$,re)=>{L==null?$._vnode&&G($._vnode,null,null,!0):m($._vnode||null,L,$,null,null,null,re),UP(),FP(),$._vnode=L},ce={p:m,um:G,m:U,r:X,mt:R,mc:M,pc:z,pbc:C,n:K,o:r};let Te,Z;return e&&([Te,Z]=e(ce)),{render:q,hydrate:Te,createApp:$Y(q,Te)}}function Ld({effect:r,update:e},t){r.allowRecurse=e.allowRecurse=t}function JT(r,e,t=!1){const i=r.children,n=e.children;if(lt(i)&&lt(n))for(let s=0;s<i.length;s++){const o=i[s];let a=n[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[s]=eu(n[s]),a.el=o.el),t||JT(o,a)),a.type===Zp&&(a.el=o.el)}}function eZ(r){const e=r.slice(),t=[0];let i,n,s,o,a;const l=r.length;for(i=0;i<l;i++){const c=r[i];if(c!==0){if(n=t[t.length-1],r[n]<c){e[i]=n,t.push(i);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,r[t[a]]<c?s=a+1:o=a;c<r[t[s]]&&(s>0&&(e[i]=t[s-1]),t[s]=i)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}const tZ=r=>r.__isTeleport,lv=r=>r&&(r.disabled||r.disabled===""),mI=r=>typeof SVGElement<"u"&&r instanceof SVGElement,QT=(r,e)=>{const t=r&&r.to;return kt(t)?e?e(t):null:t},rZ={__isTeleport:!0,process(r,e,t,i,n,s,o,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:f,createText:m,createComment:g}}=c,v=lv(e.props);let{shapeFlag:x,children:b,dynamicChildren:w}=e;if(r==null){const _=e.el=m(""),S=e.anchor=m("");p(_,t,i),p(S,t,i);const T=e.target=QT(e.props,f),M=e.targetAnchor=m("");T&&(p(M,T),o=o||mI(T));const E=(C,P)=>{x&16&&u(b,C,P,n,s,o,a,l)};v?E(t,S):T&&E(T,M)}else{e.el=r.el;const _=e.anchor=r.anchor,S=e.target=r.target,T=e.targetAnchor=r.targetAnchor,M=lv(r.props),E=M?t:S,C=M?_:T;if(o=o||mI(S),w?(h(r.dynamicChildren,w,E,n,s,o,a),JT(r,e,!0)):l||d(r,e,E,C,n,s,o,a,!1),v)M||F1(e,t,_,c,1);else if((e.props&&e.props.to)!==(r.props&&r.props.to)){const P=e.target=QT(e.props,f);P&&F1(e,P,null,c,0)}else M&&F1(e,S,T,c,1)}gI(e)},remove(r,e,t,i,{um:n,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:h}=r;if(d&&s(u),(o||!lv(h))&&(s(c),a&16))for(let p=0;p<l.length;p++){const f=l[p];n(f,e,t,!0,!!f.dynamicChildren)}},move:F1,hydrate:iZ};function F1(r,e,t,{o:{insert:i},m:n},s=2){s===0&&i(r.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=r,d=s===2;if(d&&i(o,e,t),(!d||lv(u))&&l&16)for(let h=0;h<c.length;h++)n(c[h],e,t,2);d&&i(a,e,t)}function iZ(r,e,t,i,n,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=QT(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(lv(e.props))e.anchor=c(o(r),e,a(r),t,i,n,s),e.targetAnchor=d;else{e.anchor=o(r);let h=d;for(;h;)if(h=o(h),h&&h.nodeType===8&&h.data==="teleport anchor"){e.targetAnchor=h,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(d,e,u,t,i,n,s)}gI(e)}return e.anchor&&o(e.anchor)}const cv=rZ;function gI(r){const e=r.ctx;if(e&&e.ut){let t=r.children[0].el;for(;t!==r.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}const ct=Symbol.for("v-fgt"),Zp=Symbol.for("v-txt"),Ss=Symbol.for("v-cmt"),eM=Symbol.for("v-stc"),uv=[];let Na=null;function D(r=!1){uv.push(Na=r?null:[])}function nZ(){uv.pop(),Na=uv[uv.length-1]||null}let dv=1;function vI(r){dv+=r}function yI(r){return r.dynamicChildren=dv>0?Na||Xo:null,nZ(),dv>0&&Na&&Na.push(r),r}function ee(r,e,t,i,n,s){return yI(J(r,e,t,i,n,s,!0))}function Ae(r,e,t,i,n){return yI(ue(r,e,t,i,n,!0))}function ei(r){return r?r.__v_isVNode===!0:!1}function Od(r,e){return r.type===e.type&&r.key===e.key}const B1="__vInternal",bI=({key:r})=>r??null,z1=({ref:r,ref_key:e,ref_for:t})=>(typeof r=="number"&&(r=""+r),r!=null?kt(r)||zr(r)||Nt(r)?{i:Vn,r,k:e,f:!!t}:r:null);function J(r,e=null,t=null,i=0,n=null,s=r===ct?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&bI(e),ref:e&&z1(e),scopeId:R1,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Vn};return a?(tM(l,t),s&128&&r.normalize(l)):t&&(l.shapeFlag|=kt(t)?8:16),dv>0&&!o&&Na&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Na.push(l),l}const ue=sZ;function sZ(r,e=null,t=null,i=0,n=null,s=!1){if((!r||r===YP)&&(r=Ss),ei(r)){const a=Jl(r,e,!0);return t&&tM(a,t),dv>0&&!s&&Na&&(a.shapeFlag&6?Na[Na.indexOf(r)]=a:Na.push(a)),a.patchFlag|=-2,a}if(pZ(r)&&(r=r.__vccOpts),e){e=V1(e);let{class:a,style:l}=e;a&&!kt(a)&&(e.class=j(a)),Ht(l)&&(NP(l)&&!lt(l)&&(l=zi({},l)),e.style=pt(l))}const o=kt(r)?1:EY(r)?128:tZ(r)?64:Ht(r)?4:Nt(r)?2:0;return J(r,e,t,i,n,o,s,!0)}function V1(r){return r?NP(r)||B1 in r?zi({},r):r:null}function Jl(r,e,t=!1){const{props:i,ref:n,patchFlag:s,children:o}=r,a=e?qt(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:r.type,props:a,key:a&&bI(a),ref:e&&e.ref?t&&n?lt(n)?n.concat(z1(e)):[n,z1(e)]:z1(e):n,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:o,target:r.target,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==ct?s===-1?16:s|16:s,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:r.transition,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&Jl(r.ssContent),ssFallback:r.ssFallback&&Jl(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce}}function ir(r=" ",e=0){return ue(Zp,null,r,e)}function Re(r="",e=!1){return e?(D(),Ae(Ss,null,r)):ue(Ss,null,r)}function pl(r){return r==null||typeof r=="boolean"?ue(Ss):lt(r)?ue(ct,null,r.slice()):typeof r=="object"?eu(r):ue(Zp,null,String(r))}function eu(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:Jl(r)}function tM(r,e){let t=0;const{shapeFlag:i}=r;if(e==null)e=null;else if(lt(e))t=16;else if(typeof e=="object")if(i&65){const n=e.default;n&&(n._c&&(n._d=!1),tM(r,n()),n._c&&(n._d=!0));return}else{t=32;const n=e._;!n&&!(B1 in e)?e._ctx=Vn:n===3&&Vn&&(Vn.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else Nt(e)?(e={default:e,_ctx:Vn},t=32):(e=String(e),i&64?(t=16,e=[ir(e)]):t=8);r.children=e,r.shapeFlag|=t}function qt(...r){const e={};for(let t=0;t<r.length;t++){const i=r[t];for(const n in i)if(n==="class")e.class!==i.class&&(e.class=j([e.class,i.class]));else if(n==="style")e.style=pt([e.style,i.style]);else if(h1(n)){const s=e[n],o=i[n];o&&s!==o&&!(lt(s)&&s.includes(o))&&(e[n]=s?[].concat(s,o):o)}else n!==""&&(e[n]=i[n])}return e}function fl(r,e,t,i=null){Ko(r,e,7,[t,i])}const oZ=sI();let aZ=0;function lZ(r,e,t){const i=r.type,n=(e?e.appContext:r.appContext)||oZ,s={uid:aZ++,vnode:r,type:i,parent:e,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new lP(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:aI(i,n),emitsOptions:zP(i,n),emit:null,emitted:null,propsDefaults:Ar,inheritAttrs:i.inheritAttrs,ctx:Ar,data:Ar,props:Ar,attrs:Ar,slots:Ar,refs:Ar,setupState:Ar,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=wY.bind(null,s),r.ce&&r.ce(s),s}let An=null;const Dt=()=>An||Vn;let rM,Jp,xI="__VUE_INSTANCE_SETTERS__";(Jp=_T()[xI])||(Jp=_T()[xI]=[]),Jp.push(r=>An=r),rM=r=>{Jp.length>1?Jp.forEach(e=>e(r)):Jp[0](r)};const Qp=r=>{rM(r),r.scope.on()},Pd=()=>{An&&An.scope.off(),rM(null)};function wI(r){return r.vnode.shapeFlag&4}let hv=!1;function cZ(r,e=!1){hv=e;const{props:t,children:i}=r.vnode,n=wI(r);XY(r,t,n,e),YY(r,i);const s=n?uZ(r,e):void 0;return hv=!1,s}function uZ(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=Cd(new Proxy(r.ctx,BY));const{setup:i}=t;if(i){const n=r.setupContext=i.length>1?MI(r):null;Qp(r),Hp();const s=Qc(i,r,0,[r.props,n]);if(Wp(),Pd(),$g(s)){if(s.then(Pd,Pd),e)return s.then(o=>{_I(r,o,e)}).catch(o=>{A1(o,r,0)});r.asyncDep=s}else _I(r,s,e)}else TI(r,e)}function _I(r,e,t){Nt(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:Ht(e)&&(r.setupState=LP(e)),TI(r,t)}let SI;function TI(r,e,t){const i=r.type;if(!r.render){if(!e&&SI&&!i.render){const n=i.template||XT(r).template;if(n){const{isCustomElement:s,compilerOptions:o}=r.appContext.config,{delimiters:a,compilerOptions:l}=i,c=zi(zi({isCustomElement:s,delimiters:a},o),l);i.render=SI(n,c)}}r.render=i.render||Lr}Qp(r),Hp(),zY(r),Wp(),Pd()}function dZ(r){return r.attrsProxy||(r.attrsProxy=new Proxy(r.attrs,{get(e,t){return Hs(r,"get","$attrs"),e[t]}}))}function MI(r){const e=t=>{r.exposed=t||{}};return{get attrs(){return dZ(r)},slots:r.slots,emit:r.emit,expose:e}}function G1(r){if(r.exposed)return r.exposeProxy||(r.exposeProxy=new Proxy(LP(Cd(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in ov)return ov[t](r)},has(e,t){return t in e||t in ov}}))}function hZ(r,e=!0){return Nt(r)?r.displayName||r.name:r.name||e&&r.__name}function pZ(r){return Nt(r)&&"__vccOpts"in r}const I=(r,e)=>PP(r,e,hv);function yt(r,e,t){const i=arguments.length;return i===2?Ht(e)&&!lt(e)?ei(e)?ue(r,null,[e]):ue(r,e):ue(r,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&ei(t)&&(t=[t]),ue(r,e,t))}const fZ=Symbol.for("v-scx"),mZ=()=>ut(fZ),gZ="3.3.4",vZ="http://www.w3.org/2000/svg",Id=typeof document<"u"?document:null,EI=Id&&Id.createElement("template"),yZ={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,i)=>{const n=e?Id.createElementNS(vZ,r):Id.createElement(r,t?{is:t}:void 0);return r==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:r=>Id.createTextNode(r),createComment:r=>Id.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>Id.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,t,i,n,s){const o=t?t.previousSibling:e.lastChild;if(n&&(n===s||n.nextSibling))for(;e.insertBefore(n.cloneNode(!0),t),!(n===s||!(n=n.nextSibling)););else{EI.innerHTML=i?`<svg>${r}</svg>`:r;const a=EI.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}};function bZ(r,e,t){const i=r._vtc;i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}function xZ(r,e,t){const i=r.style,n=kt(t);if(t&&!n){if(e&&!kt(e))for(const s in e)t[s]==null&&iM(i,s,"");for(const s in t)iM(i,s,t[s])}else{const s=i.display;n?e!==t&&(i.cssText=t):e&&r.removeAttribute("style"),"_vod"in r&&(i.display=s)}}const CI=/\s*!important$/;function iM(r,e,t){if(lt(t))t.forEach(i=>iM(r,e,i));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const i=wZ(r,e);CI.test(t)?r.setProperty(Kc(i),t.replace(CI,""),"important"):r[i]=t}}const AI=["Webkit","Moz","ms"],nM={};function wZ(r,e){const t=nM[e];if(t)return t;let i=qo(e);if(i!=="filter"&&i in r)return nM[e]=i;i=qg(i);for(let n=0;n<AI.length;n++){const s=AI[n]+i;if(s in r)return nM[e]=s}return e}const NI="http://www.w3.org/1999/xlink";function _Z(r,e,t,i,n){if(i&&e.startsWith("xlink:"))t==null?r.removeAttributeNS(NI,e.slice(6,e.length)):r.setAttributeNS(NI,e,t);else{const s=PK(e);t==null||s&&!sP(t)?r.removeAttribute(e):r.setAttribute(e,s?"":t)}}function SZ(r,e,t,i,n,s,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,n,s),r[e]=t??"";return}const a=r.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){r._value=t;const c=a==="OPTION"?r.getAttribute("value"):r.value,u=t??"";c!==u&&(r.value=u),t==null&&r.removeAttribute(e);return}let l=!1;if(t===""||t==null){const c=typeof r[e];c==="boolean"?t=sP(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{r[e]=t}catch{}l&&r.removeAttribute(e)}function tu(r,e,t,i){r.addEventListener(e,t,i)}function TZ(r,e,t,i){r.removeEventListener(e,t,i)}function MZ(r,e,t,i,n=null){const s=r._vei||(r._vei={}),o=s[e];if(i&&o)o.value=i;else{const[a,l]=EZ(e);if(i){const c=s[e]=NZ(i,n);tu(r,a,c,l)}else o&&(TZ(r,a,o,l),s[e]=void 0)}}const RI=/(?:Once|Passive|Capture)$/;function EZ(r){let e;if(RI.test(r)){e={};let t;for(;t=r.match(RI);)r=r.slice(0,r.length-t[0].length),e[t[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):Kc(r.slice(2)),e]}let sM=0;const CZ=Promise.resolve(),AZ=()=>sM||(CZ.then(()=>sM=0),sM=Date.now());function NZ(r,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Ko(RZ(i,t.value),e,5,[i])};return t.value=r,t.attached=AZ(),t}function RZ(r,e){if(lt(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(i=>n=>!n._stopped&&i&&i(n))}else return e}const kI=/^on[a-z]/,kZ=(r,e,t,i,n=!1,s,o,a,l)=>{e==="class"?bZ(r,i,n):e==="style"?xZ(r,t,i):h1(e)?yT(e)||MZ(r,e,t,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):LZ(r,e,i,n))?SZ(r,e,i,s,o,a,l):(e==="true-value"?r._trueValue=i:e==="false-value"&&(r._falseValue=i),_Z(r,e,i,n))};function LZ(r,e,t,i){return i?!!(e==="innerHTML"||e==="textContent"||e in r&&kI.test(e)&&Nt(t)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA"||kI.test(e)&&kt(t)?!1:e in r}const ru="transition",pv="animation",Li=(r,{slots:e})=>yt(RY,PI(r),e);Li.displayName="Transition";const LI={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},OZ=Li.props=zi({},HP,LI),Dd=(r,e=[])=>{lt(r)?r.forEach(t=>t(...e)):r&&r(...e)},OI=r=>r?lt(r)?r.some(e=>e.length>1):r.length>1:!1;function PI(r){const e={};for(const A in r)A in LI||(e[A]=r[A]);if(r.css===!1)return e;const{name:t="v",type:i,duration:n,enterFromClass:s=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=s,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:h=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=r,f=PZ(n),m=f&&f[0],g=f&&f[1],{onBeforeEnter:v,onEnter:x,onEnterCancelled:b,onLeave:w,onLeaveCancelled:_,onBeforeAppear:S=v,onAppear:T=x,onAppearCancelled:M=b}=e,E=(A,N,R)=>{iu(A,N?u:a),iu(A,N?c:o),R&&R()},C=(A,N)=>{A._isLeaving=!1,iu(A,d),iu(A,p),iu(A,h),N&&N()},P=A=>(N,R)=>{const F=A?T:x,B=()=>E(N,A,R);Dd(F,[N,B]),II(()=>{iu(N,A?l:s),Ql(N,A?u:a),OI(F)||DI(N,i,m,B)})};return zi(e,{onBeforeEnter(A){Dd(v,[A]),Ql(A,s),Ql(A,o)},onBeforeAppear(A){Dd(S,[A]),Ql(A,l),Ql(A,c)},onEnter:P(!1),onAppear:P(!0),onLeave(A,N){A._isLeaving=!0;const R=()=>C(A,N);Ql(A,d),zI(),Ql(A,h),II(()=>{A._isLeaving&&(iu(A,d),Ql(A,p),OI(w)||DI(A,i,g,R))}),Dd(w,[A,R])},onEnterCancelled(A){E(A,!1),Dd(b,[A])},onAppearCancelled(A){E(A,!0),Dd(M,[A])},onLeaveCancelled(A){C(A),Dd(_,[A])}})}function PZ(r){if(r==null)return null;if(Ht(r))return[oM(r.enter),oM(r.leave)];{const e=oM(r);return[e,e]}}function oM(r){return AK(r)}function Ql(r,e){e.split(/\s+/).forEach(t=>t&&r.classList.add(t)),(r._vtc||(r._vtc=new Set)).add(e)}function iu(r,e){e.split(/\s+/).forEach(i=>i&&r.classList.remove(i));const{_vtc:t}=r;t&&(t.delete(e),t.size||(r._vtc=void 0))}function II(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let IZ=0;function DI(r,e,t,i){const n=r._endId=++IZ,s=()=>{n===r._endId&&i()};if(t)return setTimeout(s,t);const{type:o,timeout:a,propCount:l}=UI(r,e);if(!o)return i();const c=o+"end";let u=0;const d=()=>{r.removeEventListener(c,h),s()},h=p=>{p.target===r&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),r.addEventListener(c,h)}function UI(r,e){const t=window.getComputedStyle(r),i=f=>(t[f]||"").split(", "),n=i(`${ru}Delay`),s=i(`${ru}Duration`),o=FI(n,s),a=i(`${pv}Delay`),l=i(`${pv}Duration`),c=FI(a,l);let u=null,d=0,h=0;e===ru?o>0&&(u=ru,d=o,h=s.length):e===pv?c>0&&(u=pv,d=c,h=l.length):(d=Math.max(o,c),u=d>0?o>c?ru:pv:null,h=u?u===ru?s.length:l.length:0);const p=u===ru&&/\b(transform|all)(,|$)/.test(i(`${ru}Property`).toString());return{type:u,timeout:d,propCount:h,hasTransform:p}}function FI(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((t,i)=>BI(t)+BI(r[i])))}function BI(r){return Number(r.slice(0,-1).replace(",","."))*1e3}function zI(){return document.body.offsetHeight}const VI=new WeakMap,GI=new WeakMap,jI={name:"TransitionGroup",props:zi({},OZ,{tag:String,moveClass:String}),setup(r,{slots:e}){const t=Dt(),i=jP();let n,s;return Yl(()=>{if(!n.length)return;const o=r.moveClass||`${r.name||"v"}-move`;if(!BZ(n[0].el,t.vnode.el,o))return;n.forEach(DZ),n.forEach(UZ);const a=n.filter(FZ);zI(),a.forEach(l=>{const c=l.el,u=c.style;Ql(c,o),u.transform=u.webkitTransform=u.transitionDuration="";const d=c._moveCb=h=>{h&&h.target!==c||(!h||/transform$/.test(h.propertyName))&&(c.removeEventListener("transitionend",d),c._moveCb=null,iu(c,o))};c.addEventListener("transitionend",d)})}),()=>{const o=Tr(r),a=PI(o);let l=o.tag||ct;n=s,s=e.default?VT(e.default()):[];for(let c=0;c<s.length;c++){const u=s[c];u.key!=null&&nv(u,iv(u,a,i,t))}if(n)for(let c=0;c<n.length;c++){const u=n[c];nv(u,iv(u,a,i,t)),VI.set(u,u.el.getBoundingClientRect())}return ue(l,null,s)}}},CXe=r=>delete r.mode;jI.props;const HI=jI;function DZ(r){const e=r.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function UZ(r){GI.set(r,r.el.getBoundingClientRect())}function FZ(r){const e=VI.get(r),t=GI.get(r),i=e.left-t.left,n=e.top-t.top;if(i||n){const s=r.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${n}px)`,s.transitionDuration="0s",r}}function BZ(r,e,t){const i=r.cloneNode();r._vtc&&r._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&i.classList.remove(a))}),t.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const n=e.nodeType===1?e:e.parentNode;n.appendChild(i);const{hasTransform:s}=UI(i);return n.removeChild(i),s}const ef=r=>{const e=r.props["onUpdate:modelValue"]||!1;return lt(e)?t=>y1(e,t):e};function zZ(r){r.target.composing=!0}function WI(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const aM={created(r,{modifiers:{lazy:e,trim:t,number:i}},n){r._assign=ef(n);const s=i||n.props&&n.props.type==="number";tu(r,e?"change":"input",o=>{if(o.target.composing)return;let a=r.value;t&&(a=a.trim()),s&&(a=wT(a)),r._assign(a)}),t&&tu(r,"change",()=>{r.value=r.value.trim()}),e||(tu(r,"compositionstart",zZ),tu(r,"compositionend",WI),tu(r,"change",WI))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,modifiers:{lazy:t,trim:i,number:n}},s){if(r._assign=ef(s),r.composing||document.activeElement===r&&r.type!=="range"&&(t||i&&r.value.trim()===e||(n||r.type==="number")&&wT(r.value)===e))return;const o=e??"";r.value!==o&&(r.value=o)}},j1={deep:!0,created(r,e,t){r._assign=ef(t),tu(r,"change",()=>{const i=r._modelValue,n=qI(r),s=r.checked,o=r._assign;if(lt(i)){const a=oP(i,n),l=a!==-1;if(s&&!l)o(i.concat(n));else if(!s&&l){const c=[...i];c.splice(a,1),o(c)}}else if(p1(i)){const a=new Set(i);s?a.add(n):a.delete(n),o(a)}else o(KI(r,s))})},mounted:$I,beforeUpdate(r,e,t){r._assign=ef(t),$I(r,e,t)}};function $I(r,{value:e,oldValue:t},i){r._modelValue=e,lt(e)?r.checked=oP(e,i.props.value)>-1:p1(e)?r.checked=e.has(i.props.value):e!==t&&(r.checked=jp(e,KI(r,!0)))}const XI={created(r,{value:e},t){r.checked=jp(e,t.props.value),r._assign=ef(t),tu(r,"change",()=>{r._assign(qI(r))})},beforeUpdate(r,{value:e,oldValue:t},i){r._assign=ef(i),e!==t&&(r.checked=jp(e,i.props.value))}};function qI(r){return"_value"in r?r._value:r.value}function KI(r,e){const t=e?"_trueValue":"_falseValue";return t in r?r[t]:e}const VZ=["ctrl","shift","alt","meta"],GZ={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>VZ.some(t=>r[`${t}Key`]&&!e.includes(t))},Mt=(r,e)=>(t,...i)=>{for(let n=0;n<e.length;n++){const s=GZ[e[n]];if(s&&s(t,e))return}return r(t,...i)},jZ={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},dr=(r,e)=>t=>{if(!("key"in t))return;const i=Kc(t.key);if(e.some(n=>n===i||jZ[n]===i))return r(t)},vr={beforeMount(r,{value:e},{transition:t}){r._vod=r.style.display==="none"?"":r.style.display,t&&e?t.beforeEnter(r):fv(r,e)},mounted(r,{value:e},{transition:t}){t&&e&&t.enter(r)},updated(r,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(r),fv(r,!0),i.enter(r)):i.leave(r,()=>{fv(r,!1)}):fv(r,e))},beforeUnmount(r,{value:e}){fv(r,e)}};function fv(r,e){r.style.display=e?r._vod:"none"}const HZ=zi({patchProp:kZ},yZ);let YI;function ZI(){return YI||(YI=JY(HZ))}const tf=(...r)=>{ZI().render(...r)},JI=(...r)=>{const e=ZI().createApp(...r),{mount:t}=e;return e.mount=i=>{const n=WZ(i);if(!n)return;const s=e._component;!Nt(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const o=t(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},e};function WZ(r){return kt(r)?document.querySelector(r):r}function $Z(){return QI().__VUE_DEVTOOLS_GLOBAL_HOOK__}function QI(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const XZ=typeof Proxy=="function",qZ="devtools-plugin:setup",KZ="plugin:settings:set";let mv,lM;function YZ(){var r;return mv!==void 0||(typeof window<"u"&&window.performance?(mv=!0,lM=window.performance):typeof global<"u"&&!((r=global.perf_hooks)===null||r===void 0)&&r.performance?(mv=!0,lM=global.perf_hooks.performance):mv=!1),mv}function ZZ(){return YZ()?lM.now():Date.now()}class JZ{constructor(e,t){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=t;const i={};if(e.settings)for(const o in e.settings){const a=e.settings[o];i[o]=a.defaultValue}const n=`__vue-devtools-plugin-settings__${e.id}`;let s=Object.assign({},i);try{const o=localStorage.getItem(n),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(n,JSON.stringify(o))}catch{}s=o},now(){return ZZ()}},t&&t.on(KZ,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const t of this.onQueue)this.target.on[t.method](...t.args);for(const t of this.targetQueue)t.resolve(await this.target[t.method](...t.args))}}function QZ(r,e){const t=r,i=QI(),n=$Z(),s=XZ&&t.enableEarlyProxy;if(n&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))n.emit(qZ,r,e);else{const o=s?new JZ(t,n):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}const rf=typeof window<"u";function eJ(r){return r.__esModule||r[Symbol.toStringTag]==="Module"}const Jr=Object.assign;function cM(r,e){const t={};for(const i in e){const n=e[i];t[i]=Ra(n)?n.map(r):r(n)}return t}const gv=()=>{},Ra=Array.isArray,tJ=/\/$/,rJ=r=>r.replace(tJ,"");function uM(r,e,t="/"){let i,n={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),n=r(s)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=oJ(i??e,t),{fullPath:i+(s&&"?")+s+o,path:i,query:n,hash:o}}function iJ(r,e){const t=e.query?r(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function eD(r,e){return!e||!r.toLowerCase().startsWith(e.toLowerCase())?r:r.slice(e.length)||"/"}function nJ(r,e,t){const i=e.matched.length-1,n=t.matched.length-1;return i>-1&&i===n&&nf(e.matched[i],t.matched[n])&&tD(e.params,t.params)&&r(e.query)===r(t.query)&&e.hash===t.hash}function nf(r,e){return(r.aliasOf||r)===(e.aliasOf||e)}function tD(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(!sJ(r[t],e[t]))return!1;return!0}function sJ(r,e){return Ra(r)?rD(r,e):Ra(e)?rD(e,r):r===e}function rD(r,e){return Ra(e)?r.length===e.length&&r.every((t,i)=>t===e[i]):r.length===1&&r[0]===e}function oJ(r,e){if(r.startsWith("/"))return r;if(!r)return e;const t=e.split("/"),i=r.split("/"),n=i[i.length-1];(n===".."||n===".")&&i.push("");let s=t.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+i.slice(o-(o===i.length?1:0)).join("/")}var vv;(function(r){r.pop="pop",r.push="push"})(vv||(vv={}));var yv;(function(r){r.back="back",r.forward="forward",r.unknown=""})(yv||(yv={}));function aJ(r){if(!r)if(rf){const e=document.querySelector("base");r=e&&e.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),rJ(r)}const lJ=/^[^#]+#/;function cJ(r,e){return r.replace(lJ,"#")+e}function uJ(r,e){const t=document.documentElement.getBoundingClientRect(),i=r.getBoundingClientRect();return{behavior:e.behavior,left:i.left-t.left-(e.left||0),top:i.top-t.top-(e.top||0)}}const H1=()=>({left:window.pageXOffset,top:window.pageYOffset});function dJ(r){let e;if("el"in r){const t=r.el,i=typeof t=="string"&&t.startsWith("#"),n=typeof t=="string"?i?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!n)return;e=uJ(n,r)}else e=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function iD(r,e){return(history.state?history.state.position-e:-1)+r}const dM=new Map;function hJ(r,e){dM.set(r,e)}function pJ(r){const e=dM.get(r);return dM.delete(r),e}let fJ=()=>location.protocol+"//"+location.host;function nD(r,e){const{pathname:t,search:i,hash:n}=e,s=r.indexOf("#");if(s>-1){let o=n.includes(r.slice(s))?r.slice(s).length:1,a=n.slice(o);return a[0]!=="/"&&(a="/"+a),eD(a,"")}return eD(t,r)+i+n}function mJ(r,e,t,i){let n=[],s=[],o=null;const a=({state:h})=>{const p=nD(r,location),f=t.value,m=e.value;let g=0;if(h){if(t.value=p,e.value=h,o&&o===f){o=null;return}g=m?h.position-m.position:0}else i(p);n.forEach(v=>{v(t.value,f,{delta:g,type:vv.pop,direction:g?g>0?yv.forward:yv.back:yv.unknown})})};function l(){o=t.value}function c(h){n.push(h);const p=()=>{const f=n.indexOf(h);f>-1&&n.splice(f,1)};return s.push(p),p}function u(){const{history:h}=window;h.state&&h.replaceState(Jr({},h.state,{scroll:H1()}),"")}function d(){for(const h of s)h();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function sD(r,e,t,i=!1,n=!1){return{back:r,current:e,forward:t,replaced:i,position:window.history.length,scroll:n?H1():null}}function gJ(r){const{history:e,location:t}=window,i={value:nD(r,t)},n={value:e.state};n.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const d=r.indexOf("#"),h=d>-1?(t.host&&document.querySelector("base")?r:r.slice(d))+l:fJ()+r+l;try{e[u?"replaceState":"pushState"](c,"",h),n.value=c}catch(p){console.error(p),t[u?"replace":"assign"](h)}}function o(l,c){const u=Jr({},e.state,sD(n.value.back,l,n.value.forward,!0),c,{position:n.value.position});s(l,u,!0),i.value=l}function a(l,c){const u=Jr({},n.value,e.state,{forward:l,scroll:H1()});s(u.current,u,!0);const d=Jr({},sD(i.value,l,null),{position:u.position+1},c);s(l,d,!1),i.value=l}return{location:i,state:n,push:a,replace:o}}function vJ(r){r=aJ(r);const e=gJ(r),t=mJ(r,e.state,e.location,e.replace);function i(s,o=!0){o||t.pauseListeners(),history.go(s)}const n=Jr({location:"",base:r,go:i,createHref:cJ.bind(null,r)},e,t);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>e.state.value}),n}function yJ(r){return r=location.host?r||location.pathname+location.search:"",r.includes("#")||(r+="#"),vJ(r)}function bJ(r){return typeof r=="string"||r&&typeof r=="object"}function oD(r){return typeof r=="string"||typeof r=="symbol"}const nu={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},aD=Symbol("");var lD;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(lD||(lD={}));function sf(r,e){return Jr(new Error,{type:r,[aD]:!0},e)}function ec(r,e){return r instanceof Error&&aD in r&&(e==null||!!(r.type&e))}const cD="[^/]+?",xJ={sensitive:!1,strict:!1,start:!0,end:!0},wJ=/[.+*?^${}()[\]/\\]/g;function _J(r,e){const t=Jr({},xJ,e),i=[];let n=t.start?"^":"";const s=[];for(const c of r){const u=c.length?[]:[90];t.strict&&!c.length&&(n+="/");for(let d=0;d<c.length;d++){const h=c[d];let p=40+(t.sensitive?.25:0);if(h.type===0)d||(n+="/"),n+=h.value.replace(wJ,"\\$&"),p+=40;else if(h.type===1){const{value:f,repeatable:m,optional:g,regexp:v}=h;s.push({name:f,repeatable:m,optional:g});const x=v||cD;if(x!==cD){p+=10;try{new RegExp(`(${x})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${f}" (${x}): `+w.message)}}let b=m?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;d||(b=g&&c.length<2?`(?:/${b})`:"/"+b),g&&(b+="?"),n+=b,p+=20,g&&(p+=-8),m&&(p+=-20),x===".*"&&(p+=-50)}u.push(p)}i.push(u)}if(t.strict&&t.end){const c=i.length-1;i[c][i[c].length-1]+=.7000000000000001}t.strict||(n+="/?"),t.end?n+="$":t.strict&&(n+="(?:/|$)");const o=new RegExp(n,t.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",f=s[h-1];d[f.name]=p&&f.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const h of r){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of h)if(p.type===0)u+=p.value;else if(p.type===1){const{value:f,repeatable:m,optional:g}=p,v=f in c?c[f]:"";if(Ra(v)&&!m)throw new Error(`Provided param "${f}" is an array but it is not repeatable (* or + modifiers)`);const x=Ra(v)?v.join("/"):v;if(!x)if(g)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${f}"`);u+=x}}return u||"/"}return{re:o,score:i,keys:s,parse:a,stringify:l}}function SJ(r,e){let t=0;for(;t<r.length&&t<e.length;){const i=e[t]-r[t];if(i)return i;t++}return r.length<e.length?r.length===1&&r[0]===40+40?-1:1:r.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function TJ(r,e){let t=0;const i=r.score,n=e.score;for(;t<i.length&&t<n.length;){const s=SJ(i[t],n[t]);if(s)return s;t++}if(Math.abs(n.length-i.length)===1){if(uD(i))return 1;if(uD(n))return-1}return n.length-i.length}function uD(r){const e=r[r.length-1];return r.length>0&&e[e.length-1]<0}const MJ={type:0,value:""},EJ=/[a-zA-Z0-9_]/;function CJ(r){if(!r)return[[]];if(r==="/")return[[MJ]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function e(p){throw new Error(`ERR (${t})/"${c}": ${p}`)}let t=0,i=t;const n=[];let s;function o(){s&&n.push(s),s=[]}let a=0,l,c="",u="";function d(){c&&(t===0?s.push({type:0,value:c}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<r.length;){if(l=r[a++],l==="\\"&&t!==2){i=t,t=4;continue}switch(t){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),t=1):h();break;case 4:h(),t=i;break;case 1:l==="("?t=2:EJ.test(l)?h():(d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),n}function AJ(r,e,t){const i=_J(CJ(r.path),t),n=Jr(i,{record:r,parent:e,children:[],alias:[]});return e&&!n.record.aliasOf==!e.record.aliasOf&&e.children.push(n),n}function NJ(r,e){const t=[],i=new Map;e=pD({strict:!1,end:!0,sensitive:!1},e);function n(u){return i.get(u)}function s(u,d,h){const p=!h,f=RJ(u);f.aliasOf=h&&h.record;const m=pD(e,u),g=[f];if("alias"in u){const b=typeof u.alias=="string"?[u.alias]:u.alias;for(const w of b)g.push(Jr({},f,{components:h?h.record.components:f.components,path:w,aliasOf:h?h.record:f}))}let v,x;for(const b of g){const{path:w}=b;if(d&&w[0]!=="/"){const _=d.record.path,S=_[_.length-1]==="/"?"":"/";b.path=d.record.path+(w&&S+w)}if(v=AJ(b,d,m),h?h.alias.push(v):(x=x||v,x!==v&&x.alias.push(v),p&&u.name&&!hD(v)&&o(u.name)),f.children){const _=f.children;for(let S=0;S<_.length;S++)s(_[S],v,h&&h.children[S])}h=h||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&l(v)}return x?()=>{o(x)}:gv}function o(u){if(oD(u)){const d=i.get(u);d&&(i.delete(u),t.splice(t.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=t.indexOf(u);d>-1&&(t.splice(d,1),u.record.name&&i.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return t}function l(u){let d=0;for(;d<t.length&&TJ(u,t[d])>=0&&(u.record.path!==t[d].record.path||!fD(u,t[d]));)d++;t.splice(d,0,u),u.record.name&&!hD(u)&&i.set(u.record.name,u)}function c(u,d){let h,p={},f,m;if("name"in u&&u.name){if(h=i.get(u.name),!h)throw sf(1,{location:u});m=h.record.name,p=Jr(dD(d.params,h.keys.filter(x=>!x.optional).map(x=>x.name)),u.params&&dD(u.params,h.keys.map(x=>x.name))),f=h.stringify(p)}else if("path"in u)f=u.path,h=t.find(x=>x.re.test(f)),h&&(p=h.parse(f),m=h.record.name);else{if(h=d.name?i.get(d.name):t.find(x=>x.re.test(d.path)),!h)throw sf(1,{location:u,currentLocation:d});m=h.record.name,p=Jr({},d.params,u.params),f=h.stringify(p)}const g=[];let v=h;for(;v;)g.unshift(v.record),v=v.parent;return{name:m,path:f,params:p,matched:g,meta:LJ(g)}}return r.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:n}}function dD(r,e){const t={};for(const i of e)i in r&&(t[i]=r[i]);return t}function RJ(r){return{path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:void 0,beforeEnter:r.beforeEnter,props:kJ(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}}}function kJ(r){const e={},t=r.props||!1;if("component"in r)e.default=t;else for(const i in r.components)e[i]=typeof t=="object"?t[i]:t;return e}function hD(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function LJ(r){return r.reduce((e,t)=>Jr(e,t.meta),{})}function pD(r,e){const t={};for(const i in r)t[i]=i in e?e[i]:r[i];return t}function fD(r,e){return e.children.some(t=>t===r||fD(r,t))}const mD=/#/g,OJ=/&/g,PJ=/\//g,IJ=/=/g,DJ=/\?/g,gD=/\+/g,UJ=/%5B/g,FJ=/%5D/g,vD=/%5E/g,BJ=/%60/g,yD=/%7B/g,zJ=/%7C/g,bD=/%7D/g,VJ=/%20/g;function hM(r){return encodeURI(""+r).replace(zJ,"|").replace(UJ,"[").replace(FJ,"]")}function GJ(r){return hM(r).replace(yD,"{").replace(bD,"}").replace(vD,"^")}function pM(r){return hM(r).replace(gD,"%2B").replace(VJ,"+").replace(mD,"%23").replace(OJ,"%26").replace(BJ,"`").replace(yD,"{").replace(bD,"}").replace(vD,"^")}function jJ(r){return pM(r).replace(IJ,"%3D")}function HJ(r){return hM(r).replace(mD,"%23").replace(DJ,"%3F")}function WJ(r){return r==null?"":HJ(r).replace(PJ,"%2F")}function W1(r){try{return decodeURIComponent(""+r)}catch{}return""+r}function $J(r){const e={};if(r===""||r==="?")return e;const t=(r[0]==="?"?r.slice(1):r).split("&");for(let i=0;i<t.length;++i){const n=t[i].replace(gD," "),s=n.indexOf("="),o=W1(s<0?n:n.slice(0,s)),a=s<0?null:W1(n.slice(s+1));if(o in e){let l=e[o];Ra(l)||(l=e[o]=[l]),l.push(a)}else e[o]=a}return e}function xD(r){let e="";for(let t in r){const i=r[t];if(t=jJ(t),i==null){i!==void 0&&(e+=(e.length?"&":"")+t);continue}(Ra(i)?i.map(n=>n&&pM(n)):[i&&pM(i)]).forEach(n=>{n!==void 0&&(e+=(e.length?"&":"")+t,n!=null&&(e+="="+n))})}return e}function XJ(r){const e={};for(const t in r){const i=r[t];i!==void 0&&(e[t]=Ra(i)?i.map(n=>n==null?null:""+n):i==null?i:""+i)}return e}const qJ=Symbol(""),wD=Symbol(""),fM=Symbol(""),_D=Symbol(""),mM=Symbol("");function bv(){let r=[];function e(i){return r.push(i),()=>{const n=r.indexOf(i);n>-1&&r.splice(n,1)}}function t(){r=[]}return{add:e,list:()=>r.slice(),reset:t}}function su(r,e,t,i,n){const s=i&&(i.enterCallbacks[n]=i.enterCallbacks[n]||[]);return()=>new Promise((o,a)=>{const l=d=>{d===!1?a(sf(4,{from:t,to:e})):d instanceof Error?a(d):bJ(d)?a(sf(2,{from:e,to:d})):(s&&i.enterCallbacks[n]===s&&typeof d=="function"&&s.push(d),o())},c=r.call(i&&i.instances[n],e,t,l);let u=Promise.resolve(c);r.length<3&&(u=u.then(l)),u.catch(d=>a(d))})}function gM(r,e,t,i){const n=[];for(const s of r)for(const o in s.components){let a=s.components[o];if(!(e!=="beforeRouteEnter"&&!s.instances[o]))if(KJ(a)){const l=(a.__vccOpts||a)[e];l&&n.push(su(l,t,i,s,o))}else{let l=a();n.push(()=>l.then(c=>{if(!c)return Promise.reject(new Error(`Couldn't resolve component "${o}" at "${s.path}"`));const u=eJ(c)?c.default:c;s.components[o]=u;const d=(u.__vccOpts||u)[e];return d&&su(d,t,i,s,o)()}))}}return n}function KJ(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function SD(r){const e=ut(fM),t=ut(_D),i=I(()=>e.resolve(y(r.to))),n=I(()=>{const{matched:l}=i.value,{length:c}=l,u=l[c-1],d=t.matched;if(!u||!d.length)return-1;const h=d.findIndex(nf.bind(null,u));if(h>-1)return h;const p=TD(l[c-2]);return c>1&&TD(u)===p&&d[d.length-1].path!==p?d.findIndex(nf.bind(null,l[c-2])):h}),s=I(()=>n.value>-1&&QJ(t.params,i.value.params)),o=I(()=>n.value>-1&&n.value===t.matched.length-1&&tD(t.params,i.value.params));function a(l={}){return JJ(l)?e[y(r.replace)?"replace":"push"](y(r.to)).catch(gv):Promise.resolve()}return{route:i,href:I(()=>i.value.href),isActive:s,isExactActive:o,navigate:a}}const YJ=xe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:SD,setup(r,{slots:e}){const t=br(SD(r)),{options:i}=ut(fM),n=I(()=>({[MD(r.activeClass,i.linkActiveClass,"router-link-active")]:t.isActive,[MD(r.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return r.custom?s:yt("a",{"aria-current":t.isExactActive?r.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:n.value},s)}}}),ZJ=YJ;function JJ(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const e=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return r.preventDefault&&r.preventDefault(),!0}}function QJ(r,e){for(const t in e){const i=e[t],n=r[t];if(typeof i=="string"){if(i!==n)return!1}else if(!Ra(n)||n.length!==i.length||i.some((s,o)=>s!==n[o]))return!1}return!0}function TD(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const MD=(r,e,t)=>r??e??t,eQ=xe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:e,slots:t}){const i=ut(mM),n=I(()=>r.route||i.value),s=ut(wD,0),o=I(()=>{let c=y(s);const{matched:u}=n.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=I(()=>n.value.matched[o.value]);Yt(wD,I(()=>o.value+1)),Yt(qJ,a),Yt(mM,n);const l=W();return Ve(()=>[l.value,a.value,r.name],([c,u,d],[h,p,f])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!nf(u,p)||!h)&&(u.enterCallbacks[d]||[]).forEach(m=>m(c))},{flush:"post"}),()=>{const c=n.value,u=r.name,d=a.value,h=d&&d.components[u];if(!h)return ED(t.default,{Component:h,route:c});const p=d.props[u],f=p?p===!0?c.params:typeof p=="function"?p(c):p:null,m=yt(h,Jr({},f,e,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return ED(t.default,{Component:m,route:c})||m}}});function ED(r,e){if(!r)return null;const t=r(e);return t.length===1?t[0]:t}const tQ=eQ;function rQ(r){const e=NJ(r.routes,r),t=r.parseQuery||$J,i=r.stringifyQuery||xD,n=r.history,s=bv(),o=bv(),a=bv(),l=Vr(nu);let c=nu;rf&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=cM.bind(null,K=>""+K),d=cM.bind(null,WJ),h=cM.bind(null,W1);function p(K,q){let ce,Te;return oD(K)?(ce=e.getRecordMatcher(K),Te=q):Te=K,e.addRoute(Te,ce)}function f(K){const q=e.getRecordMatcher(K);q&&e.removeRoute(q)}function m(){return e.getRoutes().map(K=>K.record)}function g(K){return!!e.getRecordMatcher(K)}function v(K,q){if(q=Jr({},q||l.value),typeof K=="string"){const re=uM(t,K,q.path),te=e.resolve({path:re.path},q),le=n.createHref(re.fullPath);return Jr(re,te,{params:h(te.params),hash:W1(re.hash),redirectedFrom:void 0,href:le})}let ce;if("path"in K)ce=Jr({},K,{path:uM(t,K.path,q.path).path});else{const re=Jr({},K.params);for(const te in re)re[te]==null&&delete re[te];ce=Jr({},K,{params:d(re)}),q.params=d(q.params)}const Te=e.resolve(ce,q),Z=K.hash||"";Te.params=u(h(Te.params));const L=iJ(i,Jr({},K,{hash:GJ(Z),path:Te.path})),$=n.createHref(L);return Jr({fullPath:L,hash:Z,query:i===xD?XJ(K.query):K.query||{}},Te,{redirectedFrom:void 0,href:$})}function x(K){return typeof K=="string"?uM(t,K,l.value.path):Jr({},K)}function b(K,q){if(c!==K)return sf(8,{from:q,to:K})}function w(K){return T(K)}function _(K){return w(Jr(x(K),{replace:!0}))}function S(K){const q=K.matched[K.matched.length-1];if(q&&q.redirect){const{redirect:ce}=q;let Te=typeof ce=="function"?ce(K):ce;return typeof Te=="string"&&(Te=Te.includes("?")||Te.includes("#")?Te=x(Te):{path:Te},Te.params={}),Jr({query:K.query,hash:K.hash,params:"path"in Te?{}:K.params},Te)}}function T(K,q){const ce=c=v(K),Te=l.value,Z=K.state,L=K.force,$=K.replace===!0,re=S(ce);if(re)return T(Jr(x(re),{state:typeof re=="object"?Jr({},Z,re.state):Z,force:L,replace:$}),q||ce);const te=ce;te.redirectedFrom=q;let le;return!L&&nJ(i,Te,ce)&&(le=sf(16,{to:te,from:Te}),U(Te,Te,!0,!1)),(le?Promise.resolve(le):C(te,Te)).catch(ge=>ec(ge)?ec(ge,2)?ge:V(ge):z(ge,te,Te)).then(ge=>{if(ge){if(ec(ge,2))return T(Jr({replace:$},x(ge.to),{state:typeof ge.to=="object"?Jr({},Z,ge.to.state):Z,force:L}),q||te)}else ge=A(te,Te,!0,$,Z);return P(te,Te,ge),ge})}function M(K,q){const ce=b(K,q);return ce?Promise.reject(ce):Promise.resolve()}function E(K){const q=ie.values().next().value;return q&&typeof q.runWithContext=="function"?q.runWithContext(K):K()}function C(K,q){let ce;const[Te,Z,L]=iQ(K,q);ce=gM(Te.reverse(),"beforeRouteLeave",K,q);for(const re of Te)re.leaveGuards.forEach(te=>{ce.push(su(te,K,q))});const $=M.bind(null,K,q);return ce.push($),de(ce).then(()=>{ce=[];for(const re of s.list())ce.push(su(re,K,q));return ce.push($),de(ce)}).then(()=>{ce=gM(Z,"beforeRouteUpdate",K,q);for(const re of Z)re.updateGuards.forEach(te=>{ce.push(su(te,K,q))});return ce.push($),de(ce)}).then(()=>{ce=[];for(const re of L)if(re.beforeEnter)if(Ra(re.beforeEnter))for(const te of re.beforeEnter)ce.push(su(te,K,q));else ce.push(su(re.beforeEnter,K,q));return ce.push($),de(ce)}).then(()=>(K.matched.forEach(re=>re.enterCallbacks={}),ce=gM(L,"beforeRouteEnter",K,q),ce.push($),de(ce))).then(()=>{ce=[];for(const re of o.list())ce.push(su(re,K,q));return ce.push($),de(ce)}).catch(re=>ec(re,8)?re:Promise.reject(re))}function P(K,q,ce){a.list().forEach(Te=>E(()=>Te(K,q,ce)))}function A(K,q,ce,Te,Z){const L=b(K,q);if(L)return L;const $=q===nu,re=rf?history.state:{};ce&&(Te||$?n.replace(K.fullPath,Jr({scroll:$&&re&&re.scroll},Z)):n.push(K.fullPath,Z)),l.value=K,U(K,q,ce,$),V()}let N;function R(){N||(N=n.listen((K,q,ce)=>{if(!se.listening)return;const Te=v(K),Z=S(Te);if(Z){T(Jr(Z,{replace:!0}),Te).catch(gv);return}c=Te;const L=l.value;rf&&hJ(iD(L.fullPath,ce.delta),H1()),C(Te,L).catch($=>ec($,12)?$:ec($,2)?(T($.to,Te).then(re=>{ec(re,20)&&!ce.delta&&ce.type===vv.pop&&n.go(-1,!1)}).catch(gv),Promise.reject()):(ce.delta&&n.go(-ce.delta,!1),z($,Te,L))).then($=>{$=$||A(Te,L,!1),$&&(ce.delta&&!ec($,8)?n.go(-ce.delta,!1):ce.type===vv.pop&&ec($,20)&&n.go(-1,!1)),P(Te,L,$)}).catch(gv)}))}let F=bv(),B=bv(),k;function z(K,q,ce){V(K);const Te=B.list();return Te.length?Te.forEach(Z=>Z(K,q,ce)):console.error(K),Promise.reject(K)}function O(){return k&&l.value!==nu?Promise.resolve():new Promise((K,q)=>{F.add([K,q])})}function V(K){return k||(k=!K,R(),F.list().forEach(([q,ce])=>K?ce(K):q()),F.reset()),K}function U(K,q,ce,Te){const{scrollBehavior:Z}=r;if(!rf||!Z)return Promise.resolve();const L=!ce&&pJ(iD(K.fullPath,0))||(Te||!ce)&&history.state&&history.state.scroll||null;return ht().then(()=>Z(K,q,L)).then($=>$&&dJ($)).catch($=>z($,K,q))}const G=K=>n.go(K);let X;const ie=new Set,se={currentRoute:l,listening:!0,addRoute:p,removeRoute:f,hasRoute:g,getRoutes:m,resolve:v,options:r,push:w,replace:_,go:G,back:()=>G(-1),forward:()=>G(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:B.add,isReady:O,install(K){const q=this;K.component("RouterLink",ZJ),K.component("RouterView",tQ),K.config.globalProperties.$router=q,Object.defineProperty(K.config.globalProperties,"$route",{enumerable:!0,get:()=>y(l)}),rf&&!X&&l.value===nu&&(X=!0,w(n.location).catch(Z=>{}));const ce={};for(const Z in nu)Object.defineProperty(ce,Z,{get:()=>l.value[Z],enumerable:!0});K.provide(fM,q),K.provide(_D,kT(ce)),K.provide(mM,l);const Te=K.unmount;ie.add(K),K.unmount=function(){ie.delete(K),ie.size<1&&(c=nu,N&&N(),N=null,l.value=nu,X=!1,k=!1),Te()}}};function de(K){return K.reduce((q,ce)=>q.then(()=>E(ce)),Promise.resolve())}return se}function iQ(r,e){const t=[],i=[],n=[],s=Math.max(e.matched.length,r.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(r.matched.find(c=>nf(c,a))?i.push(a):t.push(a));const l=r.matched[o];l&&(e.matched.find(c=>nf(c,l))||n.push(l))}return[t,i,n]}const nQ='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',sQ=r=>getComputedStyle(r).position==="fixed"?!1:r.offsetParent!==null,CD=r=>Array.from(r.querySelectorAll(nQ)).filter(e=>oQ(e)&&sQ(e)),oQ=r=>{if(r.tabIndex>0||r.tabIndex===0&&r.getAttribute("tabIndex")!==null)return!0;if(r.disabled)return!1;switch(r.nodeName){case"A":return!!r.href&&r.rel!=="ignore";case"INPUT":return!(r.type==="hidden"||r.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},$1=function(r,e,...t){let i;e.includes("mouse")||e.includes("click")?i="MouseEvents":e.includes("key")?i="KeyboardEvent":i="HTMLEvents";const n=document.createEvent(i);return n.initEvent(e,...t),r.dispatchEvent(n),r},AD=r=>!r.getAttribute("aria-owns"),ND=(r,e,t)=>{const{parentNode:i}=r;if(!i)return null;const n=i.querySelectorAll(t),s=Array.prototype.indexOf.call(n,r);return n[s+e]||null},X1=r=>{r&&(r.focus(),!AD(r)&&r.click())},hi=(r,e,{checkForDefaultPrevented:t=!0}={})=>i=>{const n=r==null?void 0:r(i);if(t===!1||!n)return e==null?void 0:e(i)},RD=r=>e=>e.pointerType==="mouse"?r(e):void 0;var aQ=Object.defineProperty,lQ=Object.defineProperties,cQ=Object.getOwnPropertyDescriptors,kD=Object.getOwnPropertySymbols,uQ=Object.prototype.hasOwnProperty,dQ=Object.prototype.propertyIsEnumerable,LD=(r,e,t)=>e in r?aQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,hQ=(r,e)=>{for(var t in e||(e={}))uQ.call(e,t)&&LD(r,t,e[t]);if(kD)for(var t of kD(e))dQ.call(e,t)&&LD(r,t,e[t]);return r},pQ=(r,e)=>lQ(r,cQ(e));function OD(r,e){var t;const i=Vr();return wo(()=>{i.value=r()},pQ(hQ({},e),{flush:(t=e==null?void 0:e.flush)!=null?t:"sync"})),$p(i)}var PD;const ar=typeof window<"u",fQ=r=>typeof r<"u",mQ=r=>typeof r=="function",gQ=r=>typeof r=="string",of=()=>{},ID=ar&&((PD=window==null?void 0:window.navigator)==null?void 0:PD.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ou(r){return typeof r=="function"?r():y(r)}function DD(r,e){function t(...i){return new Promise((n,s)=>{Promise.resolve(r(()=>e.apply(this,i),{fn:e,thisArg:this,args:i})).then(n).catch(s)})}return t}function vQ(r,e={}){let t,i,n=of;const s=o=>{clearTimeout(o),n(),n=of};return o=>{const a=ou(r),l=ou(e.maxWait);return t&&s(t),a<=0||l!==void 0&&l<=0?(i&&(s(i),i=null),Promise.resolve(o())):new Promise((c,u)=>{n=e.rejectOnCancel?u:c,l&&!i&&(i=setTimeout(()=>{t&&s(t),i=null,c(o())},l)),t=setTimeout(()=>{i&&s(i),i=null,c(o())},a)})}}function yQ(r,e=!0,t=!0,i=!1){let n=0,s,o=!0,a=of,l;const c=()=>{s&&(clearTimeout(s),s=void 0,a(),a=of)};return u=>{const d=ou(r),h=Date.now()-n,p=()=>l=u();return c(),d<=0?(n=Date.now(),p()):(h>d&&(t||!o)?(n=Date.now(),p()):e&&(l=new Promise((f,m)=>{a=i?m:f,s=setTimeout(()=>{n=Date.now(),o=!0,f(p()),c()},Math.max(0,d-h))})),!t&&!s&&(s=setTimeout(()=>o=!0,d)),o=!1,l)}}function bQ(r){return r}function q1(r){return uP()?(dP(r),!0):!1}function xQ(r,e=200,t={}){return DD(vQ(e,t),r)}function wQ(r,e=200,t={}){const i=W(r.value),n=xQ(()=>{i.value=r.value},e,t);return Ve(r,()=>n()),i}function UD(r,e=200,t=!1,i=!0,n=!1){return DD(yQ(e,t,i,n),r)}function vM(r,e=!0){Dt()?Et(r):e?r():ht(r)}function Ud(r,e,t={}){const{immediate:i=!0}=t,n=W(!1);let s=null;function o(){s&&(clearTimeout(s),s=null)}function a(){n.value=!1,o()}function l(...c){o(),n.value=!0,s=setTimeout(()=>{n.value=!1,s=null,r(...c)},ou(e))}return i&&(n.value=!0,ar&&l()),q1(a),{isPending:$p(n),start:l,stop:a}}function _o(r){var e;const t=ou(r);return(e=t==null?void 0:t.$el)!=null?e:t}const af=ar?window:void 0,_Q=ar?window.document:void 0;function Qr(...r){let e,t,i,n;if(gQ(r[0])||Array.isArray(r[0])?([t,i,n]=r,e=af):[e,t,i,n]=r,!e)return of;Array.isArray(t)||(t=[t]),Array.isArray(i)||(i=[i]);const s=[],o=()=>{s.forEach(u=>u()),s.length=0},a=(u,d,h,p)=>(u.addEventListener(d,h,p),()=>u.removeEventListener(d,h,p)),l=Ve(()=>[_o(e),ou(n)],([u,d])=>{o(),u&&s.push(...t.flatMap(h=>i.map(p=>a(u,h,p,d))))},{immediate:!0,flush:"post"}),c=()=>{l(),o()};return q1(c),c}let FD=!1;function yM(r,e,t={}){const{window:i=af,ignore:n=[],capture:s=!0,detectIframe:o=!1}=t;if(!i)return;ID&&!FD&&(FD=!0,Array.from(i.document.body.children).forEach(u=>u.addEventListener("click",of)));let a=!0;const l=u=>n.some(d=>{if(typeof d=="string")return Array.from(i.document.querySelectorAll(d)).some(h=>h===u.target||u.composedPath().includes(h));{const h=_o(d);return h&&(u.target===h||u.composedPath().includes(h))}}),c=[Qr(i,"click",u=>{const d=_o(r);if(!(!d||d===u.target||u.composedPath().includes(d))){if(u.detail===0&&(a=!l(u)),!a){a=!0;return}e(u)}},{passive:!0,capture:s}),Qr(i,"pointerdown",u=>{const d=_o(r);d&&(a=!u.composedPath().includes(d)&&!l(u))},{passive:!0}),o&&Qr(i,"blur",u=>{var d;const h=_o(r);((d=i.document.activeElement)==null?void 0:d.tagName)==="IFRAME"&&!(h!=null&&h.contains(i.document.activeElement))&&e(u)})].filter(Boolean);return()=>c.forEach(u=>u())}function SQ(r,e=!1){const t=W(),i=()=>t.value=!!r();return i(),vM(i,e),t}function TQ(r){return JSON.parse(JSON.stringify(r))}const BD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},zD="__vueuse_ssr_handlers__";BD[zD]=BD[zD]||{};function MQ(r,e,{window:t=af,initialValue:i=""}={}){const n=W(i),s=I(()=>{var o;return _o(e)||((o=t==null?void 0:t.document)==null?void 0:o.documentElement)});return Ve([s,()=>ou(r)],([o,a])=>{var l;if(o&&t){const c=(l=t.getComputedStyle(o).getPropertyValue(a))==null?void 0:l.trim();n.value=c||i}},{immediate:!0}),Ve(n,o=>{var a;(a=s.value)!=null&&a.style&&s.value.style.setProperty(ou(r),o)}),n}function EQ({document:r=_Q}={}){if(!r)return W("visible");const e=W(r.visibilityState);return Qr(r,"visibilitychange",()=>{e.value=r.visibilityState}),e}var VD=Object.getOwnPropertySymbols,CQ=Object.prototype.hasOwnProperty,AQ=Object.prototype.propertyIsEnumerable,NQ=(r,e)=>{var t={};for(var i in r)CQ.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&VD)for(var i of VD(r))e.indexOf(i)<0&&AQ.call(r,i)&&(t[i]=r[i]);return t};function cs(r,e,t={}){const i=t,{window:n=af}=i,s=NQ(i,["window"]);let o;const a=SQ(()=>n&&"ResizeObserver"in n),l=()=>{o&&(o.disconnect(),o=void 0)},c=Ve(()=>_o(r),d=>{l(),a.value&&n&&d&&(o=new ResizeObserver(e),o.observe(d,s))},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return q1(u),{isSupported:a,stop:u}}function GD(r,e={}){const{reset:t=!0,windowResize:i=!0,windowScroll:n=!0,immediate:s=!0}=e,o=W(0),a=W(0),l=W(0),c=W(0),u=W(0),d=W(0),h=W(0),p=W(0);function f(){const m=_o(r);if(!m){t&&(o.value=0,a.value=0,l.value=0,c.value=0,u.value=0,d.value=0,h.value=0,p.value=0);return}const g=m.getBoundingClientRect();o.value=g.height,a.value=g.bottom,l.value=g.left,c.value=g.right,u.value=g.top,d.value=g.width,h.value=g.x,p.value=g.y}return cs(r,f),Ve(()=>_o(r),m=>!m&&f()),n&&Qr("scroll",f,{capture:!0,passive:!0}),i&&Qr("resize",f,{passive:!0}),vM(()=>{s&&f()}),{height:o,bottom:a,left:l,right:c,top:u,width:d,x:h,y:p,update:f}}var jD;(function(r){r.UP="UP",r.RIGHT="RIGHT",r.DOWN="DOWN",r.LEFT="LEFT",r.NONE="NONE"})(jD||(jD={}));var RQ=Object.defineProperty,HD=Object.getOwnPropertySymbols,kQ=Object.prototype.hasOwnProperty,LQ=Object.prototype.propertyIsEnumerable,WD=(r,e,t)=>e in r?RQ(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,OQ=(r,e)=>{for(var t in e||(e={}))kQ.call(e,t)&&WD(r,t,e[t]);if(HD)for(var t of HD(e))LQ.call(e,t)&&WD(r,t,e[t]);return r};OQ({linear:bQ},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function PQ(r,e,t,i={}){var n,s,o;const{clone:a=!1,passive:l=!1,eventName:c,deep:u=!1,defaultValue:d}=i,h=Dt(),p=t||(h==null?void 0:h.emit)||((n=h==null?void 0:h.$emit)==null?void 0:n.bind(h))||((o=(s=h==null?void 0:h.proxy)==null?void 0:s.$emit)==null?void 0:o.bind(h==null?void 0:h.proxy));let f=c;e||(e="modelValue"),f=c||f||`update:${e.toString()}`;const m=v=>a?mQ(a)?a(v):TQ(v):v,g=()=>fQ(r[e])?m(r[e]):d;if(l){const v=g(),x=W(v);return Ve(()=>r[e],b=>x.value=m(b)),Ve(x,b=>{(b!==r[e]||u)&&p(f,b)},{deep:u}),x}else return I({get(){return g()},set(v){p(f,v)}})}function IQ({window:r=af}={}){if(!r)return W(!1);const e=W(r.document.hasFocus());return Qr(r,"blur",()=>{e.value=!1}),Qr(r,"focus",()=>{e.value=!0}),e}function DQ(r={}){const{window:e=af,initialWidth:t=1/0,initialHeight:i=1/0,listenOrientation:n=!0,includeScrollbar:s=!0}=r,o=W(t),a=W(i),l=()=>{e&&(s?(o.value=e.innerWidth,a.value=e.innerHeight):(o.value=e.document.documentElement.clientWidth,a.value=e.document.documentElement.clientHeight))};return l(),vM(l),Qr("resize",l,{passive:!0}),n&&Qr("orientationchange",l,{passive:!0}),{width:o,height:a}}const $D=()=>ar&&/firefox/i.test(window.navigator.userAgent),UQ=(r,e)=>{if(!ar||!r||!e)return!1;const t=r.getBoundingClientRect();let i;return e instanceof Element?i=e.getBoundingClientRect():i={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},t.top<i.bottom&&t.bottom>i.top&&t.right>i.left&&t.left<i.right},XD=r=>{let e=0,t=r;for(;t;)e+=t.offsetTop,t=t.offsetParent;return e},FQ=(r,e)=>Math.abs(XD(r)-XD(e)),bM=r=>{let e,t;return r.type==="touchend"?(t=r.changedTouches[0].clientY,e=r.changedTouches[0].clientX):r.type.startsWith("touch")?(t=r.touches[0].clientY,e=r.touches[0].clientX):(t=r.clientY,e=r.clientX),{clientX:e,clientY:t}};var BQ=typeof global=="object"&&global&&global.Object===Object&&global;const qD=BQ;var zQ=typeof self=="object"&&self&&self.Object===Object&&self,VQ=qD||zQ||Function("return this")();const ka=VQ;var GQ=ka.Symbol;const Zo=GQ;var KD=Object.prototype,jQ=KD.hasOwnProperty,HQ=KD.toString,xv=Zo?Zo.toStringTag:void 0;function WQ(r){var e=jQ.call(r,xv),t=r[xv];try{r[xv]=void 0;var i=!0}catch{}var n=HQ.call(r);return i&&(e?r[xv]=t:delete r[xv]),n}var $Q=Object.prototype,XQ=$Q.toString;function qQ(r){return XQ.call(r)}var KQ="[object Null]",YQ="[object Undefined]",YD=Zo?Zo.toStringTag:void 0;function Fd(r){return r==null?r===void 0?YQ:KQ:YD&&YD in Object(r)?WQ(r):qQ(r)}function ml(r){return r!=null&&typeof r=="object"}var ZQ="[object Symbol]";function K1(r){return typeof r=="symbol"||ml(r)&&Fd(r)==ZQ}function ZD(r,e){for(var t=-1,i=r==null?0:r.length,n=Array(i);++t<i;)n[t]=e(r[t],t,r);return n}var JQ=Array.isArray;const Ts=JQ;var QQ=1/0,JD=Zo?Zo.prototype:void 0,QD=JD?JD.toString:void 0;function e4(r){if(typeof r=="string")return r;if(Ts(r))return ZD(r,e4)+"";if(K1(r))return QD?QD.call(r):"";var e=r+"";return e=="0"&&1/r==-QQ?"-0":e}var eee=/\s/;function tee(r){for(var e=r.length;e--&&eee.test(r.charAt(e)););return e}var ree=/^\s+/;function iee(r){return r&&r.slice(0,tee(r)+1).replace(ree,"")}function Ms(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var t4=0/0,nee=/^[-+]0x[0-9a-f]+$/i,see=/^0b[01]+$/i,oee=/^0o[0-7]+$/i,aee=parseInt;function xM(r){if(typeof r=="number")return r;if(K1(r))return t4;if(Ms(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Ms(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=iee(r);var t=see.test(r);return t||oee.test(r)?aee(r.slice(2),t?2:8):nee.test(r)?t4:+r}var r4=1/0,lee=17976931348623157e292;function cee(r){if(!r)return r===0?r:0;if(r=xM(r),r===r4||r===-r4){var e=r<0?-1:1;return e*lee}return r===r?r:0}function uee(r){var e=cee(r),t=e%1;return e===e?t?e-t:e:0}function wM(r){return r}var dee="[object AsyncFunction]",hee="[object Function]",pee="[object GeneratorFunction]",fee="[object Proxy]";function _M(r){if(!Ms(r))return!1;var e=Fd(r);return e==hee||e==pee||e==dee||e==fee}var mee=ka["__core-js_shared__"];const SM=mee;var i4=function(){var r=/[^.]+$/.exec(SM&&SM.keys&&SM.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function gee(r){return!!i4&&i4 in r}var vee=Function.prototype,yee=vee.toString;function Bd(r){if(r!=null){try{return yee.call(r)}catch{}try{return r+""}catch{}}return""}var bee=/[\\^$.*+?()[\]{}|]/g,xee=/^\[object .+?Constructor\]$/,wee=Function.prototype,_ee=Object.prototype,See=wee.toString,Tee=_ee.hasOwnProperty,Mee=RegExp("^"+See.call(Tee).replace(bee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Eee(r){if(!Ms(r)||gee(r))return!1;var e=_M(r)?Mee:xee;return e.test(Bd(r))}function Cee(r,e){return r==null?void 0:r[e]}function zd(r,e){var t=Cee(r,e);return Eee(t)?t:void 0}var Aee=zd(ka,"WeakMap");const TM=Aee;var n4=Object.create,Nee=function(){function r(){}return function(e){if(!Ms(e))return{};if(n4)return n4(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}();const Ree=Nee;function kee(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}function Lee(){}function s4(r,e){var t=-1,i=r.length;for(e||(e=Array(i));++t<i;)e[t]=r[t];return e}var Oee=800,Pee=16,Iee=Date.now;function Dee(r){var e=0,t=0;return function(){var i=Iee(),n=Pee-(i-t);if(t=i,n>0){if(++e>=Oee)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}function Uee(r){return function(){return r}}var Fee=function(){try{var r=zd(Object,"defineProperty");return r({},"",{}),r}catch{}}();const Y1=Fee;var Bee=Y1?function(r,e){return Y1(r,"toString",{configurable:!0,enumerable:!1,value:Uee(e),writable:!0})}:wM,zee=Dee(Bee);const o4=zee;function Vee(r,e){for(var t=-1,i=r==null?0:r.length;++t<i&&e(r[t],t,r)!==!1;);return r}function a4(r,e,t,i){for(var n=r.length,s=t+(i?1:-1);i?s--:++s<n;)if(e(r[s],s,r))return s;return-1}function Gee(r){return r!==r}function jee(r,e,t){for(var i=t-1,n=r.length;++i<n;)if(r[i]===e)return i;return-1}function Hee(r,e,t){return e===e?jee(r,e,t):a4(r,Gee,t)}function Wee(r,e){var t=r==null?0:r.length;return!!t&&Hee(r,e,0)>-1}var $ee=9007199254740991,Xee=/^(?:0|[1-9]\d*)$/;function Z1(r,e){var t=typeof r;return e=e??$ee,!!e&&(t=="number"||t!="symbol"&&Xee.test(r))&&r>-1&&r%1==0&&r<e}function MM(r,e,t){e=="__proto__"&&Y1?Y1(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}function wv(r,e){return r===e||r!==r&&e!==e}var qee=Object.prototype,Kee=qee.hasOwnProperty;function EM(r,e,t){var i=r[e];(!(Kee.call(r,e)&&wv(i,t))||t===void 0&&!(e in r))&&MM(r,e,t)}function _v(r,e,t,i){var n=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(t[a],r[a],a,t,r):void 0;l===void 0&&(l=r[a]),n?MM(t,a,l):EM(t,a,l)}return t}var l4=Math.max;function c4(r,e,t){return e=l4(e===void 0?r.length-1:e,0),function(){for(var i=arguments,n=-1,s=l4(i.length-e,0),o=Array(s);++n<s;)o[n]=i[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=i[n];return a[e]=t(o),kee(r,this,a)}}function u4(r,e){return o4(c4(r,e,wM),r+"")}var Yee=9007199254740991;function CM(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=Yee}function lf(r){return r!=null&&CM(r.length)&&!_M(r)}function Zee(r,e,t){if(!Ms(t))return!1;var i=typeof e;return(i=="number"?lf(t)&&Z1(e,t.length):i=="string"&&e in t)?wv(t[e],r):!1}function Jee(r){return u4(function(e,t){var i=-1,n=t.length,s=n>1?t[n-1]:void 0,o=n>2?t[2]:void 0;for(s=r.length>3&&typeof s=="function"?(n--,s):void 0,o&&Zee(t[0],t[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);++i<n;){var a=t[i];a&&r(e,a,i,s)}return e})}var Qee=Object.prototype;function AM(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||Qee;return r===t}function ete(r,e){for(var t=-1,i=Array(r);++t<r;)i[t]=e(t);return i}var tte="[object Arguments]";function d4(r){return ml(r)&&Fd(r)==tte}var h4=Object.prototype,rte=h4.hasOwnProperty,ite=h4.propertyIsEnumerable,nte=d4(function(){return arguments}())?d4:function(r){return ml(r)&&rte.call(r,"callee")&&!ite.call(r,"callee")};const Sv=nte;function ste(){return!1}var p4=typeof Wo=="object"&&Wo&&!Wo.nodeType&&Wo,f4=p4&&typeof $o=="object"&&$o&&!$o.nodeType&&$o,ote=f4&&f4.exports===p4,m4=ote?ka.Buffer:void 0,ate=m4?m4.isBuffer:void 0,lte=ate||ste;const Tv=lte;var cte="[object Arguments]",ute="[object Array]",dte="[object Boolean]",hte="[object Date]",pte="[object Error]",fte="[object Function]",mte="[object Map]",gte="[object Number]",vte="[object Object]",yte="[object RegExp]",bte="[object Set]",xte="[object String]",wte="[object WeakMap]",_te="[object ArrayBuffer]",Ste="[object DataView]",Tte="[object Float32Array]",Mte="[object Float64Array]",Ete="[object Int8Array]",Cte="[object Int16Array]",Ate="[object Int32Array]",Nte="[object Uint8Array]",Rte="[object Uint8ClampedArray]",kte="[object Uint16Array]",Lte="[object Uint32Array]",bi={};bi[Tte]=bi[Mte]=bi[Ete]=bi[Cte]=bi[Ate]=bi[Nte]=bi[Rte]=bi[kte]=bi[Lte]=!0,bi[cte]=bi[ute]=bi[_te]=bi[dte]=bi[Ste]=bi[hte]=bi[pte]=bi[fte]=bi[mte]=bi[gte]=bi[vte]=bi[yte]=bi[bte]=bi[xte]=bi[wte]=!1;function Ote(r){return ml(r)&&CM(r.length)&&!!bi[Fd(r)]}function NM(r){return function(e){return r(e)}}var g4=typeof Wo=="object"&&Wo&&!Wo.nodeType&&Wo,Mv=g4&&typeof $o=="object"&&$o&&!$o.nodeType&&$o,Pte=Mv&&Mv.exports===g4,RM=Pte&&qD.process,Ite=function(){try{var r=Mv&&Mv.require&&Mv.require("util").types;return r||RM&&RM.binding&&RM.binding("util")}catch{}}();const cf=Ite;var v4=cf&&cf.isTypedArray,Dte=v4?NM(v4):Ote;const kM=Dte;var Ute=Object.prototype,Fte=Ute.hasOwnProperty;function y4(r,e){var t=Ts(r),i=!t&&Sv(r),n=!t&&!i&&Tv(r),s=!t&&!i&&!n&&kM(r),o=t||i||n||s,a=o?ete(r.length,String):[],l=a.length;for(var c in r)(e||Fte.call(r,c))&&!(o&&(c=="length"||n&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Z1(c,l)))&&a.push(c);return a}function b4(r,e){return function(t){return r(e(t))}}var Bte=b4(Object.keys,Object);const zte=Bte;var Vte=Object.prototype,Gte=Vte.hasOwnProperty;function jte(r){if(!AM(r))return zte(r);var e=[];for(var t in Object(r))Gte.call(r,t)&&t!="constructor"&&e.push(t);return e}function Ev(r){return lf(r)?y4(r):jte(r)}function Hte(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var Wte=Object.prototype,$te=Wte.hasOwnProperty;function Xte(r){if(!Ms(r))return Hte(r);var e=AM(r),t=[];for(var i in r)i=="constructor"&&(e||!$te.call(r,i))||t.push(i);return t}function Cv(r){return lf(r)?y4(r,!0):Xte(r)}var qte=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Kte=/^\w*$/;function LM(r,e){if(Ts(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||K1(r)?!0:Kte.test(r)||!qte.test(r)||e!=null&&r in Object(e)}var Yte=zd(Object,"create");const Av=Yte;function Zte(){this.__data__=Av?Av(null):{},this.size=0}function Jte(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var Qte="__lodash_hash_undefined__",ere=Object.prototype,tre=ere.hasOwnProperty;function rre(r){var e=this.__data__;if(Av){var t=e[r];return t===Qte?void 0:t}return tre.call(e,r)?e[r]:void 0}var ire=Object.prototype,nre=ire.hasOwnProperty;function sre(r){var e=this.__data__;return Av?e[r]!==void 0:nre.call(e,r)}var ore="__lodash_hash_undefined__";function are(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=Av&&e===void 0?ore:e,this}function Vd(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}Vd.prototype.clear=Zte,Vd.prototype.delete=Jte,Vd.prototype.get=rre,Vd.prototype.has=sre,Vd.prototype.set=are;function lre(){this.__data__=[],this.size=0}function J1(r,e){for(var t=r.length;t--;)if(wv(r[t][0],e))return t;return-1}var cre=Array.prototype,ure=cre.splice;function dre(r){var e=this.__data__,t=J1(e,r);if(t<0)return!1;var i=e.length-1;return t==i?e.pop():ure.call(e,t,1),--this.size,!0}function hre(r){var e=this.__data__,t=J1(e,r);return t<0?void 0:e[t][1]}function pre(r){return J1(this.__data__,r)>-1}function fre(r,e){var t=this.__data__,i=J1(t,r);return i<0?(++this.size,t.push([r,e])):t[i][1]=e,this}function tc(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}tc.prototype.clear=lre,tc.prototype.delete=dre,tc.prototype.get=hre,tc.prototype.has=pre,tc.prototype.set=fre;var mre=zd(ka,"Map");const Nv=mre;function gre(){this.size=0,this.__data__={hash:new Vd,map:new(Nv||tc),string:new Vd}}function vre(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}function Q1(r,e){var t=r.__data__;return vre(e)?t[typeof e=="string"?"string":"hash"]:t.map}function yre(r){var e=Q1(this,r).delete(r);return this.size-=e?1:0,e}function bre(r){return Q1(this,r).get(r)}function xre(r){return Q1(this,r).has(r)}function wre(r,e){var t=Q1(this,r),i=t.size;return t.set(r,e),this.size+=t.size==i?0:1,this}function rc(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var i=r[e];this.set(i[0],i[1])}}rc.prototype.clear=gre,rc.prototype.delete=yre,rc.prototype.get=bre,rc.prototype.has=xre,rc.prototype.set=wre;var _re="Expected a function";function ex(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(_re);var t=function(){var i=arguments,n=e?e.apply(this,i):i[0],s=t.cache;if(s.has(n))return s.get(n);var o=r.apply(this,i);return t.cache=s.set(n,o)||s,o};return t.cache=new(ex.Cache||rc),t}ex.Cache=rc;var Sre=500;function Tre(r){var e=ex(r,function(i){return t.size===Sre&&t.clear(),i}),t=e.cache;return e}var Mre=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ere=/\\(\\)?/g,Cre=Tre(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(Mre,function(t,i,n,s){e.push(n?s.replace(Ere,"$1"):i||t)}),e});const Are=Cre;function Nre(r){return r==null?"":e4(r)}function tx(r,e){return Ts(r)?r:LM(r,e)?[r]:Are(Nre(r))}var Rre=1/0;function Rv(r){if(typeof r=="string"||K1(r))return r;var e=r+"";return e=="0"&&1/r==-Rre?"-0":e}function OM(r,e){e=tx(e,r);for(var t=0,i=e.length;r!=null&&t<i;)r=r[Rv(e[t++])];return t&&t==i?r:void 0}function ti(r,e,t){var i=r==null?void 0:OM(r,e);return i===void 0?t:i}function PM(r,e){for(var t=-1,i=e.length,n=r.length;++t<i;)r[n+t]=e[t];return r}var x4=Zo?Zo.isConcatSpreadable:void 0;function kre(r){return Ts(r)||Sv(r)||!!(x4&&r&&r[x4])}function kv(r,e,t,i,n){var s=-1,o=r.length;for(t||(t=kre),n||(n=[]);++s<o;){var a=r[s];e>0&&t(a)?e>1?kv(a,e-1,t,i,n):PM(n,a):i||(n[n.length]=a)}return n}function w4(r){var e=r==null?0:r.length;return e?kv(r,1):[]}function Lre(r){return o4(c4(r,void 0,w4),r+"")}var Ore=b4(Object.getPrototypeOf,Object);const IM=Ore;var Pre="[object Object]",Ire=Function.prototype,Dre=Object.prototype,_4=Ire.toString,Ure=Dre.hasOwnProperty,Fre=_4.call(Object);function Bre(r){if(!ml(r)||Fd(r)!=Pre)return!1;var e=IM(r);if(e===null)return!0;var t=Ure.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&_4.call(t)==Fre}function Gd(){if(!arguments.length)return[];var r=arguments[0];return Ts(r)?r:[r]}function zre(){this.__data__=new tc,this.size=0}function Vre(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}function Gre(r){return this.__data__.get(r)}function jre(r){return this.__data__.has(r)}var Hre=200;function Wre(r,e){var t=this.__data__;if(t instanceof tc){var i=t.__data__;if(!Nv||i.length<Hre-1)return i.push([r,e]),this.size=++t.size,this;t=this.__data__=new rc(i)}return t.set(r,e),this.size=t.size,this}function La(r){var e=this.__data__=new tc(r);this.size=e.size}La.prototype.clear=zre,La.prototype.delete=Vre,La.prototype.get=Gre,La.prototype.has=jre,La.prototype.set=Wre;function $re(r,e){return r&&_v(e,Ev(e),r)}function Xre(r,e){return r&&_v(e,Cv(e),r)}var S4=typeof Wo=="object"&&Wo&&!Wo.nodeType&&Wo,T4=S4&&typeof $o=="object"&&$o&&!$o.nodeType&&$o,qre=T4&&T4.exports===S4,M4=qre?ka.Buffer:void 0,E4=M4?M4.allocUnsafe:void 0;function C4(r,e){if(e)return r.slice();var t=r.length,i=E4?E4(t):new r.constructor(t);return r.copy(i),i}function Kre(r,e){for(var t=-1,i=r==null?0:r.length,n=0,s=[];++t<i;){var o=r[t];e(o,t,r)&&(s[n++]=o)}return s}function A4(){return[]}var Yre=Object.prototype,Zre=Yre.propertyIsEnumerable,N4=Object.getOwnPropertySymbols,Jre=N4?function(r){return r==null?[]:(r=Object(r),Kre(N4(r),function(e){return Zre.call(r,e)}))}:A4;const DM=Jre;function Qre(r,e){return _v(r,DM(r),e)}var eie=Object.getOwnPropertySymbols,tie=eie?function(r){for(var e=[];r;)PM(e,DM(r)),r=IM(r);return e}:A4;const R4=tie;function rie(r,e){return _v(r,R4(r),e)}function k4(r,e,t){var i=e(r);return Ts(r)?i:PM(i,t(r))}function UM(r){return k4(r,Ev,DM)}function iie(r){return k4(r,Cv,R4)}var nie=zd(ka,"DataView");const FM=nie;var sie=zd(ka,"Promise");const BM=sie;var oie=zd(ka,"Set");const uf=oie;var L4="[object Map]",aie="[object Object]",O4="[object Promise]",P4="[object Set]",I4="[object WeakMap]",D4="[object DataView]",lie=Bd(FM),cie=Bd(Nv),uie=Bd(BM),die=Bd(uf),hie=Bd(TM),jd=Fd;(FM&&jd(new FM(new ArrayBuffer(1)))!=D4||Nv&&jd(new Nv)!=L4||BM&&jd(BM.resolve())!=O4||uf&&jd(new uf)!=P4||TM&&jd(new TM)!=I4)&&(jd=function(r){var e=Fd(r),t=e==aie?r.constructor:void 0,i=t?Bd(t):"";if(i)switch(i){case lie:return D4;case cie:return L4;case uie:return O4;case die:return P4;case hie:return I4}return e});const Lv=jd;var pie=Object.prototype,fie=pie.hasOwnProperty;function mie(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&fie.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var gie=ka.Uint8Array;const rx=gie;function zM(r){var e=new r.constructor(r.byteLength);return new rx(e).set(new rx(r)),e}function vie(r,e){var t=e?zM(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var yie=/\w*$/;function bie(r){var e=new r.constructor(r.source,yie.exec(r));return e.lastIndex=r.lastIndex,e}var U4=Zo?Zo.prototype:void 0,F4=U4?U4.valueOf:void 0;function xie(r){return F4?Object(F4.call(r)):{}}function B4(r,e){var t=e?zM(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var wie="[object Boolean]",_ie="[object Date]",Sie="[object Map]",Tie="[object Number]",Mie="[object RegExp]",Eie="[object Set]",Cie="[object String]",Aie="[object Symbol]",Nie="[object ArrayBuffer]",Rie="[object DataView]",kie="[object Float32Array]",Lie="[object Float64Array]",Oie="[object Int8Array]",Pie="[object Int16Array]",Iie="[object Int32Array]",Die="[object Uint8Array]",Uie="[object Uint8ClampedArray]",Fie="[object Uint16Array]",Bie="[object Uint32Array]";function zie(r,e,t){var i=r.constructor;switch(e){case Nie:return zM(r);case wie:case _ie:return new i(+r);case Rie:return vie(r,t);case kie:case Lie:case Oie:case Pie:case Iie:case Die:case Uie:case Fie:case Bie:return B4(r,t);case Sie:return new i;case Tie:case Cie:return new i(r);case Mie:return bie(r);case Eie:return new i;case Aie:return xie(r)}}function z4(r){return typeof r.constructor=="function"&&!AM(r)?Ree(IM(r)):{}}var Vie="[object Map]";function Gie(r){return ml(r)&&Lv(r)==Vie}var V4=cf&&cf.isMap,jie=V4?NM(V4):Gie;const Hie=jie;var Wie="[object Set]";function $ie(r){return ml(r)&&Lv(r)==Wie}var G4=cf&&cf.isSet,Xie=G4?NM(G4):$ie;const qie=Xie;var Kie=1,Yie=2,Zie=4,j4="[object Arguments]",Jie="[object Array]",Qie="[object Boolean]",ene="[object Date]",tne="[object Error]",H4="[object Function]",rne="[object GeneratorFunction]",ine="[object Map]",nne="[object Number]",W4="[object Object]",sne="[object RegExp]",one="[object Set]",ane="[object String]",lne="[object Symbol]",cne="[object WeakMap]",une="[object ArrayBuffer]",dne="[object DataView]",hne="[object Float32Array]",pne="[object Float64Array]",fne="[object Int8Array]",mne="[object Int16Array]",gne="[object Int32Array]",vne="[object Uint8Array]",yne="[object Uint8ClampedArray]",bne="[object Uint16Array]",xne="[object Uint32Array]",pi={};pi[j4]=pi[Jie]=pi[une]=pi[dne]=pi[Qie]=pi[ene]=pi[hne]=pi[pne]=pi[fne]=pi[mne]=pi[gne]=pi[ine]=pi[nne]=pi[W4]=pi[sne]=pi[one]=pi[ane]=pi[lne]=pi[vne]=pi[yne]=pi[bne]=pi[xne]=!0,pi[tne]=pi[H4]=pi[cne]=!1;function Ov(r,e,t,i,n,s){var o,a=e&Kie,l=e&Yie,c=e&Zie;if(t&&(o=n?t(r,i,n,s):t(r)),o!==void 0)return o;if(!Ms(r))return r;var u=Ts(r);if(u){if(o=mie(r),!a)return s4(r,o)}else{var d=Lv(r),h=d==H4||d==rne;if(Tv(r))return C4(r,a);if(d==W4||d==j4||h&&!n){if(o=l||h?{}:z4(r),!a)return l?rie(r,Xre(o,r)):Qre(r,$re(o,r))}else{if(!pi[d])return n?r:{};o=zie(r,d,a)}}s||(s=new La);var p=s.get(r);if(p)return p;s.set(r,o),qie(r)?r.forEach(function(g){o.add(Ov(g,e,t,g,r,s))}):Hie(r)&&r.forEach(function(g,v){o.set(v,Ov(g,e,t,v,r,s))});var f=c?l?iie:UM:l?Cv:Ev,m=u?void 0:f(r);return Vee(m||r,function(g,v){m&&(v=g,g=r[v]),EM(o,v,Ov(g,e,t,v,r,s))}),o}var wne=4;function $4(r){return Ov(r,wne)}var _ne=1,Sne=4;function ix(r){return Ov(r,_ne|Sne)}var Tne="__lodash_hash_undefined__";function Mne(r){return this.__data__.set(r,Tne),this}function Ene(r){return this.__data__.has(r)}function Pv(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new rc;++e<t;)this.add(r[e])}Pv.prototype.add=Pv.prototype.push=Mne,Pv.prototype.has=Ene;function Cne(r,e){for(var t=-1,i=r==null?0:r.length;++t<i;)if(e(r[t],t,r))return!0;return!1}function X4(r,e){return r.has(e)}var Ane=1,Nne=2;function q4(r,e,t,i,n,s){var o=t&Ane,a=r.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=s.get(r),u=s.get(e);if(c&&u)return c==e&&u==r;var d=-1,h=!0,p=t&Nne?new Pv:void 0;for(s.set(r,e),s.set(e,r);++d<a;){var f=r[d],m=e[d];if(i)var g=o?i(m,f,d,e,r,s):i(f,m,d,r,e,s);if(g!==void 0){if(g)continue;h=!1;break}if(p){if(!Cne(e,function(v,x){if(!X4(p,x)&&(f===v||n(f,v,t,i,s)))return p.push(x)})){h=!1;break}}else if(!(f===m||n(f,m,t,i,s))){h=!1;break}}return s.delete(r),s.delete(e),h}function Rne(r){var e=-1,t=Array(r.size);return r.forEach(function(i,n){t[++e]=[n,i]}),t}function VM(r){var e=-1,t=Array(r.size);return r.forEach(function(i){t[++e]=i}),t}var kne=1,Lne=2,One="[object Boolean]",Pne="[object Date]",Ine="[object Error]",Dne="[object Map]",Une="[object Number]",Fne="[object RegExp]",Bne="[object Set]",zne="[object String]",Vne="[object Symbol]",Gne="[object ArrayBuffer]",jne="[object DataView]",K4=Zo?Zo.prototype:void 0,GM=K4?K4.valueOf:void 0;function Hne(r,e,t,i,n,s,o){switch(t){case jne:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case Gne:return!(r.byteLength!=e.byteLength||!s(new rx(r),new rx(e)));case One:case Pne:case Une:return wv(+r,+e);case Ine:return r.name==e.name&&r.message==e.message;case Fne:case zne:return r==e+"";case Dne:var a=Rne;case Bne:var l=i&kne;if(a||(a=VM),r.size!=e.size&&!l)return!1;var c=o.get(r);if(c)return c==e;i|=Lne,o.set(r,e);var u=q4(a(r),a(e),i,n,s,o);return o.delete(r),u;case Vne:if(GM)return GM.call(r)==GM.call(e)}return!1}var Wne=1,$ne=Object.prototype,Xne=$ne.hasOwnProperty;function qne(r,e,t,i,n,s){var o=t&Wne,a=UM(r),l=a.length,c=UM(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var h=a[d];if(!(o?h in e:Xne.call(e,h)))return!1}var p=s.get(r),f=s.get(e);if(p&&f)return p==e&&f==r;var m=!0;s.set(r,e),s.set(e,r);for(var g=o;++d<l;){h=a[d];var v=r[h],x=e[h];if(i)var b=o?i(x,v,h,e,r,s):i(v,x,h,r,e,s);if(!(b===void 0?v===x||n(v,x,t,i,s):b)){m=!1;break}g||(g=h=="constructor")}if(m&&!g){var w=r.constructor,_=e.constructor;w!=_&&"constructor"in r&&"constructor"in e&&!(typeof w=="function"&&w instanceof w&&typeof _=="function"&&_ instanceof _)&&(m=!1)}return s.delete(r),s.delete(e),m}var Kne=1,Y4="[object Arguments]",Z4="[object Array]",nx="[object Object]",Yne=Object.prototype,J4=Yne.hasOwnProperty;function Zne(r,e,t,i,n,s){var o=Ts(r),a=Ts(e),l=o?Z4:Lv(r),c=a?Z4:Lv(e);l=l==Y4?nx:l,c=c==Y4?nx:c;var u=l==nx,d=c==nx,h=l==c;if(h&&Tv(r)){if(!Tv(e))return!1;o=!0,u=!1}if(h&&!u)return s||(s=new La),o||kM(r)?q4(r,e,t,i,n,s):Hne(r,e,l,t,i,n,s);if(!(t&Kne)){var p=u&&J4.call(r,"__wrapped__"),f=d&&J4.call(e,"__wrapped__");if(p||f){var m=p?r.value():r,g=f?e.value():e;return s||(s=new La),n(m,g,t,i,s)}}return h?(s||(s=new La),qne(r,e,t,i,n,s)):!1}function sx(r,e,t,i,n){return r===e?!0:r==null||e==null||!ml(r)&&!ml(e)?r!==r&&e!==e:Zne(r,e,t,i,sx,n)}var Jne=1,Qne=2;function ese(r,e,t,i){var n=t.length,s=n,o=!i;if(r==null)return!s;for(r=Object(r);n--;){var a=t[n];if(o&&a[2]?a[1]!==r[a[0]]:!(a[0]in r))return!1}for(;++n<s;){a=t[n];var l=a[0],c=r[l],u=a[1];if(o&&a[2]){if(c===void 0&&!(l in r))return!1}else{var d=new La;if(i)var h=i(c,u,l,r,e,d);if(!(h===void 0?sx(u,c,Jne|Qne,i,d):h))return!1}}return!0}function Q4(r){return r===r&&!Ms(r)}function tse(r){for(var e=Ev(r),t=e.length;t--;){var i=e[t],n=r[i];e[t]=[i,n,Q4(n)]}return e}function eU(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}function rse(r){var e=tse(r);return e.length==1&&e[0][2]?eU(e[0][0],e[0][1]):function(t){return t===r||ese(t,r,e)}}function ise(r,e){return r!=null&&e in Object(r)}function nse(r,e,t){e=tx(e,r);for(var i=-1,n=e.length,s=!1;++i<n;){var o=Rv(e[i]);if(!(s=r!=null&&t(r,o)))break;r=r[o]}return s||++i!=n?s:(n=r==null?0:r.length,!!n&&CM(n)&&Z1(o,n)&&(Ts(r)||Sv(r)))}function tU(r,e){return r!=null&&nse(r,e,ise)}var sse=1,ose=2;function ase(r,e){return LM(r)&&Q4(e)?eU(Rv(r),e):function(t){var i=ti(t,r);return i===void 0&&i===e?tU(t,r):sx(e,i,sse|ose)}}function lse(r){return function(e){return e==null?void 0:e[r]}}function cse(r){return function(e){return OM(e,r)}}function use(r){return LM(r)?lse(Rv(r)):cse(r)}function rU(r){return typeof r=="function"?r:r==null?wM:typeof r=="object"?Ts(r)?ase(r[0],r[1]):rse(r):use(r)}function dse(r){return function(e,t,i){for(var n=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[r?a:++n];if(t(s[l],l,s)===!1)break}return e}}var hse=dse();const iU=hse;function pse(r,e){return r&&iU(r,e,Ev)}function fse(r,e){return function(t,i){if(t==null)return t;if(!lf(t))return r(t,i);for(var n=t.length,s=e?n:-1,o=Object(t);(e?s--:++s<n)&&i(o[s],s,o)!==!1;);return t}}var mse=fse(pse);const gse=mse;var vse=function(){return ka.Date.now()};const jM=vse;var yse="Expected a function",bse=Math.max,xse=Math.min;function Es(r,e,t){var i,n,s,o,a,l,c=0,u=!1,d=!1,h=!0;if(typeof r!="function")throw new TypeError(yse);e=xM(e)||0,Ms(t)&&(u=!!t.leading,d="maxWait"in t,s=d?bse(xM(t.maxWait)||0,e):s,h="trailing"in t?!!t.trailing:h);function p(S){var T=i,M=n;return i=n=void 0,c=S,o=r.apply(M,T),o}function f(S){return c=S,a=setTimeout(v,e),u?p(S):o}function m(S){var T=S-l,M=S-c,E=e-T;return d?xse(E,s-M):E}function g(S){var T=S-l,M=S-c;return l===void 0||T>=e||T<0||d&&M>=s}function v(){var S=jM();if(g(S))return x(S);a=setTimeout(v,m(S))}function x(S){return a=void 0,h&&i?p(S):(i=n=void 0,o)}function b(){a!==void 0&&clearTimeout(a),c=0,i=l=n=a=void 0}function w(){return a===void 0?o:x(jM())}function _(){var S=jM(),T=g(S);if(i=arguments,n=this,l=S,T){if(a===void 0)return f(l);if(d)return clearTimeout(a),a=setTimeout(v,e),p(l)}return a===void 0&&(a=setTimeout(v,e)),o}return _.cancel=b,_.flush=w,_}function HM(r,e,t){(t!==void 0&&!wv(r[e],t)||t===void 0&&!(e in r))&&MM(r,e,t)}function nU(r){return ml(r)&&lf(r)}function WM(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}function wse(r){return _v(r,Cv(r))}function _se(r,e,t,i,n,s,o){var a=WM(r,t),l=WM(e,t),c=o.get(l);if(c){HM(r,t,c);return}var u=s?s(a,l,t+"",r,e,o):void 0,d=u===void 0;if(d){var h=Ts(l),p=!h&&Tv(l),f=!h&&!p&&kM(l);u=l,h||p||f?Ts(a)?u=a:nU(a)?u=s4(a):p?(d=!1,u=C4(l,!0)):f?(d=!1,u=B4(l,!0)):u=[]:Bre(l)||Sv(l)?(u=a,Sv(a)?u=wse(a):(!Ms(a)||_M(a))&&(u=z4(l))):d=!1}d&&(o.set(l,u),n(u,l,i,s,o),o.delete(l)),HM(r,t,u)}function sU(r,e,t,i,n){r!==e&&iU(e,function(s,o){if(n||(n=new La),Ms(s))_se(r,e,o,t,sU,i,n);else{var a=i?i(WM(r,o),s,o+"",r,e,n):void 0;a===void 0&&(a=s),HM(r,o,a)}},Cv)}function Sse(r,e,t){for(var i=-1,n=r==null?0:r.length;++i<n;)if(t(e,r[i]))return!0;return!1}var Tse=Math.max,Mse=Math.min;function Ese(r,e,t){var i=r==null?0:r.length;if(!i)return-1;var n=i-1;return t!==void 0&&(n=uee(t),n=t<0?Tse(i+n,0):Mse(n,i-1)),a4(r,rU(e),n,!0)}function Cse(r,e){var t=-1,i=lf(r)?Array(r.length):[];return gse(r,function(n,s,o){i[++t]=e(n,s,o)}),i}function Ase(r,e){var t=Ts(r)?ZD:Cse;return t(r,rU(e))}function Nse(r,e){return kv(Ase(r,e),1)}var Rse=1/0;function kse(r){var e=r==null?0:r.length;return e?kv(r,Rse):[]}function ox(r){for(var e=-1,t=r==null?0:r.length,i={};++e<t;){var n=r[e];i[n[0]]=n[1]}return i}function $s(r,e){return sx(r,e)}function Vi(r){return r==null}function Lse(r){return r===void 0}var Ose=Jee(function(r,e,t){sU(r,e,t)});const oU=Ose;function aU(r,e,t,i){if(!Ms(r))return r;e=tx(e,r);for(var n=-1,s=e.length,o=s-1,a=r;a!=null&&++n<s;){var l=Rv(e[n]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(n!=o){var u=a[l];c=i?i(u,l,a):void 0,c===void 0&&(c=Ms(u)?u:Z1(e[n+1])?[]:{})}EM(a,l,c),a=a[l]}return r}function Pse(r,e,t){for(var i=-1,n=e.length,s={};++i<n;){var o=e[i],a=OM(r,o);t(a,o)&&aU(s,tx(o,r),a)}return s}function Ise(r,e){return Pse(r,e,function(t,i){return tU(r,i)})}var Dse=Lre(function(r,e){return r==null?{}:Ise(r,e)});const ic=Dse;function Use(r,e,t){return r==null?r:aU(r,e,t)}var Fse="Expected a function";function Hd(r,e,t){var i=!0,n=!0;if(typeof r!="function")throw new TypeError(Fse);return Ms(t)&&(i="leading"in t?!!t.leading:i,n="trailing"in t?!!t.trailing:n),Es(r,e,{leading:i,maxWait:e,trailing:n})}var Bse=1/0,zse=uf&&1/VM(new uf([,-0]))[1]==Bse?function(r){return new uf(r)}:Lee;const Vse=zse;var Gse=200;function jse(r,e,t){var i=-1,n=Wee,s=r.length,o=!0,a=[],l=a;if(t)o=!1,n=Sse;else if(s>=Gse){var c=e?null:Vse(r);if(c)return VM(c);o=!1,n=X4,l=new Pv}else l=e?[]:a;e:for(;++i<s;){var u=r[i],d=e?e(u):u;if(u=t||u!==0?u:0,o&&d===d){for(var h=l.length;h--;)if(l[h]===d)continue e;e&&l.push(d),a.push(u)}else n(l,d,t)||(l!==a&&l.push(d),a.push(u))}return a}var Hse=u4(function(r){return jse(kv(r,1,nU,!0))});const $M=Hse,rn=r=>r===void 0,Gi=r=>typeof r=="boolean",Ct=r=>typeof r=="number",Jo=r=>!r&&r!==0||lt(r)&&r.length===0||Ht(r)&&!Object.keys(r).length,Qo=r=>typeof Element>"u"?!1:r instanceof Element,Wse=r=>Vi(r),$se=r=>kt(r)?!Number.isNaN(Number(r)):!1,lU=(r="")=>r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d"),gl=r=>qg(r),Iv=r=>Object.keys(r),Xse=r=>Object.entries(r),ax=(r,e,t)=>({get value(){return ti(r,e,t)},set value(i){Use(r,e,i)}});class qse extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function ji(r,e){throw new qse(`[${r}] ${e}`)}const cU=(r="")=>r.split(" ").filter(e=>!!e.trim()),Oa=(r,e)=>{if(!r||!e)return!1;if(e.includes(" "))throw new Error("className should not contain space.");return r.classList.contains(e)},vl=(r,e)=>{!r||!e.trim()||r.classList.add(...cU(e))},Xs=(r,e)=>{!r||!e.trim()||r.classList.remove(...cU(e))},au=(r,e)=>{var t;if(!ar||!r||!e)return"";let i=qo(e);i==="float"&&(i="cssFloat");try{const n=r.style[i];if(n)return n;const s=(t=document.defaultView)==null?void 0:t.getComputedStyle(r,"");return s?s[i]:""}catch{return r.style[i]}};function Ti(r,e="px"){if(!r)return"";if(Ct(r)||$se(r))return`${r}${e}`;if(kt(r))return r}const Kse=(r,e)=>{if(!ar)return!1;const t={undefined:"overflow",true:"overflow-y",false:"overflow-x"}[String(e)],i=au(r,t);return["scroll","auto","overlay"].some(n=>i.includes(n))},XM=(r,e)=>{if(!ar)return;let t=r;for(;t;){if([window,document,document.documentElement].includes(t))return window;if(Kse(t,e))return t;t=t.parentNode}return t};let lx;const uU=r=>{var e;if(!ar)return 0;if(lx!==void 0)return lx;const t=document.createElement("div");t.className=`${r}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const i=t.offsetWidth;t.style.overflow="scroll";const n=document.createElement("div");n.style.width="100%",t.appendChild(n);const s=n.offsetWidth;return(e=t.parentNode)==null||e.removeChild(t),lx=i-s,lx};function dU(r,e){if(!ar)return;if(!e){r.scrollTop=0;return}const t=[];let i=e.offsetParent;for(;i!==null&&r!==i&&r.contains(i);)t.push(i),i=i.offsetParent;const n=e.offsetTop+t.reduce((l,c)=>l+c.offsetTop,0),s=n+e.offsetHeight,o=r.scrollTop,a=o+r.clientHeight;n<o?r.scrollTop=n:s>a&&(r.scrollTop=s-r.clientHeight)}var lr=(r,e)=>{let t=r.__vccOpts||r;for(let[i,n]of e)t[i]=n;return t},Yse={name:"ArrowDown"},Zse={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Jse=J("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1),Qse=[Jse];function eoe(r,e,t,i,n,s){return D(),ee("svg",Zse,Qse)}var lu=lr(Yse,[["render",eoe],["__file","arrow-down.vue"]]),toe={name:"ArrowLeft"},roe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ioe=J("path",{fill:"currentColor",d:"M609.408 149.376 277.76 489.6a32 32 0 0 0 0 44.672l331.648 340.352a29.12 29.12 0 0 0 41.728 0 30.592 30.592 0 0 0 0-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 0 0 0-42.688 29.12 29.12 0 0 0-41.728 0z"},null,-1),noe=[ioe];function soe(r,e,t,i,n,s){return D(),ee("svg",roe,noe)}var cu=lr(toe,[["render",soe],["__file","arrow-left.vue"]]),ooe={name:"ArrowRight"},aoe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},loe=J("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 0 0 0 42.752L652.736 512 340.864 831.872a30.592 30.592 0 0 0 0 42.752 29.12 29.12 0 0 0 41.728 0L714.24 534.336a32 32 0 0 0 0-44.672L382.592 149.376a29.12 29.12 0 0 0-41.728 0z"},null,-1),coe=[loe];function uoe(r,e,t,i,n,s){return D(),ee("svg",aoe,coe)}var Cs=lr(ooe,[["render",uoe],["__file","arrow-right.vue"]]),doe={name:"ArrowUp"},hoe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},poe=J("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1),foe=[poe];function moe(r,e,t,i,n,s){return D(),ee("svg",hoe,foe)}var cx=lr(doe,[["render",moe],["__file","arrow-up.vue"]]),goe={name:"Back"},voe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},yoe=J("path",{fill:"currentColor",d:"M224 480h640a32 32 0 1 1 0 64H224a32 32 0 0 1 0-64z"},null,-1),boe=J("path",{fill:"currentColor",d:"m237.248 512 265.408 265.344a32 32 0 0 1-45.312 45.312l-288-288a32 32 0 0 1 0-45.312l288-288a32 32 0 1 1 45.312 45.312L237.248 512z"},null,-1),xoe=[yoe,boe];function woe(r,e,t,i,n,s){return D(),ee("svg",voe,xoe)}var _oe=lr(goe,[["render",woe],["__file","back.vue"]]),Soe={name:"Calendar"},Toe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Moe=J("path",{fill:"currentColor",d:"M128 384v512h768V192H768v32a32 32 0 1 1-64 0v-32H320v32a32 32 0 0 1-64 0v-32H128v128h768v64H128zm192-256h384V96a32 32 0 1 1 64 0v32h160a32 32 0 0 1 32 32v768a32 32 0 0 1-32 32H96a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h160V96a32 32 0 0 1 64 0v32zm-32 384h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 0 1 0 64h-64a32 32 0 0 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm192-192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64zm0 192h64a32 32 0 1 1 0 64h-64a32 32 0 1 1 0-64z"},null,-1),Eoe=[Moe];function Coe(r,e,t,i,n,s){return D(),ee("svg",Toe,Eoe)}var Aoe=lr(Soe,[["render",Coe],["__file","calendar.vue"]]),Noe={name:"CaretRight"},Roe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},koe=J("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1),Loe=[koe];function Ooe(r,e,t,i,n,s){return D(),ee("svg",Roe,Loe)}var hU=lr(Noe,[["render",Ooe],["__file","caret-right.vue"]]),Poe={name:"CaretTop"},Ioe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Doe=J("path",{fill:"currentColor",d:"M512 320 192 704h639.936z"},null,-1),Uoe=[Doe];function Foe(r,e,t,i,n,s){return D(),ee("svg",Ioe,Uoe)}var Boe=lr(Poe,[["render",Foe],["__file","caret-top.vue"]]),zoe={name:"Check"},Voe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Goe=J("path",{fill:"currentColor",d:"M406.656 706.944 195.84 496.256a32 32 0 1 0-45.248 45.248l256 256 512-512a32 32 0 0 0-45.248-45.248L406.592 706.944z"},null,-1),joe=[Goe];function Hoe(r,e,t,i,n,s){return D(),ee("svg",Voe,joe)}var Dv=lr(zoe,[["render",Hoe],["__file","check.vue"]]),Woe={name:"CircleCheckFilled"},$oe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Xoe=J("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),qoe=[Xoe];function Koe(r,e,t,i,n,s){return D(),ee("svg",$oe,qoe)}var Yoe=lr(Woe,[["render",Koe],["__file","circle-check-filled.vue"]]),Zoe={name:"CircleCheck"},Joe={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Qoe=J("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),eae=J("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0 1 45.312 45.312l-288 288a32 32 0 0 1-45.312 0l-160-160a32 32 0 1 1 45.312-45.312L480 626.752l265.344-265.408z"},null,-1),tae=[Qoe,eae];function rae(r,e,t,i,n,s){return D(),ee("svg",Joe,tae)}var qM=lr(Zoe,[["render",rae],["__file","circle-check.vue"]]),iae={name:"CircleCloseFilled"},nae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},sae=J("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 393.664L407.936 353.6a38.4 38.4 0 1 0-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1 0 54.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1 0 54.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 1 0-54.336-54.336L512 457.664z"},null,-1),oae=[sae];function aae(r,e,t,i,n,s){return D(),ee("svg",nae,oae)}var KM=lr(iae,[["render",aae],["__file","circle-close-filled.vue"]]),lae={name:"CircleClose"},cae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},uae=J("path",{fill:"currentColor",d:"m466.752 512-90.496-90.496a32 32 0 0 1 45.248-45.248L512 466.752l90.496-90.496a32 32 0 1 1 45.248 45.248L557.248 512l90.496 90.496a32 32 0 1 1-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 0 1-45.248-45.248L466.752 512z"},null,-1),dae=J("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),hae=[uae,dae];function pae(r,e,t,i,n,s){return D(),ee("svg",cae,hae)}var uu=lr(lae,[["render",pae],["__file","circle-close.vue"]]),fae={name:"Clock"},mae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},gae=J("path",{fill:"currentColor",d:"M512 896a384 384 0 1 0 0-768 384 384 0 0 0 0 768zm0 64a448 448 0 1 1 0-896 448 448 0 0 1 0 896z"},null,-1),vae=J("path",{fill:"currentColor",d:"M480 256a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V288a32 32 0 0 1 32-32z"},null,-1),yae=J("path",{fill:"currentColor",d:"M480 512h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32z"},null,-1),bae=[gae,vae,yae];function xae(r,e,t,i,n,s){return D(),ee("svg",mae,bae)}var pU=lr(fae,[["render",xae],["__file","clock.vue"]]),wae={name:"Close"},_ae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Sae=J("path",{fill:"currentColor",d:"M764.288 214.592 512 466.88 259.712 214.592a31.936 31.936 0 0 0-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1 0 45.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0 0 45.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 1 0-45.12-45.184z"},null,-1),Tae=[Sae];function Mae(r,e,t,i,n,s){return D(),ee("svg",_ae,Tae)}var Pa=lr(wae,[["render",Mae],["__file","close.vue"]]),Eae={name:"DArrowLeft"},Cae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Aae=J("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L197.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224zm256 0a29.12 29.12 0 0 1 41.728 0 30.592 30.592 0 0 1 0 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 0 1-.512 43.264 29.12 29.12 0 0 1-41.216-.512L453.76 534.272a32 32 0 0 1 0-44.672l331.648-340.224z"},null,-1),Nae=[Aae];function Rae(r,e,t,i,n,s){return D(),ee("svg",Cae,Nae)}var df=lr(Eae,[["render",Rae],["__file","d-arrow-left.vue"]]),kae={name:"DArrowRight"},Lae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Oae=J("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0 1 41.728.064L826.24 489.664a32 32 0 0 1 0 44.672L494.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L764.736 512 452.864 192a30.592 30.592 0 0 1 0-42.688zm-256 0a29.12 29.12 0 0 1 41.728.064L570.24 489.664a32 32 0 0 1 0 44.672L238.592 874.624a29.12 29.12 0 0 1-41.728 0 30.592 30.592 0 0 1 0-42.752L508.736 512 196.864 192a30.592 30.592 0 0 1 0-42.688z"},null,-1),Pae=[Oae];function Iae(r,e,t,i,n,s){return D(),ee("svg",Lae,Pae)}var hf=lr(kae,[["render",Iae],["__file","d-arrow-right.vue"]]),Dae={name:"DataBoard"},Uae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Fae=J("path",{fill:"currentColor",d:"M32 128h960v64H32z"},null,-1),Bae=J("path",{fill:"currentColor",d:"M192 192v512h640V192H192zm-64-64h768v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V128z"},null,-1),zae=J("path",{fill:"currentColor",d:"M322.176 960H248.32l144.64-250.56 55.424 32L322.176 960zm453.888 0h-73.856L576 741.44l55.424-32L776.064 960z"},null,-1),Vae=[Fae,Bae,zae];function Gae(r,e,t,i,n,s){return D(),ee("svg",Uae,Vae)}var jae=lr(Dae,[["render",Gae],["__file","data-board.vue"]]),Hae={name:"Delete"},Wae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},$ae=J("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1),Xae=[$ae];function qae(r,e,t,i,n,s){return D(),ee("svg",Wae,Xae)}var Kae=lr(Hae,[["render",qae],["__file","delete.vue"]]),Yae={name:"Document"},Zae={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Jae=J("path",{fill:"currentColor",d:"M832 384H576V128H192v768h640V384zm-26.496-64L640 154.496V320h165.504zM160 64h480l256 256v608a32 32 0 0 1-32 32H160a32 32 0 0 1-32-32V96a32 32 0 0 1 32-32zm160 448h384v64H320v-64zm0-192h160v64H320v-64zm0 384h384v64H320v-64z"},null,-1),Qae=[Jae];function ele(r,e,t,i,n,s){return D(),ee("svg",Zae,Qae)}var tle=lr(Yae,[["render",ele],["__file","document.vue"]]),rle={name:"FullScreen"},ile={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},nle=J("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1),sle=[nle];function ole(r,e,t,i,n,s){return D(),ee("svg",ile,sle)}var ale=lr(rle,[["render",ole],["__file","full-screen.vue"]]),lle={name:"Hide"},cle={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ule=J("path",{fill:"currentColor",d:"M876.8 156.8c0-9.6-3.2-16-9.6-22.4-6.4-6.4-12.8-9.6-22.4-9.6-9.6 0-16 3.2-22.4 9.6L736 220.8c-64-32-137.6-51.2-224-60.8-160 16-288 73.6-377.6 176C44.8 438.4 0 496 0 512s48 73.6 134.4 176c22.4 25.6 44.8 48 73.6 67.2l-86.4 89.6c-6.4 6.4-9.6 12.8-9.6 22.4 0 9.6 3.2 16 9.6 22.4 6.4 6.4 12.8 9.6 22.4 9.6 9.6 0 16-3.2 22.4-9.6l704-710.4c3.2-6.4 6.4-12.8 6.4-22.4Zm-646.4 528c-76.8-70.4-128-128-153.6-172.8 28.8-48 80-105.6 153.6-172.8C304 272 400 230.4 512 224c64 3.2 124.8 19.2 176 44.8l-54.4 54.4C598.4 300.8 560 288 512 288c-64 0-115.2 22.4-160 64s-64 96-64 160c0 48 12.8 89.6 35.2 124.8L256 707.2c-9.6-6.4-19.2-16-25.6-22.4Zm140.8-96c-12.8-22.4-19.2-48-19.2-76.8 0-44.8 16-83.2 48-112 32-28.8 67.2-48 112-48 28.8 0 54.4 6.4 73.6 19.2L371.2 588.8ZM889.599 336c-12.8-16-28.8-28.8-41.6-41.6l-48 48c73.6 67.2 124.8 124.8 150.4 169.6-28.8 48-80 105.6-153.6 172.8-73.6 67.2-172.8 108.8-284.8 115.2-51.2-3.2-99.2-12.8-140.8-28.8l-48 48c57.6 22.4 118.4 38.4 188.8 44.8 160-16 288-73.6 377.6-176C979.199 585.6 1024 528 1024 512s-48.001-73.6-134.401-176Z"},null,-1),dle=J("path",{fill:"currentColor",d:"M511.998 672c-12.8 0-25.6-3.2-38.4-6.4l-51.2 51.2c28.8 12.8 57.6 19.2 89.6 19.2 64 0 115.2-22.4 160-64 41.6-41.6 64-96 64-160 0-32-6.4-64-19.2-89.6l-51.2 51.2c3.2 12.8 6.4 25.6 6.4 38.4 0 44.8-16 83.2-48 112-32 28.8-67.2 48-112 48Z"},null,-1),hle=[ule,dle];function ple(r,e,t,i,n,s){return D(),ee("svg",cle,hle)}var fle=lr(lle,[["render",ple],["__file","hide.vue"]]),mle={name:"InfoFilled"},gle={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},vle=J("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896.064A448 448 0 0 1 512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 0 1-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 0 1 7.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),yle=[vle];function ble(r,e,t,i,n,s){return D(),ee("svg",gle,yle)}var YM=lr(mle,[["render",ble],["__file","info-filled.vue"]]),xle={name:"Loading"},wle={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},_le=J("path",{fill:"currentColor",d:"M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32zm0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32zm448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32zm-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32zM195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248zm452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248zM828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0zm-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0z"},null,-1),Sle=[_le];function Tle(r,e,t,i,n,s){return D(),ee("svg",wle,Sle)}var du=lr(xle,[["render",Tle],["__file","loading.vue"]]),Mle={name:"MagicStick"},Ele={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Cle=J("path",{fill:"currentColor",d:"M512 64h64v192h-64V64zm0 576h64v192h-64V640zM160 480v-64h192v64H160zm576 0v-64h192v64H736zM249.856 199.04l45.248-45.184L430.848 289.6 385.6 334.848 249.856 199.104zM657.152 606.4l45.248-45.248 135.744 135.744-45.248 45.248L657.152 606.4zM114.048 923.2 68.8 877.952l316.8-316.8 45.248 45.248-316.8 316.8zM702.4 334.848 657.152 289.6l135.744-135.744 45.248 45.248L702.4 334.848z"},null,-1),Ale=[Cle];function Nle(r,e,t,i,n,s){return D(),ee("svg",Ele,Ale)}var Rle=lr(Mle,[["render",Nle],["__file","magic-stick.vue"]]),kle={name:"Minus"},Lle={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Ole=J("path",{fill:"currentColor",d:"M128 544h768a32 32 0 1 0 0-64H128a32 32 0 0 0 0 64z"},null,-1),Ple=[Ole];function Ile(r,e,t,i,n,s){return D(),ee("svg",Lle,Ple)}var Dle=lr(kle,[["render",Ile],["__file","minus.vue"]]),Ule={name:"MoreFilled"},Fle={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Ble=J("path",{fill:"currentColor",d:"M176 416a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm336 0a112 112 0 1 1 0 224 112 112 0 0 1 0-224z"},null,-1),zle=[Ble];function Vle(r,e,t,i,n,s){return D(),ee("svg",Fle,zle)}var fU=lr(Ule,[["render",Vle],["__file","more-filled.vue"]]),Gle={name:"More"},jle={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Hle=J("path",{fill:"currentColor",d:"M176 416a112 112 0 1 0 0 224 112 112 0 0 0 0-224m0 64a48 48 0 1 1 0 96 48 48 0 0 1 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96zm336-64a112 112 0 1 1 0 224 112 112 0 0 1 0-224zm0 64a48 48 0 1 0 0 96 48 48 0 0 0 0-96z"},null,-1),Wle=[Hle];function $le(r,e,t,i,n,s){return D(),ee("svg",jle,Wle)}var Xle=lr(Gle,[["render",$le],["__file","more.vue"]]),qle={name:"PictureFilled"},Kle={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Yle=J("path",{fill:"currentColor",d:"M96 896a32 32 0 0 1-32-32V160a32 32 0 0 1 32-32h832a32 32 0 0 1 32 32v704a32 32 0 0 1-32 32H96zm315.52-228.48-68.928-68.928a32 32 0 0 0-45.248 0L128 768.064h778.688l-242.112-290.56a32 32 0 0 0-49.216 0L458.752 665.408a32 32 0 0 1-47.232 2.112zM256 384a96 96 0 1 0 192.064-.064A96 96 0 0 0 256 384z"},null,-1),Zle=[Yle];function Jle(r,e,t,i,n,s){return D(),ee("svg",Kle,Zle)}var Qle=lr(qle,[["render",Jle],["__file","picture-filled.vue"]]),ece={name:"Plus"},tce={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},rce=J("path",{fill:"currentColor",d:"M480 480V128a32 32 0 0 1 64 0v352h352a32 32 0 1 1 0 64H544v352a32 32 0 1 1-64 0V544H128a32 32 0 0 1 0-64h352z"},null,-1),ice=[rce];function nce(r,e,t,i,n,s){return D(),ee("svg",tce,ice)}var mU=lr(ece,[["render",nce],["__file","plus.vue"]]),sce={name:"QuestionFilled"},oce={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},ace=J("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm23.744 191.488c-52.096 0-92.928 14.784-123.2 44.352-30.976 29.568-45.76 70.4-45.76 122.496h80.256c0-29.568 5.632-52.8 17.6-68.992 13.376-19.712 35.2-28.864 66.176-28.864 23.936 0 42.944 6.336 56.32 19.712 12.672 13.376 19.712 31.68 19.712 54.912 0 17.6-6.336 34.496-19.008 49.984l-8.448 9.856c-45.76 40.832-73.216 70.4-82.368 89.408-9.856 19.008-14.08 42.24-14.08 68.992v9.856h80.96v-9.856c0-16.896 3.52-31.68 10.56-45.76 6.336-12.672 15.488-24.64 28.16-35.2 33.792-29.568 54.208-48.576 60.544-55.616 16.896-22.528 26.048-51.392 26.048-86.592 0-42.944-14.08-76.736-42.24-101.376-28.16-25.344-65.472-37.312-111.232-37.312zm-12.672 406.208a54.272 54.272 0 0 0-38.72 14.784 49.408 49.408 0 0 0-15.488 38.016c0 15.488 4.928 28.16 15.488 38.016A54.848 54.848 0 0 0 523.072 768c15.488 0 28.16-4.928 38.72-14.784a51.52 51.52 0 0 0 16.192-38.72 51.968 51.968 0 0 0-15.488-38.016 55.936 55.936 0 0 0-39.424-14.784z"},null,-1),lce=[ace];function cce(r,e,t,i,n,s){return D(),ee("svg",oce,lce)}var uce=lr(sce,[["render",cce],["__file","question-filled.vue"]]),dce={name:"Rank"},hce={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},pce=J("path",{fill:"currentColor",d:"m186.496 544 41.408 41.344a32 32 0 1 1-45.248 45.312l-96-96a32 32 0 0 1 0-45.312l96-96a32 32 0 1 1 45.248 45.312L186.496 480h290.816V186.432l-41.472 41.472a32 32 0 1 1-45.248-45.184l96-96.128a32 32 0 0 1 45.312 0l96 96.064a32 32 0 0 1-45.248 45.184l-41.344-41.28V480H832l-41.344-41.344a32 32 0 0 1 45.248-45.312l96 96a32 32 0 0 1 0 45.312l-96 96a32 32 0 0 1-45.248-45.312L832 544H541.312v293.44l41.344-41.28a32 32 0 1 1 45.248 45.248l-96 96a32 32 0 0 1-45.312 0l-96-96a32 32 0 1 1 45.312-45.248l41.408 41.408V544H186.496z"},null,-1),fce=[pce];function mce(r,e,t,i,n,s){return D(),ee("svg",hce,fce)}var gU=lr(dce,[["render",mce],["__file","rank.vue"]]),gce={name:"RefreshLeft"},vce={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},yce=J("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 0 1 0 64H232.96a32 32 0 0 1-32-32V179.712a32 32 0 0 1 64 0v50.56a384 384 0 0 1 643.84 282.88 384 384 0 0 1-383.936 384 384 384 0 0 1-384-384h64a320 320 0 1 0 640 0 320 320 0 0 0-555.712-216.448z"},null,-1),bce=[yce];function xce(r,e,t,i,n,s){return D(),ee("svg",vce,bce)}var wce=lr(gce,[["render",xce],["__file","refresh-left.vue"]]),_ce={name:"RefreshRight"},Sce={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Tce=J("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"},null,-1),Mce=[Tce];function Ece(r,e,t,i,n,s){return D(),ee("svg",Sce,Mce)}var Cce=lr(_ce,[["render",Ece],["__file","refresh-right.vue"]]),Ace={name:"ScaleToOriginal"},Nce={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Rce=J("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0 1 60.236 60.235v481.883a60.235 60.235 0 0 1-60.236 60.235H210.824a60.235 60.235 0 0 1-60.236-60.235V240.94a60.235 60.235 0 0 1 60.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0 0 90.353 240.94v481.883a120.47 120.47 0 0 0 120.47 120.47h602.353a120.47 120.47 0 0 0 120.471-120.47V240.94a120.47 120.47 0 0 0-120.47-120.47zm-120.47 180.705a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 0 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zm-361.412 0a30.118 30.118 0 0 0-30.118 30.118v301.177a30.118 30.118 0 1 0 60.236 0V331.294a30.118 30.118 0 0 0-30.118-30.118zM512 361.412a30.118 30.118 0 0 0-30.118 30.117v30.118a30.118 30.118 0 0 0 60.236 0V391.53A30.118 30.118 0 0 0 512 361.412zM512 512a30.118 30.118 0 0 0-30.118 30.118v30.117a30.118 30.118 0 0 0 60.236 0v-30.117A30.118 30.118 0 0 0 512 512z"},null,-1),kce=[Rce];function Lce(r,e,t,i,n,s){return D(),ee("svg",Nce,kce)}var Oce=lr(Ace,[["render",Lce],["__file","scale-to-original.vue"]]),Pce={name:"Search"},Ice={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Dce=J("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704z"},null,-1),Uce=[Dce];function Fce(r,e,t,i,n,s){return D(),ee("svg",Ice,Uce)}var Bce=lr(Pce,[["render",Fce],["__file","search.vue"]]),zce={name:"SetUp"},Vce={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Gce=J("path",{fill:"currentColor",d:"M224 160a64 64 0 0 0-64 64v576a64 64 0 0 0 64 64h576a64 64 0 0 0 64-64V224a64 64 0 0 0-64-64H224zm0-64h576a128 128 0 0 1 128 128v576a128 128 0 0 1-128 128H224A128 128 0 0 1 96 800V224A128 128 0 0 1 224 96z"},null,-1),jce=J("path",{fill:"currentColor",d:"M384 416a64 64 0 1 0 0-128 64 64 0 0 0 0 128zm0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256z"},null,-1),Hce=J("path",{fill:"currentColor",d:"M480 320h256q32 0 32 32t-32 32H480q-32 0-32-32t32-32zm160 416a64 64 0 1 0 0-128 64 64 0 0 0 0 128zm0 64a128 128 0 1 1 0-256 128 128 0 0 1 0 256z"},null,-1),Wce=J("path",{fill:"currentColor",d:"M288 640h256q32 0 32 32t-32 32H288q-32 0-32-32t32-32z"},null,-1),$ce=[Gce,jce,Hce,Wce];function Xce(r,e,t,i,n,s){return D(),ee("svg",Vce,$ce)}var qce=lr(zce,[["render",Xce],["__file","set-up.vue"]]),Kce={name:"Setting"},Yce={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Zce=J("path",{fill:"currentColor",d:"M600.704 64a32 32 0 0 1 30.464 22.208l35.2 109.376c14.784 7.232 28.928 15.36 42.432 24.512l112.384-24.192a32 32 0 0 1 34.432 15.36L944.32 364.8a32 32 0 0 1-4.032 37.504l-77.12 85.12a357.12 357.12 0 0 1 0 49.024l77.12 85.248a32 32 0 0 1 4.032 37.504l-88.704 153.6a32 32 0 0 1-34.432 15.296L708.8 803.904c-13.44 9.088-27.648 17.28-42.368 24.512l-35.264 109.376A32 32 0 0 1 600.704 960H423.296a32 32 0 0 1-30.464-22.208L357.696 828.48a351.616 351.616 0 0 1-42.56-24.64l-112.32 24.256a32 32 0 0 1-34.432-15.36L79.68 659.2a32 32 0 0 1 4.032-37.504l77.12-85.248a357.12 357.12 0 0 1 0-48.896l-77.12-85.248A32 32 0 0 1 79.68 364.8l88.704-153.6a32 32 0 0 1 34.432-15.296l112.32 24.256c13.568-9.152 27.776-17.408 42.56-24.64l35.2-109.312A32 32 0 0 1 423.232 64H600.64zm-23.424 64H446.72l-36.352 113.088-24.512 11.968a294.113 294.113 0 0 0-34.816 20.096l-22.656 15.36-116.224-25.088-65.28 113.152 79.68 88.192-1.92 27.136a293.12 293.12 0 0 0 0 40.192l1.92 27.136-79.808 88.192 65.344 113.152 116.224-25.024 22.656 15.296a294.113 294.113 0 0 0 34.816 20.096l24.512 11.968L446.72 896h130.688l36.48-113.152 24.448-11.904a288.282 288.282 0 0 0 34.752-20.096l22.592-15.296 116.288 25.024 65.28-113.152-79.744-88.192 1.92-27.136a293.12 293.12 0 0 0 0-40.256l-1.92-27.136 79.808-88.128-65.344-113.152-116.288 24.96-22.592-15.232a287.616 287.616 0 0 0-34.752-20.096l-24.448-11.904L577.344 128zM512 320a192 192 0 1 1 0 384 192 192 0 0 1 0-384zm0 64a128 128 0 1 0 0 256 128 128 0 0 0 0-256z"},null,-1),Jce=[Zce];function Qce(r,e,t,i,n,s){return D(),ee("svg",Yce,Jce)}var eue=lr(Kce,[["render",Qce],["__file","setting.vue"]]),tue={name:"SortDown"},rue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},iue=J("path",{fill:"currentColor",d:"M576 96v709.568L333.312 562.816A32 32 0 1 0 288 608l297.408 297.344A32 32 0 0 0 640 882.688V96a32 32 0 0 0-64 0z"},null,-1),nue=[iue];function sue(r,e,t,i,n,s){return D(),ee("svg",rue,nue)}var oue=lr(tue,[["render",sue],["__file","sort-down.vue"]]),aue={name:"SortUp"},lue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},cue=J("path",{fill:"currentColor",d:"M384 141.248V928a32 32 0 1 0 64 0V218.56l242.688 242.688A32 32 0 1 0 736 416L438.592 118.656A32 32 0 0 0 384 141.248z"},null,-1),uue=[cue];function due(r,e,t,i,n,s){return D(),ee("svg",lue,uue)}var hue=lr(aue,[["render",due],["__file","sort-up.vue"]]),pue={name:"StarFilled"},fue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},mue=J("path",{fill:"currentColor",d:"M283.84 867.84 512 747.776l228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72z"},null,-1),gue=[mue];function vue(r,e,t,i,n,s){return D(),ee("svg",fue,gue)}var ux=lr(pue,[["render",vue],["__file","star-filled.vue"]]),yue={name:"Star"},bue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},xue=J("path",{fill:"currentColor",d:"m512 747.84 228.16 119.936a6.4 6.4 0 0 0 9.28-6.72l-43.52-254.08 184.512-179.904a6.4 6.4 0 0 0-3.52-10.88l-255.104-37.12L517.76 147.904a6.4 6.4 0 0 0-11.52 0L392.192 379.072l-255.104 37.12a6.4 6.4 0 0 0-3.52 10.88L318.08 606.976l-43.584 254.08a6.4 6.4 0 0 0 9.28 6.72L512 747.84zM313.6 924.48a70.4 70.4 0 0 1-102.144-74.24l37.888-220.928L88.96 472.96A70.4 70.4 0 0 1 128 352.896l221.76-32.256 99.2-200.96a70.4 70.4 0 0 1 126.208 0l99.2 200.96 221.824 32.256a70.4 70.4 0 0 1 39.04 120.064L774.72 629.376l37.888 220.928a70.4 70.4 0 0 1-102.144 74.24L512 820.096l-198.4 104.32z"},null,-1),wue=[xue];function _ue(r,e,t,i,n,s){return D(),ee("svg",bue,wue)}var Sue=lr(yue,[["render",_ue],["__file","star.vue"]]),Tue={name:"SuccessFilled"},Mue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Eue=J("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm-55.808 536.384-99.52-99.584a38.4 38.4 0 1 0-54.336 54.336l126.72 126.72a38.272 38.272 0 0 0 54.336 0l262.4-262.464a38.4 38.4 0 1 0-54.272-54.336L456.192 600.384z"},null,-1),Cue=[Eue];function Aue(r,e,t,i,n,s){return D(),ee("svg",Mue,Cue)}var vU=lr(Tue,[["render",Aue],["__file","success-filled.vue"]]),Nue={name:"UploadFilled"},Rue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},kue=J("path",{fill:"currentColor",d:"M544 864V672h128L512 480 352 672h128v192H320v-1.6c-5.376.32-10.496 1.6-16 1.6A240 240 0 0 1 64 624c0-123.136 93.12-223.488 212.608-237.248A239.808 239.808 0 0 1 512 192a239.872 239.872 0 0 1 235.456 194.752c119.488 13.76 212.48 114.112 212.48 237.248a240 240 0 0 1-240 240c-5.376 0-10.56-1.28-16-1.6v1.6H544z"},null,-1),Lue=[kue];function Oue(r,e,t,i,n,s){return D(),ee("svg",Rue,Lue)}var yU=lr(Nue,[["render",Oue],["__file","upload-filled.vue"]]),Pue={name:"View"},Iue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Due=J("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 1 1 0 448 224 224 0 0 1 0-448zm0 64a160.192 160.192 0 0 0-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),Uue=[Due];function Fue(r,e,t,i,n,s){return D(),ee("svg",Iue,Uue)}var Bue=lr(Pue,[["render",Fue],["__file","view.vue"]]),zue={name:"WarningFilled"},Vue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Gue=J("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1),jue=[Gue];function Hue(r,e,t,i,n,s){return D(),ee("svg",Vue,jue)}var dx=lr(zue,[["render",Hue],["__file","warning-filled.vue"]]),Wue={name:"ZoomIn"},$ue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Xue=J("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zm-32-384v-96a32 32 0 0 1 64 0v96h96a32 32 0 0 1 0 64h-96v96a32 32 0 0 1-64 0v-96h-96a32 32 0 0 1 0-64h96z"},null,-1),que=[Xue];function Kue(r,e,t,i,n,s){return D(),ee("svg",$ue,que)}var bU=lr(Wue,[["render",Kue],["__file","zoom-in.vue"]]),Yue={name:"ZoomOut"},Zue={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},Jue=J("path",{fill:"currentColor",d:"m795.904 750.72 124.992 124.928a32 32 0 0 1-45.248 45.248L750.656 795.904a416 416 0 1 1 45.248-45.248zM480 832a352 352 0 1 0 0-704 352 352 0 0 0 0 704zM352 448h256a32 32 0 0 1 0 64H352a32 32 0 0 1 0-64z"},null,-1),Que=[Jue];function ede(r,e,t,i,n,s){return D(),ee("svg",Zue,Que)}var tde=lr(Yue,[["render",ede],["__file","zoom-out.vue"]]);const xU="__epPropKey",Oe=r=>r,rde=r=>Ht(r)&&!!r[xU],Ia=(r,e)=>{if(!Ht(r)||rde(r))return r;const{values:t,required:i,default:n,type:s,validator:o}=r,a={type:s,required:!!i,validator:t||o?l=>{let c=!1,u=[];if(t&&(u=Array.from(t),er(r,"default")&&u.push(n),c||(c=u.includes(l))),o&&(c||(c=o(l))),!c&&u.length>0){const d=[...new Set(u)].map(h=>JSON.stringify(h)).join(", ");mY(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${d}], got value ${JSON.stringify(l)}.`)}return c}:void 0,[xU]:!0};return er(r,"default")&&(a.default=n),a},et=r=>ox(Object.entries(r).map(([e,t])=>[e,Ia(t,e)])),Gr=Oe([String,Object,Function]),wU={Close:Pa},ZM={Close:Pa,SuccessFilled:vU,InfoFilled:YM,WarningFilled:dx,CircleCloseFilled:KM},hu={success:vU,warning:dx,error:KM,info:YM},JM={validating:du,success:qM,error:uu},zt=(r,e)=>{if(r.install=t=>{for(const i of[r,...Object.values(e??{})])t.component(i.name,i)},e)for(const[t,i]of Object.entries(e))r[t]=i;return r},_U=(r,e)=>(r.install=t=>{r._context=t._context,t.config.globalProperties[e]=r},r),ide=(r,e)=>(r.install=t=>{t.directive(e,r)},r),fi=r=>(r.install=Lr,r),hx=(...r)=>e=>{r.forEach(t=>{Nt(t)?t(e):t.value=e})},bt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},nde=["year","month","date","dates","week","datetime","datetimerange","daterange","monthrange"],QM=["sun","mon","tue","wed","thu","fri","sat"],Wt="update:modelValue",Kr="change",As="input",SU=Symbol("INSTALLED_KEY"),yl=["","default","small","large"],sde={large:40,default:32,small:24},ode=r=>sde[r||"default"],px=r=>["",...yl].includes(r);var ea=(r=>(r[r.TEXT=1]="TEXT",r[r.CLASS=2]="CLASS",r[r.STYLE=4]="STYLE",r[r.PROPS=8]="PROPS",r[r.FULL_PROPS=16]="FULL_PROPS",r[r.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",r[r.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",r[r.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",r[r.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",r[r.NEED_PATCH=512]="NEED_PATCH",r[r.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",r[r.HOISTED=-1]="HOISTED",r[r.BAIL=-2]="BAIL",r))(ea||{});function eE(r){return ei(r)&&r.type===ct}function ade(r){return ei(r)&&r.type===Ss}function lde(r){return ei(r)&&!eE(r)&&!ade(r)}const cde=r=>{if(!ei(r))return{};const e=r.props||{},t=(ei(r.type)?r.type.props:void 0)||{},i={};return Object.keys(t).forEach(n=>{er(t[n],"default")&&(i[n]=t[n].default)}),Object.keys(e).forEach(n=>{i[qo(n)]=e[n]}),i},ude=r=>{if(!lt(r)||r.length>1)throw new Error("expect to receive a single Vue element child");return r[0]},pf=r=>{const e=lt(r)?r:[r],t=[];return e.forEach(i=>{var n;lt(i)?t.push(...pf(i)):ei(i)&&lt(i.children)?t.push(...pf(i.children)):(t.push(i),ei(i)&&(n=i.component)!=null&&n.subTree&&t.push(...pf(i.component.subTree)))}),t},TU=r=>[...new Set(r)],nc=r=>!r&&r!==0?[]:Array.isArray(r)?r:[r],fx=r=>/([\uAC00-\uD7AF\u3130-\u318F])+/gi.test(r),ff=r=>ar?window.requestAnimationFrame(r):setTimeout(r,16),mx=r=>ar?window.cancelAnimationFrame(r):clearTimeout(r),gx=()=>Math.floor(Math.random()*1e4),ri=r=>r,dde=["class","style"],hde=/^on[A-Z]/,tE=(r={})=>{const{excludeListeners:e=!1,excludeKeys:t}=r,i=I(()=>((t==null?void 0:t.value)||[]).concat(dde)),n=Dt();return I(n?()=>{var s;return ox(Object.entries((s=n.proxy)==null?void 0:s.$attrs).filter(([o])=>!i.value.includes(o)&&!(e&&hde.test(o))))}:()=>({}))},bl=({from:r,replacement:e,scope:t,version:i,ref:n,type:s="API"},o)=>{Ve(()=>y(o),a=>{},{immediate:!0})},MU=(r,e,t)=>{let i={offsetX:0,offsetY:0};const n=a=>{const l=a.clientX,c=a.clientY,{offsetX:u,offsetY:d}=i,h=r.value.getBoundingClientRect(),p=h.left,f=h.top,m=h.width,g=h.height,v=document.documentElement.clientWidth,x=document.documentElement.clientHeight,b=-p+u,w=-f+d,_=v-p-m+u,S=x-f-g+d,T=E=>{const C=Math.min(Math.max(u+E.clientX-l,b),_),P=Math.min(Math.max(d+E.clientY-c,w),S);i={offsetX:C,offsetY:P},r.value.style.transform=`translate(${Ti(C)}, ${Ti(P)})`},M=()=>{document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",M)},s=()=>{e.value&&r.value&&e.value.addEventListener("mousedown",n)},o=()=>{e.value&&r.value&&e.value.removeEventListener("mousedown",n)};Et(()=>{wo(()=>{t.value?s():o()})}),Zr(()=>{o()})};var pde={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear",defaultLabel:"color picker",description:"current color is {color}. press enter to select a new color."},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",dateTablePrompt:"Use the arrow keys and enter to select the day of the month",monthTablePrompt:"Use the arrow keys and enter to select the month",yearTablePrompt:"Use the arrow keys and enter to select the year",selectedDate:"Selected date",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},weeksFull:{sun:"Sunday",mon:"Monday",tue:"Tuesday",wed:"Wednesday",thu:"Thursday",fri:"Friday",sat:"Saturday"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},inputNumber:{decrease:"decrease number",increase:"increase number"},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},dropdown:{toggleDropdown:"Toggle Dropdown"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",page:"Page",prev:"Go to previous page",next:"Go to next page",currentPage:"page {pager}",prevPages:"Previous {pager} pages",nextPages:"Next {pager} pages",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},dialog:{close:"Close this dialog"},drawer:{close:"Close this dialog"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input",close:"Close this dialog"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},slider:{defaultLabel:"slider between {min} and {max}",defaultRangeStartLabel:"pick start value",defaultRangeEndLabel:"pick end value"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const fde=r=>(e,t)=>mde(e,t,y(r)),mde=(r,e,t)=>ti(t,r,r).replace(/\{(\w+)\}/g,(i,n)=>{var s;return`${(s=e==null?void 0:e[n])!=null?s:`{${n}}`}`}),gde=r=>{const e=I(()=>y(r).name),t=zr(r)?r:W(r);return{lang:e,locale:t,t:fde(r)}},EU=Symbol("localeContextKey"),pr=r=>{const e=r||ut(EU,W());return gde(I(()=>e.value||pde))},Uv="el",vde="is-",Wd=(r,e,t,i,n)=>{let s=`${r}-${e}`;return t&&(s+=`-${t}`),i&&(s+=`__${i}`),n&&(s+=`--${n}`),s},CU=Symbol("namespaceContextKey"),rE=r=>{const e=r||(Dt()?ut(CU,W(Uv)):W(Uv));return I(()=>y(e)||Uv)},Ge=(r,e)=>{const t=rE(e);return{namespace:t,b:(i="")=>Wd(t.value,r,i,"",""),e:i=>i?Wd(t.value,r,"",i,""):"",m:i=>i?Wd(t.value,r,"","",i):"",be:(i,n)=>i&&n?Wd(t.value,r,i,n,""):"",em:(i,n)=>i&&n?Wd(t.value,r,"",i,n):"",bm:(i,n)=>i&&n?Wd(t.value,r,i,"",n):"",bem:(i,n,s)=>i&&n&&s?Wd(t.value,r,i,n,s):"",is:(i,...n)=>{const s=n.length>=1?n[0]:!0;return i&&s?`${vde}${i}`:""},cssVar:i=>{const n={};for(const s in i)i[s]&&(n[`--${t.value}-${s}`]=i[s]);return n},cssVarName:i=>`--${t.value}-${i}`,cssVarBlock:i=>{const n={};for(const s in i)i[s]&&(n[`--${t.value}-${r}-${s}`]=i[s]);return n},cssVarBlockName:i=>`--${t.value}-${r}-${i}`}},AU=(r,e={})=>{zr(r)||ji("[useLockscreen]","You need to pass a ref param to this function");const t=e.ns||Ge("popup"),i=PP(()=>t.bm("parent","hidden"));if(!ar||Oa(document.body,i.value))return;let n=0,s=!1,o="0";const a=()=>{setTimeout(()=>{Xs(document==null?void 0:document.body,i.value),s&&document&&(document.body.style.width=o)},200)};Ve(r,l=>{if(!l){a();return}s=!Oa(document.body,i.value),s&&(o=document.body.style.width),n=uU(t.namespace.value);const c=document.documentElement.clientHeight<document.body.scrollHeight,u=au(document.body,"overflowY");n>0&&(c||u==="scroll")&&s&&(document.body.style.width=`calc(100% - ${n}px)`),vl(document.body,i.value)}),dP(()=>a())},yde=Ia({type:Oe(Boolean),default:null}),bde=Ia({type:Oe(Function)}),NU=r=>{const e=`update:${r}`,t=`onUpdate:${r}`,i=[e],n={[r]:yde,[t]:bde};return{useModelToggle:({indicator:s,toggleReason:o,shouldHideWhenRouteChanges:a,shouldProceed:l,onShow:c,onHide:u})=>{const d=Dt(),{emit:h}=d,p=d.props,f=I(()=>Nt(p[t])),m=I(()=>p[r]===null),g=S=>{s.value!==!0&&(s.value=!0,o&&(o.value=S),Nt(c)&&c(S))},v=S=>{s.value!==!1&&(s.value=!1,o&&(o.value=S),Nt(u)&&u(S))},x=S=>{if(p.disabled===!0||Nt(l)&&!l())return;const T=f.value&&ar;T&&h(e,!0),(m.value||!T)&&g(S)},b=S=>{if(p.disabled===!0||!ar)return;const T=f.value&&ar;T&&h(e,!1),(m.value||!T)&&v(S)},w=S=>{Gi(S)&&(p.disabled&&S?f.value&&h(e,!1):s.value!==S&&(S?g():v()))},_=()=>{s.value?b():x()};return Ve(()=>p[r],w),a&&d.appContext.config.globalProperties.$route!==void 0&&Ve(()=>({...d.proxy.$route}),()=>{a.value&&s.value&&b()}),Et(()=>{w(p[r])}),{hide:b,show:x,toggle:_,hasUpdateHandler:f}},useModelToggleProps:n,useModelToggleEmits:i}};NU("modelValue");const RU=r=>{const e=Dt();return I(()=>{var t,i;return(i=(t=e==null?void 0:e.proxy)==null?void 0:t.$props)==null?void 0:i[r]})};var qs="top",ta="bottom",ra="right",Ks="left",iE="auto",Fv=[qs,ta,ra,Ks],mf="start",Bv="end",xde="clippingParents",kU="viewport",zv="popper",wde="reference",LU=Fv.reduce(function(r,e){return r.concat([e+"-"+mf,e+"-"+Bv])},[]),$d=[].concat(Fv,[iE]).reduce(function(r,e){return r.concat([e,e+"-"+mf,e+"-"+Bv])},[]),_de="beforeRead",Sde="read",Tde="afterRead",Mde="beforeMain",Ede="main",Cde="afterMain",Ade="beforeWrite",Nde="write",Rde="afterWrite",kde=[_de,Sde,Tde,Mde,Ede,Cde,Ade,Nde,Rde];function xl(r){return r?(r.nodeName||"").toLowerCase():null}function Da(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function gf(r){var e=Da(r).Element;return r instanceof e||r instanceof Element}function ia(r){var e=Da(r).HTMLElement;return r instanceof e||r instanceof HTMLElement}function nE(r){if(typeof ShadowRoot>"u")return!1;var e=Da(r).ShadowRoot;return r instanceof e||r instanceof ShadowRoot}function Lde(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},s=e.elements[t];!ia(s)||!xl(s)||(Object.assign(s.style,i),Object.keys(n).forEach(function(o){var a=n[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Ode(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var n=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]),a=o.reduce(function(l,c){return l[c]="",l},{});!ia(n)||!xl(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}var OU={name:"applyStyles",enabled:!0,phase:"write",fn:Lde,effect:Ode,requires:["computeStyles"]};function wl(r){return r.split("-")[0]}var Xd=Math.max,vx=Math.min,vf=Math.round;function yf(r,e){e===void 0&&(e=!1);var t=r.getBoundingClientRect(),i=1,n=1;if(ia(r)&&e){var s=r.offsetHeight,o=r.offsetWidth;o>0&&(i=vf(t.width)/o||1),s>0&&(n=vf(t.height)/s||1)}return{width:t.width/i,height:t.height/n,top:t.top/n,right:t.right/i,bottom:t.bottom/n,left:t.left/i,x:t.left/i,y:t.top/n}}function sE(r){var e=yf(r),t=r.offsetWidth,i=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:i}}function PU(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&nE(t)){var i=e;do{if(i&&r.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function sc(r){return Da(r).getComputedStyle(r)}function Pde(r){return["table","td","th"].indexOf(xl(r))>=0}function pu(r){return((gf(r)?r.ownerDocument:r.document)||window.document).documentElement}function yx(r){return xl(r)==="html"?r:r.assignedSlot||r.parentNode||(nE(r)?r.host:null)||pu(r)}function IU(r){return!ia(r)||sc(r).position==="fixed"?null:r.offsetParent}function Ide(r){var e=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,t=navigator.userAgent.indexOf("Trident")!==-1;if(t&&ia(r)){var i=sc(r);if(i.position==="fixed")return null}var n=yx(r);for(nE(n)&&(n=n.host);ia(n)&&["html","body"].indexOf(xl(n))<0;){var s=sc(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function Vv(r){for(var e=Da(r),t=IU(r);t&&Pde(t)&&sc(t).position==="static";)t=IU(t);return t&&(xl(t)==="html"||xl(t)==="body"&&sc(t).position==="static")?e:t||Ide(r)||e}function oE(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function Gv(r,e,t){return Xd(r,vx(e,t))}function Dde(r,e,t){var i=Gv(r,e,t);return i>t?t:i}function DU(){return{top:0,right:0,bottom:0,left:0}}function UU(r){return Object.assign({},DU(),r)}function FU(r,e){return e.reduce(function(t,i){return t[i]=r,t},{})}var Ude=function(r,e){return r=typeof r=="function"?r(Object.assign({},e.rects,{placement:e.placement})):r,UU(typeof r!="number"?r:FU(r,Fv))};function Fde(r){var e,t=r.state,i=r.name,n=r.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=wl(t.placement),l=oE(a),c=[Ks,ra].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=Ude(n.padding,t),h=sE(s),p=l==="y"?qs:Ks,f=l==="y"?ta:ra,m=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],g=o[l]-t.rects.reference[l],v=Vv(s),x=v?l==="y"?v.clientHeight||0:v.clientWidth||0:0,b=m/2-g/2,w=d[p],_=x-h[u]-d[f],S=x/2-h[u]/2+b,T=Gv(w,S,_),M=l;t.modifiersData[i]=(e={},e[M]=T,e.centerOffset=T-S,e)}}function Bde(r){var e=r.state,t=r.options,i=t.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=e.elements.popper.querySelector(n),!n)||!PU(e.elements.popper,n)||(e.elements.arrow=n))}var zde={name:"arrow",enabled:!0,phase:"main",fn:Fde,effect:Bde,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function bf(r){return r.split("-")[1]}var Vde={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Gde(r){var e=r.x,t=r.y,i=window,n=i.devicePixelRatio||1;return{x:vf(e*n)/n||0,y:vf(t*n)/n||0}}function BU(r){var e,t=r.popper,i=r.popperRect,n=r.placement,s=r.variation,o=r.offsets,a=r.position,l=r.gpuAcceleration,c=r.adaptive,u=r.roundOffsets,d=r.isFixed,h=o.x,p=h===void 0?0:h,f=o.y,m=f===void 0?0:f,g=typeof u=="function"?u({x:p,y:m}):{x:p,y:m};p=g.x,m=g.y;var v=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),b=Ks,w=qs,_=window;if(c){var S=Vv(t),T="clientHeight",M="clientWidth";if(S===Da(t)&&(S=pu(t),sc(S).position!=="static"&&a==="absolute"&&(T="scrollHeight",M="scrollWidth")),S=S,n===qs||(n===Ks||n===ra)&&s===Bv){w=ta;var E=d&&S===_&&_.visualViewport?_.visualViewport.height:S[T];m-=E-i.height,m*=l?1:-1}if(n===Ks||(n===qs||n===ta)&&s===Bv){b=ra;var C=d&&S===_&&_.visualViewport?_.visualViewport.width:S[M];p-=C-i.width,p*=l?1:-1}}var P=Object.assign({position:a},c&&Vde),A=u===!0?Gde({x:p,y:m}):{x:p,y:m};if(p=A.x,m=A.y,l){var N;return Object.assign({},P,(N={},N[w]=x?"0":"",N[b]=v?"0":"",N.transform=(_.devicePixelRatio||1)<=1?"translate("+p+"px, "+m+"px)":"translate3d("+p+"px, "+m+"px, 0)",N))}return Object.assign({},P,(e={},e[w]=x?m+"px":"",e[b]=v?p+"px":"",e.transform="",e))}function jde(r){var e=r.state,t=r.options,i=t.gpuAcceleration,n=i===void 0?!0:i,s=t.adaptive,o=s===void 0?!0:s,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:wl(e.placement),variation:bf(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,BU(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,BU(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var zU={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:jde,data:{}},bx={passive:!0};function Hde(r){var e=r.state,t=r.instance,i=r.options,n=i.scroll,s=n===void 0?!0:n,o=i.resize,a=o===void 0?!0:o,l=Da(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",t.update,bx)}),a&&l.addEventListener("resize",t.update,bx),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",t.update,bx)}),a&&l.removeEventListener("resize",t.update,bx)}}var VU={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Hde,data:{}},Wde={left:"right",right:"left",bottom:"top",top:"bottom"};function xx(r){return r.replace(/left|right|bottom|top/g,function(e){return Wde[e]})}var $de={start:"end",end:"start"};function GU(r){return r.replace(/start|end/g,function(e){return $de[e]})}function aE(r){var e=Da(r),t=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:t,scrollTop:i}}function lE(r){return yf(pu(r)).left+aE(r).scrollLeft}function Xde(r){var e=Da(r),t=pu(r),i=e.visualViewport,n=t.clientWidth,s=t.clientHeight,o=0,a=0;return i&&(n=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:n,height:s,x:o+lE(r),y:a}}function qde(r){var e,t=pu(r),i=aE(r),n=(e=r.ownerDocument)==null?void 0:e.body,s=Xd(t.scrollWidth,t.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=Xd(t.scrollHeight,t.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-i.scrollLeft+lE(r),l=-i.scrollTop;return sc(n||t).direction==="rtl"&&(a+=Xd(t.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function cE(r){var e=sc(r),t=e.overflow,i=e.overflowX,n=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+n+i)}function jU(r){return["html","body","#document"].indexOf(xl(r))>=0?r.ownerDocument.body:ia(r)&&cE(r)?r:jU(yx(r))}function jv(r,e){var t;e===void 0&&(e=[]);var i=jU(r),n=i===((t=r.ownerDocument)==null?void 0:t.body),s=Da(i),o=n?[s].concat(s.visualViewport||[],cE(i)?i:[]):i,a=e.concat(o);return n?a:a.concat(jv(yx(o)))}function uE(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function Kde(r){var e=yf(r);return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function HU(r,e){return e===kU?uE(Xde(r)):gf(e)?Kde(e):uE(qde(pu(r)))}function Yde(r){var e=jv(yx(r)),t=["absolute","fixed"].indexOf(sc(r).position)>=0,i=t&&ia(r)?Vv(r):r;return gf(i)?e.filter(function(n){return gf(n)&&PU(n,i)&&xl(n)!=="body"}):[]}function Zde(r,e,t){var i=e==="clippingParents"?Yde(r):[].concat(e),n=[].concat(i,[t]),s=n[0],o=n.reduce(function(a,l){var c=HU(r,l);return a.top=Xd(c.top,a.top),a.right=vx(c.right,a.right),a.bottom=vx(c.bottom,a.bottom),a.left=Xd(c.left,a.left),a},HU(r,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function WU(r){var e=r.reference,t=r.element,i=r.placement,n=i?wl(i):null,s=i?bf(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(n){case qs:l={x:o,y:e.y-t.height};break;case ta:l={x:o,y:e.y+e.height};break;case ra:l={x:e.x+e.width,y:a};break;case Ks:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=n?oE(n):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case mf:l[c]=l[c]-(e[u]/2-t[u]/2);break;case Bv:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function Hv(r,e){e===void 0&&(e={});var t=e,i=t.placement,n=i===void 0?r.placement:i,s=t.boundary,o=s===void 0?xde:s,a=t.rootBoundary,l=a===void 0?kU:a,c=t.elementContext,u=c===void 0?zv:c,d=t.altBoundary,h=d===void 0?!1:d,p=t.padding,f=p===void 0?0:p,m=UU(typeof f!="number"?f:FU(f,Fv)),g=u===zv?wde:zv,v=r.rects.popper,x=r.elements[h?g:u],b=Zde(gf(x)?x:x.contextElement||pu(r.elements.popper),o,l),w=yf(r.elements.reference),_=WU({reference:w,element:v,strategy:"absolute",placement:n}),S=uE(Object.assign({},v,_)),T=u===zv?S:w,M={top:b.top-T.top+m.top,bottom:T.bottom-b.bottom+m.bottom,left:b.left-T.left+m.left,right:T.right-b.right+m.right},E=r.modifiersData.offset;if(u===zv&&E){var C=E[n];Object.keys(M).forEach(function(P){var A=[ra,ta].indexOf(P)>=0?1:-1,N=[qs,ta].indexOf(P)>=0?"y":"x";M[P]+=C[N]*A})}return M}function Jde(r,e){e===void 0&&(e={});var t=e,i=t.placement,n=t.boundary,s=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?$d:l,u=bf(i),d=u?a?LU:LU.filter(function(f){return bf(f)===u}):Fv,h=d.filter(function(f){return c.indexOf(f)>=0});h.length===0&&(h=d);var p=h.reduce(function(f,m){return f[m]=Hv(r,{placement:m,boundary:n,rootBoundary:s,padding:o})[wl(m)],f},{});return Object.keys(p).sort(function(f,m){return p[f]-p[m]})}function Qde(r){if(wl(r)===iE)return[];var e=xx(r);return[GU(r),e,GU(e)]}function ehe(r){var e=r.state,t=r.options,i=r.name;if(!e.modifiersData[i]._skip){for(var n=t.mainAxis,s=n===void 0?!0:n,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,h=t.altBoundary,p=t.flipVariations,f=p===void 0?!0:p,m=t.allowedAutoPlacements,g=e.options.placement,v=wl(g),x=v===g,b=l||(x||!f?[xx(g)]:Qde(g)),w=[g].concat(b).reduce(function(ie,se){return ie.concat(wl(se)===iE?Jde(e,{placement:se,boundary:u,rootBoundary:d,padding:c,flipVariations:f,allowedAutoPlacements:m}):se)},[]),_=e.rects.reference,S=e.rects.popper,T=new Map,M=!0,E=w[0],C=0;C<w.length;C++){var P=w[C],A=wl(P),N=bf(P)===mf,R=[qs,ta].indexOf(A)>=0,F=R?"width":"height",B=Hv(e,{placement:P,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),k=R?N?ra:Ks:N?ta:qs;_[F]>S[F]&&(k=xx(k));var z=xx(k),O=[];if(s&&O.push(B[A]<=0),a&&O.push(B[k]<=0,B[z]<=0),O.every(function(ie){return ie})){E=P,M=!1;break}T.set(P,O)}if(M)for(var V=f?3:1,U=function(ie){var se=w.find(function(de){var K=T.get(de);if(K)return K.slice(0,ie).every(function(q){return q})});if(se)return E=se,"break"},G=V;G>0;G--){var X=U(G);if(X==="break")break}e.placement!==E&&(e.modifiersData[i]._skip=!0,e.placement=E,e.reset=!0)}}var the={name:"flip",enabled:!0,phase:"main",fn:ehe,requiresIfExists:["offset"],data:{_skip:!1}};function $U(r,e,t){return t===void 0&&(t={x:0,y:0}),{top:r.top-e.height-t.y,right:r.right-e.width+t.x,bottom:r.bottom-e.height+t.y,left:r.left-e.width-t.x}}function XU(r){return[qs,ra,ta,Ks].some(function(e){return r[e]>=0})}function rhe(r){var e=r.state,t=r.name,i=e.rects.reference,n=e.rects.popper,s=e.modifiersData.preventOverflow,o=Hv(e,{elementContext:"reference"}),a=Hv(e,{altBoundary:!0}),l=$U(o,i),c=$U(a,n,s),u=XU(l),d=XU(c);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}var ihe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:rhe};function nhe(r,e,t){var i=wl(r),n=[Ks,qs].indexOf(i)>=0?-1:1,s=typeof t=="function"?t(Object.assign({},e,{placement:r})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*n,[Ks,ra].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function she(r){var e=r.state,t=r.options,i=r.name,n=t.offset,s=n===void 0?[0,0]:n,o=$d.reduce(function(u,d){return u[d]=nhe(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}var ohe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:she};function ahe(r){var e=r.state,t=r.name;e.modifiersData[t]=WU({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var qU={name:"popperOffsets",enabled:!0,phase:"read",fn:ahe,data:{}};function lhe(r){return r==="x"?"y":"x"}function che(r){var e=r.state,t=r.options,i=r.name,n=t.mainAxis,s=n===void 0?!0:n,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,h=t.tether,p=h===void 0?!0:h,f=t.tetherOffset,m=f===void 0?0:f,g=Hv(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),v=wl(e.placement),x=bf(e.placement),b=!x,w=oE(v),_=lhe(w),S=e.modifiersData.popperOffsets,T=e.rects.reference,M=e.rects.popper,E=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,C=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),P=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,A={x:0,y:0};if(S){if(s){var N,R=w==="y"?qs:Ks,F=w==="y"?ta:ra,B=w==="y"?"height":"width",k=S[w],z=k+g[R],O=k-g[F],V=p?-M[B]/2:0,U=x===mf?T[B]:M[B],G=x===mf?-M[B]:-T[B],X=e.elements.arrow,ie=p&&X?sE(X):{width:0,height:0},se=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:DU(),de=se[R],K=se[F],q=Gv(0,T[B],ie[B]),ce=b?T[B]/2-V-q-de-C.mainAxis:U-q-de-C.mainAxis,Te=b?-T[B]/2+V+q+K+C.mainAxis:G+q+K+C.mainAxis,Z=e.elements.arrow&&Vv(e.elements.arrow),L=Z?w==="y"?Z.clientTop||0:Z.clientLeft||0:0,$=(N=P==null?void 0:P[w])!=null?N:0,re=k+ce-$-L,te=k+Te-$,le=Gv(p?vx(z,re):z,k,p?Xd(O,te):O);S[w]=le,A[w]=le-k}if(a){var ge,be=w==="x"?qs:Ks,_e=w==="x"?ta:ra,pe=S[_],Se=_==="y"?"height":"width",Fe=pe+g[be],Y=pe-g[_e],H=[qs,Ks].indexOf(v)!==-1,ne=(ge=P==null?void 0:P[_])!=null?ge:0,Le=H?Fe:pe-T[Se]-M[Se]-ne+C.altAxis,Pe=H?pe+T[Se]+M[Se]-ne-C.altAxis:Y,Ee=p&&H?Dde(Le,pe,Pe):Gv(p?Le:Fe,pe,p?Pe:Y);S[_]=Ee,A[_]=Ee-pe}e.modifiersData[i]=A}}var uhe={name:"preventOverflow",enabled:!0,phase:"main",fn:che,requiresIfExists:["offset"]};function dhe(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function hhe(r){return r===Da(r)||!ia(r)?aE(r):dhe(r)}function phe(r){var e=r.getBoundingClientRect(),t=vf(e.width)/r.offsetWidth||1,i=vf(e.height)/r.offsetHeight||1;return t!==1||i!==1}function fhe(r,e,t){t===void 0&&(t=!1);var i=ia(e),n=ia(e)&&phe(e),s=pu(e),o=yf(r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!t)&&((xl(e)!=="body"||cE(s))&&(a=hhe(e)),ia(e)?(l=yf(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=lE(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function mhe(r){var e=new Map,t=new Set,i=[];r.forEach(function(s){e.set(s.name,s)});function n(s){t.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&n(l)}}),i.push(s)}return r.forEach(function(s){t.has(s.name)||n(s)}),i}function ghe(r){var e=mhe(r);return kde.reduce(function(t,i){return t.concat(e.filter(function(n){return n.phase===i}))},[])}function vhe(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}function yhe(r){var e=r.reduce(function(t,i){var n=t[i.name];return t[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}var KU={placement:"bottom",modifiers:[],strategy:"absolute"};function YU(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function dE(r){r===void 0&&(r={});var e=r,t=e.defaultModifiers,i=t===void 0?[]:t,n=e.defaultOptions,s=n===void 0?KU:n;return function(o,a,l){l===void 0&&(l=s);var c={placement:"bottom",orderedModifiers:[],options:Object.assign({},KU,s),modifiersData:{},elements:{reference:o,popper:a},attributes:{},styles:{}},u=[],d=!1,h={state:c,setOptions:function(m){var g=typeof m=="function"?m(c.options):m;f(),c.options=Object.assign({},s,c.options,g),c.scrollParents={reference:gf(o)?jv(o):o.contextElement?jv(o.contextElement):[],popper:jv(a)};var v=ghe(yhe([].concat(i,c.options.modifiers)));return c.orderedModifiers=v.filter(function(x){return x.enabled}),p(),h.update()},forceUpdate:function(){if(!d){var m=c.elements,g=m.reference,v=m.popper;if(YU(g,v)){c.rects={reference:fhe(g,Vv(v),c.options.strategy==="fixed"),popper:sE(v)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach(function(M){return c.modifiersData[M.name]=Object.assign({},M.data)});for(var x=0;x<c.orderedModifiers.length;x++){if(c.reset===!0){c.reset=!1,x=-1;continue}var b=c.orderedModifiers[x],w=b.fn,_=b.options,S=_===void 0?{}:_,T=b.name;typeof w=="function"&&(c=w({state:c,options:S,name:T,instance:h})||c)}}}},update:vhe(function(){return new Promise(function(m){h.forceUpdate(),m(c)})}),destroy:function(){f(),d=!0}};if(!YU(o,a))return h;h.setOptions(l).then(function(m){!d&&l.onFirstUpdate&&l.onFirstUpdate(m)});function p(){c.orderedModifiers.forEach(function(m){var g=m.name,v=m.options,x=v===void 0?{}:v,b=m.effect;if(typeof b=="function"){var w=b({state:c,name:g,instance:h,options:x}),_=function(){};u.push(w||_)}})}function f(){u.forEach(function(m){return m()}),u=[]}return h}}dE();var bhe=[VU,qU,zU,OU];dE({defaultModifiers:bhe});var xhe=[VU,qU,zU,OU,ohe,the,uhe,zde,ihe],ZU=dE({defaultModifiers:xhe});const whe=(r,e,t={})=>{const i={name:"updateState",enabled:!0,phase:"write",fn:({state:l})=>{const c=_he(l);Object.assign(o.value,c)},requires:["computeStyles"]},n=I(()=>{const{onFirstUpdate:l,placement:c,strategy:u,modifiers:d}=y(t);return{onFirstUpdate:l,placement:c||"bottom",strategy:u||"absolute",modifiers:[...d||[],i,{name:"applyStyles",enabled:!1}]}}),s=Vr(),o=W({styles:{popper:{position:y(n).strategy,left:"0",top:"0"},arrow:{position:"absolute"}},attributes:{}}),a=()=>{s.value&&(s.value.destroy(),s.value=void 0)};return Ve(n,l=>{const c=y(s);c&&c.setOptions(l)},{deep:!0}),Ve([r,e],([l,c])=>{a(),!(!l||!c)&&(s.value=ZU(l,c,y(n)))}),Zr(()=>{a()}),{state:I(()=>{var l;return{...((l=y(s))==null?void 0:l.state)||{}}}),styles:I(()=>y(o).styles),attributes:I(()=>y(o).attributes),update:()=>{var l;return(l=y(s))==null?void 0:l.update()},forceUpdate:()=>{var l;return(l=y(s))==null?void 0:l.forceUpdate()},instanceRef:I(()=>y(s))}};function _he(r){const e=Object.keys(r.elements),t=ox(e.map(n=>[n,r.styles[n]||{}])),i=ox(e.map(n=>[n,r.attributes[n]]));return{styles:t,attributes:i}}const hE=r=>{if(!r)return{onClick:Lr,onMousedown:Lr,onMouseup:Lr};let e=!1,t=!1;return{onClick:i=>{e&&t&&r(i),e=t=!1},onMousedown:i=>{e=i.target===i.currentTarget},onMouseup:i=>{t=i.target===i.currentTarget}}},She=(r,e=0)=>{if(e===0)return r;const t=W(!1);let i=0;const n=()=>{i&&clearTimeout(i),i=window.setTimeout(()=>{t.value=r.value},e)};return Et(n),Ve(()=>r.value,s=>{s?n():t.value=s}),t};function JU(){let r;const e=(i,n)=>{t(),r=window.setTimeout(i,n)},t=()=>window.clearTimeout(r);return q1(()=>t()),{registerTimeout:e,cancelTimeout:t}}const QU={prefix:Math.floor(Math.random()*1e4),current:0},The=Symbol("elIdInjection"),eF=()=>Dt()?ut(The,QU):QU,na=r=>{const e=eF(),t=rE();return I(()=>y(r)||`${t.value}-id-${e.prefix}-${e.current++}`)};let xf=[];const tF=r=>{const e=r;e.key===bt.esc&&xf.forEach(t=>t(e))},Mhe=r=>{Et(()=>{xf.length===0&&document.addEventListener("keydown",tF),ar&&xf.push(r)}),Zr(()=>{xf=xf.filter(e=>e!==r),xf.length===0&&ar&&document.removeEventListener("keydown",tF)})};let rF;const iF=()=>{const r=rE(),e=eF(),t=I(()=>`${r.value}-popper-container-${e.prefix}`),i=I(()=>`#${t.value}`);return{id:t,selector:i}},Ehe=r=>{const e=document.createElement("div");return e.id=r,document.body.appendChild(e),e},Che=()=>{const{id:r,selector:e}=iF();return I1(()=>{ar&&!rF&&!document.body.querySelector(e.value)&&(rF=Ehe(r.value))}),{id:r,selector:e}},Ahe=et({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0}}),nF=({showAfter:r,hideAfter:e,autoClose:t,open:i,close:n})=>{const{registerTimeout:s}=JU(),{registerTimeout:o,cancelTimeout:a}=JU();return{onOpen:l=>{s(()=>{i(l);const c=y(t);Ct(c)&&c>0&&o(()=>{n(l)},c)},y(r))},onClose:l=>{a(),s(()=>{n(l)},y(e))}}},sF=Symbol("elForwardRef"),Nhe=r=>{Yt(sF,{setForwardRef:e=>{r.value=e}})},Rhe=r=>({mounted(e){r(e)},updated(e){r(e)},unmounted(){r(null)}}),oF=W(0),aF=2e3,lF=Symbol("zIndexContextKey"),wf=r=>{const e=r||(Dt()?ut(lF,void 0):void 0),t=I(()=>{const n=y(e);return Ct(n)?n:aF}),i=I(()=>t.value+oF.value);return{initialZIndex:t,currentZIndex:i,nextZIndex:()=>(oF.value++,i.value)}},Wv=Math.min,_f=Math.max,wx=Math.round,fu=r=>({x:r,y:r});function khe(r,e,t){return _f(r,Wv(e,t))}function cF(r,e){return typeof r=="function"?r(e):r}function pE(r){return r.split("-")[0]}function fE(r){return r.split("-")[1]}function Lhe(r){return r==="x"?"y":"x"}function uF(r){return r==="y"?"height":"width"}function mE(r){return["top","bottom"].includes(pE(r))?"y":"x"}function dF(r){return Lhe(mE(r))}function Ohe(r){return{top:0,right:0,bottom:0,left:0,...r}}function Phe(r){return typeof r!="number"?Ohe(r):{top:r,right:r,bottom:r,left:r}}function hF(r){return{...r,top:r.y,left:r.x,right:r.x+r.width,bottom:r.y+r.height}}function pF(r,e,t){let{reference:i,floating:n}=r;const s=mE(e),o=dF(e),a=uF(o),l=pE(e),c=s==="y",u=i.x+i.width/2-n.width/2,d=i.y+i.height/2-n.height/2,h=i[a]/2-n[a]/2;let p;switch(l){case"top":p={x:u,y:i.y-n.height};break;case"bottom":p={x:u,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:d};break;case"left":p={x:i.x-n.width,y:d};break;default:p={x:i.x,y:i.y}}switch(fE(e)){case"start":p[o]-=h*(t&&c?-1:1);break;case"end":p[o]+=h*(t&&c?-1:1);break}return p}const Ihe=async(r,e,t)=>{const{placement:i="bottom",strategy:n="absolute",middleware:s=[],platform:o}=t,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(e));let c=await o.getElementRects({reference:r,floating:e,strategy:n}),{x:u,y:d}=pF(c,i,l),h=i,p={},f=0;for(let m=0;m<a.length;m++){const{name:g,fn:v}=a[m],{x,y:b,data:w,reset:_}=await v({x:u,y:d,initialPlacement:i,placement:h,strategy:n,middlewareData:p,rects:c,platform:o,elements:{reference:r,floating:e}});if(u=x??u,d=b??d,p={...p,[g]:{...p[g],...w}},_&&f<=50){f++,typeof _=="object"&&(_.placement&&(h=_.placement),_.rects&&(c=_.rects===!0?await o.getElementRects({reference:r,floating:e,strategy:n}):_.rects),{x:u,y:d}=pF(c,h,l)),m=-1;continue}}return{x:u,y:d,placement:h,strategy:n,middlewareData:p}},Dhe=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:i,placement:n,rects:s,platform:o,elements:a}=e,{element:l,padding:c=0}=cF(r,e)||{};if(l==null)return{};const u=Phe(c),d={x:t,y:i},h=dF(n),p=uF(h),f=await o.getDimensions(l),m=h==="y",g=m?"top":"left",v=m?"bottom":"right",x=m?"clientHeight":"clientWidth",b=s.reference[p]+s.reference[h]-d[h]-s.floating[p],w=d[h]-s.reference[h],_=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=_?_[x]:0;(!S||!await(o.isElement==null?void 0:o.isElement(_)))&&(S=a.floating[x]||s.floating[p]);const T=b/2-w/2,M=S/2-f[p]/2-1,E=Wv(u[g],M),C=Wv(u[v],M),P=E,A=S-f[p]-C,N=S/2-f[p]/2+T,R=khe(P,N,A),F=fE(n)!=null&&N!=R&&s.reference[p]/2-(N<P?E:C)-f[p]/2<0?N<P?P-N:A-N:0;return{[h]:d[h]-F,data:{[h]:R,centerOffset:N-R+F}}}});async function Uhe(r,e){const{placement:t,platform:i,elements:n}=r,s=await(i.isRTL==null?void 0:i.isRTL(n.floating)),o=pE(t),a=fE(t),l=mE(t)==="y",c=["left","top"].includes(o)?-1:1,u=s&&l?-1:1,d=cF(e,r);let{mainAxis:h,crossAxis:p,alignmentAxis:f}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof f=="number"&&(p=a==="end"?f*-1:f),l?{x:p*u,y:h*c}:{x:h*c,y:p*u}}const Fhe=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){const{x:t,y:i}=e,n=await Uhe(e,r);return{x:t+n.x,y:i+n.y,data:n}}}};function mu(r){return fF(r)?(r.nodeName||"").toLowerCase():"#document"}function So(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function gu(r){var e;return(e=(fF(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function fF(r){return r instanceof Node||r instanceof So(r).Node}function oc(r){return r instanceof Element||r instanceof So(r).Element}function _l(r){return r instanceof HTMLElement||r instanceof So(r).HTMLElement}function mF(r){return typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof So(r).ShadowRoot}function $v(r){const{overflow:e,overflowX:t,overflowY:i,display:n}=sa(r);return/auto|scroll|overlay|hidden|clip/.test(e+i+t)&&!["inline","contents"].includes(n)}function Bhe(r){return["table","td","th"].includes(mu(r))}function gE(r){const e=vE(),t=sa(r);return t.transform!=="none"||t.perspective!=="none"||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(t.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(t.contain||"").includes(i))}function zhe(r){let e=Sf(r);for(;_l(e)&&!_x(e);){if(gE(e))return e;e=Sf(e)}return null}function vE(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function _x(r){return["html","body","#document"].includes(mu(r))}function sa(r){return So(r).getComputedStyle(r)}function Sx(r){return oc(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.pageXOffset,scrollTop:r.pageYOffset}}function Sf(r){if(mu(r)==="html")return r;const e=r.assignedSlot||r.parentNode||mF(r)&&r.host||gu(r);return mF(e)?e.host:e}function gF(r){const e=Sf(r);return _x(e)?r.ownerDocument?r.ownerDocument.body:r.body:_l(e)&&$v(e)?e:gF(e)}function vF(r,e){var t;e===void 0&&(e=[]);const i=gF(r),n=i===((t=r.ownerDocument)==null?void 0:t.body),s=So(i);return n?e.concat(s,s.visualViewport||[],$v(i)?i:[]):e.concat(i,vF(i))}function yF(r){const e=sa(r);let t=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const n=_l(r),s=n?r.offsetWidth:t,o=n?r.offsetHeight:i,a=wx(t)!==s||wx(i)!==o;return a&&(t=s,i=o),{width:t,height:i,$:a}}function bF(r){return oc(r)?r:r.contextElement}function Tf(r){const e=bF(r);if(!_l(e))return fu(1);const t=e.getBoundingClientRect(),{width:i,height:n,$:s}=yF(e);let o=(s?wx(t.width):t.width)/i,a=(s?wx(t.height):t.height)/n;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Vhe=fu(0);function xF(r){const e=So(r);return!vE()||!e.visualViewport?Vhe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Ghe(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==So(r)?!1:e}function Xv(r,e,t,i){e===void 0&&(e=!1),t===void 0&&(t=!1);const n=r.getBoundingClientRect(),s=bF(r);let o=fu(1);e&&(i?oc(i)&&(o=Tf(i)):o=Tf(r));const a=Ghe(s,t,i)?xF(s):fu(0);let l=(n.left+a.x)/o.x,c=(n.top+a.y)/o.y,u=n.width/o.x,d=n.height/o.y;if(s){const h=So(s),p=i&&oc(i)?So(i):i;let f=h.frameElement;for(;f&&i&&p!==h;){const m=Tf(f),g=f.getBoundingClientRect(),v=sa(f),x=g.left+(f.clientLeft+parseFloat(v.paddingLeft))*m.x,b=g.top+(f.clientTop+parseFloat(v.paddingTop))*m.y;l*=m.x,c*=m.y,u*=m.x,d*=m.y,l+=x,c+=b,f=So(f).frameElement}}return hF({width:u,height:d,x:l,y:c})}function jhe(r){let{rect:e,offsetParent:t,strategy:i}=r;const n=_l(t),s=gu(t);if(t===s)return e;let o={scrollLeft:0,scrollTop:0},a=fu(1);const l=fu(0);if((n||!n&&i!=="fixed")&&((mu(t)!=="body"||$v(s))&&(o=Sx(t)),_l(t))){const c=Xv(t);a=Tf(t),l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}return{width:e.width*a.x,height:e.height*a.y,x:e.x*a.x-o.scrollLeft*a.x+l.x,y:e.y*a.y-o.scrollTop*a.y+l.y}}function Hhe(r){return Array.from(r.getClientRects())}function wF(r){return Xv(gu(r)).left+Sx(r).scrollLeft}function Whe(r){const e=gu(r),t=Sx(r),i=r.ownerDocument.body,n=_f(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),s=_f(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let o=-t.scrollLeft+wF(r);const a=-t.scrollTop;return sa(i).direction==="rtl"&&(o+=_f(e.clientWidth,i.clientWidth)-n),{width:n,height:s,x:o,y:a}}function $he(r,e){const t=So(r),i=gu(r),n=t.visualViewport;let s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(n){s=n.width,o=n.height;const c=vE();(!c||c&&e==="fixed")&&(a=n.offsetLeft,l=n.offsetTop)}return{width:s,height:o,x:a,y:l}}function Xhe(r,e){const t=Xv(r,!0,e==="fixed"),i=t.top+r.clientTop,n=t.left+r.clientLeft,s=_l(r)?Tf(r):fu(1),o=r.clientWidth*s.x,a=r.clientHeight*s.y,l=n*s.x,c=i*s.y;return{width:o,height:a,x:l,y:c}}function _F(r,e,t){let i;if(e==="viewport")i=$he(r,t);else if(e==="document")i=Whe(gu(r));else if(oc(e))i=Xhe(e,t);else{const n=xF(r);i={...e,x:e.x-n.x,y:e.y-n.y}}return hF(i)}function SF(r,e){const t=Sf(r);return t===e||!oc(t)||_x(t)?!1:sa(t).position==="fixed"||SF(t,e)}function qhe(r,e){const t=e.get(r);if(t)return t;let i=vF(r).filter(a=>oc(a)&&mu(a)!=="body"),n=null;const s=sa(r).position==="fixed";let o=s?Sf(r):r;for(;oc(o)&&!_x(o);){const a=sa(o),l=gE(o);!l&&a.position==="fixed"&&(n=null),(s?!l&&!n:!l&&a.position==="static"&&n&&["absolute","fixed"].includes(n.position)||$v(o)&&!l&&SF(r,o))?i=i.filter(c=>c!==o):n=a,o=Sf(o)}return e.set(r,i),i}function Khe(r){let{element:e,boundary:t,rootBoundary:i,strategy:n}=r;const s=[...t==="clippingAncestors"?qhe(e,this._c):[].concat(t),i],o=s[0],a=s.reduce((l,c)=>{const u=_F(e,c,n);return l.top=_f(u.top,l.top),l.right=Wv(u.right,l.right),l.bottom=Wv(u.bottom,l.bottom),l.left=_f(u.left,l.left),l},_F(e,o,n));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Yhe(r){return yF(r)}function Zhe(r,e,t){const i=_l(e),n=gu(e),s=t==="fixed",o=Xv(r,!0,s,e);let a={scrollLeft:0,scrollTop:0};const l=fu(0);if(i||!i&&!s)if((mu(e)!=="body"||$v(n))&&(a=Sx(e)),i){const c=Xv(e,!0,s,e);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else n&&(l.x=wF(n));return{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function TF(r,e){return!_l(r)||sa(r).position==="fixed"?null:e?e(r):r.offsetParent}function MF(r,e){const t=So(r);if(!_l(r))return t;let i=TF(r,e);for(;i&&Bhe(i)&&sa(i).position==="static";)i=TF(i,e);return i&&(mu(i)==="html"||mu(i)==="body"&&sa(i).position==="static"&&!gE(i))?t:i||zhe(r)||t}const Jhe=async function(r){let{reference:e,floating:t,strategy:i}=r;const n=this.getOffsetParent||MF,s=this.getDimensions;return{reference:Zhe(e,await n(t),i),floating:{x:0,y:0,...await s(t)}}};function Qhe(r){return sa(r).direction==="rtl"}const epe={convertOffsetParentRelativeRectToViewportRelativeRect:jhe,getDocumentElement:gu,getClippingRect:Khe,getOffsetParent:MF,getElementRects:Jhe,getClientRects:Hhe,getDimensions:Yhe,getScale:Tf,isElement:oc,isRTL:Qhe},tpe=(r,e,t)=>{const i=new Map,n={platform:epe,...t},s={...n.platform,_c:i};return Ihe(r,e,{...n,platform:s})};et({});const rpe=r=>{if(!ar)return;if(!r)return r;const e=_o(r);return e||(zr(r)?e:r)},ipe=({middleware:r,placement:e,strategy:t})=>{const i=W(),n=W(),s=W(),o=W(),a=W({}),l={x:s,y:o,placement:e,strategy:t,middlewareData:a},c=async()=>{if(!ar)return;const u=rpe(i),d=_o(n);if(!u||!d)return;const h=await tpe(u,d,{placement:y(e),strategy:y(t),middleware:y(r)});Iv(l).forEach(p=>{l[p].value=h[p]})};return Et(()=>{wo(()=>{c()})}),{...l,update:c,referenceRef:i,contentRef:n}},npe=({arrowRef:r,padding:e})=>({name:"arrow",options:{element:r,padding:e},fn(t){const i=y(r);return i?Dhe({element:i,padding:e}).fn(t):{}}});function spe(r){const e=W();function t(){if(r.value==null)return;const{selectionStart:n,selectionEnd:s,value:o}=r.value;if(n==null||s==null)return;const a=o.slice(0,Math.max(0,n)),l=o.slice(Math.max(0,s));e.value={selectionStart:n,selectionEnd:s,value:o,beforeTxt:a,afterTxt:l}}function i(){if(r.value==null||e.value==null)return;const{value:n}=r.value,{beforeTxt:s,afterTxt:o,selectionStart:a}=e.value;if(s==null||o==null||a==null)return;let l=n.length;if(n.endsWith(o))l=n.length-o.length;else if(n.startsWith(s))l=s.length;else{const c=s[a-1],u=n.indexOf(c,a-1);u!==-1&&(l=u+1)}r.value.setSelectionRange(l,l)}return[t,i]}const ope=(r,e,t)=>pf(r.subTree).filter(i=>{var n;return ei(i)&&((n=i.type)==null?void 0:n.name)===e&&!!i.component}).map(i=>i.component.uid).map(i=>t[i]).filter(i=>!!i),yE=(r,e)=>{const t={},i=Vr([]);return{children:i,addChild:n=>{t[n.uid]=n,i.value=ope(r,e,t)},removeChild:n=>{delete t[n],i.value=i.value.filter(s=>s.uid!==n)}}},jn=Ia({type:String,values:yl,required:!1}),EF=Symbol("size"),ape=()=>{const r=ut(EF,{});return I(()=>y(r.size)||"")};function lpe(r,{afterFocus:e,afterBlur:t}={}){const i=Dt(),{emit:n}=i,s=Vr(),o=W(!1),a=u=>{o.value||(o.value=!0,n("focus",u),e==null||e())},l=u=>{var d;u.relatedTarget&&(d=s.value)!=null&&d.contains(u.relatedTarget)||(o.value=!1,n("blur",u),t==null||t())},c=()=>{var u;(u=r.value)==null||u.focus()};return Ve(s,u=>{u&&u.setAttribute("tabindex","-1")}),Qr(s,"click",c),{wrapperRef:s,isFocused:o,handleFocus:a,handleBlur:l}}const CF=Symbol(),Tx=W();function Mx(r,e=void 0){const t=Dt()?ut(CF,Tx):Tx;return r?I(()=>{var i,n;return(n=(i=t.value)==null?void 0:i[r])!=null?n:e}):t}function Ex(r,e){const t=Mx(),i=Ge(r,I(()=>{var a;return((a=t.value)==null?void 0:a.namespace)||Uv})),n=pr(I(()=>{var a;return(a=t.value)==null?void 0:a.locale})),s=wf(I(()=>{var a;return((a=t.value)==null?void 0:a.zIndex)||aF})),o=I(()=>{var a;return y(e)||((a=t.value)==null?void 0:a.size)||""});return bE(I(()=>y(t)||{})),{ns:i,locale:n,zIndex:s,size:o}}const bE=(r,e,t=!1)=>{var i;const n=!!Dt(),s=n?Mx():void 0,o=(i=e==null?void 0:e.provide)!=null?i:n?Yt:void 0;if(!o)return;const a=I(()=>{const l=y(r);return s!=null&&s.value?cpe(s.value,l):l});return o(CF,a),o(EU,I(()=>a.value.locale)),o(CU,I(()=>a.value.namespace)),o(lF,I(()=>a.value.zIndex)),o(EF,{size:I(()=>a.value.size||"")}),(t||!Tx.value)&&(Tx.value=a.value),a},cpe=(r,e)=>{var t;const i=[...new Set([...Iv(r),...Iv(e)])],n={};for(const s of i)n[s]=(t=e[s])!=null?t:r[s];return n},upe=et({a11y:{type:Boolean,default:!0},locale:{type:Oe(Object)},size:jn,button:{type:Oe(Object)},experimentalFeatures:{type:Oe(Object)},keyboardNavigation:{type:Boolean,default:!0},message:{type:Oe(Object)},zIndex:Number,namespace:{type:String,default:"el"}}),xE={},dpe=xe({name:"ElConfigProvider",props:upe,setup(r,{slots:e}){Ve(()=>r.message,i=>{Object.assign(xE,i??{})},{immediate:!0,deep:!0});const t=bE(r);return()=>ze(e,"default",{config:t==null?void 0:t.value})}}),hpe=zt(dpe),ppe="2.3.12",fpe=(r=[])=>({version:ppe,install:(e,t)=>{e[SU]||(e[SU]=!0,r.forEach(i=>e.use(i)),t&&bE(t,e,!0))}}),mpe=et({zIndex:{type:Oe([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),gpe={scroll:({scrollTop:r,fixed:e})=>Ct(r)&&Gi(e),[Kr]:r=>Gi(r)};var Qe=(r,e)=>{const t=r.__vccOpts||r;for(const[i,n]of e)t[i]=n;return t};const AF="ElAffix",vpe=xe({name:AF}),ype=xe({...vpe,props:mpe,emits:gpe,setup(r,{expose:e,emit:t}){const i=r,n=Ge("affix"),s=Vr(),o=Vr(),a=Vr(),{height:l}=DQ(),{height:c,width:u,top:d,bottom:h,update:p}=GD(o,{windowScroll:!1}),f=GD(s),m=W(!1),g=W(0),v=W(0),x=I(()=>({height:m.value?`${c.value}px`:"",width:m.value?`${u.value}px`:""})),b=I(()=>{if(!m.value)return{};const S=i.offset?Ti(i.offset):0;return{height:`${c.value}px`,width:`${u.value}px`,top:i.position==="top"?S:"",bottom:i.position==="bottom"?S:"",transform:v.value?`translateY(${v.value}px)`:"",zIndex:i.zIndex}}),w=()=>{if(a.value)if(g.value=a.value instanceof Window?document.documentElement.scrollTop:a.value.scrollTop||0,i.position==="top")if(i.target){const S=f.bottom.value-i.offset-c.value;m.value=i.offset>d.value&&f.bottom.value>0,v.value=S<0?S:0}else m.value=i.offset>d.value;else if(i.target){const S=l.value-f.top.value-i.offset-c.value;m.value=l.value-i.offset<h.value&&l.value>f.top.value,v.value=S<0?-S:0}else m.value=l.value-i.offset<h.value},_=()=>{p(),t("scroll",{scrollTop:g.value,fixed:m.value})};return Ve(m,S=>t("change",S)),Et(()=>{var S;i.target?(s.value=(S=document.querySelector(i.target))!=null?S:void 0,s.value||ji(AF,`Target is not existed: ${i.target}`)):s.value=document.documentElement,a.value=XM(o.value,!0),p()}),Qr(a,"scroll",_),wo(w),e({update:w,updateRoot:p}),(S,T)=>(D(),ee("div",{ref_key:"root",ref:o,class:j(y(n).b()),style:pt(y(x))},[J("div",{class:j({[y(n).m("fixed")]:m.value}),style:pt(y(b))},[ze(S.$slots,"default")],6)],6))}});var bpe=Qe(ype,[["__file","/home/runner/work/element-plus/element-plus/packages/components/affix/src/affix.vue"]]);const xpe=zt(bpe),wpe=et({size:{type:Oe([Number,String])},color:{type:String}}),_pe=xe({name:"ElIcon",inheritAttrs:!1}),Spe=xe({..._pe,props:wpe,setup(r){const e=r,t=Ge("icon"),i=I(()=>{const{size:n,color:s}=e;return!n&&!s?{}:{fontSize:rn(n)?void 0:Ti(n),"--color":s}});return(n,s)=>(D(),ee("i",qt({class:y(t).b(),style:y(i)},n.$attrs),[ze(n.$slots,"default")],16))}});var Tpe=Qe(Spe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/icon/src/icon.vue"]]);const dt=zt(Tpe),Mpe=["light","dark"],Epe=et({title:{type:String,default:""},description:{type:String,default:""},type:{type:String,values:Iv(hu),default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,values:Mpe,default:"light"}}),Cpe={close:r=>r instanceof MouseEvent},Ape=xe({name:"ElAlert"}),Npe=xe({...Ape,props:Epe,emits:Cpe,setup(r,{emit:e}){const t=r,{Close:i}=ZM,n=Gn(),s=Ge("alert"),o=W(!0),a=I(()=>hu[t.type]),l=I(()=>[s.e("icon"),{[s.is("big")]:!!t.description||!!n.default}]),c=I(()=>({[s.is("bold")]:t.description||n.default})),u=d=>{o.value=!1,e("close",d)};return(d,h)=>(D(),Ae(Li,{name:y(s).b("fade"),persisted:""},{default:me(()=>[It(J("div",{class:j([y(s).b(),y(s).m(d.type),y(s).is("center",d.center),y(s).is(d.effect)]),role:"alert"},[d.showIcon&&y(a)?(D(),Ae(y(dt),{key:0,class:j(y(l))},{default:me(()=>[(D(),Ae(Xt(y(a))))]),_:1},8,["class"])):Re("v-if",!0),J("div",{class:j(y(s).e("content"))},[d.title||d.$slots.title?(D(),ee("span",{key:0,class:j([y(s).e("title"),y(c)])},[ze(d.$slots,"title",{},()=>[ir($e(d.title),1)])],2)):Re("v-if",!0),d.$slots.default||d.description?(D(),ee("p",{key:1,class:j(y(s).e("description"))},[ze(d.$slots,"default",{},()=>[ir($e(d.description),1)])],2)):Re("v-if",!0),d.closable?(D(),ee(ct,{key:2},[d.closeText?(D(),ee("div",{key:0,class:j([y(s).e("close-btn"),y(s).is("customed")]),onClick:u},$e(d.closeText),3)):(D(),Ae(y(dt),{key:1,class:j(y(s).e("close-btn")),onClick:u},{default:me(()=>[ue(y(i))]),_:1},8,["class"]))],64)):Re("v-if",!0)],2)],2),[[vr,o.value]])]),_:3},8,["name"]))}});var Rpe=Qe(Npe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/alert/src/alert.vue"]]);const kpe=zt(Rpe),qd=Symbol("formContextKey"),Sl=Symbol("formItemContextKey"),Hi=(r,e={})=>{const t=W(void 0),i=e.prop?t:RU("size"),n=e.global?t:ape(),s=e.form?{size:void 0}:ut(qd,void 0),o=e.formItem?{size:void 0}:ut(Sl,void 0);return I(()=>i.value||y(r)||(o==null?void 0:o.size)||(s==null?void 0:s.size)||n.value||"")},Ys=r=>{const e=RU("disabled"),t=ut(qd,void 0);return I(()=>e.value||y(r)||(t==null?void 0:t.disabled)||!1)},Ns=()=>{const r=ut(qd,void 0),e=ut(Sl,void 0);return{form:r,formItem:e}},vu=(r,{formItemContext:e,disableIdGeneration:t,disableIdManagement:i})=>{t||(t=W(!1)),i||(i=W(!1));const n=W();let s;const o=I(()=>{var a;return!!(!r.label&&e&&e.inputIds&&((a=e.inputIds)==null?void 0:a.length)<=1)});return Et(()=>{s=Ve([ai(r,"id"),t],([a,l])=>{const c=a??(l?void 0:na().value);c!==n.value&&(e!=null&&e.removeInputId&&(n.value&&e.removeInputId(n.value),!(i!=null&&i.value)&&!l&&c&&e.addInputId(c)),n.value=c)},{immediate:!0})}),ki(()=>{s&&s(),e!=null&&e.removeInputId&&n.value&&e.removeInputId(n.value)}),{isLabeledByFormItem:o,inputId:n}},Lpe=et({size:{type:String,values:yl},disabled:Boolean}),Ope=et({...Lpe,model:Object,rules:{type:Oe(Object)},labelPosition:{type:String,values:["left","right","top"],default:"right"},requireAsteriskPosition:{type:String,values:["left","right"],default:"left"},labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:Boolean,scrollToError:Boolean,scrollIntoViewOptions:{type:[Object,Boolean]}}),Ppe={validate:(r,e,t)=>(lt(r)||kt(r))&&Gi(e)&&kt(t)};function Ipe(){const r=W([]),e=I(()=>{if(!r.value.length)return"0";const s=Math.max(...r.value);return s?`${s}px`:""});function t(s){const o=r.value.indexOf(s);return o===-1&&e.value,o}function i(s,o){if(s&&o){const a=t(o);r.value.splice(a,1,s)}else s&&r.value.push(s)}function n(s){const o=t(s);o>-1&&r.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:i,deregisterLabelWidth:n}}const Cx=(r,e)=>{const t=Gd(e);return t.length>0?r.filter(i=>i.prop&&t.includes(i.prop)):r},Dpe="ElForm",Upe=xe({name:Dpe}),Fpe=xe({...Upe,props:Ope,emits:Ppe,setup(r,{expose:e,emit:t}){const i=r,n=[],s=Hi(),o=Ge("form"),a=I(()=>{const{labelPosition:x,inline:b}=i;return[o.b(),o.m(s.value||"default"),{[o.m(`label-${x}`)]:x,[o.m("inline")]:b}]}),l=x=>{n.push(x)},c=x=>{x.prop&&n.splice(n.indexOf(x),1)},u=(x=[])=>{i.model&&Cx(n,x).forEach(b=>b.resetField())},d=(x=[])=>{Cx(n,x).forEach(b=>b.clearValidate())},h=I(()=>!!i.model),p=x=>{if(n.length===0)return[];const b=Cx(n,x);return b.length?b:[]},f=async x=>g(void 0,x),m=async(x=[])=>{if(!h.value)return!1;const b=p(x);if(b.length===0)return!0;let w={};for(const _ of b)try{await _.validate("")}catch(S){w={...w,...S}}return Object.keys(w).length===0?!0:Promise.reject(w)},g=async(x=[],b)=>{const w=!Nt(b);try{const _=await m(x);return _===!0&&(b==null||b(_)),_}catch(_){if(_ instanceof Error)throw _;const S=_;return i.scrollToError&&v(Object.keys(S)[0]),b==null||b(!1,S),w&&Promise.reject(S)}},v=x=>{var b;const w=Cx(n,x)[0];w&&((b=w.$el)==null||b.scrollIntoView(i.scrollIntoViewOptions))};return Ve(()=>i.rules,()=>{i.validateOnRuleChange&&f().catch(x=>{})},{deep:!0}),Yt(qd,br({...fn(i),emit:t,resetFields:u,clearValidate:d,validateField:g,addField:l,removeField:c,...Ipe()})),e({validate:f,validateField:g,resetFields:u,clearValidate:d,scrollToField:v}),(x,b)=>(D(),ee("form",{class:j(y(a))},[ze(x.$slots,"default")],2))}});var Bpe=Qe(Fpe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form.vue"]]);function Kd(){return Kd=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}return r},Kd.apply(this,arguments)}function zpe(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,qv(r,e)}function wE(r){return wE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},wE(r)}function qv(r,e){return qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,i){return t.__proto__=i,t},qv(r,e)}function Vpe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ax(r,e,t){return Vpe()?Ax=Reflect.construct.bind():Ax=function(i,n,s){var o=[null];o.push.apply(o,n);var a=Function.bind.apply(i,o),l=new a;return s&&qv(l,s.prototype),l},Ax.apply(null,arguments)}function Gpe(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function _E(r){var e=typeof Map=="function"?new Map:void 0;return _E=function(t){if(t===null||!Gpe(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return Ax(t,arguments,wE(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),qv(i,t)},_E(r)}var jpe=/%[sdj%]/g,Hpe=function(){};typeof process<"u"&&process.env;function SE(r){if(!r||!r.length)return null;var e={};return r.forEach(function(t){var i=t.field;e[i]=e[i]||[],e[i].push(t)}),e}function To(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];var n=0,s=t.length;if(typeof r=="function")return r.apply(null,t);if(typeof r=="string"){var o=r.replace(jpe,function(a){if(a==="%%")return"%";if(n>=s)return a;switch(a){case"%s":return String(t[n++]);case"%d":return Number(t[n++]);case"%j":try{return JSON.stringify(t[n++])}catch{return"[Circular]"}break;default:return a}});return o}return r}function Wpe(r){return r==="string"||r==="url"||r==="hex"||r==="email"||r==="date"||r==="pattern"}function mn(r,e){return!!(r==null||e==="array"&&Array.isArray(r)&&!r.length||Wpe(e)&&typeof r=="string"&&!r)}function $pe(r,e,t){var i=[],n=0,s=r.length;function o(a){i.push.apply(i,a||[]),n++,n===s&&t(i)}r.forEach(function(a){e(a,o)})}function NF(r,e,t){var i=0,n=r.length;function s(o){if(o&&o.length){t(o);return}var a=i;i=i+1,a<n?e(r[a],s):t([])}s([])}function Xpe(r){var e=[];return Object.keys(r).forEach(function(t){e.push.apply(e,r[t]||[])}),e}var RF=function(r){zpe(e,r);function e(t,i){var n;return n=r.call(this,"Async Validation Error")||this,n.errors=t,n.fields=i,n}return e}(_E(Error));function qpe(r,e,t,i,n){if(e.first){var s=new Promise(function(h,p){var f=function(g){return i(g),g.length?p(new RF(g,SE(g))):h(n)},m=Xpe(r);NF(m,t,f)});return s.catch(function(h){return h}),s}var o=e.firstFields===!0?Object.keys(r):e.firstFields||[],a=Object.keys(r),l=a.length,c=0,u=[],d=new Promise(function(h,p){var f=function(m){if(u.push.apply(u,m),c++,c===l)return i(u),u.length?p(new RF(u,SE(u))):h(n)};a.length||(i(u),h(n)),a.forEach(function(m){var g=r[m];o.indexOf(m)!==-1?NF(g,t,f):$pe(g,t,f)})});return d.catch(function(h){return h}),d}function Kpe(r){return!!(r&&r.message!==void 0)}function Ype(r,e){for(var t=r,i=0;i<e.length;i++){if(t==null)return t;t=t[e[i]]}return t}function kF(r,e){return function(t){var i;return r.fullFields?i=Ype(e,r.fullFields):i=e[t.field||r.fullField],Kpe(t)?(t.field=t.field||r.fullField,t.fieldValue=i,t):{message:typeof t=="function"?t():t,fieldValue:i,field:t.field||r.fullField}}}function LF(r,e){if(e){for(var t in e)if(e.hasOwnProperty(t)){var i=e[t];typeof i=="object"&&typeof r[t]=="object"?r[t]=Kd({},r[t],i):r[t]=i}}return r}var OF=function(r,e,t,i,n,s){r.required&&(!t.hasOwnProperty(r.field)||mn(e,s||r.type))&&i.push(To(n.messages.required,r.fullField))},Zpe=function(r,e,t,i,n){(/^\s+$/.test(e)||e==="")&&i.push(To(n.messages.whitespace,r.fullField))},Nx,Jpe=function(){if(Nx)return Nx;var r="[a-fA-F\\d:]",e=function(b){return b&&b.includeBoundaries?"(?:(?<=\\s|^)(?="+r+")|(?<="+r+")(?=\\s|$))":""},t="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",i="[a-fA-F\\d]{1,4}",n=(`
(?:
(?:`+i+":){7}(?:"+i+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+i+":){6}(?:"+t+"|:"+i+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+i+":){5}(?::"+t+"|(?::"+i+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+i+":){4}(?:(?::"+i+"){0,1}:"+t+"|(?::"+i+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+i+":){3}(?:(?::"+i+"){0,2}:"+t+"|(?::"+i+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+i+":){2}(?:(?::"+i+"){0,3}:"+t+"|(?::"+i+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+i+":){1}(?:(?::"+i+"){0,4}:"+t+"|(?::"+i+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+i+"){0,5}:"+t+"|(?::"+i+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),s=new RegExp("(?:^"+t+"$)|(?:^"+n+"$)"),o=new RegExp("^"+t+"$"),a=new RegExp("^"+n+"$"),l=function(b){return b&&b.exact?s:new RegExp("(?:"+e(b)+t+e(b)+")|(?:"+e(b)+n+e(b)+")","g")};l.v4=function(b){return b&&b.exact?o:new RegExp(""+e(b)+t+e(b),"g")},l.v6=function(b){return b&&b.exact?a:new RegExp(""+e(b)+n+e(b),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,h=l.v6().source,p="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",f="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",m="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",g="(?::\\d{2,5})?",v='(?:[/?#][^\\s"]*)?',x="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+h+"|"+p+f+m+")"+g+v;return Nx=new RegExp("(?:^"+x+"$)","i"),Nx},PF={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Kv={integer:function(r){return Kv.number(r)&&parseInt(r,10)===r},float:function(r){return Kv.number(r)&&!Kv.integer(r)},array:function(r){return Array.isArray(r)},regexp:function(r){if(r instanceof RegExp)return!0;try{return!!new RegExp(r)}catch{return!1}},date:function(r){return typeof r.getTime=="function"&&typeof r.getMonth=="function"&&typeof r.getYear=="function"&&!isNaN(r.getTime())},number:function(r){return isNaN(r)?!1:typeof r=="number"},object:function(r){return typeof r=="object"&&!Kv.array(r)},method:function(r){return typeof r=="function"},email:function(r){return typeof r=="string"&&r.length<=320&&!!r.match(PF.email)},url:function(r){return typeof r=="string"&&r.length<=2048&&!!r.match(Jpe())},hex:function(r){return typeof r=="string"&&!!r.match(PF.hex)}},Qpe=function(r,e,t,i,n){if(r.required&&e===void 0){OF(r,e,t,i,n);return}var s=["integer","float","array","regexp","object","method","email","number","date","url","hex"],o=r.type;s.indexOf(o)>-1?Kv[o](e)||i.push(To(n.messages.types[o],r.fullField,r.type)):o&&typeof e!==r.type&&i.push(To(n.messages.types[o],r.fullField,r.type))},efe=function(r,e,t,i,n){var s=typeof r.len=="number",o=typeof r.min=="number",a=typeof r.max=="number",l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=e,u=null,d=typeof e=="number",h=typeof e=="string",p=Array.isArray(e);if(d?u="number":h?u="string":p&&(u="array"),!u)return!1;p&&(c=e.length),h&&(c=e.replace(l,"_").length),s?c!==r.len&&i.push(To(n.messages[u].len,r.fullField,r.len)):o&&!a&&c<r.min?i.push(To(n.messages[u].min,r.fullField,r.min)):a&&!o&&c>r.max?i.push(To(n.messages[u].max,r.fullField,r.max)):o&&a&&(c<r.min||c>r.max)&&i.push(To(n.messages[u].range,r.fullField,r.min,r.max))},Mf="enum",tfe=function(r,e,t,i,n){r[Mf]=Array.isArray(r[Mf])?r[Mf]:[],r[Mf].indexOf(e)===-1&&i.push(To(n.messages[Mf],r.fullField,r[Mf].join(", ")))},rfe=function(r,e,t,i,n){if(r.pattern){if(r.pattern instanceof RegExp)r.pattern.lastIndex=0,r.pattern.test(e)||i.push(To(n.messages.pattern.mismatch,r.fullField,e,r.pattern));else if(typeof r.pattern=="string"){var s=new RegExp(r.pattern);s.test(e)||i.push(To(n.messages.pattern.mismatch,r.fullField,e,r.pattern))}}},Dr={required:OF,whitespace:Zpe,type:Qpe,range:efe,enum:tfe,pattern:rfe},ife=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(mn(e,"string")&&!r.required)return t();Dr.required(r,e,i,s,n,"string"),mn(e,"string")||(Dr.type(r,e,i,s,n),Dr.range(r,e,i,s,n),Dr.pattern(r,e,i,s,n),r.whitespace===!0&&Dr.whitespace(r,e,i,s,n))}t(s)},nfe=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(mn(e)&&!r.required)return t();Dr.required(r,e,i,s,n),e!==void 0&&Dr.type(r,e,i,s,n)}t(s)},sfe=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(e===""&&(e=void 0),mn(e)&&!r.required)return t();Dr.required(r,e,i,s,n),e!==void 0&&(Dr.type(r,e,i,s,n),Dr.range(r,e,i,s,n))}t(s)},ofe=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(mn(e)&&!r.required)return t();Dr.required(r,e,i,s,n),e!==void 0&&Dr.type(r,e,i,s,n)}t(s)},afe=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(mn(e)&&!r.required)return t();Dr.required(r,e,i,s,n),mn(e)||Dr.type(r,e,i,s,n)}t(s)},lfe=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(mn(e)&&!r.required)return t();Dr.required(r,e,i,s,n),e!==void 0&&(Dr.type(r,e,i,s,n),Dr.range(r,e,i,s,n))}t(s)},cfe=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(mn(e)&&!r.required)return t();Dr.required(r,e,i,s,n),e!==void 0&&(Dr.type(r,e,i,s,n),Dr.range(r,e,i,s,n))}t(s)},ufe=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(e==null&&!r.required)return t();Dr.required(r,e,i,s,n,"array"),e!=null&&(Dr.type(r,e,i,s,n),Dr.range(r,e,i,s,n))}t(s)},dfe=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(mn(e)&&!r.required)return t();Dr.required(r,e,i,s,n),e!==void 0&&Dr.type(r,e,i,s,n)}t(s)},hfe="enum",pfe=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(mn(e)&&!r.required)return t();Dr.required(r,e,i,s,n),e!==void 0&&Dr[hfe](r,e,i,s,n)}t(s)},ffe=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(mn(e,"string")&&!r.required)return t();Dr.required(r,e,i,s,n),mn(e,"string")||Dr.pattern(r,e,i,s,n)}t(s)},mfe=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(mn(e,"date")&&!r.required)return t();if(Dr.required(r,e,i,s,n),!mn(e,"date")){var a;e instanceof Date?a=e:a=new Date(e),Dr.type(r,a,i,s,n),a&&Dr.range(r,a.getTime(),i,s,n)}}t(s)},gfe=function(r,e,t,i,n){var s=[],o=Array.isArray(e)?"array":typeof e;Dr.required(r,e,i,s,n,o),t(s)},TE=function(r,e,t,i,n){var s=r.type,o=[],a=r.required||!r.required&&i.hasOwnProperty(r.field);if(a){if(mn(e,s)&&!r.required)return t();Dr.required(r,e,i,o,n,s),mn(e,s)||Dr.type(r,e,i,o,n)}t(o)},vfe=function(r,e,t,i,n){var s=[],o=r.required||!r.required&&i.hasOwnProperty(r.field);if(o){if(mn(e)&&!r.required)return t();Dr.required(r,e,i,s,n)}t(s)},Yv={string:ife,method:nfe,number:sfe,boolean:ofe,regexp:afe,integer:lfe,float:cfe,array:ufe,object:dfe,enum:pfe,pattern:ffe,date:mfe,url:TE,hex:TE,email:TE,required:gfe,any:vfe};function ME(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var r=JSON.parse(JSON.stringify(this));return r.clone=this.clone,r}}}var EE=ME(),Zv=function(){function r(t){this.rules=null,this._messages=EE,this.define(t)}var e=r.prototype;return e.define=function(t){var i=this;if(!t)throw new Error("Cannot configure a schema with no rules");if(typeof t!="object"||Array.isArray(t))throw new Error("Rules must be an object");this.rules={},Object.keys(t).forEach(function(n){var s=t[n];i.rules[n]=Array.isArray(s)?s:[s]})},e.messages=function(t){return t&&(this._messages=LF(ME(),t)),this._messages},e.validate=function(t,i,n){var s=this;i===void 0&&(i={}),n===void 0&&(n=function(){});var o=t,a=i,l=n;if(typeof a=="function"&&(l=a,a={}),!this.rules||Object.keys(this.rules).length===0)return l&&l(null,o),Promise.resolve(o);function c(f){var m=[],g={};function v(b){if(Array.isArray(b)){var w;m=(w=m).concat.apply(w,b)}else m.push(b)}for(var x=0;x<f.length;x++)v(f[x]);m.length?(g=SE(m),l(m,g)):l(null,o)}if(a.messages){var u=this.messages();u===EE&&(u=ME()),LF(u,a.messages),a.messages=u}else a.messages=this.messages();var d={},h=a.keys||Object.keys(this.rules);h.forEach(function(f){var m=s.rules[f],g=o[f];m.forEach(function(v){var x=v;typeof x.transform=="function"&&(o===t&&(o=Kd({},o)),g=o[f]=x.transform(g)),typeof x=="function"?x={validator:x}:x=Kd({},x),x.validator=s.getValidationMethod(x),x.validator&&(x.field=f,x.fullField=x.fullField||f,x.type=s.getType(x),d[f]=d[f]||[],d[f].push({rule:x,value:g,source:o,field:f}))})});var p={};return qpe(d,a,function(f,m){var _;var g=f.rule,v=(g.type==="object"||g.type==="array")&&(typeof g.fields=="object"||typeof g.defaultField=="object");v=v&&(g.required||!g.required&&f.value),g.field=f.field;function x(S,T){return Kd({},T,{fullField:g.fullField+"."+S,fullFields:g.fullFields?[].concat(g.fullFields,[S]):[S]})}function b(S){S===void 0&&(S=[]);var T=Array.isArray(S)?S:[S];!a.suppressWarning&&T.length&&r.warning("async-validator:",T),T.length&&g.message!==void 0&&(T=[].concat(g.message));var M=T.map(kF(g,o));if(a.first&&M.length)return p[g.field]=1,m(M);if(!v)m(M);else{if(g.required&&!f.value)return g.message!==void 0?M=[].concat(g.message).map(kF(g,o)):a.error&&(M=[a.error(g,To(a.messages.required,g.field))]),m(M);var E={};g.defaultField&&Object.keys(f.value).map(function(A){E[A]=g.defaultField}),E=Kd({},E,f.rule.fields);var C={};Object.keys(E).forEach(function(A){var N=E[A],R=Array.isArray(N)?N:[N];C[A]=R.map(x.bind(null,A))});var P=new r(C);P.messages(a.messages),f.rule.options&&(f.rule.options.messages=a.messages,f.rule.options.error=a.error),P.validate(f.value,f.rule.options||a,function(A){var N=[];M&&M.length&&N.push.apply(N,M),A&&A.length&&N.push.apply(N,A),m(N.length?N:null)})}}var w;if(g.asyncValidator)w=g.asyncValidator(g,f.value,b,f.source,a);else if(g.validator){try{w=g.validator(g,f.value,b,f.source,a)}catch(S){(_=console.error)==null||_.call(console,S),a.suppressValidatorError||setTimeout(function(){throw S},0),b(S.message)}w===!0?b():w===!1?b(typeof g.message=="function"?g.message(g.fullField||g.field):g.message||(g.fullField||g.field)+" fails"):w instanceof Array?b(w):w instanceof Error&&b(w.message)}w&&w.then&&w.then(function(){return b()},function(S){return b(S)})},function(f){c(f)},o)},e.getType=function(t){if(t.type===void 0&&t.pattern instanceof RegExp&&(t.type="pattern"),typeof t.validator!="function"&&t.type&&!Yv.hasOwnProperty(t.type))throw new Error(To("Unknown rule type %s",t.type));return t.type||"string"},e.getValidationMethod=function(t){if(typeof t.validator=="function")return t.validator;var i=Object.keys(t),n=i.indexOf("message");return n!==-1&&i.splice(n,1),i.length===1&&i[0]==="required"?Yv.required:Yv[this.getType(t)]||void 0},r}();Zv.register=function(r,e){if(typeof e!="function")throw new Error("Cannot register a validator by type, validator is not a function");Yv[r]=e},Zv.warning=Hpe,Zv.messages=EE,Zv.validators=Yv;const yfe=["","error","validating","success"],bfe=et({label:String,labelWidth:{type:[String,Number],default:""},prop:{type:Oe([String,Array])},required:{type:Boolean,default:void 0},rules:{type:Oe([Object,Array])},error:String,validateStatus:{type:String,values:yfe},for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,values:yl}}),IF="ElLabelWrap";var xfe=xe({name:IF,props:{isAutoWidth:Boolean,updateAll:Boolean},setup(r,{slots:e}){const t=ut(qd,void 0),i=ut(Sl);i||ji(IF,"usage: <el-form-item><label-wrap /></el-form-item>");const n=Ge("form"),s=W(),o=W(0),a=()=>{var u;if((u=s.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(s.value.firstElementChild).width;return Math.ceil(Number.parseFloat(d))}else return 0},l=(u="update")=>{ht(()=>{e.default&&r.isAutoWidth&&(u==="update"?o.value=a():u==="remove"&&(t==null||t.deregisterLabelWidth(o.value)))})},c=()=>l("update");return Et(()=>{c()}),Zr(()=>{l("remove")}),Yl(()=>c()),Ve(o,(u,d)=>{r.updateAll&&(t==null||t.registerLabelWidth(u,d))}),cs(I(()=>{var u,d;return(d=(u=s.value)==null?void 0:u.firstElementChild)!=null?d:null}),c),()=>{var u,d;if(!e)return null;const{isAutoWidth:h}=r;if(h){const p=t==null?void 0:t.autoLabelWidth,f=i==null?void 0:i.hasLabel,m={};if(f&&p&&p!=="auto"){const g=Math.max(0,Number.parseInt(p,10)-o.value),v=t.labelPosition==="left"?"marginRight":"marginLeft";g&&(m[v]=`${g}px`)}return ue("div",{ref:s,class:[n.be("item","label-wrap")],style:m},[(u=e.default)==null?void 0:u.call(e)])}else return ue(ct,{ref:s},[(d=e.default)==null?void 0:d.call(e)])}}});const wfe=["role","aria-labelledby"],_fe=xe({name:"ElFormItem"}),Sfe=xe({..._fe,props:bfe,setup(r,{expose:e}){const t=r,i=Gn(),n=ut(qd,void 0),s=ut(Sl,void 0),o=Hi(void 0,{formItem:!1}),a=Ge("form-item"),l=na().value,c=W([]),u=W(""),d=wQ(u,100),h=W(""),p=W();let f,m=!1;const g=I(()=>{if((n==null?void 0:n.labelPosition)==="top")return{};const K=Ti(t.labelWidth||(n==null?void 0:n.labelWidth)||"");return K?{width:K}:{}}),v=I(()=>{if((n==null?void 0:n.labelPosition)==="top"||n!=null&&n.inline)return{};if(!t.label&&!t.labelWidth&&E)return{};const K=Ti(t.labelWidth||(n==null?void 0:n.labelWidth)||"");return!t.label&&!i.label?{marginLeft:K}:{}}),x=I(()=>[a.b(),a.m(o.value),a.is("error",u.value==="error"),a.is("validating",u.value==="validating"),a.is("success",u.value==="success"),a.is("required",R.value||t.required),a.is("no-asterisk",n==null?void 0:n.hideRequiredAsterisk),(n==null?void 0:n.requireAsteriskPosition)==="right"?"asterisk-right":"asterisk-left",{[a.m("feedback")]:n==null?void 0:n.statusIcon}]),b=I(()=>Gi(t.inlineMessage)?t.inlineMessage:(n==null?void 0:n.inlineMessage)||!1),w=I(()=>[a.e("error"),{[a.em("error","inline")]:b.value}]),_=I(()=>t.prop?kt(t.prop)?t.prop:t.prop.join("."):""),S=I(()=>!!(t.label||i.label)),T=I(()=>t.for||c.value.length===1?c.value[0]:void 0),M=I(()=>!T.value&&S.value),E=!!s,C=I(()=>{const K=n==null?void 0:n.model;if(!(!K||!t.prop))return ax(K,t.prop).value}),P=I(()=>{const{required:K}=t,q=[];t.rules&&q.push(...Gd(t.rules));const ce=n==null?void 0:n.rules;if(ce&&t.prop){const Te=ax(ce,t.prop).value;Te&&q.push(...Gd(Te))}if(K!==void 0){const Te=q.map((Z,L)=>[Z,L]).filter(([Z])=>Object.keys(Z).includes("required"));if(Te.length>0)for(const[Z,L]of Te)Z.required!==K&&(q[L]={...Z,required:K});else q.push({required:K})}return q}),A=I(()=>P.value.length>0),N=K=>P.value.filter(q=>!q.trigger||!K?!0:Array.isArray(q.trigger)?q.trigger.includes(K):q.trigger===K).map(({trigger:q,...ce})=>ce),R=I(()=>P.value.some(K=>K.required)),F=I(()=>{var K;return d.value==="error"&&t.showMessage&&((K=n==null?void 0:n.showMessage)!=null?K:!0)}),B=I(()=>`${t.label||""}${(n==null?void 0:n.labelSuffix)||""}`),k=K=>{u.value=K},z=K=>{var q,ce;const{errors:Te,fields:Z}=K;(!Te||!Z)&&console.error(K),k("error"),h.value=Te?(ce=(q=Te==null?void 0:Te[0])==null?void 0:q.message)!=null?ce:`${t.prop} is required`:"",n==null||n.emit("validate",t.prop,!1,h.value)},O=()=>{k("success"),n==null||n.emit("validate",t.prop,!0,"")},V=async K=>{const q=_.value;return new Zv({[q]:K}).validate({[q]:C.value},{firstFields:!0}).then(()=>(O(),!0)).catch(ce=>(z(ce),Promise.reject(ce)))},U=async(K,q)=>{if(m||!t.prop)return!1;const ce=Nt(q);if(!A.value)return q==null||q(!1),!1;const Te=N(K);return Te.length===0?(q==null||q(!0),!0):(k("validating"),V(Te).then(()=>(q==null||q(!0),!0)).catch(Z=>{const{fields:L}=Z;return q==null||q(!1,L),ce?!1:Promise.reject(L)}))},G=()=>{k(""),h.value="",m=!1},X=async()=>{const K=n==null?void 0:n.model;if(!K||!t.prop)return;const q=ax(K,t.prop);m=!0,q.value=$4(f),await ht(),G(),m=!1},ie=K=>{c.value.includes(K)||c.value.push(K)},se=K=>{c.value=c.value.filter(q=>q!==K)};Ve(()=>t.error,K=>{h.value=K||"",k(K?"error":"")},{immediate:!0}),Ve(()=>t.validateStatus,K=>k(K||""));const de=br({...fn(t),$el:p,size:o,validateState:u,labelId:l,inputIds:c,isGroup:M,hasLabel:S,addInputId:ie,removeInputId:se,resetField:X,clearValidate:G,validate:U});return Yt(Sl,de),Et(()=>{t.prop&&(n==null||n.addField(de),f=$4(C.value))}),Zr(()=>{n==null||n.removeField(de)}),e({size:o,validateMessage:h,validateState:u,validate:U,clearValidate:G,resetField:X}),(K,q)=>{var ce;return D(),ee("div",{ref_key:"formItemRef",ref:p,class:j(y(x)),role:y(M)?"group":void 0,"aria-labelledby":y(M)?y(l):void 0},[ue(y(xfe),{"is-auto-width":y(g).width==="auto","update-all":((ce=y(n))==null?void 0:ce.labelWidth)==="auto"},{default:me(()=>[y(S)?(D(),Ae(Xt(y(T)?"label":"div"),{key:0,id:y(l),for:y(T),class:j(y(a).e("label")),style:pt(y(g))},{default:me(()=>[ze(K.$slots,"label",{label:y(B)},()=>[ir($e(y(B)),1)])]),_:3},8,["id","for","class","style"])):Re("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),J("div",{class:j(y(a).e("content")),style:pt(y(v))},[ze(K.$slots,"default"),ue(HI,{name:`${y(a).namespace.value}-zoom-in-top`},{default:me(()=>[y(F)?ze(K.$slots,"error",{key:0,error:h.value},()=>[J("div",{class:j(y(w))},$e(h.value),3)]):Re("v-if",!0)]),_:3},8,["name"])],6)],10,wfe)}}});var DF=Qe(Sfe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/form/src/form-item.vue"]]);const Tfe=zt(Bpe,{FormItem:DF}),Mfe=fi(DF);let Ua;const Efe=`
  height:0 !important;
  visibility:hidden !important;
  ${$D()?"":"overflow:hidden !important;"}
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Cfe=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function Afe(r){const e=window.getComputedStyle(r),t=e.getPropertyValue("box-sizing"),i=Number.parseFloat(e.getPropertyValue("padding-bottom"))+Number.parseFloat(e.getPropertyValue("padding-top")),n=Number.parseFloat(e.getPropertyValue("border-bottom-width"))+Number.parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:Cfe.map(s=>`${s}:${e.getPropertyValue(s)}`).join(";"),paddingSize:i,borderSize:n,boxSizing:t}}function UF(r,e=1,t){var i;Ua||(Ua=document.createElement("textarea"),document.body.appendChild(Ua));const{paddingSize:n,borderSize:s,boxSizing:o,contextStyle:a}=Afe(r);Ua.setAttribute("style",`${a};${Efe}`),Ua.value=r.value||r.placeholder||"";let l=Ua.scrollHeight;const c={};o==="border-box"?l=l+s:o==="content-box"&&(l=l-n),Ua.value="";const u=Ua.scrollHeight-n;if(Ct(e)){let d=u*e;o==="border-box"&&(d=d+n+s),l=Math.max(d,l),c.minHeight=`${d}px`}if(Ct(t)){let d=u*t;o==="border-box"&&(d=d+n+s),l=Math.min(d,l)}return c.height=`${l}px`,(i=Ua.parentNode)==null||i.removeChild(Ua),Ua=void 0,c}const Nfe=et({id:{type:String,default:void 0},size:jn,disabled:Boolean,modelValue:{type:Oe([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Oe([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:Gr},prefixIcon:{type:Gr},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Oe([Object,Array,String]),default:()=>ri({})}}),Rfe={[Wt]:r=>kt(r),input:r=>kt(r),change:r=>kt(r),focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent,clear:()=>!0,mouseleave:r=>r instanceof MouseEvent,mouseenter:r=>r instanceof MouseEvent,keydown:r=>r instanceof Event,compositionstart:r=>r instanceof CompositionEvent,compositionupdate:r=>r instanceof CompositionEvent,compositionend:r=>r instanceof CompositionEvent},kfe=["role"],Lfe=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder","form"],Ofe=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form"],Pfe=xe({name:"ElInput",inheritAttrs:!1}),Ife=xe({...Pfe,props:Nfe,emits:Rfe,setup(r,{expose:e,emit:t}){const i=r,n=kd(),s=Gn(),o=I(()=>{const H={};return i.containerRole==="combobox"&&(H["aria-haspopup"]=n["aria-haspopup"],H["aria-owns"]=n["aria-owns"],H["aria-expanded"]=n["aria-expanded"]),H}),a=I(()=>[i.type==="textarea"?g.b():m.b(),m.m(p.value),m.is("disabled",f.value),m.is("exceed",ie.value),{[m.b("group")]:s.prepend||s.append,[m.bm("group","append")]:s.append,[m.bm("group","prepend")]:s.prepend,[m.m("prefix")]:s.prefix||i.prefixIcon,[m.m("suffix")]:s.suffix||i.suffixIcon||i.clearable||i.showPassword,[m.bm("suffix","password-clear")]:V.value&&U.value},n.class]),l=I(()=>[m.e("wrapper"),m.is("focus",C.value)]),c=tE({excludeKeys:I(()=>Object.keys(o.value))}),{form:u,formItem:d}=Ns(),{inputId:h}=vu(i,{formItemContext:d}),p=Hi(),f=Ys(),m=Ge("input"),g=Ge("textarea"),v=Vr(),x=Vr(),b=W(!1),w=W(!1),_=W(!1),S=W(),T=Vr(i.inputStyle),M=I(()=>v.value||x.value),{wrapperRef:E,isFocused:C,handleFocus:P,handleBlur:A}=lpe(M,{afterBlur(){var H;i.validateEvent&&((H=d==null?void 0:d.validate)==null||H.call(d,"blur").catch(ne=>{}))}}),N=I(()=>{var H;return(H=u==null?void 0:u.statusIcon)!=null?H:!1}),R=I(()=>(d==null?void 0:d.validateState)||""),F=I(()=>R.value&&JM[R.value]),B=I(()=>_.value?Bue:fle),k=I(()=>[n.style,i.inputStyle]),z=I(()=>[i.inputStyle,T.value,{resize:i.resize}]),O=I(()=>Vi(i.modelValue)?"":String(i.modelValue)),V=I(()=>i.clearable&&!f.value&&!i.readonly&&!!O.value&&(C.value||b.value)),U=I(()=>i.showPassword&&!f.value&&!i.readonly&&!!O.value&&(!!O.value||C.value)),G=I(()=>i.showWordLimit&&!!c.value.maxlength&&(i.type==="text"||i.type==="textarea")&&!f.value&&!i.readonly&&!i.showPassword),X=I(()=>O.value.length),ie=I(()=>!!G.value&&X.value>Number(c.value.maxlength)),se=I(()=>!!s.suffix||!!i.suffixIcon||V.value||i.showPassword||G.value||!!R.value&&N.value),[de,K]=spe(v);cs(x,H=>{if(ce(),!G.value||i.resize!=="both")return;const ne=H[0],{width:Le}=ne.contentRect;S.value={right:`calc(100% - ${Le+15+6}px)`}});const q=()=>{const{type:H,autosize:ne}=i;if(!(!ar||H!=="textarea"||!x.value))if(ne){const Le=Ht(ne)?ne.minRows:void 0,Pe=Ht(ne)?ne.maxRows:void 0,Ee=UF(x.value,Le,Pe);T.value={overflowY:"hidden",...Ee},ht(()=>{x.value.offsetHeight,T.value=Ee})}else T.value={minHeight:UF(x.value).minHeight}},ce=(H=>{let ne=!1;return()=>{var Le;ne||!i.autosize||((Le=x.value)==null?void 0:Le.offsetParent)===null||(H(),ne=!0)}})(q),Te=()=>{const H=M.value,ne=i.formatter?i.formatter(O.value):O.value;!H||H.value===ne||(H.value=ne)},Z=async H=>{de();let{value:ne}=H.target;if(i.formatter&&(ne=i.parser?i.parser(ne):ne),!w.value){if(ne===O.value){Te();return}t(Wt,ne),t("input",ne),await ht(),Te(),K()}},L=H=>{t("change",H.target.value)},$=H=>{t("compositionstart",H),w.value=!0},re=H=>{var ne;t("compositionupdate",H);const Le=(ne=H.target)==null?void 0:ne.value,Pe=Le[Le.length-1]||"";w.value=!fx(Pe)},te=H=>{t("compositionend",H),w.value&&(w.value=!1,Z(H))},le=()=>{_.value=!_.value,ge()},ge=async()=>{var H;await ht(),(H=M.value)==null||H.focus()},be=()=>{var H;return(H=M.value)==null?void 0:H.blur()},_e=H=>{b.value=!1,t("mouseleave",H)},pe=H=>{b.value=!0,t("mouseenter",H)},Se=H=>{t("keydown",H)},Fe=()=>{var H;(H=M.value)==null||H.select()},Y=()=>{t(Wt,""),t("change",""),t("clear"),t("input","")};return Ve(()=>i.modelValue,()=>{var H;ht(()=>q()),i.validateEvent&&((H=d==null?void 0:d.validate)==null||H.call(d,"change").catch(ne=>{}))}),Ve(O,()=>Te()),Ve(()=>i.type,async()=>{await ht(),Te(),q()}),Et(()=>{!i.formatter&&i.parser,Te(),ht(q)}),e({input:v,textarea:x,ref:M,textareaStyle:z,autosize:ai(i,"autosize"),focus:ge,blur:be,select:Fe,clear:Y,resizeTextarea:q}),(H,ne)=>It((D(),ee("div",qt(y(o),{class:y(a),style:y(k),role:H.containerRole,onMouseenter:pe,onMouseleave:_e}),[Re(" input "),H.type!=="textarea"?(D(),ee(ct,{key:0},[Re(" prepend slot "),H.$slots.prepend?(D(),ee("div",{key:0,class:j(y(m).be("group","prepend"))},[ze(H.$slots,"prepend")],2)):Re("v-if",!0),J("div",{ref_key:"wrapperRef",ref:E,class:j(y(l))},[Re(" prefix slot "),H.$slots.prefix||H.prefixIcon?(D(),ee("span",{key:0,class:j(y(m).e("prefix"))},[J("span",{class:j(y(m).e("prefix-inner"))},[ze(H.$slots,"prefix"),H.prefixIcon?(D(),Ae(y(dt),{key:0,class:j(y(m).e("icon"))},{default:me(()=>[(D(),Ae(Xt(H.prefixIcon)))]),_:1},8,["class"])):Re("v-if",!0)],2)],2)):Re("v-if",!0),J("input",qt({id:y(h),ref_key:"input",ref:v,class:y(m).e("inner")},y(c),{type:H.showPassword?_.value?"text":"password":H.type,disabled:y(f),formatter:H.formatter,parser:H.parser,readonly:H.readonly,autocomplete:H.autocomplete,tabindex:H.tabindex,"aria-label":H.label,placeholder:H.placeholder,style:H.inputStyle,form:i.form,onCompositionstart:$,onCompositionupdate:re,onCompositionend:te,onInput:Z,onFocus:ne[0]||(ne[0]=(...Le)=>y(P)&&y(P)(...Le)),onBlur:ne[1]||(ne[1]=(...Le)=>y(A)&&y(A)(...Le)),onChange:L,onKeydown:Se}),null,16,Lfe),Re(" suffix slot "),y(se)?(D(),ee("span",{key:1,class:j(y(m).e("suffix"))},[J("span",{class:j(y(m).e("suffix-inner"))},[!y(V)||!y(U)||!y(G)?(D(),ee(ct,{key:0},[ze(H.$slots,"suffix"),H.suffixIcon?(D(),Ae(y(dt),{key:0,class:j(y(m).e("icon"))},{default:me(()=>[(D(),Ae(Xt(H.suffixIcon)))]),_:1},8,["class"])):Re("v-if",!0)],64)):Re("v-if",!0),y(V)?(D(),Ae(y(dt),{key:1,class:j([y(m).e("icon"),y(m).e("clear")]),onMousedown:Mt(y(Lr),["prevent"]),onClick:Y},{default:me(()=>[ue(y(uu))]),_:1},8,["class","onMousedown"])):Re("v-if",!0),y(U)?(D(),Ae(y(dt),{key:2,class:j([y(m).e("icon"),y(m).e("password")]),onClick:le},{default:me(()=>[(D(),Ae(Xt(y(B))))]),_:1},8,["class"])):Re("v-if",!0),y(G)?(D(),ee("span",{key:3,class:j(y(m).e("count"))},[J("span",{class:j(y(m).e("count-inner"))},$e(y(X))+" / "+$e(y(c).maxlength),3)],2)):Re("v-if",!0),y(R)&&y(F)&&y(N)?(D(),Ae(y(dt),{key:4,class:j([y(m).e("icon"),y(m).e("validateIcon"),y(m).is("loading",y(R)==="validating")])},{default:me(()=>[(D(),Ae(Xt(y(F))))]),_:1},8,["class"])):Re("v-if",!0)],2)],2)):Re("v-if",!0)],2),Re(" append slot "),H.$slots.append?(D(),ee("div",{key:1,class:j(y(m).be("group","append"))},[ze(H.$slots,"append")],2)):Re("v-if",!0)],64)):(D(),ee(ct,{key:1},[Re(" textarea "),J("textarea",qt({id:y(h),ref_key:"textarea",ref:x,class:y(g).e("inner")},y(c),{tabindex:H.tabindex,disabled:y(f),readonly:H.readonly,autocomplete:H.autocomplete,style:y(z),"aria-label":H.label,placeholder:H.placeholder,form:i.form,onCompositionstart:$,onCompositionupdate:re,onCompositionend:te,onInput:Z,onFocus:ne[2]||(ne[2]=(...Le)=>y(P)&&y(P)(...Le)),onBlur:ne[3]||(ne[3]=(...Le)=>y(A)&&y(A)(...Le)),onChange:L,onKeydown:Se}),null,16,Ofe),y(G)?(D(),ee("span",{key:0,style:pt(S.value),class:j(y(m).e("count"))},$e(y(X))+" / "+$e(y(c).maxlength),7)):Re("v-if",!0)],64))],16,kfe)),[[vr,H.type!=="hidden"]])}});var Dfe=Qe(Ife,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const us=zt(Dfe),Ef=4,FF={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Ufe=({move:r,size:e,bar:t})=>({[t.size]:e,transform:`translate${t.axis}(${r}%)`}),BF=Symbol("scrollbarContextKey"),Ffe=et({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Bfe="Thumb",zfe=xe({__name:"thumb",props:Ffe,setup(r){const e=r,t=ut(BF),i=Ge("scrollbar");t||ji(Bfe,"can not inject scrollbar context");const n=W(),s=W(),o=W({}),a=W(!1);let l=!1,c=!1,u=ar?document.onselectstart:null;const d=I(()=>FF[e.vertical?"vertical":"horizontal"]),h=I(()=>Ufe({size:e.size,move:e.move,bar:d.value})),p=I(()=>n.value[d.value.offset]**2/t.wrapElement[d.value.scrollSize]/e.ratio/s.value[d.value.offset]),f=S=>{var T;if(S.stopPropagation(),S.ctrlKey||[1,2].includes(S.button))return;(T=window.getSelection())==null||T.removeAllRanges(),g(S);const M=S.currentTarget;M&&(o.value[d.value.axis]=M[d.value.offset]-(S[d.value.client]-M.getBoundingClientRect()[d.value.direction]))},m=S=>{if(!s.value||!n.value||!t.wrapElement)return;const T=Math.abs(S.target.getBoundingClientRect()[d.value.direction]-S[d.value.client]),M=s.value[d.value.offset]/2,E=(T-M)*100*p.value/n.value[d.value.offset];t.wrapElement[d.value.scroll]=E*t.wrapElement[d.value.scrollSize]/100},g=S=>{S.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",v),document.addEventListener("mouseup",x),u=document.onselectstart,document.onselectstart=()=>!1},v=S=>{if(!n.value||!s.value||l===!1)return;const T=o.value[d.value.axis];if(!T)return;const M=(n.value.getBoundingClientRect()[d.value.direction]-S[d.value.client])*-1,E=s.value[d.value.offset]-T,C=(M-E)*100*p.value/n.value[d.value.offset];t.wrapElement[d.value.scroll]=C*t.wrapElement[d.value.scrollSize]/100},x=()=>{l=!1,o.value[d.value.axis]=0,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",x),_(),c&&(a.value=!1)},b=()=>{c=!1,a.value=!!e.size},w=()=>{c=!0,a.value=l};Zr(()=>{_(),document.removeEventListener("mouseup",x)});const _=()=>{document.onselectstart!==u&&(document.onselectstart=u)};return Qr(ai(t,"scrollbarElement"),"mousemove",b),Qr(ai(t,"scrollbarElement"),"mouseleave",w),(S,T)=>(D(),Ae(Li,{name:y(i).b("fade"),persisted:""},{default:me(()=>[It(J("div",{ref_key:"instance",ref:n,class:j([y(i).e("bar"),y(i).is(y(d).key)]),onMousedown:m},[J("div",{ref_key:"thumb",ref:s,class:j(y(i).e("thumb")),style:pt(y(h)),onMousedown:f},null,38)],34),[[vr,S.always||a.value]])]),_:1},8,["name"]))}});var zF=Qe(zfe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Vfe=et({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),Gfe=xe({__name:"bar",props:Vfe,setup(r,{expose:e}){const t=r,i=W(0),n=W(0);return e({handleScroll:s=>{if(s){const o=s.offsetHeight-Ef,a=s.offsetWidth-Ef;n.value=s.scrollTop*100/o*t.ratioY,i.value=s.scrollLeft*100/a*t.ratioX}}}),(s,o)=>(D(),ee(ct,null,[ue(zF,{move:i.value,ratio:s.ratioX,size:s.width,always:s.always},null,8,["move","ratio","size","always"]),ue(zF,{move:n.value,ratio:s.ratioY,size:s.height,vertical:"",always:s.always},null,8,["move","ratio","size","always"])],64))}});var jfe=Qe(Gfe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const Hfe=et({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:Oe([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Wfe={scroll:({scrollTop:r,scrollLeft:e})=>[r,e].every(Ct)},$fe="ElScrollbar",Xfe=xe({name:$fe}),qfe=xe({...Xfe,props:Hfe,emits:Wfe,setup(r,{expose:e,emit:t}){const i=r,n=Ge("scrollbar");let s,o;const a=W(),l=W(),c=W(),u=W("0"),d=W("0"),h=W(),p=W(1),f=W(1),m=I(()=>{const T={};return i.height&&(T.height=Ti(i.height)),i.maxHeight&&(T.maxHeight=Ti(i.maxHeight)),[i.wrapStyle,T]}),g=I(()=>[i.wrapClass,n.e("wrap"),{[n.em("wrap","hidden-default")]:!i.native}]),v=I(()=>[n.e("view"),i.viewClass]),x=()=>{var T;l.value&&((T=h.value)==null||T.handleScroll(l.value),t("scroll",{scrollTop:l.value.scrollTop,scrollLeft:l.value.scrollLeft}))};function b(T,M){Ht(T)?l.value.scrollTo(T):Ct(T)&&Ct(M)&&l.value.scrollTo(T,M)}const w=T=>{Ct(T)&&(l.value.scrollTop=T)},_=T=>{Ct(T)&&(l.value.scrollLeft=T)},S=()=>{if(!l.value)return;const T=l.value.offsetHeight-Ef,M=l.value.offsetWidth-Ef,E=T**2/l.value.scrollHeight,C=M**2/l.value.scrollWidth,P=Math.max(E,i.minSize),A=Math.max(C,i.minSize);p.value=E/(T-E)/(P/(T-P)),f.value=C/(M-C)/(A/(M-A)),d.value=P+Ef<T?`${P}px`:"",u.value=A+Ef<M?`${A}px`:""};return Ve(()=>i.noresize,T=>{T?(s==null||s(),o==null||o()):({stop:s}=cs(c,S),o=Qr("resize",S))},{immediate:!0}),Ve(()=>[i.maxHeight,i.height],()=>{i.native||ht(()=>{var T;S(),l.value&&((T=h.value)==null||T.handleScroll(l.value))})}),Yt(BF,br({scrollbarElement:a,wrapElement:l})),Et(()=>{i.native||ht(()=>{S()})}),Yl(()=>S()),e({wrapRef:l,update:S,scrollTo:b,setScrollTop:w,setScrollLeft:_,handleScroll:x}),(T,M)=>(D(),ee("div",{ref_key:"scrollbarRef",ref:a,class:j(y(n).b())},[J("div",{ref_key:"wrapRef",ref:l,class:j(y(g)),style:pt(y(m)),onScroll:x},[(D(),Ae(Xt(T.tag),{ref_key:"resizeRef",ref:c,class:j(y(v)),style:pt(T.viewStyle)},{default:me(()=>[ze(T.$slots,"default")]),_:3},8,["class","style"]))],38),T.native?Re("v-if",!0):(D(),Ae(jfe,{key:0,ref_key:"barRef",ref:h,height:d.value,width:u.value,always:T.always,"ratio-x":f.value,"ratio-y":p.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Kfe=Qe(qfe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const ac=zt(Kfe),CE=Symbol("popper"),VF=Symbol("popperContent"),Yfe=["dialog","grid","group","listbox","menu","navigation","tooltip","tree"],GF=et({role:{type:String,values:Yfe,default:"tooltip"}}),Zfe=xe({name:"ElPopper",inheritAttrs:!1}),Jfe=xe({...Zfe,props:GF,setup(r,{expose:e}){const t=r,i=W(),n=W(),s=W(),o=W(),a=I(()=>t.role),l={triggerRef:i,popperInstanceRef:n,contentRef:s,referenceRef:o,role:a};return e(l),Yt(CE,l),(c,u)=>ze(c.$slots,"default")}});var Qfe=Qe(Jfe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/popper.vue"]]);const jF=et({arrowOffset:{type:Number,default:5}}),eme=xe({name:"ElPopperArrow",inheritAttrs:!1}),tme=xe({...eme,props:jF,setup(r,{expose:e}){const t=r,i=Ge("popper"),{arrowOffset:n,arrowRef:s,arrowStyle:o}=ut(VF,void 0);return Ve(()=>t.arrowOffset,a=>{n.value=a}),Zr(()=>{s.value=void 0}),e({arrowRef:s}),(a,l)=>(D(),ee("span",{ref_key:"arrowRef",ref:s,class:j(y(i).e("arrow")),style:pt(y(o)),"data-popper-arrow":""},null,6))}});var rme=Qe(tme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/arrow.vue"]]);const ime="ElOnlyChild",HF=xe({name:ime,setup(r,{slots:e,attrs:t}){var i;const n=ut(sF),s=Rhe((i=n==null?void 0:n.setForwardRef)!=null?i:Lr);return()=>{var o;const a=(o=e.default)==null?void 0:o.call(e,t);if(!a||a.length>1)return null;const l=WF(a);return l?It(Jl(l,t),[[s]]):null}}});function WF(r){if(!r)return null;const e=r;for(const t of e){if(Ht(t))switch(t.type){case Ss:continue;case Zp:case"svg":return $F(t);case ct:return WF(t.children);default:return t}return $F(t)}return null}function $F(r){const e=Ge("only-child");return ue("span",{class:e.e("content")},[r])}const XF=et({virtualRef:{type:Oe(Object)},virtualTriggering:Boolean,onMouseenter:{type:Oe(Function)},onMouseleave:{type:Oe(Function)},onClick:{type:Oe(Function)},onKeydown:{type:Oe(Function)},onFocus:{type:Oe(Function)},onBlur:{type:Oe(Function)},onContextmenu:{type:Oe(Function)},id:String,open:Boolean}),nme=xe({name:"ElPopperTrigger",inheritAttrs:!1}),sme=xe({...nme,props:XF,setup(r,{expose:e}){const t=r,{role:i,triggerRef:n}=ut(CE,void 0);Nhe(n);const s=I(()=>a.value?t.id:void 0),o=I(()=>{if(i&&i.value==="tooltip")return t.open&&t.id?t.id:void 0}),a=I(()=>{if(i&&i.value!=="tooltip")return i.value}),l=I(()=>a.value?`${t.open}`:void 0);let c;return Et(()=>{Ve(()=>t.virtualRef,u=>{u&&(n.value=_o(u))},{immediate:!0}),Ve(n,(u,d)=>{c==null||c(),c=void 0,Qo(u)&&(["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(h=>{var p;const f=t[h];f&&(u.addEventListener(h.slice(2).toLowerCase(),f),(p=d==null?void 0:d.removeEventListener)==null||p.call(d,h.slice(2).toLowerCase(),f))}),c=Ve([s,o,a,l],h=>{["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach((p,f)=>{Vi(h[f])?u.removeAttribute(p):u.setAttribute(p,h[f])})},{immediate:!0})),Qo(d)&&["aria-controls","aria-describedby","aria-haspopup","aria-expanded"].forEach(h=>d.removeAttribute(h))},{immediate:!0})}),Zr(()=>{c==null||c(),c=void 0}),e({triggerRef:n}),(u,d)=>u.virtualTriggering?Re("v-if",!0):(D(),Ae(y(HF),qt({key:0},u.$attrs,{"aria-controls":y(s),"aria-describedby":y(o),"aria-expanded":y(l),"aria-haspopup":y(a)}),{default:me(()=>[ze(u.$slots,"default")]),_:3},16,["aria-controls","aria-describedby","aria-expanded","aria-haspopup"]))}});var ome=Qe(sme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/trigger.vue"]]);const AE="focus-trap.focus-after-trapped",NE="focus-trap.focus-after-released",ame="focus-trap.focusout-prevented",qF={cancelable:!0,bubbles:!1},lme={cancelable:!0,bubbles:!1},KF="focusAfterTrapped",YF="focusAfterReleased",RE=Symbol("elFocusTrap"),kE=W(),Rx=W(0),LE=W(0);let kx=0;const ZF=r=>{const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const n=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||n?NodeFilter.FILTER_SKIP:i.tabIndex>=0||i===document.activeElement?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e},JF=(r,e)=>{for(const t of r)if(!cme(t,e))return t},cme=(r,e)=>{if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1},ume=r=>{const e=ZF(r),t=JF(e,r),i=JF(e.reverse(),r);return[t,i]},dme=r=>r instanceof HTMLInputElement&&"select"in r,yu=(r,e)=>{if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),LE.value=window.performance.now(),r!==t&&dme(r)&&e&&r.select()}};function QF(r,e){const t=[...r],i=r.indexOf(e);return i!==-1&&t.splice(i,1),t}const hme=()=>{let r=[];return{push:e=>{const t=r[0];t&&e!==t&&t.pause(),r=QF(r,e),r.unshift(e)},remove:e=>{var t,i;r=QF(r,e),(i=(t=r[0])==null?void 0:t.resume)==null||i.call(t)}}},pme=(r,e=!1)=>{const t=document.activeElement;for(const i of r)if(yu(i,e),document.activeElement!==t)return},eB=hme(),fme=()=>Rx.value>LE.value,Lx=()=>{kE.value="pointer",Rx.value=window.performance.now()},tB=()=>{kE.value="keyboard",Rx.value=window.performance.now()},mme=()=>(Et(()=>{kx===0&&(document.addEventListener("mousedown",Lx),document.addEventListener("touchstart",Lx),document.addEventListener("keydown",tB)),kx++}),Zr(()=>{kx--,kx<=0&&(document.removeEventListener("mousedown",Lx),document.removeEventListener("touchstart",Lx),document.removeEventListener("keydown",tB))}),{focusReason:kE,lastUserFocusTimestamp:Rx,lastAutomatedFocusTimestamp:LE}),Ox=r=>new CustomEvent(ame,{...lme,detail:r}),gme=xe({name:"ElFocusTrap",inheritAttrs:!1,props:{loop:Boolean,trapped:Boolean,focusTrapEl:Object,focusStartEl:{type:[Object,String],default:"first"}},emits:[KF,YF,"focusin","focusout","focusout-prevented","release-requested"],setup(r,{emit:e}){const t=W();let i,n;const{focusReason:s}=mme();Mhe(f=>{r.trapped&&!o.paused&&e("release-requested",f)});const o={paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}},a=f=>{if(!r.loop&&!r.trapped||o.paused)return;const{key:m,altKey:g,ctrlKey:v,metaKey:x,currentTarget:b,shiftKey:w}=f,{loop:_}=r,S=m===bt.tab&&!g&&!v&&!x,T=document.activeElement;if(S&&T){const M=b,[E,C]=ume(M);if(E&&C){if(!w&&T===C){const P=Ox({focusReason:s.value});e("focusout-prevented",P),P.defaultPrevented||(f.preventDefault(),_&&yu(E,!0))}else if(w&&[E,M].includes(T)){const P=Ox({focusReason:s.value});e("focusout-prevented",P),P.defaultPrevented||(f.preventDefault(),_&&yu(C,!0))}}else if(T===M){const P=Ox({focusReason:s.value});e("focusout-prevented",P),P.defaultPrevented||f.preventDefault()}}};Yt(RE,{focusTrapRef:t,onKeydown:a}),Ve(()=>r.focusTrapEl,f=>{f&&(t.value=f)},{immediate:!0}),Ve([t],([f],[m])=>{f&&(f.addEventListener("keydown",a),f.addEventListener("focusin",u),f.addEventListener("focusout",d)),m&&(m.removeEventListener("keydown",a),m.removeEventListener("focusin",u),m.removeEventListener("focusout",d))});const l=f=>{e(KF,f)},c=f=>e(YF,f),u=f=>{const m=y(t);if(!m)return;const g=f.target,v=f.relatedTarget,x=g&&m.contains(g);r.trapped||v&&m.contains(v)||(i=v),x&&e("focusin",f),!o.paused&&r.trapped&&(x?n=g:yu(n,!0))},d=f=>{const m=y(t);if(!(o.paused||!m))if(r.trapped){const g=f.relatedTarget;!Vi(g)&&!m.contains(g)&&setTimeout(()=>{if(!o.paused&&r.trapped){const v=Ox({focusReason:s.value});e("focusout-prevented",v),v.defaultPrevented||yu(n,!0)}},0)}else{const g=f.target;g&&m.contains(g)||e("focusout",f)}};async function h(){await ht();const f=y(t);if(f){eB.push(o);const m=f.contains(document.activeElement)?i:document.activeElement;if(i=m,!f.contains(m)){const g=new Event(AE,qF);f.addEventListener(AE,l),f.dispatchEvent(g),g.defaultPrevented||ht(()=>{let v=r.focusStartEl;kt(v)||(yu(v),document.activeElement!==v&&(v="first")),v==="first"&&pme(ZF(f),!0),(document.activeElement===m||v==="container")&&yu(f)})}}}function p(){const f=y(t);if(f){f.removeEventListener(AE,l);const m=new CustomEvent(NE,{...qF,detail:{focusReason:s.value}});f.addEventListener(NE,c),f.dispatchEvent(m),!m.defaultPrevented&&(s.value=="keyboard"||!fme()||f.contains(document.activeElement))&&yu(i??document.body),f.removeEventListener(NE,c),eB.remove(o)}}return Et(()=>{r.trapped&&h(),Ve(()=>r.trapped,f=>{f?h():p()})}),Zr(()=>{r.trapped&&p()}),{onKeydown:a}}});function vme(r,e,t,i,n,s){return ze(r.$slots,"default",{handleKeydown:r.onKeydown})}var Px=Qe(gme,[["render",vme],["__file","/home/runner/work/element-plus/element-plus/packages/components/focus-trap/src/focus-trap.vue"]]);const yme=["fixed","absolute"],bme=et({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:Oe(Array),default:void 0},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:$d,default:"bottom"},popperOptions:{type:Oe(Object),default:()=>({})},strategy:{type:String,values:yme,default:"absolute"}}),rB=et({...bme,id:String,style:{type:Oe([String,Array,Object])},className:{type:Oe([String,Array,Object])},effect:{type:String,default:"dark"},visible:Boolean,enterable:{type:Boolean,default:!0},pure:Boolean,focusOnShow:{type:Boolean,default:!1},trapping:{type:Boolean,default:!1},popperClass:{type:Oe([String,Array,Object])},popperStyle:{type:Oe([String,Array,Object])},referenceEl:{type:Oe(Object)},triggerTargetEl:{type:Oe(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},ariaLabel:{type:String,default:void 0},virtualTriggering:Boolean,zIndex:Number}),xme={mouseenter:r=>r instanceof MouseEvent,mouseleave:r=>r instanceof MouseEvent,focus:()=>!0,blur:()=>!0,close:()=>!0},wme=(r,e=[])=>{const{placement:t,strategy:i,popperOptions:n}=r,s={placement:t,strategy:i,...n,modifiers:[...Sme(r),...e]};return Tme(s,n==null?void 0:n.modifiers),s},_me=r=>{if(ar)return _o(r)};function Sme(r){const{offset:e,gpuAcceleration:t,fallbackPlacements:i}=r;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:i}},{name:"computeStyles",options:{gpuAcceleration:t}}]}function Tme(r,e){e&&(r.modifiers=[...r.modifiers,...e??[]])}const Mme=0,Eme=r=>{const{popperInstanceRef:e,contentRef:t,triggerRef:i,role:n}=ut(CE,void 0),s=W(),o=W(),a=I(()=>({name:"eventListeners",enabled:!!r.visible})),l=I(()=>{var v;const x=y(s),b=(v=y(o))!=null?v:Mme;return{name:"arrow",enabled:!Lse(x),options:{element:x,padding:b}}}),c=I(()=>({onFirstUpdate:()=>{f()},...wme(r,[y(l),y(a)])})),u=I(()=>_me(r.referenceEl)||y(i)),{attributes:d,state:h,styles:p,update:f,forceUpdate:m,instanceRef:g}=whe(u,t,c);return Ve(g,v=>e.value=v),Et(()=>{Ve(()=>{var v;return(v=y(u))==null?void 0:v.getBoundingClientRect()},()=>{f()})}),{attributes:d,arrowRef:s,contentRef:t,instanceRef:g,state:h,styles:p,role:n,forceUpdate:m,update:f}},Cme=(r,{attributes:e,styles:t,role:i})=>{const{nextZIndex:n}=wf(),s=Ge("popper"),o=I(()=>y(e).popper),a=W(r.zIndex||n()),l=I(()=>[s.b(),s.is("pure",r.pure),s.is(r.effect),r.popperClass]),c=I(()=>[{zIndex:y(a)},y(t).popper,r.popperStyle||{}]),u=I(()=>i.value==="dialog"?"false":void 0),d=I(()=>y(t).arrow||{});return{ariaModal:u,arrowStyle:d,contentAttrs:o,contentClass:l,contentStyle:c,contentZIndex:a,updateZIndex:()=>{a.value=r.zIndex||n()}}},Ame=(r,e)=>{const t=W(!1),i=W();return{focusStartRef:i,trapped:t,onFocusAfterReleased:n=>{var s;((s=n.detail)==null?void 0:s.focusReason)!=="pointer"&&(i.value="first",e("blur"))},onFocusAfterTrapped:()=>{e("focus")},onFocusInTrap:n=>{r.visible&&!t.value&&(n.target&&(i.value=n.target),t.value=!0)},onFocusoutPrevented:n=>{r.trapping||(n.detail.focusReason==="pointer"&&n.preventDefault(),t.value=!1)},onReleaseRequested:()=>{t.value=!1,e("close")}}},Nme=xe({name:"ElPopperContent"}),Rme=xe({...Nme,props:rB,emits:xme,setup(r,{expose:e,emit:t}){const i=r,{focusStartRef:n,trapped:s,onFocusAfterReleased:o,onFocusAfterTrapped:a,onFocusInTrap:l,onFocusoutPrevented:c,onReleaseRequested:u}=Ame(i,t),{attributes:d,arrowRef:h,contentRef:p,styles:f,instanceRef:m,role:g,update:v}=Eme(i),{ariaModal:x,arrowStyle:b,contentAttrs:w,contentClass:_,contentStyle:S,updateZIndex:T}=Cme(i,{styles:f,attributes:d,role:g}),M=ut(Sl,void 0),E=W();Yt(VF,{arrowStyle:b,arrowRef:h,arrowOffset:E}),M&&(M.addInputId||M.removeInputId)&&Yt(Sl,{...M,addInputId:Lr,removeInputId:Lr});let C;const P=(N=!0)=>{v(),N&&T()},A=()=>{P(!1),i.visible&&i.focusOnShow?s.value=!0:i.visible===!1&&(s.value=!1)};return Et(()=>{Ve(()=>i.triggerTargetEl,(N,R)=>{C==null||C(),C=void 0;const F=y(N||p.value),B=y(R||p.value);Qo(F)&&(C=Ve([g,()=>i.ariaLabel,x,()=>i.id],k=>{["role","aria-label","aria-modal","id"].forEach((z,O)=>{Vi(k[O])?F.removeAttribute(z):F.setAttribute(z,k[O])})},{immediate:!0})),B!==F&&Qo(B)&&["role","aria-label","aria-modal","id"].forEach(k=>{B.removeAttribute(k)})},{immediate:!0}),Ve(()=>i.visible,A,{immediate:!0})}),Zr(()=>{C==null||C(),C=void 0}),e({popperContentRef:p,popperInstanceRef:m,updatePopper:P,contentStyle:S}),(N,R)=>(D(),ee("div",qt({ref_key:"contentRef",ref:p},y(w),{style:y(S),class:y(_),tabindex:"-1",onMouseenter:R[0]||(R[0]=F=>N.$emit("mouseenter",F)),onMouseleave:R[1]||(R[1]=F=>N.$emit("mouseleave",F))}),[ue(y(Px),{trapped:y(s),"trap-on-focus-in":!0,"focus-trap-el":y(p),"focus-start-el":y(n),onFocusAfterTrapped:y(a),onFocusAfterReleased:y(o),onFocusin:y(l),onFocusoutPrevented:y(c),onReleaseRequested:y(u)},{default:me(()=>[ze(N.$slots,"default")]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusin","onFocusoutPrevented","onReleaseRequested"])],16))}});var kme=Qe(Rme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popper/src/content.vue"]]);const iB=zt(Qfe),Ix=Symbol("elTooltip"),Nn=et({...Ahe,...rB,appendTo:{type:Oe([String,Object])},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:Oe(Boolean),default:null},transition:String,teleported:{type:Boolean,default:!0},disabled:Boolean}),Jv=et({...XF,disabled:Boolean,trigger:{type:Oe([String,Array]),default:"hover"},triggerKeys:{type:Oe(Array),default:()=>[bt.enter,bt.space]}}),{useModelToggleProps:Lme,useModelToggleEmits:Ome,useModelToggle:Pme}=NU("visible"),Ime=et({...GF,...Lme,...Nn,...Jv,...jF,showArrow:{type:Boolean,default:!0}}),Dme=[...Ome,"before-show","before-hide","show","hide","open","close"],Ume=(r,e)=>lt(r)?r.includes(e):r===e,Cf=(r,e,t)=>i=>{Ume(y(r),e)&&t(i)},Fme=xe({name:"ElTooltipTrigger"}),Bme=xe({...Fme,props:Jv,setup(r,{expose:e}){const t=r,i=Ge("tooltip"),{controlled:n,id:s,open:o,onOpen:a,onClose:l,onToggle:c}=ut(Ix,void 0),u=W(null),d=()=>{if(y(n)||t.disabled)return!0},h=ai(t,"trigger"),p=hi(d,Cf(h,"hover",a)),f=hi(d,Cf(h,"hover",l)),m=hi(d,Cf(h,"click",w=>{w.button===0&&c(w)})),g=hi(d,Cf(h,"focus",a)),v=hi(d,Cf(h,"focus",l)),x=hi(d,Cf(h,"contextmenu",w=>{w.preventDefault(),c(w)})),b=hi(d,w=>{const{code:_}=w;t.triggerKeys.includes(_)&&(w.preventDefault(),c(w))});return e({triggerRef:u}),(w,_)=>(D(),Ae(y(ome),{id:y(s),"virtual-ref":w.virtualRef,open:y(o),"virtual-triggering":w.virtualTriggering,class:j(y(i).e("trigger")),onBlur:y(v),onClick:y(m),onContextmenu:y(x),onFocus:y(g),onMouseenter:y(p),onMouseleave:y(f),onKeydown:y(b)},{default:me(()=>[ze(w.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","class","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"]))}});var zme=Qe(Bme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/trigger.vue"]]);const Vme=xe({name:"ElTooltipContent",inheritAttrs:!1}),Gme=xe({...Vme,props:Nn,setup(r,{expose:e}){const t=r,{selector:i}=iF(),n=Ge("tooltip"),s=W(null),o=W(!1),{controlled:a,id:l,open:c,trigger:u,onClose:d,onOpen:h,onShow:p,onHide:f,onBeforeShow:m,onBeforeHide:g}=ut(Ix,void 0),v=I(()=>t.transition||`${n.namespace.value}-fade-in-linear`),x=I(()=>t.persistent);Zr(()=>{o.value=!0});const b=I(()=>y(x)?!0:y(c)),w=I(()=>t.disabled?!1:y(c)),_=I(()=>t.appendTo||i.value),S=I(()=>{var k;return(k=t.style)!=null?k:{}}),T=I(()=>!y(c)),M=()=>{f()},E=()=>{if(y(a))return!0},C=hi(E,()=>{t.enterable&&y(u)==="hover"&&h()}),P=hi(E,()=>{y(u)==="hover"&&d()}),A=()=>{var k,z;(z=(k=s.value)==null?void 0:k.updatePopper)==null||z.call(k),m==null||m()},N=()=>{g==null||g()},R=()=>{p(),B=yM(I(()=>{var k;return(k=s.value)==null?void 0:k.popperContentRef}),()=>{y(a)||y(u)!=="hover"&&d()})},F=()=>{t.virtualTriggering||d()};let B;return Ve(()=>y(c),k=>{k||(B==null||B())},{flush:"post"}),Ve(()=>t.content,()=>{var k,z;(z=(k=s.value)==null?void 0:k.updatePopper)==null||z.call(k)}),e({contentRef:s}),(k,z)=>(D(),Ae(cv,{disabled:!k.teleported,to:y(_)},[ue(Li,{name:y(v),onAfterLeave:M,onBeforeEnter:A,onAfterEnter:R,onBeforeLeave:N},{default:me(()=>[y(b)?It((D(),Ae(y(kme),qt({key:0,id:y(l),ref_key:"contentRef",ref:s},k.$attrs,{"aria-label":k.ariaLabel,"aria-hidden":y(T),"boundaries-padding":k.boundariesPadding,"fallback-placements":k.fallbackPlacements,"gpu-acceleration":k.gpuAcceleration,offset:k.offset,placement:k.placement,"popper-options":k.popperOptions,strategy:k.strategy,effect:k.effect,enterable:k.enterable,pure:k.pure,"popper-class":k.popperClass,"popper-style":[k.popperStyle,y(S)],"reference-el":k.referenceEl,"trigger-target-el":k.triggerTargetEl,visible:y(w),"z-index":k.zIndex,onMouseenter:y(C),onMouseleave:y(P),onBlur:F,onClose:y(d)}),{default:me(()=>[o.value?Re("v-if",!0):ze(k.$slots,"default",{key:0})]),_:3},16,["id","aria-label","aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","trigger-target-el","visible","z-index","onMouseenter","onMouseleave","onClose"])),[[vr,y(w)]]):Re("v-if",!0)]),_:3},8,["name"])],8,["disabled","to"]))}});var jme=Qe(Gme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/content.vue"]]);const Hme=["innerHTML"],Wme={key:1},$me=xe({name:"ElTooltip"}),Xme=xe({...$me,props:Ime,emits:Dme,setup(r,{expose:e,emit:t}){const i=r;Che();const n=na(),s=W(),o=W(),a=()=>{var v;const x=y(s);x&&((v=x.popperInstanceRef)==null||v.update())},l=W(!1),c=W(),{show:u,hide:d,hasUpdateHandler:h}=Pme({indicator:l,toggleReason:c}),{onOpen:p,onClose:f}=nF({showAfter:ai(i,"showAfter"),hideAfter:ai(i,"hideAfter"),autoClose:ai(i,"autoClose"),open:u,close:d}),m=I(()=>Gi(i.visible)&&!h.value);Yt(Ix,{controlled:m,id:n,open:$p(l),trigger:ai(i,"trigger"),onOpen:v=>{p(v)},onClose:v=>{f(v)},onToggle:v=>{y(l)?f(v):p(v)},onShow:()=>{t("show",c.value)},onHide:()=>{t("hide",c.value)},onBeforeShow:()=>{t("before-show",c.value)},onBeforeHide:()=>{t("before-hide",c.value)},updatePopper:a}),Ve(()=>i.disabled,v=>{v&&l.value&&(l.value=!1)});const g=v=>{var x,b;const w=(b=(x=o.value)==null?void 0:x.contentRef)==null?void 0:b.popperContentRef,_=(v==null?void 0:v.relatedTarget)||document.activeElement;return w&&w.contains(_)};return XP(()=>l.value&&d()),e({popperRef:s,contentRef:o,isFocusInsideContent:g,updatePopper:a,onOpen:p,onClose:f,hide:d}),(v,x)=>(D(),Ae(y(iB),{ref_key:"popperRef",ref:s,role:v.role},{default:me(()=>[ue(zme,{disabled:v.disabled,trigger:v.trigger,"trigger-keys":v.triggerKeys,"virtual-ref":v.virtualRef,"virtual-triggering":v.virtualTriggering},{default:me(()=>[v.$slots.default?ze(v.$slots,"default",{key:0}):Re("v-if",!0)]),_:3},8,["disabled","trigger","trigger-keys","virtual-ref","virtual-triggering"]),ue(jme,{ref_key:"contentRef",ref:o,"aria-label":v.ariaLabel,"boundaries-padding":v.boundariesPadding,content:v.content,disabled:v.disabled,effect:v.effect,enterable:v.enterable,"fallback-placements":v.fallbackPlacements,"hide-after":v.hideAfter,"gpu-acceleration":v.gpuAcceleration,offset:v.offset,persistent:v.persistent,"popper-class":v.popperClass,"popper-style":v.popperStyle,placement:v.placement,"popper-options":v.popperOptions,pure:v.pure,"raw-content":v.rawContent,"reference-el":v.referenceEl,"trigger-target-el":v.triggerTargetEl,"show-after":v.showAfter,strategy:v.strategy,teleported:v.teleported,transition:v.transition,"virtual-triggering":v.virtualTriggering,"z-index":v.zIndex,"append-to":v.appendTo},{default:me(()=>[ze(v.$slots,"content",{},()=>[v.rawContent?(D(),ee("span",{key:0,innerHTML:v.content},null,8,Hme)):(D(),ee("span",Wme,$e(v.content),1))]),v.showArrow?(D(),Ae(y(rme),{key:0,"arrow-offset":v.arrowOffset},null,8,["arrow-offset"])):Re("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","trigger-target-el","show-after","strategy","teleported","transition","virtual-triggering","z-index","append-to"])]),_:3},8,["role"]))}});var qme=Qe(Xme,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip/src/tooltip.vue"]]);const Rs=zt(qme),Kme=et({valueKey:{type:String,default:"value"},modelValue:{type:[String,Number],default:""},debounce:{type:Number,default:300},placement:{type:Oe(String),values:["top","top-start","top-end","bottom","bottom-start","bottom-end"],default:"bottom-start"},fetchSuggestions:{type:Oe([Function,Array]),default:Lr},popperClass:{type:String,default:""},triggerOnFocus:{type:Boolean,default:!0},selectWhenUnmatched:{type:Boolean,default:!1},hideLoading:{type:Boolean,default:!1},label:{type:String},teleported:Nn.teleported,highlightFirstItem:{type:Boolean,default:!1},fitInputWidth:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},name:String}),Yme={[Wt]:r=>kt(r),[As]:r=>kt(r),[Kr]:r=>kt(r),focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent,clear:()=>!0,select:r=>Ht(r)},Zme=["aria-expanded","aria-owns"],Jme={key:0},Qme=["id","aria-selected","onClick"],nB="ElAutocomplete",ege=xe({name:nB,inheritAttrs:!1}),tge=xe({...ege,props:Kme,emits:Yme,setup(r,{expose:e,emit:t}){const i=r,n=tE(),s=kd(),o=Ys(),a=Ge("autocomplete"),l=W(),c=W(),u=W(),d=W();let h=!1,p=!1;const f=W([]),m=W(-1),g=W(""),v=W(!1),x=W(!1),b=W(!1),w=I(()=>a.b(String(gx()))),_=I(()=>s.style),S=I(()=>(f.value.length>0||b.value)&&v.value),T=I(()=>!i.hideLoading&&b.value),M=I(()=>l.value?Array.from(l.value.$el.querySelectorAll("input")):[]),E=()=>{S.value&&(g.value=`${l.value.$el.offsetWidth}px`)},C=()=>{m.value=-1},P=Es(async se=>{if(x.value)return;const de=K=>{b.value=!1,!x.value&&(lt(K)?(f.value=K,m.value=i.highlightFirstItem?0:-1):ji(nB,"autocomplete suggestions must be an array"))};if(b.value=!0,lt(i.fetchSuggestions))de(i.fetchSuggestions);else{const K=await i.fetchSuggestions(se,de);lt(K)&&de(K)}},i.debounce),A=se=>{const de=!!se;if(t(As,se),t(Wt,se),x.value=!1,v.value||(v.value=de),!i.triggerOnFocus&&!se){x.value=!0,f.value=[];return}P(se)},N=se=>{var de;o.value||(((de=se.target)==null?void 0:de.tagName)!=="INPUT"||M.value.includes(document.activeElement))&&(v.value=!0)},R=se=>{t(Kr,se)},F=se=>{p?p=!1:(v.value=!0,t("focus",se),i.triggerOnFocus&&!h&&P(String(i.modelValue)))},B=se=>{setTimeout(()=>{var de;if((de=u.value)!=null&&de.isFocusInsideContent()){p=!0;return}v.value&&V(),t("blur",se)})},k=()=>{v.value=!1,t(Wt,""),t("clear")},z=async()=>{S.value&&m.value>=0&&m.value<f.value.length?X(f.value[m.value]):i.selectWhenUnmatched&&(t("select",{value:i.modelValue}),f.value=[],m.value=-1)},O=se=>{S.value&&(se.preventDefault(),se.stopPropagation(),V())},V=()=>{v.value=!1},U=()=>{var se;(se=l.value)==null||se.focus()},G=()=>{var se;(se=l.value)==null||se.blur()},X=async se=>{t(As,se[i.valueKey]),t(Wt,se[i.valueKey]),t("select",se),f.value=[],m.value=-1},ie=se=>{if(!S.value||b.value)return;if(se<0){m.value=-1;return}se>=f.value.length&&(se=f.value.length-1);const de=c.value.querySelector(`.${a.be("suggestion","wrap")}`),K=de.querySelectorAll(`.${a.be("suggestion","list")} li`)[se],q=de.scrollTop,{offsetTop:ce,scrollHeight:Te}=K;ce+Te>q+de.clientHeight&&(de.scrollTop+=Te),ce<q&&(de.scrollTop-=Te),m.value=se,l.value.ref.setAttribute("aria-activedescendant",`${w.value}-item-${m.value}`)};return yM(d,()=>{S.value&&V()}),Et(()=>{l.value.ref.setAttribute("role","textbox"),l.value.ref.setAttribute("aria-autocomplete","list"),l.value.ref.setAttribute("aria-controls","id"),l.value.ref.setAttribute("aria-activedescendant",`${w.value}-item-${m.value}`),h=l.value.ref.hasAttribute("readonly")}),e({highlightedIndex:m,activated:v,loading:b,inputRef:l,popperRef:u,suggestions:f,handleSelect:X,handleKeyEnter:z,focus:U,blur:G,close:V,highlight:ie}),(se,de)=>(D(),Ae(y(Rs),{ref_key:"popperRef",ref:u,visible:y(S),placement:se.placement,"fallback-placements":["bottom-start","top-start"],"popper-class":[y(a).e("popper"),se.popperClass],teleported:se.teleported,"gpu-acceleration":!1,pure:"","manual-mode":"",effect:"light",trigger:"click",transition:`${y(a).namespace.value}-zoom-in-top`,persistent:"",role:"listbox",onBeforeShow:E,onHide:C},{content:me(()=>[J("div",{ref_key:"regionRef",ref:c,class:j([y(a).b("suggestion"),y(a).is("loading",y(T))]),style:pt({[se.fitInputWidth?"width":"minWidth"]:g.value,outline:"none"}),role:"region"},[ue(y(ac),{id:y(w),tag:"ul","wrap-class":y(a).be("suggestion","wrap"),"view-class":y(a).be("suggestion","list"),role:"listbox"},{default:me(()=>[y(T)?(D(),ee("li",Jme,[ue(y(dt),{class:j(y(a).is("loading"))},{default:me(()=>[ue(y(du))]),_:1},8,["class"])])):(D(!0),ee(ct,{key:1},Ut(f.value,(K,q)=>(D(),ee("li",{id:`${y(w)}-item-${q}`,key:q,class:j({highlighted:m.value===q}),role:"option","aria-selected":m.value===q,onClick:ce=>X(K)},[ze(se.$slots,"default",{item:K},()=>[ir($e(K[se.valueKey]),1)])],10,Qme))),128))]),_:3},8,["id","wrap-class","view-class"])],6)]),default:me(()=>[J("div",{ref_key:"listboxRef",ref:d,class:j([y(a).b(),se.$attrs.class]),style:pt(y(_)),role:"combobox","aria-haspopup":"listbox","aria-expanded":y(S),"aria-owns":y(w)},[ue(y(us),qt({ref_key:"inputRef",ref:l},y(n),{clearable:se.clearable,disabled:y(o),name:se.name,"model-value":se.modelValue,onInput:A,onChange:R,onFocus:F,onBlur:B,onClear:k,onKeydown:[de[0]||(de[0]=dr(Mt(K=>ie(m.value-1),["prevent"]),["up"])),de[1]||(de[1]=dr(Mt(K=>ie(m.value+1),["prevent"]),["down"])),dr(z,["enter"]),dr(V,["tab"]),dr(O,["esc"])],onMousedown:N}),Zl({_:2},[se.$slots.prepend?{name:"prepend",fn:me(()=>[ze(se.$slots,"prepend")])}:void 0,se.$slots.append?{name:"append",fn:me(()=>[ze(se.$slots,"append")])}:void 0,se.$slots.prefix?{name:"prefix",fn:me(()=>[ze(se.$slots,"prefix")])}:void 0,se.$slots.suffix?{name:"suffix",fn:me(()=>[ze(se.$slots,"suffix")])}:void 0]),1040,["clearable","disabled","name","model-value","onKeydown"])],14,Zme)]),_:3},8,["visible","placement","popper-class","teleported","transition"]))}});var rge=Qe(tge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/autocomplete/src/autocomplete.vue"]]);const ige=zt(rge),nge=et({size:{type:[Number,String],values:yl,default:"",validator:r=>Ct(r)},shape:{type:String,values:["circle","square"],default:"circle"},icon:{type:Gr},src:{type:String,default:""},alt:String,srcSet:String,fit:{type:Oe(String),default:"cover"}}),sge={error:r=>r instanceof Event},oge=["src","alt","srcset"],age=xe({name:"ElAvatar"}),lge=xe({...age,props:nge,emits:sge,setup(r,{emit:e}){const t=r,i=Ge("avatar"),n=W(!1),s=I(()=>{const{size:c,icon:u,shape:d}=t,h=[i.b()];return kt(c)&&h.push(i.m(c)),u&&h.push(i.m("icon")),d&&h.push(i.m(d)),h}),o=I(()=>{const{size:c}=t;return Ct(c)?i.cssVarBlock({size:Ti(c)||""}):void 0}),a=I(()=>({objectFit:t.fit}));Ve(()=>t.src,()=>n.value=!1);function l(c){n.value=!0,e("error",c)}return(c,u)=>(D(),ee("span",{class:j(y(s)),style:pt(y(o))},[(c.src||c.srcSet)&&!n.value?(D(),ee("img",{key:0,src:c.src,alt:c.alt,srcset:c.srcSet,style:pt(y(a)),onError:l},null,44,oge)):c.icon?(D(),Ae(y(dt),{key:1},{default:me(()=>[(D(),Ae(Xt(c.icon)))]),_:1})):ze(c.$slots,"default",{key:2})],6))}});var cge=Qe(lge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/avatar/src/avatar.vue"]]);const uge=zt(cge),dge={visibilityHeight:{type:Number,default:200},target:{type:String,default:""},right:{type:Number,default:40},bottom:{type:Number,default:40}},hge={click:r=>r instanceof MouseEvent},pge=(r,e,t)=>{const i=Vr(),n=Vr(),s=W(!1),o=()=>{i.value&&(s.value=i.value.scrollTop>=r.visibilityHeight)},a=c=>{var u;(u=i.value)==null||u.scrollTo({top:0,behavior:"smooth"}),e("click",c)},l=UD(o,300,!0);return Qr(n,"scroll",l),Et(()=>{var c;n.value=document,i.value=document.documentElement,r.target&&(i.value=(c=document.querySelector(r.target))!=null?c:void 0,i.value||ji(t,`target does not exist: ${r.target}`),n.value=i.value),o()}),{visible:s,handleClick:a}},sB="ElBacktop",fge=xe({name:sB}),mge=xe({...fge,props:dge,emits:hge,setup(r,{emit:e}){const t=r,i=Ge("backtop"),{handleClick:n,visible:s}=pge(t,e,sB),o=I(()=>({right:`${t.right}px`,bottom:`${t.bottom}px`}));return(a,l)=>(D(),Ae(Li,{name:`${y(i).namespace.value}-fade-in`},{default:me(()=>[y(s)?(D(),ee("div",{key:0,style:pt(y(o)),class:j(y(i).b()),onClick:l[0]||(l[0]=Mt((...c)=>y(n)&&y(n)(...c),["stop"]))},[ze(a.$slots,"default",{},()=>[ue(y(dt),{class:j(y(i).e("icon"))},{default:me(()=>[ue(y(Boe))]),_:1},8,["class"])])],6)):Re("v-if",!0)]),_:3},8,["name"]))}});var gge=Qe(mge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/backtop/src/backtop.vue"]]);const vge=zt(gge),yge=et({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),bge=["textContent"],xge=xe({name:"ElBadge"}),wge=xe({...xge,props:yge,setup(r,{expose:e}){const t=r,i=Ge("badge"),n=I(()=>t.isDot?"":Ct(t.value)&&Ct(t.max)?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`);return e({content:n}),(s,o)=>(D(),ee("div",{class:j(y(i).b())},[ze(s.$slots,"default"),ue(Li,{name:`${y(i).namespace.value}-zoom-in-center`,persisted:""},{default:me(()=>[It(J("sup",{class:j([y(i).e("content"),y(i).em("content",s.type),y(i).is("fixed",!!s.$slots.default),y(i).is("dot",s.isDot)]),textContent:$e(y(n))},null,10,bge),[[vr,!s.hidden&&(y(n)||s.isDot)]])]),_:1},8,["name"])],2))}});var _ge=Qe(wge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/badge/src/badge.vue"]]);const oB=zt(_ge),aB=Symbol("breadcrumbKey"),Sge=et({separator:{type:String,default:"/"},separatorIcon:{type:Gr}}),Tge=xe({name:"ElBreadcrumb"}),Mge=xe({...Tge,props:Sge,setup(r){const e=r,t=Ge("breadcrumb"),i=W();return Yt(aB,e),Et(()=>{const n=i.value.querySelectorAll(`.${t.e("item")}`);n.length&&n[n.length-1].setAttribute("aria-current","page")}),(n,s)=>(D(),ee("div",{ref_key:"breadcrumb",ref:i,class:j(y(t).b()),"aria-label":"Breadcrumb",role:"navigation"},[ze(n.$slots,"default")],2))}});var Ege=Qe(Mge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const Cge=et({to:{type:Oe([String,Object]),default:""},replace:{type:Boolean,default:!1}}),Age=xe({name:"ElBreadcrumbItem"}),Nge=xe({...Age,props:Cge,setup(r){const e=r,t=Dt(),i=ut(aB,void 0),n=Ge("breadcrumb"),s=t.appContext.config.globalProperties.$router,o=W(),a=()=>{!e.to||!s||(e.replace?s.replace(e.to):s.push(e.to))};return(l,c)=>{var u,d;return D(),ee("span",{class:j(y(n).e("item"))},[J("span",{ref_key:"link",ref:o,class:j([y(n).e("inner"),y(n).is("link",!!l.to)]),role:"link",onClick:a},[ze(l.$slots,"default")],2),(u=y(i))!=null&&u.separatorIcon?(D(),Ae(y(dt),{key:0,class:j(y(n).e("separator"))},{default:me(()=>[(D(),Ae(Xt(y(i).separatorIcon)))]),_:1},8,["class"])):(D(),ee("span",{key:1,class:j(y(n).e("separator")),role:"presentation"},$e((d=y(i))==null?void 0:d.separator),3))],2)}}});var lB=Qe(Nge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const Rge=zt(Ege,{BreadcrumbItem:lB}),kge=fi(lB),cB=Symbol("buttonGroupContextKey"),Lge=(r,e)=>{bl({from:"type.text",replacement:"link",version:"3.0.0",scope:"props",ref:"https://element-plus.org/en-US/component/button.html#button-attributes"},I(()=>r.type==="text"));const t=ut(cB,void 0),i=Mx("button"),{form:n}=Ns(),s=Hi(I(()=>t==null?void 0:t.size)),o=Ys(),a=W(),l=Gn(),c=I(()=>r.type||(t==null?void 0:t.type)||""),u=I(()=>{var p,f,m;return(m=(f=r.autoInsertSpace)!=null?f:(p=i.value)==null?void 0:p.autoInsertSpace)!=null?m:!1}),d=I(()=>r.tag==="button"?{ariaDisabled:o.value||r.loading,disabled:o.value||r.loading,autofocus:r.autofocus,type:r.nativeType}:{}),h=I(()=>{var p;const f=(p=l.default)==null?void 0:p.call(l);if(u.value&&(f==null?void 0:f.length)===1){const m=f[0];if((m==null?void 0:m.type)===Zp){const g=m.children;return/^\p{Unified_Ideograph}{2}$/u.test(g.trim())}}return!1});return{_disabled:o,_size:s,_type:c,_ref:a,_props:d,shouldAddSpace:h,handleClick:p=>{r.nativeType==="reset"&&(n==null||n.resetFields()),e("click",p)}}},OE=["default","primary","success","warning","info","danger","text",""],Oge=["button","submit","reset"],PE=et({size:jn,disabled:Boolean,type:{type:String,values:OE,default:""},icon:{type:Gr},nativeType:{type:String,values:Oge,default:"button"},loading:Boolean,loadingIcon:{type:Gr,default:()=>du},plain:Boolean,text:Boolean,link:Boolean,bg:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,dark:Boolean,autoInsertSpace:{type:Boolean,default:void 0},tag:{type:Oe([String,Object]),default:"button"}}),Pge={click:r=>r instanceof MouseEvent};function Hn(r,e){Ige(r)&&(r="100%");var t=Dge(r);return r=e===360?r:Math.min(e,Math.max(0,parseFloat(r))),t&&(r=parseInt(String(r*e),10)/100),Math.abs(r-e)<1e-6?1:(e===360?r=(r<0?r%e+e:r%e)/parseFloat(String(e)):r=r%e/parseFloat(String(e)),r)}function Dx(r){return Math.min(1,Math.max(0,r))}function Ige(r){return typeof r=="string"&&r.indexOf(".")!==-1&&parseFloat(r)===1}function Dge(r){return typeof r=="string"&&r.indexOf("%")!==-1}function uB(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function Ux(r){return r<=1?"".concat(Number(r)*100,"%"):r}function Yd(r){return r.length===1?"0"+r:String(r)}function Uge(r,e,t){return{r:Hn(r,255)*255,g:Hn(e,255)*255,b:Hn(t,255)*255}}function dB(r,e,t){r=Hn(r,255),e=Hn(e,255),t=Hn(t,255);var i=Math.max(r,e,t),n=Math.min(r,e,t),s=0,o=0,a=(i+n)/2;if(i===n)o=0,s=0;else{var l=i-n;switch(o=a>.5?l/(2-i-n):l/(i+n),i){case r:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-r)/l+2;break;case t:s=(r-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function IE(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*(6*t):t<1/2?e:t<2/3?r+(e-r)*(2/3-t)*6:r}function Fge(r,e,t){var i,n,s;if(r=Hn(r,360),e=Hn(e,100),t=Hn(t,100),e===0)n=t,s=t,i=t;else{var o=t<.5?t*(1+e):t+e-t*e,a=2*t-o;i=IE(a,o,r+1/3),n=IE(a,o,r),s=IE(a,o,r-1/3)}return{r:i*255,g:n*255,b:s*255}}function hB(r,e,t){r=Hn(r,255),e=Hn(e,255),t=Hn(t,255);var i=Math.max(r,e,t),n=Math.min(r,e,t),s=0,o=i,a=i-n,l=i===0?0:a/i;if(i===n)s=0;else{switch(i){case r:s=(e-t)/a+(e<t?6:0);break;case e:s=(t-r)/a+2;break;case t:s=(r-e)/a+4;break}s/=6}return{h:s,s:l,v:o}}function Bge(r,e,t){r=Hn(r,360)*6,e=Hn(e,100),t=Hn(t,100);var i=Math.floor(r),n=r-i,s=t*(1-e),o=t*(1-n*e),a=t*(1-(1-n)*e),l=i%6,c=[t,o,s,s,a,t][l],u=[a,t,t,o,s,s][l],d=[s,s,a,t,t,o][l];return{r:c*255,g:u*255,b:d*255}}function pB(r,e,t,i){var n=[Yd(Math.round(r).toString(16)),Yd(Math.round(e).toString(16)),Yd(Math.round(t).toString(16))];return i&&n[0].startsWith(n[0].charAt(1))&&n[1].startsWith(n[1].charAt(1))&&n[2].startsWith(n[2].charAt(1))?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function zge(r,e,t,i,n){var s=[Yd(Math.round(r).toString(16)),Yd(Math.round(e).toString(16)),Yd(Math.round(t).toString(16)),Yd(Vge(i))];return n&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))&&s[3].startsWith(s[3].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function Vge(r){return Math.round(parseFloat(r)*255).toString(16)}function fB(r){return Mo(r)/255}function Mo(r){return parseInt(r,16)}function Gge(r){return{r:r>>16,g:(r&65280)>>8,b:r&255}}var DE={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function jge(r){var e={r:0,g:0,b:0},t=1,i=null,n=null,s=null,o=!1,a=!1;return typeof r=="string"&&(r=$ge(r)),typeof r=="object"&&(lc(r.r)&&lc(r.g)&&lc(r.b)?(e=Uge(r.r,r.g,r.b),o=!0,a=String(r.r).substr(-1)==="%"?"prgb":"rgb"):lc(r.h)&&lc(r.s)&&lc(r.v)?(i=Ux(r.s),n=Ux(r.v),e=Bge(r.h,i,n),o=!0,a="hsv"):lc(r.h)&&lc(r.s)&&lc(r.l)&&(i=Ux(r.s),s=Ux(r.l),e=Fge(r.h,i,s),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(r,"a")&&(t=r.a)),t=uB(t),{ok:o,format:r.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var Hge="[-\\+]?\\d+%?",Wge="[-\\+]?\\d*\\.\\d+%?",bu="(?:".concat(Wge,")|(?:").concat(Hge,")"),UE="[\\s|\\(]+(".concat(bu,")[,|\\s]+(").concat(bu,")[,|\\s]+(").concat(bu,")\\s*\\)?"),FE="[\\s|\\(]+(".concat(bu,")[,|\\s]+(").concat(bu,")[,|\\s]+(").concat(bu,")[,|\\s]+(").concat(bu,")\\s*\\)?"),Fa={CSS_UNIT:new RegExp(bu),rgb:new RegExp("rgb"+UE),rgba:new RegExp("rgba"+FE),hsl:new RegExp("hsl"+UE),hsla:new RegExp("hsla"+FE),hsv:new RegExp("hsv"+UE),hsva:new RegExp("hsva"+FE),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function $ge(r){if(r=r.trim().toLowerCase(),r.length===0)return!1;var e=!1;if(DE[r])r=DE[r],e=!0;else if(r==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=Fa.rgb.exec(r);return t?{r:t[1],g:t[2],b:t[3]}:(t=Fa.rgba.exec(r),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=Fa.hsl.exec(r),t?{h:t[1],s:t[2],l:t[3]}:(t=Fa.hsla.exec(r),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=Fa.hsv.exec(r),t?{h:t[1],s:t[2],v:t[3]}:(t=Fa.hsva.exec(r),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=Fa.hex8.exec(r),t?{r:Mo(t[1]),g:Mo(t[2]),b:Mo(t[3]),a:fB(t[4]),format:e?"name":"hex8"}:(t=Fa.hex6.exec(r),t?{r:Mo(t[1]),g:Mo(t[2]),b:Mo(t[3]),format:e?"name":"hex"}:(t=Fa.hex4.exec(r),t?{r:Mo(t[1]+t[1]),g:Mo(t[2]+t[2]),b:Mo(t[3]+t[3]),a:fB(t[4]+t[4]),format:e?"name":"hex8"}:(t=Fa.hex3.exec(r),t?{r:Mo(t[1]+t[1]),g:Mo(t[2]+t[2]),b:Mo(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function lc(r){return!!Fa.CSS_UNIT.exec(String(r))}var mB=function(){function r(e,t){e===void 0&&(e=""),t===void 0&&(t={});var i;if(e instanceof r)return e;typeof e=="number"&&(e=Gge(e)),this.originalInput=e;var n=jge(e);this.originalInput=e,this.r=n.r,this.g=n.g,this.b=n.b,this.a=n.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=t.format)!==null&&i!==void 0?i:n.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=n.ok}return r.prototype.isDark=function(){return this.getBrightness()<128},r.prototype.isLight=function(){return!this.isDark()},r.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},r.prototype.getLuminance=function(){var e=this.toRgb(),t,i,n,s=e.r/255,o=e.g/255,a=e.b/255;return s<=.03928?t=s/12.92:t=Math.pow((s+.055)/1.055,2.4),o<=.03928?i=o/12.92:i=Math.pow((o+.055)/1.055,2.4),a<=.03928?n=a/12.92:n=Math.pow((a+.055)/1.055,2.4),.2126*t+.7152*i+.0722*n},r.prototype.getAlpha=function(){return this.a},r.prototype.setAlpha=function(e){return this.a=uB(e),this.roundA=Math.round(100*this.a)/100,this},r.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},r.prototype.toHsv=function(){var e=hB(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},r.prototype.toHsvString=function(){var e=hB(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),n=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(i,"%, ").concat(n,"%)"):"hsva(".concat(t,", ").concat(i,"%, ").concat(n,"%, ").concat(this.roundA,")")},r.prototype.toHsl=function(){var e=dB(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},r.prototype.toHslString=function(){var e=dB(this.r,this.g,this.b),t=Math.round(e.h*360),i=Math.round(e.s*100),n=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(i,"%, ").concat(n,"%)"):"hsla(".concat(t,", ").concat(i,"%, ").concat(n,"%, ").concat(this.roundA,")")},r.prototype.toHex=function(e){return e===void 0&&(e=!1),pB(this.r,this.g,this.b,e)},r.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},r.prototype.toHex8=function(e){return e===void 0&&(e=!1),zge(this.r,this.g,this.b,this.a,e)},r.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},r.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},r.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},r.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(i,")"):"rgba(".concat(e,", ").concat(t,", ").concat(i,", ").concat(this.roundA,")")},r.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(Hn(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},r.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(Hn(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},r.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+pB(this.r,this.g,this.b,!1),t=0,i=Object.entries(DE);t<i.length;t++){var n=i[t],s=n[0],o=n[1];if(e===o)return s}return!1},r.prototype.toString=function(e){var t=!!e;e=e??this.format;var i=!1,n=this.a<1&&this.a>=0,s=!t&&n&&(e.startsWith("hex")||e==="name");return s?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},r.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},r.prototype.clone=function(){return new r(this.toString())},r.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=Dx(t.l),new r(t)},r.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new r(t)},r.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=Dx(t.l),new r(t)},r.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},r.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},r.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=Dx(t.s),new r(t)},r.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=Dx(t.s),new r(t)},r.prototype.greyscale=function(){return this.desaturate(100)},r.prototype.spin=function(e){var t=this.toHsl(),i=(t.h+e)%360;return t.h=i<0?360+i:i,new r(t)},r.prototype.mix=function(e,t){t===void 0&&(t=50);var i=this.toRgb(),n=new r(e).toRgb(),s=t/100,o={r:(n.r-i.r)*s+i.r,g:(n.g-i.g)*s+i.g,b:(n.b-i.b)*s+i.b,a:(n.a-i.a)*s+i.a};return new r(o)},r.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var i=this.toHsl(),n=360/t,s=[this];for(i.h=(i.h-(n*e>>1)+720)%360;--e;)i.h=(i.h+n)%360,s.push(new r(i));return s},r.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new r(e)},r.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),i=t.h,n=t.s,s=t.v,o=[],a=1/e;e--;)o.push(new r({h:i,s:n,v:s})),s=(s+a)%1;return o},r.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new r({h:(t+72)%360,s:e.s,l:e.l}),new r({h:(t+216)%360,s:e.s,l:e.l})]},r.prototype.onBackground=function(e){var t=this.toRgb(),i=new r(e).toRgb(),n=t.a+i.a*(1-t.a);return new r({r:(t.r*t.a+i.r*i.a*(1-t.a))/n,g:(t.g*t.a+i.g*i.a*(1-t.a))/n,b:(t.b*t.a+i.b*i.a*(1-t.a))/n,a:n})},r.prototype.triad=function(){return this.polyad(3)},r.prototype.tetrad=function(){return this.polyad(4)},r.prototype.polyad=function(e){for(var t=this.toHsl(),i=t.h,n=[this],s=360/e,o=1;o<e;o++)n.push(new r({h:(i+o*s)%360,s:t.s,l:t.l}));return n},r.prototype.equals=function(e){return this.toRgbString()===new r(e).toRgbString()},r}();function xu(r,e=20){return r.mix("#141414",e).toString()}function Xge(r){const e=Ys(),t=Ge("button");return I(()=>{let i={};const n=r.color;if(n){const s=new mB(n),o=r.dark?s.tint(20).toString():xu(s,20);if(r.plain)i=t.cssVarBlock({"bg-color":r.dark?xu(s,90):s.tint(90).toString(),"text-color":n,"border-color":r.dark?xu(s,50):s.tint(50).toString(),"hover-text-color":`var(${t.cssVarName("color-white")})`,"hover-bg-color":n,"hover-border-color":n,"active-bg-color":o,"active-text-color":`var(${t.cssVarName("color-white")})`,"active-border-color":o}),e.value&&(i[t.cssVarBlockName("disabled-bg-color")]=r.dark?xu(s,90):s.tint(90).toString(),i[t.cssVarBlockName("disabled-text-color")]=r.dark?xu(s,50):s.tint(50).toString(),i[t.cssVarBlockName("disabled-border-color")]=r.dark?xu(s,80):s.tint(80).toString());else{const a=r.dark?xu(s,30):s.tint(30).toString(),l=s.isDark()?`var(${t.cssVarName("color-white")})`:`var(${t.cssVarName("color-black")})`;if(i=t.cssVarBlock({"bg-color":n,"text-color":l,"border-color":n,"hover-bg-color":a,"hover-text-color":l,"hover-border-color":a,"active-bg-color":o,"active-border-color":o}),e.value){const c=r.dark?xu(s,50):s.tint(50).toString();i[t.cssVarBlockName("disabled-bg-color")]=c,i[t.cssVarBlockName("disabled-text-color")]=r.dark?"rgba(255, 255, 255, 0.5)":`var(${t.cssVarName("color-white")})`,i[t.cssVarBlockName("disabled-border-color")]=c}}}return i})}const qge=xe({name:"ElButton"}),Kge=xe({...qge,props:PE,emits:Pge,setup(r,{expose:e,emit:t}){const i=r,n=Xge(i),s=Ge("button"),{_ref:o,_size:a,_type:l,_disabled:c,_props:u,shouldAddSpace:d,handleClick:h}=Lge(i,t);return e({ref:o,size:a,type:l,disabled:c,shouldAddSpace:d}),(p,f)=>(D(),Ae(Xt(p.tag),qt({ref_key:"_ref",ref:o},y(u),{class:[y(s).b(),y(s).m(y(l)),y(s).m(y(a)),y(s).is("disabled",y(c)),y(s).is("loading",p.loading),y(s).is("plain",p.plain),y(s).is("round",p.round),y(s).is("circle",p.circle),y(s).is("text",p.text),y(s).is("link",p.link),y(s).is("has-bg",p.bg)],style:y(n),onClick:y(h)}),{default:me(()=>[p.loading?(D(),ee(ct,{key:0},[p.$slots.loading?ze(p.$slots,"loading",{key:0}):(D(),Ae(y(dt),{key:1,class:j(y(s).is("loading"))},{default:me(()=>[(D(),Ae(Xt(p.loadingIcon)))]),_:1},8,["class"]))],64)):p.icon||p.$slots.icon?(D(),Ae(y(dt),{key:1},{default:me(()=>[p.icon?(D(),Ae(Xt(p.icon),{key:0})):ze(p.$slots,"icon",{key:1})]),_:3})):Re("v-if",!0),p.$slots.default?(D(),ee("span",{key:2,class:j({[y(s).em("text","expand")]:y(d)})},[ze(p.$slots,"default")],2)):Re("v-if",!0)]),_:3},16,["class","style","onClick"]))}});var Yge=Qe(Kge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button.vue"]]);const Zge={size:PE.size,type:PE.type},Jge=xe({name:"ElButtonGroup"}),Qge=xe({...Jge,props:Zge,setup(r){const e=r;Yt(cB,br({size:ai(e,"size"),type:ai(e,"type")}));const t=Ge("button");return(i,n)=>(D(),ee("div",{class:j(`${y(t).b("group")}`)},[ze(i.$slots,"default")],2))}});var gB=Qe(Qge,[["__file","/home/runner/work/element-plus/element-plus/packages/components/button/src/button-group.vue"]]);const Wn=zt(Yge,{ButtonGroup:gB}),vB=fi(gB);var cc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Tl(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var yB={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(cc,function(){var t=1e3,i=6e4,n=36e5,s="millisecond",o="second",a="minute",l="hour",c="day",u="week",d="month",h="quarter",p="year",f="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,v=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,x={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(N){var R=["th","st","nd","rd"],F=N%100;return"["+N+(R[(F-20)%10]||R[F]||R[0])+"]"}},b=function(N,R,F){var B=String(N);return!B||B.length>=R?N:""+Array(R+1-B.length).join(F)+N},w={s:b,z:function(N){var R=-N.utcOffset(),F=Math.abs(R),B=Math.floor(F/60),k=F%60;return(R<=0?"+":"-")+b(B,2,"0")+":"+b(k,2,"0")},m:function N(R,F){if(R.date()<F.date())return-N(F,R);var B=12*(F.year()-R.year())+(F.month()-R.month()),k=R.clone().add(B,d),z=F-k<0,O=R.clone().add(B+(z?-1:1),d);return+(-(B+(F-k)/(z?k-O:O-k))||0)},a:function(N){return N<0?Math.ceil(N)||0:Math.floor(N)},p:function(N){return{M:d,y:p,w:u,d:c,D:f,h:l,m:a,s:o,ms:s,Q:h}[N]||String(N||"").toLowerCase().replace(/s$/,"")},u:function(N){return N===void 0}},_="en",S={};S[_]=x;var T=function(N){return N instanceof P},M=function N(R,F,B){var k;if(!R)return _;if(typeof R=="string"){var z=R.toLowerCase();S[z]&&(k=z),F&&(S[z]=F,k=z);var O=R.split("-");if(!k&&O.length>1)return N(O[0])}else{var V=R.name;S[V]=R,k=V}return!B&&k&&(_=k),k||!B&&_},E=function(N,R){if(T(N))return N.clone();var F=typeof R=="object"?R:{};return F.date=N,F.args=arguments,new P(F)},C=w;C.l=M,C.i=T,C.w=function(N,R){return E(N,{locale:R.$L,utc:R.$u,x:R.$x,$offset:R.$offset})};var P=function(){function N(F){this.$L=M(F.locale,null,!0),this.parse(F)}var R=N.prototype;return R.parse=function(F){this.$d=function(B){var k=B.date,z=B.utc;if(k===null)return new Date(NaN);if(C.u(k))return new Date;if(k instanceof Date)return new Date(k);if(typeof k=="string"&&!/Z$/i.test(k)){var O=k.match(g);if(O){var V=O[2]-1||0,U=(O[7]||"0").substring(0,3);return z?new Date(Date.UTC(O[1],V,O[3]||1,O[4]||0,O[5]||0,O[6]||0,U)):new Date(O[1],V,O[3]||1,O[4]||0,O[5]||0,O[6]||0,U)}}return new Date(k)}(F),this.$x=F.x||{},this.init()},R.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},R.$utils=function(){return C},R.isValid=function(){return this.$d.toString()!==m},R.isSame=function(F,B){var k=E(F);return this.startOf(B)<=k&&k<=this.endOf(B)},R.isAfter=function(F,B){return E(F)<this.startOf(B)},R.isBefore=function(F,B){return this.endOf(B)<E(F)},R.$g=function(F,B,k){return C.u(F)?this[B]:this.set(k,F)},R.unix=function(){return Math.floor(this.valueOf()/1e3)},R.valueOf=function(){return this.$d.getTime()},R.startOf=function(F,B){var k=this,z=!!C.u(B)||B,O=C.p(F),V=function(q,ce){var Te=C.w(k.$u?Date.UTC(k.$y,ce,q):new Date(k.$y,ce,q),k);return z?Te:Te.endOf(c)},U=function(q,ce){return C.w(k.toDate()[q].apply(k.toDate("s"),(z?[0,0,0,0]:[23,59,59,999]).slice(ce)),k)},G=this.$W,X=this.$M,ie=this.$D,se="set"+(this.$u?"UTC":"");switch(O){case p:return z?V(1,0):V(31,11);case d:return z?V(1,X):V(0,X+1);case u:var de=this.$locale().weekStart||0,K=(G<de?G+7:G)-de;return V(z?ie-K:ie+(6-K),X);case c:case f:return U(se+"Hours",0);case l:return U(se+"Minutes",1);case a:return U(se+"Seconds",2);case o:return U(se+"Milliseconds",3);default:return this.clone()}},R.endOf=function(F){return this.startOf(F,!1)},R.$set=function(F,B){var k,z=C.p(F),O="set"+(this.$u?"UTC":""),V=(k={},k[c]=O+"Date",k[f]=O+"Date",k[d]=O+"Month",k[p]=O+"FullYear",k[l]=O+"Hours",k[a]=O+"Minutes",k[o]=O+"Seconds",k[s]=O+"Milliseconds",k)[z],U=z===c?this.$D+(B-this.$W):B;if(z===d||z===p){var G=this.clone().set(f,1);G.$d[V](U),G.init(),this.$d=G.set(f,Math.min(this.$D,G.daysInMonth())).$d}else V&&this.$d[V](U);return this.init(),this},R.set=function(F,B){return this.clone().$set(F,B)},R.get=function(F){return this[C.p(F)]()},R.add=function(F,B){var k,z=this;F=Number(F);var O=C.p(B),V=function(X){var ie=E(z);return C.w(ie.date(ie.date()+Math.round(X*F)),z)};if(O===d)return this.set(d,this.$M+F);if(O===p)return this.set(p,this.$y+F);if(O===c)return V(1);if(O===u)return V(7);var U=(k={},k[a]=i,k[l]=n,k[o]=t,k)[O]||1,G=this.$d.getTime()+F*U;return C.w(G,this)},R.subtract=function(F,B){return this.add(-1*F,B)},R.format=function(F){var B=this,k=this.$locale();if(!this.isValid())return k.invalidDate||m;var z=F||"YYYY-MM-DDTHH:mm:ssZ",O=C.z(this),V=this.$H,U=this.$m,G=this.$M,X=k.weekdays,ie=k.months,se=k.meridiem,de=function(ce,Te,Z,L){return ce&&(ce[Te]||ce(B,z))||Z[Te].slice(0,L)},K=function(ce){return C.s(V%12||12,ce,"0")},q=se||function(ce,Te,Z){var L=ce<12?"AM":"PM";return Z?L.toLowerCase():L};return z.replace(v,function(ce,Te){return Te||function(Z){switch(Z){case"YY":return String(B.$y).slice(-2);case"YYYY":return C.s(B.$y,4,"0");case"M":return G+1;case"MM":return C.s(G+1,2,"0");case"MMM":return de(k.monthsShort,G,ie,3);case"MMMM":return de(ie,G);case"D":return B.$D;case"DD":return C.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return de(k.weekdaysMin,B.$W,X,2);case"ddd":return de(k.weekdaysShort,B.$W,X,3);case"dddd":return X[B.$W];case"H":return String(V);case"HH":return C.s(V,2,"0");case"h":return K(1);case"hh":return K(2);case"a":return q(V,U,!0);case"A":return q(V,U,!1);case"m":return String(U);case"mm":return C.s(U,2,"0");case"s":return String(B.$s);case"ss":return C.s(B.$s,2,"0");case"SSS":return C.s(B.$ms,3,"0");case"Z":return O}return null}(ce)||O.replace(":","")})},R.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},R.diff=function(F,B,k){var z,O=this,V=C.p(B),U=E(F),G=(U.utcOffset()-this.utcOffset())*i,X=this-U,ie=function(){return C.m(O,U)};switch(V){case p:z=ie()/12;break;case d:z=ie();break;case h:z=ie()/3;break;case u:z=(X-G)/6048e5;break;case c:z=(X-G)/864e5;break;case l:z=X/n;break;case a:z=X/i;break;case o:z=X/t;break;default:z=X}return k?z:C.a(z)},R.daysInMonth=function(){return this.endOf(d).$D},R.$locale=function(){return S[this.$L]},R.locale=function(F,B){if(!F)return this.$L;var k=this.clone(),z=M(F,B,!0);return z&&(k.$L=z),k},R.clone=function(){return C.w(this.$d,this)},R.toDate=function(){return new Date(this.valueOf())},R.toJSON=function(){return this.isValid()?this.toISOString():null},R.toISOString=function(){return this.$d.toISOString()},R.toString=function(){return this.$d.toUTCString()},N}(),A=P.prototype;return E.prototype=A,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",c],["$M",d],["$y",p],["$D",f]].forEach(function(N){A[N[1]]=function(R){return this.$g(R,N[0],N[1])}}),E.extend=function(N,R){return N.$i||(N(R,P,E),N.$i=!0),E},E.locale=M,E.isDayjs=T,E.unix=function(N){return E(1e3*N)},E.en=S[_],E.Ls=S,E.p={},E})})(yB);var eve=yB.exports;const Ft=Tl(eve);var bB={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(cc,function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},i=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,s=/\d\d?/,o=/\d*[^-_:/,()\s\d]+/,a={},l=function(m){return(m=+m)+(m>68?1900:2e3)},c=function(m){return function(g){this[m]=+g}},u=[/[+-]\d\d:?(\d\d)?|Z/,function(m){(this.zone||(this.zone={})).offset=function(g){if(!g||g==="Z")return 0;var v=g.match(/([+-]|\d\d)/g),x=60*v[1]+(+v[2]||0);return x===0?0:v[0]==="+"?-x:x}(m)}],d=function(m){var g=a[m];return g&&(g.indexOf?g:g.s.concat(g.f))},h=function(m,g){var v,x=a.meridiem;if(x){for(var b=1;b<=24;b+=1)if(m.indexOf(x(b,0,g))>-1){v=b>12;break}}else v=m===(g?"pm":"PM");return v},p={A:[o,function(m){this.afternoon=h(m,!1)}],a:[o,function(m){this.afternoon=h(m,!0)}],S:[/\d/,function(m){this.milliseconds=100*+m}],SS:[n,function(m){this.milliseconds=10*+m}],SSS:[/\d{3}/,function(m){this.milliseconds=+m}],s:[s,c("seconds")],ss:[s,c("seconds")],m:[s,c("minutes")],mm:[s,c("minutes")],H:[s,c("hours")],h:[s,c("hours")],HH:[s,c("hours")],hh:[s,c("hours")],D:[s,c("day")],DD:[n,c("day")],Do:[o,function(m){var g=a.ordinal,v=m.match(/\d+/);if(this.day=v[0],g)for(var x=1;x<=31;x+=1)g(x).replace(/\[|\]/g,"")===m&&(this.day=x)}],M:[s,c("month")],MM:[n,c("month")],MMM:[o,function(m){var g=d("months"),v=(d("monthsShort")||g.map(function(x){return x.slice(0,3)})).indexOf(m)+1;if(v<1)throw new Error;this.month=v%12||v}],MMMM:[o,function(m){var g=d("months").indexOf(m)+1;if(g<1)throw new Error;this.month=g%12||g}],Y:[/[+-]?\d+/,c("year")],YY:[n,function(m){this.year=l(m)}],YYYY:[/\d{4}/,c("year")],Z:u,ZZ:u};function f(m){var g,v;g=m,v=a&&a.formats;for(var x=(m=g.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,function(E,C,P){var A=P&&P.toUpperCase();return C||v[P]||t[P]||v[A].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(N,R,F){return R||F.slice(1)})})).match(i),b=x.length,w=0;w<b;w+=1){var _=x[w],S=p[_],T=S&&S[0],M=S&&S[1];x[w]=M?{regex:T,parser:M}:_.replace(/^\[|\]$/g,"")}return function(E){for(var C={},P=0,A=0;P<b;P+=1){var N=x[P];if(typeof N=="string")A+=N.length;else{var R=N.regex,F=N.parser,B=E.slice(A),k=R.exec(B)[0];F.call(C,k),E=E.replace(k,"")}}return function(z){var O=z.afternoon;if(O!==void 0){var V=z.hours;O?V<12&&(z.hours+=12):V===12&&(z.hours=0),delete z.afternoon}}(C),C}}return function(m,g,v){v.p.customParseFormat=!0,m&&m.parseTwoDigitYear&&(l=m.parseTwoDigitYear);var x=g.prototype,b=x.parse;x.parse=function(w){var _=w.date,S=w.utc,T=w.args;this.$u=S;var M=T[1];if(typeof M=="string"){var E=T[2]===!0,C=T[3]===!0,P=E||C,A=T[2];C&&(A=T[2]),a=this.$locale(),!E&&A&&(a=v.Ls[A]),this.$d=function(B,k,z){try{if(["x","X"].indexOf(k)>-1)return new Date((k==="X"?1e3:1)*B);var O=f(k)(B),V=O.year,U=O.month,G=O.day,X=O.hours,ie=O.minutes,se=O.seconds,de=O.milliseconds,K=O.zone,q=new Date,ce=G||(V||U?1:q.getDate()),Te=V||q.getFullYear(),Z=0;V&&!U||(Z=U>0?U-1:q.getMonth());var L=X||0,$=ie||0,re=se||0,te=de||0;return K?new Date(Date.UTC(Te,Z,ce,L,$,re,te+60*K.offset*1e3)):z?new Date(Date.UTC(Te,Z,ce,L,$,re,te)):new Date(Te,Z,ce,L,$,re,te)}catch{return new Date("")}}(_,M,S),this.init(),A&&A!==!0&&(this.$L=this.locale(A).$L),P&&_!=this.format(M)&&(this.$d=new Date("")),a={}}else if(M instanceof Array)for(var N=M.length,R=1;R<=N;R+=1){T[1]=M[R-1];var F=v.apply(this,T);if(F.isValid()){this.$d=F.$d,this.$L=F.$L,this.init();break}R===N&&(this.$d=new Date(""))}else b.call(this,w)}}})})(bB);var tve=bB.exports;const BE=Tl(tve),xB=["hours","minutes","seconds"],zE="HH:mm:ss",Af="YYYY-MM-DD",rve={date:Af,dates:Af,week:"gggg[w]ww",year:"YYYY",month:"YYYY-MM",datetime:`${Af} ${zE}`,monthrange:"YYYY-MM",daterange:Af,datetimerange:`${Af} ${zE}`},VE=(r,e)=>[r>0?r-1:void 0,r,r<e?r+1:void 0],wu=r=>Array.from(Array.from({length:r}).keys()),wB=r=>r.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim(),_B=r=>r.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?Y{2,4}/g,"").trim(),SB=function(r,e){const t=Md(r),i=Md(e);return t&&i?r.getTime()===e.getTime():!t&&!i?r===e:!1},TB=function(r,e){const t=lt(r),i=lt(e);return t&&i?r.length!==e.length?!1:r.every((n,s)=>SB(n,e[s])):!t&&!i?SB(r,e):!1},MB=function(r,e,t){const i=Jo(e)||e==="x"?Ft(r).locale(t):Ft(r,e).locale(t);return i.isValid()?i:void 0},EB=function(r,e,t){return Jo(e)?r:e==="x"?+r:Ft(r).locale(t).format(e)},GE=(r,e)=>{var t;const i=[],n=e==null?void 0:e();for(let s=0;s<r;s++)i.push((t=n==null?void 0:n.includes(s))!=null?t:!1);return i},CB=et({disabledHours:{type:Oe(Function)},disabledMinutes:{type:Oe(Function)},disabledSeconds:{type:Oe(Function)}}),AB=et({visible:Boolean,actualVisible:{type:Boolean,default:void 0},format:{type:String,default:""}}),jE=et({id:{type:Oe([Array,String])},name:{type:Oe([Array,String]),default:""},popperClass:{type:String,default:""},format:String,valueFormat:String,type:{type:String,default:""},clearable:{type:Boolean,default:!0},clearIcon:{type:Oe([String,Object]),default:uu},editable:{type:Boolean,default:!0},prefixIcon:{type:Oe([String,Object]),default:""},size:jn,readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:""},popperOptions:{type:Oe(Object),default:()=>({})},modelValue:{type:Oe([Date,Array,String,Number]),default:""},rangeSeparator:{type:String,default:"-"},startPlaceholder:String,endPlaceholder:String,defaultValue:{type:Oe([Date,Array])},defaultTime:{type:Oe([Date,Array])},isRange:{type:Boolean,default:!1},...CB,disabledDate:{type:Function},cellClassName:{type:Function},shortcuts:{type:Array,default:()=>[]},arrowControl:{type:Boolean,default:!1},label:{type:String,default:void 0},tabindex:{type:Oe([String,Number]),default:0},validateEvent:{type:Boolean,default:!0},unlinkPanels:Boolean}),ive=["id","name","placeholder","value","disabled","readonly"],nve=["id","name","placeholder","value","disabled","readonly"],sve=xe({name:"Picker"}),ove=xe({...sve,props:jE,emits:["update:modelValue","change","focus","blur","calendar-change","panel-change","visible-change","keydown"],setup(r,{expose:e,emit:t}){const i=r,n=kd(),{lang:s}=pr(),o=Ge("date"),a=Ge("input"),l=Ge("range"),{form:c,formItem:u}=Ns(),d=ut("ElPopperOptions",{}),h=W(),p=W(),f=W(!1),m=W(!1),g=W(null);let v=!1,x=!1;const b=I(()=>[o.b("editor"),o.bm("editor",i.type),a.e("wrapper"),o.is("disabled",G.value),o.is("active",f.value),l.b("editor"),ge?l.bm("editor",ge.value):"",n.class]),w=I(()=>[a.e("icon"),l.e("close-icon"),ce.value?"":l.e("close-icon--hidden")]);Ve(f,ae=>{ae?ht(()=>{ae&&(g.value=i.modelValue)}):(pe.value=null,ht(()=>{_(i.modelValue)}))});const _=(ae,De)=>{(De||!TB(ae,g.value))&&(t("change",ae),i.validateEvent&&(u==null||u.validate("change").catch(We=>{})))},S=ae=>{if(!TB(i.modelValue,ae)){let De;lt(ae)?De=ae.map(We=>EB(We,i.valueFormat,s.value)):ae&&(De=EB(ae,i.valueFormat,s.value)),t("update:modelValue",ae&&De,s.value)}},T=ae=>{t("keydown",ae)},M=I(()=>{if(p.value){const ae=le.value?p.value:p.value.$el;return Array.from(ae.querySelectorAll("input"))}return[]}),E=(ae,De,We)=>{const je=M.value;je.length&&(!We||We==="min"?(je[0].setSelectionRange(ae,De),je[0].focus()):We==="max"&&(je[1].setSelectionRange(ae,De),je[1].focus()))},C=()=>{z(!0,!0),ht(()=>{x=!1})},P=(ae="",De=!1)=>{De||(x=!0),f.value=De;let We;lt(ae)?We=ae.map(je=>je.toDate()):We=ae&&ae.toDate(),pe.value=null,S(We)},A=()=>{m.value=!0},N=()=>{t("visible-change",!0)},R=ae=>{(ae==null?void 0:ae.key)===bt.esc&&z(!0,!0)},F=()=>{m.value=!1,f.value=!1,x=!1,t("visible-change",!1)},B=()=>{f.value=!0},k=()=>{f.value=!1},z=(ae=!0,De=!1)=>{x=De;const[We,je]=y(M);let ye=We;!ae&&le.value&&(ye=je),ye&&ye.focus()},O=ae=>{i.readonly||G.value||f.value||x||(f.value=!0,t("focus",ae))};let V;const U=ae=>{const De=async()=>{setTimeout(()=>{var We;V===De&&(!((We=h.value)!=null&&We.isFocusInsideContent()&&!v)&&M.value.filter(je=>je.contains(document.activeElement)).length===0&&(Se(),f.value=!1,t("blur",ae),i.validateEvent&&(u==null||u.validate("blur").catch(je=>{}))),v=!1)},0)};V=De,De()},G=I(()=>i.disabled||(c==null?void 0:c.disabled)),X=I(()=>{let ae;if(Z.value?ve.value.getDefaultValue&&(ae=ve.value.getDefaultValue()):lt(i.modelValue)?ae=i.modelValue.map(De=>MB(De,i.valueFormat,s.value)):ae=MB(i.modelValue,i.valueFormat,s.value),ve.value.getRangeAvailableTime){const De=ve.value.getRangeAvailableTime(ae);$s(De,ae)||(ae=De,S(lt(ae)?ae.map(We=>We.toDate()):ae.toDate()))}return lt(ae)&&ae.some(De=>!De)&&(ae=[]),ae}),ie=I(()=>{if(!ve.value.panelReady)return"";const ae=Y(X.value);return lt(pe.value)?[pe.value[0]||ae&&ae[0]||"",pe.value[1]||ae&&ae[1]||""]:pe.value!==null?pe.value:!de.value&&Z.value||!f.value&&Z.value?"":ae?K.value?ae.join(", "):ae:""}),se=I(()=>i.type.includes("time")),de=I(()=>i.type.startsWith("time")),K=I(()=>i.type==="dates"),q=I(()=>i.prefixIcon||(se.value?pU:Aoe)),ce=W(!1),Te=ae=>{i.readonly||G.value||ce.value&&(ae.stopPropagation(),C(),S(null),_(null,!0),ce.value=!1,f.value=!1,ve.value.handleClear&&ve.value.handleClear())},Z=I(()=>{const{modelValue:ae}=i;return!ae||lt(ae)&&!ae.filter(Boolean).length}),L=async ae=>{var De;i.readonly||G.value||(((De=ae.target)==null?void 0:De.tagName)!=="INPUT"||M.value.includes(document.activeElement))&&(f.value=!0)},$=()=>{i.readonly||G.value||!Z.value&&i.clearable&&(ce.value=!0)},re=()=>{ce.value=!1},te=ae=>{var De;i.readonly||G.value||(((De=ae.touches[0].target)==null?void 0:De.tagName)!=="INPUT"||M.value.includes(document.activeElement))&&(f.value=!0)},le=I(()=>i.type.includes("range")),ge=Hi(),be=I(()=>{var ae,De;return(De=(ae=y(h))==null?void 0:ae.popperRef)==null?void 0:De.contentRef}),_e=I(()=>{var ae;return y(le)?y(p):(ae=y(p))==null?void 0:ae.$el});yM(_e,ae=>{const De=y(be),We=y(_e);De&&(ae.target===De||ae.composedPath().includes(De))||ae.target===We||ae.composedPath().includes(We)||(f.value=!1)});const pe=W(null),Se=()=>{if(pe.value){const ae=Fe(ie.value);ae&&H(ae)&&(S(lt(ae)?ae.map(De=>De.toDate()):ae.toDate()),pe.value=null)}pe.value===""&&(S(null),_(null),pe.value=null)},Fe=ae=>ae?ve.value.parseUserInput(ae):null,Y=ae=>ae?ve.value.formatToString(ae):null,H=ae=>ve.value.isValidValue(ae),ne=async ae=>{if(i.readonly||G.value)return;const{code:De}=ae;if(T(ae),De===bt.esc){f.value===!0&&(f.value=!1,ae.preventDefault(),ae.stopPropagation());return}if(De===bt.down&&(ve.value.handleFocusPicker&&(ae.preventDefault(),ae.stopPropagation()),f.value===!1&&(f.value=!0,await ht()),ve.value.handleFocusPicker)){ve.value.handleFocusPicker();return}if(De===bt.tab){v=!0;return}if(De===bt.enter||De===bt.numpadEnter){(pe.value===null||pe.value===""||H(Fe(ie.value)))&&(Se(),f.value=!1),ae.stopPropagation();return}if(pe.value){ae.stopPropagation();return}ve.value.handleKeydownInput&&ve.value.handleKeydownInput(ae)},Le=ae=>{pe.value=ae,f.value||(f.value=!0)},Pe=ae=>{const De=ae.target;pe.value?pe.value=[De.value,pe.value[1]]:pe.value=[De.value,null]},Ee=ae=>{const De=ae.target;pe.value?pe.value=[pe.value[0],De.value]:pe.value=[null,De.value]},Ue=()=>{var ae;const De=pe.value,We=Fe(De&&De[0]),je=y(X);if(We&&We.isValid()){pe.value=[Y(We),((ae=ie.value)==null?void 0:ae[1])||null];const ye=[We,je&&(je[1]||null)];H(ye)&&(S(ye),pe.value=null)}},Be=()=>{var ae;const De=y(pe),We=Fe(De&&De[1]),je=y(X);if(We&&We.isValid()){pe.value=[((ae=y(ie))==null?void 0:ae[0])||null,Y(We)];const ye=[je&&je[0],We];H(ye)&&(S(ye),pe.value=null)}},ve=W({}),Q=ae=>{ve.value[ae[0]]=ae[1],ve.value.panelReady=!0},he=ae=>{t("calendar-change",ae)},we=(ae,De,We)=>{t("panel-change",ae,De,We)};return Yt("EP_PICKER_BASE",{props:i}),e({focus:z,handleFocusInput:O,handleBlurInput:U,handleOpen:B,handleClose:k,onPick:P}),(ae,De)=>(D(),Ae(y(Rs),qt({ref_key:"refPopper",ref:h,visible:f.value,effect:"light",pure:"",trigger:"click"},ae.$attrs,{role:"dialog",teleported:"",transition:`${y(o).namespace.value}-zoom-in-top`,"popper-class":[`${y(o).namespace.value}-picker__popper`,ae.popperClass],"popper-options":y(d),"fallback-placements":["bottom","top","right","left"],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"hide-after":0,persistent:"",onBeforeShow:A,onShow:N,onHide:F}),{default:me(()=>[y(le)?(D(),ee("div",{key:1,ref_key:"inputRef",ref:p,class:j(y(b)),style:pt(ae.$attrs.style),onClick:O,onMouseenter:$,onMouseleave:re,onTouchstart:te,onKeydown:ne},[y(q)?(D(),Ae(y(dt),{key:0,class:j([y(a).e("icon"),y(l).e("icon")]),onMousedown:Mt(L,["prevent"]),onTouchstart:te},{default:me(()=>[(D(),Ae(Xt(y(q))))]),_:1},8,["class","onMousedown"])):Re("v-if",!0),J("input",{id:ae.id&&ae.id[0],autocomplete:"off",name:ae.name&&ae.name[0],placeholder:ae.startPlaceholder,value:y(ie)&&y(ie)[0],disabled:y(G),readonly:!ae.editable||ae.readonly,class:j(y(l).b("input")),onMousedown:L,onInput:Pe,onChange:Ue,onFocus:O,onBlur:U},null,42,ive),ze(ae.$slots,"range-separator",{},()=>[J("span",{class:j(y(l).b("separator"))},$e(ae.rangeSeparator),3)]),J("input",{id:ae.id&&ae.id[1],autocomplete:"off",name:ae.name&&ae.name[1],placeholder:ae.endPlaceholder,value:y(ie)&&y(ie)[1],disabled:y(G),readonly:!ae.editable||ae.readonly,class:j(y(l).b("input")),onMousedown:L,onFocus:O,onBlur:U,onInput:Ee,onChange:Be},null,42,nve),ae.clearIcon?(D(),Ae(y(dt),{key:1,class:j(y(w)),onClick:Te},{default:me(()=>[(D(),Ae(Xt(ae.clearIcon)))]),_:1},8,["class"])):Re("v-if",!0)],38)):(D(),Ae(y(us),{key:0,id:ae.id,ref_key:"inputRef",ref:p,"container-role":"combobox","model-value":y(ie),name:ae.name,size:y(ge),disabled:y(G),placeholder:ae.placeholder,class:j([y(o).b("editor"),y(o).bm("editor",ae.type),ae.$attrs.class]),style:pt(ae.$attrs.style),readonly:!ae.editable||ae.readonly||y(K)||ae.type==="week",label:ae.label,tabindex:ae.tabindex,"validate-event":!1,onInput:Le,onFocus:O,onBlur:U,onKeydown:ne,onChange:Se,onMousedown:L,onMouseenter:$,onMouseleave:re,onTouchstart:te,onClick:De[0]||(De[0]=Mt(()=>{},["stop"]))},{prefix:me(()=>[y(q)?(D(),Ae(y(dt),{key:0,class:j(y(a).e("icon")),onMousedown:Mt(L,["prevent"]),onTouchstart:te},{default:me(()=>[(D(),Ae(Xt(y(q))))]),_:1},8,["class","onMousedown"])):Re("v-if",!0)]),suffix:me(()=>[ce.value&&ae.clearIcon?(D(),Ae(y(dt),{key:0,class:j(`${y(a).e("icon")} clear-icon`),onClick:Mt(Te,["stop"])},{default:me(()=>[(D(),Ae(Xt(ae.clearIcon)))]),_:1},8,["class","onClick"])):Re("v-if",!0)]),_:1},8,["id","model-value","name","size","disabled","placeholder","class","style","readonly","label","tabindex","onKeydown"]))]),content:me(()=>[ze(ae.$slots,"default",{visible:f.value,actualVisible:m.value,parsedValue:y(X),format:ae.format,unlinkPanels:ae.unlinkPanels,type:ae.type,defaultValue:ae.defaultValue,onPick:P,onSelectRange:E,onSetPickerOption:Q,onCalendarChange:he,onPanelChange:we,onKeydown:R,onMousedown:De[1]||(De[1]=Mt(()=>{},["stop"]))})]),_:3},16,["visible","transition","popper-class","popper-options"]))}});var NB=Qe(ove,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/common/picker.vue"]]);const ave=et({...AB,datetimeRole:String,parsedValue:{type:Oe(Object)}}),RB=({getAvailableHours:r,getAvailableMinutes:e,getAvailableSeconds:t})=>{const i=(s,o,a,l)=>{const c={hour:r,minute:e,second:t};let u=s;return["hour","minute","second"].forEach(d=>{if(c[d]){let h;const p=c[d];switch(d){case"minute":{h=p(u.hour(),o,l);break}case"second":{h=p(u.hour(),u.minute(),o,l);break}default:{h=p(o,l);break}}if(h!=null&&h.length&&!h.includes(u[d]())){const f=a?0:h.length-1;u=u[d](h[f])}}}),u},n={};return{timePickerOptions:n,getAvailableTime:i,onSetOption:([s,o])=>{n[s]=o}}},HE=r=>{const e=(i,n)=>i||n,t=i=>i!==!0;return r.map(e).filter(t)},kB=(r,e,t)=>({getHoursList:(i,n)=>GE(24,r&&(()=>r==null?void 0:r(i,n))),getMinutesList:(i,n,s)=>GE(60,e&&(()=>e==null?void 0:e(i,n,s))),getSecondsList:(i,n,s,o)=>GE(60,t&&(()=>t==null?void 0:t(i,n,s,o)))}),LB=(r,e,t)=>{const{getHoursList:i,getMinutesList:n,getSecondsList:s}=kB(r,e,t);return{getAvailableHours:(o,a)=>HE(i(o,a)),getAvailableMinutes:(o,a,l)=>HE(n(o,a,l)),getAvailableSeconds:(o,a,l,c)=>HE(s(o,a,l,c))}},OB=r=>{const e=W(r.parsedValue);return Ve(()=>r.visible,t=>{t||(e.value=r.parsedValue)}),e},_u=new Map;let PB;ar&&(document.addEventListener("mousedown",r=>PB=r),document.addEventListener("mouseup",r=>{for(const e of _u.values())for(const{documentHandler:t}of e)t(r,PB)}));function IB(r,e){let t=[];return Array.isArray(e.arg)?t=e.arg:Qo(e.arg)&&t.push(e.arg),function(i,n){const s=e.instance.popperRef,o=i.target,a=n==null?void 0:n.target,l=!e||!e.instance,c=!o||!a,u=r.contains(o)||r.contains(a),d=r===o,h=t.length&&t.some(f=>f==null?void 0:f.contains(o))||t.length&&t.includes(a),p=s&&(s.contains(o)||s.contains(a));l||c||u||d||h||p||e.value(i,n)}}const Su={beforeMount(r,e){_u.has(r)||_u.set(r,[]),_u.get(r).push({documentHandler:IB(r,e),bindingFn:e.value})},updated(r,e){_u.has(r)||_u.set(r,[]);const t=_u.get(r),i=t.findIndex(s=>s.bindingFn===e.oldValue),n={documentHandler:IB(r,e),bindingFn:e.value};i>=0?t.splice(i,1,n):t.push(n)},unmounted(r){_u.delete(r)}},lve=100,cve=600,Fx={beforeMount(r,e){const t=e.value,{interval:i=lve,delay:n=cve}=Nt(t)?{}:t;let s,o;const a=()=>Nt(t)?t():t.handler(),l=()=>{o&&(clearTimeout(o),o=void 0),s&&(clearInterval(s),s=void 0)};r.addEventListener("mousedown",c=>{c.button===0&&(l(),a(),document.addEventListener("mouseup",()=>l(),{once:!0}),o=setTimeout(()=>{s=setInterval(()=>{a()},i)},n))})}},WE="_trap-focus-children",Zd=[],DB=r=>{if(Zd.length===0)return;const e=Zd[Zd.length-1][WE];if(e.length>0&&r.code===bt.tab){if(e.length===1){r.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const t=r.shiftKey,i=r.target===e[0],n=r.target===e[e.length-1];i&&t&&(r.preventDefault(),e[e.length-1].focus()),n&&!t&&(r.preventDefault(),e[0].focus())}},uve={beforeMount(r){r[WE]=CD(r),Zd.push(r),Zd.length<=1&&document.addEventListener("keydown",DB)},updated(r){ht(()=>{r[WE]=CD(r)})},unmounted(){Zd.shift(),Zd.length===0&&document.removeEventListener("keydown",DB)}};var UB=!1,Jd,$E,XE,Bx,zx,FB,Vx,qE,KE,YE,BB,ZE,JE,zB,VB;function Zs(){if(!UB){UB=!0;var r=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(r),t=/(Mac OS X)|(Windows)|(Linux)/.exec(r);if(ZE=/\b(iPhone|iP[ao]d)/.exec(r),JE=/\b(iP[ao]d)/.exec(r),YE=/Android/i.exec(r),zB=/FBAN\/\w+;/i.exec(r),VB=/Mobile/i.exec(r),BB=!!/Win64/.exec(r),e){Jd=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,Jd&&document&&document.documentMode&&(Jd=document.documentMode);var i=/(?:Trident\/(\d+.\d+))/.exec(r);FB=i?parseFloat(i[1])+4:Jd,$E=e[2]?parseFloat(e[2]):NaN,XE=e[3]?parseFloat(e[3]):NaN,Bx=e[4]?parseFloat(e[4]):NaN,Bx?(e=/(?:Chrome\/(\d+\.\d+))/.exec(r),zx=e&&e[1]?parseFloat(e[1]):NaN):zx=NaN}else Jd=$E=XE=zx=Bx=NaN;if(t){if(t[1]){var n=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(r);Vx=n?parseFloat(n[1].replace("_",".")):!0}else Vx=!1;qE=!!t[2],KE=!!t[3]}else Vx=qE=KE=!1}}var QE={ie:function(){return Zs()||Jd},ieCompatibilityMode:function(){return Zs()||FB>Jd},ie64:function(){return QE.ie()&&BB},firefox:function(){return Zs()||$E},opera:function(){return Zs()||XE},webkit:function(){return Zs()||Bx},safari:function(){return QE.webkit()},chrome:function(){return Zs()||zx},windows:function(){return Zs()||qE},osx:function(){return Zs()||Vx},linux:function(){return Zs()||KE},iphone:function(){return Zs()||ZE},mobile:function(){return Zs()||ZE||JE||YE||VB},nativeApp:function(){return Zs()||zB},android:function(){return Zs()||YE},ipad:function(){return Zs()||JE}},dve=QE,Gx=!!(typeof window<"u"&&window.document&&window.document.createElement),hve={canUseDOM:Gx,canUseWorkers:typeof Worker<"u",canUseEventListeners:Gx&&!!(window.addEventListener||window.attachEvent),canUseViewport:Gx&&!!window.screen,isInWorker:!Gx},GB=hve,jB;GB.canUseDOM&&(jB=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function pve(r,e){if(!GB.canUseDOM||e&&!("addEventListener"in document))return!1;var t="on"+r,i=t in document;if(!i){var n=document.createElement("div");n.setAttribute(t,"return;"),i=typeof n[t]=="function"}return!i&&jB&&r==="wheel"&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var fve=pve,HB=10,WB=40,$B=800;function XB(r){var e=0,t=0,i=0,n=0;return"detail"in r&&(t=r.detail),"wheelDelta"in r&&(t=-r.wheelDelta/120),"wheelDeltaY"in r&&(t=-r.wheelDeltaY/120),"wheelDeltaX"in r&&(e=-r.wheelDeltaX/120),"axis"in r&&r.axis===r.HORIZONTAL_AXIS&&(e=t,t=0),i=e*HB,n=t*HB,"deltaY"in r&&(n=r.deltaY),"deltaX"in r&&(i=r.deltaX),(i||n)&&r.deltaMode&&(r.deltaMode==1?(i*=WB,n*=WB):(i*=$B,n*=$B)),i&&!e&&(e=i<1?-1:1),n&&!t&&(t=n<1?-1:1),{spinX:e,spinY:t,pixelX:i,pixelY:n}}XB.getEventType=function(){return dve.firefox()?"DOMMouseScroll":fve("wheel")?"wheel":"mousewheel"};var mve=XB;const gve=function(r,e){if(r&&r.addEventListener){const t=function(i){const n=mve(i);e&&Reflect.apply(e,this,[i,n])};r.addEventListener("wheel",t,{passive:!0})}},vve={beforeMount(r,e){gve(r,e.value)}},yve=et({role:{type:String,required:!0},spinnerDate:{type:Oe(Object),required:!0},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:Oe(String),default:""},...CB}),bve=["onClick"],xve=["onMouseenter"],wve=xe({__name:"basic-time-spinner",props:yve,emits:["change","select-range","set-option"],setup(r,{emit:e}){const t=r,i=Ge("time"),{getHoursList:n,getMinutesList:s,getSecondsList:o}=kB(t.disabledHours,t.disabledMinutes,t.disabledSeconds);let a=!1;const l=W(),c=W(),u=W(),d=W(),h={hours:c,minutes:u,seconds:d},p=I(()=>t.showSeconds?xB:xB.slice(0,2)),f=I(()=>{const{spinnerDate:O}=t,V=O.hour(),U=O.minute(),G=O.second();return{hours:V,minutes:U,seconds:G}}),m=I(()=>{const{hours:O,minutes:V}=y(f);return{hours:n(t.role),minutes:s(O,t.role),seconds:o(O,V,t.role)}}),g=I(()=>{const{hours:O,minutes:V,seconds:U}=y(f);return{hours:VE(O,23),minutes:VE(V,59),seconds:VE(U,59)}}),v=Es(O=>{a=!1,w(O)},200),x=O=>{if(!t.amPmMode)return"";const V=t.amPmMode==="A";let U=O<12?" am":" pm";return V&&(U=U.toUpperCase()),U},b=O=>{let V;switch(O){case"hours":V=[0,2];break;case"minutes":V=[3,5];break;case"seconds":V=[6,8];break}const[U,G]=V;e("select-range",U,G),l.value=O},w=O=>{T(O,y(f)[O])},_=()=>{w("hours"),w("minutes"),w("seconds")},S=O=>O.querySelector(`.${i.namespace.value}-scrollbar__wrap`),T=(O,V)=>{if(t.arrowControl)return;const U=y(h[O]);U&&U.$el&&(S(U.$el).scrollTop=Math.max(0,V*M(O)))},M=O=>{const V=y(h[O]),U=V==null?void 0:V.$el.querySelector("li");return U&&Number.parseFloat(au(U,"height"))||0},E=()=>{P(1)},C=()=>{P(-1)},P=O=>{l.value||b("hours");const V=l.value,U=y(f)[V],G=l.value==="hours"?24:60,X=A(V,U,O,G);N(V,X),T(V,X),ht(()=>b(V))},A=(O,V,U,G)=>{let X=(V+U+G)%G;const ie=y(m)[O];for(;ie[X]&&X!==V;)X=(X+U+G)%G;return X},N=(O,V)=>{if(y(m)[O][V])return;const{hours:U,minutes:G,seconds:X}=y(f);let ie;switch(O){case"hours":ie=t.spinnerDate.hour(V).minute(G).second(X);break;case"minutes":ie=t.spinnerDate.hour(U).minute(V).second(X);break;case"seconds":ie=t.spinnerDate.hour(U).minute(G).second(V);break}e("change",ie)},R=(O,{value:V,disabled:U})=>{U||(N(O,V),b(O),T(O,V))},F=O=>{a=!0,v(O);const V=Math.min(Math.round((S(y(h[O]).$el).scrollTop-(B(O)*.5-10)/M(O)+3)/M(O)),O==="hours"?23:59);N(O,V)},B=O=>y(h[O]).$el.offsetHeight,k=()=>{const O=V=>{const U=y(h[V]);U&&U.$el&&(S(U.$el).onscroll=()=>{F(V)})};O("hours"),O("minutes"),O("seconds")};Et(()=>{ht(()=>{!t.arrowControl&&k(),_(),t.role==="start"&&b("hours")})});const z=(O,V)=>{h[V].value=O};return e("set-option",[`${t.role}_scrollDown`,P]),e("set-option",[`${t.role}_emitSelectRange`,b]),Ve(()=>t.spinnerDate,()=>{a||_()}),(O,V)=>(D(),ee("div",{class:j([y(i).b("spinner"),{"has-seconds":O.showSeconds}])},[O.arrowControl?Re("v-if",!0):(D(!0),ee(ct,{key:0},Ut(y(p),U=>(D(),Ae(y(ac),{key:U,ref_for:!0,ref:G=>z(G,U),class:j(y(i).be("spinner","wrapper")),"wrap-style":"max-height: inherit;","view-class":y(i).be("spinner","list"),noresize:"",tag:"ul",onMouseenter:G=>b(U),onMousemove:G=>w(U)},{default:me(()=>[(D(!0),ee(ct,null,Ut(y(m)[U],(G,X)=>(D(),ee("li",{key:X,class:j([y(i).be("spinner","item"),y(i).is("active",X===y(f)[U]),y(i).is("disabled",G)]),onClick:ie=>R(U,{value:X,disabled:G})},[U==="hours"?(D(),ee(ct,{key:0},[ir($e(("0"+(O.amPmMode?X%12||12:X)).slice(-2))+$e(x(X)),1)],64)):(D(),ee(ct,{key:1},[ir($e(("0"+X).slice(-2)),1)],64))],10,bve))),128))]),_:2},1032,["class","view-class","onMouseenter","onMousemove"]))),128)),O.arrowControl?(D(!0),ee(ct,{key:1},Ut(y(p),U=>(D(),ee("div",{key:U,class:j([y(i).be("spinner","wrapper"),y(i).is("arrow")]),onMouseenter:G=>b(U)},[It((D(),Ae(y(dt),{class:j(["arrow-up",y(i).be("spinner","arrow")])},{default:me(()=>[ue(y(cx))]),_:1},8,["class"])),[[y(Fx),C]]),It((D(),Ae(y(dt),{class:j(["arrow-down",y(i).be("spinner","arrow")])},{default:me(()=>[ue(y(lu))]),_:1},8,["class"])),[[y(Fx),E]]),J("ul",{class:j(y(i).be("spinner","list"))},[(D(!0),ee(ct,null,Ut(y(g)[U],(G,X)=>(D(),ee("li",{key:X,class:j([y(i).be("spinner","item"),y(i).is("active",G===y(f)[U]),y(i).is("disabled",y(m)[U][G])])},[typeof G=="number"?(D(),ee(ct,{key:0},[U==="hours"?(D(),ee(ct,{key:0},[ir($e(("0"+(O.amPmMode?G%12||12:G)).slice(-2))+$e(x(G)),1)],64)):(D(),ee(ct,{key:1},[ir($e(("0"+G).slice(-2)),1)],64))],64)):Re("v-if",!0)],2))),128))],2)],42,xve))),128)):Re("v-if",!0)],2))}});var eC=Qe(wve,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/basic-time-spinner.vue"]]);const _ve=xe({__name:"panel-time-pick",props:ave,emits:["pick","select-range","set-picker-option"],setup(r,{emit:e}){const t=r,i=ut("EP_PICKER_BASE"),{arrowControl:n,disabledHours:s,disabledMinutes:o,disabledSeconds:a,defaultValue:l}=i.props,{getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}=LB(s,o,a),h=Ge("time"),{t:p,lang:f}=pr(),m=W([0,2]),g=OB(t),v=I(()=>rn(t.actualVisible)?`${h.namespace.value}-zoom-in-top`:""),x=I(()=>t.format.includes("ss")),b=I(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),w=z=>{const O=Ft(z).locale(f.value),V=R(O);return O.isSame(V)},_=()=>{e("pick",g.value,!1)},S=(z=!1,O=!1)=>{O||e("pick",t.parsedValue,z)},T=z=>{if(!t.visible)return;const O=R(z).millisecond(0);e("pick",O,!0)},M=(z,O)=>{e("select-range",z,O),m.value=[z,O]},E=z=>{const O=[0,3].concat(x.value?[6]:[]),V=["hours","minutes"].concat(x.value?["seconds"]:[]),U=(O.indexOf(m.value[0])+z+O.length)%O.length;P.start_emitSelectRange(V[U])},C=z=>{const O=z.code,{left:V,right:U,up:G,down:X}=bt;if([V,U].includes(O)){E(O===V?-1:1),z.preventDefault();return}if([G,X].includes(O)){const ie=O===G?-1:1;P.start_scrollDown(ie),z.preventDefault();return}},{timePickerOptions:P,onSetOption:A,getAvailableTime:N}=RB({getAvailableHours:c,getAvailableMinutes:u,getAvailableSeconds:d}),R=z=>N(z,t.datetimeRole||"",!0),F=z=>z?Ft(z,t.format).locale(f.value):null,B=z=>z?z.format(t.format):null,k=()=>Ft(l).locale(f.value);return e("set-picker-option",["isValidValue",w]),e("set-picker-option",["formatToString",B]),e("set-picker-option",["parseUserInput",F]),e("set-picker-option",["handleKeydownInput",C]),e("set-picker-option",["getRangeAvailableTime",R]),e("set-picker-option",["getDefaultValue",k]),(z,O)=>(D(),Ae(Li,{name:y(v)},{default:me(()=>[z.actualVisible||z.visible?(D(),ee("div",{key:0,class:j(y(h).b("panel"))},[J("div",{class:j([y(h).be("panel","content"),{"has-seconds":y(x)}])},[ue(eC,{ref:"spinner",role:z.datetimeRole||"start","arrow-control":y(n),"show-seconds":y(x),"am-pm-mode":y(b),"spinner-date":z.parsedValue,"disabled-hours":y(s),"disabled-minutes":y(o),"disabled-seconds":y(a),onChange:T,onSetOption:y(A),onSelectRange:M},null,8,["role","arrow-control","show-seconds","am-pm-mode","spinner-date","disabled-hours","disabled-minutes","disabled-seconds","onSetOption"])],2),J("div",{class:j(y(h).be("panel","footer"))},[J("button",{type:"button",class:j([y(h).be("panel","btn"),"cancel"]),onClick:_},$e(y(p)("el.datepicker.cancel")),3),J("button",{type:"button",class:j([y(h).be("panel","btn"),"confirm"]),onClick:O[0]||(O[0]=V=>S())},$e(y(p)("el.datepicker.confirm")),3)],2)],2)):Re("v-if",!0)]),_:1},8,["name"]))}});var jx=Qe(_ve,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-pick.vue"]]);const Sve=et({...AB,parsedValue:{type:Oe(Array)}}),Tve=["disabled"],Mve=xe({__name:"panel-time-range",props:Sve,emits:["pick","select-range","set-picker-option"],setup(r,{emit:e}){const t=r,i=(Z,L)=>{const $=[];for(let re=Z;re<=L;re++)$.push(re);return $},{t:n,lang:s}=pr(),o=Ge("time"),a=Ge("picker"),l=ut("EP_PICKER_BASE"),{arrowControl:c,disabledHours:u,disabledMinutes:d,disabledSeconds:h,defaultValue:p}=l.props,f=I(()=>[o.be("range-picker","body"),o.be("panel","content"),o.is("arrow",c),w.value?"has-seconds":""]),m=I(()=>[o.be("range-picker","body"),o.be("panel","content"),o.is("arrow",c),w.value?"has-seconds":""]),g=I(()=>t.parsedValue[0]),v=I(()=>t.parsedValue[1]),x=OB(t),b=()=>{e("pick",x.value,!1)},w=I(()=>t.format.includes("ss")),_=I(()=>t.format.includes("A")?"A":t.format.includes("a")?"a":""),S=(Z=!1)=>{e("pick",[g.value,v.value],Z)},T=Z=>{C(Z.millisecond(0),v.value)},M=Z=>{C(g.value,Z.millisecond(0))},E=Z=>{const L=Z.map(re=>Ft(re).locale(s.value)),$=U(L);return L[0].isSame($[0])&&L[1].isSame($[1])},C=(Z,L)=>{e("pick",[Z,L],!0)},P=I(()=>g.value>v.value),A=W([0,2]),N=(Z,L)=>{e("select-range",Z,L,"min"),A.value=[Z,L]},R=I(()=>w.value?11:8),F=(Z,L)=>{e("select-range",Z,L,"max");const $=y(R);A.value=[Z+$,L+$]},B=Z=>{const L=w.value?[0,3,6,11,14,17]:[0,3,8,11],$=["hours","minutes"].concat(w.value?["seconds"]:[]),re=(L.indexOf(A.value[0])+Z+L.length)%L.length,te=L.length/2;re<te?se.start_emitSelectRange($[re]):se.end_emitSelectRange($[re-te])},k=Z=>{const L=Z.code,{left:$,right:re,up:te,down:le}=bt;if([$,re].includes(L)){B(L===$?-1:1),Z.preventDefault();return}if([te,le].includes(L)){const ge=L===te?-1:1,be=A.value[0]<R.value?"start":"end";se[`${be}_scrollDown`](ge),Z.preventDefault();return}},z=(Z,L)=>{const $=u?u(Z):[],re=Z==="start",te=(L||(re?v.value:g.value)).hour(),le=re?i(te+1,23):i(0,te-1);return $M($,le)},O=(Z,L,$)=>{const re=d?d(Z,L):[],te=L==="start",le=$||(te?v.value:g.value),ge=le.hour();if(Z!==ge)return re;const be=le.minute(),_e=te?i(be+1,59):i(0,be-1);return $M(re,_e)},V=(Z,L,$,re)=>{const te=h?h(Z,L,$):[],le=$==="start",ge=re||(le?v.value:g.value),be=ge.hour(),_e=ge.minute();if(Z!==be||L!==_e)return te;const pe=ge.second(),Se=le?i(pe+1,59):i(0,pe-1);return $M(te,Se)},U=([Z,L])=>[de(Z,"start",!0,L),de(L,"end",!1,Z)],{getAvailableHours:G,getAvailableMinutes:X,getAvailableSeconds:ie}=LB(z,O,V),{timePickerOptions:se,getAvailableTime:de,onSetOption:K}=RB({getAvailableHours:G,getAvailableMinutes:X,getAvailableSeconds:ie}),q=Z=>Z?lt(Z)?Z.map(L=>Ft(L,t.format).locale(s.value)):Ft(Z,t.format).locale(s.value):null,ce=Z=>Z?lt(Z)?Z.map(L=>L.format(t.format)):Z.format(t.format):null,Te=()=>{if(lt(p))return p.map(L=>Ft(L).locale(s.value));const Z=Ft(p).locale(s.value);return[Z,Z.add(60,"m")]};return e("set-picker-option",["formatToString",ce]),e("set-picker-option",["parseUserInput",q]),e("set-picker-option",["isValidValue",E]),e("set-picker-option",["handleKeydownInput",k]),e("set-picker-option",["getDefaultValue",Te]),e("set-picker-option",["getRangeAvailableTime",U]),(Z,L)=>Z.actualVisible?(D(),ee("div",{key:0,class:j([y(o).b("range-picker"),y(a).b("panel")])},[J("div",{class:j(y(o).be("range-picker","content"))},[J("div",{class:j(y(o).be("range-picker","cell"))},[J("div",{class:j(y(o).be("range-picker","header"))},$e(y(n)("el.datepicker.startTime")),3),J("div",{class:j(y(f))},[ue(eC,{ref:"minSpinner",role:"start","show-seconds":y(w),"am-pm-mode":y(_),"arrow-control":y(c),"spinner-date":y(g),"disabled-hours":z,"disabled-minutes":O,"disabled-seconds":V,onChange:T,onSetOption:y(K),onSelectRange:N},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2),J("div",{class:j(y(o).be("range-picker","cell"))},[J("div",{class:j(y(o).be("range-picker","header"))},$e(y(n)("el.datepicker.endTime")),3),J("div",{class:j(y(m))},[ue(eC,{ref:"maxSpinner",role:"end","show-seconds":y(w),"am-pm-mode":y(_),"arrow-control":y(c),"spinner-date":y(v),"disabled-hours":z,"disabled-minutes":O,"disabled-seconds":V,onChange:M,onSetOption:y(K),onSelectRange:F},null,8,["show-seconds","am-pm-mode","arrow-control","spinner-date","onSetOption"])],2)],2)],2),J("div",{class:j(y(o).be("panel","footer"))},[J("button",{type:"button",class:j([y(o).be("panel","btn"),"cancel"]),onClick:L[0]||(L[0]=$=>b())},$e(y(n)("el.datepicker.cancel")),3),J("button",{type:"button",class:j([y(o).be("panel","btn"),"confirm"]),disabled:y(P),onClick:L[1]||(L[1]=$=>S())},$e(y(n)("el.datepicker.confirm")),11,Tve)],2)],2)):Re("v-if",!0)}});var Eve=Qe(Mve,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-picker/src/time-picker-com/panel-time-range.vue"]]);Ft.extend(BE);var Cve=xe({name:"ElTimePicker",install:null,props:{...jE,isRange:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r,e){const t=W(),[i,n]=r.isRange?["timerange",Eve]:["time",jx],s=o=>e.emit("update:modelValue",o);return Yt("ElPopperOptions",r.popperOptions),e.expose({focus:o=>{var a;(a=t.value)==null||a.handleFocusInput(o)},blur:o=>{var a;(a=t.value)==null||a.handleBlurInput(o)},handleOpen:()=>{var o;(o=t.value)==null||o.handleOpen()},handleClose:()=>{var o;(o=t.value)==null||o.handleClose()}}),()=>{var o;const a=(o=r.format)!=null?o:zE;return ue(NB,qt(r,{ref:t,type:i,format:a,"onUpdate:modelValue":s}),{default:l=>ue(n,l,null)})}}});const Hx=Cve;Hx.install=r=>{r.component(Hx.name,Hx)};const Ave=Hx,Nve=(r,e)=>{const t=r.subtract(1,"month").endOf("month").date();return wu(e).map((i,n)=>t-(e-n-1))},Rve=r=>{const e=r.daysInMonth();return wu(e).map((t,i)=>i+1)},kve=r=>wu(r.length/7).map(e=>{const t=e*7;return r.slice(t,t+7)}),Lve=et({selectedDay:{type:Oe(Object)},range:{type:Oe(Array)},date:{type:Oe(Object),required:!0},hideHeader:{type:Boolean}}),Ove={pick:r=>Ht(r)};var qB={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(cc,function(){return function(t,i,n){var s=i.prototype,o=function(d){return d&&(d.indexOf?d:d.s)},a=function(d,h,p,f,m){var g=d.name?d:d.$locale(),v=o(g[h]),x=o(g[p]),b=v||x.map(function(_){return _.slice(0,f)});if(!m)return b;var w=g.weekStart;return b.map(function(_,S){return b[(S+(w||0))%7]})},l=function(){return n.Ls[n.locale()]},c=function(d,h){return d.formats[h]||function(p){return p.replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,function(f,m,g){return m||g.slice(1)})}(d.formats[h.toUpperCase()])},u=function(){var d=this;return{months:function(h){return h?h.format("MMMM"):a(d,"months")},monthsShort:function(h){return h?h.format("MMM"):a(d,"monthsShort","months",3)},firstDayOfWeek:function(){return d.$locale().weekStart||0},weekdays:function(h){return h?h.format("dddd"):a(d,"weekdays")},weekdaysMin:function(h){return h?h.format("dd"):a(d,"weekdaysMin","weekdays",2)},weekdaysShort:function(h){return h?h.format("ddd"):a(d,"weekdaysShort","weekdays",3)},longDateFormat:function(h){return c(d.$locale(),h)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};s.localeData=function(){return u.bind(this)()},n.localeData=function(){var d=l();return{firstDayOfWeek:function(){return d.weekStart||0},weekdays:function(){return n.weekdays()},weekdaysShort:function(){return n.weekdaysShort()},weekdaysMin:function(){return n.weekdaysMin()},months:function(){return n.months()},monthsShort:function(){return n.monthsShort()},longDateFormat:function(h){return c(d,h)},meridiem:d.meridiem,ordinal:d.ordinal}},n.months=function(){return a(l(),"months")},n.monthsShort=function(){return a(l(),"monthsShort","months",3)},n.weekdays=function(d){return a(l(),"weekdays",null,null,d)},n.weekdaysShort=function(d){return a(l(),"weekdaysShort","weekdays",3,d)},n.weekdaysMin=function(d){return a(l(),"weekdaysMin","weekdays",2,d)}}})})(qB);var Pve=qB.exports;const KB=Tl(Pve),Ive=(r,e)=>{Ft.extend(KB);const t=Ft.localeData().firstDayOfWeek(),{t:i,lang:n}=pr(),s=Ft().locale(n.value),o=I(()=>!!r.range&&!!r.range.length),a=I(()=>{let u=[];if(o.value){const[d,h]=r.range,p=wu(h.date()-d.date()+1).map(g=>({text:d.date()+g,type:"current"}));let f=p.length%7;f=f===0?0:7-f;const m=wu(f).map((g,v)=>({text:v+1,type:"next"}));u=p.concat(m)}else{const d=r.date.startOf("month").day(),h=Nve(r.date,(d-t+7)%7).map(g=>({text:g,type:"prev"})),p=Rve(r.date).map(g=>({text:g,type:"current"}));u=[...h,...p];const f=7-(u.length%7||7),m=wu(f).map((g,v)=>({text:v+1,type:"next"}));u=u.concat(m)}return kve(u)}),l=I(()=>{const u=t;return u===0?QM.map(d=>i(`el.datepicker.weeks.${d}`)):QM.slice(u).concat(QM.slice(0,u)).map(d=>i(`el.datepicker.weeks.${d}`))}),c=(u,d)=>{switch(d){case"prev":return r.date.startOf("month").subtract(1,"month").date(u);case"next":return r.date.startOf("month").add(1,"month").date(u);case"current":return r.date.date(u)}};return{now:s,isInRange:o,rows:a,weekDays:l,getFormattedDate:c,handlePickDay:({text:u,type:d})=>{const h=c(u,d);e("pick",h)},getSlotData:({text:u,type:d})=>{const h=c(u,d);return{isSelected:h.isSame(r.selectedDay),type:`${d}-month`,day:h.format("YYYY-MM-DD"),date:h.toDate()}}}},Dve={key:0},Uve=["onClick"],Fve=xe({name:"DateTable"}),Bve=xe({...Fve,props:Lve,emits:Ove,setup(r,{expose:e,emit:t}){const i=r,{isInRange:n,now:s,rows:o,weekDays:a,getFormattedDate:l,handlePickDay:c,getSlotData:u}=Ive(i,t),d=Ge("calendar-table"),h=Ge("calendar-day"),p=({text:f,type:m})=>{const g=[m];if(m==="current"){const v=l(f,m);v.isSame(i.selectedDay,"day")&&g.push(h.is("selected")),v.isSame(s,"day")&&g.push(h.is("today"))}return g};return e({getFormattedDate:l}),(f,m)=>(D(),ee("table",{class:j([y(d).b(),y(d).is("range",y(n))]),cellspacing:"0",cellpadding:"0"},[f.hideHeader?Re("v-if",!0):(D(),ee("thead",Dve,[(D(!0),ee(ct,null,Ut(y(a),g=>(D(),ee("th",{key:g},$e(g),1))),128))])),J("tbody",null,[(D(!0),ee(ct,null,Ut(y(o),(g,v)=>(D(),ee("tr",{key:v,class:j({[y(d).e("row")]:!0,[y(d).em("row","hide-border")]:v===0&&f.hideHeader})},[(D(!0),ee(ct,null,Ut(g,(x,b)=>(D(),ee("td",{key:b,class:j(p(x)),onClick:w=>y(c)(x)},[J("div",{class:j(y(h).b())},[ze(f.$slots,"date-cell",{data:y(u)(x)},()=>[J("span",null,$e(x.text),1)])],2)],10,Uve))),128))],2))),128))])],2))}});var YB=Qe(Bve,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/date-table.vue"]]);const zve=(r,e)=>{const t=r.endOf("month"),i=e.startOf("month"),n=t.isSame(i,"week")?i.add(1,"week"):i;return[[r,t],[n.startOf("week"),e]]},Vve=(r,e)=>{const t=r.endOf("month"),i=r.add(1,"month").startOf("month"),n=t.isSame(i,"week")?i.add(1,"week"):i,s=n.endOf("month"),o=e.startOf("month"),a=s.isSame(o,"week")?o.add(1,"week"):o;return[[r,t],[n.startOf("week"),s],[a.startOf("week"),e]]},Gve=(r,e,t)=>{const i=Gn(),{lang:n}=pr(),s=W(),o=Ft().locale(n.value),a=I({get(){return r.modelValue?c.value:s.value},set(v){if(!v)return;s.value=v;const x=v.toDate();e(As,x),e(Wt,x)}}),l=I(()=>{if(!r.range)return[];const v=r.range.map(w=>Ft(w).locale(n.value)),[x,b]=v;return x.isAfter(b)?[]:x.isSame(b,"month")?f(x,b):x.add(1,"month").month()!==b.month()?[]:f(x,b)}),c=I(()=>r.modelValue?Ft(r.modelValue).locale(n.value):a.value||(l.value.length?l.value[0][0]:o)),u=I(()=>c.value.subtract(1,"month").date(1)),d=I(()=>c.value.add(1,"month").date(1)),h=I(()=>c.value.subtract(1,"year").date(1)),p=I(()=>c.value.add(1,"year").date(1)),f=(v,x)=>{const b=v.startOf("week"),w=x.endOf("week"),_=b.get("month"),S=w.get("month");return _===S?[[b,w]]:(_+1)%12===S?zve(b,w):_+2===S||(_+1)%11===S?Vve(b,w):[]},m=v=>{a.value=v},g=v=>{const x={"prev-month":u.value,"next-month":d.value,"prev-year":h.value,"next-year":p.value,today:o}[v];x.isSame(c.value,"day")||m(x)};return bl({from:'"dateCell"',replacement:'"date-cell"',scope:"ElCalendar",version:"2.3.0",ref:"https://element-plus.org/en-US/component/calendar.html#slots",type:"Slot"},I(()=>!!i.dateCell)),{calculateValidatedDateRange:f,date:c,realSelectedDay:a,pickDay:m,selectDate:g,validatedRange:l}},jve=r=>lt(r)&&r.length===2&&r.every(e=>Md(e)),Hve=et({modelValue:{type:Date},range:{type:Oe(Array),validator:jve}}),Wve={[Wt]:r=>Md(r),[As]:r=>Md(r)},$ve="ElCalendar",Xve=xe({name:$ve}),qve=xe({...Xve,props:Hve,emits:Wve,setup(r,{expose:e,emit:t}){const i=r,n=Ge("calendar"),{calculateValidatedDateRange:s,date:o,pickDay:a,realSelectedDay:l,selectDate:c,validatedRange:u}=Gve(i,t),{t:d}=pr(),h=I(()=>{const p=`el.datepicker.month${o.value.format("M")}`;return`${o.value.year()} ${d("el.datepicker.year")} ${d(p)}`});return e({selectedDay:l,pickDay:a,selectDate:c,calculateValidatedDateRange:s}),(p,f)=>(D(),ee("div",{class:j(y(n).b())},[J("div",{class:j(y(n).e("header"))},[ze(p.$slots,"header",{date:y(h)},()=>[J("div",{class:j(y(n).e("title"))},$e(y(h)),3),y(u).length===0?(D(),ee("div",{key:0,class:j(y(n).e("button-group"))},[ue(y(vB),null,{default:me(()=>[ue(y(Wn),{size:"small",onClick:f[0]||(f[0]=m=>y(c)("prev-month"))},{default:me(()=>[ir($e(y(d)("el.datepicker.prevMonth")),1)]),_:1}),ue(y(Wn),{size:"small",onClick:f[1]||(f[1]=m=>y(c)("today"))},{default:me(()=>[ir($e(y(d)("el.datepicker.today")),1)]),_:1}),ue(y(Wn),{size:"small",onClick:f[2]||(f[2]=m=>y(c)("next-month"))},{default:me(()=>[ir($e(y(d)("el.datepicker.nextMonth")),1)]),_:1})]),_:1})],2)):Re("v-if",!0)])],2),y(u).length===0?(D(),ee("div",{key:0,class:j(y(n).e("body"))},[ue(YB,{date:y(o),"selected-day":y(l),onPick:y(a)},Zl({_:2},[p.$slots["date-cell"]||p.$slots.dateCell?{name:"date-cell",fn:me(m=>[p.$slots["date-cell"]?ze(p.$slots,"date-cell",Ca(qt({key:0},m))):ze(p.$slots,"dateCell",Ca(qt({key:1},m)))])}:void 0]),1032,["date","selected-day","onPick"])],2)):(D(),ee("div",{key:1,class:j(y(n).e("body"))},[(D(!0),ee(ct,null,Ut(y(u),(m,g)=>(D(),Ae(YB,{key:g,date:m[0],"selected-day":y(l),range:m,"hide-header":g!==0,onPick:y(a)},Zl({_:2},[p.$slots["date-cell"]||p.$slots.dateCell?{name:"date-cell",fn:me(v=>[p.$slots["date-cell"]?ze(p.$slots,"date-cell",Ca(qt({key:0},v))):ze(p.$slots,"dateCell",Ca(qt({key:1},v)))])}:void 0]),1032,["date","selected-day","range","hide-header","onPick"]))),128))],2))],2))}});var Kve=Qe(qve,[["__file","/home/runner/work/element-plus/element-plus/packages/components/calendar/src/calendar.vue"]]);const Yve=zt(Kve),Zve=et({header:{type:String,default:""},bodyStyle:{type:Oe([String,Object,Array]),default:""},bodyClass:String,shadow:{type:String,values:["always","hover","never"],default:"always"}}),Jve=xe({name:"ElCard"}),Qve=xe({...Jve,props:Zve,setup(r){const e=Ge("card");return(t,i)=>(D(),ee("div",{class:j([y(e).b(),y(e).is(`${t.shadow}-shadow`)])},[t.$slots.header||t.header?(D(),ee("div",{key:0,class:j(y(e).e("header"))},[ze(t.$slots,"header",{},()=>[ir($e(t.header),1)])],2)):Re("v-if",!0),J("div",{class:j([y(e).e("body"),t.bodyClass]),style:pt(t.bodyStyle)},[ze(t.$slots,"default")],6)],2))}});var e0e=Qe(Qve,[["__file","/home/runner/work/element-plus/element-plus/packages/components/card/src/card.vue"]]);const t0e=zt(e0e),r0e=et({initialIndex:{type:Number,default:0},height:{type:String,default:""},trigger:{type:String,values:["hover","click"],default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:{type:String,values:["","none","outside"],default:""},arrow:{type:String,values:["always","hover","never"],default:"hover"},type:{type:String,values:["","card"],default:""},loop:{type:Boolean,default:!0},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},pauseOnHover:{type:Boolean,default:!0}}),i0e={change:(r,e)=>[r,e].every(Ct)},ZB=Symbol("carouselContextKey"),JB=300,n0e=(r,e,t)=>{const{children:i,addChild:n,removeChild:s}=yE(Dt(),"ElCarouselItem"),o=W(-1),a=W(null),l=W(!1),c=W(),u=W(0),d=I(()=>r.arrow!=="never"&&!y(f)),h=I(()=>i.value.some(O=>O.props.label.toString().length>0)),p=I(()=>r.type==="card"),f=I(()=>r.direction==="vertical"),m=I(()=>r.height!=="auto"?{height:r.height}:{height:`${u.value}px`,overflow:"hidden"}),g=Hd(O=>{_(O)},JB,{trailing:!0}),v=Hd(O=>{N(O)},JB);function x(){a.value&&(clearInterval(a.value),a.value=null)}function b(){r.interval<=0||!r.autoplay||a.value||(a.value=setInterval(()=>w(),r.interval))}const w=()=>{o.value<i.value.length-1?o.value=o.value+1:r.loop&&(o.value=0)};function _(O){if(kt(O)){const G=i.value.filter(X=>X.props.name===O);G.length>0&&(O=i.value.indexOf(G[0]))}if(O=Number(O),Number.isNaN(O)||O!==Math.floor(O))return;const V=i.value.length,U=o.value;O<0?o.value=r.loop?V-1:0:O>=V?o.value=r.loop?0:V-1:o.value=O,U===o.value&&S(U),B()}function S(O){i.value.forEach((V,U)=>{V.translateItem(U,o.value,O)})}function T(O,V){var U,G,X,ie;const se=y(i),de=se.length;if(de===0||!O.states.inStage)return!1;const K=V+1,q=V-1,ce=de-1,Te=se[ce].states.active,Z=se[0].states.active,L=(G=(U=se[K])==null?void 0:U.states)==null?void 0:G.active,$=(ie=(X=se[q])==null?void 0:X.states)==null?void 0:ie.active;return V===ce&&Z||L?"left":V===0&&Te||$?"right":!1}function M(){l.value=!0,r.pauseOnHover&&x()}function E(){l.value=!1,b()}function C(O){y(f)||i.value.forEach((V,U)=>{O===T(V,U)&&(V.states.hover=!0)})}function P(){y(f)||i.value.forEach(O=>{O.states.hover=!1})}function A(O){o.value=O}function N(O){r.trigger==="hover"&&O!==o.value&&(o.value=O)}function R(){_(o.value-1)}function F(){_(o.value+1)}function B(){x(),b()}function k(O){r.height==="auto"&&(u.value=O)}Ve(()=>o.value,(O,V)=>{S(V),V>-1&&e("change",O,V)}),Ve(()=>r.autoplay,O=>{O?b():x()}),Ve(()=>r.loop,()=>{_(o.value)}),Ve(()=>r.interval,()=>{B()}),Ve(()=>i.value,()=>{i.value.length>0&&_(r.initialIndex)});const z=Vr();return Et(()=>{z.value=cs(c.value,()=>{S()}),b()}),Zr(()=>{x(),c.value&&z.value&&z.value.stop()}),Yt(ZB,{root:c,isCardType:p,isVertical:f,items:i,loop:r.loop,addItem:n,removeItem:s,setActiveItem:_,setContainerHeight:k}),{root:c,activeIndex:o,arrowDisplay:d,hasLabel:h,hover:l,isCardType:p,items:i,isVertical:f,containerStyle:m,handleButtonEnter:C,handleButtonLeave:P,handleIndicatorClick:A,handleMouseEnter:M,handleMouseLeave:E,setActiveItem:_,prev:R,next:F,throttledArrowClick:g,throttledIndicatorHover:v}},s0e=["onMouseenter","onClick"],o0e={key:0},a0e="ElCarousel",l0e=xe({name:a0e}),c0e=xe({...l0e,props:r0e,emits:i0e,setup(r,{expose:e,emit:t}){const i=r,{root:n,activeIndex:s,arrowDisplay:o,hasLabel:a,hover:l,isCardType:c,items:u,isVertical:d,containerStyle:h,handleButtonEnter:p,handleButtonLeave:f,handleIndicatorClick:m,handleMouseEnter:g,handleMouseLeave:v,setActiveItem:x,prev:b,next:w,throttledArrowClick:_,throttledIndicatorHover:S}=n0e(i,t),T=Ge("carousel"),M=I(()=>{const C=[T.b(),T.m(i.direction)];return y(c)&&C.push(T.m("card")),C}),E=I(()=>{const C=[T.e("indicators"),T.em("indicators",i.direction)];return y(a)&&C.push(T.em("indicators","labels")),i.indicatorPosition==="outside"&&C.push(T.em("indicators","outside")),y(d)&&C.push(T.em("indicators","right")),C});return e({setActiveItem:x,prev:b,next:w}),(C,P)=>(D(),ee("div",{ref_key:"root",ref:n,class:j(y(M)),onMouseenter:P[6]||(P[6]=Mt((...A)=>y(g)&&y(g)(...A),["stop"])),onMouseleave:P[7]||(P[7]=Mt((...A)=>y(v)&&y(v)(...A),["stop"]))},[J("div",{class:j(y(T).e("container")),style:pt(y(h))},[y(o)?(D(),Ae(Li,{key:0,name:"carousel-arrow-left",persisted:""},{default:me(()=>[It(J("button",{type:"button",class:j([y(T).e("arrow"),y(T).em("arrow","left")]),onMouseenter:P[0]||(P[0]=A=>y(p)("left")),onMouseleave:P[1]||(P[1]=(...A)=>y(f)&&y(f)(...A)),onClick:P[2]||(P[2]=Mt(A=>y(_)(y(s)-1),["stop"]))},[ue(y(dt),null,{default:me(()=>[ue(y(cu))]),_:1})],34),[[vr,(C.arrow==="always"||y(l))&&(i.loop||y(s)>0)]])]),_:1})):Re("v-if",!0),y(o)?(D(),Ae(Li,{key:1,name:"carousel-arrow-right",persisted:""},{default:me(()=>[It(J("button",{type:"button",class:j([y(T).e("arrow"),y(T).em("arrow","right")]),onMouseenter:P[3]||(P[3]=A=>y(p)("right")),onMouseleave:P[4]||(P[4]=(...A)=>y(f)&&y(f)(...A)),onClick:P[5]||(P[5]=Mt(A=>y(_)(y(s)+1),["stop"]))},[ue(y(dt),null,{default:me(()=>[ue(y(Cs))]),_:1})],34),[[vr,(C.arrow==="always"||y(l))&&(i.loop||y(s)<y(u).length-1)]])]),_:1})):Re("v-if",!0),ze(C.$slots,"default")],6),C.indicatorPosition!=="none"?(D(),ee("ul",{key:0,class:j(y(E))},[(D(!0),ee(ct,null,Ut(y(u),(A,N)=>(D(),ee("li",{key:N,class:j([y(T).e("indicator"),y(T).em("indicator",C.direction),y(T).is("active",N===y(s))]),onMouseenter:R=>y(S)(N),onClick:Mt(R=>y(m)(N),["stop"])},[J("button",{class:j(y(T).e("button"))},[y(a)?(D(),ee("span",o0e,$e(A.props.label),1)):Re("v-if",!0)],2)],42,s0e))),128))],2)):Re("v-if",!0)],34))}});var u0e=Qe(c0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel.vue"]]);const d0e=et({name:{type:String,default:""},label:{type:[String,Number],default:""}}),h0e=(r,e)=>{const t=ut(ZB),i=Dt(),n=.83,s=W(),o=W(!1),a=W(0),l=W(1),c=W(!1),u=W(!1),d=W(!1),h=W(!1),{isCardType:p,isVertical:f}=t;function m(w,_,S){const T=S-1,M=_-1,E=_+1,C=S/2;return _===0&&w===T?-1:_===T&&w===0?S:w<M&&_-w>=C?S+1:w>E&&w-_>=C?-2:w}function g(w,_){var S,T;const M=y(f)?((S=t.root.value)==null?void 0:S.offsetHeight)||0:((T=t.root.value)==null?void 0:T.offsetWidth)||0;return d.value?M*((2-n)*(w-_)+1)/4:w<_?-(1+n)*M/4:(3+n)*M/4}function v(w,_,S){const T=t.root.value;return T?((S?T.offsetHeight:T.offsetWidth)||0)*(w-_):0}const x=(w,_,S)=>{var T;const M=y(p),E=(T=t.items.value.length)!=null?T:Number.NaN,C=w===_;!M&&!rn(S)&&(h.value=C||w===S),!C&&E>2&&t.loop&&(w=m(w,_,E));const P=y(f);c.value=C,M?(d.value=Math.round(Math.abs(w-_))<=1,a.value=g(w,_),l.value=y(c)?1:n):a.value=v(w,_,P),u.value=!0,C&&s.value&&t.setContainerHeight(s.value.offsetHeight)};function b(){if(t&&y(p)){const w=t.items.value.findIndex(({uid:_})=>_===i.uid);t.setActiveItem(w)}}return Et(()=>{t.addItem({props:r,states:br({hover:o,translate:a,scale:l,active:c,ready:u,inStage:d,animating:h}),uid:i.uid,translateItem:x})}),ki(()=>{t.removeItem(i.uid)}),{carouselItemRef:s,active:c,animating:h,hover:o,inStage:d,isVertical:f,translate:a,isCardType:p,scale:l,ready:u,handleItemClick:b}},p0e=xe({name:"ElCarouselItem"}),f0e=xe({...p0e,props:d0e,setup(r){const e=r,t=Ge("carousel"),{carouselItemRef:i,active:n,animating:s,hover:o,inStage:a,isVertical:l,translate:c,isCardType:u,scale:d,ready:h,handleItemClick:p}=h0e(e),f=I(()=>{const m=`${`translate${y(l)?"Y":"X"}`}(${y(c)}px)`,g=`scale(${y(d)})`;return{transform:[m,g].join(" ")}});return(m,g)=>It((D(),ee("div",{ref_key:"carouselItemRef",ref:i,class:j([y(t).e("item"),y(t).is("active",y(n)),y(t).is("in-stage",y(a)),y(t).is("hover",y(o)),y(t).is("animating",y(s)),{[y(t).em("item","card")]:y(u),[y(t).em("item","card-vertical")]:y(u)&&y(l)}]),style:pt(y(f)),onClick:g[0]||(g[0]=(...v)=>y(p)&&y(p)(...v))},[y(u)?It((D(),ee("div",{key:0,class:j(y(t).e("mask"))},null,2)),[[vr,!y(n)]]):Re("v-if",!0),ze(m.$slots,"default")],6)),[[vr,y(h)]])}});var QB=Qe(f0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/carousel/src/carousel-item.vue"]]);const m0e=zt(u0e,{CarouselItem:QB}),g0e=fi(QB),ez={modelValue:{type:[Number,String,Boolean],default:void 0},label:{type:[String,Boolean,Number,Object]},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:{type:String,default:void 0},trueLabel:{type:[String,Number],default:void 0},falseLabel:{type:[String,Number],default:void 0},id:{type:String,default:void 0},controls:{type:String,default:void 0},border:Boolean,size:jn,tabindex:[String,Number],validateEvent:{type:Boolean,default:!0}},tz={[Wt]:r=>kt(r)||Ct(r)||Gi(r),change:r=>kt(r)||Ct(r)||Gi(r)},Nf=Symbol("checkboxGroupContextKey"),v0e=({model:r,isChecked:e})=>{const t=ut(Nf,void 0),i=I(()=>{var n,s;const o=(n=t==null?void 0:t.max)==null?void 0:n.value,a=(s=t==null?void 0:t.min)==null?void 0:s.value;return!rn(o)&&r.value.length>=o&&!e.value||!rn(a)&&r.value.length<=a&&e.value});return{isDisabled:Ys(I(()=>(t==null?void 0:t.disabled.value)||i.value)),isLimitDisabled:i}},y0e=(r,{model:e,isLimitExceeded:t,hasOwnLabel:i,isDisabled:n,isLabeledByFormItem:s})=>{const o=ut(Nf,void 0),{formItem:a}=Ns(),{emit:l}=Dt();function c(f){var m,g;return f===r.trueLabel||f===!0?(m=r.trueLabel)!=null?m:!0:(g=r.falseLabel)!=null?g:!1}function u(f,m){l("change",c(f),m)}function d(f){if(t.value)return;const m=f.target;l("change",c(m.checked),f)}async function h(f){t.value||!i.value&&!n.value&&s.value&&(f.composedPath().some(m=>m.tagName==="LABEL")||(e.value=c([!1,r.falseLabel].includes(e.value)),await ht(),u(e.value,f)))}const p=I(()=>(o==null?void 0:o.validateEvent)||r.validateEvent);return Ve(()=>r.modelValue,()=>{p.value&&(a==null||a.validate("change").catch(f=>{}))}),{handleChange:d,onClickRoot:h}},b0e=r=>{const e=W(!1),{emit:t}=Dt(),i=ut(Nf,void 0),n=I(()=>rn(i)===!1),s=W(!1);return{model:I({get(){var o,a;return n.value?(o=i==null?void 0:i.modelValue)==null?void 0:o.value:(a=r.modelValue)!=null?a:e.value},set(o){var a,l;n.value&&lt(o)?(s.value=((a=i==null?void 0:i.max)==null?void 0:a.value)!==void 0&&o.length>(i==null?void 0:i.max.value),s.value===!1&&((l=i==null?void 0:i.changeEvent)==null||l.call(i,o))):(t(Wt,o),e.value=o)}}),isGroup:n,isLimitExceeded:s}},x0e=(r,e,{model:t})=>{const i=ut(Nf,void 0),n=W(!1),s=I(()=>{const c=t.value;return Gi(c)?c:lt(c)?Ht(r.label)?c.map(Tr).some(u=>$s(u,r.label)):c.map(Tr).includes(r.label):c!=null?c===r.trueLabel:!!c}),o=Hi(I(()=>{var c;return(c=i==null?void 0:i.size)==null?void 0:c.value}),{prop:!0}),a=Hi(I(()=>{var c;return(c=i==null?void 0:i.size)==null?void 0:c.value})),l=I(()=>!!(e.default||r.label));return{checkboxButtonSize:o,isChecked:s,isFocused:n,checkboxSize:a,hasOwnLabel:l}},w0e=(r,{model:e})=>{function t(){lt(e.value)&&!e.value.includes(r.label)?e.value.push(r.label):e.value=r.trueLabel||!0}r.checked&&t()},rz=(r,e)=>{const{formItem:t}=Ns(),{model:i,isGroup:n,isLimitExceeded:s}=b0e(r),{isFocused:o,isChecked:a,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u}=x0e(r,e,{model:i}),{isDisabled:d}=v0e({model:i,isChecked:a}),{inputId:h,isLabeledByFormItem:p}=vu(r,{formItemContext:t,disableIdGeneration:u,disableIdManagement:n}),{handleChange:f,onClickRoot:m}=y0e(r,{model:i,isLimitExceeded:s,hasOwnLabel:u,isDisabled:d,isLabeledByFormItem:p});return w0e(r,{model:i}),{inputId:h,isLabeledByFormItem:p,isChecked:a,isDisabled:d,isFocused:o,checkboxButtonSize:l,checkboxSize:c,hasOwnLabel:u,model:i,handleChange:f,onClickRoot:m}},_0e=["tabindex","role","aria-checked"],S0e=["id","aria-hidden","name","tabindex","disabled","true-value","false-value"],T0e=["id","aria-hidden","disabled","value","name","tabindex"],M0e=xe({name:"ElCheckbox"}),E0e=xe({...M0e,props:ez,emits:tz,setup(r){const e=r,t=Gn(),{inputId:i,isLabeledByFormItem:n,isChecked:s,isDisabled:o,isFocused:a,checkboxSize:l,hasOwnLabel:c,model:u,handleChange:d,onClickRoot:h}=rz(e,t),p=Ge("checkbox"),f=I(()=>[p.b(),p.m(l.value),p.is("disabled",o.value),p.is("bordered",e.border),p.is("checked",s.value)]),m=I(()=>[p.e("input"),p.is("disabled",o.value),p.is("checked",s.value),p.is("indeterminate",e.indeterminate),p.is("focus",a.value)]);return(g,v)=>(D(),Ae(Xt(!y(c)&&y(n)?"span":"label"),{class:j(y(f)),"aria-controls":g.indeterminate?g.controls:null,onClick:y(h)},{default:me(()=>[J("span",{class:j(y(m)),tabindex:g.indeterminate?0:void 0,role:g.indeterminate?"checkbox":void 0,"aria-checked":g.indeterminate?"mixed":void 0},[g.trueLabel||g.falseLabel?It((D(),ee("input",{key:0,id:y(i),"onUpdate:modelValue":v[0]||(v[0]=x=>zr(u)?u.value=x:null),class:j(y(p).e("original")),type:"checkbox","aria-hidden":g.indeterminate?"true":"false",name:g.name,tabindex:g.tabindex,disabled:y(o),"true-value":g.trueLabel,"false-value":g.falseLabel,onChange:v[1]||(v[1]=(...x)=>y(d)&&y(d)(...x)),onFocus:v[2]||(v[2]=x=>a.value=!0),onBlur:v[3]||(v[3]=x=>a.value=!1),onClick:v[4]||(v[4]=Mt(()=>{},["stop"]))},null,42,S0e)),[[j1,y(u)]]):It((D(),ee("input",{key:1,id:y(i),"onUpdate:modelValue":v[5]||(v[5]=x=>zr(u)?u.value=x:null),class:j(y(p).e("original")),type:"checkbox","aria-hidden":g.indeterminate?"true":"false",disabled:y(o),value:g.label,name:g.name,tabindex:g.tabindex,onChange:v[6]||(v[6]=(...x)=>y(d)&&y(d)(...x)),onFocus:v[7]||(v[7]=x=>a.value=!0),onBlur:v[8]||(v[8]=x=>a.value=!1),onClick:v[9]||(v[9]=Mt(()=>{},["stop"]))},null,42,T0e)),[[j1,y(u)]]),J("span",{class:j(y(p).e("inner"))},null,2)],10,_0e),y(c)?(D(),ee("span",{key:0,class:j(y(p).e("label"))},[ze(g.$slots,"default"),g.$slots.default?Re("v-if",!0):(D(),ee(ct,{key:0},[ir($e(g.label),1)],64))],2)):Re("v-if",!0)]),_:3},8,["class","aria-controls","onClick"]))}});var C0e=Qe(E0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox.vue"]]);const A0e=["name","tabindex","disabled","true-value","false-value"],N0e=["name","tabindex","disabled","value"],R0e=xe({name:"ElCheckboxButton"}),k0e=xe({...R0e,props:ez,emits:tz,setup(r){const e=r,t=Gn(),{isFocused:i,isChecked:n,isDisabled:s,checkboxButtonSize:o,model:a,handleChange:l}=rz(e,t),c=ut(Nf,void 0),u=Ge("checkbox"),d=I(()=>{var p,f,m,g;const v=(f=(p=c==null?void 0:c.fill)==null?void 0:p.value)!=null?f:"";return{backgroundColor:v,borderColor:v,color:(g=(m=c==null?void 0:c.textColor)==null?void 0:m.value)!=null?g:"",boxShadow:v?`-1px 0 0 0 ${v}`:void 0}}),h=I(()=>[u.b("button"),u.bm("button",o.value),u.is("disabled",s.value),u.is("checked",n.value),u.is("focus",i.value)]);return(p,f)=>(D(),ee("label",{class:j(y(h))},[p.trueLabel||p.falseLabel?It((D(),ee("input",{key:0,"onUpdate:modelValue":f[0]||(f[0]=m=>zr(a)?a.value=m:null),class:j(y(u).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:y(s),"true-value":p.trueLabel,"false-value":p.falseLabel,onChange:f[1]||(f[1]=(...m)=>y(l)&&y(l)(...m)),onFocus:f[2]||(f[2]=m=>i.value=!0),onBlur:f[3]||(f[3]=m=>i.value=!1),onClick:f[4]||(f[4]=Mt(()=>{},["stop"]))},null,42,A0e)),[[j1,y(a)]]):It((D(),ee("input",{key:1,"onUpdate:modelValue":f[5]||(f[5]=m=>zr(a)?a.value=m:null),class:j(y(u).be("button","original")),type:"checkbox",name:p.name,tabindex:p.tabindex,disabled:y(s),value:p.label,onChange:f[6]||(f[6]=(...m)=>y(l)&&y(l)(...m)),onFocus:f[7]||(f[7]=m=>i.value=!0),onBlur:f[8]||(f[8]=m=>i.value=!1),onClick:f[9]||(f[9]=Mt(()=>{},["stop"]))},null,42,N0e)),[[j1,y(a)]]),p.$slots.default||p.label?(D(),ee("span",{key:2,class:j(y(u).be("button","inner")),style:pt(y(n)?y(d):void 0)},[ze(p.$slots,"default",{},()=>[ir($e(p.label),1)])],6)):Re("v-if",!0)],2))}});var iz=Qe(k0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-button.vue"]]);const L0e=et({modelValue:{type:Oe(Array),default:()=>[]},disabled:Boolean,min:Number,max:Number,size:jn,label:String,fill:String,textColor:String,tag:{type:String,default:"div"},validateEvent:{type:Boolean,default:!0}}),O0e={[Wt]:r=>lt(r),change:r=>lt(r)},P0e=xe({name:"ElCheckboxGroup"}),I0e=xe({...P0e,props:L0e,emits:O0e,setup(r,{emit:e}){const t=r,i=Ge("checkbox"),{formItem:n}=Ns(),{inputId:s,isLabeledByFormItem:o}=vu(t,{formItemContext:n}),a=async c=>{e(Wt,c),await ht(),e("change",c)},l=I({get(){return t.modelValue},set(c){a(c)}});return Yt(Nf,{...ic(fn(t),["size","min","max","disabled","validateEvent","fill","textColor"]),modelValue:l,changeEvent:a}),Ve(()=>t.modelValue,()=>{t.validateEvent&&(n==null||n.validate("change").catch(c=>{}))}),(c,u)=>{var d;return D(),Ae(Xt(c.tag),{id:y(s),class:j(y(i).b("group")),role:"group","aria-label":y(o)?void 0:c.label||"checkbox-group","aria-labelledby":y(o)?(d=y(n))==null?void 0:d.labelId:void 0},{default:me(()=>[ze(c.$slots,"default")]),_:3},8,["id","class","aria-label","aria-labelledby"])}}});var nz=Qe(I0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/checkbox/src/checkbox-group.vue"]]);const oa=zt(C0e,{CheckboxButton:iz,CheckboxGroup:nz}),D0e=fi(iz),sz=fi(nz),oz=et({size:jn,disabled:Boolean,label:{type:[String,Number,Boolean],default:""}}),U0e=et({...oz,modelValue:{type:[String,Number,Boolean],default:""},name:{type:String,default:""},border:Boolean}),az={[Wt]:r=>kt(r)||Ct(r)||Gi(r),[Kr]:r=>kt(r)||Ct(r)||Gi(r)},lz=Symbol("radioGroupKey"),cz=(r,e)=>{const t=W(),i=ut(lz,void 0),n=I(()=>!!i),s=I({get(){return n.value?i.modelValue:r.modelValue},set(u){n.value?i.changeEvent(u):e&&e(Wt,u),t.value.checked=r.modelValue===r.label}}),o=Hi(I(()=>i==null?void 0:i.size)),a=Ys(I(()=>i==null?void 0:i.disabled)),l=W(!1),c=I(()=>a.value||n.value&&s.value!==r.label?-1:0);return{radioRef:t,isGroup:n,radioGroup:i,focus:l,size:o,disabled:a,tabIndex:c,modelValue:s}},F0e=["value","name","disabled"],B0e=xe({name:"ElRadio"}),z0e=xe({...B0e,props:U0e,emits:az,setup(r,{emit:e}){const t=r,i=Ge("radio"),{radioRef:n,radioGroup:s,focus:o,size:a,disabled:l,modelValue:c}=cz(t,e);function u(){ht(()=>e("change",c.value))}return(d,h)=>{var p;return D(),ee("label",{class:j([y(i).b(),y(i).is("disabled",y(l)),y(i).is("focus",y(o)),y(i).is("bordered",d.border),y(i).is("checked",y(c)===d.label),y(i).m(y(a))])},[J("span",{class:j([y(i).e("input"),y(i).is("disabled",y(l)),y(i).is("checked",y(c)===d.label)])},[It(J("input",{ref_key:"radioRef",ref:n,"onUpdate:modelValue":h[0]||(h[0]=f=>zr(c)?c.value=f:null),class:j(y(i).e("original")),value:d.label,name:d.name||((p=y(s))==null?void 0:p.name),disabled:y(l),type:"radio",onFocus:h[1]||(h[1]=f=>o.value=!0),onBlur:h[2]||(h[2]=f=>o.value=!1),onChange:u,onClick:h[3]||(h[3]=Mt(()=>{},["stop"]))},null,42,F0e),[[XI,y(c)]]),J("span",{class:j(y(i).e("inner"))},null,2)],2),J("span",{class:j(y(i).e("label")),onKeydown:h[4]||(h[4]=Mt(()=>{},["stop"]))},[ze(d.$slots,"default",{},()=>[ir($e(d.label),1)])],34)],2)}}});var V0e=Qe(z0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio.vue"]]);const G0e=et({...oz,name:{type:String,default:""}}),j0e=["value","name","disabled"],H0e=xe({name:"ElRadioButton"}),W0e=xe({...H0e,props:G0e,setup(r){const e=r,t=Ge("radio"),{radioRef:i,focus:n,size:s,disabled:o,modelValue:a,radioGroup:l}=cz(e),c=I(()=>({backgroundColor:(l==null?void 0:l.fill)||"",borderColor:(l==null?void 0:l.fill)||"",boxShadow:l!=null&&l.fill?`-1px 0 0 0 ${l.fill}`:"",color:(l==null?void 0:l.textColor)||""}));return(u,d)=>{var h;return D(),ee("label",{class:j([y(t).b("button"),y(t).is("active",y(a)===u.label),y(t).is("disabled",y(o)),y(t).is("focus",y(n)),y(t).bm("button",y(s))])},[It(J("input",{ref_key:"radioRef",ref:i,"onUpdate:modelValue":d[0]||(d[0]=p=>zr(a)?a.value=p:null),class:j(y(t).be("button","original-radio")),value:u.label,type:"radio",name:u.name||((h=y(l))==null?void 0:h.name),disabled:y(o),onFocus:d[1]||(d[1]=p=>n.value=!0),onBlur:d[2]||(d[2]=p=>n.value=!1),onClick:d[3]||(d[3]=Mt(()=>{},["stop"]))},null,42,j0e),[[XI,y(a)]]),J("span",{class:j(y(t).be("button","inner")),style:pt(y(a)===u.label?y(c):{}),onKeydown:d[4]||(d[4]=Mt(()=>{},["stop"]))},[ze(u.$slots,"default",{},()=>[ir($e(u.label),1)])],38)],2)}}});var uz=Qe(W0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-button.vue"]]);const $0e=et({id:{type:String,default:void 0},size:jn,disabled:Boolean,modelValue:{type:[String,Number,Boolean],default:""},fill:{type:String,default:""},label:{type:String,default:void 0},textColor:{type:String,default:""},name:{type:String,default:void 0},validateEvent:{type:Boolean,default:!0}}),X0e=az,q0e=["id","aria-label","aria-labelledby"],K0e=xe({name:"ElRadioGroup"}),Y0e=xe({...K0e,props:$0e,emits:X0e,setup(r,{emit:e}){const t=r,i=Ge("radio"),n=na(),s=W(),{formItem:o}=Ns(),{inputId:a,isLabeledByFormItem:l}=vu(t,{formItemContext:o}),c=d=>{e(Wt,d),ht(()=>e("change",d))};Et(()=>{const d=s.value.querySelectorAll("[type=radio]"),h=d[0];!Array.from(d).some(p=>p.checked)&&h&&(h.tabIndex=0)});const u=I(()=>t.name||n.value);return Yt(lz,br({...fn(t),changeEvent:c,name:u})),Ve(()=>t.modelValue,()=>{t.validateEvent&&(o==null||o.validate("change").catch(d=>{}))}),(d,h)=>(D(),ee("div",{id:y(a),ref_key:"radioGroupRef",ref:s,class:j(y(i).b("group")),role:"radiogroup","aria-label":y(l)?void 0:d.label||"radio-group","aria-labelledby":y(l)?y(o).labelId:void 0},[ze(d.$slots,"default")],10,q0e))}});var dz=Qe(Y0e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/radio/src/radio-group.vue"]]);const hz=zt(V0e,{RadioButton:uz,RadioGroup:dz}),Z0e=fi(dz),J0e=fi(uz);var Q0e=xe({name:"NodeContent",setup(){return{ns:Ge("cascader-node")}},render(){const{ns:r}=this,{node:e,panel:t}=this.$parent,{data:i,label:n}=e,{renderLabelFn:s}=t;return yt("span",{class:r.e("label")},s?s({node:e,data:i}):n)}});const tC=Symbol(),eye=xe({name:"ElCascaderNode",components:{ElCheckbox:oa,ElRadio:hz,NodeContent:Q0e,ElIcon:dt,Check:Dv,Loading:du,ArrowRight:Cs},props:{node:{type:Object,required:!0},menuId:String},emits:["expand"],setup(r,{emit:e}){const t=ut(tC),i=Ge("cascader-node"),n=I(()=>t.isHoverMenu),s=I(()=>t.config.multiple),o=I(()=>t.config.checkStrictly),a=I(()=>{var S;return(S=t.checkedNodes[0])==null?void 0:S.uid}),l=I(()=>r.node.isDisabled),c=I(()=>r.node.isLeaf),u=I(()=>o.value&&!c.value||!l.value),d=I(()=>p(t.expandingNode)),h=I(()=>o.value&&t.checkedNodes.some(p)),p=S=>{var T;const{level:M,uid:E}=r.node;return((T=S==null?void 0:S.pathNodes[M-1])==null?void 0:T.uid)===E},f=()=>{d.value||t.expandNode(r.node)},m=S=>{const{node:T}=r;S!==T.checked&&t.handleCheckChange(T,S)},g=()=>{t.lazyLoad(r.node,()=>{c.value||f()})},v=S=>{n.value&&(x(),!c.value&&e("expand",S))},x=()=>{const{node:S}=r;!u.value||S.loading||(S.loaded?f():g())},b=()=>{n.value&&!c.value||(c.value&&!l.value&&!o.value&&!s.value?_(!0):x())},w=S=>{o.value?(m(S),r.node.loaded&&f()):_(S)},_=S=>{r.node.loaded?(m(S),!o.value&&f()):g()};return{panel:t,isHoverMenu:n,multiple:s,checkStrictly:o,checkedNodeId:a,isDisabled:l,isLeaf:c,expandable:u,inExpandingPath:d,inCheckedPath:h,ns:i,handleHoverExpand:v,handleExpand:x,handleClick:b,handleCheck:_,handleSelectCheck:w}}}),tye=["id","aria-haspopup","aria-owns","aria-expanded","tabindex"],rye=J("span",null,null,-1);function iye(r,e,t,i,n,s){const o=gt("el-checkbox"),a=gt("el-radio"),l=gt("check"),c=gt("el-icon"),u=gt("node-content"),d=gt("loading"),h=gt("arrow-right");return D(),ee("li",{id:`${r.menuId}-${r.node.uid}`,role:"menuitem","aria-haspopup":!r.isLeaf,"aria-owns":r.isLeaf?null:r.menuId,"aria-expanded":r.inExpandingPath,tabindex:r.expandable?-1:void 0,class:j([r.ns.b(),r.ns.is("selectable",r.checkStrictly),r.ns.is("active",r.node.checked),r.ns.is("disabled",!r.expandable),r.inExpandingPath&&"in-active-path",r.inCheckedPath&&"in-checked-path"]),onMouseenter:e[2]||(e[2]=(...p)=>r.handleHoverExpand&&r.handleHoverExpand(...p)),onFocus:e[3]||(e[3]=(...p)=>r.handleHoverExpand&&r.handleHoverExpand(...p)),onClick:e[4]||(e[4]=(...p)=>r.handleClick&&r.handleClick(...p))},[Re(" prefix "),r.multiple?(D(),Ae(o,{key:0,"model-value":r.node.checked,indeterminate:r.node.indeterminate,disabled:r.isDisabled,onClick:e[0]||(e[0]=Mt(()=>{},["stop"])),"onUpdate:modelValue":r.handleSelectCheck},null,8,["model-value","indeterminate","disabled","onUpdate:modelValue"])):r.checkStrictly?(D(),Ae(a,{key:1,"model-value":r.checkedNodeId,label:r.node.uid,disabled:r.isDisabled,"onUpdate:modelValue":r.handleSelectCheck,onClick:e[1]||(e[1]=Mt(()=>{},["stop"]))},{default:me(()=>[Re(`
        Add an empty element to avoid render label,
        do not use empty fragment here for https://github.com/vuejs/vue-next/pull/2485
      `),rye]),_:1},8,["model-value","label","disabled","onUpdate:modelValue"])):r.isLeaf&&r.node.checked?(D(),Ae(c,{key:2,class:j(r.ns.e("prefix"))},{default:me(()=>[ue(l)]),_:1},8,["class"])):Re("v-if",!0),Re(" content "),ue(u),Re(" postfix "),r.isLeaf?Re("v-if",!0):(D(),ee(ct,{key:3},[r.node.loading?(D(),Ae(c,{key:0,class:j([r.ns.is("loading"),r.ns.e("postfix")])},{default:me(()=>[ue(d)]),_:1},8,["class"])):(D(),Ae(c,{key:1,class:j(["arrow-right",r.ns.e("postfix")])},{default:me(()=>[ue(h)]),_:1},8,["class"]))],64))],42,tye)}var nye=Qe(eye,[["render",iye],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/node.vue"]]);const sye=xe({name:"ElCascaderMenu",components:{Loading:du,ElIcon:dt,ElScrollbar:ac,ElCascaderNode:nye},props:{nodes:{type:Array,required:!0},index:{type:Number,required:!0}},setup(r){const e=Dt(),t=Ge("cascader-menu"),{t:i}=pr(),n=gx();let s=null,o=null;const a=ut(tC),l=W(null),c=I(()=>!r.nodes.length),u=I(()=>!a.initialLoaded),d=I(()=>`cascader-menu-${n}-${r.index}`),h=g=>{s=g.target},p=g=>{if(!(!a.isHoverMenu||!s||!l.value))if(s.contains(g.target)){f();const v=e.vnode.el,{left:x}=v.getBoundingClientRect(),{offsetWidth:b,offsetHeight:w}=v,_=g.clientX-x,S=s.offsetTop,T=S+s.offsetHeight;l.value.innerHTML=`
          <path style="pointer-events: auto;" fill="transparent" d="M${_} ${S} L${b} 0 V${S} Z" />
          <path style="pointer-events: auto;" fill="transparent" d="M${_} ${T} L${b} ${w} V${T} Z" />
        `}else o||(o=window.setTimeout(m,a.config.hoverThreshold))},f=()=>{o&&(clearTimeout(o),o=null)},m=()=>{l.value&&(l.value.innerHTML="",f())};return{ns:t,panel:a,hoverZone:l,isEmpty:c,isLoading:u,menuId:d,t:i,handleExpand:h,handleMouseMove:p,clearHoverZone:m}}});function oye(r,e,t,i,n,s){const o=gt("el-cascader-node"),a=gt("loading"),l=gt("el-icon"),c=gt("el-scrollbar");return D(),Ae(c,{key:r.menuId,tag:"ul",role:"menu",class:j(r.ns.b()),"wrap-class":r.ns.e("wrap"),"view-class":[r.ns.e("list"),r.ns.is("empty",r.isEmpty)],onMousemove:r.handleMouseMove,onMouseleave:r.clearHoverZone},{default:me(()=>{var u;return[(D(!0),ee(ct,null,Ut(r.nodes,d=>(D(),Ae(o,{key:d.uid,node:d,"menu-id":r.menuId,onExpand:r.handleExpand},null,8,["node","menu-id","onExpand"]))),128)),r.isLoading?(D(),ee("div",{key:0,class:j(r.ns.e("empty-text"))},[ue(l,{size:"14",class:j(r.ns.is("loading"))},{default:me(()=>[ue(a)]),_:1},8,["class"]),ir(" "+$e(r.t("el.cascader.loading")),1)],2)):r.isEmpty?(D(),ee("div",{key:1,class:j(r.ns.e("empty-text"))},$e(r.t("el.cascader.noData")),3)):(u=r.panel)!=null&&u.isHoverMenu?(D(),ee("svg",{key:2,ref:"hoverZone",class:j(r.ns.e("hover-zone"))},null,2)):Re("v-if",!0)]}),_:1},8,["class","wrap-class","view-class","onMousemove","onMouseleave"])}var aye=Qe(sye,[["render",oye],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/menu.vue"]]);let lye=0;const cye=r=>{const e=[r];let{parent:t}=r;for(;t;)e.unshift(t),t=t.parent;return e};let rC=class eP{constructor(e,t,i,n=!1){this.data=e,this.config=t,this.parent=i,this.root=n,this.uid=lye++,this.checked=!1,this.indeterminate=!1,this.loading=!1;const{value:s,label:o,children:a}=t,l=e[a],c=cye(this);this.level=n?0:i?i.level+1:1,this.value=e[s],this.label=e[o],this.pathNodes=c,this.pathValues=c.map(u=>u.value),this.pathLabels=c.map(u=>u.label),this.childrenData=l,this.children=(l||[]).map(u=>new eP(u,t,this)),this.loaded=!t.lazy||this.isLeaf||!Jo(l)}get isDisabled(){const{data:e,parent:t,config:i}=this,{disabled:n,checkStrictly:s}=i;return(Nt(n)?n(e,this):!!e[n])||!s&&(t==null?void 0:t.isDisabled)}get isLeaf(){const{data:e,config:t,childrenData:i,loaded:n}=this,{lazy:s,leaf:o}=t,a=Nt(o)?o(e,this):e[o];return rn(a)?s&&!n?!1:!(Array.isArray(i)&&i.length):!!a}get valueByOption(){return this.config.emitPath?this.pathValues:this.value}appendChild(e){const{childrenData:t,children:i}=this,n=new eP(e,this.config,this);return Array.isArray(t)?t.push(e):this.childrenData=[e],i.push(n),n}calcText(e,t){const i=e?this.pathLabels.join(t):this.label;return this.text=i,i}broadcast(e,...t){const i=`onParent${gl(e)}`;this.children.forEach(n=>{n&&(n.broadcast(e,...t),n[i]&&n[i](...t))})}emit(e,...t){const{parent:i}=this,n=`onChild${gl(e)}`;i&&(i[n]&&i[n](...t),i.emit(e,...t))}onParentCheck(e){this.isDisabled||this.setCheckState(e)}onChildCheck(){const{children:e}=this,t=e.filter(n=>!n.isDisabled),i=t.length?t.every(n=>n.checked):!1;this.setCheckState(i)}setCheckState(e){const t=this.children.length,i=this.children.reduce((n,s)=>{const o=s.checked?1:s.indeterminate?.5:0;return n+o},0);this.checked=this.loaded&&this.children.filter(n=>!n.isDisabled).every(n=>n.loaded&&n.checked)&&e,this.indeterminate=this.loaded&&i!==t&&i>0}doCheck(e){if(this.checked===e)return;const{checkStrictly:t,multiple:i}=this.config;t||!i?this.checked=e:(this.broadcast("check",e),this.setCheckState(e),this.emit("check"))}};const iC=(r,e)=>r.reduce((t,i)=>(i.isLeaf?t.push(i):(!e&&t.push(i),t=t.concat(iC(i.children,e))),t),[]);let pz=class{constructor(r,e){this.config=e;const t=(r||[]).map(i=>new rC(i,this.config));this.nodes=t,this.allNodes=iC(t,!1),this.leafNodes=iC(t,!0)}getNodes(){return this.nodes}getFlattedNodes(r){return r?this.leafNodes:this.allNodes}appendNode(r,e){const t=e?e.appendChild(r):new rC(r,this.config);e||this.nodes.push(t),this.allNodes.push(t),t.isLeaf&&this.leafNodes.push(t)}appendNodes(r,e){r.forEach(t=>this.appendNode(t,e))}getNodeByValue(r,e=!1){return!r&&r!==0?null:this.getFlattedNodes(e).find(t=>$s(t.value,r)||$s(t.pathValues,r))||null}getSameNode(r){return r&&this.getFlattedNodes(!1).find(({value:e,level:t})=>$s(r.value,e)&&r.level===t)||null}};const fz=et({modelValue:{type:Oe([Number,String,Array])},options:{type:Oe(Array),default:()=>[]},props:{type:Oe(Object),default:()=>({})}}),uye={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:Lr,value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},dye=r=>I(()=>({...uye,...r.props})),mz=r=>{if(!r)return 0;const e=r.id.split("-");return Number(e[e.length-2])},hye=r=>{if(!r)return;const e=r.querySelector("input");e?e.click():AD(r)&&r.click()},pye=(r,e)=>{const t=e.slice(0),i=t.map(s=>s.uid),n=r.reduce((s,o)=>{const a=i.indexOf(o.uid);return a>-1&&(s.push(o),t.splice(a,1),i.splice(a,1)),s},[]);return n.push(...t),n},fye=xe({name:"ElCascaderPanel",components:{ElCascaderMenu:aye},props:{...fz,border:{type:Boolean,default:!0},renderLabel:Function},emits:[Wt,Kr,"close","expand-change"],setup(r,{emit:e,slots:t}){let i=!1;const n=Ge("cascader"),s=dye(r);let o=null;const a=W(!0),l=W([]),c=W(null),u=W([]),d=W(null),h=W([]),p=I(()=>s.value.expandTrigger==="hover"),f=I(()=>r.renderLabel||t.default),m=()=>{const{options:A}=r,N=s.value;i=!1,o=new pz(A,N),u.value=[o.getNodes()],N.lazy&&Jo(r.options)?(a.value=!1,g(void 0,R=>{R&&(o=new pz(R,N),u.value=[o.getNodes()]),a.value=!0,M(!1,!0)})):M(!1,!0)},g=(A,N)=>{const R=s.value;A=A||new rC({},R,void 0,!0),A.loading=!0;const F=B=>{const k=A,z=k.root?null:k;B&&(o==null||o.appendNodes(B,z)),k.loading=!1,k.loaded=!0,k.childrenData=k.childrenData||[],N&&N(B)};R.lazyLoad(A,F)},v=(A,N)=>{var R;const{level:F}=A,B=u.value.slice(0,F);let k;A.isLeaf?k=A.pathNodes[F-2]:(k=A,B.push(A.children)),((R=d.value)==null?void 0:R.uid)!==(k==null?void 0:k.uid)&&(d.value=A,u.value=B,!N&&e("expand-change",(A==null?void 0:A.pathValues)||[]))},x=(A,N,R=!0)=>{const{checkStrictly:F,multiple:B}=s.value,k=h.value[0];i=!0,!B&&(k==null||k.doCheck(!1)),A.doCheck(N),T(),R&&!B&&!F&&e("close"),!R&&!B&&!F&&b(A)},b=A=>{A&&(A=A.parent,b(A),A&&v(A))},w=A=>o==null?void 0:o.getFlattedNodes(A),_=A=>{var N;return(N=w(A))==null?void 0:N.filter(R=>R.checked!==!1)},S=()=>{h.value.forEach(A=>A.doCheck(!1)),T(),u.value=u.value.slice(0,1),d.value=null,e("expand-change",[])},T=()=>{var A;const{checkStrictly:N,multiple:R}=s.value,F=h.value,B=_(!N),k=pye(F,B),z=k.map(O=>O.valueByOption);h.value=k,c.value=R?z:(A=z[0])!=null?A:null},M=(A=!1,N=!1)=>{const{modelValue:R}=r,{lazy:F,multiple:B,checkStrictly:k}=s.value,z=!k;if(!(!a.value||i||!N&&$s(R,c.value)))if(F&&!A){const O=TU(kse(nc(R))).map(V=>o==null?void 0:o.getNodeByValue(V)).filter(V=>!!V&&!V.loaded&&!V.loading);O.length?O.forEach(V=>{g(V,()=>M(!1,N))}):M(!0,N)}else{const O=B?nc(R):[R],V=TU(O.map(U=>o==null?void 0:o.getNodeByValue(U,z)));E(V,N),c.value=ix(R)}},E=(A,N=!0)=>{const{checkStrictly:R}=s.value,F=h.value,B=A.filter(O=>!!O&&(R||O.isLeaf)),k=o==null?void 0:o.getSameNode(d.value),z=N&&k||B[0];z?z.pathNodes.forEach(O=>v(O,!0)):d.value=null,F.forEach(O=>O.doCheck(!1)),r.props.multiple?br(B).forEach(O=>O.doCheck(!0)):B.forEach(O=>O.doCheck(!0)),h.value=B,ht(C)},C=()=>{ar&&l.value.forEach(A=>{const N=A==null?void 0:A.$el;if(N){const R=N.querySelector(`.${n.namespace.value}-scrollbar__wrap`),F=N.querySelector(`.${n.b("node")}.${n.is("active")}`)||N.querySelector(`.${n.b("node")}.in-active-path`);dU(R,F)}})},P=A=>{const N=A.target,{code:R}=A;switch(R){case bt.up:case bt.down:{A.preventDefault();const F=R===bt.up?-1:1;X1(ND(N,F,`.${n.b("node")}[tabindex="-1"]`));break}case bt.left:{A.preventDefault();const F=l.value[mz(N)-1],B=F==null?void 0:F.$el.querySelector(`.${n.b("node")}[aria-expanded="true"]`);X1(B);break}case bt.right:{A.preventDefault();const F=l.value[mz(N)+1],B=F==null?void 0:F.$el.querySelector(`.${n.b("node")}[tabindex="-1"]`);X1(B);break}case bt.enter:hye(N);break}};return Yt(tC,br({config:s,expandingNode:d,checkedNodes:h,isHoverMenu:p,initialLoaded:a,renderLabelFn:f,lazyLoad:g,expandNode:v,handleCheckChange:x})),Ve([s,()=>r.options],m,{deep:!0,immediate:!0}),Ve(()=>r.modelValue,()=>{i=!1,M()},{deep:!0}),Ve(()=>c.value,A=>{$s(A,r.modelValue)||(e(Wt,A),e(Kr,A))}),KP(()=>l.value=[]),Et(()=>!Jo(r.modelValue)&&M()),{ns:n,menuList:l,menus:u,checkedNodes:h,handleKeyDown:P,handleCheckChange:x,getFlattedNodes:w,getCheckedNodes:_,clearCheckedNodes:S,calculateCheckedValue:T,scrollToExpandingNode:C}}});function mye(r,e,t,i,n,s){const o=gt("el-cascader-menu");return D(),ee("div",{class:j([r.ns.b("panel"),r.ns.is("bordered",r.border)]),onKeydown:e[0]||(e[0]=(...a)=>r.handleKeyDown&&r.handleKeyDown(...a))},[(D(!0),ee(ct,null,Ut(r.menus,(a,l)=>(D(),Ae(o,{key:l,ref_for:!0,ref:c=>r.menuList[l]=c,index:l,nodes:[...a]},null,8,["index","nodes"]))),128))],34)}var Wx=Qe(fye,[["render",mye],["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader-panel/src/index.vue"]]);Wx.install=r=>{r.component(Wx.name,Wx)};const gz=Wx,gye=gz,nC=et({type:{type:String,values:["success","info","warning","danger",""],default:""},closable:Boolean,disableTransitions:Boolean,hit:Boolean,color:{type:String,default:""},size:{type:String,values:yl,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),vye={close:r=>r instanceof MouseEvent,click:r=>r instanceof MouseEvent},yye=xe({name:"ElTag"}),bye=xe({...yye,props:nC,emits:vye,setup(r,{emit:e}){const t=r,i=Hi(),n=Ge("tag"),s=I(()=>{const{type:l,hit:c,effect:u,closable:d,round:h}=t;return[n.b(),n.is("closable",d),n.m(l),n.m(i.value),n.m(u),n.is("hit",c),n.is("round",h)]}),o=l=>{e("close",l)},a=l=>{e("click",l)};return(l,c)=>l.disableTransitions?(D(),ee("span",{key:0,class:j(y(s)),style:pt({backgroundColor:l.color}),onClick:a},[J("span",{class:j(y(n).e("content"))},[ze(l.$slots,"default")],2),l.closable?(D(),Ae(y(dt),{key:0,class:j(y(n).e("close")),onClick:Mt(o,["stop"])},{default:me(()=>[ue(y(Pa))]),_:1},8,["class","onClick"])):Re("v-if",!0)],6)):(D(),Ae(Li,{key:1,name:`${y(n).namespace.value}-zoom-in-center`,appear:""},{default:me(()=>[J("span",{class:j(y(s)),style:pt({backgroundColor:l.color}),onClick:a},[J("span",{class:j(y(n).e("content"))},[ze(l.$slots,"default")],2),l.closable?(D(),Ae(y(dt),{key:0,class:j(y(n).e("close")),onClick:Mt(o,["stop"])},{default:me(()=>[ue(y(Pa))]),_:1},8,["class","onClick"])):Re("v-if",!0)],6)]),_:3},8,["name"]))}});var xye=Qe(bye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]);const Qv=zt(xye),wye=et({...fz,size:jn,placeholder:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:{type:Oe(Function),default:(r,e)=>r.text.includes(e)},separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,maxCollapseTags:{type:Number,default:1},collapseTagsTooltip:{type:Boolean,default:!1},debounce:{type:Number,default:300},beforeFilter:{type:Oe(Function),default:()=>!0},popperClass:{type:String,default:""},teleported:Nn.teleported,tagType:{...nC.type,default:"info"},validateEvent:{type:Boolean,default:!0}}),_ye={[Wt]:r=>!!r||r===null,[Kr]:r=>!!r||r===null,focus:r=>r instanceof FocusEvent,blur:r=>r instanceof FocusEvent,visibleChange:r=>Gi(r),expandChange:r=>!!r,removeTag:r=>!!r},Sye={key:0},Tye=["placeholder","onKeydown"],Mye=["onClick"],Eye="ElCascader",Cye=xe({name:Eye}),Aye=xe({...Cye,props:wye,emits:_ye,setup(r,{expose:e,emit:t}){const i=r,n={modifiers:[{name:"arrowPosition",enabled:!0,phase:"main",fn:({state:Q})=>{const{modifiersData:he,placement:we}=Q;["right","left","bottom","top"].includes(we)||(he.arrow.x=35)},requires:["arrow"]}]},s=kd();let o=0,a=0;const l=Ge("cascader"),c=Ge("input"),{t:u}=pr(),{form:d,formItem:h}=Ns(),p=W(null),f=W(null),m=W(null),g=W(null),v=W(null),x=W(!1),b=W(!1),w=W(!1),_=W(!1),S=W(""),T=W(""),M=W([]),E=W([]),C=W([]),P=W(!1),A=I(()=>s.style),N=I(()=>i.disabled||(d==null?void 0:d.disabled)),R=I(()=>i.placeholder||u("el.cascader.placeholder")),F=I(()=>T.value||M.value.length>0||P.value?"":R.value),B=Hi(),k=I(()=>["small"].includes(B.value)?"small":"default"),z=I(()=>!!i.props.multiple),O=I(()=>!i.filterable||z.value),V=I(()=>z.value?T.value:S.value),U=I(()=>{var Q;return((Q=g.value)==null?void 0:Q.checkedNodes)||[]}),G=I(()=>!i.clearable||N.value||w.value||!b.value?!1:!!U.value.length),X=I(()=>{const{showAllLevels:Q,separator:he}=i,we=U.value;return we.length?z.value?"":we[0].calcText(Q,he):""}),ie=I({get(){return ix(i.modelValue)},set(Q){t(Wt,Q),t(Kr,Q),i.validateEvent&&(h==null||h.validate("change").catch(he=>{}))}}),se=I(()=>[l.b(),l.m(B.value),l.is("disabled",N.value),s.class]),de=I(()=>[c.e("icon"),"icon-arrow-down",l.is("reverse",x.value)]),K=I(()=>l.is("focus",x.value||_.value)),q=I(()=>{var Q,he;return(he=(Q=p.value)==null?void 0:Q.popperRef)==null?void 0:he.contentRef}),ce=Q=>{var he,we,ae;N.value||(Q=Q??!x.value,Q!==x.value&&(x.value=Q,(we=(he=f.value)==null?void 0:he.input)==null||we.setAttribute("aria-expanded",`${Q}`),Q?(Te(),ht((ae=g.value)==null?void 0:ae.scrollToExpandingNode)):i.filterable&&Y(),t("visibleChange",Q)))},Te=()=>{ht(()=>{var Q;(Q=p.value)==null||Q.updatePopper()})},Z=()=>{w.value=!1},L=Q=>{const{showAllLevels:he,separator:we}=i;return{node:Q,key:Q.uid,text:Q.calcText(he,we),hitState:!1,closable:!N.value&&!Q.isDisabled,isCollapseTag:!1}},$=Q=>{var he;const we=Q.node;we.doCheck(!1),(he=g.value)==null||he.calculateCheckedValue(),t("removeTag",we.valueByOption)},re=()=>{if(!z.value)return;const Q=U.value,he=[],we=[];if(Q.forEach(ae=>we.push(L(ae))),E.value=we,Q.length){Q.slice(0,i.maxCollapseTags).forEach(We=>he.push(L(We)));const ae=Q.slice(i.maxCollapseTags),De=ae.length;De&&(i.collapseTags?he.push({key:-1,text:`+ ${De}`,closable:!1,isCollapseTag:!0}):ae.forEach(We=>he.push(L(We))))}M.value=he},te=()=>{var Q,he;const{filterMethod:we,showAllLevels:ae,separator:De}=i,We=(he=(Q=g.value)==null?void 0:Q.getFlattedNodes(!i.props.checkStrictly))==null?void 0:he.filter(je=>je.isDisabled?!1:(je.calcText(ae,De),we(je,V.value)));z.value&&(M.value.forEach(je=>{je.hitState=!1}),E.value.forEach(je=>{je.hitState=!1})),w.value=!0,C.value=We,Te()},le=()=>{var Q;let he;w.value&&v.value?he=v.value.$el.querySelector(`.${l.e("suggestion-item")}`):he=(Q=g.value)==null?void 0:Q.$el.querySelector(`.${l.b("node")}[tabindex="-1"]`),he&&(he.focus(),!w.value&&he.click())},ge=()=>{var Q,he;const we=(Q=f.value)==null?void 0:Q.input,ae=m.value,De=(he=v.value)==null?void 0:he.$el;if(!(!ar||!we)){if(De){const We=De.querySelector(`.${l.e("suggestion-list")}`);We.style.minWidth=`${we.offsetWidth}px`}if(ae){const{offsetHeight:We}=ae,je=M.value.length>0?`${Math.max(We+6,o)}px`:`${o}px`;we.style.height=je,Te()}}},be=Q=>{var he;return(he=g.value)==null?void 0:he.getCheckedNodes(Q)},_e=Q=>{Te(),t("expandChange",Q)},pe=Q=>{var he;const we=(he=Q.target)==null?void 0:he.value;if(Q.type==="compositionend")P.value=!1,ht(()=>Be(we));else{const ae=we[we.length-1]||"";P.value=!fx(ae)}},Se=Q=>{if(!P.value)switch(Q.code){case bt.enter:ce();break;case bt.down:ce(!0),ht(le),Q.preventDefault();break;case bt.esc:x.value===!0&&(Q.preventDefault(),Q.stopPropagation(),ce(!1));break;case bt.tab:ce(!1);break}},Fe=()=>{var Q;(Q=g.value)==null||Q.clearCheckedNodes(),!x.value&&i.filterable&&Y(),ce(!1)},Y=()=>{const{value:Q}=X;S.value=Q,T.value=Q},H=Q=>{var he,we;const{checked:ae}=Q;z.value?(he=g.value)==null||he.handleCheckChange(Q,!ae,!1):(!ae&&((we=g.value)==null||we.handleCheckChange(Q,!0,!1)),ce(!1))},ne=Q=>{const he=Q.target,{code:we}=Q;switch(we){case bt.up:case bt.down:{const ae=we===bt.up?-1:1;X1(ND(he,ae,`.${l.e("suggestion-item")}[tabindex="-1"]`));break}case bt.enter:he.click();break}},Le=()=>{const Q=M.value,he=Q[Q.length-1];a=T.value?0:a+1,!(!he||!a||i.collapseTags&&Q.length>1)&&(he.hitState?$(he):he.hitState=!0)},Pe=Q=>{const he=Q.target,we=l.e("search-input");he.className===we&&(_.value=!0),t("focus",Q)},Ee=Q=>{_.value=!1,t("blur",Q)},Ue=Es(()=>{const{value:Q}=V;if(!Q)return;const he=i.beforeFilter(Q);$g(he)?he.then(te).catch(()=>{}):he!==!1?te():Z()},i.debounce),Be=(Q,he)=>{!x.value&&ce(!0),!(he!=null&&he.isComposing)&&(Q?Ue():Z())},ve=Q=>Number.parseFloat(MQ(c.cssVarName("input-height"),Q).value)-2;return Ve(w,Te),Ve([U,N],re),Ve(M,()=>{ht(()=>ge())}),Ve(B,async()=>{await ht();const Q=f.value.input;o=ve(Q)||o,ge()}),Ve(X,Y,{immediate:!0}),Et(()=>{const Q=f.value.input,he=ve(Q);o=Q.offsetHeight||he,cs(Q,ge)}),e({getCheckedNodes:be,cascaderPanelRef:g,togglePopperVisible:ce,contentRef:q}),(Q,he)=>(D(),Ae(y(Rs),{ref_key:"tooltipRef",ref:p,visible:x.value,teleported:Q.teleported,"popper-class":[y(l).e("dropdown"),Q.popperClass],"popper-options":n,"fallback-placements":["bottom-start","bottom","top-start","top","right","left"],"stop-popper-mouse-event":!1,"gpu-acceleration":!1,placement:"bottom-start",transition:`${y(l).namespace.value}-zoom-in-top`,effect:"light",pure:"",persistent:"",onHide:Z},{default:me(()=>[It((D(),ee("div",{class:j(y(se)),style:pt(y(A)),onClick:he[5]||(he[5]=()=>ce(y(O)?void 0:!0)),onKeydown:Se,onMouseenter:he[6]||(he[6]=we=>b.value=!0),onMouseleave:he[7]||(he[7]=we=>b.value=!1)},[ue(y(us),{ref_key:"input",ref:f,modelValue:S.value,"onUpdate:modelValue":he[1]||(he[1]=we=>S.value=we),placeholder:y(F),readonly:y(O),disabled:y(N),"validate-event":!1,size:y(B),class:j(y(K)),tabindex:y(z)&&Q.filterable&&!y(N)?-1:void 0,onCompositionstart:pe,onCompositionupdate:pe,onCompositionend:pe,onFocus:Pe,onBlur:Ee,onInput:Be},{suffix:me(()=>[y(G)?(D(),Ae(y(dt),{key:"clear",class:j([y(c).e("icon"),"icon-circle-close"]),onClick:Mt(Fe,["stop"])},{default:me(()=>[ue(y(uu))]),_:1},8,["class","onClick"])):(D(),Ae(y(dt),{key:"arrow-down",class:j(y(de)),onClick:he[0]||(he[0]=Mt(we=>ce(),["stop"]))},{default:me(()=>[ue(y(lu))]),_:1},8,["class"]))]),_:1},8,["modelValue","placeholder","readonly","disabled","size","class","tabindex"]),y(z)?(D(),ee("div",{key:0,ref_key:"tagWrapper",ref:m,class:j(y(l).e("tags"))},[(D(!0),ee(ct,null,Ut(M.value,we=>(D(),Ae(y(Qv),{key:we.key,type:Q.tagType,size:y(k),hit:we.hitState,closable:we.closable,"disable-transitions":"",onClose:ae=>$(we)},{default:me(()=>[we.isCollapseTag===!1?(D(),ee("span",Sye,$e(we.text),1)):(D(),Ae(y(Rs),{key:1,disabled:x.value||!Q.collapseTagsTooltip,"fallback-placements":["bottom","top","right","left"],placement:"bottom",effect:"light"},{default:me(()=>[J("span",null,$e(we.text),1)]),content:me(()=>[J("div",{class:j(y(l).e("collapse-tags"))},[(D(!0),ee(ct,null,Ut(E.value.slice(Q.maxCollapseTags),(ae,De)=>(D(),ee("div",{key:De,class:j(y(l).e("collapse-tag"))},[(D(),Ae(y(Qv),{key:ae.key,class:"in-tooltip",type:Q.tagType,size:y(k),hit:ae.hitState,closable:ae.closable,"disable-transitions":"",onClose:We=>$(ae)},{default:me(()=>[J("span",null,$e(ae.text),1)]),_:2},1032,["type","size","hit","closable","onClose"]))],2))),128))],2)]),_:2},1032,["disabled"]))]),_:2},1032,["type","size","hit","closable","onClose"]))),128)),Q.filterable&&!y(N)?It((D(),ee("input",{key:0,"onUpdate:modelValue":he[2]||(he[2]=we=>T.value=we),type:"text",class:j(y(l).e("search-input")),placeholder:y(X)?"":y(R),onInput:he[3]||(he[3]=we=>Be(T.value,we)),onClick:he[4]||(he[4]=Mt(we=>ce(!0),["stop"])),onKeydown:dr(Le,["delete"]),onCompositionstart:pe,onCompositionupdate:pe,onCompositionend:pe,onFocus:Pe,onBlur:Ee},null,42,Tye)),[[aM,T.value]]):Re("v-if",!0)],2)):Re("v-if",!0)],38)),[[y(Su),()=>ce(!1),y(q)]])]),content:me(()=>[It(ue(y(gz),{ref_key:"cascaderPanelRef",ref:g,modelValue:y(ie),"onUpdate:modelValue":he[8]||(he[8]=we=>zr(ie)?ie.value=we:null),options:Q.options,props:i.props,border:!1,"render-label":Q.$slots.default,onExpandChange:_e,onClose:he[9]||(he[9]=we=>Q.$nextTick(()=>ce(!1)))},null,8,["modelValue","options","props","render-label"]),[[vr,!w.value]]),Q.filterable?It((D(),Ae(y(ac),{key:0,ref_key:"suggestionPanel",ref:v,tag:"ul",class:j(y(l).e("suggestion-panel")),"view-class":y(l).e("suggestion-list"),onKeydown:ne},{default:me(()=>[C.value.length?(D(!0),ee(ct,{key:0},Ut(C.value,we=>(D(),ee("li",{key:we.uid,class:j([y(l).e("suggestion-item"),y(l).is("checked",we.checked)]),tabindex:-1,onClick:ae=>H(we)},[J("span",null,$e(we.text),1),we.checked?(D(),Ae(y(dt),{key:0},{default:me(()=>[ue(y(Dv))]),_:1})):Re("v-if",!0)],10,Mye))),128)):ze(Q.$slots,"empty",{key:1},()=>[J("li",{class:j(y(l).e("empty-text"))},$e(y(u)("el.cascader.noMatch")),3)])]),_:3},8,["class","view-class"])),[[vr,w.value]]):Re("v-if",!0)]),_:3},8,["visible","teleported","popper-class","transition"]))}});var $x=Qe(Aye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/cascader/src/cascader.vue"]]);$x.install=r=>{r.component($x.name,$x)};const Nye=$x,Rye=Nye,kye=et({checked:{type:Boolean,default:!1}}),Lye={"update:checked":r=>Gi(r),[Kr]:r=>Gi(r)},Oye=xe({name:"ElCheckTag"}),Pye=xe({...Oye,props:kye,emits:Lye,setup(r,{emit:e}){const t=r,i=Ge("check-tag"),n=I(()=>[i.b(),i.is("checked",t.checked)]),s=()=>{const o=!t.checked;e(Kr,o),e("update:checked",o)};return(o,a)=>(D(),ee("span",{class:j(y(n)),onClick:s},[ze(o.$slots,"default")],2))}});var Iye=Qe(Pye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/check-tag/src/check-tag.vue"]]);const Dye=zt(Iye),vz=Symbol("rowContextKey"),Uye=["start","center","end","space-around","space-between","space-evenly"],Fye=["top","middle","bottom"],Bye=et({tag:{type:String,default:"div"},gutter:{type:Number,default:0},justify:{type:String,values:Uye,default:"start"},align:{type:String,values:Fye}}),zye=xe({name:"ElRow"}),Vye=xe({...zye,props:Bye,setup(r){const e=r,t=Ge("row"),i=I(()=>e.gutter);Yt(vz,{gutter:i});const n=I(()=>{const o={};return e.gutter&&(o.marginRight=o.marginLeft=`-${e.gutter/2}px`),o}),s=I(()=>[t.b(),t.is(`justify-${e.justify}`,e.justify!=="start"),t.is(`align-${e.align}`,!!e.align)]);return(o,a)=>(D(),Ae(Xt(o.tag),{class:j(y(s)),style:pt(y(n))},{default:me(()=>[ze(o.$slots,"default")]),_:3},8,["class","style"]))}});var Gye=Qe(Vye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/row/src/row.vue"]]);const jye=zt(Gye),Hye=et({tag:{type:String,default:"div"},span:{type:Number,default:24},offset:{type:Number,default:0},pull:{type:Number,default:0},push:{type:Number,default:0},xs:{type:Oe([Number,Object]),default:()=>ri({})},sm:{type:Oe([Number,Object]),default:()=>ri({})},md:{type:Oe([Number,Object]),default:()=>ri({})},lg:{type:Oe([Number,Object]),default:()=>ri({})},xl:{type:Oe([Number,Object]),default:()=>ri({})}}),Wye=xe({name:"ElCol"}),$ye=xe({...Wye,props:Hye,setup(r){const e=r,{gutter:t}=ut(vz,{gutter:I(()=>0)}),i=Ge("col"),n=I(()=>{const o={};return t.value&&(o.paddingLeft=o.paddingRight=`${t.value/2}px`),o}),s=I(()=>{const o=[];return["span","offset","pull","push"].forEach(a=>{const l=e[a];Ct(l)&&(a==="span"?o.push(i.b(`${e[a]}`)):l>0&&o.push(i.b(`${a}-${e[a]}`)))}),["xs","sm","md","lg","xl"].forEach(a=>{Ct(e[a])?o.push(i.b(`${a}-${e[a]}`)):Ht(e[a])&&Object.entries(e[a]).forEach(([l,c])=>{o.push(l!=="span"?i.b(`${a}-${l}-${c}`):i.b(`${a}-${c}`))})}),t.value&&o.push(i.is("guttered")),[i.b(),o]});return(o,a)=>(D(),Ae(Xt(o.tag),{class:j(y(s)),style:pt(y(n))},{default:me(()=>[ze(o.$slots,"default")]),_:3},8,["class","style"]))}});var Xye=Qe($ye,[["__file","/home/runner/work/element-plus/element-plus/packages/components/col/src/col.vue"]]);const qye=zt(Xye),yz=r=>typeof Ct(r),Kye=et({accordion:Boolean,modelValue:{type:Oe([Array,String,Number]),default:()=>ri([])}}),Yye={[Wt]:yz,[Kr]:yz},bz=Symbol("collapseContextKey"),Zye=(r,e)=>{const t=W(Gd(r.modelValue)),i=s=>{t.value=s;const o=r.accordion?t.value[0]:t.value;e(Wt,o),e(Kr,o)},n=s=>{if(r.accordion)i([t.value[0]===s?"":s]);else{const o=[...t.value],a=o.indexOf(s);a>-1?o.splice(a,1):o.push(s),i(o)}};return Ve(()=>r.modelValue,()=>t.value=Gd(r.modelValue),{deep:!0}),Yt(bz,{activeNames:t,handleItemClick:n}),{activeNames:t,setActiveNames:i}},Jye=()=>{const r=Ge("collapse");return{rootKls:I(()=>r.b())}},Qye=xe({name:"ElCollapse"}),ebe=xe({...Qye,props:Kye,emits:Yye,setup(r,{expose:e,emit:t}){const i=r,{activeNames:n,setActiveNames:s}=Zye(i,t),{rootKls:o}=Jye();return e({activeNames:n,setActiveNames:s}),(a,l)=>(D(),ee("div",{class:j(y(o)),role:"tablist","aria-multiselectable":"true"},[ze(a.$slots,"default")],2))}});var tbe=Qe(ebe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse.vue"]]);const rbe=xe({name:"ElCollapseTransition"}),ibe=xe({...rbe,setup(r){const e=Ge("collapse-transition"),t=n=>{n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom},i={beforeEnter(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0},enter(n){n.dataset.oldOverflow=n.style.overflow,n.scrollHeight!==0?n.style.maxHeight=`${n.scrollHeight}px`:n.style.maxHeight=0,n.style.paddingTop=n.dataset.oldPaddingTop,n.style.paddingBottom=n.dataset.oldPaddingBottom,n.style.overflow="hidden"},afterEnter(n){n.style.maxHeight="",n.style.overflow=n.dataset.oldOverflow},enterCancelled(n){t(n)},beforeLeave(n){n.dataset||(n.dataset={}),n.dataset.oldPaddingTop=n.style.paddingTop,n.dataset.oldPaddingBottom=n.style.paddingBottom,n.dataset.oldOverflow=n.style.overflow,n.style.maxHeight=`${n.scrollHeight}px`,n.style.overflow="hidden"},leave(n){n.scrollHeight!==0&&(n.style.maxHeight=0,n.style.paddingTop=0,n.style.paddingBottom=0)},afterLeave(n){t(n)},leaveCancelled(n){t(n)}};return(n,s)=>(D(),Ae(Li,qt({name:y(e).b()},FY(i)),{default:me(()=>[ze(n.$slots,"default")]),_:3},16,["name"]))}});var Xx=Qe(ibe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse-transition/src/collapse-transition.vue"]]);Xx.install=r=>{r.component(Xx.name,Xx)};const qx=Xx,nbe=qx,sbe=et({title:{type:String,default:""},name:{type:Oe([String,Number]),default:()=>gx()},disabled:Boolean}),obe=r=>{const e=ut(bz),t=W(!1),i=W(!1),n=W(gx()),s=I(()=>e==null?void 0:e.activeNames.value.includes(r.name));return{focusing:t,id:n,isActive:s,handleFocus:()=>{setTimeout(()=>{i.value?i.value=!1:t.value=!0},50)},handleHeaderClick:()=>{r.disabled||(e==null||e.handleItemClick(r.name),t.value=!1,i.value=!0)},handleEnterClick:()=>{e==null||e.handleItemClick(r.name)}}},abe=(r,{focusing:e,isActive:t,id:i})=>{const n=Ge("collapse"),s=I(()=>[n.b("item"),n.is("active",y(t)),n.is("disabled",r.disabled)]),o=I(()=>[n.be("item","header"),n.is("active",y(t)),{focusing:y(e)&&!r.disabled}]),a=I(()=>[n.be("item","arrow"),n.is("active",y(t))]),l=I(()=>n.be("item","wrap")),c=I(()=>n.be("item","content")),u=I(()=>n.b(`content-${y(i)}`)),d=I(()=>n.b(`head-${y(i)}`));return{arrowKls:a,headKls:o,rootKls:s,itemWrapperKls:l,itemContentKls:c,scopedContentId:u,scopedHeadId:d}},lbe=["aria-expanded","aria-controls","aria-describedby"],cbe=["id","tabindex"],ube=["id","aria-hidden","aria-labelledby"],dbe=xe({name:"ElCollapseItem"}),hbe=xe({...dbe,props:sbe,setup(r,{expose:e}){const t=r,{focusing:i,id:n,isActive:s,handleFocus:o,handleHeaderClick:a,handleEnterClick:l}=obe(t),{arrowKls:c,headKls:u,rootKls:d,itemWrapperKls:h,itemContentKls:p,scopedContentId:f,scopedHeadId:m}=abe(t,{focusing:i,isActive:s,id:n});return e({isActive:s}),(g,v)=>(D(),ee("div",{class:j(y(d))},[J("div",{role:"tab","aria-expanded":y(s),"aria-controls":y(f),"aria-describedby":y(f)},[J("div",{id:y(m),class:j(y(u)),role:"button",tabindex:g.disabled?-1:0,onClick:v[0]||(v[0]=(...x)=>y(a)&&y(a)(...x)),onKeypress:v[1]||(v[1]=dr(Mt((...x)=>y(l)&&y(l)(...x),["stop","prevent"]),["space","enter"])),onFocus:v[2]||(v[2]=(...x)=>y(o)&&y(o)(...x)),onBlur:v[3]||(v[3]=x=>i.value=!1)},[ze(g.$slots,"title",{},()=>[ir($e(g.title),1)]),ue(y(dt),{class:j(y(c))},{default:me(()=>[ue(y(Cs))]),_:1},8,["class"])],42,cbe)],8,lbe),ue(y(qx),null,{default:me(()=>[It(J("div",{id:y(f),class:j(y(h)),role:"tabpanel","aria-hidden":!y(s),"aria-labelledby":y(m)},[J("div",{class:j(y(p))},[ze(g.$slots,"default")],2)],10,ube),[[vr,y(s)]])]),_:3})],2))}});var xz=Qe(hbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/collapse/src/collapse-item.vue"]]);const pbe=zt(tbe,{CollapseItem:xz}),fbe=fi(xz),mbe=et({color:{type:Oe(Object),required:!0},vertical:{type:Boolean,default:!1}});let sC=!1;function e0(r,e){if(!ar)return;const t=function(s){var o;(o=e.drag)==null||o.call(e,s)},i=function(s){var o;document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",i),document.onselectstart=null,document.ondragstart=null,sC=!1,(o=e.end)==null||o.call(e,s)},n=function(s){var o;sC||(s.preventDefault(),document.onselectstart=()=>!1,document.ondragstart=()=>!1,document.addEventListener("mousemove",t),document.addEventListener("mouseup",i),document.addEventListener("touchmove",t),document.addEventListener("touchend",i),sC=!0,(o=e.start)==null||o.call(e,s))};r.addEventListener("mousedown",n),r.addEventListener("touchstart",n)}const gbe=r=>{const e=Dt(),t=Vr(),i=Vr();function n(o){o.target!==t.value&&s(o)}function s(o){if(!i.value||!t.value)return;const a=e.vnode.el.getBoundingClientRect(),{clientX:l,clientY:c}=bM(o);if(r.vertical){let u=c-a.top;u=Math.max(t.value.offsetHeight/2,u),u=Math.min(u,a.height-t.value.offsetHeight/2),r.color.set("alpha",Math.round((u-t.value.offsetHeight/2)/(a.height-t.value.offsetHeight)*100))}else{let u=l-a.left;u=Math.max(t.value.offsetWidth/2,u),u=Math.min(u,a.width-t.value.offsetWidth/2),r.color.set("alpha",Math.round((u-t.value.offsetWidth/2)/(a.width-t.value.offsetWidth)*100))}}return{thumb:t,bar:i,handleDrag:s,handleClick:n}},vbe=(r,{bar:e,thumb:t,handleDrag:i})=>{const n=Dt(),s=Ge("color-alpha-slider"),o=W(0),a=W(0),l=W();function c(){if(!t.value||r.vertical)return 0;const x=n.vnode.el,b=r.color.get("alpha");return x?Math.round(b*(x.offsetWidth-t.value.offsetWidth/2)/100):0}function u(){if(!t.value)return 0;const x=n.vnode.el;if(!r.vertical)return 0;const b=r.color.get("alpha");return x?Math.round(b*(x.offsetHeight-t.value.offsetHeight/2)/100):0}function d(){if(r.color&&r.color.value){const{r:x,g:b,b:w}=r.color.toRgb();return`linear-gradient(to right, rgba(${x}, ${b}, ${w}, 0) 0%, rgba(${x}, ${b}, ${w}, 1) 100%)`}return""}function h(){o.value=c(),a.value=u(),l.value=d()}Et(()=>{if(!e.value||!t.value)return;const x={drag:b=>{i(b)},end:b=>{i(b)}};e0(e.value,x),e0(t.value,x),h()}),Ve(()=>r.color.get("alpha"),()=>h()),Ve(()=>r.color.value,()=>h());const p=I(()=>[s.b(),s.is("vertical",r.vertical)]),f=I(()=>s.e("bar")),m=I(()=>s.e("thumb")),g=I(()=>({background:l.value})),v=I(()=>({left:Ti(o.value),top:Ti(a.value)}));return{rootKls:p,barKls:f,barStyle:g,thumbKls:m,thumbStyle:v,update:h}},ybe="ElColorAlphaSlider",bbe=xe({name:ybe}),xbe=xe({...bbe,props:mbe,setup(r,{expose:e}){const t=r,{bar:i,thumb:n,handleDrag:s,handleClick:o}=gbe(t),{rootKls:a,barKls:l,barStyle:c,thumbKls:u,thumbStyle:d,update:h}=vbe(t,{bar:i,thumb:n,handleDrag:s});return e({update:h,bar:i,thumb:n}),(p,f)=>(D(),ee("div",{class:j(y(a))},[J("div",{ref_key:"bar",ref:i,class:j(y(l)),style:pt(y(c)),onClick:f[0]||(f[0]=(...m)=>y(o)&&y(o)(...m))},null,6),J("div",{ref_key:"thumb",ref:n,class:j(y(u)),style:pt(y(d))},null,6)],2))}});var wbe=Qe(xbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/alpha-slider.vue"]]);const _be=xe({name:"ElColorHueSlider",props:{color:{type:Object,required:!0},vertical:Boolean},setup(r){const e=Ge("color-hue-slider"),t=Dt(),i=W(),n=W(),s=W(0),o=W(0),a=I(()=>r.color.get("hue"));Ve(()=>a.value,()=>{h()});function l(p){p.target!==i.value&&c(p)}function c(p){if(!n.value||!i.value)return;const f=t.vnode.el.getBoundingClientRect(),{clientX:m,clientY:g}=bM(p);let v;if(r.vertical){let x=g-f.top;x=Math.min(x,f.height-i.value.offsetHeight/2),x=Math.max(i.value.offsetHeight/2,x),v=Math.round((x-i.value.offsetHeight/2)/(f.height-i.value.offsetHeight)*360)}else{let x=m-f.left;x=Math.min(x,f.width-i.value.offsetWidth/2),x=Math.max(i.value.offsetWidth/2,x),v=Math.round((x-i.value.offsetWidth/2)/(f.width-i.value.offsetWidth)*360)}r.color.set("hue",v)}function u(){if(!i.value)return 0;const p=t.vnode.el;if(r.vertical)return 0;const f=r.color.get("hue");return p?Math.round(f*(p.offsetWidth-i.value.offsetWidth/2)/360):0}function d(){if(!i.value)return 0;const p=t.vnode.el;if(!r.vertical)return 0;const f=r.color.get("hue");return p?Math.round(f*(p.offsetHeight-i.value.offsetHeight/2)/360):0}function h(){s.value=u(),o.value=d()}return Et(()=>{if(!n.value||!i.value)return;const p={drag:f=>{c(f)},end:f=>{c(f)}};e0(n.value,p),e0(i.value,p),h()}),{bar:n,thumb:i,thumbLeft:s,thumbTop:o,hueValue:a,handleClick:l,update:h,ns:e}}});function Sbe(r,e,t,i,n,s){return D(),ee("div",{class:j([r.ns.b(),r.ns.is("vertical",r.vertical)])},[J("div",{ref:"bar",class:j(r.ns.e("bar")),onClick:e[0]||(e[0]=(...o)=>r.handleClick&&r.handleClick(...o))},null,2),J("div",{ref:"thumb",class:j(r.ns.e("thumb")),style:pt({left:r.thumbLeft+"px",top:r.thumbTop+"px"})},null,6)],2)}var Tbe=Qe(_be,[["render",Sbe],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/hue-slider.vue"]]);const Mbe=et({modelValue:String,id:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:jn,popperClass:{type:String,default:""},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},predefine:{type:Oe(Array)},validateEvent:{type:Boolean,default:!0}}),Ebe={[Wt]:r=>kt(r)||Vi(r),[Kr]:r=>kt(r)||Vi(r),activeChange:r=>kt(r)||Vi(r)},wz=Symbol("colorPickerContextKey"),_z=function(r,e,t){return[r,e*t/((r=(2-e)*t)<1?r:2-r)||0,r/2]},Cbe=function(r){return typeof r=="string"&&r.includes(".")&&Number.parseFloat(r)===1},Abe=function(r){return typeof r=="string"&&r.includes("%")},Rf=function(r,e){Cbe(r)&&(r="100%");const t=Abe(r);return r=Math.min(e,Math.max(0,Number.parseFloat(`${r}`))),t&&(r=Number.parseInt(`${r*e}`,10)/100),Math.abs(r-e)<1e-6?1:r%e/Number.parseFloat(e)},Sz={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Kx=r=>{r=Math.min(Math.round(r),255);const e=Math.floor(r/16),t=r%16;return`${Sz[e]||e}${Sz[t]||t}`},Tz=function({r,g:e,b:t}){return Number.isNaN(+r)||Number.isNaN(+e)||Number.isNaN(+t)?"":`#${Kx(r)}${Kx(e)}${Kx(t)}`},oC={A:10,B:11,C:12,D:13,E:14,F:15},Qd=function(r){return r.length===2?(oC[r[0].toUpperCase()]||+r[0])*16+(oC[r[1].toUpperCase()]||+r[1]):oC[r[1].toUpperCase()]||+r[1]},Nbe=function(r,e,t){e=e/100,t=t/100;let i=e;const n=Math.max(t,.01);t*=2,e*=t<=1?t:2-t,i*=n<=1?n:2-n;const s=(t+e)/2,o=t===0?2*i/(n+i):2*e/(t+e);return{h:r,s:o*100,v:s*100}},Mz=(r,e,t)=>{r=Rf(r,255),e=Rf(e,255),t=Rf(t,255);const i=Math.max(r,e,t),n=Math.min(r,e,t);let s;const o=i,a=i-n,l=i===0?0:a/i;if(i===n)s=0;else{switch(i){case r:{s=(e-t)/a+(e<t?6:0);break}case e:{s=(t-r)/a+2;break}case t:{s=(r-e)/a+4;break}}s/=6}return{h:s*360,s:l*100,v:o*100}},t0=function(r,e,t){r=Rf(r,360)*6,e=Rf(e,100),t=Rf(t,100);const i=Math.floor(r),n=r-i,s=t*(1-e),o=t*(1-n*e),a=t*(1-(1-n)*e),l=i%6,c=[t,o,s,s,a,t][l],u=[a,t,t,o,s,s][l],d=[s,s,a,t,t,o][l];return{r:Math.round(c*255),g:Math.round(u*255),b:Math.round(d*255)}};let r0=class{constructor(r={}){this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="";for(const e in r)er(r,e)&&(this[e]=r[e]);r.value?this.fromString(r.value):this.doOnChange()}set(r,e){if(arguments.length===1&&typeof r=="object"){for(const t in r)er(r,t)&&this.set(t,r[t]);return}this[`_${r}`]=e,this.doOnChange()}get(r){return r==="alpha"?Math.floor(this[`_${r}`]):this[`_${r}`]}toRgb(){return t0(this._hue,this._saturation,this._value)}fromString(r){if(!r){this._hue=0,this._saturation=100,this._value=100,this.doOnChange();return}const e=(t,i,n)=>{this._hue=Math.max(0,Math.min(360,t)),this._saturation=Math.max(0,Math.min(100,i)),this._value=Math.max(0,Math.min(100,n)),this.doOnChange()};if(r.includes("hsl")){const t=r.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,n)=>n>2?Number.parseFloat(i):Number.parseInt(i,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:i,s:n,v:s}=Nbe(t[0],t[1],t[2]);e(i,n,s)}}else if(r.includes("hsv")){const t=r.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,n)=>n>2?Number.parseFloat(i):Number.parseInt(i,10));t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3&&e(t[0],t[1],t[2])}else if(r.includes("rgb")){const t=r.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(i=>i!=="").map((i,n)=>n>2?Number.parseFloat(i):Number.parseInt(i,10));if(t.length===4?this._alpha=Number.parseFloat(t[3])*100:t.length===3&&(this._alpha=100),t.length>=3){const{h:i,s:n,v:s}=Mz(t[0],t[1],t[2]);e(i,n,s)}}else if(r.includes("#")){const t=r.replace("#","").trim();if(!/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$|^[0-9a-fA-F]{8}$/.test(t))return;let i,n,s;t.length===3?(i=Qd(t[0]+t[0]),n=Qd(t[1]+t[1]),s=Qd(t[2]+t[2])):(t.length===6||t.length===8)&&(i=Qd(t.slice(0,2)),n=Qd(t.slice(2,4)),s=Qd(t.slice(4,6))),t.length===8?this._alpha=Qd(t.slice(6))/255*100:(t.length===3||t.length===6)&&(this._alpha=100);const{h:o,s:a,v:l}=Mz(i,n,s);e(o,a,l)}}compare(r){return Math.abs(r._hue-this._hue)<2&&Math.abs(r._saturation-this._saturation)<1&&Math.abs(r._value-this._value)<1&&Math.abs(r._alpha-this._alpha)<1}doOnChange(){const{_hue:r,_saturation:e,_value:t,_alpha:i,format:n}=this;if(this.enableAlpha)switch(n){case"hsl":{const s=_z(r,e/100,t/100);this.value=`hsla(${r}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%, ${this.get("alpha")/100})`;break}case"hsv":{this.value=`hsva(${r}, ${Math.round(e)}%, ${Math.round(t)}%, ${this.get("alpha")/100})`;break}case"hex":{this.value=`${Tz(t0(r,e,t))}${Kx(i*255/100)}`;break}default:{const{r:s,g:o,b:a}=t0(r,e,t);this.value=`rgba(${s}, ${o}, ${a}, ${this.get("alpha")/100})`}}else switch(n){case"hsl":{const s=_z(r,e/100,t/100);this.value=`hsl(${r}, ${Math.round(s[1]*100)}%, ${Math.round(s[2]*100)}%)`;break}case"hsv":{this.value=`hsv(${r}, ${Math.round(e)}%, ${Math.round(t)}%)`;break}case"rgb":{const{r:s,g:o,b:a}=t0(r,e,t);this.value=`rgb(${s}, ${o}, ${a})`;break}default:this.value=Tz(t0(r,e,t))}}};const Rbe=xe({props:{colors:{type:Array,required:!0},color:{type:Object,required:!0}},setup(r){const e=Ge("color-predefine"),{currentColor:t}=ut(wz),i=W(s(r.colors,r.color));Ve(()=>t.value,o=>{const a=new r0;a.fromString(o),i.value.forEach(l=>{l.selected=a.compare(l)})}),wo(()=>{i.value=s(r.colors,r.color)});function n(o){r.color.fromString(r.colors[o])}function s(o,a){return o.map(l=>{const c=new r0;return c.enableAlpha=!0,c.format="rgba",c.fromString(l),c.selected=c.value===a.value,c})}return{rgbaColors:i,handleSelect:n,ns:e}}}),kbe=["onClick"];function Lbe(r,e,t,i,n,s){return D(),ee("div",{class:j(r.ns.b())},[J("div",{class:j(r.ns.e("colors"))},[(D(!0),ee(ct,null,Ut(r.rgbaColors,(o,a)=>(D(),ee("div",{key:r.colors[a],class:j([r.ns.e("color-selector"),r.ns.is("alpha",o._alpha<100),{selected:o.selected}]),onClick:l=>r.handleSelect(a)},[J("div",{style:pt({backgroundColor:o.value})},null,4)],10,kbe))),128))],2)],2)}var Obe=Qe(Rbe,[["render",Lbe],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/predefine.vue"]]);const Pbe=xe({name:"ElSlPanel",props:{color:{type:Object,required:!0}},setup(r){const e=Ge("color-svpanel"),t=Dt(),i=W(0),n=W(0),s=W("hsl(0, 100%, 50%)"),o=I(()=>{const c=r.color.get("hue"),u=r.color.get("value");return{hue:c,value:u}});function a(){const c=r.color.get("saturation"),u=r.color.get("value"),d=t.vnode.el,{clientWidth:h,clientHeight:p}=d;n.value=c*h/100,i.value=(100-u)*p/100,s.value=`hsl(${r.color.get("hue")}, 100%, 50%)`}function l(c){const u=t.vnode.el.getBoundingClientRect(),{clientX:d,clientY:h}=bM(c);let p=d-u.left,f=h-u.top;p=Math.max(0,p),p=Math.min(p,u.width),f=Math.max(0,f),f=Math.min(f,u.height),n.value=p,i.value=f,r.color.set({saturation:p/u.width*100,value:100-f/u.height*100})}return Ve(()=>o.value,()=>{a()}),Et(()=>{e0(t.vnode.el,{drag:c=>{l(c)},end:c=>{l(c)}}),a()}),{cursorTop:i,cursorLeft:n,background:s,colorValue:o,handleDrag:l,update:a,ns:e}}}),Ibe=J("div",null,null,-1),Dbe=[Ibe];function Ube(r,e,t,i,n,s){return D(),ee("div",{class:j(r.ns.b()),style:pt({backgroundColor:r.background})},[J("div",{class:j(r.ns.e("white"))},null,2),J("div",{class:j(r.ns.e("black"))},null,2),J("div",{class:j(r.ns.e("cursor")),style:pt({top:r.cursorTop+"px",left:r.cursorLeft+"px"})},Dbe,6)],6)}var Fbe=Qe(Pbe,[["render",Ube],["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/components/sv-panel.vue"]]);const Bbe=["id","aria-label","aria-labelledby","aria-description","tabindex","onKeydown"],zbe=xe({name:"ElColorPicker"}),Vbe=xe({...zbe,props:Mbe,emits:Ebe,setup(r,{expose:e,emit:t}){const i=r,{t:n}=pr(),s=Ge("color"),{formItem:o}=Ns(),a=Hi(),l=Ys(),{inputId:c,isLabeledByFormItem:u}=vu(i,{formItemContext:o}),d=W(),h=W(),p=W(),f=W();let m=!0;const g=br(new r0({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue})),v=W(!1),x=W(!1),b=W(""),w=I(()=>!i.modelValue&&!x.value?"transparent":E(g,i.showAlpha)),_=I(()=>!i.modelValue&&!x.value?"":g.value),S=I(()=>u.value?void 0:i.label||n("el.colorpicker.defaultLabel")),T=I(()=>u.value?o==null?void 0:o.labelId:void 0),M=I(()=>[s.b("picker"),s.is("disabled",l.value),s.bm("picker",a.value)]);function E(O,V){if(!(O instanceof r0))throw new TypeError("color should be instance of _color Class");const{r:U,g:G,b:X}=O.toRgb();return V?`rgba(${U}, ${G}, ${X}, ${O.get("alpha")/100})`:`rgb(${U}, ${G}, ${X})`}function C(O){v.value=O}const P=Es(C,100);function A(){l.value||C(!0)}function N(){P(!1),R()}function R(){ht(()=>{i.modelValue?g.fromString(i.modelValue):(g.value="",ht(()=>{x.value=!1}))})}function F(){l.value||P(!v.value)}function B(){g.fromString(b.value)}function k(){const O=g.value;t(Wt,O),t("change",O),i.validateEvent&&(o==null||o.validate("change").catch(V=>{})),P(!1),ht(()=>{const V=new r0({enableAlpha:i.showAlpha,format:i.colorFormat||"",value:i.modelValue});g.compare(V)||R()})}function z(){P(!1),t(Wt,null),t("change",null),i.modelValue!==null&&i.validateEvent&&(o==null||o.validate("change").catch(O=>{})),R()}return Et(()=>{i.modelValue&&(b.value=_.value)}),Ve(()=>i.modelValue,O=>{O?O&&O!==g.value&&(m=!1,g.fromString(O)):x.value=!1}),Ve(()=>_.value,O=>{b.value=O,m&&t("activeChange",O),m=!0}),Ve(()=>g.value,()=>{!i.modelValue&&!x.value&&(x.value=!0)}),Ve(()=>v.value,()=>{ht(()=>{var O,V,U;(O=d.value)==null||O.update(),(V=h.value)==null||V.update(),(U=p.value)==null||U.update()})}),Yt(wz,{currentColor:_}),e({color:g,show:A,hide:N}),(O,V)=>(D(),Ae(y(Rs),{ref_key:"popper",ref:f,visible:v.value,"show-arrow":!1,"fallback-placements":["bottom","top","right","left"],offset:0,"gpu-acceleration":!1,"popper-class":[y(s).be("picker","panel"),y(s).b("dropdown"),O.popperClass],"stop-popper-mouse-event":!1,effect:"light",trigger:"click",transition:`${y(s).namespace.value}-zoom-in-top`,persistent:""},{content:me(()=>[It((D(),ee("div",null,[J("div",{class:j(y(s).be("dropdown","main-wrapper"))},[ue(Tbe,{ref_key:"hue",ref:d,class:"hue-slider",color:y(g),vertical:""},null,8,["color"]),ue(Fbe,{ref_key:"sv",ref:h,color:y(g)},null,8,["color"])],2),O.showAlpha?(D(),Ae(wbe,{key:0,ref_key:"alpha",ref:p,color:y(g)},null,8,["color"])):Re("v-if",!0),O.predefine?(D(),Ae(Obe,{key:1,ref:"predefine",color:y(g),colors:O.predefine},null,8,["color","colors"])):Re("v-if",!0),J("div",{class:j(y(s).be("dropdown","btns"))},[J("span",{class:j(y(s).be("dropdown","value"))},[ue(y(us),{modelValue:b.value,"onUpdate:modelValue":V[0]||(V[0]=U=>b.value=U),"validate-event":!1,size:"small",onKeyup:dr(B,["enter"]),onBlur:B},null,8,["modelValue","onKeyup"])],2),ue(y(Wn),{class:j(y(s).be("dropdown","link-btn")),text:"",size:"small",onClick:z},{default:me(()=>[ir($e(y(n)("el.colorpicker.clear")),1)]),_:1},8,["class"]),ue(y(Wn),{plain:"",size:"small",class:j(y(s).be("dropdown","btn")),onClick:k},{default:me(()=>[ir($e(y(n)("el.colorpicker.confirm")),1)]),_:1},8,["class"])],2)])),[[y(Su),N]])]),default:me(()=>[J("div",{id:y(c),class:j(y(M)),role:"button","aria-label":y(S),"aria-labelledby":y(T),"aria-description":y(n)("el.colorpicker.description",{color:O.modelValue||""}),tabindex:O.tabindex,onKeydown:dr(F,["enter"])},[y(l)?(D(),ee("div",{key:0,class:j(y(s).be("picker","mask"))},null,2)):Re("v-if",!0),J("div",{class:j(y(s).be("picker","trigger")),onClick:F},[J("span",{class:j([y(s).be("picker","color"),y(s).is("alpha",O.showAlpha)])},[J("span",{class:j(y(s).be("picker","color-inner")),style:pt({backgroundColor:y(w)})},[It(ue(y(dt),{class:j([y(s).be("picker","icon"),y(s).is("icon-arrow-down")])},{default:me(()=>[ue(y(lu))]),_:1},8,["class"]),[[vr,O.modelValue||x.value]]),!O.modelValue&&!x.value?(D(),Ae(y(dt),{key:0,class:j([y(s).be("picker","empty"),y(s).is("icon-close")])},{default:me(()=>[ue(y(Pa))]),_:1},8,["class"])):Re("v-if",!0)],6)],2)],2)],42,Bbe)]),_:1},8,["visible","popper-class","transition"]))}});var Gbe=Qe(Vbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/color-picker/src/color-picker.vue"]]);const jbe=zt(Gbe),Hbe=xe({name:"ElContainer"}),Wbe=xe({...Hbe,props:{direction:{type:String}},setup(r){const e=r,t=Gn(),i=Ge("container"),n=I(()=>e.direction==="vertical"?!0:e.direction==="horizontal"?!1:t&&t.default?t.default().some(s=>{const o=s.type.name;return o==="ElHeader"||o==="ElFooter"}):!1);return(s,o)=>(D(),ee("section",{class:j([y(i).b(),y(i).is("vertical",y(n))])},[ze(s.$slots,"default")],2))}});var $be=Qe(Wbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/container.vue"]]);const Xbe=xe({name:"ElAside"}),qbe=xe({...Xbe,props:{width:{type:String,default:null}},setup(r){const e=r,t=Ge("aside"),i=I(()=>e.width?t.cssVarBlock({width:e.width}):{});return(n,s)=>(D(),ee("aside",{class:j(y(t).b()),style:pt(y(i))},[ze(n.$slots,"default")],6))}});var Ez=Qe(qbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/aside.vue"]]);const Kbe=xe({name:"ElFooter"}),Ybe=xe({...Kbe,props:{height:{type:String,default:null}},setup(r){const e=r,t=Ge("footer"),i=I(()=>e.height?t.cssVarBlock({height:e.height}):{});return(n,s)=>(D(),ee("footer",{class:j(y(t).b()),style:pt(y(i))},[ze(n.$slots,"default")],6))}});var Cz=Qe(Ybe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/footer.vue"]]);const Zbe=xe({name:"ElHeader"}),Jbe=xe({...Zbe,props:{height:{type:String,default:null}},setup(r){const e=r,t=Ge("header"),i=I(()=>e.height?t.cssVarBlock({height:e.height}):{});return(n,s)=>(D(),ee("header",{class:j(y(t).b()),style:pt(y(i))},[ze(n.$slots,"default")],6))}});var Az=Qe(Jbe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/header.vue"]]);const Qbe=xe({name:"ElMain"}),e1e=xe({...Qbe,setup(r){const e=Ge("main");return(t,i)=>(D(),ee("main",{class:j(y(e).b())},[ze(t.$slots,"default")],2))}});var Nz=Qe(e1e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/container/src/main.vue"]]);const t1e=zt($be,{Aside:Ez,Footer:Cz,Header:Az,Main:Nz}),r1e=fi(Ez),i1e=fi(Cz),n1e=fi(Az),s1e=fi(Nz);var Rz={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(cc,function(){return function(t,i){var n=i.prototype,s=n.format;n.format=function(o){var a=this,l=this.$locale();if(!this.isValid())return s.bind(this)(o);var c=this.$utils(),u=(o||"YYYY-MM-DDTHH:mm:ssZ").replace(/\[([^\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,function(d){switch(d){case"Q":return Math.ceil((a.$M+1)/3);case"Do":return l.ordinal(a.$D);case"gggg":return a.weekYear();case"GGGG":return a.isoWeekYear();case"wo":return l.ordinal(a.week(),"W");case"w":case"ww":return c.s(a.week(),d==="w"?1:2,"0");case"W":case"WW":return c.s(a.isoWeek(),d==="W"?1:2,"0");case"k":case"kk":return c.s(String(a.$H===0?24:a.$H),d==="k"?1:2,"0");case"X":return Math.floor(a.$d.getTime()/1e3);case"x":return a.$d.getTime();case"z":return"["+a.offsetName()+"]";case"zzz":return"["+a.offsetName("long")+"]";default:return d}});return s.bind(this)(u)}}})})(Rz);var o1e=Rz.exports;const a1e=Tl(o1e);var kz={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(cc,function(){var t="week",i="year";return function(n,s,o){var a=s.prototype;a.week=function(l){if(l===void 0&&(l=null),l!==null)return this.add(7*(l-this.week()),"day");var c=this.$locale().yearStart||1;if(this.month()===11&&this.date()>25){var u=o(this).startOf(i).add(1,i).date(c),d=o(this).endOf(t);if(u.isBefore(d))return 1}var h=o(this).startOf(i).date(c).startOf(t).subtract(1,"millisecond"),p=this.diff(h,t,!0);return p<0?o(this).startOf("week").week():Math.ceil(p)},a.weeks=function(l){return l===void 0&&(l=null),this.week(l)}}})})(kz);var l1e=kz.exports;const c1e=Tl(l1e);var Lz={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(cc,function(){return function(t,i){i.prototype.weekYear=function(){var n=this.month(),s=this.week(),o=this.year();return s===1&&n===11?o+1:n===0&&s>=52?o-1:o}}})})(Lz);var u1e=Lz.exports;const d1e=Tl(u1e);var Oz={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(cc,function(){return function(t,i,n){i.prototype.dayOfYear=function(s){var o=Math.round((n(this).startOf("day")-n(this).startOf("year"))/864e5)+1;return s==null?o:this.add(s-o,"day")}}})})(Oz);var h1e=Oz.exports;const p1e=Tl(h1e);var Pz={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(cc,function(){return function(t,i){i.prototype.isSameOrAfter=function(n,s){return this.isSame(n,s)||this.isAfter(n,s)}}})})(Pz);var f1e=Pz.exports;const m1e=Tl(f1e);var Iz={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(cc,function(){return function(t,i){i.prototype.isSameOrBefore=function(n,s){return this.isSame(n,s)||this.isBefore(n,s)}}})})(Iz);var g1e=Iz.exports;const v1e=Tl(g1e),aC=Symbol(),y1e=et({...jE,type:{type:Oe(String),default:"date"}}),b1e=["date","dates","year","month","week","range"],lC=et({disabledDate:{type:Oe(Function)},date:{type:Oe(Object),required:!0},minDate:{type:Oe(Object)},maxDate:{type:Oe(Object)},parsedValue:{type:Oe([Object,Array])},rangeState:{type:Oe(Object),default:()=>({endDate:null,selecting:!1})}}),Dz=et({type:{type:Oe(String),required:!0,values:nde}}),Uz=et({unlinkPanels:Boolean,parsedValue:{type:Oe(Array)}}),Fz=r=>({type:String,values:b1e,default:r}),x1e=et({...Dz,parsedValue:{type:Oe([Object,Array])},visible:{type:Boolean},format:{type:String,default:""}}),w1e=et({...lC,cellClassName:{type:Oe(Function)},showWeekNumber:Boolean,selectionMode:Fz("date")}),cC=r=>{if(!lt(r))return!1;const[e,t]=r;return Ft.isDayjs(e)&&Ft.isDayjs(t)&&e.isSameOrBefore(t)},Bz=(r,{lang:e,unit:t,unlinkPanels:i})=>{let n;if(lt(r)){let[s,o]=r.map(a=>Ft(a).locale(e));return i||(o=s.add(1,t)),[s,o]}else r?n=Ft(r):n=Ft();return n=n.locale(e),[n,n.add(1,t)]},_1e=(r,e,{columnIndexOffset:t,startDate:i,nextEndDate:n,now:s,unit:o,relativeDateGetter:a,setCellMetadata:l,setRowMetadata:c})=>{for(let u=0;u<r.row;u++){const d=e[u];for(let h=0;h<r.column;h++){let p=d[h+t];p||(p={row:u,column:h,type:"normal",inRange:!1,start:!1,end:!1});const f=u*r.column+h,m=a(f);p.dayjs=m,p.date=m.toDate(),p.timestamp=m.valueOf(),p.type="normal",p.inRange=!!(i&&m.isSameOrAfter(i,o)&&n&&m.isSameOrBefore(n,o))||!!(i&&m.isSameOrBefore(i,o)&&n&&m.isSameOrAfter(n,o)),i!=null&&i.isSameOrAfter(n)?(p.start=!!n&&m.isSame(n,o),p.end=i&&m.isSame(i,o)):(p.start=!!i&&m.isSame(i,o),p.end=!!n&&m.isSame(n,o)),m.isSame(s,o)&&(p.type="today"),l==null||l(p,{rowIndex:u,columnIndex:h}),d[h+t]=p}c==null||c(d)}},S1e=et({cell:{type:Oe(Object)}});var T1e=xe({name:"ElDatePickerCell",props:S1e,setup(r){const e=Ge("date-table-cell"),{slots:t}=ut(aC);return()=>{const{cell:i}=r;if(t.default){const n=t.default(i).filter(s=>s.patchFlag!==-2&&s.type.toString()!=="Symbol(Comment)");if(n.length)return n}return ue("div",{class:e.b()},[ue("span",{class:e.e("text")},[i==null?void 0:i.text])])}}});const M1e=["aria-label","onMousedown"],E1e={key:0,scope:"col"},C1e=["aria-label"],A1e=["aria-current","aria-selected","tabindex"],N1e=xe({__name:"basic-date-table",props:w1e,emits:["changerange","pick","select"],setup(r,{expose:e,emit:t}){const i=r,n=Ge("date-table"),{t:s,lang:o}=pr(),a=W(),l=W(),c=W(),u=W(),d=W([[],[],[],[],[],[]]);let h=!1;const p=i.date.$locale().weekStart||7,f=i.date.locale("en").localeData().weekdaysShort().map(G=>G.toLowerCase()),m=I(()=>p>3?7-p:-p),g=I(()=>{const G=i.date.startOf("month");return G.subtract(G.day()||7,"day")}),v=I(()=>f.concat(f).slice(p,p+7)),x=I(()=>w4(M.value).some(G=>G.isCurrent)),b=I(()=>{const G=i.date.startOf("month"),X=G.day()||7,ie=G.daysInMonth(),se=G.subtract(1,"month").daysInMonth();return{startOfMonthDay:X,dateCountOfMonth:ie,dateCountOfLastMonth:se}}),w=I(()=>i.selectionMode==="dates"?nc(i.parsedValue):[]),_=(G,{count:X,rowIndex:ie,columnIndex:se})=>{const{startOfMonthDay:de,dateCountOfMonth:K,dateCountOfLastMonth:q}=y(b),ce=y(m);if(ie>=0&&ie<=1){const Te=de+ce<0?7+de+ce:de+ce;if(se+ie*7>=Te)return G.text=X,!0;G.text=q-(Te-se%7)+1+ie*7,G.type="prev-month"}else return X<=K?G.text=X:(G.text=X-K,G.type="next-month"),!0;return!1},S=(G,{columnIndex:X,rowIndex:ie},se)=>{const{disabledDate:de,cellClassName:K}=i,q=y(w),ce=_(G,{count:se,rowIndex:ie,columnIndex:X}),Te=G.dayjs.toDate();return G.selected=q.find(Z=>Z.valueOf()===G.dayjs.valueOf()),G.isSelected=!!G.selected,G.isCurrent=P(G),G.disabled=de==null?void 0:de(Te),G.customClass=K==null?void 0:K(Te),ce},T=G=>{if(i.selectionMode==="week"){const[X,ie]=i.showWeekNumber?[1,7]:[0,6],se=U(G[X+1]);G[X].inRange=se,G[X].start=se,G[ie].inRange=se,G[ie].end=se}},M=I(()=>{const{minDate:G,maxDate:X,rangeState:ie,showWeekNumber:se}=i,de=m.value,K=d.value,q="day";let ce=1;if(se)for(let Te=0;Te<6;Te++)K[Te][0]||(K[Te][0]={type:"week",text:g.value.add(Te*7+1,q).week()});return _1e({row:6,column:7},K,{startDate:G,columnIndexOffset:se?1:0,nextEndDate:ie.endDate||X||ie.selecting&&G||null,now:Ft().locale(y(o)).startOf(q),unit:q,relativeDateGetter:Te=>g.value.add(Te-de,q),setCellMetadata:(...Te)=>{S(...Te,ce)&&(ce+=1)},setRowMetadata:T}),K});Ve(()=>i.date,async()=>{var G,X;(G=a.value)!=null&&G.contains(document.activeElement)&&(await ht(),(X=l.value)==null||X.focus())});const E=async()=>{var G;(G=l.value)==null||G.focus()},C=(G="")=>["normal","today"].includes(G),P=G=>i.selectionMode==="date"&&C(G.type)&&A(G,i.parsedValue),A=(G,X)=>X?Ft(X).locale(o.value).isSame(i.date.date(Number(G.text)),"day"):!1,N=G=>{const X=[];return C(G.type)&&!G.disabled?(X.push("available"),G.type==="today"&&X.push("today")):X.push(G.type),P(G)&&X.push("current"),G.inRange&&(C(G.type)||i.selectionMode==="week")&&(X.push("in-range"),G.start&&X.push("start-date"),G.end&&X.push("end-date")),G.disabled&&X.push("disabled"),G.selected&&X.push("selected"),G.customClass&&X.push(G.customClass),X.join(" ")},R=(G,X)=>{const ie=G*7+(X-(i.showWeekNumber?1:0))-m.value;return g.value.add(ie,"day")},F=G=>{var X;if(!i.rangeState.selecting)return;let ie=G.target;if(ie.tagName==="SPAN"&&(ie=(X=ie.parentNode)==null?void 0:X.parentNode),ie.tagName==="DIV"&&(ie=ie.parentNode),ie.tagName!=="TD")return;const se=ie.parentNode.rowIndex-1,de=ie.cellIndex;M.value[se][de].disabled||(se!==c.value||de!==u.value)&&(c.value=se,u.value=de,t("changerange",{selecting:!0,endDate:R(se,de)}))},B=G=>!x.value&&(G==null?void 0:G.text)===1&&G.type==="normal"||G.isCurrent,k=G=>{h||x.value||i.selectionMode!=="date"||V(G,!0)},z=G=>{G.target.closest("td")&&(h=!0)},O=G=>{G.target.closest("td")&&(h=!1)},V=(G,X=!1)=>{const ie=G.target.closest("td");if(!ie)return;const se=ie.parentNode.rowIndex-1,de=ie.cellIndex,K=M.value[se][de];if(K.disabled||K.type==="week")return;const q=R(se,de);if(i.selectionMode==="range")!i.rangeState.selecting||!i.minDate?(t("pick",{minDate:q,maxDate:null}),t("select",!0)):(q>=i.minDate?t("pick",{minDate:i.minDate,maxDate:q}):t("pick",{minDate:q,maxDate:i.minDate}),t("select",!1));else if(i.selectionMode==="date")t("pick",q,X);else if(i.selectionMode==="week"){const ce=q.week(),Te=`${q.year()}w${ce}`;t("pick",{year:q.year(),week:ce,value:Te,date:q.startOf("week")})}else if(i.selectionMode==="dates"){const ce=K.selected?nc(i.parsedValue).filter(Te=>(Te==null?void 0:Te.valueOf())!==q.valueOf()):nc(i.parsedValue).concat([q]);t("pick",ce)}},U=G=>{if(i.selectionMode!=="week")return!1;let X=i.date.startOf("day");if(G.type==="prev-month"&&(X=X.subtract(1,"month")),G.type==="next-month"&&(X=X.add(1,"month")),X=X.date(Number.parseInt(G.text,10)),i.parsedValue&&!Array.isArray(i.parsedValue)){const ie=(i.parsedValue.day()-p+7)%7-1;return i.parsedValue.subtract(ie,"day").isSame(X,"day")}return!1};return e({focus:E}),(G,X)=>(D(),ee("table",{role:"grid","aria-label":y(s)("el.datepicker.dateTablePrompt"),cellspacing:"0",cellpadding:"0",class:j([y(n).b(),{"is-week-mode":G.selectionMode==="week"}]),onClick:V,onMousemove:F,onMousedown:Mt(z,["prevent"]),onMouseup:O},[J("tbody",{ref_key:"tbodyRef",ref:a},[J("tr",null,[G.showWeekNumber?(D(),ee("th",E1e,$e(y(s)("el.datepicker.week")),1)):Re("v-if",!0),(D(!0),ee(ct,null,Ut(y(v),(ie,se)=>(D(),ee("th",{key:se,scope:"col","aria-label":y(s)("el.datepicker.weeksFull."+ie)},$e(y(s)("el.datepicker.weeks."+ie)),9,C1e))),128))]),(D(!0),ee(ct,null,Ut(y(M),(ie,se)=>(D(),ee("tr",{key:se,class:j([y(n).e("row"),{current:U(ie[1])}])},[(D(!0),ee(ct,null,Ut(ie,(de,K)=>(D(),ee("td",{key:`${se}.${K}`,ref_for:!0,ref:q=>B(de)&&(l.value=q),class:j(N(de)),"aria-current":de.isCurrent?"date":void 0,"aria-selected":de.isCurrent,tabindex:B(de)?0:-1,onFocus:k},[ue(y(T1e),{cell:de},null,8,["cell"])],42,A1e))),128))],2))),128))],512)],42,M1e))}});var uC=Qe(N1e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-date-table.vue"]]);const R1e=et({...lC,selectionMode:Fz("month")}),k1e=["aria-label"],L1e=["aria-selected","aria-label","tabindex","onKeydown"],O1e={class:"cell"},P1e=xe({__name:"basic-month-table",props:R1e,emits:["changerange","pick","select"],setup(r,{expose:e,emit:t}){const i=r,n=(w,_,S)=>{const T=Ft().locale(S).startOf("month").month(_).year(w),M=T.daysInMonth();return wu(M).map(E=>T.add(E,"day").toDate())},s=Ge("month-table"),{t:o,lang:a}=pr(),l=W(),c=W(),u=W(i.date.locale("en").localeData().monthsShort().map(w=>w.toLowerCase())),d=W([[],[],[]]),h=W(),p=W(),f=I(()=>{var w,_;const S=d.value,T=Ft().locale(a.value).startOf("month");for(let M=0;M<3;M++){const E=S[M];for(let C=0;C<4;C++){const P=E[C]||(E[C]={row:M,column:C,type:"normal",inRange:!1,start:!1,end:!1,text:-1,disabled:!1});P.type="normal";const A=M*4+C,N=i.date.startOf("year").month(A),R=i.rangeState.endDate||i.maxDate||i.rangeState.selecting&&i.minDate||null;P.inRange=!!(i.minDate&&N.isSameOrAfter(i.minDate,"month")&&R&&N.isSameOrBefore(R,"month"))||!!(i.minDate&&N.isSameOrBefore(i.minDate,"month")&&R&&N.isSameOrAfter(R,"month")),(w=i.minDate)!=null&&w.isSameOrAfter(R)?(P.start=!!(R&&N.isSame(R,"month")),P.end=i.minDate&&N.isSame(i.minDate,"month")):(P.start=!!(i.minDate&&N.isSame(i.minDate,"month")),P.end=!!(R&&N.isSame(R,"month"))),T.isSame(N)&&(P.type="today"),P.text=A,P.disabled=((_=i.disabledDate)==null?void 0:_.call(i,N.toDate()))||!1}}return S}),m=()=>{var w;(w=c.value)==null||w.focus()},g=w=>{const _={},S=i.date.year(),T=new Date,M=w.text;return _.disabled=i.disabledDate?n(S,M,a.value).every(i.disabledDate):!1,_.current=nc(i.parsedValue).findIndex(E=>Ft.isDayjs(E)&&E.year()===S&&E.month()===M)>=0,_.today=T.getFullYear()===S&&T.getMonth()===M,w.inRange&&(_["in-range"]=!0,w.start&&(_["start-date"]=!0),w.end&&(_["end-date"]=!0)),_},v=w=>{const _=i.date.year(),S=w.text;return nc(i.date).findIndex(T=>T.year()===_&&T.month()===S)>=0},x=w=>{var _;if(!i.rangeState.selecting)return;let S=w.target;if(S.tagName==="A"&&(S=(_=S.parentNode)==null?void 0:_.parentNode),S.tagName==="DIV"&&(S=S.parentNode),S.tagName!=="TD")return;const T=S.parentNode.rowIndex,M=S.cellIndex;f.value[T][M].disabled||(T!==h.value||M!==p.value)&&(h.value=T,p.value=M,t("changerange",{selecting:!0,endDate:i.date.startOf("year").month(T*4+M)}))},b=w=>{var _;const S=(_=w.target)==null?void 0:_.closest("td");if((S==null?void 0:S.tagName)!=="TD"||Oa(S,"disabled"))return;const T=S.cellIndex,M=S.parentNode.rowIndex*4+T,E=i.date.startOf("year").month(M);i.selectionMode==="range"?i.rangeState.selecting?(i.minDate&&E>=i.minDate?t("pick",{minDate:i.minDate,maxDate:E}):t("pick",{minDate:E,maxDate:i.minDate}),t("select",!1)):(t("pick",{minDate:E,maxDate:null}),t("select",!0)):t("pick",M)};return Ve(()=>i.date,async()=>{var w,_;(w=l.value)!=null&&w.contains(document.activeElement)&&(await ht(),(_=c.value)==null||_.focus())}),e({focus:m}),(w,_)=>(D(),ee("table",{role:"grid","aria-label":y(o)("el.datepicker.monthTablePrompt"),class:j(y(s).b()),onClick:b,onMousemove:x},[J("tbody",{ref_key:"tbodyRef",ref:l},[(D(!0),ee(ct,null,Ut(y(f),(S,T)=>(D(),ee("tr",{key:T},[(D(!0),ee(ct,null,Ut(S,(M,E)=>(D(),ee("td",{key:E,ref_for:!0,ref:C=>v(M)&&(c.value=C),class:j(g(M)),"aria-selected":`${v(M)}`,"aria-label":y(o)(`el.datepicker.month${+M.text+1}`),tabindex:v(M)?0:-1,onKeydown:[dr(Mt(b,["prevent","stop"]),["space"]),dr(Mt(b,["prevent","stop"]),["enter"])]},[J("div",null,[J("span",O1e,$e(y(o)("el.datepicker.months."+u.value[M.text])),1)])],42,L1e))),128))]))),128))],512)],42,k1e))}});var dC=Qe(P1e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-month-table.vue"]]);const{date:I1e,disabledDate:D1e,parsedValue:U1e}=lC,F1e=et({date:I1e,disabledDate:D1e,parsedValue:U1e}),B1e=["aria-label"],z1e=["aria-selected","tabindex","onKeydown"],V1e={class:"cell"},G1e={key:1},j1e=xe({__name:"basic-year-table",props:F1e,emits:["pick"],setup(r,{expose:e,emit:t}){const i=r,n=(m,g)=>{const v=Ft(String(m)).locale(g).startOf("year"),x=v.endOf("year").dayOfYear();return wu(x).map(b=>v.add(b,"day").toDate())},s=Ge("year-table"),{t:o,lang:a}=pr(),l=W(),c=W(),u=I(()=>Math.floor(i.date.year()/10)*10),d=()=>{var m;(m=c.value)==null||m.focus()},h=m=>{const g={},v=Ft().locale(a.value);return g.disabled=i.disabledDate?n(m,a.value).every(i.disabledDate):!1,g.current=nc(i.parsedValue).findIndex(x=>x.year()===m)>=0,g.today=v.year()===m,g},p=m=>m===u.value&&i.date.year()<u.value&&i.date.year()>u.value+9||nc(i.date).findIndex(g=>g.year()===m)>=0,f=m=>{const g=m.target.closest("td");if(g&&g.textContent){if(Oa(g,"disabled"))return;const v=g.textContent||g.innerText;t("pick",Number(v))}};return Ve(()=>i.date,async()=>{var m,g;(m=l.value)!=null&&m.contains(document.activeElement)&&(await ht(),(g=c.value)==null||g.focus())}),e({focus:d}),(m,g)=>(D(),ee("table",{role:"grid","aria-label":y(o)("el.datepicker.yearTablePrompt"),class:j(y(s).b()),onClick:f},[J("tbody",{ref_key:"tbodyRef",ref:l},[(D(),ee(ct,null,Ut(3,(v,x)=>J("tr",{key:x},[(D(),ee(ct,null,Ut(4,(b,w)=>(D(),ee(ct,{key:x+"_"+w},[x*4+w<10?(D(),ee("td",{key:0,ref_for:!0,ref:_=>p(y(u)+x*4+w)&&(c.value=_),class:j(["available",h(y(u)+x*4+w)]),"aria-selected":`${p(y(u)+x*4+w)}`,tabindex:p(y(u)+x*4+w)?0:-1,onKeydown:[dr(Mt(f,["prevent","stop"]),["space"]),dr(Mt(f,["prevent","stop"]),["enter"])]},[J("span",V1e,$e(y(u)+x*4+w),1)],42,z1e)):(D(),ee("td",G1e))],64))),64))])),64))],512)],10,B1e))}});var H1e=Qe(j1e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/basic-year-table.vue"]]);const W1e=["onClick"],$1e=["aria-label"],X1e=["aria-label"],q1e=["aria-label"],K1e=["aria-label"],Y1e=xe({__name:"panel-date-pick",props:x1e,emits:["pick","set-picker-option","panel-change"],setup(r,{emit:e}){const t=r,i=(ve,Q,he)=>!0,n=Ge("picker-panel"),s=Ge("date-picker"),o=kd(),a=Gn(),{t:l,lang:c}=pr(),u=ut("EP_PICKER_BASE"),d=ut(Ix),{shortcuts:h,disabledDate:p,cellClassName:f,defaultTime:m}=u.props,g=ai(u.props,"defaultValue"),v=W(),x=W(Ft().locale(c.value)),b=W(!1);let w=!1;const _=I(()=>Ft(m).locale(c.value)),S=I(()=>x.value.month()),T=I(()=>x.value.year()),M=W([]),E=W(null),C=W(null),P=ve=>M.value.length>0?i(ve,M.value,t.format||"HH:mm:ss"):!0,A=ve=>m&&!re.value&&!b.value&&!w?_.value.year(ve.year()).month(ve.month()).date(ve.date()):de.value?ve.millisecond(0):ve.startOf("day"),N=(ve,...Q)=>{if(!ve)e("pick",ve,...Q);else if(lt(ve)){const he=ve.map(A);e("pick",he,...Q)}else e("pick",A(ve),...Q);E.value=null,C.value=null,b.value=!1,w=!1},R=(ve,Q)=>{if(V.value==="date"){ve=ve;let he=t.parsedValue?t.parsedValue.year(ve.year()).month(ve.month()).date(ve.date()):ve;P(he)||(he=M.value[0][0].year(ve.year()).month(ve.month()).date(ve.date())),x.value=he,N(he,de.value||Q)}else V.value==="week"?N(ve.date):V.value==="dates"&&N(ve,!0)},F=ve=>{const Q=ve?"add":"subtract";x.value=x.value[Q](1,"month"),Be("month")},B=ve=>{const Q=x.value,he=ve?"add":"subtract";x.value=k.value==="year"?Q[he](10,"year"):Q[he](1,"year"),Be("year")},k=W("date"),z=I(()=>{const ve=l("el.datepicker.year");if(k.value==="year"){const Q=Math.floor(T.value/10)*10;return ve?`${Q} ${ve} - ${Q+9} ${ve}`:`${Q} - ${Q+9}`}return`${T.value} ${ve}`}),O=ve=>{const Q=Nt(ve.value)?ve.value():ve.value;if(Q){w=!0,N(Ft(Q).locale(c.value));return}ve.onClick&&ve.onClick({attrs:o,slots:a,emit:e})},V=I(()=>{const{type:ve}=t;return["week","month","year","dates"].includes(ve)?ve:"date"}),U=I(()=>V.value==="date"?k.value:V.value),G=I(()=>!!h.length),X=async ve=>{x.value=x.value.startOf("month").month(ve),V.value==="month"?N(x.value,!1):(k.value="date",["month","year","date","week"].includes(V.value)&&(N(x.value,!0),await ht(),Pe())),Be("month")},ie=async ve=>{V.value==="year"?(x.value=x.value.startOf("year").year(ve),N(x.value,!1)):(x.value=x.value.year(ve),k.value="month",["month","year","date","week"].includes(V.value)&&(N(x.value,!0),await ht(),Pe())),Be("year")},se=async ve=>{k.value=ve,await ht(),Pe()},de=I(()=>t.type==="datetime"||t.type==="datetimerange"),K=I(()=>de.value||V.value==="dates"),q=I(()=>p?t.parsedValue?lt(t.parsedValue)?p(t.parsedValue[0].toDate()):p(t.parsedValue.toDate()):!0:!1),ce=()=>{if(V.value==="dates")N(t.parsedValue);else{let ve=t.parsedValue;if(!ve){const Q=Ft(m).locale(c.value),he=Le();ve=Q.year(he.year()).month(he.month()).date(he.date())}x.value=ve,N(ve)}},Te=I(()=>p?p(Ft().locale(c.value).toDate()):!1),Z=()=>{const ve=Ft().locale(c.value).toDate();b.value=!0,(!p||!p(ve))&&P(ve)&&(x.value=Ft().locale(c.value),N(x.value))},L=I(()=>_B(t.format)),$=I(()=>wB(t.format)),re=I(()=>{if(C.value)return C.value;if(!(!t.parsedValue&&!g.value))return(t.parsedValue||x.value).format(L.value)}),te=I(()=>{if(E.value)return E.value;if(!(!t.parsedValue&&!g.value))return(t.parsedValue||x.value).format($.value)}),le=W(!1),ge=()=>{le.value=!0},be=()=>{le.value=!1},_e=ve=>({hour:ve.hour(),minute:ve.minute(),second:ve.second(),year:ve.year(),month:ve.month(),date:ve.date()}),pe=(ve,Q,he)=>{const{hour:we,minute:ae,second:De}=_e(ve),We=t.parsedValue?t.parsedValue.hour(we).minute(ae).second(De):ve;x.value=We,N(x.value,!0),he||(le.value=Q)},Se=ve=>{const Q=Ft(ve,L.value).locale(c.value);if(Q.isValid()&&P(Q)){const{year:he,month:we,date:ae}=_e(x.value);x.value=Q.year(he).month(we).date(ae),C.value=null,le.value=!1,N(x.value,!0)}},Fe=ve=>{const Q=Ft(ve,$.value).locale(c.value);if(Q.isValid()){if(p&&p(Q.toDate()))return;const{hour:he,minute:we,second:ae}=_e(x.value);x.value=Q.hour(he).minute(we).second(ae),E.value=null,N(x.value,!0)}},Y=ve=>Ft.isDayjs(ve)&&ve.isValid()&&(p?!p(ve.toDate()):!0),H=ve=>V.value==="dates"?ve.map(Q=>Q.format(t.format)):ve.format(t.format),ne=ve=>Ft(ve,t.format).locale(c.value),Le=()=>{const ve=Ft(g.value).locale(c.value);if(!g.value){const Q=_.value;return Ft().hour(Q.hour()).minute(Q.minute()).second(Q.second()).locale(c.value)}return ve},Pe=async()=>{var ve;["week","month","year","date"].includes(V.value)&&((ve=v.value)==null||ve.focus(),V.value==="week"&&Ue(bt.down))},Ee=ve=>{const{code:Q}=ve;[bt.up,bt.down,bt.left,bt.right,bt.home,bt.end,bt.pageUp,bt.pageDown].includes(Q)&&(Ue(Q),ve.stopPropagation(),ve.preventDefault()),[bt.enter,bt.space,bt.numpadEnter].includes(Q)&&E.value===null&&C.value===null&&(ve.preventDefault(),N(x.value,!1))},Ue=ve=>{var Q;const{up:he,down:we,left:ae,right:De,home:We,end:je,pageUp:ye,pageDown:nt}=bt,He={year:{[he]:-4,[we]:4,[ae]:-1,[De]:1,offset:(Me,Ne)=>Me.setFullYear(Me.getFullYear()+Ne)},month:{[he]:-4,[we]:4,[ae]:-1,[De]:1,offset:(Me,Ne)=>Me.setMonth(Me.getMonth()+Ne)},week:{[he]:-1,[we]:1,[ae]:-1,[De]:1,offset:(Me,Ne)=>Me.setDate(Me.getDate()+Ne*7)},date:{[he]:-7,[we]:7,[ae]:-1,[De]:1,[We]:Me=>-Me.getDay(),[je]:Me=>-Me.getDay()+6,[ye]:Me=>-new Date(Me.getFullYear(),Me.getMonth(),0).getDate(),[nt]:Me=>new Date(Me.getFullYear(),Me.getMonth()+1,0).getDate(),offset:(Me,Ne)=>Me.setDate(Me.getDate()+Ne)}},tt=x.value.toDate();for(;Math.abs(x.value.diff(tt,"year",!0))<1;){const Me=He[U.value];if(!Me)return;if(Me.offset(tt,Nt(Me[ve])?Me[ve](tt):(Q=Me[ve])!=null?Q:0),p&&p(tt))break;const Ne=Ft(tt).locale(c.value);x.value=Ne,e("pick",Ne,!0);break}},Be=ve=>{e("panel-change",x.value.toDate(),ve,k.value)};return Ve(()=>V.value,ve=>{if(["month","year"].includes(ve)){k.value=ve;return}k.value="date"},{immediate:!0}),Ve(()=>k.value,()=>{d==null||d.updatePopper()}),Ve(()=>g.value,ve=>{ve&&(x.value=Le())},{immediate:!0}),Ve(()=>t.parsedValue,ve=>{if(ve){if(V.value==="dates"||Array.isArray(ve))return;x.value=ve}else x.value=Le()},{immediate:!0}),e("set-picker-option",["isValidValue",Y]),e("set-picker-option",["formatToString",H]),e("set-picker-option",["parseUserInput",ne]),e("set-picker-option",["handleFocusPicker",Pe]),(ve,Q)=>(D(),ee("div",{class:j([y(n).b(),y(s).b(),{"has-sidebar":ve.$slots.sidebar||y(G),"has-time":y(de)}])},[J("div",{class:j(y(n).e("body-wrapper"))},[ze(ve.$slots,"sidebar",{class:j(y(n).e("sidebar"))}),y(G)?(D(),ee("div",{key:0,class:j(y(n).e("sidebar"))},[(D(!0),ee(ct,null,Ut(y(h),(he,we)=>(D(),ee("button",{key:we,type:"button",class:j(y(n).e("shortcut")),onClick:ae=>O(he)},$e(he.text),11,W1e))),128))],2)):Re("v-if",!0),J("div",{class:j(y(n).e("body"))},[y(de)?(D(),ee("div",{key:0,class:j(y(s).e("time-header"))},[J("span",{class:j(y(s).e("editor-wrap"))},[ue(y(us),{placeholder:y(l)("el.datepicker.selectDate"),"model-value":y(te),size:"small","validate-event":!1,onInput:Q[0]||(Q[0]=he=>E.value=he),onChange:Fe},null,8,["placeholder","model-value"])],2),It((D(),ee("span",{class:j(y(s).e("editor-wrap"))},[ue(y(us),{placeholder:y(l)("el.datepicker.selectTime"),"model-value":y(re),size:"small","validate-event":!1,onFocus:ge,onInput:Q[1]||(Q[1]=he=>C.value=he),onChange:Se},null,8,["placeholder","model-value"]),ue(y(jx),{visible:le.value,format:y(L),"parsed-value":x.value,onPick:pe},null,8,["visible","format","parsed-value"])],2)),[[y(Su),be]])],2)):Re("v-if",!0),It(J("div",{class:j([y(s).e("header"),(k.value==="year"||k.value==="month")&&y(s).e("header--bordered")])},[J("span",{class:j(y(s).e("prev-btn"))},[J("button",{type:"button","aria-label":y(l)("el.datepicker.prevYear"),class:j(["d-arrow-left",y(n).e("icon-btn")]),onClick:Q[2]||(Q[2]=he=>B(!1))},[ue(y(dt),null,{default:me(()=>[ue(y(df))]),_:1})],10,$1e),It(J("button",{type:"button","aria-label":y(l)("el.datepicker.prevMonth"),class:j([y(n).e("icon-btn"),"arrow-left"]),onClick:Q[3]||(Q[3]=he=>F(!1))},[ue(y(dt),null,{default:me(()=>[ue(y(cu))]),_:1})],10,X1e),[[vr,k.value==="date"]])],2),J("span",{role:"button",class:j(y(s).e("header-label")),"aria-live":"polite",tabindex:"0",onKeydown:Q[4]||(Q[4]=dr(he=>se("year"),["enter"])),onClick:Q[5]||(Q[5]=he=>se("year"))},$e(y(z)),35),It(J("span",{role:"button","aria-live":"polite",tabindex:"0",class:j([y(s).e("header-label"),{active:k.value==="month"}]),onKeydown:Q[6]||(Q[6]=dr(he=>se("month"),["enter"])),onClick:Q[7]||(Q[7]=he=>se("month"))},$e(y(l)(`el.datepicker.month${y(S)+1}`)),35),[[vr,k.value==="date"]]),J("span",{class:j(y(s).e("next-btn"))},[It(J("button",{type:"button","aria-label":y(l)("el.datepicker.nextMonth"),class:j([y(n).e("icon-btn"),"arrow-right"]),onClick:Q[8]||(Q[8]=he=>F(!0))},[ue(y(dt),null,{default:me(()=>[ue(y(Cs))]),_:1})],10,q1e),[[vr,k.value==="date"]]),J("button",{type:"button","aria-label":y(l)("el.datepicker.nextYear"),class:j([y(n).e("icon-btn"),"d-arrow-right"]),onClick:Q[9]||(Q[9]=he=>B(!0))},[ue(y(dt),null,{default:me(()=>[ue(y(hf))]),_:1})],10,K1e)],2)],2),[[vr,k.value!=="time"]]),J("div",{class:j(y(n).e("content")),onKeydown:Ee},[k.value==="date"?(D(),Ae(uC,{key:0,ref_key:"currentViewRef",ref:v,"selection-mode":y(V),date:x.value,"parsed-value":ve.parsedValue,"disabled-date":y(p),"cell-class-name":y(f),onPick:R},null,8,["selection-mode","date","parsed-value","disabled-date","cell-class-name"])):Re("v-if",!0),k.value==="year"?(D(),Ae(H1e,{key:1,ref_key:"currentViewRef",ref:v,date:x.value,"disabled-date":y(p),"parsed-value":ve.parsedValue,onPick:ie},null,8,["date","disabled-date","parsed-value"])):Re("v-if",!0),k.value==="month"?(D(),Ae(dC,{key:2,ref_key:"currentViewRef",ref:v,date:x.value,"parsed-value":ve.parsedValue,"disabled-date":y(p),onPick:X},null,8,["date","parsed-value","disabled-date"])):Re("v-if",!0)],34)],2)],2),It(J("div",{class:j(y(n).e("footer"))},[It(ue(y(Wn),{text:"",size:"small",class:j(y(n).e("link-btn")),disabled:y(Te),onClick:Z},{default:me(()=>[ir($e(y(l)("el.datepicker.now")),1)]),_:1},8,["class","disabled"]),[[vr,y(V)!=="dates"]]),ue(y(Wn),{plain:"",size:"small",class:j(y(n).e("link-btn")),disabled:y(q),onClick:ce},{default:me(()=>[ir($e(y(l)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2),[[vr,y(K)&&k.value==="date"]])],2))}});var Z1e=Qe(Y1e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-pick.vue"]]);const J1e=et({...Dz,...Uz}),Q1e=r=>{const{emit:e}=Dt(),t=kd(),i=Gn();return n=>{const s=Nt(n.value)?n.value():n.value;if(s){e("pick",[Ft(s[0]).locale(r.value),Ft(s[1]).locale(r.value)]);return}n.onClick&&n.onClick({attrs:t,slots:i,emit:e})}},zz=(r,{defaultValue:e,leftDate:t,rightDate:i,unit:n,onParsedValueChanged:s})=>{const{emit:o}=Dt(),{pickerNs:a}=ut(aC),l=Ge("date-range-picker"),{t:c,lang:u}=pr(),d=Q1e(u),h=W(),p=W(),f=W({endDate:null,selecting:!1}),m=b=>{f.value=b},g=(b=!1)=>{const w=y(h),_=y(p);cC([w,_])&&o("pick",[w,_],b)},v=b=>{f.value.selecting=b,b||(f.value.endDate=null)},x=()=>{const[b,w]=Bz(y(e),{lang:y(u),unit:n,unlinkPanels:r.unlinkPanels});h.value=void 0,p.value=void 0,t.value=b,i.value=w};return Ve(e,b=>{b&&x()},{immediate:!0}),Ve(()=>r.parsedValue,b=>{if(lt(b)&&b.length===2){const[w,_]=b;h.value=w,t.value=w,p.value=_,s(y(h),y(p))}else x()},{immediate:!0}),{minDate:h,maxDate:p,rangeState:f,lang:u,ppNs:a,drpNs:l,handleChangeRange:m,handleRangeConfirm:g,handleShortcutClick:d,onSelect:v,t:c}},exe=["onClick"],txe=["disabled"],rxe=["disabled"],ixe=["disabled"],nxe=["disabled"],Yx="month",sxe=xe({__name:"panel-date-range",props:J1e,emits:["pick","set-picker-option","calendar-change","panel-change"],setup(r,{emit:e}){const t=r,i=ut("EP_PICKER_BASE"),{disabledDate:n,cellClassName:s,format:o,defaultTime:a,clearable:l}=i.props,c=ai(i.props,"shortcuts"),u=ai(i.props,"defaultValue"),{lang:d}=pr(),h=W(Ft().locale(d.value)),p=W(Ft().locale(d.value).add(1,Yx)),{minDate:f,maxDate:m,rangeState:g,ppNs:v,drpNs:x,handleChangeRange:b,handleRangeConfirm:w,handleShortcutClick:_,onSelect:S,t:T}=zz(t,{defaultValue:u,leftDate:h,rightDate:p,unit:Yx,onParsedValueChanged:Q}),M=W({min:null,max:null}),E=W({min:null,max:null}),C=I(()=>`${h.value.year()} ${T("el.datepicker.year")} ${T(`el.datepicker.month${h.value.month()+1}`)}`),P=I(()=>`${p.value.year()} ${T("el.datepicker.year")} ${T(`el.datepicker.month${p.value.month()+1}`)}`),A=I(()=>h.value.year()),N=I(()=>h.value.month()),R=I(()=>p.value.year()),F=I(()=>p.value.month()),B=I(()=>!!c.value.length),k=I(()=>M.value.min!==null?M.value.min:f.value?f.value.format(G.value):""),z=I(()=>M.value.max!==null?M.value.max:m.value||f.value?(m.value||f.value).format(G.value):""),O=I(()=>E.value.min!==null?E.value.min:f.value?f.value.format(U.value):""),V=I(()=>E.value.max!==null?E.value.max:m.value||f.value?(m.value||f.value).format(U.value):""),U=I(()=>_B(o)),G=I(()=>wB(o)),X=he=>cC(he)&&(n?!n(he[0].toDate())&&!n(he[1].toDate()):!0),ie=()=>{h.value=h.value.subtract(1,"year"),t.unlinkPanels||(p.value=h.value.add(1,"month")),L("year")},se=()=>{h.value=h.value.subtract(1,"month"),t.unlinkPanels||(p.value=h.value.add(1,"month")),L("month")},de=()=>{t.unlinkPanels?p.value=p.value.add(1,"year"):(h.value=h.value.add(1,"year"),p.value=h.value.add(1,"month")),L("year")},K=()=>{t.unlinkPanels?p.value=p.value.add(1,"month"):(h.value=h.value.add(1,"month"),p.value=h.value.add(1,"month")),L("month")},q=()=>{h.value=h.value.add(1,"year"),L("year")},ce=()=>{h.value=h.value.add(1,"month"),L("month")},Te=()=>{p.value=p.value.subtract(1,"year"),L("year")},Z=()=>{p.value=p.value.subtract(1,"month"),L("month")},L=he=>{e("panel-change",[h.value.toDate(),p.value.toDate()],he)},$=I(()=>{const he=(N.value+1)%12,we=N.value+1>=12?1:0;return t.unlinkPanels&&new Date(A.value+we,he)<new Date(R.value,F.value)}),re=I(()=>t.unlinkPanels&&R.value*12+F.value-(A.value*12+N.value+1)>=12),te=I(()=>!(f.value&&m.value&&!g.value.selecting&&cC([f.value,m.value]))),le=I(()=>t.type==="datetime"||t.type==="datetimerange"),ge=(he,we)=>{if(he)return a?Ft(a[we]||a).locale(d.value).year(he.year()).month(he.month()).date(he.date()):he},be=(he,we=!0)=>{const ae=he.minDate,De=he.maxDate,We=ge(ae,0),je=ge(De,1);m.value===je&&f.value===We||(e("calendar-change",[ae.toDate(),De&&De.toDate()]),m.value=je,f.value=We,!(!we||le.value)&&w())},_e=W(!1),pe=W(!1),Se=()=>{_e.value=!1},Fe=()=>{pe.value=!1},Y=(he,we)=>{M.value[we]=he;const ae=Ft(he,G.value).locale(d.value);if(ae.isValid()){if(n&&n(ae.toDate()))return;we==="min"?(h.value=ae,f.value=(f.value||h.value).year(ae.year()).month(ae.month()).date(ae.date()),!t.unlinkPanels&&(!m.value||m.value.isBefore(f.value))&&(p.value=ae.add(1,"month"),m.value=f.value.add(1,"month"))):(p.value=ae,m.value=(m.value||p.value).year(ae.year()).month(ae.month()).date(ae.date()),!t.unlinkPanels&&(!f.value||f.value.isAfter(m.value))&&(h.value=ae.subtract(1,"month"),f.value=m.value.subtract(1,"month")))}},H=(he,we)=>{M.value[we]=null},ne=(he,we)=>{E.value[we]=he;const ae=Ft(he,U.value).locale(d.value);ae.isValid()&&(we==="min"?(_e.value=!0,f.value=(f.value||h.value).hour(ae.hour()).minute(ae.minute()).second(ae.second()),(!m.value||m.value.isBefore(f.value))&&(m.value=f.value)):(pe.value=!0,m.value=(m.value||p.value).hour(ae.hour()).minute(ae.minute()).second(ae.second()),p.value=m.value,m.value&&m.value.isBefore(f.value)&&(f.value=m.value)))},Le=(he,we)=>{E.value[we]=null,we==="min"?(h.value=f.value,_e.value=!1):(p.value=m.value,pe.value=!1)},Pe=(he,we,ae)=>{E.value.min||(he&&(h.value=he,f.value=(f.value||h.value).hour(he.hour()).minute(he.minute()).second(he.second())),ae||(_e.value=we),(!m.value||m.value.isBefore(f.value))&&(m.value=f.value,p.value=he))},Ee=(he,we,ae)=>{E.value.max||(he&&(p.value=he,m.value=(m.value||p.value).hour(he.hour()).minute(he.minute()).second(he.second())),ae||(pe.value=we),m.value&&m.value.isBefore(f.value)&&(f.value=m.value))},Ue=()=>{h.value=Bz(y(u),{lang:y(d),unit:"month",unlinkPanels:t.unlinkPanels})[0],p.value=h.value.add(1,"month"),e("pick",null)},Be=he=>lt(he)?he.map(we=>we.format(o)):he.format(o),ve=he=>lt(he)?he.map(we=>Ft(we,o).locale(d.value)):Ft(he,o).locale(d.value);function Q(he,we){if(t.unlinkPanels&&we){const ae=(he==null?void 0:he.year())||0,De=(he==null?void 0:he.month())||0,We=we.year(),je=we.month();p.value=ae===We&&De===je?we.add(1,Yx):we}else p.value=h.value.add(1,Yx),we&&(p.value=p.value.hour(we.hour()).minute(we.minute()).second(we.second()))}return e("set-picker-option",["isValidValue",X]),e("set-picker-option",["parseUserInput",ve]),e("set-picker-option",["formatToString",Be]),e("set-picker-option",["handleClear",Ue]),(he,we)=>(D(),ee("div",{class:j([y(v).b(),y(x).b(),{"has-sidebar":he.$slots.sidebar||y(B),"has-time":y(le)}])},[J("div",{class:j(y(v).e("body-wrapper"))},[ze(he.$slots,"sidebar",{class:j(y(v).e("sidebar"))}),y(B)?(D(),ee("div",{key:0,class:j(y(v).e("sidebar"))},[(D(!0),ee(ct,null,Ut(y(c),(ae,De)=>(D(),ee("button",{key:De,type:"button",class:j(y(v).e("shortcut")),onClick:We=>y(_)(ae)},$e(ae.text),11,exe))),128))],2)):Re("v-if",!0),J("div",{class:j(y(v).e("body"))},[y(le)?(D(),ee("div",{key:0,class:j(y(x).e("time-header"))},[J("span",{class:j(y(x).e("editors-wrap"))},[J("span",{class:j(y(x).e("time-picker-wrap"))},[ue(y(us),{size:"small",disabled:y(g).selecting,placeholder:y(T)("el.datepicker.startDate"),class:j(y(x).e("editor")),"model-value":y(k),"validate-event":!1,onInput:we[0]||(we[0]=ae=>Y(ae,"min")),onChange:we[1]||(we[1]=ae=>H(ae,"min"))},null,8,["disabled","placeholder","class","model-value"])],2),It((D(),ee("span",{class:j(y(x).e("time-picker-wrap"))},[ue(y(us),{size:"small",class:j(y(x).e("editor")),disabled:y(g).selecting,placeholder:y(T)("el.datepicker.startTime"),"model-value":y(O),"validate-event":!1,onFocus:we[2]||(we[2]=ae=>_e.value=!0),onInput:we[3]||(we[3]=ae=>ne(ae,"min")),onChange:we[4]||(we[4]=ae=>Le(ae,"min"))},null,8,["class","disabled","placeholder","model-value"]),ue(y(jx),{visible:_e.value,format:y(U),"datetime-role":"start","parsed-value":h.value,onPick:Pe},null,8,["visible","format","parsed-value"])],2)),[[y(Su),Se]])],2),J("span",null,[ue(y(dt),null,{default:me(()=>[ue(y(Cs))]),_:1})]),J("span",{class:j([y(x).e("editors-wrap"),"is-right"])},[J("span",{class:j(y(x).e("time-picker-wrap"))},[ue(y(us),{size:"small",class:j(y(x).e("editor")),disabled:y(g).selecting,placeholder:y(T)("el.datepicker.endDate"),"model-value":y(z),readonly:!y(f),"validate-event":!1,onInput:we[5]||(we[5]=ae=>Y(ae,"max")),onChange:we[6]||(we[6]=ae=>H(ae,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"])],2),It((D(),ee("span",{class:j(y(x).e("time-picker-wrap"))},[ue(y(us),{size:"small",class:j(y(x).e("editor")),disabled:y(g).selecting,placeholder:y(T)("el.datepicker.endTime"),"model-value":y(V),readonly:!y(f),"validate-event":!1,onFocus:we[7]||(we[7]=ae=>y(f)&&(pe.value=!0)),onInput:we[8]||(we[8]=ae=>ne(ae,"max")),onChange:we[9]||(we[9]=ae=>Le(ae,"max"))},null,8,["class","disabled","placeholder","model-value","readonly"]),ue(y(jx),{"datetime-role":"end",visible:pe.value,format:y(U),"parsed-value":p.value,onPick:Ee},null,8,["visible","format","parsed-value"])],2)),[[y(Su),Fe]])],2)],2)):Re("v-if",!0),J("div",{class:j([[y(v).e("content"),y(x).e("content")],"is-left"])},[J("div",{class:j(y(x).e("header"))},[J("button",{type:"button",class:j([y(v).e("icon-btn"),"d-arrow-left"]),onClick:ie},[ue(y(dt),null,{default:me(()=>[ue(y(df))]),_:1})],2),J("button",{type:"button",class:j([y(v).e("icon-btn"),"arrow-left"]),onClick:se},[ue(y(dt),null,{default:me(()=>[ue(y(cu))]),_:1})],2),he.unlinkPanels?(D(),ee("button",{key:0,type:"button",disabled:!y(re),class:j([[y(v).e("icon-btn"),{"is-disabled":!y(re)}],"d-arrow-right"]),onClick:q},[ue(y(dt),null,{default:me(()=>[ue(y(hf))]),_:1})],10,txe)):Re("v-if",!0),he.unlinkPanels?(D(),ee("button",{key:1,type:"button",disabled:!y($),class:j([[y(v).e("icon-btn"),{"is-disabled":!y($)}],"arrow-right"]),onClick:ce},[ue(y(dt),null,{default:me(()=>[ue(y(Cs))]),_:1})],10,rxe)):Re("v-if",!0),J("div",null,$e(y(C)),1)],2),ue(uC,{"selection-mode":"range",date:h.value,"min-date":y(f),"max-date":y(m),"range-state":y(g),"disabled-date":y(n),"cell-class-name":y(s),onChangerange:y(b),onPick:be,onSelect:y(S)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2),J("div",{class:j([[y(v).e("content"),y(x).e("content")],"is-right"])},[J("div",{class:j(y(x).e("header"))},[he.unlinkPanels?(D(),ee("button",{key:0,type:"button",disabled:!y(re),class:j([[y(v).e("icon-btn"),{"is-disabled":!y(re)}],"d-arrow-left"]),onClick:Te},[ue(y(dt),null,{default:me(()=>[ue(y(df))]),_:1})],10,ixe)):Re("v-if",!0),he.unlinkPanels?(D(),ee("button",{key:1,type:"button",disabled:!y($),class:j([[y(v).e("icon-btn"),{"is-disabled":!y($)}],"arrow-left"]),onClick:Z},[ue(y(dt),null,{default:me(()=>[ue(y(cu))]),_:1})],10,nxe)):Re("v-if",!0),J("button",{type:"button",class:j([y(v).e("icon-btn"),"d-arrow-right"]),onClick:de},[ue(y(dt),null,{default:me(()=>[ue(y(hf))]),_:1})],2),J("button",{type:"button",class:j([y(v).e("icon-btn"),"arrow-right"]),onClick:K},[ue(y(dt),null,{default:me(()=>[ue(y(Cs))]),_:1})],2),J("div",null,$e(y(P)),1)],2),ue(uC,{"selection-mode":"range",date:p.value,"min-date":y(f),"max-date":y(m),"range-state":y(g),"disabled-date":y(n),"cell-class-name":y(s),onChangerange:y(b),onPick:be,onSelect:y(S)},null,8,["date","min-date","max-date","range-state","disabled-date","cell-class-name","onChangerange","onSelect"])],2)],2)],2),y(le)?(D(),ee("div",{key:0,class:j(y(v).e("footer"))},[y(l)?(D(),Ae(y(Wn),{key:0,text:"",size:"small",class:j(y(v).e("link-btn")),onClick:Ue},{default:me(()=>[ir($e(y(T)("el.datepicker.clear")),1)]),_:1},8,["class"])):Re("v-if",!0),ue(y(Wn),{plain:"",size:"small",class:j(y(v).e("link-btn")),disabled:y(te),onClick:we[10]||(we[10]=ae=>y(w)(!1))},{default:me(()=>[ir($e(y(T)("el.datepicker.confirm")),1)]),_:1},8,["class","disabled"])],2)):Re("v-if",!0)],2))}});var oxe=Qe(sxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-date-range.vue"]]);const axe=et({...Uz}),lxe=["pick","set-picker-option"],cxe=({unlinkPanels:r,leftDate:e,rightDate:t})=>{const{t:i}=pr(),n=()=>{e.value=e.value.subtract(1,"year"),r.value||(t.value=t.value.subtract(1,"year"))},s=()=>{r.value||(e.value=e.value.add(1,"year")),t.value=t.value.add(1,"year")},o=()=>{e.value=e.value.add(1,"year")},a=()=>{t.value=t.value.subtract(1,"year")},l=I(()=>`${e.value.year()} ${i("el.datepicker.year")}`),c=I(()=>`${t.value.year()} ${i("el.datepicker.year")}`),u=I(()=>e.value.year()),d=I(()=>t.value.year()===e.value.year()?e.value.year()+1:t.value.year());return{leftPrevYear:n,rightNextYear:s,leftNextYear:o,rightPrevYear:a,leftLabel:l,rightLabel:c,leftYear:u,rightYear:d}},uxe=["onClick"],dxe=["disabled"],hxe=["disabled"],Zx="year",pxe=xe({name:"DatePickerMonthRange"}),fxe=xe({...pxe,props:axe,emits:lxe,setup(r,{emit:e}){const t=r,{lang:i}=pr(),n=ut("EP_PICKER_BASE"),{shortcuts:s,disabledDate:o,format:a}=n.props,l=ai(n.props,"defaultValue"),c=W(Ft().locale(i.value)),u=W(Ft().locale(i.value).add(1,Zx)),{minDate:d,maxDate:h,rangeState:p,ppNs:f,drpNs:m,handleChangeRange:g,handleRangeConfirm:v,handleShortcutClick:x,onSelect:b}=zz(t,{defaultValue:l,leftDate:c,rightDate:u,unit:Zx,onParsedValueChanged:B}),w=I(()=>!!s.length),{leftPrevYear:_,rightNextYear:S,leftNextYear:T,rightPrevYear:M,leftLabel:E,rightLabel:C,leftYear:P,rightYear:A}=cxe({unlinkPanels:ai(t,"unlinkPanels"),leftDate:c,rightDate:u}),N=I(()=>t.unlinkPanels&&A.value>P.value+1),R=(k,z=!0)=>{const O=k.minDate,V=k.maxDate;h.value===V&&d.value===O||(h.value=V,d.value=O,z&&v())},F=k=>k.map(z=>z.format(a));function B(k,z){if(t.unlinkPanels&&z){const O=(k==null?void 0:k.year())||0,V=z.year();u.value=O===V?z.add(1,Zx):z}else u.value=c.value.add(1,Zx)}return e("set-picker-option",["formatToString",F]),(k,z)=>(D(),ee("div",{class:j([y(f).b(),y(m).b(),{"has-sidebar":!!k.$slots.sidebar||y(w)}])},[J("div",{class:j(y(f).e("body-wrapper"))},[ze(k.$slots,"sidebar",{class:j(y(f).e("sidebar"))}),y(w)?(D(),ee("div",{key:0,class:j(y(f).e("sidebar"))},[(D(!0),ee(ct,null,Ut(y(s),(O,V)=>(D(),ee("button",{key:V,type:"button",class:j(y(f).e("shortcut")),onClick:U=>y(x)(O)},$e(O.text),11,uxe))),128))],2)):Re("v-if",!0),J("div",{class:j(y(f).e("body"))},[J("div",{class:j([[y(f).e("content"),y(m).e("content")],"is-left"])},[J("div",{class:j(y(m).e("header"))},[J("button",{type:"button",class:j([y(f).e("icon-btn"),"d-arrow-left"]),onClick:z[0]||(z[0]=(...O)=>y(_)&&y(_)(...O))},[ue(y(dt),null,{default:me(()=>[ue(y(df))]),_:1})],2),k.unlinkPanels?(D(),ee("button",{key:0,type:"button",disabled:!y(N),class:j([[y(f).e("icon-btn"),{[y(f).is("disabled")]:!y(N)}],"d-arrow-right"]),onClick:z[1]||(z[1]=(...O)=>y(T)&&y(T)(...O))},[ue(y(dt),null,{default:me(()=>[ue(y(hf))]),_:1})],10,dxe)):Re("v-if",!0),J("div",null,$e(y(E)),1)],2),ue(dC,{"selection-mode":"range",date:c.value,"min-date":y(d),"max-date":y(h),"range-state":y(p),"disabled-date":y(o),onChangerange:y(g),onPick:R,onSelect:y(b)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2),J("div",{class:j([[y(f).e("content"),y(m).e("content")],"is-right"])},[J("div",{class:j(y(m).e("header"))},[k.unlinkPanels?(D(),ee("button",{key:0,type:"button",disabled:!y(N),class:j([[y(f).e("icon-btn"),{"is-disabled":!y(N)}],"d-arrow-left"]),onClick:z[2]||(z[2]=(...O)=>y(M)&&y(M)(...O))},[ue(y(dt),null,{default:me(()=>[ue(y(df))]),_:1})],10,hxe)):Re("v-if",!0),J("button",{type:"button",class:j([y(f).e("icon-btn"),"d-arrow-right"]),onClick:z[3]||(z[3]=(...O)=>y(S)&&y(S)(...O))},[ue(y(dt),null,{default:me(()=>[ue(y(hf))]),_:1})],2),J("div",null,$e(y(C)),1)],2),ue(dC,{"selection-mode":"range",date:u.value,"min-date":y(d),"max-date":y(h),"range-state":y(p),"disabled-date":y(o),onChangerange:y(g),onPick:R,onSelect:y(b)},null,8,["date","min-date","max-date","range-state","disabled-date","onChangerange","onSelect"])],2)],2)],2)],2))}});var mxe=Qe(fxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/date-picker/src/date-picker-com/panel-month-range.vue"]]);const gxe=function(r){switch(r){case"daterange":case"datetimerange":return oxe;case"monthrange":return mxe;default:return Z1e}};Ft.extend(KB),Ft.extend(a1e),Ft.extend(BE),Ft.extend(c1e),Ft.extend(d1e),Ft.extend(p1e),Ft.extend(m1e),Ft.extend(v1e);var vxe=xe({name:"ElDatePicker",install:null,props:y1e,emits:["update:modelValue"],setup(r,{expose:e,emit:t,slots:i}){const n=Ge("picker-panel");Yt("ElPopperOptions",br(ai(r,"popperOptions"))),Yt(aC,{slots:i,pickerNs:n});const s=W();e({focus:(a=!0)=>{var l;(l=s.value)==null||l.focus(a)},handleOpen:()=>{var a;(a=s.value)==null||a.handleOpen()},handleClose:()=>{var a;(a=s.value)==null||a.handleClose()}});const o=a=>{t("update:modelValue",a)};return()=>{var a;const l=(a=r.format)!=null?a:rve[r.type]||Af,c=gxe(r.type);return ue(NB,qt(r,{format:l,type:r.type,ref:s,"onUpdate:modelValue":o}),{default:u=>ue(c,u,null),"range-separator":i["range-separator"]})}}});const Jx=vxe;Jx.install=r=>{r.component(Jx.name,Jx)};const yxe=Jx,hC=Symbol("elDescriptions");var i0=xe({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String},type:{type:String}},setup(){return{descriptions:ut(hC,{})}},render(){var r,e,t,i,n,s;const o=cde(this.cell),{border:a,direction:l}=this.descriptions,c=l==="vertical",u=((t=(e=(r=this.cell)==null?void 0:r.children)==null?void 0:e.label)==null?void 0:t.call(e))||o.label,d=(s=(n=(i=this.cell)==null?void 0:i.children)==null?void 0:n.default)==null?void 0:s.call(n),h=o.span,p=o.align?`is-${o.align}`:"",f=o.labelAlign?`is-${o.labelAlign}`:p,m=o.className,g=o.labelClassName,v={width:Ti(o.width),minWidth:Ti(o.minWidth)},x=Ge("descriptions");switch(this.type){case"label":return yt(this.tag,{style:v,class:[x.e("cell"),x.e("label"),x.is("bordered-label",a),x.is("vertical-label",c),f,g],colSpan:c?h:1},u);case"content":return yt(this.tag,{style:v,class:[x.e("cell"),x.e("content"),x.is("bordered-content",a),x.is("vertical-content",c),p,m],colSpan:c?h:h*2-1},d);default:return yt("td",{style:v,class:[x.e("cell"),p],colSpan:h},[Vi(u)?void 0:yt("span",{class:[x.e("label"),g]},u),yt("span",{class:[x.e("content"),m]},d)])}}});const bxe=et({row:{type:Array,default:()=>[]}}),xxe={key:1},wxe=xe({name:"ElDescriptionsRow"}),_xe=xe({...wxe,props:bxe,setup(r){const e=ut(hC,{});return(t,i)=>y(e).direction==="vertical"?(D(),ee(ct,{key:0},[J("tr",null,[(D(!0),ee(ct,null,Ut(t.row,(n,s)=>(D(),Ae(y(i0),{key:`tr1-${s}`,cell:n,tag:"th",type:"label"},null,8,["cell"]))),128))]),J("tr",null,[(D(!0),ee(ct,null,Ut(t.row,(n,s)=>(D(),Ae(y(i0),{key:`tr2-${s}`,cell:n,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(D(),ee("tr",xxe,[(D(!0),ee(ct,null,Ut(t.row,(n,s)=>(D(),ee(ct,{key:`tr3-${s}`},[y(e).border?(D(),ee(ct,{key:0},[ue(y(i0),{cell:n,tag:"td",type:"label"},null,8,["cell"]),ue(y(i0),{cell:n,tag:"td",type:"content"},null,8,["cell"])],64)):(D(),Ae(y(i0),{key:1,cell:n,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var Sxe=Qe(_xe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const Txe=et({border:{type:Boolean,default:!1},column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:jn,title:{type:String,default:""},extra:{type:String,default:""}}),Mxe=xe({name:"ElDescriptions"}),Exe=xe({...Mxe,props:Txe,setup(r){const e=r,t=Ge("descriptions"),i=Hi(),n=Gn();Yt(hC,e);const s=I(()=>[t.b(),t.m(i.value)]),o=(l,c,u,d=!1)=>(l.props||(l.props={}),c>u&&(l.props.span=u),d&&(l.props.span=c),l),a=()=>{var l;const c=pf((l=n.default)==null?void 0:l.call(n)).filter(f=>{var m;return((m=f==null?void 0:f.type)==null?void 0:m.name)==="ElDescriptionsItem"}),u=[];let d=[],h=e.column,p=0;return c.forEach((f,m)=>{var g;const v=((g=f.props)==null?void 0:g.span)||1;if(m<c.length-1&&(p+=v>h?h:v),m===c.length-1){const x=e.column-p%e.column;d.push(o(f,x,h,!0)),u.push(d);return}v<h?(h-=v,d.push(f)):(d.push(o(f,v,h)),u.push(d),h=e.column,d=[])}),u};return(l,c)=>(D(),ee("div",{class:j(y(s))},[l.title||l.extra||l.$slots.title||l.$slots.extra?(D(),ee("div",{key:0,class:j(y(t).e("header"))},[J("div",{class:j(y(t).e("title"))},[ze(l.$slots,"title",{},()=>[ir($e(l.title),1)])],2),J("div",{class:j(y(t).e("extra"))},[ze(l.$slots,"extra",{},()=>[ir($e(l.extra),1)])],2)],2)):Re("v-if",!0),J("div",{class:j(y(t).e("body"))},[J("table",{class:j([y(t).e("table"),y(t).is("bordered",l.border)])},[J("tbody",null,[(D(!0),ee(ct,null,Ut(a(),(u,d)=>(D(),Ae(Sxe,{key:d,row:u},null,8,["row"]))),128))])],2)],2)],2))}});var Cxe=Qe(Exe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]),Vz=xe({name:"ElDescriptionsItem",props:{label:{type:String,default:""},span:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},align:{type:String,default:"left"},labelAlign:{type:String,default:""},className:{type:String,default:""},labelClassName:{type:String,default:""}}});const Axe=zt(Cxe,{DescriptionsItem:Vz}),Nxe=fi(Vz),Rxe=et({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:Oe([String,Array,Object])},zIndex:{type:Oe([String,Number])}}),kxe={click:r=>r instanceof MouseEvent},Lxe="overlay";var Oxe=xe({name:"ElOverlay",props:Rxe,emits:kxe,setup(r,{slots:e,emit:t}){const i=Ge(Lxe),n=l=>{t("click",l)},{onClick:s,onMousedown:o,onMouseup:a}=hE(r.customMaskEvent?void 0:n);return()=>r.mask?ue("div",{class:[i.b(),r.overlayClass],style:{zIndex:r.zIndex},onClick:s,onMousedown:o,onMouseup:a},[ze(e,"default")],ea.STYLE|ea.CLASS|ea.PROPS,["onClick","onMouseup","onMousedown"]):yt("div",{class:r.overlayClass,style:{zIndex:r.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[ze(e,"default")])}});const pC=Oxe,Gz=Symbol("dialogInjectionKey"),jz=et({center:Boolean,alignCenter:Boolean,closeIcon:{type:Gr},customClass:{type:String,default:""},draggable:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),Pxe={close:()=>!0},Ixe=["aria-level"],Dxe=["aria-label"],Uxe=["id"],Fxe=xe({name:"ElDialogContent"}),Bxe=xe({...Fxe,props:jz,emits:Pxe,setup(r){const e=r,{t}=pr(),{Close:i}=wU,{dialogRef:n,headerRef:s,bodyId:o,ns:a,style:l}=ut(Gz),{focusTrapRef:c}=ut(RE),u=I(()=>[a.b(),a.is("fullscreen",e.fullscreen),a.is("draggable",e.draggable),a.is("align-center",e.alignCenter),{[a.m("center")]:e.center},e.customClass]),d=hx(c,n),h=I(()=>e.draggable);return MU(n,s,h),(p,f)=>(D(),ee("div",{ref:y(d),class:j(y(u)),style:pt(y(l)),tabindex:"-1"},[J("header",{ref_key:"headerRef",ref:s,class:j(y(a).e("header"))},[ze(p.$slots,"header",{},()=>[J("span",{role:"heading","aria-level":p.ariaLevel,class:j(y(a).e("title"))},$e(p.title),11,Ixe)]),p.showClose?(D(),ee("button",{key:0,"aria-label":y(t)("el.dialog.close"),class:j(y(a).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=m=>p.$emit("close"))},[ue(y(dt),{class:j(y(a).e("close"))},{default:me(()=>[(D(),Ae(Xt(p.closeIcon||y(i))))]),_:1},8,["class"])],10,Dxe)):Re("v-if",!0)],2),J("div",{id:y(o),class:j(y(a).e("body"))},[ze(p.$slots,"default")],10,Uxe),p.$slots.footer?(D(),ee("footer",{key:0,class:j(y(a).e("footer"))},[ze(p.$slots,"footer")],2)):Re("v-if",!0)],6))}});var zxe=Qe(Bxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Hz=et({...jz,appendToBody:Boolean,beforeClose:{type:Oe(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),Wz={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Wt]:r=>Gi(r),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},$z=(r,e)=>{const t=Dt().emit,{nextZIndex:i}=wf();let n="";const s=na(),o=na(),a=W(!1),l=W(!1),c=W(!1),u=W(r.zIndex||i());let d,h;const p=Mx("namespace",Uv),f=I(()=>{const N={},R=`--${p.value}-dialog`;return r.fullscreen||(r.top&&(N[`${R}-margin-top`]=r.top),r.width&&(N[`${R}-width`]=Ti(r.width))),N}),m=I(()=>r.alignCenter?{display:"flex"}:{});function g(){t("opened")}function v(){t("closed"),t(Wt,!1),r.destroyOnClose&&(c.value=!1)}function x(){t("close")}function b(){h==null||h(),d==null||d(),r.openDelay&&r.openDelay>0?{stop:d}=Ud(()=>T(),r.openDelay):T()}function w(){d==null||d(),h==null||h(),r.closeDelay&&r.closeDelay>0?{stop:h}=Ud(()=>M(),r.closeDelay):M()}function _(){function N(R){R||(l.value=!0,a.value=!1)}r.beforeClose?r.beforeClose(N):w()}function S(){r.closeOnClickModal&&_()}function T(){ar&&(a.value=!0)}function M(){a.value=!1}function E(){t("openAutoFocus")}function C(){t("closeAutoFocus")}function P(N){var R;((R=N.detail)==null?void 0:R.focusReason)==="pointer"&&N.preventDefault()}r.lockScroll&&AU(a);function A(){r.closeOnPressEscape&&_()}return Ve(()=>r.modelValue,N=>{N?(l.value=!1,b(),c.value=!0,u.value=r.zIndex?u.value++:i(),ht(()=>{t("open"),e.value&&(e.value.scrollTop=0)})):a.value&&w()}),Ve(()=>r.fullscreen,N=>{e.value&&(N?(n=e.value.style.transform,e.value.style.transform=""):e.value.style.transform=n)}),Et(()=>{r.modelValue&&(a.value=!0,c.value=!0,b())}),{afterEnter:g,afterLeave:v,beforeLeave:x,handleClose:_,onModalClick:S,close:w,doClose:M,onOpenAutoFocus:E,onCloseAutoFocus:C,onCloseRequested:A,onFocusoutPrevented:P,titleId:s,bodyId:o,closed:l,style:f,overlayDialogStyle:m,rendered:c,visible:a,zIndex:u}},Vxe=["aria-label","aria-labelledby","aria-describedby"],Gxe=xe({name:"ElDialog",inheritAttrs:!1}),jxe=xe({...Gxe,props:Hz,emits:Wz,setup(r,{expose:e}){const t=r,i=Gn();bl({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},I(()=>!!i.title)),bl({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},I(()=>!!t.customClass));const n=Ge("dialog"),s=W(),o=W(),a=W(),{visible:l,titleId:c,bodyId:u,style:d,overlayDialogStyle:h,rendered:p,zIndex:f,afterEnter:m,afterLeave:g,beforeLeave:v,handleClose:x,onModalClick:b,onOpenAutoFocus:w,onCloseAutoFocus:_,onCloseRequested:S,onFocusoutPrevented:T}=$z(t,s);Yt(Gz,{dialogRef:s,headerRef:o,bodyId:u,ns:n,rendered:p,style:d});const M=hE(b),E=I(()=>t.draggable&&!t.fullscreen);return e({visible:l,dialogContentRef:a}),(C,P)=>(D(),Ae(cv,{to:"body",disabled:!C.appendToBody},[ue(Li,{name:"dialog-fade",onAfterEnter:y(m),onAfterLeave:y(g),onBeforeLeave:y(v),persisted:""},{default:me(()=>[It(ue(y(pC),{"custom-mask-event":"",mask:C.modal,"overlay-class":C.modalClass,"z-index":y(f)},{default:me(()=>[J("div",{role:"dialog","aria-modal":"true","aria-label":C.title||void 0,"aria-labelledby":C.title?void 0:y(c),"aria-describedby":y(u),class:j(`${y(n).namespace.value}-overlay-dialog`),style:pt(y(h)),onClick:P[0]||(P[0]=(...A)=>y(M).onClick&&y(M).onClick(...A)),onMousedown:P[1]||(P[1]=(...A)=>y(M).onMousedown&&y(M).onMousedown(...A)),onMouseup:P[2]||(P[2]=(...A)=>y(M).onMouseup&&y(M).onMouseup(...A))},[ue(y(Px),{loop:"",trapped:y(l),"focus-start-el":"container",onFocusAfterTrapped:y(w),onFocusAfterReleased:y(_),onFocusoutPrevented:y(T),onReleaseRequested:y(S)},{default:me(()=>[y(p)?(D(),Ae(zxe,qt({key:0,ref_key:"dialogContentRef",ref:a},C.$attrs,{"custom-class":C.customClass,center:C.center,"align-center":C.alignCenter,"close-icon":C.closeIcon,draggable:y(E),fullscreen:C.fullscreen,"show-close":C.showClose,title:C.title,"aria-level":C.headerAriaLevel,onClose:y(x)}),Zl({header:me(()=>[C.$slots.title?ze(C.$slots,"title",{key:1}):ze(C.$slots,"header",{key:0,close:y(x),titleId:y(c),titleClass:y(n).e("title")})]),default:me(()=>[ze(C.$slots,"default")]),_:2},[C.$slots.footer?{name:"footer",fn:me(()=>[ze(C.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","aria-level","onClose"])):Re("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Vxe)]),_:3},8,["mask","overlay-class","z-index"]),[[vr,y(l)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var Hxe=Qe(jxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const Wxe=zt(Hxe),$xe=et({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Oe(String),default:"solid"}}),Xxe=xe({name:"ElDivider"}),qxe=xe({...Xxe,props:$xe,setup(r){const e=r,t=Ge("divider"),i=I(()=>t.cssVar({"border-style":e.borderStyle}));return(n,s)=>(D(),ee("div",{class:j([y(t).b(),y(t).m(n.direction)]),style:pt(y(i)),role:"separator"},[n.$slots.default&&n.direction!=="vertical"?(D(),ee("div",{key:0,class:j([y(t).e("text"),y(t).is(n.contentPosition)])},[ze(n.$slots,"default")],2)):Re("v-if",!0)],6))}});var Kxe=Qe(qxe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const Xz=zt(Kxe),Yxe=et({...Hz,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),Zxe=Wz,Jxe=xe({name:"ElDrawer",components:{ElOverlay:pC,ElFocusTrap:Px,ElIcon:dt,Close:Pa},inheritAttrs:!1,props:Yxe,emits:Zxe,setup(r,{slots:e}){bl({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},I(()=>!!e.title)),bl({scope:"el-drawer",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/drawer.html#attributes",type:"Attribute"},I(()=>!!r.customClass));const t=W(),i=W(),n=Ge("drawer"),{t:s}=pr(),o=I(()=>r.direction==="rtl"||r.direction==="ltr"),a=I(()=>Ti(r.size));return{...$z(r,t),drawerRef:t,focusStartRef:i,isHorizontal:o,drawerSize:a,ns:n,t:s}}}),Qxe=["aria-label","aria-labelledby","aria-describedby"],ewe=["id","aria-level"],twe=["aria-label"],rwe=["id"];function iwe(r,e,t,i,n,s){const o=gt("close"),a=gt("el-icon"),l=gt("el-focus-trap"),c=gt("el-overlay");return D(),Ae(cv,{to:"body",disabled:!r.appendToBody},[ue(Li,{name:r.ns.b("fade"),onAfterEnter:r.afterEnter,onAfterLeave:r.afterLeave,onBeforeLeave:r.beforeLeave,persisted:""},{default:me(()=>[It(ue(c,{mask:r.modal,"overlay-class":r.modalClass,"z-index":r.zIndex,onClick:r.onModalClick},{default:me(()=>[ue(l,{loop:"",trapped:r.visible,"focus-trap-el":r.drawerRef,"focus-start-el":r.focusStartRef,onReleaseRequested:r.onCloseRequested},{default:me(()=>[J("div",qt({ref:"drawerRef","aria-modal":"true","aria-label":r.title||void 0,"aria-labelledby":r.title?void 0:r.titleId,"aria-describedby":r.bodyId},r.$attrs,{class:[r.ns.b(),r.direction,r.visible&&"open",r.customClass],style:r.isHorizontal?"width: "+r.drawerSize:"height: "+r.drawerSize,role:"dialog",onClick:e[1]||(e[1]=Mt(()=>{},["stop"]))}),[J("span",{ref:"focusStartRef",class:j(r.ns.e("sr-focus")),tabindex:"-1"},null,2),r.withHeader?(D(),ee("header",{key:0,class:j(r.ns.e("header"))},[r.$slots.title?ze(r.$slots,"title",{key:1},()=>[Re(" DEPRECATED SLOT ")]):ze(r.$slots,"header",{key:0,close:r.handleClose,titleId:r.titleId,titleClass:r.ns.e("title")},()=>[r.$slots.title?Re("v-if",!0):(D(),ee("span",{key:0,id:r.titleId,role:"heading","aria-level":r.headerAriaLevel,class:j(r.ns.e("title"))},$e(r.title),11,ewe))]),r.showClose?(D(),ee("button",{key:2,"aria-label":r.t("el.drawer.close"),class:j(r.ns.e("close-btn")),type:"button",onClick:e[0]||(e[0]=(...u)=>r.handleClose&&r.handleClose(...u))},[ue(a,{class:j(r.ns.e("close"))},{default:me(()=>[ue(o)]),_:1},8,["class"])],10,twe)):Re("v-if",!0)],2)):Re("v-if",!0),r.rendered?(D(),ee("div",{key:1,id:r.bodyId,class:j(r.ns.e("body"))},[ze(r.$slots,"default")],10,rwe)):Re("v-if",!0),r.$slots.footer?(D(),ee("div",{key:2,class:j(r.ns.e("footer"))},[ze(r.$slots,"footer")],2)):Re("v-if",!0)],16,Qxe)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[vr,r.visible]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var nwe=Qe(Jxe,[["render",iwe],["__file","/home/runner/work/element-plus/element-plus/packages/components/drawer/src/drawer.vue"]]);const swe=zt(nwe),owe=xe({inheritAttrs:!1});function awe(r,e,t,i,n,s){return ze(r.$slots,"default")}var lwe=Qe(owe,[["render",awe],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection.vue"]]);const cwe=xe({name:"ElCollectionItem",inheritAttrs:!1});function uwe(r,e,t,i,n,s){return ze(r.$slots,"default")}var dwe=Qe(cwe,[["render",uwe],["__file","/home/runner/work/element-plus/element-plus/packages/components/collection/src/collection-item.vue"]]);const qz="data-el-collection-item",Kz=r=>{const e=`El${r}Collection`,t=`${e}Item`,i=Symbol(e),n=Symbol(t),s={...lwe,name:e,setup(){const a=W(null),l=new Map;Yt(i,{itemMap:l,getItems:()=>{const c=y(a);if(!c)return[];const u=Array.from(c.querySelectorAll(`[${qz}]`));return[...l.values()].sort((d,h)=>u.indexOf(d.ref)-u.indexOf(h.ref))},collectionRef:a})}},o={...dwe,name:t,setup(a,{attrs:l}){const c=W(null),u=ut(i,void 0);Yt(n,{collectionItemRef:c}),Et(()=>{const d=y(c);d&&u.itemMap.set(d,{ref:d,...l})}),Zr(()=>{const d=y(c);u.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:i,COLLECTION_ITEM_INJECTION_KEY:n,ElCollection:s,ElCollectionItem:o}},hwe=et({style:{type:Oe([String,Array,Object])},currentTabId:{type:Oe(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Oe(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:pwe,ElCollectionItem:fwe,COLLECTION_INJECTION_KEY:fC,COLLECTION_ITEM_INJECTION_KEY:mwe}=Kz("RovingFocusGroup"),mC=Symbol("elRovingFocusGroup"),Yz=Symbol("elRovingFocusGroupItem"),gwe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},vwe=(r,e)=>{if(e!=="rtl")return r;switch(r){case bt.right:return bt.left;case bt.left:return bt.right;default:return r}},ywe=(r,e,t)=>{const i=vwe(r.key,t);if(!(e==="vertical"&&[bt.left,bt.right].includes(i))&&!(e==="horizontal"&&[bt.up,bt.down].includes(i)))return gwe[i]},bwe=(r,e)=>r.map((t,i)=>r[(i+e)%r.length]),gC=r=>{const{activeElement:e}=document;for(const t of r)if(t===e||(t.focus(),e!==document.activeElement))return},Zz="currentTabIdChange",Jz="rovingFocusGroup.entryFocus",xwe={bubbles:!1,cancelable:!0},wwe=xe({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:hwe,emits:[Zz,"entryFocus"],setup(r,{emit:e}){var t;const i=W((t=r.currentTabId||r.defaultCurrentTabId)!=null?t:null),n=W(!1),s=W(!1),o=W(null),{getItems:a}=ut(fC,void 0),l=I(()=>[{outline:"none"},r.style]),c=m=>{e(Zz,m)},u=()=>{n.value=!0},d=hi(m=>{var g;(g=r.onMousedown)==null||g.call(r,m)},()=>{s.value=!0}),h=hi(m=>{var g;(g=r.onFocus)==null||g.call(r,m)},m=>{const g=!y(s),{target:v,currentTarget:x}=m;if(v===x&&g&&!y(n)){const b=new Event(Jz,xwe);if(x==null||x.dispatchEvent(b),!b.defaultPrevented){const w=a().filter(M=>M.focusable),_=w.find(M=>M.active),S=w.find(M=>M.id===y(i)),T=[_,S,...w].filter(Boolean).map(M=>M.ref);gC(T)}}s.value=!1}),p=hi(m=>{var g;(g=r.onBlur)==null||g.call(r,m)},()=>{n.value=!1}),f=(...m)=>{e("entryFocus",...m)};Yt(mC,{currentTabbedId:$p(i),loop:ai(r,"loop"),tabIndex:I(()=>y(n)?-1:0),rovingFocusGroupRef:o,rovingFocusGroupRootStyle:l,orientation:ai(r,"orientation"),dir:ai(r,"dir"),onItemFocus:c,onItemShiftTab:u,onBlur:p,onFocus:h,onMousedown:d}),Ve(()=>r.currentTabId,m=>{i.value=m??null}),Qr(o,Jz,f)}});function _we(r,e,t,i,n,s){return ze(r.$slots,"default")}var Swe=Qe(wwe,[["render",_we],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group-impl.vue"]]);const Twe=xe({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:pwe,ElRovingFocusGroupImpl:Swe}});function Mwe(r,e,t,i,n,s){const o=gt("el-roving-focus-group-impl"),a=gt("el-focus-group-collection");return D(),Ae(a,null,{default:me(()=>[ue(o,Ca(V1(r.$attrs)),{default:me(()=>[ze(r.$slots,"default")]),_:3},16)]),_:3})}var Ewe=Qe(Twe,[["render",Mwe],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-group.vue"]]);const Cwe=xe({components:{ElRovingFocusCollectionItem:fwe},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(r,{emit:e}){const{currentTabbedId:t,loop:i,onItemFocus:n,onItemShiftTab:s}=ut(mC,void 0),{getItems:o}=ut(fC,void 0),a=na(),l=W(null),c=hi(p=>{e("mousedown",p)},p=>{r.focusable?n(y(a)):p.preventDefault()}),u=hi(p=>{e("focus",p)},()=>{n(y(a))}),d=hi(p=>{e("keydown",p)},p=>{const{key:f,shiftKey:m,target:g,currentTarget:v}=p;if(f===bt.tab&&m){s();return}if(g!==v)return;const x=ywe(p);if(x){p.preventDefault();let b=o().filter(w=>w.focusable).map(w=>w.ref);switch(x){case"last":{b.reverse();break}case"prev":case"next":{x==="prev"&&b.reverse();const w=b.indexOf(v);b=i.value?bwe(b,w+1):b.slice(w+1);break}}ht(()=>{gC(b)})}}),h=I(()=>t.value===y(a));return Yt(Yz,{rovingFocusGroupItemRef:l,tabIndex:I(()=>y(h)?0:-1),handleMousedown:c,handleFocus:u,handleKeydown:d}),{id:a,handleKeydown:d,handleFocus:u,handleMousedown:c}}});function Awe(r,e,t,i,n,s){const o=gt("el-roving-focus-collection-item");return D(),Ae(o,{id:r.id,focusable:r.focusable,active:r.active},{default:me(()=>[ze(r.$slots,"default")]),_:3},8,["id","focusable","active"])}var Nwe=Qe(Cwe,[["render",Awe],["__file","/home/runner/work/element-plus/element-plus/packages/components/roving-focus-group/src/roving-focus-item.vue"]]);const Qx=et({trigger:Jv.trigger,effect:{...Nn.effect,default:"light"},type:{type:Oe(String)},placement:{type:Oe(String),default:"bottom"},popperOptions:{type:Oe(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Oe([Number,String]),default:0},maxHeight:{type:Oe([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:Oe(Object)},teleported:Nn.teleported}),Qz=et({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:Gr}}),Rwe=et({onKeydown:{type:Oe(Function)}}),kwe=[bt.down,bt.pageDown,bt.home],e5=[bt.up,bt.pageUp,bt.end],Lwe=[...kwe,...e5],{ElCollection:Owe,ElCollectionItem:Pwe,COLLECTION_INJECTION_KEY:Iwe,COLLECTION_ITEM_INJECTION_KEY:Dwe}=Kz("Dropdown"),ew=Symbol("elDropdown"),{ButtonGroup:Uwe}=Wn,Fwe=xe({name:"ElDropdown",components:{ElButton:Wn,ElButtonGroup:Uwe,ElScrollbar:ac,ElDropdownCollection:Owe,ElTooltip:Rs,ElRovingFocusGroup:Ewe,ElOnlyChild:HF,ElIcon:dt,ArrowDown:lu},props:Qx,emits:["visible-change","click","command"],setup(r,{emit:e}){const t=Dt(),i=Ge("dropdown"),{t:n}=pr(),s=W(),o=W(),a=W(null),l=W(null),c=W(null),u=W(null),d=W(!1),h=[bt.enter,bt.space,bt.down],p=I(()=>({maxHeight:Ti(r.maxHeight)})),f=I(()=>[i.m(_.value)]),m=I(()=>Gd(r.trigger)),g=na().value,v=I(()=>r.id||g);Ve([s,m],([F,B],[k])=>{var z,O,V;(z=k==null?void 0:k.$el)!=null&&z.removeEventListener&&k.$el.removeEventListener("pointerenter",T),(O=F==null?void 0:F.$el)!=null&&O.removeEventListener&&F.$el.removeEventListener("pointerenter",T),(V=F==null?void 0:F.$el)!=null&&V.addEventListener&&B.includes("hover")&&F.$el.addEventListener("pointerenter",T)},{immediate:!0}),Zr(()=>{var F,B;(B=(F=s.value)==null?void 0:F.$el)!=null&&B.removeEventListener&&s.value.$el.removeEventListener("pointerenter",T)});function x(){b()}function b(){var F;(F=a.value)==null||F.onClose()}function w(){var F;(F=a.value)==null||F.onOpen()}const _=Hi();function S(...F){e("command",...F)}function T(){var F,B;(B=(F=s.value)==null?void 0:F.$el)==null||B.focus()}function M(){}function E(){const F=y(l);m.value.includes("hover")&&(F==null||F.focus()),u.value=null}function C(F){u.value=F}function P(F){d.value||(F.preventDefault(),F.stopImmediatePropagation())}function A(){e("visible-change",!0)}function N(F){(F==null?void 0:F.type)==="keydown"&&l.value.focus()}function R(){e("visible-change",!1)}return Yt(ew,{contentRef:l,role:I(()=>r.role),triggerId:v,isUsingKeyboard:d,onItemEnter:M,onItemLeave:E}),Yt("elDropdown",{instance:t,dropdownSize:_,handleClick:x,commandHandler:S,trigger:ai(r,"trigger"),hideOnClick:ai(r,"hideOnClick")}),{t:n,ns:i,scrollbar:c,wrapStyle:p,dropdownTriggerKls:f,dropdownSize:_,triggerId:v,triggerKeys:h,currentTabId:u,handleCurrentTabIdChange:C,handlerMainButtonClick:F=>{e("click",F)},handleEntryFocus:P,handleClose:b,handleOpen:w,handleBeforeShowTooltip:A,handleShowTooltip:N,handleBeforeHideTooltip:R,onFocusAfterTrapped:F=>{var B,k;F.preventDefault(),(k=(B=l.value)==null?void 0:B.focus)==null||k.call(B,{preventScroll:!0})},popperRef:a,contentRef:l,triggeringElementRef:s,referenceElementRef:o}}});function Bwe(r,e,t,i,n,s){var o;const a=gt("el-dropdown-collection"),l=gt("el-roving-focus-group"),c=gt("el-scrollbar"),u=gt("el-only-child"),d=gt("el-tooltip"),h=gt("el-button"),p=gt("arrow-down"),f=gt("el-icon"),m=gt("el-button-group");return D(),ee("div",{class:j([r.ns.b(),r.ns.is("disabled",r.disabled)])},[ue(d,{ref:"popperRef",role:r.role,effect:r.effect,"fallback-placements":["bottom","top"],"popper-options":r.popperOptions,"gpu-acceleration":!1,"hide-after":r.trigger==="hover"?r.hideTimeout:0,"manual-mode":!0,placement:r.placement,"popper-class":[r.ns.e("popper"),r.popperClass],"reference-element":(o=r.referenceElementRef)==null?void 0:o.$el,trigger:r.trigger,"trigger-keys":r.triggerKeys,"trigger-target-el":r.contentRef,"show-after":r.trigger==="hover"?r.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":r.triggeringElementRef,"virtual-triggering":r.splitButton,disabled:r.disabled,transition:`${r.ns.namespace.value}-zoom-in-top`,teleported:r.teleported,pure:"",persistent:"",onBeforeShow:r.handleBeforeShowTooltip,onShow:r.handleShowTooltip,onBeforeHide:r.handleBeforeHideTooltip},Zl({content:me(()=>[ue(c,{ref:"scrollbar","wrap-style":r.wrapStyle,tag:"div","view-class":r.ns.e("list")},{default:me(()=>[ue(l,{loop:r.loop,"current-tab-id":r.currentTabId,orientation:"horizontal",onCurrentTabIdChange:r.handleCurrentTabIdChange,onEntryFocus:r.handleEntryFocus},{default:me(()=>[ue(a,null,{default:me(()=>[ze(r.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[r.splitButton?void 0:{name:"default",fn:me(()=>[ue(u,{id:r.triggerId,ref:"triggeringElementRef",role:"button",tabindex:r.tabindex},{default:me(()=>[ze(r.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),r.splitButton?(D(),Ae(m,{key:0},{default:me(()=>[ue(h,qt({ref:"referenceElementRef"},r.buttonProps,{size:r.dropdownSize,type:r.type,disabled:r.disabled,tabindex:r.tabindex,onClick:r.handlerMainButtonClick}),{default:me(()=>[ze(r.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),ue(h,qt({id:r.triggerId,ref:"triggeringElementRef"},r.buttonProps,{role:"button",size:r.dropdownSize,type:r.type,class:r.ns.e("caret-button"),disabled:r.disabled,tabindex:r.tabindex,"aria-label":r.t("el.dropdown.toggleDropdown")}),{default:me(()=>[ue(f,{class:j(r.ns.e("icon"))},{default:me(()=>[ue(p)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):Re("v-if",!0)],2)}var zwe=Qe(Fwe,[["render",Bwe],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown.vue"]]);const Vwe=xe({name:"DropdownItemImpl",components:{ElIcon:dt},props:Qz,emits:["pointermove","pointerleave","click","clickimpl"],setup(r,{emit:e}){const t=Ge("dropdown"),{role:i}=ut(ew,void 0),{collectionItemRef:n}=ut(Dwe,void 0),{collectionItemRef:s}=ut(mwe,void 0),{rovingFocusGroupItemRef:o,tabIndex:a,handleFocus:l,handleKeydown:c,handleMousedown:u}=ut(Yz,void 0),d=hx(n,s,o),h=I(()=>i.value==="menu"?"menuitem":i.value==="navigation"?"link":"button"),p=hi(f=>{const{code:m}=f;if(m===bt.enter||m===bt.space)return f.preventDefault(),f.stopImmediatePropagation(),e("clickimpl",f),!0},c);return{ns:t,itemRef:d,dataset:{[qz]:""},role:h,tabIndex:a,handleFocus:l,handleKeydown:p,handleMousedown:u}}}),Gwe=["aria-disabled","tabindex","role"];function jwe(r,e,t,i,n,s){const o=gt("el-icon");return D(),ee(ct,null,[r.divided?(D(),ee("li",qt({key:0,role:"separator",class:r.ns.bem("menu","item","divided")},r.$attrs),null,16)):Re("v-if",!0),J("li",qt({ref:r.itemRef},{...r.dataset,...r.$attrs},{"aria-disabled":r.disabled,class:[r.ns.be("menu","item"),r.ns.is("disabled",r.disabled)],tabindex:r.tabIndex,role:r.role,onClick:e[0]||(e[0]=a=>r.$emit("clickimpl",a)),onFocus:e[1]||(e[1]=(...a)=>r.handleFocus&&r.handleFocus(...a)),onKeydown:e[2]||(e[2]=Mt((...a)=>r.handleKeydown&&r.handleKeydown(...a),["self"])),onMousedown:e[3]||(e[3]=(...a)=>r.handleMousedown&&r.handleMousedown(...a)),onPointermove:e[4]||(e[4]=a=>r.$emit("pointermove",a)),onPointerleave:e[5]||(e[5]=a=>r.$emit("pointerleave",a))}),[r.icon?(D(),Ae(o,{key:0},{default:me(()=>[(D(),Ae(Xt(r.icon)))]),_:1})):Re("v-if",!0),ze(r.$slots,"default")],16,Gwe)],64)}var Hwe=Qe(Vwe,[["render",jwe],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item-impl.vue"]]);const t5=()=>{const r=ut("elDropdown",{}),e=I(()=>r==null?void 0:r.dropdownSize);return{elDropdown:r,_elDropdownSize:e}},Wwe=xe({name:"ElDropdownItem",components:{ElDropdownCollectionItem:Pwe,ElRovingFocusItem:Nwe,ElDropdownItemImpl:Hwe},inheritAttrs:!1,props:Qz,emits:["pointermove","pointerleave","click"],setup(r,{emit:e,attrs:t}){const{elDropdown:i}=t5(),n=Dt(),s=W(null),o=I(()=>{var p,f;return(f=(p=y(s))==null?void 0:p.textContent)!=null?f:""}),{onItemEnter:a,onItemLeave:l}=ut(ew,void 0),c=hi(p=>(e("pointermove",p),p.defaultPrevented),RD(p=>{if(r.disabled){l(p);return}const f=p.currentTarget;f===document.activeElement||f.contains(document.activeElement)||(a(p),p.defaultPrevented||(f==null||f.focus()))})),u=hi(p=>(e("pointerleave",p),p.defaultPrevented),RD(p=>{l(p)})),d=hi(p=>{if(!r.disabled)return e("click",p),p.type!=="keydown"&&p.defaultPrevented},p=>{var f,m,g;if(r.disabled){p.stopImmediatePropagation();return}(f=i==null?void 0:i.hideOnClick)!=null&&f.value&&((m=i.handleClick)==null||m.call(i)),(g=i.commandHandler)==null||g.call(i,r.command,n,p)}),h=I(()=>({...r,...t}));return{handleClick:d,handlePointerMove:c,handlePointerLeave:u,textContent:o,propsAndAttrs:h}}});function $we(r,e,t,i,n,s){var o;const a=gt("el-dropdown-item-impl"),l=gt("el-roving-focus-item"),c=gt("el-dropdown-collection-item");return D(),Ae(c,{disabled:r.disabled,"text-value":(o=r.textValue)!=null?o:r.textContent},{default:me(()=>[ue(l,{focusable:!r.disabled},{default:me(()=>[ue(a,qt(r.propsAndAttrs,{onPointerleave:r.handlePointerLeave,onPointermove:r.handlePointerMove,onClickimpl:r.handleClick}),{default:me(()=>[ze(r.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var r5=Qe(Wwe,[["render",$we],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-item.vue"]]);const Xwe=xe({name:"ElDropdownMenu",props:Rwe,setup(r){const e=Ge("dropdown"),{_elDropdownSize:t}=t5(),i=t.value,{focusTrapRef:n,onKeydown:s}=ut(RE,void 0),{contentRef:o,role:a,triggerId:l}=ut(ew,void 0),{collectionRef:c,getItems:u}=ut(Iwe,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:h,tabIndex:p,onBlur:f,onFocus:m,onMousedown:g}=ut(mC,void 0),{collectionRef:v}=ut(fC,void 0),x=I(()=>[e.b("menu"),e.bm("menu",i==null?void 0:i.value)]),b=hx(o,c,n,d,v),w=hi(_=>{var S;(S=r.onKeydown)==null||S.call(r,_)},_=>{const{currentTarget:S,code:T,target:M}=_;if(S.contains(M),bt.tab===T&&_.stopImmediatePropagation(),_.preventDefault(),M!==y(o)||!Lwe.includes(T))return;const E=u().filter(C=>!C.disabled).map(C=>C.ref);e5.includes(T)&&E.reverse(),gC(E)});return{size:i,rovingFocusGroupRootStyle:h,tabIndex:p,dropdownKls:x,role:a,triggerId:l,dropdownListWrapperRef:b,handleKeydown:_=>{w(_),s(_)},onBlur:f,onFocus:m,onMousedown:g}}}),qwe=["role","aria-labelledby"];function Kwe(r,e,t,i,n,s){return D(),ee("ul",{ref:r.dropdownListWrapperRef,class:j(r.dropdownKls),style:pt(r.rovingFocusGroupRootStyle),tabindex:-1,role:r.role,"aria-labelledby":r.triggerId,onBlur:e[0]||(e[0]=(...o)=>r.onBlur&&r.onBlur(...o)),onFocus:e[1]||(e[1]=(...o)=>r.onFocus&&r.onFocus(...o)),onKeydown:e[2]||(e[2]=Mt((...o)=>r.handleKeydown&&r.handleKeydown(...o),["self"])),onMousedown:e[3]||(e[3]=Mt((...o)=>r.onMousedown&&r.onMousedown(...o),["self"]))},[ze(r.$slots,"default")],46,qwe)}var i5=Qe(Xwe,[["render",Kwe],["__file","/home/runner/work/element-plus/element-plus/packages/components/dropdown/src/dropdown-menu.vue"]]);const Ywe=zt(zwe,{DropdownItem:r5,DropdownMenu:i5}),Zwe=fi(r5),Jwe=fi(i5),Qwe={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},e_e=["id"],t_e=["stop-color"],r_e=["stop-color"],i_e=["id"],n_e=["stop-color"],s_e=["stop-color"],o_e=["id"],a_e={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},l_e={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},c_e={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},u_e=["fill"],d_e=["fill"],h_e={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},p_e=["fill"],f_e=["fill"],m_e=["fill"],g_e=["fill"],v_e=["fill"],y_e={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},b_e=["fill","xlink:href"],x_e=["fill","mask"],w_e=["fill"],__e=xe({name:"ImgEmpty"}),S_e=xe({...__e,setup(r){const e=Ge("empty"),t=na();return(i,n)=>(D(),ee("svg",Qwe,[J("defs",null,[J("linearGradient",{id:`linearGradient-1-${y(t)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[J("stop",{"stop-color":`var(${y(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,t_e),J("stop",{"stop-color":`var(${y(e).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,r_e)],8,e_e),J("linearGradient",{id:`linearGradient-2-${y(t)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[J("stop",{"stop-color":`var(${y(e).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,n_e),J("stop",{"stop-color":`var(${y(e).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,s_e)],8,i_e),J("rect",{id:`path-3-${y(t)}`,x:"0",y:"0",width:"17",height:"36"},null,8,o_e)]),J("g",a_e,[J("g",l_e,[J("g",c_e,[J("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${y(e).cssVarBlockName("fill-color-3")})`},null,8,u_e),J("polygon",{id:"Rectangle-Copy-14",fill:`var(${y(e).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,d_e),J("g",h_e,[J("polygon",{id:"Rectangle-Copy-10",fill:`var(${y(e).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,p_e),J("polygon",{id:"Rectangle-Copy-11",fill:`var(${y(e).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,f_e),J("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${y(t)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,m_e),J("polygon",{id:"Rectangle-Copy-13",fill:`var(${y(e).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,g_e)]),J("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${y(t)})`,x:"13",y:"45",width:"40",height:"36"},null,8,v_e),J("g",y_e,[J("use",{id:"Mask",fill:`var(${y(e).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${y(t)}`},null,8,b_e),J("polygon",{id:"Rectangle-Copy",fill:`var(${y(e).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${y(t)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,x_e)]),J("polygon",{id:"Rectangle-Copy-18",fill:`var(${y(e).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,w_e)])])])]))}});var T_e=Qe(S_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/img-empty.vue"]]);const M_e=et({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),E_e=["src"],C_e={key:1},A_e=xe({name:"ElEmpty"}),N_e=xe({...A_e,props:M_e,setup(r){const e=r,{t}=pr(),i=Ge("empty"),n=I(()=>e.description||t("el.table.emptyText")),s=I(()=>({width:Ti(e.imageSize)}));return(o,a)=>(D(),ee("div",{class:j(y(i).b())},[J("div",{class:j(y(i).e("image")),style:pt(y(s))},[o.image?(D(),ee("img",{key:0,src:o.image,ondragstart:"return false"},null,8,E_e)):ze(o.$slots,"image",{key:1},()=>[ue(T_e)])],6),J("div",{class:j(y(i).e("description"))},[o.$slots.description?ze(o.$slots,"description",{key:0}):(D(),ee("p",C_e,$e(y(n)),1))],2),o.$slots.default?(D(),ee("div",{key:0,class:j(y(i).e("bottom"))},[ze(o.$slots,"default")],2)):Re("v-if",!0)],2))}});var R_e=Qe(N_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/empty.vue"]]);const n5=zt(R_e),k_e=et({urlList:{type:Oe(Array),default:()=>ri([])},zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:Boolean,teleported:Boolean,closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),L_e={close:()=>!0,switch:r=>Ct(r)},O_e=["src"],P_e=xe({name:"ElImageViewer"}),I_e=xe({...P_e,props:k_e,emits:L_e,setup(r,{expose:e,emit:t}){const i=r,n={CONTAIN:{name:"contain",icon:Cd(ale)},ORIGINAL:{name:"original",icon:Cd(Oce)}},{t:s}=pr(),o=Ge("image-viewer"),{nextZIndex:a}=wf(),l=W(),c=W([]),u=cP(),d=W(!0),h=W(i.initialIndex),p=Vr(n.CONTAIN),f=W({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),m=I(()=>{const{urlList:O}=i;return O.length<=1}),g=I(()=>h.value===0),v=I(()=>h.value===i.urlList.length-1),x=I(()=>i.urlList[h.value]),b=I(()=>[o.e("btn"),o.e("prev"),o.is("disabled",!i.infinite&&g.value)]),w=I(()=>[o.e("btn"),o.e("next"),o.is("disabled",!i.infinite&&v.value)]),_=I(()=>{const{scale:O,deg:V,offsetX:U,offsetY:G,enableTransition:X}=f.value;let ie=U/O,se=G/O;switch(V%360){case 90:case-270:[ie,se]=[se,-ie];break;case 180:case-180:[ie,se]=[-ie,-se];break;case 270:case-90:[ie,se]=[-se,ie];break}const de={transform:`scale(${O}) rotate(${V}deg) translate(${ie}px, ${se}px)`,transition:X?"transform .3s":""};return p.value.name===n.CONTAIN.name&&(de.maxWidth=de.maxHeight="100%"),de}),S=I(()=>Ct(i.zIndex)?i.zIndex:a());function T(){E(),t("close")}function M(){const O=Hd(U=>{switch(U.code){case bt.esc:i.closeOnPressEscape&&T();break;case bt.space:R();break;case bt.left:B();break;case bt.up:z("zoomIn");break;case bt.right:k();break;case bt.down:z("zoomOut");break}}),V=Hd(U=>{const G=U.deltaY||U.deltaX;z(G<0?"zoomIn":"zoomOut",{zoomRate:i.zoomRate,enableTransition:!1})});u.run(()=>{Qr(document,"keydown",O),Qr(document,"wheel",V)})}function E(){u.stop()}function C(){d.value=!1}function P(O){d.value=!1,O.target.alt=s("el.image.error")}function A(O){if(d.value||O.button!==0||!l.value)return;f.value.enableTransition=!1;const{offsetX:V,offsetY:U}=f.value,G=O.pageX,X=O.pageY,ie=Hd(de=>{f.value={...f.value,offsetX:V+de.pageX-G,offsetY:U+de.pageY-X}}),se=Qr(document,"mousemove",ie);Qr(document,"mouseup",()=>{se()}),O.preventDefault()}function N(){f.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function R(){if(d.value)return;const O=Iv(n),V=Object.values(n),U=p.value.name,G=(V.findIndex(X=>X.name===U)+1)%O.length;p.value=n[O[G]],N()}function F(O){const V=i.urlList.length;h.value=(O+V)%V}function B(){g.value&&!i.infinite||F(h.value-1)}function k(){v.value&&!i.infinite||F(h.value+1)}function z(O,V={}){if(d.value)return;const{zoomRate:U,rotateDeg:G,enableTransition:X}={zoomRate:i.zoomRate,rotateDeg:90,enableTransition:!0,...V};switch(O){case"zoomOut":f.value.scale>.2&&(f.value.scale=Number.parseFloat((f.value.scale/U).toFixed(3)));break;case"zoomIn":f.value.scale<7&&(f.value.scale=Number.parseFloat((f.value.scale*U).toFixed(3)));break;case"clockwise":f.value.deg+=G;break;case"anticlockwise":f.value.deg-=G;break}f.value.enableTransition=X}return Ve(x,()=>{ht(()=>{const O=c.value[0];O!=null&&O.complete||(d.value=!0)})}),Ve(h,O=>{N(),t("switch",O)}),Et(()=>{var O,V;M(),(V=(O=l.value)==null?void 0:O.focus)==null||V.call(O)}),e({setActiveItem:F}),(O,V)=>(D(),Ae(cv,{to:"body",disabled:!O.teleported},[ue(Li,{name:"viewer-fade",appear:""},{default:me(()=>[J("div",{ref_key:"wrapper",ref:l,tabindex:-1,class:j(y(o).e("wrapper")),style:pt({zIndex:y(S)})},[J("div",{class:j(y(o).e("mask")),onClick:V[0]||(V[0]=Mt(U=>O.hideOnClickModal&&T(),["self"]))},null,2),Re(" CLOSE "),J("span",{class:j([y(o).e("btn"),y(o).e("close")]),onClick:T},[ue(y(dt),null,{default:me(()=>[ue(y(Pa))]),_:1})],2),Re(" ARROW "),y(m)?Re("v-if",!0):(D(),ee(ct,{key:0},[J("span",{class:j(y(b)),onClick:B},[ue(y(dt),null,{default:me(()=>[ue(y(cu))]),_:1})],2),J("span",{class:j(y(w)),onClick:k},[ue(y(dt),null,{default:me(()=>[ue(y(Cs))]),_:1})],2)],64)),Re(" ACTIONS "),J("div",{class:j([y(o).e("btn"),y(o).e("actions")])},[J("div",{class:j(y(o).e("actions__inner"))},[ue(y(dt),{onClick:V[1]||(V[1]=U=>z("zoomOut"))},{default:me(()=>[ue(y(tde))]),_:1}),ue(y(dt),{onClick:V[2]||(V[2]=U=>z("zoomIn"))},{default:me(()=>[ue(y(bU))]),_:1}),J("i",{class:j(y(o).e("actions__divider"))},null,2),ue(y(dt),{onClick:R},{default:me(()=>[(D(),Ae(Xt(y(p).icon)))]),_:1}),J("i",{class:j(y(o).e("actions__divider"))},null,2),ue(y(dt),{onClick:V[3]||(V[3]=U=>z("anticlockwise"))},{default:me(()=>[ue(y(wce))]),_:1}),ue(y(dt),{onClick:V[4]||(V[4]=U=>z("clockwise"))},{default:me(()=>[ue(y(Cce))]),_:1})],2)],2),Re(" CANVAS "),J("div",{class:j(y(o).e("canvas"))},[(D(!0),ee(ct,null,Ut(O.urlList,(U,G)=>It((D(),ee("img",{ref_for:!0,ref:X=>c.value[G]=X,key:U,src:U,style:pt(y(_)),class:j(y(o).e("img")),onLoad:C,onError:P,onMousedown:A},null,46,O_e)),[[vr,G===h.value]])),128))],2),ze(O.$slots,"default")],6)]),_:3})],8,["disabled"]))}});var D_e=Qe(I_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image-viewer/src/image-viewer.vue"]]);const s5=zt(D_e),U_e=et({hideOnClickModal:Boolean,src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},loading:{type:String,values:["eager","lazy"]},lazy:Boolean,scrollContainer:{type:Oe([String,Object])},previewSrcList:{type:Oe(Array),default:()=>ri([])},previewTeleported:Boolean,zIndex:{type:Number},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},zoomRate:{type:Number,default:1.2}}),F_e={load:r=>r instanceof Event,error:r=>r instanceof Event,switch:r=>Ct(r),close:()=>!0,show:()=>!0},B_e=["src","loading"],z_e={key:0},V_e=xe({name:"ElImage",inheritAttrs:!1}),G_e=xe({...V_e,props:U_e,emits:F_e,setup(r,{emit:e}){const t=r;let i="";const{t:n}=pr(),s=Ge("image"),o=kd(),a=tE(),l=W(),c=W(!1),u=W(!0),d=W(!1),h=W(),p=W(),f=ar&&"loading"in HTMLImageElement.prototype;let m,g;const v=I(()=>[s.e("inner"),w.value&&s.e("preview"),u.value&&s.is("loading")]),x=I(()=>o.style),b=I(()=>{const{fit:z}=t;return ar&&z?{objectFit:z}:{}}),w=I(()=>{const{previewSrcList:z}=t;return Array.isArray(z)&&z.length>0}),_=I(()=>{const{previewSrcList:z,initialIndex:O}=t;let V=O;return O>z.length-1&&(V=0),V}),S=I(()=>t.loading==="eager"?!1:!f&&t.loading==="lazy"||t.lazy),T=()=>{ar&&(u.value=!0,c.value=!1,l.value=t.src)};function M(z){u.value=!1,c.value=!1,e("load",z)}function E(z){u.value=!1,c.value=!0,e("error",z)}function C(){UQ(h.value,p.value)&&(T(),N())}const P=UD(C,200,!0);async function A(){var z;if(!ar)return;await ht();const{scrollContainer:O}=t;Qo(O)?p.value=O:kt(O)&&O!==""?p.value=(z=document.querySelector(O))!=null?z:void 0:h.value&&(p.value=XM(h.value)),p.value&&(m=Qr(p,"scroll",P),setTimeout(()=>C(),100))}function N(){!ar||!p.value||!P||(m==null||m(),p.value=void 0)}function R(z){if(z.ctrlKey&&(z.deltaY<0||z.deltaY>0))return z.preventDefault(),!1}function F(){w.value&&(g=Qr("wheel",R,{passive:!1}),i=document.body.style.overflow,document.body.style.overflow="hidden",d.value=!0,e("show"))}function B(){g==null||g(),document.body.style.overflow=i,d.value=!1,e("close")}function k(z){e("switch",z)}return Ve(()=>t.src,()=>{S.value?(u.value=!0,c.value=!1,N(),A()):T()}),Et(()=>{S.value?A():T()}),(z,O)=>(D(),ee("div",{ref_key:"container",ref:h,class:j([y(s).b(),z.$attrs.class]),style:pt(y(x))},[c.value?ze(z.$slots,"error",{key:0},()=>[J("div",{class:j(y(s).e("error"))},$e(y(n)("el.image.error")),3)]):(D(),ee(ct,{key:1},[l.value!==void 0?(D(),ee("img",qt({key:0},y(a),{src:l.value,loading:z.loading,style:y(b),class:y(v),onClick:F,onLoad:M,onError:E}),null,16,B_e)):Re("v-if",!0),u.value?(D(),ee("div",{key:1,class:j(y(s).e("wrapper"))},[ze(z.$slots,"placeholder",{},()=>[J("div",{class:j(y(s).e("placeholder"))},null,2)])],2)):Re("v-if",!0)],64)),y(w)?(D(),ee(ct,{key:2},[d.value?(D(),Ae(y(s5),{key:0,"z-index":z.zIndex,"initial-index":y(_),infinite:z.infinite,"zoom-rate":z.zoomRate,"url-list":z.previewSrcList,"hide-on-click-modal":z.hideOnClickModal,teleported:z.previewTeleported,"close-on-press-escape":z.closeOnPressEscape,onClose:B,onSwitch:k},{default:me(()=>[z.$slots.viewer?(D(),ee("div",z_e,[ze(z.$slots,"viewer")])):Re("v-if",!0)]),_:3},8,["z-index","initial-index","infinite","zoom-rate","url-list","hide-on-click-modal","teleported","close-on-press-escape"])):Re("v-if",!0)],64)):Re("v-if",!0)],6))}});var j_e=Qe(G_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/image/src/image.vue"]]);const H_e=zt(j_e),W_e=et({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:jn,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:r=>r===null||Ct(r)||["min","max"].includes(r),default:null},name:String,label:String,placeholder:String,precision:{type:Number,validator:r=>r>=0&&r===Number.parseInt(`${r}`,10)},validateEvent:{type:Boolean,default:!0}}),$_e={[Kr]:(r,e)=>e!==r,blur:r=>r instanceof FocusEvent,focus:r=>r instanceof FocusEvent,[As]:r=>Ct(r)||Vi(r),[Wt]:r=>Ct(r)||Vi(r)},X_e=["aria-label","onKeydown"],q_e=["aria-label","onKeydown"],K_e=xe({name:"ElInputNumber"}),Y_e=xe({...K_e,props:W_e,emits:$_e,setup(r,{expose:e,emit:t}){const i=r,{t:n}=pr(),s=Ge("input-number"),o=W(),a=br({currentValue:i.modelValue,userInput:null}),{formItem:l}=Ns(),c=I(()=>Ct(i.modelValue)&&i.modelValue<=i.min),u=I(()=>Ct(i.modelValue)&&i.modelValue>=i.max),d=I(()=>{const N=v(i.step);return rn(i.precision)?Math.max(v(i.modelValue),N):(N>i.precision,i.precision)}),h=I(()=>i.controls&&i.controlsPosition==="right"),p=Hi(),f=Ys(),m=I(()=>{if(a.userInput!==null)return a.userInput;let N=a.currentValue;if(Vi(N))return"";if(Ct(N)){if(Number.isNaN(N))return"";rn(i.precision)||(N=N.toFixed(i.precision))}return N}),g=(N,R)=>{if(rn(R)&&(R=d.value),R===0)return Math.round(N);let F=String(N);const B=F.indexOf(".");if(B===-1||!F.replace(".","").split("")[B+R])return N;const k=F.length;return F.charAt(k-1)==="5"&&(F=`${F.slice(0,Math.max(0,k-1))}6`),Number.parseFloat(Number(F).toFixed(R))},v=N=>{if(Vi(N))return 0;const R=N.toString(),F=R.indexOf(".");let B=0;return F!==-1&&(B=R.length-F-1),B},x=(N,R=1)=>Ct(N)?g(N+i.step*R):a.currentValue,b=()=>{if(i.readonly||f.value||u.value)return;const N=Number(m.value)||0,R=x(N);S(R),t(As,a.currentValue)},w=()=>{if(i.readonly||f.value||c.value)return;const N=Number(m.value)||0,R=x(N,-1);S(R),t(As,a.currentValue)},_=(N,R)=>{const{max:F,min:B,step:k,precision:z,stepStrictly:O,valueOnClear:V}=i;F<B&&ji("InputNumber","min should not be greater than max.");let U=Number(N);if(Vi(N)||Number.isNaN(U))return null;if(N===""){if(V===null)return null;U=kt(V)?{min:B,max:F}[V]:V}return O&&(U=g(Math.round(U/k)*k,z)),rn(z)||(U=g(U,z)),(U>F||U<B)&&(U=U>F?F:B,R&&t(Wt,U)),U},S=(N,R=!0)=>{var F;const B=a.currentValue,k=_(N);if(!R){t(Wt,k);return}B!==k&&(a.userInput=null,t(Wt,k),t(Kr,k,B),i.validateEvent&&((F=l==null?void 0:l.validate)==null||F.call(l,"change").catch(z=>{})),a.currentValue=k)},T=N=>{a.userInput=N;const R=N===""?null:Number(N);t(As,R),S(R,!1)},M=N=>{const R=N!==""?Number(N):"";(Ct(R)&&!Number.isNaN(R)||N==="")&&S(R),a.userInput=null},E=()=>{var N,R;(R=(N=o.value)==null?void 0:N.focus)==null||R.call(N)},C=()=>{var N,R;(R=(N=o.value)==null?void 0:N.blur)==null||R.call(N)},P=N=>{t("focus",N)},A=N=>{var R;t("blur",N),i.validateEvent&&((R=l==null?void 0:l.validate)==null||R.call(l,"blur").catch(F=>{}))};return Ve(()=>i.modelValue,N=>{const R=_(a.userInput),F=_(N,!0);!Ct(R)&&(!R||R!==F)&&(a.currentValue=F,a.userInput=null)},{immediate:!0}),Et(()=>{var N;const{min:R,max:F,modelValue:B}=i,k=(N=o.value)==null?void 0:N.input;if(k.setAttribute("role","spinbutton"),Number.isFinite(F)?k.setAttribute("aria-valuemax",String(F)):k.removeAttribute("aria-valuemax"),Number.isFinite(R)?k.setAttribute("aria-valuemin",String(R)):k.removeAttribute("aria-valuemin"),k.setAttribute("aria-valuenow",a.currentValue||a.currentValue===0?String(a.currentValue):""),k.setAttribute("aria-disabled",String(f.value)),!Ct(B)&&B!=null){let z=Number(B);Number.isNaN(z)&&(z=null),t(Wt,z)}}),Yl(()=>{var N,R;const F=(N=o.value)==null?void 0:N.input;F==null||F.setAttribute("aria-valuenow",`${(R=a.currentValue)!=null?R:""}`)}),e({focus:E,blur:C}),(N,R)=>(D(),ee("div",{class:j([y(s).b(),y(s).m(y(p)),y(s).is("disabled",y(f)),y(s).is("without-controls",!N.controls),y(s).is("controls-right",y(h))]),onDragstart:R[1]||(R[1]=Mt(()=>{},["prevent"]))},[N.controls?It((D(),ee("span",{key:0,role:"button","aria-label":y(n)("el.inputNumber.decrease"),class:j([y(s).e("decrease"),y(s).is("disabled",y(c))]),onKeydown:dr(w,["enter"])},[ue(y(dt),null,{default:me(()=>[y(h)?(D(),Ae(y(lu),{key:0})):(D(),Ae(y(Dle),{key:1}))]),_:1})],42,X_e)),[[y(Fx),w]]):Re("v-if",!0),N.controls?It((D(),ee("span",{key:1,role:"button","aria-label":y(n)("el.inputNumber.increase"),class:j([y(s).e("increase"),y(s).is("disabled",y(u))]),onKeydown:dr(b,["enter"])},[ue(y(dt),null,{default:me(()=>[y(h)?(D(),Ae(y(cx),{key:0})):(D(),Ae(y(mU),{key:1}))]),_:1})],42,q_e)),[[y(Fx),b]]):Re("v-if",!0),ue(y(us),{id:N.id,ref_key:"input",ref:o,type:"number",step:N.step,"model-value":y(m),placeholder:N.placeholder,readonly:N.readonly,disabled:y(f),size:y(p),max:N.max,min:N.min,name:N.name,label:N.label,"validate-event":!1,onWheel:R[0]||(R[0]=Mt(()=>{},["prevent"])),onKeydown:[dr(Mt(b,["prevent"]),["up"]),dr(Mt(w,["prevent"]),["down"])],onBlur:A,onFocus:P,onInput:T,onChange:M},null,8,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","label","onKeydown"])],34))}});var Z_e=Qe(Y_e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input-number/src/input-number.vue"]]);const o5=zt(Z_e),J_e=et({type:{type:String,values:["primary","success","warning","info","danger","default"],default:"default"},underline:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},href:{type:String,default:""},icon:{type:Gr}}),Q_e={click:r=>r instanceof MouseEvent},eSe=["href"],tSe=xe({name:"ElLink"}),rSe=xe({...tSe,props:J_e,emits:Q_e,setup(r,{emit:e}){const t=r,i=Ge("link"),n=I(()=>[i.b(),i.m(t.type),i.is("disabled",t.disabled),i.is("underline",t.underline&&!t.disabled)]);function s(o){t.disabled||e("click",o)}return(o,a)=>(D(),ee("a",{class:j(y(n)),href:o.disabled||!o.href?void 0:o.href,onClick:s},[o.icon?(D(),Ae(y(dt),{key:0},{default:me(()=>[(D(),Ae(Xt(o.icon)))]),_:1})):Re("v-if",!0),o.$slots.default?(D(),ee("span",{key:1,class:j(y(i).e("inner"))},[ze(o.$slots,"default")],2)):Re("v-if",!0),o.$slots.icon?ze(o.$slots,"icon",{key:2}):Re("v-if",!0)],10,eSe))}});var iSe=Qe(rSe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/link/src/link.vue"]]);const nSe=zt(iSe);let sSe=class{constructor(r,e){this.parent=r,this.domNode=e,this.subIndex=0,this.subIndex=0,this.init()}init(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()}gotoSubIndex(r){r===this.subMenuItems.length?r=0:r<0&&(r=this.subMenuItems.length-1),this.subMenuItems[r].focus(),this.subIndex=r}addListeners(){const r=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,e=>{e.addEventListener("keydown",t=>{let i=!1;switch(t.code){case bt.down:{this.gotoSubIndex(this.subIndex+1),i=!0;break}case bt.up:{this.gotoSubIndex(this.subIndex-1),i=!0;break}case bt.tab:{$1(r,"mouseleave");break}case bt.enter:case bt.space:{i=!0,t.currentTarget.click();break}}return i&&(t.preventDefault(),t.stopPropagation()),!1})})}},oSe=class{constructor(r,e){this.domNode=r,this.submenu=null,this.submenu=null,this.init(e)}init(r){this.domNode.setAttribute("tabindex","0");const e=this.domNode.querySelector(`.${r}-menu`);e&&(this.submenu=new sSe(this,e)),this.addListeners()}addListeners(){this.domNode.addEventListener("keydown",r=>{let e=!1;switch(r.code){case bt.down:{$1(r.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(0),e=!0;break}case bt.up:{$1(r.currentTarget,"mouseenter"),this.submenu&&this.submenu.gotoSubIndex(this.submenu.subMenuItems.length-1),e=!0;break}case bt.tab:{$1(r.currentTarget,"mouseleave");break}case bt.enter:case bt.space:{e=!0,r.currentTarget.click();break}}e&&r.preventDefault()})}},aSe=class{constructor(r,e){this.domNode=r,this.init(e)}init(r){const e=this.domNode.childNodes;Array.from(e).forEach(t=>{t.nodeType===1&&new oSe(t,r)})}};const lSe=xe({name:"ElMenuCollapseTransition",setup(){const r=Ge("menu");return{listeners:{onBeforeEnter:e=>e.style.opacity="0.2",onEnter(e,t){vl(e,`${r.namespace.value}-opacity-transition`),e.style.opacity="1",t()},onAfterEnter(e){Xs(e,`${r.namespace.value}-opacity-transition`),e.style.opacity=""},onBeforeLeave(e){e.dataset||(e.dataset={}),Oa(e,r.m("collapse"))?(Xs(e,r.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),vl(e,r.m("collapse"))):(vl(e,r.m("collapse")),e.dataset.oldOverflow=e.style.overflow,e.dataset.scrollWidth=e.clientWidth.toString(),Xs(e,r.m("collapse"))),e.style.width=`${e.scrollWidth}px`,e.style.overflow="hidden"},onLeave(e){vl(e,"horizontal-collapse-transition"),e.style.width=`${e.dataset.scrollWidth}px`}}}}});function cSe(r,e,t,i,n,s){return D(),Ae(Li,qt({mode:"out-in"},r.listeners),{default:me(()=>[ze(r.$slots,"default")]),_:3},16)}var uSe=Qe(lSe,[["render",cSe],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-collapse-transition.vue"]]);function a5(r,e){const t=I(()=>{let i=r.parent;const n=[e.value];for(;i.type.name!=="ElMenu";)i.props.index&&n.unshift(i.props.index),i=i.parent;return n});return{parentMenu:I(()=>{let i=r.parent;for(;i&&!["ElMenu","ElSubMenu"].includes(i.type.name);)i=i.parent;return i}),indexPath:t}}function dSe(r){return I(()=>{const e=r.backgroundColor;return e?new mB(e).shade(20).toString():""})}const l5=(r,e)=>{const t=Ge("menu");return I(()=>t.cssVarBlock({"text-color":r.textColor||"","hover-text-color":r.textColor||"","bg-color":r.backgroundColor||"","hover-bg-color":dSe(r).value||"","active-color":r.activeTextColor||"",level:`${e}`}))},hSe=et({index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0},teleported:{type:Boolean,default:void 0},popperOffset:{type:Number,default:6},expandCloseIcon:{type:Gr},expandOpenIcon:{type:Gr},collapseCloseIcon:{type:Gr},collapseOpenIcon:{type:Gr}}),tw="ElSubMenu";var vC=xe({name:tw,props:hSe,setup(r,{slots:e,expose:t}){bl({from:"popper-append-to-body",replacement:"teleported",scope:tw,version:"2.3.0",ref:"https://element-plus.org/en-US/component/menu.html#submenu-attributes"},I(()=>r.popperAppendToBody!==void 0));const i=Dt(),{indexPath:n,parentMenu:s}=a5(i,I(()=>r.index)),o=Ge("menu"),a=Ge("sub-menu"),l=ut("rootMenu");l||ji(tw,"can not inject root menu");const c=ut(`subMenu:${s.value.uid}`);c||ji(tw,"can not inject sub menu");const u=W({}),d=W({});let h;const p=W(!1),f=W(),m=W(null),g=I(()=>P.value==="horizontal"&&x.value?"bottom-start":"right-start"),v=I(()=>P.value==="horizontal"&&x.value||P.value==="vertical"&&!l.props.collapse?r.expandCloseIcon&&r.expandOpenIcon?S.value?r.expandOpenIcon:r.expandCloseIcon:lu:r.collapseCloseIcon&&r.collapseOpenIcon?S.value?r.collapseOpenIcon:r.collapseCloseIcon:Cs),x=I(()=>c.level===0),b=I(()=>{var V;const U=(V=r.teleported)!=null?V:r.popperAppendToBody;return U===void 0?x.value:U}),w=I(()=>l.props.collapse?`${o.namespace.value}-zoom-in-left`:`${o.namespace.value}-zoom-in-top`),_=I(()=>P.value==="horizontal"&&x.value?["bottom-start","bottom-end","top-start","top-end","right-start","left-start"]:["right-start","right","right-end","left-start","bottom-start","bottom-end","top-start","top-end"]),S=I(()=>l.openedMenus.includes(r.index)),T=I(()=>{let V=!1;return Object.values(u.value).forEach(U=>{U.active&&(V=!0)}),Object.values(d.value).forEach(U=>{U.active&&(V=!0)}),V}),M=I(()=>l.props.backgroundColor||""),E=I(()=>l.props.activeTextColor||""),C=I(()=>l.props.textColor||""),P=I(()=>l.props.mode),A=br({index:r.index,indexPath:n,active:T}),N=l5(l.props,c.level+1),R=I(()=>P.value!=="horizontal"?{color:C.value}:{borderBottomColor:T.value?l.props.activeTextColor?E.value:"":"transparent",color:T.value?E.value:C.value}),F=()=>{var V,U,G;return(G=(U=(V=m.value)==null?void 0:V.popperRef)==null?void 0:U.popperInstanceRef)==null?void 0:G.destroy()},B=V=>{V||F()},k=()=>{l.props.menuTrigger==="hover"&&l.props.mode==="horizontal"||l.props.collapse&&l.props.mode==="vertical"||r.disabled||l.handleSubMenuClick({index:r.index,indexPath:n.value,active:T.value})},z=(V,U=r.showTimeout)=>{var G;V.type!=="focus"&&(l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||r.disabled||(c.mouseInChild.value=!0,h==null||h(),{stop:h}=Ud(()=>{l.openMenu(r.index,n.value)},U),b.value&&((G=s.value.vnode.el)==null||G.dispatchEvent(new MouseEvent("mouseenter")))))},O=(V=!1)=>{var U,G;l.props.menuTrigger==="click"&&l.props.mode==="horizontal"||!l.props.collapse&&l.props.mode==="vertical"||(h==null||h(),c.mouseInChild.value=!1,{stop:h}=Ud(()=>!p.value&&l.closeMenu(r.index,n.value),r.hideTimeout),b.value&&V&&((U=i.parent)==null?void 0:U.type.name)==="ElSubMenu"&&((G=c.handleMouseleave)==null||G.call(c,!0)))};Ve(()=>l.props.collapse,V=>B(!!V));{const V=G=>{d.value[G.index]=G},U=G=>{delete d.value[G.index]};Yt(`subMenu:${i.uid}`,{addSubMenu:V,removeSubMenu:U,handleMouseleave:O,mouseInChild:p,level:c.level+1})}return t({opened:S}),Et(()=>{l.addSubMenu(A),c.addSubMenu(A)}),Zr(()=>{c.removeSubMenu(A),l.removeSubMenu(A)}),()=>{var V;const U=[(V=e.title)==null?void 0:V.call(e),yt(dt,{class:a.e("icon-arrow"),style:{transform:S.value?r.expandCloseIcon&&r.expandOpenIcon||r.collapseCloseIcon&&r.collapseOpenIcon&&l.props.collapse?"none":"rotateZ(180deg)":"none"}},{default:()=>kt(v.value)?yt(i.appContext.components[v.value]):yt(v.value)})],G=l.isMenuPopup?yt(Rs,{ref:m,visible:S.value,effect:"light",pure:!0,offset:r.popperOffset,showArrow:!1,persistent:!0,popperClass:r.popperClass,placement:g.value,teleported:b.value,fallbackPlacements:_.value,transition:w.value,gpuAcceleration:!1},{content:()=>{var X;return yt("div",{class:[o.m(P.value),o.m("popup-container"),r.popperClass],onMouseenter:ie=>z(ie,100),onMouseleave:()=>O(!0),onFocus:ie=>z(ie,100)},[yt("ul",{class:[o.b(),o.m("popup"),o.m(`popup-${g.value}`)],style:N.value},[(X=e.default)==null?void 0:X.call(e)])])},default:()=>yt("div",{class:a.e("title"),style:[R.value,{backgroundColor:M.value}],onClick:k},U)}):yt(ct,{},[yt("div",{class:a.e("title"),style:[R.value,{backgroundColor:M.value}],ref:f,onClick:k},U),yt(qx,{},{default:()=>{var X;return It(yt("ul",{role:"menu",class:[o.b(),o.m("inline")],style:N.value},[(X=e.default)==null?void 0:X.call(e)]),[[vr,S.value]])}})]);return yt("li",{class:[a.b(),a.is("active",T.value),a.is("opened",S.value),a.is("disabled",r.disabled)],role:"menuitem",ariaHaspopup:!0,ariaExpanded:S.value,onMouseenter:z,onMouseleave:()=>O(!0),onFocus:z},[G])}}});const pSe=et({mode:{type:String,values:["horizontal","vertical"],default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:{type:Oe(Array),default:()=>ri([])},uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,values:["hover","click"],default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0},ellipsis:{type:Boolean,default:!0},popperEffect:{type:String,values:["dark","light"],default:"dark"}}),yC=r=>Array.isArray(r)&&r.every(e=>kt(e));var fSe=xe({name:"ElMenu",props:pSe,emits:{close:(r,e)=>kt(r)&&yC(e),open:(r,e)=>kt(r)&&yC(e),select:(r,e,t,i)=>kt(r)&&yC(e)&&Ht(t)&&(i===void 0||i instanceof Promise)},setup(r,{emit:e,slots:t,expose:i}){const n=Dt(),s=n.appContext.config.globalProperties.$router,o=W(),a=Ge("menu"),l=Ge("sub-menu"),c=W(-1),u=W(r.defaultOpeneds&&!r.collapse?r.defaultOpeneds.slice(0):[]),d=W(r.defaultActive),h=W({}),p=W({}),f=I(()=>r.mode==="horizontal"||r.mode==="vertical"&&r.collapse),m=()=>{const P=d.value&&h.value[d.value];!P||r.mode==="horizontal"||r.collapse||P.indexPath.forEach(A=>{const N=p.value[A];N&&g(A,N.indexPath)})},g=(P,A)=>{u.value.includes(P)||(r.uniqueOpened&&(u.value=u.value.filter(N=>A.includes(N))),u.value.push(P),e("open",P,A))},v=P=>{const A=u.value.indexOf(P);A!==-1&&u.value.splice(A,1)},x=(P,A)=>{v(P),e("close",P,A)},b=({index:P,indexPath:A})=>{u.value.includes(P)?x(P,A):g(P,A)},w=P=>{(r.mode==="horizontal"||r.collapse)&&(u.value=[]);const{index:A,indexPath:N}=P;if(!(Vi(A)||Vi(N)))if(r.router&&s){const R=P.route||A,F=s.push(R).then(B=>(B||(d.value=A),B));e("select",A,N,{index:A,indexPath:N,route:R},F)}else d.value=A,e("select",A,N,{index:A,indexPath:N})},_=P=>{const A=h.value,N=A[P]||d.value&&A[d.value]||A[r.defaultActive];N?d.value=N.index:d.value=P},S=()=>{var P,A;if(!o.value)return-1;const N=Array.from((A=(P=o.value)==null?void 0:P.childNodes)!=null?A:[]).filter(V=>V.nodeName!=="#comment"&&(V.nodeName!=="#text"||V.nodeValue)),R=64,F=Number.parseInt(getComputedStyle(o.value).paddingLeft,10),B=Number.parseInt(getComputedStyle(o.value).paddingRight,10),k=o.value.clientWidth-F-B;let z=0,O=0;return N.forEach((V,U)=>{z+=V.offsetWidth||0,z<=k-R&&(O=U+1)}),O===N.length?-1:O},T=(P,A=33.34)=>{let N;return()=>{N&&clearTimeout(N),N=setTimeout(()=>{P()},A)}};let M=!0;const E=()=>{const P=()=>{c.value=-1,ht(()=>{c.value=S()})};M?P():T(P)(),M=!1};Ve(()=>r.defaultActive,P=>{h.value[P]||(d.value=""),_(P)}),Ve(()=>r.collapse,P=>{P&&(u.value=[])}),Ve(h.value,m);let C;wo(()=>{r.mode==="horizontal"&&r.ellipsis?C=cs(o,E).stop:C==null||C()});{const P=N=>{p.value[N.index]=N},A=N=>{delete p.value[N.index]};Yt("rootMenu",br({props:r,openedMenus:u,items:h,subMenus:p,activeIndex:d,isMenuPopup:f,addMenuItem:N=>{h.value[N.index]=N},removeMenuItem:N=>{delete h.value[N.index]},addSubMenu:P,removeSubMenu:A,openMenu:g,closeMenu:x,handleMenuItemClick:w,handleSubMenuClick:b})),Yt(`subMenu:${n.uid}`,{addSubMenu:P,removeSubMenu:A,mouseInChild:W(!1),level:0})}return Et(()=>{r.mode==="horizontal"&&new aSe(n.vnode.el,a.namespace.value)}),i({open:P=>{const{indexPath:A}=p.value[P];A.forEach(N=>g(N,A))},close:v,handleResize:E}),()=>{var P,A;let N=(A=(P=t.default)==null?void 0:P.call(t))!=null?A:[];const R=[];if(r.mode==="horizontal"&&o.value){const k=pf(N),z=c.value===-1?k:k.slice(0,c.value),O=c.value===-1?[]:k.slice(c.value);O!=null&&O.length&&r.ellipsis&&(N=z,R.push(yt(vC,{index:"sub-menu-more",class:l.e("hide-arrow")},{title:()=>yt(dt,{class:l.e("icon-more")},{default:()=>yt(Xle)}),default:()=>O})))}const F=l5(r,0),B=yt("ul",{key:String(r.collapse),role:"menubar",ref:o,style:F.value,class:{[a.b()]:!0,[a.m(r.mode)]:!0,[a.m("collapse")]:r.collapse}},[...N,...R]);return r.collapseTransition&&r.mode==="vertical"?yt(uSe,()=>B):B}}});const mSe=et({index:{type:Oe([String,null]),default:null},route:{type:Oe([String,Object])},disabled:Boolean}),gSe={click:r=>kt(r.index)&&Array.isArray(r.indexPath)},bC="ElMenuItem",vSe=xe({name:bC,components:{ElTooltip:Rs},props:mSe,emits:gSe,setup(r,{emit:e}){const t=Dt(),i=ut("rootMenu"),n=Ge("menu"),s=Ge("menu-item");i||ji(bC,"can not inject root menu");const{parentMenu:o,indexPath:a}=a5(t,ai(r,"index")),l=ut(`subMenu:${o.value.uid}`);l||ji(bC,"can not inject sub menu");const c=I(()=>r.index===i.activeIndex),u=br({index:r.index,indexPath:a,active:c}),d=()=>{r.disabled||(i.handleMenuItemClick({index:r.index,indexPath:a.value,route:r.route}),e("click",u))};return Et(()=>{l.addSubMenu(u),i.addMenuItem(u)}),Zr(()=>{l.removeSubMenu(u),i.removeMenuItem(u)}),{parentMenu:o,rootMenu:i,active:c,nsMenu:n,nsMenuItem:s,handleClick:d}}});function ySe(r,e,t,i,n,s){const o=gt("el-tooltip");return D(),ee("li",{class:j([r.nsMenuItem.b(),r.nsMenuItem.is("active",r.active),r.nsMenuItem.is("disabled",r.disabled)]),role:"menuitem",tabindex:"-1",onClick:e[0]||(e[0]=(...a)=>r.handleClick&&r.handleClick(...a))},[r.parentMenu.type.name==="ElMenu"&&r.rootMenu.props.collapse&&r.$slots.title?(D(),Ae(o,{key:0,effect:r.rootMenu.props.popperEffect,placement:"right","fallback-placements":["left"],persistent:""},{content:me(()=>[ze(r.$slots,"title")]),default:me(()=>[J("div",{class:j(r.nsMenu.be("tooltip","trigger"))},[ze(r.$slots,"default")],2)]),_:3},8,["effect"])):(D(),ee(ct,{key:1},[ze(r.$slots,"default"),ze(r.$slots,"title")],64))],2)}var c5=Qe(vSe,[["render",ySe],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item.vue"]]);const bSe={title:String},xSe="ElMenuItemGroup",wSe=xe({name:xSe,props:bSe,setup(){return{ns:Ge("menu-item-group")}}});function _Se(r,e,t,i,n,s){return D(),ee("li",{class:j(r.ns.b())},[J("div",{class:j(r.ns.e("title"))},[r.$slots.title?ze(r.$slots,"title",{key:1}):(D(),ee(ct,{key:0},[ir($e(r.title),1)],64))],2),J("ul",null,[ze(r.$slots,"default")])],2)}var u5=Qe(wSe,[["render",_Se],["__file","/home/runner/work/element-plus/element-plus/packages/components/menu/src/menu-item-group.vue"]]);const SSe=zt(fSe,{MenuItem:c5,MenuItemGroup:u5,SubMenu:vC}),TSe=fi(c5),MSe=fi(u5),ESe=fi(vC),CSe=et({icon:{type:Gr,default:()=>_oe},title:String,content:{type:String,default:""}}),ASe={back:()=>!0},NSe=["aria-label"],RSe=xe({name:"ElPageHeader"}),kSe=xe({...RSe,props:CSe,emits:ASe,setup(r,{emit:e}){const t=Gn(),{t:i}=pr(),n=Ge("page-header"),s=I(()=>[n.b(),{[n.m("has-breadcrumb")]:!!t.breadcrumb,[n.m("has-extra")]:!!t.extra,[n.is("contentful")]:!!t.default}]);function o(){e("back")}return(a,l)=>(D(),ee("div",{class:j(y(s))},[a.$slots.breadcrumb?(D(),ee("div",{key:0,class:j(y(n).e("breadcrumb"))},[ze(a.$slots,"breadcrumb")],2)):Re("v-if",!0),J("div",{class:j(y(n).e("header"))},[J("div",{class:j(y(n).e("left"))},[J("div",{class:j(y(n).e("back")),role:"button",tabindex:"0",onClick:o},[a.icon||a.$slots.icon?(D(),ee("div",{key:0,"aria-label":a.title||y(i)("el.pageHeader.title"),class:j(y(n).e("icon"))},[ze(a.$slots,"icon",{},()=>[a.icon?(D(),Ae(y(dt),{key:0},{default:me(()=>[(D(),Ae(Xt(a.icon)))]),_:1})):Re("v-if",!0)])],10,NSe)):Re("v-if",!0),J("div",{class:j(y(n).e("title"))},[ze(a.$slots,"title",{},()=>[ir($e(a.title||y(i)("el.pageHeader.title")),1)])],2)],2),ue(y(Xz),{direction:"vertical"}),J("div",{class:j(y(n).e("content"))},[ze(a.$slots,"content",{},()=>[ir($e(a.content),1)])],2)],2),a.$slots.extra?(D(),ee("div",{key:0,class:j(y(n).e("extra"))},[ze(a.$slots,"extra")],2)):Re("v-if",!0)],2),a.$slots.default?(D(),ee("div",{key:1,class:j(y(n).e("main"))},[ze(a.$slots,"default")],2)):Re("v-if",!0)],2))}});var LSe=Qe(kSe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/page-header/src/page-header.vue"]]);const OSe=zt(LSe),d5=Symbol("elPaginationKey"),PSe=et({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:Gr}}),ISe={click:r=>r instanceof MouseEvent},DSe=["disabled","aria-label","aria-disabled"],USe={key:0},FSe=xe({name:"ElPaginationPrev"}),BSe=xe({...FSe,props:PSe,emits:ISe,setup(r){const e=r,{t}=pr(),i=I(()=>e.disabled||e.currentPage<=1);return(n,s)=>(D(),ee("button",{type:"button",class:"btn-prev",disabled:y(i),"aria-label":n.prevText||y(t)("el.pagination.prev"),"aria-disabled":y(i),onClick:s[0]||(s[0]=o=>n.$emit("click",o))},[n.prevText?(D(),ee("span",USe,$e(n.prevText),1)):(D(),Ae(y(dt),{key:1},{default:me(()=>[(D(),Ae(Xt(n.prevIcon)))]),_:1}))],8,DSe))}});var zSe=Qe(BSe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/prev.vue"]]);const VSe=et({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:Gr}}),GSe=["disabled","aria-label","aria-disabled"],jSe={key:0},HSe=xe({name:"ElPaginationNext"}),WSe=xe({...HSe,props:VSe,emits:["click"],setup(r){const e=r,{t}=pr(),i=I(()=>e.disabled||e.currentPage===e.pageCount||e.pageCount===0);return(n,s)=>(D(),ee("button",{type:"button",class:"btn-next",disabled:y(i),"aria-label":n.nextText||y(t)("el.pagination.next"),"aria-disabled":y(i),onClick:s[0]||(s[0]=o=>n.$emit("click",o))},[n.nextText?(D(),ee("span",jSe,$e(n.nextText),1)):(D(),Ae(y(dt),{key:1},{default:me(()=>[(D(),Ae(Xt(n.nextIcon)))]),_:1}))],8,GSe))}});var $Se=Qe(WSe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/next.vue"]]);const h5=Symbol("ElSelectGroup"),n0=Symbol("ElSelect");function XSe(r,e){const t=ut(n0),i=ut(h5,{disabled:!1}),n=I(()=>Object.prototype.toString.call(r.value).toLowerCase()==="[object object]"),s=I(()=>t.props.multiple?d(t.props.modelValue,r.value):h(r.value,t.props.modelValue)),o=I(()=>{if(t.props.multiple){const m=t.props.modelValue||[];return!s.value&&m.length>=t.props.multipleLimit&&t.props.multipleLimit>0}else return!1}),a=I(()=>r.label||(n.value?"":r.value)),l=I(()=>r.value||r.label||""),c=I(()=>r.disabled||e.groupDisabled||o.value),u=Dt(),d=(m=[],g)=>{if(n.value){const v=t.props.valueKey;return m&&m.some(x=>Tr(ti(x,v))===ti(g,v))}else return m&&m.includes(g)},h=(m,g)=>{if(n.value){const{valueKey:v}=t.props;return ti(m,v)===ti(g,v)}else return m===g},p=()=>{!r.disabled&&!i.disabled&&(t.hoverIndex=t.optionsArray.indexOf(u.proxy))};Ve(()=>a.value,()=>{!r.created&&!t.props.remote&&t.setSelected()}),Ve(()=>r.value,(m,g)=>{const{remote:v,valueKey:x}=t.props;if(Object.is(m,g)||(t.onOptionDestroy(g,u.proxy),t.onOptionCreate(u.proxy)),!r.created&&!v){if(x&&typeof m=="object"&&typeof g=="object"&&m[x]===g[x])return;t.setSelected()}}),Ve(()=>i.disabled,()=>{e.groupDisabled=i.disabled},{immediate:!0});const{queryChange:f}=Tr(t);return Ve(f,m=>{const{query:g}=y(m),v=new RegExp(lU(g),"i");e.visible=v.test(a.value)||r.created,e.visible||t.filteredOptionsCount--},{immediate:!0}),{select:t,currentLabel:a,currentValue:l,itemSelected:s,isDisabled:c,hoverItem:p}}const qSe=xe({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:Boolean},setup(r){const e=Ge("select"),t=I(()=>[e.be("dropdown","item"),e.is("disabled",y(o)),{selected:y(s),hover:y(u)}]),i=br({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:n,itemSelected:s,isDisabled:o,select:a,hoverItem:l}=XSe(r,i),{visible:c,hover:u}=fn(i),d=Dt().proxy;a.onOptionCreate(d),Zr(()=>{const p=d.value,{selected:f}=a,m=(a.props.multiple?f:[f]).some(g=>g.value===d.value);ht(()=>{a.cachedOptions.get(p)===d&&!m&&a.cachedOptions.delete(p)}),a.onOptionDestroy(p,d)});function h(){r.disabled!==!0&&i.groupDisabled!==!0&&a.handleOptionSelect(d)}return{ns:e,containerKls:t,currentLabel:n,itemSelected:s,isDisabled:o,select:a,hoverItem:l,visible:c,hover:u,selectOptionClick:h,states:i}}});function KSe(r,e,t,i,n,s){return It((D(),ee("li",{class:j(r.containerKls),onMouseenter:e[0]||(e[0]=(...o)=>r.hoverItem&&r.hoverItem(...o)),onClick:e[1]||(e[1]=Mt((...o)=>r.selectOptionClick&&r.selectOptionClick(...o),["stop"]))},[ze(r.$slots,"default",{},()=>[J("span",null,$e(r.currentLabel),1)])],34)),[[vr,r.visible]])}var xC=Qe(qSe,[["render",KSe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const YSe=xe({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const r=ut(n0),e=Ge("select"),t=I(()=>r.props.popperClass),i=I(()=>r.props.multiple),n=I(()=>r.props.fitInputWidth),s=W("");function o(){var a;s.value=`${(a=r.selectWrapper)==null?void 0:a.offsetWidth}px`}return Et(()=>{o(),cs(r.selectWrapper,o)}),{ns:e,minWidth:s,popperClass:t,isMultiple:i,isFitInputWidth:n}}});function ZSe(r,e,t,i,n,s){return D(),ee("div",{class:j([r.ns.b("dropdown"),r.ns.is("multiple",r.isMultiple),r.popperClass]),style:pt({[r.isFitInputWidth?"width":"minWidth"]:r.minWidth})},[ze(r.$slots,"default")],6)}var JSe=Qe(YSe,[["render",ZSe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function QSe(r){const{t:e}=pr();return br({options:new Map,cachedOptions:new Map,disabledOptions:new Map,createdLabel:null,createdSelected:!1,selected:r.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:e("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,prefixWidth:11,mouseEnter:!1,focused:!1})}const e2e=(r,e,t)=>{const{t:i}=pr(),n=Ge("select");bl({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},I(()=>r.suffixTransition===!1));const s=W(null),o=W(null),a=W(null),l=W(null),c=W(null),u=W(null),d=W(null),h=W(null),p=W(-1),f=Vr({query:""}),m=Vr(""),g=W([]);let v=0;const{form:x,formItem:b}=Ns(),w=I(()=>!r.filterable||r.multiple||!e.visible),_=I(()=>r.disabled||(x==null?void 0:x.disabled)),S=I(()=>{const Me=r.multiple?Array.isArray(r.modelValue)&&r.modelValue.length>0:r.modelValue!==void 0&&r.modelValue!==null&&r.modelValue!=="";return r.clearable&&!_.value&&e.inputHovering&&Me}),T=I(()=>r.remote&&r.filterable&&!r.remoteShowSuffix?"":r.suffixIcon),M=I(()=>n.is("reverse",T.value&&e.visible&&r.suffixTransition)),E=I(()=>(x==null?void 0:x.statusIcon)&&(b==null?void 0:b.validateState)&&JM[b==null?void 0:b.validateState]),C=I(()=>r.remote?300:0),P=I(()=>r.loading?r.loadingText||i("el.select.loading"):r.remote&&e.query===""&&e.options.size===0?!1:r.filterable&&e.query&&e.options.size>0&&e.filteredOptionsCount===0?r.noMatchText||i("el.select.noMatch"):e.options.size===0?r.noDataText||i("el.select.noData"):null),A=I(()=>{const Me=Array.from(e.options.values()),Ne=[];return g.value.forEach(fe=>{const Ie=Me.findIndex(wt=>wt.currentLabel===fe);Ie>-1&&Ne.push(Me[Ie])}),Ne.length?Ne:Me}),N=I(()=>Array.from(e.cachedOptions.values())),R=I(()=>{const Me=A.value.filter(Ne=>!Ne.created).some(Ne=>Ne.currentLabel===e.query);return r.filterable&&r.allowCreate&&e.query!==""&&!Me}),F=Hi(),B=I(()=>["small"].includes(F.value)?"small":"default"),k=I({get(){return e.visible&&P.value!==!1},set(Me){e.visible=Me}});Ve([()=>_.value,()=>F.value,()=>x==null?void 0:x.size],()=>{ht(()=>{z()})}),Ve(()=>r.placeholder,Me=>{e.cachedPlaceHolder=e.currentPlaceholder=Me,r.multiple&&Array.isArray(r.modelValue)&&r.modelValue.length>0&&(e.currentPlaceholder="")}),Ve(()=>r.modelValue,(Me,Ne)=>{r.multiple&&(z(),Me&&Me.length>0||o.value&&e.query!==""?e.currentPlaceholder="":e.currentPlaceholder=e.cachedPlaceHolder,r.filterable&&!r.reserveKeyword&&(e.query="",O(e.query))),G(),r.filterable&&!r.multiple&&(e.inputLength=20),!$s(Me,Ne)&&r.validateEvent&&(b==null||b.validate("change").catch(fe=>{}))},{flush:"post",deep:!0}),Ve(()=>e.visible,Me=>{var Ne,fe,Ie,wt,xt;Me?((fe=(Ne=l.value)==null?void 0:Ne.updatePopper)==null||fe.call(Ne),r.filterable&&(e.filteredOptionsCount=e.optionsCount,e.query=r.remote?"":e.selectedLabel,(wt=(Ie=a.value)==null?void 0:Ie.focus)==null||wt.call(Ie),r.multiple?(xt=o.value)==null||xt.focus():e.selectedLabel&&(e.currentPlaceholder=`${e.selectedLabel}`,e.selectedLabel=""),O(e.query),!r.multiple&&!r.remote&&(f.value.query="",Jg(f),Jg(m)))):(r.filterable&&(Nt(r.filterMethod)&&r.filterMethod(""),Nt(r.remoteMethod)&&r.remoteMethod("")),e.query="",e.previousQuery=null,e.selectedLabel="",e.inputLength=20,e.menuVisibleOnFocus=!1,ie(),ht(()=>{o.value&&o.value.value===""&&e.selected.length===0&&(e.currentPlaceholder=e.cachedPlaceHolder)}),r.multiple||(e.selected&&(r.filterable&&r.allowCreate&&e.createdSelected&&e.createdLabel?e.selectedLabel=e.createdLabel:e.selectedLabel=e.selected.currentLabel,r.filterable&&(e.query=e.selectedLabel)),r.filterable&&(e.currentPlaceholder=e.cachedPlaceHolder))),t.emit("visible-change",Me)}),Ve(()=>e.options.entries(),()=>{var Me,Ne,fe;if(!ar)return;(Ne=(Me=l.value)==null?void 0:Me.updatePopper)==null||Ne.call(Me),r.multiple&&z();const Ie=((fe=d.value)==null?void 0:fe.querySelectorAll("input"))||[];(!r.filterable&&!r.defaultFirstOption&&!rn(r.modelValue)||!Array.from(Ie).includes(document.activeElement))&&G(),r.defaultFirstOption&&(r.filterable||r.remote)&&e.filteredOptionsCount&&U()},{flush:"post"}),Ve(()=>e.hoverIndex,Me=>{Ct(Me)&&Me>-1?p.value=A.value[Me]||{}:p.value={},A.value.forEach(Ne=>{Ne.hover=p.value===Ne})});const z=()=>{ht(()=>{var Me,Ne;if(!s.value)return;const fe=s.value.$el.querySelector("input");v=v||(fe.clientHeight>0?fe.clientHeight+2:0);const Ie=u.value,wt=ode(F.value||(x==null?void 0:x.size)),xt=F.value||wt===v||v<=0?wt:v;fe.offsetParent!==null&&(fe.style.height=`${(e.selected.length===0?xt:Math.max(Ie?Ie.clientHeight+(Ie.clientHeight>xt?6:0):0,xt))-2}px`),e.visible&&P.value!==!1&&((Ne=(Me=l.value)==null?void 0:Me.updatePopper)==null||Ne.call(Me))})},O=async Me=>{if(!(e.previousQuery===Me||e.isOnComposition)){if(e.previousQuery===null&&(Nt(r.filterMethod)||Nt(r.remoteMethod))){e.previousQuery=Me;return}e.previousQuery=Me,ht(()=>{var Ne,fe;e.visible&&((fe=(Ne=l.value)==null?void 0:Ne.updatePopper)==null||fe.call(Ne))}),e.hoverIndex=-1,r.multiple&&r.filterable&&ht(()=>{if(!_.value){const Ne=o.value.value.length*15+20;e.inputLength=r.collapseTags?Math.min(50,Ne):Ne,V()}z()}),r.remote&&Nt(r.remoteMethod)?(e.hoverIndex=-1,r.remoteMethod(Me)):Nt(r.filterMethod)?(r.filterMethod(Me),Jg(m)):(e.filteredOptionsCount=e.optionsCount,f.value.query=Me,Jg(f),Jg(m)),r.defaultFirstOption&&(r.filterable||r.remote)&&e.filteredOptionsCount&&(await ht(),U())}},V=()=>{e.currentPlaceholder!==""&&(e.currentPlaceholder=o.value.value?"":e.cachedPlaceHolder)},U=()=>{const Me=A.value.filter(Ie=>Ie.visible&&!Ie.disabled&&!Ie.states.groupDisabled),Ne=Me.find(Ie=>Ie.created),fe=Me[0];e.hoverIndex=le(A.value,Ne||fe)},G=()=>{var Me;if(r.multiple)e.selectedLabel="";else{const fe=X(r.modelValue);(Me=fe.props)!=null&&Me.created?(e.createdLabel=fe.props.value,e.createdSelected=!0):e.createdSelected=!1,e.selectedLabel=fe.currentLabel,e.selected=fe,r.filterable&&(e.query=e.selectedLabel);return}const Ne=[];Array.isArray(r.modelValue)&&r.modelValue.forEach(fe=>{Ne.push(X(fe))}),e.selected=Ne,ht(()=>{z()})},X=Me=>{let Ne;const fe=f1(Me).toLowerCase()==="object",Ie=f1(Me).toLowerCase()==="null",wt=f1(Me).toLowerCase()==="undefined";for(let Jt=e.cachedOptions.size-1;Jt>=0;Jt--){const _r=N.value[Jt];if(fe?ti(_r.value,r.valueKey)===ti(Me,r.valueKey):_r.value===Me){Ne={value:Me,currentLabel:_r.currentLabel,isDisabled:_r.isDisabled};break}}if(Ne)return Ne;const xt=fe?Me.label:!Ie&&!wt?Me:"",Gt={value:Me,currentLabel:xt};return r.multiple&&(Gt.hitState=!1),Gt},ie=()=>{setTimeout(()=>{const Me=r.valueKey;r.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map(Ne=>A.value.findIndex(fe=>ti(fe,Me)===ti(Ne,Me)))):e.hoverIndex=-1:e.hoverIndex=A.value.findIndex(Ne=>we(Ne)===we(e.selected))},300)},se=()=>{var Me,Ne;de(),(Ne=(Me=l.value)==null?void 0:Me.updatePopper)==null||Ne.call(Me),r.multiple&&z()},de=()=>{var Me;e.inputWidth=(Me=s.value)==null?void 0:Me.$el.offsetWidth},K=()=>{r.filterable&&e.query!==e.selectedLabel&&(e.query=e.selectedLabel,O(e.query))},q=Es(()=>{K()},C.value),ce=Es(Me=>{O(Me.target.value)},C.value),Te=Me=>{$s(r.modelValue,Me)||t.emit(Kr,Me)},Z=Me=>Ese(Me,Ne=>!e.disabledOptions.has(Ne)),L=Me=>{if(Me.code!==bt.delete){if(Me.target.value.length<=0&&!Fe()){const Ne=r.modelValue.slice(),fe=Z(Ne);if(fe<0)return;Ne.splice(fe,1),t.emit(Wt,Ne),Te(Ne)}Me.target.value.length===1&&r.modelValue.length===0&&(e.currentPlaceholder=e.cachedPlaceHolder)}},$=(Me,Ne)=>{const fe=e.selected.indexOf(Ne);if(fe>-1&&!_.value){const Ie=r.modelValue.slice();Ie.splice(fe,1),t.emit(Wt,Ie),Te(Ie),t.emit("remove-tag",Ne.value)}Me.stopPropagation(),Le()},re=Me=>{Me.stopPropagation();const Ne=r.multiple?[]:"";if(!kt(Ne))for(const fe of e.selected)fe.isDisabled&&Ne.push(fe.value);t.emit(Wt,Ne),Te(Ne),e.hoverIndex=-1,e.visible=!1,t.emit("clear"),Le()},te=Me=>{var Ne;if(r.multiple){const fe=(r.modelValue||[]).slice(),Ie=le(fe,Me.value);Ie>-1?fe.splice(Ie,1):(r.multipleLimit<=0||fe.length<r.multipleLimit)&&fe.push(Me.value),t.emit(Wt,fe),Te(fe),Me.created&&(e.query="",O(""),e.inputLength=20),r.filterable&&((Ne=o.value)==null||Ne.focus())}else t.emit(Wt,Me.value),Te(Me.value),e.visible=!1;ge(),!e.visible&&ht(()=>{be(Me)})},le=(Me=[],Ne)=>{if(!Ht(Ne))return Me.indexOf(Ne);const fe=r.valueKey;let Ie=-1;return Me.some((wt,xt)=>Tr(ti(wt,fe))===ti(Ne,fe)?(Ie=xt,!0):!1),Ie},ge=()=>{const Me=o.value||s.value;Me&&(Me==null||Me.focus())},be=Me=>{var Ne,fe,Ie,wt,xt;const Gt=Array.isArray(Me)?Me[0]:Me;let Jt=null;if(Gt!=null&&Gt.value){const _r=A.value.filter(yi=>yi.value===Gt.value);_r.length>0&&(Jt=_r[0].$el)}if(l.value&&Jt){const _r=(wt=(Ie=(fe=(Ne=l.value)==null?void 0:Ne.popperRef)==null?void 0:fe.contentRef)==null?void 0:Ie.querySelector)==null?void 0:wt.call(Ie,`.${n.be("dropdown","wrap")}`);_r&&dU(_r,Jt)}(xt=h.value)==null||xt.handleScroll()},_e=Me=>{e.optionsCount++,e.filteredOptionsCount++,e.options.set(Me.value,Me),e.cachedOptions.set(Me.value,Me),Me.disabled&&e.disabledOptions.set(Me.value,Me)},pe=(Me,Ne)=>{e.options.get(Me)===Ne&&(e.optionsCount--,e.filteredOptionsCount--,e.options.delete(Me))},Se=Me=>{Me.code!==bt.backspace&&Fe(!1),e.inputLength=o.value.value.length*15+20,z()},Fe=Me=>{if(!Array.isArray(e.selected))return;const Ne=Z(e.selected.map(Ie=>Ie.value)),fe=e.selected[Ne];if(fe)return Me===!0||Me===!1?(fe.hitState=Me,Me):(fe.hitState=!fe.hitState,fe.hitState)},Y=Me=>{const Ne=Me.target.value;if(Me.type==="compositionend")e.isOnComposition=!1,ht(()=>O(Ne));else{const fe=Ne[Ne.length-1]||"";e.isOnComposition=!fx(fe)}},H=()=>{ht(()=>be(e.selected))},ne=Me=>{e.focused||((r.automaticDropdown||r.filterable)&&(r.filterable&&!e.visible&&(e.menuVisibleOnFocus=!0),e.visible=!0),e.focused=!0,t.emit("focus",Me))},Le=()=>{var Me,Ne;e.visible?(Me=o.value||s.value)==null||Me.focus():(Ne=s.value)==null||Ne.focus()},Pe=()=>{var Me,Ne,fe;e.visible=!1,(Me=s.value)==null||Me.blur(),(fe=(Ne=a.value)==null?void 0:Ne.blur)==null||fe.call(Ne)},Ee=Me=>{var Ne,fe,Ie;(Ne=l.value)!=null&&Ne.isFocusInsideContent(Me)||(fe=c.value)!=null&&fe.isFocusInsideContent(Me)||(Ie=d.value)!=null&&Ie.contains(Me.relatedTarget)||(e.visible&&Be(),e.focused=!1,t.emit("blur",Me))},Ue=Me=>{re(Me)},Be=()=>{e.visible=!1},ve=Me=>{e.visible&&(Me.preventDefault(),Me.stopPropagation(),e.visible=!1)},Q=Me=>{Me&&!e.mouseEnter||_.value||(e.menuVisibleOnFocus?e.menuVisibleOnFocus=!1:(!l.value||!l.value.isFocusInsideContent())&&(e.visible=!e.visible),Le())},he=()=>{e.visible?A.value[e.hoverIndex]&&te(A.value[e.hoverIndex]):Q()},we=Me=>Ht(Me.value)?ti(Me.value,r.valueKey):Me.value,ae=I(()=>A.value.filter(Me=>Me.visible).every(Me=>Me.disabled)),De=I(()=>e.selected.slice(0,r.maxCollapseTags)),We=I(()=>e.selected.slice(r.maxCollapseTags)),je=Me=>{if(!e.visible){e.visible=!0;return}if(!(e.options.size===0||e.filteredOptionsCount===0)&&!e.isOnComposition&&!ae.value){Me==="next"?(e.hoverIndex++,e.hoverIndex===e.options.size&&(e.hoverIndex=0)):Me==="prev"&&(e.hoverIndex--,e.hoverIndex<0&&(e.hoverIndex=e.options.size-1));const Ne=A.value[e.hoverIndex];(Ne.disabled===!0||Ne.states.groupDisabled===!0||!Ne.visible)&&je(Me),ht(()=>be(p.value))}},ye=()=>{e.mouseEnter=!0},nt=()=>{e.mouseEnter=!1},He=(Me,Ne)=>{var fe,Ie;$(Me,Ne),(Ie=(fe=c.value)==null?void 0:fe.updatePopper)==null||Ie.call(fe)},tt=I(()=>({maxWidth:`${y(e.inputWidth)-32-(E.value?22:0)}px`,width:"100%"}));return{optionList:g,optionsArray:A,selectSize:F,handleResize:se,debouncedOnInputChange:q,debouncedQueryChange:ce,deletePrevTag:L,deleteTag:$,deleteSelected:re,handleOptionSelect:te,scrollToOption:be,readonly:w,resetInputHeight:z,showClose:S,iconComponent:T,iconReverse:M,showNewOption:R,collapseTagSize:B,setSelected:G,managePlaceholder:V,selectDisabled:_,emptyText:P,toggleLastOptionHitState:Fe,resetInputState:Se,handleComposition:Y,onOptionCreate:_e,onOptionDestroy:pe,handleMenuEnter:H,handleFocus:ne,focus:Le,blur:Pe,handleBlur:Ee,handleClearClick:Ue,handleClose:Be,handleKeydownEscape:ve,toggleMenu:Q,selectOption:he,getValueKey:we,navigateOptions:je,handleDeleteTooltipTag:He,dropMenuVisible:k,queryChange:f,groupQueryChange:m,showTagList:De,collapseTagList:We,selectTagsStyle:tt,reference:s,input:o,iOSInput:a,tooltipRef:l,tagTooltipRef:c,tags:u,selectWrapper:d,scrollbar:h,handleMouseEnter:ye,handleMouseLeave:nt}};var t2e=xe({name:"ElOptions",emits:["update-options"],setup(r,{slots:e,emit:t}){let i=[];function n(s,o){if(s.length!==o.length)return!1;for(const[a]of s.entries())if(s[a]!=o[a])return!1;return!0}return()=>{var s,o;const a=(s=e.default)==null?void 0:s.call(e),l=[];function c(u){Array.isArray(u)&&u.forEach(d=>{var h,p,f,m;const g=(h=(d==null?void 0:d.type)||{})==null?void 0:h.name;g==="ElOptionGroup"?c(!kt(d.children)&&!Array.isArray(d.children)&&Nt((p=d.children)==null?void 0:p.default)?(f=d.children)==null?void 0:f.default():d.children):g==="ElOption"?l.push((m=d.props)==null?void 0:m.label):Array.isArray(d.children)&&c(d.children)})}return a.length&&c((o=a[0])==null?void 0:o.children),n(l,i)||(i=l,t("update-options",l)),a}}});const p5="ElSelect",r2e=xe({name:p5,componentName:p5,components:{ElInput:us,ElSelectMenu:JSe,ElOption:xC,ElOptions:t2e,ElTag:Qv,ElScrollbar:ac,ElTooltip:Rs,ElIcon:dt},directives:{ClickOutside:Su},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:px},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:Boolean,maxCollapseTags:{type:Number,default:1},teleported:Nn.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:Gr,default:uu},fitInputWidth:Boolean,suffixIcon:{type:Gr,default:lu},tagType:{...nC.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:Boolean,suffixTransition:{type:Boolean,default:!0},placement:{type:String,values:$d,default:"bottom-start"},ariaLabel:{type:String,default:void 0}},emits:[Wt,Kr,"remove-tag","clear","visible-change","focus","blur"],setup(r,e){const t=Ge("select"),i=Ge("input"),{t:n}=pr(),s=QSe(r),{optionList:o,optionsArray:a,selectSize:l,readonly:c,handleResize:u,collapseTagSize:d,debouncedOnInputChange:h,debouncedQueryChange:p,deletePrevTag:f,deleteTag:m,deleteSelected:g,handleOptionSelect:v,scrollToOption:x,setSelected:b,resetInputHeight:w,managePlaceholder:_,showClose:S,selectDisabled:T,iconComponent:M,iconReverse:E,showNewOption:C,emptyText:P,toggleLastOptionHitState:A,resetInputState:N,handleComposition:R,onOptionCreate:F,onOptionDestroy:B,handleMenuEnter:k,handleFocus:z,focus:O,blur:V,handleBlur:U,handleClearClick:G,handleClose:X,handleKeydownEscape:ie,toggleMenu:se,selectOption:de,getValueKey:K,navigateOptions:q,handleDeleteTooltipTag:ce,dropMenuVisible:Te,reference:Z,input:L,iOSInput:$,tooltipRef:re,tagTooltipRef:te,tags:le,selectWrapper:ge,scrollbar:be,queryChange:_e,groupQueryChange:pe,handleMouseEnter:Se,handleMouseLeave:Fe,showTagList:Y,collapseTagList:H,selectTagsStyle:ne}=e2e(r,s,e),{inputWidth:Le,selected:Pe,inputLength:Ee,filteredOptionsCount:Ue,visible:Be,selectedLabel:ve,hoverIndex:Q,query:he,inputHovering:we,currentPlaceholder:ae,menuVisibleOnFocus:De,isOnComposition:We,options:je,cachedOptions:ye,optionsCount:nt,prefixWidth:He}=fn(s),tt=I(()=>{const _r=[t.b()],yi=y(l);return yi&&_r.push(t.m(yi)),r.disabled&&_r.push(t.m("disabled")),_r}),Me=I(()=>[t.e("tags"),t.is("disabled",y(T))]),Ne=I(()=>[t.b("tags-wrapper"),{"has-prefix":y(He)&&y(Pe).length}]),fe=I(()=>[t.e("input"),t.is(y(l)),t.is("disabled",y(T))]),Ie=I(()=>[t.e("input"),t.is(y(l)),t.em("input","iOS")]),wt=I(()=>[t.is("empty",!r.allowCreate&&!!y(he)&&y(Ue)===0)]),xt=I(()=>({maxWidth:`${y(Le)>123?y(Le)-123:y(Le)-75}px`})),Gt=I(()=>({marginLeft:`${y(He)}px`,flexGrow:1,width:`${y(Ee)/(y(Le)-32)}%`,maxWidth:`${y(Le)-42}px`}));Yt(n0,br({props:r,options:je,optionsArray:a,cachedOptions:ye,optionsCount:nt,filteredOptionsCount:Ue,hoverIndex:Q,handleOptionSelect:v,onOptionCreate:F,onOptionDestroy:B,selectWrapper:ge,selected:Pe,setSelected:b,queryChange:_e,groupQueryChange:pe})),Et(()=>{s.cachedPlaceHolder=ae.value=r.placeholder||(()=>n("el.select.placeholder")),r.multiple&&Array.isArray(r.modelValue)&&r.modelValue.length>0&&(ae.value=""),cs(ge,u),r.remote&&r.multiple&&w(),ht(()=>{const _r=Z.value&&Z.value.$el;if(_r&&(Le.value=_r.getBoundingClientRect().width,e.slots.prefix)){const yi=_r.querySelector(`.${i.e("prefix")}`);He.value=Math.max(yi.getBoundingClientRect().width+11,30)}}),b()}),r.multiple&&!Array.isArray(r.modelValue)&&e.emit(Wt,[]),!r.multiple&&Array.isArray(r.modelValue)&&e.emit(Wt,"");const Jt=I(()=>{var _r,yi;return(yi=(_r=re.value)==null?void 0:_r.popperRef)==null?void 0:yi.contentRef});return{isIOS:ID,onOptionsRendered:_r=>{o.value=_r},prefixWidth:He,selectSize:l,readonly:c,handleResize:u,collapseTagSize:d,debouncedOnInputChange:h,debouncedQueryChange:p,deletePrevTag:f,deleteTag:m,handleDeleteTooltipTag:ce,deleteSelected:g,handleOptionSelect:v,scrollToOption:x,inputWidth:Le,selected:Pe,inputLength:Ee,filteredOptionsCount:Ue,visible:Be,selectedLabel:ve,hoverIndex:Q,query:he,inputHovering:we,currentPlaceholder:ae,menuVisibleOnFocus:De,isOnComposition:We,options:je,resetInputHeight:w,managePlaceholder:_,showClose:S,selectDisabled:T,iconComponent:M,iconReverse:E,showNewOption:C,emptyText:P,toggleLastOptionHitState:A,resetInputState:N,handleComposition:R,handleMenuEnter:k,handleFocus:z,focus:O,blur:V,handleBlur:U,handleClearClick:G,handleClose:X,handleKeydownEscape:ie,toggleMenu:se,selectOption:de,getValueKey:K,navigateOptions:q,dropMenuVisible:Te,reference:Z,input:L,iOSInput:$,tooltipRef:re,popperPaneRef:Jt,tags:le,selectWrapper:ge,scrollbar:be,wrapperKls:tt,tagsKls:Me,tagWrapperKls:Ne,inputKls:fe,iOSInputKls:Ie,scrollbarKls:wt,selectTagsStyle:ne,nsSelect:t,tagTextStyle:xt,inputStyle:Gt,handleMouseEnter:Se,handleMouseLeave:Fe,showTagList:Y,collapseTagList:H,tagTooltipRef:te}}}),i2e=["disabled","autocomplete","aria-label"],n2e=["disabled"],s2e={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function o2e(r,e,t,i,n,s){const o=gt("el-tag"),a=gt("el-tooltip"),l=gt("el-icon"),c=gt("el-input"),u=gt("el-option"),d=gt("el-options"),h=gt("el-scrollbar"),p=gt("el-select-menu"),f=Yp("click-outside");return It((D(),ee("div",{ref:"selectWrapper",class:j(r.wrapperKls),onMouseenter:e[22]||(e[22]=(...m)=>r.handleMouseEnter&&r.handleMouseEnter(...m)),onMouseleave:e[23]||(e[23]=(...m)=>r.handleMouseLeave&&r.handleMouseLeave(...m)),onClick:e[24]||(e[24]=Mt((...m)=>r.toggleMenu&&r.toggleMenu(...m),["stop"]))},[ue(a,{ref:"tooltipRef",visible:r.dropMenuVisible,placement:r.placement,teleported:r.teleported,"popper-class":[r.nsSelect.e("popper"),r.popperClass],"popper-options":r.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:r.effect,pure:"",trigger:"click",transition:`${r.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:r.persistent,onShow:r.handleMenuEnter},{default:me(()=>[J("div",{class:"select-trigger",onMouseenter:e[20]||(e[20]=m=>r.inputHovering=!0),onMouseleave:e[21]||(e[21]=m=>r.inputHovering=!1)},[r.multiple?(D(),ee("div",{key:0,ref:"tags",tabindex:"-1",class:j(r.tagsKls),style:pt(r.selectTagsStyle),onClick:e[15]||(e[15]=(...m)=>r.focus&&r.focus(...m))},[r.collapseTags&&r.selected.length?(D(),Ae(Li,{key:0,onAfterLeave:r.resetInputHeight},{default:me(()=>[J("span",{class:j(r.tagWrapperKls)},[(D(!0),ee(ct,null,Ut(r.showTagList,m=>(D(),Ae(o,{key:r.getValueKey(m),closable:!r.selectDisabled&&!m.isDisabled,size:r.collapseTagSize,hit:m.hitState,type:r.tagType,"disable-transitions":"",onClose:g=>r.deleteTag(g,m)},{default:me(()=>[J("span",{class:j(r.nsSelect.e("tags-text")),style:pt(r.tagTextStyle)},$e(m.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128)),r.selected.length>r.maxCollapseTags?(D(),Ae(o,{key:0,closable:!1,size:r.collapseTagSize,type:r.tagType,"disable-transitions":""},{default:me(()=>[r.collapseTagsTooltip?(D(),Ae(a,{key:0,ref:"tagTooltipRef",disabled:r.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:r.effect,placement:"bottom",teleported:r.teleported},{default:me(()=>[J("span",{class:j(r.nsSelect.e("tags-text"))},"+ "+$e(r.selected.length-r.maxCollapseTags),3)]),content:me(()=>[J("div",{class:j(r.nsSelect.e("collapse-tags"))},[(D(!0),ee(ct,null,Ut(r.collapseTagList,m=>(D(),ee("div",{key:r.getValueKey(m),class:j(r.nsSelect.e("collapse-tag"))},[ue(o,{class:"in-tooltip",closable:!r.selectDisabled&&!m.isDisabled,size:r.collapseTagSize,hit:m.hitState,type:r.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:g=>r.handleDeleteTooltipTag(g,m)},{default:me(()=>[J("span",{class:j(r.nsSelect.e("tags-text")),style:pt({maxWidth:r.inputWidth-75+"px"})},$e(m.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):(D(),ee("span",{key:1,class:j(r.nsSelect.e("tags-text"))},"+ "+$e(r.selected.length-r.maxCollapseTags),3))]),_:1},8,["size","type"])):Re("v-if",!0)],2)]),_:1},8,["onAfterLeave"])):Re("v-if",!0),r.collapseTags?Re("v-if",!0):(D(),Ae(Li,{key:1,onAfterLeave:r.resetInputHeight},{default:me(()=>[J("span",{class:j(r.tagWrapperKls),style:pt(r.prefixWidth&&r.selected.length?{marginLeft:`${r.prefixWidth}px`}:"")},[(D(!0),ee(ct,null,Ut(r.selected,m=>(D(),Ae(o,{key:r.getValueKey(m),closable:!r.selectDisabled&&!m.isDisabled,size:r.collapseTagSize,hit:m.hitState,type:r.tagType,"disable-transitions":"",onClose:g=>r.deleteTag(g,m)},{default:me(()=>[J("span",{class:j(r.nsSelect.e("tags-text")),style:pt({maxWidth:r.inputWidth-75+"px"})},$e(m.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],6)]),_:1},8,["onAfterLeave"])),r.filterable&&!r.selectDisabled?It((D(),ee("input",{key:2,ref:"input","onUpdate:modelValue":e[0]||(e[0]=m=>r.query=m),type:"text",class:j(r.inputKls),disabled:r.selectDisabled,autocomplete:r.autocomplete,style:pt(r.inputStyle),"aria-label":r.ariaLabel,onFocus:e[1]||(e[1]=(...m)=>r.handleFocus&&r.handleFocus(...m)),onBlur:e[2]||(e[2]=(...m)=>r.handleBlur&&r.handleBlur(...m)),onKeyup:e[3]||(e[3]=(...m)=>r.managePlaceholder&&r.managePlaceholder(...m)),onKeydown:[e[4]||(e[4]=(...m)=>r.resetInputState&&r.resetInputState(...m)),e[5]||(e[5]=dr(Mt(m=>r.navigateOptions("next"),["prevent"]),["down"])),e[6]||(e[6]=dr(Mt(m=>r.navigateOptions("prev"),["prevent"]),["up"])),e[7]||(e[7]=dr((...m)=>r.handleKeydownEscape&&r.handleKeydownEscape(...m),["esc"])),e[8]||(e[8]=dr(Mt((...m)=>r.selectOption&&r.selectOption(...m),["stop","prevent"]),["enter"])),e[9]||(e[9]=dr((...m)=>r.deletePrevTag&&r.deletePrevTag(...m),["delete"])),e[10]||(e[10]=dr(m=>r.visible=!1,["tab"]))],onCompositionstart:e[11]||(e[11]=(...m)=>r.handleComposition&&r.handleComposition(...m)),onCompositionupdate:e[12]||(e[12]=(...m)=>r.handleComposition&&r.handleComposition(...m)),onCompositionend:e[13]||(e[13]=(...m)=>r.handleComposition&&r.handleComposition(...m)),onInput:e[14]||(e[14]=(...m)=>r.debouncedQueryChange&&r.debouncedQueryChange(...m))},null,46,i2e)),[[aM,r.query]]):Re("v-if",!0)],6)):Re("v-if",!0),Re(" fix: https://github.com/element-plus/element-plus/issues/11415 "),r.isIOS&&!r.multiple&&r.filterable&&r.readonly?(D(),ee("input",{key:1,ref:"iOSInput",class:j(r.iOSInputKls),disabled:r.selectDisabled,type:"text"},null,10,n2e)):Re("v-if",!0),ue(c,{id:r.id,ref:"reference",modelValue:r.selectedLabel,"onUpdate:modelValue":e[16]||(e[16]=m=>r.selectedLabel=m),type:"text",placeholder:typeof r.currentPlaceholder=="function"?r.currentPlaceholder():r.currentPlaceholder,name:r.name,autocomplete:r.autocomplete,size:r.selectSize,disabled:r.selectDisabled,readonly:r.readonly,"validate-event":!1,class:j([r.nsSelect.is("focus",r.visible)]),tabindex:r.multiple&&r.filterable?-1:void 0,label:r.ariaLabel,onFocus:r.handleFocus,onBlur:r.handleBlur,onInput:r.debouncedOnInputChange,onPaste:r.debouncedOnInputChange,onCompositionstart:r.handleComposition,onCompositionupdate:r.handleComposition,onCompositionend:r.handleComposition,onKeydown:[e[17]||(e[17]=dr(Mt(m=>r.navigateOptions("next"),["stop","prevent"]),["down"])),e[18]||(e[18]=dr(Mt(m=>r.navigateOptions("prev"),["stop","prevent"]),["up"])),dr(Mt(r.selectOption,["stop","prevent"]),["enter"]),dr(r.handleKeydownEscape,["esc"]),e[19]||(e[19]=dr(m=>r.visible=!1,["tab"]))]},Zl({suffix:me(()=>[r.iconComponent&&!r.showClose?(D(),Ae(l,{key:0,class:j([r.nsSelect.e("caret"),r.nsSelect.e("icon"),r.iconReverse])},{default:me(()=>[(D(),Ae(Xt(r.iconComponent)))]),_:1},8,["class"])):Re("v-if",!0),r.showClose&&r.clearIcon?(D(),Ae(l,{key:1,class:j([r.nsSelect.e("caret"),r.nsSelect.e("icon")]),onClick:r.handleClearClick},{default:me(()=>[(D(),Ae(Xt(r.clearIcon)))]),_:1},8,["class","onClick"])):Re("v-if",!0)]),_:2},[r.$slots.prefix?{name:"prefix",fn:me(()=>[J("div",s2e,[ze(r.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","label","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])],32)]),content:me(()=>[ue(p,null,{default:me(()=>[It(ue(h,{ref:"scrollbar",tag:"ul","wrap-class":r.nsSelect.be("dropdown","wrap"),"view-class":r.nsSelect.be("dropdown","list"),class:j(r.scrollbarKls)},{default:me(()=>[r.showNewOption?(D(),Ae(u,{key:0,value:r.query,created:!0},null,8,["value"])):Re("v-if",!0),ue(d,{onUpdateOptions:r.onOptionsRendered},{default:me(()=>[ze(r.$slots,"default")]),_:3},8,["onUpdateOptions"])]),_:3},8,["wrap-class","view-class","class"]),[[vr,r.options.size>0&&!r.loading]]),r.emptyText&&(!r.allowCreate||r.loading||r.allowCreate&&r.options.size===0)?(D(),ee(ct,{key:0},[r.$slots.empty?ze(r.$slots,"empty",{key:0}):(D(),ee("p",{key:1,class:j(r.nsSelect.be("dropdown","empty"))},$e(r.emptyText),3))],64)):Re("v-if",!0)]),_:3})]),_:3},8,["visible","placement","teleported","popper-class","popper-options","effect","transition","persistent","onShow"])],34)),[[f,r.handleClose,r.popperPaneRef]])}var a2e=Qe(r2e,[["render",o2e],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const l2e=xe({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:Boolean},setup(r){const e=Ge("select"),t=W(!0),i=Dt(),n=W([]);Yt(h5,br({...fn(r)}));const s=ut(n0);Et(()=>{n.value=o(i.subTree)});const o=l=>{const c=[];return Array.isArray(l.children)&&l.children.forEach(u=>{var d;u.type&&u.type.name==="ElOption"&&u.component&&u.component.proxy?c.push(u.component.proxy):(d=u.children)!=null&&d.length&&c.push(...o(u))}),c},{groupQueryChange:a}=Tr(s);return Ve(a,()=>{t.value=n.value.some(l=>l.visible===!0)},{flush:"post"}),{visible:t,ns:e}}});function c2e(r,e,t,i,n,s){return It((D(),ee("ul",{class:j(r.ns.be("group","wrap"))},[J("li",{class:j(r.ns.be("group","title"))},$e(r.label),3),J("li",null,[J("ul",{class:j(r.ns.b("group"))},[ze(r.$slots,"default")],2)])],2)),[[vr,r.visible]])}var f5=Qe(l2e,[["render",c2e],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const eh=zt(a2e,{Option:xC,OptionGroup:f5}),rw=fi(xC),u2e=fi(f5),wC=()=>ut(d5,{}),d2e=et({pageSize:{type:Number,required:!0},pageSizes:{type:Oe(Array),default:()=>ri([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,size:{type:String,values:yl}}),h2e=xe({name:"ElPaginationSizes"}),p2e=xe({...h2e,props:d2e,emits:["page-size-change"],setup(r,{emit:e}){const t=r,{t:i}=pr(),n=Ge("pagination"),s=wC(),o=W(t.pageSize);Ve(()=>t.pageSizes,(c,u)=>{if(!$s(c,u)&&Array.isArray(c)){const d=c.includes(t.pageSize)?t.pageSize:t.pageSizes[0];e("page-size-change",d)}}),Ve(()=>t.pageSize,c=>{o.value=c});const a=I(()=>t.pageSizes);function l(c){var u;c!==o.value&&(o.value=c,(u=s.handleSizeChange)==null||u.call(s,Number(c)))}return(c,u)=>(D(),ee("span",{class:j(y(n).e("sizes"))},[ue(y(eh),{"model-value":o.value,disabled:c.disabled,"popper-class":c.popperClass,size:c.size,"validate-event":!1,onChange:l},{default:me(()=>[(D(!0),ee(ct,null,Ut(y(a),d=>(D(),Ae(y(rw),{key:d,value:d,label:d+y(i)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size"])],2))}});var f2e=Qe(p2e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/sizes.vue"]]);const m2e=et({size:{type:String,values:yl}}),g2e=["disabled"],v2e=xe({name:"ElPaginationJumper"}),y2e=xe({...v2e,props:m2e,setup(r){const{t:e}=pr(),t=Ge("pagination"),{pageCount:i,disabled:n,currentPage:s,changeEvent:o}=wC(),a=W(),l=I(()=>{var d;return(d=a.value)!=null?d:s==null?void 0:s.value});function c(d){a.value=d?+d:""}function u(d){d=Math.trunc(+d),o==null||o(d),a.value=void 0}return(d,h)=>(D(),ee("span",{class:j(y(t).e("jump")),disabled:y(n)},[J("span",{class:j([y(t).e("goto")])},$e(y(e)("el.pagination.goto")),3),ue(y(us),{size:d.size,class:j([y(t).e("editor"),y(t).is("in-pagination")]),min:1,max:y(i),disabled:y(n),"model-value":y(l),"validate-event":!1,label:y(e)("el.pagination.page"),type:"number","onUpdate:modelValue":c,onChange:u},null,8,["size","class","max","disabled","model-value","label"]),J("span",{class:j([y(t).e("classifier")])},$e(y(e)("el.pagination.pageClassifier")),3)],10,g2e))}});var b2e=Qe(y2e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/jumper.vue"]]);const x2e=et({total:{type:Number,default:1e3}}),w2e=["disabled"],_2e=xe({name:"ElPaginationTotal"}),S2e=xe({..._2e,props:x2e,setup(r){const{t:e}=pr(),t=Ge("pagination"),{disabled:i}=wC();return(n,s)=>(D(),ee("span",{class:j(y(t).e("total")),disabled:y(i)},$e(y(e)("el.pagination.total",{total:n.total})),11,w2e))}});var T2e=Qe(S2e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/total.vue"]]);const M2e=et({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),E2e=["onKeyup"],C2e=["aria-current","aria-label","tabindex"],A2e=["tabindex","aria-label"],N2e=["aria-current","aria-label","tabindex"],R2e=["tabindex","aria-label"],k2e=["aria-current","aria-label","tabindex"],L2e=xe({name:"ElPaginationPager"}),O2e=xe({...L2e,props:M2e,emits:["change"],setup(r,{emit:e}){const t=r,i=Ge("pager"),n=Ge("icon"),{t:s}=pr(),o=W(!1),a=W(!1),l=W(!1),c=W(!1),u=W(!1),d=W(!1),h=I(()=>{const w=t.pagerCount,_=(w-1)/2,S=Number(t.currentPage),T=Number(t.pageCount);let M=!1,E=!1;T>w&&(S>w-_&&(M=!0),S<T-_&&(E=!0));const C=[];if(M&&!E){const P=T-(w-2);for(let A=P;A<T;A++)C.push(A)}else if(!M&&E)for(let P=2;P<w;P++)C.push(P);else if(M&&E){const P=Math.floor(w/2)-1;for(let A=S-P;A<=S+P;A++)C.push(A)}else for(let P=2;P<T;P++)C.push(P);return C}),p=I(()=>["more","btn-quickprev",n.b(),i.is("disabled",t.disabled)]),f=I(()=>["more","btn-quicknext",n.b(),i.is("disabled",t.disabled)]),m=I(()=>t.disabled?-1:0);wo(()=>{const w=(t.pagerCount-1)/2;o.value=!1,a.value=!1,t.pageCount>t.pagerCount&&(t.currentPage>t.pagerCount-w&&(o.value=!0),t.currentPage<t.pageCount-w&&(a.value=!0))});function g(w=!1){t.disabled||(w?l.value=!0:c.value=!0)}function v(w=!1){w?u.value=!0:d.value=!0}function x(w){const _=w.target;if(_.tagName.toLowerCase()==="li"&&Array.from(_.classList).includes("number")){const S=Number(_.textContent);S!==t.currentPage&&e("change",S)}else _.tagName.toLowerCase()==="li"&&Array.from(_.classList).includes("more")&&b(w)}function b(w){const _=w.target;if(_.tagName.toLowerCase()==="ul"||t.disabled)return;let S=Number(_.textContent);const T=t.pageCount,M=t.currentPage,E=t.pagerCount-2;_.className.includes("more")&&(_.className.includes("quickprev")?S=M-E:_.className.includes("quicknext")&&(S=M+E)),Number.isNaN(+S)||(S<1&&(S=1),S>T&&(S=T)),S!==M&&e("change",S)}return(w,_)=>(D(),ee("ul",{class:j(y(i).b()),onClick:b,onKeyup:dr(x,["enter"])},[w.pageCount>0?(D(),ee("li",{key:0,class:j([[y(i).is("active",w.currentPage===1),y(i).is("disabled",w.disabled)],"number"]),"aria-current":w.currentPage===1,"aria-label":y(s)("el.pagination.currentPage",{pager:1}),tabindex:y(m)}," 1 ",10,C2e)):Re("v-if",!0),o.value?(D(),ee("li",{key:1,class:j(y(p)),tabindex:y(m),"aria-label":y(s)("el.pagination.prevPages",{pager:w.pagerCount-2}),onMouseenter:_[0]||(_[0]=S=>g(!0)),onMouseleave:_[1]||(_[1]=S=>l.value=!1),onFocus:_[2]||(_[2]=S=>v(!0)),onBlur:_[3]||(_[3]=S=>u.value=!1)},[(l.value||u.value)&&!w.disabled?(D(),Ae(y(df),{key:0})):(D(),Ae(y(fU),{key:1}))],42,A2e)):Re("v-if",!0),(D(!0),ee(ct,null,Ut(y(h),S=>(D(),ee("li",{key:S,class:j([[y(i).is("active",w.currentPage===S),y(i).is("disabled",w.disabled)],"number"]),"aria-current":w.currentPage===S,"aria-label":y(s)("el.pagination.currentPage",{pager:S}),tabindex:y(m)},$e(S),11,N2e))),128)),a.value?(D(),ee("li",{key:2,class:j(y(f)),tabindex:y(m),"aria-label":y(s)("el.pagination.nextPages",{pager:w.pagerCount-2}),onMouseenter:_[4]||(_[4]=S=>g()),onMouseleave:_[5]||(_[5]=S=>c.value=!1),onFocus:_[6]||(_[6]=S=>v()),onBlur:_[7]||(_[7]=S=>d.value=!1)},[(c.value||d.value)&&!w.disabled?(D(),Ae(y(hf),{key:0})):(D(),Ae(y(fU),{key:1}))],42,R2e)):Re("v-if",!0),w.pageCount>1?(D(),ee("li",{key:3,class:j([[y(i).is("active",w.currentPage===w.pageCount),y(i).is("disabled",w.disabled)],"number"]),"aria-current":w.currentPage===w.pageCount,"aria-label":y(s)("el.pagination.currentPage",{pager:w.pageCount}),tabindex:y(m)},$e(w.pageCount),11,k2e)):Re("v-if",!0)],42,E2e))}});var P2e=Qe(O2e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/pagination/src/components/pager.vue"]]);const ks=r=>typeof r!="number",I2e=et({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:r=>Ct(r)&&Math.trunc(r)===r&&r>4&&r<22&&r%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Oe(Array),default:()=>ri([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:Gr,default:()=>cu},nextText:{type:String,default:""},nextIcon:{type:Gr,default:()=>Cs},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean});var D2e=xe({name:"ElPagination",props:I2e,emits:{"update:current-page":r=>Ct(r),"update:page-size":r=>Ct(r),"size-change":r=>Ct(r),"current-change":r=>Ct(r),"prev-click":r=>Ct(r),"next-click":r=>Ct(r)},setup(r,{emit:e,slots:t}){const{t:i}=pr(),n=Ge("pagination"),s=Dt().vnode.props||{},o="onUpdate:currentPage"in s||"onUpdate:current-page"in s||"onCurrentChange"in s,a="onUpdate:pageSize"in s||"onUpdate:page-size"in s||"onSizeChange"in s,l=I(()=>{if(ks(r.total)&&ks(r.pageCount)||!ks(r.currentPage)&&!o)return!1;if(r.layout.includes("sizes")){if(ks(r.pageCount)){if(!ks(r.total)&&!ks(r.pageSize)&&!a)return!1}else if(!a)return!1}return!0}),c=W(ks(r.defaultPageSize)?10:r.defaultPageSize),u=W(ks(r.defaultCurrentPage)?1:r.defaultCurrentPage),d=I({get(){return ks(r.pageSize)?c.value:r.pageSize},set(b){ks(r.pageSize)&&(c.value=b),a&&(e("update:page-size",b),e("size-change",b))}}),h=I(()=>{let b=0;return ks(r.pageCount)?ks(r.total)||(b=Math.max(1,Math.ceil(r.total/d.value))):b=r.pageCount,b}),p=I({get(){return ks(r.currentPage)?u.value:r.currentPage},set(b){let w=b;b<1?w=1:b>h.value&&(w=h.value),ks(r.currentPage)&&(u.value=w),o&&(e("update:current-page",w),e("current-change",w))}});Ve(h,b=>{p.value>b&&(p.value=b)});function f(b){p.value=b}function m(b){d.value=b;const w=h.value;p.value>w&&(p.value=w)}function g(){r.disabled||(p.value-=1,e("prev-click",p.value))}function v(){r.disabled||(p.value+=1,e("next-click",p.value))}function x(b,w){b&&(b.props||(b.props={}),b.props.class=[b.props.class,w].join(" "))}return Yt(d5,{pageCount:h,disabled:I(()=>r.disabled),currentPage:p,changeEvent:f,handleSizeChange:m}),()=>{var b,w;if(!l.value)return i("el.pagination.deprecationWarning"),null;if(!r.layout||r.hideOnSinglePage&&h.value<=1)return null;const _=[],S=[],T=yt("div",{class:n.e("rightwrapper")},S),M={prev:yt(zSe,{disabled:r.disabled,currentPage:p.value,prevText:r.prevText,prevIcon:r.prevIcon,onClick:g}),jumper:yt(b2e,{size:r.small?"small":"default"}),pager:yt(P2e,{currentPage:p.value,pageCount:h.value,pagerCount:r.pagerCount,onChange:f,disabled:r.disabled}),next:yt($Se,{disabled:r.disabled,currentPage:p.value,pageCount:h.value,nextText:r.nextText,nextIcon:r.nextIcon,onClick:v}),sizes:yt(f2e,{pageSize:d.value,pageSizes:r.pageSizes,popperClass:r.popperClass,disabled:r.disabled,size:r.small?"small":"default"}),slot:(w=(b=t==null?void 0:t.default)==null?void 0:b.call(t))!=null?w:null,total:yt(T2e,{total:ks(r.total)?0:r.total})},E=r.layout.split(",").map(P=>P.trim());let C=!1;return E.forEach(P=>{if(P==="->"){C=!0;return}C?S.push(M[P]):_.push(M[P])}),x(_[0],n.is("first")),x(_[_.length-1],n.is("last")),C&&S.length>0&&(x(S[0],n.is("first")),x(S[S.length-1],n.is("last")),_.push(T)),yt("div",{class:[n.b(),n.is("background",r.background),{[n.m("small")]:r.small}]},_)}}});const U2e=zt(D2e),F2e=et({title:String,confirmButtonText:String,cancelButtonText:String,confirmButtonType:{type:String,values:OE,default:"primary"},cancelButtonType:{type:String,values:OE,default:"text"},icon:{type:Gr,default:()=>uce},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1},hideAfter:{type:Number,default:200},teleported:Nn.teleported,persistent:Nn.persistent,width:{type:[String,Number],default:150}}),B2e={confirm:r=>r instanceof MouseEvent,cancel:r=>r instanceof MouseEvent},z2e=xe({name:"ElPopconfirm"}),V2e=xe({...z2e,props:F2e,emits:B2e,setup(r,{emit:e}){const t=r,{t:i}=pr(),n=Ge("popconfirm"),s=W(),o=()=>{var h,p;(p=(h=s.value)==null?void 0:h.onClose)==null||p.call(h)},a=I(()=>({width:Ti(t.width)})),l=h=>{e("confirm",h),o()},c=h=>{e("cancel",h),o()},u=I(()=>t.confirmButtonText||i("el.popconfirm.confirmButtonText")),d=I(()=>t.cancelButtonText||i("el.popconfirm.cancelButtonText"));return(h,p)=>(D(),Ae(y(Rs),qt({ref_key:"tooltipRef",ref:s,trigger:"click",effect:"light"},h.$attrs,{"popper-class":`${y(n).namespace.value}-popover`,"popper-style":y(a),teleported:h.teleported,"fallback-placements":["bottom","top","right","left"],"hide-after":h.hideAfter,persistent:h.persistent}),{content:me(()=>[J("div",{class:j(y(n).b())},[J("div",{class:j(y(n).e("main"))},[!h.hideIcon&&h.icon?(D(),Ae(y(dt),{key:0,class:j(y(n).e("icon")),style:pt({color:h.iconColor})},{default:me(()=>[(D(),Ae(Xt(h.icon)))]),_:1},8,["class","style"])):Re("v-if",!0),ir(" "+$e(h.title),1)],2),J("div",{class:j(y(n).e("action"))},[ue(y(Wn),{size:"small",type:h.cancelButtonType==="text"?"":h.cancelButtonType,text:h.cancelButtonType==="text",onClick:c},{default:me(()=>[ir($e(y(d)),1)]),_:1},8,["type","text"]),ue(y(Wn),{size:"small",type:h.confirmButtonType==="text"?"":h.confirmButtonType,text:h.confirmButtonType==="text",onClick:l},{default:me(()=>[ir($e(y(u)),1)]),_:1},8,["type","text"])],2)],2)]),default:me(()=>[h.$slots.reference?ze(h.$slots,"reference",{key:0}):Re("v-if",!0)]),_:3},16,["popper-class","popper-style","teleported","hide-after","persistent"]))}});var G2e=Qe(V2e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popconfirm/src/popconfirm.vue"]]);const j2e=zt(G2e),H2e=et({trigger:Jv.trigger,placement:Qx.placement,disabled:Jv.disabled,visible:Nn.visible,transition:Nn.transition,popperOptions:Qx.popperOptions,tabindex:Qx.tabindex,content:Nn.content,popperStyle:Nn.popperStyle,popperClass:Nn.popperClass,enterable:{...Nn.enterable,default:!0},effect:{...Nn.effect,default:"light"},teleported:Nn.teleported,title:String,width:{type:[String,Number],default:150},offset:{type:Number,default:void 0},showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200},autoClose:{type:Number,default:0},showArrow:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},"onUpdate:visible":{type:Function}}),W2e={"update:visible":r=>Gi(r),"before-enter":()=>!0,"before-leave":()=>!0,"after-enter":()=>!0,"after-leave":()=>!0},$2e="onUpdate:visible",X2e=xe({name:"ElPopover"}),q2e=xe({...X2e,props:H2e,emits:W2e,setup(r,{expose:e,emit:t}){const i=r,n=I(()=>i[$2e]),s=Ge("popover"),o=W(),a=I(()=>{var g;return(g=y(o))==null?void 0:g.popperRef}),l=I(()=>[{width:Ti(i.width)},i.popperStyle]),c=I(()=>[s.b(),i.popperClass,{[s.m("plain")]:!!i.content}]),u=I(()=>i.transition===`${s.namespace.value}-fade-in-linear`),d=()=>{var g;(g=o.value)==null||g.hide()},h=()=>{t("before-enter")},p=()=>{t("before-leave")},f=()=>{t("after-enter")},m=()=>{t("update:visible",!1),t("after-leave")};return e({popperRef:a,hide:d}),(g,v)=>(D(),Ae(y(Rs),qt({ref_key:"tooltipRef",ref:o},g.$attrs,{trigger:g.trigger,placement:g.placement,disabled:g.disabled,visible:g.visible,transition:g.transition,"popper-options":g.popperOptions,tabindex:g.tabindex,content:g.content,offset:g.offset,"show-after":g.showAfter,"hide-after":g.hideAfter,"auto-close":g.autoClose,"show-arrow":g.showArrow,"aria-label":g.title,effect:g.effect,enterable:g.enterable,"popper-class":y(c),"popper-style":y(l),teleported:g.teleported,persistent:g.persistent,"gpu-acceleration":y(u),"onUpdate:visible":y(n),onBeforeShow:h,onBeforeHide:p,onShow:f,onHide:m}),{content:me(()=>[g.title?(D(),ee("div",{key:0,class:j(y(s).e("title")),role:"title"},$e(g.title),3)):Re("v-if",!0),ze(g.$slots,"default",{},()=>[ir($e(g.content),1)])]),default:me(()=>[g.$slots.reference?ze(g.$slots,"reference",{key:0}):Re("v-if",!0)]),_:3},16,["trigger","placement","disabled","visible","transition","popper-options","tabindex","content","offset","show-after","hide-after","auto-close","show-arrow","aria-label","effect","enterable","popper-class","popper-style","teleported","persistent","gpu-acceleration","onUpdate:visible"]))}});var K2e=Qe(q2e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/popover/src/popover.vue"]]);const m5=(r,e)=>{const t=e.arg||e.value,i=t==null?void 0:t.popperRef;i&&(i.triggerRef=r)};var Y2e={mounted(r,e){m5(r,e)},updated(r,e){m5(r,e)}};const Z2e="popover",g5=ide(Y2e,Z2e),J2e=zt(K2e,{directive:g5}),Q2e=et({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:r=>r>=0&&r<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:Oe(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:Oe([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:Oe(Function),default:r=>`${r}%`}}),eTe=["aria-valuenow"],tTe={viewBox:"0 0 100 100"},rTe=["d","stroke","stroke-linecap","stroke-width"],iTe=["d","stroke","opacity","stroke-linecap","stroke-width"],nTe={key:0},sTe=xe({name:"ElProgress"}),oTe=xe({...sTe,props:Q2e,setup(r){const e=r,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},i=Ge("progress"),n=I(()=>({width:`${e.percentage}%`,animationDuration:`${e.duration}s`,backgroundColor:x(e.percentage)})),s=I(()=>(e.strokeWidth/e.width*100).toFixed(1)),o=I(()=>["circle","dashboard"].includes(e.type)?Number.parseInt(`${50-Number.parseFloat(s.value)/2}`,10):0),a=I(()=>{const b=o.value,w=e.type==="dashboard";return`
          M 50 50
          m 0 ${w?"":"-"}${b}
          a ${b} ${b} 0 1 1 0 ${w?"-":""}${b*2}
          a ${b} ${b} 0 1 1 0 ${w?"":"-"}${b*2}
          `}),l=I(()=>2*Math.PI*o.value),c=I(()=>e.type==="dashboard"?.75:1),u=I(()=>`${-1*l.value*(1-c.value)/2}px`),d=I(()=>({strokeDasharray:`${l.value*c.value}px, ${l.value}px`,strokeDashoffset:u.value})),h=I(()=>({strokeDasharray:`${l.value*c.value*(e.percentage/100)}px, ${l.value}px`,strokeDashoffset:u.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),p=I(()=>{let b;return e.color?b=x(e.percentage):b=t[e.status]||t.default,b}),f=I(()=>e.status==="warning"?dx:e.type==="line"?e.status==="success"?qM:uu:e.status==="success"?Dv:Pa),m=I(()=>e.type==="line"?12+e.strokeWidth*.4:e.width*.111111+2),g=I(()=>e.format(e.percentage));function v(b){const w=100/b.length;return b.map((_,S)=>kt(_)?{color:_,percentage:(S+1)*w}:_).sort((_,S)=>_.percentage-S.percentage)}const x=b=>{var w;const{color:_}=e;if(Nt(_))return _(b);if(kt(_))return _;{const S=v(_);for(const T of S)if(T.percentage>b)return T.color;return(w=S[S.length-1])==null?void 0:w.color}};return(b,w)=>(D(),ee("div",{class:j([y(i).b(),y(i).m(b.type),y(i).is(b.status),{[y(i).m("without-text")]:!b.showText,[y(i).m("text-inside")]:b.textInside}]),role:"progressbar","aria-valuenow":b.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[b.type==="line"?(D(),ee("div",{key:0,class:j(y(i).b("bar"))},[J("div",{class:j(y(i).be("bar","outer")),style:pt({height:`${b.strokeWidth}px`})},[J("div",{class:j([y(i).be("bar","inner"),{[y(i).bem("bar","inner","indeterminate")]:b.indeterminate},{[y(i).bem("bar","inner","striped")]:b.striped},{[y(i).bem("bar","inner","striped-flow")]:b.stripedFlow}]),style:pt(y(n))},[(b.showText||b.$slots.default)&&b.textInside?(D(),ee("div",{key:0,class:j(y(i).be("bar","innerText"))},[ze(b.$slots,"default",{percentage:b.percentage},()=>[J("span",null,$e(y(g)),1)])],2)):Re("v-if",!0)],6)],6)],2)):(D(),ee("div",{key:1,class:j(y(i).b("circle")),style:pt({height:`${b.width}px`,width:`${b.width}px`})},[(D(),ee("svg",tTe,[J("path",{class:j(y(i).be("circle","track")),d:y(a),stroke:`var(${y(i).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":b.strokeLinecap,"stroke-width":y(s),fill:"none",style:pt(y(d))},null,14,rTe),J("path",{class:j(y(i).be("circle","path")),d:y(a),stroke:y(p),fill:"none",opacity:b.percentage?1:0,"stroke-linecap":b.strokeLinecap,"stroke-width":y(s),style:pt(y(h))},null,14,iTe)]))],6)),(b.showText||b.$slots.default)&&!b.textInside?(D(),ee("div",{key:2,class:j(y(i).e("text")),style:pt({fontSize:`${y(m)}px`})},[ze(b.$slots,"default",{percentage:b.percentage},()=>[b.status?(D(),Ae(y(dt),{key:1},{default:me(()=>[(D(),Ae(Xt(y(f))))]),_:1})):(D(),ee("span",nTe,$e(y(g)),1))])],6)):Re("v-if",!0)],10,eTe))}});var aTe=Qe(oTe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/progress/src/progress.vue"]]);const v5=zt(aTe),lTe=et({modelValue:{type:Number,default:0},id:{type:String,default:void 0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:Oe([Array,Object]),default:()=>ri(["","",""])},voidColor:{type:String,default:""},disabledVoidColor:{type:String,default:""},icons:{type:Oe([Array,Object]),default:()=>[ux,ux,ux]},voidIcon:{type:Gr,default:()=>Sue},disabledVoidIcon:{type:Gr,default:()=>ux},disabled:Boolean,allowHalf:Boolean,showText:Boolean,showScore:Boolean,textColor:{type:String,default:""},texts:{type:Oe(Array),default:()=>ri(["Extremely bad","Disappointed","Fair","Satisfied","Surprise"])},scoreTemplate:{type:String,default:"{value}"},size:jn,label:{type:String,default:void 0},clearable:{type:Boolean,default:!1}}),cTe={[Kr]:r=>Ct(r),[Wt]:r=>Ct(r)},uTe=["id","aria-label","aria-labelledby","aria-valuenow","aria-valuetext","aria-valuemax"],dTe=["onMousemove","onClick"],hTe=xe({name:"ElRate"}),pTe=xe({...hTe,props:lTe,emits:cTe,setup(r,{expose:e,emit:t}){const i=r;function n(B,k){const z=U=>Ht(U),O=Object.keys(k).map(U=>+U).filter(U=>{const G=k[U];return z(G)&&G.excluded?B<U:B<=U}).sort((U,G)=>U-G),V=k[O[0]];return z(V)&&V.value||V}const s=ut(qd,void 0),o=ut(Sl,void 0),a=Hi(),l=Ge("rate"),{inputId:c,isLabeledByFormItem:u}=vu(i,{formItemContext:o}),d=W(i.modelValue),h=W(-1),p=W(!0),f=I(()=>[l.b(),l.m(a.value)]),m=I(()=>i.disabled||(s==null?void 0:s.disabled)),g=I(()=>l.cssVarBlock({"void-color":i.voidColor,"disabled-void-color":i.disabledVoidColor,"fill-color":w.value})),v=I(()=>{let B="";return i.showScore?B=i.scoreTemplate.replace(/\{\s*value\s*\}/,m.value?`${i.modelValue}`:`${d.value}`):i.showText&&(B=i.texts[Math.ceil(d.value)-1]),B}),x=I(()=>i.modelValue*100-Math.floor(i.modelValue)*100),b=I(()=>lt(i.colors)?{[i.lowThreshold]:i.colors[0],[i.highThreshold]:{value:i.colors[1],excluded:!0},[i.max]:i.colors[2]}:i.colors),w=I(()=>{const B=n(d.value,b.value);return Ht(B)?"":B}),_=I(()=>{let B="";return m.value?B=`${x.value}%`:i.allowHalf&&(B="50%"),{color:w.value,width:B}}),S=I(()=>{let B=lt(i.icons)?[...i.icons]:{...i.icons};return B=Cd(B),lt(B)?{[i.lowThreshold]:B[0],[i.highThreshold]:{value:B[1],excluded:!0},[i.max]:B[2]}:B}),T=I(()=>n(i.modelValue,S.value)),M=I(()=>m.value?kt(i.disabledVoidIcon)?i.disabledVoidIcon:Cd(i.disabledVoidIcon):kt(i.voidIcon)?i.voidIcon:Cd(i.voidIcon)),E=I(()=>n(d.value,S.value));function C(B){const k=m.value&&x.value>0&&B-1<i.modelValue&&B>i.modelValue,z=i.allowHalf&&p.value&&B-.5<=d.value&&B>d.value;return k||z}function P(B){i.clearable&&B===i.modelValue&&(B=0),t(Wt,B),i.modelValue!==B&&t("change",B)}function A(B){m.value||(i.allowHalf&&p.value?P(d.value):P(B))}function N(B){if(m.value)return;let k=d.value;const z=B.code;return z===bt.up||z===bt.right?(i.allowHalf?k+=.5:k+=1,B.stopPropagation(),B.preventDefault()):(z===bt.left||z===bt.down)&&(i.allowHalf?k-=.5:k-=1,B.stopPropagation(),B.preventDefault()),k=k<0?0:k,k=k>i.max?i.max:k,t(Wt,k),t("change",k),k}function R(B,k){if(!m.value){if(i.allowHalf&&k){let z=k.target;Oa(z,l.e("item"))&&(z=z.querySelector(`.${l.e("icon")}`)),(z.clientWidth===0||Oa(z,l.e("decimal")))&&(z=z.parentNode),p.value=k.offsetX*2<=z.clientWidth,d.value=p.value?B-.5:B}else d.value=B;h.value=B}}function F(){m.value||(i.allowHalf&&(p.value=i.modelValue!==Math.floor(i.modelValue)),d.value=i.modelValue,h.value=-1)}return Ve(()=>i.modelValue,B=>{d.value=B,p.value=i.modelValue!==Math.floor(i.modelValue)}),i.modelValue||t(Wt,0),e({setCurrentValue:R,resetCurrentValue:F}),(B,k)=>{var z;return D(),ee("div",{id:y(c),class:j([y(f),y(l).is("disabled",y(m))]),role:"slider","aria-label":y(u)?void 0:B.label||"rating","aria-labelledby":y(u)?(z=y(o))==null?void 0:z.labelId:void 0,"aria-valuenow":d.value,"aria-valuetext":y(v)||void 0,"aria-valuemin":"0","aria-valuemax":B.max,tabindex:"0",style:pt(y(g)),onKeydown:N},[(D(!0),ee(ct,null,Ut(B.max,(O,V)=>(D(),ee("span",{key:V,class:j(y(l).e("item")),onMousemove:U=>R(O,U),onMouseleave:F,onClick:U=>A(O)},[ue(y(dt),{class:j([y(l).e("icon"),{hover:h.value===O},y(l).is("active",O<=d.value)])},{default:me(()=>[C(O)?Re("v-if",!0):(D(),ee(ct,{key:0},[It((D(),Ae(Xt(y(E)),null,null,512)),[[vr,O<=d.value]]),It((D(),Ae(Xt(y(M)),null,null,512)),[[vr,!(O<=d.value)]])],64)),C(O)?(D(),Ae(y(dt),{key:1,style:pt(y(_)),class:j([y(l).e("icon"),y(l).e("decimal")])},{default:me(()=>[(D(),Ae(Xt(y(T))))]),_:1},8,["style","class"])):Re("v-if",!0)]),_:2},1032,["class"])],42,dTe))),128)),B.showText||B.showScore?(D(),ee("span",{key:0,class:j(y(l).e("text"))},$e(y(v)),3)):Re("v-if",!0)],46,uTe)}}});var fTe=Qe(pTe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/rate/src/rate.vue"]]);const mTe=zt(fTe),kf={success:"icon-success",warning:"icon-warning",error:"icon-error",info:"icon-info"},y5={[kf.success]:Yoe,[kf.warning]:dx,[kf.error]:KM,[kf.info]:YM},gTe=et({title:{type:String,default:""},subTitle:{type:String,default:""},icon:{type:String,values:["success","warning","info","error"],default:"info"}}),vTe=xe({name:"ElResult"}),yTe=xe({...vTe,props:gTe,setup(r){const e=r,t=Ge("result"),i=I(()=>{const n=e.icon,s=n&&kf[n]?kf[n]:"icon-info",o=y5[s]||y5["icon-info"];return{class:s,component:o}});return(n,s)=>(D(),ee("div",{class:j(y(t).b())},[J("div",{class:j(y(t).e("icon"))},[ze(n.$slots,"icon",{},()=>[y(i).component?(D(),Ae(Xt(y(i).component),{key:0,class:j(y(i).class)},null,8,["class"])):Re("v-if",!0)])],2),n.title||n.$slots.title?(D(),ee("div",{key:0,class:j(y(t).e("title"))},[ze(n.$slots,"title",{},()=>[J("p",null,$e(n.title),1)])],2)):Re("v-if",!0),n.subTitle||n.$slots["sub-title"]?(D(),ee("div",{key:1,class:j(y(t).e("subtitle"))},[ze(n.$slots,"sub-title",{},()=>[J("p",null,$e(n.subTitle),1)])],2)):Re("v-if",!0),n.$slots.extra?(D(),ee("div",{key:2,class:j(y(t).e("extra"))},[ze(n.$slots,"extra")],2)):Re("v-if",!0)],2))}});var bTe=Qe(yTe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/result/src/result.vue"]]);const xTe=zt(bTe);var b5=Number.isNaN||function(r){return typeof r=="number"&&r!==r};function wTe(r,e){return!!(r===e||b5(r)&&b5(e))}function _Te(r,e){if(r.length!==e.length)return!1;for(var t=0;t<r.length;t++)if(!wTe(r[t],e[t]))return!1;return!0}function STe(r,e){e===void 0&&(e=_Te);var t=null;function i(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(t&&t.lastThis===this&&e(n,t.lastArgs))return t.lastResult;var o=r.apply(this,n);return t={lastResult:o,lastArgs:n,lastThis:this},o}return i.clear=function(){t=null},i}const x5=()=>{const r=Dt().proxy.$props;return I(()=>{const e=(t,i,n)=>({});return r.perfMode?ex(e):STe(e)})},_C=50,iw="itemRendered",nw="scroll",Lf="forward",sw="backward",aa="auto",ow="smart",s0="start",Ml="center",o0="end",Of="horizontal",SC="vertical",TTe="ltr",Pf="rtl",a0="negative",TC="positive-ascending",MC="positive-descending",MTe={[Of]:"left",[SC]:"top"},ETe=20,CTe={[Of]:"deltaX",[SC]:"deltaY"},ATe=({atEndEdge:r,atStartEdge:e,layout:t},i)=>{let n,s=0;const o=a=>a<0&&e.value||a>0&&r.value;return{hasReachedEdge:o,onWheel:a=>{mx(n);const l=a[CTe[t.value]];o(s)&&o(s+l)||(s+=l,$D()||a.preventDefault(),n=ff(()=>{i(s),s=0}))}}},EC=Ia({type:Oe([Number,Function]),required:!0}),CC=Ia({type:Number}),AC=Ia({type:Number,default:2}),NTe=Ia({type:String,values:["ltr","rtl"],default:"ltr"}),NC=Ia({type:Number,default:0}),aw=Ia({type:Number,required:!0}),w5=Ia({type:String,values:["horizontal","vertical"],default:SC}),_5=et({className:{type:String,default:""},containerElement:{type:Oe([String,Object]),default:"div"},data:{type:Oe(Array),default:()=>ri([])},direction:NTe,height:{type:[String,Number],required:!0},innerElement:{type:[String,Object],default:"div"},style:{type:Oe([Object,String,Array])},useIsScrolling:{type:Boolean,default:!1},width:{type:[Number,String],required:!1},perfMode:{type:Boolean,default:!0},scrollbarAlwaysOn:{type:Boolean,default:!1}}),S5=et({cache:AC,estimatedItemSize:CC,layout:w5,initScrollOffset:NC,total:aw,itemSize:EC,..._5}),RC={type:Number,default:6},T5={type:Number,default:0},M5={type:Number,default:2},th=et({columnCache:AC,columnWidth:EC,estimatedColumnWidth:CC,estimatedRowHeight:CC,initScrollLeft:NC,initScrollTop:NC,itemKey:{type:Oe(Function),default:({columnIndex:r,rowIndex:e})=>`${e}:${r}`},rowCache:AC,rowHeight:EC,totalColumn:aw,totalRow:aw,hScrollbarSize:RC,vScrollbarSize:RC,scrollbarStartGap:T5,scrollbarEndGap:M5,role:String,..._5}),E5=et({alwaysOn:Boolean,class:String,layout:w5,total:aw,ratio:{type:Number,required:!0},clientSize:{type:Number,required:!0},scrollFrom:{type:Number,required:!0},scrollbarSize:RC,startGap:T5,endGap:M5,visible:Boolean}),rh=(r,e)=>r<e?Lf:sw,l0=r=>r===TTe||r===Pf||r===Of,C5=r=>r===Pf;let If=null;function lw(r=!1){if(If===null||r){const e=document.createElement("div"),t=e.style;t.width="50px",t.height="50px",t.overflow="scroll",t.direction="rtl";const i=document.createElement("div"),n=i.style;return n.width="100px",n.height="100px",e.appendChild(i),document.body.appendChild(e),e.scrollLeft>0?If=MC:(e.scrollLeft=1,e.scrollLeft===0?If=a0:If=TC),document.body.removeChild(e),If}return If}function RTe({move:r,size:e,bar:t},i){const n={},s=`translate${t.axis}(${r}px)`;return n[t.size]=e,n.transform=s,n.msTransform=s,n.webkitTransform=s,i==="horizontal"?n.height="100%":n.width="100%",n}const kC=xe({name:"ElVirtualScrollBar",props:E5,emits:["scroll","start-move","stop-move"],setup(r,{emit:e}){const t=I(()=>r.startGap+r.endGap),i=Ge("virtual-scrollbar"),n=Ge("scrollbar"),s=W(),o=W();let a=null,l=null;const c=br({isDragging:!1,traveled:0}),u=I(()=>FF[r.layout]),d=I(()=>r.clientSize-y(t)),h=I(()=>({position:"absolute",width:`${Of===r.layout?d.value:r.scrollbarSize}px`,height:`${Of===r.layout?r.scrollbarSize:d.value}px`,[MTe[r.layout]]:"2px",right:"2px",bottom:"2px",borderRadius:"4px"})),p=I(()=>{const S=r.ratio,T=r.clientSize;if(S>=100)return Number.POSITIVE_INFINITY;if(S>=50)return S*T/100;const M=T/3;return Math.floor(Math.min(Math.max(S*T,ETe),M))}),f=I(()=>{if(!Number.isFinite(p.value))return{display:"none"};const S=`${p.value}px`;return RTe({bar:u.value,size:S,move:c.traveled},r.layout)}),m=I(()=>Math.floor(r.clientSize-p.value-y(t))),g=()=>{window.addEventListener("mousemove",w),window.addEventListener("mouseup",b);const S=y(o);S&&(l=document.onselectstart,document.onselectstart=()=>!1,S.addEventListener("touchmove",w),S.addEventListener("touchend",b))},v=()=>{window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",b),document.onselectstart=l,l=null;const S=y(o);S&&(S.removeEventListener("touchmove",w),S.removeEventListener("touchend",b))},x=S=>{S.stopImmediatePropagation(),!(S.ctrlKey||[1,2].includes(S.button))&&(c.isDragging=!0,c[u.value.axis]=S.currentTarget[u.value.offset]-(S[u.value.client]-S.currentTarget.getBoundingClientRect()[u.value.direction]),e("start-move"),g())},b=()=>{c.isDragging=!1,c[u.value.axis]=0,e("stop-move"),v()},w=S=>{const{isDragging:T}=c;if(!T||!o.value||!s.value)return;const M=c[u.value.axis];if(!M)return;mx(a);const E=(s.value.getBoundingClientRect()[u.value.direction]-S[u.value.client])*-1,C=o.value[u.value.offset]-M,P=E-C;a=ff(()=>{c.traveled=Math.max(r.startGap,Math.min(P,m.value)),e("scroll",P,m.value)})},_=S=>{const T=Math.abs(S.target.getBoundingClientRect()[u.value.direction]-S[u.value.client]),M=o.value[u.value.offset]/2,E=T-M;c.traveled=Math.max(0,Math.min(E,m.value)),e("scroll",E,m.value)};return Ve(()=>r.scrollFrom,S=>{c.isDragging||(c.traveled=Math.ceil(S*m.value))}),Zr(()=>{v()}),()=>yt("div",{role:"presentation",ref:s,class:[i.b(),r.class,(r.alwaysOn||c.isDragging)&&"always-on"],style:h.value,onMousedown:Mt(_,["stop","prevent"]),onTouchstartPrevent:x},yt("div",{ref:o,class:n.e("thumb"),style:f.value,onMousedown:x},[]))}}),A5=({name:r,getOffset:e,getItemSize:t,getItemOffset:i,getEstimatedTotalSize:n,getStartIndexForOffset:s,getStopIndexForStartIndex:o,initCache:a,clearCache:l,validateProps:c})=>xe({name:r??"ElVirtualList",props:S5,emits:[iw,nw],setup(u,{emit:d,expose:h}){c(u);const p=Dt(),f=Ge("vl"),m=W(a(u,p)),g=x5(),v=W(),x=W(),b=W(),w=W({isScrolling:!1,scrollDir:"forward",scrollOffset:Ct(u.initScrollOffset)?u.initScrollOffset:0,updateRequested:!1,isScrollbarDragging:!1,scrollbarAlwaysOn:u.scrollbarAlwaysOn}),_=I(()=>{const{total:X,cache:ie}=u,{isScrolling:se,scrollDir:de,scrollOffset:K}=y(w);if(X===0)return[0,0,0,0];const q=s(u,K,y(m)),ce=o(u,q,K,y(m)),Te=!se||de===sw?Math.max(1,ie):1,Z=!se||de===Lf?Math.max(1,ie):1;return[Math.max(0,q-Te),Math.max(0,Math.min(X-1,ce+Z)),q,ce]}),S=I(()=>n(u,y(m))),T=I(()=>l0(u.layout)),M=I(()=>[{position:"relative",[`overflow-${T.value?"x":"y"}`]:"scroll",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:u.direction,height:Ct(u.height)?`${u.height}px`:u.height,width:Ct(u.width)?`${u.width}px`:u.width},u.style]),E=I(()=>{const X=y(S),ie=y(T);return{height:ie?"100%":`${X}px`,pointerEvents:y(w).isScrolling?"none":void 0,width:ie?`${X}px`:"100%"}}),C=I(()=>T.value?u.width:u.height),{onWheel:P}=ATe({atStartEdge:I(()=>w.value.scrollOffset<=0),atEndEdge:I(()=>w.value.scrollOffset>=S.value),layout:I(()=>u.layout)},X=>{var ie,se;(se=(ie=b.value).onMouseUp)==null||se.call(ie),k(Math.min(w.value.scrollOffset+X,S.value-C.value))}),A=()=>{const{total:X}=u;if(X>0){const[K,q,ce,Te]=y(_);d(iw,K,q,ce,Te)}const{scrollDir:ie,scrollOffset:se,updateRequested:de}=y(w);d(nw,ie,se,de)},N=X=>{const{clientHeight:ie,scrollHeight:se,scrollTop:de}=X.currentTarget,K=y(w);if(K.scrollOffset===de)return;const q=Math.max(0,Math.min(de,se-ie));w.value={...K,isScrolling:!0,scrollDir:rh(K.scrollOffset,q),scrollOffset:q,updateRequested:!1},ht(V)},R=X=>{const{clientWidth:ie,scrollLeft:se,scrollWidth:de}=X.currentTarget,K=y(w);if(K.scrollOffset===se)return;const{direction:q}=u;let ce=se;if(q===Pf)switch(lw()){case a0:{ce=-se;break}case MC:{ce=de-ie-se;break}}ce=Math.max(0,Math.min(ce,de-ie)),w.value={...K,isScrolling:!0,scrollDir:rh(K.scrollOffset,ce),scrollOffset:ce,updateRequested:!1},ht(V)},F=X=>{y(T)?R(X):N(X),A()},B=(X,ie)=>{const se=(S.value-C.value)/ie*X;k(Math.min(S.value-C.value,se))},k=X=>{X=Math.max(X,0),X!==y(w).scrollOffset&&(w.value={...y(w),scrollOffset:X,scrollDir:rh(y(w).scrollOffset,X),updateRequested:!0},ht(V))},z=(X,ie=aa)=>{const{scrollOffset:se}=y(w);X=Math.max(0,Math.min(X,u.total-1)),k(e(u,X,ie,se,y(m)))},O=X=>{const{direction:ie,itemSize:se,layout:de}=u,K=g.value(l&&se,l&&de,l&&ie);let q;if(er(K,String(X)))q=K[X];else{const ce=i(u,X,y(m)),Te=t(u,X,y(m)),Z=y(T),L=ie===Pf,$=Z?ce:0;K[X]=q={position:"absolute",left:L?void 0:`${$}px`,right:L?`${$}px`:void 0,top:Z?0:`${ce}px`,height:Z?"100%":`${Te}px`,width:Z?`${Te}px`:"100%"}}return q},V=()=>{w.value.isScrolling=!1,ht(()=>{g.value(-1,null,null)})},U=()=>{const X=v.value;X&&(X.scrollTop=0)};Et(()=>{if(!ar)return;const{initScrollOffset:X}=u,ie=y(v);Ct(X)&&ie&&(y(T)?ie.scrollLeft=X:ie.scrollTop=X),A()}),Yl(()=>{const{direction:X,layout:ie}=u,{scrollOffset:se,updateRequested:de}=y(w),K=y(v);if(de&&K)if(ie===Of)if(X===Pf)switch(lw()){case a0:{K.scrollLeft=-se;break}case TC:{K.scrollLeft=se;break}default:{const{clientWidth:q,scrollWidth:ce}=K;K.scrollLeft=ce-q-se;break}}else K.scrollLeft=se;else K.scrollTop=se});const G={ns:f,clientSize:C,estimatedTotalSize:S,windowStyle:M,windowRef:v,innerRef:x,innerStyle:E,itemsToRender:_,scrollbarRef:b,states:w,getItemStyle:O,onScroll:F,onScrollbarScroll:B,onWheel:P,scrollTo:k,scrollToItem:z,resetScrollTop:U};return h({windowRef:v,innerRef:x,getItemStyleCache:g,scrollTo:k,scrollToItem:z,resetScrollTop:U,states:w}),G},render(u){var d;const{$slots:h,className:p,clientSize:f,containerElement:m,data:g,getItemStyle:v,innerElement:x,itemsToRender:b,innerStyle:w,layout:_,total:S,onScroll:T,onScrollbarScroll:M,onWheel:E,states:C,useIsScrolling:P,windowStyle:A,ns:N}=u,[R,F]=b,B=Xt(m),k=Xt(x),z=[];if(S>0)for(let G=R;G<=F;G++)z.push((d=h.default)==null?void 0:d.call(h,{data:g,key:G,index:G,isScrolling:P?C.isScrolling:void 0,style:v(G)}));const O=[yt(k,{style:w,ref:"innerRef"},kt(k)?z:{default:()=>z})],V=yt(kC,{ref:"scrollbarRef",clientSize:f,layout:_,onScroll:M,ratio:f*100/this.estimatedTotalSize,scrollFrom:C.scrollOffset/(this.estimatedTotalSize-f),total:S}),U=yt(B,{class:[N.e("window"),p],style:A,onScroll:T,onWheel:E,ref:"windowRef",key:0},kt(B)?[O]:{default:()=>[O]});return yt("div",{key:0,class:[N.e("wrapper"),C.scrollbarAlwaysOn?"always-on":""]},[U,V])}}),N5=A5({name:"ElFixedSizeList",getItemOffset:({itemSize:r},e)=>e*r,getItemSize:({itemSize:r})=>r,getEstimatedTotalSize:({total:r,itemSize:e})=>e*r,getOffset:({height:r,total:e,itemSize:t,layout:i,width:n},s,o,a)=>{const l=l0(i)?n:r,c=Math.max(0,e*t-l),u=Math.min(c,s*t),d=Math.max(0,(s+1)*t-l);switch(o===ow&&(a>=d-l&&a<=u+l?o=aa:o=Ml),o){case s0:return u;case o0:return d;case Ml:{const h=Math.round(d+(u-d)/2);return h<Math.ceil(l/2)?0:h>c+Math.floor(l/2)?c:h}case aa:default:return a>=d&&a<=u?a:a<d?d:u}},getStartIndexForOffset:({total:r,itemSize:e},t)=>Math.max(0,Math.min(r-1,Math.floor(t/e))),getStopIndexForStartIndex:({height:r,total:e,itemSize:t,layout:i,width:n},s,o)=>{const a=s*t,l=l0(i)?n:r,c=Math.ceil((l+o-a)/t);return Math.max(0,Math.min(e-1,s+c-1))},initCache(){},clearCache:!0,validateProps(){}}),Df=(r,e,t)=>{const{itemSize:i}=r,{items:n,lastVisitedIndex:s}=t;if(e>s){let o=0;if(s>=0){const a=n[s];o=a.offset+a.size}for(let a=s+1;a<=e;a++){const l=i(a);n[a]={offset:o,size:l},o+=l}t.lastVisitedIndex=e}return n[e]},kTe=(r,e,t)=>{const{items:i,lastVisitedIndex:n}=e;return(n>0?i[n].offset:0)>=t?R5(r,e,0,n,t):LTe(r,e,Math.max(0,n),t)},R5=(r,e,t,i,n)=>{for(;t<=i;){const s=t+Math.floor((i-t)/2),o=Df(r,s,e).offset;if(o===n)return s;o<n?t=s+1:o>n&&(i=s-1)}return Math.max(0,t-1)},LTe=(r,e,t,i)=>{const{total:n}=r;let s=1;for(;t<n&&Df(r,t,e).offset<i;)t+=s,s*=2;return R5(r,e,Math.floor(t/2),Math.min(t,n-1),i)},k5=({total:r},{items:e,estimatedItemSize:t,lastVisitedIndex:i})=>{let n=0;if(i>=r&&(i=r-1),i>=0){const o=e[i];n=o.offset+o.size}const s=(r-i-1)*t;return n+s},OTe=A5({name:"ElDynamicSizeList",getItemOffset:(r,e,t)=>Df(r,e,t).offset,getItemSize:(r,e,{items:t})=>t[e].size,getEstimatedTotalSize:k5,getOffset:(r,e,t,i,n)=>{const{height:s,layout:o,width:a}=r,l=l0(o)?a:s,c=Df(r,e,n),u=k5(r,n),d=Math.max(0,Math.min(u-l,c.offset)),h=Math.max(0,c.offset-l+c.size);switch(t===ow&&(i>=h-l&&i<=d+l?t=aa:t=Ml),t){case s0:return d;case o0:return h;case Ml:return Math.round(h+(d-h)/2);case aa:default:return i>=h&&i<=d?i:i<h?h:d}},getStartIndexForOffset:(r,e,t)=>kTe(r,t,e),getStopIndexForStartIndex:(r,e,t,i)=>{const{height:n,total:s,layout:o,width:a}=r,l=l0(o)?a:n,c=Df(r,e,i),u=t+l;let d=c.offset+c.size,h=e;for(;h<s-1&&d<u;)h++,d+=Df(r,h,i).size;return h},initCache({estimatedItemSize:r=_C},e){const t={items:{},estimatedItemSize:r,lastVisitedIndex:-1};return t.clearCacheAfterIndex=(i,n=!0)=>{var s,o;t.lastVisitedIndex=Math.min(t.lastVisitedIndex,i-1),(s=e.exposed)==null||s.getItemStyleCache(-1),n&&((o=e.proxy)==null||o.$forceUpdate())},t},clearCache:!1,validateProps:({itemSize:r})=>{}}),PTe=({atXEndEdge:r,atXStartEdge:e,atYEndEdge:t,atYStartEdge:i},n)=>{let s=null,o=0,a=0;const l=(c,u)=>{const d=c<=0&&e.value||c>=0&&r.value,h=u<=0&&i.value||u>=0&&t.value;return d&&h};return{hasReachedEdge:l,onWheel:c=>{mx(s);let u=c.deltaX,d=c.deltaY;Math.abs(u)>Math.abs(d)?d=0:u=0,c.shiftKey&&d!==0&&(u=d,d=0),!(l(o,a)&&l(o+u,a+d))&&(o+=u,a+=d,c.preventDefault(),s=ff(()=>{n(o,a),o=0,a=0}))}}},L5=({name:r,clearCache:e,getColumnPosition:t,getColumnStartIndexForOffset:i,getColumnStopIndexForStartIndex:n,getEstimatedTotalHeight:s,getEstimatedTotalWidth:o,getColumnOffset:a,getRowOffset:l,getRowPosition:c,getRowStartIndexForOffset:u,getRowStopIndexForStartIndex:d,initCache:h,injectToInstance:p,validateProps:f})=>xe({name:r??"ElVirtualList",props:th,emits:[iw,nw],setup(m,{emit:g,expose:v,slots:x}){const b=Ge("vl");f(m);const w=Dt(),_=W(h(m,w));p==null||p(w,_);const S=W(),T=W(),M=W(),E=W(null),C=W({isScrolling:!1,scrollLeft:Ct(m.initScrollLeft)?m.initScrollLeft:0,scrollTop:Ct(m.initScrollTop)?m.initScrollTop:0,updateRequested:!1,xAxisScrollDir:Lf,yAxisScrollDir:Lf}),P=x5(),A=I(()=>Number.parseInt(`${m.height}`,10)),N=I(()=>Number.parseInt(`${m.width}`,10)),R=I(()=>{const{totalColumn:le,totalRow:ge,columnCache:be}=m,{isScrolling:_e,xAxisScrollDir:pe,scrollLeft:Se}=y(C);if(le===0||ge===0)return[0,0,0,0];const Fe=i(m,Se,y(_)),Y=n(m,Fe,Se,y(_)),H=!_e||pe===sw?Math.max(1,be):1,ne=!_e||pe===Lf?Math.max(1,be):1;return[Math.max(0,Fe-H),Math.max(0,Math.min(le-1,Y+ne)),Fe,Y]}),F=I(()=>{const{totalColumn:le,totalRow:ge,rowCache:be}=m,{isScrolling:_e,yAxisScrollDir:pe,scrollTop:Se}=y(C);if(le===0||ge===0)return[0,0,0,0];const Fe=u(m,Se,y(_)),Y=d(m,Fe,Se,y(_)),H=!_e||pe===sw?Math.max(1,be):1,ne=!_e||pe===Lf?Math.max(1,be):1;return[Math.max(0,Fe-H),Math.max(0,Math.min(ge-1,Y+ne)),Fe,Y]}),B=I(()=>s(m,y(_))),k=I(()=>o(m,y(_))),z=I(()=>{var le;return[{position:"relative",overflow:"hidden",WebkitOverflowScrolling:"touch",willChange:"transform"},{direction:m.direction,height:Ct(m.height)?`${m.height}px`:m.height,width:Ct(m.width)?`${m.width}px`:m.width},(le=m.style)!=null?le:{}]}),O=I(()=>{const le=`${y(k)}px`;return{height:`${y(B)}px`,pointerEvents:y(C).isScrolling?"none":void 0,width:le}}),V=()=>{const{totalColumn:le,totalRow:ge}=m;if(le>0&&ge>0){const[Y,H,ne,Le]=y(R),[Pe,Ee,Ue,Be]=y(F);g(iw,{columnCacheStart:Y,columnCacheEnd:H,rowCacheStart:Pe,rowCacheEnd:Ee,columnVisibleStart:ne,columnVisibleEnd:Le,rowVisibleStart:Ue,rowVisibleEnd:Be})}const{scrollLeft:be,scrollTop:_e,updateRequested:pe,xAxisScrollDir:Se,yAxisScrollDir:Fe}=y(C);g(nw,{xAxisScrollDir:Se,scrollLeft:be,yAxisScrollDir:Fe,scrollTop:_e,updateRequested:pe})},U=le=>{const{clientHeight:ge,clientWidth:be,scrollHeight:_e,scrollLeft:pe,scrollTop:Se,scrollWidth:Fe}=le.currentTarget,Y=y(C);if(Y.scrollTop===Se&&Y.scrollLeft===pe)return;let H=pe;if(C5(m.direction))switch(lw()){case a0:H=-pe;break;case MC:H=Fe-be-pe;break}C.value={...Y,isScrolling:!0,scrollLeft:H,scrollTop:Math.max(0,Math.min(Se,_e-ge)),updateRequested:!0,xAxisScrollDir:rh(Y.scrollLeft,H),yAxisScrollDir:rh(Y.scrollTop,Se)},ht(()=>q()),ce(),V()},G=(le,ge)=>{const be=y(A),_e=(B.value-be)/ge*le;se({scrollTop:Math.min(B.value-be,_e)})},X=(le,ge)=>{const be=y(N),_e=(k.value-be)/ge*le;se({scrollLeft:Math.min(k.value-be,_e)})},{onWheel:ie}=PTe({atXStartEdge:I(()=>C.value.scrollLeft<=0),atXEndEdge:I(()=>C.value.scrollLeft>=k.value-y(N)),atYStartEdge:I(()=>C.value.scrollTop<=0),atYEndEdge:I(()=>C.value.scrollTop>=B.value-y(A))},(le,ge)=>{var be,_e,pe,Se;(_e=(be=T.value)==null?void 0:be.onMouseUp)==null||_e.call(be),(Se=(pe=M.value)==null?void 0:pe.onMouseUp)==null||Se.call(pe);const Fe=y(N),Y=y(A);se({scrollLeft:Math.min(C.value.scrollLeft+le,k.value-Fe),scrollTop:Math.min(C.value.scrollTop+ge,B.value-Y)})}),se=({scrollLeft:le=C.value.scrollLeft,scrollTop:ge=C.value.scrollTop})=>{le=Math.max(le,0),ge=Math.max(ge,0);const be=y(C);ge===be.scrollTop&&le===be.scrollLeft||(C.value={...be,xAxisScrollDir:rh(be.scrollLeft,le),yAxisScrollDir:rh(be.scrollTop,ge),scrollLeft:le,scrollTop:ge,updateRequested:!0},ht(()=>q()),ce(),V())},de=(le=0,ge=0,be=aa)=>{const _e=y(C);ge=Math.max(0,Math.min(ge,m.totalColumn-1)),le=Math.max(0,Math.min(le,m.totalRow-1));const pe=uU(b.namespace.value),Se=y(_),Fe=s(m,Se),Y=o(m,Se);se({scrollLeft:a(m,ge,be,_e.scrollLeft,Se,Y>m.width?pe:0),scrollTop:l(m,le,be,_e.scrollTop,Se,Fe>m.height?pe:0)})},K=(le,ge)=>{const{columnWidth:be,direction:_e,rowHeight:pe}=m,Se=P.value(e&&be,e&&pe,e&&_e),Fe=`${le},${ge}`;if(er(Se,Fe))return Se[Fe];{const[,Y]=t(m,ge,y(_)),H=y(_),ne=C5(_e),[Le,Pe]=c(m,le,H),[Ee]=t(m,ge,H);return Se[Fe]={position:"absolute",left:ne?void 0:`${Y}px`,right:ne?`${Y}px`:void 0,top:`${Pe}px`,height:`${Le}px`,width:`${Ee}px`},Se[Fe]}},q=()=>{C.value.isScrolling=!1,ht(()=>{P.value(-1,null,null)})};Et(()=>{if(!ar)return;const{initScrollLeft:le,initScrollTop:ge}=m,be=y(S);be&&(Ct(le)&&(be.scrollLeft=le),Ct(ge)&&(be.scrollTop=ge)),V()});const ce=()=>{const{direction:le}=m,{scrollLeft:ge,scrollTop:be,updateRequested:_e}=y(C),pe=y(S);if(_e&&pe){if(le===Pf)switch(lw()){case a0:{pe.scrollLeft=-ge;break}case TC:{pe.scrollLeft=ge;break}default:{const{clientWidth:Se,scrollWidth:Fe}=pe;pe.scrollLeft=Fe-Se-ge;break}}else pe.scrollLeft=Math.max(0,ge);pe.scrollTop=Math.max(0,be)}},{resetAfterColumnIndex:Te,resetAfterRowIndex:Z,resetAfter:L}=w.proxy;v({windowRef:S,innerRef:E,getItemStyleCache:P,scrollTo:se,scrollToItem:de,states:C,resetAfterColumnIndex:Te,resetAfterRowIndex:Z,resetAfter:L});const $=()=>{const{scrollbarAlwaysOn:le,scrollbarStartGap:ge,scrollbarEndGap:be,totalColumn:_e,totalRow:pe}=m,Se=y(N),Fe=y(A),Y=y(k),H=y(B),{scrollLeft:ne,scrollTop:Le}=y(C),Pe=yt(kC,{ref:T,alwaysOn:le,startGap:ge,endGap:be,class:b.e("horizontal"),clientSize:Se,layout:"horizontal",onScroll:X,ratio:Se*100/Y,scrollFrom:ne/(Y-Se),total:pe,visible:!0}),Ee=yt(kC,{ref:M,alwaysOn:le,startGap:ge,endGap:be,class:b.e("vertical"),clientSize:Fe,layout:"vertical",onScroll:G,ratio:Fe*100/H,scrollFrom:Le/(H-Fe),total:_e,visible:!0});return{horizontalScrollbar:Pe,verticalScrollbar:Ee}},re=()=>{var le;const[ge,be]=y(R),[_e,pe]=y(F),{data:Se,totalColumn:Fe,totalRow:Y,useIsScrolling:H,itemKey:ne}=m,Le=[];if(Y>0&&Fe>0)for(let Pe=_e;Pe<=pe;Pe++)for(let Ee=ge;Ee<=be;Ee++)Le.push((le=x.default)==null?void 0:le.call(x,{columnIndex:Ee,data:Se,key:ne({columnIndex:Ee,data:Se,rowIndex:Pe}),isScrolling:H?y(C).isScrolling:void 0,style:K(Pe,Ee),rowIndex:Pe}));return Le},te=()=>{const le=Xt(m.innerElement),ge=re();return[yt(le,{style:y(O),ref:E},kt(le)?ge:{default:()=>ge})]};return()=>{const le=Xt(m.containerElement),{horizontalScrollbar:ge,verticalScrollbar:be}=$(),_e=te();return yt("div",{key:0,class:b.e("wrapper"),role:m.role},[yt(le,{class:m.className,style:y(z),onScroll:U,onWheel:ie,ref:S},kt(le)?_e:{default:()=>_e}),ge,be])}}}),ITe=L5({name:"ElFixedSizeGrid",getColumnPosition:({columnWidth:r},e)=>[r,e*r],getRowPosition:({rowHeight:r},e)=>[r,e*r],getEstimatedTotalHeight:({totalRow:r,rowHeight:e})=>e*r,getEstimatedTotalWidth:({totalColumn:r,columnWidth:e})=>e*r,getColumnOffset:({totalColumn:r,columnWidth:e,width:t},i,n,s,o,a)=>{t=Number(t);const l=Math.max(0,r*e-t),c=Math.min(l,i*e),u=Math.max(0,i*e-t+a+e);switch(n==="smart"&&(s>=u-t&&s<=c+t?n=aa:n=Ml),n){case s0:return c;case o0:return u;case Ml:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(t/2)?0:d>l+Math.floor(t/2)?l:d}case aa:default:return s>=u&&s<=c?s:u>c||s<u?u:c}},getRowOffset:({rowHeight:r,height:e,totalRow:t},i,n,s,o,a)=>{e=Number(e);const l=Math.max(0,t*r-e),c=Math.min(l,i*r),u=Math.max(0,i*r-e+a+r);switch(n===ow&&(s>=u-e&&s<=c+e?n=aa:n=Ml),n){case s0:return c;case o0:return u;case Ml:{const d=Math.round(u+(c-u)/2);return d<Math.ceil(e/2)?0:d>l+Math.floor(e/2)?l:d}case aa:default:return s>=u&&s<=c?s:u>c||s<u?u:c}},getColumnStartIndexForOffset:({columnWidth:r,totalColumn:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/r))),getColumnStopIndexForStartIndex:({columnWidth:r,totalColumn:e,width:t},i,n)=>{const s=i*r,o=Math.ceil((t+n-s)/r);return Math.max(0,Math.min(e-1,i+o-1))},getRowStartIndexForOffset:({rowHeight:r,totalRow:e},t)=>Math.max(0,Math.min(e-1,Math.floor(t/r))),getRowStopIndexForStartIndex:({rowHeight:r,totalRow:e,height:t},i,n)=>{const s=i*r,o=Math.ceil((t+n-s)/r);return Math.max(0,Math.min(e-1,i+o-1))},initCache:()=>{},clearCache:!0,validateProps:({columnWidth:r,rowHeight:e})=>{}}),{max:cw,min:O5,floor:P5}=Math,DTe={column:"columnWidth",row:"rowHeight"},LC={column:"lastVisitedColumnIndex",row:"lastVisitedRowIndex"},uc=(r,e,t,i)=>{const[n,s,o]=[t[i],r[DTe[i]],t[LC[i]]];if(e>o){let a=0;if(o>=0){const l=n[o];a=l.offset+l.size}for(let l=o+1;l<=e;l++){const c=s(l);n[l]={offset:a,size:c},a+=c}t[LC[i]]=e}return n[e]},I5=(r,e,t,i,n,s)=>{for(;t<=i;){const o=t+P5((i-t)/2),a=uc(r,o,e,s).offset;if(a===n)return o;a<n?t=o+1:i=o-1}return cw(0,t-1)},UTe=(r,e,t,i,n)=>{const s=n==="column"?r.totalColumn:r.totalRow;let o=1;for(;t<s&&uc(r,t,e,n).offset<i;)t+=o,o*=2;return I5(r,e,P5(t/2),O5(t,s-1),i,n)},D5=(r,e,t,i)=>{const[n,s]=[e[i],e[LC[i]]];return(s>0?n[s].offset:0)>=t?I5(r,e,0,s,t,i):UTe(r,e,cw(0,s),t,i)},U5=({totalRow:r},{estimatedRowHeight:e,lastVisitedRowIndex:t,row:i})=>{let n=0;if(t>=r&&(t=r-1),t>=0){const o=i[t];n=o.offset+o.size}const s=(r-t-1)*e;return n+s},F5=({totalColumn:r},{column:e,estimatedColumnWidth:t,lastVisitedColumnIndex:i})=>{let n=0;if(i>r&&(i=r-1),i>=0){const o=e[i];n=o.offset+o.size}const s=(r-i-1)*t;return n+s},FTe={column:F5,row:U5},B5=(r,e,t,i,n,s,o)=>{const[a,l]=[s==="row"?r.height:r.width,FTe[s]],c=uc(r,e,n,s),u=l(r,n),d=cw(0,O5(u-a,c.offset)),h=cw(0,c.offset-a+o+c.size);switch(t===ow&&(i>=h-a&&i<=d+a?t=aa:t=Ml),t){case s0:return d;case o0:return h;case Ml:return Math.round(h+(d-h)/2);case aa:default:return i>=h&&i<=d?i:h>d||i<h?h:d}},BTe=L5({name:"ElDynamicSizeGrid",getColumnPosition:(r,e,t)=>{const i=uc(r,e,t,"column");return[i.size,i.offset]},getRowPosition:(r,e,t)=>{const i=uc(r,e,t,"row");return[i.size,i.offset]},getColumnOffset:(r,e,t,i,n,s)=>B5(r,e,t,i,n,"column",s),getRowOffset:(r,e,t,i,n,s)=>B5(r,e,t,i,n,"row",s),getColumnStartIndexForOffset:(r,e,t)=>D5(r,t,e,"column"),getColumnStopIndexForStartIndex:(r,e,t,i)=>{const n=uc(r,e,i,"column"),s=t+r.width;let o=n.offset+n.size,a=e;for(;a<r.totalColumn-1&&o<s;)a++,o+=uc(r,e,i,"column").size;return a},getEstimatedTotalHeight:U5,getEstimatedTotalWidth:F5,getRowStartIndexForOffset:(r,e,t)=>D5(r,t,e,"row"),getRowStopIndexForStartIndex:(r,e,t,i)=>{const{totalRow:n,height:s}=r,o=uc(r,e,i,"row"),a=t+s;let l=o.size+o.offset,c=e;for(;c<n-1&&l<a;)c++,l+=uc(r,c,i,"row").size;return c},injectToInstance:(r,e)=>{const t=({columnIndex:s,rowIndex:o},a)=>{var l,c;a=rn(a)?!0:a,Ct(s)&&(e.value.lastVisitedColumnIndex=Math.min(e.value.lastVisitedColumnIndex,s-1)),Ct(o)&&(e.value.lastVisitedRowIndex=Math.min(e.value.lastVisitedRowIndex,o-1)),(l=r.exposed)==null||l.getItemStyleCache.value(-1,null,null),a&&((c=r.proxy)==null||c.$forceUpdate())},i=(s,o)=>{t({columnIndex:s},o)},n=(s,o)=>{t({rowIndex:s},o)};Object.assign(r.proxy,{resetAfterColumnIndex:i,resetAfterRowIndex:n,resetAfter:t})},initCache:({estimatedColumnWidth:r=_C,estimatedRowHeight:e=_C})=>({column:{},estimatedColumnWidth:r,estimatedRowHeight:e,lastVisitedColumnIndex:-1,lastVisitedRowIndex:-1,row:{}}),clearCache:!1,validateProps:({columnWidth:r,rowHeight:e})=>{}}),zTe=xe({props:{item:{type:Object,required:!0},style:Object,height:Number},setup(){return{ns:Ge("select")}}});function VTe(r,e,t,i,n,s){return r.item.isTitle?(D(),ee("div",{key:0,class:j(r.ns.be("group","title")),style:pt([r.style,{lineHeight:`${r.height}px`}])},$e(r.item.label),7)):(D(),ee("div",{key:1,class:j(r.ns.be("group","split")),style:pt(r.style)},[J("span",{class:j(r.ns.be("group","split-dash")),style:pt({top:`${r.height/2}px`})},null,6)],6))}var GTe=Qe(zTe,[["render",VTe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/group-item.vue"]]);function jTe(r,{emit:e}){return{hoverItem:()=>{r.disabled||e("hover",r.index)},selectOptionClick:()=>{r.disabled||e("select",r.item,r.index)}}}const HTe={allowCreate:Boolean,autocomplete:{type:String,default:"none"},automaticDropdown:Boolean,clearable:Boolean,clearIcon:{type:[String,Object],default:uu},effect:{type:String,default:"light"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},maxCollapseTags:{type:Number,default:1},defaultFirstOption:Boolean,disabled:Boolean,estimatedOptionHeight:{type:Number,default:void 0},filterable:Boolean,filterMethod:Function,height:{type:Number,default:170},itemHeight:{type:Number,default:34},id:String,loading:Boolean,loadingText:String,label:String,modelValue:[Array,String,Number,Boolean,Object],multiple:Boolean,multipleLimit:{type:Number,default:0},name:String,noDataText:String,noMatchText:String,remoteMethod:Function,reserveKeyword:{type:Boolean,default:!0},options:{type:Array,required:!0},placeholder:{type:String},teleported:Nn.teleported,persistent:{type:Boolean,default:!0},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>({})},remote:Boolean,size:{type:String,validator:px},valueKey:{type:String,default:"value"},scrollbarAlwaysOn:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},placement:{type:Oe(String),values:$d,default:"bottom-start"}},WTe={data:Array,disabled:Boolean,hovering:Boolean,item:Object,index:Number,style:Object,selected:Boolean,created:Boolean},$Te=xe({props:WTe,emits:["select","hover"],setup(r,{emit:e}){const t=Ge("select"),{hoverItem:i,selectOptionClick:n}=jTe(r,{emit:e});return{ns:t,hoverItem:i,selectOptionClick:n}}}),XTe=["aria-selected"];function qTe(r,e,t,i,n,s){return D(),ee("li",{"aria-selected":r.selected,style:pt(r.style),class:j([r.ns.be("dropdown","option-item"),r.ns.is("selected",r.selected),r.ns.is("disabled",r.disabled),r.ns.is("created",r.created),{hover:r.hovering}]),onMouseenter:e[0]||(e[0]=(...o)=>r.hoverItem&&r.hoverItem(...o)),onClick:e[1]||(e[1]=Mt((...o)=>r.selectOptionClick&&r.selectOptionClick(...o),["stop"]))},[ze(r.$slots,"default",{item:r.item,index:r.index,disabled:r.disabled},()=>[J("span",null,$e(r.item.label),1)])],46,XTe)}var KTe=Qe($Te,[["render",qTe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/option-item.vue"]]);const z5=Symbol("ElSelectV2Injection");var YTe=xe({name:"ElSelectDropdown",props:{data:{type:Array,required:!0},hoveringIndex:Number,width:Number},setup(r,{slots:e,expose:t}){const i=ut(z5),n=Ge("select"),s=W([]),o=W(),a=I(()=>r.data.length);Ve(()=>a.value,()=>{var S,T;(T=(S=i.popper.value).updatePopper)==null||T.call(S)});const l=I(()=>rn(i.props.estimatedOptionHeight)),c=I(()=>l.value?{itemSize:i.props.itemHeight}:{estimatedSize:i.props.estimatedOptionHeight,itemSize:S=>s.value[S]}),u=(S=[],T)=>{const{props:{valueKey:M}}=i;return Ht(T)?S&&S.some(E=>ti(E,M)===ti(T,M)):S.includes(T)},d=(S,T)=>{if(Ht(T)){const{valueKey:M}=i.props;return ti(S,M)===ti(T,M)}else return S===T},h=(S,T)=>{const{valueKey:M}=i.props;return i.props.multiple?u(S,ti(T,M)):d(S,ti(T,M))},p=(S,T)=>{const{disabled:M,multiple:E,multipleLimit:C}=i.props;return M||!T&&(E?C>0&&S.length>=C:!1)},f=S=>r.hoveringIndex===S;t({listRef:o,isSized:l,isItemDisabled:p,isItemHovering:f,isItemSelected:h,scrollToItem:S=>{const T=o.value;T&&T.scrollToItem(S)},resetScrollTop:()=>{const S=o.value;S&&S.resetScrollTop()}});const m=S=>{const{index:T,data:M,style:E}=S,C=y(l),{itemSize:P,estimatedSize:A}=y(c),{modelValue:N}=i.props,{onSelect:R,onHover:F}=i,B=M[T];if(B.type==="Group")return ue(GTe,{item:B,style:E,height:C?P:A},null);const k=h(N,B),z=p(N,k),O=f(T);return ue(KTe,qt(S,{selected:k,disabled:B.disabled||z,created:!!B.created,hovering:O,item:B,onSelect:R,onHover:F}),{default:V=>{var U;return((U=e.default)==null?void 0:U.call(e,V))||ue("span",null,[B.label])}})},{onKeyboardNavigate:g,onKeyboardSelect:v}=i,x=()=>{g("forward")},b=()=>{g("backward")},w=()=>{i.expanded=!1},_=S=>{const{code:T}=S,{tab:M,esc:E,down:C,up:P,enter:A}=bt;switch(T!==M&&(S.preventDefault(),S.stopPropagation()),T){case M:case E:{w();break}case C:{x();break}case P:{b();break}case A:{v();break}}};return()=>{var S;const{data:T,width:M}=r,{height:E,multiple:C,scrollbarAlwaysOn:P}=i.props;if(T.length===0)return ue("div",{class:n.b("dropdown"),style:{width:`${M}px`}},[(S=e.empty)==null?void 0:S.call(e)]);const A=y(l)?N5:OTe;return ue("div",{class:[n.b("dropdown"),n.is("multiple",C)]},[ue(A,qt({ref:o},y(c),{className:n.be("dropdown","list"),scrollbarAlwaysOn:P,data:T,height:E,width:M,total:T.length,onKeydown:_}),{default:N=>ue(m,N,null)})])}}});function ZTe(r,e){const t=W(0),i=W(null),n=I(()=>r.allowCreate&&r.filterable);function s(u){const d=h=>h.value===u;return r.options&&r.options.some(d)||e.createdOptions.some(d)}function o(u){n.value&&(r.multiple&&u.created?t.value++:i.value=u)}function a(u){if(n.value)if(u&&u.length>0&&!s(u)){const d={value:u,label:u,created:!0,disabled:!1};e.createdOptions.length>=t.value?e.createdOptions[t.value]=d:e.createdOptions.push(d)}else if(r.multiple)e.createdOptions.length=t.value;else{const d=i.value;e.createdOptions.length=0,d&&d.created&&e.createdOptions.push(d)}}function l(u){if(!n.value||!u||!u.created||u.created&&r.reserveKeyword&&e.inputValue===u.label)return;const d=e.createdOptions.findIndex(h=>h.value===u.value);~d&&(e.createdOptions.splice(d,1),t.value--)}function c(){n.value&&(e.createdOptions.length=0,t.value=0)}return{createNewOption:a,removeNewOption:l,selectNewOption:o,clearAllNewOption:c}}const JTe=r=>{const e=[];return r.forEach(t=>{lt(t.options)?(e.push({label:t.label,isTitle:!0,type:"Group"}),t.options.forEach(i=>{e.push(i)}),e.push({type:"Group"})):e.push(t)}),e};function QTe(r){const e=W(!1);return{handleCompositionStart:()=>{e.value=!0},handleCompositionUpdate:t=>{const i=t.target.value,n=i[i.length-1]||"";e.value=!fx(n)},handleCompositionEnd:t=>{e.value&&(e.value=!1,Nt(r)&&r(t))}}}const V5="",G5=11,eMe={larget:51,default:42,small:33},tMe=(r,e)=>{const{t}=pr(),i=Ge("select-v2"),n=Ge("input"),{form:s,formItem:o}=Ns(),a=br({inputValue:V5,displayInputValue:V5,calculatedWidth:0,cachedPlaceholder:"",cachedOptions:[],createdOptions:[],createdLabel:"",createdSelected:!1,currentPlaceholder:"",hoveringIndex:-1,comboBoxHovering:!1,isOnComposition:!1,isSilentBlur:!1,isComposing:!1,inputLength:20,selectWidth:200,initialInputHeight:0,previousQuery:null,previousValue:void 0,query:"",selectedLabel:"",softFocus:!1,tagInMultiLine:!1}),l=W(-1),c=W(-1),u=W(null),d=W(null),h=W(null),p=W(null),f=W(null),m=W(null),g=W(null),v=W(!1),x=I(()=>r.disabled||(s==null?void 0:s.disabled)),b=I(()=>{const fe=A.value.length*34;return fe>r.height?r.height:fe}),w=I(()=>!Vi(r.modelValue)),_=I(()=>{const fe=r.multiple?Array.isArray(r.modelValue)&&r.modelValue.length>0:w.value;return r.clearable&&!x.value&&a.comboBoxHovering&&fe}),S=I(()=>r.remote&&r.filterable?"":cx),T=I(()=>S.value&&i.is("reverse",v.value)),M=I(()=>(o==null?void 0:o.validateState)||""),E=I(()=>JM[M.value]),C=I(()=>r.remote?300:0),P=I(()=>{const fe=A.value;return r.loading?r.loadingText||t("el.select.loading"):r.remote&&a.inputValue===""&&fe.length===0?!1:r.filterable&&a.inputValue&&fe.length>0?r.noMatchText||t("el.select.noMatch"):fe.length===0?r.noDataText||t("el.select.noData"):null}),A=I(()=>{const fe=Ie=>{const wt=a.inputValue,xt=new RegExp(lU(wt),"i");return wt?xt.test(Ie.label||""):!0};return r.loading?[]:JTe(r.options.concat(a.createdOptions).map(Ie=>{if(lt(Ie.options)){const wt=Ie.options.filter(fe);if(wt.length>0)return{...Ie,options:wt}}else if(r.remote||fe(Ie))return Ie;return null}).filter(Ie=>Ie!==null))}),N=I(()=>{const fe=new Map;return A.value.forEach((Ie,wt)=>{fe.set(Fe(Ie),{option:Ie,index:wt})}),fe}),R=I(()=>A.value.every(fe=>fe.disabled)),F=Hi(),B=I(()=>F.value==="small"?"small":"default"),k=I(()=>{const fe=m.value,Ie=B.value||"default",wt=fe?Number.parseInt(getComputedStyle(fe).paddingLeft):0,xt=fe?Number.parseInt(getComputedStyle(fe).paddingRight):0;return a.selectWidth-xt-wt-eMe[Ie]}),z=()=>{var fe;c.value=((fe=f.value)==null?void 0:fe.offsetWidth)||200},O=I(()=>({width:`${a.calculatedWidth===0?G5:Math.ceil(a.calculatedWidth)+G5}px`})),V=I(()=>lt(r.modelValue)?r.modelValue.length===0&&!a.displayInputValue:r.filterable?a.displayInputValue.length===0:!0),U=I(()=>{const fe=r.placeholder||t("el.select.placeholder");return r.multiple||Vi(r.modelValue)?fe:a.selectedLabel}),G=I(()=>{var fe,Ie;return(Ie=(fe=p.value)==null?void 0:fe.popperRef)==null?void 0:Ie.contentRef}),X=I(()=>{if(r.multiple){const fe=r.modelValue.length;if(r.modelValue.length>0&&N.value.has(r.modelValue[fe-1])){const{index:Ie}=N.value.get(r.modelValue[fe-1]);return Ie}}else if(r.modelValue&&N.value.has(r.modelValue)){const{index:fe}=N.value.get(r.modelValue);return fe}return-1}),ie=I({get(){return v.value&&P.value!==!1},set(fe){v.value=fe}}),se=I(()=>a.cachedOptions.slice(0,r.maxCollapseTags)),de=I(()=>a.cachedOptions.slice(r.maxCollapseTags)),{createNewOption:K,removeNewOption:q,selectNewOption:ce,clearAllNewOption:Te}=ZTe(r,a),{handleCompositionStart:Z,handleCompositionUpdate:L,handleCompositionEnd:$}=QTe(fe=>nt(fe)),re=()=>{var fe,Ie,wt;(Ie=(fe=d.value)==null?void 0:fe.focus)==null||Ie.call(fe),(wt=p.value)==null||wt.updatePopper()},te=()=>{if(!r.automaticDropdown&&!x.value)return a.isComposing&&(a.softFocus=!0),ht(()=>{var fe,Ie;v.value=!v.value,(Ie=(fe=d.value)==null?void 0:fe.focus)==null||Ie.call(fe)})},le=()=>(r.filterable&&a.inputValue!==a.selectedLabel&&(a.query=a.selectedLabel),be(a.inputValue),ht(()=>{K(a.inputValue)})),ge=Es(le,C.value),be=fe=>{a.previousQuery!==fe&&(a.previousQuery=fe,r.filterable&&Nt(r.filterMethod)?r.filterMethod(fe):r.filterable&&r.remote&&Nt(r.remoteMethod)&&r.remoteMethod(fe))},_e=fe=>{$s(r.modelValue,fe)||e(Kr,fe)},pe=fe=>{e(Wt,fe),_e(fe),a.previousValue=fe==null?void 0:fe.toString()},Se=(fe=[],Ie)=>{if(!Ht(Ie))return fe.indexOf(Ie);const wt=r.valueKey;let xt=-1;return fe.some((Gt,Jt)=>ti(Gt,wt)===ti(Ie,wt)?(xt=Jt,!0):!1),xt},Fe=fe=>Ht(fe)?ti(fe,r.valueKey):fe,Y=fe=>Ht(fe)?fe.label:fe,H=()=>ht(()=>{var fe,Ie;if(!d.value)return;const wt=m.value;f.value.height=wt.offsetHeight,v.value&&P.value!==!1&&((Ie=(fe=p.value)==null?void 0:fe.updatePopper)==null||Ie.call(fe))}),ne=()=>{var fe,Ie;if(Le(),z(),(Ie=(fe=p.value)==null?void 0:fe.updatePopper)==null||Ie.call(fe),r.multiple)return H()},Le=()=>{const fe=m.value;fe&&(a.selectWidth=fe.getBoundingClientRect().width)},Pe=(fe,Ie,wt=!0)=>{var xt,Gt;if(r.multiple){let Jt=r.modelValue.slice();const _r=Se(Jt,Fe(fe));_r>-1?(Jt=[...Jt.slice(0,_r),...Jt.slice(_r+1)],a.cachedOptions.splice(_r,1),q(fe)):(r.multipleLimit<=0||Jt.length<r.multipleLimit)&&(Jt=[...Jt,Fe(fe)],a.cachedOptions.push(fe),ce(fe),We(Ie)),pe(Jt),fe.created&&(a.query="",be(""),a.inputLength=20),r.filterable&&!r.reserveKeyword&&((Gt=(xt=d.value).focus)==null||Gt.call(xt),we("")),r.filterable&&(a.calculatedWidth=g.value.getBoundingClientRect().width),H(),ye()}else l.value=Ie,a.selectedLabel=fe.label,pe(Fe(fe)),v.value=!1,a.isComposing=!1,a.isSilentBlur=wt,ce(fe),fe.created||Te(),We(Ie)},Ee=(fe,Ie)=>{const{valueKey:wt}=r,xt=r.modelValue.indexOf(ti(Ie,wt));if(xt>-1&&!x.value){const Gt=[...r.modelValue.slice(0,xt),...r.modelValue.slice(xt+1)];return a.cachedOptions.splice(xt,1),pe(Gt),e("remove-tag",ti(Ie,wt)),a.softFocus=!0,q(Ie),ht(re)}fe.stopPropagation()},Ue=fe=>{const Ie=a.isComposing;a.isComposing=!0,a.softFocus?a.softFocus=!1:Ie||e("focus",fe)},Be=fe=>(a.softFocus=!1,ht(()=>{var Ie,wt;(wt=(Ie=d.value)==null?void 0:Ie.blur)==null||wt.call(Ie),g.value&&(a.calculatedWidth=g.value.getBoundingClientRect().width),a.isSilentBlur?a.isSilentBlur=!1:a.isComposing&&e("blur",fe),a.isComposing=!1})),ve=()=>{a.displayInputValue.length>0?we(""):v.value=!1},Q=fe=>{if(a.displayInputValue.length===0){fe.preventDefault();const Ie=r.modelValue.slice();Ie.pop(),q(a.cachedOptions.pop()),pe(Ie)}},he=()=>{let fe;return lt(r.modelValue)?fe=[]:fe=void 0,a.softFocus=!0,r.multiple?a.cachedOptions=[]:a.selectedLabel="",v.value=!1,pe(fe),e("clear"),Te(),ht(re)},we=fe=>{a.displayInputValue=fe,a.inputValue=fe},ae=(fe,Ie=void 0)=>{const wt=A.value;if(!["forward","backward"].includes(fe)||x.value||wt.length<=0||R.value)return;if(!v.value)return te();Ie===void 0&&(Ie=a.hoveringIndex);let xt=-1;fe==="forward"?(xt=Ie+1,xt>=wt.length&&(xt=0)):fe==="backward"&&(xt=Ie-1,(xt<0||xt>=wt.length)&&(xt=wt.length-1));const Gt=wt[xt];if(Gt.disabled||Gt.type==="Group")return ae(fe,xt);We(xt),Me(xt)},De=()=>{if(v.value)~a.hoveringIndex&&A.value[a.hoveringIndex]&&Pe(A.value[a.hoveringIndex],a.hoveringIndex,!1);else return te()},We=fe=>{a.hoveringIndex=fe},je=()=>{a.hoveringIndex=-1},ye=()=>{var fe;const Ie=d.value;Ie&&((fe=Ie.focus)==null||fe.call(Ie))},nt=fe=>{const Ie=fe.target.value;if(we(Ie),a.displayInputValue.length>0&&!v.value&&(v.value=!0),a.calculatedWidth=g.value.getBoundingClientRect().width,r.multiple&&H(),r.remote)ge();else return le()},He=()=>(v.value=!1,Be()),tt=()=>(a.inputValue=a.displayInputValue,ht(()=>{~X.value&&(We(X.value),Me(a.hoveringIndex))})),Me=fe=>{h.value.scrollToItem(fe)},Ne=()=>{if(je(),r.multiple)if(r.modelValue.length>0){let fe=!1;a.cachedOptions.length=0,a.previousValue=r.modelValue.toString();for(const Ie of r.modelValue)if(N.value.has(Ie)){const{index:wt,option:xt}=N.value.get(Ie);a.cachedOptions.push(xt),fe||We(wt),fe=!0}}else a.cachedOptions=[],a.previousValue=void 0;else if(w.value){a.previousValue=r.modelValue;const fe=A.value,Ie=fe.findIndex(wt=>Fe(wt)===Fe(r.modelValue));~Ie?(a.selectedLabel=fe[Ie].label,We(Ie)):a.selectedLabel=`${r.modelValue}`}else a.selectedLabel="",a.previousValue=void 0;Te(),z()};return Ve(v,fe=>{var Ie,wt;e("visible-change",fe),fe?(wt=(Ie=p.value).update)==null||wt.call(Ie):(a.displayInputValue="",a.previousQuery=null,K(""))}),Ve(()=>r.modelValue,(fe,Ie)=>{var wt;(!fe||fe.toString()!==a.previousValue)&&Ne(),!$s(fe,Ie)&&r.validateEvent&&((wt=o==null?void 0:o.validate)==null||wt.call(o,"change").catch(xt=>{}))},{deep:!0}),Ve(()=>r.options,()=>{const fe=d.value;(!fe||fe&&document.activeElement!==fe)&&Ne()},{deep:!0}),Ve(A,()=>ht(h.value.resetScrollTop)),Ve(()=>ie.value,fe=>{fe||je()}),Et(()=>{Ne()}),cs(f,ne),{collapseTagSize:B,currentPlaceholder:U,expanded:v,emptyText:P,popupHeight:b,debounce:C,filteredOptions:A,iconComponent:S,iconReverse:T,inputWrapperStyle:O,popperSize:c,dropdownMenuVisible:ie,hasModelValue:w,shouldShowPlaceholder:V,selectDisabled:x,selectSize:F,showClearBtn:_,states:a,tagMaxWidth:k,nsSelectV2:i,nsInput:n,calculatorRef:g,controlRef:u,inputRef:d,menuRef:h,popper:p,selectRef:f,selectionRef:m,popperRef:G,validateState:M,validateIcon:E,showTagList:se,collapseTagList:de,debouncedOnInputChange:ge,deleteTag:Ee,getLabel:Y,getValueKey:Fe,handleBlur:Be,handleClear:he,handleClickOutside:He,handleDel:Q,handleEsc:ve,handleFocus:Ue,handleMenuEnter:tt,handleResize:ne,toggleMenu:te,scrollTo:Me,onInput:nt,onKeyboardNavigate:ae,onKeyboardSelect:De,onSelect:Pe,onHover:We,onUpdateInputValue:we,handleCompositionStart:Z,handleCompositionEnd:$,handleCompositionUpdate:L}},rMe=xe({name:"ElSelectV2",components:{ElSelectMenu:YTe,ElTag:Qv,ElTooltip:Rs,ElIcon:dt},directives:{ClickOutside:Su,ModelText:aM},props:HTe,emits:[Wt,Kr,"remove-tag","clear","visible-change","focus","blur"],setup(r,{emit:e}){const t=I(()=>{const{modelValue:n,multiple:s}=r,o=s?[]:void 0;return lt(n)?s?n:o:s?o:n}),i=tMe(br({...fn(r),modelValue:t}),e);return Yt(z5,{props:br({...fn(r),height:i.popupHeight,modelValue:t}),popper:i.popper,onSelect:i.onSelect,onHover:i.onHover,onKeyboardNavigate:i.onKeyboardNavigate,onKeyboardSelect:i.onKeyboardSelect}),{...i,modelValue:t}}}),iMe={key:0},nMe=["id","autocomplete","aria-expanded","aria-labelledby","disabled","readonly","name","unselectable"],sMe=["textContent"],oMe=["id","aria-labelledby","aria-expanded","autocomplete","disabled","name","readonly","unselectable"],aMe=["textContent"];function lMe(r,e,t,i,n,s){const o=gt("el-tag"),a=gt("el-tooltip"),l=gt("el-icon"),c=gt("el-select-menu"),u=Yp("model-text"),d=Yp("click-outside");return It((D(),ee("div",{ref:"selectRef",class:j([r.nsSelectV2.b(),r.nsSelectV2.m(r.selectSize)]),onClick:e[24]||(e[24]=Mt((...h)=>r.toggleMenu&&r.toggleMenu(...h),["stop"])),onMouseenter:e[25]||(e[25]=h=>r.states.comboBoxHovering=!0),onMouseleave:e[26]||(e[26]=h=>r.states.comboBoxHovering=!1)},[ue(a,{ref:"popper",visible:r.dropdownMenuVisible,teleported:r.teleported,"popper-class":[r.nsSelectV2.e("popper"),r.popperClass],"gpu-acceleration":!1,"stop-popper-mouse-event":!1,"popper-options":r.popperOptions,"fallback-placements":["bottom-start","top-start","right","left"],effect:r.effect,placement:r.placement,pure:"",transition:`${r.nsSelectV2.namespace.value}-zoom-in-top`,trigger:"click",persistent:r.persistent,onBeforeShow:r.handleMenuEnter,onHide:e[23]||(e[23]=h=>r.states.inputValue=r.states.displayInputValue)},{default:me(()=>[J("div",{ref:"selectionRef",class:j([r.nsSelectV2.e("wrapper"),r.nsSelectV2.is("focused",r.states.isComposing||r.expanded),r.nsSelectV2.is("hovering",r.states.comboBoxHovering),r.nsSelectV2.is("filterable",r.filterable),r.nsSelectV2.is("disabled",r.selectDisabled)])},[r.$slots.prefix?(D(),ee("div",iMe,[ze(r.$slots,"prefix")])):Re("v-if",!0),r.multiple?(D(),ee("div",{key:1,class:j(r.nsSelectV2.e("selection"))},[r.collapseTags&&r.modelValue.length>0?(D(),ee(ct,{key:0},[(D(!0),ee(ct,null,Ut(r.showTagList,h=>(D(),ee("div",{key:r.getValueKey(h),class:j(r.nsSelectV2.e("selected-item"))},[ue(o,{closable:!r.selectDisabled&&!(h!=null&&h.disable),size:r.collapseTagSize,type:"info","disable-transitions":"",onClose:p=>r.deleteTag(p,h)},{default:me(()=>[J("span",{class:j(r.nsSelectV2.e("tags-text")),style:pt({maxWidth:`${r.tagMaxWidth}px`})},$e(h==null?void 0:h.label),7)]),_:2},1032,["closable","size","onClose"])],2))),128)),J("div",{class:j(r.nsSelectV2.e("selected-item"))},[r.modelValue.length>r.maxCollapseTags?(D(),Ae(o,{key:0,closable:!1,size:r.collapseTagSize,type:"info","disable-transitions":""},{default:me(()=>[r.collapseTagsTooltip?(D(),Ae(a,{key:0,disabled:r.dropdownMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:r.effect,placement:"bottom",teleported:!1},{default:me(()=>[J("span",{class:j(r.nsSelectV2.e("tags-text")),style:pt({maxWidth:`${r.tagMaxWidth}px`})},"+ "+$e(r.modelValue.length-r.maxCollapseTags),7)]),content:me(()=>[J("div",{class:j(r.nsSelectV2.e("selection"))},[(D(!0),ee(ct,null,Ut(r.collapseTagList,h=>(D(),ee("div",{key:r.getValueKey(h),class:j(r.nsSelectV2.e("selected-item"))},[ue(o,{closable:!r.selectDisabled&&!h.disabled,size:r.collapseTagSize,class:"in-tooltip",type:"info","disable-transitions":"",onClose:p=>r.deleteTag(p,h)},{default:me(()=>[J("span",{class:j(r.nsSelectV2.e("tags-text")),style:pt({maxWidth:`${r.tagMaxWidth}px`})},$e(r.getLabel(h)),7)]),_:2},1032,["closable","size","onClose"])],2))),128))],2)]),_:1},8,["disabled","effect"])):(D(),ee("span",{key:1,class:j(r.nsSelectV2.e("tags-text")),style:pt({maxWidth:`${r.tagMaxWidth}px`})},"+ "+$e(r.modelValue.length-r.maxCollapseTags),7))]),_:1},8,["size"])):Re("v-if",!0)],2)],64)):(D(!0),ee(ct,{key:1},Ut(r.states.cachedOptions,h=>(D(),ee("div",{key:r.getValueKey(h),class:j(r.nsSelectV2.e("selected-item"))},[ue(o,{closable:!r.selectDisabled&&!h.disabled,size:r.collapseTagSize,type:"info","disable-transitions":"",onClose:p=>r.deleteTag(p,h)},{default:me(()=>[J("span",{class:j(r.nsSelectV2.e("tags-text")),style:pt({maxWidth:`${r.tagMaxWidth}px`})},$e(r.getLabel(h)),7)]),_:2},1032,["closable","size","onClose"])],2))),128)),J("div",{class:j([r.nsSelectV2.e("selected-item"),r.nsSelectV2.e("input-wrapper")]),style:pt(r.inputWrapperStyle)},[It(J("input",{id:r.id,ref:"inputRef",autocomplete:r.autocomplete,"aria-autocomplete":"list","aria-haspopup":"listbox",autocapitalize:"off","aria-expanded":r.expanded,"aria-labelledby":r.label,class:j([r.nsSelectV2.is(r.selectSize),r.nsSelectV2.e("combobox-input")]),disabled:r.disabled,role:"combobox",readonly:!r.filterable,spellcheck:"false",type:"text",name:r.name,unselectable:r.expanded?"on":void 0,"onUpdate:modelValue":e[0]||(e[0]=(...h)=>r.onUpdateInputValue&&r.onUpdateInputValue(...h)),onFocus:e[1]||(e[1]=(...h)=>r.handleFocus&&r.handleFocus(...h)),onBlur:e[2]||(e[2]=(...h)=>r.handleBlur&&r.handleBlur(...h)),onInput:e[3]||(e[3]=(...h)=>r.onInput&&r.onInput(...h)),onCompositionstart:e[4]||(e[4]=(...h)=>r.handleCompositionStart&&r.handleCompositionStart(...h)),onCompositionupdate:e[5]||(e[5]=(...h)=>r.handleCompositionUpdate&&r.handleCompositionUpdate(...h)),onCompositionend:e[6]||(e[6]=(...h)=>r.handleCompositionEnd&&r.handleCompositionEnd(...h)),onKeydown:[e[7]||(e[7]=dr(Mt(h=>r.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),e[8]||(e[8]=dr(Mt(h=>r.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),e[9]||(e[9]=dr(Mt((...h)=>r.onKeyboardSelect&&r.onKeyboardSelect(...h),["stop","prevent"]),["enter"])),e[10]||(e[10]=dr(Mt((...h)=>r.handleEsc&&r.handleEsc(...h),["stop","prevent"]),["esc"])),e[11]||(e[11]=dr(Mt((...h)=>r.handleDel&&r.handleDel(...h),["stop"]),["delete"]))]},null,42,nMe),[[u,r.states.displayInputValue]]),r.filterable?(D(),ee("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:j(r.nsSelectV2.e("input-calculator")),textContent:$e(r.states.displayInputValue)},null,10,sMe)):Re("v-if",!0)],6)],2)):(D(),ee(ct,{key:2},[J("div",{class:j([r.nsSelectV2.e("selected-item"),r.nsSelectV2.e("input-wrapper")])},[It(J("input",{id:r.id,ref:"inputRef","aria-autocomplete":"list","aria-haspopup":"listbox","aria-labelledby":r.label,"aria-expanded":r.expanded,autocapitalize:"off",autocomplete:r.autocomplete,class:j(r.nsSelectV2.e("combobox-input")),disabled:r.disabled,name:r.name,role:"combobox",readonly:!r.filterable,spellcheck:"false",type:"text",unselectable:r.expanded?"on":void 0,onCompositionstart:e[12]||(e[12]=(...h)=>r.handleCompositionStart&&r.handleCompositionStart(...h)),onCompositionupdate:e[13]||(e[13]=(...h)=>r.handleCompositionUpdate&&r.handleCompositionUpdate(...h)),onCompositionend:e[14]||(e[14]=(...h)=>r.handleCompositionEnd&&r.handleCompositionEnd(...h)),onFocus:e[15]||(e[15]=(...h)=>r.handleFocus&&r.handleFocus(...h)),onBlur:e[16]||(e[16]=(...h)=>r.handleBlur&&r.handleBlur(...h)),onInput:e[17]||(e[17]=(...h)=>r.onInput&&r.onInput(...h)),onKeydown:[e[18]||(e[18]=dr(Mt(h=>r.onKeyboardNavigate("backward"),["stop","prevent"]),["up"])),e[19]||(e[19]=dr(Mt(h=>r.onKeyboardNavigate("forward"),["stop","prevent"]),["down"])),e[20]||(e[20]=dr(Mt((...h)=>r.onKeyboardSelect&&r.onKeyboardSelect(...h),["stop","prevent"]),["enter"])),e[21]||(e[21]=dr(Mt((...h)=>r.handleEsc&&r.handleEsc(...h),["stop","prevent"]),["esc"]))],"onUpdate:modelValue":e[22]||(e[22]=(...h)=>r.onUpdateInputValue&&r.onUpdateInputValue(...h))},null,42,oMe),[[u,r.states.displayInputValue]])],2),r.filterable?(D(),ee("span",{key:0,ref:"calculatorRef","aria-hidden":"true",class:j([r.nsSelectV2.e("selected-item"),r.nsSelectV2.e("input-calculator")]),textContent:$e(r.states.displayInputValue)},null,10,aMe)):Re("v-if",!0)],64)),r.shouldShowPlaceholder?(D(),ee("span",{key:3,class:j([r.nsSelectV2.e("placeholder"),r.nsSelectV2.is("transparent",r.multiple?r.modelValue.length===0:!r.hasModelValue)])},$e(r.currentPlaceholder),3)):Re("v-if",!0),J("span",{class:j(r.nsSelectV2.e("suffix"))},[r.iconComponent?It((D(),Ae(l,{key:0,class:j([r.nsSelectV2.e("caret"),r.nsInput.e("icon"),r.iconReverse])},{default:me(()=>[(D(),Ae(Xt(r.iconComponent)))]),_:1},8,["class"])),[[vr,!r.showClearBtn]]):Re("v-if",!0),r.showClearBtn&&r.clearIcon?(D(),Ae(l,{key:1,class:j([r.nsSelectV2.e("caret"),r.nsInput.e("icon")]),onClick:Mt(r.handleClear,["prevent","stop"])},{default:me(()=>[(D(),Ae(Xt(r.clearIcon)))]),_:1},8,["class","onClick"])):Re("v-if",!0),r.validateState&&r.validateIcon?(D(),Ae(l,{key:2,class:j([r.nsInput.e("icon"),r.nsInput.e("validateIcon")])},{default:me(()=>[(D(),Ae(Xt(r.validateIcon)))]),_:1},8,["class"])):Re("v-if",!0)],2)],2)]),content:me(()=>[ue(c,{ref:"menuRef",data:r.filteredOptions,width:r.popperSize,"hovering-index":r.states.hoveringIndex,"scrollbar-always-on":r.scrollbarAlwaysOn},{default:me(h=>[ze(r.$slots,"default",Ca(V1(h)))]),empty:me(()=>[ze(r.$slots,"empty",{},()=>[J("p",{class:j(r.nsSelectV2.e("empty"))},$e(r.emptyText?r.emptyText:""),3)])]),_:3},8,["data","width","hovering-index","scrollbar-always-on"])]),_:3},8,["visible","teleported","popper-class","popper-options","effect","placement","transition","persistent","onBeforeShow"])],34)),[[d,r.handleClickOutside,r.popperRef]])}var uw=Qe(rMe,[["render",lMe],["__file","/home/runner/work/element-plus/element-plus/packages/components/select-v2/src/select.vue"]]);uw.install=r=>{r.component(uw.name,uw)};const cMe=uw,uMe=cMe,dMe=et({animated:{type:Boolean,default:!1},count:{type:Number,default:1},rows:{type:Number,default:3},loading:{type:Boolean,default:!0},throttle:{type:Number}}),hMe=et({variant:{type:String,values:["circle","rect","h1","h3","text","caption","p","image","button"],default:"text"}}),pMe=xe({name:"ElSkeletonItem"}),fMe=xe({...pMe,props:hMe,setup(r){const e=Ge("skeleton");return(t,i)=>(D(),ee("div",{class:j([y(e).e("item"),y(e).e(t.variant)])},[t.variant==="image"?(D(),Ae(y(Qle),{key:0})):Re("v-if",!0)],2))}});var dw=Qe(fMe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton-item.vue"]]);const mMe=xe({name:"ElSkeleton"}),gMe=xe({...mMe,props:dMe,setup(r,{expose:e}){const t=r,i=Ge("skeleton"),n=She(ai(t,"loading"),t.throttle);return e({uiLoading:n}),(s,o)=>y(n)?(D(),ee("div",qt({key:0,class:[y(i).b(),y(i).is("animated",s.animated)]},s.$attrs),[(D(!0),ee(ct,null,Ut(s.count,a=>(D(),ee(ct,{key:a},[s.loading?ze(s.$slots,"template",{key:a},()=>[ue(dw,{class:j(y(i).is("first")),variant:"p"},null,8,["class"]),(D(!0),ee(ct,null,Ut(s.rows,l=>(D(),Ae(dw,{key:l,class:j([y(i).e("paragraph"),y(i).is("last",l===s.rows&&s.rows>1)]),variant:"p"},null,8,["class"]))),128))]):Re("v-if",!0)],64))),128))],16)):ze(s.$slots,"default",Ca(qt({key:1},s.$attrs)))}});var vMe=Qe(gMe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/skeleton/src/skeleton.vue"]]);const yMe=zt(vMe,{SkeletonItem:dw}),bMe=fi(dw),j5=Symbol("sliderContextKey"),xMe=et({modelValue:{type:Oe([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:jn,inputSize:jn,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:Oe(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},label:{type:String,default:void 0},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:Oe(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:$d,default:"top"},marks:{type:Oe(Object)},validateEvent:{type:Boolean,default:!0}}),OC=r=>Ct(r)||lt(r)&&r.every(Ct),wMe={[Wt]:OC,[As]:OC,[Kr]:OC},_Me=(r,e,t)=>{const i=W();return Et(async()=>{r.range?(Array.isArray(r.modelValue)?(e.firstValue=Math.max(r.min,r.modelValue[0]),e.secondValue=Math.min(r.max,r.modelValue[1])):(e.firstValue=r.min,e.secondValue=r.max),e.oldValue=[e.firstValue,e.secondValue]):(typeof r.modelValue!="number"||Number.isNaN(r.modelValue)?e.firstValue=r.min:e.firstValue=Math.min(r.max,Math.max(r.min,r.modelValue)),e.oldValue=e.firstValue),Qr(window,"resize",t),await ht(),t()}),{sliderWrapper:i}},SMe=r=>I(()=>r.marks?Object.keys(r.marks).map(Number.parseFloat).sort((e,t)=>e-t).filter(e=>e<=r.max&&e>=r.min).map(e=>({point:e,position:(e-r.min)*100/(r.max-r.min),mark:r.marks[e]})):[]),TMe=(r,e,t)=>{const{form:i,formItem:n}=Ns(),s=Vr(),o=W(),a=W(),l={firstButton:o,secondButton:a},c=I(()=>r.disabled||(i==null?void 0:i.disabled)||!1),u=I(()=>Math.min(e.firstValue,e.secondValue)),d=I(()=>Math.max(e.firstValue,e.secondValue)),h=I(()=>r.range?`${100*(d.value-u.value)/(r.max-r.min)}%`:`${100*(e.firstValue-r.min)/(r.max-r.min)}%`),p=I(()=>r.range?`${100*(u.value-r.min)/(r.max-r.min)}%`:"0%"),f=I(()=>r.vertical?{height:r.height}:{}),m=I(()=>r.vertical?{height:h.value,bottom:p.value}:{width:h.value,left:p.value}),g=()=>{s.value&&(e.sliderSize=s.value[`client${r.vertical?"Height":"Width"}`])},v=M=>{const E=r.min+M*(r.max-r.min)/100;if(!r.range)return o;let C;return Math.abs(u.value-E)<Math.abs(d.value-E)?C=e.firstValue<e.secondValue?"firstButton":"secondButton":C=e.firstValue>e.secondValue?"firstButton":"secondButton",l[C]},x=M=>{const E=v(M);return E.value.setPosition(M),E},b=M=>{e.firstValue=M,_(r.range?[u.value,d.value]:M)},w=M=>{e.secondValue=M,r.range&&_([u.value,d.value])},_=M=>{t(Wt,M),t(As,M)},S=async()=>{await ht(),t(Kr,r.range?[u.value,d.value]:r.modelValue)},T=M=>{var E,C,P,A,N,R;if(c.value||e.dragging)return;g();let F=0;if(r.vertical){const B=(P=(C=(E=M.touches)==null?void 0:E.item(0))==null?void 0:C.clientY)!=null?P:M.clientY;F=(s.value.getBoundingClientRect().bottom-B)/e.sliderSize*100}else{const B=(R=(N=(A=M.touches)==null?void 0:A.item(0))==null?void 0:N.clientX)!=null?R:M.clientX,k=s.value.getBoundingClientRect().left;F=(B-k)/e.sliderSize*100}if(!(F<0||F>100))return x(F)};return{elFormItem:n,slider:s,firstButton:o,secondButton:a,sliderDisabled:c,minValue:u,maxValue:d,runwayStyle:f,barStyle:m,resetSize:g,setPosition:x,emitChange:S,onSliderWrapperPrevent:M=>{var E,C;((E=l.firstButton.value)!=null&&E.dragging||(C=l.secondButton.value)!=null&&C.dragging)&&M.preventDefault()},onSliderClick:M=>{T(M)&&S()},onSliderDown:async M=>{const E=T(M);E&&(await ht(),E.value.onButtonDown(M))},setFirstValue:b,setSecondValue:w}},{left:MMe,down:EMe,right:CMe,up:AMe,home:NMe,end:RMe,pageUp:kMe,pageDown:LMe}=bt,OMe=(r,e,t)=>{const i=W(),n=W(!1),s=I(()=>e.value instanceof Function),o=I(()=>s.value&&e.value(r.modelValue)||r.modelValue),a=Es(()=>{t.value&&(n.value=!0)},50),l=Es(()=>{t.value&&(n.value=!1)},50);return{tooltip:i,tooltipVisible:n,formatValue:o,displayTooltip:a,hideTooltip:l}},PMe=(r,e,t)=>{const{disabled:i,min:n,max:s,step:o,showTooltip:a,precision:l,sliderSize:c,formatTooltip:u,emitChange:d,resetSize:h,updateDragging:p}=ut(j5),{tooltip:f,tooltipVisible:m,formatValue:g,displayTooltip:v,hideTooltip:x}=OMe(r,u,a),b=W(),w=I(()=>`${(r.modelValue-n.value)/(s.value-n.value)*100}%`),_=I(()=>r.vertical?{bottom:w.value}:{left:w.value}),S=()=>{e.hovering=!0,v()},T=()=>{e.hovering=!1,e.dragging||x()},M=G=>{i.value||(G.preventDefault(),z(G),window.addEventListener("mousemove",O),window.addEventListener("touchmove",O),window.addEventListener("mouseup",V),window.addEventListener("touchend",V),window.addEventListener("contextmenu",V),b.value.focus())},E=G=>{i.value||(e.newPosition=Number.parseFloat(w.value)+G/(s.value-n.value)*100,U(e.newPosition),d())},C=()=>{E(-o.value)},P=()=>{E(o.value)},A=()=>{E(-o.value*4)},N=()=>{E(o.value*4)},R=()=>{i.value||(U(0),d())},F=()=>{i.value||(U(100),d())},B=G=>{let X=!0;[MMe,EMe].includes(G.key)?C():[CMe,AMe].includes(G.key)?P():G.key===NMe?R():G.key===RMe?F():G.key===LMe?A():G.key===kMe?N():X=!1,X&&G.preventDefault()},k=G=>{let X,ie;return G.type.startsWith("touch")?(ie=G.touches[0].clientY,X=G.touches[0].clientX):(ie=G.clientY,X=G.clientX),{clientX:X,clientY:ie}},z=G=>{e.dragging=!0,e.isClick=!0;const{clientX:X,clientY:ie}=k(G);r.vertical?e.startY=ie:e.startX=X,e.startPosition=Number.parseFloat(w.value),e.newPosition=e.startPosition},O=G=>{if(e.dragging){e.isClick=!1,v(),h();let X;const{clientX:ie,clientY:se}=k(G);r.vertical?(e.currentY=se,X=(e.startY-e.currentY)/c.value*100):(e.currentX=ie,X=(e.currentX-e.startX)/c.value*100),e.newPosition=e.startPosition+X,U(e.newPosition)}},V=()=>{e.dragging&&(setTimeout(()=>{e.dragging=!1,e.hovering||x(),e.isClick||U(e.newPosition),d()},0),window.removeEventListener("mousemove",O),window.removeEventListener("touchmove",O),window.removeEventListener("mouseup",V),window.removeEventListener("touchend",V),window.removeEventListener("contextmenu",V))},U=async G=>{if(G===null||Number.isNaN(+G))return;G<0?G=0:G>100&&(G=100);const X=100/((s.value-n.value)/o.value);let ie=Math.round(G/X)*X*(s.value-n.value)*.01+n.value;ie=Number.parseFloat(ie.toFixed(l.value)),ie!==r.modelValue&&t(Wt,ie),!e.dragging&&r.modelValue!==e.oldValue&&(e.oldValue=r.modelValue),await ht(),e.dragging&&v(),f.value.updatePopper()};return Ve(()=>e.dragging,G=>{p(G)}),{disabled:i,button:b,tooltip:f,tooltipVisible:m,showTooltip:a,wrapperStyle:_,formatValue:g,handleMouseEnter:S,handleMouseLeave:T,onButtonDown:M,onKeyDown:B,setPosition:U}},IMe=(r,e,t,i)=>({stops:I(()=>{if(!r.showStops||r.min>r.max)return[];if(r.step===0)return[];const n=(r.max-r.min)/r.step,s=100*r.step/(r.max-r.min),o=Array.from({length:n-1}).map((a,l)=>(l+1)*s);return r.range?o.filter(a=>a<100*(t.value-r.min)/(r.max-r.min)||a>100*(i.value-r.min)/(r.max-r.min)):o.filter(a=>a>100*(e.firstValue-r.min)/(r.max-r.min))}),getStopStyle:n=>r.vertical?{bottom:`${n}%`}:{left:`${n}%`}}),DMe=(r,e,t,i,n,s)=>{const o=c=>{n(Wt,c),n(As,c)},a=()=>r.range?![t.value,i.value].every((c,u)=>c===e.oldValue[u]):r.modelValue!==e.oldValue,l=()=>{var c,u;r.min>r.max&&ji("Slider","min should not be greater than max.");const d=r.modelValue;r.range&&Array.isArray(d)?d[1]<r.min?o([r.min,r.min]):d[0]>r.max?o([r.max,r.max]):d[0]<r.min?o([r.min,d[1]]):d[1]>r.max?o([d[0],r.max]):(e.firstValue=d[0],e.secondValue=d[1],a()&&(r.validateEvent&&((c=s==null?void 0:s.validate)==null||c.call(s,"change").catch(h=>{})),e.oldValue=d.slice())):!r.range&&typeof d=="number"&&!Number.isNaN(d)&&(d<r.min?o(r.min):d>r.max?o(r.max):(e.firstValue=d,a()&&(r.validateEvent&&((u=s==null?void 0:s.validate)==null||u.call(s,"change").catch(h=>{})),e.oldValue=d)))};l(),Ve(()=>e.dragging,c=>{c||l()}),Ve(()=>r.modelValue,(c,u)=>{e.dragging||Array.isArray(c)&&Array.isArray(u)&&c.every((d,h)=>d===u[h])&&e.firstValue===c[0]&&e.secondValue===c[1]||l()},{deep:!0}),Ve(()=>[r.min,r.max],()=>{l()})},UMe=et({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:$d,default:"top"}}),FMe={[Wt]:r=>Ct(r)},BMe=["tabindex"],zMe=xe({name:"ElSliderButton"}),VMe=xe({...zMe,props:UMe,emits:FMe,setup(r,{expose:e,emit:t}){const i=r,n=Ge("slider"),s=br({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:i.modelValue}),{disabled:o,button:a,tooltip:l,showTooltip:c,tooltipVisible:u,wrapperStyle:d,formatValue:h,handleMouseEnter:p,handleMouseLeave:f,onButtonDown:m,onKeyDown:g,setPosition:v}=PMe(i,s,t),{hovering:x,dragging:b}=fn(s);return e({onButtonDown:m,onKeyDown:g,setPosition:v,hovering:x,dragging:b}),(w,_)=>(D(),ee("div",{ref_key:"button",ref:a,class:j([y(n).e("button-wrapper"),{hover:y(x),dragging:y(b)}]),style:pt(y(d)),tabindex:y(o)?-1:0,onMouseenter:_[0]||(_[0]=(...S)=>y(p)&&y(p)(...S)),onMouseleave:_[1]||(_[1]=(...S)=>y(f)&&y(f)(...S)),onMousedown:_[2]||(_[2]=(...S)=>y(m)&&y(m)(...S)),onTouchstart:_[3]||(_[3]=(...S)=>y(m)&&y(m)(...S)),onFocus:_[4]||(_[4]=(...S)=>y(p)&&y(p)(...S)),onBlur:_[5]||(_[5]=(...S)=>y(f)&&y(f)(...S)),onKeydown:_[6]||(_[6]=(...S)=>y(g)&&y(g)(...S))},[ue(y(Rs),{ref_key:"tooltip",ref:l,visible:y(u),placement:w.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":w.tooltipClass,disabled:!y(c),persistent:""},{content:me(()=>[J("span",null,$e(y(h)),1)]),default:me(()=>[J("div",{class:j([y(n).e("button"),{hover:y(x),dragging:y(b)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled"])],46,BMe))}});var H5=Qe(VMe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/button.vue"]]);const GMe=et({mark:{type:Oe([String,Object]),default:void 0}});var jMe=xe({name:"ElSliderMarker",props:GMe,setup(r){const e=Ge("slider"),t=I(()=>kt(r.mark)?r.mark:r.mark.label),i=I(()=>kt(r.mark)?void 0:r.mark.style);return()=>yt("div",{class:e.e("marks-text"),style:i.value},t.value)}});const HMe=["id","role","aria-label","aria-labelledby"],WMe={key:1},$Me=xe({name:"ElSlider"}),XMe=xe({...$Me,props:xMe,emits:wMe,setup(r,{expose:e,emit:t}){const i=r,n=Ge("slider"),{t:s}=pr(),o=br({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:a,slider:l,firstButton:c,secondButton:u,sliderDisabled:d,minValue:h,maxValue:p,runwayStyle:f,barStyle:m,resetSize:g,emitChange:v,onSliderWrapperPrevent:x,onSliderClick:b,onSliderDown:w,setFirstValue:_,setSecondValue:S}=TMe(i,o,t),{stops:T,getStopStyle:M}=IMe(i,o,h,p),{inputId:E,isLabeledByFormItem:C}=vu(i,{formItemContext:a}),P=Hi(),A=I(()=>i.inputSize||P.value),N=I(()=>i.label||s("el.slider.defaultLabel",{min:i.min,max:i.max})),R=I(()=>i.range?i.rangeStartLabel||s("el.slider.defaultRangeStartLabel"):N.value),F=I(()=>i.formatValueText?i.formatValueText(G.value):`${G.value}`),B=I(()=>i.rangeEndLabel||s("el.slider.defaultRangeEndLabel")),k=I(()=>i.formatValueText?i.formatValueText(X.value):`${X.value}`),z=I(()=>[n.b(),n.m(P.value),n.is("vertical",i.vertical),{[n.m("with-input")]:i.showInput}]),O=SMe(i);DMe(i,o,h,p,t,a);const V=I(()=>{const de=[i.min,i.max,i.step].map(K=>{const q=`${K}`.split(".")[1];return q?q.length:0});return Math.max.apply(null,de)}),{sliderWrapper:U}=_Me(i,o,g),{firstValue:G,secondValue:X,sliderSize:ie}=fn(o),se=de=>{o.dragging=de};return Yt(j5,{...fn(i),sliderSize:ie,disabled:d,precision:V,emitChange:v,resetSize:g,updateDragging:se}),e({onSliderClick:b}),(de,K)=>{var q,ce;return D(),ee("div",{id:de.range?y(E):void 0,ref_key:"sliderWrapper",ref:U,class:j(y(z)),role:de.range?"group":void 0,"aria-label":de.range&&!y(C)?y(N):void 0,"aria-labelledby":de.range&&y(C)?(q=y(a))==null?void 0:q.labelId:void 0,onTouchstart:K[2]||(K[2]=(...Te)=>y(x)&&y(x)(...Te)),onTouchmove:K[3]||(K[3]=(...Te)=>y(x)&&y(x)(...Te))},[J("div",{ref_key:"slider",ref:l,class:j([y(n).e("runway"),{"show-input":de.showInput&&!de.range},y(n).is("disabled",y(d))]),style:pt(y(f)),onMousedown:K[0]||(K[0]=(...Te)=>y(w)&&y(w)(...Te)),onTouchstart:K[1]||(K[1]=(...Te)=>y(w)&&y(w)(...Te))},[J("div",{class:j(y(n).e("bar")),style:pt(y(m))},null,6),ue(H5,{id:de.range?void 0:y(E),ref_key:"firstButton",ref:c,"model-value":y(G),vertical:de.vertical,"tooltip-class":de.tooltipClass,placement:de.placement,role:"slider","aria-label":de.range||!y(C)?y(R):void 0,"aria-labelledby":!de.range&&y(C)?(ce=y(a))==null?void 0:ce.labelId:void 0,"aria-valuemin":de.min,"aria-valuemax":de.range?y(X):de.max,"aria-valuenow":y(G),"aria-valuetext":y(F),"aria-orientation":de.vertical?"vertical":"horizontal","aria-disabled":y(d),"onUpdate:modelValue":y(_)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),de.range?(D(),Ae(H5,{key:0,ref_key:"secondButton",ref:u,"model-value":y(X),vertical:de.vertical,"tooltip-class":de.tooltipClass,placement:de.placement,role:"slider","aria-label":y(B),"aria-valuemin":y(G),"aria-valuemax":de.max,"aria-valuenow":y(X),"aria-valuetext":y(k),"aria-orientation":de.vertical?"vertical":"horizontal","aria-disabled":y(d),"onUpdate:modelValue":y(S)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):Re("v-if",!0),de.showStops?(D(),ee("div",WMe,[(D(!0),ee(ct,null,Ut(y(T),(Te,Z)=>(D(),ee("div",{key:Z,class:j(y(n).e("stop")),style:pt(y(M)(Te))},null,6))),128))])):Re("v-if",!0),y(O).length>0?(D(),ee(ct,{key:2},[J("div",null,[(D(!0),ee(ct,null,Ut(y(O),(Te,Z)=>(D(),ee("div",{key:Z,style:pt(y(M)(Te.position)),class:j([y(n).e("stop"),y(n).e("marks-stop")])},null,6))),128))]),J("div",{class:j(y(n).e("marks"))},[(D(!0),ee(ct,null,Ut(y(O),(Te,Z)=>(D(),Ae(y(jMe),{key:Z,mark:Te.mark,style:pt(y(M)(Te.position))},null,8,["mark","style"]))),128))],2)],64)):Re("v-if",!0)],38),de.showInput&&!de.range?(D(),Ae(y(o5),{key:0,ref:"input","model-value":y(G),class:j(y(n).e("input")),step:de.step,disabled:y(d),controls:de.showInputControls,min:de.min,max:de.max,debounce:de.debounce,size:y(A),"onUpdate:modelValue":y(_),onChange:y(v)},null,8,["model-value","class","step","disabled","controls","min","max","debounce","size","onUpdate:modelValue","onChange"])):Re("v-if",!0)],42,HMe)}}});var qMe=Qe(XMe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/slider/src/slider.vue"]]);const KMe=zt(qMe),YMe=et({prefixCls:{type:String}}),W5=xe({name:"ElSpaceItem",props:YMe,setup(r,{slots:e}){const t=Ge("space"),i=I(()=>`${r.prefixCls||t.b()}__item`);return()=>yt("div",{class:i.value},ze(e,"default"))}}),$5={small:8,default:12,large:16};function ZMe(r){const e=Ge("space"),t=I(()=>[e.b(),e.m(r.direction),r.class]),i=W(0),n=W(0),s=I(()=>{const a=r.wrap||r.fill?{flexWrap:"wrap",marginBottom:`-${n.value}px`}:{},l={alignItems:r.alignment};return[a,l,r.style]}),o=I(()=>{const a={paddingBottom:`${n.value}px`,marginRight:`${i.value}px`},l=r.fill?{flexGrow:1,minWidth:`${r.fillRatio}%`}:{};return[a,l]});return wo(()=>{const{size:a="small",wrap:l,direction:c,fill:u}=r;if(lt(a)){const[d=0,h=0]=a;i.value=d,n.value=h}else{let d;Ct(a)?d=a:d=$5[a||"small"]||$5.small,(l||u)&&c==="horizontal"?i.value=n.value=d:c==="horizontal"?(i.value=d,n.value=0):(n.value=d,i.value=0)}}),{classes:t,containerStyle:s,itemStyle:o}}const JMe=et({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},class:{type:Oe([String,Object,Array]),default:""},style:{type:Oe([String,Array,Object]),default:""},alignment:{type:Oe(String),default:"center"},prefixCls:{type:String},spacer:{type:Oe([Object,String,Number,Array]),default:null,validator:r=>ei(r)||Ct(r)||kt(r)},wrap:Boolean,fill:Boolean,fillRatio:{type:Number,default:100},size:{type:[String,Array,Number],values:yl,validator:r=>Ct(r)||lt(r)&&r.length===2&&r.every(Ct)}}),QMe=xe({name:"ElSpace",props:JMe,setup(r,{slots:e}){const{classes:t,containerStyle:i,itemStyle:n}=ZMe(r);function s(o,a="",l=[]){const{prefixCls:c}=r;return o.forEach((u,d)=>{eE(u)?lt(u.children)&&u.children.forEach((h,p)=>{eE(h)&&lt(h.children)?s(h.children,`${a+p}-`,l):l.push(ue(W5,{style:n.value,prefixCls:c,key:`nested-${a+p}`},{default:()=>[h]},ea.PROPS|ea.STYLE,["style","prefixCls"]))}):lde(u)&&l.push(ue(W5,{style:n.value,prefixCls:c,key:`LoopKey${a+d}`},{default:()=>[u]},ea.PROPS|ea.STYLE,["style","prefixCls"]))}),l}return()=>{var o;const{spacer:a,direction:l}=r,c=ze(e,"default",{key:0},()=>[]);if(((o=c.children)!=null?o:[]).length===0)return null;if(lt(c.children)){let u=s(c.children);if(a){const d=u.length-1;u=u.reduce((h,p,f)=>{const m=[...h,p];return f!==d&&m.push(ue("span",{style:[n.value,l==="vertical"?"width: 100%":null],key:f},[ei(a)?a:ir(a,ea.TEXT)],ea.STYLE)),m},[])}return ue("div",{class:t.value,style:i.value},u,ea.STYLE|ea.CLASS)}return c.children}}}),eEe=zt(QMe),tEe=et({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:Oe([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:Oe([String,Object,Array])}}),rEe=xe({name:"ElStatistic"}),iEe=xe({...rEe,props:tEe,setup(r,{expose:e}){const t=r,i=Ge("statistic"),n=I(()=>{const{value:s,formatter:o,precision:a,decimalSeparator:l,groupSeparator:c}=t;if(Nt(o))return o(s);if(!Ct(s))return s;let[u,d=""]=String(s).split(".");return d=d.padEnd(a,"0").slice(0,a>0?a:0),u=u.replace(/\B(?=(\d{3})+(?!\d))/g,c),[u,d].join(d?l:"")});return e({displayValue:n}),(s,o)=>(D(),ee("div",{class:j(y(i).b())},[s.$slots.title||s.title?(D(),ee("div",{key:0,class:j(y(i).e("head"))},[ze(s.$slots,"title",{},()=>[ir($e(s.title),1)])],2)):Re("v-if",!0),J("div",{class:j(y(i).e("content"))},[s.$slots.prefix||s.prefix?(D(),ee("div",{key:0,class:j(y(i).e("prefix"))},[ze(s.$slots,"prefix",{},()=>[J("span",null,$e(s.prefix),1)])],2)):Re("v-if",!0),J("span",{class:j(y(i).e("number")),style:pt(s.valueStyle)},$e(y(n)),7),s.$slots.suffix||s.suffix?(D(),ee("div",{key:1,class:j(y(i).e("suffix"))},[ze(s.$slots,"suffix",{},()=>[J("span",null,$e(s.suffix),1)])],2)):Re("v-if",!0)],2)],2))}});var nEe=Qe(iEe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/statistic/src/statistic.vue"]]);const X5=zt(nEe),sEe=et({format:{type:String,default:"HH:mm:ss"},prefix:String,suffix:String,title:String,value:{type:Oe([Number,Object]),default:0},valueStyle:{type:Oe([String,Object,Array])}}),oEe={finish:()=>!0,[Kr]:r=>Ct(r)},aEe=[["Y",1e3*60*60*24*365],["M",1e3*60*60*24*30],["D",1e3*60*60*24],["H",1e3*60*60],["m",1e3*60],["s",1e3],["S",1]],q5=r=>Ct(r)?new Date(r).getTime():r.valueOf(),K5=(r,e)=>{let t=r;const i=/\[([^\]]*)]/g;return aEe.reduce((n,[s,o])=>{const a=new RegExp(`${s}+(?![^\\[\\]]*\\])`,"g");if(a.test(n)){const l=Math.floor(t/o);return t-=l*o,n.replace(a,c=>String(l).padStart(c.length,"0"))}return n},e).replace(i,"$1")},lEe=xe({name:"ElCountdown"}),cEe=xe({...lEe,props:sEe,emits:oEe,setup(r,{expose:e,emit:t}){const i=r;let n;const s=W(q5(i.value)-Date.now()),o=I(()=>K5(s.value,i.format)),a=u=>K5(u,i.format),l=()=>{n&&(mx(n),n=void 0)},c=()=>{const u=q5(i.value),d=()=>{let h=u-Date.now();t("change",h),h<=0?(h=0,l(),t("finish")):n=ff(d),s.value=h};n=ff(d)};return Ve(()=>[i.value,i.format],()=>{l(),c()},{immediate:!0}),Zr(()=>{l()}),e({displayValue:o}),(u,d)=>(D(),Ae(y(X5),{value:s.value,title:u.title,prefix:u.prefix,suffix:u.suffix,"value-style":u.valueStyle,formatter:a},Zl({_:2},[Ut(u.$slots,(h,p)=>({name:p,fn:me(()=>[ze(u.$slots,p)])}))]),1032,["value","title","prefix","suffix","value-style"]))}});var uEe=Qe(cEe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/countdown/src/countdown.vue"]]);const dEe=zt(uEe),hEe=et({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),pEe={[Kr]:(r,e)=>[r,e].every(Ct)},fEe=xe({name:"ElSteps"}),mEe=xe({...fEe,props:hEe,emits:pEe,setup(r,{emit:e}){const t=r,i=Ge("steps"),{children:n,addChild:s,removeChild:o}=yE(Dt(),"ElStep");return Ve(n,()=>{n.value.forEach((a,l)=>{a.setIndex(l)})}),Yt("ElSteps",{props:t,steps:n,addStep:s,removeStep:o}),Ve(()=>t.active,(a,l)=>{e(Kr,a,l)}),(a,l)=>(D(),ee("div",{class:j([y(i).b(),y(i).m(a.simple?"simple":a.direction)])},[ze(a.$slots,"default")],2))}});var gEe=Qe(mEe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/steps.vue"]]);const vEe=et({title:{type:String,default:""},icon:{type:Gr},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),yEe=xe({name:"ElStep"}),bEe=xe({...yEe,props:vEe,setup(r){const e=r,t=Ge("step"),i=W(-1),n=W({}),s=W(""),o=ut("ElSteps"),a=Dt();Et(()=>{Ve([()=>o.props.active,()=>o.props.processStatus,()=>o.props.finishStatus],([S])=>{w(S)},{immediate:!0})}),Zr(()=>{o.removeStep(_.uid)});const l=I(()=>e.status||s.value),c=I(()=>{const S=o.steps.value[i.value-1];return S?S.currentStatus:"wait"}),u=I(()=>o.props.alignCenter),d=I(()=>o.props.direction==="vertical"),h=I(()=>o.props.simple),p=I(()=>o.steps.value.length),f=I(()=>{var S;return((S=o.steps.value[p.value-1])==null?void 0:S.uid)===(a==null?void 0:a.uid)}),m=I(()=>h.value?"":o.props.space),g=I(()=>[t.b(),t.is(h.value?"simple":o.props.direction),t.is("flex",f.value&&!m.value&&!u.value),t.is("center",u.value&&!d.value&&!h.value)]),v=I(()=>{const S={flexBasis:Ct(m.value)?`${m.value}px`:m.value?m.value:`${100/(p.value-(u.value?0:1))}%`};return d.value||f.value&&(S.maxWidth=`${100/p.value}%`),S}),x=S=>{i.value=S},b=S=>{const T=S==="wait",M={transitionDelay:`${T?"-":""}${150*i.value}ms`},E=S===o.props.processStatus||T?0:100;M.borderWidth=E&&!h.value?"1px":0,M[o.props.direction==="vertical"?"height":"width"]=`${E}%`,n.value=M},w=S=>{S>i.value?s.value=o.props.finishStatus:S===i.value&&c.value!=="error"?s.value=o.props.processStatus:s.value="wait";const T=o.steps.value[i.value-1];T&&T.calcProgress(s.value)},_=br({uid:a.uid,currentStatus:l,setIndex:x,calcProgress:b});return o.addStep(_),(S,T)=>(D(),ee("div",{style:pt(y(v)),class:j(y(g))},[Re(" icon & line "),J("div",{class:j([y(t).e("head"),y(t).is(y(l))])},[y(h)?Re("v-if",!0):(D(),ee("div",{key:0,class:j(y(t).e("line"))},[J("i",{class:j(y(t).e("line-inner")),style:pt(n.value)},null,6)],2)),J("div",{class:j([y(t).e("icon"),y(t).is(S.icon||S.$slots.icon?"icon":"text")])},[ze(S.$slots,"icon",{},()=>[S.icon?(D(),Ae(y(dt),{key:0,class:j(y(t).e("icon-inner"))},{default:me(()=>[(D(),Ae(Xt(S.icon)))]),_:1},8,["class"])):y(l)==="success"?(D(),Ae(y(dt),{key:1,class:j([y(t).e("icon-inner"),y(t).is("status")])},{default:me(()=>[ue(y(Dv))]),_:1},8,["class"])):y(l)==="error"?(D(),Ae(y(dt),{key:2,class:j([y(t).e("icon-inner"),y(t).is("status")])},{default:me(()=>[ue(y(Pa))]),_:1},8,["class"])):y(h)?Re("v-if",!0):(D(),ee("div",{key:3,class:j(y(t).e("icon-inner"))},$e(i.value+1),3))])],2)],2),Re(" title & description "),J("div",{class:j(y(t).e("main"))},[J("div",{class:j([y(t).e("title"),y(t).is(y(l))])},[ze(S.$slots,"title",{},()=>[ir($e(S.title),1)])],2),y(h)?(D(),ee("div",{key:0,class:j(y(t).e("arrow"))},null,2)):(D(),ee("div",{key:1,class:j([y(t).e("description"),y(t).is(y(l))])},[ze(S.$slots,"description",{},()=>[ir($e(S.description),1)])],2))],2)],6))}});var Y5=Qe(bEe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/item.vue"]]);const xEe=zt(gEe,{Step:Y5}),wEe=fi(Y5),_Ee=et({modelValue:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,validator:px},width:{type:[String,Number],default:""},inlinePrompt:{type:Boolean,default:!1},inactiveActionIcon:{type:Gr},activeActionIcon:{type:Gr},activeIcon:{type:Gr},inactiveIcon:{type:Gr},activeText:{type:String,default:""},inactiveText:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},borderColor:{type:String,default:""},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},beforeChange:{type:Oe(Function)},id:String,tabindex:{type:[String,Number]},value:{type:[Boolean,String,Number],default:!1}}),SEe={[Wt]:r=>Gi(r)||kt(r)||Ct(r),[Kr]:r=>Gi(r)||kt(r)||Ct(r),[As]:r=>Gi(r)||kt(r)||Ct(r)},TEe=["onClick"],MEe=["id","aria-checked","aria-disabled","name","true-value","false-value","disabled","tabindex","onKeydown"],EEe=["aria-hidden"],CEe=["aria-hidden"],AEe=["aria-hidden"],PC="ElSwitch",NEe=xe({name:PC}),REe=xe({...NEe,props:_Ee,emits:SEe,setup(r,{expose:e,emit:t}){const i=r,n=Dt(),{formItem:s}=Ns(),o=Hi(),a=Ge("switch");(T=>{T.forEach(M=>{bl({from:M[0],replacement:M[1],scope:PC,version:"2.3.0",ref:"https://element-plus.org/en-US/component/switch.html#attributes",type:"Attribute"},I(()=>{var E;return!!((E=n.vnode.props)!=null&&E[M[2]])}))})})([['"value"','"model-value" or "v-model"',"value"],['"active-color"',"CSS var `--el-switch-on-color`","activeColor"],['"inactive-color"',"CSS var `--el-switch-off-color`","inactiveColor"],['"border-color"',"CSS var `--el-switch-border-color`","borderColor"]]);const{inputId:l}=vu(i,{formItemContext:s}),c=Ys(I(()=>i.loading)),u=W(i.modelValue!==!1),d=W(),h=W(),p=I(()=>[a.b(),a.m(o.value),a.is("disabled",c.value),a.is("checked",x.value)]),f=I(()=>[a.e("label"),a.em("label","left"),a.is("active",!x.value)]),m=I(()=>[a.e("label"),a.em("label","right"),a.is("active",x.value)]),g=I(()=>({width:Ti(i.width)}));Ve(()=>i.modelValue,()=>{u.value=!0}),Ve(()=>i.value,()=>{u.value=!1});const v=I(()=>u.value?i.modelValue:i.value),x=I(()=>v.value===i.activeValue);[i.activeValue,i.inactiveValue].includes(v.value)||(t(Wt,i.inactiveValue),t(Kr,i.inactiveValue),t(As,i.inactiveValue)),Ve(x,T=>{var M;d.value.checked=T,i.validateEvent&&((M=s==null?void 0:s.validate)==null||M.call(s,"change").catch(E=>{}))});const b=()=>{const T=x.value?i.inactiveValue:i.activeValue;t(Wt,T),t(Kr,T),t(As,T),ht(()=>{d.value.checked=x.value})},w=()=>{if(c.value)return;const{beforeChange:T}=i;if(!T){b();return}const M=T();[$g(M),Gi(M)].includes(!0)||ji(PC,"beforeChange must return type `Promise<boolean>` or `boolean`"),$g(M)?M.then(E=>{E&&b()}).catch(E=>{}):M&&b()},_=I(()=>a.cssVarBlock({...i.activeColor?{"on-color":i.activeColor}:null,...i.inactiveColor?{"off-color":i.inactiveColor}:null,...i.borderColor?{"border-color":i.borderColor}:null})),S=()=>{var T,M;(M=(T=d.value)==null?void 0:T.focus)==null||M.call(T)};return Et(()=>{d.value.checked=x.value}),e({focus:S,checked:x}),(T,M)=>(D(),ee("div",{class:j(y(p)),style:pt(y(_)),onClick:Mt(w,["prevent"])},[J("input",{id:y(l),ref_key:"input",ref:d,class:j(y(a).e("input")),type:"checkbox",role:"switch","aria-checked":y(x),"aria-disabled":y(c),name:T.name,"true-value":T.activeValue,"false-value":T.inactiveValue,disabled:y(c),tabindex:T.tabindex,onChange:b,onKeydown:dr(w,["enter"])},null,42,MEe),!T.inlinePrompt&&(T.inactiveIcon||T.inactiveText)?(D(),ee("span",{key:0,class:j(y(f))},[T.inactiveIcon?(D(),Ae(y(dt),{key:0},{default:me(()=>[(D(),Ae(Xt(T.inactiveIcon)))]),_:1})):Re("v-if",!0),!T.inactiveIcon&&T.inactiveText?(D(),ee("span",{key:1,"aria-hidden":y(x)},$e(T.inactiveText),9,EEe)):Re("v-if",!0)],2)):Re("v-if",!0),J("span",{ref_key:"core",ref:h,class:j(y(a).e("core")),style:pt(y(g))},[T.inlinePrompt?(D(),ee("div",{key:0,class:j(y(a).e("inner"))},[T.activeIcon||T.inactiveIcon?(D(),Ae(y(dt),{key:0,class:j(y(a).is("icon"))},{default:me(()=>[(D(),Ae(Xt(y(x)?T.activeIcon:T.inactiveIcon)))]),_:1},8,["class"])):T.activeText||T.inactiveText?(D(),ee("span",{key:1,class:j(y(a).is("text")),"aria-hidden":!y(x)},$e(y(x)?T.activeText:T.inactiveText),11,CEe)):Re("v-if",!0)],2)):Re("v-if",!0),J("div",{class:j(y(a).e("action"))},[T.loading?(D(),Ae(y(dt),{key:0,class:j(y(a).is("loading"))},{default:me(()=>[ue(y(du))]),_:1},8,["class"])):T.activeActionIcon&&y(x)?(D(),Ae(y(dt),{key:1},{default:me(()=>[(D(),Ae(Xt(T.activeActionIcon)))]),_:1})):T.inactiveActionIcon&&!y(x)?(D(),Ae(y(dt),{key:2},{default:me(()=>[(D(),Ae(Xt(T.inactiveActionIcon)))]),_:1})):Re("v-if",!0)],2)],6),!T.inlinePrompt&&(T.activeIcon||T.activeText)?(D(),ee("span",{key:1,class:j(y(m))},[T.activeIcon?(D(),Ae(y(dt),{key:0},{default:me(()=>[(D(),Ae(Xt(T.activeIcon)))]),_:1})):Re("v-if",!0),!T.activeIcon&&T.activeText?(D(),ee("span",{key:1,"aria-hidden":!y(x)},$e(T.activeText),9,AEe)):Re("v-if",!0)],2)):Re("v-if",!0)],14,TEe))}});var kEe=Qe(REe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/switch/src/switch.vue"]]);const LEe=zt(kEe);var OEe=/["'&<>]/,PEe=IEe;function IEe(r){var e=""+r,t=OEe.exec(e);if(!t)return e;var i,n="",s=0,o=0;for(s=t.index;s<e.length;s++){switch(e.charCodeAt(s)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#39;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}o!==s&&(n+=e.substring(o,s)),o=s+1,n+=i}return o!==s?n+e.substring(o,s):n}const DEe=Tl(PEe),IC=function(r){var e;return(e=r.target)==null?void 0:e.closest("td")},UEe=function(r,e,t,i,n){if(!e&&!i&&(!n||Array.isArray(n)&&!n.length))return r;typeof t=="string"?t=t==="descending"?-1:1:t=t&&t<0?-1:1;const s=i?null:function(a,l){return n?(Array.isArray(n)||(n=[n]),n.map(c=>typeof c=="string"?ti(a,c):c(a,l,r))):(e!=="$key"&&Ht(a)&&"$value"in a&&(a=a.$value),[Ht(a)?ti(a,e):a])},o=function(a,l){if(i)return i(a.value,l.value);for(let c=0,u=a.key.length;c<u;c++){if(a.key[c]<l.key[c])return-1;if(a.key[c]>l.key[c])return 1}return 0};return r.map((a,l)=>({value:a,index:l,key:s?s(a,l):null})).sort((a,l)=>{let c=o(a,l);return c||(c=a.index-l.index),c*+t}).map(a=>a.value)},Z5=function(r,e){let t=null;return r.columns.forEach(i=>{i.id===e&&(t=i)}),t},FEe=function(r,e){let t=null;for(let i=0;i<r.columns.length;i++){const n=r.columns[i];if(n.columnKey===e){t=n;break}}return t||ji("ElTable",`No column matching with column-key: ${e}`),t},J5=function(r,e,t){const i=(e.className||"").match(new RegExp(`${t}-table_[^\\s]+`,"gm"));return i?Z5(r,i[0]):null},$n=(r,e)=>{if(!r)throw new Error("Row is required when get row identity");if(typeof e=="string"){if(!e.includes("."))return`${r[e]}`;const t=e.split(".");let i=r;for(const n of t)i=i[n];return`${i}`}else if(typeof e=="function")return e.call(null,r)},ih=function(r,e){const t={};return(r||[]).forEach((i,n)=>{t[$n(i,e)]={row:i,index:n}}),t};function BEe(r,e){const t={};let i;for(i in r)t[i]=r[i];for(i in e)if(er(e,i)){const n=e[i];typeof n<"u"&&(t[i]=n)}return t}function DC(r){return r===""||r!==void 0&&(r=Number.parseInt(r,10),Number.isNaN(r)&&(r="")),r}function Q5(r){return r===""||r!==void 0&&(r=DC(r),Number.isNaN(r)&&(r=80)),r}function zEe(r){return typeof r=="number"?r:typeof r=="string"?/^\d+(?:px)?$/.test(r)?Number.parseInt(r,10):r:null}function VEe(...r){return r.length===0?e=>e:r.length===1?r[0]:r.reduce((e,t)=>(...i)=>e(t(...i)))}function c0(r,e,t){let i=!1;const n=r.indexOf(e),s=n!==-1,o=a=>{a==="add"?r.push(e):r.splice(n,1),i=!0,lt(e.children)&&e.children.forEach(l=>{c0(r,l,t??!s)})};return Gi(t)?t&&!s?o("add"):!t&&s&&o("remove"):o(s?"remove":"add"),i}function GEe(r,e,t="children",i="hasChildren"){const n=o=>!(Array.isArray(o)&&o.length);function s(o,a,l){e(o,a,l),a.forEach(c=>{if(c[i]){e(c,null,l+1);return}const u=c[t];n(u)||s(c,u,l+1)})}r.forEach(o=>{if(o[i]){e(o,null,0);return}const a=o[t];n(a)||s(o,a,0)})}let El;function jEe(r,e,t,i,n){n=oU({enterable:!0,showArrow:!0},n);const s=r==null?void 0:r.dataset.prefix,o=r==null?void 0:r.querySelector(`.${s}-scrollbar__wrap`);function a(){const g=n.effect==="light",v=document.createElement("div");return v.className=[`${s}-popper`,g?"is-light":"is-dark",n.popperClass||""].join(" "),t=DEe(t),v.innerHTML=t,v.style.zIndex=String(i()),r==null||r.appendChild(v),v}function l(){const g=document.createElement("div");return g.className=`${s}-popper__arrow`,g}function c(){u&&u.update()}El==null||El(),El=()=>{try{u&&u.destroy(),p&&(r==null||r.removeChild(p)),e.removeEventListener("mouseenter",d),e.removeEventListener("mouseleave",h),o==null||o.removeEventListener("scroll",El),El=void 0}catch{}};let u=null,d=c,h=El;n.enterable&&({onOpen:d,onClose:h}=nF({showAfter:n.showAfter,hideAfter:n.hideAfter,open:c,close:El}));const p=a();p.onmouseenter=d,p.onmouseleave=h;const f=[];if(n.offset&&f.push({name:"offset",options:{offset:[0,n.offset]}}),n.showArrow){const g=p.appendChild(l());f.push({name:"arrow",options:{element:g,padding:10}})}const m=n.popperOptions||{};return u=ZU(e,p,{placement:n.placement||"top",strategy:"fixed",...m,modifiers:m.modifiers?f.concat(m.modifiers):f}),e.addEventListener("mouseenter",d),e.addEventListener("mouseleave",h),o==null||o.addEventListener("scroll",El),u}function e6(r){return r.children?Nse(r.children,e6):[r]}function t6(r,e){return r+e.colSpan}const r6=(r,e,t,i)=>{let n=0,s=r;const o=t.states.columns.value;if(i){const l=e6(i[r]);n=o.slice(0,o.indexOf(l[0])).reduce(t6,0),s=n+l.reduce(t6,0)-1}else n=r;let a;switch(e){case"left":s<t.states.fixedLeafColumnsLength.value&&(a="left");break;case"right":n>=o.length-t.states.rightFixedLeafColumnsLength.value&&(a="right");break;default:s<t.states.fixedLeafColumnsLength.value?a="left":n>=o.length-t.states.rightFixedLeafColumnsLength.value&&(a="right")}return a?{direction:a,start:n,after:s}:{}},UC=(r,e,t,i,n,s=0)=>{const o=[],{direction:a,start:l,after:c}=r6(e,t,i,n);if(a){const u=a==="left";o.push(`${r}-fixed-column--${a}`),u&&c+s===i.states.fixedLeafColumnsLength.value-1?o.push("is-last-column"):!u&&l-s===i.states.columns.value.length-i.states.rightFixedLeafColumnsLength.value&&o.push("is-first-column")}return o};function i6(r,e){return r+(e.realWidth===null||Number.isNaN(e.realWidth)?Number(e.width):e.realWidth)}const FC=(r,e,t,i)=>{const{direction:n,start:s=0,after:o=0}=r6(r,e,t,i);if(!n)return;const a={},l=n==="left",c=t.states.columns.value;return l?a.left=c.slice(0,s).reduce(i6,0):a.right=c.slice(o+1).reverse().reduce(i6,0),a},Uf=(r,e)=>{r&&(Number.isNaN(r[e])||(r[e]=`${r[e]}px`))};function HEe(r){const e=Dt(),t=W(!1),i=W([]);return{updateExpandRows:()=>{const n=r.data.value||[],s=r.rowKey.value;if(t.value)i.value=n.slice();else if(s){const o=ih(i.value,s);i.value=n.reduce((a,l)=>{const c=$n(l,s);return o[c]&&a.push(l),a},[])}else i.value=[]},toggleRowExpansion:(n,s)=>{c0(i.value,n,s)&&e.emit("expand-change",n,i.value.slice())},setExpandRowKeys:n=>{e.store.assertRowKey();const s=r.data.value||[],o=r.rowKey.value,a=ih(s,o);i.value=n.reduce((l,c)=>{const u=a[c];return u&&l.push(u.row),l},[])},isRowExpanded:n=>{const s=r.rowKey.value;return s?!!ih(i.value,s)[$n(n,s)]:i.value.includes(n)},states:{expandRows:i,defaultExpandAll:t}}}function WEe(r){const e=Dt(),t=W(null),i=W(null),n=a=>{e.store.assertRowKey(),t.value=a,o(a)},s=()=>{t.value=null},o=a=>{const{data:l,rowKey:c}=r;let u=null;c.value&&(u=(y(l)||[]).find(d=>$n(d,c.value)===a)),i.value=u,e.emit("current-change",i.value,null)};return{setCurrentRowKey:n,restoreCurrentRowKey:s,setCurrentRowByKey:o,updateCurrentRow:a=>{const l=i.value;if(a&&a!==l){i.value=a,e.emit("current-change",i.value,l);return}!a&&l&&(i.value=null,e.emit("current-change",null,l))},updateCurrentRowData:()=>{const a=r.rowKey.value,l=r.data.value||[],c=i.value;if(!l.includes(c)&&c){if(a){const u=$n(c,a);o(u)}else i.value=null;i.value===null&&e.emit("current-change",null,c)}else t.value&&(o(t.value),s())},states:{_currentRowKey:t,currentRow:i}}}function $Ee(r){const e=W([]),t=W({}),i=W(16),n=W(!1),s=W({}),o=W("hasChildren"),a=W("children"),l=Dt(),c=I(()=>{if(!r.rowKey.value)return{};const v=r.data.value||[];return d(v)}),u=I(()=>{const v=r.rowKey.value,x=Object.keys(s.value),b={};return x.length&&x.forEach(w=>{if(s.value[w].length){const _={children:[]};s.value[w].forEach(S=>{const T=$n(S,v);_.children.push(T),S[o.value]&&!b[T]&&(b[T]={children:[]})}),b[w]=_}}),b}),d=v=>{const x=r.rowKey.value,b={};return GEe(v,(w,_,S)=>{const T=$n(w,x);Array.isArray(_)?b[T]={children:_.map(M=>$n(M,x)),level:S}:n.value&&(b[T]={children:[],lazy:!0,level:S})},a.value,o.value),b},h=(v=!1,x=(b=>(b=l.store)==null?void 0:b.states.defaultExpandAll.value)())=>{var b;const w=c.value,_=u.value,S=Object.keys(w),T={};if(S.length){const M=y(t),E=[],C=(A,N)=>{if(v)return e.value?x||e.value.includes(N):!!(x||A!=null&&A.expanded);{const R=x||e.value&&e.value.includes(N);return!!(A!=null&&A.expanded||R)}};S.forEach(A=>{const N=M[A],R={...w[A]};if(R.expanded=C(N,A),R.lazy){const{loaded:F=!1,loading:B=!1}=N||{};R.loaded=!!F,R.loading=!!B,E.push(A)}T[A]=R});const P=Object.keys(_);n.value&&P.length&&E.length&&P.forEach(A=>{const N=M[A],R=_[A].children;if(E.includes(A)){if(T[A].children.length!==0)throw new Error("[ElTable]children must be an empty array.");T[A].children=R}else{const{loaded:F=!1,loading:B=!1}=N||{};T[A]={lazy:!0,loaded:!!F,loading:!!B,expanded:C(N,A),children:R,level:""}}})}t.value=T,(b=l.store)==null||b.updateTableScrollY()};Ve(()=>e.value,()=>{h(!0)}),Ve(()=>c.value,()=>{h()}),Ve(()=>u.value,()=>{h()});const p=v=>{e.value=v,h()},f=(v,x)=>{l.store.assertRowKey();const b=r.rowKey.value,w=$n(v,b),_=w&&t.value[w];if(w&&_&&"expanded"in _){const S=_.expanded;x=typeof x>"u"?!_.expanded:x,t.value[w].expanded=x,S!==x&&l.emit("expand-change",v,x),l.store.updateTableScrollY()}},m=v=>{l.store.assertRowKey();const x=r.rowKey.value,b=$n(v,x),w=t.value[b];n.value&&w&&"loaded"in w&&!w.loaded?g(v,b,w):f(v,void 0)},g=(v,x,b)=>{const{load:w}=l.props;w&&!t.value[x].loaded&&(t.value[x].loading=!0,w(v,b,_=>{if(!Array.isArray(_))throw new TypeError("[ElTable] data must be an array");t.value[x].loading=!1,t.value[x].loaded=!0,t.value[x].expanded=!0,_.length&&(s.value[x]=_),l.emit("expand-change",v,!0)}))};return{loadData:g,loadOrToggle:m,toggleTreeExpansion:f,updateTreeExpandKeys:p,updateTreeData:h,normalize:d,states:{expandRowKeys:e,treeData:t,indent:i,lazy:n,lazyTreeNodeMap:s,lazyColumnIdentifier:o,childrenColumnName:a}}}const XEe=(r,e)=>{const t=e.sortingColumn;return!t||typeof t.sortable=="string"?r:UEe(r,e.sortProp,e.sortOrder,t.sortMethod,t.sortBy)},hw=r=>{const e=[];return r.forEach(t=>{t.children&&t.children.length>0?e.push.apply(e,hw(t.children)):e.push(t)}),e};function qEe(){var r;const e=Dt(),{size:t}=fn((r=e.proxy)==null?void 0:r.$props),i=W(null),n=W([]),s=W([]),o=W(!1),a=W([]),l=W([]),c=W([]),u=W([]),d=W([]),h=W([]),p=W([]),f=W([]),m=[],g=W(0),v=W(0),x=W(0),b=W(!1),w=W([]),_=W(!1),S=W(!1),T=W(null),M=W({}),E=W(null),C=W(null),P=W(null),A=W(null),N=W(null);Ve(n,()=>e.state&&k(!1),{deep:!0});const R=()=>{if(!i.value)throw new Error("[ElTable] prop row-key is required")},F=Ee=>{var Ue;(Ue=Ee.children)==null||Ue.forEach(Be=>{Be.fixed=Ee.fixed,F(Be)})},B=()=>{a.value.forEach(Q=>{F(Q)}),u.value=a.value.filter(Q=>Q.fixed===!0||Q.fixed==="left"),d.value=a.value.filter(Q=>Q.fixed==="right"),u.value.length>0&&a.value[0]&&a.value[0].type==="selection"&&!a.value[0].fixed&&(a.value[0].fixed=!0,u.value.unshift(a.value[0]));const Ee=a.value.filter(Q=>!Q.fixed);l.value=[].concat(u.value).concat(Ee).concat(d.value);const Ue=hw(Ee),Be=hw(u.value),ve=hw(d.value);g.value=Ue.length,v.value=Be.length,x.value=ve.length,c.value=[].concat(Be).concat(Ue).concat(ve),o.value=u.value.length>0||d.value.length>0},k=(Ee,Ue=!1)=>{Ee&&B(),Ue?e.state.doLayout():e.state.debouncedUpdateLayout()},z=Ee=>w.value.includes(Ee),O=()=>{b.value=!1,w.value.length&&(w.value=[],e.emit("selection-change",[]))},V=()=>{let Ee;if(i.value){Ee=[];const Ue=ih(w.value,i.value),Be=ih(n.value,i.value);for(const ve in Ue)er(Ue,ve)&&!Be[ve]&&Ee.push(Ue[ve].row)}else Ee=w.value.filter(Ue=>!n.value.includes(Ue));if(Ee.length){const Ue=w.value.filter(Be=>!Ee.includes(Be));w.value=Ue,e.emit("selection-change",Ue.slice())}},U=()=>(w.value||[]).slice(),G=(Ee,Ue=void 0,Be=!0)=>{if(c0(w.value,Ee,Ue)){const ve=(w.value||[]).slice();Be&&e.emit("select",ve,Ee),e.emit("selection-change",ve)}},X=()=>{var Ee,Ue;const Be=S.value?!b.value:!(b.value||w.value.length);b.value=Be;let ve=!1,Q=0;const he=(Ue=(Ee=e==null?void 0:e.store)==null?void 0:Ee.states)==null?void 0:Ue.rowKey.value;n.value.forEach((we,ae)=>{const De=ae+Q;T.value?T.value.call(null,we,De)&&c0(w.value,we,Be)&&(ve=!0):c0(w.value,we,Be)&&(ve=!0),Q+=de($n(we,he))}),ve&&e.emit("selection-change",w.value?w.value.slice():[]),e.emit("select-all",w.value)},ie=()=>{const Ee=ih(w.value,i.value);n.value.forEach(Ue=>{const Be=$n(Ue,i.value),ve=Ee[Be];ve&&(w.value[ve.index]=Ue)})},se=()=>{var Ee,Ue,Be;if(((Ee=n.value)==null?void 0:Ee.length)===0){b.value=!1;return}let ve;i.value&&(ve=ih(w.value,i.value));const Q=function(De){return ve?!!ve[$n(De,i.value)]:w.value.includes(De)};let he=!0,we=0,ae=0;for(let De=0,We=(n.value||[]).length;De<We;De++){const je=(Be=(Ue=e==null?void 0:e.store)==null?void 0:Ue.states)==null?void 0:Be.rowKey.value,ye=De+ae,nt=n.value[De],He=T.value&&T.value.call(null,nt,ye);if(Q(nt))we++;else if(!T.value||He){he=!1;break}ae+=de($n(nt,je))}we===0&&(he=!1),b.value=he},de=Ee=>{var Ue;if(!e||!e.store)return 0;const{treeData:Be}=e.store.states;let ve=0;const Q=(Ue=Be.value[Ee])==null?void 0:Ue.children;return Q&&(ve+=Q.length,Q.forEach(he=>{ve+=de(he)})),ve},K=(Ee,Ue)=>{Array.isArray(Ee)||(Ee=[Ee]);const Be={};return Ee.forEach(ve=>{M.value[ve.id]=Ue,Be[ve.columnKey||ve.id]=Ue}),Be},q=(Ee,Ue,Be)=>{C.value&&C.value!==Ee&&(C.value.order=null),C.value=Ee,P.value=Ue,A.value=Be},ce=()=>{let Ee=y(s);Object.keys(M.value).forEach(Ue=>{const Be=M.value[Ue];if(!Be||Be.length===0)return;const ve=Z5({columns:c.value},Ue);ve&&ve.filterMethod&&(Ee=Ee.filter(Q=>Be.some(he=>ve.filterMethod.call(null,he,Q,ve))))}),E.value=Ee},Te=()=>{n.value=XEe(E.value,{sortingColumn:C.value,sortProp:P.value,sortOrder:A.value})},Z=(Ee=void 0)=>{Ee&&Ee.filter||ce(),Te()},L=Ee=>{const{tableHeaderRef:Ue}=e.refs;if(!Ue)return;const Be=Object.assign({},Ue.filterPanels),ve=Object.keys(Be);if(ve.length)if(typeof Ee=="string"&&(Ee=[Ee]),Array.isArray(Ee)){const Q=Ee.map(he=>FEe({columns:c.value},he));ve.forEach(he=>{const we=Q.find(ae=>ae.id===he);we&&(we.filteredValue=[])}),e.store.commit("filterChange",{column:Q,values:[],silent:!0,multi:!0})}else ve.forEach(Q=>{const he=c.value.find(we=>we.id===Q);he&&(he.filteredValue=[])}),M.value={},e.store.commit("filterChange",{column:{},values:[],silent:!0})},$=()=>{C.value&&(q(null,null,null),e.store.commit("changeSortCondition",{silent:!0}))},{setExpandRowKeys:re,toggleRowExpansion:te,updateExpandRows:le,states:ge,isRowExpanded:be}=HEe({data:n,rowKey:i}),{updateTreeExpandKeys:_e,toggleTreeExpansion:pe,updateTreeData:Se,loadOrToggle:Fe,states:Y}=$Ee({data:n,rowKey:i}),{updateCurrentRowData:H,updateCurrentRow:ne,setCurrentRowKey:Le,states:Pe}=WEe({data:n,rowKey:i});return{assertRowKey:R,updateColumns:B,scheduleLayout:k,isSelected:z,clearSelection:O,cleanSelection:V,getSelectionRows:U,toggleRowSelection:G,_toggleAllSelection:X,toggleAllSelection:null,updateSelectionByRowKey:ie,updateAllSelected:se,updateFilters:K,updateCurrentRow:ne,updateSort:q,execFilter:ce,execSort:Te,execQuery:Z,clearFilter:L,clearSort:$,toggleRowExpansion:te,setExpandRowKeysAdapter:Ee=>{re(Ee),_e(Ee)},setCurrentRowKey:Le,toggleRowExpansionAdapter:(Ee,Ue)=>{c.value.some(({type:Be})=>Be==="expand")?te(Ee,Ue):pe(Ee,Ue)},isRowExpanded:be,updateExpandRows:le,updateCurrentRowData:H,loadOrToggle:Fe,updateTreeData:Se,states:{tableSize:t,rowKey:i,data:n,_data:s,isComplex:o,_columns:a,originColumns:l,columns:c,fixedColumns:u,rightFixedColumns:d,leafColumns:h,fixedLeafColumns:p,rightFixedLeafColumns:f,updateOrderFns:m,leafColumnsLength:g,fixedLeafColumnsLength:v,rightFixedLeafColumnsLength:x,isAllSelected:b,selection:w,reserveSelection:_,selectOnIndeterminate:S,selectable:T,filters:M,filteredData:E,sortingColumn:C,sortProp:P,sortOrder:A,hoverRow:N,...ge,...Y,...Pe}}}function BC(r,e){return r.map(t=>{var i;return t.id===e.id?e:((i=t.children)!=null&&i.length&&(t.children=BC(t.children,e)),t)})}function zC(r){r.forEach(e=>{var t,i;e.no=(t=e.getColumnIndex)==null?void 0:t.call(e),(i=e.children)!=null&&i.length&&zC(e.children)}),r.sort((e,t)=>e.no-t.no)}function KEe(){const r=Dt(),e=qEe();return{ns:Ge("table"),...e,mutations:{setData(t,i){const n=y(t._data)!==i;t.data.value=i,t._data.value=i,r.store.execQuery(),r.store.updateCurrentRowData(),r.store.updateExpandRows(),r.store.updateTreeData(r.store.states.defaultExpandAll.value),y(t.reserveSelection)?(r.store.assertRowKey(),r.store.updateSelectionByRowKey()):n?r.store.clearSelection():r.store.cleanSelection(),r.store.updateAllSelected(),r.$ready&&r.store.scheduleLayout()},insertColumn(t,i,n,s){const o=y(t._columns);let a=[];n?(n&&!n.children&&(n.children=[]),n.children.push(i),a=BC(o,n)):(o.push(i),a=o),zC(a),t._columns.value=a,t.updateOrderFns.push(s),i.type==="selection"&&(t.selectable.value=i.selectable,t.reserveSelection.value=i.reserveSelection),r.$ready&&(r.store.updateColumns(),r.store.scheduleLayout())},updateColumnOrder(t,i){var n;((n=i.getColumnIndex)==null?void 0:n.call(i))!==i.no&&(zC(t._columns.value),r.$ready&&r.store.updateColumns())},removeColumn(t,i,n,s){const o=y(t._columns)||[];if(n)n.children.splice(n.children.findIndex(l=>l.id===i.id),1),ht(()=>{var l;((l=n.children)==null?void 0:l.length)===0&&delete n.children}),t._columns.value=BC(o,n);else{const l=o.indexOf(i);l>-1&&(o.splice(l,1),t._columns.value=o)}const a=t.updateOrderFns.indexOf(s);a>-1&&t.updateOrderFns.splice(a,1),r.$ready&&(r.store.updateColumns(),r.store.scheduleLayout())},sort(t,i){const{prop:n,order:s,init:o}=i;if(n){const a=y(t.columns).find(l=>l.property===n);a&&(a.order=s,r.store.updateSort(a,n,s),r.store.commit("changeSortCondition",{init:o}))}},changeSortCondition(t,i){const{sortingColumn:n,sortProp:s,sortOrder:o}=t,a=y(n),l=y(s),c=y(o);c===null&&(t.sortingColumn.value=null,t.sortProp.value=null);const u={filter:!0};r.store.execQuery(u),(!i||!(i.silent||i.init))&&r.emit("sort-change",{column:a,prop:l,order:c}),r.store.updateTableScrollY()},filterChange(t,i){const{column:n,values:s,silent:o}=i,a=r.store.updateFilters(n,s);r.store.execQuery(),o||r.emit("filter-change",a),r.store.updateTableScrollY()},toggleAllSelection(){r.store.toggleAllSelection()},rowSelectedChanged(t,i){r.store.toggleRowSelection(i),r.store.updateAllSelected()},setHoverRow(t,i){t.hoverRow.value=i},setCurrentRow(t,i){r.store.updateCurrentRow(i)}},commit:function(t,...i){const n=r.store.mutations;if(n[t])n[t].apply(r,[r.store.states].concat(i));else throw new Error(`Action not found: ${t}`)},updateTableScrollY:function(){ht(()=>r.layout.updateScrollY.apply(r.layout))}}}const u0={rowKey:"rowKey",defaultExpandAll:"defaultExpandAll",selectOnIndeterminate:"selectOnIndeterminate",indent:"indent",lazy:"lazy",data:"data","treeProps.hasChildren":{key:"lazyColumnIdentifier",default:"hasChildren"},"treeProps.children":{key:"childrenColumnName",default:"children"}};function YEe(r,e){if(!r)throw new Error("Table is required.");const t=KEe();return t.toggleAllSelection=Es(t._toggleAllSelection,10),Object.keys(u0).forEach(i=>{n6(s6(e,i),i,t)}),ZEe(t,e),t}function ZEe(r,e){Object.keys(u0).forEach(t=>{Ve(()=>s6(e,t),i=>{n6(i,t,r)})})}function n6(r,e,t){let i=r,n=u0[e];typeof u0[e]=="object"&&(n=n.key,i=i||u0[e].default),t.states[n].value=i}function s6(r,e){if(e.includes(".")){const t=e.split(".");let i=r;return t.forEach(n=>{i=i[n]}),i}else return r[e]}class JEe{constructor(e){this.observers=[],this.table=null,this.store=null,this.columns=[],this.fit=!0,this.showHeader=!0,this.height=W(null),this.scrollX=W(!1),this.scrollY=W(!1),this.bodyWidth=W(null),this.fixedWidth=W(null),this.rightFixedWidth=W(null),this.gutterWidth=0;for(const t in e)er(e,t)&&(zr(this[t])?this[t].value=e[t]:this[t]=e[t]);if(!this.table)throw new Error("Table is required for Table Layout");if(!this.store)throw new Error("Store is required for Table Layout")}updateScrollY(){if(this.height.value===null)return!1;const e=this.table.refs.scrollBarRef;if(this.table.vnode.el&&(e!=null&&e.wrapRef)){let t=!0;const i=this.scrollY.value;return t=e.wrapRef.scrollHeight>e.wrapRef.clientHeight,this.scrollY.value=t,i!==t}return!1}setHeight(e,t="height"){if(!ar)return;const i=this.table.vnode.el;if(e=zEe(e),this.height.value=Number(e),!i&&(e||e===0))return ht(()=>this.setHeight(e,t));typeof e=="number"?(i.style[t]=`${e}px`,this.updateElsHeight()):typeof e=="string"&&(i.style[t]=e,this.updateElsHeight())}setMaxHeight(e){this.setHeight(e,"max-height")}getFlattenColumns(){const e=[];return this.table.store.states.columns.value.forEach(t=>{t.isColumnGroup?e.push.apply(e,t.columns):e.push(t)}),e}updateElsHeight(){this.updateScrollY(),this.notifyObservers("scrollable")}headerDisplayNone(e){if(!e)return!0;let t=e;for(;t.tagName!=="DIV";){if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}updateColumnsWidth(){if(!ar)return;const e=this.fit,t=this.table.vnode.el.clientWidth;let i=0;const n=this.getFlattenColumns(),s=n.filter(l=>typeof l.width!="number");if(n.forEach(l=>{typeof l.width=="number"&&l.realWidth&&(l.realWidth=null)}),s.length>0&&e){if(n.forEach(l=>{i+=Number(l.width||l.minWidth||80)}),i<=t){this.scrollX.value=!1;const l=t-i;if(s.length===1)s[0].realWidth=Number(s[0].minWidth||80)+l;else{const c=s.reduce((h,p)=>h+Number(p.minWidth||80),0),u=l/c;let d=0;s.forEach((h,p)=>{if(p===0)return;const f=Math.floor(Number(h.minWidth||80)*u);d+=f,h.realWidth=Number(h.minWidth||80)+f}),s[0].realWidth=Number(s[0].minWidth||80)+l-d}}else this.scrollX.value=!0,s.forEach(l=>{l.realWidth=Number(l.minWidth)});this.bodyWidth.value=Math.max(i,t),this.table.state.resizeState.value.width=this.bodyWidth.value}else n.forEach(l=>{!l.width&&!l.minWidth?l.realWidth=80:l.realWidth=Number(l.width||l.minWidth),i+=l.realWidth}),this.scrollX.value=i>t,this.bodyWidth.value=i;const o=this.store.states.fixedColumns.value;if(o.length>0){let l=0;o.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.fixedWidth.value=l}const a=this.store.states.rightFixedColumns.value;if(a.length>0){let l=0;a.forEach(c=>{l+=Number(c.realWidth||c.width)}),this.rightFixedWidth.value=l}this.notifyObservers("columns")}addObserver(e){this.observers.push(e)}removeObserver(e){const t=this.observers.indexOf(e);t!==-1&&this.observers.splice(t,1)}notifyObservers(e){this.observers.forEach(t=>{var i,n;switch(e){case"columns":(i=t.state)==null||i.onColumnsChange(this);break;case"scrollable":(n=t.state)==null||n.onScrollableChange(this);break;default:throw new Error(`Table Layout don't have event ${e}.`)}})}}const{CheckboxGroup:QEe}=oa,eCe=xe({name:"ElTableFilterPanel",components:{ElCheckbox:oa,ElCheckboxGroup:QEe,ElScrollbar:ac,ElTooltip:Rs,ElIcon:dt,ArrowDown:lu,ArrowUp:cx},directives:{ClickOutside:Su},props:{placement:{type:String,default:"bottom-start"},store:{type:Object},column:{type:Object},upDataColumn:{type:Function}},setup(r){const e=Dt(),{t}=pr(),i=Ge("table-filter"),n=e==null?void 0:e.parent;n.filterPanels.value[r.column.id]||(n.filterPanels.value[r.column.id]=e);const s=W(!1),o=W(null),a=I(()=>r.column&&r.column.filters),l=I({get:()=>{var w;return(((w=r.column)==null?void 0:w.filteredValue)||[])[0]},set:w=>{c.value&&(typeof w<"u"&&w!==null?c.value.splice(0,1,w):c.value.splice(0,1))}}),c=I({get(){return r.column?r.column.filteredValue||[]:[]},set(w){r.column&&r.upDataColumn("filteredValue",w)}}),u=I(()=>r.column?r.column.filterMultiple:!0),d=w=>w.value===l.value,h=()=>{s.value=!1},p=w=>{w.stopPropagation(),s.value=!s.value},f=()=>{s.value=!1},m=()=>{x(c.value),h()},g=()=>{c.value=[],x(c.value),h()},v=w=>{l.value=w,x(typeof w<"u"&&w!==null?c.value:[]),h()},x=w=>{r.store.commit("filterChange",{column:r.column,values:w}),r.store.updateAllSelected()};Ve(s,w=>{r.column&&r.upDataColumn("filterOpened",w)},{immediate:!0});const b=I(()=>{var w,_;return(_=(w=o.value)==null?void 0:w.popperRef)==null?void 0:_.contentRef});return{tooltipVisible:s,multiple:u,filteredValue:c,filterValue:l,filters:a,handleConfirm:m,handleReset:g,handleSelect:v,isActive:d,t,ns:i,showFilterPanel:p,hideFilterPanel:f,popperPaneRef:b,tooltip:o}}}),tCe={key:0},rCe=["disabled"],iCe=["label","onClick"];function nCe(r,e,t,i,n,s){const o=gt("el-checkbox"),a=gt("el-checkbox-group"),l=gt("el-scrollbar"),c=gt("arrow-up"),u=gt("arrow-down"),d=gt("el-icon"),h=gt("el-tooltip"),p=Yp("click-outside");return D(),Ae(h,{ref:"tooltip",visible:r.tooltipVisible,offset:0,placement:r.placement,"show-arrow":!1,"stop-popper-mouse-event":!1,teleported:"",effect:"light",pure:"","popper-class":r.ns.b(),persistent:""},{content:me(()=>[r.multiple?(D(),ee("div",tCe,[J("div",{class:j(r.ns.e("content"))},[ue(l,{"wrap-class":r.ns.e("wrap")},{default:me(()=>[ue(a,{modelValue:r.filteredValue,"onUpdate:modelValue":e[0]||(e[0]=f=>r.filteredValue=f),class:j(r.ns.e("checkbox-group"))},{default:me(()=>[(D(!0),ee(ct,null,Ut(r.filters,f=>(D(),Ae(o,{key:f.value,label:f.value},{default:me(()=>[ir($e(f.text),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","class"])]),_:1},8,["wrap-class"])],2),J("div",{class:j(r.ns.e("bottom"))},[J("button",{class:j({[r.ns.is("disabled")]:r.filteredValue.length===0}),disabled:r.filteredValue.length===0,type:"button",onClick:e[1]||(e[1]=(...f)=>r.handleConfirm&&r.handleConfirm(...f))},$e(r.t("el.table.confirmFilter")),11,rCe),J("button",{type:"button",onClick:e[2]||(e[2]=(...f)=>r.handleReset&&r.handleReset(...f))},$e(r.t("el.table.resetFilter")),1)],2)])):(D(),ee("ul",{key:1,class:j(r.ns.e("list"))},[J("li",{class:j([r.ns.e("list-item"),{[r.ns.is("active")]:r.filterValue===void 0||r.filterValue===null}]),onClick:e[3]||(e[3]=f=>r.handleSelect(null))},$e(r.t("el.table.clearFilter")),3),(D(!0),ee(ct,null,Ut(r.filters,f=>(D(),ee("li",{key:f.value,class:j([r.ns.e("list-item"),r.ns.is("active",r.isActive(f))]),label:f.value,onClick:m=>r.handleSelect(f.value)},$e(f.text),11,iCe))),128))],2))]),default:me(()=>[It((D(),ee("span",{class:j([`${r.ns.namespace.value}-table__column-filter-trigger`,`${r.ns.namespace.value}-none-outline`]),onClick:e[4]||(e[4]=(...f)=>r.showFilterPanel&&r.showFilterPanel(...f))},[ue(d,null,{default:me(()=>[r.column.filterOpened?(D(),Ae(c,{key:0})):(D(),Ae(u,{key:1}))]),_:1})],2)),[[p,r.hideFilterPanel,r.popperPaneRef]])]),_:1},8,["visible","placement","popper-class"])}var sCe=Qe(eCe,[["render",nCe],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/filter-panel.vue"]]);function o6(r){const e=Dt();I1(()=>{t.value.addObserver(e)}),Et(()=>{i(t.value),n(t.value)}),Yl(()=>{i(t.value),n(t.value)}),ki(()=>{t.value.removeObserver(e)});const t=I(()=>{const s=r.layout;if(!s)throw new Error("Can not find table layout.");return s}),i=s=>{var o;const a=((o=r.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col"))||[];if(!a.length)return;const l=s.getFlattenColumns(),c={};l.forEach(u=>{c[u.id]=u});for(let u=0,d=a.length;u<d;u++){const h=a[u],p=h.getAttribute("name"),f=c[p];f&&h.setAttribute("width",f.realWidth||f.width)}},n=s=>{var o,a;const l=((o=r.vnode.el)==null?void 0:o.querySelectorAll("colgroup > col[name=gutter]"))||[];for(let u=0,d=l.length;u<d;u++)l[u].setAttribute("width",s.scrollY.value?s.gutterWidth:"0");const c=((a=r.vnode.el)==null?void 0:a.querySelectorAll("th.gutter"))||[];for(let u=0,d=c.length;u<d;u++){const h=c[u];h.style.width=s.scrollY.value?`${s.gutterWidth}px`:"0",h.style.display=s.scrollY.value?"":"none"}};return{tableLayout:t.value,onColumnsChange:i,onScrollableChange:n}}const Cl=Symbol("ElTable");function oCe(r,e){const t=Dt(),i=ut(Cl),n=m=>{m.stopPropagation()},s=(m,g)=>{!g.filters&&g.sortable?f(m,g,!1):g.filterable&&!g.sortable&&n(m),i==null||i.emit("header-click",g,m)},o=(m,g)=>{i==null||i.emit("header-contextmenu",g,m)},a=W(null),l=W(!1),c=W({}),u=(m,g)=>{if(ar&&!(g.children&&g.children.length>0)&&a.value&&r.border){l.value=!0;const v=i;e("set-drag-visible",!0);const x=(v==null?void 0:v.vnode.el).getBoundingClientRect().left,b=t.vnode.el.querySelector(`th.${g.id}`),w=b.getBoundingClientRect(),_=w.left-x+30;vl(b,"noclick"),c.value={startMouseLeft:m.clientX,startLeft:w.right-x,startColumnLeft:w.left-x,tableLeft:x};const S=v==null?void 0:v.refs.resizeProxy;S.style.left=`${c.value.startLeft}px`,document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};const T=E=>{const C=E.clientX-c.value.startMouseLeft,P=c.value.startLeft+C;S.style.left=`${Math.max(_,P)}px`},M=()=>{if(l.value){const{startColumnLeft:E,startLeft:C}=c.value,P=Number.parseInt(S.style.left,10)-E;g.width=g.realWidth=P,v==null||v.emit("header-dragend",g.width,C-E,g,m),requestAnimationFrame(()=>{r.store.scheduleLayout(!1,!0)}),document.body.style.cursor="",l.value=!1,a.value=null,c.value={},e("set-drag-visible",!1)}document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",M),document.onselectstart=null,document.ondragstart=null,setTimeout(()=>{Xs(b,"noclick")},0)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",M)}},d=(m,g)=>{if(g.children&&g.children.length>0)return;const v=m.target;if(!Qo(v))return;const x=v==null?void 0:v.closest("th");if(!(!g||!g.resizable)&&!l.value&&r.border){const b=x.getBoundingClientRect(),w=document.body.style;b.width>12&&b.right-m.pageX<8?(w.cursor="col-resize",Oa(x,"is-sortable")&&(x.style.cursor="col-resize"),a.value=g):l.value||(w.cursor="",Oa(x,"is-sortable")&&(x.style.cursor="pointer"),a.value=null)}},h=()=>{ar&&(document.body.style.cursor="")},p=({order:m,sortOrders:g})=>{if(m==="")return g[0];const v=g.indexOf(m||null);return g[v>g.length-2?0:v+1]},f=(m,g,v)=>{var x;m.stopPropagation();const b=g.order===v?null:v||p(g),w=(x=m.target)==null?void 0:x.closest("th");if(w&&Oa(w,"noclick")){Xs(w,"noclick");return}if(!g.sortable)return;const _=r.store.states;let S=_.sortProp.value,T;const M=_.sortingColumn.value;(M!==g||M===g&&M.order===null)&&(M&&(M.order=null),_.sortingColumn.value=g,S=g.property),b?T=g.order=b:T=g.order=null,_.sortProp.value=S,_.sortOrder.value=T,i==null||i.store.commit("changeSortCondition")};return{handleHeaderClick:s,handleHeaderContextMenu:o,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:f,handleFilterClick:n}}function aCe(r){const e=ut(Cl),t=Ge("table");return{getHeaderRowStyle:i=>{const n=e==null?void 0:e.props.headerRowStyle;return typeof n=="function"?n.call(null,{rowIndex:i}):n},getHeaderRowClass:i=>{const n=[],s=e==null?void 0:e.props.headerRowClassName;return typeof s=="string"?n.push(s):typeof s=="function"&&n.push(s.call(null,{rowIndex:i})),n.join(" ")},getHeaderCellStyle:(i,n,s,o)=>{var a;let l=(a=e==null?void 0:e.props.headerCellStyle)!=null?a:{};typeof l=="function"&&(l=l.call(null,{rowIndex:i,columnIndex:n,row:s,column:o}));const c=FC(n,o.fixed,r.store,s);return Uf(c,"left"),Uf(c,"right"),Object.assign({},l,c)},getHeaderCellClass:(i,n,s,o)=>{const a=UC(t.b(),n,o.fixed,r.store,s),l=[o.id,o.order,o.headerAlign,o.className,o.labelClassName,...a];o.children||l.push("is-leaf"),o.sortable&&l.push("is-sortable");const c=e==null?void 0:e.props.headerCellClassName;return typeof c=="string"?l.push(c):typeof c=="function"&&l.push(c.call(null,{rowIndex:i,columnIndex:n,row:s,column:o})),l.push(t.e("cell")),l.filter(u=>!!u).join(" ")}}}const a6=r=>{const e=[];return r.forEach(t=>{t.children?(e.push(t),e.push.apply(e,a6(t.children))):e.push(t)}),e},lCe=r=>{let e=1;const t=(n,s)=>{if(s&&(n.level=s.level+1,e<n.level&&(e=n.level)),n.children){let o=0;n.children.forEach(a=>{t(a,n),o+=a.colSpan}),n.colSpan=o}else n.colSpan=1};r.forEach(n=>{n.level=1,t(n,void 0)});const i=[];for(let n=0;n<e;n++)i.push([]);return a6(r).forEach(n=>{n.children?(n.rowSpan=1,n.children.forEach(s=>s.isSubColumn=!0)):n.rowSpan=e-n.level+1,i[n.level-1].push(n)}),i};function cCe(r){const e=ut(Cl),t=I(()=>lCe(r.store.states.originColumns.value));return{isGroup:I(()=>{const i=t.value.length>1;return i&&e&&(e.state.isGroup.value=!0),i}),toggleAllSelection:i=>{i.stopPropagation(),e==null||e.store.commit("toggleAllSelection")},columnRows:t}}var uCe=xe({name:"ElTableHeader",components:{ElCheckbox:oa},props:{fixed:{type:String,default:""},store:{required:!0,type:Object},border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(r,{emit:e}){const t=Dt(),i=ut(Cl),n=Ge("table"),s=W({}),{onColumnsChange:o,onScrollableChange:a}=o6(i);Et(async()=>{await ht(),await ht();const{prop:S,order:T}=r.defaultSort;i==null||i.store.commit("sort",{prop:S,order:T,init:!0})});const{handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:p,handleFilterClick:f}=oCe(r,e),{getHeaderRowStyle:m,getHeaderRowClass:g,getHeaderCellStyle:v,getHeaderCellClass:x}=aCe(r),{isGroup:b,toggleAllSelection:w,columnRows:_}=cCe(r);return t.state={onColumnsChange:o,onScrollableChange:a},t.filterPanels=s,{ns:n,filterPanels:s,onColumnsChange:o,onScrollableChange:a,columnRows:_,getHeaderRowClass:g,getHeaderRowStyle:m,getHeaderCellClass:x,getHeaderCellStyle:v,handleHeaderClick:l,handleHeaderContextMenu:c,handleMouseDown:u,handleMouseMove:d,handleMouseOut:h,handleSortClick:p,handleFilterClick:f,isGroup:b,toggleAllSelection:w}},render(){const{ns:r,isGroup:e,columnRows:t,getHeaderCellStyle:i,getHeaderCellClass:n,getHeaderRowClass:s,getHeaderRowStyle:o,handleHeaderClick:a,handleHeaderContextMenu:l,handleMouseDown:c,handleMouseMove:u,handleSortClick:d,handleMouseOut:h,store:p,$parent:f}=this;let m=1;return yt("thead",{class:{[r.is("group")]:e}},t.map((g,v)=>yt("tr",{class:s(v),key:v,style:o(v)},g.map((x,b)=>(x.rowSpan>m&&(m=x.rowSpan),yt("th",{class:n(v,b,g,x),colspan:x.colSpan,key:`${x.id}-thead`,rowspan:x.rowSpan,style:i(v,b,g,x),onClick:w=>a(w,x),onContextmenu:w=>l(w,x),onMousedown:w=>c(w,x),onMousemove:w=>u(w,x),onMouseout:h},[yt("div",{class:["cell",x.filteredValue&&x.filteredValue.length>0?"highlight":""]},[x.renderHeader?x.renderHeader({column:x,$index:b,store:p,_self:f}):x.label,x.sortable&&yt("span",{onClick:w=>d(w,x),class:"caret-wrapper"},[yt("i",{onClick:w=>d(w,x,"ascending"),class:"sort-caret ascending"}),yt("i",{onClick:w=>d(w,x,"descending"),class:"sort-caret descending"})]),x.filterable&&yt(sCe,{store:p,placement:x.filterPlacement||"bottom-start",column:x,upDataColumn:(w,_)=>{x[w]=_}})])]))))))}});function dCe(r){const e=ut(Cl),t=W(""),i=W(yt("div")),{nextZIndex:n}=wf(),s=(h,p,f)=>{var m;const g=e,v=IC(h);let x;const b=(m=g==null?void 0:g.vnode.el)==null?void 0:m.dataset.prefix;v&&(x=J5({columns:r.store.states.columns.value},v,b),x&&(g==null||g.emit(`cell-${f}`,p,x,v,h))),g==null||g.emit(`row-${f}`,p,x,h)},o=(h,p)=>{s(h,p,"dblclick")},a=(h,p)=>{r.store.commit("setCurrentRow",p),s(h,p,"click")},l=(h,p)=>{s(h,p,"contextmenu")},c=Es(h=>{r.store.commit("setHoverRow",h)},30),u=Es(()=>{r.store.commit("setHoverRow",null)},30),d=h=>{const p=window.getComputedStyle(h,null),f=Number.parseInt(p.paddingLeft,10)||0,m=Number.parseInt(p.paddingRight,10)||0,g=Number.parseInt(p.paddingTop,10)||0,v=Number.parseInt(p.paddingBottom,10)||0;return{left:f,right:m,top:g,bottom:v}};return{handleDoubleClick:o,handleClick:a,handleContextMenu:l,handleMouseEnter:c,handleMouseLeave:u,handleCellMouseEnter:(h,p,f)=>{var m;const g=e,v=IC(h),x=(m=g==null?void 0:g.vnode.el)==null?void 0:m.dataset.prefix;if(v){const N=J5({columns:r.store.states.columns.value},v,x),R=g.hoverState={cell:v,column:N,row:p};g==null||g.emit("cell-mouse-enter",R.row,R.column,R.cell,h)}if(!f)return;const b=h.target.querySelector(".cell");if(!(Oa(b,`${x}-tooltip`)&&b.childNodes.length))return;const w=document.createRange();w.setStart(b,0),w.setEnd(b,b.childNodes.length);let _=w.getBoundingClientRect().width,S=w.getBoundingClientRect().height;_-Math.floor(_)<.001&&(_=Math.floor(_)),S-Math.floor(S)<.001&&(S=Math.floor(S));const{top:T,left:M,right:E,bottom:C}=d(b),P=M+E,A=T+C;(_+P>b.offsetWidth||S+A>b.offsetHeight||b.scrollWidth>b.offsetWidth)&&jEe(e==null?void 0:e.refs.tableWrapper,v,v.innerText||v.textContent,n,f)},handleCellMouseLeave:h=>{if(!IC(h))return;const p=e==null?void 0:e.hoverState;e==null||e.emit("cell-mouse-leave",p==null?void 0:p.row,p==null?void 0:p.column,p==null?void 0:p.cell,h)},tooltipContent:t,tooltipTrigger:i}}function hCe(r){const e=ut(Cl),t=Ge("table");return{getRowStyle:(i,n)=>{const s=e==null?void 0:e.props.rowStyle;return typeof s=="function"?s.call(null,{row:i,rowIndex:n}):s||null},getRowClass:(i,n)=>{const s=[t.e("row")];e!=null&&e.props.highlightCurrentRow&&i===r.store.states.currentRow.value&&s.push("current-row"),r.stripe&&n%2===1&&s.push(t.em("row","striped"));const o=e==null?void 0:e.props.rowClassName;return typeof o=="string"?s.push(o):typeof o=="function"&&s.push(o.call(null,{row:i,rowIndex:n})),s},getCellStyle:(i,n,s,o)=>{const a=e==null?void 0:e.props.cellStyle;let l=a??{};typeof a=="function"&&(l=a.call(null,{rowIndex:i,columnIndex:n,row:s,column:o}));const c=FC(n,r==null?void 0:r.fixed,r.store);return Uf(c,"left"),Uf(c,"right"),Object.assign({},l,c)},getCellClass:(i,n,s,o,a)=>{const l=UC(t.b(),n,r==null?void 0:r.fixed,r.store,void 0,a),c=[o.id,o.align,o.className,...l],u=e==null?void 0:e.props.cellClassName;return typeof u=="string"?c.push(u):typeof u=="function"&&c.push(u.call(null,{rowIndex:i,columnIndex:n,row:s,column:o})),c.push(t.e("cell")),c.filter(d=>!!d).join(" ")},getSpan:(i,n,s,o)=>{let a=1,l=1;const c=e==null?void 0:e.props.spanMethod;if(typeof c=="function"){const u=c({row:i,column:n,rowIndex:s,columnIndex:o});Array.isArray(u)?(a=u[0],l=u[1]):typeof u=="object"&&(a=u.rowspan,l=u.colspan)}return{rowspan:a,colspan:l}},getColspanRealWidth:(i,n,s)=>{if(n<1)return i[s].realWidth;const o=i.map(({realWidth:a,width:l})=>a||l).slice(s,s+n);return Number(o.reduce((a,l)=>Number(a)+Number(l),-1))}}}function pCe(r){const e=ut(Cl),t=Ge("table"),{handleDoubleClick:i,handleClick:n,handleContextMenu:s,handleMouseEnter:o,handleMouseLeave:a,handleCellMouseEnter:l,handleCellMouseLeave:c,tooltipContent:u,tooltipTrigger:d}=dCe(r),{getRowStyle:h,getRowClass:p,getCellStyle:f,getCellClass:m,getSpan:g,getColspanRealWidth:v}=hCe(r),x=I(()=>r.store.states.columns.value.findIndex(({type:S})=>S==="default")),b=(S,T)=>{const M=e.props.rowKey;return M?$n(S,M):T},w=(S,T,M,E=!1)=>{const{tooltipEffect:C,tooltipOptions:P,store:A}=r,{indent:N,columns:R}=A.states,F=p(S,T);let B=!0;return M&&(F.push(t.em("row",`level-${M.level}`)),B=M.display),yt("tr",{style:[B?null:{display:"none"},h(S,T)],class:F,key:b(S,T),onDblclick:k=>i(k,S),onClick:k=>n(k,S),onContextmenu:k=>s(k,S),onMouseenter:()=>o(T),onMouseleave:a},R.value.map((k,z)=>{const{rowspan:O,colspan:V}=g(S,k,T,z);if(!O||!V)return null;const U=Object.assign({},k);U.realWidth=v(R.value,V,z);const G={store:r.store,_self:r.context||e,column:U,row:S,$index:T,cellIndex:z,expanded:E};z===x.value&&M&&(G.treeNode={indent:M.level*N.value,level:M.level},typeof M.expanded=="boolean"&&(G.treeNode.expanded=M.expanded,"loading"in M&&(G.treeNode.loading=M.loading),"noLazyChildren"in M&&(G.treeNode.noLazyChildren=M.noLazyChildren)));const X=`${T},${z}`,ie=U.columnKey||U.rawColumnKey||"",se=_(z,k,G),de=k.showOverflowTooltip&&oU({effect:C},P,k.showOverflowTooltip);return yt("td",{style:f(T,z,S,k),class:m(T,z,S,k,V-1),key:`${ie}${X}`,rowspan:O,colspan:V,onMouseenter:K=>l(K,S,de),onMouseleave:c},[se])}))},_=(S,T,M)=>T.renderCell(M);return{wrappedRowRender:(S,T)=>{const M=r.store,{isRowExpanded:E,assertRowKey:C}=M,{treeData:P,lazyTreeNodeMap:A,childrenColumnName:N,rowKey:R}=M.states,F=M.states.columns.value;if(F.some(({type:B})=>B==="expand")){const B=E(S),k=w(S,T,void 0,B),z=e.renderExpanded;return B?z?[[k,yt("tr",{key:`expanded-row__${k.key}`},[yt("td",{colspan:F.length,class:`${t.e("cell")} ${t.e("expanded-cell")}`},[z({row:S,$index:T,store:M,expanded:B})])])]]:(console.error("[Element Error]renderExpanded is required."),k):[[k]]}else if(Object.keys(P.value).length){C();const B=$n(S,R.value);let k=P.value[B],z=null;k&&(z={expanded:k.expanded,level:k.level,display:!0},typeof k.lazy=="boolean"&&(typeof k.loaded=="boolean"&&k.loaded&&(z.noLazyChildren=!(k.children&&k.children.length)),z.loading=k.loading));const O=[w(S,T,z)];if(k){let V=0;const U=(X,ie)=>{X&&X.length&&ie&&X.forEach(se=>{const de={display:ie.display&&ie.expanded,level:ie.level+1,expanded:!1,noLazyChildren:!1,loading:!1},K=$n(se,R.value);if(K==null)throw new Error("For nested data item, row-key is required.");if(k={...P.value[K]},k&&(de.expanded=k.expanded,k.level=k.level||de.level,k.display=!!(k.expanded&&de.display),typeof k.lazy=="boolean"&&(typeof k.loaded=="boolean"&&k.loaded&&(de.noLazyChildren=!(k.children&&k.children.length)),de.loading=k.loading)),V++,O.push(w(se,T+V,de)),k){const q=A.value[K]||se[N.value];U(q,k)}})};k.display=!0;const G=A.value[B]||S[N.value];U(G,k)}return O}else return w(S,T,void 0)},tooltipContent:u,tooltipTrigger:d}}var fCe=xe({name:"ElTableBody",props:{store:{required:!0,type:Object},stripe:Boolean,tooltipEffect:String,tooltipOptions:{type:Object},context:{default:()=>({}),type:Object},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:{type:String,default:""},highlight:Boolean},setup(r){const e=Dt(),t=ut(Cl),i=Ge("table"),{wrappedRowRender:n,tooltipContent:s,tooltipTrigger:o}=pCe(r),{onColumnsChange:a,onScrollableChange:l}=o6(t);return Ve(r.store.states.hoverRow,(c,u)=>{!r.store.states.isComplex.value||!ar||ff(()=>{const d=e==null?void 0:e.vnode.el,h=Array.from((d==null?void 0:d.children)||[]).filter(m=>m==null?void 0:m.classList.contains(`${i.e("row")}`)),p=h[u],f=h[c];p&&Xs(p,"hover-row"),f&&vl(f,"hover-row")})}),ki(()=>{var c;(c=El)==null||c()}),{ns:i,onColumnsChange:a,onScrollableChange:l,wrappedRowRender:n,tooltipContent:s,tooltipTrigger:o}},render(){const{wrappedRowRender:r,store:e}=this,t=e.states.data.value||[];return yt("tbody",{},[t.reduce((i,n)=>i.concat(r(n,i.length)),[])])}});function VC(r){const e=r.tableLayout==="auto";let t=r.columns||[];e&&t.every(n=>n.width===void 0)&&(t=[]);const i=n=>{const s={key:`${r.tableLayout}_${n.id}`,style:{},name:void 0};return e?s.style={width:`${n.width}px`}:s.name=n.id,s};return yt("colgroup",{},t.map(n=>yt("col",i(n))))}VC.props=["columns","tableLayout"];function mCe(){const r=ut(Cl),e=r==null?void 0:r.store,t=I(()=>e.states.fixedLeafColumnsLength.value),i=I(()=>e.states.rightFixedColumns.value.length),n=I(()=>e.states.columns.value.length),s=I(()=>e.states.fixedColumns.value.length),o=I(()=>e.states.rightFixedColumns.value.length);return{leftFixedLeafCount:t,rightFixedLeafCount:i,columnsCount:n,leftFixedCount:s,rightFixedCount:o,columns:e.states.columns}}function gCe(r){const{columns:e}=mCe(),t=Ge("table");return{getCellClasses:(i,n)=>{const s=i[n],o=[t.e("cell"),s.id,s.align,s.labelClassName,...UC(t.b(),n,s.fixed,r.store)];return s.className&&o.push(s.className),s.children||o.push(t.is("leaf")),o},getCellStyles:(i,n)=>{const s=FC(n,i.fixed,r.store);return Uf(s,"left"),Uf(s,"right"),s},columns:e}}var vCe=xe({name:"ElTableFooter",props:{fixed:{type:String,default:""},store:{required:!0,type:Object},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:()=>({prop:"",order:""})}},setup(r){const{getCellClasses:e,getCellStyles:t,columns:i}=gCe(r);return{ns:Ge("table"),getCellClasses:e,getCellStyles:t,columns:i}},render(){const{columns:r,getCellStyles:e,getCellClasses:t,summaryMethod:i,sumText:n,ns:s}=this,o=this.store.states.data.value;let a=[];return i?a=i({columns:r,data:o}):r.forEach((l,c)=>{if(c===0){a[c]=n;return}const u=o.map(f=>Number(f[l.property])),d=[];let h=!0;u.forEach(f=>{if(!Number.isNaN(+f)){h=!1;const m=`${f}`.split(".")[1];d.push(m?m.length:0)}});const p=Math.max.apply(null,d);h?a[c]="":a[c]=u.reduce((f,m)=>{const g=Number(m);return Number.isNaN(+g)?f:Number.parseFloat((f+m).toFixed(Math.min(p,20)))},0)}),yt("table",{class:s.e("footer"),cellspacing:"0",cellpadding:"0",border:"0"},[VC({columns:r}),yt("tbody",[yt("tr",{},[...r.map((l,c)=>yt("td",{key:c,colspan:l.colSpan,rowspan:l.rowSpan,class:t(r,c),style:e(l,c)},[yt("div",{class:["cell",l.labelClassName]},[a[c]])]))])])])}});function yCe(r){return{setCurrentRow:e=>{r.commit("setCurrentRow",e)},getSelectionRows:()=>r.getSelectionRows(),toggleRowSelection:(e,t)=>{r.toggleRowSelection(e,t,!1),r.updateAllSelected()},clearSelection:()=>{r.clearSelection()},clearFilter:e=>{r.clearFilter(e)},toggleAllSelection:()=>{r.commit("toggleAllSelection")},toggleRowExpansion:(e,t)=>{r.toggleRowExpansionAdapter(e,t)},clearSort:()=>{r.clearSort()},sort:(e,t)=>{r.commit("sort",{prop:e,order:t})}}}function bCe(r,e,t,i){const n=W(!1),s=W(null),o=W(!1),a=z=>{o.value=z},l=W({width:null,height:null,headerHeight:null}),c=W(!1),u={display:"inline-block",verticalAlign:"middle"},d=W(),h=W(0),p=W(0),f=W(0),m=W(0),g=W(0);wo(()=>{e.setHeight(r.height)}),wo(()=>{e.setMaxHeight(r.maxHeight)}),Ve(()=>[r.currentRowKey,t.states.rowKey],([z,O])=>{!y(O)||!y(z)||t.setCurrentRowKey(`${z}`)},{immediate:!0}),Ve(()=>r.data,z=>{i.store.commit("setData",z)},{immediate:!0,deep:!0}),wo(()=>{r.expandRowKeys&&t.setExpandRowKeysAdapter(r.expandRowKeys)});const v=()=>{i.store.commit("setHoverRow",null),i.hoverState&&(i.hoverState=null)},x=(z,O)=>{const{pixelX:V,pixelY:U}=O;Math.abs(V)>=Math.abs(U)&&(i.refs.bodyWrapper.scrollLeft+=O.pixelX/5)},b=I(()=>r.height||r.maxHeight||t.states.fixedColumns.value.length>0||t.states.rightFixedColumns.value.length>0),w=I(()=>({width:e.bodyWidth.value?`${e.bodyWidth.value}px`:""})),_=()=>{b.value&&e.updateElsHeight(),e.updateColumnsWidth(),requestAnimationFrame(E)};Et(async()=>{await ht(),t.updateColumns(),C(),requestAnimationFrame(_);const z=i.vnode.el,O=i.refs.headerWrapper;r.flexible&&z&&z.parentElement&&(z.parentElement.style.minWidth="0"),l.value={width:d.value=z.offsetWidth,height:z.offsetHeight,headerHeight:r.showHeader&&O?O.offsetHeight:null},t.states.columns.value.forEach(V=>{V.filteredValue&&V.filteredValue.length&&i.store.commit("filterChange",{column:V,values:V.filteredValue,silent:!0})}),i.$ready=!0});const S=(z,O)=>{if(!z)return;const V=Array.from(z.classList).filter(U=>!U.startsWith("is-scrolling-"));V.push(e.scrollX.value?O:"is-scrolling-none"),z.className=V.join(" ")},T=z=>{const{tableWrapper:O}=i.refs;S(O,z)},M=z=>{const{tableWrapper:O}=i.refs;return!!(O&&O.classList.contains(z))},E=function(){if(!i.refs.scrollBarRef)return;if(!e.scrollX.value){const se="is-scrolling-none";M(se)||T(se);return}const z=i.refs.scrollBarRef.wrapRef;if(!z)return;const{scrollLeft:O,offsetWidth:V,scrollWidth:U}=z,{headerWrapper:G,footerWrapper:X}=i.refs;G&&(G.scrollLeft=O),X&&(X.scrollLeft=O);const ie=U-V-1;O>=ie?T("is-scrolling-right"):T(O===0?"is-scrolling-left":"is-scrolling-middle")},C=()=>{i.refs.scrollBarRef&&(i.refs.scrollBarRef.wrapRef&&Qr(i.refs.scrollBarRef.wrapRef,"scroll",E,{passive:!0}),r.fit?cs(i.vnode.el,P):Qr(window,"resize",P),cs(i.refs.bodyWrapper,()=>{var z,O;P(),(O=(z=i.refs)==null?void 0:z.scrollBarRef)==null||O.update()}))},P=()=>{var z,O,V,U;const G=i.vnode.el;if(!i.$ready||!G)return;let X=!1;const{width:ie,height:se,headerHeight:de}=l.value,K=d.value=G.offsetWidth;ie!==K&&(X=!0);const q=G.offsetHeight;(r.height||b.value)&&se!==q&&(X=!0);const ce=r.tableLayout==="fixed"?i.refs.headerWrapper:(z=i.refs.tableHeaderRef)==null?void 0:z.$el;r.showHeader&&(ce==null?void 0:ce.offsetHeight)!==de&&(X=!0),h.value=((O=i.refs.tableWrapper)==null?void 0:O.scrollHeight)||0,f.value=(ce==null?void 0:ce.scrollHeight)||0,m.value=((V=i.refs.footerWrapper)==null?void 0:V.offsetHeight)||0,g.value=((U=i.refs.appendWrapper)==null?void 0:U.offsetHeight)||0,p.value=h.value-f.value-m.value-g.value,X&&(l.value={width:K,height:q,headerHeight:r.showHeader&&(ce==null?void 0:ce.offsetHeight)||0},_())},A=Hi(),N=I(()=>{const{bodyWidth:z,scrollY:O,gutterWidth:V}=e;return z.value?`${z.value-(O.value?V:0)}px`:""}),R=I(()=>r.maxHeight?"fixed":r.tableLayout),F=I(()=>{if(r.data&&r.data.length)return null;let z="100%";r.height&&p.value&&(z=`${p.value}px`);const O=d.value;return{width:O?`${O}px`:"",height:z}}),B=I(()=>r.height?{height:Number.isNaN(Number(r.height))?r.height:`${r.height}px`}:r.maxHeight?{maxHeight:Number.isNaN(Number(r.maxHeight))?r.maxHeight:`${r.maxHeight}px`}:{}),k=I(()=>r.height?{height:"100%"}:r.maxHeight?Number.isNaN(Number(r.maxHeight))?{maxHeight:`calc(${r.maxHeight} - ${f.value+m.value}px)`}:{maxHeight:`${r.maxHeight-f.value-m.value}px`}:{});return{isHidden:n,renderExpanded:s,setDragVisible:a,isGroup:c,handleMouseLeave:v,handleHeaderFooterMousewheel:x,tableSize:A,emptyBlockStyle:F,handleFixedMousewheel:(z,O)=>{const V=i.refs.bodyWrapper;if(Math.abs(O.spinY)>0){const U=V.scrollTop;O.pixelY<0&&U!==0&&z.preventDefault(),O.pixelY>0&&V.scrollHeight-V.clientHeight>U&&z.preventDefault(),V.scrollTop+=Math.ceil(O.pixelY/5)}else V.scrollLeft+=Math.ceil(O.pixelX/5)},resizeProxyVisible:o,bodyWidth:N,resizeState:l,doLayout:_,tableBodyStyles:w,tableLayout:R,scrollbarViewStyle:u,tableInnerStyle:B,scrollbarStyle:k}}function xCe(r){const e=W(),t=()=>{const i=r.vnode.el.querySelector(".hidden-columns"),n={childList:!0,subtree:!0},s=r.store.states.updateOrderFns;e.value=new MutationObserver(()=>{s.forEach(o=>o())}),e.value.observe(i,n)};Et(()=>{t()}),ki(()=>{var i;(i=e.value)==null||i.disconnect()})}var wCe={data:{type:Array,default:()=>[]},size:jn,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,tooltipOptions:Object,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:()=>({hasChildren:"hasChildren",children:"children"})},lazy:Boolean,load:Function,style:{type:Object,default:()=>({})},className:{type:String,default:""},tableLayout:{type:String,default:"fixed"},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:Boolean,showOverflowTooltip:[Boolean,Object]};const _Ce=()=>{const r=W(),e=(i,n)=>{const s=r.value;s&&s.scrollTo(i,n)},t=(i,n)=>{const s=r.value;s&&Ct(n)&&["Top","Left"].includes(i)&&s[`setScroll${i}`](n)};return{scrollBarRef:r,scrollTo:e,setScrollTop:i=>t("Top",i),setScrollLeft:i=>t("Left",i)}};let SCe=1;const TCe=xe({name:"ElTable",directives:{Mousewheel:vve},components:{TableHeader:uCe,TableBody:fCe,TableFooter:vCe,ElScrollbar:ac,hColgroup:VC},props:wCe,emits:["select","select-all","selection-change","cell-mouse-enter","cell-mouse-leave","cell-contextmenu","cell-click","cell-dblclick","row-click","row-contextmenu","row-dblclick","header-click","header-contextmenu","sort-change","filter-change","current-change","header-dragend","expand-change"],setup(r){const{t:e}=pr(),t=Ge("table"),i=Dt();Yt(Cl,i);const n=YEe(i,r);i.store=n;const s=new JEe({store:i.store,table:i,fit:r.fit,showHeader:r.showHeader});i.layout=s;const o=I(()=>(n.states.data.value||[]).length===0),{setCurrentRow:a,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:p,clearSort:f,sort:m}=yCe(n),{isHidden:g,renderExpanded:v,setDragVisible:x,isGroup:b,handleMouseLeave:w,handleHeaderFooterMousewheel:_,tableSize:S,emptyBlockStyle:T,handleFixedMousewheel:M,resizeProxyVisible:E,bodyWidth:C,resizeState:P,doLayout:A,tableBodyStyles:N,tableLayout:R,scrollbarViewStyle:F,tableInnerStyle:B,scrollbarStyle:k}=bCe(r,s,n,i),{scrollBarRef:z,scrollTo:O,setScrollLeft:V,setScrollTop:U}=_Ce(),G=Es(A,50),X=`${t.namespace.value}-table_${SCe++}`;i.tableId=X,i.state={isGroup:b,resizeState:P,doLayout:A,debouncedUpdateLayout:G};const ie=I(()=>r.sumText||e("el.table.sumText")),se=I(()=>r.emptyText||e("el.table.emptyText"));return xCe(i),{ns:t,layout:s,store:n,handleHeaderFooterMousewheel:_,handleMouseLeave:w,tableId:X,tableSize:S,isHidden:g,isEmpty:o,renderExpanded:v,resizeProxyVisible:E,resizeState:P,isGroup:b,bodyWidth:C,tableBodyStyles:N,emptyBlockStyle:T,debouncedUpdateLayout:G,handleFixedMousewheel:M,setCurrentRow:a,getSelectionRows:l,toggleRowSelection:c,clearSelection:u,clearFilter:d,toggleAllSelection:h,toggleRowExpansion:p,clearSort:f,doLayout:A,sort:m,t:e,setDragVisible:x,context:i,computedSumText:ie,computedEmptyText:se,tableLayout:R,scrollbarViewStyle:F,tableInnerStyle:B,scrollbarStyle:k,scrollBarRef:z,scrollTo:O,setScrollLeft:V,setScrollTop:U}}}),MCe=["data-prefix"],ECe={ref:"hiddenColumns",class:"hidden-columns"};function CCe(r,e,t,i,n,s){const o=gt("hColgroup"),a=gt("table-header"),l=gt("table-body"),c=gt("el-scrollbar"),u=gt("table-footer"),d=Yp("mousewheel");return D(),ee("div",{ref:"tableWrapper",class:j([{[r.ns.m("fit")]:r.fit,[r.ns.m("striped")]:r.stripe,[r.ns.m("border")]:r.border||r.isGroup,[r.ns.m("hidden")]:r.isHidden,[r.ns.m("group")]:r.isGroup,[r.ns.m("fluid-height")]:r.maxHeight,[r.ns.m("scrollable-x")]:r.layout.scrollX.value,[r.ns.m("scrollable-y")]:r.layout.scrollY.value,[r.ns.m("enable-row-hover")]:!r.store.states.isComplex.value,[r.ns.m("enable-row-transition")]:(r.store.states.data.value||[]).length!==0&&(r.store.states.data.value||[]).length<100,"has-footer":r.showSummary},r.ns.m(r.tableSize),r.className,r.ns.b(),r.ns.m(`layout-${r.tableLayout}`)]),style:pt(r.style),"data-prefix":r.ns.namespace.value,onMouseleave:e[0]||(e[0]=(...h)=>r.handleMouseLeave&&r.handleMouseLeave(...h))},[J("div",{class:j(r.ns.e("inner-wrapper")),style:pt(r.tableInnerStyle)},[J("div",ECe,[ze(r.$slots,"default")],512),r.showHeader&&r.tableLayout==="fixed"?It((D(),ee("div",{key:0,ref:"headerWrapper",class:j(r.ns.e("header-wrapper"))},[J("table",{ref:"tableHeader",class:j(r.ns.e("header")),style:pt(r.tableBodyStyles),border:"0",cellpadding:"0",cellspacing:"0"},[ue(o,{columns:r.store.states.columns.value,"table-layout":r.tableLayout},null,8,["columns","table-layout"]),ue(a,{ref:"tableHeaderRef",border:r.border,"default-sort":r.defaultSort,store:r.store,onSetDragVisible:r.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])],6)],2)),[[d,r.handleHeaderFooterMousewheel]]):Re("v-if",!0),J("div",{ref:"bodyWrapper",class:j(r.ns.e("body-wrapper"))},[ue(c,{ref:"scrollBarRef","view-style":r.scrollbarViewStyle,"wrap-style":r.scrollbarStyle,always:r.scrollbarAlwaysOn},{default:me(()=>[J("table",{ref:"tableBody",class:j(r.ns.e("body")),cellspacing:"0",cellpadding:"0",border:"0",style:pt({width:r.bodyWidth,tableLayout:r.tableLayout})},[ue(o,{columns:r.store.states.columns.value,"table-layout":r.tableLayout},null,8,["columns","table-layout"]),r.showHeader&&r.tableLayout==="auto"?(D(),Ae(a,{key:0,ref:"tableHeaderRef",border:r.border,"default-sort":r.defaultSort,store:r.store,onSetDragVisible:r.setDragVisible},null,8,["border","default-sort","store","onSetDragVisible"])):Re("v-if",!0),ue(l,{context:r.context,highlight:r.highlightCurrentRow,"row-class-name":r.rowClassName,"tooltip-effect":r.tooltipEffect,"tooltip-options":r.tooltipOptions,"row-style":r.rowStyle,store:r.store,stripe:r.stripe},null,8,["context","highlight","row-class-name","tooltip-effect","tooltip-options","row-style","store","stripe"])],6),r.isEmpty?(D(),ee("div",{key:0,ref:"emptyBlock",style:pt(r.emptyBlockStyle),class:j(r.ns.e("empty-block"))},[J("span",{class:j(r.ns.e("empty-text"))},[ze(r.$slots,"empty",{},()=>[ir($e(r.computedEmptyText),1)])],2)],6)):Re("v-if",!0),r.$slots.append?(D(),ee("div",{key:1,ref:"appendWrapper",class:j(r.ns.e("append-wrapper"))},[ze(r.$slots,"append")],2)):Re("v-if",!0)]),_:3},8,["view-style","wrap-style","always"])],2),r.showSummary?It((D(),ee("div",{key:1,ref:"footerWrapper",class:j(r.ns.e("footer-wrapper"))},[ue(u,{border:r.border,"default-sort":r.defaultSort,store:r.store,style:pt(r.tableBodyStyles),"sum-text":r.computedSumText,"summary-method":r.summaryMethod},null,8,["border","default-sort","store","style","sum-text","summary-method"])],2)),[[vr,!r.isEmpty],[d,r.handleHeaderFooterMousewheel]]):Re("v-if",!0),r.border||r.isGroup?(D(),ee("div",{key:2,class:j(r.ns.e("border-left-patch"))},null,2)):Re("v-if",!0)],6),It(J("div",{ref:"resizeProxy",class:j(r.ns.e("column-resize-proxy"))},null,2),[[vr,r.resizeProxyVisible]])],46,MCe)}var ACe=Qe(TCe,[["render",CCe],["__file","/home/runner/work/element-plus/element-plus/packages/components/table/src/table.vue"]]);const NCe={selection:"table-column--selection",expand:"table__expand-column"},RCe={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:""},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},kCe=r=>NCe[r]||"",LCe={selection:{renderHeader({store:r,column:e}){function t(){return r.states.data.value&&r.states.data.value.length===0}return yt(oa,{disabled:t(),size:r.states.tableSize.value,indeterminate:r.states.selection.value.length>0&&!r.states.isAllSelected.value,"onUpdate:modelValue":r.toggleAllSelection,modelValue:r.states.isAllSelected.value,ariaLabel:e.label})},renderCell({row:r,column:e,store:t,$index:i}){return yt(oa,{disabled:e.selectable?!e.selectable.call(null,r,i):!1,size:t.states.tableSize.value,onChange:()=>{t.commit("rowSelectedChanged",r)},onClick:n=>n.stopPropagation(),modelValue:t.isSelected(r),ariaLabel:e.label})},sortable:!1,resizable:!1},index:{renderHeader({column:r}){return r.label||"#"},renderCell({column:r,$index:e}){let t=e+1;const i=r.index;return typeof i=="number"?t=e+i:typeof i=="function"&&(t=i(e)),yt("div",{},[t])},sortable:!1},expand:{renderHeader({column:r}){return r.label||""},renderCell({row:r,store:e,expanded:t}){const{ns:i}=e,n=[i.e("expand-icon")];return t&&n.push(i.em("expand-icon","expanded")),yt("div",{class:n,onClick:function(s){s.stopPropagation(),e.toggleRowExpansion(r)}},{default:()=>[yt(dt,null,{default:()=>[yt(Cs)]})]})},sortable:!1,resizable:!1}};function OCe({row:r,column:e,$index:t}){var i;const n=e.property,s=n&&ax(r,n).value;return e&&e.formatter?e.formatter(r,e,s,t):((i=s==null?void 0:s.toString)==null?void 0:i.call(s))||""}function PCe({row:r,treeNode:e,store:t},i=!1){const{ns:n}=t;if(!e)return i?[yt("span",{class:n.e("placeholder")})]:null;const s=[],o=function(a){a.stopPropagation(),!e.loading&&t.loadOrToggle(r)};if(e.indent&&s.push(yt("span",{class:n.e("indent"),style:{"padding-left":`${e.indent}px`}})),typeof e.expanded=="boolean"&&!e.noLazyChildren){const a=[n.e("expand-icon"),e.expanded?n.em("expand-icon","expanded"):""];let l=Cs;e.loading&&(l=du),s.push(yt("div",{class:a,onClick:o},{default:()=>[yt(dt,{class:{[n.is("loading")]:e.loading}},{default:()=>[yt(l)]})]}))}else s.push(yt("span",{class:n.e("placeholder")}));return s}function l6(r,e){return r.reduce((t,i)=>(t[i]=i,t),e)}function ICe(r,e){const t=Dt();return{registerComplexWatchers:()=>{const i=["fixed"],n={realWidth:"width",realMinWidth:"minWidth"},s=l6(i,n);Object.keys(s).forEach(o=>{const a=n[o];er(e,a)&&Ve(()=>e[a],l=>{let c=l;a==="width"&&o==="realWidth"&&(c=DC(l)),a==="minWidth"&&o==="realMinWidth"&&(c=Q5(l)),t.columnConfig.value[a]=c,t.columnConfig.value[o]=c;const u=a==="fixed";r.value.store.scheduleLayout(u)})})},registerNormalWatchers:()=>{const i=["label","filters","filterMultiple","filteredValue","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],n={property:"prop",align:"realAlign",headerAlign:"realHeaderAlign"},s=l6(i,n);Object.keys(s).forEach(o=>{const a=n[o];er(e,a)&&Ve(()=>e[a],l=>{t.columnConfig.value[o]=l})})}}}function DCe(r,e,t){const i=Dt(),n=W(""),s=W(!1),o=W(),a=W(),l=Ge("table");wo(()=>{o.value=r.align?`is-${r.align}`:null,o.value}),wo(()=>{a.value=r.headerAlign?`is-${r.headerAlign}`:o.value,a.value});const c=I(()=>{let g=i.vnode.vParent||i.parent;for(;g&&!g.tableId&&!g.columnId;)g=g.vnode.vParent||g.parent;return g}),u=I(()=>{const{store:g}=i.parent;if(!g)return!1;const{treeData:v}=g.states,x=v.value;return x&&Object.keys(x).length>0}),d=W(DC(r.width)),h=W(Q5(r.minWidth)),p=g=>(d.value&&(g.width=d.value),h.value&&(g.minWidth=h.value),!d.value&&h.value&&(g.width=void 0),g.minWidth||(g.minWidth=80),g.realWidth=Number(g.width===void 0?g.minWidth:g.width),g),f=g=>{const v=g.type,x=LCe[v]||{};Object.keys(x).forEach(w=>{const _=x[w];w!=="className"&&_!==void 0&&(g[w]=_)});const b=kCe(v);if(b){const w=`${y(l.namespace)}-${b}`;g.className=g.className?`${g.className} ${w}`:w}return g},m=g=>{Array.isArray(g)?g.forEach(x=>v(x)):v(g);function v(x){var b;((b=x==null?void 0:x.type)==null?void 0:b.name)==="ElTableColumn"&&(x.vParent=i)}};return{columnId:n,realAlign:o,isSubColumn:s,realHeaderAlign:a,columnOrTableParent:c,setColumnWidth:p,setColumnForcedProps:f,setColumnRenders:g=>{r.renderHeader||g.type!=="selection"&&(g.renderHeader=x=>{i.columnConfig.value.label;const b=e.header;return b?b(x):g.label});let v=g.renderCell;return g.type==="expand"?(g.renderCell=x=>yt("div",{class:"cell"},[v(x)]),t.value.renderExpanded=x=>e.default?e.default(x):e.default):(v=v||OCe,g.renderCell=x=>{let b=null;if(e.default){const E=e.default(x);b=E.some(C=>C.type!==Ss)?E:v(x)}else b=v(x);const{columns:w}=t.value.store.states,_=w.value.findIndex(E=>E.type==="default"),S=u.value&&x.cellIndex===_,T=PCe(x,S),M={class:"cell",style:{}};return g.showOverflowTooltip&&(M.class=`${M.class} ${y(l.namespace)}-tooltip`,M.style={width:`${(x.column.realWidth||Number(x.column.width))-1}px`}),m(b),yt("div",M,[T,b])}),g},getPropsData:(...g)=>g.reduce((v,x)=>(Array.isArray(x)&&x.forEach(b=>{v[b]=r[b]}),v),{}),getColumnElIndex:(g,v)=>Array.prototype.indexOf.call(g,v),updateColumnOrder:()=>{t.value.store.commit("updateColumnOrder",i.columnConfig.value)}}}var UCe={type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showOverflowTooltip:{type:[Boolean,Object],default:void 0},fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:()=>["ascending","descending",null],validator:r=>r.every(e=>["ascending","descending",null].includes(e))}};let FCe=1;var c6=xe({name:"ElTableColumn",components:{ElCheckbox:oa},props:UCe,setup(r,{slots:e}){const t=Dt(),i=W({}),n=I(()=>{let b=t.parent;for(;b&&!b.tableId;)b=b.parent;return b}),{registerNormalWatchers:s,registerComplexWatchers:o}=ICe(n,r),{columnId:a,isSubColumn:l,realHeaderAlign:c,columnOrTableParent:u,setColumnWidth:d,setColumnForcedProps:h,setColumnRenders:p,getPropsData:f,getColumnElIndex:m,realAlign:g,updateColumnOrder:v}=DCe(r,e,n),x=u.value;a.value=`${x.tableId||x.columnId}_column_${FCe++}`,I1(()=>{l.value=n.value!==x;const b=r.type||"default",w=r.sortable===""?!0:r.sortable,_=rn(r.showOverflowTooltip)?x.props.showOverflowTooltip:r.showOverflowTooltip,S={...RCe[b],id:a.value,type:b,property:r.prop||r.property,align:g,headerAlign:c,showOverflowTooltip:_,filterable:r.filters||r.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,isSubColumn:!1,filterOpened:!1,sortable:w,index:r.index,rawColumnKey:t.vnode.key};let T=f(["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],["sortMethod","sortBy","sortOrders"],["selectable","reserveSelection"],["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"]);T=BEe(S,T),T=VEe(p,d,h)(T),i.value=T,s(),o()}),Et(()=>{var b;const w=u.value,_=l.value?w.vnode.el.children:(b=w.refs.hiddenColumns)==null?void 0:b.children,S=()=>m(_||[],t.vnode.el);i.value.getColumnIndex=S,S()>-1&&n.value.store.commit("insertColumn",i.value,l.value?w.columnConfig.value:null,v)}),Zr(()=>{n.value.store.commit("removeColumn",i.value,l.value?x.columnConfig.value:null,v)}),t.columnId=a.value,t.columnConfig=i},render(){var r,e,t;try{const i=(e=(r=this.$slots).default)==null?void 0:e.call(r,{row:{},column:{},$index:-1}),n=[];if(Array.isArray(i))for(const s of i)((t=s.type)==null?void 0:t.name)==="ElTableColumn"||s.shapeFlag&2?n.push(s):s.type===ct&&Array.isArray(s.children)&&s.children.forEach(o=>{(o==null?void 0:o.patchFlag)!==1024&&!kt(o==null?void 0:o.children)&&n.push(o)});return yt("div",n)}catch{return yt("div",[])}}});const u6=zt(ACe,{TableColumn:c6}),BCe=fi(c6);var d0=(r=>(r.ASC="asc",r.DESC="desc",r))(d0||{}),h0=(r=>(r.CENTER="center",r.RIGHT="right",r))(h0||{}),d6=(r=>(r.LEFT="left",r.RIGHT="right",r))(d6||{});const GC={asc:"desc",desc:"asc"},p0=Symbol("placeholder"),zCe=(r,e,t)=>{var i;const n={flexGrow:0,flexShrink:0,...t?{}:{flexGrow:r.flexGrow||0,flexShrink:r.flexShrink||1}};t||(n.flexShrink=1);const s={...(i=r.style)!=null?i:{},...n,flexBasis:"auto",width:r.width};return e||(r.maxWidth&&(s.maxWidth=r.maxWidth),r.minWidth&&(s.minWidth=r.minWidth)),s};function VCe(r,e,t){const i=I(()=>y(e).filter(m=>!m.hidden)),n=I(()=>y(i).filter(m=>m.fixed==="left"||m.fixed===!0)),s=I(()=>y(i).filter(m=>m.fixed==="right")),o=I(()=>y(i).filter(m=>!m.fixed)),a=I(()=>{const m=[];return y(n).forEach(g=>{m.push({...g,placeholderSign:p0})}),y(o).forEach(g=>{m.push(g)}),y(s).forEach(g=>{m.push({...g,placeholderSign:p0})}),m}),l=I(()=>y(n).length||y(s).length),c=I(()=>y(e).reduce((m,g)=>(m[g.key]=zCe(g,y(t),r.fixed),m),{})),u=I(()=>y(i).reduce((m,g)=>m+g.width,0)),d=m=>y(e).find(g=>g.key===m),h=m=>y(c)[m],p=(m,g)=>{m.width=g};function f(m){var g;const{key:v}=m.currentTarget.dataset;if(!v)return;const{sortState:x,sortBy:b}=r;let w=d0.ASC;Ht(x)?w=GC[x[v]]:w=GC[b.order],(g=r.onColumnSort)==null||g.call(r,{column:d(v),key:v,order:w})}return{columns:e,columnsStyles:c,columnsTotalWidth:u,fixedColumnsOnLeft:n,fixedColumnsOnRight:s,hasFixedColumns:l,mainColumns:a,normalColumns:o,visibleColumns:i,getColumn:d,getColumnStyle:h,updateColumnWidth:p,onColumnSorted:f}}const GCe=(r,{mainTableRef:e,leftTableRef:t,rightTableRef:i,onMaybeEndReached:n})=>{const s=W({scrollLeft:0,scrollTop:0});function o(p){var f,m,g;const{scrollTop:v}=p;(f=e.value)==null||f.scrollTo(p),(m=t.value)==null||m.scrollToTop(v),(g=i.value)==null||g.scrollToTop(v)}function a(p){s.value=p,o(p)}function l(p){s.value.scrollTop=p,o(y(s))}function c(p){var f,m;s.value.scrollLeft=p,(m=(f=e.value)==null?void 0:f.scrollTo)==null||m.call(f,y(s))}function u(p){var f;a(p),(f=r.onScroll)==null||f.call(r,p)}function d({scrollTop:p}){const{scrollTop:f}=y(s);p!==f&&l(p)}function h(p,f="auto"){var m;(m=e.value)==null||m.scrollToRow(p,f)}return Ve(()=>y(s).scrollTop,(p,f)=>{p>f&&n()}),{scrollPos:s,scrollTo:a,scrollToLeft:c,scrollToTop:l,scrollToRow:h,onScroll:u,onVerticalScroll:d}},jCe=(r,{mainTableRef:e,leftTableRef:t,rightTableRef:i})=>{const n=Dt(),{emit:s}=n,o=Vr(!1),a=Vr(null),l=W(r.defaultExpandedRowKeys||[]),c=W(-1),u=Vr(null),d=W({}),h=W({}),p=Vr({}),f=Vr({}),m=Vr({}),g=I(()=>Ct(r.estimatedRowHeight));function v(M){var E;(E=r.onRowsRendered)==null||E.call(r,M),M.rowCacheEnd>y(c)&&(c.value=M.rowCacheEnd)}function x({hovered:M,rowKey:E}){a.value=M?E:null}function b({expanded:M,rowData:E,rowIndex:C,rowKey:P}){var A,N;const R=[...y(l)],F=R.indexOf(P);M?F===-1&&R.push(P):F>-1&&R.splice(F,1),l.value=R,s("update:expandedRowKeys",R),(A=r.onRowExpand)==null||A.call(r,{expanded:M,rowData:E,rowIndex:C,rowKey:P}),(N=r.onExpandedRowsChange)==null||N.call(r,R)}const w=Es(()=>{var M,E,C,P;o.value=!0,d.value={...y(d),...y(h)},_(y(u),!1),h.value={},u.value=null,(M=e.value)==null||M.forceUpdate(),(E=t.value)==null||E.forceUpdate(),(C=i.value)==null||C.forceUpdate(),(P=n.proxy)==null||P.$forceUpdate(),o.value=!1},0);function _(M,E=!1){y(g)&&[e,t,i].forEach(C=>{const P=y(C);P&&P.resetAfterRowIndex(M,E)})}function S(M,E,C){const P=y(u);(P===null||P>C)&&(u.value=C),h.value[M]=E}function T({rowKey:M,height:E,rowIndex:C},P){P?P===d6.RIGHT?m.value[M]=E:p.value[M]=E:f.value[M]=E;const A=Math.max(...[p,m,f].map(N=>N.value[M]||0));y(d)[M]!==A&&(S(M,A,C),w())}return{hoveringRowKey:a,expandedRowKeys:l,lastRenderedRowIndex:c,isDynamic:g,isResetting:o,rowHeights:d,resetAfterIndex:_,onRowExpanded:b,onRowHovered:x,onRowsRendered:v,onRowHeightChange:T}},HCe=(r,{expandedRowKeys:e,lastRenderedRowIndex:t,resetAfterIndex:i})=>{const n=W({}),s=I(()=>{const a={},{data:l,rowKey:c}=r,u=y(e);if(!u||!u.length)return l;const d=[],h=new Set;u.forEach(f=>h.add(f));let p=l.slice();for(p.forEach(f=>a[f[c]]=0);p.length>0;){const f=p.shift();d.push(f),h.has(f[c])&&Array.isArray(f.children)&&f.children.length>0&&(p=[...f.children,...p],f.children.forEach(m=>a[m[c]]=a[f[c]]+1))}return n.value=a,d}),o=I(()=>{const{data:a,expandColumnKey:l}=r;return l?y(s):a});return Ve(o,(a,l)=>{a!==l&&(t.value=-1,i(0,!0))}),{data:o,depthMap:n}},WCe=(r,e)=>r+e,pw=r=>lt(r)?r.reduce(WCe,0):r,nh=(r,e,t={})=>Nt(r)?r(e):r??t,Tu=r=>(["width","maxWidth","minWidth","height"].forEach(e=>{r[e]=Ti(r[e])}),r),h6=r=>ei(r)?e=>yt(r,e):r,$Ce=(r,{columnsTotalWidth:e,data:t,fixedColumnsOnLeft:i,fixedColumnsOnRight:n})=>{const s=I(()=>{const{fixed:b,width:w,vScrollbarSize:_}=r,S=w-_;return b?Math.max(Math.round(y(e)),S):S}),o=I(()=>y(s)+(r.fixed?r.vScrollbarSize:0)),a=I(()=>{const{height:b=0,maxHeight:w=0,footerHeight:_,hScrollbarSize:S}=r;if(w>0){const T=y(f),M=y(l),E=y(p)+T+M+S;return Math.min(E,w-_)}return b-_}),l=I(()=>{const{rowHeight:b,estimatedRowHeight:w}=r,_=y(t);return Ct(w)?_.length*w:_.length*b}),c=I(()=>{const{maxHeight:b}=r,w=y(a);if(Ct(b)&&b>0)return w;const _=y(l)+y(p)+y(f);return Math.min(w,_)}),u=b=>b.width,d=I(()=>pw(y(i).map(u))),h=I(()=>pw(y(n).map(u))),p=I(()=>pw(r.headerHeight)),f=I(()=>{var b;return(((b=r.fixedData)==null?void 0:b.length)||0)*r.rowHeight}),m=I(()=>y(a)-y(p)-y(f)),g=I(()=>{const{style:b={},height:w,width:_}=r;return Tu({...b,height:w,width:_})}),v=I(()=>Tu({height:r.footerHeight})),x=I(()=>({top:Ti(y(p)),bottom:Ti(r.footerHeight),width:Ti(r.width)}));return{bodyWidth:s,fixedTableHeight:c,mainTableHeight:a,leftTableWidth:d,rightTableWidth:h,headerWidth:o,rowsHeight:l,windowHeight:m,footerHeight:v,emptyStyle:x,rootStyle:g,headerHeight:p}},XCe=r=>{const e=W(),t=W(0),i=W(0);let n;return Et(()=>{n=cs(e,([s])=>{const{width:o,height:a}=s.contentRect,{paddingLeft:l,paddingRight:c,paddingTop:u,paddingBottom:d}=getComputedStyle(s.target),h=Number.parseInt(l)||0,p=Number.parseInt(c)||0,f=Number.parseInt(u)||0,m=Number.parseInt(d)||0;t.value=o-h-p,i.value=a-f-m}).stop}),Zr(()=>{n==null||n()}),Ve([t,i],([s,o])=>{var a;(a=r.onResize)==null||a.call(r,{width:s,height:o})}),{sizer:e,width:t,height:i}};function qCe(r){const e=W(),t=W(),i=W(),{columns:n,columnsStyles:s,columnsTotalWidth:o,fixedColumnsOnLeft:a,fixedColumnsOnRight:l,hasFixedColumns:c,mainColumns:u,onColumnSorted:d}=VCe(r,ai(r,"columns"),ai(r,"fixed")),{scrollTo:h,scrollToLeft:p,scrollToTop:f,scrollToRow:m,onScroll:g,onVerticalScroll:v,scrollPos:x}=GCe(r,{mainTableRef:e,leftTableRef:t,rightTableRef:i,onMaybeEndReached:L}),{expandedRowKeys:b,hoveringRowKey:w,lastRenderedRowIndex:_,isDynamic:S,isResetting:T,rowHeights:M,resetAfterIndex:E,onRowExpanded:C,onRowHeightChange:P,onRowHovered:A,onRowsRendered:N}=jCe(r,{mainTableRef:e,leftTableRef:t,rightTableRef:i}),{data:R,depthMap:F}=HCe(r,{expandedRowKeys:b,lastRenderedRowIndex:_,resetAfterIndex:E}),{bodyWidth:B,fixedTableHeight:k,mainTableHeight:z,leftTableWidth:O,rightTableWidth:V,headerWidth:U,rowsHeight:G,windowHeight:X,footerHeight:ie,emptyStyle:se,rootStyle:de,headerHeight:K}=$Ce(r,{columnsTotalWidth:o,data:R,fixedColumnsOnLeft:a,fixedColumnsOnRight:l}),q=Vr(!1),ce=W(),Te=I(()=>{const $=y(R).length===0;return lt(r.fixedData)?r.fixedData.length===0&&$:$});function Z($){const{estimatedRowHeight:re,rowHeight:te,rowKey:le}=r;return re?y(M)[y(R)[$][le]]||re:te}function L(){const{onEndReached:$}=r;if(!$)return;const{scrollTop:re}=y(x),te=y(G),le=y(X),ge=te-(re+le)+r.hScrollbarSize;y(_)>=0&&te===re+y(z)-y(K)&&$(ge)}return Ve(()=>r.expandedRowKeys,$=>b.value=$,{deep:!0}),{columns:n,containerRef:ce,mainTableRef:e,leftTableRef:t,rightTableRef:i,isDynamic:S,isResetting:T,isScrolling:q,hoveringRowKey:w,hasFixedColumns:c,columnsStyles:s,columnsTotalWidth:o,data:R,expandedRowKeys:b,depthMap:F,fixedColumnsOnLeft:a,fixedColumnsOnRight:l,mainColumns:u,bodyWidth:B,emptyStyle:se,rootStyle:de,headerWidth:U,footerHeight:ie,mainTableHeight:z,fixedTableHeight:k,leftTableWidth:O,rightTableWidth:V,showEmpty:Te,getRowHeight:Z,onColumnSorted:d,onRowHovered:A,onRowExpanded:C,onRowsRendered:N,onRowHeightChange:P,scrollTo:h,scrollToLeft:p,scrollToTop:f,scrollToRow:m,onScroll:g,onVerticalScroll:v}}const jC=Symbol("tableV2"),p6=String,f0={type:Oe(Array),required:!0},HC={type:Oe(Array)},f6={...HC,required:!0},KCe=String,m6={type:Oe(Array),default:()=>ri([])},sh={type:Number,required:!0},g6={type:Oe([String,Number,Symbol]),default:"id"},v6={type:Oe(Object)},oh=et({class:String,columns:f0,columnsStyles:{type:Oe(Object),required:!0},depth:Number,expandColumnKey:KCe,estimatedRowHeight:{...th.estimatedRowHeight,default:void 0},isScrolling:Boolean,onRowExpand:{type:Oe(Function)},onRowHover:{type:Oe(Function)},onRowHeightChange:{type:Oe(Function)},rowData:{type:Oe(Object),required:!0},rowEventHandlers:{type:Oe(Object)},rowIndex:{type:Number,required:!0},rowKey:g6,style:{type:Oe(Object)}}),WC={type:Number,required:!0},$C=et({class:String,columns:f0,fixedHeaderData:{type:Oe(Array)},headerData:{type:Oe(Array),required:!0},headerHeight:{type:Oe([Number,Array]),default:50},rowWidth:WC,rowHeight:{type:Number,default:50},height:WC,width:WC}),fw=et({columns:f0,data:f6,fixedData:HC,estimatedRowHeight:oh.estimatedRowHeight,width:sh,height:sh,headerWidth:sh,headerHeight:$C.headerHeight,bodyWidth:sh,rowHeight:sh,cache:S5.cache,useIsScrolling:Boolean,scrollbarAlwaysOn:th.scrollbarAlwaysOn,scrollbarStartGap:th.scrollbarStartGap,scrollbarEndGap:th.scrollbarEndGap,class:p6,style:v6,containerStyle:v6,getRowHeight:{type:Oe(Function),required:!0},rowKey:oh.rowKey,onRowsRendered:{type:Oe(Function)},onScroll:{type:Oe(Function)}}),YCe=et({cache:fw.cache,estimatedRowHeight:oh.estimatedRowHeight,rowKey:g6,headerClass:{type:Oe([String,Function])},headerProps:{type:Oe([Object,Function])},headerCellProps:{type:Oe([Object,Function])},headerHeight:$C.headerHeight,footerHeight:{type:Number,default:0},rowClass:{type:Oe([String,Function])},rowProps:{type:Oe([Object,Function])},rowHeight:{type:Number,default:50},cellProps:{type:Oe([Object,Function])},columns:f0,data:f6,dataGetter:{type:Oe(Function)},fixedData:HC,expandColumnKey:oh.expandColumnKey,expandedRowKeys:m6,defaultExpandedRowKeys:m6,class:p6,fixed:Boolean,style:{type:Oe(Object)},width:sh,height:sh,maxHeight:Number,useIsScrolling:Boolean,indentSize:{type:Number,default:12},iconSize:{type:Number,default:12},hScrollbarSize:th.hScrollbarSize,vScrollbarSize:th.vScrollbarSize,scrollbarAlwaysOn:E5.alwaysOn,sortBy:{type:Oe(Object),default:()=>({})},sortState:{type:Oe(Object),default:void 0},onColumnSort:{type:Oe(Function)},onExpandedRowsChange:{type:Oe(Function)},onEndReached:{type:Oe(Function)},onRowExpand:oh.onRowExpand,onScroll:fw.onScroll,onRowsRendered:fw.onRowsRendered,rowEventHandlers:oh.rowEventHandlers}),XC=(r,{slots:e})=>{var t;const{cellData:i,style:n}=r,s=((t=i==null?void 0:i.toString)==null?void 0:t.call(i))||"";return ue("div",{class:r.class,title:s,style:n},[e.default?e.default(r):s])};XC.displayName="ElTableV2Cell",XC.inheritAttrs=!1;const qC=(r,{slots:e})=>{var t,i;return e.default?e.default(r):ue("div",{class:r.class,title:(t=r.column)==null?void 0:t.title},[(i=r.column)==null?void 0:i.title])};qC.displayName="ElTableV2HeaderCell",qC.inheritAttrs=!1;const ZCe=et({class:String,columns:f0,columnsStyles:{type:Oe(Object),required:!0},headerIndex:Number,style:{type:Oe(Object)}}),JCe=xe({name:"ElTableV2HeaderRow",props:ZCe,setup(r,{slots:e}){return()=>{const{columns:t,columnsStyles:i,headerIndex:n,style:s}=r;let o=t.map((a,l)=>e.cell({columns:t,column:a,columnIndex:l,headerIndex:n,style:i[a.key]}));return e.header&&(o=e.header({cells:o.map(a=>lt(a)&&a.length===1?a[0]:a),columns:t,headerIndex:n})),ue("div",{class:r.class,style:s,role:"row"},[o])}}}),QCe="ElTableV2Header",eAe=xe({name:QCe,props:$C,setup(r,{slots:e,expose:t}){const i=Ge("table-v2"),n=W(),s=I(()=>Tu({width:r.width,height:r.height})),o=I(()=>Tu({width:r.rowWidth,height:r.height})),a=I(()=>Gd(y(r.headerHeight))),l=d=>{const h=y(n);ht(()=>{h!=null&&h.scroll&&h.scroll({left:d})})},c=()=>{const d=i.e("fixed-header-row"),{columns:h,fixedHeaderData:p,rowHeight:f}=r;return p==null?void 0:p.map((m,g)=>{var v;const x=Tu({height:f,width:"100%"});return(v=e.fixed)==null?void 0:v.call(e,{class:d,columns:h,rowData:m,rowIndex:-(g+1),style:x})})},u=()=>{const d=i.e("dynamic-header-row"),{columns:h}=r;return y(a).map((p,f)=>{var m;const g=Tu({width:"100%",height:p});return(m=e.dynamic)==null?void 0:m.call(e,{class:d,columns:h,headerIndex:f,style:g})})};return t({scrollToLeft:l}),()=>{if(!(r.height<=0))return ue("div",{ref:n,class:r.class,style:y(s),role:"rowgroup"},[ue("div",{style:y(o),class:i.e("header")},[u(),c()])])}}}),tAe=r=>{const{isScrolling:e}=ut(jC),t=W(!1),i=W(),n=I(()=>Ct(r.estimatedRowHeight)&&r.rowIndex>=0),s=(l=!1)=>{const c=y(i);if(!c)return;const{columns:u,onRowHeightChange:d,rowKey:h,rowIndex:p,style:f}=r,{height:m}=c.getBoundingClientRect();t.value=!0,ht(()=>{if(l||m!==Number.parseInt(f.height)){const g=u[0],v=(g==null?void 0:g.placeholderSign)===p0;d==null||d({rowKey:h,height:m,rowIndex:p},g&&!v&&g.fixed)}})},o=I(()=>{const{rowData:l,rowIndex:c,rowKey:u,onRowHover:d}=r,h=r.rowEventHandlers||{},p={};return Object.entries(h).forEach(([f,m])=>{Nt(m)&&(p[f]=g=>{m({event:g,rowData:l,rowIndex:c,rowKey:u})})}),d&&[{name:"onMouseleave",hovered:!1},{name:"onMouseenter",hovered:!0}].forEach(({name:f,hovered:m})=>{const g=p[f];p[f]=v=>{d({event:v,hovered:m,rowData:l,rowIndex:c,rowKey:u}),g==null||g(v)}}),p}),a=l=>{const{onRowExpand:c,rowData:u,rowIndex:d,rowKey:h}=r;c==null||c({expanded:l,rowData:u,rowIndex:d,rowKey:h})};return Et(()=>{y(n)&&s(!0)}),{isScrolling:e,measurable:n,measured:t,rowRef:i,eventHandlers:o,onExpand:a}},rAe="ElTableV2TableRow",iAe=xe({name:rAe,props:oh,setup(r,{expose:e,slots:t,attrs:i}){const{eventHandlers:n,isScrolling:s,measurable:o,measured:a,rowRef:l,onExpand:c}=tAe(r);return e({onExpand:c}),()=>{const{columns:u,columnsStyles:d,expandColumnKey:h,depth:p,rowData:f,rowIndex:m,style:g}=r;let v=u.map((x,b)=>{const w=lt(f.children)&&f.children.length>0&&x.key===h;return t.cell({column:x,columns:u,columnIndex:b,depth:p,style:d[x.key],rowData:f,rowIndex:m,isScrolling:y(s),expandIconProps:w?{rowData:f,rowIndex:m,onExpand:c}:void 0})});if(t.row&&(v=t.row({cells:v.map(x=>lt(x)&&x.length===1?x[0]:x),style:g,columns:u,depth:p,rowData:f,rowIndex:m,isScrolling:y(s)})),y(o)){const{height:x,...b}=g||{},w=y(a);return ue("div",qt({ref:l,class:r.class,style:w?g:b,role:"row"},i,y(n)),[v])}return ue("div",qt(i,{ref:l,class:r.class,style:g,role:"row"},y(n)),[v])}}}),nAe=r=>{const{sortOrder:e}=r;return ue(dt,{size:14,class:r.class},{default:()=>[e===d0.ASC?ue(hue,null,null):ue(oue,null,null)]})},sAe=r=>{const{expanded:e,expandable:t,onExpand:i,style:n,size:s}=r,o={onClick:t?()=>i(!e):void 0,class:r.class};return ue(dt,qt(o,{size:s,style:n}),{default:()=>[ue(Cs,null,null)]})},oAe="ElTableV2Grid",aAe=r=>{const e=W(),t=W(),i=I(()=>{const{data:m,rowHeight:g,estimatedRowHeight:v}=r;if(!v)return m.length*g}),n=I(()=>{const{fixedData:m,rowHeight:g}=r;return((m==null?void 0:m.length)||0)*g}),s=I(()=>pw(r.headerHeight)),o=I(()=>{const{height:m}=r;return Math.max(0,m-y(s)-y(n))}),a=I(()=>y(s)+y(n)>0),l=({data:m,rowIndex:g})=>m[g][r.rowKey];function c({rowCacheStart:m,rowCacheEnd:g,rowVisibleStart:v,rowVisibleEnd:x}){var b;(b=r.onRowsRendered)==null||b.call(r,{rowCacheStart:m,rowCacheEnd:g,rowVisibleStart:v,rowVisibleEnd:x})}function u(m,g){var v;(v=t.value)==null||v.resetAfterRowIndex(m,g)}function d(m,g){const v=y(e),x=y(t);!v||!x||(Ht(m)?(v.scrollToLeft(m.scrollLeft),x.scrollTo(m)):(v.scrollToLeft(m),x.scrollTo({scrollLeft:m,scrollTop:g})))}function h(m){var g;(g=y(t))==null||g.scrollTo({scrollTop:m})}function p(m,g){var v;(v=y(t))==null||v.scrollToItem(m,1,g)}function f(){var m,g;(m=y(t))==null||m.$forceUpdate(),(g=y(e))==null||g.$forceUpdate()}return{bodyRef:t,forceUpdate:f,fixedRowHeight:n,gridHeight:o,hasHeader:a,headerHeight:s,headerRef:e,totalHeight:i,itemKey:l,onItemRendered:c,resetAfterRowIndex:u,scrollTo:d,scrollToTop:h,scrollToRow:p}},KC=xe({name:oAe,props:fw,setup(r,{slots:e,expose:t}){const{ns:i}=ut(jC),{bodyRef:n,fixedRowHeight:s,gridHeight:o,hasHeader:a,headerRef:l,headerHeight:c,totalHeight:u,forceUpdate:d,itemKey:h,onItemRendered:p,resetAfterRowIndex:f,scrollTo:m,scrollToTop:g,scrollToRow:v}=aAe(r);t({forceUpdate:d,totalHeight:u,scrollTo:m,scrollToTop:g,scrollToRow:v,resetAfterRowIndex:f});const x=()=>r.bodyWidth;return()=>{const{cache:b,columns:w,data:_,fixedData:S,useIsScrolling:T,scrollbarAlwaysOn:M,scrollbarEndGap:E,scrollbarStartGap:C,style:P,rowHeight:A,bodyWidth:N,estimatedRowHeight:R,headerWidth:F,height:B,width:k,getRowHeight:z,onScroll:O}=r,V=Ct(R),U=V?BTe:ITe,G=y(c);return ue("div",{role:"table",class:[i.e("table"),r.class],style:P},[ue(U,{ref:n,data:_,useIsScrolling:T,itemKey:h,columnCache:0,columnWidth:V?x:N,totalColumn:1,totalRow:_.length,rowCache:b,rowHeight:V?z:A,width:k,height:y(o),class:i.e("body"),role:"rowgroup",scrollbarStartGap:C,scrollbarEndGap:E,scrollbarAlwaysOn:M,onScroll:O,onItemRendered:p,perfMode:!1},{default:X=>{var ie;const se=_[X.rowIndex];return(ie=e.row)==null?void 0:ie.call(e,{...X,columns:w,rowData:se})}}),y(a)&&ue(eAe,{ref:l,class:i.e("header-wrapper"),columns:w,headerData:_,headerHeight:r.headerHeight,fixedHeaderData:S,rowWidth:F,rowHeight:A,width:k,height:Math.min(G+y(s),B)},{dynamic:e.header,fixed:e.row})])}}});function lAe(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!ei(r)}const cAe=(r,{slots:e})=>{const{mainTableRef:t,...i}=r;return ue(KC,qt({ref:t},i),lAe(e)?e:{default:()=>[e]})};function uAe(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!ei(r)}const dAe=(r,{slots:e})=>{if(!r.columns.length)return;const{leftTableRef:t,...i}=r;return ue(KC,qt({ref:t},i),uAe(e)?e:{default:()=>[e]})};function hAe(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!ei(r)}const pAe=(r,{slots:e})=>{if(!r.columns.length)return;const{rightTableRef:t,...i}=r;return ue(KC,qt({ref:t},i),hAe(e)?e:{default:()=>[e]})};function fAe(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!ei(r)}const mAe=(r,{slots:e})=>{const{columns:t,columnsStyles:i,depthMap:n,expandColumnKey:s,expandedRowKeys:o,estimatedRowHeight:a,hasFixedColumns:l,hoveringRowKey:c,rowData:u,rowIndex:d,style:h,isScrolling:p,rowProps:f,rowClass:m,rowKey:g,rowEventHandlers:v,ns:x,onRowHovered:b,onRowExpanded:w}=r,_=nh(m,{columns:t,rowData:u,rowIndex:d},""),S=nh(f,{columns:t,rowData:u,rowIndex:d}),T=u[g],M=n[T]||0,E=!!s,C=d<0,P=[x.e("row"),_,{[x.e(`row-depth-${M}`)]:E&&d>=0,[x.is("expanded")]:E&&o.includes(T),[x.is("hovered")]:!p&&T===c,[x.is("fixed")]:!M&&C,[x.is("customized")]:!!e.row}],A=l?b:void 0,N={...S,columns:t,columnsStyles:i,class:P,depth:M,expandColumnKey:s,estimatedRowHeight:C?void 0:a,isScrolling:p,rowIndex:d,rowData:u,rowKey:T,rowEventHandlers:v,style:h};return ue(iAe,qt(N,{onRowHover:A,onRowExpand:w}),fAe(e)?e:{default:()=>[e]})},YC=({columns:r,column:e,columnIndex:t,depth:i,expandIconProps:n,isScrolling:s,rowData:o,rowIndex:a,style:l,expandedRowKeys:c,ns:u,cellProps:d,expandColumnKey:h,indentSize:p,iconSize:f,rowKey:m},{slots:g})=>{const v=Tu(l);if(e.placeholderSign===p0)return ue("div",{class:u.em("row-cell","placeholder"),style:v},null);const{cellRenderer:x,dataKey:b,dataGetter:w}=e,_=h6(x)||g.default||(F=>ue(XC,F,null)),S=Nt(w)?w({columns:r,column:e,columnIndex:t,rowData:o,rowIndex:a}):ti(o,b??""),T=nh(d,{cellData:S,columns:r,column:e,columnIndex:t,rowIndex:a,rowData:o}),M={class:u.e("cell-text"),columns:r,column:e,columnIndex:t,cellData:S,isScrolling:s,rowData:o,rowIndex:a},E=_(M),C=[u.e("row-cell"),e.class,e.align===h0.CENTER&&u.is("align-center"),e.align===h0.RIGHT&&u.is("align-right")],P=a>=0&&h&&e.key===h,A=a>=0&&c.includes(o[m]);let N;const R=`margin-inline-start: ${i*p}px;`;return P&&(Ht(n)?N=ue(sAe,qt(n,{class:[u.e("expand-icon"),u.is("expanded",A)],size:f,expanded:A,style:R,expandable:!0}),null):N=ue("div",{style:[R,`width: ${f}px; height: ${f}px;`].join(" ")},null)),ue("div",qt({class:C,style:v},T,{role:"cell"}),[N,E])};YC.inheritAttrs=!1;function gAe(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!ei(r)}const vAe=({columns:r,columnsStyles:e,headerIndex:t,style:i,headerClass:n,headerProps:s,ns:o},{slots:a})=>{const l={columns:r,headerIndex:t},c=[o.e("header-row"),nh(n,l,""),{[o.is("customized")]:!!a.header}],u={...nh(s,l),columnsStyles:e,class:c,columns:r,headerIndex:t,style:i};return ue(JCe,u,gAe(a)?a:{default:()=>[a]})},y6=(r,{slots:e})=>{const{column:t,ns:i,style:n,onColumnSorted:s}=r,o=Tu(n);if(t.placeholderSign===p0)return ue("div",{class:i.em("header-row-cell","placeholder"),style:o},null);const{headerCellRenderer:a,headerClass:l,sortable:c}=t,u={...r,class:i.e("header-cell-text")},d=(h6(a)||e.default||(b=>ue(qC,b,null)))(u),{sortBy:h,sortState:p,headerCellProps:f}=r;let m,g;if(p){const b=p[t.key];m=!!GC[b],g=m?b:d0.ASC}else m=t.key===h.key,g=m?h.order:d0.ASC;const v=[i.e("header-cell"),nh(l,r,""),t.align===h0.CENTER&&i.is("align-center"),t.align===h0.RIGHT&&i.is("align-right"),c&&i.is("sortable")],x={...nh(f,r),onClick:t.sortable?s:void 0,class:v,style:o,"data-key":t.key};return ue("div",qt(x,{role:"columnheader"}),[d,c&&ue(nAe,{class:[i.e("sort-icon"),m&&i.is("sorting")],sortOrder:g},null)])},b6=(r,{slots:e})=>{var t;return ue("div",{class:r.class,style:r.style},[(t=e.default)==null?void 0:t.call(e)])};b6.displayName="ElTableV2Footer";const x6=(r,{slots:e})=>ue("div",{class:r.class,style:r.style},[e.default?e.default():ue(n5,null,null)]);x6.displayName="ElTableV2Empty";const w6=(r,{slots:e})=>{var t;return ue("div",{class:r.class,style:r.style},[(t=e.default)==null?void 0:t.call(e)])};w6.displayName="ElTableV2Overlay";function m0(r){return typeof r=="function"||Object.prototype.toString.call(r)==="[object Object]"&&!ei(r)}const yAe="ElTableV2",bAe=xe({name:yAe,props:YCe,setup(r,{slots:e,expose:t}){const i=Ge("table-v2"),{columnsStyles:n,fixedColumnsOnLeft:s,fixedColumnsOnRight:o,mainColumns:a,mainTableHeight:l,fixedTableHeight:c,leftTableWidth:u,rightTableWidth:d,data:h,depthMap:p,expandedRowKeys:f,hasFixedColumns:m,hoveringRowKey:g,mainTableRef:v,leftTableRef:x,rightTableRef:b,isDynamic:w,isResetting:_,isScrolling:S,bodyWidth:T,emptyStyle:M,rootStyle:E,headerWidth:C,footerHeight:P,showEmpty:A,scrollTo:N,scrollToLeft:R,scrollToTop:F,scrollToRow:B,getRowHeight:k,onColumnSorted:z,onRowHeightChange:O,onRowHovered:V,onRowExpanded:U,onRowsRendered:G,onScroll:X,onVerticalScroll:ie}=qCe(r);return t({scrollTo:N,scrollToLeft:R,scrollToTop:F,scrollToRow:B}),Yt(jC,{ns:i,isResetting:_,hoveringRowKey:g,isScrolling:S}),()=>{const{cache:se,cellProps:de,estimatedRowHeight:K,expandColumnKey:q,fixedData:ce,headerHeight:Te,headerClass:Z,headerProps:L,headerCellProps:$,sortBy:re,sortState:te,rowHeight:le,rowClass:ge,rowEventHandlers:be,rowKey:_e,rowProps:pe,scrollbarAlwaysOn:Se,indentSize:Fe,iconSize:Y,useIsScrolling:H,vScrollbarSize:ne,width:Le}=r,Pe=y(h),Ee={cache:se,class:i.e("main"),columns:y(a),data:Pe,fixedData:ce,estimatedRowHeight:K,bodyWidth:y(T)+ne,headerHeight:Te,headerWidth:y(C),height:y(l),mainTableRef:v,rowKey:_e,rowHeight:le,scrollbarAlwaysOn:Se,scrollbarStartGap:2,scrollbarEndGap:ne,useIsScrolling:H,width:Le,getRowHeight:k,onRowsRendered:G,onScroll:X},Ue=y(u),Be=y(c),ve={cache:se,class:i.e("left"),columns:y(s),data:Pe,estimatedRowHeight:K,leftTableRef:x,rowHeight:le,bodyWidth:Ue,headerWidth:Ue,headerHeight:Te,height:Be,rowKey:_e,scrollbarAlwaysOn:Se,scrollbarStartGap:2,scrollbarEndGap:ne,useIsScrolling:H,width:Ue,getRowHeight:k,onScroll:ie},Q=y(d)+ne,he={cache:se,class:i.e("right"),columns:y(o),data:Pe,estimatedRowHeight:K,rightTableRef:b,rowHeight:le,bodyWidth:Q,headerWidth:Q,headerHeight:Te,height:Be,rowKey:_e,scrollbarAlwaysOn:Se,scrollbarStartGap:2,scrollbarEndGap:ne,width:Q,style:`--${y(i.namespace)}-table-scrollbar-size: ${ne}px`,useIsScrolling:H,getRowHeight:k,onScroll:ie},we=y(n),ae={ns:i,depthMap:y(p),columnsStyles:we,expandColumnKey:q,expandedRowKeys:y(f),estimatedRowHeight:K,hasFixedColumns:y(m),hoveringRowKey:y(g),rowProps:pe,rowClass:ge,rowKey:_e,rowEventHandlers:be,onRowHovered:V,onRowExpanded:U,onRowHeightChange:O},De={cellProps:de,expandColumnKey:q,indentSize:Fe,iconSize:Y,rowKey:_e,expandedRowKeys:y(f),ns:i},We={ns:i,headerClass:Z,headerProps:L,columnsStyles:we},je={ns:i,sortBy:re,sortState:te,headerCellProps:$,onColumnSorted:z},ye={row:tt=>ue(mAe,qt(tt,ae),{row:e.row,cell:Me=>{let Ne;return e.cell?ue(YC,qt(Me,De,{style:we[Me.column.key]}),m0(Ne=e.cell(Me))?Ne:{default:()=>[Ne]}):ue(YC,qt(Me,De,{style:we[Me.column.key]}),null)}}),header:tt=>ue(vAe,qt(tt,We),{header:e.header,cell:Me=>{let Ne;return e["header-cell"]?ue(y6,qt(Me,je,{style:we[Me.column.key]}),m0(Ne=e["header-cell"](Me))?Ne:{default:()=>[Ne]}):ue(y6,qt(Me,je,{style:we[Me.column.key]}),null)}})},nt=[r.class,i.b(),i.e("root"),{[i.is("dynamic")]:y(w)}],He={class:i.e("footer"),style:y(P)};return ue("div",{class:nt,style:y(E)},[ue(cAe,Ee,m0(ye)?ye:{default:()=>[ye]}),ue(dAe,ve,m0(ye)?ye:{default:()=>[ye]}),ue(pAe,he,m0(ye)?ye:{default:()=>[ye]}),e.footer&&ue(b6,He,{default:e.footer}),y(A)&&ue(x6,{class:i.e("empty"),style:y(M)},{default:e.empty}),e.overlay&&ue(w6,{class:i.e("overlay")},{default:e.overlay})])}}}),xAe=et({disableWidth:Boolean,disableHeight:Boolean,onResize:{type:Oe(Function)}}),wAe=xe({name:"ElAutoResizer",props:xAe,setup(r,{slots:e}){const t=Ge("auto-resizer"),{height:i,width:n,sizer:s}=XCe(r),o={width:"100%",height:"100%"};return()=>{var a;return ue("div",{ref:s,class:t.b(),style:o},[(a=e.default)==null?void 0:a.call(e,{height:i.value,width:n.value})])}}}),_Ae=zt(bAe),SAe=zt(wAe),mw=Symbol("tabsRootContextKey"),TAe=et({tabs:{type:Oe(Array),default:()=>ri([])}}),_6="ElTabBar",MAe=xe({name:_6}),EAe=xe({...MAe,props:TAe,setup(r,{expose:e}){const t=r,i=Dt(),n=ut(mw);n||ji(_6,"<el-tabs><el-tab-bar /></el-tabs>");const s=Ge("tabs"),o=W(),a=W(),l=()=>{let u=0,d=0;const h=["top","bottom"].includes(n.props.tabPosition)?"width":"height",p=h==="width"?"x":"y",f=p==="x"?"left":"top";return t.tabs.every(m=>{var g,v;const x=(v=(g=i.parent)==null?void 0:g.refs)==null?void 0:v[`tab-${m.uid}`];if(!x)return!1;if(!m.active)return!0;u=x[`offset${gl(f)}`],d=x[`client${gl(h)}`];const b=window.getComputedStyle(x);return h==="width"&&(t.tabs.length>1&&(d-=Number.parseFloat(b.paddingLeft)+Number.parseFloat(b.paddingRight)),u+=Number.parseFloat(b.paddingLeft)),!1}),{[h]:`${d}px`,transform:`translate${gl(p)}(${u}px)`}},c=()=>a.value=l();return Ve(()=>t.tabs,async()=>{await ht(),c()},{immediate:!0}),cs(o,()=>c()),e({ref:o,update:c}),(u,d)=>(D(),ee("div",{ref_key:"barRef",ref:o,class:j([y(s).e("active-bar"),y(s).is(y(n).props.tabPosition)]),style:pt(a.value)},null,6))}});var CAe=Qe(EAe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const AAe=et({panes:{type:Oe(Array),default:()=>ri([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),NAe={tabClick:(r,e,t)=>t instanceof Event,tabRemove:(r,e)=>e instanceof Event},S6="ElTabNav",RAe=xe({name:S6,props:AAe,emits:NAe,setup(r,{expose:e,emit:t}){const i=Dt(),n=ut(mw);n||ji(S6,"<el-tabs><tab-nav /></el-tabs>");const s=Ge("tabs"),o=EQ(),a=IQ(),l=W(),c=W(),u=W(),d=W(),h=W(!1),p=W(0),f=W(!1),m=W(!0),g=I(()=>["top","bottom"].includes(n.props.tabPosition)?"width":"height"),v=I(()=>({transform:`translate${g.value==="width"?"X":"Y"}(-${p.value}px)`})),x=()=>{if(!l.value)return;const E=l.value[`offset${gl(g.value)}`],C=p.value;if(!C)return;const P=C>E?C-E:0;p.value=P},b=()=>{if(!l.value||!c.value)return;const E=c.value[`offset${gl(g.value)}`],C=l.value[`offset${gl(g.value)}`],P=p.value;if(E-P<=C)return;const A=E-P>C*2?P+C:E-C;p.value=A},w=async()=>{const E=c.value;if(!h.value||!u.value||!l.value||!E)return;await ht();const C=u.value.querySelector(".is-active");if(!C)return;const P=l.value,A=["top","bottom"].includes(n.props.tabPosition),N=C.getBoundingClientRect(),R=P.getBoundingClientRect(),F=A?E.offsetWidth-R.width:E.offsetHeight-R.height,B=p.value;let k=B;A?(N.left<R.left&&(k=B-(R.left-N.left)),N.right>R.right&&(k=B+N.right-R.right)):(N.top<R.top&&(k=B-(R.top-N.top)),N.bottom>R.bottom&&(k=B+(N.bottom-R.bottom))),k=Math.max(k,0),p.value=Math.min(k,F)},_=()=>{var E;if(!c.value||!l.value)return;r.stretch&&((E=d.value)==null||E.update());const C=c.value[`offset${gl(g.value)}`],P=l.value[`offset${gl(g.value)}`],A=p.value;P<C?(h.value=h.value||{},h.value.prev=A,h.value.next=A+P<C,C-A<P&&(p.value=C-P)):(h.value=!1,A>0&&(p.value=0))},S=E=>{const C=E.code,{up:P,down:A,left:N,right:R}=bt;if(![P,A,N,R].includes(C))return;const F=Array.from(E.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),B=F.indexOf(E.target);let k;C===N||C===P?B===0?k=F.length-1:k=B-1:B<F.length-1?k=B+1:k=0,F[k].focus({preventScroll:!0}),F[k].click(),T()},T=()=>{m.value&&(f.value=!0)},M=()=>f.value=!1;return Ve(o,E=>{E==="hidden"?m.value=!1:E==="visible"&&setTimeout(()=>m.value=!0,50)}),Ve(a,E=>{E?setTimeout(()=>m.value=!0,50):m.value=!1}),cs(u,_),Et(()=>setTimeout(()=>w(),0)),Yl(()=>_()),e({scrollToActiveTab:w,removeFocus:M}),Ve(()=>r.panes,()=>i.update(),{flush:"post",deep:!0}),()=>{const E=h.value?[ue("span",{class:[s.e("nav-prev"),s.is("disabled",!h.value.prev)],onClick:x},[ue(dt,null,{default:()=>[ue(cu,null,null)]})]),ue("span",{class:[s.e("nav-next"),s.is("disabled",!h.value.next)],onClick:b},[ue(dt,null,{default:()=>[ue(Cs,null,null)]})])]:null,C=r.panes.map((P,A)=>{var N,R,F,B;const k=P.uid,z=P.props.disabled,O=(R=(N=P.props.name)!=null?N:P.index)!=null?R:`${A}`,V=!z&&(P.isClosable||r.editable);P.index=`${A}`;const U=V?ue(dt,{class:"is-icon-close",onClick:ie=>t("tabRemove",P,ie)},{default:()=>[ue(Pa,null,null)]}):null,G=((B=(F=P.slots).label)==null?void 0:B.call(F))||P.props.label,X=!z&&P.active?0:-1;return ue("div",{ref:`tab-${k}`,class:[s.e("item"),s.is(n.props.tabPosition),s.is("active",P.active),s.is("disabled",z),s.is("closable",V),s.is("focus",f.value)],id:`tab-${O}`,key:`tab-${k}`,"aria-controls":`pane-${O}`,role:"tab","aria-selected":P.active,tabindex:X,onFocus:()=>T(),onBlur:()=>M(),onClick:ie=>{M(),t("tabClick",P,O,ie)},onKeydown:ie=>{V&&(ie.code===bt.delete||ie.code===bt.backspace)&&t("tabRemove",P,ie)}},[G,U])});return ue("div",{ref:u,class:[s.e("nav-wrap"),s.is("scrollable",!!h.value),s.is(n.props.tabPosition)]},[E,ue("div",{class:s.e("nav-scroll"),ref:l},[ue("div",{class:[s.e("nav"),s.is(n.props.tabPosition),s.is("stretch",r.stretch&&["top","bottom"].includes(n.props.tabPosition))],ref:c,style:v.value,role:"tablist",onKeydown:S},[r.type?null:ue(CAe,{ref:d,tabs:[...r.panes]},null),C])])])}}}),kAe=et({type:{type:String,values:["card","border-card",""],default:""},activeName:{type:[String,Number]},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Oe(Function),default:()=>!0},stretch:Boolean}),ZC=r=>kt(r)||Ct(r),LAe={[Wt]:r=>ZC(r),tabClick:(r,e)=>e instanceof Event,tabChange:r=>ZC(r),edit:(r,e)=>["remove","add"].includes(e),tabRemove:r=>ZC(r),tabAdd:()=>!0};var OAe=xe({name:"ElTabs",props:kAe,emits:LAe,setup(r,{emit:e,slots:t,expose:i}){var n,s;const o=Ge("tabs"),{children:a,addChild:l,removeChild:c}=yE(Dt(),"ElTabPane"),u=W(),d=W((s=(n=r.modelValue)!=null?n:r.activeName)!=null?s:"0"),h=v=>{d.value=v,e(Wt,v),e("tabChange",v)},p=async v=>{var x,b,w;if(!(d.value===v||rn(v)))try{await((x=r.beforeLeave)==null?void 0:x.call(r,v,d.value))!==!1&&(h(v),(w=(b=u.value)==null?void 0:b.removeFocus)==null||w.call(b))}catch{}},f=(v,x,b)=>{v.props.disabled||(p(x),e("tabClick",v,b))},m=(v,x)=>{v.props.disabled||rn(v.props.name)||(x.stopPropagation(),e("edit",v.props.name,"remove"),e("tabRemove",v.props.name))},g=()=>{e("edit",void 0,"add"),e("tabAdd")};return bl({from:'"activeName"',replacement:'"model-value" or "v-model"',scope:"ElTabs",version:"2.3.0",ref:"https://element-plus.org/en-US/component/tabs.html#attributes",type:"Attribute"},I(()=>!!r.activeName)),Ve(()=>r.activeName,v=>p(v)),Ve(()=>r.modelValue,v=>p(v)),Ve(d,async()=>{var v;await ht(),(v=u.value)==null||v.scrollToActiveTab()}),Yt(mw,{props:r,currentName:d,registerPane:l,unregisterPane:c}),i({currentName:d}),()=>{const v=r.editable||r.addable?ue("span",{class:o.e("new-tab"),tabindex:"0",onClick:g,onKeydown:w=>{w.code===bt.enter&&g()}},[ue(dt,{class:o.is("icon-plus")},{default:()=>[ue(mU,null,null)]})]):null,x=ue("div",{class:[o.e("header"),o.is(r.tabPosition)]},[v,ue(RAe,{ref:u,currentName:d.value,editable:r.editable,type:r.type,panes:a.value,stretch:r.stretch,onTabClick:f,onTabRemove:m},null)]),b=ue("div",{class:o.e("content")},[ze(t,"default")]);return ue("div",{class:[o.b(),o.m(r.tabPosition),{[o.m("card")]:r.type==="card",[o.m("border-card")]:r.type==="border-card"}]},[...r.tabPosition!=="bottom"?[x,b]:[b,x]])}}});const PAe=et({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),IAe=["id","aria-hidden","aria-labelledby"],T6="ElTabPane",DAe=xe({name:T6}),UAe=xe({...DAe,props:PAe,setup(r){const e=r,t=Dt(),i=Gn(),n=ut(mw);n||ji(T6,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=Ge("tab-pane"),o=W(),a=I(()=>e.closable||n.props.closable),l=OD(()=>{var p;return n.currentName.value===((p=e.name)!=null?p:o.value)}),c=W(l.value),u=I(()=>{var p;return(p=e.name)!=null?p:o.value}),d=OD(()=>!e.lazy||c.value||l.value);Ve(l,p=>{p&&(c.value=!0)});const h=br({uid:t.uid,slots:i,props:e,paneName:u,active:l,index:o,isClosable:a});return Et(()=>{n.registerPane(h)}),ki(()=>{n.unregisterPane(h.uid)}),(p,f)=>y(d)?It((D(),ee("div",{key:0,id:`pane-${y(u)}`,class:j(y(s).b()),role:"tabpanel","aria-hidden":!y(l),"aria-labelledby":`tab-${y(u)}`},[ze(p.$slots,"default")],10,IAe)),[[vr,y(l)]]):Re("v-if",!0)}});var M6=Qe(UAe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const FAe=zt(OAe,{TabPane:M6}),BAe=fi(M6),zAe=et({type:{type:String,values:["primary","success","info","warning","danger",""],default:""},size:{type:String,values:yl,default:""},truncated:{type:Boolean},tag:{type:String,default:"span"}}),VAe=xe({name:"ElText"}),GAe=xe({...VAe,props:zAe,setup(r){const e=r,t=Hi(),i=Ge("text"),n=I(()=>[i.b(),i.m(e.type),i.m(t.value),i.is("truncated",e.truncated)]);return(s,o)=>(D(),Ae(Xt(s.tag),{class:j(y(n))},{default:me(()=>[ze(s.$slots,"default")]),_:3},8,["class"]))}});var jAe=Qe(GAe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/text/src/text.vue"]]);const HAe=zt(jAe),WAe=et({format:{type:String,default:"HH:mm"},modelValue:String,disabled:Boolean,editable:{type:Boolean,default:!0},effect:{type:String,default:"light"},clearable:{type:Boolean,default:!0},size:jn,placeholder:String,start:{type:String,default:"09:00"},end:{type:String,default:"18:00"},step:{type:String,default:"00:30"},minTime:String,maxTime:String,name:String,prefixIcon:{type:Oe([String,Object]),default:()=>pU},clearIcon:{type:Oe([String,Object]),default:()=>uu}}),dc=r=>{const e=(r||"").split(":");if(e.length>=2){let t=Number.parseInt(e[0],10);const i=Number.parseInt(e[1],10),n=r.toUpperCase();return n.includes("AM")&&t===12?t=0:n.includes("PM")&&t!==12&&(t+=12),{hours:t,minutes:i}}return null},JC=(r,e)=>{const t=dc(r);if(!t)return-1;const i=dc(e);if(!i)return-1;const n=t.minutes+t.hours*60,s=i.minutes+i.hours*60;return n===s?0:n>s?1:-1},E6=r=>`${r}`.padStart(2,"0"),Ff=r=>`${E6(r.hours)}:${E6(r.minutes)}`,$Ae=(r,e)=>{const t=dc(r);if(!t)return"";const i=dc(e);if(!i)return"";const n={hours:t.hours,minutes:t.minutes};return n.minutes+=i.minutes,n.hours+=i.hours,n.hours+=Math.floor(n.minutes/60),n.minutes=n.minutes%60,Ff(n)},XAe=xe({name:"ElTimeSelect"}),qAe=xe({...XAe,props:WAe,emits:["change","blur","focus","update:modelValue"],setup(r,{expose:e}){const t=r;Ft.extend(BE);const{Option:i}=eh,n=Ge("input"),s=W(),o=Ys(),a=I(()=>t.modelValue),l=I(()=>{const f=dc(t.start);return f?Ff(f):null}),c=I(()=>{const f=dc(t.end);return f?Ff(f):null}),u=I(()=>{const f=dc(t.step);return f?Ff(f):null}),d=I(()=>{const f=dc(t.minTime||"");return f?Ff(f):null}),h=I(()=>{const f=dc(t.maxTime||"");return f?Ff(f):null}),p=I(()=>{const f=[];if(t.start&&t.end&&t.step){let m=l.value,g;for(;m&&c.value&&JC(m,c.value)<=0;)g=Ft(m,"HH:mm").format(t.format),f.push({value:g,disabled:JC(m,d.value||"-1:-1")<=0||JC(m,h.value||"100:100")>=0}),m=$Ae(m,u.value)}return f});return e({blur:()=>{var f,m;(m=(f=s.value)==null?void 0:f.blur)==null||m.call(f)},focus:()=>{var f,m;(m=(f=s.value)==null?void 0:f.focus)==null||m.call(f)}}),(f,m)=>(D(),Ae(y(eh),{ref_key:"select",ref:s,"model-value":y(a),disabled:y(o),clearable:f.clearable,"clear-icon":f.clearIcon,size:f.size,effect:f.effect,placeholder:f.placeholder,"default-first-option":"",filterable:f.editable,"onUpdate:modelValue":m[0]||(m[0]=g=>f.$emit("update:modelValue",g)),onChange:m[1]||(m[1]=g=>f.$emit("change",g)),onBlur:m[2]||(m[2]=g=>f.$emit("blur",g)),onFocus:m[3]||(m[3]=g=>f.$emit("focus",g))},{prefix:me(()=>[f.prefixIcon?(D(),Ae(y(dt),{key:0,class:j(y(n).e("prefix-icon"))},{default:me(()=>[(D(),Ae(Xt(f.prefixIcon)))]),_:1},8,["class"])):Re("v-if",!0)]),default:me(()=>[(D(!0),ee(ct,null,Ut(y(p),g=>(D(),Ae(y(i),{key:g.value,label:g.value,value:g.value,disabled:g.disabled},null,8,["label","value","disabled"]))),128))]),_:1},8,["model-value","disabled","clearable","clear-icon","size","effect","placeholder","filterable"]))}});var gw=Qe(qAe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/time-select/src/time-select.vue"]]);gw.install=r=>{r.component(gw.name,gw)};const KAe=gw,YAe=KAe,ZAe=xe({name:"ElTimeline",setup(r,{slots:e}){const t=Ge("timeline");return Yt("timeline",e),()=>yt("ul",{class:[t.b()]},[ze(e,"default")])}}),JAe=et({timestamp:{type:String,default:""},hideTimestamp:{type:Boolean,default:!1},center:{type:Boolean,default:!1},placement:{type:String,values:["top","bottom"],default:"bottom"},type:{type:String,values:["primary","success","warning","danger","info"],default:""},color:{type:String,default:""},size:{type:String,values:["normal","large"],default:"normal"},icon:{type:Gr},hollow:{type:Boolean,default:!1}}),QAe=xe({name:"ElTimelineItem"}),eNe=xe({...QAe,props:JAe,setup(r){const e=r,t=Ge("timeline-item"),i=I(()=>[t.e("node"),t.em("node",e.size||""),t.em("node",e.type||""),t.is("hollow",e.hollow)]);return(n,s)=>(D(),ee("li",{class:j([y(t).b(),{[y(t).e("center")]:n.center}])},[J("div",{class:j(y(t).e("tail"))},null,2),n.$slots.dot?Re("v-if",!0):(D(),ee("div",{key:0,class:j(y(i)),style:pt({backgroundColor:n.color})},[n.icon?(D(),Ae(y(dt),{key:0,class:j(y(t).e("icon"))},{default:me(()=>[(D(),Ae(Xt(n.icon)))]),_:1},8,["class"])):Re("v-if",!0)],6)),n.$slots.dot?(D(),ee("div",{key:1,class:j(y(t).e("dot"))},[ze(n.$slots,"dot")],2)):Re("v-if",!0),J("div",{class:j(y(t).e("wrapper"))},[!n.hideTimestamp&&n.placement==="top"?(D(),ee("div",{key:0,class:j([y(t).e("timestamp"),y(t).is("top")])},$e(n.timestamp),3)):Re("v-if",!0),J("div",{class:j(y(t).e("content"))},[ze(n.$slots,"default")],2),!n.hideTimestamp&&n.placement==="bottom"?(D(),ee("div",{key:1,class:j([y(t).e("timestamp"),y(t).is("bottom")])},$e(n.timestamp),3)):Re("v-if",!0)],2)],2))}});var C6=Qe(eNe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/timeline/src/timeline-item.vue"]]);const tNe=zt(ZAe,{TimelineItem:C6}),rNe=fi(C6),A6=et({nowrap:Boolean});var N6=(r=>(r.top="top",r.bottom="bottom",r.left="left",r.right="right",r))(N6||{});const iNe=Object.values(N6),QC=et({width:{type:Number,default:10},height:{type:Number,default:10},style:{type:Oe(Object),default:null}}),nNe=et({side:{type:Oe(String),values:iNe,required:!0}}),sNe=["absolute","fixed"],oNe=["top-start","top-end","top","bottom-start","bottom-end","bottom","left-start","left-end","left","right-start","right-end","right"],eA=et({ariaLabel:String,arrowPadding:{type:Oe(Number),default:5},effect:{type:String,default:""},contentClass:String,placement:{type:Oe(String),values:oNe,default:"bottom"},reference:{type:Oe(Object),default:null},offset:{type:Number,default:8},strategy:{type:Oe(String),values:sNe,default:"absolute"},showArrow:{type:Boolean,default:!1}}),tA=et({delayDuration:{type:Number,default:300},defaultOpen:Boolean,open:{type:Boolean,default:void 0},onOpenChange:{type:Oe(Function)},"onUpdate:open":{type:Oe(Function)}}),Bf={type:Oe(Function)},rA=et({onBlur:Bf,onClick:Bf,onFocus:Bf,onMouseDown:Bf,onMouseEnter:Bf,onMouseLeave:Bf}),aNe=et({...tA,...QC,...rA,...eA,alwaysOn:Boolean,fullTransition:Boolean,transitionProps:{type:Oe(Object),default:null},teleported:Boolean,to:{type:Oe(String),default:"body"}}),vw=Symbol("tooltipV2"),R6=Symbol("tooltipV2Content"),iA="tooltip_v2.open",lNe=xe({name:"ElTooltipV2Root"}),cNe=xe({...lNe,props:tA,setup(r,{expose:e}){const t=r,i=W(t.defaultOpen),n=W(null),s=I({get:()=>Wse(t.open)?i.value:t.open,set:m=>{var g;i.value=m,(g=t["onUpdate:open"])==null||g.call(t,m)}}),o=I(()=>Ct(t.delayDuration)&&t.delayDuration>0),{start:a,stop:l}=Ud(()=>{s.value=!0},I(()=>t.delayDuration),{immediate:!1}),c=Ge("tooltip-v2"),u=na(),d=()=>{l(),s.value=!0},h=()=>{y(o)?a():d()},p=d,f=()=>{l(),s.value=!1};return Ve(s,m=>{var g;m&&(document.dispatchEvent(new CustomEvent(iA)),p()),(g=t.onOpenChange)==null||g.call(t,m)}),Et(()=>{document.addEventListener(iA,f)}),Zr(()=>{l(),document.removeEventListener(iA,f)}),Yt(vw,{contentId:u,triggerRef:n,ns:c,onClose:f,onDelayOpen:h,onOpen:p}),e({onOpen:p,onClose:f}),(m,g)=>ze(m.$slots,"default",{open:y(s)})}});var uNe=Qe(cNe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/root.vue"]]);const dNe=xe({name:"ElTooltipV2Arrow"}),hNe=xe({...dNe,props:{...QC,...nNe},setup(r){const e=r,{ns:t}=ut(vw),{arrowRef:i}=ut(R6),n=I(()=>{const{style:s,width:o,height:a}=e,l=t.namespace.value;return{[`--${l}-tooltip-v2-arrow-width`]:`${o}px`,[`--${l}-tooltip-v2-arrow-height`]:`${a}px`,[`--${l}-tooltip-v2-arrow-border-width`]:`${o/2}px`,[`--${l}-tooltip-v2-arrow-cover-width`]:o/2-1,...s||{}}});return(s,o)=>(D(),ee("span",{ref_key:"arrowRef",ref:i,style:pt(y(n)),class:j(y(t).e("arrow"))},null,6))}});var k6=Qe(hNe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/arrow.vue"]]);const pNe=et({style:{type:Oe([String,Object,Array]),default:()=>({})}}),fNe=xe({name:"ElVisuallyHidden"}),mNe=xe({...fNe,props:pNe,setup(r){const e=r,t=I(()=>[e.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}]);return(i,n)=>(D(),ee("span",qt(i.$attrs,{style:y(t)}),[ze(i.$slots,"default")],16))}});var gNe=Qe(mNe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/visual-hidden/src/visual-hidden.vue"]]);const vNe=["data-side"],yNe=xe({name:"ElTooltipV2Content"}),bNe=xe({...yNe,props:{...eA,...A6},setup(r){const e=r,{triggerRef:t,contentId:i}=ut(vw),n=W(e.placement),s=W(e.strategy),o=W(null),{referenceRef:a,contentRef:l,middlewareData:c,x:u,y:d,update:h}=ipe({placement:n,strategy:s,middleware:I(()=>{const b=[Fhe(e.offset)];return e.showArrow&&b.push(npe({arrowRef:o})),b})}),p=wf().nextZIndex(),f=Ge("tooltip-v2"),m=I(()=>n.value.split("-")[0]),g=I(()=>({position:y(s),top:`${y(d)||0}px`,left:`${y(u)||0}px`,zIndex:p})),v=I(()=>{if(!e.showArrow)return{};const{arrow:b}=y(c);return{[`--${f.namespace.value}-tooltip-v2-arrow-x`]:`${b==null?void 0:b.x}px`||"",[`--${f.namespace.value}-tooltip-v2-arrow-y`]:`${b==null?void 0:b.y}px`||""}}),x=I(()=>[f.e("content"),f.is("dark",e.effect==="dark"),f.is(y(s)),e.contentClass]);return Ve(o,()=>h()),Ve(()=>e.placement,b=>n.value=b),Et(()=>{Ve(()=>e.reference||t.value,b=>{a.value=b||void 0},{immediate:!0})}),Yt(R6,{arrowRef:o}),(b,w)=>(D(),ee("div",{ref_key:"contentRef",ref:l,style:pt(y(g)),"data-tooltip-v2-root":""},[b.nowrap?Re("v-if",!0):(D(),ee("div",{key:0,"data-side":y(m),class:j(y(x))},[ze(b.$slots,"default",{contentStyle:y(g),contentClass:y(x)}),ue(y(gNe),{id:y(i),role:"tooltip"},{default:me(()=>[b.ariaLabel?(D(),ee(ct,{key:0},[ir($e(b.ariaLabel),1)],64)):ze(b.$slots,"default",{key:1})]),_:3},8,["id"]),ze(b.$slots,"arrow",{style:pt(y(v)),side:y(m)})],10,vNe))],4))}});var L6=Qe(bNe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/content.vue"]]);const xNe=et({setRef:{type:Oe(Function),required:!0},onlyChild:Boolean});var wNe=xe({props:xNe,setup(r,{slots:e}){const t=W(),i=hx(t,n=>{n?r.setRef(n.nextElementSibling):r.setRef(null)});return()=>{var n;const[s]=((n=e.default)==null?void 0:n.call(e))||[],o=r.onlyChild?ude(s.children):s.children;return ue(ct,{ref:i},[o])}}});const _Ne=xe({name:"ElTooltipV2Trigger"}),SNe=xe({..._Ne,props:{...A6,...rA},setup(r){const e=r,{onClose:t,onOpen:i,onDelayOpen:n,triggerRef:s,contentId:o}=ut(vw);let a=!1;const l=x=>{s.value=x},c=()=>{a=!1},u=hi(e.onMouseEnter,n),d=hi(e.onMouseLeave,t),h=hi(e.onMouseDown,()=>{t(),a=!0,document.addEventListener("mouseup",c,{once:!0})}),p=hi(e.onFocus,()=>{a||i()}),f=hi(e.onBlur,t),m=hi(e.onClick,x=>{x.detail===0&&t()}),g={blur:f,click:m,focus:p,mousedown:h,mouseenter:u,mouseleave:d},v=(x,b,w)=>{x&&Object.entries(b).forEach(([_,S])=>{x[w](_,S)})};return Ve(s,(x,b)=>{v(x,g,"addEventListener"),v(b,g,"removeEventListener"),x&&x.setAttribute("aria-describedby",o.value)}),Zr(()=>{v(s.value,g,"removeEventListener"),document.removeEventListener("mouseup",c)}),(x,b)=>x.nowrap?(D(),Ae(y(wNe),{key:0,"set-ref":l,"only-child":""},{default:me(()=>[ze(x.$slots,"default")]),_:3})):(D(),ee("button",qt({key:1,ref_key:"triggerRef",ref:s},x.$attrs),[ze(x.$slots,"default")],16))}});var TNe=Qe(SNe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/trigger.vue"]]);const MNe=xe({name:"ElTooltipV2"}),ENe=xe({...MNe,props:aNe,setup(r){const e=fn(r),t=br(ic(e,Object.keys(QC))),i=br(ic(e,Object.keys(eA))),n=br(ic(e,Object.keys(tA))),s=br(ic(e,Object.keys(rA)));return(o,a)=>(D(),Ae(uNe,Ca(V1(n)),{default:me(({open:l})=>[ue(TNe,qt(s,{nowrap:""}),{default:me(()=>[ze(o.$slots,"trigger")]),_:3},16),(D(),Ae(cv,{to:o.to,disabled:!o.teleported},[o.fullTransition?(D(),Ae(Li,Ca(qt({key:0},o.transitionProps)),{default:me(()=>[o.alwaysOn||l?(D(),Ae(L6,Ca(qt({key:0},i)),{arrow:me(({style:c,side:u})=>[o.showArrow?(D(),Ae(k6,qt({key:0},t,{style:c,side:u}),null,16,["style","side"])):Re("v-if",!0)]),default:me(()=>[ze(o.$slots,"default")]),_:3},16)):Re("v-if",!0)]),_:2},1040)):(D(),ee(ct,{key:1},[o.alwaysOn||l?(D(),Ae(L6,Ca(qt({key:0},i)),{arrow:me(({style:c,side:u})=>[o.showArrow?(D(),Ae(k6,qt({key:0},t,{style:c,side:u}),null,16,["style","side"])):Re("v-if",!0)]),default:me(()=>[ze(o.$slots,"default")]),_:3},16)):Re("v-if",!0)],64))],8,["to","disabled"]))]),_:3},16))}});var CNe=Qe(ENe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tooltip-v2/src/tooltip.vue"]]);const ANe=zt(CNe),O6="left-check-change",P6="right-check-change",zf=et({data:{type:Oe(Array),default:()=>[]},titles:{type:Oe(Array),default:()=>[]},buttonTexts:{type:Oe(Array),default:()=>[]},filterPlaceholder:String,filterMethod:{type:Oe(Function)},leftDefaultChecked:{type:Oe(Array),default:()=>[]},rightDefaultChecked:{type:Oe(Array),default:()=>[]},renderContent:{type:Oe(Function)},modelValue:{type:Oe(Array),default:()=>[]},format:{type:Oe(Object),default:()=>({})},filterable:Boolean,props:{type:Oe(Object),default:()=>ri({label:"label",key:"key",disabled:"disabled"})},targetOrder:{type:String,values:["original","push","unshift"],default:"original"},validateEvent:{type:Boolean,default:!0}}),nA=(r,e)=>[r,e].every(lt)||lt(r)&&Vi(e),NNe={[Kr]:(r,e,t)=>[r,t].every(lt)&&["left","right"].includes(e),[Wt]:r=>lt(r),[O6]:nA,[P6]:nA},sA="checked-change",RNe=et({data:zf.data,optionRender:{type:Oe(Function)},placeholder:String,title:String,filterable:Boolean,format:zf.format,filterMethod:zf.filterMethod,defaultChecked:zf.leftDefaultChecked,props:zf.props}),kNe={[sA]:nA},g0=r=>{const e={label:"label",key:"key",disabled:"disabled"};return I(()=>({...e,...r.props}))},LNe=(r,e,t)=>{const i=g0(r),n=I(()=>r.data.filter(u=>Nt(r.filterMethod)?r.filterMethod(e.query,u):String(u[i.value.label]||u[i.value.key]).toLowerCase().includes(e.query.toLowerCase()))),s=I(()=>n.value.filter(u=>!u[i.value.disabled])),o=I(()=>{const u=e.checked.length,d=r.data.length,{noChecked:h,hasChecked:p}=r.format;return h&&p?u>0?p.replace(/\${checked}/g,u.toString()).replace(/\${total}/g,d.toString()):h.replace(/\${total}/g,d.toString()):`${u}/${d}`}),a=I(()=>{const u=e.checked.length;return u>0&&u<s.value.length}),l=()=>{const u=s.value.map(d=>d[i.value.key]);e.allChecked=u.length>0&&u.every(d=>e.checked.includes(d))},c=u=>{e.checked=u?s.value.map(d=>d[i.value.key]):[]};return Ve(()=>e.checked,(u,d)=>{if(l(),e.checkChangeByUser){const h=u.concat(d).filter(p=>!u.includes(p)||!d.includes(p));t(sA,u,h)}else t(sA,u),e.checkChangeByUser=!0}),Ve(s,()=>{l()}),Ve(()=>r.data,()=>{const u=[],d=n.value.map(h=>h[i.value.key]);e.checked.forEach(h=>{d.includes(h)&&u.push(h)}),e.checkChangeByUser=!1,e.checked=u}),Ve(()=>r.defaultChecked,(u,d)=>{if(d&&u.length===d.length&&u.every(f=>d.includes(f)))return;const h=[],p=s.value.map(f=>f[i.value.key]);u.forEach(f=>{p.includes(f)&&h.push(f)}),e.checkChangeByUser=!1,e.checked=h},{immediate:!0}),{filteredData:n,checkableData:s,checkedSummary:o,isIndeterminate:a,updateAllChecked:l,handleAllCheckedChange:c}},ONe=(r,e)=>({onSourceCheckedChange:(t,i)=>{r.leftChecked=t,i&&e(O6,t,i)},onTargetCheckedChange:(t,i)=>{r.rightChecked=t,i&&e(P6,t,i)}}),PNe=r=>{const e=g0(r),t=I(()=>r.data.reduce((s,o)=>(s[o[e.value.key]]=o)&&s,{})),i=I(()=>r.data.filter(s=>!r.modelValue.includes(s[e.value.key]))),n=I(()=>r.targetOrder==="original"?r.data.filter(s=>r.modelValue.includes(s[e.value.key])):r.modelValue.reduce((s,o)=>{const a=t.value[o];return a&&s.push(a),s},[]));return{sourceData:i,targetData:n}},INe=(r,e,t)=>{const i=g0(r),n=(s,o,a)=>{t(Wt,s),t(Kr,s,o,a)};return{addToLeft:()=>{const s=r.modelValue.slice();e.rightChecked.forEach(o=>{const a=s.indexOf(o);a>-1&&s.splice(a,1)}),n(s,"left",e.rightChecked)},addToRight:()=>{let s=r.modelValue.slice();const o=r.data.filter(a=>{const l=a[i.value.key];return e.leftChecked.includes(l)&&!r.modelValue.includes(l)}).map(a=>a[i.value.key]);s=r.targetOrder==="unshift"?o.concat(s):s.concat(o),r.targetOrder==="original"&&(s=r.data.filter(a=>s.includes(a[i.value.key])).map(a=>a[i.value.key])),n(s,"right",e.leftChecked)}}},DNe=xe({name:"ElTransferPanel"}),UNe=xe({...DNe,props:RNe,emits:kNe,setup(r,{expose:e,emit:t}){const i=r,n=Gn(),s=({option:b})=>b,{t:o}=pr(),a=Ge("transfer"),l=br({checked:[],allChecked:!1,query:"",checkChangeByUser:!0}),c=g0(i),{filteredData:u,checkedSummary:d,isIndeterminate:h,handleAllCheckedChange:p}=LNe(i,l,t),f=I(()=>!Jo(l.query)&&Jo(u.value)),m=I(()=>!Jo(n.default()[0].children)),{checked:g,allChecked:v,query:x}=fn(l);return e({query:x}),(b,w)=>(D(),ee("div",{class:j(y(a).b("panel"))},[J("p",{class:j(y(a).be("panel","header"))},[ue(y(oa),{modelValue:y(v),"onUpdate:modelValue":w[0]||(w[0]=_=>zr(v)?v.value=_:null),indeterminate:y(h),"validate-event":!1,onChange:y(p)},{default:me(()=>[ir($e(b.title)+" ",1),J("span",null,$e(y(d)),1)]),_:1},8,["modelValue","indeterminate","onChange"])],2),J("div",{class:j([y(a).be("panel","body"),y(a).is("with-footer",y(m))])},[b.filterable?(D(),Ae(y(us),{key:0,modelValue:y(x),"onUpdate:modelValue":w[1]||(w[1]=_=>zr(x)?x.value=_:null),class:j(y(a).be("panel","filter")),size:"default",placeholder:b.placeholder,"prefix-icon":y(Bce),clearable:"","validate-event":!1},null,8,["modelValue","class","placeholder","prefix-icon"])):Re("v-if",!0),It(ue(y(sz),{modelValue:y(g),"onUpdate:modelValue":w[2]||(w[2]=_=>zr(g)?g.value=_:null),"validate-event":!1,class:j([y(a).is("filterable",b.filterable),y(a).be("panel","list")])},{default:me(()=>[(D(!0),ee(ct,null,Ut(y(u),_=>(D(),Ae(y(oa),{key:_[y(c).key],class:j(y(a).be("panel","item")),label:_[y(c).key],disabled:_[y(c).disabled],"validate-event":!1},{default:me(()=>{var S;return[ue(s,{option:(S=b.optionRender)==null?void 0:S.call(b,_)},null,8,["option"])]}),_:2},1032,["class","label","disabled"]))),128))]),_:1},8,["modelValue","class"]),[[vr,!y(f)&&!y(Jo)(b.data)]]),It(J("p",{class:j(y(a).be("panel","empty"))},$e(y(f)?y(o)("el.transfer.noMatch"):y(o)("el.transfer.noData")),3),[[vr,y(f)||y(Jo)(b.data)]])],2),y(m)?(D(),ee("p",{key:0,class:j(y(a).be("panel","footer"))},[ze(b.$slots,"default")],2)):Re("v-if",!0)],2))}});var I6=Qe(UNe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer-panel.vue"]]);const FNe={key:0},BNe={key:0},zNe=xe({name:"ElTransfer"}),VNe=xe({...zNe,props:zf,emits:NNe,setup(r,{expose:e,emit:t}){const i=r,n=Gn(),{t:s}=pr(),o=Ge("transfer"),{formItem:a}=Ns(),l=br({leftChecked:[],rightChecked:[]}),c=g0(i),{sourceData:u,targetData:d}=PNe(i),{onSourceCheckedChange:h,onTargetCheckedChange:p}=ONe(l,t),{addToLeft:f,addToRight:m}=INe(i,l,t),g=W(),v=W(),x=M=>{switch(M){case"left":g.value.query="";break;case"right":v.value.query="";break}},b=I(()=>i.buttonTexts.length===2),w=I(()=>i.titles[0]||s("el.transfer.titles.0")),_=I(()=>i.titles[1]||s("el.transfer.titles.1")),S=I(()=>i.filterPlaceholder||s("el.transfer.filterPlaceholder"));Ve(()=>i.modelValue,()=>{var M;i.validateEvent&&((M=a==null?void 0:a.validate)==null||M.call(a,"change").catch(E=>{}))});const T=I(()=>M=>i.renderContent?i.renderContent(yt,M):n.default?n.default({option:M}):yt("span",M[c.value.label]||M[c.value.key]));return e({clearQuery:x,leftPanel:g,rightPanel:v}),(M,E)=>(D(),ee("div",{class:j(y(o).b())},[ue(I6,{ref_key:"leftPanel",ref:g,data:y(u),"option-render":y(T),placeholder:y(S),title:y(w),filterable:M.filterable,format:M.format,"filter-method":M.filterMethod,"default-checked":M.leftDefaultChecked,props:i.props,onCheckedChange:y(h)},{default:me(()=>[ze(M.$slots,"left-footer")]),_:3},8,["data","option-render","placeholder","title","filterable","format","filter-method","default-checked","props","onCheckedChange"]),J("div",{class:j(y(o).e("buttons"))},[ue(y(Wn),{type:"primary",class:j([y(o).e("button"),y(o).is("with-texts",y(b))]),disabled:y(Jo)(l.rightChecked),onClick:y(f)},{default:me(()=>[ue(y(dt),null,{default:me(()=>[ue(y(cu))]),_:1}),y(rn)(M.buttonTexts[0])?Re("v-if",!0):(D(),ee("span",FNe,$e(M.buttonTexts[0]),1))]),_:1},8,["class","disabled","onClick"]),ue(y(Wn),{type:"primary",class:j([y(o).e("button"),y(o).is("with-texts",y(b))]),disabled:y(Jo)(l.leftChecked),onClick:y(m)},{default:me(()=>[y(rn)(M.buttonTexts[1])?Re("v-if",!0):(D(),ee("span",BNe,$e(M.buttonTexts[1]),1)),ue(y(dt),null,{default:me(()=>[ue(y(Cs))]),_:1})]),_:1},8,["class","disabled","onClick"])],2),ue(I6,{ref_key:"rightPanel",ref:v,data:y(d),"option-render":y(T),placeholder:y(S),filterable:M.filterable,format:M.format,"filter-method":M.filterMethod,title:y(_),"default-checked":M.rightDefaultChecked,props:i.props,onCheckedChange:y(p)},{default:me(()=>[ze(M.$slots,"right-footer")]),_:3},8,["data","option-render","placeholder","filterable","format","filter-method","title","default-checked","props","onCheckedChange"])],2))}});var GNe=Qe(VNe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/transfer/src/transfer.vue"]]);const jNe=zt(GNe),Vf="$treeNodeId",D6=function(r,e){!e||e[Vf]||Object.defineProperty(e,Vf,{value:r.id,enumerable:!1,configurable:!1,writable:!1})},oA=function(r,e){return r?e[r]:e[Vf]},aA=(r,e,t)=>{const i=r.value.currentNode;t();const n=r.value.currentNode;i!==n&&e("current-change",n?n.data:null,n)},lA=r=>{let e=!0,t=!0,i=!0;for(let n=0,s=r.length;n<s;n++){const o=r[n];(o.checked!==!0||o.indeterminate)&&(e=!1,o.disabled||(i=!1)),(o.checked!==!1||o.indeterminate)&&(t=!1)}return{all:e,none:t,allWithoutDisable:i,half:!e&&!t}},yw=function(r){if(r.childNodes.length===0||r.loading)return;const{all:e,none:t,half:i}=lA(r.childNodes);e?(r.checked=!0,r.indeterminate=!1):i?(r.checked=!1,r.indeterminate=!0):t&&(r.checked=!1,r.indeterminate=!1);const n=r.parent;!n||n.level===0||r.store.checkStrictly||yw(n)},bw=function(r,e){const t=r.store.props,i=r.data||{},n=t[e];if(typeof n=="function")return n(i,r);if(typeof n=="string")return i[n];if(typeof n>"u"){const s=i[e];return s===void 0?"":s}};let HNe=0,cA=class mT{constructor(e){this.id=HNe++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,this.canFocus=!1;for(const t in e)er(e,t)&&(this[t]=e[t]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1)}initialize(){const e=this.store;if(!e)throw new Error("[Node]store is required!");e.registerNode(this);const t=e.props;if(t&&typeof t.isLeaf<"u"){const s=bw(this,"isLeaf");typeof s=="boolean"&&(this.isLeafByUser=s)}if(e.lazy!==!0&&this.data?(this.setData(this.data),e.defaultExpandAll&&(this.expanded=!0,this.canFocus=!0)):this.level>0&&e.lazy&&e.defaultExpandAll&&this.expand(),Array.isArray(this.data)||D6(this,this.data),!this.data)return;const i=e.defaultExpandedKeys,n=e.key;n&&i&&i.includes(this.key)&&this.expand(null,e.autoExpandParent),n&&e.currentNodeKey!==void 0&&this.key===e.currentNodeKey&&(e.currentNode=this,e.currentNode.isCurrent=!0),e.lazy&&e._initDefaultCheckedNode(this),this.updateLeafState(),this.parent&&(this.level===1||this.parent.expanded===!0)&&(this.canFocus=!0)}setData(e){Array.isArray(e)||D6(this,e),this.data=e,this.childNodes=[];let t;this.level===0&&Array.isArray(this.data)?t=this.data:t=bw(this,"children")||[];for(let i=0,n=t.length;i<n;i++)this.insertChild({data:t[i]})}get label(){return bw(this,"label")}get key(){const e=this.store.key;return this.data?this.data[e]:null}get disabled(){return bw(this,"disabled")}get nextSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return e.childNodes[t+1]}return null}get previousSibling(){const e=this.parent;if(e){const t=e.childNodes.indexOf(this);if(t>-1)return t>0?e.childNodes[t-1]:null}return null}contains(e,t=!0){return(this.childNodes||[]).some(i=>i===e||t&&i.contains(e))}remove(){const e=this.parent;e&&e.removeChild(this)}insertChild(e,t,i){if(!e)throw new Error("InsertChild error: child is required.");if(!(e instanceof mT)){if(!i){const n=this.getChildren(!0);n.includes(e.data)||(typeof t>"u"||t<0?n.push(e.data):n.splice(t,0,e.data))}Object.assign(e,{parent:this,store:this.store}),e=br(new mT(e)),e instanceof mT&&e.initialize()}e.level=this.level+1,typeof t>"u"||t<0?this.childNodes.push(e):this.childNodes.splice(t,0,e),this.updateLeafState()}insertBefore(e,t){let i;t&&(i=this.childNodes.indexOf(t)),this.insertChild(e,i)}insertAfter(e,t){let i;t&&(i=this.childNodes.indexOf(t),i!==-1&&(i+=1)),this.insertChild(e,i)}removeChild(e){const t=this.getChildren()||[],i=t.indexOf(e.data);i>-1&&t.splice(i,1);const n=this.childNodes.indexOf(e);n>-1&&(this.store&&this.store.deregisterNode(e),e.parent=null,this.childNodes.splice(n,1)),this.updateLeafState()}removeChildByData(e){let t=null;for(let i=0;i<this.childNodes.length;i++)if(this.childNodes[i].data===e){t=this.childNodes[i];break}t&&this.removeChild(t)}expand(e,t){const i=()=>{if(t){let n=this.parent;for(;n.level>0;)n.expanded=!0,n=n.parent}this.expanded=!0,e&&e(),this.childNodes.forEach(n=>{n.canFocus=!0})};this.shouldLoadData()?this.loadData(n=>{Array.isArray(n)&&(this.checked?this.setChecked(!0,!0):this.store.checkStrictly||yw(this),i())}):i()}doCreateChildren(e,t={}){e.forEach(i=>{this.insertChild(Object.assign({data:i},t),void 0,!0)})}collapse(){this.expanded=!1,this.childNodes.forEach(e=>{e.canFocus=!1})}shouldLoadData(){return this.store.lazy===!0&&this.store.load&&!this.loaded}updateLeafState(){if(this.store.lazy===!0&&this.loaded!==!0&&typeof this.isLeafByUser<"u"){this.isLeaf=this.isLeafByUser;return}const e=this.childNodes;if(!this.store.lazy||this.store.lazy===!0&&this.loaded===!0){this.isLeaf=!e||e.length===0;return}this.isLeaf=!1}setChecked(e,t,i,n){if(this.indeterminate=e==="half",this.checked=e===!0,this.store.checkStrictly)return;if(!(this.shouldLoadData()&&!this.store.checkDescendants)){const{all:o,allWithoutDisable:a}=lA(this.childNodes);!this.isLeaf&&!o&&a&&(this.checked=!1,e=!1);const l=()=>{if(t){const c=this.childNodes;for(let h=0,p=c.length;h<p;h++){const f=c[h];n=n||e!==!1;const m=f.disabled?f.checked:n;f.setChecked(m,t,!0,n)}const{half:u,all:d}=lA(c);d||(this.checked=d,this.indeterminate=u)}};if(this.shouldLoadData()){this.loadData(()=>{l(),yw(this)},{checked:e!==!1});return}else l()}const s=this.parent;!s||s.level===0||i||yw(s)}getChildren(e=!1){if(this.level===0)return this.data;const t=this.data;if(!t)return null;const i=this.store.props;let n="children";return i&&(n=i.children||"children"),t[n]===void 0&&(t[n]=null),e&&!t[n]&&(t[n]=[]),t[n]}updateChildren(){const e=this.getChildren()||[],t=this.childNodes.map(s=>s.data),i={},n=[];e.forEach((s,o)=>{const a=s[Vf];a&&t.findIndex(l=>l[Vf]===a)>=0?i[a]={index:o,data:s}:n.push({index:o,data:s})}),this.store.lazy||t.forEach(s=>{i[s[Vf]]||this.removeChildByData(s)}),n.forEach(({index:s,data:o})=>{this.insertChild({data:o},s)}),this.updateLeafState()}loadData(e,t={}){if(this.store.lazy===!0&&this.store.load&&!this.loaded&&(!this.loading||Object.keys(t).length)){this.loading=!0;const i=n=>{this.childNodes=[],this.doCreateChildren(n,t),this.loaded=!0,this.loading=!1,this.updateLeafState(),e&&e.call(this,n)};this.store.load(this,i)}else e&&e.call(this)}};class WNe{constructor(e){this.currentNode=null,this.currentNodeKey=null;for(const t in e)er(e,t)&&(this[t]=e[t]);this.nodesMap={}}initialize(){if(this.root=new cA({data:this.data,store:this}),this.root.initialize(),this.lazy&&this.load){const e=this.load;e(this.root,t=>{this.root.doCreateChildren(t),this._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}filter(e){const t=this.filterNodeMethod,i=this.lazy,n=function(s){const o=s.root?s.root.childNodes:s.childNodes;if(o.forEach(a=>{a.visible=t.call(a,e,a.data,a),n(a)}),!s.visible&&o.length){let a=!0;a=!o.some(l=>l.visible),s.root?s.root.visible=a===!1:s.visible=a===!1}e&&s.visible&&!s.isLeaf&&!i&&s.expand()};n(this)}setData(e){e!==this.root.data?(this.root.setData(e),this._initDefaultCheckedNodes()):this.root.updateChildren()}getNode(e){if(e instanceof cA)return e;const t=Ht(e)?oA(this.key,e):e;return this.nodesMap[t]||null}insertBefore(e,t){const i=this.getNode(t);i.parent.insertBefore({data:e},i)}insertAfter(e,t){const i=this.getNode(t);i.parent.insertAfter({data:e},i)}remove(e){const t=this.getNode(e);t&&t.parent&&(t===this.currentNode&&(this.currentNode=null),t.parent.removeChild(t))}append(e,t){const i=t?this.getNode(t):this.root;i&&i.insertChild({data:e})}_initDefaultCheckedNodes(){const e=this.defaultCheckedKeys||[],t=this.nodesMap;e.forEach(i=>{const n=t[i];n&&n.setChecked(!0,!this.checkStrictly)})}_initDefaultCheckedNode(e){(this.defaultCheckedKeys||[]).includes(e.key)&&e.setChecked(!0,!this.checkStrictly)}setDefaultCheckedKey(e){e!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=e,this._initDefaultCheckedNodes())}registerNode(e){const t=this.key;!e||!e.data||(t?e.key!==void 0&&(this.nodesMap[e.key]=e):this.nodesMap[e.id]=e)}deregisterNode(e){!this.key||!e||!e.data||(e.childNodes.forEach(t=>{this.deregisterNode(t)}),delete this.nodesMap[e.key])}getCheckedNodes(e=!1,t=!1){const i=[],n=function(s){(s.root?s.root.childNodes:s.childNodes).forEach(o=>{(o.checked||t&&o.indeterminate)&&(!e||e&&o.isLeaf)&&i.push(o.data),n(o)})};return n(this),i}getCheckedKeys(e=!1){return this.getCheckedNodes(e).map(t=>(t||{})[this.key])}getHalfCheckedNodes(){const e=[],t=function(i){(i.root?i.root.childNodes:i.childNodes).forEach(n=>{n.indeterminate&&e.push(n.data),t(n)})};return t(this),e}getHalfCheckedKeys(){return this.getHalfCheckedNodes().map(e=>(e||{})[this.key])}_getAllNodes(){const e=[],t=this.nodesMap;for(const i in t)er(t,i)&&e.push(t[i]);return e}updateChildren(e,t){const i=this.nodesMap[e];if(!i)return;const n=i.childNodes;for(let s=n.length-1;s>=0;s--){const o=n[s];this.remove(o.data)}for(let s=0,o=t.length;s<o;s++){const a=t[s];this.append(a,i.data)}}_setCheckedKeys(e,t=!1,i){const n=this._getAllNodes().sort((a,l)=>l.level-a.level),s=Object.create(null),o=Object.keys(i);n.forEach(a=>a.setChecked(!1,!1));for(let a=0,l=n.length;a<l;a++){const c=n[a],u=c.data[e].toString();if(!o.includes(u)){c.checked&&!s[u]&&c.setChecked(!1,!1);continue}let d=c.parent;for(;d&&d.level>0;)s[d.data[e]]=!0,d=d.parent;if(c.isLeaf||this.checkStrictly){c.setChecked(!0,!1);continue}if(c.setChecked(!0,!0),t){c.setChecked(!1,!1);const h=function(p){p.childNodes.forEach(f=>{f.isLeaf||f.setChecked(!1,!1),h(f)})};h(c)}}}setCheckedNodes(e,t=!1){const i=this.key,n={};e.forEach(s=>{n[(s||{})[i]]=!0}),this._setCheckedKeys(i,t,n)}setCheckedKeys(e,t=!1){this.defaultCheckedKeys=e;const i=this.key,n={};e.forEach(s=>{n[s]=!0}),this._setCheckedKeys(i,t,n)}setDefaultExpandedKeys(e){e=e||[],this.defaultExpandedKeys=e,e.forEach(t=>{const i=this.getNode(t);i&&i.expand(null,this.autoExpandParent)})}setChecked(e,t,i){const n=this.getNode(e);n&&n.setChecked(!!t,i)}getCurrentNode(){return this.currentNode}setCurrentNode(e){const t=this.currentNode;t&&(t.isCurrent=!1),this.currentNode=e,this.currentNode.isCurrent=!0}setUserCurrentNode(e,t=!0){const i=e[this.key],n=this.nodesMap[i];this.setCurrentNode(n),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0)}setCurrentNodeKey(e,t=!0){if(e==null){this.currentNode&&(this.currentNode.isCurrent=!1),this.currentNode=null;return}const i=this.getNode(e);i&&(this.setCurrentNode(i),t&&this.currentNode.level>1&&this.currentNode.parent.expand(null,!0))}}const $Ne=xe({name:"ElTreeNodeContent",props:{node:{type:Object,required:!0},renderContent:Function},setup(r){const e=Ge("tree"),t=ut("NodeInstance"),i=ut("RootTree");return()=>{const n=r.node,{data:s,store:o}=n;return r.renderContent?r.renderContent(yt,{_self:t,node:n,data:s,store:o}):i.ctx.slots.default?i.ctx.slots.default({node:n,data:s}):yt("span",{class:e.be("node","label")},[n.label])}}});var XNe=Qe($Ne,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node-content.vue"]]);function U6(r){const e=ut("TreeNodeMap",null),t={treeNodeExpand:i=>{r.node!==i&&r.node.collapse()},children:[]};return e&&e.children.push(t),Yt("TreeNodeMap",t),{broadcastExpanded:i=>{if(r.accordion)for(const n of t.children)n.treeNodeExpand(i)}}}const F6=Symbol("dragEvents");function qNe({props:r,ctx:e,el$:t,dropIndicator$:i,store:n}){const s=Ge("tree"),o=W({showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0,dropType:null});return Yt(F6,{treeNodeDragStart:({event:a,treeNode:l})=>{if(typeof r.allowDrag=="function"&&!r.allowDrag(l.node))return a.preventDefault(),!1;a.dataTransfer.effectAllowed="move";try{a.dataTransfer.setData("text/plain","")}catch{}o.value.draggingNode=l,e.emit("node-drag-start",l.node,a)},treeNodeDragOver:({event:a,treeNode:l})=>{const c=l,u=o.value.dropNode;u&&u.node.id!==c.node.id&&Xs(u.$el,s.is("drop-inner"));const d=o.value.draggingNode;if(!d||!c)return;let h=!0,p=!0,f=!0,m=!0;typeof r.allowDrop=="function"&&(h=r.allowDrop(d.node,c.node,"prev"),m=p=r.allowDrop(d.node,c.node,"inner"),f=r.allowDrop(d.node,c.node,"next")),a.dataTransfer.dropEffect=p||h||f?"move":"none",(h||p||f)&&(u==null?void 0:u.node.id)!==c.node.id&&(u&&e.emit("node-drag-leave",d.node,u.node,a),e.emit("node-drag-enter",d.node,c.node,a)),(h||p||f)&&(o.value.dropNode=c),c.node.nextSibling===d.node&&(f=!1),c.node.previousSibling===d.node&&(h=!1),c.node.contains(d.node,!1)&&(p=!1),(d.node===c.node||d.node.contains(c.node))&&(h=!1,p=!1,f=!1);const g=c.$el.querySelector(`.${s.be("node","content")}`).getBoundingClientRect(),v=t.value.getBoundingClientRect();let x;const b=h?p?.25:f?.45:1:-1,w=f?p?.75:h?.55:0:1;let _=-9999;const S=a.clientY-g.top;S<g.height*b?x="before":S>g.height*w?x="after":p?x="inner":x="none";const T=c.$el.querySelector(`.${s.be("node","expand-icon")}`).getBoundingClientRect(),M=i.value;x==="before"?_=T.top-v.top:x==="after"&&(_=T.bottom-v.top),M.style.top=`${_}px`,M.style.left=`${T.right-v.left}px`,x==="inner"?vl(c.$el,s.is("drop-inner")):Xs(c.$el,s.is("drop-inner")),o.value.showDropIndicator=x==="before"||x==="after",o.value.allowDrop=o.value.showDropIndicator||m,o.value.dropType=x,e.emit("node-drag-over",d.node,c.node,a)},treeNodeDragEnd:a=>{const{draggingNode:l,dropType:c,dropNode:u}=o.value;if(a.preventDefault(),a.dataTransfer.dropEffect="move",l&&u){const d={data:l.node.data};c!=="none"&&l.node.remove(),c==="before"?u.node.parent.insertBefore(d,u.node):c==="after"?u.node.parent.insertAfter(d,u.node):c==="inner"&&u.node.insertChild(d),c!=="none"&&n.value.registerNode(d),Xs(u.$el,s.is("drop-inner")),e.emit("node-drag-end",l.node,u.node,c,a),c!=="none"&&e.emit("node-drop",l.node,u.node,c,a)}l&&!u&&e.emit("node-drag-end",l.node,null,c,a),o.value.showDropIndicator=!1,o.value.draggingNode=null,o.value.dropNode=null,o.value.allowDrop=!0}}),{dragState:o}}const KNe=xe({name:"ElTreeNode",components:{ElCollapseTransition:qx,ElCheckbox:oa,NodeContent:XNe,ElIcon:dt,Loading:du},props:{node:{type:cA,default:()=>({})},props:{type:Object,default:()=>({})},accordion:Boolean,renderContent:Function,renderAfterExpand:Boolean,showCheckbox:{type:Boolean,default:!1}},emits:["node-expand"],setup(r,e){const t=Ge("tree"),{broadcastExpanded:i}=U6(r),n=ut("RootTree"),s=W(!1),o=W(!1),a=W(null),l=W(null),c=W(null),u=ut(F6),d=Dt();Yt("NodeInstance",d),r.node.expanded&&(s.value=!0,o.value=!0);const h=n.props.props.children||"children";Ve(()=>{const w=r.node.data[h];return w&&[...w]},()=>{r.node.updateChildren()}),Ve(()=>r.node.indeterminate,w=>{m(r.node.checked,w)}),Ve(()=>r.node.checked,w=>{m(w,r.node.indeterminate)}),Ve(()=>r.node.expanded,w=>{ht(()=>s.value=w),w&&(o.value=!0)});const p=w=>oA(n.props.nodeKey,w.data),f=w=>{const _=r.props.class;if(!_)return{};let S;if(Nt(_)){const{data:T}=w;S=_(T,w)}else S=_;return kt(S)?{[S]:!0}:S},m=(w,_)=>{(a.value!==w||l.value!==_)&&n.ctx.emit("check-change",r.node.data,w,_),a.value=w,l.value=_},g=w=>{aA(n.store,n.ctx.emit,()=>n.store.value.setCurrentNode(r.node)),n.currentNode.value=r.node,n.props.expandOnClickNode&&x(),n.props.checkOnClickNode&&!r.node.disabled&&b(null,{target:{checked:!r.node.checked}}),n.ctx.emit("node-click",r.node.data,r.node,d,w)},v=w=>{n.instance.vnode.props.onNodeContextmenu&&(w.stopPropagation(),w.preventDefault()),n.ctx.emit("node-contextmenu",w,r.node.data,r.node,d)},x=()=>{r.node.isLeaf||(s.value?(n.ctx.emit("node-collapse",r.node.data,r.node,d),r.node.collapse()):(r.node.expand(),e.emit("node-expand",r.node.data,r.node,d)))},b=(w,_)=>{r.node.setChecked(_.target.checked,!n.props.checkStrictly),ht(()=>{const S=n.store.value;n.ctx.emit("check",r.node.data,{checkedNodes:S.getCheckedNodes(),checkedKeys:S.getCheckedKeys(),halfCheckedNodes:S.getHalfCheckedNodes(),halfCheckedKeys:S.getHalfCheckedKeys()})})};return{ns:t,node$:c,tree:n,expanded:s,childNodeRendered:o,oldChecked:a,oldIndeterminate:l,getNodeKey:p,getNodeClass:f,handleSelectChange:m,handleClick:g,handleContextMenu:v,handleExpandIconClick:x,handleCheckChange:b,handleChildNodeExpand:(w,_,S)=>{i(_),n.ctx.emit("node-expand",w,_,S)},handleDragStart:w=>{n.props.draggable&&u.treeNodeDragStart({event:w,treeNode:r})},handleDragOver:w=>{w.preventDefault(),n.props.draggable&&u.treeNodeDragOver({event:w,treeNode:{$el:c.value,node:r.node}})},handleDrop:w=>{w.preventDefault()},handleDragEnd:w=>{n.props.draggable&&u.treeNodeDragEnd(w)},CaretRight:hU}}}),YNe=["aria-expanded","aria-disabled","aria-checked","draggable","data-key"],ZNe=["aria-expanded"];function JNe(r,e,t,i,n,s){const o=gt("el-icon"),a=gt("el-checkbox"),l=gt("loading"),c=gt("node-content"),u=gt("el-tree-node"),d=gt("el-collapse-transition");return It((D(),ee("div",{ref:"node$",class:j([r.ns.b("node"),r.ns.is("expanded",r.expanded),r.ns.is("current",r.node.isCurrent),r.ns.is("hidden",!r.node.visible),r.ns.is("focusable",!r.node.disabled),r.ns.is("checked",!r.node.disabled&&r.node.checked),r.getNodeClass(r.node)]),role:"treeitem",tabindex:"-1","aria-expanded":r.expanded,"aria-disabled":r.node.disabled,"aria-checked":r.node.checked,draggable:r.tree.props.draggable,"data-key":r.getNodeKey(r.node),onClick:e[1]||(e[1]=Mt((...h)=>r.handleClick&&r.handleClick(...h),["stop"])),onContextmenu:e[2]||(e[2]=(...h)=>r.handleContextMenu&&r.handleContextMenu(...h)),onDragstart:e[3]||(e[3]=Mt((...h)=>r.handleDragStart&&r.handleDragStart(...h),["stop"])),onDragover:e[4]||(e[4]=Mt((...h)=>r.handleDragOver&&r.handleDragOver(...h),["stop"])),onDragend:e[5]||(e[5]=Mt((...h)=>r.handleDragEnd&&r.handleDragEnd(...h),["stop"])),onDrop:e[6]||(e[6]=Mt((...h)=>r.handleDrop&&r.handleDrop(...h),["stop"]))},[J("div",{class:j(r.ns.be("node","content")),style:pt({paddingLeft:(r.node.level-1)*r.tree.props.indent+"px"})},[r.tree.props.icon||r.CaretRight?(D(),Ae(o,{key:0,class:j([r.ns.be("node","expand-icon"),r.ns.is("leaf",r.node.isLeaf),{expanded:!r.node.isLeaf&&r.expanded}]),onClick:Mt(r.handleExpandIconClick,["stop"])},{default:me(()=>[(D(),Ae(Xt(r.tree.props.icon||r.CaretRight)))]),_:1},8,["class","onClick"])):Re("v-if",!0),r.showCheckbox?(D(),Ae(a,{key:1,"model-value":r.node.checked,indeterminate:r.node.indeterminate,disabled:!!r.node.disabled,onClick:e[0]||(e[0]=Mt(()=>{},["stop"])),onChange:r.handleCheckChange},null,8,["model-value","indeterminate","disabled","onChange"])):Re("v-if",!0),r.node.loading?(D(),Ae(o,{key:2,class:j([r.ns.be("node","loading-icon"),r.ns.is("loading")])},{default:me(()=>[ue(l)]),_:1},8,["class"])):Re("v-if",!0),ue(c,{node:r.node,"render-content":r.renderContent},null,8,["node","render-content"])],6),ue(d,null,{default:me(()=>[!r.renderAfterExpand||r.childNodeRendered?It((D(),ee("div",{key:0,class:j(r.ns.be("node","children")),role:"group","aria-expanded":r.expanded},[(D(!0),ee(ct,null,Ut(r.node.childNodes,h=>(D(),Ae(u,{key:r.getNodeKey(h),"render-content":r.renderContent,"render-after-expand":r.renderAfterExpand,"show-checkbox":r.showCheckbox,node:h,accordion:r.accordion,props:r.props,onNodeExpand:r.handleChildNodeExpand},null,8,["render-content","render-after-expand","show-checkbox","node","accordion","props","onNodeExpand"]))),128))],10,ZNe)),[[vr,r.expanded]]):Re("v-if",!0)]),_:1})],42,YNe)),[[vr,r.node.visible]])}var QNe=Qe(KNe,[["render",JNe],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree-node.vue"]]);function eRe({el$:r},e){const t=Ge("tree"),i=Vr([]),n=Vr([]);Et(()=>{s()}),Yl(()=>{i.value=Array.from(r.value.querySelectorAll("[role=treeitem]")),n.value=Array.from(r.value.querySelectorAll("input[type=checkbox]"))}),Ve(n,o=>{o.forEach(a=>{a.setAttribute("tabindex","-1")})}),Qr(r,"keydown",o=>{const a=o.target;if(!a.className.includes(t.b("node")))return;const l=o.code;i.value=Array.from(r.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`));const c=i.value.indexOf(a);let u;if([bt.up,bt.down].includes(l)){if(o.preventDefault(),l===bt.up){u=c===-1?0:c!==0?c-1:i.value.length-1;const h=u;for(;!e.value.getNode(i.value[u].dataset.key).canFocus;){if(u--,u===h){u=-1;break}u<0&&(u=i.value.length-1)}}else{u=c===-1?0:c<i.value.length-1?c+1:0;const h=u;for(;!e.value.getNode(i.value[u].dataset.key).canFocus;){if(u++,u===h){u=-1;break}u>=i.value.length&&(u=0)}}u!==-1&&i.value[u].focus()}[bt.left,bt.right].includes(l)&&(o.preventDefault(),a.click());const d=a.querySelector('[type="checkbox"]');[bt.enter,bt.space].includes(l)&&d&&(o.preventDefault(),d.click())});const s=()=>{var o;i.value=Array.from(r.value.querySelectorAll(`.${t.is("focusable")}[role=treeitem]`)),n.value=Array.from(r.value.querySelectorAll("input[type=checkbox]"));const a=r.value.querySelectorAll(`.${t.is("checked")}[role=treeitem]`);if(a.length){a[0].setAttribute("tabindex","0");return}(o=i.value[0])==null||o.setAttribute("tabindex","0")}}const tRe=xe({name:"ElTree",components:{ElTreeNode:QNe},props:{data:{type:Array,default:()=>[]},emptyText:{type:String},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{type:Object,default:()=>({children:"children",label:"label",disabled:"disabled"})},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},icon:{type:Gr}},emits:["check-change","current-change","node-click","node-contextmenu","node-collapse","node-expand","check","node-drag-start","node-drag-end","node-drop","node-drag-leave","node-drag-enter","node-drag-over"],setup(r,e){const{t}=pr(),i=Ge("tree"),n=W(new WNe({key:r.nodeKey,data:r.data,lazy:r.lazy,props:r.props,load:r.load,currentNodeKey:r.currentNodeKey,checkStrictly:r.checkStrictly,checkDescendants:r.checkDescendants,defaultCheckedKeys:r.defaultCheckedKeys,defaultExpandedKeys:r.defaultExpandedKeys,autoExpandParent:r.autoExpandParent,defaultExpandAll:r.defaultExpandAll,filterNodeMethod:r.filterNodeMethod}));n.value.initialize();const s=W(n.value.root),o=W(null),a=W(null),l=W(null),{broadcastExpanded:c}=U6(r),{dragState:u}=qNe({props:r,ctx:e,el$:a,dropIndicator$:l,store:n});eRe({el$:a},n);const d=I(()=>{const{childNodes:k}=s.value;return!k||k.length===0||k.every(({visible:z})=>!z)});Ve(()=>r.currentNodeKey,k=>{n.value.setCurrentNodeKey(k)}),Ve(()=>r.defaultCheckedKeys,k=>{n.value.setDefaultCheckedKey(k)}),Ve(()=>r.defaultExpandedKeys,k=>{n.value.setDefaultExpandedKeys(k)}),Ve(()=>r.data,k=>{n.value.setData(k)},{deep:!0}),Ve(()=>r.checkStrictly,k=>{n.value.checkStrictly=k});const h=k=>{if(!r.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");n.value.filter(k)},p=k=>oA(r.nodeKey,k.data),f=k=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");const z=n.value.getNode(k);if(!z)return[];const O=[z.data];let V=z.parent;for(;V&&V!==s.value;)O.push(V.data),V=V.parent;return O.reverse()},m=(k,z)=>n.value.getCheckedNodes(k,z),g=k=>n.value.getCheckedKeys(k),v=()=>{const k=n.value.getCurrentNode();return k?k.data:null},x=()=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");const k=v();return k?k[r.nodeKey]:null},b=(k,z)=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");n.value.setCheckedNodes(k,z)},w=(k,z)=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");n.value.setCheckedKeys(k,z)},_=(k,z,O)=>{n.value.setChecked(k,z,O)},S=()=>n.value.getHalfCheckedNodes(),T=()=>n.value.getHalfCheckedKeys(),M=(k,z=!0)=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");aA(n,e.emit,()=>n.value.setUserCurrentNode(k,z))},E=(k,z=!0)=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");aA(n,e.emit,()=>n.value.setCurrentNodeKey(k,z))},C=k=>n.value.getNode(k),P=k=>{n.value.remove(k)},A=(k,z)=>{n.value.append(k,z)},N=(k,z)=>{n.value.insertBefore(k,z)},R=(k,z)=>{n.value.insertAfter(k,z)},F=(k,z,O)=>{c(z),e.emit("node-expand",k,z,O)},B=(k,z)=>{if(!r.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");n.value.updateChildren(k,z)};return Yt("RootTree",{ctx:e,props:r,store:n,root:s,currentNode:o,instance:Dt()}),Yt(Sl,void 0),{ns:i,store:n,root:s,currentNode:o,dragState:u,el$:a,dropIndicator$:l,isEmpty:d,filter:h,getNodeKey:p,getNodePath:f,getCheckedNodes:m,getCheckedKeys:g,getCurrentNode:v,getCurrentKey:x,setCheckedNodes:b,setCheckedKeys:w,setChecked:_,getHalfCheckedNodes:S,getHalfCheckedKeys:T,setCurrentNode:M,setCurrentKey:E,t,getNode:C,remove:P,append:A,insertBefore:N,insertAfter:R,handleNodeExpand:F,updateKeyChildren:B}}});function rRe(r,e,t,i,n,s){const o=gt("el-tree-node");return D(),ee("div",{ref:"el$",class:j([r.ns.b(),r.ns.is("dragging",!!r.dragState.draggingNode),r.ns.is("drop-not-allow",!r.dragState.allowDrop),r.ns.is("drop-inner",r.dragState.dropType==="inner"),{[r.ns.m("highlight-current")]:r.highlightCurrent}]),role:"tree"},[(D(!0),ee(ct,null,Ut(r.root.childNodes,a=>(D(),Ae(o,{key:r.getNodeKey(a),node:a,props:r.props,accordion:r.accordion,"render-after-expand":r.renderAfterExpand,"show-checkbox":r.showCheckbox,"render-content":r.renderContent,onNodeExpand:r.handleNodeExpand},null,8,["node","props","accordion","render-after-expand","show-checkbox","render-content","onNodeExpand"]))),128)),r.isEmpty?(D(),ee("div",{key:0,class:j(r.ns.e("empty-block"))},[ze(r.$slots,"empty",{},()=>{var a;return[J("span",{class:j(r.ns.e("empty-text"))},$e((a=r.emptyText)!=null?a:r.t("el.tree.emptyText")),3)]})],2)):Re("v-if",!0),It(J("div",{ref:"dropIndicator$",class:j(r.ns.e("drop-indicator"))},null,2),[[vr,r.dragState.showDropIndicator]])],2)}var xw=Qe(tRe,[["render",rRe],["__file","/home/runner/work/element-plus/element-plus/packages/components/tree/src/tree.vue"]]);xw.install=r=>{r.component(xw.name,xw)};const ww=xw,iRe=ww,nRe=(r,{attrs:e},{tree:t,key:i})=>{const n=Ge("tree-select"),s={...ic(fn(r),Object.keys(eh.props)),...e,valueKey:i,popperClass:I(()=>{const o=[n.e("popper")];return r.popperClass&&o.push(r.popperClass),o.join(" ")}),filterMethod:(o="")=>{r.filterMethod&&r.filterMethod(o),ht(()=>{var a;(a=t.value)==null||a.filter(o)})},onVisibleChange:o=>{var a;(a=e.onVisibleChange)==null||a.call(e,o),r.filterable&&o&&s.filterMethod()}};return s},sRe=xe({extends:rw,setup(r,e){const t=rw.setup(r,e);delete t.selectOptionClick;const i=Dt().proxy;return ht(()=>{t.select.cachedOptions.get(i.value)||t.select.onOptionCreate(i)}),t},methods:{selectOptionClick(){this.$el.parentElement.click()}}});function uA(r){return r||r===0}function dA(r){return Array.isArray(r)&&r.length}function v0(r){return Array.isArray(r)?r:uA(r)?[r]:[]}function _w(r,e,t,i,n){for(let s=0;s<r.length;s++){const o=r[s];if(e(o,s,r,n))return i?i(o,s,r,n):o;{const a=t(o);if(dA(a)){const l=_w(a,e,t,i,o);if(l)return l}}}}function B6(r,e,t,i){for(let n=0;n<r.length;n++){const s=r[n];e(s,n,r,i);const o=t(s);dA(o)&&B6(o,e,t,s)}}const oRe=(r,{attrs:e,slots:t,emit:i},{select:n,tree:s,key:o})=>{Ve(()=>r.modelValue,()=>{r.showCheckbox&&ht(()=>{const h=s.value;h&&!$s(h.getCheckedKeys(),v0(r.modelValue))&&h.setCheckedKeys(v0(r.modelValue))})},{immediate:!0,deep:!0});const a=I(()=>({value:o.value,label:"label",children:"children",disabled:"disabled",isLeaf:"isLeaf",...r.props})),l=(h,p)=>{var f;const m=a.value[h];return Nt(m)?m(p,(f=s.value)==null?void 0:f.getNode(l("value",p))):p[m]},c=v0(r.modelValue).map(h=>_w(r.data||[],p=>l("value",p)===h,p=>l("children",p),(p,f,m,g)=>g&&l("value",g))).filter(h=>uA(h)),u=I(()=>{if(!r.renderAfterExpand&&!r.lazy)return[];const h=[];return B6(r.data.concat(r.cacheData),p=>{const f=l("value",p);h.push({value:f,currentLabel:l("label",p),isDisabled:l("disabled",p)})},p=>l("children",p)),h}),d=I(()=>u.value.reduce((h,p)=>({...h,[p.value]:p}),{}));return{...ic(fn(r),Object.keys(ww.props)),...e,nodeKey:o,expandOnClickNode:I(()=>!r.checkStrictly&&r.expandOnClickNode),defaultExpandedKeys:I(()=>r.defaultExpandedKeys?r.defaultExpandedKeys.concat(c):c),renderContent:(h,{node:p,data:f,store:m})=>h(sRe,{value:l("value",f),label:l("label",f),disabled:l("disabled",f)},r.renderContent?()=>r.renderContent(h,{node:p,data:f,store:m}):t.default?()=>t.default({node:p,data:f,store:m}):void 0),filterNodeMethod:(h,p,f)=>{var m;return r.filterNodeMethod?r.filterNodeMethod(h,p,f):h?(m=l("label",p))==null?void 0:m.includes(h):!0},onNodeClick:(h,p,f)=>{var m,g,v;if((m=e.onNodeClick)==null||m.call(e,h,p,f),!(r.showCheckbox&&r.checkOnClickNode))if(!r.showCheckbox&&(r.checkStrictly||p.isLeaf)){if(!l("disabled",h)){const x=(g=n.value)==null?void 0:g.options.get(l("value",h));(v=n.value)==null||v.handleOptionSelect(x)}}else r.expandOnClickNode&&f.proxy.handleExpandIconClick()},onCheck:(h,p)=>{if(!r.showCheckbox)return;const f=l("value",h),m=p.checkedKeys,g=r.multiple?v0(r.modelValue).filter(x=>x in d.value&&!s.value.getNode(x)&&!m.includes(x)):[],v=m.concat(g);if(r.checkStrictly)i(Wt,r.multiple?v:v.includes(f)?f:void 0);else if(r.multiple)i(Wt,s.value.getCheckedKeys(!0));else{const x=_w([h],_=>!dA(l("children",_))&&!l("disabled",_),_=>l("children",_)),b=x?l("value",x):void 0,w=uA(r.modelValue)&&!!_w([h],_=>l("value",_)===r.modelValue,_=>l("children",_));i(Wt,b===r.modelValue||w?void 0:b)}ht(()=>{var x;const b=v0(r.modelValue);s.value.setCheckedKeys(b),(x=e.onCheck)==null||x.call(e,h,{checkedKeys:s.value.getCheckedKeys(),checkedNodes:s.value.getCheckedNodes(),halfCheckedKeys:s.value.getHalfCheckedKeys(),halfCheckedNodes:s.value.getHalfCheckedNodes()})})},cacheOptions:u}};var aRe=xe({props:{data:{type:Array,default:()=>[]}},setup(r){const e=ut(n0);return Ve(()=>r.data,()=>{var t;r.data.forEach(n=>{e.cachedOptions.has(n.value)||e.cachedOptions.set(n.value,n)});const i=((t=e.selectWrapper)==null?void 0:t.querySelectorAll("input"))||[];Array.from(i).includes(document.activeElement)||e.setSelected()},{flush:"post",immediate:!0}),()=>{}}});const lRe=xe({name:"ElTreeSelect",inheritAttrs:!1,props:{...eh.props,...ww.props,cacheData:{type:Array,default:()=>[]}},setup(r,e){const{slots:t,expose:i}=e,n=W(),s=W(),o=I(()=>r.nodeKey||r.valueKey||"value"),a=nRe(r,e,{select:n,tree:s,key:o}),{cacheOptions:l,...c}=oRe(r,e,{select:n,tree:s,key:o}),u=br({});return i(u),Et(()=>{Object.assign(u,{...ic(s.value,["filter","updateKeyChildren","getCheckedNodes","setCheckedNodes","getCheckedKeys","setCheckedKeys","setChecked","getHalfCheckedNodes","getHalfCheckedKeys","getCurrentKey","getCurrentNode","setCurrentKey","setCurrentNode","getNode","remove","append","insertBefore","insertAfter"]),...ic(n.value,["focus","blur"])})}),()=>yt(eh,br({...a,ref:d=>n.value=d}),{...t,default:()=>[yt(aRe,{data:l.value}),yt(ww,br({...c,ref:d=>s.value=d}))]})}});var Sw=Qe(lRe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-select/src/tree-select.vue"]]);Sw.install=r=>{r.component(Sw.name,Sw)};const cRe=Sw,uRe=cRe,hA=Symbol(),dRe={key:-1,level:-1,data:{}};var y0=(r=>(r.KEY="id",r.LABEL="label",r.CHILDREN="children",r.DISABLED="disabled",r))(y0||{}),pA=(r=>(r.ADD="add",r.DELETE="delete",r))(pA||{});const z6={type:Number,default:26},hRe=et({data:{type:Oe(Array),default:()=>ri([])},emptyText:{type:String},height:{type:Number,default:200},props:{type:Oe(Object),default:()=>ri({children:"children",label:"label",disabled:"disabled",value:"id"})},highlightCurrent:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},defaultCheckedKeys:{type:Oe(Array),default:()=>ri([])},checkStrictly:{type:Boolean,default:!1},defaultExpandedKeys:{type:Oe(Array),default:()=>ri([])},indent:{type:Number,default:16},itemSize:z6,icon:{type:Gr},expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:{type:Boolean,default:!1},currentNodeKey:{type:Oe([String,Number])},accordion:{type:Boolean,default:!1},filterMethod:{type:Oe(Function)},perfMode:{type:Boolean,default:!0}}),pRe=et({node:{type:Oe(Object),default:()=>ri(dRe)},expanded:{type:Boolean,default:!1},checked:{type:Boolean,default:!1},indeterminate:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},current:{type:Boolean,default:!1},hiddenExpandIcon:{type:Boolean,default:!1},itemSize:z6}),fRe=et({node:{type:Oe(Object),required:!0}}),V6="node-click",G6="node-expand",j6="node-collapse",H6="current-change",W6="check",$6="check-change",X6="node-contextmenu",mRe={[V6]:(r,e,t)=>r&&e&&t,[G6]:(r,e)=>r&&e,[j6]:(r,e)=>r&&e,[H6]:(r,e)=>r&&e,[W6]:(r,e)=>r&&e,[$6]:(r,e)=>r&&typeof e=="boolean",[X6]:(r,e,t)=>r&&e&&t},gRe={click:(r,e)=>!!(r&&e),toggle:r=>!!r,check:(r,e)=>r&&typeof e=="boolean"};function vRe(r,e){const t=W(new Set),i=W(new Set),{emit:n}=Dt();Ve([()=>e.value,()=>r.defaultCheckedKeys],()=>ht(()=>{x(r.defaultCheckedKeys)}),{immediate:!0});const s=()=>{if(!e.value||!r.showCheckbox||r.checkStrictly)return;const{levelTreeNodeMap:b,maxLevel:w}=e.value,_=t.value,S=new Set;for(let T=w-1;T>=1;--T){const M=b.get(T);M&&M.forEach(E=>{const C=E.children;if(C){let P=!0,A=!1;for(const N of C){const R=N.key;if(_.has(R))A=!0;else if(S.has(R)){P=!1,A=!0;break}else P=!1}P?_.add(E.key):A?(S.add(E.key),_.delete(E.key)):(_.delete(E.key),S.delete(E.key))}})}i.value=S},o=b=>t.value.has(b.key),a=b=>i.value.has(b.key),l=(b,w,_=!0)=>{const S=t.value,T=(M,E)=>{S[E?pA.ADD:pA.DELETE](M.key);const C=M.children;!r.checkStrictly&&C&&C.forEach(P=>{P.disabled||T(P,E)})};T(b,w),s(),_&&c(b,w)},c=(b,w)=>{const{checkedNodes:_,checkedKeys:S}=f(),{halfCheckedNodes:T,halfCheckedKeys:M}=m();n(W6,b.data,{checkedKeys:S,checkedNodes:_,halfCheckedKeys:M,halfCheckedNodes:T}),n($6,b.data,w)};function u(b=!1){return f(b).checkedKeys}function d(b=!1){return f(b).checkedNodes}function h(){return m().halfCheckedKeys}function p(){return m().halfCheckedNodes}function f(b=!1){const w=[],_=[];if(e!=null&&e.value&&r.showCheckbox){const{treeNodeMap:S}=e.value;t.value.forEach(T=>{const M=S.get(T);M&&(!b||b&&M.isLeaf)&&(_.push(T),w.push(M.data))})}return{checkedKeys:_,checkedNodes:w}}function m(){const b=[],w=[];if(e!=null&&e.value&&r.showCheckbox){const{treeNodeMap:_}=e.value;i.value.forEach(S=>{const T=_.get(S);T&&(w.push(S),b.push(T.data))})}return{halfCheckedNodes:b,halfCheckedKeys:w}}function g(b){t.value.clear(),i.value.clear(),x(b)}function v(b,w){if(e!=null&&e.value&&r.showCheckbox){const _=e.value.treeNodeMap.get(b);_&&l(_,w,!1)}}function x(b){if(e!=null&&e.value){const{treeNodeMap:w}=e.value;if(r.showCheckbox&&w&&b)for(const _ of b){const S=w.get(_);S&&!o(S)&&l(S,!0,!1)}}}return{updateCheckedKeys:s,toggleCheckbox:l,isChecked:o,isIndeterminate:a,getCheckedKeys:u,getCheckedNodes:d,getHalfCheckedKeys:h,getHalfCheckedNodes:p,setChecked:v,setCheckedKeys:g}}function yRe(r,e){const t=W(new Set([])),i=W(new Set([])),n=I(()=>Nt(r.filterMethod));function s(a){var l;if(!n.value)return;const c=new Set,u=i.value,d=t.value,h=[],p=((l=e.value)==null?void 0:l.treeNodes)||[],f=r.filterMethod;d.clear();function m(g){g.forEach(v=>{h.push(v),f!=null&&f(a,v.data)?h.forEach(b=>{c.add(b.key)}):v.isLeaf&&d.add(v.key);const x=v.children;if(x&&m(x),!v.isLeaf){if(!c.has(v.key))d.add(v.key);else if(x){let b=!0;for(const w of x)if(!d.has(w.key)){b=!1;break}b?u.add(v.key):u.delete(v.key)}}h.pop()})}return m(p),c}function o(a){return i.value.has(a.key)}return{hiddenExpandIconKeySet:i,hiddenNodeKeySet:t,doFilter:s,isForceHiddenExpandIcon:o}}function bRe(r,e){const t=W(new Set(r.defaultExpandedKeys)),i=W(),n=Vr();Ve(()=>r.currentNodeKey,q=>{i.value=q},{immediate:!0}),Ve(()=>r.data,q=>{de(q)},{immediate:!0});const{isIndeterminate:s,isChecked:o,toggleCheckbox:a,getCheckedKeys:l,getCheckedNodes:c,getHalfCheckedKeys:u,getHalfCheckedNodes:d,setChecked:h,setCheckedKeys:p}=vRe(r,n),{doFilter:f,hiddenNodeKeySet:m,isForceHiddenExpandIcon:g}=yRe(r,n),v=I(()=>{var q;return((q=r.props)==null?void 0:q.value)||y0.KEY}),x=I(()=>{var q;return((q=r.props)==null?void 0:q.children)||y0.CHILDREN}),b=I(()=>{var q;return((q=r.props)==null?void 0:q.disabled)||y0.DISABLED}),w=I(()=>{var q;return((q=r.props)==null?void 0:q.label)||y0.LABEL}),_=I(()=>{const q=t.value,ce=m.value,Te=[],Z=n.value&&n.value.treeNodes||[];function L(){const $=[];for(let re=Z.length-1;re>=0;--re)$.push(Z[re]);for(;$.length;){const re=$.pop();if(re&&(ce.has(re.key)||Te.push(re),q.has(re.key))){const te=re.children;if(te){const le=te.length;for(let ge=le-1;ge>=0;--ge)$.push(te[ge])}}}}return L(),Te}),S=I(()=>_.value.length>0);function T(q){const ce=new Map,Te=new Map;let Z=1;function L(re,te=1,le=void 0){var ge;const be=[];for(const _e of re){const pe=C(_e),Se={level:te,key:pe,data:_e};Se.label=A(_e),Se.parent=le;const Fe=E(_e);Se.disabled=P(_e),Se.isLeaf=!Fe||Fe.length===0,Fe&&Fe.length&&(Se.children=L(Fe,te+1,Se)),be.push(Se),ce.set(pe,Se),Te.has(te)||Te.set(te,[]),(ge=Te.get(te))==null||ge.push(Se)}return te>Z&&(Z=te),be}const $=L(q);return{treeNodeMap:ce,levelTreeNodeMap:Te,maxLevel:Z,treeNodes:$}}function M(q){const ce=f(q);ce&&(t.value=ce)}function E(q){return q[x.value]}function C(q){return q?q[v.value]:""}function P(q){return q[b.value]}function A(q){return q[w.value]}function N(q){t.value.has(q.key)?O(q):z(q)}function R(q){t.value=new Set(q)}function F(q,ce){e(V6,q.data,q,ce),B(q),r.expandOnClickNode&&N(q),r.showCheckbox&&r.checkOnClickNode&&!q.disabled&&a(q,!o(q),!0)}function B(q){G(q)||(i.value=q.key,e(H6,q.data,q))}function k(q,ce){a(q,ce)}function z(q){const ce=t.value;if(n.value&&r.accordion){const{treeNodeMap:Te}=n.value;ce.forEach(Z=>{const L=Te.get(Z);q&&q.level===(L==null?void 0:L.level)&&ce.delete(Z)})}ce.add(q.key),e(G6,q.data,q)}function O(q){t.value.delete(q.key),e(j6,q.data,q)}function V(q){return t.value.has(q.key)}function U(q){return!!q.disabled}function G(q){const ce=i.value;return ce!==void 0&&ce===q.key}function X(){var q,ce;if(i.value)return(ce=(q=n.value)==null?void 0:q.treeNodeMap.get(i.value))==null?void 0:ce.data}function ie(){return i.value}function se(q){i.value=q}function de(q){ht(()=>n.value=T(q))}function K(q){var ce;const Te=Ht(q)?C(q):q;return(ce=n.value)==null?void 0:ce.treeNodeMap.get(Te)}return{tree:n,flattenTree:_,isNotEmpty:S,getKey:C,getChildren:E,toggleExpand:N,toggleCheckbox:a,isExpanded:V,isChecked:o,isIndeterminate:s,isDisabled:U,isCurrent:G,isForceHiddenExpandIcon:g,handleNodeClick:F,handleNodeCheck:k,getCurrentNode:X,getCurrentKey:ie,setCurrentKey:se,getCheckedKeys:l,getCheckedNodes:c,getHalfCheckedKeys:u,getHalfCheckedNodes:d,setChecked:h,setCheckedKeys:p,filter:M,setData:de,getNode:K,expandNode:z,collapseNode:O,setExpandedKeys:R}}var xRe=xe({name:"ElTreeNodeContent",props:fRe,setup(r){const e=ut(hA),t=Ge("tree");return()=>{const i=r.node,{data:n}=i;return e!=null&&e.ctx.slots.default?e.ctx.slots.default({node:i,data:n}):yt("span",{class:t.be("node","label")},[i==null?void 0:i.label])}}});const wRe=["aria-expanded","aria-disabled","aria-checked","data-key","onClick"],_Re=xe({name:"ElTreeNode"}),SRe=xe({..._Re,props:pRe,emits:gRe,setup(r,{emit:e}){const t=r,i=ut(hA),n=Ge("tree"),s=I(()=>{var d;return(d=i==null?void 0:i.props.indent)!=null?d:16}),o=I(()=>{var d;return(d=i==null?void 0:i.props.icon)!=null?d:hU}),a=d=>{e("click",t.node,d)},l=()=>{e("toggle",t.node)},c=d=>{e("check",t.node,d)},u=d=>{var h,p,f,m;(f=(p=(h=i==null?void 0:i.instance)==null?void 0:h.vnode)==null?void 0:p.props)!=null&&f.onNodeContextmenu&&(d.stopPropagation(),d.preventDefault()),i==null||i.ctx.emit(X6,d,(m=t.node)==null?void 0:m.data,t.node)};return(d,h)=>{var p,f,m;return D(),ee("div",{ref:"node$",class:j([y(n).b("node"),y(n).is("expanded",d.expanded),y(n).is("current",d.current),y(n).is("focusable",!d.disabled),y(n).is("checked",!d.disabled&&d.checked)]),role:"treeitem",tabindex:"-1","aria-expanded":d.expanded,"aria-disabled":d.disabled,"aria-checked":d.checked,"data-key":(p=d.node)==null?void 0:p.key,onClick:Mt(a,["stop"]),onContextmenu:u},[J("div",{class:j(y(n).be("node","content")),style:pt({paddingLeft:`${(d.node.level-1)*y(s)}px`,height:d.itemSize+"px"})},[y(o)?(D(),Ae(y(dt),{key:0,class:j([y(n).is("leaf",!!((f=d.node)!=null&&f.isLeaf)),y(n).is("hidden",d.hiddenExpandIcon),{expanded:!((m=d.node)!=null&&m.isLeaf)&&d.expanded},y(n).be("node","expand-icon")]),onClick:Mt(l,["stop"])},{default:me(()=>[(D(),Ae(Xt(y(o))))]),_:1},8,["class","onClick"])):Re("v-if",!0),d.showCheckbox?(D(),Ae(y(oa),{key:1,"model-value":d.checked,indeterminate:d.indeterminate,disabled:d.disabled,onChange:c,onClick:h[0]||(h[0]=Mt(()=>{},["stop"]))},null,8,["model-value","indeterminate","disabled"])):Re("v-if",!0),ue(y(xRe),{node:d.node},null,8,["node"])],6)],42,wRe)}}});var TRe=Qe(SRe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree-node.vue"]]);const MRe=xe({name:"ElTreeV2"}),ERe=xe({...MRe,props:hRe,emits:mRe,setup(r,{expose:e,emit:t}){const i=r,n=Gn(),s=I(()=>i.itemSize);Yt(hA,{ctx:{emit:t,slots:n},props:i,instance:Dt()}),Yt(Sl,void 0);const{t:o}=pr(),a=Ge("tree"),{flattenTree:l,isNotEmpty:c,toggleExpand:u,isExpanded:d,isIndeterminate:h,isChecked:p,isDisabled:f,isCurrent:m,isForceHiddenExpandIcon:g,handleNodeClick:v,handleNodeCheck:x,toggleCheckbox:b,getCurrentNode:w,getCurrentKey:_,setCurrentKey:S,getCheckedKeys:T,getCheckedNodes:M,getHalfCheckedKeys:E,getHalfCheckedNodes:C,setChecked:P,setCheckedKeys:A,filter:N,setData:R,getNode:F,expandNode:B,collapseNode:k,setExpandedKeys:z}=bRe(i,t);return e({toggleCheckbox:b,getCurrentNode:w,getCurrentKey:_,setCurrentKey:S,getCheckedKeys:T,getCheckedNodes:M,getHalfCheckedKeys:E,getHalfCheckedNodes:C,setChecked:P,setCheckedKeys:A,filter:N,setData:R,getNode:F,expandNode:B,collapseNode:k,setExpandedKeys:z}),(O,V)=>{var U;return D(),ee("div",{class:j([y(a).b(),{[y(a).m("highlight-current")]:O.highlightCurrent}]),role:"tree"},[y(c)?(D(),Ae(y(N5),{key:0,"class-name":y(a).b("virtual-list"),data:y(l),total:y(l).length,height:O.height,"item-size":y(s),"perf-mode":O.perfMode},{default:me(({data:G,index:X,style:ie})=>[(D(),Ae(TRe,{key:G[X].key,style:pt(ie),node:G[X],expanded:y(d)(G[X]),"show-checkbox":O.showCheckbox,checked:y(p)(G[X]),indeterminate:y(h)(G[X]),"item-size":y(s),disabled:y(f)(G[X]),current:y(m)(G[X]),"hidden-expand-icon":y(g)(G[X]),onClick:y(v),onToggle:y(u),onCheck:y(x)},null,8,["style","node","expanded","show-checkbox","checked","indeterminate","item-size","disabled","current","hidden-expand-icon","onClick","onToggle","onCheck"]))]),_:1},8,["class-name","data","total","height","item-size","perf-mode"])):(D(),ee("div",{key:1,class:j(y(a).e("empty-block"))},[J("span",{class:j(y(a).e("empty-text"))},$e((U=O.emptyText)!=null?U:y(o)("el.tree.emptyText")),3)],2))],2)}}});var CRe=Qe(ERe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tree-v2/src/tree.vue"]]);const ARe=zt(CRe),q6=Symbol("uploadContextKey"),NRe="ElUpload";class RRe extends Error{constructor(e,t,i,n){super(e),this.name="UploadAjaxError",this.status=t,this.method=i,this.url=n}}function K6(r,e,t){let i;return t.response?i=`${t.response.error||t.response}`:t.responseText?i=`${t.responseText}`:i=`fail to ${e.method} ${r} ${t.status}`,new RRe(i,t.status,e.method,r)}function kRe(r){const e=r.responseText||r.response;if(!e)return e;try{return JSON.parse(e)}catch{return e}}const LRe=r=>{typeof XMLHttpRequest>"u"&&ji(NRe,"XMLHttpRequest is undefined");const e=new XMLHttpRequest,t=r.action;e.upload&&e.upload.addEventListener("progress",s=>{const o=s;o.percent=s.total>0?s.loaded/s.total*100:0,r.onProgress(o)});const i=new FormData;if(r.data)for(const[s,o]of Object.entries(r.data))lt(o)&&o.length?i.append(s,...o):i.append(s,o);i.append(r.filename,r.file,r.file.name),e.addEventListener("error",()=>{r.onError(K6(t,r,e))}),e.addEventListener("load",()=>{if(e.status<200||e.status>=300)return r.onError(K6(t,r,e));r.onSuccess(kRe(e))}),e.open(r.method,t,!0),r.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);const n=r.headers||{};if(n instanceof Headers)n.forEach((s,o)=>e.setRequestHeader(o,s));else for(const[s,o]of Object.entries(n))Vi(o)||e.setRequestHeader(s,String(o));return e.send(i),e},Y6=["text","picture","picture-card"];let ORe=1;const fA=()=>Date.now()+ORe++,Z6=et({action:{type:String,default:"#"},headers:{type:Oe(Object)},method:{type:String,default:"post"},data:{type:Object,default:()=>ri({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},type:{type:String,default:"select"},fileList:{type:Oe(Array),default:()=>ri([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Y6,default:"text"},httpRequest:{type:Oe(Function),default:LRe},disabled:Boolean,limit:Number}),PRe=et({...Z6,beforeUpload:{type:Oe(Function),default:Lr},beforeRemove:{type:Oe(Function)},onRemove:{type:Oe(Function),default:Lr},onChange:{type:Oe(Function),default:Lr},onPreview:{type:Oe(Function),default:Lr},onSuccess:{type:Oe(Function),default:Lr},onProgress:{type:Oe(Function),default:Lr},onError:{type:Oe(Function),default:Lr},onExceed:{type:Oe(Function),default:Lr}}),IRe=et({files:{type:Oe(Array),default:()=>ri([])},disabled:{type:Boolean,default:!1},handlePreview:{type:Oe(Function),default:Lr},listType:{type:String,values:Y6,default:"text"}}),DRe={remove:r=>!!r},URe=["onKeydown"],FRe=["src"],BRe=["onClick"],zRe=["title"],VRe=["onClick"],GRe=["onClick"],jRe=xe({name:"ElUploadList"}),HRe=xe({...jRe,props:IRe,emits:DRe,setup(r,{emit:e}){const{t}=pr(),i=Ge("upload"),n=Ge("icon"),s=Ge("list"),o=Ys(),a=W(!1),l=c=>{e("remove",c)};return(c,u)=>(D(),Ae(HI,{tag:"ul",class:j([y(i).b("list"),y(i).bm("list",c.listType),y(i).is("disabled",y(o))]),name:y(s).b()},{default:me(()=>[(D(!0),ee(ct,null,Ut(c.files,d=>(D(),ee("li",{key:d.uid||d.name,class:j([y(i).be("list","item"),y(i).is(d.status),{focusing:a.value}]),tabindex:"0",onKeydown:dr(h=>!y(o)&&l(d),["delete"]),onFocus:u[0]||(u[0]=h=>a.value=!0),onBlur:u[1]||(u[1]=h=>a.value=!1),onClick:u[2]||(u[2]=h=>a.value=!1)},[ze(c.$slots,"default",{file:d},()=>[c.listType==="picture"||d.status!=="uploading"&&c.listType==="picture-card"?(D(),ee("img",{key:0,class:j(y(i).be("list","item-thumbnail")),src:d.url,alt:""},null,10,FRe)):Re("v-if",!0),d.status==="uploading"||c.listType!=="picture-card"?(D(),ee("div",{key:1,class:j(y(i).be("list","item-info"))},[J("a",{class:j(y(i).be("list","item-name")),onClick:Mt(h=>c.handlePreview(d),["prevent"])},[ue(y(dt),{class:j(y(n).m("document"))},{default:me(()=>[ue(y(tle))]),_:1},8,["class"]),J("span",{class:j(y(i).be("list","item-file-name")),title:d.name},$e(d.name),11,zRe)],10,BRe),d.status==="uploading"?(D(),Ae(y(v5),{key:0,type:c.listType==="picture-card"?"circle":"line","stroke-width":c.listType==="picture-card"?6:2,percentage:Number(d.percentage),style:pt(c.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):Re("v-if",!0)],2)):Re("v-if",!0),J("label",{class:j(y(i).be("list","item-status-label"))},[c.listType==="text"?(D(),Ae(y(dt),{key:0,class:j([y(n).m("upload-success"),y(n).m("circle-check")])},{default:me(()=>[ue(y(qM))]),_:1},8,["class"])):["picture-card","picture"].includes(c.listType)?(D(),Ae(y(dt),{key:1,class:j([y(n).m("upload-success"),y(n).m("check")])},{default:me(()=>[ue(y(Dv))]),_:1},8,["class"])):Re("v-if",!0)],2),y(o)?Re("v-if",!0):(D(),Ae(y(dt),{key:2,class:j(y(n).m("close")),onClick:h=>l(d)},{default:me(()=>[ue(y(Pa))]),_:2},1032,["class","onClick"])),Re(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),Re(" This is a bug which needs to be fixed "),Re(" TODO: Fix the incorrect navigation interaction "),y(o)?Re("v-if",!0):(D(),ee("i",{key:3,class:j(y(n).m("close-tip"))},$e(y(t)("el.upload.deleteTip")),3)),c.listType==="picture-card"?(D(),ee("span",{key:4,class:j(y(i).be("list","item-actions"))},[J("span",{class:j(y(i).be("list","item-preview")),onClick:h=>c.handlePreview(d)},[ue(y(dt),{class:j(y(n).m("zoom-in"))},{default:me(()=>[ue(y(bU))]),_:1},8,["class"])],10,VRe),y(o)?Re("v-if",!0):(D(),ee("span",{key:0,class:j(y(i).be("list","item-delete")),onClick:h=>l(d)},[ue(y(dt),{class:j(y(n).m("delete"))},{default:me(()=>[ue(y(Kae))]),_:1},8,["class"])],10,GRe))],2)):Re("v-if",!0)])],42,URe))),128)),ze(c.$slots,"append")]),_:3},8,["class","name"]))}});var J6=Qe(HRe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-list.vue"]]);const WRe=et({disabled:{type:Boolean,default:!1}}),$Re={file:r=>lt(r)},XRe=["onDrop","onDragover"],Q6="ElUploadDrag",qRe=xe({name:Q6}),KRe=xe({...qRe,props:WRe,emits:$Re,setup(r,{emit:e}){const t=ut(q6);t||ji(Q6,"usage: <el-upload><el-upload-dragger /></el-upload>");const i=Ge("upload"),n=W(!1),s=Ys(),o=l=>{if(s.value)return;n.value=!1,l.stopPropagation();const c=Array.from(l.dataTransfer.files),u=t.accept.value;if(!u){e("file",c);return}const d=c.filter(h=>{const{type:p,name:f}=h,m=f.includes(".")?`.${f.split(".").pop()}`:"",g=p.replace(/\/.*$/,"");return u.split(",").map(v=>v.trim()).filter(v=>v).some(v=>v.startsWith(".")?m===v:/\/\*$/.test(v)?g===v.replace(/\/\*$/,""):/^[^/]+\/[^/]+$/.test(v)?p===v:!1)});e("file",d)},a=()=>{s.value||(n.value=!0)};return(l,c)=>(D(),ee("div",{class:j([y(i).b("dragger"),y(i).is("dragover",n.value)]),onDrop:Mt(o,["prevent"]),onDragover:Mt(a,["prevent"]),onDragleave:c[0]||(c[0]=Mt(u=>n.value=!1,["prevent"]))},[ze(l.$slots,"default")],42,XRe))}});var YRe=Qe(KRe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-dragger.vue"]]);const ZRe=et({...Z6,beforeUpload:{type:Oe(Function),default:Lr},onRemove:{type:Oe(Function),default:Lr},onStart:{type:Oe(Function),default:Lr},onSuccess:{type:Oe(Function),default:Lr},onProgress:{type:Oe(Function),default:Lr},onError:{type:Oe(Function),default:Lr},onExceed:{type:Oe(Function),default:Lr}}),JRe=["onKeydown"],QRe=["name","multiple","accept"],e3e=xe({name:"ElUploadContent",inheritAttrs:!1}),t3e=xe({...e3e,props:ZRe,setup(r,{expose:e}){const t=r,i=Ge("upload"),n=Ys(),s=Vr({}),o=Vr(),a=p=>{if(p.length===0)return;const{autoUpload:f,limit:m,fileList:g,multiple:v,onStart:x,onExceed:b}=t;if(m&&g.length+p.length>m){b(p,g);return}v||(p=p.slice(0,1));for(const w of p){const _=w;_.uid=fA(),x(_),f&&l(_)}},l=async p=>{if(o.value.value="",!t.beforeUpload)return c(p);let f,m={};try{const v=t.data,x=t.beforeUpload(p);m=Ht(t.data)?ix(t.data):t.data,f=await x,Ht(t.data)&&$s(v,m)&&(m=ix(t.data))}catch{f=!1}if(f===!1){t.onRemove(p);return}let g=p;f instanceof Blob&&(f instanceof File?g=f:g=new File([f],p.name,{type:p.type})),c(Object.assign(g,{uid:p.uid}),m)},c=(p,f)=>{const{headers:m,data:g,method:v,withCredentials:x,name:b,action:w,onProgress:_,onSuccess:S,onError:T,httpRequest:M}=t,{uid:E}=p,C={headers:m||{},withCredentials:x,file:p,data:f??g,method:v,filename:b,action:w,onProgress:A=>{_(A,p)},onSuccess:A=>{S(A,p),delete s.value[E]},onError:A=>{T(A,p),delete s.value[E]}},P=M(C);s.value[E]=P,P instanceof Promise&&P.then(C.onSuccess,C.onError)},u=p=>{const f=p.target.files;f&&a(Array.from(f))},d=()=>{n.value||(o.value.value="",o.value.click())},h=()=>{d()};return e({abort:p=>{Xse(s.value).filter(p?([f])=>String(p.uid)===f:()=>!0).forEach(([f,m])=>{m instanceof XMLHttpRequest&&m.abort(),delete s.value[f]})},upload:l}),(p,f)=>(D(),ee("div",{class:j([y(i).b(),y(i).m(p.listType),y(i).is("drag",p.drag)]),tabindex:"0",onClick:d,onKeydown:dr(Mt(h,["self"]),["enter","space"])},[p.drag?(D(),Ae(YRe,{key:0,disabled:y(n),onFile:a},{default:me(()=>[ze(p.$slots,"default")]),_:3},8,["disabled"])):ze(p.$slots,"default",{key:1}),J("input",{ref_key:"inputRef",ref:o,class:j(y(i).e("input")),name:p.name,multiple:p.multiple,accept:p.accept,type:"file",onChange:u,onClick:f[0]||(f[0]=Mt(()=>{},["stop"]))},null,42,QRe)],42,JRe))}});var e8=Qe(t3e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload-content.vue"]]);const r3e="ElUpload",i3e=r=>{var e;(e=r.url)!=null&&e.startsWith("blob:")&&URL.revokeObjectURL(r.url)},n3e=(r,e)=>{const t=PQ(r,"fileList",void 0,{passive:!0}),i=h=>t.value.find(p=>p.uid===h.uid);function n(h){var p;(p=e.value)==null||p.abort(h)}function s(h=["ready","uploading","success","fail"]){t.value=t.value.filter(p=>!h.includes(p.status))}const o=(h,p)=>{const f=i(p);f&&(console.error(h),f.status="fail",t.value.splice(t.value.indexOf(f),1),r.onError(h,f,t.value),r.onChange(f,t.value))},a=(h,p)=>{const f=i(p);f&&(r.onProgress(h,f,t.value),f.status="uploading",f.percentage=Math.round(h.percent))},l=(h,p)=>{const f=i(p);f&&(f.status="success",f.response=h,r.onSuccess(h,f,t.value),r.onChange(f,t.value))},c=h=>{Vi(h.uid)&&(h.uid=fA());const p={name:h.name,percentage:0,status:"ready",size:h.size,raw:h,uid:h.uid};if(r.listType==="picture-card"||r.listType==="picture")try{p.url=URL.createObjectURL(h)}catch(f){f.message,r.onError(f,p,t.value)}t.value=[...t.value,p],r.onChange(p,t.value)},u=async h=>{const p=h instanceof File?i(h):h;p||ji(r3e,"file to be removed not found");const f=m=>{n(m);const g=t.value;g.splice(g.indexOf(m),1),r.onRemove(m,g),i3e(m)};r.beforeRemove?await r.beforeRemove(p,t.value)!==!1&&f(p):f(p)};function d(){t.value.filter(({status:h})=>h==="ready").forEach(({raw:h})=>{var p;return h&&((p=e.value)==null?void 0:p.upload(h))})}return Ve(()=>r.listType,h=>{h!=="picture-card"&&h!=="picture"||(t.value=t.value.map(p=>{const{raw:f,url:m}=p;if(!m&&f)try{p.url=URL.createObjectURL(f)}catch(g){r.onError(g,p,t.value)}return p}))}),Ve(t,h=>{for(const p of h)p.uid||(p.uid=fA()),p.status||(p.status="success")},{immediate:!0,deep:!0}),{uploadFiles:t,abort:n,clearFiles:s,handleError:o,handleProgress:a,handleStart:c,handleSuccess:l,handleRemove:u,submit:d}},s3e=xe({name:"ElUpload"}),o3e=xe({...s3e,props:PRe,setup(r,{expose:e}){const t=r,i=Ys(),n=Vr(),{abort:s,submit:o,clearFiles:a,uploadFiles:l,handleStart:c,handleError:u,handleRemove:d,handleSuccess:h,handleProgress:p}=n3e(t,n),f=I(()=>t.listType==="picture-card"),m=I(()=>({...t,fileList:l.value,onStart:c,onProgress:p,onSuccess:h,onError:u,onRemove:d}));return Zr(()=>{l.value.forEach(({url:g})=>{g!=null&&g.startsWith("blob:")&&URL.revokeObjectURL(g)})}),Yt(q6,{accept:ai(t,"accept")}),e({abort:s,submit:o,clearFiles:a,handleStart:c,handleRemove:d}),(g,v)=>(D(),ee("div",null,[y(f)&&g.showFileList?(D(),Ae(J6,{key:0,disabled:y(i),"list-type":g.listType,files:y(l),"handle-preview":g.onPreview,onRemove:y(d)},Zl({append:me(()=>[ue(e8,qt({ref_key:"uploadRef",ref:n},y(m)),{default:me(()=>[g.$slots.trigger?ze(g.$slots,"trigger",{key:0}):Re("v-if",!0),!g.$slots.trigger&&g.$slots.default?ze(g.$slots,"default",{key:1}):Re("v-if",!0)]),_:3},16)]),_:2},[g.$slots.file?{name:"default",fn:me(({file:x})=>[ze(g.$slots,"file",{file:x})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):Re("v-if",!0),!y(f)||y(f)&&!g.showFileList?(D(),Ae(e8,qt({key:1,ref_key:"uploadRef",ref:n},y(m)),{default:me(()=>[g.$slots.trigger?ze(g.$slots,"trigger",{key:0}):Re("v-if",!0),!g.$slots.trigger&&g.$slots.default?ze(g.$slots,"default",{key:1}):Re("v-if",!0)]),_:3},16)):Re("v-if",!0),g.$slots.trigger?ze(g.$slots,"default",{key:2}):Re("v-if",!0),ze(g.$slots,"tip"),!y(f)&&g.showFileList?(D(),Ae(J6,{key:3,disabled:y(i),"list-type":g.listType,files:y(l),"handle-preview":g.onPreview,onRemove:y(d)},Zl({_:2},[g.$slots.file?{name:"default",fn:me(({file:x})=>[ze(g.$slots,"file",{file:x})])}:void 0]),1032,["disabled","list-type","files","handle-preview","onRemove"])):Re("v-if",!0)]))}});var a3e=Qe(o3e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/upload/src/upload.vue"]]);const l3e=zt(a3e);var c3e=[xpe,kpe,ige,SAe,uge,vge,oB,Rge,kge,Wn,vB,Yve,t0e,m0e,g0e,Rye,gye,Dye,oa,D0e,sz,qye,pbe,fbe,nbe,jbe,hpe,t1e,r1e,i1e,n1e,s1e,yxe,Axe,Nxe,Wxe,Xz,swe,Ywe,Zwe,Jwe,n5,Tfe,Mfe,dt,H_e,s5,us,o5,nSe,SSe,TSe,MSe,ESe,OSe,U2e,j2e,J2e,iB,v5,hz,J0e,Z0e,mTe,xTe,jye,ac,eh,rw,u2e,uMe,yMe,bMe,KMe,eEe,X5,dEe,xEe,wEe,LEe,u6,BCe,_Ae,FAe,BAe,Qv,HAe,Ave,YAe,tNe,rNe,Rs,ANe,jNe,iRe,uRe,ARe,l3e];const Ba="ElInfiniteScroll",u3e=50,d3e=200,h3e=0,p3e={delay:{type:Number,default:d3e},distance:{type:Number,default:h3e},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},mA=(r,e)=>Object.entries(p3e).reduce((t,[i,n])=>{var s,o;const{type:a,default:l}=n,c=r.getAttribute(`infinite-scroll-${i}`);let u=(o=(s=e[c])!=null?s:c)!=null?o:l;return u=u==="false"?!1:u,u=a(u),t[i]=Number.isNaN(u)?l:u,t},{}),t8=r=>{const{observer:e}=r[Ba];e&&(e.disconnect(),delete r[Ba].observer)},f3e=(r,e)=>{const{container:t,containerEl:i,instance:n,observer:s,lastScrollTop:o}=r[Ba],{disabled:a,distance:l}=mA(r,n),{clientHeight:c,scrollHeight:u,scrollTop:d}=i,h=d-o;if(r[Ba].lastScrollTop=d,s||a||h<0)return;let p=!1;if(t===r)p=u-(c+d)<=l;else{const{clientTop:f,scrollHeight:m}=r,g=FQ(r,i);p=d+c>=g+f+m-l}p&&e.call(n)};function gA(r,e){const{containerEl:t,instance:i}=r[Ba],{disabled:n}=mA(r,i);n||t.clientHeight===0||(t.scrollHeight<=t.clientHeight?e.call(i):t8(r))}const m3e={async mounted(r,e){const{instance:t,value:i}=e;Nt(i)||ji(Ba,"'v-infinite-scroll' binding value must be a function"),await ht();const{delay:n,immediate:s}=mA(r,t),o=XM(r,!0),a=o===window?document.documentElement:o,l=Hd(f3e.bind(null,r,i),n);if(o){if(r[Ba]={instance:t,container:o,containerEl:a,delay:n,cb:i,onScroll:l,lastScrollTop:a.scrollTop},s){const c=new MutationObserver(Hd(gA.bind(null,r,i),u3e));r[Ba].observer=c,c.observe(r,{childList:!0,subtree:!0}),gA(r,i)}o.addEventListener("scroll",l)}},unmounted(r){const{container:e,onScroll:t}=r[Ba];e==null||e.removeEventListener("scroll",t),t8(r)},async updated(r){if(!r[Ba])await ht();else{const{containerEl:e,cb:t,observer:i}=r[Ba];e.clientHeight&&i&&gA(r,t)}}},vA=m3e;vA.install=r=>{r.directive("InfiniteScroll",vA)};const g3e=vA;function v3e(r){let e;const t=W(!1),i=br({...r,originalPosition:"",originalOverflow:"",visible:!1});function n(h){i.text=h}function s(){const h=i.parent,p=d.ns;if(!h.vLoadingAddClassList){let f=h.getAttribute("loading-number");f=Number.parseInt(f)-1,f?h.setAttribute("loading-number",f.toString()):(Xs(h,p.bm("parent","relative")),h.removeAttribute("loading-number")),Xs(h,p.bm("parent","hidden"))}o(),u.unmount()}function o(){var h,p;(p=(h=d.$el)==null?void 0:h.parentNode)==null||p.removeChild(d.$el)}function a(){var h;r.beforeClose&&!r.beforeClose()||(t.value=!0,clearTimeout(e),e=window.setTimeout(l,400),i.visible=!1,(h=r.closed)==null||h.call(r))}function l(){if(!t.value)return;const h=i.parent;t.value=!1,h.vLoadingAddClassList=void 0,s()}const c=xe({name:"ElLoading",setup(h,{expose:p}){const{ns:f,zIndex:m}=Ex("loading");return p({ns:f,zIndex:m}),()=>{const g=i.spinner||i.svg,v=yt("svg",{class:"circular",viewBox:i.svgViewBox?i.svgViewBox:"0 0 50 50",...g?{innerHTML:g}:{}},[yt("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),x=i.text?yt("p",{class:f.b("text")},[i.text]):void 0;return yt(Li,{name:f.b("fade"),onAfterLeave:l},{default:me(()=>[It(ue("div",{style:{backgroundColor:i.background||""},class:[f.b("mask"),i.customClass,i.fullscreen?"is-fullscreen":""]},[yt("div",{class:f.b("spinner")},[v,x])]),[[vr,i.visible]])])})}}}),u=JI(c),d=u.mount(document.createElement("div"));return{...fn(i),setText:n,removeElLoadingChild:o,close:a,handleAfterLeave:l,vm:d,get $el(){return d.$el}}}let Tw;const yA=function(r={}){if(!ar)return;const e=y3e(r);if(e.fullscreen&&Tw)return Tw;const t=v3e({...e,closed:()=>{var n;(n=e.closed)==null||n.call(e),e.fullscreen&&(Tw=void 0)}});b3e(e,e.parent,t),r8(e,e.parent,t),e.parent.vLoadingAddClassList=()=>r8(e,e.parent,t);let i=e.parent.getAttribute("loading-number");return i?i=`${Number.parseInt(i)+1}`:i="1",e.parent.setAttribute("loading-number",i),e.parent.appendChild(t.$el),ht(()=>t.visible.value=e.visible),e.fullscreen&&(Tw=t),t},y3e=r=>{var e,t,i,n;let s;return kt(r.target)?s=(e=document.querySelector(r.target))!=null?e:document.body:s=r.target||document.body,{parent:s===document.body||r.body?document.body:s,background:r.background||"",svg:r.svg||"",svgViewBox:r.svgViewBox||"",spinner:r.spinner||!1,text:r.text||"",fullscreen:s===document.body&&((t=r.fullscreen)!=null?t:!0),lock:(i=r.lock)!=null?i:!1,customClass:r.customClass||"",visible:(n=r.visible)!=null?n:!0,target:s}},b3e=async(r,e,t)=>{const{nextZIndex:i}=t.vm.zIndex||t.vm._.exposed.zIndex,n={};if(r.fullscreen)t.originalPosition.value=au(document.body,"position"),t.originalOverflow.value=au(document.body,"overflow"),n.zIndex=i();else if(r.parent===document.body){t.originalPosition.value=au(document.body,"position"),await ht();for(const s of["top","left"]){const o=s==="top"?"scrollTop":"scrollLeft";n[s]=`${r.target.getBoundingClientRect()[s]+document.body[o]+document.documentElement[o]-Number.parseInt(au(document.body,`margin-${s}`),10)}px`}for(const s of["height","width"])n[s]=`${r.target.getBoundingClientRect()[s]}px`}else t.originalPosition.value=au(e,"position");for(const[s,o]of Object.entries(n))t.$el.style[s]=o},r8=(r,e,t)=>{const i=t.vm.ns||t.vm._.exposed.ns;["absolute","fixed","sticky"].includes(t.originalPosition.value)?Xs(e,i.bm("parent","relative")):vl(e,i.bm("parent","relative")),r.fullscreen&&r.lock?vl(e,i.bm("parent","hidden")):Xs(e,i.bm("parent","hidden"))},bA=Symbol("ElLoading"),i8=(r,e)=>{var t,i,n,s;const o=e.instance,a=h=>Ht(e.value)?e.value[h]:void 0,l=h=>{const p=kt(h)&&(o==null?void 0:o[h])||h;return p&&W(p)},c=h=>l(a(h)||r.getAttribute(`element-loading-${Kc(h)}`)),u=(t=a("fullscreen"))!=null?t:e.modifiers.fullscreen,d={text:c("text"),svg:c("svg"),svgViewBox:c("svgViewBox"),spinner:c("spinner"),background:c("background"),customClass:c("customClass"),fullscreen:u,target:(i=a("target"))!=null?i:u?void 0:r,body:(n=a("body"))!=null?n:e.modifiers.body,lock:(s=a("lock"))!=null?s:e.modifiers.lock};r[bA]={options:d,instance:yA(d)}},x3e=(r,e)=>{for(const t of Object.keys(e))zr(e[t])&&(e[t].value=r[t])},n8={mounted(r,e){e.value&&i8(r,e)},updated(r,e){const t=r[bA];e.oldValue!==e.value&&(e.value&&!e.oldValue?i8(r,e):e.value&&e.oldValue?Ht(e.value)&&x3e(e.value,t.options):t==null||t.instance.close())},unmounted(r){var e;(e=r[bA])==null||e.instance.close()}},w3e={install(r){r.directive("loading",n8),r.config.globalProperties.$loading=yA},directive:n8,service:yA},s8=["success","info","warning","error"],Js=ri({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:ar?document.body:void 0}),_3e=et({customClass:{type:String,default:Js.customClass},center:{type:Boolean,default:Js.center},dangerouslyUseHTMLString:{type:Boolean,default:Js.dangerouslyUseHTMLString},duration:{type:Number,default:Js.duration},icon:{type:Gr,default:Js.icon},id:{type:String,default:Js.id},message:{type:Oe([String,Object,Function]),default:Js.message},onClose:{type:Oe(Function),required:!1},showClose:{type:Boolean,default:Js.showClose},type:{type:String,values:s8,default:Js.type},offset:{type:Number,default:Js.offset},zIndex:{type:Number,default:Js.zIndex},grouping:{type:Boolean,default:Js.grouping},repeatNum:{type:Number,default:Js.repeatNum}}),S3e={destroy:()=>!0},za=kT([]),T3e=r=>{const e=za.findIndex(n=>n.id===r),t=za[e];let i;return e>0&&(i=za[e-1]),{current:t,prev:i}},M3e=r=>{const{prev:e}=T3e(r);return e?e.vm.exposed.bottom.value:0},E3e=(r,e)=>za.findIndex(t=>t.id===r)>0?20:e,C3e=["id"],A3e=["innerHTML"],N3e=xe({name:"ElMessage"}),R3e=xe({...N3e,props:_3e,emits:S3e,setup(r,{expose:e}){const t=r,{Close:i}=ZM,{ns:n,zIndex:s}=Ex("message"),{currentZIndex:o,nextZIndex:a}=s,l=W(),c=W(!1),u=W(0);let d;const h=I(()=>t.type?t.type==="error"?"danger":t.type:"info"),p=I(()=>{const T=t.type;return{[n.bm("icon",T)]:T&&hu[T]}}),f=I(()=>t.icon||hu[t.type]||""),m=I(()=>M3e(t.id)),g=I(()=>E3e(t.id,t.offset)+m.value),v=I(()=>u.value+g.value),x=I(()=>({top:`${g.value}px`,zIndex:o.value}));function b(){t.duration!==0&&({stop:d}=Ud(()=>{_()},t.duration))}function w(){d==null||d()}function _(){c.value=!1}function S({code:T}){T===bt.esc&&_()}return Et(()=>{b(),a(),c.value=!0}),Ve(()=>t.repeatNum,()=>{w(),b()}),Qr(document,"keydown",S),cs(l,()=>{u.value=l.value.getBoundingClientRect().height}),e({visible:c,bottom:v,close:_}),(T,M)=>(D(),Ae(Li,{name:y(n).b("fade"),onBeforeLeave:T.onClose,onAfterLeave:M[0]||(M[0]=E=>T.$emit("destroy")),persisted:""},{default:me(()=>[It(J("div",{id:T.id,ref_key:"messageRef",ref:l,class:j([y(n).b(),{[y(n).m(T.type)]:T.type&&!T.icon},y(n).is("center",T.center),y(n).is("closable",T.showClose),T.customClass]),style:pt(y(x)),role:"alert",onMouseenter:w,onMouseleave:b},[T.repeatNum>1?(D(),Ae(y(oB),{key:0,value:T.repeatNum,type:y(h),class:j(y(n).e("badge"))},null,8,["value","type","class"])):Re("v-if",!0),y(f)?(D(),Ae(y(dt),{key:1,class:j([y(n).e("icon"),y(p)])},{default:me(()=>[(D(),Ae(Xt(y(f))))]),_:1},8,["class"])):Re("v-if",!0),ze(T.$slots,"default",{},()=>[T.dangerouslyUseHTMLString?(D(),ee(ct,{key:1},[Re(" Caution here, message could've been compromised, never use user's input as message "),J("p",{class:j(y(n).e("content")),innerHTML:T.message},null,10,A3e)],2112)):(D(),ee("p",{key:0,class:j(y(n).e("content"))},$e(T.message),3))]),T.showClose?(D(),Ae(y(dt),{key:2,class:j(y(n).e("closeBtn")),onClick:Mt(_,["stop"])},{default:me(()=>[ue(y(i))]),_:1},8,["class","onClick"])):Re("v-if",!0)],46,C3e),[[vr,c.value]])]),_:3},8,["name","onBeforeLeave"]))}});var k3e=Qe(R3e,[["__file","/home/runner/work/element-plus/element-plus/packages/components/message/src/message.vue"]]);let L3e=1;const o8=r=>{const e=!r||kt(r)||ei(r)||Nt(r)?{message:r}:r,t={...Js,...e};if(!t.appendTo)t.appendTo=document.body;else if(kt(t.appendTo)){let i=document.querySelector(t.appendTo);Qo(i)||(i=document.body),t.appendTo=i}return t},O3e=r=>{const e=za.indexOf(r);if(e===-1)return;za.splice(e,1);const{handler:t}=r;t.close()},P3e=({appendTo:r,...e},t)=>{const i=`message_${L3e++}`,n=e.onClose,s=document.createElement("div"),o={...e,id:i,onClose:()=>{n==null||n(),O3e(c)},onDestroy:()=>{tf(null,s)}},a=ue(k3e,o,Nt(o.message)||ei(o.message)?{default:Nt(o.message)?o.message:()=>o.message}:null);a.appContext=t||Gf._context,tf(a,s),r.appendChild(s.firstElementChild);const l=a.component,c={id:i,vnode:a,vm:l,handler:{close:()=>{l.exposed.visible.value=!1}},props:a.component.props};return c},Gf=(r={},e)=>{if(!ar)return{close:()=>{}};if(Ct(xE.max)&&za.length>=xE.max)return{close:()=>{}};const t=o8(r);if(t.grouping&&za.length){const n=za.find(({vnode:s})=>{var o;return((o=s.props)==null?void 0:o.message)===t.message});if(n)return n.props.repeatNum+=1,n.props.type=t.type,n.handler}const i=P3e(t,e);return za.push(i),i.handler};s8.forEach(r=>{Gf[r]=(e={},t)=>{const i=o8(e);return Gf({...i,type:r},t)}});function I3e(r){for(const e of za)(!r||r===e.props.type)&&e.handler.close()}Gf.closeAll=I3e,Gf._context=null;const D3e=_U(Gf,"$message"),U3e=xe({name:"ElMessageBox",directives:{TrapFocus:uve},components:{ElButton:Wn,ElFocusTrap:Px,ElInput:us,ElOverlay:pC,ElIcon:dt,...ZM},inheritAttrs:!1,props:{buttonSize:{type:String,validator:px},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,roundButton:{default:!1,type:Boolean},container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(r,{emit:e}){const{locale:t,zIndex:i,ns:n,size:s}=Ex("message-box",I(()=>r.buttonSize)),{t:o}=t,{nextZIndex:a}=i,l=W(!1),c=br({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:null,inputValidator:null,inputErrorMessage:"",message:null,modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:a()}),u=I(()=>{const F=c.type;return{[n.bm("icon",F)]:F&&hu[F]}}),d=na(),h=na(),p=I(()=>c.icon||hu[c.type]||""),f=I(()=>!!c.message),m=W(),g=W(),v=W(),x=W(),b=W(),w=I(()=>c.confirmButtonClass);Ve(()=>c.inputValue,async F=>{await ht(),r.boxType==="prompt"&&F!==null&&P()},{immediate:!0}),Ve(()=>l.value,F=>{var B,k;F&&(r.boxType!=="prompt"&&(c.autofocus?v.value=(k=(B=b.value)==null?void 0:B.$el)!=null?k:m.value:v.value=m.value),c.zIndex=a()),r.boxType==="prompt"&&(F?ht().then(()=>{var z;x.value&&x.value.$el&&(c.autofocus?v.value=(z=A())!=null?z:m.value:v.value=m.value)}):(c.editorErrorMessage="",c.validateError=!1))});const _=I(()=>r.draggable);MU(m,g,_),Et(async()=>{await ht(),r.closeOnHashChange&&window.addEventListener("hashchange",S)}),Zr(()=>{r.closeOnHashChange&&window.removeEventListener("hashchange",S)});function S(){l.value&&(l.value=!1,ht(()=>{c.action&&e("action",c.action)}))}const T=()=>{r.closeOnClickModal&&C(c.distinguishCancelAndClose?"close":"cancel")},M=hE(T),E=F=>{if(c.inputType!=="textarea")return F.preventDefault(),C("confirm")},C=F=>{var B;r.boxType==="prompt"&&F==="confirm"&&!P()||(c.action=F,c.beforeClose?(B=c.beforeClose)==null||B.call(c,F,c,S):S())},P=()=>{if(r.boxType==="prompt"){const F=c.inputPattern;if(F&&!F.test(c.inputValue||""))return c.editorErrorMessage=c.inputErrorMessage||o("el.messagebox.error"),c.validateError=!0,!1;const B=c.inputValidator;if(typeof B=="function"){const k=B(c.inputValue);if(k===!1)return c.editorErrorMessage=c.inputErrorMessage||o("el.messagebox.error"),c.validateError=!0,!1;if(typeof k=="string")return c.editorErrorMessage=k,c.validateError=!0,!1}}return c.editorErrorMessage="",c.validateError=!1,!0},A=()=>{const F=x.value.$refs;return F.input||F.textarea},N=()=>{C("close")},R=()=>{r.closeOnPressEscape&&N()};return r.lockScroll&&AU(l),{...fn(c),ns:n,overlayEvent:M,visible:l,hasMessage:f,typeClass:u,contentId:d,inputId:h,btnSize:s,iconComponent:p,confirmButtonClasses:w,rootRef:m,focusStartRef:v,headerRef:g,inputRef:x,confirmRef:b,doClose:S,handleClose:N,onCloseRequested:R,handleWrapperClick:T,handleInputEnter:E,handleAction:C,t:o}}}),F3e=["aria-label","aria-describedby"],B3e=["aria-label"],z3e=["id"];function V3e(r,e,t,i,n,s){const o=gt("el-icon"),a=gt("close"),l=gt("el-input"),c=gt("el-button"),u=gt("el-focus-trap"),d=gt("el-overlay");return D(),Ae(Li,{name:"fade-in-linear",onAfterLeave:e[11]||(e[11]=h=>r.$emit("vanish")),persisted:""},{default:me(()=>[It(ue(d,{"z-index":r.zIndex,"overlay-class":[r.ns.is("message-box"),r.modalClass],mask:r.modal},{default:me(()=>[J("div",{role:"dialog","aria-label":r.title,"aria-modal":"true","aria-describedby":r.showInput?void 0:r.contentId,class:j(`${r.ns.namespace.value}-overlay-message-box`),onClick:e[8]||(e[8]=(...h)=>r.overlayEvent.onClick&&r.overlayEvent.onClick(...h)),onMousedown:e[9]||(e[9]=(...h)=>r.overlayEvent.onMousedown&&r.overlayEvent.onMousedown(...h)),onMouseup:e[10]||(e[10]=(...h)=>r.overlayEvent.onMouseup&&r.overlayEvent.onMouseup(...h))},[ue(u,{loop:"",trapped:r.visible,"focus-trap-el":r.rootRef,"focus-start-el":r.focusStartRef,onReleaseRequested:r.onCloseRequested},{default:me(()=>[J("div",{ref:"rootRef",class:j([r.ns.b(),r.customClass,r.ns.is("draggable",r.draggable),{[r.ns.m("center")]:r.center}]),style:pt(r.customStyle),tabindex:"-1",onClick:e[7]||(e[7]=Mt(()=>{},["stop"]))},[r.title!==null&&r.title!==void 0?(D(),ee("div",{key:0,ref:"headerRef",class:j(r.ns.e("header"))},[J("div",{class:j(r.ns.e("title"))},[r.iconComponent&&r.center?(D(),Ae(o,{key:0,class:j([r.ns.e("status"),r.typeClass])},{default:me(()=>[(D(),Ae(Xt(r.iconComponent)))]),_:1},8,["class"])):Re("v-if",!0),J("span",null,$e(r.title),1)],2),r.showClose?(D(),ee("button",{key:0,type:"button",class:j(r.ns.e("headerbtn")),"aria-label":r.t("el.messagebox.close"),onClick:e[0]||(e[0]=h=>r.handleAction(r.distinguishCancelAndClose?"close":"cancel")),onKeydown:e[1]||(e[1]=dr(Mt(h=>r.handleAction(r.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[ue(o,{class:j(r.ns.e("close"))},{default:me(()=>[ue(a)]),_:1},8,["class"])],42,B3e)):Re("v-if",!0)],2)):Re("v-if",!0),J("div",{id:r.contentId,class:j(r.ns.e("content"))},[J("div",{class:j(r.ns.e("container"))},[r.iconComponent&&!r.center&&r.hasMessage?(D(),Ae(o,{key:0,class:j([r.ns.e("status"),r.typeClass])},{default:me(()=>[(D(),Ae(Xt(r.iconComponent)))]),_:1},8,["class"])):Re("v-if",!0),r.hasMessage?(D(),ee("div",{key:1,class:j(r.ns.e("message"))},[ze(r.$slots,"default",{},()=>[r.dangerouslyUseHTMLString?(D(),Ae(Xt(r.showInput?"label":"p"),{key:1,for:r.showInput?r.inputId:void 0,innerHTML:r.message},null,8,["for","innerHTML"])):(D(),Ae(Xt(r.showInput?"label":"p"),{key:0,for:r.showInput?r.inputId:void 0},{default:me(()=>[ir($e(r.dangerouslyUseHTMLString?"":r.message),1)]),_:1},8,["for"]))])],2)):Re("v-if",!0)],2),It(J("div",{class:j(r.ns.e("input"))},[ue(l,{id:r.inputId,ref:"inputRef",modelValue:r.inputValue,"onUpdate:modelValue":e[2]||(e[2]=h=>r.inputValue=h),type:r.inputType,placeholder:r.inputPlaceholder,"aria-invalid":r.validateError,class:j({invalid:r.validateError}),onKeydown:dr(r.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),J("div",{class:j(r.ns.e("errormsg")),style:pt({visibility:r.editorErrorMessage?"visible":"hidden"})},$e(r.editorErrorMessage),7)],2),[[vr,r.showInput]])],10,z3e),J("div",{class:j(r.ns.e("btns"))},[r.showCancelButton?(D(),Ae(c,{key:0,loading:r.cancelButtonLoading,class:j([r.cancelButtonClass]),round:r.roundButton,size:r.btnSize,onClick:e[3]||(e[3]=h=>r.handleAction("cancel")),onKeydown:e[4]||(e[4]=dr(Mt(h=>r.handleAction("cancel"),["prevent"]),["enter"]))},{default:me(()=>[ir($e(r.cancelButtonText||r.t("el.messagebox.cancel")),1)]),_:1},8,["loading","class","round","size"])):Re("v-if",!0),It(ue(c,{ref:"confirmRef",type:"primary",loading:r.confirmButtonLoading,class:j([r.confirmButtonClasses]),round:r.roundButton,disabled:r.confirmButtonDisabled,size:r.btnSize,onClick:e[5]||(e[5]=h=>r.handleAction("confirm")),onKeydown:e[6]||(e[6]=dr(Mt(h=>r.handleAction("confirm"),["prevent"]),["enter"]))},{default:me(()=>[ir($e(r.confirmButtonText||r.t("el.messagebox.confirm")),1)]),_:1},8,["loading","class","round","disabled","size"]),[[vr,r.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,F3e)]),_:3},8,["z-index","overlay-class","mask"]),[[vr,r.visible]])]),_:3})}var G3e=Qe(U3e,[["render",V3e],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const b0=new Map,j3e=r=>{let e=document.body;return r.appendTo&&(kt(r.appendTo)&&(e=document.querySelector(r.appendTo)),Qo(r.appendTo)&&(e=r.appendTo),Qo(e)||(e=document.body)),e},H3e=(r,e,t=null)=>{const i=ue(G3e,r,Nt(r.message)||ei(r.message)?{default:Nt(r.message)?r.message:()=>r.message}:null);return i.appContext=t,tf(i,e),j3e(r).appendChild(e.firstElementChild),i.component},W3e=()=>document.createElement("div"),$3e=(r,e)=>{const t=W3e();r.onVanish=()=>{tf(null,t),b0.delete(n)},r.onAction=s=>{const o=b0.get(n);let a;r.showInput?a={value:n.inputValue,action:s}:a=s,r.callback?r.callback(a,i.proxy):s==="cancel"||s==="close"?r.distinguishCancelAndClose&&s!=="cancel"?o.reject("close"):o.reject("cancel"):o.resolve(a)};const i=H3e(r,t,e),n=i.proxy;for(const s in r)er(r,s)&&!er(n.$props,s)&&(n[s]=r[s]);return n.visible=!0,n};function jf(r,e=null){if(!ar)return Promise.reject();let t;return kt(r)||ei(r)?r={message:r}:t=r.callback,new Promise((i,n)=>{const s=$3e(r,e??jf._context);b0.set(s,{options:r,callback:t,resolve:i,reject:n})})}const X3e=["alert","confirm","prompt"],q3e={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};X3e.forEach(r=>{jf[r]=K3e(r)});function K3e(r){return(e,t,i,n)=>{let s="";return Ht(t)?(i=t,s=""):rn(t)?s="":s=t,jf(Object.assign({title:s,message:e,type:"",...q3e[r]},i,{boxType:r}),n)}}jf.close=()=>{b0.forEach((r,e)=>{e.doClose()}),b0.clear()},jf._context=null;const Mu=jf;Mu.install=r=>{Mu._context=r._context,r.config.globalProperties.$msgbox=Mu,r.config.globalProperties.$messageBox=Mu,r.config.globalProperties.$alert=Mu.alert,r.config.globalProperties.$confirm=Mu.confirm,r.config.globalProperties.$prompt=Mu.prompt};const a8=Mu,l8=["success","info","warning","error"],Y3e=et({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:Gr},id:{type:String,default:""},message:{type:Oe([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:Oe(Function),default:()=>{}},onClose:{type:Oe(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...l8,""],default:""},zIndex:Number}),Z3e={destroy:()=>!0},J3e=["id"],Q3e=["textContent"],eke={key:0},tke=["innerHTML"],rke=xe({name:"ElNotification"}),ike=xe({...rke,props:Y3e,emits:Z3e,setup(r,{expose:e}){const t=r,{ns:i,zIndex:n}=Ex("notification"),{nextZIndex:s,currentZIndex:o}=n,{Close:a}=wU,l=W(!1);let c;const u=I(()=>{const b=t.type;return b&&hu[t.type]?i.m(b):""}),d=I(()=>t.type&&hu[t.type]||t.icon),h=I(()=>t.position.endsWith("right")?"right":"left"),p=I(()=>t.position.startsWith("top")?"top":"bottom"),f=I(()=>{var b;return{[p.value]:`${t.offset}px`,zIndex:(b=t.zIndex)!=null?b:o.value}});function m(){t.duration>0&&({stop:c}=Ud(()=>{l.value&&v()},t.duration))}function g(){c==null||c()}function v(){l.value=!1}function x({code:b}){b===bt.delete||b===bt.backspace?g():b===bt.esc?l.value&&v():m()}return Et(()=>{m(),s(),l.value=!0}),Qr(document,"keydown",x),e({visible:l,close:v}),(b,w)=>(D(),Ae(Li,{name:y(i).b("fade"),onBeforeLeave:b.onClose,onAfterLeave:w[1]||(w[1]=_=>b.$emit("destroy")),persisted:""},{default:me(()=>[It(J("div",{id:b.id,class:j([y(i).b(),b.customClass,y(h)]),style:pt(y(f)),role:"alert",onMouseenter:g,onMouseleave:m,onClick:w[0]||(w[0]=(..._)=>b.onClick&&b.onClick(..._))},[y(d)?(D(),Ae(y(dt),{key:0,class:j([y(i).e("icon"),y(u)])},{default:me(()=>[(D(),Ae(Xt(y(d))))]),_:1},8,["class"])):Re("v-if",!0),J("div",{class:j(y(i).e("group"))},[J("h2",{class:j(y(i).e("title")),textContent:$e(b.title)},null,10,Q3e),It(J("div",{class:j(y(i).e("content")),style:pt(b.title?void 0:{margin:0})},[ze(b.$slots,"default",{},()=>[b.dangerouslyUseHTMLString?(D(),ee(ct,{key:1},[Re(" Caution here, message could've been compromised, never use user's input as message "),J("p",{innerHTML:b.message},null,8,tke)],2112)):(D(),ee("p",eke,$e(b.message),1))])],6),[[vr,b.message]]),b.showClose?(D(),Ae(y(dt),{key:0,class:j(y(i).e("closeBtn")),onClick:Mt(v,["stop"])},{default:me(()=>[ue(y(a))]),_:1},8,["class","onClick"])):Re("v-if",!0)],2)],46,J3e),[[vr,l.value]])]),_:3},8,["name","onBeforeLeave"]))}});var nke=Qe(ike,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const Mw={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},xA=16;let ske=1;const Hf=function(r={},e=null){if(!ar)return{close:()=>{}};(typeof r=="string"||ei(r))&&(r={message:r});const t=r.position||"top-right";let i=r.offset||0;Mw[t].forEach(({vm:u})=>{var d;i+=(((d=u.el)==null?void 0:d.offsetHeight)||0)+xA}),i+=xA;const n=`notification_${ske++}`,s=r.onClose,o={...r,offset:i,id:n,onClose:()=>{oke(n,t,s)}};let a=document.body;Qo(r.appendTo)?a=r.appendTo:kt(r.appendTo)&&(a=document.querySelector(r.appendTo)),Qo(a)||(a=document.body);const l=document.createElement("div"),c=ue(nke,o,ei(o.message)?{default:()=>o.message}:null);return c.appContext=e??Hf._context,c.props.onDestroy=()=>{tf(null,l)},tf(c,l),Mw[t].push({vm:c}),a.appendChild(l.firstElementChild),{close:()=>{c.component.exposed.visible.value=!1}}};l8.forEach(r=>{Hf[r]=(e={})=>((typeof e=="string"||ei(e))&&(e={message:e}),Hf({...e,type:r}))});function oke(r,e,t){const i=Mw[e],n=i.findIndex(({vm:c})=>{var u;return((u=c.component)==null?void 0:u.props.id)===r});if(n===-1)return;const{vm:s}=i[n];if(!s)return;t==null||t(s);const o=s.el.offsetHeight,a=e.split("-")[0];i.splice(n,1);const l=i.length;if(!(l<1))for(let c=n;c<l;c++){const{el:u,component:d}=i[c].vm,h=Number.parseInt(u.style[a],10)-o-xA;d.props.offset=h}}function ake(){for(const r of Object.values(Mw))r.forEach(({vm:e})=>{e.component.exposed.visible.value=!1})}Hf.closeAll=ake,Hf._context=null;const wA=_U(Hf,"$notify");var lke=[g3e,w3e,D3e,a8,wA,g5],cke=fpe([...c3e,...lke]),uke="store";function Wf(r,e){Object.keys(r).forEach(function(t){return e(r[t],t)})}function dke(r){return r!==null&&typeof r=="object"}function hke(r){return r&&typeof r.then=="function"}function pke(r,e){return function(){return r(e)}}function c8(r,e,t){return e.indexOf(r)<0&&(t&&t.prepend?e.unshift(r):e.push(r)),function(){var i=e.indexOf(r);i>-1&&e.splice(i,1)}}function u8(r,e){r._actions=Object.create(null),r._mutations=Object.create(null),r._wrappedGetters=Object.create(null),r._modulesNamespaceMap=Object.create(null);var t=r.state;Ew(r,t,[],r._modules.root,!0),_A(r,t,e)}function _A(r,e,t){var i=r._state,n=r._scope;r.getters={},r._makeLocalGettersCache=Object.create(null);var s=r._wrappedGetters,o={},a={},l=cP(!0);l.run(function(){Wf(s,function(c,u){o[u]=pke(c,r),a[u]=I(function(){return o[u]()}),Object.defineProperty(r.getters,u,{get:function(){return a[u].value},enumerable:!0})})}),r._state=br({data:e}),r._scope=l,r.strict&&yke(r),i&&t&&r._withCommit(function(){i.data=null}),n&&n.stop()}function Ew(r,e,t,i,n){var s=!t.length,o=r._modules.getNamespace(t);if(i.namespaced&&(r._modulesNamespaceMap[o],r._modulesNamespaceMap[o]=i),!s&&!n){var a=SA(e,t.slice(0,-1)),l=t[t.length-1];r._withCommit(function(){a[l]=i.state})}var c=i.context=fke(r,o,t);i.forEachMutation(function(u,d){var h=o+d;mke(r,h,u,c)}),i.forEachAction(function(u,d){var h=u.root?d:o+d,p=u.handler||u;gke(r,h,p,c)}),i.forEachGetter(function(u,d){var h=o+d;vke(r,h,u,c)}),i.forEachChild(function(u,d){Ew(r,e,t.concat(d),u,n)})}function fke(r,e,t){var i=e==="",n={dispatch:i?r.dispatch:function(s,o,a){var l=Cw(s,o,a),c=l.payload,u=l.options,d=l.type;return(!u||!u.root)&&(d=e+d),r.dispatch(d,c)},commit:i?r.commit:function(s,o,a){var l=Cw(s,o,a),c=l.payload,u=l.options,d=l.type;(!u||!u.root)&&(d=e+d),r.commit(d,c,u)}};return Object.defineProperties(n,{getters:{get:i?function(){return r.getters}:function(){return d8(r,e)}},state:{get:function(){return SA(r.state,t)}}}),n}function d8(r,e){if(!r._makeLocalGettersCache[e]){var t={},i=e.length;Object.keys(r.getters).forEach(function(n){if(n.slice(0,i)===e){var s=n.slice(i);Object.defineProperty(t,s,{get:function(){return r.getters[n]},enumerable:!0})}}),r._makeLocalGettersCache[e]=t}return r._makeLocalGettersCache[e]}function mke(r,e,t,i){var n=r._mutations[e]||(r._mutations[e]=[]);n.push(function(s){t.call(r,i.state,s)})}function gke(r,e,t,i){var n=r._actions[e]||(r._actions[e]=[]);n.push(function(s){var o=t.call(r,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:r.getters,rootState:r.state},s);return hke(o)||(o=Promise.resolve(o)),r._devtoolHook?o.catch(function(a){throw r._devtoolHook.emit("vuex:error",a),a}):o})}function vke(r,e,t,i){r._wrappedGetters[e]||(r._wrappedGetters[e]=function(n){return t(i.state,i.getters,n.state,n.getters)})}function yke(r){Ve(function(){return r._state.data},function(){},{deep:!0,flush:"sync"})}function SA(r,e){return e.reduce(function(t,i){return t[i]},r)}function Cw(r,e,t){return dke(r)&&r.type&&(t=e,e=r,r=r.type),{type:r,payload:e,options:t}}var bke="vuex bindings",h8="vuex:mutations",TA="vuex:actions",$f="vuex",xke=0;function wke(r,e){QZ({id:"org.vuejs.vuex",app:r,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[bke]},function(t){t.addTimelineLayer({id:h8,label:"Vuex Mutations",color:p8}),t.addTimelineLayer({id:TA,label:"Vuex Actions",color:p8}),t.addInspector({id:$f,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),t.on.getInspectorTree(function(i){if(i.app===r&&i.inspectorId===$f)if(i.filter){var n=[];v8(n,e._modules.root,i.filter,""),i.rootNodes=n}else i.rootNodes=[g8(e._modules.root,"")]}),t.on.getInspectorState(function(i){if(i.app===r&&i.inspectorId===$f){var n=i.nodeId;d8(e,n),i.state=Tke(Eke(e._modules,n),n==="root"?e.getters:e._makeLocalGettersCache,n)}}),t.on.editInspectorState(function(i){if(i.app===r&&i.inspectorId===$f){var n=i.nodeId,s=i.path;n!=="root"&&(s=n.split("/").filter(Boolean).concat(s)),e._withCommit(function(){i.set(e._state.data,s,i.state.value)})}}),e.subscribe(function(i,n){var s={};i.payload&&(s.payload=i.payload),s.state=n,t.notifyComponentUpdate(),t.sendInspectorTree($f),t.sendInspectorState($f),t.addTimelineEvent({layerId:h8,event:{time:Date.now(),title:i.type,data:s}})}),e.subscribeAction({before:function(i,n){var s={};i.payload&&(s.payload=i.payload),i._id=xke++,i._time=Date.now(),s.state=n,t.addTimelineEvent({layerId:TA,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:s}})},after:function(i,n){var s={},o=Date.now()-i._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(s.payload=i.payload),s.state=n,t.addTimelineEvent({layerId:TA,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:s}})}})})}var p8=8702998,_ke=6710886,Ske=16777215,f8={label:"namespaced",textColor:Ske,backgroundColor:_ke};function m8(r){return r&&r!=="root"?r.split("/").slice(-2,-1)[0]:"Root"}function g8(r,e){return{id:e||"root",label:m8(e),tags:r.namespaced?[f8]:[],children:Object.keys(r._children).map(function(t){return g8(r._children[t],e+t+"/")})}}function v8(r,e,t,i){i.includes(t)&&r.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[f8]:[]}),Object.keys(e._children).forEach(function(n){v8(r,e._children[n],t,i+n+"/")})}function Tke(r,e,t){e=t==="root"?e:e[t];var i=Object.keys(e),n={state:Object.keys(r.state).map(function(o){return{key:o,editable:!0,value:r.state[o]}})};if(i.length){var s=Mke(e);n.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?m8(o):o,editable:!1,value:MA(function(){return s[o]})}})}return n}function Mke(r){var e={};return Object.keys(r).forEach(function(t){var i=t.split("/");if(i.length>1){var n=e,s=i.pop();i.forEach(function(o){n[o]||(n[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),n=n[o]._custom.value}),n[s]=MA(function(){return r[t]})}else e[t]=MA(function(){return r[t]})}),e}function Eke(r,e){var t=e.split("/").filter(function(i){return i});return t.reduce(function(i,n,s){var o=i[n];if(!o)throw new Error('Missing module "'+n+'" for path "'+e+'".');return s===t.length-1?o:o._children},e==="root"?r:r.root._children)}function MA(r){try{return r()}catch(e){return e}}var Va=function(r,e){this.runtime=e,this._children=Object.create(null),this._rawModule=r;var t=r.state;this.state=(typeof t=="function"?t():t)||{}},y8={namespaced:{configurable:!0}};y8.namespaced.get=function(){return!!this._rawModule.namespaced},Va.prototype.addChild=function(r,e){this._children[r]=e},Va.prototype.removeChild=function(r){delete this._children[r]},Va.prototype.getChild=function(r){return this._children[r]},Va.prototype.hasChild=function(r){return r in this._children},Va.prototype.update=function(r){this._rawModule.namespaced=r.namespaced,r.actions&&(this._rawModule.actions=r.actions),r.mutations&&(this._rawModule.mutations=r.mutations),r.getters&&(this._rawModule.getters=r.getters)},Va.prototype.forEachChild=function(r){Wf(this._children,r)},Va.prototype.forEachGetter=function(r){this._rawModule.getters&&Wf(this._rawModule.getters,r)},Va.prototype.forEachAction=function(r){this._rawModule.actions&&Wf(this._rawModule.actions,r)},Va.prototype.forEachMutation=function(r){this._rawModule.mutations&&Wf(this._rawModule.mutations,r)},Object.defineProperties(Va.prototype,y8);var ah=function(r){this.register([],r,!1)};ah.prototype.get=function(r){return r.reduce(function(e,t){return e.getChild(t)},this.root)},ah.prototype.getNamespace=function(r){var e=this.root;return r.reduce(function(t,i){return e=e.getChild(i),t+(e.namespaced?i+"/":"")},"")},ah.prototype.update=function(r){b8([],this.root,r)},ah.prototype.register=function(r,e,t){var i=this;t===void 0&&(t=!0);var n=new Va(e,t);if(r.length===0)this.root=n;else{var s=this.get(r.slice(0,-1));s.addChild(r[r.length-1],n)}e.modules&&Wf(e.modules,function(o,a){i.register(r.concat(a),o,t)})},ah.prototype.unregister=function(r){var e=this.get(r.slice(0,-1)),t=r[r.length-1],i=e.getChild(t);i&&i.runtime&&e.removeChild(t)},ah.prototype.isRegistered=function(r){var e=this.get(r.slice(0,-1)),t=r[r.length-1];return e?e.hasChild(t):!1};function b8(r,e,t){if(e.update(t),t.modules)for(var i in t.modules){if(!e.getChild(i))return;b8(r.concat(i),e.getChild(i),t.modules[i])}}function Cke(r){return new Qs(r)}var Qs=function(r){var e=this;r===void 0&&(r={});var t=r.plugins;t===void 0&&(t=[]);var i=r.strict;i===void 0&&(i=!1);var n=r.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ah(r),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=n;var s=this,o=this,a=o.dispatch,l=o.commit;this.dispatch=function(u,d){return a.call(s,u,d)},this.commit=function(u,d,h){return l.call(s,u,d,h)},this.strict=i;var c=this._modules.root.state;Ew(this,c,[],this._modules.root),_A(this,c),t.forEach(function(u){return u(e)})},EA={state:{configurable:!0}};Qs.prototype.install=function(r,e){r.provide(e||uke,this),r.config.globalProperties.$store=this;var t=this._devtools!==void 0?this._devtools:!1;t&&wke(r,this)},EA.state.get=function(){return this._state.data},EA.state.set=function(r){},Qs.prototype.commit=function(r,e,t){var i=this,n=Cw(r,e,t),s=n.type,o=n.payload,a={type:s,payload:o},l=this._mutations[s];l&&(this._withCommit(function(){l.forEach(function(c){c(o)})}),this._subscribers.slice().forEach(function(c){return c(a,i.state)}))},Qs.prototype.dispatch=function(r,e){var t=this,i=Cw(r,e),n=i.type,s=i.payload,o={type:n,payload:s},a=this._actions[n];if(a){try{this._actionSubscribers.slice().filter(function(c){return c.before}).forEach(function(c){return c.before(o,t.state)})}catch{}var l=a.length>1?Promise.all(a.map(function(c){return c(s)})):a[0](s);return new Promise(function(c,u){l.then(function(d){try{t._actionSubscribers.filter(function(h){return h.after}).forEach(function(h){return h.after(o,t.state)})}catch{}c(d)},function(d){try{t._actionSubscribers.filter(function(h){return h.error}).forEach(function(h){return h.error(o,t.state,d)})}catch{}u(d)})})}},Qs.prototype.subscribe=function(r,e){return c8(r,this._subscribers,e)},Qs.prototype.subscribeAction=function(r,e){var t=typeof r=="function"?{before:r}:r;return c8(t,this._actionSubscribers,e)},Qs.prototype.watch=function(r,e,t){var i=this;return Ve(function(){return r(i.state,i.getters)},e,Object.assign({},t))},Qs.prototype.replaceState=function(r){var e=this;this._withCommit(function(){e._state.data=r})},Qs.prototype.registerModule=function(r,e,t){t===void 0&&(t={}),typeof r=="string"&&(r=[r]),this._modules.register(r,e),Ew(this,this.state,r,this._modules.get(r),t.preserveState),_A(this,this.state)},Qs.prototype.unregisterModule=function(r){var e=this;typeof r=="string"&&(r=[r]),this._modules.unregister(r),this._withCommit(function(){var t=SA(e.state,r.slice(0,-1));delete t[r[r.length-1]]}),u8(this)},Qs.prototype.hasModule=function(r){return typeof r=="string"&&(r=[r]),this._modules.isRegistered(r)},Qs.prototype.hotUpdate=function(r){this._modules.update(r),u8(this,!0)},Qs.prototype._withCommit=function(r){var e=this._committing;this._committing=!0,r(),this._committing=e},Object.defineProperties(Qs.prototype,EA);const Ake={setTheme(r){const e=document.getElementById("themeStyle");e.href=e.href.replace(/\/([^/]+)\.css$/,`/${r}.css`)}},Nke={theme:localStorage.getItem("theme")||"dark",isLoading:!0,isNetBusy:!1,isWorldView:!0,isFloating:!1,projects:[],projectName:localStorage.getItem("projectName")||"shared",audioListeners:[],pluginsChanged:!1},Qt=Cke({state:Nke,mutations:{selectProject(r,e){r.projectName=e,r.isWorldView=!0,localStorage.setItem("projectName",e)},createProject(r,e){r.projects.push(e),r.projects=[...r.projects],r.projectName=e,r.isWorldView=!0,localStorage.setItem("projectName",e)},renameProject(r,e){const t=r.projects.indexOf(r.projectName);t!==-1?r.projects.splice(t,1,e):r.projects.push(e),r.projects=[...r.projects],r.projectName=e,localStorage.setItem("projectName",e)}},actions:{selectProject(r,e){r.commit("selectProject",e)},createProject(r,e){r.commit("renameProject",e)},renameProject(r,e){r.commit("renameProject",e)}}});Ve(()=>Qt.state.theme,r=>{localStorage.setItem("theme",r),Ake.setTheme(r)}),Ve(()=>Qt.state.projectName,r=>{localStorage.setItem("projectName",r)}),Qt.state;const x0={request(r){return new Promise((e,t)=>{const i=new XMLHttpRequest;if(i.open(r.method||"GET",r.url,!0),r.headers)for(const[n,s]of Object.entries(r.headers))i.setRequestHeader(n,s);r.withCredentials&&(i.withCredentials=r.withCredentials),i.onerror=n=>{t(n)},i.onreadystatechange=()=>{i.readyState===XMLHttpRequest.DONE&&i.status===200&&e(i.responseText),i.status===404&&t(404)},i.send(r.data)})},requestSync(r){const e=new XMLHttpRequest;if(e.open(r.method||"GET",r.url,!1),r.headers)for(const[i,n]of Object.entries(r.headers))e.setRequestHeader(i,n);r.withCredentials&&(e.withCredentials=r.withCredentials),e.onerror=i=>{throw i};let t=null;if(e.onreadystatechange=()=>{e.readyState===XMLHttpRequest.DONE&&e.status===200&&(t=e.responseText)},e.send(r.data),e.status!==200)throw new Error(e.responseText);return t}};let x8=0;const Eu={async request(r,...e){const t={jsonrpc:"2.0",id:x8++,method:"",params:e},i={"Content-Type":"application/json",...r.headers};let n=await x0.request({...r,data:JSON.stringify(t),method:"POST",headers:i});return typeof n=="string"&&(n=JSON.parse(n)),n.result},requestSync(r,...e){const t={jsonrpc:"2.0",id:x8++,method:"",params:e};({...r.headers});let i=x0.requestSync({...r,data:JSON.stringify(t),method:"POST"});return typeof i=="string"&&(i=JSON.parse(i)),i.result}},Ga={async projects(){const r=await Eu.request({url:"/fs/ls"});return Object.entries(r).filter(e=>e[1].isd).map(([e])=>e)},async createProject(r){await Eu.request({url:`/fs/mkdir/${r}`},["images","sounds","fonts","models","plugins"])},async renameProject(r,e){await Eu.request({url:`/fs/rename/${r}`},e)},async write(r,e){!(e instanceof ArrayBuffer)&&typeof e=="object"&&(e=JSON.stringify(e,null,2)),await x0.request({url:r,data:e,method:"POST"})},async environments(){const r=await Eu.request({url:"/fs/ls/shared/environments"}),e=Object.entries(r).filter(t=>t[1].isd).map(([t])=>t);return Promise.all(e.map(async t=>{let i=await x0.request({url:`/fs/file/shared/environments/${t}/index.json`});return typeof i=="string"&&(i=JSON.parse(i)),{name:t,...i,cover:`/fs/file/shared/environments/${t}/${i.cover}`}}))},async getMediaFiles(r){const e=["shared/images","shared/sounds"];return r!=="shared"&&e.push(`${r}/images`,`${r}/sounds`),(await Promise.all(e.map(async t=>{const i=await Eu.request({url:`/fs/ls/${t}`});return i?Object.entries(i).filter(n=>!n[1].isd).map(([n,s])=>({url:`/fs/file/${t}/${n}`,size:s.size})):[]}))).flat()},async getModelFiles(r){const e=["shared/models"];return r!=="shared"&&e.push(`${r}/models`),(await Promise.all(e.map(async t=>{const i=await Eu.request({url:`/fs/ls/${t}`});return i?Object.entries(i).filter(n=>!n[1].isd&&/\.glb|\.fbx$/.test(n[0])).map(([n,s])=>({url:`/fs/file/${t}/${n}`,size:s.size})):[]}))).flat()},async getFonts(r){const e=["shared/fonts"];return r!=="shared"&&e.push(`${r}/fonts`),(await Promise.all(e.map(async t=>{const i=await Eu.request({url:`/fs/ls/${t}`});return i?Object.entries(i).filter(n=>!n[1].isd&&/\.ttf$/.test(n[0])).map(([n])=>`/fs/file/${t}/${n}`):[]}))).flat()},async getPlugins(r){const e=["shared/plugins"];return r!=="shared"&&e.push(`${r}/plugins`),(await Promise.all(e.map(async t=>{const i=await Eu.request({url:`/fs/ls/${t}`});return i?Object.entries(i).filter(n=>!n[1].isd&&/\.js|\.mjs|\.cjs$/.test(n[0])).map(([n,s])=>({url:`/fs/file/${t}/${n}`,size:s.size})):[]}))).flat()},async uploadFile(r){return console.log(r),{url:"",size:0}}},Xf="157",lh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ch={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CA=0,Aw=1,AA=2,Rke=3,kke=0,NA=1,Nw=2,Al=3,eo=0,Oi=1,Wi=2,w8=2,Xn=0,Eo=1,Nl=2,Cu=3,Au=4,w0=5,to=100,_0=101,S0=102,T0=103,M0=104,E0=200,C0=201,A0=202,N0=203,qf=204,Kf=205,R0=206,k0=207,L0=208,O0=209,P0=210,I0=0,D0=1,U0=2,uh=3,F0=4,B0=5,z0=6,V0=7,Yf=0,RA=1,kA=2,ro=0,G0=1,j0=2,H0=3,dh=4,LA=5,Zf=300,Co=301,la=302,ja=303,Rl=304,Nu=306,ds=1e3,Mi=1001,kl=1002,Mr=1003,Ll=1004,_8=1004,ca=1005,S8=1005,Or=1006,hh=1007,T8=1007,qn=1008,M8=1008,io=1009,Rw=1010,kw=1011,ph=1012,W0=1013,no=1014,mi=1015,gi=1016,$0=1017,X0=1018,Ao=1020,q0=1021,Rn=1023,K0=1024,Y0=1025,hs=1026,so=1027,Jf=1028,Qf=1029,em=1030,Z0=1031,J0=1033,Ru=33776,hc=33777,pc=33778,fc=33779,tm=35840,rm=35841,im=35842,nm=35843,Lw=36196,fh=37492,mh=37496,gh=37808,vh=37809,yh=37810,bh=37811,xh=37812,wh=37813,_h=37814,Sh=37815,Th=37816,Mh=37817,Eh=37818,Ch=37819,Ah=37820,Nh=37821,ku=36492,Ow=36494,Pw=36495,Iw=36283,sm=36284,om=36285,am=36286,OA=2200,PA=2201,E8=2202,lm=2300,Rh=2301,Dw=2302,kh=2400,Lh=2401,Q0=2402,Uw=2500,IA=2501,C8=0,DA=1,Fw=2,ey=3e3,Ol=3001,UA=3200,ty=3201,Ha=0,Bw=1,kn="",Lt="srgb",li="srgb-linear",ry="display-p3",cm="display-p3-linear",iy="linear",ci="srgb",ny="rec709",sy="p3",FA=0,um=7680,BA=7681,zA=7682,VA=7683,GA=34055,jA=34056,HA=5386,WA=512,$A=513,XA=514,qA=515,KA=516,YA=517,ZA=518,zw=519,oy=512,dm=513,ay=514,ly=515,cy=516,uy=517,dy=518,hy=519,hm=35044,py=35048,Lke=35040,Oke=35045,Pke=35049,Ike=35041,Dke=35046,Uke=35050,Fke=35042,A8="100",Vw="300 es",pm=1035,ua=2e3,Oh=2001;let Ln=class{addEventListener(r,e){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[r]===void 0&&(t[r]=[]),t[r].indexOf(e)===-1&&t[r].push(e)}hasEventListener(r,e){if(this._listeners===void 0)return!1;const t=this._listeners;return t[r]!==void 0&&t[r].indexOf(e)!==-1}removeEventListener(r,e){if(this._listeners===void 0)return;const t=this._listeners[r];if(t!==void 0){const i=t.indexOf(e);i!==-1&&t.splice(i,1)}}dispatchEvent(r){if(this._listeners===void 0)return;const e=this._listeners[r.type];if(e!==void 0){r.target=this;const t=e.slice(0);for(let i=0,n=t.length;i<n;i++)t[i].call(this,r);r.target=null}}};const ps=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let N8=1234567;const Ph=Math.PI/180,fm=180/Math.PI;function No(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ps[r&255]+ps[r>>8&255]+ps[r>>16&255]+ps[r>>24&255]+"-"+ps[e&255]+ps[e>>8&255]+"-"+ps[e>>16&15|64]+ps[e>>24&255]+"-"+ps[t&63|128]+ps[t>>8&255]+"-"+ps[t>>16&255]+ps[t>>24&255]+ps[i&255]+ps[i>>8&255]+ps[i>>16&255]+ps[i>>24&255]).toLowerCase()}function Di(r,e,t){return Math.max(e,Math.min(t,r))}function JA(r,e){return(r%e+e)%e}function Bke(r,e,t,i,n){return i+(r-e)*(n-i)/(t-e)}function zke(r,e,t){return r!==e?(t-r)/(e-r):0}function fy(r,e,t){return(1-t)*r+t*e}function Vke(r,e,t,i){return fy(r,e,1-Math.exp(-t*i))}function Gke(r,e=1){return e-Math.abs(JA(r,e*2)-e)}function jke(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*(3-2*r))}function Hke(r,e,t){return r<=e?0:r>=t?1:(r=(r-e)/(t-e),r*r*r*(r*(r*6-15)+10))}function Wke(r,e){return r+Math.floor(Math.random()*(e-r+1))}function $ke(r,e){return r+Math.random()*(e-r)}function Xke(r){return r*(.5-Math.random())}function qke(r){r!==void 0&&(N8=r);let e=N8+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Kke(r){return r*Ph}function Yke(r){return r*fm}function QA(r){return(r&r-1)===0&&r!==0}function R8(r){return Math.pow(2,Math.ceil(Math.log(r)/Math.LN2))}function Gw(r){return Math.pow(2,Math.floor(Math.log(r)/Math.LN2))}function Zke(r,e,t,i,n){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),d=s((e-i)/2),h=o((e-i)/2),p=s((i-e)/2),f=o((i-e)/2);switch(n){case"XYX":r.set(a*u,l*d,l*h,a*c);break;case"YZY":r.set(l*h,a*u,l*d,a*c);break;case"ZXZ":r.set(l*d,l*h,a*u,a*c);break;case"XZX":r.set(a*u,l*f,l*p,a*c);break;case"YXY":r.set(l*p,a*u,l*f,a*c);break;case"ZYZ":r.set(l*f,l*p,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+n)}}function oo(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function xr(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}const $i={DEG2RAD:Ph,RAD2DEG:fm,generateUUID:No,clamp:Di,euclideanModulo:JA,mapLinear:Bke,inverseLerp:zke,lerp:fy,damp:Vke,pingpong:Gke,smoothstep:jke,smootherstep:Hke,randInt:Wke,randFloat:$ke,randFloatSpread:Xke,seededRandom:qke,degToRad:Kke,radToDeg:Yke,isPowerOfTwo:QA,ceilPowerOfTwo:R8,floorPowerOfTwo:Gw,setQuaternionFromProperEuler:Zke,normalize:xr,denormalize:oo};let qe=class Zq{constructor(e=0,t=0){Zq.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Di(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),n=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*n+e.x,this.y=s*n+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},hr=class Jq{constructor(e,t,i,n,s,o,a,l,c){Jq.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,n,s,o,a,l,c)}set(e,t,i,n,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=n,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],p=i[5],f=i[8],m=n[0],g=n[3],v=n[6],x=n[1],b=n[4],w=n[7],_=n[2],S=n[5],T=n[8];return s[0]=o*m+a*x+l*_,s[3]=o*g+a*b+l*S,s[6]=o*v+a*w+l*T,s[1]=c*m+u*x+d*_,s[4]=c*g+u*b+d*S,s[7]=c*v+u*w+d*T,s[2]=h*m+p*x+f*_,s[5]=h*g+p*b+f*S,s[8]=h*v+p*w+f*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+n*s*c-n*o*l}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,p=c*s-o*l,f=t*d+i*h+n*p;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/f;return e[0]=d*m,e[1]=(n*c-u*i)*m,e[2]=(a*i-n*o)*m,e[3]=h*m,e[4]=(u*t-n*l)*m,e[5]=(n*s-a*t)*m,e[6]=p*m,e[7]=(i*l-c*t)*m,e[8]=(o*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-n*c,n*l,-n*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(eN.makeScale(e,t)),this}rotate(e){return this.premultiply(eN.makeRotation(-e)),this}translate(e,t){return this.premultiply(eN.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<9;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}};const eN=new hr;function k8(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const Jke={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function mm(r,e){return new Jke[r](e)}function my(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function tN(){const r=my("canvas");return r.style.display="block",r}const L8={};function gy(r){r in L8||(L8[r]=!0,console.warn(r))}const O8=new hr().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),P8=new hr().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),jw={[li]:{transfer:iy,primaries:ny,toReference:r=>r,fromReference:r=>r},[Lt]:{transfer:ci,primaries:ny,toReference:r=>r.convertSRGBToLinear(),fromReference:r=>r.convertLinearToSRGB()},[cm]:{transfer:iy,primaries:sy,toReference:r=>r.applyMatrix3(P8),fromReference:r=>r.applyMatrix3(O8)},[ry]:{transfer:ci,primaries:sy,toReference:r=>r.convertSRGBToLinear().applyMatrix3(P8),fromReference:r=>r.applyMatrix3(O8).convertLinearToSRGB()}},Qke=new Set([li,cm]),Hr={enabled:!0,_workingColorSpace:li,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(r){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!r},get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(r){if(!Qke.has(r))throw new Error(`Unsupported working color space, "${r}".`);this._workingColorSpace=r},convert:function(r,e,t){if(this.enabled===!1||e===t||!e||!t)return r;const i=jw[e].toReference,n=jw[t].fromReference;return n(i(r))},fromWorkingColorSpace:function(r,e){return this.convert(r,this._workingColorSpace,e)},toWorkingColorSpace:function(r,e){return this.convert(r,e,this._workingColorSpace)},getPrimaries:function(r){return jw[r].primaries},getTransfer:function(r){return r===kn?iy:jw[r].transfer}};function gm(r){return r<.04045?r*.0773993808:Math.pow(r*.9478672986+.0521327014,2.4)}function rN(r){return r<.0031308?r*12.92:1.055*Math.pow(r,.41666)-.055}let vm;class vy{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{vm===void 0&&(vm=my("canvas")),vm.width=e.width,vm.height=e.height;const i=vm.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=vm}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=my("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const n=i.getImageData(0,0,e.width,e.height),s=n.data;for(let o=0;o<s.length;o++)s[o]=gm(s[o]/255)*255;return i.putImageData(n,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(gm(t[i]/255)*255):t[i]=gm(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let eLe=0;class da{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:eLe++}),this.uuid=No(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},n=this.data;if(n!==null){let s;if(Array.isArray(n)){s=[];for(let o=0,a=n.length;o<a;o++)n[o].isDataTexture?s.push(iN(n[o].image)):s.push(iN(n[o]))}else s=iN(n);i.url=s}return t||(e.images[this.uuid]=i),i}}function iN(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&r instanceof ImageBitmap?vy.getDataURL(r):r.data?{data:Array.from(r.data),width:r.width,height:r.height,type:r.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let tLe=0;class Nr extends Ln{constructor(e=Nr.DEFAULT_IMAGE,t=Nr.DEFAULT_MAPPING,i=Mi,n=Mi,s=Or,o=qn,a=Rn,l=io,c=Nr.DEFAULT_ANISOTROPY,u=kn){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:tLe++}),this.uuid=No(),this.name="",this.source=new da(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=n,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new qe(0,0),this.repeat=new qe(1,1),this.center=new qe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new hr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof u=="string"?this.colorSpace=u:(gy("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=u===Ol?Lt:kn),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Zf)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ds:e.x=e.x-Math.floor(e.x);break;case Mi:e.x=e.x<0?0:1;break;case kl:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ds:e.y=e.y-Math.floor(e.y);break;case Mi:e.y=e.y<0?0:1;break;case kl:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return gy("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Lt?Ol:ey}set encoding(e){gy("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Ol?Lt:kn}}Nr.DEFAULT_IMAGE=null,Nr.DEFAULT_MAPPING=Zf,Nr.DEFAULT_ANISOTROPY=1;class jt{constructor(e=0,t=0,i=0,n=1){jt.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=n}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*n+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*n+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*n+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*n+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,n,s;const o=e.elements,a=o[0],l=o[4],c=o[8],u=o[1],d=o[5],h=o[9],p=o[2],f=o[6],m=o[10];if(Math.abs(l-u)<.01&&Math.abs(c-p)<.01&&Math.abs(h-f)<.01){if(Math.abs(l+u)<.1&&Math.abs(c+p)<.1&&Math.abs(h+f)<.1&&Math.abs(a+d+m-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const v=(a+1)/2,x=(d+1)/2,b=(m+1)/2,w=(l+u)/4,_=(c+p)/4,S=(h+f)/4;return v>x&&v>b?v<.01?(i=0,n=.707106781,s=.707106781):(i=Math.sqrt(v),n=w/i,s=_/i):x>b?x<.01?(i=.707106781,n=0,s=.707106781):(n=Math.sqrt(x),i=w/n,s=S/n):b<.01?(i=.707106781,n=.707106781,s=0):(s=Math.sqrt(b),i=_/s,n=S/s),this.set(i,n,s,t),this}let g=Math.sqrt((f-h)*(f-h)+(c-p)*(c-p)+(u-l)*(u-l));return Math.abs(g)<.001&&(g=1),this.x=(f-h)/g,this.y=(c-p)/g,this.z=(u-l)/g,this.w=Math.acos((a+d+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class nN extends Ln{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new jt(0,0,e,t),this.scissorTest=!1,this.viewport=new jt(0,0,e,t);const n={width:e,height:t,depth:1};i.encoding!==void 0&&(gy("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===Ol?Lt:kn),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Or,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},i),this.texture=new Nr(n,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps,this.texture.internalFormat=i.internalFormat,this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new da(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ui extends nN{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class yy extends Nr{constructor(e=null,t=1,i=1,n=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=Mr,this.minFilter=Mr,this.wrapR=Mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rLe extends Ui{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new yy(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Hw extends Nr{constructor(e=null,t=1,i=1,n=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:n},this.magFilter=Mr,this.minFilter=Mr,this.wrapR=Mi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class iLe extends Ui{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Hw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class nLe extends Ui{constructor(e=1,t=1,i=1,n={}){super(e,t,n),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<i;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let n=0,s=this.texture.length;n<s;n++)this.texture[n].image.width=e,this.texture[n].image.height=t,this.texture[n].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}let Rr=class{constructor(r=0,e=0,t=0,i=1){this.isQuaternion=!0,this._x=r,this._y=e,this._z=t,this._w=i}static slerpFlat(r,e,t,i,n,s,o){let a=t[i+0],l=t[i+1],c=t[i+2],u=t[i+3];const d=n[s+0],h=n[s+1],p=n[s+2],f=n[s+3];if(o===0){r[e+0]=a,r[e+1]=l,r[e+2]=c,r[e+3]=u;return}if(o===1){r[e+0]=d,r[e+1]=h,r[e+2]=p,r[e+3]=f;return}if(u!==f||a!==d||l!==h||c!==p){let m=1-o;const g=a*d+l*h+c*p+u*f,v=g>=0?1:-1,x=1-g*g;if(x>Number.EPSILON){const w=Math.sqrt(x),_=Math.atan2(w,g*v);m=Math.sin(m*_)/w,o=Math.sin(o*_)/w}const b=o*v;if(a=a*m+d*b,l=l*m+h*b,c=c*m+p*b,u=u*m+f*b,m===1-o){const w=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=w,l*=w,c*=w,u*=w}}r[e]=a,r[e+1]=l,r[e+2]=c,r[e+3]=u}static multiplyQuaternionsFlat(r,e,t,i,n,s){const o=t[i],a=t[i+1],l=t[i+2],c=t[i+3],u=n[s],d=n[s+1],h=n[s+2],p=n[s+3];return r[e]=o*p+c*u+a*h-l*d,r[e+1]=a*p+c*d+l*u-o*h,r[e+2]=l*p+c*h+o*d-a*u,r[e+3]=c*p-o*u-a*d-l*h,r}get x(){return this._x}set x(r){this._x=r,this._onChangeCallback()}get y(){return this._y}set y(r){this._y=r,this._onChangeCallback()}get z(){return this._z}set z(r){this._z=r,this._onChangeCallback()}get w(){return this._w}set w(r){this._w=r,this._onChangeCallback()}set(r,e,t,i){return this._x=r,this._y=e,this._z=t,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this._onChangeCallback(),this}setFromEuler(r,e){const t=r._x,i=r._y,n=r._z,s=r._order,o=Math.cos,a=Math.sin,l=o(t/2),c=o(i/2),u=o(n/2),d=a(t/2),h=a(i/2),p=a(n/2);switch(s){case"XYZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"YXZ":this._x=d*c*u+l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"ZXY":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u-d*h*p;break;case"ZYX":this._x=d*c*u-l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u+d*h*p;break;case"YZX":this._x=d*c*u+l*h*p,this._y=l*h*u+d*c*p,this._z=l*c*p-d*h*u,this._w=l*c*u-d*h*p;break;case"XZY":this._x=d*c*u-l*h*p,this._y=l*h*u-d*c*p,this._z=l*c*p+d*h*u,this._w=l*c*u+d*h*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e!==!1&&this._onChangeCallback(),this}setFromAxisAngle(r,e){const t=e/2,i=Math.sin(t);return this._x=r.x*i,this._y=r.y*i,this._z=r.z*i,this._w=Math.cos(t),this._onChangeCallback(),this}setFromRotationMatrix(r){const e=r.elements,t=e[0],i=e[4],n=e[8],s=e[1],o=e[5],a=e[9],l=e[2],c=e[6],u=e[10],d=t+o+u;if(d>0){const h=.5/Math.sqrt(d+1);this._w=.25/h,this._x=(c-a)*h,this._y=(n-l)*h,this._z=(s-i)*h}else if(t>o&&t>u){const h=2*Math.sqrt(1+t-o-u);this._w=(c-a)/h,this._x=.25*h,this._y=(i+s)/h,this._z=(n+l)/h}else if(o>u){const h=2*Math.sqrt(1+o-t-u);this._w=(n-l)/h,this._x=(i+s)/h,this._y=.25*h,this._z=(a+c)/h}else{const h=2*Math.sqrt(1+u-t-o);this._w=(s-i)/h,this._x=(n+l)/h,this._y=(a+c)/h,this._z=.25*h}return this._onChangeCallback(),this}setFromUnitVectors(r,e){let t=r.dot(e)+1;return t<Number.EPSILON?(t=0,Math.abs(r.x)>Math.abs(r.z)?(this._x=-r.y,this._y=r.x,this._z=0,this._w=t):(this._x=0,this._y=-r.z,this._z=r.y,this._w=t)):(this._x=r.y*e.z-r.z*e.y,this._y=r.z*e.x-r.x*e.z,this._z=r.x*e.y-r.y*e.x,this._w=t),this.normalize()}angleTo(r){return 2*Math.acos(Math.abs(Di(this.dot(r),-1,1)))}rotateTowards(r,e){const t=this.angleTo(r);if(t===0)return this;const i=Math.min(1,e/t);return this.slerp(r,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let r=this.length();return r===0?(this._x=0,this._y=0,this._z=0,this._w=1):(r=1/r,this._x=this._x*r,this._y=this._y*r,this._z=this._z*r,this._w=this._w*r),this._onChangeCallback(),this}multiply(r){return this.multiplyQuaternions(this,r)}premultiply(r){return this.multiplyQuaternions(r,this)}multiplyQuaternions(r,e){const t=r._x,i=r._y,n=r._z,s=r._w,o=e._x,a=e._y,l=e._z,c=e._w;return this._x=t*c+s*o+i*l-n*a,this._y=i*c+s*a+n*o-t*l,this._z=n*c+s*l+t*a-i*o,this._w=s*c-t*o-i*a-n*l,this._onChangeCallback(),this}slerp(r,e){if(e===0)return this;if(e===1)return this.copy(r);const t=this._x,i=this._y,n=this._z,s=this._w;let o=s*r._w+t*r._x+i*r._y+n*r._z;if(o<0?(this._w=-r._w,this._x=-r._x,this._y=-r._y,this._z=-r._z,o=-o):this.copy(r),o>=1)return this._w=s,this._x=t,this._y=i,this._z=n,this;const a=1-o*o;if(a<=Number.EPSILON){const h=1-e;return this._w=h*s+e*this._w,this._x=h*t+e*this._x,this._y=h*i+e*this._y,this._z=h*n+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(a),c=Math.atan2(l,o),u=Math.sin((1-e)*c)/l,d=Math.sin(e*c)/l;return this._w=s*u+this._w*d,this._x=t*u+this._x*d,this._y=i*u+this._y*d,this._z=n*u+this._z*d,this._onChangeCallback(),this}slerpQuaternions(r,e,t){return this.copy(r).slerp(e,t)}random(){const r=Math.random(),e=Math.sqrt(1-r),t=Math.sqrt(r),i=2*Math.PI*Math.random(),n=2*Math.PI*Math.random();return this.set(e*Math.cos(i),t*Math.sin(n),t*Math.cos(n),e*Math.sin(i))}equals(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w}fromArray(r,e=0){return this._x=r[e],this._y=r[e+1],this._z=r[e+2],this._w=r[e+3],this._onChangeCallback(),this}toArray(r=[],e=0){return r[e]=this._x,r[e+1]=this._y,r[e+2]=this._z,r[e+3]=this._w,r}fromBufferAttribute(r,e){return this._x=r.getX(e),this._y=r.getY(e),this._z=r.getZ(e),this._w=r.getW(e),this}toJSON(){return this.toArray()}_onChange(r){return this._onChangeCallback=r,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},oe=class Qq{constructor(e=0,t=0,i=0){Qq.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(I8.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(I8.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*n,this.y=s[1]*t+s[4]*i+s[7]*n,this.z=s[2]*t+s[5]*i+s[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*n+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*n+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*n+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*n+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,n=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*n-a*i,u=l*i+a*t-s*n,d=l*n+s*i-o*t,h=-s*t-o*i-a*n;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*n,this.y=s[1]*t+s[5]*i+s[9]*n,this.z=s[2]*t+s[6]*i+s[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,n=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=n*l-s*a,this.y=s*o-i*l,this.z=i*a-n*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return sN.copy(this).projectOnVector(e),this.sub(sN)}reflect(e){return this.sub(sN.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Di(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}};const sN=new oe,I8=new Rr;let On=class{constructor(r=new oe(1/0,1/0,1/0),e=new oe(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=r,this.max=e}set(r,e){return this.min.copy(r),this.max.copy(e),this}setFromArray(r){this.makeEmpty();for(let e=0,t=r.length;e<t;e+=3)this.expandByPoint(gc.fromArray(r,e));return this}setFromBufferAttribute(r){this.makeEmpty();for(let e=0,t=r.count;e<t;e++)this.expandByPoint(gc.fromBufferAttribute(r,e));return this}setFromPoints(r){this.makeEmpty();for(let e=0,t=r.length;e<t;e++)this.expandByPoint(r[e]);return this}setFromCenterAndSize(r,e){const t=gc.copy(e).multiplyScalar(.5);return this.min.copy(r).sub(t),this.max.copy(r).add(t),this}setFromObject(r,e=!1){return this.makeEmpty(),this.expandByObject(r,e)}clone(){return new this.constructor().copy(this)}copy(r){return this.min.copy(r.min),this.max.copy(r.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(r){return this.isEmpty()?r.set(0,0,0):r.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(r){return this.isEmpty()?r.set(0,0,0):r.subVectors(this.max,this.min)}expandByPoint(r){return this.min.min(r),this.max.max(r),this}expandByVector(r){return this.min.sub(r),this.max.add(r),this}expandByScalar(r){return this.min.addScalar(-r),this.max.addScalar(r),this}expandByObject(r,e=!1){if(r.updateWorldMatrix(!1,!1),r.boundingBox!==void 0)r.boundingBox===null&&r.computeBoundingBox(),ym.copy(r.boundingBox),ym.applyMatrix4(r.matrixWorld),this.union(ym);else{const i=r.geometry;if(i!==void 0)if(e&&i.attributes!==void 0&&i.attributes.position!==void 0){const n=i.attributes.position;for(let s=0,o=n.count;s<o;s++)gc.fromBufferAttribute(n,s).applyMatrix4(r.matrixWorld),this.expandByPoint(gc)}else i.boundingBox===null&&i.computeBoundingBox(),ym.copy(i.boundingBox),ym.applyMatrix4(r.matrixWorld),this.union(ym)}const t=r.children;for(let i=0,n=t.length;i<n;i++)this.expandByObject(t[i],e);return this}containsPoint(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y||r.z<this.min.z||r.z>this.max.z)}containsBox(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y&&this.min.z<=r.min.z&&r.max.z<=this.max.z}getParameter(r,e){return e.set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y),(r.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y||r.max.z<this.min.z||r.min.z>this.max.z)}intersectsSphere(r){return this.clampPoint(r.center,gc),gc.distanceToSquared(r.center)<=r.radius*r.radius}intersectsPlane(r){let e,t;return r.normal.x>0?(e=r.normal.x*this.min.x,t=r.normal.x*this.max.x):(e=r.normal.x*this.max.x,t=r.normal.x*this.min.x),r.normal.y>0?(e+=r.normal.y*this.min.y,t+=r.normal.y*this.max.y):(e+=r.normal.y*this.max.y,t+=r.normal.y*this.min.y),r.normal.z>0?(e+=r.normal.z*this.min.z,t+=r.normal.z*this.max.z):(e+=r.normal.z*this.max.z,t+=r.normal.z*this.min.z),e<=-r.constant&&t>=-r.constant}intersectsTriangle(r){if(this.isEmpty())return!1;this.getCenter(by),Ww.subVectors(this.max,by),bm.subVectors(r.a,by),xm.subVectors(r.b,by),wm.subVectors(r.c,by),Lu.subVectors(xm,bm),Ou.subVectors(wm,xm),Ih.subVectors(bm,wm);let e=[0,-Lu.z,Lu.y,0,-Ou.z,Ou.y,0,-Ih.z,Ih.y,Lu.z,0,-Lu.x,Ou.z,0,-Ou.x,Ih.z,0,-Ih.x,-Lu.y,Lu.x,0,-Ou.y,Ou.x,0,-Ih.y,Ih.x,0];return!oN(e,bm,xm,wm,Ww)||(e=[1,0,0,0,1,0,0,0,1],!oN(e,bm,xm,wm,Ww))?!1:($w.crossVectors(Lu,Ou),e=[$w.x,$w.y,$w.z],oN(e,bm,xm,wm,Ww))}clampPoint(r,e){return e.copy(r).clamp(this.min,this.max)}distanceToPoint(r){return this.clampPoint(r,gc).distanceTo(r)}getBoundingSphere(r){return this.isEmpty()?r.makeEmpty():(this.getCenter(r.center),r.radius=this.getSize(gc).length()*.5),r}intersect(r){return this.min.max(r.min),this.max.min(r.max),this.isEmpty()&&this.makeEmpty(),this}union(r){return this.min.min(r.min),this.max.max(r.max),this}applyMatrix4(r){return this.isEmpty()?this:(mc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(r),mc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(r),mc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(r),mc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(r),mc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(r),mc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(r),mc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(r),mc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(r),this.setFromPoints(mc),this)}translate(r){return this.min.add(r),this.max.add(r),this}equals(r){return r.min.equals(this.min)&&r.max.equals(this.max)}};const mc=[new oe,new oe,new oe,new oe,new oe,new oe,new oe,new oe],gc=new oe,ym=new On,bm=new oe,xm=new oe,wm=new oe,Lu=new oe,Ou=new oe,Ih=new oe,by=new oe,Ww=new oe,$w=new oe,Dh=new oe;function oN(r,e,t,i,n){for(let s=0,o=r.length-3;s<=o;s+=3){Dh.fromArray(r,s);const a=n.x*Math.abs(Dh.x)+n.y*Math.abs(Dh.y)+n.z*Math.abs(Dh.z),l=e.dot(Dh),c=t.dot(Dh),u=i.dot(Dh);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const sLe=new On,xy=new oe,aN=new oe;let Ls=class{constructor(r=new oe,e=-1){this.center=r,this.radius=e}set(r,e){return this.center.copy(r),this.radius=e,this}setFromPoints(r,e){const t=this.center;e!==void 0?t.copy(e):sLe.setFromPoints(r).getCenter(t);let i=0;for(let n=0,s=r.length;n<s;n++)i=Math.max(i,t.distanceToSquared(r[n]));return this.radius=Math.sqrt(i),this}copy(r){return this.center.copy(r.center),this.radius=r.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(r){return r.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(r){return r.distanceTo(this.center)-this.radius}intersectsSphere(r){const e=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=e*e}intersectsBox(r){return r.intersectsSphere(this)}intersectsPlane(r){return Math.abs(r.distanceToPoint(this.center))<=this.radius}clampPoint(r,e){const t=this.center.distanceToSquared(r);return e.copy(r),t>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(r){return this.isEmpty()?(r.makeEmpty(),r):(r.set(this.center,this.center),r.expandByScalar(this.radius),r)}applyMatrix4(r){return this.center.applyMatrix4(r),this.radius=this.radius*r.getMaxScaleOnAxis(),this}translate(r){return this.center.add(r),this}expandByPoint(r){if(this.isEmpty())return this.center.copy(r),this.radius=0,this;xy.subVectors(r,this.center);const e=xy.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),i=(t-this.radius)*.5;this.center.addScaledVector(xy,i/t),this.radius+=i}return this}union(r){return r.isEmpty()?this:this.isEmpty()?(this.copy(r),this):(this.center.equals(r.center)===!0?this.radius=Math.max(this.radius,r.radius):(aN.subVectors(r.center,this.center).setLength(r.radius),this.expandByPoint(xy.copy(r.center).add(aN)),this.expandByPoint(xy.copy(r.center).sub(aN))),this)}equals(r){return r.center.equals(this.center)&&r.radius===this.radius}clone(){return new this.constructor().copy(this)}};const vc=new oe,lN=new oe,Xw=new oe,Pu=new oe,cN=new oe,qw=new oe,uN=new oe;class Uh{constructor(e=new oe,t=new oe(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,vc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=vc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(vc.copy(this.origin).addScaledVector(this.direction,t),vc.distanceToSquared(e))}distanceSqToSegment(e,t,i,n){lN.copy(e).add(t).multiplyScalar(.5),Xw.copy(t).sub(e).normalize(),Pu.copy(this.origin).sub(lN);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Xw),a=Pu.dot(this.direction),l=-Pu.dot(Xw),c=Pu.lengthSq(),u=Math.abs(1-o*o);let d,h,p,f;if(u>0)if(d=o*l-a,h=o*a-l,f=s*u,d>=0)if(h>=-f)if(h<=f){const m=1/u;d*=m,h*=m,p=d*(d+o*h+2*a)+h*(o*d+h+2*l)+c}else h=s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+c;else h=-s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+c;else h<=-f?(d=Math.max(0,-(-o*s+a)),h=d>0?-s:Math.min(Math.max(-s,-l),s),p=-d*d+h*(h+2*l)+c):h<=f?(d=0,h=Math.min(Math.max(-s,-l),s),p=h*(h+2*l)+c):(d=Math.max(0,-(o*s+a)),h=d>0?s:Math.min(Math.max(-s,-l),s),p=-d*d+h*(h+2*l)+c);else h=o>0?-s:s,d=Math.max(0,-(o*h+a)),p=-d*d+h*(h+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,d),n&&n.copy(lN).addScaledVector(Xw,h),p}intersectSphere(e,t){vc.subVectors(e.center,this.origin);const i=vc.dot(this.direction),n=vc.dot(vc)-i*i,s=e.radius*e.radius;if(n>s)return null;const o=Math.sqrt(s-n),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,n,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,d=1/this.direction.z,h=this.origin;return c>=0?(i=(e.min.x-h.x)*c,n=(e.max.x-h.x)*c):(i=(e.max.x-h.x)*c,n=(e.min.x-h.x)*c),u>=0?(s=(e.min.y-h.y)*u,o=(e.max.y-h.y)*u):(s=(e.max.y-h.y)*u,o=(e.min.y-h.y)*u),i>o||s>n||((s>i||isNaN(i))&&(i=s),(o<n||isNaN(n))&&(n=o),d>=0?(a=(e.min.z-h.z)*d,l=(e.max.z-h.z)*d):(a=(e.max.z-h.z)*d,l=(e.min.z-h.z)*d),i>l||a>n)||((a>i||i!==i)&&(i=a),(l<n||n!==n)&&(n=l),n<0)?null:this.at(i>=0?i:n,t)}intersectsBox(e){return this.intersectBox(e,vc)!==null}intersectTriangle(e,t,i,n,s){cN.subVectors(t,e),qw.subVectors(i,e),uN.crossVectors(cN,qw);let o=this.direction.dot(uN),a;if(o>0){if(n)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Pu.subVectors(this.origin,e);const l=a*this.direction.dot(qw.crossVectors(Pu,qw));if(l<0)return null;const c=a*this.direction.dot(cN.cross(Pu));if(c<0||l+c>o)return null;const u=-a*Pu.dot(uN);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}let St=class tP{constructor(e,t,i,n,s,o,a,l,c,u,d,h,p,f,m,g){tP.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,n,s,o,a,l,c,u,d,h,p,f,m,g)}set(e,t,i,n,s,o,a,l,c,u,d,h,p,f,m,g){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=n,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=d,v[14]=h,v[3]=p,v[7]=f,v[11]=m,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new tP().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,n=1/_m.setFromMatrixColumn(e,0).length(),s=1/_m.setFromMatrixColumn(e,1).length(),o=1/_m.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,n=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(n),c=Math.sin(n),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=o*u,p=o*d,f=a*u,m=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=p+f*c,t[5]=h-m*c,t[9]=-a*l,t[2]=m-h*c,t[6]=f+p*c,t[10]=o*l}else if(e.order==="YXZ"){const h=l*u,p=l*d,f=c*u,m=c*d;t[0]=h+m*a,t[4]=f*a-p,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=p*a-f,t[6]=m+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*u,p=l*d,f=c*u,m=c*d;t[0]=h-m*a,t[4]=-o*d,t[8]=f+p*a,t[1]=p+f*a,t[5]=o*u,t[9]=m-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*u,p=o*d,f=a*u,m=a*d;t[0]=l*u,t[4]=f*c-p,t[8]=h*c+m,t[1]=l*d,t[5]=m*c+h,t[9]=p*c-f,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,p=o*c,f=a*l,m=a*c;t[0]=l*u,t[4]=m-h*d,t[8]=f*d+p,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=p*d+f,t[10]=h-m*d}else if(e.order==="XZY"){const h=o*l,p=o*c,f=a*l,m=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+m,t[5]=o*u,t[9]=p*d-f,t[2]=f*d-p,t[6]=a*u,t[10]=m*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(oLe,e,aLe)}lookAt(e,t,i){const n=this.elements;return Ro.subVectors(e,t),Ro.lengthSq()===0&&(Ro.z=1),Ro.normalize(),Iu.crossVectors(i,Ro),Iu.lengthSq()===0&&(Math.abs(i.z)===1?Ro.x+=1e-4:Ro.z+=1e-4,Ro.normalize(),Iu.crossVectors(i,Ro)),Iu.normalize(),Kw.crossVectors(Ro,Iu),n[0]=Iu.x,n[4]=Kw.x,n[8]=Ro.x,n[1]=Iu.y,n[5]=Kw.y,n[9]=Ro.y,n[2]=Iu.z,n[6]=Kw.z,n[10]=Ro.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],p=i[13],f=i[2],m=i[6],g=i[10],v=i[14],x=i[3],b=i[7],w=i[11],_=i[15],S=n[0],T=n[4],M=n[8],E=n[12],C=n[1],P=n[5],A=n[9],N=n[13],R=n[2],F=n[6],B=n[10],k=n[14],z=n[3],O=n[7],V=n[11],U=n[15];return s[0]=o*S+a*C+l*R+c*z,s[4]=o*T+a*P+l*F+c*O,s[8]=o*M+a*A+l*B+c*V,s[12]=o*E+a*N+l*k+c*U,s[1]=u*S+d*C+h*R+p*z,s[5]=u*T+d*P+h*F+p*O,s[9]=u*M+d*A+h*B+p*V,s[13]=u*E+d*N+h*k+p*U,s[2]=f*S+m*C+g*R+v*z,s[6]=f*T+m*P+g*F+v*O,s[10]=f*M+m*A+g*B+v*V,s[14]=f*E+m*N+g*k+v*U,s[3]=x*S+b*C+w*R+_*z,s[7]=x*T+b*P+w*F+_*O,s[11]=x*M+b*A+w*B+_*V,s[15]=x*E+b*N+w*k+_*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],n=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],p=e[14],f=e[3],m=e[7],g=e[11],v=e[15];return f*(+s*l*d-n*c*d-s*a*h+i*c*h+n*a*p-i*l*p)+m*(+t*l*p-t*c*h+s*o*h-n*o*p+n*c*u-s*l*u)+g*(+t*c*d-t*a*p-s*o*d+i*o*p+s*a*u-i*c*u)+v*(-n*a*u-t*l*d+t*a*h+n*o*d-i*o*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],f=e[12],m=e[13],g=e[14],v=e[15],x=d*g*c-m*h*c+m*l*p-a*g*p-d*l*v+a*h*v,b=f*h*c-u*g*c-f*l*p+o*g*p+u*l*v-o*h*v,w=u*m*c-f*d*c+f*a*p-o*m*p-u*a*v+o*d*v,_=f*d*l-u*m*l-f*a*h+o*m*h+u*a*g-o*d*g,S=t*x+i*b+n*w+s*_;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/S;return e[0]=x*T,e[1]=(m*h*s-d*g*s-m*n*p+i*g*p+d*n*v-i*h*v)*T,e[2]=(a*g*s-m*l*s+m*n*c-i*g*c-a*n*v+i*l*v)*T,e[3]=(d*l*s-a*h*s-d*n*c+i*h*c+a*n*p-i*l*p)*T,e[4]=b*T,e[5]=(u*g*s-f*h*s+f*n*p-t*g*p-u*n*v+t*h*v)*T,e[6]=(f*l*s-o*g*s-f*n*c+t*g*c+o*n*v-t*l*v)*T,e[7]=(o*h*s-u*l*s+u*n*c-t*h*c-o*n*p+t*l*p)*T,e[8]=w*T,e[9]=(f*d*s-u*m*s-f*i*p+t*m*p+u*i*v-t*d*v)*T,e[10]=(o*m*s-f*a*s+f*i*c-t*m*c-o*i*v+t*a*v)*T,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*p-t*a*p)*T,e[12]=_*T,e[13]=(u*m*n-f*d*n+f*i*h-t*m*h-u*i*g+t*d*g)*T,e[14]=(f*a*n-o*m*n-f*i*l+t*m*l+o*i*g-t*a*g)*T,e[15]=(o*d*n-u*a*n+u*i*l-t*d*l-o*i*h+t*a*h)*T,this}scale(e){const t=this.elements,i=e.x,n=e.y,s=e.z;return t[0]*=i,t[4]*=n,t[8]*=s,t[1]*=i,t[5]*=n,t[9]*=s,t[2]*=i,t[6]*=n,t[10]*=s,t[3]*=i,t[7]*=n,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),n=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-n*l,c*l+n*a,0,c*a+n*l,u*a+i,u*l-n*o,0,c*l-n*a,u*l+n*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,s,o){return this.set(1,i,s,0,e,1,o,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){const n=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,p=s*u,f=s*d,m=o*u,g=o*d,v=a*d,x=l*c,b=l*u,w=l*d,_=i.x,S=i.y,T=i.z;return n[0]=(1-(m+v))*_,n[1]=(p+w)*_,n[2]=(f-b)*_,n[3]=0,n[4]=(p-w)*S,n[5]=(1-(h+v))*S,n[6]=(g+x)*S,n[7]=0,n[8]=(f+b)*T,n[9]=(g-x)*T,n[10]=(1-(h+m))*T,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){const n=this.elements;let s=_m.set(n[0],n[1],n[2]).length();const o=_m.set(n[4],n[5],n[6]).length(),a=_m.set(n[8],n[9],n[10]).length();this.determinant()<0&&(s=-s),e.x=n[12],e.y=n[13],e.z=n[14],Wa.copy(this);const l=1/s,c=1/o,u=1/a;return Wa.elements[0]*=l,Wa.elements[1]*=l,Wa.elements[2]*=l,Wa.elements[4]*=c,Wa.elements[5]*=c,Wa.elements[6]*=c,Wa.elements[8]*=u,Wa.elements[9]*=u,Wa.elements[10]*=u,t.setFromRotationMatrix(Wa),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,n,s,o,a=ua){const l=this.elements,c=2*s/(t-e),u=2*s/(i-n),d=(t+e)/(t-e),h=(i+n)/(i-n);let p,f;if(a===ua)p=-(o+s)/(o-s),f=-2*o*s/(o-s);else if(a===Oh)p=-o/(o-s),f=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,n,s,o,a=ua){const l=this.elements,c=1/(t-e),u=1/(i-n),d=1/(o-s),h=(t+e)*c,p=(i+n)*u;let f,m;if(a===ua)f=(o+s)*d,m=-2*d;else if(a===Oh)f=s*d,m=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=m,l[14]=-f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<16;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}};const _m=new oe,Wa=new St,oLe=new oe(0,0,0),aLe=new oe(1,1,1),Iu=new oe,Kw=new oe,Ro=new oe,D8=new St,U8=new Rr;let Xi=class eK{constructor(e=0,t=0,i=0,n=eK.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,n=this._order){return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const n=e.elements,s=n[0],o=n[4],a=n[8],l=n[1],c=n[5],u=n[9],d=n[2],h=n[6],p=n[10];switch(t){case"XYZ":this._y=Math.asin(Di(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Di(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Di(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Di(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Di(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-Di(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return D8.makeRotationFromQuaternion(e),this.setFromRotationMatrix(D8,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return U8.setFromEuler(this),this.setFromQuaternion(U8,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Xi.DEFAULT_ORDER="XYZ";let Yw=class{constructor(){this.mask=1}set(r){this.mask=(1<<r|0)>>>0}enable(r){this.mask|=1<<r|0}enableAll(){this.mask=-1}toggle(r){this.mask^=1<<r|0}disable(r){this.mask&=~(1<<r|0)}disableAll(){this.mask=0}test(r){return(this.mask&r.mask)!==0}isEnabled(r){return(this.mask&(1<<r|0))!==0}},lLe=0;const F8=new oe,Sm=new Rr,yc=new St,Zw=new oe,wy=new oe,cLe=new oe,uLe=new Rr,B8=new oe(1,0,0),z8=new oe(0,1,0),V8=new oe(0,0,1),dLe={type:"added"},hLe={type:"removed"};let nr=class gT extends Ln{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:lLe++}),this.uuid=No(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=gT.DEFAULT_UP.clone();const e=new oe,t=new Xi,i=new Rr,n=new oe(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new St},normalMatrix:{value:new hr}}),this.matrix=new St,this.matrixWorld=new St,this.matrixAutoUpdate=gT.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=gT.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Yw,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Sm.setFromAxisAngle(e,t),this.quaternion.multiply(Sm),this}rotateOnWorldAxis(e,t){return Sm.setFromAxisAngle(e,t),this.quaternion.premultiply(Sm),this}rotateX(e){return this.rotateOnAxis(B8,e)}rotateY(e){return this.rotateOnAxis(z8,e)}rotateZ(e){return this.rotateOnAxis(V8,e)}translateOnAxis(e,t){return F8.copy(e).applyQuaternion(this.quaternion),this.position.add(F8.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(B8,e)}translateY(e){return this.translateOnAxis(z8,e)}translateZ(e){return this.translateOnAxis(V8,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(yc.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Zw.copy(e):Zw.set(e,t,i);const n=this.parent;this.updateWorldMatrix(!0,!1),wy.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?yc.lookAt(wy,Zw,this.up):yc.lookAt(Zw,wy,this.up),this.quaternion.setFromRotationMatrix(yc),n&&(yc.extractRotation(n.matrixWorld),Sm.setFromRotationMatrix(yc),this.quaternion.premultiply(Sm.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(dLe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(hLe)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),yc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),yc.multiply(e.parent.matrixWorld)),e.applyMatrix4(yc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){const s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let n=0,s=this.children.length;n<s;n++){const o=this.children[n].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wy,e,cLe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wy,uLe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,n=t.length;i<n;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const n=this.children;for(let s=0,o=n.length;s<o;s++){const a=n[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));n.material=a}else n.material=s(e.materials,this.material);if(this.children.length>0){n.children=[];for(let a=0;a<this.children.length;a++)n.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];n.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),p=o(e.animations),f=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),p.length>0&&(i.animations=p),f.length>0&&(i.nodes=f)}return i.object=n,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const n=e.children[i];this.add(n.clone())}return this}};nr.DEFAULT_UP=new oe(0,1,0),nr.DEFAULT_MATRIX_AUTO_UPDATE=!0,nr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const $a=new oe,bc=new oe,dN=new oe,xc=new oe,Tm=new oe,Mm=new oe,G8=new oe,hN=new oe,pN=new oe,fN=new oe;let Jw=!1,Fh=class Vp{constructor(e=new oe,t=new oe,i=new oe){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),$a.subVectors(e,t),n.cross($a);const s=n.lengthSq();return s>0?n.multiplyScalar(1/Math.sqrt(s)):n.set(0,0,0)}static getBarycoord(e,t,i,n,s){$a.subVectors(n,t),bc.subVectors(i,t),dN.subVectors(e,t);const o=$a.dot($a),a=$a.dot(bc),l=$a.dot(dN),c=bc.dot(bc),u=bc.dot(dN),d=o*c-a*a;if(d===0)return s.set(-2,-1,-1);const h=1/d,p=(c*l-a*u)*h,f=(o*u-a*l)*h;return s.set(1-p-f,f,p)}static containsPoint(e,t,i,n){return this.getBarycoord(e,t,i,n,xc),xc.x>=0&&xc.y>=0&&xc.x+xc.y<=1}static getUV(e,t,i,n,s,o,a,l){return Jw===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Jw=!0),this.getInterpolation(e,t,i,n,s,o,a,l)}static getInterpolation(e,t,i,n,s,o,a,l){return this.getBarycoord(e,t,i,n,xc),l.setScalar(0),l.addScaledVector(s,xc.x),l.addScaledVector(o,xc.y),l.addScaledVector(a,xc.z),l}static isFrontFacing(e,t,i,n){return $a.subVectors(i,t),bc.subVectors(e,t),$a.cross(bc).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return $a.subVectors(this.c,this.b),bc.subVectors(this.a,this.b),$a.cross(bc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Vp.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Vp.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,n,s){return Jw===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Jw=!0),Vp.getInterpolation(e,this.a,this.b,this.c,t,i,n,s)}getInterpolation(e,t,i,n,s){return Vp.getInterpolation(e,this.a,this.b,this.c,t,i,n,s)}containsPoint(e){return Vp.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Vp.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,n=this.b,s=this.c;let o,a;Tm.subVectors(n,i),Mm.subVectors(s,i),hN.subVectors(e,i);const l=Tm.dot(hN),c=Mm.dot(hN);if(l<=0&&c<=0)return t.copy(i);pN.subVectors(e,n);const u=Tm.dot(pN),d=Mm.dot(pN);if(u>=0&&d<=u)return t.copy(n);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Tm,o);fN.subVectors(e,s);const p=Tm.dot(fN),f=Mm.dot(fN);if(f>=0&&p<=f)return t.copy(s);const m=p*c-l*f;if(m<=0&&c>=0&&f<=0)return a=c/(c-f),t.copy(i).addScaledVector(Mm,a);const g=u*f-p*d;if(g<=0&&d-u>=0&&p-f>=0)return G8.subVectors(s,n),a=(d-u)/(d-u+(p-f)),t.copy(n).addScaledVector(G8,a);const v=1/(g+m+h);return o=m*v,a=h*v,t.copy(i).addScaledVector(Tm,o).addScaledVector(Mm,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},pLe=0;class Wr extends Ln{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:pLe++}),this.uuid=No(),this.name="",this.type="Material",this.blending=Eo,this.side=eo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=qf,this.blendDst=Kf,this.blendEquation=to,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=uh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=zw,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=um,this.stencilZFail=um,this.stencilZPass=um,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const n=this[t];if(n===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Eo&&(i.blending=this.blending),this.side!==eo&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function n(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=n(e.textures),o=n(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const n=t.length;i=new Array(n);for(let s=0;s!==n;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const j8={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Du={h:0,s:0,l:0},Qw={h:0,s:0,l:0};function mN(r,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?r+(e-r)*6*t:t<1/2?e:t<2/3?r+(e-r)*6*(2/3-t):r}class at{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const n=e;n&&n.isColor?this.copy(n):typeof n=="number"?this.setHex(n):typeof n=="string"&&this.setStyle(n)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Lt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Hr.toWorkingColorSpace(this,t),this}setRGB(e,t,i,n=Hr.workingColorSpace){return this.r=e,this.g=t,this.b=i,Hr.toWorkingColorSpace(this,n),this}setHSL(e,t,i,n=Hr.workingColorSpace){if(e=JA(e,1),t=Di(t,0,1),i=Di(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=mN(o,s,e+1/3),this.g=mN(o,s,e),this.b=mN(o,s,e-1/3)}return Hr.toWorkingColorSpace(this,n),this}setStyle(e,t=Lt){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=n[1],a=n[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=n[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Lt){const i=j8[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=gm(e.r),this.g=gm(e.g),this.b=gm(e.b),this}copyLinearToSRGB(e){return this.r=rN(e.r),this.g=rN(e.g),this.b=rN(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Lt){return Hr.fromWorkingColorSpace(fs.copy(this),e),Math.round(Di(fs.r*255,0,255))*65536+Math.round(Di(fs.g*255,0,255))*256+Math.round(Di(fs.b*255,0,255))}getHexString(e=Lt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Hr.workingColorSpace){Hr.fromWorkingColorSpace(fs.copy(this),t);const i=fs.r,n=fs.g,s=fs.b,o=Math.max(i,n,s),a=Math.min(i,n,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const d=o-a;switch(c=u<=.5?d/(o+a):d/(2-o-a),o){case i:l=(n-s)/d+(n<s?6:0);break;case n:l=(s-i)/d+2;break;case s:l=(i-n)/d+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=Hr.workingColorSpace){return Hr.fromWorkingColorSpace(fs.copy(this),t),e.r=fs.r,e.g=fs.g,e.b=fs.b,e}getStyle(e=Lt){Hr.fromWorkingColorSpace(fs.copy(this),e);const t=fs.r,i=fs.g,n=fs.b;return e!==Lt?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${n.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(n*255)})`}offsetHSL(e,t,i){return this.getHSL(Du),this.setHSL(Du.h+e,Du.s+t,Du.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Du),e.getHSL(Qw);const i=fy(Du.h,Qw.h,t),n=fy(Du.s,Qw.s,t),s=fy(Du.l,Qw.l,t);return this.setHSL(i,n,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,n=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*n,this.g=s[1]*t+s[4]*i+s[7]*n,this.b=s[2]*t+s[5]*i+s[8]*n,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const fs=new at;at.NAMES=j8;class Ei extends Wr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Yf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const wc=fLe();function fLe(){const r=new ArrayBuffer(4),e=new Float32Array(r),t=new Uint32Array(r),i=new Uint32Array(512),n=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,n[l]=24,n[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,n[l]=-c-1,n[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,n[l]=13,n[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,n[l]=24,n[l|256]=24):(i[l]=31744,i[l|256]=64512,n[l]=13,n[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:n,mantissaTable:s,exponentTable:o,offsetTable:a}}function ao(r){Math.abs(r)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),r=Di(r,-65504,65504),wc.floatView[0]=r;const e=wc.uint32View[0],t=e>>23&511;return wc.baseTable[t]+((e&8388607)>>wc.shiftTable[t])}function _y(r){const e=r>>10;return wc.uint32View[0]=wc.mantissaTable[wc.offsetTable[e]+(r&1023)]+wc.exponentTable[e],wc.floatView[0]}const Sy={toHalfFloat:ao,fromHalfFloat:_y},nn=new oe,e_=new qe;let jr=class{constructor(r,e,t=!1){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=r,this.itemSize=e,this.count=r!==void 0?r.length/e:0,this.normalized=t,this.usage=hm,this.updateRange={offset:0,count:-1},this.gpuType=mi,this.version=0}onUploadCallback(){}set needsUpdate(r){r===!0&&this.version++}setUsage(r){return this.usage=r,this}copy(r){return this.name=r.name,this.array=new r.array.constructor(r.array),this.itemSize=r.itemSize,this.count=r.count,this.normalized=r.normalized,this.usage=r.usage,this.gpuType=r.gpuType,this}copyAt(r,e,t){r*=this.itemSize,t*=e.itemSize;for(let i=0,n=this.itemSize;i<n;i++)this.array[r+i]=e.array[t+i];return this}copyArray(r){return this.array.set(r),this}applyMatrix3(r){if(this.itemSize===2)for(let e=0,t=this.count;e<t;e++)e_.fromBufferAttribute(this,e),e_.applyMatrix3(r),this.setXY(e,e_.x,e_.y);else if(this.itemSize===3)for(let e=0,t=this.count;e<t;e++)nn.fromBufferAttribute(this,e),nn.applyMatrix3(r),this.setXYZ(e,nn.x,nn.y,nn.z);return this}applyMatrix4(r){for(let e=0,t=this.count;e<t;e++)nn.fromBufferAttribute(this,e),nn.applyMatrix4(r),this.setXYZ(e,nn.x,nn.y,nn.z);return this}applyNormalMatrix(r){for(let e=0,t=this.count;e<t;e++)nn.fromBufferAttribute(this,e),nn.applyNormalMatrix(r),this.setXYZ(e,nn.x,nn.y,nn.z);return this}transformDirection(r){for(let e=0,t=this.count;e<t;e++)nn.fromBufferAttribute(this,e),nn.transformDirection(r),this.setXYZ(e,nn.x,nn.y,nn.z);return this}set(r,e=0){return this.array.set(r,e),this}getComponent(r,e){let t=this.array[r*this.itemSize+e];return this.normalized&&(t=oo(t,this.array)),t}setComponent(r,e,t){return this.normalized&&(t=xr(t,this.array)),this.array[r*this.itemSize+e]=t,this}getX(r){let e=this.array[r*this.itemSize];return this.normalized&&(e=oo(e,this.array)),e}setX(r,e){return this.normalized&&(e=xr(e,this.array)),this.array[r*this.itemSize]=e,this}getY(r){let e=this.array[r*this.itemSize+1];return this.normalized&&(e=oo(e,this.array)),e}setY(r,e){return this.normalized&&(e=xr(e,this.array)),this.array[r*this.itemSize+1]=e,this}getZ(r){let e=this.array[r*this.itemSize+2];return this.normalized&&(e=oo(e,this.array)),e}setZ(r,e){return this.normalized&&(e=xr(e,this.array)),this.array[r*this.itemSize+2]=e,this}getW(r){let e=this.array[r*this.itemSize+3];return this.normalized&&(e=oo(e,this.array)),e}setW(r,e){return this.normalized&&(e=xr(e,this.array)),this.array[r*this.itemSize+3]=e,this}setXY(r,e,t){return r*=this.itemSize,this.normalized&&(e=xr(e,this.array),t=xr(t,this.array)),this.array[r+0]=e,this.array[r+1]=t,this}setXYZ(r,e,t,i){return r*=this.itemSize,this.normalized&&(e=xr(e,this.array),t=xr(t,this.array),i=xr(i,this.array)),this.array[r+0]=e,this.array[r+1]=t,this.array[r+2]=i,this}setXYZW(r,e,t,i,n){return r*=this.itemSize,this.normalized&&(e=xr(e,this.array),t=xr(t,this.array),i=xr(i,this.array),n=xr(n,this.array)),this.array[r+0]=e,this.array[r+1]=t,this.array[r+2]=i,this.array[r+3]=n,this}onUpload(r){return this.onUploadCallback=r,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const r={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(r.name=this.name),this.usage!==hm&&(r.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(r.updateRange=this.updateRange),r}};class mLe extends jr{constructor(e,t,i){super(new Int8Array(e),t,i)}}class gLe extends jr{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class vLe extends jr{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class yLe extends jr{constructor(e,t,i){super(new Int16Array(e),t,i)}}let Ty=class extends jr{constructor(r,e,t){super(new Uint16Array(r),e,t)}};class bLe extends jr{constructor(e,t,i){super(new Int32Array(e),t,i)}}let t_=class extends jr{constructor(r,e,t){super(new Uint32Array(r),e,t)}};class gN extends jr{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=_y(this.array[e*this.itemSize]);return this.normalized&&(t=oo(t,this.array)),t}setX(e,t){return this.normalized&&(t=xr(t,this.array)),this.array[e*this.itemSize]=ao(t),this}getY(e){let t=_y(this.array[e*this.itemSize+1]);return this.normalized&&(t=oo(t,this.array)),t}setY(e,t){return this.normalized&&(t=xr(t,this.array)),this.array[e*this.itemSize+1]=ao(t),this}getZ(e){let t=_y(this.array[e*this.itemSize+2]);return this.normalized&&(t=oo(t,this.array)),t}setZ(e,t){return this.normalized&&(t=xr(t,this.array)),this.array[e*this.itemSize+2]=ao(t),this}getW(e){let t=_y(this.array[e*this.itemSize+3]);return this.normalized&&(t=oo(t,this.array)),t}setW(e,t){return this.normalized&&(t=xr(t,this.array)),this.array[e*this.itemSize+3]=ao(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=xr(t,this.array),i=xr(i,this.array)),this.array[e+0]=ao(t),this.array[e+1]=ao(i),this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=xr(t,this.array),i=xr(i,this.array),n=xr(n,this.array)),this.array[e+0]=ao(t),this.array[e+1]=ao(i),this.array[e+2]=ao(n),this}setXYZW(e,t,i,n,s){return e*=this.itemSize,this.normalized&&(t=xr(t,this.array),i=xr(i,this.array),n=xr(n,this.array),s=xr(s,this.array)),this.array[e+0]=ao(t),this.array[e+1]=ao(i),this.array[e+2]=ao(n),this.array[e+3]=ao(s),this}}let Rt=class extends jr{constructor(r,e,t){super(new Float32Array(r),e,t)}};class xLe extends jr{constructor(e,t,i){super(new Float64Array(e),t,i)}}let wLe=0;const ha=new St,vN=new nr,Em=new oe,ko=new On,My=new On,Pn=new oe;let sr=class tK extends Ln{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:wLe++}),this.uuid=No(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(k8(e)?t_:Ty)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new hr().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return ha.makeRotationFromQuaternion(e),this.applyMatrix4(ha),this}rotateX(e){return ha.makeRotationX(e),this.applyMatrix4(ha),this}rotateY(e){return ha.makeRotationY(e),this.applyMatrix4(ha),this}rotateZ(e){return ha.makeRotationZ(e),this.applyMatrix4(ha),this}translate(e,t,i){return ha.makeTranslation(e,t,i),this.applyMatrix4(ha),this}scale(e,t,i){return ha.makeScale(e,t,i),this.applyMatrix4(ha),this}lookAt(e){return vN.lookAt(e),vN.updateMatrix(),this.applyMatrix4(vN.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Em).negate(),this.translate(Em.x,Em.y,Em.z),this}setFromPoints(e){const t=[];for(let i=0,n=e.length;i<n;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Rt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new On);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new oe(-1/0,-1/0,-1/0),new oe(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,n=t.length;i<n;i++){const s=t[i];ko.setFromBufferAttribute(s),this.morphTargetsRelative?(Pn.addVectors(this.boundingBox.min,ko.min),this.boundingBox.expandByPoint(Pn),Pn.addVectors(this.boundingBox.max,ko.max),this.boundingBox.expandByPoint(Pn)):(this.boundingBox.expandByPoint(ko.min),this.boundingBox.expandByPoint(ko.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ls);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new oe,1/0);return}if(e){const i=this.boundingSphere.center;if(ko.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];My.setFromBufferAttribute(a),this.morphTargetsRelative?(Pn.addVectors(ko.min,My.min),ko.expandByPoint(Pn),Pn.addVectors(ko.max,My.max),ko.expandByPoint(Pn)):(ko.expandByPoint(My.min),ko.expandByPoint(My.max))}ko.getCenter(i);let n=0;for(let s=0,o=e.count;s<o;s++)Pn.fromBufferAttribute(e,s),n=Math.max(n,i.distanceToSquared(Pn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Pn.fromBufferAttribute(a,c),l&&(Em.fromBufferAttribute(e,c),Pn.add(Em)),n=Math.max(n,i.distanceToSquared(Pn))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,n=t.position.array,s=t.normal.array,o=t.uv.array,a=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new jr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let C=0;C<a;C++)c[C]=new oe,u[C]=new oe;const d=new oe,h=new oe,p=new oe,f=new qe,m=new qe,g=new qe,v=new oe,x=new oe;function b(C,P,A){d.fromArray(n,C*3),h.fromArray(n,P*3),p.fromArray(n,A*3),f.fromArray(o,C*2),m.fromArray(o,P*2),g.fromArray(o,A*2),h.sub(d),p.sub(d),m.sub(f),g.sub(f);const N=1/(m.x*g.y-g.x*m.y);isFinite(N)&&(v.copy(h).multiplyScalar(g.y).addScaledVector(p,-m.y).multiplyScalar(N),x.copy(p).multiplyScalar(m.x).addScaledVector(h,-g.x).multiplyScalar(N),c[C].add(v),c[P].add(v),c[A].add(v),u[C].add(x),u[P].add(x),u[A].add(x))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let C=0,P=w.length;C<P;++C){const A=w[C],N=A.start,R=A.count;for(let F=N,B=N+R;F<B;F+=3)b(i[F+0],i[F+1],i[F+2])}const _=new oe,S=new oe,T=new oe,M=new oe;function E(C){T.fromArray(s,C*3),M.copy(T);const P=c[C];_.copy(P),_.sub(T.multiplyScalar(T.dot(P))).normalize(),S.crossVectors(M,P);const A=S.dot(u[C])<0?-1:1;l[C*4]=_.x,l[C*4+1]=_.y,l[C*4+2]=_.z,l[C*4+3]=A}for(let C=0,P=w.length;C<P;++C){const A=w[C],N=A.start,R=A.count;for(let F=N,B=N+R;F<B;F+=3)E(i[F+0]),E(i[F+1]),E(i[F+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new jr(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);const n=new oe,s=new oe,o=new oe,a=new oe,l=new oe,c=new oe,u=new oe,d=new oe;if(e)for(let h=0,p=e.count;h<p;h+=3){const f=e.getX(h+0),m=e.getX(h+1),g=e.getX(h+2);n.fromBufferAttribute(t,f),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,g),u.subVectors(o,s),d.subVectors(n,s),u.cross(d),a.fromBufferAttribute(i,f),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,g),a.add(u),l.add(u),c.add(u),i.setXYZ(f,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,p=t.count;h<p;h+=3)n.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(n,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Pn.fromBufferAttribute(e,t),Pn.normalize(),e.setXYZ(t,Pn.x,Pn.y,Pn.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let p=0,f=0;for(let m=0,g=l.length;m<g;m++){a.isInterleavedBufferAttribute?p=l[m]*a.data.stride+a.offset:p=l[m]*u;for(let v=0;v<u;v++)h[f++]=c[p++]}return new jr(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new tK,i=this.index.array,n=this.attributes;for(const a in n){const l=n[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const h=c[u],p=e(h,i);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const n={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(n[l]=u,s=!0)}s&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const n=e.attributes;for(const c in n){const u=n[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,p=d.length;h<p;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}};const H8=new St,Bh=new Uh,r_=new Ls,W8=new oe,Cm=new oe,Am=new oe,Nm=new oe,yN=new oe,i_=new oe,n_=new qe,s_=new qe,o_=new qe,$8=new oe,X8=new oe,q8=new oe,a_=new oe,l_=new oe;class mt extends nr{constructor(e=new sr,t=new Ei){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=i.length;n<s;n++){const o=i[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}getVertexPosition(e,t){const i=this.geometry,n=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(n,e);const a=this.morphTargetInfluences;if(s&&a){i_.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],d=s[l];u!==0&&(yN.fromBufferAttribute(d,e),o?i_.addScaledVector(yN,u):i_.addScaledVector(yN.sub(t),u))}t.add(i_)}return t}raycast(e,t){const i=this.geometry,n=this.material,s=this.matrixWorld;n!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),r_.copy(i.boundingSphere),r_.applyMatrix4(s),Bh.copy(e.ray).recast(e.near),!(r_.containsPoint(Bh.origin)===!1&&(Bh.intersectSphere(r_,W8)===null||Bh.origin.distanceToSquared(W8)>(e.far-e.near)**2))&&(H8.copy(s).invert(),Bh.copy(e.ray).applyMatrix4(H8),!(i.boundingBox!==null&&Bh.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Bh)))}_computeIntersections(e,t,i){let n;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,d=s.attributes.normal,h=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let f=0,m=h.length;f<m;f++){const g=h[f],v=o[g.materialIndex],x=Math.max(g.start,p.start),b=Math.min(a.count,Math.min(g.start+g.count,p.start+p.count));for(let w=x,_=b;w<_;w+=3){const S=a.getX(w),T=a.getX(w+1),M=a.getX(w+2);n=c_(this,v,e,i,c,u,d,S,T,M),n&&(n.faceIndex=Math.floor(w/3),n.face.materialIndex=g.materialIndex,t.push(n))}}else{const f=Math.max(0,p.start),m=Math.min(a.count,p.start+p.count);for(let g=f,v=m;g<v;g+=3){const x=a.getX(g),b=a.getX(g+1),w=a.getX(g+2);n=c_(this,o,e,i,c,u,d,x,b,w),n&&(n.faceIndex=Math.floor(g/3),t.push(n))}}else if(l!==void 0)if(Array.isArray(o))for(let f=0,m=h.length;f<m;f++){const g=h[f],v=o[g.materialIndex],x=Math.max(g.start,p.start),b=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));for(let w=x,_=b;w<_;w+=3){const S=w,T=w+1,M=w+2;n=c_(this,v,e,i,c,u,d,S,T,M),n&&(n.faceIndex=Math.floor(w/3),n.face.materialIndex=g.materialIndex,t.push(n))}}else{const f=Math.max(0,p.start),m=Math.min(l.count,p.start+p.count);for(let g=f,v=m;g<v;g+=3){const x=g,b=g+1,w=g+2;n=c_(this,o,e,i,c,u,d,x,b,w),n&&(n.faceIndex=Math.floor(g/3),t.push(n))}}}}function _Le(r,e,t,i,n,s,o,a){let l;if(e.side===Oi?l=i.intersectTriangle(o,s,n,!0,a):l=i.intersectTriangle(n,s,o,e.side===eo,a),l===null)return null;l_.copy(a),l_.applyMatrix4(r.matrixWorld);const c=t.ray.origin.distanceTo(l_);return c<t.near||c>t.far?null:{distance:c,point:l_.clone(),object:r}}function c_(r,e,t,i,n,s,o,a,l,c){r.getVertexPosition(a,Cm),r.getVertexPosition(l,Am),r.getVertexPosition(c,Nm);const u=_Le(r,e,t,i,Cm,Am,Nm,a_);if(u){n&&(n_.fromBufferAttribute(n,a),s_.fromBufferAttribute(n,l),o_.fromBufferAttribute(n,c),u.uv=Fh.getInterpolation(a_,Cm,Am,Nm,n_,s_,o_,new qe)),s&&(n_.fromBufferAttribute(s,a),s_.fromBufferAttribute(s,l),o_.fromBufferAttribute(s,c),u.uv1=Fh.getInterpolation(a_,Cm,Am,Nm,n_,s_,o_,new qe),u.uv2=u.uv1),o&&($8.fromBufferAttribute(o,a),X8.fromBufferAttribute(o,l),q8.fromBufferAttribute(o,c),u.normal=Fh.getInterpolation(a_,Cm,Am,Nm,$8,X8,q8,new oe),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const d={a,b:l,c,normal:new oe,materialIndex:0};Fh.getNormal(Cm,Am,Nm,d.normal),u.face=d}return u}let vi=class rK extends sr{constructor(e=1,t=1,i=1,n=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:s,depthSegments:o};const a=this;n=Math.floor(n),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,p=0;f("z","y","x",-1,-1,i,t,e,o,s,0),f("z","y","x",1,-1,i,t,-e,o,s,1),f("x","z","y",1,1,e,i,t,n,o,2),f("x","z","y",1,-1,e,i,-t,n,o,3),f("x","y","z",1,-1,e,t,i,n,s,4),f("x","y","z",-1,-1,e,t,-i,n,s,5),this.setIndex(l),this.setAttribute("position",new Rt(c,3)),this.setAttribute("normal",new Rt(u,3)),this.setAttribute("uv",new Rt(d,2));function f(m,g,v,x,b,w,_,S,T,M,E){const C=w/T,P=_/M,A=w/2,N=_/2,R=S/2,F=T+1,B=M+1;let k=0,z=0;const O=new oe;for(let V=0;V<B;V++){const U=V*P-N;for(let G=0;G<F;G++){const X=G*C-A;O[m]=X*x,O[g]=U*b,O[v]=R,c.push(O.x,O.y,O.z),O[m]=0,O[g]=0,O[v]=S>0?1:-1,u.push(O.x,O.y,O.z),d.push(G/T),d.push(1-V/M),k+=1}}for(let V=0;V<M;V++)for(let U=0;U<T;U++){const G=h+U+F*V,X=h+U+F*(V+1),ie=h+(U+1)+F*(V+1),se=h+(U+1)+F*V;l.push(G,X,se),l.push(X,ie,se),z+=6}a.addGroup(p,z,E),p+=z,h+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rK(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Rm(r){const e={};for(const t in r){e[t]={};for(const i in r[t]){const n=r[t][i];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?n.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=n.clone():Array.isArray(n)?e[t][i]=n.slice():e[t][i]=n}}return e}function Os(r){const e={};for(let t=0;t<r.length;t++){const i=Rm(r[t]);for(const n in i)e[n]=i[n]}return e}function SLe(r){const e=[];for(let t=0;t<r.length;t++)e.push(r[t].clone());return e}function K8(r){return r.getRenderTarget()===null?r.outputColorSpace:Hr.workingColorSpace}const Lo={clone:Rm,merge:Os};var TLe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,MLe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ii extends Wr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=TLe,this.fragmentShader=MLe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Rm(e.uniforms),this.uniformsGroups=SLe(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const s=this.uniforms[n].value;s&&s.isTexture?t.uniforms[n]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[n]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[n]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[n]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[n]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[n]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[n]={type:"m4",value:s.toArray()}:t.uniforms[n]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const n in this.extensions)this.extensions[n]===!0&&(i[n]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class _c extends nr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new St,this.projectionMatrix=new St,this.projectionMatrixInverse=new St,this.coordinateSystem=ua}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Yr extends _c{constructor(e=50,t=1,i=.1,n=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=n,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=fm*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ph*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return fm*2*Math.atan(Math.tan(Ph*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,n,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ph*.5*this.fov)/this.zoom,i=2*t,n=this.aspect*i,s=-.5*n;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*n/l,t-=o.offsetY*i/c,n*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+n,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const km=-90,Lm=1;class u_ extends nr{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const n=new Yr(km,Lm,e,t);n.layers=this.layers,this.add(n);const s=new Yr(km,Lm,e,t);s.layers=this.layers,this.add(s);const o=new Yr(km,Lm,e,t);o.layers=this.layers,this.add(o);const a=new Yr(km,Lm,e,t);a.layers=this.layers,this.add(a);const l=new Yr(km,Lm,e,t);l.layers=this.layers,this.add(l);const c=new Yr(km,Lm,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,n,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===ua)i.up.set(0,1,0),i.lookAt(1,0,0),n.up.set(0,1,0),n.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Oh)i.up.set(0,-1,0),i.lookAt(-1,0,0),n.up.set(0,-1,0),n.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:n}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,d=e.getRenderTarget(),h=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),f=e.xr.enabled;e.xr.enabled=!1;const m=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,n),e.render(t,s),e.setRenderTarget(i,1,n),e.render(t,o),e.setRenderTarget(i,2,n),e.render(t,a),e.setRenderTarget(i,3,n),e.render(t,l),e.setRenderTarget(i,4,n),e.render(t,c),i.texture.generateMipmaps=m,e.setRenderTarget(i,5,n),e.render(t,u),e.setRenderTarget(d,h,p),e.xr.enabled=f,i.texture.needsPMREMUpdate=!0}}class Sc extends Nr{constructor(e,t,i,n,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Co,super(e,t,i,n,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class bN extends Ui{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},n=[i,i,i,i,i,i];t.encoding!==void 0&&(gy("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===Ol?Lt:kn),this.texture=new Sc(n,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Or}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},n=new vi(5,5,5),s=new ii({name:"CubemapFromEquirect",uniforms:Rm(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Oi,blending:Xn});s.uniforms.tEquirect.value=t;const o=new mt(n,s),a=t.minFilter;return t.minFilter===qn&&(t.minFilter=Or),new u_(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,n){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,n);e.setRenderTarget(s)}}const xN=new oe,ELe=new oe,CLe=new hr;let pa=class{constructor(r=new oe(1,0,0),e=0){this.isPlane=!0,this.normal=r,this.constant=e}set(r,e){return this.normal.copy(r),this.constant=e,this}setComponents(r,e,t,i){return this.normal.set(r,e,t),this.constant=i,this}setFromNormalAndCoplanarPoint(r,e){return this.normal.copy(r),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(r,e,t){const i=xN.subVectors(t,e).cross(ELe.subVectors(r,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,r),this}copy(r){return this.normal.copy(r.normal),this.constant=r.constant,this}normalize(){const r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(r){return this.normal.dot(r)+this.constant}distanceToSphere(r){return this.distanceToPoint(r.center)-r.radius}projectPoint(r,e){return e.copy(r).addScaledVector(this.normal,-this.distanceToPoint(r))}intersectLine(r,e){const t=r.delta(xN),i=this.normal.dot(t);if(i===0)return this.distanceToPoint(r.start)===0?e.copy(r.start):null;const n=-(r.start.dot(this.normal)+this.constant)/i;return n<0||n>1?null:e.copy(r.start).addScaledVector(t,n)}intersectsLine(r){const e=this.distanceToPoint(r.start),t=this.distanceToPoint(r.end);return e<0&&t>0||t<0&&e>0}intersectsBox(r){return r.intersectsPlane(this)}intersectsSphere(r){return r.intersectsPlane(this)}coplanarPoint(r){return r.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(r,e){const t=e||CLe.getNormalMatrix(r),i=this.coplanarPoint(xN).applyMatrix4(r),n=this.normal.applyMatrix3(t).normalize();return this.constant=-i.dot(n),this}translate(r){return this.constant-=r.dot(this.normal),this}equals(r){return r.normal.equals(this.normal)&&r.constant===this.constant}clone(){return new this.constructor().copy(this)}};const zh=new Ls,d_=new oe;class Ey{constructor(e=new pa,t=new pa,i=new pa,n=new pa,s=new pa,o=new pa){this.planes=[e,t,i,n,s,o]}set(e,t,i,n,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(n),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ua){const i=this.planes,n=e.elements,s=n[0],o=n[1],a=n[2],l=n[3],c=n[4],u=n[5],d=n[6],h=n[7],p=n[8],f=n[9],m=n[10],g=n[11],v=n[12],x=n[13],b=n[14],w=n[15];if(i[0].setComponents(l-s,h-c,g-p,w-v).normalize(),i[1].setComponents(l+s,h+c,g+p,w+v).normalize(),i[2].setComponents(l+o,h+u,g+f,w+x).normalize(),i[3].setComponents(l-o,h-u,g-f,w-x).normalize(),i[4].setComponents(l-a,h-d,g-m,w-b).normalize(),t===ua)i[5].setComponents(l+a,h+d,g+m,w+b).normalize();else if(t===Oh)i[5].setComponents(a,d,m,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),zh.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),zh.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(zh)}intersectsSprite(e){return zh.center.set(0,0,0),zh.radius=.7071067811865476,zh.applyMatrix4(e.matrixWorld),this.intersectsSphere(zh)}intersectsSphere(e){const t=this.planes,i=e.center,n=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<n)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const n=t[i];if(d_.x=n.normal.x>0?e.max.x:e.min.x,d_.y=n.normal.y>0?e.max.y:e.min.y,d_.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(d_)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Y8(){let r=null,e=!1,t=null,i=null;function n(s,o){t(s,o),i=r.requestAnimationFrame(n)}return{start:function(){e!==!0&&t!==null&&(i=r.requestAnimationFrame(n),e=!0)},stop:function(){r.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){r=s}}}function ALe(r,e){const t=e.isWebGL2,i=new WeakMap;function n(c,u){const d=c.array,h=c.usage,p=r.createBuffer();r.bindBuffer(u,p),r.bufferData(u,d,h),c.onUploadCallback();let f;if(d instanceof Float32Array)f=r.FLOAT;else if(d instanceof Uint16Array)if(c.isFloat16BufferAttribute)if(t)f=r.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else f=r.UNSIGNED_SHORT;else if(d instanceof Int16Array)f=r.SHORT;else if(d instanceof Uint32Array)f=r.UNSIGNED_INT;else if(d instanceof Int32Array)f=r.INT;else if(d instanceof Int8Array)f=r.BYTE;else if(d instanceof Uint8Array)f=r.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)f=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:p,type:f,bytesPerElement:d.BYTES_PER_ELEMENT,version:c.version}}function s(c,u,d){const h=u.array,p=u.updateRange;r.bindBuffer(d,c),p.count===-1?r.bufferSubData(d,0,h):(t?r.bufferSubData(d,p.offset*h.BYTES_PER_ELEMENT,h,p.offset,p.count):r.bufferSubData(d,p.offset*h.BYTES_PER_ELEMENT,h.subarray(p.offset,p.offset+p.count)),p.count=-1),u.onUploadCallback()}function o(c){return c.isInterleavedBufferAttribute&&(c=c.data),i.get(c)}function a(c){c.isInterleavedBufferAttribute&&(c=c.data);const u=i.get(c);u&&(r.deleteBuffer(u.buffer),i.delete(c))}function l(c,u){if(c.isGLBufferAttribute){const h=i.get(c);(!h||h.version<c.version)&&i.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}c.isInterleavedBufferAttribute&&(c=c.data);const d=i.get(c);d===void 0?i.set(c,n(c,u)):d.version<c.version&&(s(d.buffer,c,u),d.version=c.version)}return{get:o,remove:a,update:l}}let Xa=class iK extends sr{constructor(e=1,t=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(n),c=a+1,u=l+1,d=e/a,h=t/l,p=[],f=[],m=[],g=[];for(let v=0;v<u;v++){const x=v*h-o;for(let b=0;b<c;b++){const w=b*d-s;f.push(w,-x,0),m.push(0,0,1),g.push(b/a),g.push(1-v/l)}}for(let v=0;v<l;v++)for(let x=0;x<a;x++){const b=x+c*v,w=x+c*(v+1),_=x+1+c*(v+1),S=x+1+c*v;p.push(b,w,S),p.push(w,_,S)}this.setIndex(p),this.setAttribute("position",new Rt(f,3)),this.setAttribute("normal",new Rt(m,3)),this.setAttribute("uv",new Rt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iK(e.width,e.height,e.widthSegments,e.heightSegments)}};var NLe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,RLe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,kLe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,LLe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,OLe=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,PLe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ILe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,DLe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ULe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,FLe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,BLe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,zLe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,VLe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,GLe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,jLe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,HLe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,WLe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,$Le=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,XLe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,qLe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,KLe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,YLe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,ZLe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,JLe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,QLe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,eOe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,tOe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,rOe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,iOe="gl_FragColor = linearToOutputTexel( gl_FragColor );",nOe=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,sOe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,oOe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,aOe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,lOe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,cOe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,uOe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,dOe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,hOe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,pOe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,fOe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,mOe=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,gOe=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,vOe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,yOe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,bOe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,xOe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,wOe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,_Oe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,SOe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,TOe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,MOe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,EOe=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,COe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal;
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,AOe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,NOe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,ROe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,kOe=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,LOe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,OOe=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,POe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,IOe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,DOe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,UOe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,FOe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,BOe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zOe=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,VOe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,GOe=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,jOe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,HOe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,WOe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,$Oe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,XOe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qOe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,KOe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,YOe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,ZOe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,JOe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,QOe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,ePe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,tPe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,rPe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,iPe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,nPe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,sPe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,oPe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,aPe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,lPe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,cPe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,uPe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,dPe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,hPe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,pPe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,fPe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,mPe=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,gPe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,vPe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,yPe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,bPe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,xPe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,wPe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,_Pe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,SPe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,TPe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,MPe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const EPe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,CPe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,APe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,NPe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,RPe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kPe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LPe=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,OPe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,PPe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,IPe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,DPe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,UPe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,FPe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,BPe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,zPe=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,VPe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GPe=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jPe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HPe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,WPe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$Pe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,XPe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,qPe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KPe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YPe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,ZPe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JPe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,QPe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eIe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,tIe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rIe=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iIe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,nIe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sIe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,yr={alphahash_fragment:NLe,alphahash_pars_fragment:RLe,alphamap_fragment:kLe,alphamap_pars_fragment:LLe,alphatest_fragment:OLe,alphatest_pars_fragment:PLe,aomap_fragment:ILe,aomap_pars_fragment:DLe,begin_vertex:ULe,beginnormal_vertex:FLe,bsdfs:BLe,iridescence_fragment:zLe,bumpmap_pars_fragment:VLe,clipping_planes_fragment:GLe,clipping_planes_pars_fragment:jLe,clipping_planes_pars_vertex:HLe,clipping_planes_vertex:WLe,color_fragment:$Le,color_pars_fragment:XLe,color_pars_vertex:qLe,color_vertex:KLe,common:YLe,cube_uv_reflection_fragment:ZLe,defaultnormal_vertex:JLe,displacementmap_pars_vertex:QLe,displacementmap_vertex:eOe,emissivemap_fragment:tOe,emissivemap_pars_fragment:rOe,colorspace_fragment:iOe,colorspace_pars_fragment:nOe,envmap_fragment:sOe,envmap_common_pars_fragment:oOe,envmap_pars_fragment:aOe,envmap_pars_vertex:lOe,envmap_physical_pars_fragment:xOe,envmap_vertex:cOe,fog_vertex:uOe,fog_pars_vertex:dOe,fog_fragment:hOe,fog_pars_fragment:pOe,gradientmap_pars_fragment:fOe,lightmap_fragment:mOe,lightmap_pars_fragment:gOe,lights_lambert_fragment:vOe,lights_lambert_pars_fragment:yOe,lights_pars_begin:bOe,lights_toon_fragment:wOe,lights_toon_pars_fragment:_Oe,lights_phong_fragment:SOe,lights_phong_pars_fragment:TOe,lights_physical_fragment:MOe,lights_physical_pars_fragment:EOe,lights_fragment_begin:COe,lights_fragment_maps:AOe,lights_fragment_end:NOe,logdepthbuf_fragment:ROe,logdepthbuf_pars_fragment:kOe,logdepthbuf_pars_vertex:LOe,logdepthbuf_vertex:OOe,map_fragment:POe,map_pars_fragment:IOe,map_particle_fragment:DOe,map_particle_pars_fragment:UOe,metalnessmap_fragment:FOe,metalnessmap_pars_fragment:BOe,morphcolor_vertex:zOe,morphnormal_vertex:VOe,morphtarget_pars_vertex:GOe,morphtarget_vertex:jOe,normal_fragment_begin:HOe,normal_fragment_maps:WOe,normal_pars_fragment:$Oe,normal_pars_vertex:XOe,normal_vertex:qOe,normalmap_pars_fragment:KOe,clearcoat_normal_fragment_begin:YOe,clearcoat_normal_fragment_maps:ZOe,clearcoat_pars_fragment:JOe,iridescence_pars_fragment:QOe,opaque_fragment:ePe,packing:tPe,premultiplied_alpha_fragment:rPe,project_vertex:iPe,dithering_fragment:nPe,dithering_pars_fragment:sPe,roughnessmap_fragment:oPe,roughnessmap_pars_fragment:aPe,shadowmap_pars_fragment:lPe,shadowmap_pars_vertex:cPe,shadowmap_vertex:uPe,shadowmask_pars_fragment:dPe,skinbase_vertex:hPe,skinning_pars_vertex:pPe,skinning_vertex:fPe,skinnormal_vertex:mPe,specularmap_fragment:gPe,specularmap_pars_fragment:vPe,tonemapping_fragment:yPe,tonemapping_pars_fragment:bPe,transmission_fragment:xPe,transmission_pars_fragment:wPe,uv_pars_fragment:_Pe,uv_pars_vertex:SPe,uv_vertex:TPe,worldpos_vertex:MPe,background_vert:EPe,background_frag:CPe,backgroundCube_vert:APe,backgroundCube_frag:NPe,cube_vert:RPe,cube_frag:kPe,depth_vert:LPe,depth_frag:OPe,distanceRGBA_vert:PPe,distanceRGBA_frag:IPe,equirect_vert:DPe,equirect_frag:UPe,linedashed_vert:FPe,linedashed_frag:BPe,meshbasic_vert:zPe,meshbasic_frag:VPe,meshlambert_vert:GPe,meshlambert_frag:jPe,meshmatcap_vert:HPe,meshmatcap_frag:WPe,meshnormal_vert:$Pe,meshnormal_frag:XPe,meshphong_vert:qPe,meshphong_frag:KPe,meshphysical_vert:YPe,meshphysical_frag:ZPe,meshtoon_vert:JPe,meshtoon_frag:QPe,points_vert:eIe,points_frag:tIe,shadow_vert:rIe,shadow_frag:iIe,sprite_vert:nIe,sprite_frag:sIe},At={common:{diffuse:{value:new at(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new hr},alphaMap:{value:null},alphaMapTransform:{value:new hr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new hr}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new hr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new hr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new hr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new hr},normalScale:{value:new qe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new hr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new hr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new hr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new hr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new at(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new at(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new hr},alphaTest:{value:0},uvTransform:{value:new hr}},sprite:{diffuse:{value:new at(16777215)},opacity:{value:1},center:{value:new qe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new hr},alphaMap:{value:null},alphaMapTransform:{value:new hr},alphaTest:{value:0}}},qi={basic:{uniforms:Os([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.fog]),vertexShader:yr.meshbasic_vert,fragmentShader:yr.meshbasic_frag},lambert:{uniforms:Os([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new at(0)}}]),vertexShader:yr.meshlambert_vert,fragmentShader:yr.meshlambert_frag},phong:{uniforms:Os([At.common,At.specularmap,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.fog,At.lights,{emissive:{value:new at(0)},specular:{value:new at(1118481)},shininess:{value:30}}]),vertexShader:yr.meshphong_vert,fragmentShader:yr.meshphong_frag},standard:{uniforms:Os([At.common,At.envmap,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.roughnessmap,At.metalnessmap,At.fog,At.lights,{emissive:{value:new at(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yr.meshphysical_vert,fragmentShader:yr.meshphysical_frag},toon:{uniforms:Os([At.common,At.aomap,At.lightmap,At.emissivemap,At.bumpmap,At.normalmap,At.displacementmap,At.gradientmap,At.fog,At.lights,{emissive:{value:new at(0)}}]),vertexShader:yr.meshtoon_vert,fragmentShader:yr.meshtoon_frag},matcap:{uniforms:Os([At.common,At.bumpmap,At.normalmap,At.displacementmap,At.fog,{matcap:{value:null}}]),vertexShader:yr.meshmatcap_vert,fragmentShader:yr.meshmatcap_frag},points:{uniforms:Os([At.points,At.fog]),vertexShader:yr.points_vert,fragmentShader:yr.points_frag},dashed:{uniforms:Os([At.common,At.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yr.linedashed_vert,fragmentShader:yr.linedashed_frag},depth:{uniforms:Os([At.common,At.displacementmap]),vertexShader:yr.depth_vert,fragmentShader:yr.depth_frag},normal:{uniforms:Os([At.common,At.bumpmap,At.normalmap,At.displacementmap,{opacity:{value:1}}]),vertexShader:yr.meshnormal_vert,fragmentShader:yr.meshnormal_frag},sprite:{uniforms:Os([At.sprite,At.fog]),vertexShader:yr.sprite_vert,fragmentShader:yr.sprite_frag},background:{uniforms:{uvTransform:{value:new hr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:yr.background_vert,fragmentShader:yr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:yr.backgroundCube_vert,fragmentShader:yr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:yr.cube_vert,fragmentShader:yr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yr.equirect_vert,fragmentShader:yr.equirect_frag},distanceRGBA:{uniforms:Os([At.common,At.displacementmap,{referencePosition:{value:new oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yr.distanceRGBA_vert,fragmentShader:yr.distanceRGBA_frag},shadow:{uniforms:Os([At.lights,At.fog,{color:{value:new at(0)},opacity:{value:1}}]),vertexShader:yr.shadow_vert,fragmentShader:yr.shadow_frag}};qi.physical={uniforms:Os([qi.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new hr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new hr},clearcoatNormalScale:{value:new qe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new hr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new hr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new hr},sheen:{value:0},sheenColor:{value:new at(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new hr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new hr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new hr},transmissionSamplerSize:{value:new qe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new hr},attenuationDistance:{value:0},attenuationColor:{value:new at(0)},specularColor:{value:new at(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new hr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new hr},anisotropyVector:{value:new qe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new hr}}]),vertexShader:yr.meshphysical_vert,fragmentShader:yr.meshphysical_frag};const h_={r:0,b:0,g:0};function oIe(r,e,t,i,n,s,o){const a=new at(0);let l=s===!0?0:1,c,u,d=null,h=0,p=null;function f(g,v){let x=!1,b=v.isScene===!0?v.background:null;b&&b.isTexture&&(b=(v.backgroundBlurriness>0?t:e).get(b)),b===null?m(a,l):b&&b.isColor&&(m(b,1),x=!0);const w=r.xr.getEnvironmentBlendMode();w==="additive"?i.buffers.color.setClear(0,0,0,1,o):w==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(r.autoClear||x)&&r.clear(r.autoClearColor,r.autoClearDepth,r.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Nu)?(u===void 0&&(u=new mt(new vi(1,1,1),new ii({name:"BackgroundCubeMaterial",uniforms:Rm(qi.backgroundCube.uniforms),vertexShader:qi.backgroundCube.vertexShader,fragmentShader:qi.backgroundCube.fragmentShader,side:Oi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(_,S,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(u)),u.material.uniforms.envMap.value=b,u.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=Hr.getTransfer(b.colorSpace)!==ci,(d!==b||h!==b.version||p!==r.toneMapping)&&(u.material.needsUpdate=!0,d=b,h=b.version,p=r.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null)):b&&b.isTexture&&(c===void 0&&(c=new mt(new Xa(2,2),new ii({name:"BackgroundMaterial",uniforms:Rm(qi.background.uniforms),vertexShader:qi.background.vertexShader,fragmentShader:qi.background.fragmentShader,side:eo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(c)),c.material.uniforms.t2D.value=b,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=Hr.getTransfer(b.colorSpace)!==ci,b.matrixAutoUpdate===!0&&b.updateMatrix(),c.material.uniforms.uvTransform.value.copy(b.matrix),(d!==b||h!==b.version||p!==r.toneMapping)&&(c.material.needsUpdate=!0,d=b,h=b.version,p=r.toneMapping),c.layers.enableAll(),g.unshift(c,c.geometry,c.material,0,0,null))}function m(g,v){g.getRGB(h_,K8(r)),i.buffers.color.setClear(h_.r,h_.g,h_.b,v,o)}return{getClearColor:function(){return a},setClearColor:function(g,v=1){a.set(g),l=v,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(g){l=g,m(a,l)},render:f}}function aIe(r,e,t,i){const n=r.getParameter(r.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),o=i.isWebGL2||s!==null,a={},l=g(null);let c=l,u=!1;function d(R,F,B,k,z){let O=!1;if(o){const V=m(k,B,F);c!==V&&(c=V,p(c.object)),O=v(R,k,B,z),O&&x(R,k,B,z)}else{const V=F.wireframe===!0;(c.geometry!==k.id||c.program!==B.id||c.wireframe!==V)&&(c.geometry=k.id,c.program=B.id,c.wireframe=V,O=!0)}z!==null&&t.update(z,r.ELEMENT_ARRAY_BUFFER),(O||u)&&(u=!1,M(R,F,B,k),z!==null&&r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,t.get(z).buffer))}function h(){return i.isWebGL2?r.createVertexArray():s.createVertexArrayOES()}function p(R){return i.isWebGL2?r.bindVertexArray(R):s.bindVertexArrayOES(R)}function f(R){return i.isWebGL2?r.deleteVertexArray(R):s.deleteVertexArrayOES(R)}function m(R,F,B){const k=B.wireframe===!0;let z=a[R.id];z===void 0&&(z={},a[R.id]=z);let O=z[F.id];O===void 0&&(O={},z[F.id]=O);let V=O[k];return V===void 0&&(V=g(h()),O[k]=V),V}function g(R){const F=[],B=[],k=[];for(let z=0;z<n;z++)F[z]=0,B[z]=0,k[z]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:F,enabledAttributes:B,attributeDivisors:k,object:R,attributes:{},index:null}}function v(R,F,B,k){const z=c.attributes,O=F.attributes;let V=0;const U=B.getAttributes();for(const G in U)if(U[G].location>=0){const X=z[G];let ie=O[G];if(ie===void 0&&(G==="instanceMatrix"&&R.instanceMatrix&&(ie=R.instanceMatrix),G==="instanceColor"&&R.instanceColor&&(ie=R.instanceColor)),X===void 0||X.attribute!==ie||ie&&X.data!==ie.data)return!0;V++}return c.attributesNum!==V||c.index!==k}function x(R,F,B,k){const z={},O=F.attributes;let V=0;const U=B.getAttributes();for(const G in U)if(U[G].location>=0){let X=O[G];X===void 0&&(G==="instanceMatrix"&&R.instanceMatrix&&(X=R.instanceMatrix),G==="instanceColor"&&R.instanceColor&&(X=R.instanceColor));const ie={};ie.attribute=X,X&&X.data&&(ie.data=X.data),z[G]=ie,V++}c.attributes=z,c.attributesNum=V,c.index=k}function b(){const R=c.newAttributes;for(let F=0,B=R.length;F<B;F++)R[F]=0}function w(R){_(R,0)}function _(R,F){const B=c.newAttributes,k=c.enabledAttributes,z=c.attributeDivisors;B[R]=1,k[R]===0&&(r.enableVertexAttribArray(R),k[R]=1),z[R]!==F&&((i.isWebGL2?r:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](R,F),z[R]=F)}function S(){const R=c.newAttributes,F=c.enabledAttributes;for(let B=0,k=F.length;B<k;B++)F[B]!==R[B]&&(r.disableVertexAttribArray(B),F[B]=0)}function T(R,F,B,k,z,O,V){V===!0?r.vertexAttribIPointer(R,F,B,z,O):r.vertexAttribPointer(R,F,B,k,z,O)}function M(R,F,B,k){if(i.isWebGL2===!1&&(R.isInstancedMesh||k.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const z=k.attributes,O=B.getAttributes(),V=F.defaultAttributeValues;for(const U in O){const G=O[U];if(G.location>=0){let X=z[U];if(X===void 0&&(U==="instanceMatrix"&&R.instanceMatrix&&(X=R.instanceMatrix),U==="instanceColor"&&R.instanceColor&&(X=R.instanceColor)),X!==void 0){const ie=X.normalized,se=X.itemSize,de=t.get(X);if(de===void 0)continue;const K=de.buffer,q=de.type,ce=de.bytesPerElement,Te=i.isWebGL2===!0&&(q===r.INT||q===r.UNSIGNED_INT||X.gpuType===W0);if(X.isInterleavedBufferAttribute){const Z=X.data,L=Z.stride,$=X.offset;if(Z.isInstancedInterleavedBuffer){for(let re=0;re<G.locationSize;re++)_(G.location+re,Z.meshPerAttribute);R.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let re=0;re<G.locationSize;re++)w(G.location+re);r.bindBuffer(r.ARRAY_BUFFER,K);for(let re=0;re<G.locationSize;re++)T(G.location+re,se/G.locationSize,q,ie,L*ce,($+se/G.locationSize*re)*ce,Te)}else{if(X.isInstancedBufferAttribute){for(let Z=0;Z<G.locationSize;Z++)_(G.location+Z,X.meshPerAttribute);R.isInstancedMesh!==!0&&k._maxInstanceCount===void 0&&(k._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let Z=0;Z<G.locationSize;Z++)w(G.location+Z);r.bindBuffer(r.ARRAY_BUFFER,K);for(let Z=0;Z<G.locationSize;Z++)T(G.location+Z,se/G.locationSize,q,ie,se*ce,se/G.locationSize*Z*ce,Te)}}else if(V!==void 0){const ie=V[U];if(ie!==void 0)switch(ie.length){case 2:r.vertexAttrib2fv(G.location,ie);break;case 3:r.vertexAttrib3fv(G.location,ie);break;case 4:r.vertexAttrib4fv(G.location,ie);break;default:r.vertexAttrib1fv(G.location,ie)}}}}S()}function E(){A();for(const R in a){const F=a[R];for(const B in F){const k=F[B];for(const z in k)f(k[z].object),delete k[z];delete F[B]}delete a[R]}}function C(R){if(a[R.id]===void 0)return;const F=a[R.id];for(const B in F){const k=F[B];for(const z in k)f(k[z].object),delete k[z];delete F[B]}delete a[R.id]}function P(R){for(const F in a){const B=a[F];if(B[R.id]===void 0)continue;const k=B[R.id];for(const z in k)f(k[z].object),delete k[z];delete B[R.id]}}function A(){N(),u=!0,c!==l&&(c=l,p(c.object))}function N(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:d,reset:A,resetDefaultState:N,dispose:E,releaseStatesOfGeometry:C,releaseStatesOfProgram:P,initAttributes:b,enableAttribute:w,disableUnusedAttributes:S}}function lIe(r,e,t,i){const n=i.isWebGL2;let s;function o(c){s=c}function a(c,u){r.drawArrays(s,c,u),t.update(u,s,1)}function l(c,u,d){if(d===0)return;let h,p;if(n)h=r,p="drawArraysInstanced";else if(h=e.get("ANGLE_instanced_arrays"),p="drawArraysInstancedANGLE",h===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}h[p](s,c,u,d),t.update(u,s,d)}this.setMode=o,this.render=a,this.renderInstances=l}function cIe(r,e,t){let i;function n(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const T=e.get("EXT_texture_filter_anisotropic");i=r.getParameter(T.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(T){if(T==="highp"){if(r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision>0)return"highp";T="mediump"}return T==="mediump"&&r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision>0&&r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&r.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const c=o||e.has("WEBGL_draw_buffers"),u=t.logarithmicDepthBuffer===!0,d=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),h=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),p=r.getParameter(r.MAX_TEXTURE_SIZE),f=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),m=r.getParameter(r.MAX_VERTEX_ATTRIBS),g=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),v=r.getParameter(r.MAX_VARYING_VECTORS),x=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),b=h>0,w=o||e.has("OES_texture_float"),_=b&&w,S=o?r.getParameter(r.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:c,getMaxAnisotropy:n,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:u,maxTextures:d,maxVertexTextures:h,maxTextureSize:p,maxCubemapSize:f,maxAttributes:m,maxVertexUniforms:g,maxVaryings:v,maxFragmentUniforms:x,vertexTextures:b,floatFragmentTextures:w,floatVertexTextures:_,maxSamples:S}}function uIe(r){const e=this;let t=null,i=0,n=!1,s=!1;const o=new pa,a=new hr,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(d,h){const p=d.length!==0||h||i!==0||n;return n=h,i=d.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,h){t=u(d,h,0)},this.setState=function(d,h,p){const f=d.clippingPlanes,m=d.clipIntersection,g=d.clipShadows,v=r.get(d);if(!n||f===null||f.length===0||s&&!g)s?u(null):c();else{const x=s?0:i,b=x*4;let w=v.clippingState||null;l.value=w,w=u(f,h,b,p);for(let _=0;_!==b;++_)w[_]=t[_];v.clippingState=w,this.numIntersection=m?this.numPlanes:0,this.numPlanes+=x}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(d,h,p,f){const m=d!==null?d.length:0;let g=null;if(m!==0){if(g=l.value,f!==!0||g===null){const v=p+m*4,x=h.matrixWorldInverse;a.getNormalMatrix(x),(g===null||g.length<v)&&(g=new Float32Array(v));for(let b=0,w=p;b!==m;++b,w+=4)o.copy(d[b]).applyMatrix4(x,a),o.normal.toArray(g,w),g[w+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=m,e.numIntersection=0,g}}function dIe(r){let e=new WeakMap;function t(o,a){return a===ja?o.mapping=Co:a===Rl&&(o.mapping=la),o}function i(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===ja||a===Rl)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new bN(l.height/2);return c.fromEquirectangularTexture(r,o),e.set(o,c),o.addEventListener("dispose",n),t(c.texture,o.mapping)}else return null}}return o}function n(o){const a=o.target;a.removeEventListener("dispose",n);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class fa extends _c{constructor(e=-1,t=1,i=1,n=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,n,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=n+t,l=n-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Om=4,Z8=[.125,.215,.35,.446,.526,.582],Vh=20,wN=new fa,J8=new at;let _N=null;const Gh=(1+Math.sqrt(5))/2,Pm=1/Gh,Q8=[new oe(1,1,1),new oe(-1,1,1),new oe(1,1,-1),new oe(-1,1,-1),new oe(0,Gh,Pm),new oe(0,Gh,-Pm),new oe(Pm,0,Gh),new oe(-Pm,0,Gh),new oe(Gh,Pm,0),new oe(-Gh,Pm,0)];class p_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,n=100){_N=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,n,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=rV(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=tV(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(_N),e.scissorTest=!1,f_(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Co||e.mapping===la?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),_N=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Or,minFilter:Or,generateMipmaps:!1,type:gi,format:Rn,colorSpace:li,depthBuffer:!1},n=eV(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=eV(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=hIe(s)),this._blurMaterial=pIe(s,e,t)}return n}_compileMaterial(e){const t=new mt(this._lodPlanes[0],e);this._renderer.compile(t,wN)}_sceneToCubeUV(e,t,i,n){const s=new Yr(90,1,t,i),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],l=this._renderer,c=l.autoClear,u=l.toneMapping;l.getClearColor(J8),l.toneMapping=ro,l.autoClear=!1;const d=new Ei({name:"PMREM.Background",side:Oi,depthWrite:!1,depthTest:!1}),h=new mt(new vi,d);let p=!1;const f=e.background;f?f.isColor&&(d.color.copy(f),e.background=null,p=!0):(d.color.copy(J8),p=!0);for(let m=0;m<6;m++){const g=m%3;g===0?(s.up.set(0,o[m],0),s.lookAt(a[m],0,0)):g===1?(s.up.set(0,0,o[m]),s.lookAt(0,a[m],0)):(s.up.set(0,o[m],0),s.lookAt(0,0,a[m]));const v=this._cubeSize;f_(n,g*v,m>2?v:0,v,v),l.setRenderTarget(n),p&&l.render(h,s),l.render(e,s)}h.geometry.dispose(),h.material.dispose(),l.toneMapping=u,l.autoClear=c,e.background=f}_textureToCubeUV(e,t){const i=this._renderer,n=e.mapping===Co||e.mapping===la;n?(this._cubemapMaterial===null&&(this._cubemapMaterial=rV()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=tV());const s=n?this._cubemapMaterial:this._equirectMaterial,o=new mt(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;f_(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,wN)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let n=1;n<this._lodPlanes.length;n++){const s=Math.sqrt(this._sigmas[n]*this._sigmas[n]-this._sigmas[n-1]*this._sigmas[n-1]),o=Q8[(n-1)%Q8.length];this._blur(e,n-1,n,s,o)}t.autoClear=i}_blur(e,t,i,n,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,n,"latitudinal",s),this._halfBlur(o,e,i,i,n,"longitudinal",s)}_halfBlur(e,t,i,n,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,d=new mt(this._lodPlanes[n],c),h=c.uniforms,p=this._sizeLods[i]-1,f=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Vh-1),m=s/f,g=isFinite(s)?1+Math.floor(u*m):Vh;g>Vh&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Vh}`);const v=[];let x=0;for(let T=0;T<Vh;++T){const M=T/m,E=Math.exp(-M*M/2);v.push(E),T===0?x+=E:T<g&&(x+=2*E)}for(let T=0;T<v.length;T++)v[T]=v[T]/x;h.envMap.value=e.texture,h.samples.value=g,h.weights.value=v,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:b}=this;h.dTheta.value=f,h.mipInt.value=b-i;const w=this._sizeLods[n],_=3*w*(n>b-Om?n-b+Om:0),S=4*(this._cubeSize-w);f_(t,_,S,3*w,2*w),l.setRenderTarget(t),l.render(d,wN)}}function hIe(r){const e=[],t=[],i=[];let n=r;const s=r-Om+1+Z8.length;for(let o=0;o<s;o++){const a=Math.pow(2,n);t.push(a);let l=1/a;o>r-Om?l=Z8[o-r+Om-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,d=1+c,h=[u,u,d,u,d,d,u,u,d,d,u,d],p=6,f=6,m=3,g=2,v=1,x=new Float32Array(m*f*p),b=new Float32Array(g*f*p),w=new Float32Array(v*f*p);for(let S=0;S<p;S++){const T=S%3*2/3-1,M=S>2?0:-1,E=[T,M,0,T+2/3,M,0,T+2/3,M+1,0,T,M,0,T+2/3,M+1,0,T,M+1,0];x.set(E,m*f*S),b.set(h,g*f*S);const C=[S,S,S,S,S,S];w.set(C,v*f*S)}const _=new sr;_.setAttribute("position",new jr(x,m)),_.setAttribute("uv",new jr(b,g)),_.setAttribute("faceIndex",new jr(w,v)),e.push(_),n>Om&&n--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function eV(r,e,t){const i=new Ui(r,e,t);return i.texture.mapping=Nu,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function f_(r,e,t,i,n){r.viewport.set(e,t,i,n),r.scissor.set(e,t,i,n)}function pIe(r,e,t){const i=new Float32Array(Vh),n=new oe(0,1,0);return new ii({name:"SphericalGaussianBlur",defines:{n:Vh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${r}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n}},vertexShader:SN(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Xn,depthTest:!1,depthWrite:!1})}function tV(){return new ii({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:SN(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Xn,depthTest:!1,depthWrite:!1})}function rV(){return new ii({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:SN(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Xn,depthTest:!1,depthWrite:!1})}function SN(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function fIe(r){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===ja||l===Rl,u=l===Co||l===la;if(c||u)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let d=e.get(a);return t===null&&(t=new p_(r)),d=c?t.fromEquirectangular(a,d):t.fromCubemap(a,d),e.set(a,d),d.texture}else{if(e.has(a))return e.get(a).texture;{const d=a.image;if(c&&d&&d.height>0||u&&d&&n(d)){t===null&&(t=new p_(r));const h=c?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,h),a.addEventListener("dispose",s),h.texture}else return null}}}return a}function n(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function mIe(r){const e={};function t(i){if(e[i]!==void 0)return e[i];let n;switch(i){case"WEBGL_depth_texture":n=r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=r.getExtension(i)}return e[i]=n,n}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const n=t(i);return n===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),n}}}function gIe(r,e,t,i){const n={},s=new WeakMap;function o(d){const h=d.target;h.index!==null&&e.remove(h.index);for(const f in h.attributes)e.remove(h.attributes[f]);for(const f in h.morphAttributes){const m=h.morphAttributes[f];for(let g=0,v=m.length;g<v;g++)e.remove(m[g])}h.removeEventListener("dispose",o),delete n[h.id];const p=s.get(h);p&&(e.remove(p),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(d,h){return n[h.id]===!0||(h.addEventListener("dispose",o),n[h.id]=!0,t.memory.geometries++),h}function l(d){const h=d.attributes;for(const f in h)e.update(h[f],r.ARRAY_BUFFER);const p=d.morphAttributes;for(const f in p){const m=p[f];for(let g=0,v=m.length;g<v;g++)e.update(m[g],r.ARRAY_BUFFER)}}function c(d){const h=[],p=d.index,f=d.attributes.position;let m=0;if(p!==null){const x=p.array;m=p.version;for(let b=0,w=x.length;b<w;b+=3){const _=x[b+0],S=x[b+1],T=x[b+2];h.push(_,S,S,T,T,_)}}else if(f!==void 0){const x=f.array;m=f.version;for(let b=0,w=x.length/3-1;b<w;b+=3){const _=b+0,S=b+1,T=b+2;h.push(_,S,S,T,T,_)}}else return;const g=new(k8(h)?t_:Ty)(h,1);g.version=m;const v=s.get(d);v&&e.remove(v),s.set(d,g)}function u(d){const h=s.get(d);if(h){const p=d.index;p!==null&&h.version<p.version&&c(d)}else c(d);return s.get(d)}return{get:a,update:l,getWireframeAttribute:u}}function vIe(r,e,t,i){const n=i.isWebGL2;let s;function o(h){s=h}let a,l;function c(h){a=h.type,l=h.bytesPerElement}function u(h,p){r.drawElements(s,p,a,h*l),t.update(p,s,1)}function d(h,p,f){if(f===0)return;let m,g;if(n)m=r,g="drawElementsInstanced";else if(m=e.get("ANGLE_instanced_arrays"),g="drawElementsInstancedANGLE",m===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[g](s,p,a,h*l,f),t.update(p,s,f)}this.setMode=o,this.setIndex=c,this.render=u,this.renderInstances=d}function yIe(r){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case r.TRIANGLES:t.triangles+=a*(s/3);break;case r.LINES:t.lines+=a*(s/2);break;case r.LINE_STRIP:t.lines+=a*(s-1);break;case r.LINE_LOOP:t.lines+=a*s;break;case r.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function n(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:n,update:i}}function bIe(r,e){return r[0]-e[0]}function xIe(r,e){return Math.abs(e[1])-Math.abs(r[1])}function wIe(r,e,t){const i={},n=new Float32Array(8),s=new WeakMap,o=new jt,a=[];for(let c=0;c<8;c++)a[c]=[c,0];function l(c,u,d){const h=c.morphTargetInfluences;if(e.isWebGL2===!0){const p=u.morphAttributes.position||u.morphAttributes.normal||u.morphAttributes.color,f=p!==void 0?p.length:0;let m=s.get(u);if(m===void 0||m.count!==f){let x=function(){N.dispose(),s.delete(u),u.removeEventListener("dispose",x)};m!==void 0&&m.texture.dispose();const b=u.morphAttributes.position!==void 0,w=u.morphAttributes.normal!==void 0,_=u.morphAttributes.color!==void 0,S=u.morphAttributes.position||[],T=u.morphAttributes.normal||[],M=u.morphAttributes.color||[];let E=0;b===!0&&(E=1),w===!0&&(E=2),_===!0&&(E=3);let C=u.attributes.position.count*E,P=1;C>e.maxTextureSize&&(P=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const A=new Float32Array(C*P*4*f),N=new yy(A,C,P,f);N.type=mi,N.needsUpdate=!0;const R=E*4;for(let F=0;F<f;F++){const B=S[F],k=T[F],z=M[F],O=C*P*4*F;for(let V=0;V<B.count;V++){const U=V*R;b===!0&&(o.fromBufferAttribute(B,V),A[O+U+0]=o.x,A[O+U+1]=o.y,A[O+U+2]=o.z,A[O+U+3]=0),w===!0&&(o.fromBufferAttribute(k,V),A[O+U+4]=o.x,A[O+U+5]=o.y,A[O+U+6]=o.z,A[O+U+7]=0),_===!0&&(o.fromBufferAttribute(z,V),A[O+U+8]=o.x,A[O+U+9]=o.y,A[O+U+10]=o.z,A[O+U+11]=z.itemSize===4?o.w:1)}}m={count:f,texture:N,size:new qe(C,P)},s.set(u,m),u.addEventListener("dispose",x)}let g=0;for(let x=0;x<h.length;x++)g+=h[x];const v=u.morphTargetsRelative?1:1-g;d.getUniforms().setValue(r,"morphTargetBaseInfluence",v),d.getUniforms().setValue(r,"morphTargetInfluences",h),d.getUniforms().setValue(r,"morphTargetsTexture",m.texture,t),d.getUniforms().setValue(r,"morphTargetsTextureSize",m.size)}else{const p=h===void 0?0:h.length;let f=i[u.id];if(f===void 0||f.length!==p){f=[];for(let b=0;b<p;b++)f[b]=[b,0];i[u.id]=f}for(let b=0;b<p;b++){const w=f[b];w[0]=b,w[1]=h[b]}f.sort(xIe);for(let b=0;b<8;b++)b<p&&f[b][1]?(a[b][0]=f[b][0],a[b][1]=f[b][1]):(a[b][0]=Number.MAX_SAFE_INTEGER,a[b][1]=0);a.sort(bIe);const m=u.morphAttributes.position,g=u.morphAttributes.normal;let v=0;for(let b=0;b<8;b++){const w=a[b],_=w[0],S=w[1];_!==Number.MAX_SAFE_INTEGER&&S?(m&&u.getAttribute("morphTarget"+b)!==m[_]&&u.setAttribute("morphTarget"+b,m[_]),g&&u.getAttribute("morphNormal"+b)!==g[_]&&u.setAttribute("morphNormal"+b,g[_]),n[b]=S,v+=S):(m&&u.hasAttribute("morphTarget"+b)===!0&&u.deleteAttribute("morphTarget"+b),g&&u.hasAttribute("morphNormal"+b)===!0&&u.deleteAttribute("morphNormal"+b),n[b]=0)}const x=u.morphTargetsRelative?1:1-v;d.getUniforms().setValue(r,"morphTargetBaseInfluence",x),d.getUniforms().setValue(r,"morphTargetInfluences",n)}}return{update:l}}function _Ie(r,e,t,i){let n=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,d=e.get(l,u);if(n.get(d)!==c&&(e.update(d),n.set(d,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.get(l)!==c&&(t.update(l.instanceMatrix,r.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,r.ARRAY_BUFFER),n.set(l,c))),l.isSkinnedMesh){const h=l.skeleton;n.get(h)!==c&&(h.update(),n.set(h,c))}return d}function o(){n=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const iV=new Nr,nV=new yy,sV=new Hw,oV=new Sc,aV=[],lV=[],cV=new Float32Array(16),uV=new Float32Array(9),dV=new Float32Array(4);function Im(r,e,t){const i=r[0];if(i<=0||i>0)return r;const n=e*t;let s=aV[n];if(s===void 0&&(s=new Float32Array(n),aV[n]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,r[o].toArray(s,a)}return s}function gn(r,e){if(r.length!==e.length)return!1;for(let t=0,i=r.length;t<i;t++)if(r[t]!==e[t])return!1;return!0}function vn(r,e){for(let t=0,i=e.length;t<i;t++)r[t]=e[t]}function m_(r,e){let t=lV[e];t===void 0&&(t=new Int32Array(e),lV[e]=t);for(let i=0;i!==e;++i)t[i]=r.allocateTextureUnit();return t}function SIe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1f(this.addr,e),t[0]=e)}function TIe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gn(t,e))return;r.uniform2fv(this.addr,e),vn(t,e)}}function MIe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(r.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(gn(t,e))return;r.uniform3fv(this.addr,e),vn(t,e)}}function EIe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gn(t,e))return;r.uniform4fv(this.addr,e),vn(t,e)}}function CIe(r,e){const t=this.cache,i=e.elements;if(i===void 0){if(gn(t,e))return;r.uniformMatrix2fv(this.addr,!1,e),vn(t,e)}else{if(gn(t,i))return;dV.set(i),r.uniformMatrix2fv(this.addr,!1,dV),vn(t,i)}}function AIe(r,e){const t=this.cache,i=e.elements;if(i===void 0){if(gn(t,e))return;r.uniformMatrix3fv(this.addr,!1,e),vn(t,e)}else{if(gn(t,i))return;uV.set(i),r.uniformMatrix3fv(this.addr,!1,uV),vn(t,i)}}function NIe(r,e){const t=this.cache,i=e.elements;if(i===void 0){if(gn(t,e))return;r.uniformMatrix4fv(this.addr,!1,e),vn(t,e)}else{if(gn(t,i))return;cV.set(i),r.uniformMatrix4fv(this.addr,!1,cV),vn(t,i)}}function RIe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1i(this.addr,e),t[0]=e)}function kIe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gn(t,e))return;r.uniform2iv(this.addr,e),vn(t,e)}}function LIe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gn(t,e))return;r.uniform3iv(this.addr,e),vn(t,e)}}function OIe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gn(t,e))return;r.uniform4iv(this.addr,e),vn(t,e)}}function PIe(r,e){const t=this.cache;t[0]!==e&&(r.uniform1ui(this.addr,e),t[0]=e)}function IIe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(r.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(gn(t,e))return;r.uniform2uiv(this.addr,e),vn(t,e)}}function DIe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(r.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(gn(t,e))return;r.uniform3uiv(this.addr,e),vn(t,e)}}function UIe(r,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(r.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(gn(t,e))return;r.uniform4uiv(this.addr,e),vn(t,e)}}function FIe(r,e,t){const i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),t.setTexture2D(e||iV,n)}function BIe(r,e,t){const i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),t.setTexture3D(e||sV,n)}function zIe(r,e,t){const i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),t.setTextureCube(e||oV,n)}function VIe(r,e,t){const i=this.cache,n=t.allocateTextureUnit();i[0]!==n&&(r.uniform1i(this.addr,n),i[0]=n),t.setTexture2DArray(e||nV,n)}function GIe(r){switch(r){case 5126:return SIe;case 35664:return TIe;case 35665:return MIe;case 35666:return EIe;case 35674:return CIe;case 35675:return AIe;case 35676:return NIe;case 5124:case 35670:return RIe;case 35667:case 35671:return kIe;case 35668:case 35672:return LIe;case 35669:case 35673:return OIe;case 5125:return PIe;case 36294:return IIe;case 36295:return DIe;case 36296:return UIe;case 35678:case 36198:case 36298:case 36306:case 35682:return FIe;case 35679:case 36299:case 36307:return BIe;case 35680:case 36300:case 36308:case 36293:return zIe;case 36289:case 36303:case 36311:case 36292:return VIe}}function jIe(r,e){r.uniform1fv(this.addr,e)}function HIe(r,e){const t=Im(e,this.size,2);r.uniform2fv(this.addr,t)}function WIe(r,e){const t=Im(e,this.size,3);r.uniform3fv(this.addr,t)}function $Ie(r,e){const t=Im(e,this.size,4);r.uniform4fv(this.addr,t)}function XIe(r,e){const t=Im(e,this.size,4);r.uniformMatrix2fv(this.addr,!1,t)}function qIe(r,e){const t=Im(e,this.size,9);r.uniformMatrix3fv(this.addr,!1,t)}function KIe(r,e){const t=Im(e,this.size,16);r.uniformMatrix4fv(this.addr,!1,t)}function YIe(r,e){r.uniform1iv(this.addr,e)}function ZIe(r,e){r.uniform2iv(this.addr,e)}function JIe(r,e){r.uniform3iv(this.addr,e)}function QIe(r,e){r.uniform4iv(this.addr,e)}function eDe(r,e){r.uniform1uiv(this.addr,e)}function tDe(r,e){r.uniform2uiv(this.addr,e)}function rDe(r,e){r.uniform3uiv(this.addr,e)}function iDe(r,e){r.uniform4uiv(this.addr,e)}function nDe(r,e,t){const i=this.cache,n=e.length,s=m_(t,n);gn(i,s)||(r.uniform1iv(this.addr,s),vn(i,s));for(let o=0;o!==n;++o)t.setTexture2D(e[o]||iV,s[o])}function sDe(r,e,t){const i=this.cache,n=e.length,s=m_(t,n);gn(i,s)||(r.uniform1iv(this.addr,s),vn(i,s));for(let o=0;o!==n;++o)t.setTexture3D(e[o]||sV,s[o])}function oDe(r,e,t){const i=this.cache,n=e.length,s=m_(t,n);gn(i,s)||(r.uniform1iv(this.addr,s),vn(i,s));for(let o=0;o!==n;++o)t.setTextureCube(e[o]||oV,s[o])}function aDe(r,e,t){const i=this.cache,n=e.length,s=m_(t,n);gn(i,s)||(r.uniform1iv(this.addr,s),vn(i,s));for(let o=0;o!==n;++o)t.setTexture2DArray(e[o]||nV,s[o])}function lDe(r){switch(r){case 5126:return jIe;case 35664:return HIe;case 35665:return WIe;case 35666:return $Ie;case 35674:return XIe;case 35675:return qIe;case 35676:return KIe;case 5124:case 35670:return YIe;case 35667:case 35671:return ZIe;case 35668:case 35672:return JIe;case 35669:case 35673:return QIe;case 5125:return eDe;case 36294:return tDe;case 36295:return rDe;case 36296:return iDe;case 35678:case 36198:case 36298:case 36306:case 35682:return nDe;case 35679:case 36299:case 36307:return sDe;case 35680:case 36300:case 36308:case 36293:return oDe;case 36289:case 36303:case 36311:case 36292:return aDe}}class cDe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=GIe(t.type)}}class uDe{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=lDe(t.type)}}class dDe{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const n=this.seq;for(let s=0,o=n.length;s!==o;++s){const a=n[s];a.setValue(e,t[a.id],i)}}}const TN=/(\w+)(\])?(\[|\.)?/g;function hV(r,e){r.seq.push(e),r.map[e.id]=e}function hDe(r,e,t){const i=r.name,n=i.length;for(TN.lastIndex=0;;){const s=TN.exec(i),o=TN.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===n){hV(t,c===void 0?new cDe(a,r,e):new uDe(a,r,e));break}else{let u=t.map[a];u===void 0&&(u=new dDe(a),hV(t,u)),t=u}}}class g_{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<i;++n){const s=e.getActiveUniform(t,n),o=e.getUniformLocation(t,s.name);hDe(s,o,this)}}setValue(e,t,i,n){const s=this.map[t];s!==void 0&&s.setValue(e,i,n)}setOptional(e,t,i){const n=t[i];n!==void 0&&this.setValue(e,i,n)}static upload(e,t,i,n){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,n)}}static seqWithValue(e,t){const i=[];for(let n=0,s=e.length;n!==s;++n){const o=e[n];o.id in t&&i.push(o)}return i}}function pV(r,e,t){const i=r.createShader(e);return r.shaderSource(i,t),r.compileShader(i),i}let pDe=0;function fDe(r,e){const t=r.split(`
`),i=[],n=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=n;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function mDe(r){const e=Hr.getPrimaries(Hr.workingColorSpace),t=Hr.getPrimaries(r);let i;switch(e===t?i="":e===sy&&t===ny?i="LinearDisplayP3ToLinearSRGB":e===ny&&t===sy&&(i="LinearSRGBToLinearDisplayP3"),r){case li:case cm:return[i,"LinearTransferOETF"];case Lt:case ry:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",r),[i,"LinearTransferOETF"]}}function fV(r,e,t){const i=r.getShaderParameter(e,r.COMPILE_STATUS),n=r.getShaderInfoLog(e).trim();if(i&&n==="")return"";const s=/ERROR: 0:(\d+)/.exec(n);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+n+`

`+fDe(r.getShaderSource(e),o)}else return n}function gDe(r,e){const t=mDe(e);return`vec4 ${r}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function vDe(r,e){let t;switch(e){case G0:t="Linear";break;case j0:t="Reinhard";break;case H0:t="OptimizedCineon";break;case dh:t="ACESFilmic";break;case LA:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+r+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function yDe(r){return[r.extensionDerivatives||r.envMapCubeUVHeight||r.bumpMap||r.normalMapTangentSpace||r.clearcoatNormalMap||r.flatShading||r.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(r.extensionFragDepth||r.logarithmicDepthBuffer)&&r.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",r.extensionDrawBuffers&&r.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(r.extensionShaderTextureLOD||r.envMap||r.transmission)&&r.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Cy).join(`
`)}function bDe(r){const e=[];for(const t in r){const i=r[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function xDe(r,e){const t={},i=r.getProgramParameter(e,r.ACTIVE_ATTRIBUTES);for(let n=0;n<i;n++){const s=r.getActiveAttrib(e,n),o=s.name;let a=1;s.type===r.FLOAT_MAT2&&(a=2),s.type===r.FLOAT_MAT3&&(a=3),s.type===r.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:r.getAttribLocation(e,o),locationSize:a}}return t}function Cy(r){return r!==""}function mV(r,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return r.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function gV(r,e){return r.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const wDe=/^[ \t]*#include +<([\w\d./]+)>/gm;function MN(r){return r.replace(wDe,SDe)}const _De=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function SDe(r,e){let t=yr[e];if(t===void 0){const i=_De.get(e);if(i!==void 0)t=yr[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return MN(t)}const TDe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function vV(r){return r.replace(TDe,MDe)}function MDe(r,e,t,i){let n="";for(let s=parseInt(e);s<parseInt(t);s++)n+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return n}function yV(r){let e="precision "+r.precision+` float;
precision `+r.precision+" int;";return r.precision==="highp"?e+=`
#define HIGH_PRECISION`:r.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:r.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function EDe(r){let e="SHADOWMAP_TYPE_BASIC";return r.shadowMapType===NA?e="SHADOWMAP_TYPE_PCF":r.shadowMapType===Nw?e="SHADOWMAP_TYPE_PCF_SOFT":r.shadowMapType===Al&&(e="SHADOWMAP_TYPE_VSM"),e}function CDe(r){let e="ENVMAP_TYPE_CUBE";if(r.envMap)switch(r.envMapMode){case Co:case la:e="ENVMAP_TYPE_CUBE";break;case Nu:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ADe(r){let e="ENVMAP_MODE_REFLECTION";if(r.envMap)switch(r.envMapMode){case la:e="ENVMAP_MODE_REFRACTION";break}return e}function NDe(r){let e="ENVMAP_BLENDING_NONE";if(r.envMap)switch(r.combine){case Yf:e="ENVMAP_BLENDING_MULTIPLY";break;case RA:e="ENVMAP_BLENDING_MIX";break;case kA:e="ENVMAP_BLENDING_ADD";break}return e}function RDe(r){const e=r.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function kDe(r,e,t,i){const n=r.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=EDe(t),c=CDe(t),u=ADe(t),d=NDe(t),h=RDe(t),p=t.isWebGL2?"":yDe(t),f=bDe(s),m=n.createProgram();let g,v,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(g=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,f].filter(Cy).join(`
`),g.length>0&&(g+=`
`),v=[p,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,f].filter(Cy).join(`
`),v.length>0&&(v+=`
`)):(g=[yV(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,f,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Cy).join(`
`),v=[p,yV(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,f,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+d:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ro?"#define TONE_MAPPING":"",t.toneMapping!==ro?yr.tonemapping_pars_fragment:"",t.toneMapping!==ro?vDe("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",yr.colorspace_pars_fragment,gDe("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Cy).join(`
`)),o=MN(o),o=mV(o,t),o=gV(o,t),a=MN(a),a=mV(a,t),a=gV(a,t),o=vV(o),a=vV(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,v=["#define varying in",t.glslVersion===Vw?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Vw?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const b=x+g+o,w=x+v+a,_=pV(n,n.VERTEX_SHADER,b),S=pV(n,n.FRAGMENT_SHADER,w);if(n.attachShader(m,_),n.attachShader(m,S),t.index0AttributeName!==void 0?n.bindAttribLocation(m,0,t.index0AttributeName):t.morphTargets===!0&&n.bindAttribLocation(m,0,"position"),n.linkProgram(m),r.debug.checkShaderErrors){const E=n.getProgramInfoLog(m).trim(),C=n.getShaderInfoLog(_).trim(),P=n.getShaderInfoLog(S).trim();let A=!0,N=!0;if(n.getProgramParameter(m,n.LINK_STATUS)===!1)if(A=!1,typeof r.debug.onShaderError=="function")r.debug.onShaderError(n,m,_,S);else{const R=fV(n,_,"vertex"),F=fV(n,S,"fragment");console.error("THREE.WebGLProgram: Shader Error "+n.getError()+" - VALIDATE_STATUS "+n.getProgramParameter(m,n.VALIDATE_STATUS)+`

Program Info Log: `+E+`
`+R+`
`+F)}else E!==""?console.warn("THREE.WebGLProgram: Program Info Log:",E):(C===""||P==="")&&(N=!1);N&&(this.diagnostics={runnable:A,programLog:E,vertexShader:{log:C,prefix:g},fragmentShader:{log:P,prefix:v}})}n.deleteShader(_),n.deleteShader(S);let T;this.getUniforms=function(){return T===void 0&&(T=new g_(n,m)),T};let M;return this.getAttributes=function(){return M===void 0&&(M=xDe(n,m)),M},this.destroy=function(){i.releaseStatesOfProgram(this),n.deleteProgram(m),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=pDe++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=_,this.fragmentShader=S,this}let LDe=0;class ODe{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,n=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(n)===!1&&(o.add(n),n.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new PDe(e),t.set(e,i)),i}}class PDe{constructor(e){this.id=LDe++,this.code=e,this.usedTimes=0}}function IDe(r,e,t,i,n,s,o){const a=new Yw,l=new ODe,c=[],u=n.isWebGL2,d=n.logarithmicDepthBuffer,h=n.vertexTextures;let p=n.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(E){return E===0?"uv":`uv${E}`}function g(E,C,P,A,N){const R=A.fog,F=N.geometry,B=E.isMeshStandardMaterial?A.environment:null,k=(E.isMeshStandardMaterial?t:e).get(E.envMap||B),z=k&&k.mapping===Nu?k.image.height:null,O=f[E.type];E.precision!==null&&(p=n.getMaxPrecision(E.precision),p!==E.precision&&console.warn("THREE.WebGLProgram.getParameters:",E.precision,"not supported, using",p,"instead."));const V=F.morphAttributes.position||F.morphAttributes.normal||F.morphAttributes.color,U=V!==void 0?V.length:0;let G=0;F.morphAttributes.position!==void 0&&(G=1),F.morphAttributes.normal!==void 0&&(G=2),F.morphAttributes.color!==void 0&&(G=3);let X,ie,se,de;if(O){const wt=qi[O];X=wt.vertexShader,ie=wt.fragmentShader}else X=E.vertexShader,ie=E.fragmentShader,l.update(E),se=l.getVertexShaderID(E),de=l.getFragmentShaderID(E);const K=r.getRenderTarget(),q=N.isInstancedMesh===!0,ce=!!E.map,Te=!!E.matcap,Z=!!k,L=!!E.aoMap,$=!!E.lightMap,re=!!E.bumpMap,te=!!E.normalMap,le=!!E.displacementMap,ge=!!E.emissiveMap,be=!!E.metalnessMap,_e=!!E.roughnessMap,pe=E.anisotropy>0,Se=E.clearcoat>0,Fe=E.iridescence>0,Y=E.sheen>0,H=E.transmission>0,ne=pe&&!!E.anisotropyMap,Le=Se&&!!E.clearcoatMap,Pe=Se&&!!E.clearcoatNormalMap,Ee=Se&&!!E.clearcoatRoughnessMap,Ue=Fe&&!!E.iridescenceMap,Be=Fe&&!!E.iridescenceThicknessMap,ve=Y&&!!E.sheenColorMap,Q=Y&&!!E.sheenRoughnessMap,he=!!E.specularMap,we=!!E.specularColorMap,ae=!!E.specularIntensityMap,De=H&&!!E.transmissionMap,We=H&&!!E.thicknessMap,je=!!E.gradientMap,ye=!!E.alphaMap,nt=E.alphaTest>0,He=!!E.alphaHash,tt=!!E.extensions,Me=!!F.attributes.uv1,Ne=!!F.attributes.uv2,fe=!!F.attributes.uv3;let Ie=ro;return E.toneMapped&&(K===null||K.isXRRenderTarget===!0)&&(Ie=r.toneMapping),{isWebGL2:u,shaderID:O,shaderType:E.type,shaderName:E.name,vertexShader:X,fragmentShader:ie,defines:E.defines,customVertexShaderID:se,customFragmentShaderID:de,isRawShaderMaterial:E.isRawShaderMaterial===!0,glslVersion:E.glslVersion,precision:p,instancing:q,instancingColor:q&&N.instanceColor!==null,supportsVertexTextures:h,outputColorSpace:K===null?r.outputColorSpace:K.isXRRenderTarget===!0?K.texture.colorSpace:li,map:ce,matcap:Te,envMap:Z,envMapMode:Z&&k.mapping,envMapCubeUVHeight:z,aoMap:L,lightMap:$,bumpMap:re,normalMap:te,displacementMap:h&&le,emissiveMap:ge,normalMapObjectSpace:te&&E.normalMapType===Bw,normalMapTangentSpace:te&&E.normalMapType===Ha,metalnessMap:be,roughnessMap:_e,anisotropy:pe,anisotropyMap:ne,clearcoat:Se,clearcoatMap:Le,clearcoatNormalMap:Pe,clearcoatRoughnessMap:Ee,iridescence:Fe,iridescenceMap:Ue,iridescenceThicknessMap:Be,sheen:Y,sheenColorMap:ve,sheenRoughnessMap:Q,specularMap:he,specularColorMap:we,specularIntensityMap:ae,transmission:H,transmissionMap:De,thicknessMap:We,gradientMap:je,opaque:E.transparent===!1&&E.blending===Eo,alphaMap:ye,alphaTest:nt,alphaHash:He,combine:E.combine,mapUv:ce&&m(E.map.channel),aoMapUv:L&&m(E.aoMap.channel),lightMapUv:$&&m(E.lightMap.channel),bumpMapUv:re&&m(E.bumpMap.channel),normalMapUv:te&&m(E.normalMap.channel),displacementMapUv:le&&m(E.displacementMap.channel),emissiveMapUv:ge&&m(E.emissiveMap.channel),metalnessMapUv:be&&m(E.metalnessMap.channel),roughnessMapUv:_e&&m(E.roughnessMap.channel),anisotropyMapUv:ne&&m(E.anisotropyMap.channel),clearcoatMapUv:Le&&m(E.clearcoatMap.channel),clearcoatNormalMapUv:Pe&&m(E.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ee&&m(E.clearcoatRoughnessMap.channel),iridescenceMapUv:Ue&&m(E.iridescenceMap.channel),iridescenceThicknessMapUv:Be&&m(E.iridescenceThicknessMap.channel),sheenColorMapUv:ve&&m(E.sheenColorMap.channel),sheenRoughnessMapUv:Q&&m(E.sheenRoughnessMap.channel),specularMapUv:he&&m(E.specularMap.channel),specularColorMapUv:we&&m(E.specularColorMap.channel),specularIntensityMapUv:ae&&m(E.specularIntensityMap.channel),transmissionMapUv:De&&m(E.transmissionMap.channel),thicknessMapUv:We&&m(E.thicknessMap.channel),alphaMapUv:ye&&m(E.alphaMap.channel),vertexTangents:!!F.attributes.tangent&&(te||pe),vertexColors:E.vertexColors,vertexAlphas:E.vertexColors===!0&&!!F.attributes.color&&F.attributes.color.itemSize===4,vertexUv1s:Me,vertexUv2s:Ne,vertexUv3s:fe,pointsUvs:N.isPoints===!0&&!!F.attributes.uv&&(ce||ye),fog:!!R,useFog:E.fog===!0,fogExp2:R&&R.isFogExp2,flatShading:E.flatShading===!0,sizeAttenuation:E.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:N.isSkinnedMesh===!0,morphTargets:F.morphAttributes.position!==void 0,morphNormals:F.morphAttributes.normal!==void 0,morphColors:F.morphAttributes.color!==void 0,morphTargetsCount:U,morphTextureStride:G,numDirLights:C.directional.length,numPointLights:C.point.length,numSpotLights:C.spot.length,numSpotLightMaps:C.spotLightMap.length,numRectAreaLights:C.rectArea.length,numHemiLights:C.hemi.length,numDirLightShadows:C.directionalShadowMap.length,numPointLightShadows:C.pointShadowMap.length,numSpotLightShadows:C.spotShadowMap.length,numSpotLightShadowsWithMaps:C.numSpotLightShadowsWithMaps,numLightProbes:C.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:E.dithering,shadowMapEnabled:r.shadowMap.enabled&&P.length>0,shadowMapType:r.shadowMap.type,toneMapping:Ie,useLegacyLights:r._useLegacyLights,decodeVideoTexture:ce&&E.map.isVideoTexture===!0&&Hr.getTransfer(E.map.colorSpace)===ci,premultipliedAlpha:E.premultipliedAlpha,doubleSided:E.side===Wi,flipSided:E.side===Oi,useDepthPacking:E.depthPacking>=0,depthPacking:E.depthPacking||0,index0AttributeName:E.index0AttributeName,extensionDerivatives:tt&&E.extensions.derivatives===!0,extensionFragDepth:tt&&E.extensions.fragDepth===!0,extensionDrawBuffers:tt&&E.extensions.drawBuffers===!0,extensionShaderTextureLOD:tt&&E.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:E.customProgramCacheKey()}}function v(E){const C=[];if(E.shaderID?C.push(E.shaderID):(C.push(E.customVertexShaderID),C.push(E.customFragmentShaderID)),E.defines!==void 0)for(const P in E.defines)C.push(P),C.push(E.defines[P]);return E.isRawShaderMaterial===!1&&(x(C,E),b(C,E),C.push(r.outputColorSpace)),C.push(E.customProgramCacheKey),C.join()}function x(E,C){E.push(C.precision),E.push(C.outputColorSpace),E.push(C.envMapMode),E.push(C.envMapCubeUVHeight),E.push(C.mapUv),E.push(C.alphaMapUv),E.push(C.lightMapUv),E.push(C.aoMapUv),E.push(C.bumpMapUv),E.push(C.normalMapUv),E.push(C.displacementMapUv),E.push(C.emissiveMapUv),E.push(C.metalnessMapUv),E.push(C.roughnessMapUv),E.push(C.anisotropyMapUv),E.push(C.clearcoatMapUv),E.push(C.clearcoatNormalMapUv),E.push(C.clearcoatRoughnessMapUv),E.push(C.iridescenceMapUv),E.push(C.iridescenceThicknessMapUv),E.push(C.sheenColorMapUv),E.push(C.sheenRoughnessMapUv),E.push(C.specularMapUv),E.push(C.specularColorMapUv),E.push(C.specularIntensityMapUv),E.push(C.transmissionMapUv),E.push(C.thicknessMapUv),E.push(C.combine),E.push(C.fogExp2),E.push(C.sizeAttenuation),E.push(C.morphTargetsCount),E.push(C.morphAttributeCount),E.push(C.numDirLights),E.push(C.numPointLights),E.push(C.numSpotLights),E.push(C.numSpotLightMaps),E.push(C.numHemiLights),E.push(C.numRectAreaLights),E.push(C.numDirLightShadows),E.push(C.numPointLightShadows),E.push(C.numSpotLightShadows),E.push(C.numSpotLightShadowsWithMaps),E.push(C.numLightProbes),E.push(C.shadowMapType),E.push(C.toneMapping),E.push(C.numClippingPlanes),E.push(C.numClipIntersection),E.push(C.depthPacking)}function b(E,C){a.disableAll(),C.isWebGL2&&a.enable(0),C.supportsVertexTextures&&a.enable(1),C.instancing&&a.enable(2),C.instancingColor&&a.enable(3),C.matcap&&a.enable(4),C.envMap&&a.enable(5),C.normalMapObjectSpace&&a.enable(6),C.normalMapTangentSpace&&a.enable(7),C.clearcoat&&a.enable(8),C.iridescence&&a.enable(9),C.alphaTest&&a.enable(10),C.vertexColors&&a.enable(11),C.vertexAlphas&&a.enable(12),C.vertexUv1s&&a.enable(13),C.vertexUv2s&&a.enable(14),C.vertexUv3s&&a.enable(15),C.vertexTangents&&a.enable(16),C.anisotropy&&a.enable(17),E.push(a.mask),a.disableAll(),C.fog&&a.enable(0),C.useFog&&a.enable(1),C.flatShading&&a.enable(2),C.logarithmicDepthBuffer&&a.enable(3),C.skinning&&a.enable(4),C.morphTargets&&a.enable(5),C.morphNormals&&a.enable(6),C.morphColors&&a.enable(7),C.premultipliedAlpha&&a.enable(8),C.shadowMapEnabled&&a.enable(9),C.useLegacyLights&&a.enable(10),C.doubleSided&&a.enable(11),C.flipSided&&a.enable(12),C.useDepthPacking&&a.enable(13),C.dithering&&a.enable(14),C.transmission&&a.enable(15),C.sheen&&a.enable(16),C.opaque&&a.enable(17),C.pointsUvs&&a.enable(18),C.decodeVideoTexture&&a.enable(19),E.push(a.mask)}function w(E){const C=f[E.type];let P;if(C){const A=qi[C];P=Lo.clone(A.uniforms)}else P=E.uniforms;return P}function _(E,C){let P;for(let A=0,N=c.length;A<N;A++){const R=c[A];if(R.cacheKey===C){P=R,++P.usedTimes;break}}return P===void 0&&(P=new kDe(r,C,E,s),c.push(P)),P}function S(E){if(--E.usedTimes===0){const C=c.indexOf(E);c[C]=c[c.length-1],c.pop(),E.destroy()}}function T(E){l.remove(E)}function M(){l.dispose()}return{getParameters:g,getProgramCacheKey:v,getUniforms:w,acquireProgram:_,releaseProgram:S,releaseShaderCache:T,programs:c,dispose:M}}function DDe(){let r=new WeakMap;function e(s){let o=r.get(s);return o===void 0&&(o={},r.set(s,o)),o}function t(s){r.delete(s)}function i(s,o,a){r.get(s)[o]=a}function n(){r=new WeakMap}return{get:e,remove:t,update:i,dispose:n}}function UDe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function bV(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}function xV(){const r=[];let e=0;const t=[],i=[],n=[];function s(){e=0,t.length=0,i.length=0,n.length=0}function o(d,h,p,f,m,g){let v=r[e];return v===void 0?(v={id:d.id,object:d,geometry:h,material:p,groupOrder:f,renderOrder:d.renderOrder,z:m,group:g},r[e]=v):(v.id=d.id,v.object=d,v.geometry=h,v.material=p,v.groupOrder=f,v.renderOrder=d.renderOrder,v.z=m,v.group=g),e++,v}function a(d,h,p,f,m,g){const v=o(d,h,p,f,m,g);p.transmission>0?i.push(v):p.transparent===!0?n.push(v):t.push(v)}function l(d,h,p,f,m,g){const v=o(d,h,p,f,m,g);p.transmission>0?i.unshift(v):p.transparent===!0?n.unshift(v):t.unshift(v)}function c(d,h){t.length>1&&t.sort(d||UDe),i.length>1&&i.sort(h||bV),n.length>1&&n.sort(h||bV)}function u(){for(let d=e,h=r.length;d<h;d++){const p=r[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:t,transmissive:i,transparent:n,init:s,push:a,unshift:l,finish:u,sort:c}}function FDe(){let r=new WeakMap;function e(i,n){const s=r.get(i);let o;return s===void 0?(o=new xV,r.set(i,[o])):n>=s.length?(o=new xV,s.push(o)):o=s[n],o}function t(){r=new WeakMap}return{get:e,dispose:t}}function BDe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new oe,color:new at};break;case"SpotLight":t={position:new oe,direction:new oe,color:new at,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new oe,color:new at,distance:0,decay:0};break;case"HemisphereLight":t={direction:new oe,skyColor:new at,groundColor:new at};break;case"RectAreaLight":t={color:new at,position:new oe,halfWidth:new oe,halfHeight:new oe};break}return r[e.id]=t,t}}}function zDe(){const r={};return{get:function(e){if(r[e.id]!==void 0)return r[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new qe,shadowCameraNear:1,shadowCameraFar:1e3};break}return r[e.id]=t,t}}}let VDe=0;function GDe(r,e){return(e.castShadow?2:0)-(r.castShadow?2:0)+(e.map?1:0)-(r.map?1:0)}function jDe(r,e){const t=new BDe,i=zDe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new oe);const s=new oe,o=new St,a=new St;function l(u,d){let h=0,p=0,f=0;for(let A=0;A<9;A++)n.probe[A].set(0,0,0);let m=0,g=0,v=0,x=0,b=0,w=0,_=0,S=0,T=0,M=0,E=0;u.sort(GDe);const C=d===!0?Math.PI:1;for(let A=0,N=u.length;A<N;A++){const R=u[A],F=R.color,B=R.intensity,k=R.distance,z=R.shadow&&R.shadow.map?R.shadow.map.texture:null;if(R.isAmbientLight)h+=F.r*B*C,p+=F.g*B*C,f+=F.b*B*C;else if(R.isLightProbe){for(let O=0;O<9;O++)n.probe[O].addScaledVector(R.sh.coefficients[O],B);E++}else if(R.isDirectionalLight){const O=t.get(R);if(O.color.copy(R.color).multiplyScalar(R.intensity*C),R.castShadow){const V=R.shadow,U=i.get(R);U.shadowBias=V.bias,U.shadowNormalBias=V.normalBias,U.shadowRadius=V.radius,U.shadowMapSize=V.mapSize,n.directionalShadow[m]=U,n.directionalShadowMap[m]=z,n.directionalShadowMatrix[m]=R.shadow.matrix,w++}n.directional[m]=O,m++}else if(R.isSpotLight){const O=t.get(R);O.position.setFromMatrixPosition(R.matrixWorld),O.color.copy(F).multiplyScalar(B*C),O.distance=k,O.coneCos=Math.cos(R.angle),O.penumbraCos=Math.cos(R.angle*(1-R.penumbra)),O.decay=R.decay,n.spot[v]=O;const V=R.shadow;if(R.map&&(n.spotLightMap[T]=R.map,T++,V.updateMatrices(R),R.castShadow&&M++),n.spotLightMatrix[v]=V.matrix,R.castShadow){const U=i.get(R);U.shadowBias=V.bias,U.shadowNormalBias=V.normalBias,U.shadowRadius=V.radius,U.shadowMapSize=V.mapSize,n.spotShadow[v]=U,n.spotShadowMap[v]=z,S++}v++}else if(R.isRectAreaLight){const O=t.get(R);O.color.copy(F).multiplyScalar(B),O.halfWidth.set(R.width*.5,0,0),O.halfHeight.set(0,R.height*.5,0),n.rectArea[x]=O,x++}else if(R.isPointLight){const O=t.get(R);if(O.color.copy(R.color).multiplyScalar(R.intensity*C),O.distance=R.distance,O.decay=R.decay,R.castShadow){const V=R.shadow,U=i.get(R);U.shadowBias=V.bias,U.shadowNormalBias=V.normalBias,U.shadowRadius=V.radius,U.shadowMapSize=V.mapSize,U.shadowCameraNear=V.camera.near,U.shadowCameraFar=V.camera.far,n.pointShadow[g]=U,n.pointShadowMap[g]=z,n.pointShadowMatrix[g]=R.shadow.matrix,_++}n.point[g]=O,g++}else if(R.isHemisphereLight){const O=t.get(R);O.skyColor.copy(R.color).multiplyScalar(B*C),O.groundColor.copy(R.groundColor).multiplyScalar(B*C),n.hemi[b]=O,b++}}x>0&&(e.isWebGL2||r.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=At.LTC_FLOAT_1,n.rectAreaLTC2=At.LTC_FLOAT_2):r.has("OES_texture_half_float_linear")===!0?(n.rectAreaLTC1=At.LTC_HALF_1,n.rectAreaLTC2=At.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),n.ambient[0]=h,n.ambient[1]=p,n.ambient[2]=f;const P=n.hash;(P.directionalLength!==m||P.pointLength!==g||P.spotLength!==v||P.rectAreaLength!==x||P.hemiLength!==b||P.numDirectionalShadows!==w||P.numPointShadows!==_||P.numSpotShadows!==S||P.numSpotMaps!==T||P.numLightProbes!==E)&&(n.directional.length=m,n.spot.length=v,n.rectArea.length=x,n.point.length=g,n.hemi.length=b,n.directionalShadow.length=w,n.directionalShadowMap.length=w,n.pointShadow.length=_,n.pointShadowMap.length=_,n.spotShadow.length=S,n.spotShadowMap.length=S,n.directionalShadowMatrix.length=w,n.pointShadowMatrix.length=_,n.spotLightMatrix.length=S+T-M,n.spotLightMap.length=T,n.numSpotLightShadowsWithMaps=M,n.numLightProbes=E,P.directionalLength=m,P.pointLength=g,P.spotLength=v,P.rectAreaLength=x,P.hemiLength=b,P.numDirectionalShadows=w,P.numPointShadows=_,P.numSpotShadows=S,P.numSpotMaps=T,P.numLightProbes=E,n.version=VDe++)}function c(u,d){let h=0,p=0,f=0,m=0,g=0;const v=d.matrixWorldInverse;for(let x=0,b=u.length;x<b;x++){const w=u[x];if(w.isDirectionalLight){const _=n.directional[h];_.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(v),h++}else if(w.isSpotLight){const _=n.spot[f];_.position.setFromMatrixPosition(w.matrixWorld),_.position.applyMatrix4(v),_.direction.setFromMatrixPosition(w.matrixWorld),s.setFromMatrixPosition(w.target.matrixWorld),_.direction.sub(s),_.direction.transformDirection(v),f++}else if(w.isRectAreaLight){const _=n.rectArea[m];_.position.setFromMatrixPosition(w.matrixWorld),_.position.applyMatrix4(v),a.identity(),o.copy(w.matrixWorld),o.premultiply(v),a.extractRotation(o),_.halfWidth.set(w.width*.5,0,0),_.halfHeight.set(0,w.height*.5,0),_.halfWidth.applyMatrix4(a),_.halfHeight.applyMatrix4(a),m++}else if(w.isPointLight){const _=n.point[p];_.position.setFromMatrixPosition(w.matrixWorld),_.position.applyMatrix4(v),p++}else if(w.isHemisphereLight){const _=n.hemi[g];_.direction.setFromMatrixPosition(w.matrixWorld),_.direction.transformDirection(v),g++}}}return{setup:l,setupView:c,state:n}}function wV(r,e){const t=new jDe(r,e),i=[],n=[];function s(){i.length=0,n.length=0}function o(u){i.push(u)}function a(u){n.push(u)}function l(u){t.setup(i,u)}function c(u){t.setupView(i,u)}return{init:s,state:{lightsArray:i,shadowsArray:n,lights:t},setupLights:l,setupLightsView:c,pushLight:o,pushShadow:a}}function HDe(r,e){let t=new WeakMap;function i(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new wV(r,e),t.set(s,[l])):o>=a.length?(l=new wV(r,e),a.push(l)):l=a[o],l}function n(){t=new WeakMap}return{get:i,dispose:n}}class jh extends Wr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=UA,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Ay extends Wr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const WDe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,$De=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function XDe(r,e,t){let i=new Ey;const n=new qe,s=new qe,o=new jt,a=new jh({depthPacking:ty}),l=new Ay,c={},u=t.maxTextureSize,d={[eo]:Oi,[Oi]:eo,[Wi]:Wi},h=new ii({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new qe},radius:{value:4}},vertexShader:WDe,fragmentShader:$De}),p=h.clone();p.defines.HORIZONTAL_PASS=1;const f=new sr;f.setAttribute("position",new jr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new mt(f,h),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=NA;let v=this.type;this.render=function(_,S,T){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||_.length===0)return;const M=r.getRenderTarget(),E=r.getActiveCubeFace(),C=r.getActiveMipmapLevel(),P=r.state;P.setBlending(Xn),P.buffers.color.setClear(1,1,1,1),P.buffers.depth.setTest(!0),P.setScissorTest(!1);const A=v!==Al&&this.type===Al,N=v===Al&&this.type!==Al;for(let R=0,F=_.length;R<F;R++){const B=_[R],k=B.shadow;if(k===void 0){console.warn("THREE.WebGLShadowMap:",B,"has no shadow.");continue}if(k.autoUpdate===!1&&k.needsUpdate===!1)continue;n.copy(k.mapSize);const z=k.getFrameExtents();if(n.multiply(z),s.copy(k.mapSize),(n.x>u||n.y>u)&&(n.x>u&&(s.x=Math.floor(u/z.x),n.x=s.x*z.x,k.mapSize.x=s.x),n.y>u&&(s.y=Math.floor(u/z.y),n.y=s.y*z.y,k.mapSize.y=s.y)),k.map===null||A===!0||N===!0){const V=this.type!==Al?{minFilter:Mr,magFilter:Mr}:{};k.map!==null&&k.map.dispose(),k.map=new Ui(n.x,n.y,V),k.map.texture.name=B.name+".shadowMap",k.camera.updateProjectionMatrix()}r.setRenderTarget(k.map),r.clear();const O=k.getViewportCount();for(let V=0;V<O;V++){const U=k.getViewport(V);o.set(s.x*U.x,s.y*U.y,s.x*U.z,s.y*U.w),P.viewport(o),k.updateMatrices(B,V),i=k.getFrustum(),w(S,T,k.camera,B,this.type)}k.isPointLightShadow!==!0&&this.type===Al&&x(k,T),k.needsUpdate=!1}v=this.type,g.needsUpdate=!1,r.setRenderTarget(M,E,C)};function x(_,S){const T=e.update(m);h.defines.VSM_SAMPLES!==_.blurSamples&&(h.defines.VSM_SAMPLES=_.blurSamples,p.defines.VSM_SAMPLES=_.blurSamples,h.needsUpdate=!0,p.needsUpdate=!0),_.mapPass===null&&(_.mapPass=new Ui(n.x,n.y)),h.uniforms.shadow_pass.value=_.map.texture,h.uniforms.resolution.value=_.mapSize,h.uniforms.radius.value=_.radius,r.setRenderTarget(_.mapPass),r.clear(),r.renderBufferDirect(S,null,T,h,m,null),p.uniforms.shadow_pass.value=_.mapPass.texture,p.uniforms.resolution.value=_.mapSize,p.uniforms.radius.value=_.radius,r.setRenderTarget(_.map),r.clear(),r.renderBufferDirect(S,null,T,p,m,null)}function b(_,S,T,M){let E=null;const C=T.isPointLight===!0?_.customDistanceMaterial:_.customDepthMaterial;if(C!==void 0)E=C;else if(E=T.isPointLight===!0?l:a,r.localClippingEnabled&&S.clipShadows===!0&&Array.isArray(S.clippingPlanes)&&S.clippingPlanes.length!==0||S.displacementMap&&S.displacementScale!==0||S.alphaMap&&S.alphaTest>0||S.map&&S.alphaTest>0){const P=E.uuid,A=S.uuid;let N=c[P];N===void 0&&(N={},c[P]=N);let R=N[A];R===void 0&&(R=E.clone(),N[A]=R),E=R}if(E.visible=S.visible,E.wireframe=S.wireframe,M===Al?E.side=S.shadowSide!==null?S.shadowSide:S.side:E.side=S.shadowSide!==null?S.shadowSide:d[S.side],E.alphaMap=S.alphaMap,E.alphaTest=S.alphaTest,E.map=S.map,E.clipShadows=S.clipShadows,E.clippingPlanes=S.clippingPlanes,E.clipIntersection=S.clipIntersection,E.displacementMap=S.displacementMap,E.displacementScale=S.displacementScale,E.displacementBias=S.displacementBias,E.wireframeLinewidth=S.wireframeLinewidth,E.linewidth=S.linewidth,T.isPointLight===!0&&E.isMeshDistanceMaterial===!0){const P=r.properties.get(E);P.light=T}return E}function w(_,S,T,M,E){if(_.visible===!1)return;if(_.layers.test(S.layers)&&(_.isMesh||_.isLine||_.isPoints)&&(_.castShadow||_.receiveShadow&&E===Al)&&(!_.frustumCulled||i.intersectsObject(_))){_.modelViewMatrix.multiplyMatrices(T.matrixWorldInverse,_.matrixWorld);const P=e.update(_),A=_.material;if(Array.isArray(A)){const N=P.groups;for(let R=0,F=N.length;R<F;R++){const B=N[R],k=A[B.materialIndex];if(k&&k.visible){const z=b(_,k,M,E);r.renderBufferDirect(T,null,P,z,_,B)}}}else if(A.visible){const N=b(_,A,M,E);r.renderBufferDirect(T,null,P,N,_,null)}}const C=_.children;for(let P=0,A=C.length;P<A;P++)w(C[P],S,T,M,E)}}function qDe(r,e,t){const i=t.isWebGL2;function n(){let ye=!1;const nt=new jt;let He=null;const tt=new jt(0,0,0,0);return{setMask:function(Me){He!==Me&&!ye&&(r.colorMask(Me,Me,Me,Me),He=Me)},setLocked:function(Me){ye=Me},setClear:function(Me,Ne,fe,Ie,wt){wt===!0&&(Me*=Ie,Ne*=Ie,fe*=Ie),nt.set(Me,Ne,fe,Ie),tt.equals(nt)===!1&&(r.clearColor(Me,Ne,fe,Ie),tt.copy(nt))},reset:function(){ye=!1,He=null,tt.set(-1,0,0,0)}}}function s(){let ye=!1,nt=null,He=null,tt=null;return{setTest:function(Me){Me?K(r.DEPTH_TEST):q(r.DEPTH_TEST)},setMask:function(Me){nt!==Me&&!ye&&(r.depthMask(Me),nt=Me)},setFunc:function(Me){if(He!==Me){switch(Me){case I0:r.depthFunc(r.NEVER);break;case D0:r.depthFunc(r.ALWAYS);break;case U0:r.depthFunc(r.LESS);break;case uh:r.depthFunc(r.LEQUAL);break;case F0:r.depthFunc(r.EQUAL);break;case B0:r.depthFunc(r.GEQUAL);break;case z0:r.depthFunc(r.GREATER);break;case V0:r.depthFunc(r.NOTEQUAL);break;default:r.depthFunc(r.LEQUAL)}He=Me}},setLocked:function(Me){ye=Me},setClear:function(Me){tt!==Me&&(r.clearDepth(Me),tt=Me)},reset:function(){ye=!1,nt=null,He=null,tt=null}}}function o(){let ye=!1,nt=null,He=null,tt=null,Me=null,Ne=null,fe=null,Ie=null,wt=null;return{setTest:function(xt){ye||(xt?K(r.STENCIL_TEST):q(r.STENCIL_TEST))},setMask:function(xt){nt!==xt&&!ye&&(r.stencilMask(xt),nt=xt)},setFunc:function(xt,Gt,Jt){(He!==xt||tt!==Gt||Me!==Jt)&&(r.stencilFunc(xt,Gt,Jt),He=xt,tt=Gt,Me=Jt)},setOp:function(xt,Gt,Jt){(Ne!==xt||fe!==Gt||Ie!==Jt)&&(r.stencilOp(xt,Gt,Jt),Ne=xt,fe=Gt,Ie=Jt)},setLocked:function(xt){ye=xt},setClear:function(xt){wt!==xt&&(r.clearStencil(xt),wt=xt)},reset:function(){ye=!1,nt=null,He=null,tt=null,Me=null,Ne=null,fe=null,Ie=null,wt=null}}}const a=new n,l=new s,c=new o,u=new WeakMap,d=new WeakMap;let h={},p={},f=new WeakMap,m=[],g=null,v=!1,x=null,b=null,w=null,_=null,S=null,T=null,M=null,E=!1,C=null,P=null,A=null,N=null,R=null;const F=r.getParameter(r.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let B=!1,k=0;const z=r.getParameter(r.VERSION);z.indexOf("WebGL")!==-1?(k=parseFloat(/^WebGL (\d)/.exec(z)[1]),B=k>=1):z.indexOf("OpenGL ES")!==-1&&(k=parseFloat(/^OpenGL ES (\d)/.exec(z)[1]),B=k>=2);let O=null,V={};const U=r.getParameter(r.SCISSOR_BOX),G=r.getParameter(r.VIEWPORT),X=new jt().fromArray(U),ie=new jt().fromArray(G);function se(ye,nt,He,tt){const Me=new Uint8Array(4),Ne=r.createTexture();r.bindTexture(ye,Ne),r.texParameteri(ye,r.TEXTURE_MIN_FILTER,r.NEAREST),r.texParameteri(ye,r.TEXTURE_MAG_FILTER,r.NEAREST);for(let fe=0;fe<He;fe++)i&&(ye===r.TEXTURE_3D||ye===r.TEXTURE_2D_ARRAY)?r.texImage3D(nt,0,r.RGBA,1,1,tt,0,r.RGBA,r.UNSIGNED_BYTE,Me):r.texImage2D(nt+fe,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,Me);return Ne}const de={};de[r.TEXTURE_2D]=se(r.TEXTURE_2D,r.TEXTURE_2D,1),de[r.TEXTURE_CUBE_MAP]=se(r.TEXTURE_CUBE_MAP,r.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(de[r.TEXTURE_2D_ARRAY]=se(r.TEXTURE_2D_ARRAY,r.TEXTURE_2D_ARRAY,1,1),de[r.TEXTURE_3D]=se(r.TEXTURE_3D,r.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),c.setClear(0),K(r.DEPTH_TEST),l.setFunc(uh),le(!1),ge(Aw),K(r.CULL_FACE),re(Xn);function K(ye){h[ye]!==!0&&(r.enable(ye),h[ye]=!0)}function q(ye){h[ye]!==!1&&(r.disable(ye),h[ye]=!1)}function ce(ye,nt){return p[ye]!==nt?(r.bindFramebuffer(ye,nt),p[ye]=nt,i&&(ye===r.DRAW_FRAMEBUFFER&&(p[r.FRAMEBUFFER]=nt),ye===r.FRAMEBUFFER&&(p[r.DRAW_FRAMEBUFFER]=nt)),!0):!1}function Te(ye,nt){let He=m,tt=!1;if(ye)if(He=f.get(nt),He===void 0&&(He=[],f.set(nt,He)),ye.isWebGLMultipleRenderTargets){const Me=ye.texture;if(He.length!==Me.length||He[0]!==r.COLOR_ATTACHMENT0){for(let Ne=0,fe=Me.length;Ne<fe;Ne++)He[Ne]=r.COLOR_ATTACHMENT0+Ne;He.length=Me.length,tt=!0}}else He[0]!==r.COLOR_ATTACHMENT0&&(He[0]=r.COLOR_ATTACHMENT0,tt=!0);else He[0]!==r.BACK&&(He[0]=r.BACK,tt=!0);tt&&(t.isWebGL2?r.drawBuffers(He):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(He))}function Z(ye){return g!==ye?(r.useProgram(ye),g=ye,!0):!1}const L={[to]:r.FUNC_ADD,[_0]:r.FUNC_SUBTRACT,[S0]:r.FUNC_REVERSE_SUBTRACT};if(i)L[T0]=r.MIN,L[M0]=r.MAX;else{const ye=e.get("EXT_blend_minmax");ye!==null&&(L[T0]=ye.MIN_EXT,L[M0]=ye.MAX_EXT)}const $={[E0]:r.ZERO,[C0]:r.ONE,[A0]:r.SRC_COLOR,[qf]:r.SRC_ALPHA,[P0]:r.SRC_ALPHA_SATURATE,[L0]:r.DST_COLOR,[R0]:r.DST_ALPHA,[N0]:r.ONE_MINUS_SRC_COLOR,[Kf]:r.ONE_MINUS_SRC_ALPHA,[O0]:r.ONE_MINUS_DST_COLOR,[k0]:r.ONE_MINUS_DST_ALPHA};function re(ye,nt,He,tt,Me,Ne,fe,Ie){if(ye===Xn){v===!0&&(q(r.BLEND),v=!1);return}if(v===!1&&(K(r.BLEND),v=!0),ye!==w0){if(ye!==x||Ie!==E){if((b!==to||S!==to)&&(r.blendEquation(r.FUNC_ADD),b=to,S=to),Ie)switch(ye){case Eo:r.blendFuncSeparate(r.ONE,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Nl:r.blendFunc(r.ONE,r.ONE);break;case Cu:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Au:r.blendFuncSeparate(r.ZERO,r.SRC_COLOR,r.ZERO,r.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ye);break}else switch(ye){case Eo:r.blendFuncSeparate(r.SRC_ALPHA,r.ONE_MINUS_SRC_ALPHA,r.ONE,r.ONE_MINUS_SRC_ALPHA);break;case Nl:r.blendFunc(r.SRC_ALPHA,r.ONE);break;case Cu:r.blendFuncSeparate(r.ZERO,r.ONE_MINUS_SRC_COLOR,r.ZERO,r.ONE);break;case Au:r.blendFunc(r.ZERO,r.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ye);break}w=null,_=null,T=null,M=null,x=ye,E=Ie}return}Me=Me||nt,Ne=Ne||He,fe=fe||tt,(nt!==b||Me!==S)&&(r.blendEquationSeparate(L[nt],L[Me]),b=nt,S=Me),(He!==w||tt!==_||Ne!==T||fe!==M)&&(r.blendFuncSeparate($[He],$[tt],$[Ne],$[fe]),w=He,_=tt,T=Ne,M=fe),x=ye,E=!1}function te(ye,nt){ye.side===Wi?q(r.CULL_FACE):K(r.CULL_FACE);let He=ye.side===Oi;nt&&(He=!He),le(He),ye.blending===Eo&&ye.transparent===!1?re(Xn):re(ye.blending,ye.blendEquation,ye.blendSrc,ye.blendDst,ye.blendEquationAlpha,ye.blendSrcAlpha,ye.blendDstAlpha,ye.premultipliedAlpha),l.setFunc(ye.depthFunc),l.setTest(ye.depthTest),l.setMask(ye.depthWrite),a.setMask(ye.colorWrite);const tt=ye.stencilWrite;c.setTest(tt),tt&&(c.setMask(ye.stencilWriteMask),c.setFunc(ye.stencilFunc,ye.stencilRef,ye.stencilFuncMask),c.setOp(ye.stencilFail,ye.stencilZFail,ye.stencilZPass)),_e(ye.polygonOffset,ye.polygonOffsetFactor,ye.polygonOffsetUnits),ye.alphaToCoverage===!0?K(r.SAMPLE_ALPHA_TO_COVERAGE):q(r.SAMPLE_ALPHA_TO_COVERAGE)}function le(ye){C!==ye&&(ye?r.frontFace(r.CW):r.frontFace(r.CCW),C=ye)}function ge(ye){ye!==CA?(K(r.CULL_FACE),ye!==P&&(ye===Aw?r.cullFace(r.BACK):ye===AA?r.cullFace(r.FRONT):r.cullFace(r.FRONT_AND_BACK))):q(r.CULL_FACE),P=ye}function be(ye){ye!==A&&(B&&r.lineWidth(ye),A=ye)}function _e(ye,nt,He){ye?(K(r.POLYGON_OFFSET_FILL),(N!==nt||R!==He)&&(r.polygonOffset(nt,He),N=nt,R=He)):q(r.POLYGON_OFFSET_FILL)}function pe(ye){ye?K(r.SCISSOR_TEST):q(r.SCISSOR_TEST)}function Se(ye){ye===void 0&&(ye=r.TEXTURE0+F-1),O!==ye&&(r.activeTexture(ye),O=ye)}function Fe(ye,nt,He){He===void 0&&(O===null?He=r.TEXTURE0+F-1:He=O);let tt=V[He];tt===void 0&&(tt={type:void 0,texture:void 0},V[He]=tt),(tt.type!==ye||tt.texture!==nt)&&(O!==He&&(r.activeTexture(He),O=He),r.bindTexture(ye,nt||de[ye]),tt.type=ye,tt.texture=nt)}function Y(){const ye=V[O];ye!==void 0&&ye.type!==void 0&&(r.bindTexture(ye.type,null),ye.type=void 0,ye.texture=void 0)}function H(){try{r.compressedTexImage2D.apply(r,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function ne(){try{r.compressedTexImage3D.apply(r,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Le(){try{r.texSubImage2D.apply(r,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Pe(){try{r.texSubImage3D.apply(r,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Ee(){try{r.compressedTexSubImage2D.apply(r,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Ue(){try{r.compressedTexSubImage3D.apply(r,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Be(){try{r.texStorage2D.apply(r,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function ve(){try{r.texStorage3D.apply(r,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function Q(){try{r.texImage2D.apply(r,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function he(){try{r.texImage3D.apply(r,arguments)}catch(ye){console.error("THREE.WebGLState:",ye)}}function we(ye){X.equals(ye)===!1&&(r.scissor(ye.x,ye.y,ye.z,ye.w),X.copy(ye))}function ae(ye){ie.equals(ye)===!1&&(r.viewport(ye.x,ye.y,ye.z,ye.w),ie.copy(ye))}function De(ye,nt){let He=d.get(nt);He===void 0&&(He=new WeakMap,d.set(nt,He));let tt=He.get(ye);tt===void 0&&(tt=r.getUniformBlockIndex(nt,ye.name),He.set(ye,tt))}function We(ye,nt){const He=d.get(nt).get(ye);u.get(nt)!==He&&(r.uniformBlockBinding(nt,He,ye.__bindingPointIndex),u.set(nt,He))}function je(){r.disable(r.BLEND),r.disable(r.CULL_FACE),r.disable(r.DEPTH_TEST),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SCISSOR_TEST),r.disable(r.STENCIL_TEST),r.disable(r.SAMPLE_ALPHA_TO_COVERAGE),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ZERO),r.blendFuncSeparate(r.ONE,r.ZERO,r.ONE,r.ZERO),r.colorMask(!0,!0,!0,!0),r.clearColor(0,0,0,0),r.depthMask(!0),r.depthFunc(r.LESS),r.clearDepth(1),r.stencilMask(4294967295),r.stencilFunc(r.ALWAYS,0,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),r.clearStencil(0),r.cullFace(r.BACK),r.frontFace(r.CCW),r.polygonOffset(0,0),r.activeTexture(r.TEXTURE0),r.bindFramebuffer(r.FRAMEBUFFER,null),i===!0&&(r.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),r.bindFramebuffer(r.READ_FRAMEBUFFER,null)),r.useProgram(null),r.lineWidth(1),r.scissor(0,0,r.canvas.width,r.canvas.height),r.viewport(0,0,r.canvas.width,r.canvas.height),h={},O=null,V={},p={},f=new WeakMap,m=[],g=null,v=!1,x=null,b=null,w=null,_=null,S=null,T=null,M=null,E=!1,C=null,P=null,A=null,N=null,R=null,X.set(0,0,r.canvas.width,r.canvas.height),ie.set(0,0,r.canvas.width,r.canvas.height),a.reset(),l.reset(),c.reset()}return{buffers:{color:a,depth:l,stencil:c},enable:K,disable:q,bindFramebuffer:ce,drawBuffers:Te,useProgram:Z,setBlending:re,setMaterial:te,setFlipSided:le,setCullFace:ge,setLineWidth:be,setPolygonOffset:_e,setScissorTest:pe,activeTexture:Se,bindTexture:Fe,unbindTexture:Y,compressedTexImage2D:H,compressedTexImage3D:ne,texImage2D:Q,texImage3D:he,updateUBOMapping:De,uniformBlockBinding:We,texStorage2D:Be,texStorage3D:ve,texSubImage2D:Le,texSubImage3D:Pe,compressedTexSubImage2D:Ee,compressedTexSubImage3D:Ue,scissor:we,viewport:ae,reset:je}}function KDe(r,e,t,i,n,s,o){const a=n.isWebGL2,l=n.maxTextures,c=n.maxCubemapSize,u=n.maxTextureSize,d=n.maxSamples,h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,p=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),f=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(Y,H){return v?new OffscreenCanvas(Y,H):my("canvas")}function b(Y,H,ne,Le){let Pe=1;if((Y.width>Le||Y.height>Le)&&(Pe=Le/Math.max(Y.width,Y.height)),Pe<1||H===!0)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap){const Ee=H?Gw:Math.floor,Ue=Ee(Pe*Y.width),Be=Ee(Pe*Y.height);m===void 0&&(m=x(Ue,Be));const ve=ne?x(Ue,Be):m;return ve.width=Ue,ve.height=Be,ve.getContext("2d").drawImage(Y,0,0,Ue,Be),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Y.width+"x"+Y.height+") to ("+Ue+"x"+Be+")."),ve}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Y.width+"x"+Y.height+")."),Y;return Y}function w(Y){return QA(Y.width)&&QA(Y.height)}function _(Y){return a?!1:Y.wrapS!==Mi||Y.wrapT!==Mi||Y.minFilter!==Mr&&Y.minFilter!==Or}function S(Y,H){return Y.generateMipmaps&&H&&Y.minFilter!==Mr&&Y.minFilter!==Or}function T(Y){r.generateMipmap(Y)}function M(Y,H,ne,Le,Pe=!1){if(a===!1)return H;if(Y!==null){if(r[Y]!==void 0)return r[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let Ee=H;if(H===r.RED&&(ne===r.FLOAT&&(Ee=r.R32F),ne===r.HALF_FLOAT&&(Ee=r.R16F),ne===r.UNSIGNED_BYTE&&(Ee=r.R8)),H===r.RED_INTEGER&&(ne===r.UNSIGNED_BYTE&&(Ee=r.R8UI),ne===r.UNSIGNED_SHORT&&(Ee=r.R16UI),ne===r.UNSIGNED_INT&&(Ee=r.R32UI),ne===r.BYTE&&(Ee=r.R8I),ne===r.SHORT&&(Ee=r.R16I),ne===r.INT&&(Ee=r.R32I)),H===r.RG&&(ne===r.FLOAT&&(Ee=r.RG32F),ne===r.HALF_FLOAT&&(Ee=r.RG16F),ne===r.UNSIGNED_BYTE&&(Ee=r.RG8)),H===r.RGBA){const Ue=Pe?iy:Hr.getTransfer(Le);ne===r.FLOAT&&(Ee=r.RGBA32F),ne===r.HALF_FLOAT&&(Ee=r.RGBA16F),ne===r.UNSIGNED_BYTE&&(Ee=Ue===ci?r.SRGB8_ALPHA8:r.RGBA8),ne===r.UNSIGNED_SHORT_4_4_4_4&&(Ee=r.RGBA4),ne===r.UNSIGNED_SHORT_5_5_5_1&&(Ee=r.RGB5_A1)}return(Ee===r.R16F||Ee===r.R32F||Ee===r.RG16F||Ee===r.RG32F||Ee===r.RGBA16F||Ee===r.RGBA32F)&&e.get("EXT_color_buffer_float"),Ee}function E(Y,H,ne){return S(Y,ne)===!0||Y.isFramebufferTexture&&Y.minFilter!==Mr&&Y.minFilter!==Or?Math.log2(Math.max(H.width,H.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?H.mipmaps.length:1}function C(Y){return Y===Mr||Y===Ll||Y===ca?r.NEAREST:r.LINEAR}function P(Y){const H=Y.target;H.removeEventListener("dispose",P),N(H),H.isVideoTexture&&f.delete(H)}function A(Y){const H=Y.target;H.removeEventListener("dispose",A),F(H)}function N(Y){const H=i.get(Y);if(H.__webglInit===void 0)return;const ne=Y.source,Le=g.get(ne);if(Le){const Pe=Le[H.__cacheKey];Pe.usedTimes--,Pe.usedTimes===0&&R(Y),Object.keys(Le).length===0&&g.delete(ne)}i.remove(Y)}function R(Y){const H=i.get(Y);r.deleteTexture(H.__webglTexture);const ne=Y.source,Le=g.get(ne);delete Le[H.__cacheKey],o.memory.textures--}function F(Y){const H=Y.texture,ne=i.get(Y),Le=i.get(H);if(Le.__webglTexture!==void 0&&(r.deleteTexture(Le.__webglTexture),o.memory.textures--),Y.depthTexture&&Y.depthTexture.dispose(),Y.isWebGLCubeRenderTarget)for(let Pe=0;Pe<6;Pe++){if(Array.isArray(ne.__webglFramebuffer[Pe]))for(let Ee=0;Ee<ne.__webglFramebuffer[Pe].length;Ee++)r.deleteFramebuffer(ne.__webglFramebuffer[Pe][Ee]);else r.deleteFramebuffer(ne.__webglFramebuffer[Pe]);ne.__webglDepthbuffer&&r.deleteRenderbuffer(ne.__webglDepthbuffer[Pe])}else{if(Array.isArray(ne.__webglFramebuffer))for(let Pe=0;Pe<ne.__webglFramebuffer.length;Pe++)r.deleteFramebuffer(ne.__webglFramebuffer[Pe]);else r.deleteFramebuffer(ne.__webglFramebuffer);if(ne.__webglDepthbuffer&&r.deleteRenderbuffer(ne.__webglDepthbuffer),ne.__webglMultisampledFramebuffer&&r.deleteFramebuffer(ne.__webglMultisampledFramebuffer),ne.__webglColorRenderbuffer)for(let Pe=0;Pe<ne.__webglColorRenderbuffer.length;Pe++)ne.__webglColorRenderbuffer[Pe]&&r.deleteRenderbuffer(ne.__webglColorRenderbuffer[Pe]);ne.__webglDepthRenderbuffer&&r.deleteRenderbuffer(ne.__webglDepthRenderbuffer)}if(Y.isWebGLMultipleRenderTargets)for(let Pe=0,Ee=H.length;Pe<Ee;Pe++){const Ue=i.get(H[Pe]);Ue.__webglTexture&&(r.deleteTexture(Ue.__webglTexture),o.memory.textures--),i.remove(H[Pe])}i.remove(H),i.remove(Y)}let B=0;function k(){B=0}function z(){const Y=B;return Y>=l&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+l),B+=1,Y}function O(Y){const H=[];return H.push(Y.wrapS),H.push(Y.wrapT),H.push(Y.wrapR||0),H.push(Y.magFilter),H.push(Y.minFilter),H.push(Y.anisotropy),H.push(Y.internalFormat),H.push(Y.format),H.push(Y.type),H.push(Y.generateMipmaps),H.push(Y.premultiplyAlpha),H.push(Y.flipY),H.push(Y.unpackAlignment),H.push(Y.colorSpace),H.join()}function V(Y,H){const ne=i.get(Y);if(Y.isVideoTexture&&Se(Y),Y.isRenderTargetTexture===!1&&Y.version>0&&ne.__version!==Y.version){const Le=Y.image;if(Le===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Le.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ce(ne,Y,H);return}}t.bindTexture(r.TEXTURE_2D,ne.__webglTexture,r.TEXTURE0+H)}function U(Y,H){const ne=i.get(Y);if(Y.version>0&&ne.__version!==Y.version){ce(ne,Y,H);return}t.bindTexture(r.TEXTURE_2D_ARRAY,ne.__webglTexture,r.TEXTURE0+H)}function G(Y,H){const ne=i.get(Y);if(Y.version>0&&ne.__version!==Y.version){ce(ne,Y,H);return}t.bindTexture(r.TEXTURE_3D,ne.__webglTexture,r.TEXTURE0+H)}function X(Y,H){const ne=i.get(Y);if(Y.version>0&&ne.__version!==Y.version){Te(ne,Y,H);return}t.bindTexture(r.TEXTURE_CUBE_MAP,ne.__webglTexture,r.TEXTURE0+H)}const ie={[ds]:r.REPEAT,[Mi]:r.CLAMP_TO_EDGE,[kl]:r.MIRRORED_REPEAT},se={[Mr]:r.NEAREST,[Ll]:r.NEAREST_MIPMAP_NEAREST,[ca]:r.NEAREST_MIPMAP_LINEAR,[Or]:r.LINEAR,[hh]:r.LINEAR_MIPMAP_NEAREST,[qn]:r.LINEAR_MIPMAP_LINEAR},de={[oy]:r.NEVER,[hy]:r.ALWAYS,[dm]:r.LESS,[ly]:r.LEQUAL,[ay]:r.EQUAL,[dy]:r.GEQUAL,[cy]:r.GREATER,[uy]:r.NOTEQUAL};function K(Y,H,ne){if(ne?(r.texParameteri(Y,r.TEXTURE_WRAP_S,ie[H.wrapS]),r.texParameteri(Y,r.TEXTURE_WRAP_T,ie[H.wrapT]),(Y===r.TEXTURE_3D||Y===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Y,r.TEXTURE_WRAP_R,ie[H.wrapR]),r.texParameteri(Y,r.TEXTURE_MAG_FILTER,se[H.magFilter]),r.texParameteri(Y,r.TEXTURE_MIN_FILTER,se[H.minFilter])):(r.texParameteri(Y,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(Y,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),(Y===r.TEXTURE_3D||Y===r.TEXTURE_2D_ARRAY)&&r.texParameteri(Y,r.TEXTURE_WRAP_R,r.CLAMP_TO_EDGE),(H.wrapS!==Mi||H.wrapT!==Mi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),r.texParameteri(Y,r.TEXTURE_MAG_FILTER,C(H.magFilter)),r.texParameteri(Y,r.TEXTURE_MIN_FILTER,C(H.minFilter)),H.minFilter!==Mr&&H.minFilter!==Or&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),H.compareFunction&&(r.texParameteri(Y,r.TEXTURE_COMPARE_MODE,r.COMPARE_REF_TO_TEXTURE),r.texParameteri(Y,r.TEXTURE_COMPARE_FUNC,de[H.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Le=e.get("EXT_texture_filter_anisotropic");if(H.magFilter===Mr||H.minFilter!==ca&&H.minFilter!==qn||H.type===mi&&e.has("OES_texture_float_linear")===!1||a===!1&&H.type===gi&&e.has("OES_texture_half_float_linear")===!1)return;(H.anisotropy>1||i.get(H).__currentAnisotropy)&&(r.texParameterf(Y,Le.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,n.getMaxAnisotropy())),i.get(H).__currentAnisotropy=H.anisotropy)}}function q(Y,H){let ne=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,H.addEventListener("dispose",P));const Le=H.source;let Pe=g.get(Le);Pe===void 0&&(Pe={},g.set(Le,Pe));const Ee=O(H);if(Ee!==Y.__cacheKey){Pe[Ee]===void 0&&(Pe[Ee]={texture:r.createTexture(),usedTimes:0},o.memory.textures++,ne=!0),Pe[Ee].usedTimes++;const Ue=Pe[Y.__cacheKey];Ue!==void 0&&(Pe[Y.__cacheKey].usedTimes--,Ue.usedTimes===0&&R(H)),Y.__cacheKey=Ee,Y.__webglTexture=Pe[Ee].texture}return ne}function ce(Y,H,ne){let Le=r.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&&(Le=r.TEXTURE_2D_ARRAY),H.isData3DTexture&&(Le=r.TEXTURE_3D);const Pe=q(Y,H),Ee=H.source;t.bindTexture(Le,Y.__webglTexture,r.TEXTURE0+ne);const Ue=i.get(Ee);if(Ee.version!==Ue.__version||Pe===!0){t.activeTexture(r.TEXTURE0+ne);const Be=Hr.getPrimaries(Hr.workingColorSpace),ve=H.colorSpace===kn?null:Hr.getPrimaries(H.colorSpace),Q=H.colorSpace===kn||Be===ve?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,H.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,H.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,Q);const he=_(H)&&w(H.image)===!1;let we=b(H.image,he,!1,u);we=Fe(H,we);const ae=w(we)||a,De=s.convert(H.format,H.colorSpace);let We=s.convert(H.type),je=M(H.internalFormat,De,We,H.colorSpace,H.isVideoTexture);K(Le,H,ae);let ye;const nt=H.mipmaps,He=a&&H.isVideoTexture!==!0,tt=Ue.__version===void 0||Pe===!0,Me=E(H,we,ae);if(H.isDepthTexture)je=r.DEPTH_COMPONENT,a?H.type===mi?je=r.DEPTH_COMPONENT32F:H.type===no?je=r.DEPTH_COMPONENT24:H.type===Ao?je=r.DEPTH24_STENCIL8:je=r.DEPTH_COMPONENT16:H.type===mi&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),H.format===hs&&je===r.DEPTH_COMPONENT&&H.type!==ph&&H.type!==no&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),H.type=no,We=s.convert(H.type)),H.format===so&&je===r.DEPTH_COMPONENT&&(je=r.DEPTH_STENCIL,H.type!==Ao&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),H.type=Ao,We=s.convert(H.type))),tt&&(He?t.texStorage2D(r.TEXTURE_2D,1,je,we.width,we.height):t.texImage2D(r.TEXTURE_2D,0,je,we.width,we.height,0,De,We,null));else if(H.isDataTexture)if(nt.length>0&&ae){He&&tt&&t.texStorage2D(r.TEXTURE_2D,Me,je,nt[0].width,nt[0].height);for(let Ne=0,fe=nt.length;Ne<fe;Ne++)ye=nt[Ne],He?t.texSubImage2D(r.TEXTURE_2D,Ne,0,0,ye.width,ye.height,De,We,ye.data):t.texImage2D(r.TEXTURE_2D,Ne,je,ye.width,ye.height,0,De,We,ye.data);H.generateMipmaps=!1}else He?(tt&&t.texStorage2D(r.TEXTURE_2D,Me,je,we.width,we.height),t.texSubImage2D(r.TEXTURE_2D,0,0,0,we.width,we.height,De,We,we.data)):t.texImage2D(r.TEXTURE_2D,0,je,we.width,we.height,0,De,We,we.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){He&&tt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Me,je,nt[0].width,nt[0].height,we.depth);for(let Ne=0,fe=nt.length;Ne<fe;Ne++)ye=nt[Ne],H.format!==Rn?De!==null?He?t.compressedTexSubImage3D(r.TEXTURE_2D_ARRAY,Ne,0,0,0,ye.width,ye.height,we.depth,De,ye.data,0,0):t.compressedTexImage3D(r.TEXTURE_2D_ARRAY,Ne,je,ye.width,ye.height,we.depth,0,ye.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?t.texSubImage3D(r.TEXTURE_2D_ARRAY,Ne,0,0,0,ye.width,ye.height,we.depth,De,We,ye.data):t.texImage3D(r.TEXTURE_2D_ARRAY,Ne,je,ye.width,ye.height,we.depth,0,De,We,ye.data)}else{He&&tt&&t.texStorage2D(r.TEXTURE_2D,Me,je,nt[0].width,nt[0].height);for(let Ne=0,fe=nt.length;Ne<fe;Ne++)ye=nt[Ne],H.format!==Rn?De!==null?He?t.compressedTexSubImage2D(r.TEXTURE_2D,Ne,0,0,ye.width,ye.height,De,ye.data):t.compressedTexImage2D(r.TEXTURE_2D,Ne,je,ye.width,ye.height,0,ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):He?t.texSubImage2D(r.TEXTURE_2D,Ne,0,0,ye.width,ye.height,De,We,ye.data):t.texImage2D(r.TEXTURE_2D,Ne,je,ye.width,ye.height,0,De,We,ye.data)}else if(H.isDataArrayTexture)He?(tt&&t.texStorage3D(r.TEXTURE_2D_ARRAY,Me,je,we.width,we.height,we.depth),t.texSubImage3D(r.TEXTURE_2D_ARRAY,0,0,0,0,we.width,we.height,we.depth,De,We,we.data)):t.texImage3D(r.TEXTURE_2D_ARRAY,0,je,we.width,we.height,we.depth,0,De,We,we.data);else if(H.isData3DTexture)He?(tt&&t.texStorage3D(r.TEXTURE_3D,Me,je,we.width,we.height,we.depth),t.texSubImage3D(r.TEXTURE_3D,0,0,0,0,we.width,we.height,we.depth,De,We,we.data)):t.texImage3D(r.TEXTURE_3D,0,je,we.width,we.height,we.depth,0,De,We,we.data);else if(H.isFramebufferTexture){if(tt)if(He)t.texStorage2D(r.TEXTURE_2D,Me,je,we.width,we.height);else{let Ne=we.width,fe=we.height;for(let Ie=0;Ie<Me;Ie++)t.texImage2D(r.TEXTURE_2D,Ie,je,Ne,fe,0,De,We,null),Ne>>=1,fe>>=1}}else if(nt.length>0&&ae){He&&tt&&t.texStorage2D(r.TEXTURE_2D,Me,je,nt[0].width,nt[0].height);for(let Ne=0,fe=nt.length;Ne<fe;Ne++)ye=nt[Ne],He?t.texSubImage2D(r.TEXTURE_2D,Ne,0,0,De,We,ye):t.texImage2D(r.TEXTURE_2D,Ne,je,De,We,ye);H.generateMipmaps=!1}else He?(tt&&t.texStorage2D(r.TEXTURE_2D,Me,je,we.width,we.height),t.texSubImage2D(r.TEXTURE_2D,0,0,0,De,We,we)):t.texImage2D(r.TEXTURE_2D,0,je,De,We,we);S(H,ae)&&T(Le),Ue.__version=Ee.version,H.onUpdate&&H.onUpdate(H)}Y.__version=H.version}function Te(Y,H,ne){if(H.image.length!==6)return;const Le=q(Y,H),Pe=H.source;t.bindTexture(r.TEXTURE_CUBE_MAP,Y.__webglTexture,r.TEXTURE0+ne);const Ee=i.get(Pe);if(Pe.version!==Ee.__version||Le===!0){t.activeTexture(r.TEXTURE0+ne);const Ue=Hr.getPrimaries(Hr.workingColorSpace),Be=H.colorSpace===kn?null:Hr.getPrimaries(H.colorSpace),ve=H.colorSpace===kn||Ue===Be?r.NONE:r.BROWSER_DEFAULT_WEBGL;r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,H.flipY),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),r.pixelStorei(r.UNPACK_ALIGNMENT,H.unpackAlignment),r.pixelStorei(r.UNPACK_COLORSPACE_CONVERSION_WEBGL,ve);const Q=H.isCompressedTexture||H.image[0].isCompressedTexture,he=H.image[0]&&H.image[0].isDataTexture,we=[];for(let Ne=0;Ne<6;Ne++)!Q&&!he?we[Ne]=b(H.image[Ne],!1,!0,c):we[Ne]=he?H.image[Ne].image:H.image[Ne],we[Ne]=Fe(H,we[Ne]);const ae=we[0],De=w(ae)||a,We=s.convert(H.format,H.colorSpace),je=s.convert(H.type),ye=M(H.internalFormat,We,je,H.colorSpace),nt=a&&H.isVideoTexture!==!0,He=Ee.__version===void 0||Le===!0;let tt=E(H,ae,De);K(r.TEXTURE_CUBE_MAP,H,De);let Me;if(Q){nt&&He&&t.texStorage2D(r.TEXTURE_CUBE_MAP,tt,ye,ae.width,ae.height);for(let Ne=0;Ne<6;Ne++){Me=we[Ne].mipmaps;for(let fe=0;fe<Me.length;fe++){const Ie=Me[fe];H.format!==Rn?We!==null?nt?t.compressedTexSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,fe,0,0,Ie.width,Ie.height,We,Ie.data):t.compressedTexImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,fe,ye,Ie.width,Ie.height,0,Ie.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):nt?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,fe,0,0,Ie.width,Ie.height,We,je,Ie.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,fe,ye,Ie.width,Ie.height,0,We,je,Ie.data)}}}else{Me=H.mipmaps,nt&&He&&(Me.length>0&&tt++,t.texStorage2D(r.TEXTURE_CUBE_MAP,tt,ye,we[0].width,we[0].height));for(let Ne=0;Ne<6;Ne++)if(he){nt?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,we[Ne].width,we[Ne].height,We,je,we[Ne].data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,ye,we[Ne].width,we[Ne].height,0,We,je,we[Ne].data);for(let fe=0;fe<Me.length;fe++){const Ie=Me[fe].image[Ne].image;nt?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,fe+1,0,0,Ie.width,Ie.height,We,je,Ie.data):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,fe+1,ye,Ie.width,Ie.height,0,We,je,Ie.data)}}else{nt?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,We,je,we[Ne]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,ye,We,je,we[Ne]);for(let fe=0;fe<Me.length;fe++){const Ie=Me[fe];nt?t.texSubImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,fe+1,0,0,We,je,Ie.image[Ne]):t.texImage2D(r.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,fe+1,ye,We,je,Ie.image[Ne])}}}S(H,De)&&T(r.TEXTURE_CUBE_MAP),Ee.__version=Pe.version,H.onUpdate&&H.onUpdate(H)}Y.__version=H.version}function Z(Y,H,ne,Le,Pe,Ee){const Ue=s.convert(ne.format,ne.colorSpace),Be=s.convert(ne.type),ve=M(ne.internalFormat,Ue,Be,ne.colorSpace);if(!i.get(H).__hasExternalTextures){const Q=Math.max(1,H.width>>Ee),he=Math.max(1,H.height>>Ee);Pe===r.TEXTURE_3D||Pe===r.TEXTURE_2D_ARRAY?t.texImage3D(Pe,Ee,ve,Q,he,H.depth,0,Ue,Be,null):t.texImage2D(Pe,Ee,ve,Q,he,0,Ue,Be,null)}t.bindFramebuffer(r.FRAMEBUFFER,Y),pe(H)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,Le,Pe,i.get(ne).__webglTexture,0,_e(H)):(Pe===r.TEXTURE_2D||Pe>=r.TEXTURE_CUBE_MAP_POSITIVE_X&&Pe<=r.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&r.framebufferTexture2D(r.FRAMEBUFFER,Le,Pe,i.get(ne).__webglTexture,Ee),t.bindFramebuffer(r.FRAMEBUFFER,null)}function L(Y,H,ne){if(r.bindRenderbuffer(r.RENDERBUFFER,Y),H.depthBuffer&&!H.stencilBuffer){let Le=a===!0?r.DEPTH_COMPONENT24:r.DEPTH_COMPONENT16;if(ne||pe(H)){const Pe=H.depthTexture;Pe&&Pe.isDepthTexture&&(Pe.type===mi?Le=r.DEPTH_COMPONENT32F:Pe.type===no&&(Le=r.DEPTH_COMPONENT24));const Ee=_e(H);pe(H)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Ee,Le,H.width,H.height):r.renderbufferStorageMultisample(r.RENDERBUFFER,Ee,Le,H.width,H.height)}else r.renderbufferStorage(r.RENDERBUFFER,Le,H.width,H.height);r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,Y)}else if(H.depthBuffer&&H.stencilBuffer){const Le=_e(H);ne&&pe(H)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Le,r.DEPTH24_STENCIL8,H.width,H.height):pe(H)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Le,r.DEPTH24_STENCIL8,H.width,H.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,H.width,H.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,Y)}else{const Le=H.isWebGLMultipleRenderTargets===!0?H.texture:[H.texture];for(let Pe=0;Pe<Le.length;Pe++){const Ee=Le[Pe],Ue=s.convert(Ee.format,Ee.colorSpace),Be=s.convert(Ee.type),ve=M(Ee.internalFormat,Ue,Be,Ee.colorSpace),Q=_e(H);ne&&pe(H)===!1?r.renderbufferStorageMultisample(r.RENDERBUFFER,Q,ve,H.width,H.height):pe(H)?h.renderbufferStorageMultisampleEXT(r.RENDERBUFFER,Q,ve,H.width,H.height):r.renderbufferStorage(r.RENDERBUFFER,ve,H.width,H.height)}}r.bindRenderbuffer(r.RENDERBUFFER,null)}function $(Y,H){if(H&&H.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(r.FRAMEBUFFER,Y),!(H.depthTexture&&H.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(H.depthTexture).__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&&(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),V(H.depthTexture,0);const ne=i.get(H.depthTexture).__webglTexture,Le=_e(H);if(H.depthTexture.format===hs)pe(H)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,ne,0,Le):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,ne,0);else if(H.depthTexture.format===so)pe(H)?h.framebufferTexture2DMultisampleEXT(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,ne,0,Le):r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.TEXTURE_2D,ne,0);else throw new Error("Unknown depthTexture format")}function re(Y){const H=i.get(Y),ne=Y.isWebGLCubeRenderTarget===!0;if(Y.depthTexture&&!H.__autoAllocateDepthBuffer){if(ne)throw new Error("target.depthTexture not supported in Cube render targets");$(H.__webglFramebuffer,Y)}else if(ne){H.__webglDepthbuffer=[];for(let Le=0;Le<6;Le++)t.bindFramebuffer(r.FRAMEBUFFER,H.__webglFramebuffer[Le]),H.__webglDepthbuffer[Le]=r.createRenderbuffer(),L(H.__webglDepthbuffer[Le],Y,!1)}else t.bindFramebuffer(r.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer=r.createRenderbuffer(),L(H.__webglDepthbuffer,Y,!1);t.bindFramebuffer(r.FRAMEBUFFER,null)}function te(Y,H,ne){const Le=i.get(Y);H!==void 0&&Z(Le.__webglFramebuffer,Y,Y.texture,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,0),ne!==void 0&&re(Y)}function le(Y){const H=Y.texture,ne=i.get(Y),Le=i.get(H);Y.addEventListener("dispose",A),Y.isWebGLMultipleRenderTargets!==!0&&(Le.__webglTexture===void 0&&(Le.__webglTexture=r.createTexture()),Le.__version=H.version,o.memory.textures++);const Pe=Y.isWebGLCubeRenderTarget===!0,Ee=Y.isWebGLMultipleRenderTargets===!0,Ue=w(Y)||a;if(Pe){ne.__webglFramebuffer=[];for(let Be=0;Be<6;Be++)if(a&&H.mipmaps&&H.mipmaps.length>0){ne.__webglFramebuffer[Be]=[];for(let ve=0;ve<H.mipmaps.length;ve++)ne.__webglFramebuffer[Be][ve]=r.createFramebuffer()}else ne.__webglFramebuffer[Be]=r.createFramebuffer()}else{if(a&&H.mipmaps&&H.mipmaps.length>0){ne.__webglFramebuffer=[];for(let Be=0;Be<H.mipmaps.length;Be++)ne.__webglFramebuffer[Be]=r.createFramebuffer()}else ne.__webglFramebuffer=r.createFramebuffer();if(Ee)if(n.drawBuffers){const Be=Y.texture;for(let ve=0,Q=Be.length;ve<Q;ve++){const he=i.get(Be[ve]);he.__webglTexture===void 0&&(he.__webglTexture=r.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&Y.samples>0&&pe(Y)===!1){const Be=Ee?H:[H];ne.__webglMultisampledFramebuffer=r.createFramebuffer(),ne.__webglColorRenderbuffer=[],t.bindFramebuffer(r.FRAMEBUFFER,ne.__webglMultisampledFramebuffer);for(let ve=0;ve<Be.length;ve++){const Q=Be[ve];ne.__webglColorRenderbuffer[ve]=r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,ne.__webglColorRenderbuffer[ve]);const he=s.convert(Q.format,Q.colorSpace),we=s.convert(Q.type),ae=M(Q.internalFormat,he,we,Q.colorSpace,Y.isXRRenderTarget===!0),De=_e(Y);r.renderbufferStorageMultisample(r.RENDERBUFFER,De,ae,Y.width,Y.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+ve,r.RENDERBUFFER,ne.__webglColorRenderbuffer[ve])}r.bindRenderbuffer(r.RENDERBUFFER,null),Y.depthBuffer&&(ne.__webglDepthRenderbuffer=r.createRenderbuffer(),L(ne.__webglDepthRenderbuffer,Y,!0)),t.bindFramebuffer(r.FRAMEBUFFER,null)}}if(Pe){t.bindTexture(r.TEXTURE_CUBE_MAP,Le.__webglTexture),K(r.TEXTURE_CUBE_MAP,H,Ue);for(let Be=0;Be<6;Be++)if(a&&H.mipmaps&&H.mipmaps.length>0)for(let ve=0;ve<H.mipmaps.length;ve++)Z(ne.__webglFramebuffer[Be][ve],Y,H,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,ve);else Z(ne.__webglFramebuffer[Be],Y,H,r.COLOR_ATTACHMENT0,r.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0);S(H,Ue)&&T(r.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ee){const Be=Y.texture;for(let ve=0,Q=Be.length;ve<Q;ve++){const he=Be[ve],we=i.get(he);t.bindTexture(r.TEXTURE_2D,we.__webglTexture),K(r.TEXTURE_2D,he,Ue),Z(ne.__webglFramebuffer,Y,he,r.COLOR_ATTACHMENT0+ve,r.TEXTURE_2D,0),S(he,Ue)&&T(r.TEXTURE_2D)}t.unbindTexture()}else{let Be=r.TEXTURE_2D;if((Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(a?Be=Y.isWebGL3DRenderTarget?r.TEXTURE_3D:r.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Be,Le.__webglTexture),K(Be,H,Ue),a&&H.mipmaps&&H.mipmaps.length>0)for(let ve=0;ve<H.mipmaps.length;ve++)Z(ne.__webglFramebuffer[ve],Y,H,r.COLOR_ATTACHMENT0,Be,ve);else Z(ne.__webglFramebuffer,Y,H,r.COLOR_ATTACHMENT0,Be,0);S(H,Ue)&&T(Be),t.unbindTexture()}Y.depthBuffer&&re(Y)}function ge(Y){const H=w(Y)||a,ne=Y.isWebGLMultipleRenderTargets===!0?Y.texture:[Y.texture];for(let Le=0,Pe=ne.length;Le<Pe;Le++){const Ee=ne[Le];if(S(Ee,H)){const Ue=Y.isWebGLCubeRenderTarget?r.TEXTURE_CUBE_MAP:r.TEXTURE_2D,Be=i.get(Ee).__webglTexture;t.bindTexture(Ue,Be),T(Ue),t.unbindTexture()}}}function be(Y){if(a&&Y.samples>0&&pe(Y)===!1){const H=Y.isWebGLMultipleRenderTargets?Y.texture:[Y.texture],ne=Y.width,Le=Y.height;let Pe=r.COLOR_BUFFER_BIT;const Ee=[],Ue=Y.stencilBuffer?r.DEPTH_STENCIL_ATTACHMENT:r.DEPTH_ATTACHMENT,Be=i.get(Y),ve=Y.isWebGLMultipleRenderTargets===!0;if(ve)for(let Q=0;Q<H.length;Q++)t.bindFramebuffer(r.FRAMEBUFFER,Be.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Q,r.RENDERBUFFER,null),t.bindFramebuffer(r.FRAMEBUFFER,Be.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Q,r.TEXTURE_2D,null,0);t.bindFramebuffer(r.READ_FRAMEBUFFER,Be.__webglMultisampledFramebuffer),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Be.__webglFramebuffer);for(let Q=0;Q<H.length;Q++){Ee.push(r.COLOR_ATTACHMENT0+Q),Y.depthBuffer&&Ee.push(Ue);const he=Be.__ignoreDepthValues!==void 0?Be.__ignoreDepthValues:!1;if(he===!1&&(Y.depthBuffer&&(Pe|=r.DEPTH_BUFFER_BIT),Y.stencilBuffer&&(Pe|=r.STENCIL_BUFFER_BIT)),ve&&r.framebufferRenderbuffer(r.READ_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,Be.__webglColorRenderbuffer[Q]),he===!0&&(r.invalidateFramebuffer(r.READ_FRAMEBUFFER,[Ue]),r.invalidateFramebuffer(r.DRAW_FRAMEBUFFER,[Ue])),ve){const we=i.get(H[Q]).__webglTexture;r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,we,0)}r.blitFramebuffer(0,0,ne,Le,0,0,ne,Le,Pe,r.NEAREST),p&&r.invalidateFramebuffer(r.READ_FRAMEBUFFER,Ee)}if(t.bindFramebuffer(r.READ_FRAMEBUFFER,null),t.bindFramebuffer(r.DRAW_FRAMEBUFFER,null),ve)for(let Q=0;Q<H.length;Q++){t.bindFramebuffer(r.FRAMEBUFFER,Be.__webglMultisampledFramebuffer),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+Q,r.RENDERBUFFER,Be.__webglColorRenderbuffer[Q]);const he=i.get(H[Q]).__webglTexture;t.bindFramebuffer(r.FRAMEBUFFER,Be.__webglFramebuffer),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,r.COLOR_ATTACHMENT0+Q,r.TEXTURE_2D,he,0)}t.bindFramebuffer(r.DRAW_FRAMEBUFFER,Be.__webglMultisampledFramebuffer)}}function _e(Y){return Math.min(d,Y.samples)}function pe(Y){const H=i.get(Y);return a&&Y.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&H.__useRenderToTexture!==!1}function Se(Y){const H=o.render.frame;f.get(Y)!==H&&(f.set(Y,H),Y.update())}function Fe(Y,H){const ne=Y.colorSpace,Le=Y.format,Pe=Y.type;return Y.isCompressedTexture===!0||Y.isVideoTexture===!0||Y.format===pm||ne!==li&&ne!==kn&&(Hr.getTransfer(ne)===ci?a===!1?e.has("EXT_sRGB")===!0&&Le===Rn?(Y.format=pm,Y.minFilter=Or,Y.generateMipmaps=!1):H=vy.sRGBToLinear(H):(Le!==Rn||Pe!==io)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ne)),H}this.allocateTextureUnit=z,this.resetTextureUnits=k,this.setTexture2D=V,this.setTexture2DArray=U,this.setTexture3D=G,this.setTextureCube=X,this.rebindTextures=te,this.setupRenderTarget=le,this.updateRenderTargetMipmap=ge,this.updateMultisampleRenderTarget=be,this.setupDepthRenderbuffer=re,this.setupFrameBufferTexture=Z,this.useMultisampledRTT=pe}function _V(r,e,t){const i=t.isWebGL2;function n(s,o=kn){let a;const l=Hr.getTransfer(o);if(s===io)return r.UNSIGNED_BYTE;if(s===$0)return r.UNSIGNED_SHORT_4_4_4_4;if(s===X0)return r.UNSIGNED_SHORT_5_5_5_1;if(s===Rw)return r.BYTE;if(s===kw)return r.SHORT;if(s===ph)return r.UNSIGNED_SHORT;if(s===W0)return r.INT;if(s===no)return r.UNSIGNED_INT;if(s===mi)return r.FLOAT;if(s===gi)return i?r.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===q0)return r.ALPHA;if(s===Rn)return r.RGBA;if(s===K0)return r.LUMINANCE;if(s===Y0)return r.LUMINANCE_ALPHA;if(s===hs)return r.DEPTH_COMPONENT;if(s===so)return r.DEPTH_STENCIL;if(s===pm)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===Jf)return r.RED;if(s===Qf)return r.RED_INTEGER;if(s===em)return r.RG;if(s===Z0)return r.RG_INTEGER;if(s===J0)return r.RGBA_INTEGER;if(s===Ru||s===hc||s===pc||s===fc)if(l===ci)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Ru)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===hc)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===pc)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===fc)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Ru)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===hc)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===pc)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===fc)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===tm||s===rm||s===im||s===nm)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===tm)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===rm)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===im)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===nm)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Lw)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===fh||s===mh)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===fh)return l===ci?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===mh)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===gh||s===vh||s===yh||s===bh||s===xh||s===wh||s===_h||s===Sh||s===Th||s===Mh||s===Eh||s===Ch||s===Ah||s===Nh)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===gh)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===vh)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===yh)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===bh)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===xh)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===wh)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===_h)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===Sh)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Th)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Mh)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Eh)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Ch)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Ah)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Nh)return l===ci?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===ku||s===Ow||s===Pw)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===ku)return l===ci?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===Ow)return a.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Pw)return a.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===Iw||s===sm||s===om||s===am)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===ku)return a.COMPRESSED_RED_RGTC1_EXT;if(s===sm)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===om)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===am)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Ao?i?r.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):r[s]!==void 0?r[s]:null}return{convert:n}}class EN extends Yr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Oo extends nr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const YDe={type:"move"};class CN{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Oo,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Oo,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new oe,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new oe),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Oo,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new oe,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new oe),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let n=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const m of e.hand.values()){const g=t.getJointPose(m,i),v=this._getHandJoint(c,m);g!==null&&(v.matrix.fromArray(g.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=g.radius),v.visible=g!==null}const u=c.joints["index-finger-tip"],d=c.joints["thumb-tip"],h=u.position.distanceTo(d.position),p=.02,f=.005;c.inputState.pinching&&h>p+f?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&h<=p-f&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(n=t.getPose(e.targetRaySpace,i),n===null&&s!==null&&(n=s),n!==null&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(YDe)))}return a!==null&&(a.visible=n!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Oo;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Hh extends Nr{constructor(e,t,i,n,s,o,a,l,c,u){if(u=u!==void 0?u:hs,u!==hs&&u!==so)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===hs&&(i=no),i===void 0&&u===so&&(i=Ao),super(null,n,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Mr,this.minFilter=l!==void 0?l:Mr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class ZDe extends Ln{constructor(e,t){super();const i=this;let n=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,d=null,h=null,p=null,f=null;const m=t.getContextAttributes();let g=null,v=null;const x=[],b=[],w=new Yr;w.layers.enable(1),w.viewport=new jt;const _=new Yr;_.layers.enable(2),_.viewport=new jt;const S=[w,_],T=new EN;T.layers.enable(1),T.layers.enable(2);let M=null,E=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(U){let G=x[U];return G===void 0&&(G=new CN,x[U]=G),G.getTargetRaySpace()},this.getControllerGrip=function(U){let G=x[U];return G===void 0&&(G=new CN,x[U]=G),G.getGripSpace()},this.getHand=function(U){let G=x[U];return G===void 0&&(G=new CN,x[U]=G),G.getHandSpace()};function C(U){const G=b.indexOf(U.inputSource);if(G===-1)return;const X=x[G];X!==void 0&&(X.update(U.inputSource,U.frame,c||o),X.dispatchEvent({type:U.type,data:U.inputSource}))}function P(){n.removeEventListener("select",C),n.removeEventListener("selectstart",C),n.removeEventListener("selectend",C),n.removeEventListener("squeeze",C),n.removeEventListener("squeezestart",C),n.removeEventListener("squeezeend",C),n.removeEventListener("end",P),n.removeEventListener("inputsourceschange",A);for(let U=0;U<x.length;U++){const G=b[U];G!==null&&(b[U]=null,x[U].disconnect(G))}M=null,E=null,e.setRenderTarget(g),p=null,h=null,d=null,n=null,v=null,V.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(U){s=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(U){a=U,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(U){c=U},this.getBaseLayer=function(){return h!==null?h:p},this.getBinding=function(){return d},this.getFrame=function(){return f},this.getSession=function(){return n},this.setSession=async function(U){if(n=U,n!==null){if(g=e.getRenderTarget(),n.addEventListener("select",C),n.addEventListener("selectstart",C),n.addEventListener("selectend",C),n.addEventListener("squeeze",C),n.addEventListener("squeezestart",C),n.addEventListener("squeezeend",C),n.addEventListener("end",P),n.addEventListener("inputsourceschange",A),m.xrCompatible!==!0&&await t.makeXRCompatible(),n.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const G={antialias:n.renderState.layers===void 0?m.antialias:!0,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(n,t,G),n.updateRenderState({baseLayer:p}),v=new Ui(p.framebufferWidth,p.framebufferHeight,{format:Rn,type:io,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let G=null,X=null,ie=null;m.depth&&(ie=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,G=m.stencil?so:hs,X=m.stencil?Ao:no);const se={colorFormat:t.RGBA8,depthFormat:ie,scaleFactor:s};d=new XRWebGLBinding(n,t),h=d.createProjectionLayer(se),n.updateRenderState({layers:[h]}),v=new Ui(h.textureWidth,h.textureHeight,{format:Rn,type:io,depthTexture:new Hh(h.textureWidth,h.textureHeight,X,void 0,void 0,void 0,void 0,void 0,void 0,G),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0});const de=e.properties.get(v);de.__ignoreDepthValues=h.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await n.requestReferenceSpace(a),V.setContext(n),V.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(n!==null)return n.environmentBlendMode};function A(U){for(let G=0;G<U.removed.length;G++){const X=U.removed[G],ie=b.indexOf(X);ie>=0&&(b[ie]=null,x[ie].disconnect(X))}for(let G=0;G<U.added.length;G++){const X=U.added[G];let ie=b.indexOf(X);if(ie===-1){for(let de=0;de<x.length;de++)if(de>=b.length){b.push(X),ie=de;break}else if(b[de]===null){b[de]=X,ie=de;break}if(ie===-1)break}const se=x[ie];se&&se.connect(X)}}const N=new oe,R=new oe;function F(U,G,X){N.setFromMatrixPosition(G.matrixWorld),R.setFromMatrixPosition(X.matrixWorld);const ie=N.distanceTo(R),se=G.projectionMatrix.elements,de=X.projectionMatrix.elements,K=se[14]/(se[10]-1),q=se[14]/(se[10]+1),ce=(se[9]+1)/se[5],Te=(se[9]-1)/se[5],Z=(se[8]-1)/se[0],L=(de[8]+1)/de[0],$=K*Z,re=K*L,te=ie/(-Z+L),le=te*-Z;G.matrixWorld.decompose(U.position,U.quaternion,U.scale),U.translateX(le),U.translateZ(te),U.matrixWorld.compose(U.position,U.quaternion,U.scale),U.matrixWorldInverse.copy(U.matrixWorld).invert();const ge=K+te,be=q+te,_e=$-le,pe=re+(ie-le),Se=ce*q/be*ge,Fe=Te*q/be*ge;U.projectionMatrix.makePerspective(_e,pe,Se,Fe,ge,be),U.projectionMatrixInverse.copy(U.projectionMatrix).invert()}function B(U,G){G===null?U.matrixWorld.copy(U.matrix):U.matrixWorld.multiplyMatrices(G.matrixWorld,U.matrix),U.matrixWorldInverse.copy(U.matrixWorld).invert()}this.updateCamera=function(U){if(n===null)return;T.near=_.near=w.near=U.near,T.far=_.far=w.far=U.far,(M!==T.near||E!==T.far)&&(n.updateRenderState({depthNear:T.near,depthFar:T.far}),M=T.near,E=T.far);const G=U.parent,X=T.cameras;B(T,G);for(let ie=0;ie<X.length;ie++)B(X[ie],G);X.length===2?F(T,w,_):T.projectionMatrix.copy(w.projectionMatrix),k(U,T,G)};function k(U,G,X){X===null?U.matrix.copy(G.matrixWorld):(U.matrix.copy(X.matrixWorld),U.matrix.invert(),U.matrix.multiply(G.matrixWorld)),U.matrix.decompose(U.position,U.quaternion,U.scale),U.updateMatrixWorld(!0),U.projectionMatrix.copy(G.projectionMatrix),U.projectionMatrixInverse.copy(G.projectionMatrixInverse),U.isPerspectiveCamera&&(U.fov=fm*2*Math.atan(1/U.projectionMatrix.elements[5]),U.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(h===null&&p===null))return l},this.setFoveation=function(U){l=U,h!==null&&(h.fixedFoveation=U),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=U)};let z=null;function O(U,G){if(u=G.getViewerPose(c||o),f=G,u!==null){const X=u.views;p!==null&&(e.setRenderTargetFramebuffer(v,p.framebuffer),e.setRenderTarget(v));let ie=!1;X.length!==T.cameras.length&&(T.cameras.length=0,ie=!0);for(let se=0;se<X.length;se++){const de=X[se];let K=null;if(p!==null)K=p.getViewport(de);else{const ce=d.getViewSubImage(h,de);K=ce.viewport,se===0&&(e.setRenderTargetTextures(v,ce.colorTexture,h.ignoreDepthValues?void 0:ce.depthStencilTexture),e.setRenderTarget(v))}let q=S[se];q===void 0&&(q=new Yr,q.layers.enable(se),q.viewport=new jt,S[se]=q),q.matrix.fromArray(de.transform.matrix),q.matrix.decompose(q.position,q.quaternion,q.scale),q.projectionMatrix.fromArray(de.projectionMatrix),q.projectionMatrixInverse.copy(q.projectionMatrix).invert(),q.viewport.set(K.x,K.y,K.width,K.height),se===0&&(T.matrix.copy(q.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),ie===!0&&T.cameras.push(q)}}for(let X=0;X<x.length;X++){const ie=b[X],se=x[X];ie!==null&&se!==void 0&&se.update(ie,G,c||o)}z&&z(U,G),G.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:G}),f=null}const V=new Y8;V.setAnimationLoop(O),this.setAnimationLoop=function(U){z=U},this.dispose=function(){}}}function JDe(r,e){function t(g,v){g.matrixAutoUpdate===!0&&g.updateMatrix(),v.value.copy(g.matrix)}function i(g,v){v.color.getRGB(g.fogColor.value,K8(r)),v.isFog?(g.fogNear.value=v.near,g.fogFar.value=v.far):v.isFogExp2&&(g.fogDensity.value=v.density)}function n(g,v,x,b,w){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(g,v):v.isMeshToonMaterial?(s(g,v),d(g,v)):v.isMeshPhongMaterial?(s(g,v),u(g,v)):v.isMeshStandardMaterial?(s(g,v),h(g,v),v.isMeshPhysicalMaterial&&p(g,v,w)):v.isMeshMatcapMaterial?(s(g,v),f(g,v)):v.isMeshDepthMaterial?s(g,v):v.isMeshDistanceMaterial?(s(g,v),m(g,v)):v.isMeshNormalMaterial?s(g,v):v.isLineBasicMaterial?(o(g,v),v.isLineDashedMaterial&&a(g,v)):v.isPointsMaterial?l(g,v,x,b):v.isSpriteMaterial?c(g,v):v.isShadowMaterial?(g.color.value.copy(v.color),g.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(g,v){g.opacity.value=v.opacity,v.color&&g.diffuse.value.copy(v.color),v.emissive&&g.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(g.map.value=v.map,t(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.bumpMap&&(g.bumpMap.value=v.bumpMap,t(v.bumpMap,g.bumpMapTransform),g.bumpScale.value=v.bumpScale,v.side===Oi&&(g.bumpScale.value*=-1)),v.normalMap&&(g.normalMap.value=v.normalMap,t(v.normalMap,g.normalMapTransform),g.normalScale.value.copy(v.normalScale),v.side===Oi&&g.normalScale.value.negate()),v.displacementMap&&(g.displacementMap.value=v.displacementMap,t(v.displacementMap,g.displacementMapTransform),g.displacementScale.value=v.displacementScale,g.displacementBias.value=v.displacementBias),v.emissiveMap&&(g.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,g.emissiveMapTransform)),v.specularMap&&(g.specularMap.value=v.specularMap,t(v.specularMap,g.specularMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest);const x=e.get(v).envMap;if(x&&(g.envMap.value=x,g.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=v.reflectivity,g.ior.value=v.ior,g.refractionRatio.value=v.refractionRatio),v.lightMap){g.lightMap.value=v.lightMap;const b=r._useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=v.lightMapIntensity*b,t(v.lightMap,g.lightMapTransform)}v.aoMap&&(g.aoMap.value=v.aoMap,g.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,g.aoMapTransform))}function o(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,v.map&&(g.map.value=v.map,t(v.map,g.mapTransform))}function a(g,v){g.dashSize.value=v.dashSize,g.totalSize.value=v.dashSize+v.gapSize,g.scale.value=v.scale}function l(g,v,x,b){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.size.value=v.size*x,g.scale.value=b*.5,v.map&&(g.map.value=v.map,t(v.map,g.uvTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function c(g,v){g.diffuse.value.copy(v.color),g.opacity.value=v.opacity,g.rotation.value=v.rotation,v.map&&(g.map.value=v.map,t(v.map,g.mapTransform)),v.alphaMap&&(g.alphaMap.value=v.alphaMap,t(v.alphaMap,g.alphaMapTransform)),v.alphaTest>0&&(g.alphaTest.value=v.alphaTest)}function u(g,v){g.specular.value.copy(v.specular),g.shininess.value=Math.max(v.shininess,1e-4)}function d(g,v){v.gradientMap&&(g.gradientMap.value=v.gradientMap)}function h(g,v){g.metalness.value=v.metalness,v.metalnessMap&&(g.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,g.metalnessMapTransform)),g.roughness.value=v.roughness,v.roughnessMap&&(g.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,g.roughnessMapTransform)),e.get(v).envMap&&(g.envMapIntensity.value=v.envMapIntensity)}function p(g,v,x){g.ior.value=v.ior,v.sheen>0&&(g.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),g.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(g.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,g.sheenColorMapTransform)),v.sheenRoughnessMap&&(g.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,g.sheenRoughnessMapTransform))),v.clearcoat>0&&(g.clearcoat.value=v.clearcoat,g.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(g.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,g.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(g.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Oi&&g.clearcoatNormalScale.value.negate())),v.iridescence>0&&(g.iridescence.value=v.iridescence,g.iridescenceIOR.value=v.iridescenceIOR,g.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(g.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,g.iridescenceMapTransform)),v.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),v.transmission>0&&(g.transmission.value=v.transmission,g.transmissionSamplerMap.value=x.texture,g.transmissionSamplerSize.value.set(x.width,x.height),v.transmissionMap&&(g.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,g.transmissionMapTransform)),g.thickness.value=v.thickness,v.thicknessMap&&(g.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=v.attenuationDistance,g.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(g.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(g.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=v.specularIntensity,g.specularColor.value.copy(v.specularColor),v.specularColorMap&&(g.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,g.specularColorMapTransform)),v.specularIntensityMap&&(g.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,g.specularIntensityMapTransform))}function f(g,v){v.matcap&&(g.matcap.value=v.matcap)}function m(g,v){const x=e.get(v).light;g.referencePosition.value.setFromMatrixPosition(x.matrixWorld),g.nearDistance.value=x.shadow.camera.near,g.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:n}}function QDe(r,e,t,i){let n={},s={},o=[];const a=t.isWebGL2?r.getParameter(r.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,b){const w=b.program;i.uniformBlockBinding(x,w)}function c(x,b){let w=n[x.id];w===void 0&&(f(x),w=u(x),n[x.id]=w,x.addEventListener("dispose",g));const _=b.program;i.updateUBOMapping(x,_);const S=e.render.frame;s[x.id]!==S&&(h(x),s[x.id]=S)}function u(x){const b=d();x.__bindingPointIndex=b;const w=r.createBuffer(),_=x.__size,S=x.usage;return r.bindBuffer(r.UNIFORM_BUFFER,w),r.bufferData(r.UNIFORM_BUFFER,_,S),r.bindBuffer(r.UNIFORM_BUFFER,null),r.bindBufferBase(r.UNIFORM_BUFFER,b,w),w}function d(){for(let x=0;x<a;x++)if(o.indexOf(x)===-1)return o.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(x){const b=n[x.id],w=x.uniforms,_=x.__cache;r.bindBuffer(r.UNIFORM_BUFFER,b);for(let S=0,T=w.length;S<T;S++){const M=w[S];if(p(M,S,_)===!0){const E=M.__offset,C=Array.isArray(M.value)?M.value:[M.value];let P=0;for(let A=0;A<C.length;A++){const N=C[A],R=m(N);typeof N=="number"?(M.__data[0]=N,r.bufferSubData(r.UNIFORM_BUFFER,E+P,M.__data)):N.isMatrix3?(M.__data[0]=N.elements[0],M.__data[1]=N.elements[1],M.__data[2]=N.elements[2],M.__data[3]=N.elements[0],M.__data[4]=N.elements[3],M.__data[5]=N.elements[4],M.__data[6]=N.elements[5],M.__data[7]=N.elements[0],M.__data[8]=N.elements[6],M.__data[9]=N.elements[7],M.__data[10]=N.elements[8],M.__data[11]=N.elements[0]):(N.toArray(M.__data,P),P+=R.storage/Float32Array.BYTES_PER_ELEMENT)}r.bufferSubData(r.UNIFORM_BUFFER,E,M.__data)}}r.bindBuffer(r.UNIFORM_BUFFER,null)}function p(x,b,w){const _=x.value;if(w[b]===void 0){if(typeof _=="number")w[b]=_;else{const S=Array.isArray(_)?_:[_],T=[];for(let M=0;M<S.length;M++)T.push(S[M].clone());w[b]=T}return!0}else if(typeof _=="number"){if(w[b]!==_)return w[b]=_,!0}else{const S=Array.isArray(w[b])?w[b]:[w[b]],T=Array.isArray(_)?_:[_];for(let M=0;M<S.length;M++){const E=S[M];if(E.equals(T[M])===!1)return E.copy(T[M]),!0}}return!1}function f(x){const b=x.uniforms;let w=0;const _=16;let S=0;for(let T=0,M=b.length;T<M;T++){const E=b[T],C={boundary:0,storage:0},P=Array.isArray(E.value)?E.value:[E.value];for(let A=0,N=P.length;A<N;A++){const R=P[A],F=m(R);C.boundary+=F.boundary,C.storage+=F.storage}if(E.__data=new Float32Array(C.storage/Float32Array.BYTES_PER_ELEMENT),E.__offset=w,T>0){S=w%_;const A=_-S;S!==0&&A-C.boundary<0&&(w+=_-S,E.__offset=w)}w+=C.storage}return S=w%_,S>0&&(w+=_-S),x.__size=w,x.__cache={},this}function m(x){const b={boundary:0,storage:0};return typeof x=="number"?(b.boundary=4,b.storage=4):x.isVector2?(b.boundary=8,b.storage=8):x.isVector3||x.isColor?(b.boundary=16,b.storage=12):x.isVector4?(b.boundary=16,b.storage=16):x.isMatrix3?(b.boundary=48,b.storage=48):x.isMatrix4?(b.boundary=64,b.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),b}function g(x){const b=x.target;b.removeEventListener("dispose",g);const w=o.indexOf(b.__bindingPointIndex);o.splice(w,1),r.deleteBuffer(n[b.id]),delete n[b.id],delete s[b.id]}function v(){for(const x in n)r.deleteBuffer(n[x]);o=[],n={},s={}}return{bind:l,update:c,dispose:v}}class AN{constructor(e={}){const{canvas:t=tN(),context:i=null,depth:n=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let h;i!==null?h=i.getContextAttributes().alpha:h=o;const p=new Uint32Array(4),f=new Int32Array(4);let m=null,g=null;const v=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Lt,this._useLegacyLights=!1,this.toneMapping=ro,this.toneMappingExposure=1;const b=this;let w=!1,_=0,S=0,T=null,M=-1,E=null;const C=new jt,P=new jt;let A=null;const N=new at(0);let R=0,F=t.width,B=t.height,k=1,z=null,O=null;const V=new jt(0,0,F,B),U=new jt(0,0,F,B);let G=!1;const X=new Ey;let ie=!1,se=!1,de=null;const K=new St,q=new qe,ce=new oe,Te={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Z(){return T===null?k:1}let L=i;function $(Ce,Ke){for(let ot=0;ot<Ce.length;ot++){const Ye=Ce[ot],st=t.getContext(Ye,Ke);if(st!==null)return st}return null}try{const Ce={alpha:!0,depth:n,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Xf}`),t.addEventListener("webglcontextlost",nt,!1),t.addEventListener("webglcontextrestored",He,!1),t.addEventListener("webglcontextcreationerror",tt,!1),L===null){const Ke=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&Ke.shift(),L=$(Ke,Ce),L===null)throw $(Ke)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&L instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),L.getShaderPrecisionFormat===void 0&&(L.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ce){throw console.error("THREE.WebGLRenderer: "+Ce.message),Ce}let re,te,le,ge,be,_e,pe,Se,Fe,Y,H,ne,Le,Pe,Ee,Ue,Be,ve,Q,he,we,ae,De,We;function je(){re=new mIe(L),te=new cIe(L,re,e),re.init(te),ae=new _V(L,re,te),le=new qDe(L,re,te),ge=new yIe(L),be=new DDe,_e=new KDe(L,re,le,be,te,ae,ge),pe=new dIe(b),Se=new fIe(b),Fe=new ALe(L,te),De=new aIe(L,re,Fe,te),Y=new gIe(L,Fe,ge,De),H=new _Ie(L,Y,Fe,ge),Q=new wIe(L,te,_e),Ue=new uIe(be),ne=new IDe(b,pe,Se,re,te,De,Ue),Le=new JDe(b,be),Pe=new FDe,Ee=new HDe(re,te),ve=new oIe(b,pe,Se,le,H,h,l),Be=new XDe(b,H,te),We=new QDe(L,ge,te,le),he=new lIe(L,re,ge,te),we=new vIe(L,re,ge,te),ge.programs=ne.programs,b.capabilities=te,b.extensions=re,b.properties=be,b.renderLists=Pe,b.shadowMap=Be,b.state=le,b.info=ge}je();const ye=new ZDe(b,L);this.xr=ye,this.getContext=function(){return L},this.getContextAttributes=function(){return L.getContextAttributes()},this.forceContextLoss=function(){const Ce=re.get("WEBGL_lose_context");Ce&&Ce.loseContext()},this.forceContextRestore=function(){const Ce=re.get("WEBGL_lose_context");Ce&&Ce.restoreContext()},this.getPixelRatio=function(){return k},this.setPixelRatio=function(Ce){Ce!==void 0&&(k=Ce,this.setSize(F,B,!1))},this.getSize=function(Ce){return Ce.set(F,B)},this.setSize=function(Ce,Ke,ot=!0){if(ye.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=Ce,B=Ke,t.width=Math.floor(Ce*k),t.height=Math.floor(Ke*k),ot===!0&&(t.style.width=Ce+"px",t.style.height=Ke+"px"),this.setViewport(0,0,Ce,Ke)},this.getDrawingBufferSize=function(Ce){return Ce.set(F*k,B*k).floor()},this.setDrawingBufferSize=function(Ce,Ke,ot){F=Ce,B=Ke,k=ot,t.width=Math.floor(Ce*ot),t.height=Math.floor(Ke*ot),this.setViewport(0,0,Ce,Ke)},this.getCurrentViewport=function(Ce){return Ce.copy(C)},this.getViewport=function(Ce){return Ce.copy(V)},this.setViewport=function(Ce,Ke,ot,Ye){Ce.isVector4?V.set(Ce.x,Ce.y,Ce.z,Ce.w):V.set(Ce,Ke,ot,Ye),le.viewport(C.copy(V).multiplyScalar(k).floor())},this.getScissor=function(Ce){return Ce.copy(U)},this.setScissor=function(Ce,Ke,ot,Ye){Ce.isVector4?U.set(Ce.x,Ce.y,Ce.z,Ce.w):U.set(Ce,Ke,ot,Ye),le.scissor(P.copy(U).multiplyScalar(k).floor())},this.getScissorTest=function(){return G},this.setScissorTest=function(Ce){le.setScissorTest(G=Ce)},this.setOpaqueSort=function(Ce){z=Ce},this.setTransparentSort=function(Ce){O=Ce},this.getClearColor=function(Ce){return Ce.copy(ve.getClearColor())},this.setClearColor=function(){ve.setClearColor.apply(ve,arguments)},this.getClearAlpha=function(){return ve.getClearAlpha()},this.setClearAlpha=function(){ve.setClearAlpha.apply(ve,arguments)},this.clear=function(Ce=!0,Ke=!0,ot=!0){let Ye=0;if(Ce){let st=!1;if(T!==null){const Pt=T.texture.format;st=Pt===J0||Pt===Z0||Pt===Qf}if(st){const Pt=T.texture.type,tr=Pt===io||Pt===no||Pt===ph||Pt===Ao||Pt===$0||Pt===X0,rr=ve.getClearColor(),ur=ve.getClearAlpha(),Er=rr.r,_t=rr.g,gr=rr.b;tr?(p[0]=Er,p[1]=_t,p[2]=gr,p[3]=ur,L.clearBufferuiv(L.COLOR,0,p)):(f[0]=Er,f[1]=_t,f[2]=gr,f[3]=ur,L.clearBufferiv(L.COLOR,0,f))}else Ye|=L.COLOR_BUFFER_BIT}Ke&&(Ye|=L.DEPTH_BUFFER_BIT),ot&&(Ye|=L.STENCIL_BUFFER_BIT),L.clear(Ye)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",nt,!1),t.removeEventListener("webglcontextrestored",He,!1),t.removeEventListener("webglcontextcreationerror",tt,!1),Pe.dispose(),Ee.dispose(),be.dispose(),pe.dispose(),Se.dispose(),H.dispose(),De.dispose(),We.dispose(),ne.dispose(),ye.dispose(),ye.removeEventListener("sessionstart",xt),ye.removeEventListener("sessionend",Gt),de&&(de.dispose(),de=null),Jt.stop()};function nt(Ce){Ce.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function He(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const Ce=ge.autoReset,Ke=Be.enabled,ot=Be.autoUpdate,Ye=Be.needsUpdate,st=Be.type;je(),ge.autoReset=Ce,Be.enabled=Ke,Be.autoUpdate=ot,Be.needsUpdate=Ye,Be.type=st}function tt(Ce){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ce.statusMessage)}function Me(Ce){const Ke=Ce.target;Ke.removeEventListener("dispose",Me),Ne(Ke)}function Ne(Ce){fe(Ce),be.remove(Ce)}function fe(Ce){const Ke=be.get(Ce).programs;Ke!==void 0&&(Ke.forEach(function(ot){ne.releaseProgram(ot)}),Ce.isShaderMaterial&&ne.releaseShaderCache(Ce))}this.renderBufferDirect=function(Ce,Ke,ot,Ye,st,Pt){Ke===null&&(Ke=Te);const tr=st.isMesh&&st.matrixWorld.determinant()<0,rr=wd(Ce,Ke,ot,Ye,st);le.setMaterial(Ye,tr);let ur=ot.index,Er=1;if(Ye.wireframe===!0){if(ur=Y.getWireframeAttribute(ot),ur===void 0)return;Er=2}const _t=ot.drawRange,gr=ot.attributes.position;let pn=_t.start*Er,oi=(_t.start+_t.count)*Er;Pt!==null&&(pn=Math.max(pn,Pt.start*Er),oi=Math.min(oi,(Pt.start+Pt.count)*Er)),ur!==null?(pn=Math.max(pn,0),oi=Math.min(oi,ur.count)):gr!=null&&(pn=Math.max(pn,0),oi=Math.min(oi,gr.count));const os=oi-pn;if(os<0||os===1/0)return;De.setup(st,Ye,rr,ot,ur);let Ta,Ri=he;if(ur!==null&&(Ta=Fe.get(ur),Ri=we,Ri.setIndex(Ta)),st.isMesh)Ye.wireframe===!0?(le.setLineWidth(Ye.wireframeLinewidth*Z()),Ri.setMode(L.LINES)):Ri.setMode(L.TRIANGLES);else if(st.isLine){let Sr=Ye.linewidth;Sr===void 0&&(Sr=1),le.setLineWidth(Sr*Z()),st.isLineSegments?Ri.setMode(L.LINES):st.isLineLoop?Ri.setMode(L.LINE_LOOP):Ri.setMode(L.LINE_STRIP)}else st.isPoints?Ri.setMode(L.POINTS):st.isSprite&&Ri.setMode(L.TRIANGLES);if(st.isInstancedMesh)Ri.renderInstances(pn,os,st.count);else if(ot.isInstancedBufferGeometry){const Sr=ot._maxInstanceCount!==void 0?ot._maxInstanceCount:1/0,_d=Math.min(ot.instanceCount,Sr);Ri.renderInstances(pn,os,_d)}else Ri.render(pn,os)},this.compile=function(Ce,Ke){function ot(Ye,st,Pt){Ye.transparent===!0&&Ye.side===Wi&&Ye.forceSinglePass===!1?(Ye.side=Oi,Ye.needsUpdate=!0,Si(Ye,st,Pt),Ye.side=eo,Ye.needsUpdate=!0,Si(Ye,st,Pt),Ye.side=Wi):Si(Ye,st,Pt)}g=Ee.get(Ce),g.init(),x.push(g),Ce.traverseVisible(function(Ye){Ye.isLight&&Ye.layers.test(Ke.layers)&&(g.pushLight(Ye),Ye.castShadow&&g.pushShadow(Ye))}),g.setupLights(b._useLegacyLights),Ce.traverse(function(Ye){const st=Ye.material;if(st)if(Array.isArray(st))for(let Pt=0;Pt<st.length;Pt++){const tr=st[Pt];ot(tr,Ce,Ye)}else ot(st,Ce,Ye)}),x.pop(),g=null};let Ie=null;function wt(Ce){Ie&&Ie(Ce)}function xt(){Jt.stop()}function Gt(){Jt.start()}const Jt=new Y8;Jt.setAnimationLoop(wt),typeof self<"u"&&Jt.setContext(self),this.setAnimationLoop=function(Ce){Ie=Ce,ye.setAnimationLoop(Ce),Ce===null?Jt.stop():Jt.start()},ye.addEventListener("sessionstart",xt),ye.addEventListener("sessionend",Gt),this.render=function(Ce,Ke){if(Ke!==void 0&&Ke.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(w===!0)return;Ce.matrixWorldAutoUpdate===!0&&Ce.updateMatrixWorld(),Ke.parent===null&&Ke.matrixWorldAutoUpdate===!0&&Ke.updateMatrixWorld(),ye.enabled===!0&&ye.isPresenting===!0&&(ye.cameraAutoUpdate===!0&&ye.updateCamera(Ke),Ke=ye.getCamera()),Ce.isScene===!0&&Ce.onBeforeRender(b,Ce,Ke,T),g=Ee.get(Ce,x.length),g.init(),x.push(g),K.multiplyMatrices(Ke.projectionMatrix,Ke.matrixWorldInverse),X.setFromProjectionMatrix(K),se=this.localClippingEnabled,ie=Ue.init(this.clippingPlanes,se),m=Pe.get(Ce,v.length),m.init(),v.push(m),_r(Ce,Ke,0,b.sortObjects),m.finish(),b.sortObjects===!0&&m.sort(z,O),this.info.render.frame++,ie===!0&&Ue.beginShadows();const ot=g.state.shadowsArray;if(Be.render(ot,Ce,Ke),ie===!0&&Ue.endShadows(),this.info.autoReset===!0&&this.info.reset(),ve.render(m,Ce),g.setupLights(b._useLegacyLights),Ke.isArrayCamera){const Ye=Ke.cameras;for(let st=0,Pt=Ye.length;st<Pt;st++){const tr=Ye[st];yi(m,Ce,tr,tr.viewport)}}else yi(m,Ce,Ke);T!==null&&(_e.updateMultisampleRenderTarget(T),_e.updateRenderTargetMipmap(T)),Ce.isScene===!0&&Ce.onAfterRender(b,Ce,Ke),De.resetDefaultState(),M=-1,E=null,x.pop(),x.length>0?g=x[x.length-1]:g=null,v.pop(),v.length>0?m=v[v.length-1]:m=null};function _r(Ce,Ke,ot,Ye){if(Ce.visible===!1)return;if(Ce.layers.test(Ke.layers)){if(Ce.isGroup)ot=Ce.renderOrder;else if(Ce.isLOD)Ce.autoUpdate===!0&&Ce.update(Ke);else if(Ce.isLight)g.pushLight(Ce),Ce.castShadow&&g.pushShadow(Ce);else if(Ce.isSprite){if(!Ce.frustumCulled||X.intersectsSprite(Ce)){Ye&&ce.setFromMatrixPosition(Ce.matrixWorld).applyMatrix4(K);const Pt=H.update(Ce),tr=Ce.material;tr.visible&&m.push(Ce,Pt,tr,ot,ce.z,null)}}else if((Ce.isMesh||Ce.isLine||Ce.isPoints)&&(!Ce.frustumCulled||X.intersectsObject(Ce))){const Pt=H.update(Ce),tr=Ce.material;if(Ye&&(Ce.boundingSphere!==void 0?(Ce.boundingSphere===null&&Ce.computeBoundingSphere(),ce.copy(Ce.boundingSphere.center)):(Pt.boundingSphere===null&&Pt.computeBoundingSphere(),ce.copy(Pt.boundingSphere.center)),ce.applyMatrix4(Ce.matrixWorld).applyMatrix4(K)),Array.isArray(tr)){const rr=Pt.groups;for(let ur=0,Er=rr.length;ur<Er;ur++){const _t=rr[ur],gr=tr[_t.materialIndex];gr&&gr.visible&&m.push(Ce,Pt,gr,ot,ce.z,_t)}}else tr.visible&&m.push(Ce,Pt,tr,ot,ce.z,null)}}const st=Ce.children;for(let Pt=0,tr=st.length;Pt<tr;Pt++)_r(st[Pt],Ke,ot,Ye)}function yi(Ce,Ke,ot,Ye){const st=Ce.opaque,Pt=Ce.transmissive,tr=Ce.transparent;g.setupLightsView(ot),ie===!0&&Ue.setGlobalState(b.clippingPlanes,ot),Pt.length>0&&xs(st,Pt,Ke,ot),Ye&&le.viewport(C.copy(Ye)),st.length>0&&Cn(st,Ke,ot),Pt.length>0&&Cn(Pt,Ke,ot),tr.length>0&&Cn(tr,Ke,ot),le.buffers.depth.setTest(!0),le.buffers.depth.setMask(!0),le.buffers.color.setMask(!0),le.setPolygonOffset(!1)}function xs(Ce,Ke,ot,Ye){const st=te.isWebGL2;de===null&&(de=new Ui(1,1,{generateMipmaps:!0,type:re.has("EXT_color_buffer_half_float")?gi:io,minFilter:qn,samples:st?4:0})),b.getDrawingBufferSize(q),st?de.setSize(q.x,q.y):de.setSize(Gw(q.x),Gw(q.y));const Pt=b.getRenderTarget();b.setRenderTarget(de),b.getClearColor(N),R=b.getClearAlpha(),R<1&&b.setClearColor(16777215,.5),b.clear();const tr=b.toneMapping;b.toneMapping=ro,Cn(Ce,ot,Ye),_e.updateMultisampleRenderTarget(de),_e.updateRenderTargetMipmap(de);let rr=!1;for(let ur=0,Er=Ke.length;ur<Er;ur++){const _t=Ke[ur],gr=_t.object,pn=_t.geometry,oi=_t.material,os=_t.group;if(oi.side===Wi&&gr.layers.test(Ye.layers)){const Ta=oi.side;oi.side=Oi,oi.needsUpdate=!0,ws(gr,ot,Ye,pn,oi,os),oi.side=Ta,oi.needsUpdate=!0,rr=!0}}rr===!0&&(_e.updateMultisampleRenderTarget(de),_e.updateRenderTargetMipmap(de)),b.setRenderTarget(Pt),b.setClearColor(N,R),b.toneMapping=tr}function Cn(Ce,Ke,ot){const Ye=Ke.isScene===!0?Ke.overrideMaterial:null;for(let st=0,Pt=Ce.length;st<Pt;st++){const tr=Ce[st],rr=tr.object,ur=tr.geometry,Er=Ye===null?tr.material:Ye,_t=tr.group;rr.layers.test(ot.layers)&&ws(rr,Ke,ot,ur,Er,_t)}}function ws(Ce,Ke,ot,Ye,st,Pt){Ce.onBeforeRender(b,Ke,ot,Ye,st,Pt),Ce.modelViewMatrix.multiplyMatrices(ot.matrixWorldInverse,Ce.matrixWorld),Ce.normalMatrix.getNormalMatrix(Ce.modelViewMatrix),st.onBeforeRender(b,Ke,ot,Ye,Ce,Pt),st.transparent===!0&&st.side===Wi&&st.forceSinglePass===!1?(st.side=Oi,st.needsUpdate=!0,b.renderBufferDirect(ot,Ke,Ye,st,Ce,Pt),st.side=eo,st.needsUpdate=!0,b.renderBufferDirect(ot,Ke,Ye,st,Ce,Pt),st.side=Wi):b.renderBufferDirect(ot,Ke,Ye,st,Ce,Pt),Ce.onAfterRender(b,Ke,ot,Ye,st,Pt)}function Si(Ce,Ke,ot){Ke.isScene!==!0&&(Ke=Te);const Ye=be.get(Ce),st=g.state.lights,Pt=g.state.shadowsArray,tr=st.state.version,rr=ne.getParameters(Ce,st.state,Pt,Ke,ot),ur=ne.getProgramCacheKey(rr);let Er=Ye.programs;Ye.environment=Ce.isMeshStandardMaterial?Ke.environment:null,Ye.fog=Ke.fog,Ye.envMap=(Ce.isMeshStandardMaterial?Se:pe).get(Ce.envMap||Ye.environment),Er===void 0&&(Ce.addEventListener("dispose",Me),Er=new Map,Ye.programs=Er);let _t=Er.get(ur);if(_t!==void 0){if(Ye.currentProgram===_t&&Ye.lightsStateVersion===tr)return js(Ce,rr),_t}else rr.uniforms=ne.getUniforms(Ce),Ce.onBuild(ot,rr,b),Ce.onBeforeCompile(rr,b),_t=ne.acquireProgram(rr,ur),Er.set(ur,_t),Ye.uniforms=rr.uniforms;const gr=Ye.uniforms;(!Ce.isShaderMaterial&&!Ce.isRawShaderMaterial||Ce.clipping===!0)&&(gr.clippingPlanes=Ue.uniform),js(Ce,rr),Ye.needsLights=aT(Ce),Ye.lightsStateVersion=tr,Ye.needsLights&&(gr.ambientLightColor.value=st.state.ambient,gr.lightProbe.value=st.state.probe,gr.directionalLights.value=st.state.directional,gr.directionalLightShadows.value=st.state.directionalShadow,gr.spotLights.value=st.state.spot,gr.spotLightShadows.value=st.state.spotShadow,gr.rectAreaLights.value=st.state.rectArea,gr.ltc_1.value=st.state.rectAreaLTC1,gr.ltc_2.value=st.state.rectAreaLTC2,gr.pointLights.value=st.state.point,gr.pointLightShadows.value=st.state.pointShadow,gr.hemisphereLights.value=st.state.hemi,gr.directionalShadowMap.value=st.state.directionalShadowMap,gr.directionalShadowMatrix.value=st.state.directionalShadowMatrix,gr.spotShadowMap.value=st.state.spotShadowMap,gr.spotLightMatrix.value=st.state.spotLightMatrix,gr.spotLightMap.value=st.state.spotLightMap,gr.pointShadowMap.value=st.state.pointShadowMap,gr.pointShadowMatrix.value=st.state.pointShadowMatrix);const pn=_t.getUniforms(),oi=g_.seqWithValue(pn.seq,gr);return Ye.currentProgram=_t,Ye.uniformsList=oi,_t}function js(Ce,Ke){const ot=be.get(Ce);ot.outputColorSpace=Ke.outputColorSpace,ot.instancing=Ke.instancing,ot.instancingColor=Ke.instancingColor,ot.skinning=Ke.skinning,ot.morphTargets=Ke.morphTargets,ot.morphNormals=Ke.morphNormals,ot.morphColors=Ke.morphColors,ot.morphTargetsCount=Ke.morphTargetsCount,ot.numClippingPlanes=Ke.numClippingPlanes,ot.numIntersection=Ke.numClipIntersection,ot.vertexAlphas=Ke.vertexAlphas,ot.vertexTangents=Ke.vertexTangents,ot.toneMapping=Ke.toneMapping}function wd(Ce,Ke,ot,Ye,st){Ke.isScene!==!0&&(Ke=Te),_e.resetTextureUnits();const Pt=Ke.fog,tr=Ye.isMeshStandardMaterial?Ke.environment:null,rr=T===null?b.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:li,ur=(Ye.isMeshStandardMaterial?Se:pe).get(Ye.envMap||tr),Er=Ye.vertexColors===!0&&!!ot.attributes.color&&ot.attributes.color.itemSize===4,_t=!!ot.attributes.tangent&&(!!Ye.normalMap||Ye.anisotropy>0),gr=!!ot.morphAttributes.position,pn=!!ot.morphAttributes.normal,oi=!!ot.morphAttributes.color;let os=ro;Ye.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(os=b.toneMapping);const Ta=ot.morphAttributes.position||ot.morphAttributes.normal||ot.morphAttributes.color,Ri=Ta!==void 0?Ta.length:0,Sr=be.get(Ye),_d=g.state.lights;if(ie===!0&&(se===!0||Ce!==E)){const as=Ce===E&&Ye.id===M;Ue.setState(Ye,Ce,as)}let Vg=!1;Ye.version===Sr.__version?(Sr.needsLights&&Sr.lightsStateVersion!==_d.state.version||Sr.outputColorSpace!==rr||st.isInstancedMesh&&Sr.instancing===!1||!st.isInstancedMesh&&Sr.instancing===!0||st.isSkinnedMesh&&Sr.skinning===!1||!st.isSkinnedMesh&&Sr.skinning===!0||st.isInstancedMesh&&Sr.instancingColor===!0&&st.instanceColor===null||st.isInstancedMesh&&Sr.instancingColor===!1&&st.instanceColor!==null||Sr.envMap!==ur||Ye.fog===!0&&Sr.fog!==Pt||Sr.numClippingPlanes!==void 0&&(Sr.numClippingPlanes!==Ue.numPlanes||Sr.numIntersection!==Ue.numIntersection)||Sr.vertexAlphas!==Er||Sr.vertexTangents!==_t||Sr.morphTargets!==gr||Sr.morphNormals!==pn||Sr.morphColors!==oi||Sr.toneMapping!==os||te.isWebGL2===!0&&Sr.morphTargetsCount!==Ri)&&(Vg=!0):(Vg=!0,Sr.__version=Ye.version);let Ma=Sr.currentProgram;Vg===!0&&(Ma=Si(Ye,Ke,st));let r1=!1,qc=!1,Gg=!1;const tn=Ma.getUniforms(),cl=Sr.uniforms;if(le.useProgram(Ma.program)&&(r1=!0,qc=!0,Gg=!0),Ye.id!==M&&(M=Ye.id,qc=!0),r1||E!==Ce){tn.setValue(L,"projectionMatrix",Ce.projectionMatrix),tn.setValue(L,"viewMatrix",Ce.matrixWorldInverse);const as=tn.map.cameraPosition;as!==void 0&&as.setValue(L,ce.setFromMatrixPosition(Ce.matrixWorld)),te.logarithmicDepthBuffer&&tn.setValue(L,"logDepthBufFC",2/(Math.log(Ce.far+1)/Math.LN2)),(Ye.isMeshPhongMaterial||Ye.isMeshToonMaterial||Ye.isMeshLambertMaterial||Ye.isMeshBasicMaterial||Ye.isMeshStandardMaterial||Ye.isShaderMaterial)&&tn.setValue(L,"isOrthographic",Ce.isOrthographicCamera===!0),E!==Ce&&(E=Ce,qc=!0,Gg=!0)}if(st.isSkinnedMesh){tn.setOptional(L,st,"bindMatrix"),tn.setOptional(L,st,"bindMatrixInverse");const as=st.skeleton;as&&(te.floatVertexTextures?(as.boneTexture===null&&as.computeBoneTexture(),tn.setValue(L,"boneTexture",as.boneTexture,_e),tn.setValue(L,"boneTextureSize",as.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const $l=ot.morphAttributes;if(($l.position!==void 0||$l.normal!==void 0||$l.color!==void 0&&te.isWebGL2===!0)&&Q.update(st,ot,Ma),(qc||Sr.receiveShadow!==st.receiveShadow)&&(Sr.receiveShadow=st.receiveShadow,tn.setValue(L,"receiveShadow",st.receiveShadow)),Ye.isMeshGouraudMaterial&&Ye.envMap!==null&&(cl.envMap.value=ur,cl.flipEnvMap.value=ur.isCubeTexture&&ur.isRenderTargetTexture===!1?-1:1),qc&&(tn.setValue(L,"toneMappingExposure",b.toneMappingExposure),Sr.needsLights&&t1(cl,Gg),Pt&&Ye.fog===!0&&Le.refreshFogUniforms(cl,Pt),Le.refreshMaterialUniforms(cl,Ye,k,B,de),g_.upload(L,Sr.uniformsList,cl,_e)),Ye.isShaderMaterial&&Ye.uniformsNeedUpdate===!0&&(g_.upload(L,Sr.uniformsList,cl,_e),Ye.uniformsNeedUpdate=!1),Ye.isSpriteMaterial&&tn.setValue(L,"center",st.center),tn.setValue(L,"modelViewMatrix",st.modelViewMatrix),tn.setValue(L,"normalMatrix",st.normalMatrix),tn.setValue(L,"modelMatrix",st.matrixWorld),Ye.isShaderMaterial||Ye.isRawShaderMaterial){const as=Ye.uniformsGroups;for(let zp=0,i1=as.length;zp<i1;zp++)if(te.isWebGL2){const jo=as[zp];We.update(jo,Ma),We.bind(jo,Ma)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ma}function t1(Ce,Ke){Ce.ambientLightColor.needsUpdate=Ke,Ce.lightProbe.needsUpdate=Ke,Ce.directionalLights.needsUpdate=Ke,Ce.directionalLightShadows.needsUpdate=Ke,Ce.pointLights.needsUpdate=Ke,Ce.pointLightShadows.needsUpdate=Ke,Ce.spotLights.needsUpdate=Ke,Ce.spotLightShadows.needsUpdate=Ke,Ce.rectAreaLights.needsUpdate=Ke,Ce.hemisphereLights.needsUpdate=Ke}function aT(Ce){return Ce.isMeshLambertMaterial||Ce.isMeshToonMaterial||Ce.isMeshPhongMaterial||Ce.isMeshStandardMaterial||Ce.isShadowMaterial||Ce.isShaderMaterial&&Ce.lights===!0}this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return S},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(Ce,Ke,ot){be.get(Ce.texture).__webglTexture=Ke,be.get(Ce.depthTexture).__webglTexture=ot;const Ye=be.get(Ce);Ye.__hasExternalTextures=!0,Ye.__hasExternalTextures&&(Ye.__autoAllocateDepthBuffer=ot===void 0,Ye.__autoAllocateDepthBuffer||re.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ye.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ce,Ke){const ot=be.get(Ce);ot.__webglFramebuffer=Ke,ot.__useDefaultFramebuffer=Ke===void 0},this.setRenderTarget=function(Ce,Ke=0,ot=0){T=Ce,_=Ke,S=ot;let Ye=!0,st=null,Pt=!1,tr=!1;if(Ce){const rr=be.get(Ce);rr.__useDefaultFramebuffer!==void 0?(le.bindFramebuffer(L.FRAMEBUFFER,null),Ye=!1):rr.__webglFramebuffer===void 0?_e.setupRenderTarget(Ce):rr.__hasExternalTextures&&_e.rebindTextures(Ce,be.get(Ce.texture).__webglTexture,be.get(Ce.depthTexture).__webglTexture);const ur=Ce.texture;(ur.isData3DTexture||ur.isDataArrayTexture||ur.isCompressedArrayTexture)&&(tr=!0);const Er=be.get(Ce).__webglFramebuffer;Ce.isWebGLCubeRenderTarget?(Array.isArray(Er[Ke])?st=Er[Ke][ot]:st=Er[Ke],Pt=!0):te.isWebGL2&&Ce.samples>0&&_e.useMultisampledRTT(Ce)===!1?st=be.get(Ce).__webglMultisampledFramebuffer:Array.isArray(Er)?st=Er[ot]:st=Er,C.copy(Ce.viewport),P.copy(Ce.scissor),A=Ce.scissorTest}else C.copy(V).multiplyScalar(k).floor(),P.copy(U).multiplyScalar(k).floor(),A=G;if(le.bindFramebuffer(L.FRAMEBUFFER,st)&&te.drawBuffers&&Ye&&le.drawBuffers(Ce,st),le.viewport(C),le.scissor(P),le.setScissorTest(A),Pt){const rr=be.get(Ce.texture);L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_CUBE_MAP_POSITIVE_X+Ke,rr.__webglTexture,ot)}else if(tr){const rr=be.get(Ce.texture),ur=Ke||0;L.framebufferTextureLayer(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,rr.__webglTexture,ot||0,ur)}M=-1},this.readRenderTargetPixels=function(Ce,Ke,ot,Ye,st,Pt,tr){if(!(Ce&&Ce.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let rr=be.get(Ce).__webglFramebuffer;if(Ce.isWebGLCubeRenderTarget&&tr!==void 0&&(rr=rr[tr]),rr){le.bindFramebuffer(L.FRAMEBUFFER,rr);try{const ur=Ce.texture,Er=ur.format,_t=ur.type;if(Er!==Rn&&ae.convert(Er)!==L.getParameter(L.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const gr=_t===gi&&(re.has("EXT_color_buffer_half_float")||te.isWebGL2&&re.has("EXT_color_buffer_float"));if(_t!==io&&ae.convert(_t)!==L.getParameter(L.IMPLEMENTATION_COLOR_READ_TYPE)&&!(_t===mi&&(te.isWebGL2||re.has("OES_texture_float")||re.has("WEBGL_color_buffer_float")))&&!gr){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ke>=0&&Ke<=Ce.width-Ye&&ot>=0&&ot<=Ce.height-st&&L.readPixels(Ke,ot,Ye,st,ae.convert(Er),ae.convert(_t),Pt)}finally{const ur=T!==null?be.get(T).__webglFramebuffer:null;le.bindFramebuffer(L.FRAMEBUFFER,ur)}}},this.copyFramebufferToTexture=function(Ce,Ke,ot=0){const Ye=Math.pow(2,-ot),st=Math.floor(Ke.image.width*Ye),Pt=Math.floor(Ke.image.height*Ye);_e.setTexture2D(Ke,0),L.copyTexSubImage2D(L.TEXTURE_2D,ot,0,0,Ce.x,Ce.y,st,Pt),le.unbindTexture()},this.copyTextureToTexture=function(Ce,Ke,ot,Ye=0){const st=Ke.image.width,Pt=Ke.image.height,tr=ae.convert(ot.format),rr=ae.convert(ot.type);_e.setTexture2D(ot,0),L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,ot.flipY),L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ot.premultiplyAlpha),L.pixelStorei(L.UNPACK_ALIGNMENT,ot.unpackAlignment),Ke.isDataTexture?L.texSubImage2D(L.TEXTURE_2D,Ye,Ce.x,Ce.y,st,Pt,tr,rr,Ke.image.data):Ke.isCompressedTexture?L.compressedTexSubImage2D(L.TEXTURE_2D,Ye,Ce.x,Ce.y,Ke.mipmaps[0].width,Ke.mipmaps[0].height,tr,Ke.mipmaps[0].data):L.texSubImage2D(L.TEXTURE_2D,Ye,Ce.x,Ce.y,tr,rr,Ke.image),Ye===0&&ot.generateMipmaps&&L.generateMipmap(L.TEXTURE_2D),le.unbindTexture()},this.copyTextureToTexture3D=function(Ce,Ke,ot,Ye,st=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Pt=Ce.max.x-Ce.min.x+1,tr=Ce.max.y-Ce.min.y+1,rr=Ce.max.z-Ce.min.z+1,ur=ae.convert(Ye.format),Er=ae.convert(Ye.type);let _t;if(Ye.isData3DTexture)_e.setTexture3D(Ye,0),_t=L.TEXTURE_3D;else if(Ye.isDataArrayTexture)_e.setTexture2DArray(Ye,0),_t=L.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}L.pixelStorei(L.UNPACK_FLIP_Y_WEBGL,Ye.flipY),L.pixelStorei(L.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ye.premultiplyAlpha),L.pixelStorei(L.UNPACK_ALIGNMENT,Ye.unpackAlignment);const gr=L.getParameter(L.UNPACK_ROW_LENGTH),pn=L.getParameter(L.UNPACK_IMAGE_HEIGHT),oi=L.getParameter(L.UNPACK_SKIP_PIXELS),os=L.getParameter(L.UNPACK_SKIP_ROWS),Ta=L.getParameter(L.UNPACK_SKIP_IMAGES),Ri=ot.isCompressedTexture?ot.mipmaps[0]:ot.image;L.pixelStorei(L.UNPACK_ROW_LENGTH,Ri.width),L.pixelStorei(L.UNPACK_IMAGE_HEIGHT,Ri.height),L.pixelStorei(L.UNPACK_SKIP_PIXELS,Ce.min.x),L.pixelStorei(L.UNPACK_SKIP_ROWS,Ce.min.y),L.pixelStorei(L.UNPACK_SKIP_IMAGES,Ce.min.z),ot.isDataTexture||ot.isData3DTexture?L.texSubImage3D(_t,st,Ke.x,Ke.y,Ke.z,Pt,tr,rr,ur,Er,Ri.data):ot.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),L.compressedTexSubImage3D(_t,st,Ke.x,Ke.y,Ke.z,Pt,tr,rr,ur,Ri.data)):L.texSubImage3D(_t,st,Ke.x,Ke.y,Ke.z,Pt,tr,rr,ur,Er,Ri),L.pixelStorei(L.UNPACK_ROW_LENGTH,gr),L.pixelStorei(L.UNPACK_IMAGE_HEIGHT,pn),L.pixelStorei(L.UNPACK_SKIP_PIXELS,oi),L.pixelStorei(L.UNPACK_SKIP_ROWS,os),L.pixelStorei(L.UNPACK_SKIP_IMAGES,Ta),st===0&&Ye.generateMipmaps&&L.generateMipmap(_t),le.unbindTexture()},this.initTexture=function(Ce){Ce.isCubeTexture?_e.setTextureCube(Ce,0):Ce.isData3DTexture?_e.setTexture3D(Ce,0):Ce.isDataArrayTexture||Ce.isCompressedArrayTexture?_e.setTexture2DArray(Ce,0):_e.setTexture2D(Ce,0),le.unbindTexture()},this.resetState=function(){_=0,S=0,T=null,le.reset(),De.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ua}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===ry?"display-p3":"srgb",t.unpackColorSpace=Hr.workingColorSpace===cm?"display-p3":"srgb"}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Lt?Ol:ey}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Ol?Lt:li}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class SV extends AN{}SV.prototype.isWebGL1Renderer=!0;class Dm{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new at(e),this.density=t}clone(){return new Dm(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Um{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new at(e),this.near=t,this.far=i}clone(){return new Um(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class qa extends nr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Fm{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=hm,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=No()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let n=0,s=this.stride;n<s;n++)this.array[e+n]=t.array[i+n];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=No()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=No()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ps=new oe;class Is{constructor(e,t,i,n=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=n}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.applyMatrix4(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.applyNormalMatrix(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ps.fromBufferAttribute(this,t),Ps.transformDirection(e),this.setXYZ(t,Ps.x,Ps.y,Ps.z);return this}setX(e,t){return this.normalized&&(t=xr(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=xr(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=xr(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=xr(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=oo(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=oo(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=oo(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=oo(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=xr(t,this.array),i=xr(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=xr(t,this.array),i=xr(i,this.array),n=xr(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this}setXYZW(e,t,i,n,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=xr(t,this.array),i=xr(i,this.array),n=xr(n,this.array),s=xr(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const n=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[n+s])}return new jr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Is(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const n=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[n+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Wh extends Wr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Bm;const Ny=new oe,zm=new oe,Vm=new oe,Gm=new qe,Ry=new qe,TV=new St,v_=new oe,ky=new oe,y_=new oe,MV=new qe,NN=new qe,EV=new qe;class Tc extends nr{constructor(e=new Wh){if(super(),this.isSprite=!0,this.type="Sprite",Bm===void 0){Bm=new sr;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Fm(t,5);Bm.setIndex([0,1,2,0,2,3]),Bm.setAttribute("position",new Is(i,3,0,!1)),Bm.setAttribute("uv",new Is(i,2,3,!1))}this.geometry=Bm,this.material=e,this.center=new qe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),zm.setFromMatrixScale(this.matrixWorld),TV.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Vm.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&zm.multiplyScalar(-Vm.z);const i=this.material.rotation;let n,s;i!==0&&(s=Math.cos(i),n=Math.sin(i));const o=this.center;b_(v_.set(-.5,-.5,0),Vm,o,zm,n,s),b_(ky.set(.5,-.5,0),Vm,o,zm,n,s),b_(y_.set(.5,.5,0),Vm,o,zm,n,s),MV.set(0,0),NN.set(1,0),EV.set(1,1);let a=e.ray.intersectTriangle(v_,ky,y_,!1,Ny);if(a===null&&(b_(ky.set(-.5,.5,0),Vm,o,zm,n,s),NN.set(0,1),a=e.ray.intersectTriangle(v_,y_,ky,!1,Ny),a===null))return;const l=e.ray.origin.distanceTo(Ny);l<e.near||l>e.far||t.push({distance:l,point:Ny.clone(),uv:Fh.getInterpolation(Ny,v_,ky,y_,MV,NN,EV,new qe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function b_(r,e,t,i,n,s){Gm.subVectors(r,t).addScalar(.5).multiply(i),n!==void 0?(Ry.x=s*Gm.x-n*Gm.y,Ry.y=n*Gm.x+s*Gm.y):Ry.copy(Gm),r.copy(e),r.x+=Ry.x,r.y+=Ry.y,r.applyMatrix4(TV)}const x_=new oe,CV=new oe;class RN extends nr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,n=t.length;i<n;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const n=this.levels;let s;for(s=0;s<n.length&&!(t<n[s].distance);s++);return n.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,n;for(i=1,n=t.length;i<n;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){x_.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(x_);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){x_.setFromMatrixPosition(e.matrixWorld),CV.setFromMatrixPosition(this.matrixWorld);const i=x_.distanceTo(CV)/e.zoom;t[0].object.visible=!0;let n,s;for(n=1,s=t.length;n<s;n++){let o=t[n].distance;if(t[n].object.visible&&(o-=o*t[n].hysteresis),i>=o)t[n-1].object.visible=!1,t[n].object.visible=!0;else break}for(this._currentLevel=n-1;n<s;n++)t[n].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let n=0,s=i.length;n<s;n++){const o=i[n];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const AV=new oe,NV=new jt,RV=new jt,e4e=new oe,kV=new St,jm=new oe,kN=new Ls,LV=new St,LN=new Uh;class Ly extends mt{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new St,this.bindMatrixInverse=new St,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new On),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)jm.fromBufferAttribute(t,i),this.applyBoneTransform(i,jm),this.boundingBox.expandByPoint(jm)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ls),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)jm.fromBufferAttribute(t,i),this.applyBoneTransform(i,jm),this.boundingSphere.expandByPoint(jm)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,n=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),kN.copy(this.boundingSphere),kN.applyMatrix4(n),e.ray.intersectsSphere(kN)!==!1&&(LV.copy(n).invert(),LN.copy(e.ray).applyMatrix4(LV),!(this.boundingBox!==null&&LN.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,LN)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new jt,t=this.geometry.attributes.skinWeight;for(let i=0,n=t.count;i<n;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,n=this.geometry;NV.fromBufferAttribute(n.attributes.skinIndex,e),RV.fromBufferAttribute(n.attributes.skinWeight,e),AV.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=RV.getComponent(s);if(o!==0){const a=NV.getComponent(s);kV.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(e4e.copy(AV).applyMatrix4(kV),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class $h extends nr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ma extends Nr{constructor(e=null,t=1,i=1,n,s,o,a,l,c=Mr,u=Mr,d,h){super(null,o,a,l,c,u,n,s,d,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const OV=new St,t4e=new St;class Xh{constructor(e=[],t=[]){this.uuid=No(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,n=this.bones.length;i<n;i++)this.boneInverses.push(new St)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new St;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,n=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:t4e;OV.multiplyMatrices(a,t[s]),OV.toArray(i,s*16)}n!==null&&(n.needsUpdate=!0)}clone(){return new Xh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=R8(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ma(t,e,e,Rn,mi);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,n=e.bones.length;i<n;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new $h),this.bones.push(o),this.boneInverses.push(new St().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let n=0,s=t.length;n<s;n++){const o=t[n];e.bones.push(o.uuid);const a=i[n];e.boneInverses.push(a.toArray())}return e}}class Mc extends jr{constructor(e,t,i,n=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Hm=new St,PV=new St,w_=[],IV=new On,r4e=new St,Oy=new mt,Py=new Ls;class Iy extends mt{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Mc(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let n=0;n<i;n++)this.setMatrixAt(n,r4e)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new On),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Hm),IV.copy(e.boundingBox).applyMatrix4(Hm),this.boundingBox.union(IV)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ls),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Hm),Py.copy(e.boundingSphere).applyMatrix4(Hm),this.boundingSphere.union(Py)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,n=this.count;if(Oy.geometry=this.geometry,Oy.material=this.material,Oy.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Py.copy(this.boundingSphere),Py.applyMatrix4(i),e.ray.intersectsSphere(Py)!==!1))for(let s=0;s<n;s++){this.getMatrixAt(s,Hm),PV.multiplyMatrices(i,Hm),Oy.matrixWorld=PV,Oy.raycast(e,w_);for(let o=0,a=w_.length;o<a;o++){const l=w_[o];l.instanceId=s,l.object=this,t.push(l)}w_.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Mc(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ki extends Wr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new at(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const DV=new oe,UV=new oe,FV=new St,ON=new Uh,__=new Ls;class yn extends nr{constructor(e=new sr,t=new Ki){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let n=1,s=t.count;n<s;n++)DV.fromBufferAttribute(t,n-1),UV.fromBufferAttribute(t,n),i[n]=i[n-1],i[n]+=DV.distanceTo(UV);e.setAttribute("lineDistance",new Rt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),__.copy(i.boundingSphere),__.applyMatrix4(n),__.radius+=s,e.ray.intersectsSphere(__)===!1)return;FV.copy(n).invert(),ON.copy(e.ray).applyMatrix4(FV);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=new oe,u=new oe,d=new oe,h=new oe,p=this.isLineSegments?2:1,f=i.index,m=i.attributes.position;if(f!==null){const g=Math.max(0,o.start),v=Math.min(f.count,o.start+o.count);for(let x=g,b=v-1;x<b;x+=p){const w=f.getX(x),_=f.getX(x+1);if(c.fromBufferAttribute(m,w),u.fromBufferAttribute(m,_),ON.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const S=e.ray.origin.distanceTo(h);S<e.near||S>e.far||t.push({distance:S,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),v=Math.min(m.count,o.start+o.count);for(let x=g,b=v-1;x<b;x+=p){if(c.fromBufferAttribute(m,x),u.fromBufferAttribute(m,x+1),ON.distanceSqToSegment(c,u,h,d)>l)continue;h.applyMatrix4(this.matrixWorld);const w=e.ray.origin.distanceTo(h);w<e.near||w>e.far||t.push({distance:w,point:d.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=i.length;n<s;n++){const o=i[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}}const BV=new oe,zV=new oe;class ga extends yn{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let n=0,s=t.count;n<s;n+=2)BV.fromBufferAttribute(t,n),zV.fromBufferAttribute(t,n+1),i[n]=n===0?0:i[n-1],i[n+1]=i[n]+BV.distanceTo(zV);e.setAttribute("lineDistance",new Rt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class S_ extends yn{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class qh extends Wr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new at(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const VV=new St,PN=new Uh,T_=new Ls,M_=new oe;class Kh extends nr{constructor(e=new sr,t=new qh){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,n=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),T_.copy(i.boundingSphere),T_.applyMatrix4(n),T_.radius+=s,e.ray.intersectsSphere(T_)===!1)return;VV.copy(n).invert(),PN.copy(e.ray).applyMatrix4(VV);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,u=i.attributes.position;if(c!==null){const d=Math.max(0,o.start),h=Math.min(c.count,o.start+o.count);for(let p=d,f=h;p<f;p++){const m=c.getX(p);M_.fromBufferAttribute(u,m),GV(M_,m,l,n,e,t,this)}}else{const d=Math.max(0,o.start),h=Math.min(u.count,o.start+o.count);for(let p=d,f=h;p<f;p++)M_.fromBufferAttribute(u,p),GV(M_,p,l,n,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let n=0,s=i.length;n<s;n++){const o=i[n].name||String(n);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=n}}}}}function GV(r,e,t,i,n,s,o){const a=PN.distanceSqToPoint(r);if(a<t){const l=new oe;PN.closestPointToPoint(r,l),l.applyMatrix4(i);const c=n.ray.origin.distanceTo(l);if(c<n.near||c>n.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class jV extends Nr{constructor(e,t,i,n,s,o,a,l,c){super(e,t,i,n,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Or,this.magFilter=s!==void 0?s:Or,this.generateMipmaps=!1;const u=this;function d(){u.needsUpdate=!0,e.requestVideoFrameCallback(d)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(d)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!("requestVideoFrameCallback"in e)&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class E_ extends Nr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Mr,this.minFilter=Mr,this.generateMipmaps=!1,this.needsUpdate=!0}}class Dy extends Nr{constructor(e,t,i,n,s,o,a,l,c,u,d,h){super(null,o,a,l,c,u,n,s,d,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class HV extends Dy{constructor(e,t,i,n,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=n,this.wrapR=Mi}}class i4e extends Dy{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Co),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class IN extends Nr{constructor(e,t,i,n,s,o,a,l,c){super(e,t,i,n,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}let va=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(r,e){const t=this.getUtoTmapping(r);return this.getPoint(t,e)}getPoints(r=5){const e=[];for(let t=0;t<=r;t++)e.push(this.getPoint(t/r));return e}getSpacedPoints(r=5){const e=[];for(let t=0;t<=r;t++)e.push(this.getPointAt(t/r));return e}getLength(){const r=this.getLengths();return r[r.length-1]}getLengths(r=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let t,i=this.getPoint(0),n=0;e.push(0);for(let s=1;s<=r;s++)t=this.getPoint(s/r),n+=t.distanceTo(i),e.push(n),i=t;return this.cacheArcLengths=e,e}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(r,e){const t=this.getLengths();let i=0;const n=t.length;let s;e?s=e:s=r*t[n-1];let o=0,a=n-1,l;for(;o<=a;)if(i=Math.floor(o+(a-o)/2),l=t[i]-s,l<0)o=i+1;else if(l>0)a=i-1;else{a=i;break}if(i=a,t[i]===s)return i/(n-1);const c=t[i],u=t[i+1]-c,d=(s-c)/u;return(i+d)/(n-1)}getTangent(r,e){let t=r-1e-4,i=r+1e-4;t<0&&(t=0),i>1&&(i=1);const n=this.getPoint(t),s=this.getPoint(i),o=e||(n.isVector2?new qe:new oe);return o.copy(s).sub(n).normalize(),o}getTangentAt(r,e){const t=this.getUtoTmapping(r);return this.getTangent(t,e)}computeFrenetFrames(r,e){const t=new oe,i=[],n=[],s=[],o=new oe,a=new St;for(let h=0;h<=r;h++){const p=h/r;i[h]=this.getTangentAt(p,new oe)}n[0]=new oe,s[0]=new oe;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=l&&(l=c,t.set(1,0,0)),u<=l&&(l=u,t.set(0,1,0)),d<=l&&t.set(0,0,1),o.crossVectors(i[0],t).normalize(),n[0].crossVectors(i[0],o),s[0].crossVectors(i[0],n[0]);for(let h=1;h<=r;h++){if(n[h]=n[h-1].clone(),s[h]=s[h-1].clone(),o.crossVectors(i[h-1],i[h]),o.length()>Number.EPSILON){o.normalize();const p=Math.acos(Di(i[h-1].dot(i[h]),-1,1));n[h].applyMatrix4(a.makeRotationAxis(o,p))}s[h].crossVectors(i[h],n[h])}if(e===!0){let h=Math.acos(Di(n[0].dot(n[r]),-1,1));h/=r,i[0].dot(o.crossVectors(n[0],n[r]))>0&&(h=-h);for(let p=1;p<=r;p++)n[p].applyMatrix4(a.makeRotationAxis(i[p],h*p)),s[p].crossVectors(i[p],n[p])}return{tangents:i,normals:n,binormals:s}}clone(){return new this.constructor().copy(this)}copy(r){return this.arcLengthDivisions=r.arcLengthDivisions,this}toJSON(){const r={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return r.arcLengthDivisions=this.arcLengthDivisions,r.type=this.type,r}fromJSON(r){return this.arcLengthDivisions=r.arcLengthDivisions,this}},C_=class extends va{constructor(r=0,e=0,t=1,i=1,n=0,s=Math.PI*2,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=r,this.aY=e,this.xRadius=t,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(r,e){const t=e||new qe,i=Math.PI*2;let n=this.aEndAngle-this.aStartAngle;const s=Math.abs(n)<Number.EPSILON;for(;n<0;)n+=i;for(;n>i;)n-=i;n<Number.EPSILON&&(s?n=0:n=i),this.aClockwise===!0&&!s&&(n===i?n=-i:n=n-i);const o=this.aStartAngle+r*n;let a=this.aX+this.xRadius*Math.cos(o),l=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),d=a-this.aX,h=l-this.aY;a=d*c-h*u+this.aX,l=d*u+h*c+this.aY}return t.set(a,l)}copy(r){return super.copy(r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this}toJSON(){const r=super.toJSON();return r.aX=this.aX,r.aY=this.aY,r.xRadius=this.xRadius,r.yRadius=this.yRadius,r.aStartAngle=this.aStartAngle,r.aEndAngle=this.aEndAngle,r.aClockwise=this.aClockwise,r.aRotation=this.aRotation,r}fromJSON(r){return super.fromJSON(r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this}},WV=class extends C_{constructor(r,e,t,i,n,s){super(r,e,t,t,i,n,s),this.isArcCurve=!0,this.type="ArcCurve"}};function DN(){let r=0,e=0,t=0,i=0;function n(s,o,a,l){r=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){n(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,p=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,p*=u,n(o,a,h,p)},calc:function(s){const o=s*s,a=o*s;return r+e*s+t*o+i*a}}}const A_=new oe,UN=new DN,FN=new DN,BN=new DN;let $V=class extends va{constructor(r=[],e=!1,t="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=r,this.closed=e,this.curveType=t,this.tension=i}getPoint(r,e=new oe){const t=e,i=this.points,n=i.length,s=(n-(this.closed?0:1))*r;let o=Math.floor(s),a=s-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/n)+1)*n:a===0&&o===n-1&&(o=n-2,a=1);let l,c;this.closed||o>0?l=i[(o-1)%n]:(A_.subVectors(i[0],i[1]).add(i[0]),l=A_);const u=i[o%n],d=i[(o+1)%n];if(this.closed||o+2<n?c=i[(o+2)%n]:(A_.subVectors(i[n-1],i[n-2]).add(i[n-1]),c=A_),this.curveType==="centripetal"||this.curveType==="chordal"){const h=this.curveType==="chordal"?.5:.25;let p=Math.pow(l.distanceToSquared(u),h),f=Math.pow(u.distanceToSquared(d),h),m=Math.pow(d.distanceToSquared(c),h);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),UN.initNonuniformCatmullRom(l.x,u.x,d.x,c.x,p,f,m),FN.initNonuniformCatmullRom(l.y,u.y,d.y,c.y,p,f,m),BN.initNonuniformCatmullRom(l.z,u.z,d.z,c.z,p,f,m)}else this.curveType==="catmullrom"&&(UN.initCatmullRom(l.x,u.x,d.x,c.x,this.tension),FN.initCatmullRom(l.y,u.y,d.y,c.y,this.tension),BN.initCatmullRom(l.z,u.z,d.z,c.z,this.tension));return t.set(UN.calc(a),FN.calc(a),BN.calc(a)),t}copy(r){super.copy(r),this.points=[];for(let e=0,t=r.points.length;e<t;e++){const i=r.points[e];this.points.push(i.clone())}return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this}toJSON(){const r=super.toJSON();r.points=[];for(let e=0,t=this.points.length;e<t;e++){const i=this.points[e];r.points.push(i.toArray())}return r.closed=this.closed,r.curveType=this.curveType,r.tension=this.tension,r}fromJSON(r){super.fromJSON(r),this.points=[];for(let e=0,t=r.points.length;e<t;e++){const i=r.points[e];this.points.push(new oe().fromArray(i))}return this.closed=r.closed,this.curveType=r.curveType,this.tension=r.tension,this}};function XV(r,e,t,i,n){const s=(i-e)*.5,o=(n-t)*.5,a=r*r,l=r*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*r+t}function n4e(r,e){const t=1-r;return t*t*e}function s4e(r,e){return 2*(1-r)*r*e}function o4e(r,e){return r*r*e}function Uy(r,e,t,i){return n4e(r,e)+s4e(r,t)+o4e(r,i)}function a4e(r,e){const t=1-r;return t*t*t*e}function l4e(r,e){const t=1-r;return 3*t*t*r*e}function c4e(r,e){return 3*(1-r)*r*r*e}function u4e(r,e){return r*r*r*e}function Fy(r,e,t,i,n){return a4e(r,e)+l4e(r,t)+c4e(r,i)+u4e(r,n)}let zN=class extends va{constructor(r=new qe,e=new qe,t=new qe,i=new qe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=r,this.v1=e,this.v2=t,this.v3=i}getPoint(r,e=new qe){const t=e,i=this.v0,n=this.v1,s=this.v2,o=this.v3;return t.set(Fy(r,i.x,n.x,s.x,o.x),Fy(r,i.y,n.y,s.y,o.y)),t}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this}},VN=class extends va{constructor(r=new oe,e=new oe,t=new oe,i=new oe){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=r,this.v1=e,this.v2=t,this.v3=i}getPoint(r,e=new oe){const t=e,i=this.v0,n=this.v1,s=this.v2,o=this.v3;return t.set(Fy(r,i.x,n.x,s.x,o.x),Fy(r,i.y,n.y,s.y,o.y),Fy(r,i.z,n.z,s.z,o.z)),t}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this}},GN=class extends va{constructor(r=new qe,e=new qe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=r,this.v2=e}getPoint(r,e=new qe){const t=e;return r===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(r).add(this.v1)),t}getPointAt(r,e){return this.getPoint(r,e)}getTangent(r,e=new qe){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(r,e){return this.getTangent(r,e)}copy(r){return super.copy(r),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}},qV=class extends va{constructor(r=new oe,e=new oe){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=r,this.v2=e}getPoint(r,e=new oe){const t=e;return r===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(r).add(this.v1)),t}getPointAt(r,e){return this.getPoint(r,e)}getTangent(r,e=new oe){return e.subVectors(this.v2,this.v1).normalize()}getTangentAt(r,e){return this.getTangent(r,e)}copy(r){return super.copy(r),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}},jN=class extends va{constructor(r=new qe,e=new qe,t=new qe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=r,this.v1=e,this.v2=t}getPoint(r,e=new qe){const t=e,i=this.v0,n=this.v1,s=this.v2;return t.set(Uy(r,i.x,n.x,s.x),Uy(r,i.y,n.y,s.y)),t}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}},HN=class extends va{constructor(r=new oe,e=new oe,t=new oe){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=r,this.v1=e,this.v2=t}getPoint(r,e=new oe){const t=e,i=this.v0,n=this.v1,s=this.v2;return t.set(Uy(r,i.x,n.x,s.x),Uy(r,i.y,n.y,s.y),Uy(r,i.z,n.z,s.z)),t}copy(r){return super.copy(r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this}toJSON(){const r=super.toJSON();return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r}fromJSON(r){return super.fromJSON(r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this}},WN=class extends va{constructor(r=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=r}getPoint(r,e=new qe){const t=e,i=this.points,n=(i.length-1)*r,s=Math.floor(n),o=n-s,a=i[s===0?s:s-1],l=i[s],c=i[s>i.length-2?i.length-1:s+1],u=i[s>i.length-3?i.length-1:s+2];return t.set(XV(o,a.x,l.x,c.x,u.x),XV(o,a.y,l.y,c.y,u.y)),t}copy(r){super.copy(r),this.points=[];for(let e=0,t=r.points.length;e<t;e++){const i=r.points[e];this.points.push(i.clone())}return this}toJSON(){const r=super.toJSON();r.points=[];for(let e=0,t=this.points.length;e<t;e++){const i=this.points[e];r.points.push(i.toArray())}return r}fromJSON(r){super.fromJSON(r),this.points=[];for(let e=0,t=r.points.length;e<t;e++){const i=r.points[e];this.points.push(new qe().fromArray(i))}return this}};var N_=Object.freeze({__proto__:null,ArcCurve:WV,CatmullRomCurve3:$V,CubicBezierCurve:zN,CubicBezierCurve3:VN,EllipseCurve:C_,LineCurve:GN,LineCurve3:qV,QuadraticBezierCurve:jN,QuadraticBezierCurve3:HN,SplineCurve:WN});let KV=class extends va{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(r){this.curves.push(r)}closePath(){const r=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);if(!r.equals(e)){const t=r.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new N_[t](e,r))}return this}getPoint(r,e){const t=r*this.getLength(),i=this.getCurveLengths();let n=0;for(;n<i.length;){if(i[n]>=t){const s=i[n]-t,o=this.curves[n],a=o.getLength(),l=a===0?0:1-s/a;return o.getPointAt(l,e)}n++}return null}getLength(){const r=this.getCurveLengths();return r[r.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const r=[];let e=0;for(let t=0,i=this.curves.length;t<i;t++)e+=this.curves[t].getLength(),r.push(e);return this.cacheLengths=r,r}getSpacedPoints(r=40){const e=[];for(let t=0;t<=r;t++)e.push(this.getPoint(t/r));return this.autoClose&&e.push(e[0]),e}getPoints(r=12){const e=[];let t;for(let i=0,n=this.curves;i<n.length;i++){const s=n[i],o=s.isEllipseCurve?r*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?r*s.points.length:r,a=s.getPoints(o);for(let l=0;l<a.length;l++){const c=a[l];t&&t.equals(c)||(e.push(c),t=c)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e}copy(r){super.copy(r),this.curves=[];for(let e=0,t=r.curves.length;e<t;e++){const i=r.curves[e];this.curves.push(i.clone())}return this.autoClose=r.autoClose,this}toJSON(){const r=super.toJSON();r.autoClose=this.autoClose,r.curves=[];for(let e=0,t=this.curves.length;e<t;e++){const i=this.curves[e];r.curves.push(i.toJSON())}return r}fromJSON(r){super.fromJSON(r),this.autoClose=r.autoClose,this.curves=[];for(let e=0,t=r.curves.length;e<t;e++){const i=r.curves[e];this.curves.push(new N_[i.type]().fromJSON(i))}return this}},Wm=class extends KV{constructor(r){super(),this.type="Path",this.currentPoint=new qe,r&&this.setFromPoints(r)}setFromPoints(r){this.moveTo(r[0].x,r[0].y);for(let e=1,t=r.length;e<t;e++)this.lineTo(r[e].x,r[e].y);return this}moveTo(r,e){return this.currentPoint.set(r,e),this}lineTo(r,e){const t=new GN(this.currentPoint.clone(),new qe(r,e));return this.curves.push(t),this.currentPoint.set(r,e),this}quadraticCurveTo(r,e,t,i){const n=new jN(this.currentPoint.clone(),new qe(r,e),new qe(t,i));return this.curves.push(n),this.currentPoint.set(t,i),this}bezierCurveTo(r,e,t,i,n,s){const o=new zN(this.currentPoint.clone(),new qe(r,e),new qe(t,i),new qe(n,s));return this.curves.push(o),this.currentPoint.set(n,s),this}splineThru(r){const e=[this.currentPoint.clone()].concat(r),t=new WN(e);return this.curves.push(t),this.currentPoint.copy(r[r.length-1]),this}arc(r,e,t,i,n,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(r+o,e+a,t,i,n,s),this}absarc(r,e,t,i,n,s){return this.absellipse(r,e,t,t,i,n,s),this}ellipse(r,e,t,i,n,s,o,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(r+l,e+c,t,i,n,s,o,a),this}absellipse(r,e,t,i,n,s,o,a){const l=new C_(r,e,t,i,n,s,o,a);if(this.curves.length>0){const u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(r){return super.copy(r),this.currentPoint.copy(r.currentPoint),this}toJSON(){const r=super.toJSON();return r.currentPoint=this.currentPoint.toArray(),r}fromJSON(r){return super.fromJSON(r),this.currentPoint.fromArray(r.currentPoint),this}},$N=class nK extends sr{constructor(e=[new qe(0,-.5),new qe(.5,0),new qe(0,.5)],t=12,i=0,n=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t),n=Di(n,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,d=new oe,h=new qe,p=new oe,f=new oe,m=new oe;let g=0,v=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:g=e[x+1].x-e[x].x,v=e[x+1].y-e[x].y,p.x=v*1,p.y=-g,p.z=v*0,m.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:g=e[x+1].x-e[x].x,v=e[x+1].y-e[x].y,p.x=v*1,p.y=-g,p.z=v*0,f.copy(p),p.x+=m.x,p.y+=m.y,p.z+=m.z,p.normalize(),l.push(p.x,p.y,p.z),m.copy(f)}for(let x=0;x<=t;x++){const b=i+x*u*n,w=Math.sin(b),_=Math.cos(b);for(let S=0;S<=e.length-1;S++){d.x=e[S].x*w,d.y=e[S].y,d.z=e[S].x*_,o.push(d.x,d.y,d.z),h.x=x/t,h.y=S/(e.length-1),a.push(h.x,h.y);const T=l[3*S+0]*w,M=l[3*S+1],E=l[3*S+0]*_;c.push(T,M,E)}}for(let x=0;x<t;x++)for(let b=0;b<e.length-1;b++){const w=b+x*e.length,_=w,S=w+e.length,T=w+e.length+1,M=w+1;s.push(_,S,M),s.push(T,M,S)}this.setIndex(s),this.setAttribute("position",new Rt(o,3)),this.setAttribute("uv",new Rt(a,2)),this.setAttribute("normal",new Rt(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nK(e.points,e.segments,e.phiStart,e.phiLength)}},R_=class sK extends $N{constructor(e=1,t=1,i=4,n=8){const s=new Wm;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),n),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:n}}static fromJSON(e){return new sK(e.radius,e.length,e.capSegments,e.radialSegments)}},YV=class oK extends sr{constructor(e=1,t=32,i=0,n=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new oe,u=new qe;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=t;d++,h+=3){const p=i+d/t*n;c.x=e*Math.cos(p),c.y=e*Math.sin(p),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new Rt(o,3)),this.setAttribute("normal",new Rt(a,3)),this.setAttribute("uv",new Rt(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new oK(e.radius,e.segments,e.thetaStart,e.thetaLength)}},bn=class aK extends sr{constructor(e=1,t=1,i=1,n=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;n=Math.floor(n),s=Math.floor(s);const u=[],d=[],h=[],p=[];let f=0;const m=[],g=i/2;let v=0;x(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(u),this.setAttribute("position",new Rt(d,3)),this.setAttribute("normal",new Rt(h,3)),this.setAttribute("uv",new Rt(p,2));function x(){const w=new oe,_=new oe;let S=0;const T=(t-e)/i;for(let M=0;M<=s;M++){const E=[],C=M/s,P=C*(t-e)+e;for(let A=0;A<=n;A++){const N=A/n,R=N*l+a,F=Math.sin(R),B=Math.cos(R);_.x=P*F,_.y=-C*i+g,_.z=P*B,d.push(_.x,_.y,_.z),w.set(F,T,B).normalize(),h.push(w.x,w.y,w.z),p.push(N,1-C),E.push(f++)}m.push(E)}for(let M=0;M<n;M++)for(let E=0;E<s;E++){const C=m[E][M],P=m[E+1][M],A=m[E+1][M+1],N=m[E][M+1];u.push(C,P,N),u.push(P,A,N),S+=6}c.addGroup(v,S,0),v+=S}function b(w){const _=f,S=new qe,T=new oe;let M=0;const E=w===!0?e:t,C=w===!0?1:-1;for(let A=1;A<=n;A++)d.push(0,g*C,0),h.push(0,C,0),p.push(.5,.5),f++;const P=f;for(let A=0;A<=n;A++){const N=A/n*l+a,R=Math.cos(N),F=Math.sin(N);T.x=E*F,T.y=g*C,T.z=E*R,d.push(T.x,T.y,T.z),h.push(0,C,0),S.x=R*.5+.5,S.y=F*.5*C+.5,p.push(S.x,S.y),f++}for(let A=0;A<n;A++){const N=_+A,R=P+A;w===!0?u.push(R,R+1,N):u.push(R+1,R,N),M+=3}c.addGroup(v,M,w===!0?1:2),v+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aK(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},XN=class lK extends bn{constructor(e=1,t=1,i=32,n=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,n,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new lK(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},$m=class cK extends sr{constructor(e=[],t=[],i=1,n=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n};const s=[],o=[];a(n),c(i),u(),this.setAttribute("position",new Rt(s,3)),this.setAttribute("normal",new Rt(s.slice(),3)),this.setAttribute("uv",new Rt(o,2)),n===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const b=new oe,w=new oe,_=new oe;for(let S=0;S<t.length;S+=3)p(t[S+0],b),p(t[S+1],w),p(t[S+2],_),l(b,w,_,x)}function l(x,b,w,_){const S=_+1,T=[];for(let M=0;M<=S;M++){T[M]=[];const E=x.clone().lerp(w,M/S),C=b.clone().lerp(w,M/S),P=S-M;for(let A=0;A<=P;A++)A===0&&M===S?T[M][A]=E:T[M][A]=E.clone().lerp(C,A/P)}for(let M=0;M<S;M++)for(let E=0;E<2*(S-M)-1;E++){const C=Math.floor(E/2);E%2===0?(h(T[M][C+1]),h(T[M+1][C]),h(T[M][C])):(h(T[M][C+1]),h(T[M+1][C+1]),h(T[M+1][C]))}}function c(x){const b=new oe;for(let w=0;w<s.length;w+=3)b.x=s[w+0],b.y=s[w+1],b.z=s[w+2],b.normalize().multiplyScalar(x),s[w+0]=b.x,s[w+1]=b.y,s[w+2]=b.z}function u(){const x=new oe;for(let b=0;b<s.length;b+=3){x.x=s[b+0],x.y=s[b+1],x.z=s[b+2];const w=g(x)/2/Math.PI+.5,_=v(x)/Math.PI+.5;o.push(w,1-_)}f(),d()}function d(){for(let x=0;x<o.length;x+=6){const b=o[x+0],w=o[x+2],_=o[x+4],S=Math.max(b,w,_),T=Math.min(b,w,_);S>.9&&T<.1&&(b<.2&&(o[x+0]+=1),w<.2&&(o[x+2]+=1),_<.2&&(o[x+4]+=1))}}function h(x){s.push(x.x,x.y,x.z)}function p(x,b){const w=x*3;b.x=e[w+0],b.y=e[w+1],b.z=e[w+2]}function f(){const x=new oe,b=new oe,w=new oe,_=new oe,S=new qe,T=new qe,M=new qe;for(let E=0,C=0;E<s.length;E+=9,C+=6){x.set(s[E+0],s[E+1],s[E+2]),b.set(s[E+3],s[E+4],s[E+5]),w.set(s[E+6],s[E+7],s[E+8]),S.set(o[C+0],o[C+1]),T.set(o[C+2],o[C+3]),M.set(o[C+4],o[C+5]),_.copy(x).add(b).add(w).divideScalar(3);const P=g(_);m(S,C+0,x,P),m(T,C+2,b,P),m(M,C+4,w,P)}}function m(x,b,w,_){_<0&&x.x===1&&(o[b]=x.x-1),w.x===0&&w.z===0&&(o[b]=_/2/Math.PI+.5)}function g(x){return Math.atan2(x.z,-x.x)}function v(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cK(e.vertices,e.indices,e.radius,e.details)}},ZV=class uK extends $m{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,n=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new uK(e.radius,e.detail)}};const k_=new oe,L_=new oe,qN=new oe,O_=new Fh;let JV=class extends sr{constructor(r=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:r,thresholdAngle:e},r!==null){const t=Math.pow(10,4),i=Math.cos(Ph*e),n=r.getIndex(),s=r.getAttribute("position"),o=n?n.count:s.count,a=[0,0,0],l=["a","b","c"],c=new Array(3),u={},d=[];for(let h=0;h<o;h+=3){n?(a[0]=n.getX(h),a[1]=n.getX(h+1),a[2]=n.getX(h+2)):(a[0]=h,a[1]=h+1,a[2]=h+2);const{a:p,b:f,c:m}=O_;if(p.fromBufferAttribute(s,a[0]),f.fromBufferAttribute(s,a[1]),m.fromBufferAttribute(s,a[2]),O_.getNormal(qN),c[0]=`${Math.round(p.x*t)},${Math.round(p.y*t)},${Math.round(p.z*t)}`,c[1]=`${Math.round(f.x*t)},${Math.round(f.y*t)},${Math.round(f.z*t)}`,c[2]=`${Math.round(m.x*t)},${Math.round(m.y*t)},${Math.round(m.z*t)}`,!(c[0]===c[1]||c[1]===c[2]||c[2]===c[0]))for(let g=0;g<3;g++){const v=(g+1)%3,x=c[g],b=c[v],w=O_[l[g]],_=O_[l[v]],S=`${x}_${b}`,T=`${b}_${x}`;T in u&&u[T]?(qN.dot(u[T].normal)<=i&&(d.push(w.x,w.y,w.z),d.push(_.x,_.y,_.z)),u[T]=null):S in u||(u[S]={index0:a[g],index1:a[v],normal:qN.clone()})}}for(const h in u)if(u[h]){const{index0:p,index1:f}=u[h];k_.fromBufferAttribute(s,p),L_.fromBufferAttribute(s,f),d.push(k_.x,k_.y,k_.z),d.push(L_.x,L_.y,L_.z)}this.setAttribute("position",new Rt(d,3))}}copy(r){return super.copy(r),this.parameters=Object.assign({},r.parameters),this}},Po=class extends Wm{constructor(r){super(r),this.uuid=No(),this.type="Shape",this.holes=[]}getPointsHoles(r){const e=[];for(let t=0,i=this.holes.length;t<i;t++)e[t]=this.holes[t].getPoints(r);return e}extractPoints(r){return{shape:this.getPoints(r),holes:this.getPointsHoles(r)}}copy(r){super.copy(r),this.holes=[];for(let e=0,t=r.holes.length;e<t;e++){const i=r.holes[e];this.holes.push(i.clone())}return this}toJSON(){const r=super.toJSON();r.uuid=this.uuid,r.holes=[];for(let e=0,t=this.holes.length;e<t;e++){const i=this.holes[e];r.holes.push(i.toJSON())}return r}fromJSON(r){super.fromJSON(r),this.uuid=r.uuid,this.holes=[];for(let e=0,t=r.holes.length;e<t;e++){const i=r.holes[e];this.holes.push(new Wm().fromJSON(i))}return this}};const d4e={triangulate:function(r,e,t=2){const i=e&&e.length,n=i?e[0]*t:r.length;let s=QV(r,0,n,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,h,p;if(i&&(s=g4e(r,e,s,t)),r.length>80*t){a=c=r[0],l=u=r[1];for(let f=t;f<n;f+=t)d=r[f],h=r[f+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);p=Math.max(c-a,u-l),p=p!==0?32767/p:0}return By(s,o,t,a,l,p,0),o}};function QV(r,e,t,i,n){let s,o;if(n===C4e(r,e,t,i)>0)for(s=e;s<t;s+=i)o=rG(s,r[s],r[s+1],o);else for(s=t-i;s>=e;s-=i)o=rG(s,r[s],r[s+1],o);return o&&P_(o,o.next)&&(Vy(o),o=o.next),o}function Yh(r,e){if(!r)return r;e||(e=r);let t=r,i;do if(i=!1,!t.steiner&&(P_(t,t.next)||Pi(t.prev,t,t.next)===0)){if(Vy(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function By(r,e,t,i,n,s,o){if(!r)return;!o&&s&&w4e(r,i,n,s);let a=r,l,c;for(;r.prev!==r.next;){if(l=r.prev,c=r.next,s?p4e(r,i,n,s):h4e(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(c.i/t|0),Vy(r),r=c.next,a=c.next;continue}if(r=c,r===a){o?o===1?(r=f4e(Yh(r),e,t),By(r,e,t,i,n,s,2)):o===2&&m4e(r,e,t,i,n,s):By(Yh(r),e,t,i,n,s,1);break}}}function h4e(r){const e=r.prev,t=r,i=r.next;if(Pi(e,t,i)>=0)return!1;const n=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=n<s?n<o?n:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,h=n>s?n>o?n:o:s>o?s:o,p=a>l?a>c?a:c:l>c?l:c;let f=i.next;for(;f!==e;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&Xm(n,a,s,l,o,c,f.x,f.y)&&Pi(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function p4e(r,e,t,i){const n=r.prev,s=r,o=r.next;if(Pi(n,s,o)>=0)return!1;const a=n.x,l=s.x,c=o.x,u=n.y,d=s.y,h=o.y,p=a<l?a<c?a:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=a>l?a>c?a:c:l>c?l:c,g=u>d?u>h?u:h:d>h?d:h,v=KN(p,f,e,t,i),x=KN(m,g,e,t,i);let b=r.prevZ,w=r.nextZ;for(;b&&b.z>=v&&w&&w.z<=x;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==n&&b!==o&&Xm(a,u,l,d,c,h,b.x,b.y)&&Pi(b.prev,b,b.next)>=0||(b=b.prevZ,w.x>=p&&w.x<=m&&w.y>=f&&w.y<=g&&w!==n&&w!==o&&Xm(a,u,l,d,c,h,w.x,w.y)&&Pi(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==n&&b!==o&&Xm(a,u,l,d,c,h,b.x,b.y)&&Pi(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=x;){if(w.x>=p&&w.x<=m&&w.y>=f&&w.y<=g&&w!==n&&w!==o&&Xm(a,u,l,d,c,h,w.x,w.y)&&Pi(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function f4e(r,e,t){let i=r;do{const n=i.prev,s=i.next.next;!P_(n,s)&&eG(n,i,i.next,s)&&zy(n,s)&&zy(s,n)&&(e.push(n.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Vy(i),Vy(i.next),i=r=s),i=i.next}while(i!==r);return Yh(i)}function m4e(r,e,t,i,n,s){let o=r;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&T4e(o,a)){let l=tG(o,a);o=Yh(o,o.next),l=Yh(l,l.next),By(o,e,t,i,n,s,0),By(l,e,t,i,n,s,0);return}a=a.next}o=o.next}while(o!==r)}function g4e(r,e,t,i){const n=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:r.length,c=QV(r,a,l,i,!1),c===c.next&&(c.steiner=!0),n.push(S4e(c));for(n.sort(v4e),s=0;s<n.length;s++)t=y4e(n[s],t);return t}function v4e(r,e){return r.x-e.x}function y4e(r,e){const t=b4e(r,e);if(!t)return e;const i=tG(t,r);return Yh(i,i.next),Yh(t,t.next)}function b4e(r,e){let t=e,i=-1/0,n;const s=r.x,o=r.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>i&&(i=h,n=t.x<t.next.x?t:t.next,h===s))return n}t=t.next}while(t!==e);if(!n)return null;const a=n,l=n.x,c=n.y;let u=1/0,d;t=n;do s>=t.x&&t.x>=l&&s!==t.x&&Xm(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),zy(t,r)&&(d<u||d===u&&(t.x>n.x||t.x===n.x&&x4e(n,t)))&&(n=t,u=d)),t=t.next;while(t!==a);return n}function x4e(r,e){return Pi(r.prev,r,e.prev)<0&&Pi(e.next,r,r.next)<0}function w4e(r,e,t,i){let n=r;do n.z===0&&(n.z=KN(n.x,n.y,e,t,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==r);n.prevZ.nextZ=null,n.prevZ=null,_4e(n)}function _4e(r){let e,t,i,n,s,o,a,l,c=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(n=t,t=t.nextZ,a--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:r=n,n.prevZ=s,s=n;t=i}s.nextZ=null,c*=2}while(o>1);return r}function KN(r,e,t,i,n){return r=(r-t)*n|0,e=(e-i)*n|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function S4e(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Xm(r,e,t,i,n,s,o,a){return(n-o)*(e-a)>=(r-o)*(s-a)&&(r-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(n-o)*(i-a)}function T4e(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!M4e(r,e)&&(zy(r,e)&&zy(e,r)&&E4e(r,e)&&(Pi(r.prev,r,e.prev)||Pi(r,e.prev,e))||P_(r,e)&&Pi(r.prev,r,r.next)>0&&Pi(e.prev,e,e.next)>0)}function Pi(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function P_(r,e){return r.x===e.x&&r.y===e.y}function eG(r,e,t,i){const n=D_(Pi(r,e,t)),s=D_(Pi(r,e,i)),o=D_(Pi(t,i,r)),a=D_(Pi(t,i,e));return!!(n!==s&&o!==a||n===0&&I_(r,t,e)||s===0&&I_(r,i,e)||o===0&&I_(t,r,i)||a===0&&I_(t,e,i))}function I_(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function D_(r){return r>0?1:r<0?-1:0}function M4e(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&eG(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function zy(r,e){return Pi(r.prev,r,r.next)<0?Pi(r,e,r.next)>=0&&Pi(r,r.prev,e)>=0:Pi(r,e,r.prev)<0||Pi(r,r.next,e)<0}function E4e(r,e){let t=r,i=!1;const n=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&n<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==r);return i}function tG(r,e){const t=new YN(r.i,r.x,r.y),i=new YN(e.i,e.x,e.y),n=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=n,n.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function rG(r,e,t,i){const n=new YN(r,e,t);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Vy(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function YN(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function C4e(r,e,t,i){let n=0;for(let s=e,o=t-i;s<t;s+=i)n+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return n}let Uu=class dK{static area(e){const t=e.length;let i=0;for(let n=t-1,s=0;s<t;n=s++)i+=e[n].x*e[s].y-e[s].x*e[n].y;return i*.5}static isClockWise(e){return dK.area(e)<0}static triangulateShape(e,t){const i=[],n=[],s=[];iG(e),nG(i,e);let o=e.length;t.forEach(iG);for(let l=0;l<t.length;l++)n.push(o),o+=t[l].length,nG(i,t[l]);const a=d4e.triangulate(i,n);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}};function iG(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function nG(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}let U_=class hK extends sr{constructor(e=new Po([new qe(.5,.5),new qe(-.5,.5),new qe(-.5,-.5),new qe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,n=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Rt(n,3)),this.setAttribute("uv",new Rt(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,f=t.bevelSize!==void 0?t.bevelSize:p-.1,m=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:A4e;let b,w=!1,_,S,T,M;v&&(b=v.getSpacedPoints(u),w=!0,h=!1,_=v.computeFrenetFrames(u,!1),S=new oe,T=new oe,M=new oe),h||(g=0,p=0,f=0,m=0);const E=a.extractPoints(c);let C=E.shape;const P=E.holes;if(!Uu.isClockWise(C)){C=C.reverse();for(let Z=0,L=P.length;Z<L;Z++){const $=P[Z];Uu.isClockWise($)&&(P[Z]=$.reverse())}}const A=Uu.triangulateShape(C,P),N=C;for(let Z=0,L=P.length;Z<L;Z++){const $=P[Z];C=C.concat($)}function R(Z,L,$){return L||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(L,$)}const F=C.length,B=A.length;function k(Z,L,$){let re,te,le;const ge=Z.x-L.x,be=Z.y-L.y,_e=$.x-Z.x,pe=$.y-Z.y,Se=ge*ge+be*be,Fe=ge*pe-be*_e;if(Math.abs(Fe)>Number.EPSILON){const Y=Math.sqrt(Se),H=Math.sqrt(_e*_e+pe*pe),ne=L.x-be/Y,Le=L.y+ge/Y,Pe=$.x-pe/H,Ee=$.y+_e/H,Ue=((Pe-ne)*pe-(Ee-Le)*_e)/(ge*pe-be*_e);re=ne+ge*Ue-Z.x,te=Le+be*Ue-Z.y;const Be=re*re+te*te;if(Be<=2)return new qe(re,te);le=Math.sqrt(Be/2)}else{let Y=!1;ge>Number.EPSILON?_e>Number.EPSILON&&(Y=!0):ge<-Number.EPSILON?_e<-Number.EPSILON&&(Y=!0):Math.sign(be)===Math.sign(pe)&&(Y=!0),Y?(re=-be,te=ge,le=Math.sqrt(Se)):(re=ge,te=be,le=Math.sqrt(Se/2))}return new qe(re/le,te/le)}const z=[];for(let Z=0,L=N.length,$=L-1,re=Z+1;Z<L;Z++,$++,re++)$===L&&($=0),re===L&&(re=0),z[Z]=k(N[Z],N[$],N[re]);const O=[];let V,U=z.concat();for(let Z=0,L=P.length;Z<L;Z++){const $=P[Z];V=[];for(let re=0,te=$.length,le=te-1,ge=re+1;re<te;re++,le++,ge++)le===te&&(le=0),ge===te&&(ge=0),V[re]=k($[re],$[le],$[ge]);O.push(V),U=U.concat(V)}for(let Z=0;Z<g;Z++){const L=Z/g,$=p*Math.cos(L*Math.PI/2),re=f*Math.sin(L*Math.PI/2)+m;for(let te=0,le=N.length;te<le;te++){const ge=R(N[te],z[te],re);de(ge.x,ge.y,-$)}for(let te=0,le=P.length;te<le;te++){const ge=P[te];V=O[te];for(let be=0,_e=ge.length;be<_e;be++){const pe=R(ge[be],V[be],re);de(pe.x,pe.y,-$)}}}const G=f+m;for(let Z=0;Z<F;Z++){const L=h?R(C[Z],U[Z],G):C[Z];w?(T.copy(_.normals[0]).multiplyScalar(L.x),S.copy(_.binormals[0]).multiplyScalar(L.y),M.copy(b[0]).add(T).add(S),de(M.x,M.y,M.z)):de(L.x,L.y,0)}for(let Z=1;Z<=u;Z++)for(let L=0;L<F;L++){const $=h?R(C[L],U[L],G):C[L];w?(T.copy(_.normals[Z]).multiplyScalar($.x),S.copy(_.binormals[Z]).multiplyScalar($.y),M.copy(b[Z]).add(T).add(S),de(M.x,M.y,M.z)):de($.x,$.y,d/u*Z)}for(let Z=g-1;Z>=0;Z--){const L=Z/g,$=p*Math.cos(L*Math.PI/2),re=f*Math.sin(L*Math.PI/2)+m;for(let te=0,le=N.length;te<le;te++){const ge=R(N[te],z[te],re);de(ge.x,ge.y,d+$)}for(let te=0,le=P.length;te<le;te++){const ge=P[te];V=O[te];for(let be=0,_e=ge.length;be<_e;be++){const pe=R(ge[be],V[be],re);w?de(pe.x,pe.y+b[u-1].y,b[u-1].x+$):de(pe.x,pe.y,d+$)}}}X(),ie();function X(){const Z=n.length/3;if(h){let L=0,$=F*L;for(let re=0;re<B;re++){const te=A[re];K(te[2]+$,te[1]+$,te[0]+$)}L=u+g*2,$=F*L;for(let re=0;re<B;re++){const te=A[re];K(te[0]+$,te[1]+$,te[2]+$)}}else{for(let L=0;L<B;L++){const $=A[L];K($[2],$[1],$[0])}for(let L=0;L<B;L++){const $=A[L];K($[0]+F*u,$[1]+F*u,$[2]+F*u)}}i.addGroup(Z,n.length/3-Z,0)}function ie(){const Z=n.length/3;let L=0;se(N,L),L+=N.length;for(let $=0,re=P.length;$<re;$++){const te=P[$];se(te,L),L+=te.length}i.addGroup(Z,n.length/3-Z,1)}function se(Z,L){let $=Z.length;for(;--$>=0;){const re=$;let te=$-1;te<0&&(te=Z.length-1);for(let le=0,ge=u+g*2;le<ge;le++){const be=F*le,_e=F*(le+1),pe=L+re+be,Se=L+te+be,Fe=L+te+_e,Y=L+re+_e;q(pe,Se,Fe,Y)}}}function de(Z,L,$){l.push(Z),l.push(L),l.push($)}function K(Z,L,$){ce(Z),ce(L),ce($);const re=n.length/3,te=x.generateTopUV(i,n,re-3,re-2,re-1);Te(te[0]),Te(te[1]),Te(te[2])}function q(Z,L,$,re){ce(Z),ce(L),ce(re),ce(L),ce($),ce(re);const te=n.length/3,le=x.generateSideWallUV(i,n,te-6,te-3,te-2,te-1);Te(le[0]),Te(le[1]),Te(le[3]),Te(le[1]),Te(le[2]),Te(le[3])}function ce(Z){n.push(l[Z*3+0]),n.push(l[Z*3+1]),n.push(l[Z*3+2])}function Te(Z){s.push(Z.x),s.push(Z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return N4e(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const n=e.options.extrudePath;return n!==void 0&&(e.options.extrudePath=new N_[n.type]().fromJSON(n)),new hK(i,e.options)}};const A4e={generateTopUV:function(r,e,t,i,n){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[n*3],u=e[n*3+1];return[new qe(s,o),new qe(a,l),new qe(c,u)]},generateSideWallUV:function(r,e,t,i,n,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],d=e[i*3+2],h=e[n*3],p=e[n*3+1],f=e[n*3+2],m=e[s*3],g=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new qe(o,1-l),new qe(c,1-d),new qe(h,1-f),new qe(m,1-v)]:[new qe(a,1-l),new qe(u,1-d),new qe(p,1-f),new qe(g,1-v)]}};function N4e(r,e,t){if(t.shapes=[],Array.isArray(r))for(let i=0,n=r.length;i<n;i++){const s=r[i];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}let sG=class pK extends $m{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(n,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new pK(e.radius,e.detail)}},Zh=class fK extends $m{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,n,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new fK(e.radius,e.detail)}},oG=class mK extends sr{constructor(e=.5,t=1,i=32,n=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:s,thetaLength:o},i=Math.max(3,i),n=Math.max(1,n);const a=[],l=[],c=[],u=[];let d=e;const h=(t-e)/n,p=new oe,f=new qe;for(let m=0;m<=n;m++){for(let g=0;g<=i;g++){const v=s+g/i*o;p.x=d*Math.cos(v),p.y=d*Math.sin(v),l.push(p.x,p.y,p.z),c.push(0,0,1),f.x=(p.x/t+1)/2,f.y=(p.y/t+1)/2,u.push(f.x,f.y)}d+=h}for(let m=0;m<n;m++){const g=m*(i+1);for(let v=0;v<i;v++){const x=v+g,b=x,w=x+i+1,_=x+i+2,S=x+1;a.push(b,w,S),a.push(w,_,S)}}this.setIndex(a),this.setAttribute("position",new Rt(l,3)),this.setAttribute("normal",new Rt(c,3)),this.setAttribute("uv",new Rt(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mK(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}},aG=class gK extends sr{constructor(e=new Po([new qe(0,.5),new qe(-.5,-.5),new qe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],n=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Rt(n,3)),this.setAttribute("normal",new Rt(s,3)),this.setAttribute("uv",new Rt(o,2));function c(u){const d=n.length/3,h=u.extractPoints(t);let p=h.shape;const f=h.holes;Uu.isClockWise(p)===!1&&(p=p.reverse());for(let g=0,v=f.length;g<v;g++){const x=f[g];Uu.isClockWise(x)===!0&&(f[g]=x.reverse())}const m=Uu.triangulateShape(p,f);for(let g=0,v=f.length;g<v;g++){const x=f[g];p=p.concat(x)}for(let g=0,v=p.length;g<v;g++){const x=p[g];n.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let g=0,v=m.length;g<v;g++){const x=m[g],b=x[0]+d,w=x[1]+d,_=x[2]+d;i.push(b,w,_),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return R4e(t,e)}static fromJSON(e,t){const i=[];for(let n=0,s=e.shapes.length;n<s;n++){const o=t[e.shapes[n]];i.push(o)}return new gK(i,e.curveSegments)}};function R4e(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,i=r.length;t<i;t++){const n=r[t];e.shapes.push(n.uuid)}else e.shapes.push(r.uuid);return e}let Jh=class vK extends sr{constructor(e=1,t=32,i=16,n=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new oe,h=new oe,p=[],f=[],m=[],g=[];for(let v=0;v<=i;v++){const x=[],b=v/i;let w=0;v===0&&o===0?w=.5/t:v===i&&l===Math.PI&&(w=-.5/t);for(let _=0;_<=t;_++){const S=_/t;d.x=-e*Math.cos(n+S*s)*Math.sin(o+b*a),d.y=e*Math.cos(o+b*a),d.z=e*Math.sin(n+S*s)*Math.sin(o+b*a),f.push(d.x,d.y,d.z),h.copy(d).normalize(),m.push(h.x,h.y,h.z),g.push(S+w,1-b),x.push(c++)}u.push(x)}for(let v=0;v<i;v++)for(let x=0;x<t;x++){const b=u[v][x+1],w=u[v][x],_=u[v+1][x],S=u[v+1][x+1];(v!==0||o>0)&&p.push(b,w,S),(v!==i-1||l<Math.PI)&&p.push(w,_,S)}this.setIndex(p),this.setAttribute("position",new Rt(f,3)),this.setAttribute("normal",new Rt(m,3)),this.setAttribute("uv",new Rt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vK(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}},lG=class yK extends $m{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,n,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yK(e.radius,e.detail)}},Fu=class bK extends sr{constructor(e=1,t=.4,i=12,n=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:s},i=Math.floor(i),n=Math.floor(n);const o=[],a=[],l=[],c=[],u=new oe,d=new oe,h=new oe;for(let p=0;p<=i;p++)for(let f=0;f<=n;f++){const m=f/n*s,g=p/i*Math.PI*2;d.x=(e+t*Math.cos(g))*Math.cos(m),d.y=(e+t*Math.cos(g))*Math.sin(m),d.z=t*Math.sin(g),a.push(d.x,d.y,d.z),u.x=e*Math.cos(m),u.y=e*Math.sin(m),h.subVectors(d,u).normalize(),l.push(h.x,h.y,h.z),c.push(f/n),c.push(p/i)}for(let p=1;p<=i;p++)for(let f=1;f<=n;f++){const m=(n+1)*p+f-1,g=(n+1)*(p-1)+f-1,v=(n+1)*(p-1)+f,x=(n+1)*p+f;o.push(m,g,x),o.push(g,v,x)}this.setIndex(o),this.setAttribute("position",new Rt(a,3)),this.setAttribute("normal",new Rt(l,3)),this.setAttribute("uv",new Rt(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bK(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}},ZN=class xK extends sr{constructor(e=1,t=.4,i=64,n=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:s,q:o},i=Math.floor(i),n=Math.floor(n);const a=[],l=[],c=[],u=[],d=new oe,h=new oe,p=new oe,f=new oe,m=new oe,g=new oe,v=new oe;for(let b=0;b<=i;++b){const w=b/i*s*Math.PI*2;x(w,s,o,e,p),x(w+.01,s,o,e,f),g.subVectors(f,p),v.addVectors(f,p),m.crossVectors(g,v),v.crossVectors(m,g),m.normalize(),v.normalize();for(let _=0;_<=n;++_){const S=_/n*Math.PI*2,T=-t*Math.cos(S),M=t*Math.sin(S);d.x=p.x+(T*v.x+M*m.x),d.y=p.y+(T*v.y+M*m.y),d.z=p.z+(T*v.z+M*m.z),l.push(d.x,d.y,d.z),h.subVectors(d,p).normalize(),c.push(h.x,h.y,h.z),u.push(b/i),u.push(_/n)}}for(let b=1;b<=i;b++)for(let w=1;w<=n;w++){const _=(n+1)*(b-1)+(w-1),S=(n+1)*b+(w-1),T=(n+1)*b+w,M=(n+1)*(b-1)+w;a.push(_,S,M),a.push(S,T,M)}this.setIndex(a),this.setAttribute("position",new Rt(l,3)),this.setAttribute("normal",new Rt(c,3)),this.setAttribute("uv",new Rt(u,2));function x(b,w,_,S,T){const M=Math.cos(b),E=Math.sin(b),C=_/w*b,P=Math.cos(C);T.x=S*(2+P)*.5*M,T.y=S*(2+P)*E*.5,T.z=S*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xK(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}},cG=class wK extends sr{constructor(e=new HN(new oe(-1,-1,0),new oe(-1,1,0),new oe(1,1,0)),t=64,i=1,n=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new oe,l=new oe,c=new qe;let u=new oe;const d=[],h=[],p=[],f=[];m(),this.setIndex(f),this.setAttribute("position",new Rt(d,3)),this.setAttribute("normal",new Rt(h,3)),this.setAttribute("uv",new Rt(p,2));function m(){for(let b=0;b<t;b++)g(b);g(s===!1?t:0),x(),v()}function g(b){u=e.getPointAt(b/t,u);const w=o.normals[b],_=o.binormals[b];for(let S=0;S<=n;S++){const T=S/n*Math.PI*2,M=Math.sin(T),E=-Math.cos(T);l.x=E*w.x+M*_.x,l.y=E*w.y+M*_.y,l.z=E*w.z+M*_.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,d.push(a.x,a.y,a.z)}}function v(){for(let b=1;b<=t;b++)for(let w=1;w<=n;w++){const _=(n+1)*(b-1)+(w-1),S=(n+1)*b+(w-1),T=(n+1)*b+w,M=(n+1)*(b-1)+w;f.push(_,S,M),f.push(S,T,M)}}function x(){for(let b=0;b<=t;b++)for(let w=0;w<=n;w++)c.x=b/t,c.y=w/n,p.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new wK(new N_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}},JN=class extends sr{constructor(r=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:r},r!==null){const e=[],t=new Set,i=new oe,n=new oe;if(r.index!==null){const s=r.attributes.position,o=r.index;let a=r.groups;a.length===0&&(a=[{start:0,count:o.count,materialIndex:0}]);for(let l=0,c=a.length;l<c;++l){const u=a[l],d=u.start,h=u.count;for(let p=d,f=d+h;p<f;p+=3)for(let m=0;m<3;m++){const g=o.getX(p+m),v=o.getX(p+(m+1)%3);i.fromBufferAttribute(s,g),n.fromBufferAttribute(s,v),uG(i,n,t)===!0&&(e.push(i.x,i.y,i.z),e.push(n.x,n.y,n.z))}}}else{const s=r.attributes.position;for(let o=0,a=s.count/3;o<a;o++)for(let l=0;l<3;l++){const c=3*o+l,u=3*o+(l+1)%3;i.fromBufferAttribute(s,c),n.fromBufferAttribute(s,u),uG(i,n,t)===!0&&(e.push(i.x,i.y,i.z),e.push(n.x,n.y,n.z))}}this.setAttribute("position",new Rt(e,3))}}copy(r){return super.copy(r),this.parameters=Object.assign({},r.parameters),this}};function uG(r,e,t){const i=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,n=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(i)===!0||t.has(n)===!0?!1:(t.add(i),t.add(n),!0)}var dG=Object.freeze({__proto__:null,BoxGeometry:vi,CapsuleGeometry:R_,CircleGeometry:YV,ConeGeometry:XN,CylinderGeometry:bn,DodecahedronGeometry:ZV,EdgesGeometry:JV,ExtrudeGeometry:U_,IcosahedronGeometry:sG,LatheGeometry:$N,OctahedronGeometry:Zh,PlaneGeometry:Xa,PolyhedronGeometry:$m,RingGeometry:oG,ShapeGeometry:aG,SphereGeometry:Jh,TetrahedronGeometry:lG,TorusGeometry:Fu,TorusKnotGeometry:ZN,TubeGeometry:cG,WireframeGeometry:JN});class QN extends Wr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new at(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class F_ extends ii{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Kn extends Wr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new at(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ha,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Io extends Kn{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new qe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Di(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new at(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new at(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new at(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Bu extends Wr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new at(16777215),this.specular=new at(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ha,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Yf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class B_ extends Wr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new at(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ha,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Gy extends Wr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ha,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class qm extends Wr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new at(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new at(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ha,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Yf,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class z_ extends Wr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new at(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ha,this.normalScale=new qe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jy extends Ki{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Qh(r,e,t){return!r||!t&&r.constructor===e?r:typeof e.BYTES_PER_ELEMENT=="number"?new e(r):Array.prototype.slice.call(r)}function hG(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}function pG(r){function e(n,s){return r[n]-r[s]}const t=r.length,i=new Array(t);for(let n=0;n!==t;++n)i[n]=n;return i.sort(e),i}function eR(r,e,t){const i=r.length,n=new r.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)n[o++]=r[a+l]}return n}function tR(r,e,t,i){let n=1,s=r[0];for(;s!==void 0&&s[i]===void 0;)s=r[n++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=r[n++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=r[n++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=r[n++];while(s!==void 0)}function k4e(r,e,t,i,n=30){const s=r.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),d=[],h=[];for(let p=0;p<c.times.length;++p){const f=c.times[p]*n;if(!(f<t||f>=i)){d.push(c.times[p]);for(let m=0;m<u;++m)h.push(c.values[p*u+m])}}d.length!==0&&(c.times=Qh(d,c.times.constructor),c.values=Qh(h,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function L4e(r,e=0,t=r,i=30){i<=0&&(i=30);const n=t.tracks.length,s=e/i;for(let o=0;o<n;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=r.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const d=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=d/3);let h=0;const p=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=p/3);const f=a.times.length-1;let m;if(s<=a.times[0]){const v=u,x=d-u;m=a.values.slice(v,x)}else if(s>=a.times[f]){const v=f*d+u,x=v+d-u;m=a.values.slice(v,x)}else{const v=a.createInterpolant(),x=u,b=d-u;v.evaluate(s),m=v.resultBuffer.slice(x,b)}l==="quaternion"&&new Rr().fromArray(m).normalize().conjugate().toArray(m);const g=c.times.length;for(let v=0;v<g;++v){const x=v*p+h;if(l==="quaternion")Rr.multiplyQuaternionsFlat(c.values,x,m,0,c.values,x);else{const b=p-h*2;for(let w=0;w<b;++w)c.values[x+w]-=m[w]}}}return r.blendMode=IA,r}const O4e={convertArray:Qh,isTypedArray:hG,getKeyframeOrder:pG,sortedArray:eR,flattenJSON:tR,subclip:k4e,makeClipAdditive:L4e};class Km{constructor(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=n!==void 0?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,n=t[i],s=t[i-1];e:{t:{let o;r:{i:if(!(e<n)){for(let a=i+2;;){if(n===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=n,n=t[++i],e<n)break t}o=t.length;break r}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(n=s,s=t[--i-1],e>=s)break t}o=i,i=0;break r}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(n=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,n)}return this.interpolate_(i,s,e,n)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,s=e*n;for(let o=0;o!==n;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class fG extends Km{constructor(e,t,i,n){super(e,t,i,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:kh,endingEnd:kh}}intervalChanged_(e,t,i){const n=this.parameterPositions;let s=e-2,o=e+1,a=n[s],l=n[o];if(a===void 0)switch(this.getSettings_().endingStart){case Lh:s=e,a=2*t-i;break;case Q0:s=n.length-2,a=t+n[s]-n[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Lh:o=e,l=2*i-t;break;case Q0:o=1,l=i+n[1]-n[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,d=this._offsetNext,h=this._weightPrev,p=this._weightNext,f=(i-t)/(n-t),m=f*f,g=m*f,v=-h*g+2*h*m-h*f,x=(1+h)*g+(-1.5-2*h)*m+(-.5+h)*f+1,b=(-1-p)*g+(1.5+p)*m+.5*f,w=p*g-p*m;for(let _=0;_!==a;++_)s[_]=v*o[u+_]+x*o[c+_]+b*o[l+_]+w*o[d+_];return s}}class rR extends Km{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(n-t),d=1-u;for(let h=0;h!==a;++h)s[h]=o[c+h]*d+o[l+h]*u;return s}}class mG extends Km{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ka{constructor(e,t,i,n){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Qh(t,this.TimeBufferType),this.values=Qh(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Qh(e.times,Array),values:Qh(e.values,Array)};const n=e.getInterpolation();n!==e.DefaultInterpolation&&(i.interpolation=n)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new mG(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new rR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new fG(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case lm:t=this.InterpolantFactoryMethodDiscrete;break;case Rh:t=this.InterpolantFactoryMethodLinear;break;case Dw:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return lm;case this.InterpolantFactoryMethodLinear:return Rh;case this.InterpolantFactoryMethodSmooth:return Dw}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,n=t.length;i!==n;++i)t[i]*=e}return this}trim(e,t){const i=this.times,n=i.length;let s=0,o=n-1;for(;s!==n&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==n){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,n=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(n!==void 0&&hG(n))for(let a=0,l=n.length;a!==l;++a){const c=n[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),n=this.getInterpolation()===Dw,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(n)l=!0;else{const d=a*i,h=d-i,p=d+i;for(let f=0;f!==i;++f){const m=t[d+f];if(m!==t[h+f]||m!==t[p+f]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const d=a*i,h=o*i;for(let p=0;p!==i;++p)t[h+p]=t[d+p]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,n=new i(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Ka.prototype.TimeBufferType=Float32Array,Ka.prototype.ValueBufferType=Float32Array,Ka.prototype.DefaultInterpolation=Rh;class ep extends Ka{}ep.prototype.ValueTypeName="bool",ep.prototype.ValueBufferType=Array,ep.prototype.DefaultInterpolation=lm,ep.prototype.InterpolantFactoryMethodLinear=void 0,ep.prototype.InterpolantFactoryMethodSmooth=void 0;class iR extends Ka{}iR.prototype.ValueTypeName="color";class zu extends Ka{}zu.prototype.ValueTypeName="number";class gG extends Km{constructor(e,t,i,n){super(e,t,i,n)}interpolate_(e,t,i,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(n-t);let c=e*a;for(let u=c+a;c!==u;c+=4)Rr.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Ec extends Ka{InterpolantFactoryMethodLinear(e){return new gG(this.times,this.values,this.getValueSize(),e)}}Ec.prototype.ValueTypeName="quaternion",Ec.prototype.DefaultInterpolation=Rh,Ec.prototype.InterpolantFactoryMethodSmooth=void 0;class tp extends Ka{}tp.prototype.ValueTypeName="string",tp.prototype.ValueBufferType=Array,tp.prototype.DefaultInterpolation=lm,tp.prototype.InterpolantFactoryMethodLinear=void 0,tp.prototype.InterpolantFactoryMethodSmooth=void 0;class Vu extends Ka{}Vu.prototype.ValueTypeName="vector";class Gu{constructor(e,t=-1,i,n=Uw){this.name=e,this.tracks=i,this.duration=t,this.blendMode=n,this.uuid=No(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,n=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(I4e(i[o]).scale(n));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Ka.toJSON(i[s]));return n}static CreateFromMorphTargetSequence(e,t,i,n){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=pG(l);l=eR(l,1,u),c=eR(c,1,u),!n&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new zu(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const n=e;i=n.geometry&&n.geometry.animations||n.animations}for(let n=0;n<i.length;n++)if(i[n].name===t)return i[n];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const n={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const d=u[1];let h=n[d];h||(n[d]=h=[]),h.push(c)}}const o=[];for(const a in n)o.push(this.CreateFromMorphTargetSequence(a,n[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(u,d,h,p,f){if(h.length!==0){const m=[],g=[];tR(h,m,g,p),m.length!==0&&f.push(new u(d,m,g))}},n=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let u=0;u<c.length;u++){const d=c[u].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const h={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let f=0;f<d[p].morphTargets.length;f++)h[d[p].morphTargets[f]]=-1;for(const f in h){const m=[],g=[];for(let v=0;v!==d[p].morphTargets.length;++v){const x=d[p];m.push(x.time),g.push(x.morphTarget===f?1:0)}n.push(new zu(".morphTargetInfluence["+f+"]",m,g))}l=h.length*o}else{const h=".bones["+t[u].name+"]";i(Vu,h+".position",d,"pos",n),i(Ec,h+".quaternion",d,"rot",n),i(Vu,h+".scale",d,"scl",n)}}return n.length===0?null:new this(s,l,n,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,n=e.length;i!==n;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function P4e(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return zu;case"vector":case"vector2":case"vector3":case"vector4":return Vu;case"color":return iR;case"quaternion":return Ec;case"bool":case"boolean":return ep;case"string":return tp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}function I4e(r){if(r.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=P4e(r.type);if(r.times===void 0){const t=[],i=[];tR(r.keys,t,i,"value"),r.times=t,r.values=i}return e.parse!==void 0?e.parse(r):new e(r.name,r.times,r.values,r.interpolation)}const rp={enabled:!1,files:{},add:function(r,e){this.enabled!==!1&&(this.files[r]=e)},get:function(r){if(this.enabled!==!1)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}};class V_{constructor(e,t,i){const n=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&n.onStart!==void 0&&n.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,n.onProgress!==void 0&&n.onProgress(u,o,a),o===a&&(s=!1,n.onLoad!==void 0&&n.onLoad())},this.itemError=function(u){n.onError!==void 0&&n.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,d){return c.push(u,d),this},this.removeHandler=function(u){const d=c.indexOf(u);return d!==-1&&c.splice(d,2),this},this.getHandler=function(u){for(let d=0,h=c.length;d<h;d+=2){const p=c[d],f=c[d+1];if(p.global&&(p.lastIndex=0),p.test(u))return f}return null}}}const vG=new V_;class Fi{constructor(e){this.manager=e!==void 0?e:vG,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(n,s){i.load(e,n,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Fi.DEFAULT_MATERIAL_NAME="__DEFAULT";const Cc={};class D4e extends Error{constructor(e,t){super(e),this.response=t}}class In extends Fi{constructor(e){super(e)}load(e,t,i,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=rp.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Cc[e]!==void 0){Cc[e].push({onLoad:t,onProgress:i,onError:n});return}Cc[e]=[],Cc[e].push({onLoad:t,onProgress:i,onError:n});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Cc[e],d=c.body.getReader(),h=c.headers.get("Content-Length")||c.headers.get("X-File-Size"),p=h?parseInt(h):0,f=p!==0;let m=0;const g=new ReadableStream({start(v){x();function x(){d.read().then(({done:b,value:w})=>{if(b)v.close();else{m+=w.byteLength;const _=new ProgressEvent("progress",{lengthComputable:f,loaded:m,total:p});for(let S=0,T=u.length;S<T;S++){const M=u[S];M.onProgress&&M.onProgress(_)}v.enqueue(w),x()}})}}});return new Response(g)}else throw new D4e(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const u=/charset="?([^;"\s]*)"?/i.exec(a),d=u&&u[1]?u[1].toLowerCase():void 0,h=new TextDecoder(d);return c.arrayBuffer().then(p=>h.decode(p))}}}).then(c=>{rp.add(e,c);const u=Cc[e];delete Cc[e];for(let d=0,h=u.length;d<h;d++){const p=u[d];p.onLoad&&p.onLoad(c)}}).catch(c=>{const u=Cc[e];if(u===void 0)throw this.manager.itemError(e),c;delete Cc[e];for(let d=0,h=u.length;d<h;d++){const p=u[d];p.onError&&p.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class U4e extends Fi{constructor(e){super(e)}load(e,t,i,n){const s=this,o=new In(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){n?n(l):console.error(l),s.manager.itemError(e)}},i,n)}parse(e){const t=[];for(let i=0;i<e.length;i++){const n=Gu.parse(e[i]);t.push(n)}return t}}class F4e extends Fi{constructor(e){super(e)}load(e,t,i,n){const s=this,o=[],a=new Dy,l=new In(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(d){l.load(e[d],function(h){const p=s.parse(h,!0);o[d]={width:p.width,height:p.height,format:p.format,mipmaps:p.mipmaps},c+=1,c===6&&(p.mipmapCount===1&&(a.minFilter=Or),a.image=o,a.format=p.format,a.needsUpdate=!0,t&&t(a))},i,n)}if(Array.isArray(e))for(let d=0,h=e.length;d<h;++d)u(d);else l.load(e,function(d){const h=s.parse(d,!0);if(h.isCubemap){const p=h.mipmaps.length/h.mipmapCount;for(let f=0;f<p;f++){o[f]={mipmaps:[]};for(let m=0;m<h.mipmapCount;m++)o[f].mipmaps.push(h.mipmaps[f*h.mipmapCount+m]),o[f].format=h.format,o[f].width=h.width,o[f].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=Or),a.format=h.format,a.needsUpdate=!0,t&&t(a)},i,n);return a}}class ju extends Fi{constructor(e){super(e)}load(e,t,i,n){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=rp.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=my("img");function l(){u(),rp.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(d){u(),n&&n(d),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class yG extends Fi{constructor(e){super(e)}load(e,t,i,n){const s=new Sc;s.colorSpace=Lt;const o=new ju(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,n)}for(let c=0;c<e.length;++c)l(c);return s}}class bG extends Fi{constructor(e){super(e)}load(e,t,i,n){const s=this,o=new ma,a=new In(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(n!==void 0)n(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Mi,o.wrapT=c.wrapT!==void 0?c.wrapT:Mi,o.magFilter=c.magFilter!==void 0?c.magFilter:Or,o.minFilter=c.minFilter!==void 0?c.minFilter:Or,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0?o.colorSpace=c.colorSpace:c.encoding!==void 0&&(o.encoding=c.encoding),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=qn),c.mipmapCount===1&&(o.minFilter=Or),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,n),o}}class G_ extends Fi{constructor(e){super(e)}load(e,t,i,n){const s=new Nr,o=new ju(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,n),s}}class Ac extends nr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new at(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class ip extends Ac{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(nr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new at(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const nR=new St,xG=new oe,wG=new oe;class sR{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new qe(512,512),this.map=null,this.mapPass=null,this.matrix=new St,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ey,this._frameExtents=new qe(1,1),this._viewportCount=1,this._viewports=[new jt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;xG.setFromMatrixPosition(e.matrixWorld),t.position.copy(xG),wG.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(wG),t.updateMatrixWorld(),nR.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nR),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(nR)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class B4e extends sR{constructor(){super(new Yr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=fm*2*e.angle*this.focus,n=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||n!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=n,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Pl extends Ac{constructor(e,t,i=0,n=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(nr.DEFAULT_UP),this.updateMatrix(),this.target=new nr,this.distance=i,this.angle=n,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new B4e}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _G=new St,Hy=new oe,oR=new oe;class z4e extends sR{constructor(){super(new Yr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new qe(4,2),this._viewportCount=6,this._viewports=[new jt(2,1,1,1),new jt(0,1,1,1),new jt(3,1,1,1),new jt(1,1,1,1),new jt(3,0,1,1),new jt(1,0,1,1)],this._cubeDirections=[new oe(1,0,0),new oe(-1,0,0),new oe(0,0,1),new oe(0,0,-1),new oe(0,1,0),new oe(0,-1,0)],this._cubeUps=[new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,1,0),new oe(0,0,1),new oe(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,n=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Hy.setFromMatrixPosition(e.matrixWorld),i.position.copy(Hy),oR.copy(i.position),oR.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(oR),i.updateMatrixWorld(),n.makeTranslation(-Hy.x,-Hy.y,-Hy.z),_G.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_G)}}class Il extends Ac{constructor(e,t,i=0,n=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=n,this.shadow=new z4e}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class V4e extends sR{constructor(){super(new fa(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Dl extends Ac{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(nr.DEFAULT_UP),this.updateMatrix(),this.target=new nr,this.shadow=new V4e}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class np extends Ac{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class j_ extends Ac{constructor(e,t,i=10,n=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=n}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class aR{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new oe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,n=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*n),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*n)),t.addScaledVector(o[5],1.092548*(n*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-n*n)),t}getIrradianceAt(e,t){const i=e.x,n=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*n),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*n),t.addScaledVector(o[5],2*.429043*n*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-n*n)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].fromArray(e,t+n*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let n=0;n<9;n++)i[n].toArray(e,t+n*3);return e}static getBasisAt(e,t){const i=e.x,n=e.y,s=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*n,t[5]=1.092548*n*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-n*n)}}class H_ extends Ac{constructor(e=new aR,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Nc extends Fi{constructor(e){super(e),this.textures={}}load(e,t,i,n){const s=this,o=new In(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){n?n(l):console.error(l),s.manager.itemError(e)}},i,n)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const n=Nc.createMaterialFromType(e.type);if(e.uuid!==void 0&&(n.uuid=e.uuid),e.name!==void 0&&(n.name=e.name),e.color!==void 0&&n.color!==void 0&&n.color.setHex(e.color),e.roughness!==void 0&&(n.roughness=e.roughness),e.metalness!==void 0&&(n.metalness=e.metalness),e.sheen!==void 0&&(n.sheen=e.sheen),e.sheenColor!==void 0&&(n.sheenColor=new at().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(n.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&n.emissive!==void 0&&n.emissive.setHex(e.emissive),e.specular!==void 0&&n.specular!==void 0&&n.specular.setHex(e.specular),e.specularIntensity!==void 0&&(n.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&n.specularColor!==void 0&&n.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(n.shininess=e.shininess),e.clearcoat!==void 0&&(n.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(n.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(n.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(n.transmission=e.transmission),e.thickness!==void 0&&(n.thickness=e.thickness),e.attenuationDistance!==void 0&&(n.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&n.attenuationColor!==void 0&&n.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(n.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(n.fog=e.fog),e.flatShading!==void 0&&(n.flatShading=e.flatShading),e.blending!==void 0&&(n.blending=e.blending),e.combine!==void 0&&(n.combine=e.combine),e.side!==void 0&&(n.side=e.side),e.shadowSide!==void 0&&(n.shadowSide=e.shadowSide),e.opacity!==void 0&&(n.opacity=e.opacity),e.transparent!==void 0&&(n.transparent=e.transparent),e.alphaTest!==void 0&&(n.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(n.alphaHash=e.alphaHash),e.depthTest!==void 0&&(n.depthTest=e.depthTest),e.depthWrite!==void 0&&(n.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(n.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(n.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(n.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(n.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(n.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(n.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(n.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(n.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(n.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(n.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(n.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(n.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(n.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(n.rotation=e.rotation),e.linewidth!==void 0&&(n.linewidth=e.linewidth),e.dashSize!==void 0&&(n.dashSize=e.dashSize),e.gapSize!==void 0&&(n.gapSize=e.gapSize),e.scale!==void 0&&(n.scale=e.scale),e.polygonOffset!==void 0&&(n.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(n.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(n.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(n.dithering=e.dithering),e.alphaToCoverage!==void 0&&(n.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(n.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(n.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(n.visible=e.visible),e.toneMapped!==void 0&&(n.toneMapped=e.toneMapped),e.userData!==void 0&&(n.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?n.vertexColors=e.vertexColors>0:n.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(n.uniforms[s]={},o.type){case"t":n.uniforms[s].value=i(o.value);break;case"c":n.uniforms[s].value=new at().setHex(o.value);break;case"v2":n.uniforms[s].value=new qe().fromArray(o.value);break;case"v3":n.uniforms[s].value=new oe().fromArray(o.value);break;case"v4":n.uniforms[s].value=new jt().fromArray(o.value);break;case"m3":n.uniforms[s].value=new hr().fromArray(o.value);break;case"m4":n.uniforms[s].value=new St().fromArray(o.value);break;default:n.uniforms[s].value=o.value}}if(e.defines!==void 0&&(n.defines=e.defines),e.vertexShader!==void 0&&(n.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(n.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(n.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)n.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(n.lights=e.lights),e.clipping!==void 0&&(n.clipping=e.clipping),e.size!==void 0&&(n.size=e.size),e.sizeAttenuation!==void 0&&(n.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(n.map=i(e.map)),e.matcap!==void 0&&(n.matcap=i(e.matcap)),e.alphaMap!==void 0&&(n.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(n.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(n.bumpScale=e.bumpScale),e.normalMap!==void 0&&(n.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(n.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),n.normalScale=new qe().fromArray(s)}return e.displacementMap!==void 0&&(n.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(n.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(n.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(n.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(n.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(n.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(n.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(n.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(n.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(n.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(n.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(n.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(n.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(n.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(n.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(n.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(n.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(n.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(n.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(n.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(n.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(n.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(n.clearcoatNormalScale=new qe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(n.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(n.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(n.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(n.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(n.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(n.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(n.sheenRoughnessMap=i(e.sheenRoughnessMap)),n}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:QN,SpriteMaterial:Wh,RawShaderMaterial:F_,ShaderMaterial:ii,PointsMaterial:qh,MeshPhysicalMaterial:Io,MeshStandardMaterial:Kn,MeshPhongMaterial:Bu,MeshToonMaterial:B_,MeshNormalMaterial:Gy,MeshLambertMaterial:qm,MeshDepthMaterial:jh,MeshDistanceMaterial:Ay,MeshBasicMaterial:Ei,MeshMatcapMaterial:z_,LineDashedMaterial:jy,LineBasicMaterial:Ki,Material:Wr};return new t[e]}}class Rc{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,n=e.length;i<n;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class W_ extends sr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class lR extends Fi{constructor(e){super(e)}load(e,t,i,n){const s=this,o=new In(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){n?n(l):console.error(l),s.manager.itemError(e)}},i,n)}parse(e){const t={},i={};function n(h,p){if(t[p]!==void 0)return t[p];const f=h.interleavedBuffers[p],m=s(h,f.buffer),g=mm(f.type,m),v=new Fm(g,f.stride);return v.uuid=f.uuid,t[p]=v,v}function s(h,p){if(i[p]!==void 0)return i[p];const f=h.arrayBuffers[p],m=new Uint32Array(f).buffer;return i[p]=m,m}const o=e.isInstancedBufferGeometry?new W_:new sr,a=e.data.index;if(a!==void 0){const h=mm(a.type,a.array);o.setIndex(new jr(h,1))}const l=e.data.attributes;for(const h in l){const p=l[h];let f;if(p.isInterleavedBufferAttribute){const m=n(e.data,p.data);f=new Is(m,p.itemSize,p.offset,p.normalized)}else{const m=mm(p.type,p.array),g=p.isInstancedBufferAttribute?Mc:jr;f=new g(m,p.itemSize,p.normalized)}p.name!==void 0&&(f.name=p.name),p.usage!==void 0&&f.setUsage(p.usage),p.updateRange!==void 0&&(f.updateRange.offset=p.updateRange.offset,f.updateRange.count=p.updateRange.count),o.setAttribute(h,f)}const c=e.data.morphAttributes;if(c)for(const h in c){const p=c[h],f=[];for(let m=0,g=p.length;m<g;m++){const v=p[m];let x;if(v.isInterleavedBufferAttribute){const b=n(e.data,v.data);x=new Is(b,v.itemSize,v.offset,v.normalized)}else{const b=mm(v.type,v.array);x=new jr(b,v.itemSize,v.normalized)}v.name!==void 0&&(x.name=v.name),f.push(x)}o.morphAttributes[h]=f}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const u=e.data.groups||e.data.drawcalls||e.data.offsets;if(u!==void 0)for(let h=0,p=u.length;h!==p;++h){const f=u[h];o.addGroup(f.start,f.count,f.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const h=new oe;d.center!==void 0&&h.fromArray(d.center),o.boundingSphere=new Ls(h,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}let SG=class extends Fi{constructor(r){super(r)}load(r,e,t,i){const n=this,s=this.path===""?Rc.extractUrlBase(r):this.path;this.resourcePath=this.resourcePath||s;const o=new In(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(r,function(a){let l=null;try{l=JSON.parse(a)}catch(u){i!==void 0&&i(u),console.error("THREE:ObjectLoader: Can't parse "+r+".",u.message);return}const c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+r)),console.error("THREE.ObjectLoader: Can't load "+r);return}n.parse(l,e)},t,i)}async loadAsync(r,e){const t=this,i=this.path===""?Rc.extractUrlBase(r):this.path;this.resourcePath=this.resourcePath||i;const n=new In(this.manager);n.setPath(this.path),n.setRequestHeader(this.requestHeader),n.setWithCredentials(this.withCredentials);const s=await n.loadAsync(r,e),o=JSON.parse(s),a=o.metadata;if(a===void 0||a.type===void 0||a.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+r);return await t.parseAsync(o)}parse(r,e){const t=this.parseAnimations(r.animations),i=this.parseShapes(r.shapes),n=this.parseGeometries(r.geometries,i),s=this.parseImages(r.images,function(){e!==void 0&&e(l)}),o=this.parseTextures(r.textures,s),a=this.parseMaterials(r.materials,o),l=this.parseObject(r.object,n,a,o,t),c=this.parseSkeletons(r.skeletons,l);if(this.bindSkeletons(l,c),e!==void 0){let u=!1;for(const d in s)if(s[d].data instanceof HTMLImageElement){u=!0;break}u===!1&&e(l)}return l}async parseAsync(r){const e=this.parseAnimations(r.animations),t=this.parseShapes(r.shapes),i=this.parseGeometries(r.geometries,t),n=await this.parseImagesAsync(r.images),s=this.parseTextures(r.textures,n),o=this.parseMaterials(r.materials,s),a=this.parseObject(r.object,i,o,s,e),l=this.parseSkeletons(r.skeletons,a);return this.bindSkeletons(a,l),a}parseShapes(r){const e={};if(r!==void 0)for(let t=0,i=r.length;t<i;t++){const n=new Po().fromJSON(r[t]);e[n.uuid]=n}return e}parseSkeletons(r,e){const t={},i={};if(e.traverse(function(n){n.isBone&&(i[n.uuid]=n)}),r!==void 0)for(let n=0,s=r.length;n<s;n++){const o=new Xh().fromJSON(r[n],i);t[o.uuid]=o}return t}parseGeometries(r,e){const t={};if(r!==void 0){const i=new lR;for(let n=0,s=r.length;n<s;n++){let o;const a=r[n];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":o=i.parse(a);break;default:a.type in dG?o=dG[a.type].fromJSON(a,e):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${a.type}"`)}o.uuid=a.uuid,a.name!==void 0&&(o.name=a.name),a.userData!==void 0&&(o.userData=a.userData),t[a.uuid]=o}}return t}parseMaterials(r,e){const t={},i={};if(r!==void 0){const n=new Nc;n.setTextures(e);for(let s=0,o=r.length;s<o;s++){const a=r[s];t[a.uuid]===void 0&&(t[a.uuid]=n.parse(a)),i[a.uuid]=t[a.uuid]}}return i}parseAnimations(r){const e={};if(r!==void 0)for(let t=0;t<r.length;t++){const i=r[t],n=Gu.parse(i);e[n.uuid]=n}return e}parseImages(r,e){const t=this,i={};let n;function s(a){return t.manager.itemStart(a),n.load(a,function(){t.manager.itemEnd(a)},void 0,function(){t.manager.itemError(a),t.manager.itemEnd(a)})}function o(a){if(typeof a=="string"){const l=a,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return s(c)}else return a.data?{data:mm(a.type,a.data),width:a.width,height:a.height}:null}if(r!==void 0&&r.length>0){const a=new V_(e);n=new ju(a),n.setCrossOrigin(this.crossOrigin);for(let l=0,c=r.length;l<c;l++){const u=r[l],d=u.url;if(Array.isArray(d)){const h=[];for(let p=0,f=d.length;p<f;p++){const m=d[p],g=o(m);g!==null&&(g instanceof HTMLImageElement?h.push(g):h.push(new ma(g.data,g.width,g.height)))}i[u.uuid]=new da(h)}else{const h=o(u.url);i[u.uuid]=new da(h)}}}return i}async parseImagesAsync(r){const e=this,t={};let i;async function n(s){if(typeof s=="string"){const o=s,a=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:e.resourcePath+o;return await i.loadAsync(a)}else return s.data?{data:mm(s.type,s.data),width:s.width,height:s.height}:null}if(r!==void 0&&r.length>0){i=new ju(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,o=r.length;s<o;s++){const a=r[s],l=a.url;if(Array.isArray(l)){const c=[];for(let u=0,d=l.length;u<d;u++){const h=l[u],p=await n(h);p!==null&&(p instanceof HTMLImageElement?c.push(p):c.push(new ma(p.data,p.width,p.height)))}t[a.uuid]=new da(c)}else{const c=await n(a.url);t[a.uuid]=new da(c)}}}return t}parseTextures(r,e){function t(n,s){return typeof n=="number"?n:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",n),s[n])}const i={};if(r!==void 0)for(let n=0,s=r.length;n<s;n++){const o=r[n];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),e[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const a=e[o.image],l=a.data;let c;Array.isArray(l)?(c=new Sc,l.length===6&&(c.needsUpdate=!0)):(l&&l.data?c=new ma:c=new Nr,l&&(c.needsUpdate=!0)),c.source=a,c.uuid=o.uuid,o.name!==void 0&&(c.name=o.name),o.mapping!==void 0&&(c.mapping=t(o.mapping,G4e)),o.channel!==void 0&&(c.channel=o.channel),o.offset!==void 0&&c.offset.fromArray(o.offset),o.repeat!==void 0&&c.repeat.fromArray(o.repeat),o.center!==void 0&&c.center.fromArray(o.center),o.rotation!==void 0&&(c.rotation=o.rotation),o.wrap!==void 0&&(c.wrapS=t(o.wrap[0],TG),c.wrapT=t(o.wrap[1],TG)),o.format!==void 0&&(c.format=o.format),o.internalFormat!==void 0&&(c.internalFormat=o.internalFormat),o.type!==void 0&&(c.type=o.type),o.colorSpace!==void 0&&(c.colorSpace=o.colorSpace),o.encoding!==void 0&&(c.encoding=o.encoding),o.minFilter!==void 0&&(c.minFilter=t(o.minFilter,MG)),o.magFilter!==void 0&&(c.magFilter=t(o.magFilter,MG)),o.anisotropy!==void 0&&(c.anisotropy=o.anisotropy),o.flipY!==void 0&&(c.flipY=o.flipY),o.generateMipmaps!==void 0&&(c.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(c.unpackAlignment=o.unpackAlignment),o.compareFunction!==void 0&&(c.compareFunction=o.compareFunction),o.userData!==void 0&&(c.userData=o.userData),i[o.uuid]=c}return i}parseObject(r,e,t,i,n){let s;function o(d){return e[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),e[d]}function a(d){if(d!==void 0){if(Array.isArray(d)){const h=[];for(let p=0,f=d.length;p<f;p++){const m=d[p];t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),h.push(t[m])}return h}return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),t[d]}}function l(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let c,u;switch(r.type){case"Scene":s=new qa,r.background!==void 0&&(Number.isInteger(r.background)?s.background=new at(r.background):s.background=l(r.background)),r.environment!==void 0&&(s.environment=l(r.environment)),r.fog!==void 0&&(r.fog.type==="Fog"?s.fog=new Um(r.fog.color,r.fog.near,r.fog.far):r.fog.type==="FogExp2"&&(s.fog=new Dm(r.fog.color,r.fog.density)),r.fog.name!==""&&(s.fog.name=r.fog.name)),r.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=r.backgroundBlurriness),r.backgroundIntensity!==void 0&&(s.backgroundIntensity=r.backgroundIntensity);break;case"PerspectiveCamera":s=new Yr(r.fov,r.aspect,r.near,r.far),r.focus!==void 0&&(s.focus=r.focus),r.zoom!==void 0&&(s.zoom=r.zoom),r.filmGauge!==void 0&&(s.filmGauge=r.filmGauge),r.filmOffset!==void 0&&(s.filmOffset=r.filmOffset),r.view!==void 0&&(s.view=Object.assign({},r.view));break;case"OrthographicCamera":s=new fa(r.left,r.right,r.top,r.bottom,r.near,r.far),r.zoom!==void 0&&(s.zoom=r.zoom),r.view!==void 0&&(s.view=Object.assign({},r.view));break;case"AmbientLight":s=new np(r.color,r.intensity);break;case"DirectionalLight":s=new Dl(r.color,r.intensity);break;case"PointLight":s=new Il(r.color,r.intensity,r.distance,r.decay);break;case"RectAreaLight":s=new j_(r.color,r.intensity,r.width,r.height);break;case"SpotLight":s=new Pl(r.color,r.intensity,r.distance,r.angle,r.penumbra,r.decay);break;case"HemisphereLight":s=new ip(r.color,r.groundColor,r.intensity);break;case"LightProbe":s=new H_().fromJSON(r);break;case"SkinnedMesh":c=o(r.geometry),u=a(r.material),s=new Ly(c,u),r.bindMode!==void 0&&(s.bindMode=r.bindMode),r.bindMatrix!==void 0&&s.bindMatrix.fromArray(r.bindMatrix),r.skeleton!==void 0&&(s.skeleton=r.skeleton);break;case"Mesh":c=o(r.geometry),u=a(r.material),s=new mt(c,u);break;case"InstancedMesh":c=o(r.geometry),u=a(r.material);const d=r.count,h=r.instanceMatrix,p=r.instanceColor;s=new Iy(c,u,d),s.instanceMatrix=new Mc(new Float32Array(h.array),16),p!==void 0&&(s.instanceColor=new Mc(new Float32Array(p.array),p.itemSize));break;case"LOD":s=new RN;break;case"Line":s=new yn(o(r.geometry),a(r.material));break;case"LineLoop":s=new S_(o(r.geometry),a(r.material));break;case"LineSegments":s=new ga(o(r.geometry),a(r.material));break;case"PointCloud":case"Points":s=new Kh(o(r.geometry),a(r.material));break;case"Sprite":s=new Tc(a(r.material));break;case"Group":s=new Oo;break;case"Bone":s=new $h;break;default:s=new nr}if(s.uuid=r.uuid,r.name!==void 0&&(s.name=r.name),r.matrix!==void 0?(s.matrix.fromArray(r.matrix),r.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=r.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(r.position!==void 0&&s.position.fromArray(r.position),r.rotation!==void 0&&s.rotation.fromArray(r.rotation),r.quaternion!==void 0&&s.quaternion.fromArray(r.quaternion),r.scale!==void 0&&s.scale.fromArray(r.scale)),r.up!==void 0&&s.up.fromArray(r.up),r.castShadow!==void 0&&(s.castShadow=r.castShadow),r.receiveShadow!==void 0&&(s.receiveShadow=r.receiveShadow),r.shadow&&(r.shadow.bias!==void 0&&(s.shadow.bias=r.shadow.bias),r.shadow.normalBias!==void 0&&(s.shadow.normalBias=r.shadow.normalBias),r.shadow.radius!==void 0&&(s.shadow.radius=r.shadow.radius),r.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(r.shadow.mapSize),r.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(r.shadow.camera))),r.visible!==void 0&&(s.visible=r.visible),r.frustumCulled!==void 0&&(s.frustumCulled=r.frustumCulled),r.renderOrder!==void 0&&(s.renderOrder=r.renderOrder),r.userData!==void 0&&(s.userData=r.userData),r.layers!==void 0&&(s.layers.mask=r.layers),r.children!==void 0){const d=r.children;for(let h=0;h<d.length;h++)s.add(this.parseObject(d[h],e,t,i,n))}if(r.animations!==void 0){const d=r.animations;for(let h=0;h<d.length;h++){const p=d[h];s.animations.push(n[p])}}if(r.type==="LOD"){r.autoUpdate!==void 0&&(s.autoUpdate=r.autoUpdate);const d=r.levels;for(let h=0;h<d.length;h++){const p=d[h],f=s.getObjectByProperty("uuid",p.object);f!==void 0&&s.addLevel(f,p.distance,p.hysteresis)}}return s}bindSkeletons(r,e){Object.keys(e).length!==0&&r.traverse(function(t){if(t.isSkinnedMesh===!0&&t.skeleton!==void 0){const i=e[t.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(i,t.bindMatrix)}})}};const G4e={UVMapping:Zf,CubeReflectionMapping:Co,CubeRefractionMapping:la,EquirectangularReflectionMapping:ja,EquirectangularRefractionMapping:Rl,CubeUVReflectionMapping:Nu},TG={RepeatWrapping:ds,ClampToEdgeWrapping:Mi,MirroredRepeatWrapping:kl},MG={NearestFilter:Mr,NearestMipmapNearestFilter:Ll,NearestMipmapLinearFilter:ca,LinearFilter:Or,LinearMipmapNearestFilter:hh,LinearMipmapLinearFilter:qn};class EG extends Fi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,n){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=rp.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){rp.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){n&&n(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let $_;class cR{static getContext(){return $_===void 0&&($_=new(window.AudioContext||window.webkitAudioContext)),$_}static setContext(e){$_=e}}class CG extends Fi{constructor(e){super(e)}load(e,t,i,n){const s=this,o=new In(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);cR.getContext().decodeAudioData(c,function(u){t(u)},a)}catch(c){a(c)}},i,n);function a(l){n?n(l):console.error(l),s.manager.itemError(e)}}}const AG=new St,NG=new St,sp=new St;class RG{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Yr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Yr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,sp.copy(e.projectionMatrix);const i=t.eyeSep/2,n=i*t.near/t.focus,s=t.near*Math.tan(Ph*t.fov*.5)/t.zoom;let o,a;NG.elements[12]=-i,AG.elements[12]=i,o=-s*t.aspect+n,a=s*t.aspect+n,sp.elements[0]=2*t.near/(a-o),sp.elements[8]=(a+o)/(a-o),this.cameraL.projectionMatrix.copy(sp),o=-s*t.aspect-n,a=s*t.aspect-n,sp.elements[0]=2*t.near/(a-o),sp.elements[8]=(a+o)/(a-o),this.cameraR.projectionMatrix.copy(sp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(NG),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(AG)}}class X_{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=kG(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=kG();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function kG(){return(typeof performance>"u"?Date:performance).now()}const op=new oe,LG=new Rr,j4e=new oe,ap=new oe;class uR extends nr{constructor(){super(),this.type="AudioListener",this.context=cR.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new X_}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(op,LG,j4e),ap.set(0,0,-1).applyQuaternion(LG),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(op.x,n),t.positionY.linearRampToValueAtTime(op.y,n),t.positionZ.linearRampToValueAtTime(op.z,n),t.forwardX.linearRampToValueAtTime(ap.x,n),t.forwardY.linearRampToValueAtTime(ap.y,n),t.forwardZ.linearRampToValueAtTime(ap.z,n),t.upX.linearRampToValueAtTime(i.x,n),t.upY.linearRampToValueAtTime(i.y,n),t.upZ.linearRampToValueAtTime(i.z,n)}else t.setPosition(op.x,op.y,op.z),t.setOrientation(ap.x,ap.y,ap.z,i.x,i.y,i.z)}}class dR extends nr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const lp=new oe,OG=new Rr,H4e=new oe,cp=new oe;class hR extends dR{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(lp,OG,H4e),cp.set(0,0,1).applyQuaternion(OG);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(lp.x,i),t.positionY.linearRampToValueAtTime(lp.y,i),t.positionZ.linearRampToValueAtTime(lp.z,i),t.orientationX.linearRampToValueAtTime(cp.x,i),t.orientationY.linearRampToValueAtTime(cp.y,i),t.orientationZ.linearRampToValueAtTime(cp.z,i)}else t.setPosition(lp.x,lp.y,lp.z),t.setOrientation(cp.x,cp.y,cp.z)}}class W4e{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class PG{constructor(e,t,i){this.binding=e,this.valueSize=i;let n,s,o;switch(t){case"quaternion":n=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":n=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:n=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=n,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,n=this.valueSize,s=e*n+n;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==n;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,n)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,n=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,n,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,n=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,n,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,n,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,n);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,n=i*this._origIndex;e.getValue(t,n);for(let s=i,o=n;s!==o;++s)t[s]=t[n+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,n,s){if(n>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,n){Rr.slerpFlat(e,t,e,t,e,i,n)}_slerpAdditive(e,t,i,n,s){const o=this._workIndex*s;Rr.multiplyQuaternionsFlat(e,o,e,t,e,i),Rr.slerpFlat(e,t,e,t,e,o,n)}_lerp(e,t,i,n,s){const o=1-n;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*n}}_lerpAdditive(e,t,i,n,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*n}}}const pR="\\[\\]\\.:\\/",$4e=new RegExp("["+pR+"]","g"),fR="[^"+pR+"]",X4e="[^"+pR.replace("\\.","")+"]",q4e=/((?:WC+[\/:])*)/.source.replace("WC",fR),K4e=/(WCOD+)?/.source.replace("WCOD",X4e),Y4e=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",fR),Z4e=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",fR),J4e=new RegExp("^"+q4e+K4e+Y4e+Z4e+"$"),Q4e=["material","materials","bones","map"];class eUe{constructor(e,t,i){const n=i||kr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,n=this._bindings[i];n!==void 0&&n.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let n=this._targetGroup.nCachedObjects_,s=i.length;n!==s;++n)i[n].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class kr{constructor(e,t,i){this.path=t,this.parsedPath=i||kr.parseTrackName(t),this.node=kr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new kr.Composite(e,t,i):new kr(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace($4e,"")}static parseTrackName(e){const t=J4e.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=i.nodeName&&i.nodeName.lastIndexOf(".");if(n!==void 0&&n!==-1){const s=i.nodeName.substring(n+1);Q4e.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,n),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},n=i(e.children);if(n)return n}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)e[t++]=i[n]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let n=0,s=i.length;n!==s;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,n=t.propertyName;let s=t.propertyIndex;if(e||(e=kr.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[n];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+n+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(n==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}kr.Composite=eUe,kr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},kr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},kr.prototype.GetterByBindingType=[kr.prototype._getValue_direct,kr.prototype._getValue_array,kr.prototype._getValue_arrayElement,kr.prototype._getValue_toArray],kr.prototype.SetterByBindingTypeAndVersioning=[[kr.prototype._setValue_direct,kr.prototype._setValue_direct_setNeedsUpdate,kr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[kr.prototype._setValue_array,kr.prototype._setValue_array_setNeedsUpdate,kr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[kr.prototype._setValue_arrayElement,kr.prototype._setValue_arrayElement_setNeedsUpdate,kr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[kr.prototype._setValue_fromArray,kr.prototype._setValue_fromArray_setNeedsUpdate,kr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class tUe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=No(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,n=arguments.length;i!==n;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,n=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,d=arguments.length;u!==d;++u){const h=arguments[u],p=h.uuid;let f=t[p];if(f===void 0){f=l++,t[p]=f,e.push(h);for(let m=0,g=o;m!==g;++m)s[m].push(new kr(h,i[m],n[m]))}else if(f<c){a=e[f];const m=--c,g=e[m];t[g.uuid]=f,e[f]=g,t[p]=m,e[m]=h;for(let v=0,x=o;v!==x;++v){const b=s[v],w=b[m];let _=b[f];b[f]=w,_===void 0&&(_=new kr(h,i[v],n[v])),b[m]=_}}else e[f]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const d=s++,h=e[d];t[h.uuid]=u,e[u]=h,t[c]=d,e[d]=l;for(let p=0,f=n;p!==f;++p){const m=i[p],g=m[d],v=m[u];m[u]=g,m[d]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,n=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,d=t[u];if(d!==void 0)if(delete t[u],d<s){const h=--s,p=e[h],f=--o,m=e[f];t[p.uuid]=d,e[d]=p,t[m.uuid]=h,e[h]=m,e.pop();for(let g=0,v=n;g!==v;++g){const x=i[g],b=x[h],w=x[f];x[d]=b,x[h]=w,x.pop()}}else{const h=--o,p=e[h];h>0&&(t[p.uuid]=d),e[d]=p,e.pop();for(let f=0,m=n;f!==m;++f){const g=i[f];g[d]=g[h],g.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let n=i[e];const s=this._bindings;if(n!==void 0)return s[n];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,d=new Array(c);n=s.length,i[e]=n,o.push(e),a.push(t),s.push(d);for(let h=u,p=l.length;h!==p;++h){const f=l[h];d[h]=new kr(f,e,t)}return d}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const n=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),n[i]=n[a],n.pop()}}}class IG{constructor(e,t,i=null,n=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=n;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:kh,endingEnd:kh};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=PA,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const n=this._clip.duration,s=e._clip.duration,o=s/n,a=n/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const n=this._mixer,s=n.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=n._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,n){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case IA:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case Uw:default:for(let u=0,d=l.length;u!==d;++u)l[u].evaluate(o),c[u].accumulate(n,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),n===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let n=this.time+e,s=this._loopCount;const o=i===E8;if(e===0)return s===-1?n:o&&(s&1)===1?t-n:n;if(i===OA){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(n>=t)n=t;else if(n<0)n=0;else{this.time=n;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),n>=t||n<0){const a=Math.floor(n/t);n-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,n=e>0?t:0,this.time=n,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=n;if(o&&(s&1)===1)return t-n}return n}_setEndings(e,t,i){const n=this._interpolantSettings;i?(n.endingStart=Lh,n.endingEnd=Lh):(e?n.endingStart=this.zeroSlopeAtStart?Lh:kh:n.endingStart=Q0,t?n.endingEnd=this.zeroSlopeAtEnd?Lh:kh:n.endingEnd=Q0)}_scheduleFading(e,t,i){const n=this._mixer,s=n.time;let o=this._weightInterpolant;o===null&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const rUe=new Float32Array(1);class DG extends Ln{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,n=e._clip.tracks,s=n.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let d=0;d!==s;++d){const h=n[d],p=h.name;let f=u[p];if(f!==void 0)++f.referenceCount,o[d]=f;else{if(f=o[d],f!==void 0){f._cacheIndex===null&&(++f.referenceCount,this._addInactiveBinding(f,l,p));continue}const m=t&&t._propertyBindings[d].binding.parsedPath;f=new PG(kr.create(i,p,m),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,l,p),o[d]=f}a[d].resultBuffer=f.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,n=e._clip.uuid,s=this._actionsByClip[n];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,n,i)}const t=e._propertyBindings;for(let i=0,n=t.length;i!==n;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,n=t.length;i!==n;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const n=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=n.length,n.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const d=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete d[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,n=t.length;i!==n;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,s=t[n];e._cacheIndex=n,t[n]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,s=t[n];e._cacheIndex=n,t[n]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const n=this._bindingsByRootAndName,s=this._bindings;let o=n[t];o===void 0&&(o={},n[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,n=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[n],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[n]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,s=t[n];e._cacheIndex=n,t[n]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,s=t[n];e._cacheIndex=n,t[n]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new rR(new Float32Array(2),new Float32Array(2),1,rUe),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,s=t[n];e.__cacheIndex=n,t[n]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const n=t||this._root,s=n.uuid;let o=typeof e=="string"?Gu.findByName(n,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Uw),l!==void 0){const d=l.actionByRoot[s];if(d!==void 0&&d.blendMode===i)return d;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new IG(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,n=i.uuid,s=typeof e=="string"?Gu.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[n]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,n=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(n,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,n=this._actionsByClip,s=n[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,d=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,d._cacheIndex=u,t[u]=d,t.pop(),this._removeInactiveBindingsForAction(c)}delete n[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const n=this._bindingsByRootAndName,s=n[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}let iUe=class _K{constructor(e){this.value=e}clone(){return new _K(this.value.clone===void 0?this.value:this.value.clone())}},nUe=0,sUe=class extends Ln{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:nUe++}),this.name="",this.usage=hm,this.uniforms=[]}add(r){return this.uniforms.push(r),this}remove(r){const e=this.uniforms.indexOf(r);return e!==-1&&this.uniforms.splice(e,1),this}setName(r){return this.name=r,this}setUsage(r){return this.usage=r,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(r){this.name=r.name,this.usage=r.usage;const e=r.uniforms;this.uniforms.length=0;for(let t=0,i=e.length;t<i;t++)this.uniforms.push(e[t].clone());return this}clone(){return new this.constructor().copy(this)}};class Wy extends Fm{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class oUe{constructor(e,t,i,n,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=n,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class q_{constructor(e,t,i=0,n=1/0){this.ray=new Uh(e,t),this.near=i,this.far=n,this.camera=null,this.layers=new Yw,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return mR(e,this,i,t),i.sort(UG),i}intersectObjects(e,t=!0,i=[]){for(let n=0,s=e.length;n<s;n++)mR(e[n],this,i,t);return i.sort(UG),i}}function UG(r,e){return r.distance-e.distance}function mR(r,e,t,i){if(r.layers.test(e.layers)&&r.raycast(e,t),i===!0){const n=r.children;for(let s=0,o=n.length;s<o;s++)mR(n[s],e,t,!0)}}class gR{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Di(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class aUe{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const FG=new qe;class lUe{constructor(e=new qe(1/0,1/0),t=new qe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=FG.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,FG).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const BG=new oe,K_=new oe;class zG{constructor(e=new oe,t=new oe){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){BG.subVectors(e,this.start),K_.subVectors(this.end,this.start);const i=K_.dot(K_);let n=K_.dot(BG)/i;return t&&(n=Di(n,0,1)),n}closestPointToPoint(e,t,i){const n=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(n).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const VG=new oe;class GG extends nr{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new sr,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;n.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new Rt(n,3));const s=new Ki({fog:!1,toneMapped:!1});this.cone=new ga(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),VG.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(VG),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Hu=new oe,Y_=new St,vR=new St;class cUe extends ga{constructor(e){const t=jG(e),i=new sr,n=[],s=[],o=new at(0,0,1),a=new at(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Rt(n,3)),i.setAttribute("color",new Rt(s,3));const l=new Ki({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,n=i.getAttribute("position");vR.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Y_.multiplyMatrices(vR,a.matrixWorld),Hu.setFromMatrixPosition(Y_),n.setXYZ(o,Hu.x,Hu.y,Hu.z),Y_.multiplyMatrices(vR,a.parent.matrixWorld),Hu.setFromMatrixPosition(Y_),n.setXYZ(o+1,Hu.x,Hu.y,Hu.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function jG(r){const e=[];r.isBone===!0&&e.push(r);for(let t=0;t<r.children.length;t++)e.push.apply(e,jG(r.children[t]));return e}class HG extends mt{constructor(e,t,i){const n=new Jh(t,4,2),s=new Ei({wireframe:!0,fog:!1,toneMapped:!1});super(n,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const uUe=new oe,WG=new at,$G=new at;class XG extends nr{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const n=new Zh(t);n.rotateY(Math.PI*.5),this.material=new Ei({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=n.getAttribute("position"),o=new Float32Array(s.count*3);n.setAttribute("color",new jr(o,3)),this.add(new mt(n,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");WG.copy(this.light.color),$G.copy(this.light.groundColor);for(let i=0,n=t.count;i<n;i++){const s=i<n/2?WG:$G;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(uUe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class qG extends ga{constructor(e=10,t=10,i=4473924,n=8947848){i=new at(i),n=new at(n);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let h=0,p=0,f=-a;h<=t;h++,f+=o){l.push(-a,0,f,a,0,f),l.push(f,0,-a,f,0,a);const m=h===s?i:n;m.toArray(c,p),p+=3,m.toArray(c,p),p+=3,m.toArray(c,p),p+=3,m.toArray(c,p),p+=3}const u=new sr;u.setAttribute("position",new Rt(l,3)),u.setAttribute("color",new Rt(c,3));const d=new Ki({vertexColors:!0,toneMapped:!1});super(u,d),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class dUe extends ga{constructor(e=10,t=16,i=8,n=64,s=4473924,o=8947848){s=new at(s),o=new at(o);const a=[],l=[];if(t>1)for(let d=0;d<t;d++){const h=d/t*(Math.PI*2),p=Math.sin(h)*e,f=Math.cos(h)*e;a.push(0,0,0),a.push(p,0,f);const m=d&1?s:o;l.push(m.r,m.g,m.b),l.push(m.r,m.g,m.b)}for(let d=0;d<i;d++){const h=d&1?s:o,p=e-e/i*d;for(let f=0;f<n;f++){let m=f/n*(Math.PI*2),g=Math.sin(m)*p,v=Math.cos(m)*p;a.push(g,0,v),l.push(h.r,h.g,h.b),m=(f+1)/n*(Math.PI*2),g=Math.sin(m)*p,v=Math.cos(m)*p,a.push(g,0,v),l.push(h.r,h.g,h.b)}}const c=new sr;c.setAttribute("position",new Rt(a,3)),c.setAttribute("color",new Rt(l,3));const u=new Ki({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const KG=new oe,Z_=new oe,YG=new oe;class ZG extends nr{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let n=new sr;n.setAttribute("position",new Rt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ki({fog:!1,toneMapped:!1});this.lightPlane=new yn(n,s),this.add(this.lightPlane),n=new sr,n.setAttribute("position",new Rt([0,0,0,0,0,1],3)),this.targetLine=new yn(n,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),KG.setFromMatrixPosition(this.light.matrixWorld),Z_.setFromMatrixPosition(this.light.target.matrixWorld),YG.subVectors(Z_,KG),this.lightPlane.lookAt(Z_),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Z_),this.targetLine.scale.z=YG.length()}}const J_=new oe,Bi=new _c;class JG extends ga{constructor(e){const t=new sr,i=new Ki({color:16777215,vertexColors:!0,toneMapped:!1}),n=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(f,m){l(f),l(m)}function l(f){n.push(0,0,0),s.push(0,0,0),o[f]===void 0&&(o[f]=[]),o[f].push(n.length/3-1)}t.setAttribute("position",new Rt(n,3)),t.setAttribute("color",new Rt(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new at(16755200),u=new at(16711680),d=new at(43775),h=new at(16777215),p=new at(3355443);this.setColors(c,u,d,h,p)}setColors(e,t,i,n,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,n.r,n.g,n.b),o.setXYZ(39,n.r,n.g,n.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,n=1;Bi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Yi("c",t,e,Bi,0,0,-1),Yi("t",t,e,Bi,0,0,1),Yi("n1",t,e,Bi,-i,-n,-1),Yi("n2",t,e,Bi,i,-n,-1),Yi("n3",t,e,Bi,-i,n,-1),Yi("n4",t,e,Bi,i,n,-1),Yi("f1",t,e,Bi,-i,-n,1),Yi("f2",t,e,Bi,i,-n,1),Yi("f3",t,e,Bi,-i,n,1),Yi("f4",t,e,Bi,i,n,1),Yi("u1",t,e,Bi,i*.7,n*1.1,-1),Yi("u2",t,e,Bi,-i*.7,n*1.1,-1),Yi("u3",t,e,Bi,0,n*2,-1),Yi("cf1",t,e,Bi,-i,0,1),Yi("cf2",t,e,Bi,i,0,1),Yi("cf3",t,e,Bi,0,-n,1),Yi("cf4",t,e,Bi,0,n,1),Yi("cn1",t,e,Bi,-i,0,-1),Yi("cn2",t,e,Bi,i,0,-1),Yi("cn3",t,e,Bi,0,-n,-1),Yi("cn4",t,e,Bi,0,n,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Yi(r,e,t,i,n,s,o){J_.set(n,s,o).unproject(i);const a=e[r];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],J_.x,J_.y,J_.z)}}const Q_=new On;class hUe extends ga{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(8*3),s=new sr;s.setIndex(new jr(i,1)),s.setAttribute("position",new jr(n,3)),super(s,new Ki({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Q_.setFromObject(this.object),Q_.isEmpty())return;const t=Q_.min,i=Q_.max,n=this.geometry.attributes.position,s=n.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class pUe extends ga{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new sr;s.setIndex(new jr(i,1)),s.setAttribute("position",new Rt(n,3)),super(s,new Ki({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class fUe extends yn{constructor(e,t=1,i=16776960){const n=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new sr;o.setAttribute("position",new Rt(s,3)),o.computeBoundingSphere(),super(o,new Ki({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new sr;l.setAttribute("position",new Rt(a,3)),l.computeBoundingSphere(),this.add(new mt(l,new Ei({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const QG=new oe;let eS,yR;class mUe extends nr{constructor(e=new oe(0,0,1),t=new oe(0,0,0),i=1,n=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",eS===void 0&&(eS=new sr,eS.setAttribute("position",new Rt([0,0,0,0,1,0],3)),yR=new bn(0,.5,1,5,1),yR.translate(0,-.5,0)),this.position.copy(t),this.line=new yn(eS,new Ki({color:n,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new mt(yR,new Ei({color:n,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{QG.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(QG,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class gUe extends ga{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],n=new sr;n.setAttribute("position",new Rt(t,3)),n.setAttribute("color",new Rt(i,3));const s=new Ki({vertexColors:!0,toneMapped:!1});super(n,s),this.type="AxesHelper"}setColors(e,t,i){const n=new at,s=this.geometry.attributes.color.array;return n.set(e),n.toArray(s,0),n.toArray(s,3),n.set(t),n.toArray(s,6),n.toArray(s,9),n.set(i),n.toArray(s,12),n.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tS{constructor(){this.type="ShapePath",this.color=new at,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Wm,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,n){return this.currentPath.quadraticCurveTo(e,t,i,n),this}bezierCurveTo(e,t,i,n,s,o){return this.currentPath.bezierCurveTo(e,t,i,n,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const x=[];for(let b=0,w=v.length;b<w;b++){const _=v[b],S=new Po;S.curves=_.curves,x.push(S)}return x}function i(v,x){const b=x.length;let w=!1;for(let _=b-1,S=0;S<b;_=S++){let T=x[_],M=x[S],E=M.x-T.x,C=M.y-T.y;if(Math.abs(C)>Number.EPSILON){if(C<0&&(T=x[S],E=-E,M=x[_],C=-C),v.y<T.y||v.y>M.y)continue;if(v.y===T.y){if(v.x===T.x)return!0}else{const P=C*(v.x-T.x)-E*(v.y-T.y);if(P===0)return!0;if(P<0)continue;w=!w}}else{if(v.y!==T.y)continue;if(M.x<=v.x&&v.x<=T.x||T.x<=v.x&&v.x<=M.x)return!0}}return w}const n=Uu.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Po,l.curves=a.curves,c.push(l),c;let u=!n(s[0].getPoints());u=e?!u:u;const d=[],h=[];let p=[],f=0,m;h[f]=void 0,p[f]=[];for(let v=0,x=s.length;v<x;v++)a=s[v],m=a.getPoints(),o=n(m),o=e?!o:o,o?(!u&&h[f]&&f++,h[f]={s:new Po,p:m},h[f].s.curves=a.curves,u&&f++,p[f]=[]):p[f].push({h:a,p:m[0]});if(!h[0])return t(s);if(h.length>1){let v=!1,x=0;for(let b=0,w=h.length;b<w;b++)d[b]=[];for(let b=0,w=h.length;b<w;b++){const _=p[b];for(let S=0;S<_.length;S++){const T=_[S];let M=!0;for(let E=0;E<h.length;E++)i(T.p,h[E].p)&&(b!==E&&x++,M?(M=!1,d[E].push(T)):v=!0);M&&d[b].push(T)}}x>0&&v===!1&&(p=d)}let g;for(let v=0,x=h.length;v<x;v++){l=h[v].s,c.push(l),g=p[v];for(let b=0,w=g.length;b<w;b++)l.holes.push(g[b].h)}return c}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Xf}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Xf);const rS=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:dh,AddEquation:to,AddOperation:kA,AdditiveAnimationBlendMode:IA,AdditiveBlending:Nl,AlphaFormat:q0,AlwaysCompare:hy,AlwaysDepth:D0,AlwaysStencilFunc:zw,AmbientLight:np,AnimationAction:IG,AnimationClip:Gu,AnimationLoader:U4e,AnimationMixer:DG,AnimationObjectGroup:tUe,AnimationUtils:O4e,ArcCurve:WV,ArrayCamera:EN,ArrowHelper:mUe,Audio:dR,AudioAnalyser:W4e,AudioContext:cR,AudioListener:uR,AudioLoader:CG,AxesHelper:gUe,BackSide:Oi,BasicDepthPacking:UA,BasicShadowMap:kke,Bone:$h,BooleanKeyframeTrack:ep,Box2:lUe,Box3:On,Box3Helper:pUe,BoxGeometry:vi,BoxHelper:hUe,BufferAttribute:jr,BufferGeometry:sr,BufferGeometryLoader:lR,ByteType:Rw,Cache:rp,Camera:_c,CameraHelper:JG,CanvasTexture:IN,CapsuleGeometry:R_,CatmullRomCurve3:$V,CineonToneMapping:H0,CircleGeometry:YV,ClampToEdgeWrapping:Mi,Clock:X_,Color:at,ColorKeyframeTrack:iR,ColorManagement:Hr,CompressedArrayTexture:HV,CompressedCubeTexture:i4e,CompressedTexture:Dy,CompressedTextureLoader:F4e,ConeGeometry:XN,CubeCamera:u_,CubeReflectionMapping:Co,CubeRefractionMapping:la,CubeTexture:Sc,CubeTextureLoader:yG,CubeUVReflectionMapping:Nu,CubicBezierCurve:zN,CubicBezierCurve3:VN,CubicInterpolant:fG,CullFaceBack:Aw,CullFaceFront:AA,CullFaceFrontBack:Rke,CullFaceNone:CA,Curve:va,CurvePath:KV,CustomBlending:w0,CustomToneMapping:LA,CylinderGeometry:bn,Cylindrical:aUe,Data3DTexture:Hw,DataArrayTexture:yy,DataTexture:ma,DataTextureLoader:bG,DataUtils:Sy,DecrementStencilOp:VA,DecrementWrapStencilOp:jA,DefaultLoadingManager:vG,DepthFormat:hs,DepthStencilFormat:so,DepthTexture:Hh,DirectionalLight:Dl,DirectionalLightHelper:ZG,DiscreteInterpolant:mG,DisplayP3ColorSpace:ry,DodecahedronGeometry:ZV,DoubleSide:Wi,DstAlphaFactor:R0,DstColorFactor:L0,DynamicCopyUsage:Uke,DynamicDrawUsage:py,DynamicReadUsage:Pke,EdgesGeometry:JV,EllipseCurve:C_,EqualCompare:ay,EqualDepth:F0,EqualStencilFunc:XA,EquirectangularReflectionMapping:ja,EquirectangularRefractionMapping:Rl,Euler:Xi,EventDispatcher:Ln,ExtrudeGeometry:U_,FileLoader:In,Float16BufferAttribute:gN,Float32BufferAttribute:Rt,Float64BufferAttribute:xLe,FloatType:mi,Fog:Um,FogExp2:Dm,FramebufferTexture:E_,FrontSide:eo,Frustum:Ey,GLBufferAttribute:oUe,GLSL1:A8,GLSL3:Vw,GreaterCompare:cy,GreaterDepth:z0,GreaterEqualCompare:dy,GreaterEqualDepth:B0,GreaterEqualStencilFunc:ZA,GreaterStencilFunc:KA,GridHelper:qG,Group:Oo,HalfFloatType:gi,HemisphereLight:ip,HemisphereLightHelper:XG,IcosahedronGeometry:sG,ImageBitmapLoader:EG,ImageLoader:ju,ImageUtils:vy,IncrementStencilOp:zA,IncrementWrapStencilOp:GA,InstancedBufferAttribute:Mc,InstancedBufferGeometry:W_,InstancedInterleavedBuffer:Wy,InstancedMesh:Iy,Int16BufferAttribute:yLe,Int32BufferAttribute:bLe,Int8BufferAttribute:mLe,IntType:W0,InterleavedBuffer:Fm,InterleavedBufferAttribute:Is,Interpolant:Km,InterpolateDiscrete:lm,InterpolateLinear:Rh,InterpolateSmooth:Dw,InvertStencilOp:HA,KeepStencilOp:um,KeyframeTrack:Ka,LOD:RN,LatheGeometry:$N,Layers:Yw,LessCompare:dm,LessDepth:U0,LessEqualCompare:ly,LessEqualDepth:uh,LessEqualStencilFunc:qA,LessStencilFunc:$A,Light:Ac,LightProbe:H_,Line:yn,Line3:zG,LineBasicMaterial:Ki,LineCurve:GN,LineCurve3:qV,LineDashedMaterial:jy,LineLoop:S_,LineSegments:ga,LinearDisplayP3ColorSpace:cm,LinearEncoding:ey,LinearFilter:Or,LinearInterpolant:rR,LinearMipMapLinearFilter:M8,LinearMipMapNearestFilter:T8,LinearMipmapLinearFilter:qn,LinearMipmapNearestFilter:hh,LinearSRGBColorSpace:li,LinearToneMapping:G0,LinearTransfer:iy,Loader:Fi,LoaderUtils:Rc,LoadingManager:V_,LoopOnce:OA,LoopPingPong:E8,LoopRepeat:PA,LuminanceAlphaFormat:Y0,LuminanceFormat:K0,MOUSE:lh,Material:Wr,MaterialLoader:Nc,MathUtils:$i,Matrix3:hr,Matrix4:St,MaxEquation:M0,Mesh:mt,MeshBasicMaterial:Ei,MeshDepthMaterial:jh,MeshDistanceMaterial:Ay,MeshLambertMaterial:qm,MeshMatcapMaterial:z_,MeshNormalMaterial:Gy,MeshPhongMaterial:Bu,MeshPhysicalMaterial:Io,MeshStandardMaterial:Kn,MeshToonMaterial:B_,MinEquation:T0,MirroredRepeatWrapping:kl,MixOperation:RA,MultiplyBlending:Au,MultiplyOperation:Yf,NearestFilter:Mr,NearestMipMapLinearFilter:S8,NearestMipMapNearestFilter:_8,NearestMipmapLinearFilter:ca,NearestMipmapNearestFilter:Ll,NeverCompare:oy,NeverDepth:I0,NeverStencilFunc:WA,NoBlending:Xn,NoColorSpace:kn,NoToneMapping:ro,NormalAnimationBlendMode:Uw,NormalBlending:Eo,NotEqualCompare:uy,NotEqualDepth:V0,NotEqualStencilFunc:YA,NumberKeyframeTrack:zu,Object3D:nr,ObjectLoader:SG,ObjectSpaceNormalMap:Bw,OctahedronGeometry:Zh,OneFactor:C0,OneMinusDstAlphaFactor:k0,OneMinusDstColorFactor:O0,OneMinusSrcAlphaFactor:Kf,OneMinusSrcColorFactor:N0,OrthographicCamera:fa,P3Primaries:sy,PCFShadowMap:NA,PCFSoftShadowMap:Nw,PMREMGenerator:p_,Path:Wm,PerspectiveCamera:Yr,Plane:pa,PlaneGeometry:Xa,PlaneHelper:fUe,PointLight:Il,PointLightHelper:HG,Points:Kh,PointsMaterial:qh,PolarGridHelper:dUe,PolyhedronGeometry:$m,PositionalAudio:hR,PropertyBinding:kr,PropertyMixer:PG,QuadraticBezierCurve:jN,QuadraticBezierCurve3:HN,Quaternion:Rr,QuaternionKeyframeTrack:Ec,QuaternionLinearInterpolant:gG,RED_GREEN_RGTC2_Format:om,RED_RGTC1_Format:Iw,REVISION:Xf,RGBADepthPacking:ty,RGBAFormat:Rn,RGBAIntegerFormat:J0,RGBA_ASTC_10x10_Format:Ch,RGBA_ASTC_10x5_Format:Th,RGBA_ASTC_10x6_Format:Mh,RGBA_ASTC_10x8_Format:Eh,RGBA_ASTC_12x10_Format:Ah,RGBA_ASTC_12x12_Format:Nh,RGBA_ASTC_4x4_Format:gh,RGBA_ASTC_5x4_Format:vh,RGBA_ASTC_5x5_Format:yh,RGBA_ASTC_6x5_Format:bh,RGBA_ASTC_6x6_Format:xh,RGBA_ASTC_8x5_Format:wh,RGBA_ASTC_8x6_Format:_h,RGBA_ASTC_8x8_Format:Sh,RGBA_BPTC_Format:ku,RGBA_ETC2_EAC_Format:mh,RGBA_PVRTC_2BPPV1_Format:nm,RGBA_PVRTC_4BPPV1_Format:im,RGBA_S3TC_DXT1_Format:hc,RGBA_S3TC_DXT3_Format:pc,RGBA_S3TC_DXT5_Format:fc,RGB_BPTC_SIGNED_Format:Ow,RGB_BPTC_UNSIGNED_Format:Pw,RGB_ETC1_Format:Lw,RGB_ETC2_Format:fh,RGB_PVRTC_2BPPV1_Format:rm,RGB_PVRTC_4BPPV1_Format:tm,RGB_S3TC_DXT1_Format:Ru,RGFormat:em,RGIntegerFormat:Z0,RawShaderMaterial:F_,Ray:Uh,Raycaster:q_,Rec709Primaries:ny,RectAreaLight:j_,RedFormat:Jf,RedIntegerFormat:Qf,ReinhardToneMapping:j0,RenderTarget:nN,RepeatWrapping:ds,ReplaceStencilOp:BA,ReverseSubtractEquation:S0,RingGeometry:oG,SIGNED_RED_GREEN_RGTC2_Format:am,SIGNED_RED_RGTC1_Format:sm,SRGBColorSpace:Lt,SRGBTransfer:ci,Scene:qa,ShaderChunk:yr,ShaderLib:qi,ShaderMaterial:ii,ShadowMaterial:QN,Shape:Po,ShapeGeometry:aG,ShapePath:tS,ShapeUtils:Uu,ShortType:kw,Skeleton:Xh,SkeletonHelper:cUe,SkinnedMesh:Ly,Source:da,Sphere:Ls,SphereGeometry:Jh,Spherical:gR,SphericalHarmonics3:aR,SplineCurve:WN,SpotLight:Pl,SpotLightHelper:GG,Sprite:Tc,SpriteMaterial:Wh,SrcAlphaFactor:qf,SrcAlphaSaturateFactor:P0,SrcColorFactor:A0,StaticCopyUsage:Dke,StaticDrawUsage:hm,StaticReadUsage:Oke,StereoCamera:RG,StreamCopyUsage:Fke,StreamDrawUsage:Lke,StreamReadUsage:Ike,StringKeyframeTrack:tp,SubtractEquation:_0,SubtractiveBlending:Cu,TOUCH:ch,TangentSpaceNormalMap:Ha,TetrahedronGeometry:lG,Texture:Nr,TextureLoader:G_,TorusGeometry:Fu,TorusKnotGeometry:ZN,Triangle:Fh,TriangleFanDrawMode:Fw,TriangleStripDrawMode:DA,TrianglesDrawMode:C8,TubeGeometry:cG,TwoPassDoubleSide:w8,UVMapping:Zf,Uint16BufferAttribute:Ty,Uint32BufferAttribute:t_,Uint8BufferAttribute:gLe,Uint8ClampedBufferAttribute:vLe,Uniform:iUe,UniformsGroup:sUe,UniformsLib:At,UniformsUtils:Lo,UnsignedByteType:io,UnsignedInt248Type:Ao,UnsignedIntType:no,UnsignedShort4444Type:$0,UnsignedShort5551Type:X0,UnsignedShortType:ph,VSMShadowMap:Al,Vector2:qe,Vector3:oe,Vector4:jt,VectorKeyframeTrack:Vu,VideoTexture:jV,WebGL1Renderer:SV,WebGL3DRenderTarget:iLe,WebGLArrayRenderTarget:rLe,WebGLCoordinateSystem:ua,WebGLCubeRenderTarget:bN,WebGLMultipleRenderTargets:nLe,WebGLRenderTarget:Ui,WebGLRenderer:AN,WebGLUtils:_V,WebGPUCoordinateSystem:Oh,WireframeGeometry:JN,WrapAroundEnding:Q0,ZeroCurvatureEnding:kh,ZeroFactor:E0,ZeroSlopeEnding:Lh,ZeroStencilOp:FA,_SRGBAFormat:pm,createCanvasElement:tN,sRGBEncoding:Ol},Symbol.toStringTag,{value:"Module"})),bR={VERTEX:"vertex",FRAGMENT:"fragment"},ui={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},vUe={BOOLEAN:"bool",INTEGER:"int",FLOAT:"float",VECTOR2:"vec2",VECTOR3:"vec3",VECTOR4:"vec4",MATRIX3:"mat3",MATRIX4:"mat4"},Ym=["fragment","vertex"],ej=["setup","analyze","generate"],tj=[...Ym,"compute"],iS=["x","y","z","w"];function nS(r){let e="{";r.isNode===!0&&(e+=`uuid:"${r.uuid}"`);for(const{property:t,index:i,childNode:n}of $y(r)){let s=nS(n);s.includes(",")||(s=s.slice(s.indexOf('"'),s.indexOf("}"))),e+=`,${t}${i!==void 0?"/"+i:""}:${s}`}return e+="}",e}function*$y(r,e=!1){for(const t in r){if(t.startsWith("_")===!0)continue;const i=r[t];if(Array.isArray(i)===!0)for(let n=0;n<i.length;n++){const s=i[n];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:n,childNode:s})}else if(i&&i.isNode===!0)yield{property:t,childNode:i};else if(typeof i=="object")for(const n in i){const s=i[n];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:n,childNode:s})}}}function Wu(r){if(r==null)return null;const e=typeof r;return r.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":r.isVector2===!0?"vec2":r.isVector3===!0?"vec3":r.isVector4===!0?"vec4":r.isMatrix3===!0?"mat3":r.isMatrix4===!0?"mat4":r.isColor===!0?"color":r instanceof ArrayBuffer?"ArrayBuffer":null}function xR(r,...e){const t=r?r.slice(-4):void 0;return(t==="vec2"||t==="vec3"||t==="vec4")&&e.length===1&&(e=t==="vec2"?[e[0],e[0]]:[e[0],e[0],e[0]]),r==="color"?new at(...e):t==="vec2"?new qe(...e):t==="vec3"?new oe(...e):t==="vec4"?new jt(...e):t==="mat3"?new hr(...e):t==="mat4"?new St(...e):r==="bool"?e[0]||!1:r==="float"||r==="int"||r==="uint"?e[0]||0:r==="string"?e[0]||"":r==="ArrayBuffer"?_R(e[0]):null}function wR(r){let e="";const t=new Uint8Array(r);for(let i=0;i<t.length;i++)e+=String.fromCharCode(t[i]);return btoa(e)}function _R(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0)).buffer}const yUe=Object.freeze(Object.defineProperty({__proto__:null,arrayBufferToBase64:wR,base64ToArrayBuffer:_R,getCacheKey:nS,getNodeChildren:$y,getValueFromType:xR,getValueType:Wu},Symbol.toStringTag,{value:"Module"})),SR=new Map;let bUe=0;const Zt=class extends Ln{constructor(r=null){super(),this.nodeType=r,this.updateType=ui.NONE,this.updateBeforeType=ui.NONE,this.uuid=$i.generateUUID(),this.isNode=!0,Object.defineProperty(this,"id",{value:bUe++})}get type(){return this.constructor.type}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return!1}*getChildren(){const r=this;for(const{property:e,index:t,childNode:i}of $y(this))yield{childNode:i,replaceNode(n){t===void 0?r[e]=n:r[e][t]=n}}}dispose(){this.dispatchEvent({type:"dispose"})}traverse(r,e=null){r(this,e);for(const{childNode:t,replaceNode:i}of this.getChildren())t.traverse(r,i)}getCacheKey(){return nS(this)}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getNodeType(r){const e=r.getNodeProperties(this);return e.outputNode?e.outputNode.getNodeType(r):this.nodeType}getShared(r){const e=this.getHash(r);return r.getNodeFromHash(e)||this}setup(r){const e=r.getNodeProperties(this);for(const{childNode:t}of this.getChildren())e["_node"+t.id]=t;return null}construct(r){return console.warn("THREE.Node: construct() is deprecated. Use setup() instead."),this.setup(r)}analyze(r){const e=r.getDataFromNode(this);if(e.dependenciesCount=e.dependenciesCount===void 0?1:e.dependenciesCount+1,e.dependenciesCount===1){const t=r.getNodeProperties(this);for(const i of Object.values(t))i&&i.isNode===!0&&i.build(r)}}generate(r,e){const{outputNode:t}=r.getNodeProperties(this);if(t&&t.isNode===!0)return t.build(r,e)}updateBefore(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(r,e=null){const t=this.getShared(r);if(this!==t)return t.build(r,e);r.addNode(this),r.addChain(this);let i=null;const n=r.getBuildStage();if(n==="setup"){const s=r.getNodeProperties(this);if(s.initialized!==!0||r.context.tempRead===!1){const o=r.stack.nodes.length;s.initialized=!0,s.outputNode=this.setup(r),s.outputNode!==null&&r.stack.nodes.length!==o&&(s.outputNode=r.stack);for(const a of Object.values(s))a&&a.isNode===!0&&a.build(r)}}else if(n==="analyze")this.analyze(r);else if(n==="generate")if(this.generate.length===1){const s=this.getNodeType(r),o=r.getDataFromNode(this);i=o.snippet,i===void 0&&(i=this.generate(r)||"",o.snippet=i),i=r.format(i,s,e)}else i=this.generate(r,e)||"";return r.removeChain(this),i}getSerializeChildren(){return $y(this)}serialize(r){const e=this.getSerializeChildren(),t={};for(const{property:i,index:n,childNode:s}of e)n!==void 0?(t[i]===void 0&&(t[i]=Number.isInteger(n)?[]:{}),t[i][n]=s.toJSON(r.meta).uuid):t[i]=s.toJSON(r.meta).uuid;Object.keys(t).length>0&&(r.inputNodes=t)}deserialize(r){if(r.inputNodes!==void 0){const e=r.meta.nodes;for(const t in r.inputNodes)if(Array.isArray(r.inputNodes[t])){const i=[];for(const n of r.inputNodes[t])i.push(e[n]);this[t]=i}else if(typeof r.inputNodes[t]=="object"){const i={};for(const n in r.inputNodes[t]){const s=r.inputNodes[t][n];i[n]=e[s]}this[t]=i}else{const i=r.inputNodes[t];this[t]=e[i]}}}toJSON(r){const{uuid:e,type:t}=this,i=r===void 0||typeof r=="string";i&&(r={textures:{},images:{},nodes:{}});let n=r.nodes[e];n===void 0&&(n={uuid:e,type:t,meta:r,metadata:{version:4.6,type:"Node",generator:"Node.toJSON"}},i!==!0&&(r.nodes[n.uuid]=n),this.serialize(n),delete n.meta);function s(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}if(i){const o=s(r.textures),a=s(r.images),l=s(r.nodes);o.length>0&&(n.textures=o),a.length>0&&(n.images=a),l.length>0&&(n.nodes=l)}return n}};function ft(r,e){if(typeof e!="function"||!r)throw new Error(`Node class ${r} is not a class`);if(SR.has(r))throw new Error(`Redefinition of node class ${r}`);SR.set(r,e),e.type=r}function TR(r){const e=SR.get(r);if(e!==void 0)return new e}class rj extends Zt{constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?Wu(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=Wu(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=wR(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?xR(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}const MR=rj;ft("InputNode",rj);class ij extends Zt{constructor(e,t){super(),this.node=e,this.indexNode=t}getNodeType(e){return this.node.getNodeType(e)}generate(e){const t=this.node.build(e),i=this.indexNode.build(e,"uint");return`${t}[ ${i} ]`}}const sS=ij;ft("ArrayElementNode",ij);class nj extends Zt{constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let i=null;for(const n of this.convertTo.split("|"))(i===null||e.getTypeLength(t)===e.getTypeLength(n))&&(i=n);return i}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const i=this.node,n=this.getNodeType(e),s=i.build(e,n);return e.format(s,n,t)}}const oS=nj;ft("ConvertNode",nj);class sj extends Zt{constructor(e){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).dependenciesCount>1}build(e,t){if(e.getBuildStage()==="generate"){const i=e.getVectorType(this.getNodeType(e,t)),n=e.getDataFromNode(this);if(e.context.tempRead!==!1&&n.propertyName!==void 0)return e.format(n.propertyName,i,t);if(e.context.tempWrite!==!1&&i!=="void"&&t!=="void"&&this.hasDependencies(e)){const s=super.build(e,i),o=e.getVarFromNode(this,i),a=e.getPropertyName(o);return e.addLineFlowCode(`${a} = ${s}`),n.snippet=s,n.propertyName=a,e.format(n.propertyName,i,t)}}return super.build(e,t)}}const Zi=sj;ft("TempNode",sj);class oj extends Zi{constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,i)=>t+e.getTypeLength(i.getNodeType(e)),0))}generate(e,t){const i=this.getNodeType(e),n=this.nodes,s=[];for(const a of n){const l=a.build(e);s.push(l)}const o=`${e.getType(i)}( ${s.join(", ")} )`;return e.format(o,i,t)}}const aj=oj;ft("JoinNode",oj);const xUe=iS.join("");class lj extends Zt{constructor(e,t="x"){super(),this.node=e,this.components=t}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(iS.indexOf(t)+1,e);return e}getNodeType(e){return e.getTypeFromLength(this.components.length)}generate(e,t){const i=this.node,n=e.getTypeLength(i.getNodeType(e));let s=null;if(n>1){let o=null;this.getVectorLength()>=n&&(o=e.getTypeFromLength(this.getVectorLength()));const a=i.build(e,o);this.components.length===n&&this.components===xUe.slice(0,this.components.length)?s=e.format(a,o,t):s=e.format(`${a}.${this.components}`,this.getNodeType(e),t)}else s=i.build(e,t);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}const aS=lj;ft("SplitNode",lj);class cj extends Zi{constructor(e,t,i){super(),this.sourceNode=e,this.components=t,this.targetNode=i}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:i,targetNode:n}=this,s=this.getNodeType(e),o=e.getTypeFromLength(i.length),a=n.build(e,o),l=t.build(e,s),c=e.getTypeLength(s),u=[];for(let d=0;d<c;d++){const h=iS[d];h===i[0]?(u.push(a),d+=i.length-1):u.push(l+"."+h)}return`${e.getType(s)}( ${u.join(", ")} )`}}const uj=cj;ft("SetNode",cj);class dj extends MR{constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.getConst(this.getNodeType(e),this.value)}generate(e,t){const i=this.getNodeType(e);return e.format(this.generateConst(e),i,t)}}const Do=dj;ft("ConstNode",dj);const Zm=new Map;function rt(r,e){if(Zm.has(r))throw new Error(`Redefinition of node element ${r}`);if(typeof e!="function")throw new Error(`Node element ${r} is not a function`);Zm.set(r,e)}const hj=r=>r.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),pj={setup(r,e){const t=e.shift();return r(uS(t),...e)},get:function(r,e,t){if(typeof e=="string"&&r[e]===void 0)if(Zm.has(e)){const i=Zm.get(e);return(...n)=>i(t,...n)}else{if(e==="self")return r;if(e.endsWith("Assign")&&Zm.has(e.slice(0,e.length-6))){const i=Zm.get(e.slice(0,e.length-6));return(...n)=>t.assign(i(t,...n))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=hj(e),Vt(new aS(r,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=hj(e.slice(3).toLowerCase()),e=e.split("").sort().join(""),i=>Vt(new uj(r,e,i));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),Vt(new aS(r,e));if(/^\d+$/.test(e)===!0)return Vt(new sS(r,new Do(Number(e),"uint")))}}return r[e]}},ER=new WeakMap,wUe=function(r,e=null){const t=Wu(r);if(t==="node"){let i=ER.get(r);return i===void 0&&(i=new Proxy(r,pj),ER.set(r,i),ER.set(i,i)),i}else{if(e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string")return Vt(RR(r,e));if(t==="shader")return Ur(r)}return r},_Ue=function(r,e=null){for(const t in r)r[t]=Vt(r[t],e);return r},SUe=function(r,e=null){const t=r.length;for(let i=0;i<t;i++)r[i]=Vt(r[i],e);return r},TUe=function(r,e=null,t=null,i=null){const n=s=>Vt(i!==null?Object.assign(s,i):s);return e===null?(...s)=>n(new r(...up(s))):t!==null?(t=Vt(t),(...s)=>n(new r(e,...up(s),t))):(...s)=>n(new r(e,...up(s)))},MUe=function(r,...e){return Vt(new r(...up(e)))};class EUe extends Zt{constructor(e,t){super(),this.shaderNode=e,this.inputNodes=t}getNodeType(e){const{outputNode:t}=e.getNodeProperties(this);return t?t.getNodeType(e):super.getNodeType(e)}call(e){const{shaderNode:t,inputNodes:i}=this,n=t.jsFunc,s=i!==null?n(uS(i),e.stack,e):n(e.stack,e);return Vt(s)}setup(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}generate(e,t){const{outputNode:i}=e.getNodeProperties(this);return i===null?this.call(e).build(e,t):super.generate(e,t)}}class CUe extends Zt{constructor(e){super(),this.jsFunc=e}call(e=null){return Vt(new EUe(this,e))}setup(){return this.call()}}const AUe=[!1,!0],NUe=[0,1,2,3],RUe=[-1,-2],fj=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],CR=new Map;for(const r of AUe)CR.set(r,new Do(r));const AR=new Map;for(const r of NUe)AR.set(r,new Do(r,"uint"));const NR=new Map([...AR].map(r=>new Do(r.value,"int")));for(const r of RUe)NR.set(r,new Do(r,"int"));const lS=new Map([...NR].map(r=>new Do(r.value)));for(const r of fj)lS.set(r,new Do(r));for(const r of fj)lS.set(-r,new Do(-r));const cS={bool:CR,uint:AR,ints:NR,float:lS},mj=new Map([...CR,...lS]),RR=(r,e)=>mj.has(r)?mj.get(r):r.isNode===!0?r:new Do(r,e),kUe=r=>{try{return r.getNodeType()}catch{return}},xi=function(r,e=null){return(...t)=>{if((t.length===0||!["bool","float","int","uint"].includes(r)&&t.every(n=>typeof n!="object"))&&(t=[xR(r,...t)]),t.length===1&&e!==null&&e.has(t[0]))return Vt(e.get(t[0]));if(t.length===1){const n=RR(t[0],r);return kUe(n)===r?Vt(n):Vt(new oS(n,r))}const i=t.map(n=>RR(n));return Vt(new aj(i,r))}},gj=r=>r!=null?r.nodeType||r.convertTo||(typeof r=="string"?r:null):null;function kc(r){return new Proxy(new CUe(r),pj)}const Vt=(r,e=null)=>wUe(r,e),uS=(r,e=null)=>new _Ue(r,e),up=(r,e=null)=>new SUe(r,e),it=(...r)=>new TUe(...r),Tt=(...r)=>new MUe(...r),LUe=r=>(console.warn("TSL: shader() is deprecated. Use tslFn() instead."),new kc(r)),Ur=r=>{const e=new kc(r);return t=>e.call(t)};ft("ShaderNode",kc);const vj=new xi("color"),Bt=new xi("float",cS.float),dS=new xi("int",cS.int),yj=new xi("uint",cS.uint),bj=new xi("bool",cS.bool),$r=new xi("vec2"),xj=new xi("ivec2"),wj=new xi("uvec2"),_j=new xi("bvec2"),Kt=new xi("vec3"),Sj=new xi("ivec3"),Tj=new xi("uvec3"),Mj=new xi("bvec3"),Xr=new xi("vec4"),Ej=new xi("ivec4"),Cj=new xi("uvec4"),Aj=new xi("bvec4"),Lc=new xi("mat3"),Nj=new xi("imat3"),Rj=new xi("umat3"),kj=new xi("bmat3"),kR=new xi("mat4"),Lj=new xi("imat4"),Oj=new xi("umat4"),Pj=new xi("bmat4"),Ij=(r="")=>Vt(new Do(r,"string")),Dj=r=>Vt(new Do(r,"ArrayBuffer"));rt("color",vj),rt("float",Bt),rt("int",dS),rt("uint",yj),rt("bool",bj),rt("vec2",$r),rt("ivec2",xj),rt("uvec2",wj),rt("bvec2",_j),rt("vec3",Kt),rt("ivec3",Sj),rt("uvec3",Tj),rt("bvec3",Mj),rt("vec4",Xr),rt("ivec4",Ej),rt("uvec4",Cj),rt("bvec4",Aj),rt("mat3",Lc),rt("imat3",Nj),rt("umat3",Rj),rt("bmat3",kj),rt("mat4",kR),rt("imat4",Lj),rt("umat4",Oj),rt("bmat4",Pj),rt("string",Ij),rt("arrayBuffer",Dj);const Uj=it(sS),Fj=(r,e)=>Vt(new oS(Vt(r),e)),OUe=(r,e)=>Vt(new aS(Vt(r),e));rt("element",Uj),rt("convert",Fj);class LR extends MR{constructor(e,t=null){super(e,t),this.isUniformNode=!0}getUniformHash(e){return this.getHash(e)}generate(e,t){const i=this.getNodeType(e),n=this.getUniformHash(e);let s=e.getNodeFromHash(n);s===void 0&&(e.setHashNode(this,n),s=this);const o=s.getInputType(e),a=e.getUniformFromNode(s,o,e.shaderStage,e.context.label),l=e.getPropertyName(a);return e.context.label!==void 0&&delete e.context.label,e.format(l,i,t)}}const Fr=LR,sn=(r,e)=>{const t=gj(e||r),i=r&&r.isNode===!0?r.node&&r.node.value||r.value:r;return Vt(new LR(i,t))};ft("UniformNode",LR);class Bj extends Fr{constructor(e=[]){super(),this.isArrayUniformNode=!0,this.nodes=e}getNodeType(e){return this.nodes[0].getNodeType(e)}}const zj=Bj;ft("ArrayUniformNode",Bj);class hS extends Zt{constructor(e,t=null){super(),this.node=e,this.name=t}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const{name:t,node:i}=this,n=this.getNodeType(e),s=e.getVaryingFromNode(this,n);s.needsInterpolation||(s.needsInterpolation=e.shaderStage==="fragment"),t!==null&&(s.name=t);const o=e.getPropertyName(s,bR.VERTEX);return e.flowNodeFromShaderStage(bR.VERTEX,i,n,o),e.getPropertyName(s)}}const ni=it(hS);rt("varying",ni),ft("VaryingNode",hS);class Xy extends Zt{constructor(e,t=null){super(t),this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=super.getNodeType(e);if(t===null){const i=this.getAttributeName(e);if(e.hasGeometryAttribute(i)){const n=e.geometry.getAttribute(i);t=e.getTypeFromAttribute(n)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),i=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const n=e.geometry.getAttribute(t),s=e.getTypeFromAttribute(n),o=e.getAttribute(t,s);return e.shaderStage==="vertex"?e.format(o.name,s,i):ni(this).build(e,i)}else return console.warn(`AttributeNode: Attribute "${t}" not found.`),e.getConst(i)}}const xn=(r,e)=>Vt(new Xy(r,e));ft("AttributeNode",Xy);class OR extends Zt{constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t),this.outputNode.build(e)}}const Vj=OR,pS=it(OR);rt("bypass",pS),ft("BypassNode",OR);let PUe=0;class IUe{constructor(){this.id=PUe++,this.nodesData=new WeakMap}getNodeData(e){return this.nodesData.get(e)}setNodeData(e,t){this.nodesData.set(e,t)}}const fS=IUe;class PR extends Zt{constructor(e,t=new fS){super(),this.isCacheNode=!0,this.node=e,this.cache=t}getNodeType(e){return this.node.getNodeType(e)}build(e,...t){const i=e.getCache();e.setCache(this.cache);const n=this.node.build(e,...t);return e.setCache(i),n}}const Gj=PR,mS=it(PR);rt("cache",mS),ft("CacheNode",PR);class qy extends Zt{constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.context=t}getNodeType(e){return this.node.getNodeType(e)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.context});const i=this.node.build(e);return e.setContext(t),i}generate(e,t){const i=e.getContext();e.setContext({...e.context,...this.context});const n=this.node.build(e,t);return e.setContext(i),n}}const ya=it(qy),gS=(r,e)=>ya(r,{label:e});rt("context",ya),rt("label",gS),ft("ContextNode",qy);class Ya extends Zt{constructor(e){super("uint"),this.scope=e,this.isInstanceIndexNode=!0}generate(e){const t=this.getNodeType(e),i=this.scope;let n;if(i===Ya.VERTEX)n=e.getVertexIndex();else if(i===Ya.INSTANCE)n=e.getInstanceIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+i);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=n:s=ni(this).build(e,t),s}}Ya.VERTEX="vertex",Ya.INSTANCE="instance";const DUe=Ya,UUe=Tt(Ya,Ya.VERTEX),jj=Tt(Ya,Ya.INSTANCE);ft("IndexNode",Ya);class FUe{init(){}direct(){}indirectDiffuse(){}indirectSpecular(){}ambientOcclusion(){}}const IR=FUe;class BUe{constructor(e,t,i=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=i}}const vS=BUe;class zUe{constructor(e,t,i,n=void 0){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=i.getSelf(),this.needsUpdate=n}get value(){return this.node.value}set value(e){this.node.value=e}}const DR=zUe;class VUe{constructor(e,t){this.isNodeVar=!0,this.name=e,this.type=t}}const yS=VUe;class GUe extends yS{constructor(e,t){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0}}const UR=GUe;class jUe{constructor(e,t,i=""){this.name=e,this.type=t,this.code=i,Object.defineProperty(this,"isNodeCode",{value:!0})}}const FR=jUe;class HUe{constructor(){this.keywords=[],this.nodes=[],this.keywordsCallback={}}getNode(e){let t=this.nodes[e];return t===void 0&&this.keywordsCallback[e]!==void 0&&(t=this.keywordsCallback[e](e),this.nodes[e]=t),t}addKeyword(e,t){return this.keywords.push(e),this.keywordsCallback[e]=t,this}parse(e){const t=this.keywords,i=new RegExp(`\\b${t.join("\\b|\\b")}\\b`,"g"),n=e.match(i),s=[];if(n!==null)for(const o of n){const a=this.getNode(o);a!==void 0&&s.indexOf(a)===-1&&s.push(a)}return s}include(e,t){const i=this.parse(t);for(const n of i)n.build(e)}}const BR=HUe;class wn extends Zt{constructor(e,t=null){super(e),this.name=t}getHash(e){return this.name||super.getHash(e)}isGlobal(){return!0}generate(e){const t=e.getVarFromNode(this,this.getNodeType(e)),i=this.name;return i!==null&&(t.name=i),e.getPropertyName(t)}}const Oc=(r,e)=>Vt(new wn(r,e)),Yn=Tt(wn,"vec4","DiffuseColor"),Jm=Tt(wn,"float","Roughness"),Hj=Tt(wn,"float","Metalness"),zR=Tt(wn,"float","Clearcoat"),bS=Tt(wn,"float","ClearcoatRoughness"),Qm=Tt(wn,"vec3","Sheen"),VR=Tt(wn,"float","SheenRoughness"),GR=Tt(wn,"float","Iridescence"),Wj=Tt(wn,"float","IridescenceIOR"),$j=Tt(wn,"float","IridescenceThickness"),Ul=Tt(wn,"color","SpecularColor"),xS=Tt(wn,"float","Shininess"),Xj=Tt(wn,"vec4","Output"),eg=Tt(wn,"float","dashSize"),wS=Tt(wn,"float","gapSize");ft("PropertyNode",wn);class jR extends Xy{constructor(e=0){super(null,"vec2"),this.isUVNode=!0,this.index=e}getAttributeName(){const e=this.index;return"uv"+(e>0?e:"")}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}const qj=jR,Ci=(...r)=>Vt(new jR(...r));ft("UVNode",jR);class Kj extends Zt{constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const i=this.textureNode.build(e,"property"),n=this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${i}, ${n} )`,this.getNodeType(e),t)}}const Yj=it(Kj);rt("textureSize",Yj),ft("TextureSizeNode",Kj);class Ai extends Zi{constructor(e,t,i,...n){if(super(),this.op=e,n.length>0){let s=i;for(let o=0;o<n.length;o++)s=new Ai(e,s,n[o]);i=s}this.aNode=t,this.bNode=i}hasDependencies(e){return this.op!=="="?super.hasDependencies(e):!1}getNodeType(e,t){const i=this.op,n=this.aNode,s=this.bNode,o=n.getNodeType(e),a=s.getNodeType(e);if(o==="void"||a==="void")return"void";if(i==="="||i==="%")return o;if(i==="&"||i==="|"||i==="^"||i===">>"||i==="<<")return e.getIntegerType(o);if(i==="=="||i==="&&"||i==="||"||i==="^^")return"bool";if(i==="<"||i===">"||i==="<="||i===">="){const l=t?e.getTypeLength(t):Math.max(e.getTypeLength(o),e.getTypeLength(a));return l>1?`bvec${l}`:"bool"}else return o==="float"&&e.isMatrix(a)?a:e.isMatrix(o)&&e.isVector(a)?e.getVectorFromMatrix(o):e.isVector(o)&&e.isMatrix(a)?e.getVectorFromMatrix(a):e.getTypeLength(a)>e.getTypeLength(o)?a:o}generate(e,t){const i=this.op,n=this.aNode,s=this.bNode,o=this.getNodeType(e,t);let a=null,l=null;o!=="void"?(a=n.getNodeType(e),l=s.getNodeType(e),i==="="?l=a:i==="<"||i===">"||i==="<="||i===">="||i==="=="?e.isVector(a)?l=a:a=l="float":i===">>"||i==="<<"?(a=o,l=e.changeComponentType(l,"uint")):e.isMatrix(a)&&e.isVector(l)?l=e.getVectorFromMatrix(a):e.isVector(a)&&e.isMatrix(l)?a=e.getVectorFromMatrix(l):a=l=o):a=l=o;const c=n.build(e,a),u=s.build(e,l),d=e.getTypeLength(t);if(t!=="void")return i==="="?(e.addLineFlowCode(`${c} ${this.op} ${u}`),c):i==="<"&&d>1?e.format(`${e.getMethod("lessThan")}( ${c}, ${u} )`,o,t):i==="<="&&d>1?e.format(`${e.getMethod("lessThanEqual")}( ${c}, ${u} )`,o,t):i===">"&&d>1?e.format(`${e.getMethod("greaterThan")}( ${c}, ${u} )`,o,t):i===">="&&d>1?e.format(`${e.getMethod("greaterThanEqual")}( ${c}, ${u} )`,o,t):e.format(`( ${c} ${this.op} ${u} )`,o,t);if(a!=="void")return e.format(`${c} ${this.op} ${u}`,o,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const lo=it(Ai,"+"),_S=it(Ai,"-"),ms=it(Ai,"*"),tg=it(Ai,"/"),Zj=it(Ai,"%"),Jj=it(Ai,"=="),HR=it(Ai,"="),Qj=it(Ai,"<"),eH=it(Ai,">"),tH=it(Ai,"<="),rH=it(Ai,">="),iH=it(Ai,"&&"),nH=it(Ai,"||"),sH=it(Ai,"^^"),oH=it(Ai,"&"),aH=it(Ai,"|"),lH=it(Ai,"^"),cH=it(Ai,"<<"),uH=it(Ai,">>");rt("add",lo),rt("sub",_S),rt("mul",ms),rt("div",tg),rt("remainder",Zj),rt("equal",Jj),rt("assign",HR),rt("lessThan",Qj),rt("greaterThan",eH),rt("lessThanEqual",tH),rt("greaterThanEqual",rH),rt("and",iH),rt("or",nH),rt("xor",sH),rt("bitAnd",oH),rt("bitOr",aH),rt("bitXor",lH),rt("shiftLeft",cH),rt("shiftRight",uH),ft("OperatorNode",Ai);class Xe extends Zi{constructor(e,t,i=null,n=null){super(),this.method=e,this.aNode=t,this.bNode=i,this.cNode=n}getInputType(e){const t=this.aNode.getNodeType(e),i=this.bNode?this.bNode.getNodeType(e):null,n=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(t)?0:e.getTypeLength(t),o=e.isMatrix(i)?0:e.getTypeLength(i),a=e.isMatrix(n)?0:e.getTypeLength(n);return s>o&&s>a?t:o>a?i:a>s?n:t}getNodeType(e){const t=this.method;return t===Xe.LENGTH||t===Xe.DISTANCE||t===Xe.DOT?"float":t===Xe.CROSS?"vec3":this.getInputType(e)}generate(e,t){const i=this.method,n=this.getNodeType(e),s=this.getInputType(e),o=this.aNode,a=this.bNode,l=this.cNode,c=e.renderer.isWebGLRenderer===!0;if(i===Xe.TRANSFORM_DIRECTION){let u=o,d=a;e.isMatrix(u.getNodeType(e))?d=Xr(Kt(d),0):u=Xr(Kt(u),0);const h=ms(u,d).xyz;return Uo(h).build(e,t)}else{if(i===Xe.NEGATE)return e.format("( - "+o.build(e,s)+" )",n,t);if(i===Xe.ONE_MINUS)return _S(1,o).build(e,t);if(i===Xe.RECIPROCAL)return tg(1,o).build(e,t);if(i===Xe.DIFFERENCE)return Ky(_S(o,a)).build(e,t);{const u=[];return i===Xe.CROSS?u.push(o.build(e,n),a.build(e,n)):i===Xe.STEP?u.push(o.build(e,e.getTypeLength(o.getNodeType(e))===1?"float":s),a.build(e,s)):c&&(i===Xe.MIN||i===Xe.MAX)||i===Xe.MOD?u.push(o.build(e,s),a.build(e,e.getTypeLength(a.getNodeType(e))===1?"float":s)):i===Xe.REFRACT?u.push(o.build(e,s),a.build(e,s),l.build(e,"float")):i===Xe.MIX?u.push(o.build(e,s),a.build(e,s),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":s)):(u.push(o.build(e,s)),a!==null&&u.push(a.build(e,s)),l!==null&&u.push(l.build(e,s))),e.format(`${e.getMethod(i)}( ${u.join(", ")} )`,n,t)}}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Xe.RADIANS="radians",Xe.DEGREES="degrees",Xe.EXP="exp",Xe.EXP2="exp2",Xe.LOG="log",Xe.LOG2="log2",Xe.SQRT="sqrt",Xe.INVERSE_SQRT="inversesqrt",Xe.FLOOR="floor",Xe.CEIL="ceil",Xe.NORMALIZE="normalize",Xe.FRACT="fract",Xe.SIN="sin",Xe.COS="cos",Xe.TAN="tan",Xe.ASIN="asin",Xe.ACOS="acos",Xe.ATAN="atan",Xe.ABS="abs",Xe.SIGN="sign",Xe.LENGTH="length",Xe.NEGATE="negate",Xe.ONE_MINUS="oneMinus",Xe.DFDX="dFdx",Xe.DFDY="dFdy",Xe.ROUND="round",Xe.RECIPROCAL="reciprocal",Xe.TRUNC="trunc",Xe.FWIDTH="fwidth",Xe.ATAN2="atan2",Xe.MIN="min",Xe.MAX="max",Xe.MOD="mod",Xe.STEP="step",Xe.REFLECT="reflect",Xe.DISTANCE="distance",Xe.DIFFERENCE="difference",Xe.DOT="dot",Xe.CROSS="cross",Xe.POW="pow",Xe.TRANSFORM_DIRECTION="transformDirection",Xe.MIX="mix",Xe.CLAMP="clamp",Xe.REFRACT="refract",Xe.SMOOTHSTEP="smoothstep",Xe.FACEFORWARD="faceforward";const fr=Xe,WR=Bt(1e-6),WUe=Bt(1e6),dH=it(Xe,Xe.RADIANS),hH=it(Xe,Xe.DEGREES),pH=it(Xe,Xe.EXP),fH=it(Xe,Xe.EXP2),mH=it(Xe,Xe.LOG),gH=it(Xe,Xe.LOG2),vH=it(Xe,Xe.SQRT),yH=it(Xe,Xe.INVERSE_SQRT),SS=it(Xe,Xe.FLOOR),$R=it(Xe,Xe.CEIL),Uo=it(Xe,Xe.NORMALIZE),TS=it(Xe,Xe.FRACT),bH=it(Xe,Xe.SIN),xH=it(Xe,Xe.COS),wH=it(Xe,Xe.TAN),_H=it(Xe,Xe.ASIN),SH=it(Xe,Xe.ACOS),TH=it(Xe,Xe.ATAN),Ky=it(Xe,Xe.ABS),MH=it(Xe,Xe.SIGN),EH=it(Xe,Xe.LENGTH),CH=it(Xe,Xe.NEGATE),AH=it(Xe,Xe.ONE_MINUS),XR=it(Xe,Xe.DFDX),qR=it(Xe,Xe.DFDY),NH=it(Xe,Xe.ROUND),RH=it(Xe,Xe.RECIPROCAL),kH=it(Xe,Xe.TRUNC),LH=it(Xe,Xe.FWIDTH),OH=it(Xe,Xe.ATAN2),PH=it(Xe,Xe.MIN),IH=it(Xe,Xe.MAX),KR=it(Xe,Xe.MOD),DH=it(Xe,Xe.STEP),UH=it(Xe,Xe.REFLECT),FH=it(Xe,Xe.DISTANCE),BH=it(Xe,Xe.DIFFERENCE),$u=it(Xe,Xe.DOT),zH=it(Xe,Xe.CROSS),YR=it(Xe,Xe.POW),VH=it(Xe,Xe.POW,2),GH=it(Xe,Xe.POW,3),jH=it(Xe,Xe.POW,4),HH=it(Xe,Xe.TRANSFORM_DIRECTION),Ds=it(Xe,Xe.MIX),Yy=(r,e=0,t=1)=>Vt(new Xe(Xe.CLAMP,Vt(r),Vt(e),Vt(t))),WH=r=>Yy(r),$H=it(Xe,Xe.REFRACT),Xu=it(Xe,Xe.SMOOTHSTEP),XH=it(Xe,Xe.FACEFORWARD),$Ue=(r,e,t)=>Ds(e,t,r),XUe=(r,e,t)=>Xu(e,t,r);rt("radians",dH),rt("degrees",hH),rt("exp",pH),rt("exp2",fH),rt("log",mH),rt("log2",gH),rt("sqrt",vH),rt("inverseSqrt",yH),rt("floor",SS),rt("ceil",$R),rt("normalize",Uo),rt("fract",TS),rt("sin",bH),rt("cos",xH),rt("tan",wH),rt("asin",_H),rt("acos",SH),rt("atan",TH),rt("abs",Ky),rt("sign",MH),rt("length",EH),rt("negate",CH),rt("oneMinus",AH),rt("dFdx",XR),rt("dFdy",qR),rt("round",NH),rt("reciprocal",RH),rt("trunc",kH),rt("fwidth",LH),rt("atan2",OH),rt("min",PH),rt("max",IH),rt("mod",KR),rt("step",DH),rt("reflect",UH),rt("distance",FH),rt("dot",$u),rt("cross",zH),rt("pow",YR),rt("pow2",VH),rt("pow3",GH),rt("pow4",jH),rt("transformDirection",HH),rt("mix",$Ue),rt("clamp",Yy),rt("refract",$H),rt("smoothstep",XUe),rt("faceForward",XH),rt("difference",BH),rt("saturate",WH),ft("MathNode",Xe);const qUe=Ur(r=>{const{value:e}=r,{rgb:t}=e,i=t.mul(.9478672986).add(.0521327014).pow(2.4),n=t.mul(.0773993808),s=t.lessThanEqual(.04045),o=Ds(i,n,s);return Xr(o,e.a)}),KUe=Ur(r=>{const{value:e}=r,{rgb:t}=e,i=t.pow(.41666).mul(1.055).sub(.055),n=t.mul(12.92),s=t.lessThanEqual(.0031308),o=Ds(i,n,s);return Xr(o,e.a)}),qH=r=>{let e=null;return r===li?e="Linear":r===Lt&&(e="sRGB"),e},KH=(r,e)=>qH(r)+"To"+qH(e);class Us extends Zi{constructor(e,t){super("vec4"),this.method=e,this.node=t}setup(){const{method:e,node:t}=this;return e===Us.LINEAR_TO_LINEAR?t:YUe[e]({value:t})}}Us.LINEAR_TO_LINEAR="LinearToLinear",Us.LINEAR_TO_sRGB="LinearTosRGB",Us.sRGB_TO_LINEAR="sRGBToLinear";const YUe={[Us.LINEAR_TO_sRGB]:KUe,[Us.sRGB_TO_LINEAR]:qUe},Zy=Us,YH=(r,e)=>Vt(new Us(KH(li,e),Vt(r))),MS=(r,e)=>Vt(new Us(KH(e,li),Vt(r))),ZH=it(Us,Us.LINEAR_TO_sRGB),JH=it(Us,Us.sRGB_TO_LINEAR);rt("linearTosRGB",ZH),rt("sRGBToLinear",JH),rt("linearToColorSpace",YH),rt("colorSpaceToLinear",MS),ft("ColorSpaceNode",Us);class ZR extends Zt{constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const i=this.getNodeType(e),n=this.snippet;if(i==="void")e.addLineFlowCode(n);else return e.format(`( ${n} )`,i,t)}}const QH=ZR,rg=it(ZR);ft("ExpressionNode",ZR);class JR extends Fr{constructor(e,t=null,i=null,n=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=i,this.compareNode=n,this.updateMatrix=!1,this.updateType=ui.NONE,this.setUpdateMatrix(t===null)}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":"vec4"}getInputType(){return"texture"}getDefaultUV(){return Ci(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){const t=this.value;return sn(t.matrix).mul(Kt(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?ui.FRAME:ui.NONE,this}setup(e){const t=e.getNodeProperties(this);let i=this.uvNode;i===null&&e.context.getUVNode&&(i=e.context.getUVNode(this)),i||(i=this.getDefaultUV()),this.updateMatrix===!0&&(i=this.getTransformedUV(i));let n=this.levelNode;n===null&&e.context.getSamplerLevelNode&&(n=e.context.getSamplerLevelNode(this)),t.uvNode=i,t.levelNode=n?e.context.getMIPLevelAlgorithmNode(this,n):null}generate(e,t){const{uvNode:i,levelNode:n}=e.getNodeProperties(this),s=this.compareNode,o=this.value;if(!o||o.isTexture!==!0)throw new Error("TextureNode: Need a three.js texture.");const a=super.generate(e,"property");if(t==="sampler")return a+"_sampler";if(e.isReference(t))return a;{const l=this.getNodeType(e),c=e.getDataFromNode(this);let u=c.propertyName;if(u===void 0){const h=i.build(e,"vec2"),p=e.getVarFromNode(this,l);u=e.getPropertyName(p);let f=null;if(n&&n.isNode===!0){const m=n.build(e,"float");f=e.getTextureLevel(o,a,h,m)}else if(s!==null){const m=s.build(e,"float");f=e.getTextureCompare(o,a,h,m)}else f=e.getTexture(o,a,h);e.addLineFlowCode(`${u} = ${f}`),e.context.tempWrite!==!1&&(c.snippet=f,c.propertyName=u)}let d=u;return e.needsColorSpaceToLinear(this.value)&&(d=MS(rg(d,l),this.value.colorSpace).setup(e).build(e,l)),e.format(d,l,t)}}uv(e){const t=this.clone();return t.uvNode=e,Vt(t)}level(e){const t=this.clone();return t.levelNode=e,ya(t,{getMIPLevelAlgorithmNode:(i,n)=>n})}size(e){return Yj(this,e)}compare(e){const t=this.clone();return t.compareNode=Vt(e),Vt(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value]}update(){const e=this.value;e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){return new this.constructor(this.value,this.uvNode,this.levelNode,this.compareNode)}}const Jy=JR,Dn=it(JR),ZUe=r=>(r.isNode===!0?r:Dn(r)).convert("sampler");rt("texture",Dn),ft("TextureNode",JR);class ig extends Zt{constructor(e,t,i=null){super(),this.property=e,this.uniformType=t,this.object=i,this.reference=null,this.node=null,this.updateType=ui.OBJECT,this.setNodeType(t)}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setNodeType(e){let t=null;e==="texture"?t=Dn(null):t=sn(e),this.node=t}getNodeType(e){return this.node.getNodeType(e)}update(){this.node.value=this.reference[this.property]}setup(){return this.node}}const Fs=(r,e,t)=>Vt(new ig(r,e,t));ft("ReferenceNode",ig);class ES extends ig{constructor(e,t,i=null){super(e,t,i),this.material=i,this.updateType=ui.RENDER}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}setup(e){const t=this.material!==null?this.material:e.material;return this.node.value=t[this.property],super.setup(e)}}const ng=(r,e,t)=>Vt(new ES(r,e,t));ft("MaterialReferenceNode",ES);const eW=new Map;class Ot extends Zt{constructor(e){super(),this.scope=e}getCache(e,t){let i=eW.get(e);return i===void 0&&(i=ng(e,t),eW.set(e,i)),i}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e,"texture")}setup(e){const t=e.context.material,i=this.scope;let n=null;if(i===Ot.ALPHA_TEST||i===Ot.SHININESS||i===Ot.REFLECTIVITY||i===Ot.ROTATION||i===Ot.IRIDESCENCE||i===Ot.IRIDESCENCE_IOR)n=this.getFloat(i);else if(i===Ot.SPECULAR_COLOR)n=this.getColor("specular");else if(i===Ot.COLOR){const s=this.getColor("color");t.map&&t.map.isTexture===!0?n=s.mul(this.getTexture("map")):n=s}else if(i===Ot.OPACITY){const s=this.getFloat("opacity");t.alphaMap&&t.alphaMap.isTexture===!0?n=s.mul(this.getTexture("alphaMap")):n=s}else if(i===Ot.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?n=this.getTexture("specularMap").r:n=Bt(1);else if(i===Ot.ROUGHNESS){const s=this.getFloat("roughness");t.roughnessMap&&t.roughnessMap.isTexture===!0?n=s.mul(this.getTexture("roughnessMap").g):n=s}else if(i===Ot.METALNESS){const s=this.getFloat("metalness");t.metalnessMap&&t.metalnessMap.isTexture===!0?n=s.mul(this.getTexture("metalnessMap").b):n=s}else if(i===Ot.EMISSIVE){const s=this.getColor("emissive");t.emissiveMap&&t.emissiveMap.isTexture===!0?n=s.mul(this.getTexture("emissiveMap")):n=s}else if(i===Ot.CLEARCOAT){const s=this.getFloat("clearcoat");t.clearcoatMap&&t.clearcoatMap.isTexture===!0?n=s.mul(this.getTexture("clearcoatMap").r):n=s}else if(i===Ot.CLEARCOAT_ROUGHNESS){const s=this.getFloat("clearcoatRoughness");t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?n=s.mul(this.getTexture("clearcoatRoughnessMap").r):n=s}else if(i===Ot.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?n=s.mul(this.getTexture("sheenColorMap").rgb):n=s}else if(i===Ot.SHEEN_ROUGHNESS){const s=this.getFloat("sheenRoughness");t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?n=s.mul(this.getTexture("sheenRoughnessMap").a):n=s,n=n.clamp(.07,1)}else if(i===Ot.IRIDESCENCE_THICKNESS){const s=Fs(1,"float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const o=Fs(0,"float",t.iridescenceThicknessRange);n=s.sub(o).mul(this.getTexture("iridescenceThicknessMap").g).add(o)}else n=s}else{const s=this.getNodeType(e);n=ng(i,s)}return n}}Ot.ALPHA_TEST="alphaTest",Ot.COLOR="color",Ot.OPACITY="opacity",Ot.SHININESS="shininess",Ot.SPECULAR="specular",Ot.SPECULAR_STRENGTH="specularStrength",Ot.REFLECTIVITY="reflectivity",Ot.ROUGHNESS="roughness",Ot.METALNESS="metalness",Ot.CLEARCOAT="clearcoat",Ot.CLEARCOAT_ROUGHNESS="clearcoatRoughness",Ot.EMISSIVE="emissive",Ot.ROTATION="rotation",Ot.SHEEN="sheen",Ot.SHEEN_ROUGHNESS="sheenRoughness",Ot.IRIDESCENCE="iridescence",Ot.IRIDESCENCE_IOR="iridescenceIOR",Ot.IRIDESCENCE_THICKNESS="iridescenceThickness";const Za=Ot,tW=Tt(Ot,Ot.ALPHA_TEST),QR=Tt(Ot,Ot.COLOR),rW=Tt(Ot,Ot.SHININESS),iW=Tt(Ot,Ot.EMISSIVE),e3=Tt(Ot,Ot.OPACITY),nW=Tt(Ot,Ot.SPECULAR_COLOR),JUe=Tt(Ot,Ot.SPECULAR_STRENGTH),QUe=Tt(Ot,Ot.REFLECTIVITY),sW=Tt(Ot,Ot.ROUGHNESS),oW=Tt(Ot,Ot.METALNESS),eFe=Tt(Ot,Ot.CLEARCOAT),tFe=Tt(Ot,Ot.CLEARCOAT_ROUGHNESS),aW=Tt(Ot,Ot.ROTATION),lW=Tt(Ot,Ot.SHEEN),cW=Tt(Ot,Ot.SHEEN_ROUGHNESS),rFe=Tt(Ot,Ot.IRIDESCENCE),iFe=Tt(Ot,Ot.IRIDESCENCE_IOR),nFe=Tt(Ot,Ot.IRIDESCENCE_THICKNESS);ft("MaterialNode",Ot);class mr extends Zt{constructor(e=mr.VIEW_MATRIX,t=null){super(),this.scope=e,this.object3d=t,this.updateType=ui.OBJECT,this._uniformNode=new Fr(null)}getNodeType(){const e=this.scope;if(e===mr.WORLD_MATRIX||e===mr.VIEW_MATRIX)return"mat4";if(e===mr.NORMAL_MATRIX)return"mat3";if(e===mr.POSITION||e===mr.VIEW_POSITION||e===mr.DIRECTION||e===mr.SCALE)return"vec3"}update(e){const t=this.object3d,i=this._uniformNode,n=this.scope;if(n===mr.VIEW_MATRIX)i.value=t.modelViewMatrix;else if(n===mr.NORMAL_MATRIX)i.value=t.normalMatrix;else if(n===mr.WORLD_MATRIX)i.value=t.matrixWorld;else if(n===mr.POSITION)i.value=i.value||new oe,i.value.setFromMatrixPosition(t.matrixWorld);else if(n===mr.SCALE)i.value=i.value||new oe,i.value.setFromMatrixScale(t.matrixWorld);else if(n===mr.DIRECTION)i.value=i.value||new oe,t.getWorldDirection(i.value);else if(n===mr.VIEW_POSITION){const s=e.camera;i.value=i.value||new oe,i.value.setFromMatrixPosition(t.matrixWorld),i.value.applyMatrix4(s.matrixWorldInverse)}}generate(e){const t=this.scope;return t===mr.WORLD_MATRIX||t===mr.VIEW_MATRIX?this._uniformNode.nodeType="mat4":t===mr.NORMAL_MATRIX?this._uniformNode.nodeType="mat3":(t===mr.POSITION||t===mr.VIEW_POSITION||t===mr.DIRECTION||t===mr.SCALE)&&(this._uniformNode.nodeType="vec3"),this._uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}mr.VIEW_MATRIX="viewMatrix",mr.NORMAL_MATRIX="normalMatrix",mr.WORLD_MATRIX="worldMatrix",mr.POSITION="position",mr.SCALE="scale",mr.VIEW_POSITION="viewPosition",mr.DIRECTION="direction";const co=mr,sFe=it(mr,mr.DIRECTION),oFe=it(mr,mr.VIEW_MATRIX),aFe=it(mr,mr.NORMAL_MATRIX),lFe=it(mr,mr.WORLD_MATRIX),CS=it(mr,mr.POSITION),cFe=it(mr,mr.SCALE),t3=it(mr,mr.VIEW_POSITION);ft("Object3DNode",mr);class qr extends co{constructor(e=qr.POSITION){super(e)}getNodeType(e){const t=this.scope;return t===qr.PROJECTION_MATRIX?"mat4":t===qr.NEAR||t===qr.FAR?"float":super.getNodeType(e)}update(e){const t=e.camera,i=this._uniformNode,n=this.scope;n===qr.VIEW_MATRIX?i.value=t.matrixWorldInverse:n===qr.PROJECTION_MATRIX?i.value=t.projectionMatrix:n===qr.NEAR?i.value=t.near:n===qr.FAR?i.value=t.far:(this.object3d=t,super.update(e))}generate(e){const t=this.scope;return t===qr.PROJECTION_MATRIX?this._uniformNode.nodeType="mat4":(t===qr.NEAR||t===qr.FAR)&&(this._uniformNode.nodeType="float"),super.generate(e)}}qr.PROJECTION_MATRIX="projectionMatrix",qr.NEAR="near",qr.FAR="far";const r3=qr,Pc=gS(Tt(qr,qr.PROJECTION_MATRIX),"projectionMatrix"),AS=Tt(qr,qr.NEAR),NS=Tt(qr,qr.FAR),Ic=Tt(qr,qr.VIEW_MATRIX),uFe=Tt(qr,qr.NORMAL_MATRIX),dFe=Tt(qr,qr.WORLD_MATRIX),hFe=Tt(qr,qr.POSITION);ft("CameraNode",qr);class Un extends co{constructor(e=Un.VIEW_MATRIX){super(e)}update(e){this.object3d=e.object,super.update(e)}}const pFe=Tt(Un,Un.DIRECTION),dp=gS(Tt(Un,Un.VIEW_MATRIX),"modelViewMatrix"),i3=Tt(Un,Un.NORMAL_MATRIX),Qy=Tt(Un,Un.WORLD_MATRIX),fFe=Tt(Un,Un.POSITION),mFe=Tt(Un,Un.SCALE),gFe=Tt(Un,Un.VIEW_POSITION);ft("ModelNode",Un);class on extends Zt{constructor(e=on.LOCAL){super("vec3"),this.scope=e}isGlobal(){return!0}getHash(){return`normal-${this.scope}`}generate(e){const t=this.scope;let i=null;if(t===on.GEOMETRY)i=xn("normal","vec3");else if(t===on.LOCAL)i=ni(tb);else if(t===on.VIEW){const n=i3.mul(hp);i=Uo(ni(n))}else if(t===on.WORLD){const n=Fl.transformDirection(Ic);i=Uo(ni(n))}return i.build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}on.GEOMETRY="geometry",on.LOCAL="local",on.VIEW="view",on.WORLD="world";const eb=on,tb=Tt(on,on.GEOMETRY),hp=Tt(on,on.LOCAL),Fl=Tt(on,on.VIEW),sg=Tt(on,on.WORLD),Ji=Oc("vec3","TransformedNormalView"),uW=Ji.transformDirection(Ic).normalize(),pp=Oc("vec3","TransformedClearcoatNormalView");ft("NormalNode",on);class RS extends Zt{constructor(e,t=null){super(),this.node=e,this.name=t}assign(e){return e.traverse((t,i)=>{i&&t.uuid===this.uuid&&i(this.node)}),this.node=e,this}isGlobal(){return!0}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}generate(e){const t=this.node,i=this.name;if(i===null&&t.isTempNode===!0)return t.build(e);const n=e.getVectorType(this.getNodeType(e)),s=t.build(e,n),o=e.getVarFromNode(this,n);i!==null&&(o.name=i);const a=e.getPropertyName(o);return e.addLineFlowCode(`${a} = ${s}`),a}}const rb=it(RS);rt("temp",rb),ft("VarNode",RS);class Qi extends Zt{constructor(e=Qi.LOCAL){super(),this.scope=e}getHash(){return`tangent-${this.scope}`}getNodeType(){return this.scope===Qi.GEOMETRY?"vec4":"vec3"}generate(e){const t=this.scope;let i=null;if(t===Qi.GEOMETRY)i=xn("tangent","vec4");else if(t===Qi.LOCAL)i=ni(ib.xyz);else if(t===Qi.VIEW){const n=dp.mul(kS).xyz;i=Uo(ni(n))}else if(t===Qi.WORLD){const n=nb.transformDirection(Ic);i=Uo(ni(n))}return i.build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}Qi.GEOMETRY="geometry",Qi.LOCAL="local",Qi.VIEW="view",Qi.WORLD="world";const og=Qi,ib=Tt(Qi,Qi.GEOMETRY),kS=Tt(Qi,Qi.LOCAL),nb=Tt(Qi,Qi.VIEW),dW=Tt(Qi,Qi.WORLD),n3=rb(nb,"TransformedTangentView"),vFe=Uo(n3.transformDirection(Ic));ft("TangentNode",Qi);class an extends Zt{constructor(e=an.LOCAL){super("vec3"),this.scope=e}getHash(){return`bitangent-${this.scope}`}generate(e){const t=this.scope;let i;t===an.GEOMETRY?i=tb.cross(ib):t===an.LOCAL?i=hp.cross(kS):t===an.VIEW?i=Fl.cross(nb):t===an.WORLD&&(i=sg.cross(dW));const n=i.mul(ib.w).xyz;return Uo(ni(n)).build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}an.GEOMETRY="geometry",an.LOCAL="local",an.VIEW="view",an.WORLD="world";const ag=an,yFe=Tt(an,an.GEOMETRY),bFe=Tt(an,an.LOCAL),hW=Tt(an,an.VIEW),xFe=Tt(an,an.WORLD),pW=Uo(Ji.cross(n3).mul(ib.w)),wFe=Uo(pW.transformDirection(Ic));ft("BitangentNode",an);class si extends Zt{constructor(e=si.LOCAL){super("vec3"),this.scope=e}isGlobal(){return!0}getHash(){return`position-${this.scope}`}generate(e){const t=this.scope;let i=null;if(t===si.GEOMETRY)i=xn("position","vec3");else if(t===si.LOCAL)i=ni(uo);else if(t===si.WORLD){const n=Qy.mul(ho);i=ni(n)}else if(t===si.VIEW){const n=dp.mul(ho);i=ni(n)}else if(t===si.VIEW_DIRECTION){const n=Ja.negate();i=Uo(ni(n))}else if(t===si.WORLD_DIRECTION){const n=ho.transformDirection(Qy);i=Uo(ni(n))}return i.build(e,this.getNodeType(e))}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}si.GEOMETRY="geometry",si.LOCAL="local",si.WORLD="world",si.WORLD_DIRECTION="worldDirection",si.VIEW="view",si.VIEW_DIRECTION="viewDirection";const qu=si,uo=Tt(si,si.GEOMETRY),ho=Tt(si,si.LOCAL),s3=Tt(si,si.WORLD),o3=Tt(si,si.WORLD_DIRECTION),Ja=Tt(si,si.VIEW),_n=Tt(si,si.VIEW_DIRECTION);ft("PositionNode",si);class a3 extends Zt{constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){return e.getFrontFacing()}}const fW=a3,mW=Tt(a3),l3=Bt(mW).mul(2).sub(1);ft("FrontFacingNode",a3);const _Fe=Ur(r=>{const{eye_pos:e,surf_norm:t,mapN:i,uv:n}=r,s=e.dFdx(),o=e.dFdy(),a=n.dFdx(),l=n.dFdy(),c=t,u=o.cross(c),d=c.cross(s),h=u.mul(a.x).add(d.mul(l.x)),p=u.mul(a.y).add(d.mul(l.y)),f=h.dot(h).max(p.dot(p)),m=l3.mul(f.inverseSqrt());return lo(h.mul(i.x,m),p.mul(i.y,m),c.mul(i.z)).normalize()});class c3 extends Zi{constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=Ha}setup(e){const{normalMapType:t,scaleNode:i}=this;let n=this.node.mul(2).sub(1);i!==null&&(n=Kt(n.xy.mul(i),n.z));let s=null;return t===Bw?s=i3.mul(n).normalize():t===Ha&&(e.hasGeometryAttribute("tangent")===!0?s=vW.mul(n).normalize():s=_Fe({eye_pos:Ja,surf_norm:Fl,mapN:n,uv:Ci()})),s}}const gW=c3,u3=it(c3),vW=Lc(nb,hW,Fl);ft("NormalMapNode",c3);const SFe=Ur(({bumpTexture:r,bumpScale:e})=>{const t=Ci(),i=Dn(r,t).x;return $r(Dn(r,t.add(t.dFdx())).x.sub(i),Dn(r,t.add(t.dFdy())).x.sub(i)).mul(e)}),TFe=Ur(r=>{const{surf_pos:e,surf_norm:t,dHdxy:i}=r,n=e.dFdx(),s=e.dFdy(),o=t,a=s.cross(o),l=o.cross(n),c=n.dot(a).mul(l3),u=c.sign().mul(i.x.mul(a).add(i.y.mul(l)));return c.abs().mul(t).sub(u).normalize()});class d3 extends Zi{constructor(e,t=null){super("vec3"),this.texture=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=SFe({bumpTexture:this.texture,bumpScale:e});return TFe({surf_pos:Ja.negate(),surf_norm:Fl,dHdxy:t})}}const MFe=d3,yW=it(d3);ft("BumpMapNode",d3);class Fo extends Za{constructor(e){super(e)}getNodeType(e){const t=this.scope;let i=null;return(t===Fo.NORMAL||t===Fo.CLEARCOAT_NORMAL)&&(i="vec3"),i||super.getNodeType(e)}setup(e){const t=e.material,i=this.scope;let n=null;return i===Fo.NORMAL?t.normalMap?n=u3(this.getTexture("normalMap"),ng("normalScale","vec2")):t.bumpMap?n=yW(t.bumpMap,ng("bumpScale","float")):n=Fl:i===Fo.CLEARCOAT_NORMAL&&(n=t.clearcoatNormalMap?u3(this.getTexture("clearcoatNormalMap"),ng("clearcoatNormalScale","vec2")):Fl),n||super.setup(e)}}Fo.NORMAL="normal",Fo.CLEARCOAT_NORMAL="clearcoatNormal";const EFe=Fo,bW=Tt(Fo,Fo.NORMAL),CFe=Tt(Fo,Fo.CLEARCOAT_NORMAL);ft("ExtendedMaterialNode",Fo);class h3 extends Zi{constructor(e=ho){super("vec4"),this.positionNode=e}setup(){return Pc.mul(dp).mul(this.positionNode)}}const xW=h3,p3=it(h3);ft("ModelViewProjectionNode",h3);class f3 extends MR{constructor(e,t=null,i=0,n=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=i,this.bufferOffset=n,this.usage=hm,this.instanced=!1,this.attribute=null,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),i=this.value,n=e.getTypeLength(t),s=this.bufferStride||n,o=this.bufferOffset,a=i.isInterleavedBuffer===!0?i:new Fm(i,s),l=new Is(a,n,o);a.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),i=e.getBufferAttributeFromNode(this,t),n=e.getPropertyName(i);let s=null;return e.shaderStage==="vertex"?s=n:s=ni(this).build(e,t),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this}setInstanced(e){return this.instanced=e,this}}const AFe=f3,sb=(r,e,t,i)=>Vt(new f3(r,e,t,i)),wW=(r,e,t,i)=>sb(r,e,t,i).setUsage(py),_W=(r,e,t,i)=>sb(r,e,t,i).setInstanced(!0),SW=(r,e,t,i)=>wW(r,e,t,i).setInstanced(!0);rt("toAttribute",r=>sb(r.value)),ft("BufferAttributeNode",f3);class m3 extends Zt{constructor(e){super("void"),this.instanceMesh=e,this.instanceMatrixNode=null}setup(e){let t=this.instanceMatrixNode;if(t===null){const a=this.instanceMesh.instanceMatrix,l=new Wy(a.array,16,1),c=a.usage===py?SW:_W,u=[c(l,"vec4",16,0),c(l,"vec4",16,4),c(l,"vec4",16,8),c(l,"vec4",16,12)];t=kR(...u),this.instanceMatrixNode=t}const i=t.mul(ho).xyz,n=Lc(t[0].xyz,t[1].xyz,t[2].xyz),s=hp.div(Kt(n[0].dot(n[0]),n[1].dot(n[1]),n[2].dot(n[2]))),o=n.mul(s).xyz;e.stack.assign(ho,i),e.stack.assign(hp,o)}}const NFe=m3,TW=it(m3);ft("InstanceNode",m3);class g3 extends Fr{constructor(e,t,i=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=i}getInputType(){return"buffer"}}const v3=g3,y3=(r,e,t)=>Vt(new g3(r,e,t));ft("BufferNode",g3);class b3 extends Zt{constructor(e){super("void"),this.skinnedMesh=e,this.updateType=ui.OBJECT,this.skinIndexNode=xn("skinIndex","uvec4"),this.skinWeightNode=xn("skinWeight","vec4"),this.bindMatrixNode=sn(e.bindMatrix,"mat4"),this.bindMatrixInverseNode=sn(e.bindMatrixInverse,"mat4"),this.boneMatricesNode=y3(e.skeleton.boneMatrices,"mat4",e.skeleton.bones.length)}setup(e){const{skinIndexNode:t,skinWeightNode:i,bindMatrixNode:n,bindMatrixInverseNode:s,boneMatricesNode:o}=this,a=o.element(t.x),l=o.element(t.y),c=o.element(t.z),u=o.element(t.w),d=n.mul(ho),h=lo(a.mul(i.x).mul(d),l.mul(i.y).mul(d),c.mul(i.z).mul(d),u.mul(i.w).mul(d)),p=s.mul(h).xyz;let f=lo(i.x.mul(a),i.y.mul(l),i.z.mul(c),i.w.mul(u));f=s.mul(f).mul(n);const m=f.transformDirection(hp).xyz;e.stack.assign(ho,p),e.stack.assign(hp,m),e.hasGeometryAttribute("tangent")&&e.stack.assign(kS,m)}update(){this.skinnedMesh.skeleton.update()}}const MW=b3,EW=it(b3);ft("SkinningNode",b3);class x3 extends Zt{constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=sn(1),this.updateType=ui.OBJECT}setupAttribute(e,t,i=ho){const n=this.mesh,s=n.geometry.morphAttributes[t];e.stack.assign(i,i.mul(this.morphBaseInfluence));for(let o=0;o<s.length;o++){const a=s[o],l=sb(a.array,"vec3"),c=Fs(o,"float",n.morphTargetInfluences);e.stack.assign(i,i.add(l.mul(c)))}}setup(e){this.setupAttribute(e,"position")}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,i)=>t+i,0)}}const RFe=x3,CW=it(x3);ft("MorphNode",x3);class w3 extends Zt{constructor(){super("vec3")}getHash(){return"reflectVector"}setup(){return _n.negate().reflect(Ji).transformDirection(Ic)}}const AW=w3,NW=Tt(w3);ft("ReflectVectorNode",w3);class _3 extends Jy{constructor(e,t=null,i=null){super(e,t,i),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){return NW}setUpdateMatrix(){}generate(e,t){const{uvNode:i,levelNode:n}=e.getNodeProperties(this),s=this.value;if(!s||s.isCubeTexture!==!0)throw new Error("CubeTextureNode: Need a three.js cube texture.");const o=Fr.prototype.generate.call(this,e,"cubeTexture");if(t==="sampler")return o+"_sampler";if(e.isReference(t))return o;{const a=this.getNodeType(e),l=e.getDataFromNode(this);let c=l.propertyName;if(c===void 0){const d=Kt(i.x.negate(),i.yz).build(e,"vec3"),h=e.getVarFromNode(this,"vec4");c=e.getPropertyName(h);let p=null;if(n&&n.isNode===!0){const f=n.build(e,"float");p=e.getTextureLevel(this,o,d,f)}else p=e.getTexture(this,o,d);e.addLineFlowCode(`${c} = ${p}`),e.context.tempWrite!==!1&&(l.snippet=p,l.propertyName=c)}let u=c;return e.needsColorSpaceToLinear(this.value)&&(u=MS(rg(u,a),this.value.colorSpace).setup(e).build(e,a)),e.format(u,"vec4",t)}}}const RW=_3,lg=it(_3);rt("cubeTexture",lg),ft("CubeTextureNode",_3);class kW extends Zt{constructor(){super("vec3")}generate(){console.warn("Abstract function.")}}const ob=kW;ft("LightingNode",kW);let S3=null;class LW extends ob{constructor(e=null){super(),this.updateType=ui.FRAME,this.light=e,this.rtt=null,this.shadowNode=null,this.color=new at,this.colorNode=sn(this.color)}getHash(){return this.light.uuid}setupShadow(e){let t=this.shadowNode;if(t===null){S3===null&&(S3=e.createNodeMaterial("MeshBasicNodeMaterial"));const i=this.light.shadow,n=e.getRenderTarget(i.mapSize.width,i.mapSize.height),s=new Hh;s.minFilter=Mr,s.magFilter=Mr,s.image.width=i.mapSize.width,s.image.height=i.mapSize.height,s.compareFunction=dm,n.depthTexture=s,i.camera.updateProjectionMatrix();const o=Fs("bias","float",i),a=Fs("normalBias","float",i);let l=sn(i.matrix).mul(s3.add(sg.mul(a)));l=l.xyz.div(l.w);const c=l.x.greaterThanEqual(0).and(l.x.lessThanEqual(1)).and(l.y.greaterThanEqual(0)).and(l.y.lessThanEqual(1)).and(l.z.lessThanEqual(1));l=Kt(l.x,l.y.oneMinus(),l.z.add(o).mul(2).sub(1)),t=((u,d,h)=>Dn(u,d).compare(h))(s,l.xy,l.z),this.rtt=n,this.colorNode=this.colorNode.mul(c.mix(1,t)),this.shadowNode=t,this.updateBeforeType=ui.RENDER}}setup(e){this.light.castShadow&&this.setupShadow(e)}updateShadow(e){const{rtt:t,light:i}=this,{renderer:n,scene:s}=e;s.overrideMaterial=S3,t.setSize(i.shadow.mapSize.width,i.shadow.mapSize.height),i.shadow.updateMatrices(i),n.setRenderTarget(t),n.render(s,i.shadow.camera),n.setRenderTarget(null),s.overrideMaterial=null}updateBefore(e){const{light:t}=this;t.castShadow&&this.updateShadow(e)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const Ku=LW;ft("AnalyticLightNode",LW);const LS=new WeakMap,kFe=r=>r.sort((e,t)=>e.id-t.id);class T3 extends Zt{constructor(e=[]){super("vec3"),this.lightNodes=e,this._hash=null}get hasLight(){return this.lightNodes.length>0}setup(e){const t=this.lightNodes;for(const i of t)i.build(e)}getHash(e){if(this._hash===null){let t="";const i=this.lightNodes;for(const n of i)t+=n.getHash(e)+" ";this._hash=t}return this._hash}getLightNodeByHash(e){const t=this.lightNodes;for(const i of t)if(i.light.uuid===e)return i;return null}fromLights(e=[]){const t=[];e=kFe(e);for(const i of e){let n=this.getLightNodeByHash(i.uuid);if(n===null){const s=i.constructor,o=LS.has(s)?LS.get(s):Ku;n=Vt(new o(i))}t.push(n)}return this.lightNodes=t,this._hash=null,this}}const M3=T3,LFe=r=>Vt(new T3().fromLights(r)),OW=it(T3);function fp(r,e){if(LS.has(r))throw new Error(`Redefinition of light node ${e.type}`);if(typeof r!="function")throw new Error(`Light ${r.name} is not a class`);if(typeof e!="function"||!e.type)throw new Error(`Light node ${e.type} is not a class`);LS.set(r,e)}class PW extends ob{constructor(e=null){super(),this.aoNode=e}setup(e){const t=this.aoNode.x.sub(1).mul(1).add(1);e.context.ambientOcclusion.mulAssign(t)}}const E3=PW;ft("AONode",PW);class C3 extends qy{constructor(e,t=null,i=null,n=null){super(e),this.lightingModel=t,this.backdropNode=i,this.backdropAlphaNode=n}getNodeType(){return"vec3"}setup(e){const{lightingModel:t,backdropNode:i,backdropAlphaNode:n}=this,s=this.context={},o=e.getNodeProperties(this),a=Kt().temp(),l=Kt().temp(),c=Kt().temp(),u=Kt().temp();let d=lo(a,c);i!==null&&(d=Kt(n!==null?Ds(d,i,n):i));const h=lo(l,u),p=lo(d,h).temp(),f={directDiffuse:a,directSpecular:l,indirectDiffuse:c,indirectSpecular:u,total:p},m={radiance:Kt().temp(),irradiance:Kt().temp(),iblIrradiance:Kt().temp(),ambientOcclusion:Bt(1).temp()};return s.reflectedLight=f,s.lightingModel=t||s.lightingModel,Object.assign(o,f,m),Object.assign(s,m),t&&(t.init(s,e.stack,e),t.indirectDiffuse(s,e.stack,e),t.indirectSpecular(s,e.stack,e),t.ambientOcclusion(s,e.stack,e)),super.setup(e)}generate(e){const{context:t}=this,i=this.getNodeType(e);return super.generate(e,i),t.reflectedLight.total.build(e,i)}}const OFe=C3,A3=it(C3);rt("lightingContext",A3),ft("LightingContextNode",C3);class N3 extends Zi{constructor(e=o3){super("vec2"),this.dirNode=e}setup(){const e=this.dirNode,t=e.z.atan2(e.x).mul(1/(Math.PI*2)).add(.5),i=e.y.negate().clamp(-1,1).asin().mul(1/Math.PI).add(.5);return $r(t,i)}}const IW=N3,ab=it(N3);ft("EquirectUVNode",N3);class R3 extends Fr{constructor(e){super(0),this.textureNode=e,this.updateType=ui.FRAME}get texture(){return this.textureNode.value}update(){const e=this.texture,t=e.images,i=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(i&&i.width!==void 0){const{width:n,height:s}=i;this.value=Math.log2(Math.max(n,s))}}}const DW=R3,k3=it(R3);ft("MaxMipLevelNode",R3);class L3 extends Zt{constructor(e,t=null){super("float"),this.textureNode=e,this.roughnessNode=t}setup(){const{textureNode:e,roughnessNode:t}=this,i=k3(e),n=t.mul(t).mul(Math.PI).div(t.add(1));return i.add(n.log2()).clamp(0,i)}}const UW=L3,O3=it(L3);ft("SpecularMIPLevelNode",L3);const FW=new WeakMap;class BW extends ob{constructor(e=null){super(),this.envNode=e}setup(e){let t=this.envNode;const i=e.getNodeProperties(this);if(t.isTextureNode&&t.value.isCubeTexture!==!0){let c=FW.get(t.value);if(c===void 0){const u=t.value,d=e.renderer,h=e.getCubeRenderTarget(512).fromEquirectangularTexture(d,u);c=lg(h.texture),FW.set(t.value,c)}t=c}const n=Fs("envMapIntensity","float",e.material),s=ya(t,zW(Jm,Ji)).mul(n),o=ya(t,PFe(uW)).mul(Math.PI).mul(n),a=mS(s);e.context.radiance.addAssign(a),e.context.iblIrradiance.addAssign(o);const l=e.context.lightingModel.clearcoatRadiance;if(l){const c=ya(t,zW(bS,pp)).mul(n),u=mS(c);l.addAssign(u)}i.radiance=a,i.irradiance=o}}const zW=(r,e)=>{let t=null,i=null;return{getUVNode:n=>{let s=null;return t===null&&(t=_n.negate().reflect(e),t=r.mul(r).mix(t,e).normalize(),t=t.transformDirection(Ic)),n.isCubeTextureNode?s=t:n.isTextureNode&&(i===null&&(i=ab(t)),s=i),s},getSamplerLevelNode:()=>r,getMIPLevelAlgorithmNode:(n,s)=>O3(n,s)}},PFe=r=>{let e=null;return{getUVNode:t=>{let i=null;return t.isCubeTextureNode?i=r:t.isTextureNode&&(e===null&&(e=ab(r),e=$r(e.x,e.y.oneMinus())),i=e),i},getSamplerLevelNode:()=>Bt(1),getMIPLevelAlgorithmNode:(t,i)=>O3(t,i)}},P3=BW;ft("EnvironmentNode",BW);const I3=new Map;class OS extends ii{constructor(){super(),this.isNodeMaterial=!0,this.type=this.constructor.type,this.forceSinglePass=!1,this.unlit=this.constructor===OS.prototype.constructor,this.fog=!0,this.lights=!0,this.normals=!0,this.colorSpace=!0,this.lightsNode=null,this.envNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.positionNode=null,this.outputNode=null,this.vertexNode=null}customProgramCacheKey(){return this.type+nS(this)}build(e){this.setup(e)}setup(e){e.addStack(),e.stack.outputNode=this.setupPosition(e),e.addFlow("vertex",e.removeStack()),e.addStack();let t;if(this.unlit===!1){this.normals===!0&&this.setupNormal(e),this.setupDiffuseColor(e),this.setupVariants(e);const i=this.setupLighting(e);t=this.setupOutput(e,Xr(i,Yn.a)),e.stack.assign(Xj,t),this.outputNode!==null&&(t=this.outputNode)}else t=this.setupOutput(e,this.outputNode||Xr(0,0,0,1));e.stack.outputNode=t,e.addFlow("fragment",e.removeStack())}setupPosition(e){const t=e.object,i=t.geometry;return e.addStack(),(i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color)&&e.stack.add(CW(t)),t.isSkinnedMesh===!0&&e.stack.add(EW(t)),t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&e.isAvailable("instance")===!0&&e.stack.add(TW(t)),this.positionNode!==null&&e.stack.assign(ho,this.positionNode),e.context.vertex=e.removeStack(),this.vertexNode||p3()}setupDiffuseColor({stack:e,geometry:t}){let i=this.colorNode?Xr(this.colorNode):QR;this.vertexColors===!0&&t.hasAttribute("color")&&(i=Xr(i.xyz.mul(xn("color")),i.a)),e.assign(Yn,i);const n=this.opacityNode?Bt(this.opacityNode):e3;if(e.assign(Yn.a,Yn.a.mul(n)),this.alphaTestNode!==null||this.alphaTest>0){const s=this.alphaTestNode!==null?Bt(this.alphaTestNode):tW;e.add(Yn.a.lessThanEqual(s).discard())}}setupVariants(){}setupNormal({stack:e}){if(this.flatShading===!0){const t=XR(Ja),i=qR(Ja),n=t.cross(i).normalize();e.assign(Ji,n)}else{const t=this.normalNode?Kt(this.normalNode):bW;e.assign(Ji,t)}}getEnvNode(e){let t=null;return this.envNode?t=this.envNode:this.envMap?t=this.envMap.isCubeTexture?lg(this.envMap):Dn(this.envMap):e.environmentNode&&(t=e.environmentNode),t}setupLights(e){const t=this.getEnvNode(e),i=[];t&&i.push(new P3(t)),e.material.aoMap&&i.push(new E3(Dn(e.material.aoMap)));let n=this.lightsNode||e.lightsNode;return i.length>0&&(n=OW([...n.lightNodes,...i])),n}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:i,backdropAlphaNode:n,emissiveNode:s}=this,o=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let a=Yn.rgb;if(o&&o.hasLight!==!1){const l=this.setupLightingModel(e);a=A3(o,l,i,n)}else i!==null&&(a=Kt(n!==null?Ds(a,i,n):i));return(s&&s.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(a=a.add(Kt(s||iW))),a}setupOutput(e,t){const i=e.renderer,n=e.toneMappingNode;if(n&&(t=Xr(n.context({color:t.rgb}),t.a)),this.fog===!0){const s=e.fogNode;s&&(t=Xr(s.mixAssign(t.rgb),t.a))}if(this.colorSpace===!0){const s=i.getRenderTarget();let o;s!==null?Array.isArray(s.texture)?o=s.texture[0].colorSpace:o=s.texture.colorSpace:o=i.outputColorSpace,o!==li&&o!==kn&&(t=t.linearToColorSpace(o))}return t}setDefaultValues(e){for(const i in e){const n=e[i];this[i]===void 0&&(this[i]=n,n&&n.clone&&(this[i]=n.clone()))}Object.assign(this.defines,e.defines);const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const i in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,i)===void 0&&t[i].get!==void 0&&Object.defineProperty(this.constructor.prototype,i,t[i])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const i=Wr.prototype.toJSON.call(this,e),n=$y(this);i.inputNodes={};for(const{property:o,childNode:a}of n)i.inputNodes[o]=a.toJSON(e).uuid;function s(o){const a=[];for(const l in o){const c=o[l];delete c.metadata,a.push(c)}return a}if(t){const o=s(e.textures),a=s(e.images),l=s(e.nodes);o.length>0&&(i.textures=o),a.length>0&&(i.images=a),l.length>0&&(i.nodes=l)}return i}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.positionNode=e.positionNode,this.outputNode=e.outputNode,this.vertexNode=e.vertexNode,super.copy(e)}static fromMaterial(e){if(e.isNodeMaterial===!0)return e;const t=e.type.replace("Material","NodeMaterial"),i=cg(t);if(i===void 0)throw new Error(`NodeMaterial: Material "${e.type}" is not compatible.`);for(const n in e)i[n]=e[n];return i}}const Zn=OS;function po(r,e){if(typeof e!="function"||!r)throw new Error(`Node material ${r} is not a class`);if(I3.has(r))throw new Error(`Redefinition of node material ${r}`);I3.set(r,e),e.type=r}function cg(r){const e=I3.get(r);if(e!==void 0)return new e}po("NodeMaterial",OS);const IFe=Object.freeze(Object.defineProperty({__proto__:null,addNodeMaterial:po,createNodeMaterialFromType:cg,default:Zn},Symbol.toStringTag,{value:"Module"}));class mp{constructor(e,t=null){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class DFe extends mp{constructor(e,t=0){super(e,t),this.isFloatUniform=!0,this.boundary=4,this.itemSize=1}}class UFe extends mp{constructor(e,t=new qe){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class FFe extends mp{constructor(e,t=new oe){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class BFe extends mp{constructor(e,t=new jt){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class zFe extends mp{constructor(e,t=new at){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class VFe extends mp{constructor(e,t=new hr){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class GFe extends mp{constructor(e,t=new St){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class jFe extends DFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class HFe extends UFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class WFe extends FFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class $Fe extends BFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class XFe extends zFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class qFe extends VFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class KFe extends GFe{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}}class D3 extends Zt{constructor(e,t,i=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=i}getNodeType(e){const t=this.ifNode.getNodeType(e);if(this.elseNode!==null){const i=this.elseNode.getNodeType(e);if(e.getTypeLength(i)>e.getTypeLength(t))return i}return t}generate(e){const t=this.getNodeType(e),i={tempWrite:!1},{ifNode:n,elseNode:s}=this,o=n.getNodeType(e)!=="void"||s&&s.getNodeType(e)!=="void",a=o?Oc(t).build(e):"",l=ya(this.condNode).build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${l} ) {

`).addFlowTab();let c=ya(this.ifNode,i).build(e,t);if(c=o?a+" = "+c+";":c,e.removeFlowTab().addFlowCode(e.tab+"	"+c+`

`+e.tab+"}"),s!==null){e.addFlowCode(` else {

`).addFlowTab();let u=ya(s,i).build(e,t);u=a?a+" = "+u+";":u,e.removeFlowTab().addFlowCode(e.tab+"	"+u+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return a}}const U3=D3,gp=it(D3);rt("cond",gp),ft("CondNode",D3);class F3 extends Zt{constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode("i".charCodeAt()+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const i={};for(let n=0,s=this.params.length-1;n<s;n++){const o=this.getVarName(n);i[o]=rg(o,"int")}return t.returnsNode=this.params[this.params.length-1](i,e.addStack(),e),t.stackNode=e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),i={tempWrite:!1},n=this.params,s=t.stackNode;for(let l=0,c=n.length-1;l<c;l++){const u=n[l],d=this.getVarName(l);let h=null,p=null,f=null;u.isNode?(h="0",p=u.build(e,"int"),f="forward"):(h=u.start,p=u.end,f=u.direction,typeof h=="number"?h=h.toString():h&&h.isNode&&(h=h.build(e,"int")),typeof p=="number"?p=p.toString():p&&p.isNode&&(p=p.build(e,"int")),h!==void 0&&p===void 0?(h=h+" - 1",p="0",f="backwards"):p!==void 0&&h===void 0&&(h="0",f="forward"),f===void 0&&(Number(h)>Number(p)?f="backwards":f="forward"));const m={start:h,end:p,direction:f},g=m.start,v=m.end;let x="",b="",w="";x+=e.getVar("int",d)+" = "+g,m.direction==="backwards"?(b+=d+" >= "+v,w+=d+" --"):(b+=d+" < "+v,w+=d+" ++");const _=`for ( ${x}; ${b}; ${w} )`;e.addFlowCode((l===0?`
`:"")+e.tab+_+` {

`).addFlowTab()}const o=ya(s,i).build(e,"void"),a=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+o);for(let l=0,c=this.params.length-1;l<c;l++)e.addFlowCode((l===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),a}}const YFe=F3,B3=(...r)=>Vt(new F3(up(r,"int")));rt("loop",(r,...e)=>pS(r,B3(...e))),ft("LoopNode",F3);class z3 extends Zt{constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}add(e){return this.nodes.push(pS(rg(),e)),this}if(e,t){const i=new kc(t);return this._currentCond=gp(e,i),this.add(this._currentCond)}elseif(e,t){const i=new kc(t),n=gp(e,i);return this._currentCond.elseNode=n,this._currentCond=n,this}else(e){return this._currentCond.elseNode=new kc(e),this}assign(e,t){return this.add(HR(e,t))}loop(...e){return this.add(B3(...e))}build(e,...t){for(const i of this.nodes)i.build(e,"void");return this.outputNode?this.outputNode.build(e,...t):super.build(e,...t)}}const ZFe=z3,V3=it(z3);ft("StackNode",z3);class JFe extends bN{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const i=t.minFilter,n=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s=new vi(5,5,5),o=ab(o3),a=cg("MeshBasicNodeMaterial");a.colorNode=Dn(t,o,0),a.side=Oi,a.blending=Xn;const l=new mt(s,a),c=new qa;return c.add(l),t.minFilter===qn&&(t.minFilter=Or),new u_(1,10,this).update(e,c),t.minFilter=i,t.currentGenerateMipmaps=n,l.geometry.dispose(),l.material.dispose(),this}}const QFe=JFe,eBe=new Map([[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),tBe=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),rBe=new Set([Int32Array,Uint32Array,Float32Array]),PS=r=>(r=Number(r),r+(r%1?"":".0"));class iBe{constructor(e,t,i,n=null,s=null){this.object=e,this.material=s||e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=i,this.scene=n,this.nodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.hashNodes={},this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.toneMappingNode=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:[]},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.codes={vertex:[],fragment:[],compute:[]},this.bindings={vertex:[],fragment:[],compute:[]},this.bindingsOffset={vertex:0,fragment:0,compute:0},this.bindingsArray=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.vars={vertex:[],fragment:[],compute:[]},this.flow={code:""},this.chaining=[],this.stack=V3(),this.tab="	",this.context={keywords:new BR,material:this.material,getMIPLevelAlgorithmNode:(o,a)=>a.mul(k3(o))},this.cache=new fS,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null}getRenderTarget(e,t,i){return new nN(e,t,i)}getCubeRenderTarget(e,t){return new QFe(e,t)}includes(e){return this.nodes.includes(e)}getBindings(){let e=this.bindingsArray;if(e===null){const t=this.bindings;this.bindingsArray=e=this.material!==null?[...t.vertex,...t.fragment]:t.compute}return e}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}buildUpdateNodes(){for(const e of this.nodes){const t=e.getUpdateType(),i=e.getUpdateBeforeType();t!==ui.NONE&&this.updateNodes.push(e.getSelf()),i!==ui.NONE&&this.updateBeforeNodes.push(e)}}get currentNode(){return this.chaining[this.chaining.length-1]}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}setCache(e){this.cache=e}getCache(){return this.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}getTexture(){console.warn("Abstract function.")}getTextureLevel(){console.warn("Abstract function.")}getConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new at:e==="vec2"?t=new qe:e==="vec3"?t=new oe:e==="vec4"&&(t=new jt)),e==="float")return PS(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${PS(t.r)}, ${PS(t.g)}, ${PS(t.b)} )`;const i=this.getTypeLength(e),n=this.getComponentType(e),s=o=>this.getConst(n,o);if(i===2)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)} )`;if(i===3)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)} )`;if(i===4)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)}, ${s(t.w)} )`;if(i>4&&t&&(t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(s).join(", ")} )`;if(i>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}generateMethod(e){return e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const i=this.attributes;for(const s of i)if(s.name===e)return s;const n=new vS(e,t);return i.push(n),n}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="texture"||e==="cubeTexture"}needsColorSpaceToLinear(){return!1}getTextureEncodingFromMap(e){return console.warn("THREE.NodeBuilder: Method .getTextureEncodingFromMap replaced by .getTextureColorSpaceFromMap in r152+."),this.getTextureColorSpaceFromMap(e)===Lt?Ol:ey}getTextureColorSpaceFromMap(e){let t;return e&&e.isTexture?t=e.colorSpace:e&&e.isWebGLRenderTarget?t=e.texture.colorSpace:t=kn,t}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;const i=eBe.get(e);return(t==="float"?"":t[0])+i}getTypeFromArray(e){return tBe.get(e.constructor)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const i=t.array,n=rBe.has(i.constructor)?e.itemSize:t.stride||e.itemSize,s=e.normalized;let o;return!(e instanceof gN)&&s!==!0&&(o=this.getTypeFromArray(i)),this.getTypeFromLength(n,o)}getTypeLength(e){const t=this.getVectorType(e),i=/vec([2-4])/.exec(t);return i!==null?Number(i[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=V3(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,e}getDataFromNode(e,t=this.shaderStage){const i=e.isGlobal(this)?this.globalCache:this.cache;let n=i.getNodeData(e);return n===void 0&&(n={},i.setNodeData(e,n)),n[t]===void 0&&(n[t]={}),n[t]}getNodeProperties(e,t="any"){const i=this.getDataFromNode(e,t);return i.properties||(i.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const i=this.getDataFromNode(e);let n=i.bufferAttribute;if(n===void 0){const s=this.uniforms.index++;n=new vS("nodeAttribute"+s,t,e),this.bufferAttributes.push(n),i.bufferAttribute=n}return n}getStructTypeFromNode(e,t=this.shaderStage,i=null){const n=this.getDataFromNode(e,t);if(n.structType===void 0){const s=this.structs.index++;e.name=`StructType${s}`,this.structs[t].push(e),n.structType=e}return e}getUniformFromNode(e,t,i=this.shaderStage,n=null){const s=this.getDataFromNode(e,i);let o=s.uniform;if(o===void 0){const a=this.uniforms.index++;o=new DR(n||"nodeUniform"+a,t,e),this.uniforms[i].push(o),s.uniform=o}return o}getVarFromNode(e,t,i=this.shaderStage){const n=this.getDataFromNode(e,i);let s=n.variable;if(s===void 0){const o=this.vars[i],a=o.length;s=new yS("nodeVar"+a,t),o.push(s),n.variable=s}return s}getVaryingFromNode(e,t){const i=this.getDataFromNode(e,"any");let n=i.varying;if(n===void 0){const s=this.varyings,o=s.length;n=new UR("nodeVarying"+o,t),s.push(n),i.varying=n}return n}getCodeFromNode(e,t,i=this.shaderStage){const n=this.getDataFromNode(e);let s=n.code;if(s===void 0){const o=this.codes[i],a=o.length;s=new FR("nodeCode"+a,t),o.push(s),n.code=s}return s}addLineFlowCode(e){return e===""?this:(e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),i=this.flowChildNode(e,t);return this.flowsData.set(e,i),i}flowChildNode(e,t=null){const i=this.flow,n={code:""};return this.flow=n,n.result=e.build(this,t),this.flow=i,n}flowNodeFromShaderStage(e,t,i=null,n=null){const s=this.shaderStage;this.setShaderStage(e);const o=this.flowChildNode(t,i);return n!==null&&(o.code+=`${this.tab+n} = ${o.result};
`),this.flowCode[e]=this.flowCode[e]+o.code,this.setShaderStage(s),o}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,t){return`${this.getType(e)} ${t}`}getVars(e){let t="";const i=this.vars[e];for(const n of i)t+=`${this.getVar(n.type,n.name)}; `;return t}getUniforms(){console.warn("Abstract function.")}getCodes(e){const t=this.codes[e];let i="";for(const n of t)i+=n.code+`
`;return i}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}build(){for(const e of ej){this.setBuildStage(e),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const t of tj){this.setShaderStage(t);const i=this.flowNodes[t];for(const n of i)e==="generate"?this.flowNode(n):n.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if(t==="float")return new jFe(e);if(t==="vec2")return new HFe(e);if(t==="vec3")return new WFe(e);if(t==="vec4")return new $Fe(e);if(t==="color")return new XFe(e);if(t==="mat3")return new qFe(e);if(t==="mat4")return new KFe(e);throw new Error(`Uniform "${t}" not declared.`)}createNodeMaterial(e){return cg(e)}format(e,t,i){if(t=this.getVectorType(t),i=this.getVectorType(i),t===i||i===null||this.isReference(i))return e;const n=this.getTypeLength(t),s=this.getTypeLength(i);return n>4||s>4||s===0?e:n===s?`${this.getType(i)}( ${e} )`:n>s?this.format(`${e}.${"xyz".slice(0,s)}`,this.getTypeFromLength(s,this.getComponentType(t)),i):s===4?`${this.getType(i)}( ${this.format(e,t,"vec3")}, 1.0 )`:n===2?`${this.getType(i)}( ${this.format(e,t,"vec2")}, 0.0 )`:`${this.getType(i)}( ${e} )`}getSignature(){return`// Three.js r${Xf} - NodeMaterial System
`}}const IS=iBe;class nBe{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.startTime=null,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let i=e.get(t);return i===void 0&&(i={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,i)),i}updateBeforeNode(e){const t=e.getUpdateBeforeType(),i=e.updateReference(this),{frameMap:n,renderMap:s}=this._getMaps(this.updateBeforeMap,i);t===ui.FRAME?n.get(e)!==this.frameId&&(n.set(e,this.frameId),e.updateBefore(this)):t===ui.RENDER?(s.get(e)!==this.renderId||n.get(e)!==this.frameId)&&(s.set(e,this.renderId),n.set(e,this.frameId),e.updateBefore(this)):t===ui.OBJECT&&e.updateBefore(this)}updateNode(e){const t=e.getUpdateType(),i=e.updateReference(this),{frameMap:n,renderMap:s}=this._getMaps(this.updateMap,i);t===ui.FRAME?n.get(e)!==this.frameId&&(n.set(e,this.frameId),e.update(this)):t===ui.RENDER?(s.get(e)!==this.renderId||n.get(e)!==this.frameId)&&(s.set(e,this.renderId),n.set(e,this.frameId),e.update(this)):t===ui.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}const lb=nBe;class VW{constructor(e,t,i=null,n="",s=!1){this.type=e,this.name=t,this.count=i,this.qualifier=n,this.isConst=s}}VW.isNodeFunctionInput=!0;const DS=VW;class GW extends Zt{constructor(e){super(),this.types=e,this.isStructTypeNode=!0}getMemberTypes(){return this.types}}const sBe=GW;ft("StructTypeNode",GW);class G3 extends Zt{constructor(...e){super(),this.isOutputStructNode=!0,this.members=e}setup(e){super.setup(e);const t=this.members,i=[];for(let n=0;n<t.length;n++)i.push(t[n].getNodeType(e));this.nodeType=e.getStructTypeFromNode(new sBe(i)).name}generate(e,t){const i=e.getVarFromNode(this,this.nodeType);i.isOutputStructVar=!0;const n=e.getPropertyName(i),s=this.members,o=n!==""?n+".":"";for(let a=0;a<s.length;a++){const l=s[a].build(e,t);e.addLineFlowCode(`${o}m${a} = ${l}`)}return n}}const oBe=G3,aBe=it(G3);ft("OutputStructNode",G3);class j3 extends Zt{constructor(e){super(),this.seedNode=e}setup(){const e=this.seedNode.uint().mul(747796405).add(2891336453),t=e.shiftRight(e.shiftRight(28).add(4)).bitXor(e).mul(277803737);return t.shiftRight(22).bitXor(t).float().mul(1/2**32)}}const lBe=j3,jW=it(j3);rt("hash",jW),ft("HashNode",j3);let H3;class W3 extends U3{constructor(e){H3=H3||rg("discard"),super(e,H3)}}const cBe=W3,HW=it(W3);rt("discard",HW),ft("DiscardNode",W3);class $3 extends Zi{constructor(){super("vec2")}setup(){const e=Kt(_n.z,0,_n.x.negate()).normalize(),t=_n.cross(e);return $r(e.dot(Ji),t.dot(Ji)).mul(.495).add(.5)}}const WW=$3,uBe=Tt($3);ft("MatcapUVNode",$3);class ln extends Fr{constructor(e=ln.LOCAL,t=1,i=0){super(i),this.scope=e,this.scale=t,this.updateType=ui.FRAME}update(e){const t=this.scope,i=this.scale;t===ln.LOCAL?this.value+=e.deltaTime*i:t===ln.DELTA?this.value=e.deltaTime*i:t===ln.FRAME?this.value=e.frameId:this.value=e.time*i}serialize(e){super.serialize(e),e.scope=this.scope,e.scale=this.scale}deserialize(e){super.deserialize(e),this.scope=e.scope,this.scale=e.scale}}ln.LOCAL="local",ln.GLOBAL="global",ln.DELTA="delta",ln.FRAME="frame";const X3=(r,e=0)=>Vt(new ln(ln.LOCAL,r,e)),dBe=(r,e=0)=>Vt(new ln(ln.GLOBAL,r,e)),hBe=(r,e=0)=>Vt(new ln(ln.DELTA,r,e)),pBe=Tt(ln,ln.FRAME).uint();ft("TimerNode",ln);class cn extends Zt{constructor(e=cn.SINE,t=X3()){super(),this.method=e,this.timeNode=t}getNodeType(e){return this.timeNode.getNodeType(e)}setup(){const e=this.method,t=Vt(this.timeNode);let i=null;return e===cn.SINE?i=t.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5):e===cn.SQUARE?i=t.fract().round():e===cn.TRIANGLE?i=t.add(.5).fract().mul(2).sub(1).abs():e===cn.SAWTOOTH&&(i=t.fract()),i}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}cn.SINE="sine",cn.SQUARE="square",cn.TRIANGLE="triangle",cn.SAWTOOTH="sawtooth";const ug=cn,fBe=it(cn,cn.SINE),mBe=it(cn,cn.SQUARE),gBe=it(cn,cn.TRIANGLE),vBe=it(cn,cn.SAWTOOTH);ft("OscNode",cn);class Qa extends Zi{constructor(e,t){super(),this.scope=e,this.node=t}getNodeType(e){return this.node.getNodeType(e)}setup(){const{scope:e,node:t}=this;let i=null;return e===Qa.DIRECTION_TO_COLOR?i=t.mul(.5).add(.5):e===Qa.COLOR_TO_DIRECTION&&(i=t.mul(2).sub(1)),i}}Qa.DIRECTION_TO_COLOR="directionToColor",Qa.COLOR_TO_DIRECTION="colorToDirection";const yBe=Qa,q3=it(Qa,Qa.DIRECTION_TO_COLOR),$W=it(Qa,Qa.COLOR_TO_DIRECTION);rt("directionToColor",q3),rt("colorToDirection",$W),ft("PackingNode",Qa);class US extends Zt{constructor(e,t,i,n,s){super(),this.node=e,this.inLowNode=t,this.inHighNode=i,this.outLowNode=n,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:i,outLowNode:n,outHighNode:s,doClamp:o}=this;let a=e.sub(t).div(i.sub(t));return o===!0&&(a=a.clamp()),a.mul(s.sub(n)).add(n)}}const XW=US,qW=it(US,null,null,{doClamp:!1}),KW=it(US);rt("remap",qW),rt("remapClamp",KW),ft("RemapNode",US);class K3 extends Zi{constructor(e,t,i=$r(.5)){super("vec2"),this.uvNode=e,this.rotationNode=t,this.centerNode=i}setup(){const{uvNode:e,rotationNode:t,centerNode:i}=this,n=t.cos(),s=t.sin(),o=e.sub(i);return $r($r(n,s).dot(o),$r(s.negate(),n).dot(o)).add(i)}}const YW=K3,ZW=it(K3);rt("rotateUV",ZW),ft("RotateUVNode",K3);class Y3 extends Zt{constructor(e,t=Ci(),i=Bt(0)){super("vec2"),this.countNode=e,this.uvNode=t,this.frameNode=i}setup(){const{frameNode:e,uvNode:t,countNode:i}=this,{width:n,height:s}=i,o=e.mod(n.mul(s)).floor(),a=o.mod(n),l=s.sub(o.add(1).div(n).ceil()),c=i.reciprocal(),u=$r(a,l);return t.add(u).mul(c)}}const JW=Y3,QW=it(Y3);ft("SpriteSheetUVNode",Y3);class Z3 extends Zt{constructor(e,t=null,i=null,n=Bt(1),s=s3,o=sg){super("vec4"),this.textureXNode=e,this.textureYNode=t,this.textureZNode=i,this.scaleNode=n,this.positionNode=s,this.normalNode=o}setup(){const{textureXNode:e,textureYNode:t,textureZNode:i,scaleNode:n,positionNode:s,normalNode:o}=this;let a=o.abs().normalize();a=a.div(a.dot(Kt(1)));const l=s.yz.mul(n),c=s.zx.mul(n),u=s.xy.mul(n),d=e.value,h=t!==null?t.value:d,p=i!==null?i.value:d,f=Dn(d,l).mul(a.x),m=Dn(h,c).mul(a.y),g=Dn(p,u).mul(a.z);return lo(f,m,g)}}const e9=Z3,t9=it(Z3),r9=(...r)=>t9(...r);rt("triplanarTexture",r9),ft("TriplanarTexturesNode",Z3);class Jn extends Za{setup(){return this.getFloat(this.scope)}}Jn.SCALE="scale",Jn.DASH_SIZE="dashSize",Jn.GAP_SIZE="gapSize",Jn.LINEWIDTH="linewidth",Jn.DASH_OFFSET="dashOffset";const bBe=Jn,FS=Tt(Jn,Jn.SCALE),J3=Tt(Jn,Jn.DASH_OFFSET),Q3=Tt(Jn,Jn.DASH_SIZE),ek=Tt(Jn,Jn.GAP_SIZE),dg=Tt(Jn,Jn.LINEWIDTH);ft("LineMaterialNode",Jn);const BS=1/6,i9=r=>ms(BS,ms(r,ms(r,r.negate().add(3)).sub(3)).add(1)),tk=r=>ms(BS,ms(r,ms(r,ms(3,r).sub(6))).add(4)),n9=r=>ms(BS,ms(r,ms(r,ms(-3,r).add(3)).add(3)).add(1)),rk=r=>ms(BS,YR(r,3)),s9=r=>i9(r).add(tk(r)),o9=r=>n9(r).add(rk(r)),a9=r=>lo(-1,tk(r).div(i9(r).add(tk(r)))),l9=r=>lo(1,rk(r).div(n9(r).add(rk(r)))),c9=(r,e,t)=>{const i=r.uvNode,n=ms(i,e.zw).add(.5),s=SS(n),o=TS(n),a=s9(o.x),l=o9(o.x),c=a9(o.x),u=l9(o.x),d=a9(o.y),h=l9(o.y),p=$r(s.x.add(c),s.y.add(d)).sub(.5).mul(e.xy),f=$r(s.x.add(u),s.y.add(d)).sub(.5).mul(e.xy),m=$r(s.x.add(c),s.y.add(h)).sub(.5).mul(e.xy),g=$r(s.x.add(u),s.y.add(h)).sub(.5).mul(e.xy),v=s9(o.y).mul(lo(a.mul(r.uv(p).level(t)),l.mul(r.uv(f).level(t)))),x=o9(o.y).mul(lo(a.mul(r.uv(m).level(t)),l.mul(r.uv(g).level(t))));return v.add(x)},xBe=(r,e)=>{const t=$r(r.size(dS(e))),i=$r(r.size(dS(e.add(1)))),n=tg(1,t),s=tg(1,i),o=c9(r,Xr(n,t),SS(e)),a=c9(r,Xr(s,i),$R(e));return TS(e).mix(o,a)};class ik extends Zi{constructor(e,t=Bt(3)){super("vec4"),this.textureNode=e,this.blurNode=t}setup(){return xBe(this.textureNode,this.blurNode)}}const wBe=ik,u9=it(ik);rt("bicubic",u9),ft("TextureBicubicNode",ik);class nk extends Zt{constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}const d9=nk,h9=Tt(nk);ft("PointUVNode",nk);class ba extends Zt{constructor(e=ba.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,i=this.scene!==null?this.scene:e.scene;let n;return t===ba.BACKGROUND_BLURRINESS?n=Fs("backgroundBlurriness","float",i):t===ba.BACKGROUND_INTENSITY?n=Fs("backgroundIntensity","float",i):console.error("THREE.SceneNode: Unknown scope:",t),n}}ba.BACKGROUND_BLURRINESS="backgroundBlurriness",ba.BACKGROUND_INTENSITY="backgroundIntensity";const _Be=ba,p9=Tt(ba,ba.BACKGROUND_BLURRINESS),f9=Tt(ba,ba.BACKGROUND_INTENSITY);ft("SceneNode",ba);class sk extends v3{constructor(e,t,i=0){super(e,t,i),this.isStorageBufferNode=!0}getInputType(){return"storageBuffer"}}const SBe=sk,TBe=(r,e,t)=>Vt(new sk(r,e,t));ft("StorageBufferNode",sk);class ok extends Jy{constructor(e,t,i=null){super(e,t),this.storeNode=i,this.isStoreTextureNode=!0}getNodeType(){return"void"}}const MBe=ok,EBe=it(ok);ft("TextureStoreNode",ok);class ak extends ig{constructor(e,t,i=null){super(e,t,i),this.userData=i}update(e){this.reference=this.userData!==null?this.userData:e.object.userData,super.update(e)}}const CBe=ak,ABe=(r,e,t)=>Vt(new ak(r,e,t));ft("UserDataNode",ak);const NBe=Ur(({base:r,blend:e})=>{const t=i=>e[i].lessThan(WR).cond(e[i],r[i].oneMinus().div(e[i]).oneMinus().max(0));return Kt(t("x"),t("y"),t("z"))}),RBe=Ur(({base:r,blend:e})=>{const t=i=>e[i].equal(1).cond(e[i],r[i].div(e[i].oneMinus()).max(0));return Kt(t("x"),t("y"),t("z"))}),kBe=Ur(({base:r,blend:e})=>{const t=i=>r[i].oneMinus().mul(e[i].oneMinus()).oneMinus();return Kt(t("x"),t("y"),t("z"))}),LBe=Ur(({base:r,blend:e})=>{const t=i=>r[i].lessThan(.5).cond(r[i].mul(e[i],2),r[i].oneMinus().mul(e[i].oneMinus()).oneMinus());return Kt(t("x"),t("y"),t("z"))});class Sn extends Zi{constructor(e,t,i){super(),this.blendMode=e,this.baseNode=t,this.blendNode=i}setup(){const{blendMode:e,baseNode:t,blendNode:i}=this,n={base:t,blend:i};let s=null;return e===Sn.BURN?s=NBe(n):e===Sn.DODGE?s=RBe(n):e===Sn.SCREEN?s=kBe(n):e===Sn.OVERLAY&&(s=LBe(n)),s}}Sn.BURN="burn",Sn.DODGE="dodge",Sn.SCREEN="screen",Sn.OVERLAY="overlay";const hg=Sn,m9=it(Sn,Sn.BURN),g9=it(Sn,Sn.DODGE),v9=it(Sn,Sn.OVERLAY),y9=it(Sn,Sn.SCREEN);rt("burn",m9),rt("dodge",g9),rt("overlay",v9),rt("screen",y9),ft("BlendModeNode",Sn);const OBe=Ur(({color:r,adjustment:e})=>e.mix(S9(r),r)),PBe=Ur(({color:r,adjustment:e})=>{const t=lo(r.r,r.g,r.b).div(3),i=r.r.max(r.g.max(r.b)),n=i.sub(t).mul(e).mul(-3);return Ds(r,i,n)}),IBe=Ur(({color:r,adjustment:e})=>{const t=Lc(.299,.587,.114,.595716,-.274453,-.321263,.211456,-.522591,.311135),i=Lc(1,.9563,.621,1,-.2721,-.6474,1,-1.107,1.7046),n=t.mul(r),s=n.z.atan2(n.y).add(e),o=n.yz.length();return i.mul(Kt(n.x,o.mul(s.cos()),o.mul(s.sin())))});class Bs extends Zi{constructor(e,t,i=Bt(1)){super("vec3"),this.method=e,this.colorNode=t,this.adjustmentNode=i}setup(){const{method:e,colorNode:t,adjustmentNode:i}=this,n={color:t,adjustment:i};let s=null;return e===Bs.SATURATION?s=OBe(n):e===Bs.VIBRANCE?s=PBe(n):e===Bs.HUE?s=IBe(n):console.error(`${this.type}: Method "${this.method}" not supported!`),s}}Bs.SATURATION="saturation",Bs.VIBRANCE="vibrance",Bs.HUE="hue";const cb=Bs,b9=it(Bs,Bs.SATURATION),x9=it(Bs,Bs.VIBRANCE),w9=it(Bs,Bs.HUE),_9=Kt(.2125,.7154,.0721),S9=(r,e=_9)=>$u(r,e);rt("saturation",b9),rt("vibrance",x9),rt("hue",w9),ft("ColorAdjustmentNode",Bs);class lk extends Zi{constructor(e,t){super(),this.sourceNode=e,this.stepsNode=t}setup(){const{sourceNode:e,stepsNode:t}=this;return e.mul(t).floor().div(t)}}const T9=lk,M9=it(lk);rt("posterize",M9),ft("PosterizeNode",lk);const DBe=Ur(({color:r,exposure:e})=>r.mul(e).clamp()),UBe=Ur(({color:r,exposure:e})=>(r=r.mul(e),r.div(r.add(1)).clamp())),FBe=Ur(({color:r,exposure:e})=>{r=r.mul(e),r=r.sub(.004).max(0);const t=r.mul(r.mul(6.2).add(.5)),i=r.mul(r.mul(6.2).add(1.7)).add(.06);return t.div(i).pow(2.2)}),BBe=Ur(({color:r})=>{const e=r.mul(r.add(.0245786)).sub(90537e-9),t=r.mul(r.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),zBe=Ur(({color:r,exposure:e})=>{const t=Lc(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),i=Lc(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return r=r.mul(e).div(.6),r=t.mul(r),r=BBe({color:r}),r=i.mul(r),r.clamp()}),VBe={[G0]:DBe,[j0]:UBe,[H0]:FBe,[dh]:zBe};class ck extends Zi{constructor(e=ro,t=Bt(1),i=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=i}getCacheKey(){let e=super.getCacheKey();return e="{toneMapping:"+this.toneMapping+",nodes:"+e+"}",e}setup(e){const t=this.colorNode||e.context.color,i=this.toneMapping;if(i===ro)return t;const n={exposure:this.exposureNode,color:t},s=VBe[i];let o=null;return s?o=s(n):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",i),o=t),o}}const E9=ck,C9=(r,e,t)=>Vt(new ck(r,Vt(e),Vt(t)));ft("ToneMappingNode",ck);let uk,dk;class Pr extends Zt{constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===Pr.COORDINATE||this.scope===Pr.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=ui.NONE;return(this.scope===Pr.RESOLUTION||this.scope===Pr.VIEWPORT)&&(e=ui.FRAME),this.updateType=e,e}update({renderer:e}){this.scope===Pr.VIEWPORT?e.getViewport(dk):e.getDrawingBufferSize(uk)}setup(e){const t=this.scope;if(t===Pr.COORDINATE)return;let i=null;if(t===Pr.RESOLUTION)i=sn(uk||(uk=new qe));else if(t===Pr.VIEWPORT)i=sn(dk||(dk=new jt));else{const n=$r(new Pr(Pr.COORDINATE)),s=new Pr(Pr.RESOLUTION);i=n.div(s);let o=i.x,a=i.y;(/top/i.test(t)&&e.isFlipY()||/bottom/i.test(t)&&e.isFlipY()===!1)&&(a=a.oneMinus()),/right/i.test(t)&&(o=o.oneMinus()),i=$r(o,a)}return i}generate(e){return this.scope===Pr.COORDINATE?e.getFragCoord():super.generate(e)}}Pr.COORDINATE="coordinate",Pr.RESOLUTION="resolution",Pr.VIEWPORT="viewport",Pr.TOP_LEFT="topLeft",Pr.BOTTOM_LEFT="bottomLeft",Pr.TOP_RIGHT="topRight",Pr.BOTTOM_RIGHT="bottomRight";const Yu=Pr,GBe=Tt(Pr,Pr.COORDINATE),jBe=Tt(Pr,Pr.RESOLUTION),zS=Tt(Pr,Pr.VIEWPORT),VS=Tt(Pr,Pr.TOP_LEFT),A9=Tt(Pr,Pr.BOTTOM_LEFT),HBe=Tt(Pr,Pr.TOP_RIGHT),WBe=Tt(Pr,Pr.BOTTOM_RIGHT);ft("ViewportNode",Pr);const ub=new qe;class GS extends Jy{constructor(e=VS,t=null,i=null){i===null&&(i=new E_,i.minFilter=qn),super(i,e,t),this.generateMipmaps=!1,this.isOutputTextureNode=!0,this.updateBeforeType=ui.FRAME}updateBefore(e){const t=e.renderer;t.getDrawingBufferSize(ub);const i=this.value;(i.image.width!==ub.width||i.image.height!==ub.height)&&(i.image.width=ub.width,i.image.height=ub.height,i.needsUpdate=!0);const n=i.generateMipmaps;i.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(i),i.generateMipmaps=n}clone(){return new this.constructor(this.uvNode,this.levelNode,this.value)}}const hk=GS,N9=it(GS),R9=it(GS,null,null,{generateMipmaps:!0});rt("viewportTexture",N9),rt("viewportMipTexture",R9),ft("ViewportTextureNode",GS);let pk=null;class fk extends hk{constructor(e=VS,t=null){pk===null&&(pk=new E_),super(e,t,pk)}}const $Be=fk,k9=it(fk);rt("viewportSharedTexture",k9),ft("ViewportSharedTextureNode",fk);let pg=null;class mk extends hk{constructor(e=VS,t=null){pg===null&&(pg=new Hh,pg.minFilter=qn,pg.type=no,pg.format=hs),super(e,t,pg)}}const XBe=mk,gk=it(mk);rt("viewportDepthTexture",gk),ft("ViewportDepthTextureNode",mk);class el extends Zt{constructor(e,t=null){super("float"),this.scope=e,this.textureNode=t,this.isViewportDepthNode=!0}setup(){const{scope:e}=this;let t=null;if(e===el.DEPTH)t=vk(Ja.z,AS,NS);else if(e===el.DEPTH_TEXTURE){const i=this.textureNode||gk(),n=L9(i,AS,NS);t=vk(n,AS,NS)}return t}}const vk=(r,e,t)=>r.add(e).div(e.sub(t)),qBe=(r,e,t)=>e.sub(t).mul(r).sub(e),KBe=(r,e,t)=>e.add(r).mul(t).div(e.sub(t).mul(r)),L9=(r,e,t)=>e.mul(t).div(t.sub(e).mul(r).sub(t));el.DEPTH="depth",el.DEPTH_TEXTURE="depthTexture";const YBe=el,ZBe=Tt(el,el.DEPTH),JBe=it(el,el.DEPTH_TEXTURE);ft("ViewportDepthNode",el);class yk extends Zt{constructor(e="",t=[],i=""){super("code"),this.isCodeNode=!0,this.code=e,this.language=i,this._includes=t}setIncludes(e){return this._includes=e,this}getIncludes(){return this._includes}generate(e){const t=this.getIncludes(e);for(const n of t)n.build(e);const i=e.getCodeFromNode(this,this.getNodeType(e));return i.code=this.code,i.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}const fg=yk,jS=it(yk),QBe=(r,e)=>jS(r,e,"js"),eze=(r,e)=>jS(r,e,"wgsl"),bk=(r,e)=>jS(r,e,"glsl");ft("CodeNode",yk);class xk extends Zi{constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const t=[],i=this.functionNode,n=i.getInputs(e),s=this.parameters;if(Array.isArray(s))for(let o=0;o<s.length;o++){const a=n[o],l=s[o];t.push(l.build(e,a.type))}else for(const o of n){const a=s[o.name];if(a!==void 0)t.push(a.build(e,o.type));else throw new Error(`FunctionCallNode: Input '${o.name}' not found in FunctionNode.`)}return`${i.build(e,"property")}( ${t.join(", ")} )`}}const tze=xk,O9=(r,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?up(e):uS(e[0]),Vt(new xk(Vt(r),e)));rt("call",O9),ft("FunctionCallNode",xk);class wk extends fg{constructor(e="",t=[],i=""){super(e,t,i),this.keywords={}}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let i=t.nodeFunction;return i===void 0&&(i=e.parser.parseFunction(this.code),t.nodeFunction=i),i}generate(e,t){super.generate(e);const i=this.getNodeFunction(e),n=i.name,s=i.type,o=e.getCodeFromNode(this,s);n!==""&&(o.name=n);const a=e.getPropertyName(o);let l=this.getNodeFunction(e).getCode(a);const c=this.keywords,u=Object.keys(c);if(u.length>0)for(const d of u){const h=new RegExp(`\\b${d}\\b`,"g"),p=c[d].build(e,"property");l=l.replace(h,p)}return o.code=l,t==="property"?a:e.format(`${a}()`,s,t)}}const P9=wk,I9=(r,e=[],t="")=>{for(let s=0;s<e.length;s++){const o=e[s];typeof o=="function"&&(e[s]=o.functionNode)}const i=Vt(new wk(r,e,t)),n=(...s)=>i.call(...s);return n.functionNode=i,n},zs=(r,e)=>I9(r,e,"glsl"),rze=(r,e)=>I9(r,e,"wgsl");ft("FunctionNode",wk);class _k extends Zt{constructor(e=null){super(),this._value=e,this._cache=null,this.inputType=null,this.outpuType=null,this.events=new Ln,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return this.outputType!==null}set value(e){this._value!==e&&(this._cache&&this.inputType==="URL"&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=e,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){const e=this.value;if(e&&this._cache===null&&this.inputType==="URL"&&e.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([e.value]));else if(e&&e.value!==null&&e.value!==void 0&&((this.inputType==="URL"||this.inputType==="String")&&typeof e.value=="string"||this.inputType==="Number"&&typeof e.value=="number"||this.inputType==="Vector2"&&e.value.isVector2||this.inputType==="Vector3"&&e.value.isVector3||this.inputType==="Vector4"&&e.value.isVector4||this.inputType==="Color"&&e.value.isColor||this.inputType==="Matrix3"&&e.value.isMatrix3||this.inputType==="Matrix4"&&e.value.isMatrix4))return e.value;return this._cache||e}getNodeType(e){return this.value&&this.value.isNode?this.value.getNodeType(e):"float"}setup(){return this.value&&this.value.isNode?this.value:Bt()}serialize(e){super.serialize(e),this.value!==null?this.inputType==="ArrayBuffer"?e.value=wR(this.value):e.value=this.value?this.value.toJSON(e.meta).uuid:null:e.value=null,e.inputType=this.inputType,e.outputType=this.outputType}deserialize(e){super.deserialize(e);let t=null;e.value!==null&&(e.inputType==="ArrayBuffer"?t=_R(e.value):e.inputType==="Texture"?t=e.meta.textures[e.value]:t=e.meta.nodes[e.value]||null),this.value=t,this.inputType=e.inputType,this.outputType=e.outputType}}const ize=_k,db=it(_k);rt("scriptableValue",db),ft("ScriptableValueNode",_k);class D9 extends Map{get(e,t=null,...i){if(this.has(e))return super.get(e);if(t!==null){const n=t(...i);return this.set(e,n),n}}}class nze{constructor(e){this.scriptableNode=e}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(e){return this.scriptableNode.getInputLayout(e)}get(e){const t=this.parameters[e];return t?t.getValue():null}}const HS=new D9;class Sk extends Zt{constructor(e=null,t={}){super(),this.codeNode=e,this.parameters=t,this._local=new D9,this._output=db(),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(e,t){return this._local.set(e,t)}getLocal(e){return this._local.get(e)}onRefresh(){this._refresh()}getInputLayout(e){for(const t of this.getLayout())if(t.inputType&&(t.id===e||t.name===e))return t}getOutputLayout(e){for(const t of this.getLayout())if(t.outputType&&(t.id===e||t.name===e))return t}setOutput(e,t){const i=this._outputs;return i[e]===void 0?i[e]=db(t):i[e].value=t,this}getOutput(e){return this._outputs[e]}getParameter(e){return this.parameters[e]}setParameter(e,t){const i=this.parameters;return t&&t.isScriptableNode?(this.deleteParameter(e),i[e]=t,i[e].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):t&&t.isScriptableValueNode?(this.deleteParameter(e),i[e]=t,i[e].events.addEventListener("refresh",this.onRefresh)):i[e]===void 0?(i[e]=db(t),i[e].events.addEventListener("refresh",this.onRefresh)):i[e].value=t,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(e){let t=this.parameters[e];return t&&(t.isScriptableNode&&(t=t.getDefaultOutput()),t.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(const e of Object.keys(this.parameters))this.deleteParameter(e);return this.needsUpdate=!0,this}call(e,...t){const i=this.getObject()[e];if(typeof i=="function")return i(...t)}async callAsync(e,...t){const i=this.getObject()[e];if(typeof i=="function")return i.constructor.name==="AsyncFunction"?await i(...t):i(...t)}getNodeType(e){return this.getDefaultOutputNode().getNodeType(e)}refresh(e=null){e!==null?this.getOutput(e).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),this._object!==null)return this._object;const e=()=>this.refresh(),t=(c,u)=>this.setOutput(c,u),i=new nze(this),n=HS.get("THREE"),s=HS.get("TSL"),o=this.getMethod(this.codeNode),a=[i,this._local,HS,e,t,n,s];this._object=o(...a);const l=this._object.layout;if(l&&(l.cache===!1&&this._local.clear(),this._output.outputType=l.outputType||null,Array.isArray(l.elements)))for(const c of l.elements){const u=c.id||c.name;c.inputType&&(this.getParameter(u)===void 0&&this.setParameter(u,null),this.getParameter(u).inputType=c.inputType),c.outputType&&(this.getOutput(u)===void 0&&this.setOutput(u,null),this.getOutput(u).outputType=c.outputType)}return this._object}deserialize(e){super.deserialize(e);for(const t in this.parameters){let i=this.parameters[t];i.isScriptableNode&&(i=i.getDefaultOutput()),i.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){const e=this.getDefaultOutput().value;return e&&e.isNode?e:Bt()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),this._method!==null)return this._method;const e=["parameters","local","global","refresh","setOutput","THREE","TSL"],t=["layout","init","main","dispose"].join(", "),i="var "+t+`; var output = {};
`,n=`
return { ...output, `+t+" };",s=i+this.codeNode.code+n;return this._method=new Function(...e,s),this._method}dispose(){this._method!==null&&(this._object&&typeof this._object.dispose=="function"&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}set needsUpdate(e){e===!0&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return this.codeNode===null?this:(this._needsOutputUpdate===!0&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value,this)}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}const sze=Sk,U9=it(Sk);rt("scriptable",U9),ft("ScriptableNode",Sk);class Tk extends Zt{constructor(e,t){super("float"),this.isFogNode=!0,this.colorNode=e,this.factorNode=t}mixAssign(e){return this.mix(e,this.colorNode)}setup(){return this.factorNode}}const WS=Tk,F9=it(Tk);rt("fog",F9),ft("FogNode",Tk);class Mk extends WS{constructor(e,t,i){super(e),this.isFogRangeNode=!0,this.nearNode=t,this.farNode=i}setup(){return Xu(this.nearNode,this.farNode,Ja.z.negate())}}const B9=Mk,Ek=it(Mk);rt("rangeFog",Ek),ft("FogRangeNode",Mk);class Ck extends WS{constructor(e,t){super(e),this.isFogExp2Node=!0,this.densityNode=t}setup(){const e=Ja.z.negate(),t=this.densityNode;return t.mul(t,e,e).negate().exp().oneMinus()}}const z9=Ck,Ak=it(Ck);rt("densityFog",Ak),ft("FogExp2Node",Ck);let vp=null,yp=null;class Nk extends Zt{constructor(e=Bt(),t=Bt()){super(),this.minNode=e,this.maxNode=t}getVectorLength(e){const t=e.getTypeLength(Wu(this.minNode.value)),i=e.getTypeLength(Wu(this.maxNode.value));return t>i?t:i}getNodeType(e){return e.object.isInstancedMesh===!0?e.getTypeFromLength(this.getVectorLength(e)):"float"}setup(e){const t=e.object;let i=null;if(t.isInstancedMesh===!0){const n=this.minNode.value,s=this.maxNode.value,o=e.getTypeLength(Wu(n)),a=e.getTypeLength(Wu(s));vp=vp||new jt,yp=yp||new jt,vp.setScalar(0),yp.setScalar(0),o===1?vp.setScalar(n):n.isColor?vp.set(n.r,n.g,n.b):vp.set(n.x,n.y,n.z||0,n.w||0),a===1?yp.setScalar(s):s.isColor?yp.set(s.r,s.g,s.b):yp.set(s.x,s.y,s.z||0,s.w||0);const l=4,c=l*t.count,u=new Float32Array(c);for(let h=0;h<c;h++){const p=h%l,f=vp.getComponent(p),m=yp.getComponent(p);u[h]=$i.lerp(f,m,Math.random())}const d=this.getNodeType(e);i=y3(u,"vec4",t.count).element(jj).convert(d)}else i=Bt(0);return i}}const V9=Nk,oze=it(Nk);ft("RangeNode",Nk);class Rk extends Zt{constructor(e,t,i=[64]){super("void"),this.isComputeNode=!0,this.computeNode=e,this.count=t,this.workgroupSize=i,this.dispatchCount=0,this.version=1,this.updateType=ui.OBJECT,this.updateDispatchCount()}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}updateDispatchCount(){const{count:e,workgroupSize:t}=this;let i=t[0];for(let n=1;n<t.length;n++)i*=t[n];this.dispatchCount=Math.ceil(e/i)}onInit(){}update({renderer:e}){e.compute(this)}generate(e){const{shaderStage:t}=e;if(t==="compute"){const i=this.computeNode.build(e,"void");i!==""&&e.addLineFlowCode(i)}}}const G9=Rk,j9=(r,e,t)=>Vt(new Rk(Vt(r),e,t));rt("compute",j9),ft("ComputeNode",Rk);class Zu extends Zt{constructor(e=Zu.TARGET_DIRECTION,t=null){super(),this.scope=e,this.light=t}setup(){const{scope:e,light:t}=this;let i=null;return e===Zu.TARGET_DIRECTION&&(i=Ic.transformDirection(CS(t).sub(CS(t.target)))),i}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}Zu.TARGET_DIRECTION="targetDirection";const aze=Zu,kk=it(Zu,Zu.TARGET_DIRECTION);ft("LightNode",Zu);const Lk=Ur(r=>{const{lightDistance:e,cutoffDistance:t,decayExponent:i}=r,n=e.pow(i).max(.01).reciprocal();return t.greaterThan(0).cond(n.mul(e.div(t).pow4().oneMinus().clamp().pow2()),n)});class Ok extends Ku{constructor(e=null){super(e),this.cutoffDistanceNode=sn(0),this.decayExponentNode=sn(0)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setup(e){const{colorNode:t,cutoffDistanceNode:i,decayExponentNode:n,light:s}=this,o=e.context.lightingModel,a=t3(s).sub(Ja),l=a.normalize(),c=a.length(),u=Lk({lightDistance:c,cutoffDistance:i,decayExponent:n}),d=t.mul(u),h=e.context.reflectedLight;o.direct({lightDirection:l,lightColor:d,reflectedLight:h})}}const H9=Ok;ft("PointLightNode",Ok),fp(Il,Ok);class Pk extends Ku{constructor(e=null){super(e)}setup(e){super.setup(e);const t=e.context.lightingModel,i=this.colorNode,n=kk(this.light),s=e.context.reflectedLight;t.direct({lightDirection:n,lightColor:i,reflectedLight:s})}}const lze=Pk;ft("DirectionalLightNode",Pk),fp(Dl,Pk);class Ik extends Ku{constructor(e=null){super(e),this.coneCosNode=sn(0),this.penumbraCosNode=sn(0),this.cutoffDistanceNode=sn(0),this.decayExponentNode=sn(0)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e){const{coneCosNode:t,penumbraCosNode:i}=this;return Xu(t,i,e)}setup(e){super.setup(e);const t=e.context.lightingModel,{colorNode:i,cutoffDistanceNode:n,decayExponentNode:s,light:o}=this,a=t3(o).sub(Ja),l=a.normalize(),c=l.dot(kk(o)),u=this.getSpotAttenuation(c),d=a.length(),h=Lk({lightDistance:d,cutoffDistance:n,decayExponent:s}),p=i.mul(u).mul(h),f=e.context.reflectedLight;t.direct({lightDirection:l,lightColor:p,reflectedLight:f})}}const W9=Ik;ft("SpotLightNode",Ik),fp(Pl,Ik);class cze extends Pl{constructor(e,t,i,n,s,o){super(e,t,i,n,s,o),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}const uze=cze;class Dk extends W9{getSpotAttenuation(e){const t=this.light.iesMap;let i=null;if(t&&t.isTexture===!0){const n=e.acos().mul(1/Math.PI);i=Dn(t,$r(n,0),0).r}else i=super.getSpotAttenuation(e);return i}}const dze=Dk;ft("IESSpotLightNode",Dk),fp(uze,Dk);class Uk extends Ku{constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}const hze=Uk;ft("AmbientLightNode",Uk),fp(np,Uk);class Fk extends Ku{constructor(e=null){super(e),this.lightPositionNode=CS(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=sn(new at)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:i,lightDirectionNode:n}=this,s=Fl.dot(n).mul(.5).add(.5),o=Ds(i,t,s);e.context.irradiance.addAssign(o)}}const $9=Fk;ft("HemisphereLightNode",Fk),fp(ip,Fk);const pze=Ur(r=>{const e=r.uv.mul(2),t=e.x.floor(),i=e.y.floor();return t.add(i).mod(2).sign()});class Bk extends Zi{constructor(e=Ci()){super("float"),this.uvNode=e}setup(){return pze({uv:this.uvNode})}}const X9=Bk,q9=it(Bk);rt("checker",q9),ft("CheckerNode",Bk);class fze extends Fi{constructor(e){super(e),this.textures={}}load(e,t,i,n){const s=new In(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{try{t(this.parse(JSON.parse(o)))}catch(a){n?n(a):console.error(a),this.manager.itemError(e)}},i,n)}parseNodes(e){const t={};if(e!==void 0){for(const n of e){const{uuid:s,type:o}=n;t[s]=Vt(TR(o)),t[s].uuid=s}const i={nodes:t,textures:this.textures};for(const n of e)n.meta=i,t[n.uuid].deserialize(n),delete n.meta}return t}parse(e){const t=Vt(TR(e.type));t.uuid=e.uuid;const i={nodes:this.parseNodes(e.nodes),textures:this.textures};return e.meta=i,t.deserialize(e),delete e.meta,t}setTextures(e){return this.textures=e,this}}const K9=fze,mze=new Ki;class Y9 extends Zn{constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.lights=!1,this.normals=!1,this.setDefaultValues(mze),this.setValues(e)}}const Z9=Y9;po("LineBasicNodeMaterial",Y9);const gze=new jy;class J9 extends Zn{constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.lights=!1,this.normals=!1,this.setDefaultValues(gze),this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants({stack:e}){const t=this.offsetNode,i=this.dashScaleNode?Bt(this.dashScaleNode):FS,n=this.dashSizeNode?Bt(this.dashSizeNode):Q3,s=this.dashSizeNode?Bt(this.dashGapNode):ek;e.assign(eg,n),e.assign(wS,s);const o=ni(xn("lineDistance").mul(i)),a=t?o.add(t):o;e.add(a.mod(eg.add(wS)).greaterThan(eg).discard())}}const vze=J9;po("LineDashedNodeMaterial",J9);const yze=new jy;class Q9 extends Zn{constructor(e={}){super(),this.normals=!1,this.lights=!1,this.setDefaultValues(yze),this.useAlphaToCoverage=!0,this.useColor=e.vertexColors,this.useDash=e.dashed,this.useWorldUnits=!1,this.dashOffset=0,this.lineWidth=1,this.lineColorNode=null,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setupShaders(),this.setValues(e)}setupShaders(){const e=this.alphaToCoverage,t=this.useColor,i=this.dashed,n=this.worldUnits,s=Ur(({start:a,end:l})=>{const c=Pc.element(2).element(2),u=Pc.element(3).element(2).mul(-.5).div(c).sub(a.z).div(l.z.sub(a.z));return Xr(Ds(a.xyz,l.xyz,u),l.w)});this.vertexNode=new kc(a=>{a.assign(ni($r(),"vUv"),Ci());const l=xn("instanceStart"),c=xn("instanceEnd"),u=Oc("vec4","start"),d=Oc("vec4","end");a.assign(u,dp.mul(Xr(l,1))),a.assign(d,dp.mul(Xr(c,1))),n&&(a.assign(ni(Kt(),"worldStart"),u.xyz),a.assign(ni(Kt(),"worldEnd"),d.xyz));const h=zS.z.div(zS.w),p=Pc.element(2).element(3).equal(-1);a.if(p,w=>{w.if(u.z.lessThan(0).and(d.z.greaterThan(0)),_=>{_.assign(d,s({start:u,end:d}))}).elseif(d.z.lessThan(0).and(u.z.greaterThanEqual(0)),_=>{_.assign(u,s({start:d,end:u}))})});const f=Pc.mul(u),m=Pc.mul(d),g=f.xyz.div(f.w),v=m.xyz.div(m.w),x=v.xy.sub(g.xy);a.assign(x.x,x.x.mul(h)),a.assign(x,x.normalize());const b=rb(Xr());if(n){const w=d.xyz.sub(u.xyz).normalize(),_=uo.y.lessThan(.5).cond(u.xyz.cross(w).normalize(),d.xyz.cross(w).normalize());a.assign(_,uo.x.lessThan(0).cond(_.negate(),_));const S=w.dot(Kt(0,0,1));i||(a.assign(u,u.sub(Xr(w.mul(dg).mul(.5),0))),a.assign(d,d.add(Xr(w.mul(dg).mul(.5),0))),a.assign(_,_.sub(Kt(x.mul(S),0))),a.assign(_.z,_.z.add(.5))),a.if(uo.y.greaterThan(1).or(uo.y.lessThan(0)),E=>{E.assign(_,_.add(Kt(x.mul(2).mul(S),0)))}),a.assign(_,_.mul(dg).mul(.5));const T=ni(Xr(),"worldPos");a.assign(T,uo.y.lessThan(.5).cond(u,d)),a.assign(T,T.add(Xr(_,0))),a.assign(b,Pc.mul(T));const M=rb(Kt());a.assign(M,uo.y.lessThan(.5).cond(g,v)),a.assign(b.z,M.z.mul(b.w))}else{const w=Oc("vec2","offset");a.assign(w,$r(x.y,x.x.negate())),a.assign(x.x,x.x.div(h)),a.assign(w.x,w.x.div(h)),a.assign(w,uo.x.lessThan(0).cond(w.negate(),w)),a.if(uo.y.lessThan(0),_=>{_.assign(w,w.sub(x))}).elseif(uo.y.greaterThan(1),_=>{_.assign(w,w.add(x))}),a.assign(w,w.mul(dg)),a.assign(w,w.div(zS.w)),a.assign(b,uo.y.lessThan(.5).cond(f,m)),a.assign(w,w.mul(b.w)),a.assign(b,b.add(Xr(w,0,0)))}return b});const o=Ur(({p1:a,p2:l,p3:c,p4:u})=>{const d=a.sub(c),h=u.sub(c),p=l.sub(a),f=$u(d,h),m=$u(h,p),g=$u(d,p),v=$u(h,h),x=$u(p,p).mul(v).sub(m.mul(m)),b=f.mul(m).sub(g.mul(v)),w=Yy(b.div(x),0,1),_=Yy(f.add(m.mul(w)).div(v),0,1);return $r(w,_)});this.colorNode=new kc(a=>{const l=ni($r(),"vUv");if(i){const d=this.offsetNode?Bt(this.offsetNodeNode):J3,h=this.dashScaleNode?Bt(this.dashScaleNode):FS,p=this.dashSizeNode?Bt(this.dashSizeNode):Q3,f=this.dashSizeNode?Bt(this.dashGapNode):ek;a.assign(eg,p),a.assign(wS,f);const m=xn("instanceDistanceStart"),g=xn("instanceDistanceEnd"),v=uo.y.lessThan(.5).cond(h.mul(m),FS.mul(g)),x=ni(v.add(J3)),b=d?x.add(d):x;a.add(l.y.lessThan(-1).or(l.y.greaterThan(1)).discard()),a.add(KR(b,eg.add(wS)).greaterThan(eg).discard())}const c=Oc("float","alpha");if(a.assign(c,1),n){let d=ni(Kt(),"worldStart"),h=ni(Kt(),"worldEnd");const p=ni(Xr(),"worldPos").xyz.normalize().mul(1e5),f=h.sub(d),m=o({p1:d,p2:h,p3:Kt(0,0,0),p4:p}),g=d.add(f.mul(m.x)),v=p.mul(m.y),x=g.sub(v).length().div(dg);if(!i)if(e){const b=x.fwidth();a.assign(c,Xu(b.negate().add(.5),b.add(.5),x).oneMinus())}else a.add(x.greaterThan(.5).discard())}else if(e){const d=l.x,h=l.y.greaterThan(0).cond(l.y.sub(1),l.y.add(1)),p=d.mul(d).add(h.mul(h)),f=Oc("float","dlen");a.assign(f,p.fwidth()),a.if(Ky(l.y).greaterThan(1),m=>{m.assign(c,Xu(f.oneMinus(),f.add(1),p).oneMinus())})}else a.if(Ky(l.y).greaterThan(1),d=>{const h=l.x,p=l.y.greaterThan(0).cond(l.y.sub(1),l.y.add(1)),f=h.mul(h).add(p.mul(p));d.add(f.greaterThan(1).discard())});let u;if(this.lineColorNode)u=this.lineColorNode;else if(t){const d=xn("instanceColorStart"),h=xn("instanceColorEnd");u=ni(uo.y.lessThan(.5).cond(d,h))}else u=QR;return Xr(u,c)}),this.needsUpdate=!0}get worldUnits(){return this.useWorldUnits}set worldUnits(e){this.useWorldUnits!==e&&(this.useWorldUnits=e,this.setupShaders())}get dashed(){return this.useDash}set dashed(e){this.useDash!==e&&(this.useDash=e,this.setupShaders())}get alphaToCoverage(){return this.useAlphaToCoverage}set alphaToCoverage(e){this.useAlphaToCoverage!==e&&(this.useAlphaToCoverage=e,this.setupShaders())}}const bze=Q9;po("Line2NodeMaterial",Q9);const xze=new Gy;class e$ extends Zn{constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.colorSpace=!1,this.setDefaultValues(xze),this.setValues(e)}setupDiffuseColor({stack:e}){const t=this.opacityNode?Bt(this.opacityNode):e3;e.assign(Yn,Xr(q3(Ji),t))}}const wze=e$;po("MeshNormalNodeMaterial",e$);const _ze=new Ei;class t$ extends Zn{constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!1,this.setDefaultValues(_ze),this.setValues(e)}}const zk=t$;po("MeshBasicNodeMaterial",t$);const Sze=Ur(({f0:r,f90:e,dotVH:t})=>{const i=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return r.mul(i.oneMinus()).add(e.mul(i))}),mg=Sze,Tze=Ur(r=>r.diffuseColor.mul(1/Math.PI)),hb=Tze,Mze=()=>Bt(.25),Eze=Ur(({dotNH:r})=>xS.mul(.5/Math.PI).add(1).mul(r.pow(xS))),Cze=Ur(({lightDirection:r})=>{const e=r.add(_n).normalize(),t=Ji.dot(e).clamp(),i=_n.dot(e).clamp(),n=mg({f0:Ul,f90:1,dotVH:i}),s=Mze(),o=Eze({dotNH:t});return n.mul(s).mul(o)});class Aze extends IR{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:i}){const n=Ji.dot(e).clamp().mul(t);i.directDiffuse.addAssign(n.mul(hb({diffuseColor:Yn.rgb}))),this.specular===!0&&i.directSpecular.addAssign(n.mul(Cze({lightDirection:e})).mul(JUe))}indirectDiffuse({irradiance:e,reflectedLight:t}){t.indirectDiffuse.addAssign(e.mul(hb({diffuseColor:Yn})))}}const Vk=Aze,Nze=new qm;class r$ extends Zn{constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(Nze),this.setValues(e)}setupLightingModel(){return new Vk(!1)}}const Rze=r$;po("MeshLambertNodeMaterial",r$);const kze=new Bu;class i$ extends Zn{constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(kze),this.setValues(e)}setupLightingModel(){return new Vk}setupVariants({stack:e}){const t=(this.shininessNode?Bt(this.shininessNode):rW).max(1e-4);e.assign(xS,t);const i=this.specularNode||nW;e.assign(Ul,i)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const Lze=i$;po("MeshPhongNodeMaterial",i$);const Oze=Ur(()=>{const r=tb.dFdx().abs().max(tb.dFdy().abs());return r.x.max(r.y).max(r.z)}),n$=Oze,Pze=Ur(r=>{const{roughness:e}=r,t=n$();let i=e.max(.0525);return i=i.add(t),i=i.min(1),i}),s$=Pze,Ize=Ur(r=>{const{alpha:e,dotNL:t,dotNV:i}=r,n=e.pow2(),s=t.mul(n.add(n.oneMinus().mul(i.pow2())).sqrt()),o=i.mul(n.add(n.oneMinus().mul(t.pow2())).sqrt());return tg(.5,s.add(o).max(WR))}),o$=Ize,Dze=Ur(r=>{const{alpha:e,dotNH:t}=r,i=e.pow2(),n=t.pow2().mul(i.oneMinus()).oneMinus();return i.div(n.pow2()).mul(1/Math.PI)}),a$=Dze,Uze=Ur(r=>{const{lightDirection:e,f0:t,f90:i,roughness:n,iridescenceFresnel:s}=r,o=r.normalView||Ji,a=n.pow2(),l=e.add(_n).normalize(),c=o.dot(e).clamp(),u=o.dot(_n).clamp(),d=o.dot(l).clamp(),h=_n.dot(l).clamp();let p=mg({f0:t,f90:i,dotVH:h});s&&(p=GR.mix(p,s));const f=o$({alpha:a,dotNL:c,dotNV:u}),m=a$({alpha:a,dotNH:d});return p.mul(f).mul(m)}),Gk=Uze,Fze=Ur(r=>{const{roughness:e}=r,t=r.dotNV||Ji.dot(_n).clamp(),i=Xr(-1,-.0275,-.572,.022),n=Xr(1,.0425,1.04,-.04),s=e.mul(i).add(n),o=s.x.mul(s.x).min(t.mul(-9.28).exp2()).mul(s.x).add(s.y);return $r(-1.04,1.04).mul(o).add(s.zw)}),jk=Fze,Bze=Ur(r=>{const{dotNV:e,specularColor:t,specularF90:i,roughness:n}=r,s=jk({dotNV:e,roughness:n});return t.mul(s.x).add(i.mul(s.y))}),zze=Bze,Vze=Ur(({f:r,f90:e,dotVH:t})=>{const i=t.oneMinus().saturate(),n=i.mul(i),s=i.mul(n,n).clamp(0,.9999);return r.sub(Kt(e).mul(s)).div(s.oneMinus())}),l$=Vze,Gze=(r,e)=>{const t=r.pow2(),i=Bt(1).div(t),n=e.pow2().oneMinus().max(.0078125);return Bt(2).add(i).mul(n.pow(i.mul(.5))).div(2*Math.PI)},jze=(r,e)=>Bt(1).div(Bt(4).mul(e.add(r).sub(e.mul(r)))),Hze=Ur(({lightDirection:r})=>{const e=r.add(_n).normalize(),t=Ji.dot(r).clamp(),i=Ji.dot(_n).clamp(),n=Ji.dot(e).clamp(),s=Gze(VR,n),o=jze(i,t);return Qm.mul(s).mul(o)}),Wze=Hze,$ze=Lc(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),Xze=r=>{const e=r.sqrt();return Kt(1).add(e).div(Kt(1).sub(e))},c$=(r,e)=>r.sub(e).div(r.add(e)).pow2(),qze=(r,e)=>{const t=r.mul(2*Math.PI*1e-9),i=Kt(54856e-17,44201e-17,52481e-17),n=Kt(1681e3,1795300,2208400),s=Kt(43278e5,93046e5,66121e5),o=Bt(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let a=i.mul(s.mul(2*Math.PI).sqrt()).mul(n.mul(t).add(e).cos()).mul(t.pow2().negate().mul(s).exp());return a=Kt(a.x.add(o),a.y,a.z).div(10685e-11),$ze.mul(a)},Kze=(r,e,t,i,n)=>{const s=Ds(r,e,Xu(0,.03,i)),o=r.div(s).pow2().mul(Bt(1).sub(t.pow2())),a=Bt(1).sub(o).sqrt(),l=c$(s,r),c=mg({f0:l,f90:1,dotVH:t}),u=c.oneMinus(),d=s.lessThan(r).cond(Math.PI,0),h=Bt(Math.PI).sub(d),p=Xze(n.clamp(0,.9999)),f=c$(p,s.vec3()),m=mg({f0:f,f90:1,dotVH:a}),g=Kt(p.x.lessThan(s).cond(Math.PI,0),p.y.lessThan(s).cond(Math.PI,0),p.z.lessThan(s).cond(Math.PI,0)),v=s.mul(i,a,2),x=Kt(h).add(g),b=c.mul(m).clamp(1e-5,.9999),w=b.sqrt(),_=u.pow2().mul(m).div(Kt(1).sub(b));let S=c.add(_),T=_.sub(u);for(let M=1;M<=2;++M){T=T.mul(w);const E=qze(Bt(M).mul(v),Bt(M).mul(x)).mul(2);S=S.add(T.mul(E))}return S.max(Kt(0))},Yze=(r,e,t)=>{const i=r.dot(e).saturate(),n=t.pow2(),s=gp(t.lessThan(.25),Bt(-339.2).mul(n).add(Bt(161.4).mul(t)).sub(25.9),Bt(-8.48).mul(n).add(Bt(14.3).mul(t)).sub(9.95)),o=gp(t.lessThan(.25),Bt(44).mul(n).sub(Bt(23.7).mul(t)).add(3.26),Bt(1.97).mul(n).sub(Bt(3.27).mul(t)).add(.72));return gp(t.lessThan(.25),0,Bt(.1).mul(t).sub(.025)).add(s.mul(i).add(o).exp()).mul(1/Math.PI).saturate()},Hk=Kt(.04),Wk=Kt(1);class Zze extends IR{constructor(e=!0,t=!0,i=!0){super(),this.clearcoat=e,this.sheen=t,this.iridescence=i,this.clearcoatRadiance=null,this.clearcoatSpecular=null,this.sheenSpecular=null,this.iridescenceFresnel=null,this.iridescenceF0=null}init({reflectedLight:e}){if(this.clearcoat===!0){this.clearcoatRadiance=Kt().temp(),this.clearcoatSpecular=Kt().temp();const t=pp.dot(_n).clamp(),i=mg({dotVH:t,f0:Hk,f90:Wk}),n=e.total,s=n.mul(zR.mul(i).oneMinus()).add(this.clearcoatSpecular.mul(zR));n.assign(s)}if(this.sheen===!0){this.sheenSpecular=Kt().temp();const t=e.total,i=Qm.r.max(Qm.g).max(Qm.b).mul(.157).oneMinus(),n=t.mul(i).add(this.sheenSpecular);t.assign(n)}if(this.iridescence===!0){const t=Ji.dot(_n).clamp();this.iridescenceFresnel=Kze(Bt(1),Wj,t,$j,Ul),this.iridescenceF0=l$({f:this.iridescenceFresnel,f90:1,dotVH:t})}}computeMultiscattering(e,t,i=Bt(1)){const n=jk({roughness:Jm}),s=(this.iridescenceF0?GR.mix(Ul,this.iridescenceF0):Ul).mul(n.x).add(i.mul(n.y)),o=n.x.add(n.y).oneMinus(),a=Ul.add(Ul.oneMinus().mul(.047619)),l=s.mul(a).div(o.mul(a).oneMinus());e.addAssign(s),t.addAssign(l.mul(o))}direct({lightDirection:e,lightColor:t,reflectedLight:i}){const n=Ji.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecular.addAssign(n.mul(Wze({lightDirection:e}))),this.clearcoat===!0){const s=pp.dot(e).clamp().mul(t);this.clearcoatSpecular.addAssign(s.mul(Gk({lightDirection:e,f0:Hk,f90:Wk,roughness:bS,normalView:pp})))}i.directDiffuse.addAssign(n.mul(hb({diffuseColor:Yn.rgb}))),i.directSpecular.addAssign(n.mul(Gk({lightDirection:e,f0:Ul,f90:1,roughness:Jm,iridescence:this.iridescence,iridescenceFresnel:this.iridescenceFresnel})))}indirectDiffuse({irradiance:e,reflectedLight:t}){t.indirectDiffuse.addAssign(e.mul(hb({diffuseColor:Yn})))}indirectSpecular({radiance:e,iblIrradiance:t,reflectedLight:i}){if(this.sheen===!0&&this.sheenSpecular.addAssign(t.mul(Qm,Yze(Ji,_n,VR))),this.clearcoat===!0){const c=pp.dot(_n).clamp(),u=zze({dotNV:c,specularColor:Hk,specularF90:Wk,roughness:bS});this.clearcoatSpecular.addAssign(this.clearcoatRadiance.mul(u))}const n=Kt().temp(),s=Kt().temp(),o=t.mul(1/Math.PI);this.computeMultiscattering(n,s);const a=n.add(s),l=Yn.mul(a.r.max(a.g).max(a.b).oneMinus());i.indirectSpecular.addAssign(e.mul(n)),i.indirectSpecular.addAssign(s.mul(o)),i.indirectDiffuse.addAssign(l.mul(o))}ambientOcclusion({ambientOcclusion:e,reflectedLight:t}){const i=Ji.dot(_n).clamp().add(e),n=Jm.mul(-16).oneMinus().negate().exp2(),s=e.sub(i.pow(n).oneMinus()).clamp();t.indirectDiffuse.mulAssign(e),t.indirectSpecular.mulAssign(s)}}const $k=Zze,Jze=new Kn;class u$ extends Zn{constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(Jze),this.setValues(e)}setupLightingModel(){return new $k(!1,!1)}setupVariants({stack:e}){const t=this.metalnessNode?Bt(this.metalnessNode):oW;e.assign(Hj,t);let i=this.roughnessNode?Bt(this.roughnessNode):sW;i=s$({roughness:i}),e.assign(Jm,i);const n=Ds(Kt(.04),Yn.rgb,t);e.assign(Ul,n),e.assign(Yn,Xr(Yn.rgb.mul(t.oneMinus()),Yn.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const Xk=u$;po("MeshStandardNodeMaterial",u$);const Qze=new Io;class d$ extends Xk{constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.setDefaultValues(Qze),this.setValues(e)}setupLightingModel(){return new $k}setupVariants(e){super.setupVariants(e);const{stack:t}=e,i=this.clearcoatNode?Bt(this.clearcoatNode):eFe,n=this.clearcoatRoughnessNode?Bt(this.clearcoatRoughnessNode):tFe;t.assign(zR,i),t.assign(bS,n);const s=this.sheenNode?Kt(this.sheenNode):lW,o=this.sheenRoughnessNode?Bt(this.sheenRoughnessNode):cW;t.assign(Qm,s),t.assign(VR,o);const a=this.iridescenceNode?Bt(this.iridescenceNode):rFe,l=this.iridescenceIORNode?Bt(this.iridescenceIORNode):iFe,c=this.iridescenceThicknessNode?Bt(this.iridescenceThicknessNode):nFe;t.assign(GR,a),t.assign(Wj,l),t.assign($j,c)}setupNormal(e){super.setupNormal(e);const t=this.clearcoatNormalNode?Kt(this.clearcoatNormalNode):CFe;e.stack.assign(pp,t)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,super.copy(e)}}const h$=d$;po("MeshPhysicalNodeMaterial",d$);const e5e=new qh;class p$ extends Zn{constructor(e){super(),this.isPointsNodeMaterial=!0,this.lights=!1,this.normals=!1,this.transparent=!0,this.colorNode=null,this.opacityNode=null,this.alphaTestNode=null,this.lightNode=null,this.sizeNode=null,this.positionNode=null,this.setDefaultValues(e5e),this.setValues(e)}copy(e){return this.sizeNode=e.sizeNode,super.copy(e)}}const qk=p$;po("PointsNodeMaterial",p$);const t5e=new Wh;class f$ extends Zn{constructor(e){super(),this.isSpriteNodeMaterial=!0,this.lights=!1,this.normals=!1,this.colorNode=null,this.opacityNode=null,this.alphaTestNode=null,this.lightNode=null,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.setDefaultValues(t5e),this.setValues(e)}setupPosition({object:e,context:t}){const{positionNode:i,rotationNode:n,scaleNode:s}=this,o=ho;let a=dp.mul(Kt(i||0)),l=$r(Qy[0].xyz.length(),Qy[1].xyz.length());s!==null&&(l=l.mul(s));let c=o.xy;e.center&&e.center.isVector2===!0&&(c=c.sub(sn(e.center).sub(.5))),c=c.mul(l);const u=Bt(n||aW),d=u.cos(),h=u.sin(),p=$r($r(d,h.negate()).dot(c),$r(h,d).dot(c));a=Xr(a.xy.add(p),a.zw);const f=Pc.mul(a);return t.vertex=o,f}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}}const m$=f$;po("SpriteNodeMaterial",f$);const r5e=Nc.createMaterialFromType;Nc.createMaterialFromType=function(r){const e=cg(r);return e!==void 0?e:r5e.call(this,r)};class i5e extends Nc{constructor(e){super(e),this.nodes={}}parse(e){const t=super.parse(e),i=this.nodes,n=e.inputNodes;for(const s in n){const o=n[s];t[s]=i[o]}return t}setNodes(e){return this.nodes=e,this}}const $S=i5e;class n5e extends SG{constructor(e){super(e),this._nodesJSON=null}parse(e,t){this._nodesJSON=e.nodes;const i=super.parse(e,t);return this._nodesJSON=null,i}parseNodes(e,t){if(e!==void 0){const i=new K9;return i.setTextures(t),i.parseNodes(e)}return{}}parseMaterials(e,t){const i={};if(e!==void 0){const n=this.parseNodes(this._nodesJSON,t),s=new $S;s.setTextures(t),s.setNodes(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]=s.parse(l)}}return i}}const s5e=n5e;class o5e{parseFunction(){console.warn("Abstract function.")}}const g$=o5e;class v${constructor(e,t,i="",n=""){this.type=e,this.inputs=t,this.name=i,this.presicion=n}getCode(){console.warn("Abstract function.")}}v$.isNodeFunction=!0;const y$=v$,a5e=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,l5e=/[a-z_0-9]+/ig,b$="#pragma main",c5e=r=>{r=r.trim();const e=r.indexOf(b$),t=e!==-1?r.slice(e+b$.length):r,i=t.match(a5e);if(i!==null&&i.length===5){const n=i[4],s=[];let o=null;for(;(o=l5e.exec(n))!==null;)s.push(o);const a=[];let l=0;for(;l<s.length;){const f=s[l][0]==="const";f===!0&&l++;let m=s[l][0];m==="in"||m==="out"||m==="inout"?l++:m="";const g=s[l++][0];let v=Number.parseInt(s[l][0]);Number.isNaN(v)===!1?l++:v=null;const x=s[l++][0];a.push(new DS(g,x,v,m,f))}const c=t.substring(i[0].length),u=i[3]!==void 0?i[3]:"",d=i[2],h=i[1]!==void 0?i[1]:"",p=e!==-1?r.slice(0,e):"";return{type:d,inputs:a,name:u,presicion:h,inputsCode:n,blockCode:c,headerCode:p}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class u5e extends y${constructor(e){const{type:t,inputs:i,name:n,presicion:s,inputsCode:o,blockCode:a,headerCode:l}=c5e(e);super(t,i,n,s),this.inputsCode=o,this.blockCode=a,this.headerCode=l}getCode(e=this.name){let t;const i=this.blockCode;if(i!==""){const{type:n,inputsCode:s,headerCode:o,presicion:a}=this;let l=`${n} ${e} ( ${s.trim()} )`;a!==""&&(l=`${a} ${l}`),t=o+l+i}else t="";return t}}const d5e=u5e;class h5e extends g${parseFunction(e){return new d5e(e)}}const Kk=h5e,p5e=bk(`float mx_select(bool b, float t, float f)
{
    return b ? t : f;
}

float mx_negate_if(float val, bool b)
{
    return b ? -val : val;
}

int mx_floor(float x)
{
    return int(floor(x));
}

// return mx_floor as well as the fractional remainder
float mx_floorfrac(float x, out int i)
{
    i = mx_floor(x);
    return x - float(i);
}

float mx_bilerp(float v0, float v1, float v2, float v3, float s, float t)
{
    float s1 = 1.0 - s;
    return (1.0 - t) * (v0*s1 + v1*s) + t * (v2*s1 + v3*s);
}
vec3 mx_bilerp(vec3 v0, vec3 v1, vec3 v2, vec3 v3, float s, float t)
{
    float s1 = 1.0 - s;
    return (1.0 - t) * (v0*s1 + v1*s) + t * (v2*s1 + v3*s);
}
float mx_trilerp(float v0, float v1, float v2, float v3, float v4, float v5, float v6, float v7, float s, float t, float r)
{
    float s1 = 1.0 - s;
    float t1 = 1.0 - t;
    float r1 = 1.0 - r;
    return (r1*(t1*(v0*s1 + v1*s) + t*(v2*s1 + v3*s)) +
            r*(t1*(v4*s1 + v5*s) + t*(v6*s1 + v7*s)));
}
vec3 mx_trilerp(vec3 v0, vec3 v1, vec3 v2, vec3 v3, vec3 v4, vec3 v5, vec3 v6, vec3 v7, float s, float t, float r)
{
    float s1 = 1.0 - s;
    float t1 = 1.0 - t;
    float r1 = 1.0 - r;
    return (r1*(t1*(v0*s1 + v1*s) + t*(v2*s1 + v3*s)) +
            r*(t1*(v4*s1 + v5*s) + t*(v6*s1 + v7*s)));
}

// 2 and 3 dimensional gradient functions - perform a dot product against a
// randomly chosen vector. Note that the gradient vector is not normalized, but
// this only affects the overal "scale" of the result, so we simply account for
// the scale by multiplying in the corresponding "perlin" function.
float mx_gradient_float(uint hash, float x, float y)
{
    // 8 possible directions (+-1,+-2) and (+-2,+-1)
    uint h = hash & 7u;
    float u = mx_select(h<4u, x, y);
    float v = 2.0 * mx_select(h<4u, y, x);
    // compute the dot product with (x,y).
    return mx_negate_if(u, bool(h&1u)) + mx_negate_if(v, bool(h&2u));
}
float mx_gradient_float(uint hash, float x, float y, float z)
{
    // use vectors pointing to the edges of the cube
    uint h = hash & 15u;
    float u = mx_select(h<8u, x, y);
    float v = mx_select(h<4u, y, mx_select((h==12u)||(h==14u), x, z));
    return mx_negate_if(u, bool(h&1u)) + mx_negate_if(v, bool(h&2u));
}
vec3 mx_gradient_vec3(uvec3 hash, float x, float y)
{
    return vec3(mx_gradient_float(hash.x, x, y), mx_gradient_float(hash.y, x, y), mx_gradient_float(hash.z, x, y));
}
vec3 mx_gradient_vec3(uvec3 hash, float x, float y, float z)
{
    return vec3(mx_gradient_float(hash.x, x, y, z), mx_gradient_float(hash.y, x, y, z), mx_gradient_float(hash.z, x, y, z));
}
// Scaling factors to normalize the result of gradients above.
// These factors were experimentally calculated to be:
//    2D:   0.6616
//    3D:   0.9820
float mx_gradient_scale2d(float v) { return 0.6616 * v; }
float mx_gradient_scale3d(float v) { return 0.9820 * v; }
vec3 mx_gradient_scale2d(vec3 v) { return 0.6616 * v; }
vec3 mx_gradient_scale3d(vec3 v) { return 0.9820 * v; }

/// Bitwise circular rotation left by k bits (for 32 bit unsigned integers)
uint mx_rotl32(uint x, int k)
{
    return (x<<k) | (x>>(32-k));
}

void mx_bjmix(inout uint a, inout uint b, inout uint c)
{
    a -= c; a ^= mx_rotl32(c, 4); c += b;
    b -= a; b ^= mx_rotl32(a, 6); a += c;
    c -= b; c ^= mx_rotl32(b, 8); b += a;
    a -= c; a ^= mx_rotl32(c,16); c += b;
    b -= a; b ^= mx_rotl32(a,19); a += c;
    c -= b; c ^= mx_rotl32(b, 4); b += a;
}

// Mix up and combine the bits of a, b, and c (doesn't change them, but
// returns a hash of those three original values).
uint mx_bjfinal(uint a, uint b, uint c)
{
    c ^= b; c -= mx_rotl32(b,14);
    a ^= c; a -= mx_rotl32(c,11);
    b ^= a; b -= mx_rotl32(a,25);
    c ^= b; c -= mx_rotl32(b,16);
    a ^= c; a -= mx_rotl32(c,4);
    b ^= a; b -= mx_rotl32(a,14);
    c ^= b; c -= mx_rotl32(b,24);
    return c;
}

// Convert a 32 bit integer into a floating point number in [0,1]
float mx_bits_to_01(uint bits)
{
    return float(bits) / float(uint(0xffffffff));
}

float mx_fade(float t)
{
   return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}

uint mx_hash_int(int x)
{
    uint len = 1u;
    uint seed = uint(0xdeadbeef) + (len << 2u) + 13u;
    return mx_bjfinal(seed+uint(x), seed, seed);
}

uint mx_hash_int(int x, int y)
{
    uint len = 2u;
    uint a, b, c;
    a = b = c = uint(0xdeadbeef) + (len << 2u) + 13u;
    a += uint(x);
    b += uint(y);
    return mx_bjfinal(a, b, c);
}

uint mx_hash_int(int x, int y, int z)
{
    uint len = 3u;
    uint a, b, c;
    a = b = c = uint(0xdeadbeef) + (len << 2u) + 13u;
    a += uint(x);
    b += uint(y);
    c += uint(z);
    return mx_bjfinal(a, b, c);
}

uint mx_hash_int(int x, int y, int z, int xx)
{
    uint len = 4u;
    uint a, b, c;
    a = b = c = uint(0xdeadbeef) + (len << 2u) + 13u;
    a += uint(x);
    b += uint(y);
    c += uint(z);
    mx_bjmix(a, b, c);
    a += uint(xx);
    return mx_bjfinal(a, b, c);
}

uint mx_hash_int(int x, int y, int z, int xx, int yy)
{
    uint len = 5u;
    uint a, b, c;
    a = b = c = uint(0xdeadbeef) + (len << 2u) + 13u;
    a += uint(x);
    b += uint(y);
    c += uint(z);
    mx_bjmix(a, b, c);
    a += uint(xx);
    b += uint(yy);
    return mx_bjfinal(a, b, c);
}

uvec3 mx_hash_vec3(int x, int y)
{
    uint h = mx_hash_int(x, y);
    // we only need the low-order bits to be random, so split out
    // the 32 bit result into 3 parts for each channel
    uvec3 result;
    result.x = (h      ) & 0xFFu;
    result.y = (h >> 8 ) & 0xFFu;
    result.z = (h >> 16) & 0xFFu;
    return result;
}

uvec3 mx_hash_vec3(int x, int y, int z)
{
    uint h = mx_hash_int(x, y, z);
    // we only need the low-order bits to be random, so split out
    // the 32 bit result into 3 parts for each channel
    uvec3 result;
    result.x = (h      ) & 0xFFu;
    result.y = (h >> 8 ) & 0xFFu;
    result.z = (h >> 16) & 0xFFu;
    return result;
}

float mx_perlin_noise_float(vec2 p)
{
    int X, Y;
    float fx = mx_floorfrac(p.x, X);
    float fy = mx_floorfrac(p.y, Y);
    float u = mx_fade(fx);
    float v = mx_fade(fy);
    float result = mx_bilerp(
        mx_gradient_float(mx_hash_int(X  , Y  ), fx    , fy     ),
        mx_gradient_float(mx_hash_int(X+1, Y  ), fx-1.0, fy     ),
        mx_gradient_float(mx_hash_int(X  , Y+1), fx    , fy-1.0),
        mx_gradient_float(mx_hash_int(X+1, Y+1), fx-1.0, fy-1.0),
        u, v);
    return mx_gradient_scale2d(result);
}

float mx_perlin_noise_float(vec3 p)
{
    int X, Y, Z;
    float fx = mx_floorfrac(p.x, X);
    float fy = mx_floorfrac(p.y, Y);
    float fz = mx_floorfrac(p.z, Z);
    float u = mx_fade(fx);
    float v = mx_fade(fy);
    float w = mx_fade(fz);
    float result = mx_trilerp(
        mx_gradient_float(mx_hash_int(X  , Y  , Z  ), fx    , fy    , fz     ),
        mx_gradient_float(mx_hash_int(X+1, Y  , Z  ), fx-1.0, fy    , fz     ),
        mx_gradient_float(mx_hash_int(X  , Y+1, Z  ), fx    , fy-1.0, fz     ),
        mx_gradient_float(mx_hash_int(X+1, Y+1, Z  ), fx-1.0, fy-1.0, fz     ),
        mx_gradient_float(mx_hash_int(X  , Y  , Z+1), fx    , fy    , fz-1.0),
        mx_gradient_float(mx_hash_int(X+1, Y  , Z+1), fx-1.0, fy    , fz-1.0),
        mx_gradient_float(mx_hash_int(X  , Y+1, Z+1), fx    , fy-1.0, fz-1.0),
        mx_gradient_float(mx_hash_int(X+1, Y+1, Z+1), fx-1.0, fy-1.0, fz-1.0),
        u, v, w);
    return mx_gradient_scale3d(result);
}

vec3 mx_perlin_noise_vec3(vec2 p)
{
    int X, Y;
    float fx = mx_floorfrac(p.x, X);
    float fy = mx_floorfrac(p.y, Y);
    float u = mx_fade(fx);
    float v = mx_fade(fy);
    vec3 result = mx_bilerp(
        mx_gradient_vec3(mx_hash_vec3(X  , Y  ), fx    , fy     ),
        mx_gradient_vec3(mx_hash_vec3(X+1, Y  ), fx-1.0, fy     ),
        mx_gradient_vec3(mx_hash_vec3(X  , Y+1), fx    , fy-1.0),
        mx_gradient_vec3(mx_hash_vec3(X+1, Y+1), fx-1.0, fy-1.0),
        u, v);
    return mx_gradient_scale2d(result);
}

vec3 mx_perlin_noise_vec3(vec3 p)
{
    int X, Y, Z;
    float fx = mx_floorfrac(p.x, X);
    float fy = mx_floorfrac(p.y, Y);
    float fz = mx_floorfrac(p.z, Z);
    float u = mx_fade(fx);
    float v = mx_fade(fy);
    float w = mx_fade(fz);
    vec3 result = mx_trilerp(
        mx_gradient_vec3(mx_hash_vec3(X  , Y  , Z  ), fx    , fy    , fz     ),
        mx_gradient_vec3(mx_hash_vec3(X+1, Y  , Z  ), fx-1.0, fy    , fz     ),
        mx_gradient_vec3(mx_hash_vec3(X  , Y+1, Z  ), fx    , fy-1.0, fz     ),
        mx_gradient_vec3(mx_hash_vec3(X+1, Y+1, Z  ), fx-1.0, fy-1.0, fz     ),
        mx_gradient_vec3(mx_hash_vec3(X  , Y  , Z+1), fx    , fy    , fz-1.0),
        mx_gradient_vec3(mx_hash_vec3(X+1, Y  , Z+1), fx-1.0, fy    , fz-1.0),
        mx_gradient_vec3(mx_hash_vec3(X  , Y+1, Z+1), fx    , fy-1.0, fz-1.0),
        mx_gradient_vec3(mx_hash_vec3(X+1, Y+1, Z+1), fx-1.0, fy-1.0, fz-1.0),
        u, v, w);
    return mx_gradient_scale3d(result);
}

float mx_cell_noise_float(float p)
{
    int ix = mx_floor(p);
    return mx_bits_to_01(mx_hash_int(ix));
}

float mx_cell_noise_float(vec2 p)
{
    int ix = mx_floor(p.x);
    int iy = mx_floor(p.y);
    return mx_bits_to_01(mx_hash_int(ix, iy));
}

float mx_cell_noise_float(vec3 p)
{
    int ix = mx_floor(p.x);
    int iy = mx_floor(p.y);
    int iz = mx_floor(p.z);
    return mx_bits_to_01(mx_hash_int(ix, iy, iz));
}

float mx_cell_noise_float(vec4 p)
{
    int ix = mx_floor(p.x);
    int iy = mx_floor(p.y);
    int iz = mx_floor(p.z);
    int iw = mx_floor(p.w);
    return mx_bits_to_01(mx_hash_int(ix, iy, iz, iw));
}

vec3 mx_cell_noise_vec3(float p)
{
    int ix = mx_floor(p);
    return vec3(
            mx_bits_to_01(mx_hash_int(ix, 0)),
            mx_bits_to_01(mx_hash_int(ix, 1)),
            mx_bits_to_01(mx_hash_int(ix, 2))
    );
}

vec3 mx_cell_noise_vec3(vec2 p)
{
    int ix = mx_floor(p.x);
    int iy = mx_floor(p.y);
    return vec3(
            mx_bits_to_01(mx_hash_int(ix, iy, 0)),
            mx_bits_to_01(mx_hash_int(ix, iy, 1)),
            mx_bits_to_01(mx_hash_int(ix, iy, 2))
    );
}

vec3 mx_cell_noise_vec3(vec3 p)
{
    int ix = mx_floor(p.x);
    int iy = mx_floor(p.y);
    int iz = mx_floor(p.z);
    return vec3(
            mx_bits_to_01(mx_hash_int(ix, iy, iz, 0)),
            mx_bits_to_01(mx_hash_int(ix, iy, iz, 1)),
            mx_bits_to_01(mx_hash_int(ix, iy, iz, 2))
    );
}

vec3 mx_cell_noise_vec3(vec4 p)
{
    int ix = mx_floor(p.x);
    int iy = mx_floor(p.y);
    int iz = mx_floor(p.z);
    int iw = mx_floor(p.w);
    return vec3(
            mx_bits_to_01(mx_hash_int(ix, iy, iz, iw, 0)),
            mx_bits_to_01(mx_hash_int(ix, iy, iz, iw, 1)),
            mx_bits_to_01(mx_hash_int(ix, iy, iz, iw, 2))
    );
}

float mx_fractal_noise_float(vec3 p, int octaves, float lacunarity, float diminish)
{
    float result = 0.0;
    float amplitude = 1.0;
    for (int i = 0;  i < octaves; ++i)
    {
        result += amplitude * mx_perlin_noise_float(p);
        amplitude *= diminish;
        p *= lacunarity;
    }
    return result;
}

vec3 mx_fractal_noise_vec3(vec3 p, int octaves, float lacunarity, float diminish)
{
    vec3 result = vec3(0.0);
    float amplitude = 1.0;
    for (int i = 0;  i < octaves; ++i)
    {
        result += amplitude * mx_perlin_noise_vec3(p);
        amplitude *= diminish;
        p *= lacunarity;
    }
    return result;
}

vec2 mx_fractal_noise_vec2(vec3 p, int octaves, float lacunarity, float diminish)
{
    return vec2(mx_fractal_noise_float(p, octaves, lacunarity, diminish),
                mx_fractal_noise_float(p+vec3(19, 193, 17), octaves, lacunarity, diminish));
}

vec4 mx_fractal_noise_vec4(vec3 p, int octaves, float lacunarity, float diminish)
{
    vec3  c = mx_fractal_noise_vec3(p, octaves, lacunarity, diminish);
    float f = mx_fractal_noise_float(p+vec3(19, 193, 17), octaves, lacunarity, diminish);
    return vec4(c, f);
}

float mx_worley_distance(vec2 p, int x, int y, int xoff, int yoff, float jitter, int metric)
{
    vec3  tmp = mx_cell_noise_vec3(vec2(x+xoff, y+yoff));
    vec2  off = vec2(tmp.x, tmp.y);

    off -= 0.5f;
    off *= jitter;
    off += 0.5f;

    vec2 cellpos = vec2(float(x), float(y)) + off;
    vec2 diff = cellpos - p;
    if (metric == 2)
        return abs(diff.x) + abs(diff.y);       // Manhattan distance
    if (metric == 3)
        return max(abs(diff.x), abs(diff.y));   // Chebyshev distance
    // Either Euclidian or Distance^2
    return dot(diff, diff);
}

float mx_worley_distance(vec3 p, int x, int y, int z, int xoff, int yoff, int zoff, float jitter, int metric)
{
    vec3  off = mx_cell_noise_vec3(vec3(x+xoff, y+yoff, z+zoff));

    off -= 0.5f;
    off *= jitter;
    off += 0.5f;

    vec3 cellpos = vec3(float(x), float(y), float(z)) + off;
    vec3 diff = cellpos - p;
    if (metric == 2)
        return abs(diff.x) + abs(diff.y) + abs(diff.z); // Manhattan distance
    if (metric == 3)
        return max(max(abs(diff.x), abs(diff.y)), abs(diff.z)); // Chebyshev distance
    // Either Euclidian or Distance^2
    return dot(diff, diff);
}

float mx_worley_noise_float(vec2 p, float jitter, int metric)
{
    int X, Y;
    vec2 localpos = vec2(mx_floorfrac(p.x, X), mx_floorfrac(p.y, Y));
    float sqdist = 1e6f;        // Some big number for jitter > 1 (not all GPUs may be IEEE)
    for (int x = -1; x <= 1; ++x)
    {
        for (int y = -1; y <= 1; ++y)
        {
            float dist = mx_worley_distance(localpos, x, y, X, Y, jitter, metric);
            sqdist = min(sqdist, dist);
        }
    }
    if (metric == 0)
        sqdist = sqrt(sqdist);
    return sqdist;
}

vec2 mx_worley_noise_vec2(vec2 p, float jitter, int metric)
{
    int X, Y;
    vec2 localpos = vec2(mx_floorfrac(p.x, X), mx_floorfrac(p.y, Y));
    vec2 sqdist = vec2(1e6f, 1e6f);
    for (int x = -1; x <= 1; ++x)
    {
        for (int y = -1; y <= 1; ++y)
        {
            float dist = mx_worley_distance(localpos, x, y, X, Y, jitter, metric);
            if (dist < sqdist.x)
            {
                sqdist.y = sqdist.x;
                sqdist.x = dist;
            }
            else if (dist < sqdist.y)
            {
                sqdist.y = dist;
            }
        }
    }
    if (metric == 0)
        sqdist = sqrt(sqdist);
    return sqdist;
}

vec3 mx_worley_noise_vec3(vec2 p, float jitter, int metric)
{
    int X, Y;
    vec2 localpos = vec2(mx_floorfrac(p.x, X), mx_floorfrac(p.y, Y));
    vec3 sqdist = vec3(1e6f, 1e6f, 1e6f);
    for (int x = -1; x <= 1; ++x)
    {
        for (int y = -1; y <= 1; ++y)
        {
            float dist = mx_worley_distance(localpos, x, y, X, Y, jitter, metric);
            if (dist < sqdist.x)
            {
                sqdist.z = sqdist.y;
                sqdist.y = sqdist.x;
                sqdist.x = dist;
            }
            else if (dist < sqdist.y)
            {
                sqdist.z = sqdist.y;
                sqdist.y = dist;
            }
            else if (dist < sqdist.z)
            {
                sqdist.z = dist;
            }
        }
    }
    if (metric == 0)
        sqdist = sqrt(sqdist);
    return sqdist;
}

float mx_worley_noise_float(vec3 p, float jitter, int metric)
{
    int X, Y, Z;
    vec3 localpos = vec3(mx_floorfrac(p.x, X), mx_floorfrac(p.y, Y), mx_floorfrac(p.z, Z));
    float sqdist = 1e6f;
    for (int x = -1; x <= 1; ++x)
    {
        for (int y = -1; y <= 1; ++y)
        {
            for (int z = -1; z <= 1; ++z)
            {
                float dist = mx_worley_distance(localpos, x, y, z, X, Y, Z, jitter, metric);
                sqdist = min(sqdist, dist);
            }
        }
    }
    if (metric == 0)
        sqdist = sqrt(sqdist);
    return sqdist;
}

vec2 mx_worley_noise_vec2(vec3 p, float jitter, int metric)
{
    int X, Y, Z;
    vec3 localpos = vec3(mx_floorfrac(p.x, X), mx_floorfrac(p.y, Y), mx_floorfrac(p.z, Z));
    vec2 sqdist = vec2(1e6f, 1e6f);
    for (int x = -1; x <= 1; ++x)
    {
        for (int y = -1; y <= 1; ++y)
        {
            for (int z = -1; z <= 1; ++z)
            {
                float dist = mx_worley_distance(localpos, x, y, z, X, Y, Z, jitter, metric);
                if (dist < sqdist.x)
                {
                    sqdist.y = sqdist.x;
                    sqdist.x = dist;
                }
                else if (dist < sqdist.y)
                {
                    sqdist.y = dist;
                }
            }
        }
    }
    if (metric == 0)
        sqdist = sqrt(sqdist);
    return sqdist;
}

vec3 mx_worley_noise_vec3(vec3 p, float jitter, int metric)
{
    int X, Y, Z;
    vec3 localpos = vec3(mx_floorfrac(p.x, X), mx_floorfrac(p.y, Y), mx_floorfrac(p.z, Z));
    vec3 sqdist = vec3(1e6f, 1e6f, 1e6f);
    for (int x = -1; x <= 1; ++x)
    {
        for (int y = -1; y <= 1; ++y)
        {
            for (int z = -1; z <= 1; ++z)
            {
                float dist = mx_worley_distance(localpos, x, y, z, X, Y, Z, jitter, metric);
                if (dist < sqdist.x)
                {
                    sqdist.z = sqdist.y;
                    sqdist.y = sqdist.x;
                    sqdist.x = dist;
                }
                else if (dist < sqdist.y)
                {
                    sqdist.z = sqdist.y;
                    sqdist.y = dist;
                }
                else if (dist < sqdist.z)
                {
                    sqdist.z = dist;
                }
            }
        }
    }
    if (metric == 0)
        sqdist = sqrt(sqdist);
    return sqdist;
}`),tl=[p5e],x$=zs("float mx_perlin_noise_float( any p )",tl),f5e=zs("vec2 mx_perlin_noise_vec2( any p )",tl),w$=zs("vec3 mx_perlin_noise_vec3( any p )",tl),m5e=zs("float mx_cell_noise_float( vec3 p )",tl),g5e=zs("float mx_worley_noise_float( any p, float jitter, int metric )",tl),v5e=zs("float mx_worley_noise_vec2( any p, float jitter, int metric )",tl),y5e=zs("float mx_worley_noise_vec3( any p, float jitter, int metric )",tl),b5e=zs("float mx_fractal_noise_float( vec3 p, int octaves, float lacunarity, float diminish )",tl),x5e=zs("float mx_fractal_noise_vec2( vec3 p, int octaves, float lacunarity, float diminish )",tl),w5e=zs("float mx_fractal_noise_vec3( vec3 p, int octaves, float lacunarity, float diminish )",tl),_5e=zs("float mx_fractal_noise_vec4( vec3 p, int octaves, float lacunarity, float diminish )",tl),S5e=zs(`vec3 mx_hsvtorgb(vec3 hsv)
{
    // Reference for this technique: Foley & van Dam
    float h = hsv.x; float s = hsv.y; float v = hsv.z;
    if (s < 0.0001f) {
      return vec3 (v, v, v);
    } else {
        h = 6.0f * (h - floor(h));  // expand to [0..6)
        int hi = int(trunc(h));
        float f = h - float(hi);
        float p = v * (1.0f-s);
        float q = v * (1.0f-s*f);
        float t = v * (1.0f-s*(1.0f-f));
        if (hi == 0)
            return vec3 (v, t, p);
        else if (hi == 1)
            return vec3 (q, v, p);
        else if (hi == 2)
            return vec3 (p, v, t);
        else if (hi == 3)
            return vec3 (p, q, v);
        else if (hi == 4)
            return vec3 (t, p, v);
        return vec3 (v, p, q);
    }
}`),T5e=zs(`vec3 mx_rgbtohsv(vec3 c)
{
    // See Foley & van Dam
    float r = c.x; float g = c.y; float b = c.z;
    float mincomp = min (r, min(g, b));
    float maxcomp = max (r, max(g, b));
    float delta = maxcomp - mincomp;  // chroma
    float h, s, v;
    v = maxcomp;
    if (maxcomp > 0.0f)
        s = delta / maxcomp;
    else s = 0.0f;
    if (s <= 0.0f)
        h = 0.0f;
    else {
        if      (r >= maxcomp) h = (g-b) / delta;
        else if (g >= maxcomp) h = 2.0f + (b-r) / delta;
        else                   h = 4.0f + (r-g) / delta;
        h *= (1.0f/6.0f);
        if (h < 0.0f)
            h += 1.0f;
    }
    return vec3(h, s, v);
}`),M5e=bk(`#define M_AP1_TO_REC709 mat3(1.705079555511475, -0.1297005265951157, -0.02416634373366833, -0.6242334842681885, 1.138468623161316, -0.1246141716837883, -0.0808461606502533, -0.008768022060394287, 1.148780584335327)

vec3 mx_srgb_texture_to_lin_rec709(vec3 color)
{
    bvec3 isAbove = greaterThan(color, vec3(0.04045));
    vec3 linSeg = color / 12.92;
    vec3 powSeg = pow(max(color + vec3(0.055), vec3(0.0)) / 1.055, vec3(2.4));
    return mix(linSeg, powSeg, isAbove);
}`),E5e=[M5e],C5e=zs("vec3 mx_srgb_texture_to_lin_rec709( vec3 color )",E5e),_$=(r,e)=>{r=Bt(r),e=Bt(e);const t=$r(e.dFdx(),e.dFdy()).length().mul(.7071067811865476);return Xu(r.sub(t),r.add(t),e)},S$=(r,e,t,i)=>Ds(r,e,t[i].clamp()),A5e=(r,e,t=Ci())=>S$(r,e,t,"x"),N5e=(r,e,t=Ci())=>S$(r,e,t,"y"),T$=(r,e,t,i,n)=>Ds(r,e,_$(t,i[n])),R5e=(r,e,t,i=Ci())=>T$(r,e,t,i,"x"),k5e=(r,e,t,i=Ci())=>T$(r,e,t,i,"y"),L5e=(r=1,e=0,t=Ci())=>t.mul(r).add(e),O5e=(r,e=1)=>(r=Bt(r),r.abs().pow(e).mul(r.sign())),P5e=(r,e=1,t=.5)=>Bt(r).sub(t).mul(e).add(t),I5e=(r=Ci(),e=1,t=0)=>x$(r.convert("vec2|vec3")).mul(e).add(t),D5e=(r=Ci(),e=1,t=0)=>f5e(r.convert("vec2|vec3")).mul(e).add(t),U5e=(r=Ci(),e=1,t=0)=>w$(r.convert("vec2|vec3")).mul(e).add(t),F5e=(r=Ci(),e=1,t=0)=>(r=r.convert("vec2|vec3"),Xr(w$(r),x$(r.add($r(19,73)))).mul(e).add(t)),B5e=(r=Ci(),e=1)=>g5e(r.convert("vec2|vec3"),e,1),z5e=(r=Ci(),e=1)=>v5e(r.convert("vec2|vec3"),e,1),V5e=(r=Ci(),e=1)=>y5e(r.convert("vec2|vec3"),e,1),G5e=(r=Ci())=>m5e(r.convert("vec2|vec3")),j5e=(r=Ci(),e=3,t=2,i=.5,n=1)=>b5e(r,e,t,i).mul(n),H5e=(r=Ci(),e=3,t=2,i=.5,n=1)=>x5e(r,e,t,i).mul(n),W5e=(r=Ci(),e=3,t=2,i=.5,n=1)=>w5e(r,e,t,i).mul(n),$5e=(r=Ci(),e=3,t=2,i=.5,n=1)=>_5e(r,e,t,i).mul(n),XS=Object.freeze(Object.defineProperty({__proto__:null,AONode:E3,AmbientLightNode:hze,AnalyticLightNode:Ku,ArrayElementNode:sS,ArrayUniformNode:zj,AttributeNode:Xy,BRDF_GGX:Gk,BRDF_Lambert:hb,BitangentNode:ag,BlendModeNode:hg,BufferAttributeNode:AFe,BufferNode:v3,BumpMapNode:MFe,BypassNode:Vj,CacheNode:Gj,CameraNode:r3,CheckerNode:X9,CodeNode:fg,ColorAdjustmentNode:cb,ColorSpaceNode:Zy,ComputeNode:G9,CondNode:U3,ConstNode:Do,ContextNode:qy,ConvertNode:oS,CubeTextureNode:RW,DFGApprox:jk,D_GGX:a$,DirectionalLightNode:lze,DiscardNode:cBe,EPSILON:WR,EnvironmentNode:P3,EquirectUVNode:IW,ExpressionNode:QH,ExtendedMaterialNode:EFe,F_Schlick:mg,FogExp2Node:z9,FogNode:WS,FogRangeNode:B9,FrontFacingNode:fW,FunctionCallNode:tze,FunctionNode:P9,GLSLNodeParser:Kk,HashNode:lBe,HemisphereLightNode:$9,IESSpotLightNode:dze,INFINITY:WUe,IndexNode:DUe,InstanceNode:NFe,JoinNode:aj,LightNode:aze,LightingContextNode:OFe,LightingModel:IR,LightingNode:ob,LightsNode:M3,Line2NodeMaterial:bze,LineBasicNodeMaterial:Z9,LineDashedNodeMaterial:vze,LineMaterialNode:bBe,LoopNode:YFe,MatcapUVNode:WW,MaterialNode:Za,MaterialReferenceNode:ES,MathNode:fr,MaxMipLevelNode:DW,MeshBasicNodeMaterial:zk,MeshLambertNodeMaterial:Rze,MeshNormalNodeMaterial:wze,MeshPhongNodeMaterial:Lze,MeshPhysicalNodeMaterial:h$,MeshStandardNodeMaterial:Xk,ModelNode:Un,ModelViewProjectionNode:xW,MorphNode:RFe,Node:Zt,NodeAttribute:vS,NodeBuilder:IS,NodeCache:fS,NodeCode:FR,NodeFrame:lb,NodeFunctionInput:DS,NodeKeywords:BR,NodeLoader:K9,NodeMaterial:Zn,NodeMaterialLoader:$S,NodeObjectLoader:s5e,NodeShaderStage:bR,NodeType:vUe,NodeUniform:DR,NodeUpdateType:ui,NodeUtils:yUe,NodeVar:yS,NodeVarying:UR,NormalMapNode:gW,NormalNode:eb,Object3DNode:co,OperatorNode:Ai,OscNode:ug,OutputStructNode:oBe,PackingNode:yBe,PhongLightingModel:Vk,PhysicalLightingModel:$k,PointLightNode:H9,PointUVNode:d9,PointsNodeMaterial:qk,PositionNode:qu,PosterizeNode:T9,PropertyNode:wn,RangeNode:V9,ReferenceNode:ig,ReflectVectorNode:AW,RemapNode:XW,RotateUVNode:YW,SceneNode:_Be,Schlick_to_F0:l$,ScriptableNode:sze,ScriptableValueNode:ize,SetNode:uj,ShaderNode:kc,SkinningNode:MW,SpecularMIPLevelNode:UW,SplitNode:aS,SpotLightNode:W9,SpriteNodeMaterial:m$,SpriteSheetUVNode:JW,StackNode:ZFe,StorageBufferNode:SBe,TBNViewMatrix:vW,TangentNode:og,TempNode:Zi,TextureBicubicNode:wBe,TextureNode:Jy,TextureStoreNode:MBe,TimerNode:ln,ToneMappingNode:E9,TriplanarTexturesNode:e9,UVNode:qj,UniformNode:Fr,UserDataNode:CBe,V_GGX_SmithCorrelated:o$,VarNode:RS,VaryingNode:hS,ViewportDepthNode:YBe,ViewportDepthTextureNode:XBe,ViewportNode:Yu,ViewportSharedTextureNode:$Be,ViewportTextureNode:hk,abs:Ky,acos:SH,add:lo,addLightNode:fp,addNodeClass:ft,addNodeElement:rt,addNodeMaterial:po,and:iH,arrayBuffer:Dj,asin:_H,assign:HR,atan:TH,atan2:OH,attribute:xn,backgroundBlurriness:p9,backgroundIntensity:f9,bitAnd:oH,bitOr:aH,bitXor:lH,bitangentGeometry:yFe,bitangentLocal:bFe,bitangentView:hW,bitangentWorld:xFe,bmat3:kj,bmat4:Pj,bool:bj,buffer:y3,bufferAttribute:sb,bumpMap:yW,burn:m9,bvec2:_j,bvec3:Mj,bvec4:Aj,bypass:pS,cache:mS,call:O9,cameraFar:NS,cameraNear:AS,cameraNormalMatrix:uFe,cameraPosition:hFe,cameraProjectionMatrix:Pc,cameraViewMatrix:Ic,cameraWorldMatrix:dFe,ceil:$R,checker:q9,clamp:Yy,code:jS,color:vj,colorSpaceToLinear:MS,colorToDirection:$W,compute:j9,cond:gp,context:ya,convert:Fj,cos:xH,createNodeFromType:TR,createNodeMaterialFromType:cg,cross:zH,cubeTexture:lg,dFdx:XR,dFdy:qR,defaultBuildStages:ej,defaultShaderStages:Ym,degrees:hH,densityFog:Ak,depth:ZBe,depthTexture:JBe,difference:BH,diffuseColor:Yn,directionToColor:q3,discard:HW,distance:FH,div:tg,dodge:g9,dot:$u,dynamicBufferAttribute:wW,element:Uj,equal:Jj,equirectUV:ab,exp:pH,exp2:fH,expression:rg,faceDirection:l3,faceForward:XH,float:Bt,floor:SS,fog:F9,fract:TS,frameId:pBe,frontFacing:mW,fwidth:LH,getConstNodeType:gj,getDistanceAttenuation:Lk,getGeometryRoughness:n$,getRoughness:s$,global:HS,glsl:bk,glslFn:zs,greaterThan:eH,greaterThanEqual:rH,hash:jW,hue:w9,imat3:Nj,imat4:Lj,instance:TW,instanceIndex:jj,instancedBufferAttribute:_W,instancedDynamicBufferAttribute:SW,int:dS,inverseSqrt:yH,ivec2:xj,ivec3:Sj,ivec4:Ej,js:QBe,label:gS,length:EH,lessThan:Qj,lessThanEqual:tH,lightTargetDirection:kk,lightingContext:A3,lights:LFe,lightsWithoutWrap:OW,linearToColorSpace:YH,linearTosRGB:ZH,log:mH,log2:gH,loop:B3,lumaCoeffs:_9,luminance:S9,mat3:Lc,mat4:kR,matcapUV:uBe,materialAlphaTest:tW,materialColor:QR,materialEmissive:iW,materialLineDashOffset:J3,materialLineDashSize:Q3,materialLineGapSize:ek,materialLineScale:FS,materialLineWidth:dg,materialMetalness:oW,materialNormal:bW,materialOpacity:e3,materialReference:ng,materialReflectivity:QUe,materialRotation:aW,materialRoughness:sW,materialSheen:lW,materialSheenRoughness:cW,materialShininess:rW,materialSpecularColor:nW,max:IH,maxMipLevel:k3,metalness:Hj,min:PH,mix:Ds,mod:KR,modelDirection:pFe,modelNormalMatrix:i3,modelPosition:fFe,modelScale:mFe,modelViewMatrix:dp,modelViewPosition:gFe,modelViewProjection:p3,modelWorldMatrix:Qy,morph:CW,mul:ms,mx_aastep:_$,mx_cell_noise_float:G5e,mx_contrast:P5e,mx_fractal_noise_float:j5e,mx_fractal_noise_vec2:H5e,mx_fractal_noise_vec3:W5e,mx_fractal_noise_vec4:$5e,mx_hsvtorgb:S5e,mx_noise_float:I5e,mx_noise_vec2:D5e,mx_noise_vec3:U5e,mx_noise_vec4:F5e,mx_ramplr:A5e,mx_ramptb:N5e,mx_rgbtohsv:T5e,mx_safepower:O5e,mx_splitlr:R5e,mx_splittb:k5e,mx_srgb_texture_to_lin_rec709:C5e,mx_transform_uv:L5e,mx_worley_noise_float:B5e,mx_worley_noise_vec2:z5e,mx_worley_noise_vec3:V5e,negate:CH,nodeArray:up,nodeImmutable:Tt,nodeObject:Vt,nodeObjects:uS,nodeProxy:it,normalGeometry:tb,normalLocal:hp,normalMap:u3,normalView:Fl,normalWorld:sg,normalize:Uo,objectDirection:sFe,objectNormalMatrix:aFe,objectPosition:CS,objectScale:cFe,objectViewMatrix:oFe,objectViewPosition:t3,objectWorldMatrix:lFe,oneMinus:AH,or:nH,orthographicDepthToViewZ:qBe,oscSawtooth:vBe,oscSine:fBe,oscSquare:mBe,oscTriangle:gBe,output:Xj,outputStruct:aBe,overlay:v9,perspectiveDepthToViewZ:L9,pointUV:h9,positionGeometry:uo,positionLocal:ho,positionView:Ja,positionViewDirection:_n,positionWorld:s3,positionWorldDirection:o3,posterize:M9,pow:YR,pow2:VH,pow3:GH,pow4:jH,property:Oc,radians:dH,range:oze,rangeFog:Ek,reciprocal:RH,reference:Fs,reflect:UH,reflectVector:NW,refract:$H,remainder:Zj,remap:qW,remapClamp:KW,rotateUV:ZW,roughness:Jm,round:NH,sRGBToLinear:JH,sampler:ZUe,saturate:WH,saturation:b9,screen:y9,scriptable:U9,scriptableValue:db,shader:LUe,shaderStages:tj,shiftLeft:cH,shiftRight:uH,shininess:xS,sign:MH,sin:bH,skinning:EW,smoothstep:Xu,specularColor:Ul,specularMIPLevel:O3,split:OUe,spritesheetUV:QW,sqrt:vH,stack:V3,step:DH,storage:TBe,string:Ij,sub:_S,tan:wH,tangentGeometry:ib,tangentLocal:kS,tangentView:nb,tangentWorld:dW,temp:rb,texture:Dn,textureBicubic:u9,textureStore:EBe,timerDelta:hBe,timerGlobal:dBe,timerLocal:X3,toneMapping:C9,transformDirection:HH,transformedBitangentView:pW,transformedBitangentWorld:wFe,transformedClearcoatNormalView:pp,transformedNormalView:Ji,transformedNormalWorld:uW,transformedTangentView:n3,transformedTangentWorld:vFe,triplanarTexture:r9,triplanarTextures:t9,trunc:kH,tslFn:Ur,uint:yj,umat3:Rj,umat4:Oj,uniform:sn,userData:ABe,uv:Ci,uvec2:wj,uvec3:Tj,uvec4:Cj,varying:ni,vec2:$r,vec3:Kt,vec4:Xr,vectorComponents:iS,vertexIndex:UUe,vibrance:x9,viewZToOrthographicDepth:vk,viewZToPerspectiveDepth:KBe,viewport:zS,viewportBottomLeft:A9,viewportBottomRight:WBe,viewportCoordinate:GBe,viewportDepthTexture:gk,viewportMipTexture:R9,viewportResolution:jBe,viewportSharedTexture:k9,viewportTexture:N9,viewportTopLeft:VS,viewportTopRight:HBe,wgsl:eze,wgslFn:rze,xor:sH},Symbol.toStringTag,{value:"Module"})),X5e=vy.getDataURL;vy.getDataURL=function(r){return r.src?r.src:X5e(r)};function Dc(r){const e=Object.values(r);return e.forEach(t=>delete t.metadata),e}function q5e(r,e){const t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{},listeners:{}},i={};for(const o of Object.values(e))t.textures[o.uuid]=o.toJSON(t);r.traverse(o=>{if(i[o.uuid]=o,o.graph){const a=o.graph.serialize(t);delete a.metadata,o.userData.graph=a}else delete o.userData.graph});const n=r.toJSON(t);n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"};const s=o=>{if(!o.uuid)return;const a=i[o.uuid];if(a&&(a.serialize&&a.serialize(o),Array.isArray(o.children)))for(const l of o.children)s(l)};s(n.object);for(const o of Object.keys(t.materials))t.nodes[o]&&(t.materials[o]={uuid:o});return n.geometries=Dc(t.geometries),n.materials=Dc(t.materials),n.textures=Dc(t.textures),n.images=Dc(t.images),n.shapes=Dc(t.shapes),n.skeletons=Dc(t.skeletons),n.animations=Dc(t.animations),n.nodes=Dc(t.nodes),n.listeners=Dc(t.listeners),n}const M$=new WeakMap,K5e=nr.prototype.clone;nr.prototype.clone=function(r){const e=K5e.call(this,r);return M$.set(this,e),e};const gs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Y5e=Math.PI/180;function Yk(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(gs[r&255]+gs[r>>8&255]+gs[r>>16&255]+gs[r>>24&255]+"-"+gs[e&255]+gs[e>>8&255]+"-"+gs[e>>16&15|64]+gs[e>>24&255]+"-"+gs[t&63|128]+gs[t>>8&255]+"-"+gs[t>>16&255]+gs[t>>24&255]+gs[i&255]+gs[i>>8&255]+gs[i>>16&255]+gs[i>>24&255]).toLowerCase()}function xa(r,e,t){return Math.max(e,Math.min(t,r))}function pb(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return r/4294967295;case Uint16Array:return r/65535;case Uint8Array:return r/255;case Int32Array:return Math.max(r/2147483647,-1);case Int16Array:return Math.max(r/32767,-1);case Int8Array:return Math.max(r/127,-1);default:throw new Error("Invalid component type.")}}function fo(r,e){switch(e.constructor){case Float32Array:return r;case Uint32Array:return Math.round(r*4294967295);case Uint16Array:return Math.round(r*65535);case Uint8Array:return Math.round(r*255);case Int32Array:return Math.round(r*2147483647);case Int16Array:return Math.round(r*32767);case Int8Array:return Math.round(r*127);default:throw new Error("Invalid component type.")}}class fb{constructor(e=0,t=0,i=0,n=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=n}static slerpFlat(e,t,i,n,s,o,a){let l=i[n+0],c=i[n+1],u=i[n+2],d=i[n+3];const h=s[o+0],p=s[o+1],f=s[o+2],m=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d;return}if(a===1){e[t+0]=h,e[t+1]=p,e[t+2]=f,e[t+3]=m;return}if(d!==m||l!==h||c!==p||u!==f){let g=1-a;const v=l*h+c*p+u*f+d*m,x=v>=0?1:-1,b=1-v*v;if(b>Number.EPSILON){const _=Math.sqrt(b),S=Math.atan2(_,v*x);g=Math.sin(g*S)/_,a=Math.sin(a*S)/_}const w=a*x;if(l=l*g+h*w,c=c*g+p*w,u=u*g+f*w,d=d*g+m*w,g===1-a){const _=1/Math.sqrt(l*l+c*c+u*u+d*d);l*=_,c*=_,u*=_,d*=_}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=d}static multiplyQuaternionsFlat(e,t,i,n,s,o){const a=i[n],l=i[n+1],c=i[n+2],u=i[n+3],d=s[o],h=s[o+1],p=s[o+2],f=s[o+3];return e[t]=a*f+u*d+l*p-c*h,e[t+1]=l*f+u*h+c*d-a*p,e[t+2]=c*f+u*p+a*h-l*d,e[t+3]=u*f-a*d-l*h-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,n=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(n/2),d=a(s/2),h=l(i/2),p=l(n/2),f=l(s/2);switch(o){case"XYZ":this._x=h*u*d+c*p*f,this._y=c*p*d-h*u*f,this._z=c*u*f+h*p*d,this._w=c*u*d-h*p*f;break;case"YXZ":this._x=h*u*d+c*p*f,this._y=c*p*d-h*u*f,this._z=c*u*f-h*p*d,this._w=c*u*d+h*p*f;break;case"ZXY":this._x=h*u*d-c*p*f,this._y=c*p*d+h*u*f,this._z=c*u*f+h*p*d,this._w=c*u*d-h*p*f;break;case"ZYX":this._x=h*u*d-c*p*f,this._y=c*p*d+h*u*f,this._z=c*u*f-h*p*d,this._w=c*u*d+h*p*f;break;case"YZX":this._x=h*u*d+c*p*f,this._y=c*p*d+h*u*f,this._z=c*u*f-h*p*d,this._w=c*u*d-h*p*f;break;case"XZY":this._x=h*u*d-c*p*f,this._y=c*p*d-h*u*f,this._z=c*u*f+h*p*d,this._w=c*u*d+h*p*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,n=Math.sin(i);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],n=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],d=t[10],h=i+a+d;if(h>0){const p=.5/Math.sqrt(h+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(o-n)*p}else if(i>a&&i>d){const p=2*Math.sqrt(1+i-a-d);this._w=(u-l)/p,this._x=.25*p,this._y=(n+o)/p,this._z=(s+c)/p}else if(a>d){const p=2*Math.sqrt(1+a-i-d);this._w=(s-c)/p,this._x=(n+o)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+d-i-a);this._w=(o-n)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(xa(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const n=Math.min(1,t/i);return this.slerp(e,n),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,n=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+n*c-s*l,this._y=n*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-n*a,this._w=o*u-i*a-n*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,n=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+n*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=n,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-t;return this._w=p*o+t*this._w,this._x=p*i+t*this._x,this._y=p*n+t*this._y,this._z=p*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),d=Math.sin((1-t)*u)/c,h=Math.sin(t*u)/c;return this._w=o*d+this._w*h,this._x=i*d+this._x*h,this._y=n*d+this._y*h,this._z=s*d+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),n=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(n),i*Math.sin(s),i*Math.cos(s),t*Math.sin(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ze{constructor(e=0,t=0,i=0){Ze.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(E$.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(E$.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*n,this.y=s[1]*t+s[4]*i+s[7]*n,this.z=s[2]*t+s[5]*i+s[8]*n,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,n=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*n+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*n+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*n+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*n+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,n=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=l*t+o*n-a*i,u=l*i+a*t-s*n,d=l*n+s*i-o*t,h=-s*t-o*i-a*n;return this.x=c*l+h*-s+u*-a-d*-o,this.y=u*l+h*-o+d*-s-c*-a,this.z=d*l+h*-a+c*-o-u*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,n=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*n,this.y=s[1]*t+s[5]*i+s[9]*n,this.z=s[2]*t+s[6]*i+s[10]*n,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,n=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=n*l-s*a,this.y=s*o-i*l,this.z=i*a-n*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return Zk.copy(this).projectOnVector(e),this.sub(Zk)}reflect(e){return this.sub(Zk.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(xa(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,n=this.z-e.z;return t*t+i*i+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const n=Math.sin(t)*e;return this.x=n*Math.sin(i),this.y=Math.cos(t)*e,this.z=n*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=n,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Zk=new Ze,E$=new fb;class $t{constructor(e=0,t=0){$t.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,n=e.elements;return this.x=n[0]*t+n[3]*i+n[6],this.y=n[1]*t+n[4]*i+n[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(xa(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),n=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*n+e.x,this.y=s*n+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class mb{constructor(e=new Ze(1/0,1/0,1/0),t=new Ze(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Fc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Fc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Fc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),gg.copy(e.boundingBox),gg.applyMatrix4(e.matrixWorld),this.union(gg);else{const n=e.geometry;if(n!==void 0)if(t&&n.attributes!==void 0&&n.attributes.position!==void 0){const s=n.attributes.position;for(let o=0,a=s.count;o<a;o++)Fc.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Fc)}else n.boundingBox===null&&n.computeBoundingBox(),gg.copy(n.boundingBox),gg.applyMatrix4(e.matrixWorld),this.union(gg)}const i=e.children;for(let n=0,s=i.length;n<s;n++)this.expandByObject(i[n],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Fc),Fc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(gb),qS.subVectors(this.max,gb),vg.subVectors(e.a,gb),yg.subVectors(e.b,gb),bg.subVectors(e.c,gb),Ju.subVectors(yg,vg),Qu.subVectors(bg,yg),bp.subVectors(vg,bg);let t=[0,-Ju.z,Ju.y,0,-Qu.z,Qu.y,0,-bp.z,bp.y,Ju.z,0,-Ju.x,Qu.z,0,-Qu.x,bp.z,0,-bp.x,-Ju.y,Ju.x,0,-Qu.y,Qu.x,0,-bp.y,bp.x,0];return!Jk(t,vg,yg,bg,qS)||(t=[1,0,0,0,1,0,0,0,1],!Jk(t,vg,yg,bg,qS))?!1:(KS.crossVectors(Ju,Qu),t=[KS.x,KS.y,KS.z],Jk(t,vg,yg,bg,qS))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Fc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Fc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Uc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Uc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Uc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Uc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Uc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Uc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Uc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Uc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Uc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Uc=[new Ze,new Ze,new Ze,new Ze,new Ze,new Ze,new Ze,new Ze],Fc=new Ze,gg=new mb,vg=new Ze,yg=new Ze,bg=new Ze,Ju=new Ze,Qu=new Ze,bp=new Ze,gb=new Ze,qS=new Ze,KS=new Ze,xp=new Ze;function Jk(r,e,t,i,n){for(let s=0,o=r.length-3;s<=o;s+=3){xp.fromArray(r,s);const a=n.x*Math.abs(xp.x)+n.y*Math.abs(xp.y)+n.z*Math.abs(xp.z),l=e.dot(xp),c=t.dot(xp),u=i.dot(xp);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}class C${addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const n=i.indexOf(t);n!==-1&&i.splice(n,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const i=t.slice(0);for(let n=0,s=i.length;n<s;n++)i[n].call(this,e);e.target=null}}}const Z5e=1015,A$=35044,YS=2e3,N$=2001,un=new Ze,ZS=new $t;class xg{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=A$,this.updateRange={offset:0,count:-1},this.gpuType=Z5e,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let n=0,s=this.itemSize;n<s;n++)this.array[e+n]=t.array[i+n];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)ZS.fromBufferAttribute(this,t),ZS.applyMatrix3(e),this.setXY(t,ZS.x,ZS.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)un.fromBufferAttribute(this,t),un.applyMatrix3(e),this.setXYZ(t,un.x,un.y,un.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)un.fromBufferAttribute(this,t),un.applyMatrix4(e),this.setXYZ(t,un.x,un.y,un.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)un.fromBufferAttribute(this,t),un.applyNormalMatrix(e),this.setXYZ(t,un.x,un.y,un.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)un.fromBufferAttribute(this,t),un.transformDirection(e),this.setXYZ(t,un.x,un.y,un.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=pb(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=fo(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=pb(t,this.array)),t}setX(e,t){return this.normalized&&(t=fo(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=pb(t,this.array)),t}setY(e,t){return this.normalized&&(t=fo(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=pb(t,this.array)),t}setZ(e,t){return this.normalized&&(t=fo(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=pb(t,this.array)),t}setW(e,t){return this.normalized&&(t=fo(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=fo(t,this.array),i=fo(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,n){return e*=this.itemSize,this.normalized&&(t=fo(t,this.array),i=fo(i,this.array),n=fo(n,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this}setXYZW(e,t,i,n,s){return e*=this.itemSize,this.normalized&&(t=fo(t,this.array),i=fo(i,this.array),n=fo(n,this.array),s=fo(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==A$&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class J5e extends xg{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Q5e extends xg{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class wr extends xg{constructor(e,t,i){super(new Float32Array(e),t,i)}}const e6e=new mb,vb=new Ze,Qk=new Ze;let t6e=class{constructor(r=new Ze,e=-1){this.center=r,this.radius=e}set(r,e){return this.center.copy(r),this.radius=e,this}setFromPoints(r,e){const t=this.center;e!==void 0?t.copy(e):e6e.setFromPoints(r).getCenter(t);let i=0;for(let n=0,s=r.length;n<s;n++)i=Math.max(i,t.distanceToSquared(r[n]));return this.radius=Math.sqrt(i),this}copy(r){return this.center.copy(r.center),this.radius=r.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(r){return r.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(r){return r.distanceTo(this.center)-this.radius}intersectsSphere(r){const e=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=e*e}intersectsBox(r){return r.intersectsSphere(this)}intersectsPlane(r){return Math.abs(r.distanceToPoint(this.center))<=this.radius}clampPoint(r,e){const t=this.center.distanceToSquared(r);return e.copy(r),t>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(r){return this.isEmpty()?(r.makeEmpty(),r):(r.set(this.center,this.center),r.expandByScalar(this.radius),r)}applyMatrix4(r){return this.center.applyMatrix4(r),this.radius=this.radius*r.getMaxScaleOnAxis(),this}translate(r){return this.center.add(r),this}expandByPoint(r){if(this.isEmpty())return this.center.copy(r),this.radius=0,this;vb.subVectors(r,this.center);const e=vb.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),i=(t-this.radius)*.5;this.center.addScaledVector(vb,i/t),this.radius+=i}return this}union(r){return r.isEmpty()?this:this.isEmpty()?(this.copy(r),this):(this.center.equals(r.center)===!0?this.radius=Math.max(this.radius,r.radius):(Qk.subVectors(r.center,this.center).setLength(r.radius),this.expandByPoint(vb.copy(r.center).add(Qk)),this.expandByPoint(vb.copy(r.center).sub(Qk))),this)}equals(r){return r.center.equals(this.center)&&r.radius===this.radius}clone(){return new this.constructor().copy(this)}};class rl{constructor(e,t,i,n,s,o,a,l,c,u,d,h,p,f,m,g){rl.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,n,s,o,a,l,c,u,d,h,p,f,m,g)}set(e,t,i,n,s,o,a,l,c,u,d,h,p,f,m,g){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=n,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=d,v[14]=h,v[3]=p,v[7]=f,v[11]=m,v[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new rl().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,n=1/wg.setFromMatrixColumn(e,0).length(),s=1/wg.setFromMatrixColumn(e,1).length(),o=1/wg.setFromMatrixColumn(e,2).length();return t[0]=i[0]*n,t[1]=i[1]*n,t[2]=i[2]*n,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,n=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(n),c=Math.sin(n),u=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){const h=o*u,p=o*d,f=a*u,m=a*d;t[0]=l*u,t[4]=-l*d,t[8]=c,t[1]=p+f*c,t[5]=h-m*c,t[9]=-a*l,t[2]=m-h*c,t[6]=f+p*c,t[10]=o*l}else if(e.order==="YXZ"){const h=l*u,p=l*d,f=c*u,m=c*d;t[0]=h+m*a,t[4]=f*a-p,t[8]=o*c,t[1]=o*d,t[5]=o*u,t[9]=-a,t[2]=p*a-f,t[6]=m+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*u,p=l*d,f=c*u,m=c*d;t[0]=h-m*a,t[4]=-o*d,t[8]=f+p*a,t[1]=p+f*a,t[5]=o*u,t[9]=m-h*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*u,p=o*d,f=a*u,m=a*d;t[0]=l*u,t[4]=f*c-p,t[8]=h*c+m,t[1]=l*d,t[5]=m*c+h,t[9]=p*c-f,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,p=o*c,f=a*l,m=a*c;t[0]=l*u,t[4]=m-h*d,t[8]=f*d+p,t[1]=d,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=p*d+f,t[10]=h-m*d}else if(e.order==="XZY"){const h=o*l,p=o*c,f=a*l,m=a*c;t[0]=l*u,t[4]=-d,t[8]=c*u,t[1]=h*d+m,t[5]=o*u,t[9]=p*d-f,t[2]=f*d-p,t[6]=a*u,t[10]=m*d+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(r6e,e,i6e)}lookAt(e,t,i){const n=this.elements;return Bo.subVectors(e,t),Bo.lengthSq()===0&&(Bo.z=1),Bo.normalize(),ed.crossVectors(i,Bo),ed.lengthSq()===0&&(Math.abs(i.z)===1?Bo.x+=1e-4:Bo.z+=1e-4,Bo.normalize(),ed.crossVectors(i,Bo)),ed.normalize(),JS.crossVectors(Bo,ed),n[0]=ed.x,n[4]=JS.x,n[8]=Bo.x,n[1]=ed.y,n[5]=JS.y,n[9]=Bo.y,n[2]=ed.z,n[6]=JS.z,n[10]=Bo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],d=i[5],h=i[9],p=i[13],f=i[2],m=i[6],g=i[10],v=i[14],x=i[3],b=i[7],w=i[11],_=i[15],S=n[0],T=n[4],M=n[8],E=n[12],C=n[1],P=n[5],A=n[9],N=n[13],R=n[2],F=n[6],B=n[10],k=n[14],z=n[3],O=n[7],V=n[11],U=n[15];return s[0]=o*S+a*C+l*R+c*z,s[4]=o*T+a*P+l*F+c*O,s[8]=o*M+a*A+l*B+c*V,s[12]=o*E+a*N+l*k+c*U,s[1]=u*S+d*C+h*R+p*z,s[5]=u*T+d*P+h*F+p*O,s[9]=u*M+d*A+h*B+p*V,s[13]=u*E+d*N+h*k+p*U,s[2]=f*S+m*C+g*R+v*z,s[6]=f*T+m*P+g*F+v*O,s[10]=f*M+m*A+g*B+v*V,s[14]=f*E+m*N+g*k+v*U,s[3]=x*S+b*C+w*R+_*z,s[7]=x*T+b*P+w*F+_*O,s[11]=x*M+b*A+w*B+_*V,s[15]=x*E+b*N+w*k+_*U,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],n=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],d=e[6],h=e[10],p=e[14],f=e[3],m=e[7],g=e[11],v=e[15];return f*(+s*l*d-n*c*d-s*a*h+i*c*h+n*a*p-i*l*p)+m*(+t*l*p-t*c*h+s*o*h-n*o*p+n*c*u-s*l*u)+g*(+t*c*d-t*a*p-s*o*d+i*o*p+s*a*u-i*c*u)+v*(-n*a*u-t*l*d+t*a*h+n*o*d-i*o*h+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],p=e[11],f=e[12],m=e[13],g=e[14],v=e[15],x=d*g*c-m*h*c+m*l*p-a*g*p-d*l*v+a*h*v,b=f*h*c-u*g*c-f*l*p+o*g*p+u*l*v-o*h*v,w=u*m*c-f*d*c+f*a*p-o*m*p-u*a*v+o*d*v,_=f*d*l-u*m*l-f*a*h+o*m*h+u*a*g-o*d*g,S=t*x+i*b+n*w+s*_;if(S===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/S;return e[0]=x*T,e[1]=(m*h*s-d*g*s-m*n*p+i*g*p+d*n*v-i*h*v)*T,e[2]=(a*g*s-m*l*s+m*n*c-i*g*c-a*n*v+i*l*v)*T,e[3]=(d*l*s-a*h*s-d*n*c+i*h*c+a*n*p-i*l*p)*T,e[4]=b*T,e[5]=(u*g*s-f*h*s+f*n*p-t*g*p-u*n*v+t*h*v)*T,e[6]=(f*l*s-o*g*s-f*n*c+t*g*c+o*n*v-t*l*v)*T,e[7]=(o*h*s-u*l*s+u*n*c-t*h*c-o*n*p+t*l*p)*T,e[8]=w*T,e[9]=(f*d*s-u*m*s-f*i*p+t*m*p+u*i*v-t*d*v)*T,e[10]=(o*m*s-f*a*s+f*i*c-t*m*c-o*i*v+t*a*v)*T,e[11]=(u*a*s-o*d*s-u*i*c+t*d*c+o*i*p-t*a*p)*T,e[12]=_*T,e[13]=(u*m*n-f*d*n+f*i*h-t*m*h-u*i*g+t*d*g)*T,e[14]=(f*a*n-o*m*n-f*i*l+t*m*l+o*i*g-t*a*g)*T,e[15]=(o*d*n-u*a*n+u*i*l-t*d*l-o*i*h+t*a*h)*T,this}scale(e){const t=this.elements,i=e.x,n=e.y,s=e.z;return t[0]*=i,t[4]*=n,t[8]*=s,t[1]*=i,t[5]*=n,t[9]*=s,t[2]*=i,t[6]*=n,t[10]*=s,t[3]*=i,t[7]*=n,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,n))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),n=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-n*l,c*l+n*a,0,c*a+n*l,u*a+i,u*l-n*o,0,c*l-n*a,u*l+n*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,n,s,o){return this.set(1,i,s,0,e,1,o,0,t,n,1,0,0,0,0,1),this}compose(e,t,i){const n=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,d=a+a,h=s*c,p=s*u,f=s*d,m=o*u,g=o*d,v=a*d,x=l*c,b=l*u,w=l*d,_=i.x,S=i.y,T=i.z;return n[0]=(1-(m+v))*_,n[1]=(p+w)*_,n[2]=(f-b)*_,n[3]=0,n[4]=(p-w)*S,n[5]=(1-(h+v))*S,n[6]=(g+x)*S,n[7]=0,n[8]=(f+b)*T,n[9]=(g-x)*T,n[10]=(1-(h+m))*T,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this}decompose(e,t,i){const n=this.elements;let s=wg.set(n[0],n[1],n[2]).length();const o=wg.set(n[4],n[5],n[6]).length(),a=wg.set(n[8],n[9],n[10]).length();this.determinant()<0&&(s=-s),e.x=n[12],e.y=n[13],e.z=n[14],il.copy(this);const l=1/s,c=1/o,u=1/a;return il.elements[0]*=l,il.elements[1]*=l,il.elements[2]*=l,il.elements[4]*=c,il.elements[5]*=c,il.elements[6]*=c,il.elements[8]*=u,il.elements[9]*=u,il.elements[10]*=u,t.setFromRotationMatrix(il),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,n,s,o,a=YS){const l=this.elements,c=2*s/(t-e),u=2*s/(i-n),d=(t+e)/(t-e),h=(i+n)/(i-n);let p,f;if(a===YS)p=-(o+s)/(o-s),f=-2*o*s/(o-s);else if(a===N$)p=-o/(o-s),f=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=d,l[12]=0,l[1]=0,l[5]=u,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=f,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,n,s,o,a=YS){const l=this.elements,c=1/(t-e),u=1/(i-n),d=1/(o-s),h=(t+e)*c,p=(i+n)*u;let f,m;if(a===YS)f=(o+s)*d,m=-2*d;else if(a===N$)f=s*d,m=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-p,l[2]=0,l[6]=0,l[10]=m,l[14]=-f,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<16;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const wg=new Ze,il=new rl,r6e=new Ze(0,0,0),i6e=new Ze(1,1,1),ed=new Ze,JS=new Ze,Bo=new Ze,R$=new rl,k$=new fb;class QS{constructor(e=0,t=0,i=0,n=QS.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=n}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,n=this._order){return this._x=e,this._y=t,this._z=i,this._order=n,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const n=e.elements,s=n[0],o=n[4],a=n[8],l=n[1],c=n[5],u=n[9],d=n[2],h=n[6],p=n[10];switch(t){case"XYZ":this._y=Math.asin(xa(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-xa(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(xa(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-xa(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(h,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(xa(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-xa(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return R$.makeRotationFromQuaternion(e),this.setFromRotationMatrix(R$,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return k$.setFromEuler(this),this.setFromQuaternion(k$,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}QS.DEFAULT_ORDER="XYZ";class n6e{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}class yb{constructor(e,t,i,n,s,o,a,l,c){yb.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,n,s,o,a,l,c)}set(e,t,i,n,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=n,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,n=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],d=i[7],h=i[2],p=i[5],f=i[8],m=n[0],g=n[3],v=n[6],x=n[1],b=n[4],w=n[7],_=n[2],S=n[5],T=n[8];return s[0]=o*m+a*x+l*_,s[3]=o*g+a*b+l*S,s[6]=o*v+a*w+l*T,s[1]=c*m+u*x+d*_,s[4]=c*g+u*b+d*S,s[7]=c*v+u*w+d*T,s[2]=h*m+p*x+f*_,s[5]=h*g+p*b+f*S,s[8]=h*v+p*w+f*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+n*s*c-n*o*l}invert(){const e=this.elements,t=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=u*o-a*c,h=a*l-u*s,p=c*s-o*l,f=t*d+i*h+n*p;if(f===0)return this.set(0,0,0,0,0,0,0,0,0);const m=1/f;return e[0]=d*m,e[1]=(n*c-u*i)*m,e[2]=(a*i-n*o)*m,e[3]=h*m,e[4]=(u*t-n*l)*m,e[5]=(n*s-a*t)*m,e[6]=p*m,e[7]=(i*l-c*t)*m,e[8]=(o*t-i*s)*m,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,n,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-n*c,n*l,-n*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(eL.makeScale(e,t)),this}rotate(e){return this.premultiply(eL.makeRotation(-e)),this}translate(e,t){return this.premultiply(eL.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let n=0;n<9;n++)if(t[n]!==i[n])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const eL=new yb;let s6e=0;const L$=new Ze,_g=new fb,Bc=new rl,e2=new Ze,bb=new Ze,o6e=new Ze,a6e=new fb,O$=new Ze(1,0,0),P$=new Ze(0,1,0),I$=new Ze(0,0,1),l6e={type:"added"},c6e={type:"removed"};class td extends C${constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:s6e++}),this.uuid=Yk(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=td.DEFAULT_UP.clone();const e=new Ze,t=new QS,i=new fb,n=new Ze(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new rl},normalMatrix:{value:new yb}}),this.matrix=new rl,this.matrixWorld=new rl,this.matrixAutoUpdate=td.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=td.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new n6e,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return _g.setFromAxisAngle(e,t),this.quaternion.multiply(_g),this}rotateOnWorldAxis(e,t){return _g.setFromAxisAngle(e,t),this.quaternion.premultiply(_g),this}rotateX(e){return this.rotateOnAxis(O$,e)}rotateY(e){return this.rotateOnAxis(P$,e)}rotateZ(e){return this.rotateOnAxis(I$,e)}translateOnAxis(e,t){return L$.copy(e).applyQuaternion(this.quaternion),this.position.add(L$.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(O$,e)}translateY(e){return this.translateOnAxis(P$,e)}translateZ(e){return this.translateOnAxis(I$,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Bc.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?e2.copy(e):e2.set(e,t,i);const n=this.parent;this.updateWorldMatrix(!0,!1),bb.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Bc.lookAt(bb,e2,this.up):Bc.lookAt(e2,bb,this.up),this.quaternion.setFromRotationMatrix(Bc),n&&(Bc.extractRotation(n.matrixWorld),_g.setFromRotationMatrix(Bc),this.quaternion.premultiply(_g.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(l6e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(c6e)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Bc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Bc.multiply(e.parent.matrixWorld)),e.applyMatrix4(Bc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,n=this.children.length;i<n;i++){const s=this.children[i].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let n=0,s=this.children.length;n<s;n++){const o=this.children[n].getObjectsByProperty(e,t);o.length>0&&(i=i.concat(o))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bb,e,o6e),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(bb,a6e,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,n=t.length;i<n;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,n=t.length;i<n;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const n=this.children;for(let s=0,o=n.length;s<o;s++){const a=n[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const n={};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.castShadow===!0&&(n.castShadow=!0),this.receiveShadow===!0&&(n.receiveShadow=!0),this.visible===!1&&(n.visible=!1),this.frustumCulled===!1&&(n.frustumCulled=!1),this.renderOrder!==0&&(n.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),n.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(n.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?n.background=this.background.toJSON():this.background.isTexture&&(n.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(n.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){n.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const d=l[c];s(e.shapes,d)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(n.bindMode=this.bindMode,n.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),n.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));n.material=a}else n.material=s(e.materials,this.material);if(this.children.length>0){n.children=[];for(let a=0;a<this.children.length;a++)n.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){n.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];n.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),d=o(e.shapes),h=o(e.skeletons),p=o(e.animations),f=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),d.length>0&&(i.shapes=d),h.length>0&&(i.skeletons=h),p.length>0&&(i.animations=p),f.length>0&&(i.nodes=f)}return i.object=n,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const n=e.children[i];this.add(n.clone())}return this}}td.DEFAULT_UP=new Ze(0,1,0),td.DEFAULT_MATRIX_AUTO_UPDATE=!0,td.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;function u6e(r){if(r.length===0)return 1/0;let e=r[0];for(let t=1,i=r.length;t<i;++t)r[t]<e&&(e=r[t]);return e}function d6e(r){if(r.length===0)return-1/0;let e=r[0];for(let t=1,i=r.length;t<i;++t)r[t]>e&&(e=r[t]);return e}function D$(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}const h6e={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function p6e(r,e){return new h6e[r](e)}function U$(r){return document.createElementNS("http://www.w3.org/1999/xhtml",r)}function f6e(){const r=U$("canvas");return r.style.display="block",r}const F$={};function m6e(r){r in F$||(F$[r]=!0,console.warn(r))}const g6e=Object.freeze(Object.defineProperty({__proto__:null,arrayMax:d6e,arrayMin:u6e,arrayNeedsUint32:D$,createCanvasElement:f6e,createElementNS:U$,getTypedArray:p6e,warnOnce:m6e},Symbol.toStringTag,{value:"Module"}));let v6e=0;const wa=new rl,tL=new td,Sg=new Ze,zo=new mb,xb=new mb,Fn=new Ze;class Qn extends C${constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:v6e++}),this.uuid=Yk(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(D$(e)?Q5e:J5e)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new yb().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const n=this.attributes.tangent;return n!==void 0&&(n.transformDirection(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return wa.makeRotationFromQuaternion(e),this.applyMatrix4(wa),this}rotateX(e){return wa.makeRotationX(e),this.applyMatrix4(wa),this}rotateY(e){return wa.makeRotationY(e),this.applyMatrix4(wa),this}rotateZ(e){return wa.makeRotationZ(e),this.applyMatrix4(wa),this}translate(e,t,i){return wa.makeTranslation(e,t,i),this.applyMatrix4(wa),this}scale(e,t,i){return wa.makeScale(e,t,i),this.applyMatrix4(wa),this}lookAt(e){return tL.lookAt(e),tL.updateMatrix(),this.applyMatrix4(tL.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Sg).negate(),this.translate(Sg.x,Sg.y,Sg.z),this}setFromPoints(e){const t=[];for(let i=0,n=e.length;i<n;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new wr(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new mb);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Ze(-1/0,-1/0,-1/0),new Ze(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,n=t.length;i<n;i++){const s=t[i];zo.setFromBufferAttribute(s),this.morphTargetsRelative?(Fn.addVectors(this.boundingBox.min,zo.min),this.boundingBox.expandByPoint(Fn),Fn.addVectors(this.boundingBox.max,zo.max),this.boundingBox.expandByPoint(Fn)):(this.boundingBox.expandByPoint(zo.min),this.boundingBox.expandByPoint(zo.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new t6e);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Ze,1/0);return}if(e){const i=this.boundingSphere.center;if(zo.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];xb.setFromBufferAttribute(a),this.morphTargetsRelative?(Fn.addVectors(zo.min,xb.min),zo.expandByPoint(Fn),Fn.addVectors(zo.max,xb.max),zo.expandByPoint(Fn)):(zo.expandByPoint(xb.min),zo.expandByPoint(xb.max))}zo.getCenter(i);let n=0;for(let s=0,o=e.count;s<o;s++)Fn.fromBufferAttribute(e,s),n=Math.max(n,i.distanceToSquared(Fn));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Fn.fromBufferAttribute(a,c),l&&(Sg.fromBufferAttribute(e,c),Fn.add(Sg)),n=Math.max(n,i.distanceToSquared(Fn))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,n=t.position.array,s=t.normal.array,o=t.uv.array,a=n.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new xg(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,c=[],u=[];for(let C=0;C<a;C++)c[C]=new Ze,u[C]=new Ze;const d=new Ze,h=new Ze,p=new Ze,f=new $t,m=new $t,g=new $t,v=new Ze,x=new Ze;function b(C,P,A){d.fromArray(n,C*3),h.fromArray(n,P*3),p.fromArray(n,A*3),f.fromArray(o,C*2),m.fromArray(o,P*2),g.fromArray(o,A*2),h.sub(d),p.sub(d),m.sub(f),g.sub(f);const N=1/(m.x*g.y-g.x*m.y);isFinite(N)&&(v.copy(h).multiplyScalar(g.y).addScaledVector(p,-m.y).multiplyScalar(N),x.copy(p).multiplyScalar(m.x).addScaledVector(h,-g.x).multiplyScalar(N),c[C].add(v),c[P].add(v),c[A].add(v),u[C].add(x),u[P].add(x),u[A].add(x))}let w=this.groups;w.length===0&&(w=[{start:0,count:i.length}]);for(let C=0,P=w.length;C<P;++C){const A=w[C],N=A.start,R=A.count;for(let F=N,B=N+R;F<B;F+=3)b(i[F+0],i[F+1],i[F+2])}const _=new Ze,S=new Ze,T=new Ze,M=new Ze;function E(C){T.fromArray(s,C*3),M.copy(T);const P=c[C];_.copy(P),_.sub(T.multiplyScalar(T.dot(P))).normalize(),S.crossVectors(M,P);const A=S.dot(u[C])<0?-1:1;l[C*4]=_.x,l[C*4+1]=_.y,l[C*4+2]=_.z,l[C*4+3]=A}for(let C=0,P=w.length;C<P;++C){const A=w[C],N=A.start,R=A.count;for(let F=N,B=N+R;F<B;F+=3)E(i[F+0]),E(i[F+1]),E(i[F+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new xg(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,p=i.count;h<p;h++)i.setXYZ(h,0,0,0);const n=new Ze,s=new Ze,o=new Ze,a=new Ze,l=new Ze,c=new Ze,u=new Ze,d=new Ze;if(e)for(let h=0,p=e.count;h<p;h+=3){const f=e.getX(h+0),m=e.getX(h+1),g=e.getX(h+2);n.fromBufferAttribute(t,f),s.fromBufferAttribute(t,m),o.fromBufferAttribute(t,g),u.subVectors(o,s),d.subVectors(n,s),u.cross(d),a.fromBufferAttribute(i,f),l.fromBufferAttribute(i,m),c.fromBufferAttribute(i,g),a.add(u),l.add(u),c.add(u),i.setXYZ(f,a.x,a.y,a.z),i.setXYZ(m,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let h=0,p=t.count;h<p;h+=3)n.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),u.subVectors(o,s),d.subVectors(n,s),u.cross(d),i.setXYZ(h+0,u.x,u.y,u.z),i.setXYZ(h+1,u.x,u.y,u.z),i.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Fn.fromBufferAttribute(e,t),Fn.normalize(),e.setXYZ(t,Fn.x,Fn.y,Fn.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,d=a.normalized,h=new c.constructor(l.length*u);let p=0,f=0;for(let m=0,g=l.length;m<g;m++){a.isInterleavedBufferAttribute?p=l[m]*a.data.stride+a.offset:p=l[m]*u;for(let v=0;v<u;v++)h[f++]=c[p++]}return new xg(h,u,d)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Qn,i=this.index.array,n=this.attributes;for(const a in n){const l=n[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,d=c.length;u<d;u++){const h=c[u],p=e(h,i);l.push(p)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const n={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d];u.push(p.toJSON(e.data))}u.length>0&&(n[l]=u,s=!0)}s&&(e.data.morphAttributes=n,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const n=e.attributes;for(const c in n){const u=n[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],d=s[c];for(let h=0,p=d.length;h<p;h++)u.push(d[h].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const d=o[c];this.addGroup(d.start,d.count,d.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}class rL extends Qn{constructor(e=1,t=1,i=1,n=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:s,depthSegments:o};const a=this;n=Math.floor(n),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],d=[];let h=0,p=0;f("z","y","x",-1,-1,i,t,e,o,s,0),f("z","y","x",1,-1,i,t,-e,o,s,1),f("x","z","y",1,1,e,i,t,n,o,2),f("x","z","y",1,-1,e,i,-t,n,o,3),f("x","y","z",1,-1,e,t,i,n,s,4),f("x","y","z",-1,-1,e,t,-i,n,s,5),this.setIndex(l),this.setAttribute("position",new wr(c,3)),this.setAttribute("normal",new wr(u,3)),this.setAttribute("uv",new wr(d,2));function f(m,g,v,x,b,w,_,S,T,M,E){const C=w/T,P=_/M,A=w/2,N=_/2,R=S/2,F=T+1,B=M+1;let k=0,z=0;const O=new Ze;for(let V=0;V<B;V++){const U=V*P-N;for(let G=0;G<F;G++){const X=G*C-A;O[m]=X*x,O[g]=U*b,O[v]=R,c.push(O.x,O.y,O.z),O[m]=0,O[g]=0,O[v]=S>0?1:-1,u.push(O.x,O.y,O.z),d.push(G/T),d.push(1-V/M),k+=1}}for(let V=0;V<M;V++)for(let U=0;U<T;U++){const G=h+U+F*V,X=h+U+F*(V+1),ie=h+(U+1)+F*(V+1),se=h+(U+1)+F*V;l.push(G,X,se),l.push(X,ie,se),z+=6}a.addGroup(p,z,E),p+=z,h+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rL(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}class Bl{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,n=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(n),t.push(s),n=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let n=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(n=Math.floor(a+(l-a)/2),c=i[n]-o,c<0)a=n+1;else if(c>0)l=n-1;else{l=n;break}if(n=l,i[n]===o)return n/(s-1);const u=i[n],d=i[n+1]-u,h=(o-u)/d;return(n+h)/(s-1)}getTangent(e,t){let i=e-1e-4,n=e+1e-4;i<0&&(i=0),n>1&&(n=1);const s=this.getPoint(i),o=this.getPoint(n),a=t||(s.isVector2?new $t:new Ze);return a.copy(o).sub(s).normalize(),a}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new Ze,n=[],s=[],o=[],a=new Ze,l=new rl;for(let p=0;p<=e;p++){const f=p/e;n[p]=this.getTangentAt(f,new Ze)}s[0]=new Ze,o[0]=new Ze;let c=Number.MAX_VALUE;const u=Math.abs(n[0].x),d=Math.abs(n[0].y),h=Math.abs(n[0].z);u<=c&&(c=u,i.set(1,0,0)),d<=c&&(c=d,i.set(0,1,0)),h<=c&&i.set(0,0,1),a.crossVectors(n[0],i).normalize(),s[0].crossVectors(n[0],a),o[0].crossVectors(n[0],s[0]);for(let p=1;p<=e;p++){if(s[p]=s[p-1].clone(),o[p]=o[p-1].clone(),a.crossVectors(n[p-1],n[p]),a.length()>Number.EPSILON){a.normalize();const f=Math.acos(xa(n[p-1].dot(n[p]),-1,1));s[p].applyMatrix4(l.makeRotationAxis(a,f))}o[p].crossVectors(n[p],s[p])}if(t===!0){let p=Math.acos(xa(s[0].dot(s[e]),-1,1));p/=e,n[0].dot(a.crossVectors(s[0],s[e]))>0&&(p=-p);for(let f=1;f<=e;f++)s[f].applyMatrix4(l.makeRotationAxis(n[f],p*f)),o[f].crossVectors(n[f],s[f])}return{tangents:n,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class iL extends Bl{constructor(e=0,t=0,i=1,n=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=n,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const i=t||new $t,n=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=n;for(;s>n;)s-=n;s<Number.EPSILON&&(o?s=0:s=n),this.aClockwise===!0&&!o&&(s===n?s=-n:s=s-n);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),d=Math.sin(this.aRotation),h=l-this.aX,p=c-this.aY;l=h*u-p*d+this.aX,c=h*d+p*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class y6e extends iL{constructor(e,t,i,n,s,o){super(e,t,i,i,n,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function nL(){let r=0,e=0,t=0,i=0;function n(s,o,a,l){r=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){n(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,d){let h=(o-s)/c-(a-s)/(c+u)+(a-o)/u,p=(a-o)/u-(l-o)/(u+d)+(l-a)/d;h*=u,p*=u,n(o,a,h,p)},calc:function(s){const o=s*s,a=o*s;return r+e*s+t*o+i*a}}}const t2=new Ze,sL=new nL,oL=new nL,aL=new nL;class b6e extends Bl{constructor(e=[],t=!1,i="centripetal",n=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=n}getPoint(e,t=new Ze){const i=t,n=this.points,s=n.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=n[(a-1)%s]:(t2.subVectors(n[0],n[1]).add(n[0]),c=t2);const d=n[a%s],h=n[(a+1)%s];if(this.closed||a+2<s?u=n[(a+2)%s]:(t2.subVectors(n[s-1],n[s-2]).add(n[s-1]),u=t2),this.curveType==="centripetal"||this.curveType==="chordal"){const p=this.curveType==="chordal"?.5:.25;let f=Math.pow(c.distanceToSquared(d),p),m=Math.pow(d.distanceToSquared(h),p),g=Math.pow(h.distanceToSquared(u),p);m<1e-4&&(m=1),f<1e-4&&(f=m),g<1e-4&&(g=m),sL.initNonuniformCatmullRom(c.x,d.x,h.x,u.x,f,m,g),oL.initNonuniformCatmullRom(c.y,d.y,h.y,u.y,f,m,g),aL.initNonuniformCatmullRom(c.z,d.z,h.z,u.z,f,m,g)}else this.curveType==="catmullrom"&&(sL.initCatmullRom(c.x,d.x,h.x,u.x,this.tension),oL.initCatmullRom(c.y,d.y,h.y,u.y,this.tension),aL.initCatmullRom(c.z,d.z,h.z,u.z,this.tension));return i.set(sL.calc(l),oL.calc(l),aL.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const n=e.points[t];this.points.push(new Ze().fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function B$(r,e,t,i,n){const s=(i-e)*.5,o=(n-t)*.5,a=r*r,l=r*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*r+t}function x6e(r,e){const t=1-r;return t*t*e}function w6e(r,e){return 2*(1-r)*r*e}function _6e(r,e){return r*r*e}function wb(r,e,t,i){return x6e(r,e)+w6e(r,t)+_6e(r,i)}function S6e(r,e){const t=1-r;return t*t*t*e}function T6e(r,e){const t=1-r;return 3*t*t*r*e}function M6e(r,e){return 3*(1-r)*r*r*e}function E6e(r,e){return r*r*r*e}function _b(r,e,t,i,n){return S6e(r,e)+T6e(r,t)+M6e(r,i)+E6e(r,n)}class z$ extends Bl{constructor(e=new $t,t=new $t,i=new $t,n=new $t){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e,t=new $t){const i=t,n=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(_b(e,n.x,s.x,o.x,a.x),_b(e,n.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class C6e extends Bl{constructor(e=new Ze,t=new Ze,i=new Ze,n=new Ze){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=n}getPoint(e,t=new Ze){const i=t,n=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(_b(e,n.x,s.x,o.x,a.x),_b(e,n.y,s.y,o.y,a.y),_b(e,n.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class V$ extends Bl{constructor(e=new $t,t=new $t){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new $t){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new $t){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class A6e extends Bl{constructor(e=new Ze,t=new Ze){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Ze){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ze){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class G$ extends Bl{constructor(e=new $t,t=new $t,i=new $t){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new $t){const i=t,n=this.v0,s=this.v1,o=this.v2;return i.set(wb(e,n.x,s.x,o.x),wb(e,n.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class j$ extends Bl{constructor(e=new Ze,t=new Ze,i=new Ze){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ze){const i=t,n=this.v0,s=this.v1,o=this.v2;return i.set(wb(e,n.x,s.x,o.x),wb(e,n.y,s.y,o.y),wb(e,n.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class H$ extends Bl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new $t){const i=t,n=this.points,s=(n.length-1)*e,o=Math.floor(s),a=s-o,l=n[o===0?o:o-1],c=n[o],u=n[o>n.length-2?n.length-1:o+1],d=n[o>n.length-3?n.length-1:o+2];return i.set(B$(a,l.x,c.x,u.x,d.x),B$(a,l.y,c.y,u.y,d.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const n=e.points[t];this.points.push(new $t().fromArray(n))}return this}}const r2=Object.freeze(Object.defineProperty({__proto__:null,ArcCurve:y6e,CatmullRomCurve3:b6e,CubicBezierCurve:z$,CubicBezierCurve3:C6e,EllipseCurve:iL,LineCurve:V$,LineCurve3:A6e,QuadraticBezierCurve:G$,QuadraticBezierCurve3:j$,SplineCurve:H$},Symbol.toStringTag,{value:"Module"}));class N6e extends Bl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new r2[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),n=this.getCurveLengths();let s=0;for(;s<n.length;){if(n[s]>=i){const o=n[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,n=this.curves.length;i<n;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let n=0,s=this.curves;n<s.length;n++){const o=s[n],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const n=e.curves[t];this.curves.push(new r2[n.type]().fromJSON(n))}return this}}class lL extends N6e{constructor(e){super(),this.type="Path",this.currentPoint=new $t,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new V$(this.currentPoint.clone(),new $t(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,n){const s=new G$(this.currentPoint.clone(),new $t(e,t),new $t(i,n));return this.curves.push(s),this.currentPoint.set(i,n),this}bezierCurveTo(e,t,i,n,s,o){const a=new z$(this.currentPoint.clone(),new $t(e,t),new $t(i,n),new $t(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new H$(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,n,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,n,s,o),this}absarc(e,t,i,n,s,o){return this.absellipse(e,t,i,i,n,s,o),this}ellipse(e,t,i,n,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,n,s,o,a,l),this}absellipse(e,t,i,n,s,o,a,l){const c=new iL(e,t,i,n,s,o,a,l);if(this.curves.length>0){const d=c.getPoint(0);d.equals(this.currentPoint)||this.lineTo(d.x,d.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class i2 extends Qn{constructor(e=[new $t(0,-.5),new $t(.5,0),new $t(0,.5)],t=12,i=0,n=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},t=Math.floor(t),n=xa(n,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,d=new Ze,h=new $t,p=new Ze,f=new Ze,m=new Ze;let g=0,v=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:g=e[x+1].x-e[x].x,v=e[x+1].y-e[x].y,p.x=v*1,p.y=-g,p.z=v*0,m.copy(p),p.normalize(),l.push(p.x,p.y,p.z);break;case e.length-1:l.push(m.x,m.y,m.z);break;default:g=e[x+1].x-e[x].x,v=e[x+1].y-e[x].y,p.x=v*1,p.y=-g,p.z=v*0,f.copy(p),p.x+=m.x,p.y+=m.y,p.z+=m.z,p.normalize(),l.push(p.x,p.y,p.z),m.copy(f)}for(let x=0;x<=t;x++){const b=i+x*u*n,w=Math.sin(b),_=Math.cos(b);for(let S=0;S<=e.length-1;S++){d.x=e[S].x*w,d.y=e[S].y,d.z=e[S].x*_,o.push(d.x,d.y,d.z),h.x=x/t,h.y=S/(e.length-1),a.push(h.x,h.y);const T=l[3*S+0]*w,M=l[3*S+1],E=l[3*S+0]*_;c.push(T,M,E)}}for(let x=0;x<t;x++)for(let b=0;b<e.length-1;b++){const w=b+x*e.length,_=w,S=w+e.length,T=w+e.length+1,M=w+1;s.push(_,S,M),s.push(T,M,S)}this.setIndex(s),this.setAttribute("position",new wr(o,3)),this.setAttribute("uv",new wr(a,2)),this.setAttribute("normal",new wr(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i2(e.points,e.segments,e.phiStart,e.phiLength)}}class cL extends i2{constructor(e=1,t=1,i=4,n=8){const s=new lL;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),n),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:n}}static fromJSON(e){return new cL(e.radius,e.length,e.capSegments,e.radialSegments)}}class uL extends Qn{constructor(e=1,t=32,i=0,n=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new Ze,u=new $t;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let d=0,h=3;d<=t;d++,h+=3){const p=i+d/t*n;c.x=e*Math.cos(p),c.y=e*Math.sin(p),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[h]/e+1)/2,u.y=(o[h+1]/e+1)/2,l.push(u.x,u.y)}for(let d=1;d<=t;d++)s.push(d,d+1,0);this.setIndex(s),this.setAttribute("position",new wr(o,3)),this.setAttribute("normal",new wr(a,3)),this.setAttribute("uv",new wr(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uL(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class n2 extends Qn{constructor(e=1,t=1,i=1,n=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;n=Math.floor(n),s=Math.floor(s);const u=[],d=[],h=[],p=[];let f=0;const m=[],g=i/2;let v=0;x(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(u),this.setAttribute("position",new wr(d,3)),this.setAttribute("normal",new wr(h,3)),this.setAttribute("uv",new wr(p,2));function x(){const w=new Ze,_=new Ze;let S=0;const T=(t-e)/i;for(let M=0;M<=s;M++){const E=[],C=M/s,P=C*(t-e)+e;for(let A=0;A<=n;A++){const N=A/n,R=N*l+a,F=Math.sin(R),B=Math.cos(R);_.x=P*F,_.y=-C*i+g,_.z=P*B,d.push(_.x,_.y,_.z),w.set(F,T,B).normalize(),h.push(w.x,w.y,w.z),p.push(N,1-C),E.push(f++)}m.push(E)}for(let M=0;M<n;M++)for(let E=0;E<s;E++){const C=m[E][M],P=m[E+1][M],A=m[E+1][M+1],N=m[E][M+1];u.push(C,P,N),u.push(P,A,N),S+=6}c.addGroup(v,S,0),v+=S}function b(w){const _=f,S=new $t,T=new Ze;let M=0;const E=w===!0?e:t,C=w===!0?1:-1;for(let A=1;A<=n;A++)d.push(0,g*C,0),h.push(0,C,0),p.push(.5,.5),f++;const P=f;for(let A=0;A<=n;A++){const N=A/n*l+a,R=Math.cos(N),F=Math.sin(N);T.x=E*F,T.y=g*C,T.z=E*R,d.push(T.x,T.y,T.z),h.push(0,C,0),S.x=R*.5+.5,S.y=F*.5*C+.5,p.push(S.x,S.y),f++}for(let A=0;A<n;A++){const N=_+A,R=P+A;w===!0?u.push(R,R+1,N):u.push(R+1,R,N),M+=3}c.addGroup(v,M,w===!0?1:2),v+=M}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new n2(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class dL extends n2{constructor(e=1,t=1,i=32,n=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,n,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new dL(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class wp extends Qn{constructor(e=[],t=[],i=1,n=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n};const s=[],o=[];a(n),c(i),u(),this.setAttribute("position",new wr(s,3)),this.setAttribute("normal",new wr(s.slice(),3)),this.setAttribute("uv",new wr(o,2)),n===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const b=new Ze,w=new Ze,_=new Ze;for(let S=0;S<t.length;S+=3)p(t[S+0],b),p(t[S+1],w),p(t[S+2],_),l(b,w,_,x)}function l(x,b,w,_){const S=_+1,T=[];for(let M=0;M<=S;M++){T[M]=[];const E=x.clone().lerp(w,M/S),C=b.clone().lerp(w,M/S),P=S-M;for(let A=0;A<=P;A++)A===0&&M===S?T[M][A]=E:T[M][A]=E.clone().lerp(C,A/P)}for(let M=0;M<S;M++)for(let E=0;E<2*(S-M)-1;E++){const C=Math.floor(E/2);E%2===0?(h(T[M][C+1]),h(T[M+1][C]),h(T[M][C])):(h(T[M][C+1]),h(T[M+1][C+1]),h(T[M+1][C]))}}function c(x){const b=new Ze;for(let w=0;w<s.length;w+=3)b.x=s[w+0],b.y=s[w+1],b.z=s[w+2],b.normalize().multiplyScalar(x),s[w+0]=b.x,s[w+1]=b.y,s[w+2]=b.z}function u(){const x=new Ze;for(let b=0;b<s.length;b+=3){x.x=s[b+0],x.y=s[b+1],x.z=s[b+2];const w=g(x)/2/Math.PI+.5,_=v(x)/Math.PI+.5;o.push(w,1-_)}f(),d()}function d(){for(let x=0;x<o.length;x+=6){const b=o[x+0],w=o[x+2],_=o[x+4],S=Math.max(b,w,_),T=Math.min(b,w,_);S>.9&&T<.1&&(b<.2&&(o[x+0]+=1),w<.2&&(o[x+2]+=1),_<.2&&(o[x+4]+=1))}}function h(x){s.push(x.x,x.y,x.z)}function p(x,b){const w=x*3;b.x=e[w+0],b.y=e[w+1],b.z=e[w+2]}function f(){const x=new Ze,b=new Ze,w=new Ze,_=new Ze,S=new $t,T=new $t,M=new $t;for(let E=0,C=0;E<s.length;E+=9,C+=6){x.set(s[E+0],s[E+1],s[E+2]),b.set(s[E+3],s[E+4],s[E+5]),w.set(s[E+6],s[E+7],s[E+8]),S.set(o[C+0],o[C+1]),T.set(o[C+2],o[C+3]),M.set(o[C+4],o[C+5]),_.copy(x).add(b).add(w).divideScalar(3);const P=g(_);m(S,C+0,x,P),m(T,C+2,b,P),m(M,C+4,w,P)}}function m(x,b,w,_){_<0&&x.x===1&&(o[b]=x.x-1),w.x===0&&w.z===0&&(o[b]=_/2/Math.PI+.5)}function g(x){return Math.atan2(x.z,-x.x)}function v(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wp(e.vertices,e.indices,e.radius,e.details)}}class hL extends wp{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,n=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hL(e.radius,e.detail)}}const nl=new Ze,zc=new Ze,pL=new Ze,Vc=new Ze,Tg=new Ze,Mg=new Ze,W$=new Ze,fL=new Ze,mL=new Ze,gL=new Ze;let s2=!1;class rd{constructor(e=new Ze,t=new Ze,i=new Ze){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,n){n.subVectors(i,t),nl.subVectors(e,t),n.cross(nl);const s=n.lengthSq();return s>0?n.multiplyScalar(1/Math.sqrt(s)):n.set(0,0,0)}static getBarycoord(e,t,i,n,s){nl.subVectors(n,t),zc.subVectors(i,t),pL.subVectors(e,t);const o=nl.dot(nl),a=nl.dot(zc),l=nl.dot(pL),c=zc.dot(zc),u=zc.dot(pL),d=o*c-a*a;if(d===0)return s.set(-2,-1,-1);const h=1/d,p=(c*l-a*u)*h,f=(o*u-a*l)*h;return s.set(1-p-f,f,p)}static containsPoint(e,t,i,n){return this.getBarycoord(e,t,i,n,Vc),Vc.x>=0&&Vc.y>=0&&Vc.x+Vc.y<=1}static getUV(e,t,i,n,s,o,a,l){return s2===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),s2=!0),this.getInterpolation(e,t,i,n,s,o,a,l)}static getInterpolation(e,t,i,n,s,o,a,l){return this.getBarycoord(e,t,i,n,Vc),l.setScalar(0),l.addScaledVector(s,Vc.x),l.addScaledVector(o,Vc.y),l.addScaledVector(a,Vc.z),l}static isFrontFacing(e,t,i,n){return nl.subVectors(i,t),zc.subVectors(e,t),nl.cross(zc).dot(n)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this}setFromAttributeAndIndices(e,t,i,n){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return nl.subVectors(this.c,this.b),zc.subVectors(this.a,this.b),nl.cross(zc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return rd.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return rd.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,n,s){return s2===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),s2=!0),rd.getInterpolation(e,this.a,this.b,this.c,t,i,n,s)}getInterpolation(e,t,i,n,s){return rd.getInterpolation(e,this.a,this.b,this.c,t,i,n,s)}containsPoint(e){return rd.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return rd.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,n=this.b,s=this.c;let o,a;Tg.subVectors(n,i),Mg.subVectors(s,i),fL.subVectors(e,i);const l=Tg.dot(fL),c=Mg.dot(fL);if(l<=0&&c<=0)return t.copy(i);mL.subVectors(e,n);const u=Tg.dot(mL),d=Mg.dot(mL);if(u>=0&&d<=u)return t.copy(n);const h=l*d-u*c;if(h<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Tg,o);gL.subVectors(e,s);const p=Tg.dot(gL),f=Mg.dot(gL);if(f>=0&&p<=f)return t.copy(s);const m=p*c-l*f;if(m<=0&&c>=0&&f<=0)return a=c/(c-f),t.copy(i).addScaledVector(Mg,a);const g=u*f-p*d;if(g<=0&&d-u>=0&&p-f>=0)return W$.subVectors(s,n),a=(d-u)/(d-u+(p-f)),t.copy(n).addScaledVector(W$,a);const v=1/(g+m+h);return o=m*v,a=h*v,t.copy(i).addScaledVector(Tg,o).addScaledVector(Mg,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const o2=new Ze,a2=new Ze,vL=new Ze,l2=new rd;class R6e extends Qn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),n=Math.cos(Y5e*t),s=e.getIndex(),o=e.getAttribute("position"),a=s?s.count:o.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),d={},h=[];for(let p=0;p<a;p+=3){s?(l[0]=s.getX(p),l[1]=s.getX(p+1),l[2]=s.getX(p+2)):(l[0]=p,l[1]=p+1,l[2]=p+2);const{a:f,b:m,c:g}=l2;if(f.fromBufferAttribute(o,l[0]),m.fromBufferAttribute(o,l[1]),g.fromBufferAttribute(o,l[2]),l2.getNormal(vL),u[0]=`${Math.round(f.x*i)},${Math.round(f.y*i)},${Math.round(f.z*i)}`,u[1]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,u[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let v=0;v<3;v++){const x=(v+1)%3,b=u[v],w=u[x],_=l2[c[v]],S=l2[c[x]],T=`${b}_${w}`,M=`${w}_${b}`;M in d&&d[M]?(vL.dot(d[M].normal)<=n&&(h.push(_.x,_.y,_.z),h.push(S.x,S.y,S.z)),d[M]=null):T in d||(d[T]={index0:l[v],index1:l[x],normal:vL.clone()})}}for(const p in d)if(d[p]){const{index0:f,index1:m}=d[p];o2.fromBufferAttribute(o,f),a2.fromBufferAttribute(o,m),h.push(o2.x,o2.y,o2.z),h.push(a2.x,a2.y,a2.z)}this.setAttribute("position",new wr(h,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let $$=class extends lL{constructor(r){super(r),this.uuid=Yk(),this.type="Shape",this.holes=[]}getPointsHoles(r){const e=[];for(let t=0,i=this.holes.length;t<i;t++)e[t]=this.holes[t].getPoints(r);return e}extractPoints(r){return{shape:this.getPoints(r),holes:this.getPointsHoles(r)}}copy(r){super.copy(r),this.holes=[];for(let e=0,t=r.holes.length;e<t;e++){const i=r.holes[e];this.holes.push(i.clone())}return this}toJSON(){const r=super.toJSON();r.uuid=this.uuid,r.holes=[];for(let e=0,t=this.holes.length;e<t;e++){const i=this.holes[e];r.holes.push(i.toJSON())}return r}fromJSON(r){super.fromJSON(r),this.uuid=r.uuid,this.holes=[];for(let e=0,t=r.holes.length;e<t;e++){const i=r.holes[e];this.holes.push(new lL().fromJSON(i))}return this}};const k6e={triangulate:function(r,e,t=2){const i=e&&e.length,n=i?e[0]*t:r.length;let s=X$(r,0,n,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,d,h,p;if(i&&(s=D6e(r,e,s,t)),r.length>80*t){a=c=r[0],l=u=r[1];for(let f=t;f<n;f+=t)d=r[f],h=r[f+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);p=Math.max(c-a,u-l),p=p!==0?32767/p:0}return Sb(s,o,t,a,l,p,0),o}};function X$(r,e,t,i,n){let s,o;if(n===X6e(r,e,t,i)>0)for(s=e;s<t;s+=i)o=Y$(s,r[s],r[s+1],o);else for(s=t-i;s>=e;s-=i)o=Y$(s,r[s],r[s+1],o);return o&&c2(o,o.next)&&(Mb(o),o=o.next),o}function _p(r,e){if(!r)return r;e||(e=r);let t=r,i;do if(i=!1,!t.steiner&&(c2(t,t.next)||Ii(t.prev,t,t.next)===0)){if(Mb(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Sb(r,e,t,i,n,s,o){if(!r)return;!o&&s&&V6e(r,i,n,s);let a=r,l,c;for(;r.prev!==r.next;){if(l=r.prev,c=r.next,s?O6e(r,i,n,s):L6e(r)){e.push(l.i/t|0),e.push(r.i/t|0),e.push(c.i/t|0),Mb(r),r=c.next,a=c.next;continue}if(r=c,r===a){o?o===1?(r=P6e(_p(r),e,t),Sb(r,e,t,i,n,s,2)):o===2&&I6e(r,e,t,i,n,s):Sb(_p(r),e,t,i,n,s,1);break}}}function L6e(r){const e=r.prev,t=r,i=r.next;if(Ii(e,t,i)>=0)return!1;const n=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=n<s?n<o?n:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,h=n>s?n>o?n:o:s>o?s:o,p=a>l?a>c?a:c:l>c?l:c;let f=i.next;for(;f!==e;){if(f.x>=u&&f.x<=h&&f.y>=d&&f.y<=p&&Eg(n,a,s,l,o,c,f.x,f.y)&&Ii(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function O6e(r,e,t,i){const n=r.prev,s=r,o=r.next;if(Ii(n,s,o)>=0)return!1;const a=n.x,l=s.x,c=o.x,u=n.y,d=s.y,h=o.y,p=a<l?a<c?a:c:l<c?l:c,f=u<d?u<h?u:h:d<h?d:h,m=a>l?a>c?a:c:l>c?l:c,g=u>d?u>h?u:h:d>h?d:h,v=yL(p,f,e,t,i),x=yL(m,g,e,t,i);let b=r.prevZ,w=r.nextZ;for(;b&&b.z>=v&&w&&w.z<=x;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==n&&b!==o&&Eg(a,u,l,d,c,h,b.x,b.y)&&Ii(b.prev,b,b.next)>=0||(b=b.prevZ,w.x>=p&&w.x<=m&&w.y>=f&&w.y<=g&&w!==n&&w!==o&&Eg(a,u,l,d,c,h,w.x,w.y)&&Ii(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=v;){if(b.x>=p&&b.x<=m&&b.y>=f&&b.y<=g&&b!==n&&b!==o&&Eg(a,u,l,d,c,h,b.x,b.y)&&Ii(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=x;){if(w.x>=p&&w.x<=m&&w.y>=f&&w.y<=g&&w!==n&&w!==o&&Eg(a,u,l,d,c,h,w.x,w.y)&&Ii(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function P6e(r,e,t){let i=r;do{const n=i.prev,s=i.next.next;!c2(n,s)&&q$(n,i,i.next,s)&&Tb(n,s)&&Tb(s,n)&&(e.push(n.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Mb(i),Mb(i.next),i=r=s),i=i.next}while(i!==r);return _p(i)}function I6e(r,e,t,i,n,s){let o=r;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&H6e(o,a)){let l=K$(o,a);o=_p(o,o.next),l=_p(l,l.next),Sb(o,e,t,i,n,s,0),Sb(l,e,t,i,n,s,0);return}a=a.next}o=o.next}while(o!==r)}function D6e(r,e,t,i){const n=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:r.length,c=X$(r,a,l,i,!1),c===c.next&&(c.steiner=!0),n.push(j6e(c));for(n.sort(U6e),s=0;s<n.length;s++)t=F6e(n[s],t);return t}function U6e(r,e){return r.x-e.x}function F6e(r,e){const t=B6e(r,e);if(!t)return e;const i=K$(t,r);return _p(i,i.next),_p(t,t.next)}function B6e(r,e){let t=e,i=-1/0,n;const s=r.x,o=r.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>i&&(i=h,n=t.x<t.next.x?t:t.next,h===s))return n}t=t.next}while(t!==e);if(!n)return null;const a=n,l=n.x,c=n.y;let u=1/0,d;t=n;do s>=t.x&&t.x>=l&&s!==t.x&&Eg(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),Tb(t,r)&&(d<u||d===u&&(t.x>n.x||t.x===n.x&&z6e(n,t)))&&(n=t,u=d)),t=t.next;while(t!==a);return n}function z6e(r,e){return Ii(r.prev,r,e.prev)<0&&Ii(e.next,r,r.next)<0}function V6e(r,e,t,i){let n=r;do n.z===0&&(n.z=yL(n.x,n.y,e,t,i)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==r);n.prevZ.nextZ=null,n.prevZ=null,G6e(n)}function G6e(r){let e,t,i,n,s,o,a,l,c=1;do{for(t=r,r=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(n=t,t=t.nextZ,a--):(n=i,i=i.nextZ,l--),s?s.nextZ=n:r=n,n.prevZ=s,s=n;t=i}s.nextZ=null,c*=2}while(o>1);return r}function yL(r,e,t,i,n){return r=(r-t)*n|0,e=(e-i)*n|0,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,r|e<<1}function j6e(r){let e=r,t=r;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==r);return t}function Eg(r,e,t,i,n,s,o,a){return(n-o)*(e-a)>=(r-o)*(s-a)&&(r-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(n-o)*(i-a)}function H6e(r,e){return r.next.i!==e.i&&r.prev.i!==e.i&&!W6e(r,e)&&(Tb(r,e)&&Tb(e,r)&&$6e(r,e)&&(Ii(r.prev,r,e.prev)||Ii(r,e.prev,e))||c2(r,e)&&Ii(r.prev,r,r.next)>0&&Ii(e.prev,e,e.next)>0)}function Ii(r,e,t){return(e.y-r.y)*(t.x-e.x)-(e.x-r.x)*(t.y-e.y)}function c2(r,e){return r.x===e.x&&r.y===e.y}function q$(r,e,t,i){const n=d2(Ii(r,e,t)),s=d2(Ii(r,e,i)),o=d2(Ii(t,i,r)),a=d2(Ii(t,i,e));return!!(n!==s&&o!==a||n===0&&u2(r,t,e)||s===0&&u2(r,i,e)||o===0&&u2(t,r,i)||a===0&&u2(t,e,i))}function u2(r,e,t){return e.x<=Math.max(r.x,t.x)&&e.x>=Math.min(r.x,t.x)&&e.y<=Math.max(r.y,t.y)&&e.y>=Math.min(r.y,t.y)}function d2(r){return r>0?1:r<0?-1:0}function W6e(r,e){let t=r;do{if(t.i!==r.i&&t.next.i!==r.i&&t.i!==e.i&&t.next.i!==e.i&&q$(t,t.next,r,e))return!0;t=t.next}while(t!==r);return!1}function Tb(r,e){return Ii(r.prev,r,r.next)<0?Ii(r,e,r.next)>=0&&Ii(r,r.prev,e)>=0:Ii(r,e,r.prev)<0||Ii(r,r.next,e)<0}function $6e(r,e){let t=r,i=!1;const n=(r.x+e.x)/2,s=(r.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&n<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==r);return i}function K$(r,e){const t=new bL(r.i,r.x,r.y),i=new bL(e.i,e.x,e.y),n=r.next,s=e.prev;return r.next=e,e.prev=r,t.next=n,n.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function Y$(r,e,t,i){const n=new bL(r,e,t);return i?(n.next=i.next,n.prev=i,i.next.prev=n,i.next=n):(n.prev=n,n.next=n),n}function Mb(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function bL(r,e,t){this.i=r,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function X6e(r,e,t,i){let n=0;for(let s=e,o=t-i;s<t;s+=i)n+=(r[o]-r[s])*(r[s+1]+r[o+1]),o=s;return n}class id{static area(e){const t=e.length;let i=0;for(let n=t-1,s=0;s<t;n=s++)i+=e[n].x*e[s].y-e[s].x*e[n].y;return i*.5}static isClockWise(e){return id.area(e)<0}static triangulateShape(e,t){const i=[],n=[],s=[];Z$(e),J$(i,e);let o=e.length;t.forEach(Z$);for(let l=0;l<t.length;l++)n.push(o),o+=t[l].length,J$(i,t[l]);const a=k6e.triangulate(i,n);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function Z$(r){const e=r.length;e>2&&r[e-1].equals(r[0])&&r.pop()}function J$(r,e){for(let t=0;t<e.length;t++)r.push(e[t].x),r.push(e[t].y)}class xL extends Qn{constructor(e=new $$([new $t(.5,.5),new $t(-.5,.5),new $t(-.5,-.5),new $t(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,n=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new wr(n,3)),this.setAttribute("uv",new wr(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,d=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,p=t.bevelThickness!==void 0?t.bevelThickness:.2,f=t.bevelSize!==void 0?t.bevelSize:p-.1,m=t.bevelOffset!==void 0?t.bevelOffset:0,g=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:q6e;let b,w=!1,_,S,T,M;v&&(b=v.getSpacedPoints(u),w=!0,h=!1,_=v.computeFrenetFrames(u,!1),S=new Ze,T=new Ze,M=new Ze),h||(g=0,p=0,f=0,m=0);const E=a.extractPoints(c);let C=E.shape;const P=E.holes;if(!id.isClockWise(C)){C=C.reverse();for(let Z=0,L=P.length;Z<L;Z++){const $=P[Z];id.isClockWise($)&&(P[Z]=$.reverse())}}const A=id.triangulateShape(C,P),N=C;for(let Z=0,L=P.length;Z<L;Z++){const $=P[Z];C=C.concat($)}function R(Z,L,$){return L||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(L,$)}const F=C.length,B=A.length;function k(Z,L,$){let re,te,le;const ge=Z.x-L.x,be=Z.y-L.y,_e=$.x-Z.x,pe=$.y-Z.y,Se=ge*ge+be*be,Fe=ge*pe-be*_e;if(Math.abs(Fe)>Number.EPSILON){const Y=Math.sqrt(Se),H=Math.sqrt(_e*_e+pe*pe),ne=L.x-be/Y,Le=L.y+ge/Y,Pe=$.x-pe/H,Ee=$.y+_e/H,Ue=((Pe-ne)*pe-(Ee-Le)*_e)/(ge*pe-be*_e);re=ne+ge*Ue-Z.x,te=Le+be*Ue-Z.y;const Be=re*re+te*te;if(Be<=2)return new $t(re,te);le=Math.sqrt(Be/2)}else{let Y=!1;ge>Number.EPSILON?_e>Number.EPSILON&&(Y=!0):ge<-Number.EPSILON?_e<-Number.EPSILON&&(Y=!0):Math.sign(be)===Math.sign(pe)&&(Y=!0),Y?(re=-be,te=ge,le=Math.sqrt(Se)):(re=ge,te=be,le=Math.sqrt(Se/2))}return new $t(re/le,te/le)}const z=[];for(let Z=0,L=N.length,$=L-1,re=Z+1;Z<L;Z++,$++,re++)$===L&&($=0),re===L&&(re=0),z[Z]=k(N[Z],N[$],N[re]);const O=[];let V,U=z.concat();for(let Z=0,L=P.length;Z<L;Z++){const $=P[Z];V=[];for(let re=0,te=$.length,le=te-1,ge=re+1;re<te;re++,le++,ge++)le===te&&(le=0),ge===te&&(ge=0),V[re]=k($[re],$[le],$[ge]);O.push(V),U=U.concat(V)}for(let Z=0;Z<g;Z++){const L=Z/g,$=p*Math.cos(L*Math.PI/2),re=f*Math.sin(L*Math.PI/2)+m;for(let te=0,le=N.length;te<le;te++){const ge=R(N[te],z[te],re);de(ge.x,ge.y,-$)}for(let te=0,le=P.length;te<le;te++){const ge=P[te];V=O[te];for(let be=0,_e=ge.length;be<_e;be++){const pe=R(ge[be],V[be],re);de(pe.x,pe.y,-$)}}}const G=f+m;for(let Z=0;Z<F;Z++){const L=h?R(C[Z],U[Z],G):C[Z];w?(T.copy(_.normals[0]).multiplyScalar(L.x),S.copy(_.binormals[0]).multiplyScalar(L.y),M.copy(b[0]).add(T).add(S),de(M.x,M.y,M.z)):de(L.x,L.y,0)}for(let Z=1;Z<=u;Z++)for(let L=0;L<F;L++){const $=h?R(C[L],U[L],G):C[L];w?(T.copy(_.normals[Z]).multiplyScalar($.x),S.copy(_.binormals[Z]).multiplyScalar($.y),M.copy(b[Z]).add(T).add(S),de(M.x,M.y,M.z)):de($.x,$.y,d/u*Z)}for(let Z=g-1;Z>=0;Z--){const L=Z/g,$=p*Math.cos(L*Math.PI/2),re=f*Math.sin(L*Math.PI/2)+m;for(let te=0,le=N.length;te<le;te++){const ge=R(N[te],z[te],re);de(ge.x,ge.y,d+$)}for(let te=0,le=P.length;te<le;te++){const ge=P[te];V=O[te];for(let be=0,_e=ge.length;be<_e;be++){const pe=R(ge[be],V[be],re);w?de(pe.x,pe.y+b[u-1].y,b[u-1].x+$):de(pe.x,pe.y,d+$)}}}X(),ie();function X(){const Z=n.length/3;if(h){let L=0,$=F*L;for(let re=0;re<B;re++){const te=A[re];K(te[2]+$,te[1]+$,te[0]+$)}L=u+g*2,$=F*L;for(let re=0;re<B;re++){const te=A[re];K(te[0]+$,te[1]+$,te[2]+$)}}else{for(let L=0;L<B;L++){const $=A[L];K($[2],$[1],$[0])}for(let L=0;L<B;L++){const $=A[L];K($[0]+F*u,$[1]+F*u,$[2]+F*u)}}i.addGroup(Z,n.length/3-Z,0)}function ie(){const Z=n.length/3;let L=0;se(N,L),L+=N.length;for(let $=0,re=P.length;$<re;$++){const te=P[$];se(te,L),L+=te.length}i.addGroup(Z,n.length/3-Z,1)}function se(Z,L){let $=Z.length;for(;--$>=0;){const re=$;let te=$-1;te<0&&(te=Z.length-1);for(let le=0,ge=u+g*2;le<ge;le++){const be=F*le,_e=F*(le+1),pe=L+re+be,Se=L+te+be,Fe=L+te+_e,Y=L+re+_e;q(pe,Se,Fe,Y)}}}function de(Z,L,$){l.push(Z),l.push(L),l.push($)}function K(Z,L,$){ce(Z),ce(L),ce($);const re=n.length/3,te=x.generateTopUV(i,n,re-3,re-2,re-1);Te(te[0]),Te(te[1]),Te(te[2])}function q(Z,L,$,re){ce(Z),ce(L),ce(re),ce(L),ce($),ce(re);const te=n.length/3,le=x.generateSideWallUV(i,n,te-6,te-3,te-2,te-1);Te(le[0]),Te(le[1]),Te(le[3]),Te(le[1]),Te(le[2]),Te(le[3])}function ce(Z){n.push(l[Z*3+0]),n.push(l[Z*3+1]),n.push(l[Z*3+2])}function Te(Z){s.push(Z.x),s.push(Z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return K6e(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const n=e.options.extrudePath;return n!==void 0&&(e.options.extrudePath=new r2[n.type]().fromJSON(n)),new xL(i,e.options)}}const q6e={generateTopUV:function(r,e,t,i,n){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[n*3],u=e[n*3+1];return[new $t(s,o),new $t(a,l),new $t(c,u)]},generateSideWallUV:function(r,e,t,i,n,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],d=e[i*3+2],h=e[n*3],p=e[n*3+1],f=e[n*3+2],m=e[s*3],g=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new $t(o,1-l),new $t(c,1-d),new $t(h,1-f),new $t(m,1-v)]:[new $t(a,1-l),new $t(u,1-d),new $t(p,1-f),new $t(g,1-v)]}};function K6e(r,e,t){if(t.shapes=[],Array.isArray(r))for(let i=0,n=r.length;i<n;i++){const s=r[i];t.shapes.push(s.uuid)}else t.shapes.push(r.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class wL extends wp{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,n=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(n,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new wL(e.radius,e.detail)}}class _L extends wp{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],n=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,n,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new _L(e.radius,e.detail)}}class SL extends Qn{constructor(e=1,t=1,i=1,n=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(n),c=a+1,u=l+1,d=e/a,h=t/l,p=[],f=[],m=[],g=[];for(let v=0;v<u;v++){const x=v*h-o;for(let b=0;b<c;b++){const w=b*d-s;f.push(w,-x,0),m.push(0,0,1),g.push(b/a),g.push(1-v/l)}}for(let v=0;v<l;v++)for(let x=0;x<a;x++){const b=x+c*v,w=x+c*(v+1),_=x+1+c*(v+1),S=x+1+c*v;p.push(b,w,S),p.push(w,_,S)}this.setIndex(p),this.setAttribute("position",new wr(f,3)),this.setAttribute("normal",new wr(m,3)),this.setAttribute("uv",new wr(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SL(e.width,e.height,e.widthSegments,e.heightSegments)}}class TL extends Qn{constructor(e=.5,t=1,i=32,n=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:s,thetaLength:o},i=Math.max(3,i),n=Math.max(1,n);const a=[],l=[],c=[],u=[];let d=e;const h=(t-e)/n,p=new Ze,f=new $t;for(let m=0;m<=n;m++){for(let g=0;g<=i;g++){const v=s+g/i*o;p.x=d*Math.cos(v),p.y=d*Math.sin(v),l.push(p.x,p.y,p.z),c.push(0,0,1),f.x=(p.x/t+1)/2,f.y=(p.y/t+1)/2,u.push(f.x,f.y)}d+=h}for(let m=0;m<n;m++){const g=m*(i+1);for(let v=0;v<i;v++){const x=v+g,b=x,w=x+i+1,_=x+i+2,S=x+1;a.push(b,w,S),a.push(w,_,S)}}this.setIndex(a),this.setAttribute("position",new wr(l,3)),this.setAttribute("normal",new wr(c,3)),this.setAttribute("uv",new wr(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new TL(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class ML extends Qn{constructor(e=new $$([new $t(0,.5),new $t(-.5,-.5),new $t(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],n=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new wr(n,3)),this.setAttribute("normal",new wr(s,3)),this.setAttribute("uv",new wr(o,2));function c(u){const d=n.length/3,h=u.extractPoints(t);let p=h.shape;const f=h.holes;id.isClockWise(p)===!1&&(p=p.reverse());for(let g=0,v=f.length;g<v;g++){const x=f[g];id.isClockWise(x)===!0&&(f[g]=x.reverse())}const m=id.triangulateShape(p,f);for(let g=0,v=f.length;g<v;g++){const x=f[g];p=p.concat(x)}for(let g=0,v=p.length;g<v;g++){const x=p[g];n.push(x.x,x.y,0),s.push(0,0,1),o.push(x.x,x.y)}for(let g=0,v=m.length;g<v;g++){const x=m[g],b=x[0]+d,w=x[1]+d,_=x[2]+d;i.push(b,w,_),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Y6e(t,e)}static fromJSON(e,t){const i=[];for(let n=0,s=e.shapes.length;n<s;n++){const o=t[e.shapes[n]];i.push(o)}return new ML(i,e.curveSegments)}}function Y6e(r,e){if(e.shapes=[],Array.isArray(r))for(let t=0,i=r.length;t<i;t++){const n=r[t];e.shapes.push(n.uuid)}else e.shapes.push(r.uuid);return e}class EL extends Qn{constructor(e=1,t=32,i=16,n=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],d=new Ze,h=new Ze,p=[],f=[],m=[],g=[];for(let v=0;v<=i;v++){const x=[],b=v/i;let w=0;v===0&&o===0?w=.5/t:v===i&&l===Math.PI&&(w=-.5/t);for(let _=0;_<=t;_++){const S=_/t;d.x=-e*Math.cos(n+S*s)*Math.sin(o+b*a),d.y=e*Math.cos(o+b*a),d.z=e*Math.sin(n+S*s)*Math.sin(o+b*a),f.push(d.x,d.y,d.z),h.copy(d).normalize(),m.push(h.x,h.y,h.z),g.push(S+w,1-b),x.push(c++)}u.push(x)}for(let v=0;v<i;v++)for(let x=0;x<t;x++){const b=u[v][x+1],w=u[v][x],_=u[v+1][x],S=u[v+1][x+1];(v!==0||o>0)&&p.push(b,w,S),(v!==i-1||l<Math.PI)&&p.push(w,_,S)}this.setIndex(p),this.setAttribute("position",new wr(f,3)),this.setAttribute("normal",new wr(m,3)),this.setAttribute("uv",new wr(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new EL(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class CL extends wp{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],n=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,n,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new CL(e.radius,e.detail)}}class AL extends Qn{constructor(e=1,t=.4,i=12,n=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:s},i=Math.floor(i),n=Math.floor(n);const o=[],a=[],l=[],c=[],u=new Ze,d=new Ze,h=new Ze;for(let p=0;p<=i;p++)for(let f=0;f<=n;f++){const m=f/n*s,g=p/i*Math.PI*2;d.x=(e+t*Math.cos(g))*Math.cos(m),d.y=(e+t*Math.cos(g))*Math.sin(m),d.z=t*Math.sin(g),a.push(d.x,d.y,d.z),u.x=e*Math.cos(m),u.y=e*Math.sin(m),h.subVectors(d,u).normalize(),l.push(h.x,h.y,h.z),c.push(f/n),c.push(p/i)}for(let p=1;p<=i;p++)for(let f=1;f<=n;f++){const m=(n+1)*p+f-1,g=(n+1)*(p-1)+f-1,v=(n+1)*(p-1)+f,x=(n+1)*p+f;o.push(m,g,x),o.push(g,v,x)}this.setIndex(o),this.setAttribute("position",new wr(a,3)),this.setAttribute("normal",new wr(l,3)),this.setAttribute("uv",new wr(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new AL(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class NL extends Qn{constructor(e=1,t=.4,i=64,n=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:s,q:o},i=Math.floor(i),n=Math.floor(n);const a=[],l=[],c=[],u=[],d=new Ze,h=new Ze,p=new Ze,f=new Ze,m=new Ze,g=new Ze,v=new Ze;for(let b=0;b<=i;++b){const w=b/i*s*Math.PI*2;x(w,s,o,e,p),x(w+.01,s,o,e,f),g.subVectors(f,p),v.addVectors(f,p),m.crossVectors(g,v),v.crossVectors(m,g),m.normalize(),v.normalize();for(let _=0;_<=n;++_){const S=_/n*Math.PI*2,T=-t*Math.cos(S),M=t*Math.sin(S);d.x=p.x+(T*v.x+M*m.x),d.y=p.y+(T*v.y+M*m.y),d.z=p.z+(T*v.z+M*m.z),l.push(d.x,d.y,d.z),h.subVectors(d,p).normalize(),c.push(h.x,h.y,h.z),u.push(b/i),u.push(_/n)}}for(let b=1;b<=i;b++)for(let w=1;w<=n;w++){const _=(n+1)*(b-1)+(w-1),S=(n+1)*b+(w-1),T=(n+1)*b+w,M=(n+1)*(b-1)+w;a.push(_,S,M),a.push(S,T,M)}this.setIndex(a),this.setAttribute("position",new wr(l,3)),this.setAttribute("normal",new wr(c,3)),this.setAttribute("uv",new wr(u,2));function x(b,w,_,S,T){const M=Math.cos(b),E=Math.sin(b),C=_/w*b,P=Math.cos(C);T.x=S*(2+P)*.5*M,T.y=S*(2+P)*E*.5,T.z=S*Math.sin(C)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new NL(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class RL extends Qn{constructor(e=new j$(new Ze(-1,-1,0),new Ze(-1,1,0),new Ze(1,1,0)),t=64,i=1,n=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Ze,l=new Ze,c=new $t;let u=new Ze;const d=[],h=[],p=[],f=[];m(),this.setIndex(f),this.setAttribute("position",new wr(d,3)),this.setAttribute("normal",new wr(h,3)),this.setAttribute("uv",new wr(p,2));function m(){for(let b=0;b<t;b++)g(b);g(s===!1?t:0),x(),v()}function g(b){u=e.getPointAt(b/t,u);const w=o.normals[b],_=o.binormals[b];for(let S=0;S<=n;S++){const T=S/n*Math.PI*2,M=Math.sin(T),E=-Math.cos(T);l.x=E*w.x+M*_.x,l.y=E*w.y+M*_.y,l.z=E*w.z+M*_.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,d.push(a.x,a.y,a.z)}}function v(){for(let b=1;b<=t;b++)for(let w=1;w<=n;w++){const _=(n+1)*(b-1)+(w-1),S=(n+1)*b+(w-1),T=(n+1)*b+w,M=(n+1)*(b-1)+w;f.push(_,S,M),f.push(S,T,M)}}function x(){for(let b=0;b<=t;b++)for(let w=0;w<=n;w++)c.x=b/t,c.y=w/n,p.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new RL(new r2[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Z6e extends Qn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,n=new Ze,s=new Ze;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const d=l[c],h=d.start,p=d.count;for(let f=h,m=h+p;f<m;f+=3)for(let g=0;g<3;g++){const v=a.getX(f+g),x=a.getX(f+(g+1)%3);n.fromBufferAttribute(o,v),s.fromBufferAttribute(o,x),Q$(n,s,i)===!0&&(t.push(n.x,n.y,n.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,d=3*a+(c+1)%3;n.fromBufferAttribute(o,u),s.fromBufferAttribute(o,d),Q$(n,s,i)===!0&&(t.push(n.x,n.y,n.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new wr(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Q$(r,e,t){const i=`${r.x},${r.y},${r.z}-${e.x},${e.y},${e.z}`,n=`${e.x},${e.y},${e.z}-${r.x},${r.y},${r.z}`;return t.has(i)===!0||t.has(n)===!0?!1:(t.add(i),t.add(n),!0)}const e7=Object.freeze(Object.defineProperty({__proto__:null,BoxGeometry:rL,CapsuleGeometry:cL,CircleGeometry:uL,ConeGeometry:dL,CylinderGeometry:n2,DodecahedronGeometry:hL,EdgesGeometry:R6e,ExtrudeGeometry:xL,IcosahedronGeometry:wL,LatheGeometry:i2,OctahedronGeometry:_L,PlaneGeometry:SL,PolyhedronGeometry:wp,RingGeometry:TL,ShapeGeometry:ML,SphereGeometry:EL,TetrahedronGeometry:CL,TorusGeometry:AL,TorusKnotGeometry:NL,TubeGeometry:RL,WireframeGeometry:Z6e},Symbol.toStringTag,{value:"Module"})),t7={BitangentNodeScope:{LOCAL:ag.LOCAL,VIEW:ag.VIEW,WORLD:ag.WORLD,GEOMETRY:ag.GEOMETRY},Blending:{AdditiveBlending:Nl,CustomBlending:w0,MultiplyBlending:Au,NoBlending:Xn,NormalBlending:Eo,SubtractiveBlending:Cu},BlendingDstFactor:{DstAlphaFactor:R0,DstColorFactor:L0,OneFactor:C0,OneMinusDstAlphaFactor:k0,OneMinusDstColorFactor:O0,OneMinusSrcAlphaFactor:Kf,OneMinusSrcColorFactor:N0,SrcAlphaFactor:qf,SrcColorFactor:A0,ZeroFactor:E0},BlendingSrcFactor:{SrcAlphaSaturateFactor:P0},BlendingEquation:{AddEquation:to,MaxEquation:M0,MinEquation:T0,ReverseSubtractEquation:S0,SubtractEquation:_0},BlendMode:{BURN:hg.BURN,DODGE:hg.DODGE,SCREEN:hg.SCREEN,OVERLAY:hg.OVERLAY},CameraNodeScope:{VIEW_MATRIX:co.VIEW_MATRIX,NORMAL_MATRIX:co.NORMAL_MATRIX,WORLD_MATRIX:co.WORLD_MATRIX,POSITION:co.POSITION,VIEW_POSITION:co.VIEW_POSITION,PROJECTION_MATRIX:r3.PROJECTION_MATRIX},ColorAdjustmentMethod:{SATURATION:cb.SATURATION,VIBRANCE:cb.VIBRANCE,HUE:cb.HUE},ColorSpace:{DisplayP3ColorSpace:ry,LinearDisplayP3ColorSpace:cm,LinearSRGBColorSpace:li,NoColorSpace:kn,SRGBColorSpace:Lt},ColorSpaceNodeMethod:{LINEAR_TO_LINEAR:Zy.LINEAR_TO_LINEAR,LINEAR_TO_sRGB:Zy.LINEAR_TO_sRGB,sRGB_TO_LINEAR:Zy.sRGB_TO_LINEAR},Combine:{AddOperation:kA,MixOperation:RA,MultiplyOperation:Yf},CompressedPixelFormat:{RED_GREEN_RGTC2_Format:om,RED_RGTC1_Format:Iw,RGBA_ASTC_10x10_Format:Ch,RGBA_ASTC_10x5_Format:Th,RGBA_ASTC_10x6_Format:Mh,RGBA_ASTC_10x8_Format:Eh,RGBA_ASTC_12x10_Format:Ah,RGBA_ASTC_12x12_Format:Nh,RGBA_ASTC_4x4_Format:gh,RGBA_ASTC_5x4_Format:vh,RGBA_ASTC_5x5_Format:yh,RGBA_ASTC_6x5_Format:bh,RGBA_ASTC_6x6_Format:xh,RGBA_ASTC_8x5_Format:wh,RGBA_ASTC_8x6_Format:_h,RGBA_ASTC_8x8_Format:Sh,RGBA_BPTC_Format:ku,RGBA_ETC2_EAC_Format:mh,RGBA_PVRTC_2BPPV1_Format:nm,RGBA_PVRTC_4BPPV1_Format:im,RGBA_S3TC_DXT1_Format:hc,RGBA_S3TC_DXT3_Format:pc,RGBA_S3TC_DXT5_Format:fc,RGB_BPTC_SIGNED_Format:Ow,RGB_BPTC_UNSIGNED_Format:Pw,RGB_ETC1_Format:Lw,RGB_ETC2_Format:fh,RGB_PVRTC_2BPPV1_Format:rm,RGB_PVRTC_4BPPV1_Format:tm,RGB_S3TC_DXT1_Format:Ru,SIGNED_RED_GREEN_RGTC2_Format:am,SIGNED_RED_RGTC1_Format:sm},CoordinateSystem:{WebGLCoordinateSystem:ua,WebGPUCoordinateSystem:Oh},CubeTextureMapping:{CubeReflectionMapping:Co,CubeRefractionMapping:la,CubeUVReflectionMapping:Nu},DeepTexturePixelFormat:{DepthFormat:hs,DepthStencilFormat:so},DepthModes:{AlwaysDepth:D0,EqualDepth:F0,GreaterDepth:z0,GreaterEqualDepth:B0,LessDepth:U0,LessEqualDepth:uh,NeverDepth:I0,NotEqualDepth:V0},DepthPackingStrategies:{BasicDepthPacking:UA,RGBADepthPacking:ty},GLSLVersion:{GLSL1:A8,GLSL3:Vw},MagnificationTextureFilter:{LinearFilter:Or,NearestFilter:Mr},Mapping:{EquirectangularReflectionMapping:ja,EquirectangularRefractionMapping:Rl,UVMapping:Zf},MaterialNodeScope:{ALPHA_TEST:Za.ALPHA_TEST,COLOR:Za.COLOR,OPACITY:Za.OPACITY,ROUGHNESS:Za.ROUGHNESS,METALNESS:Za.METALNESS,EMISSIVE:Za.EMISSIVE,ROTATION:Za.ROTATION},MathNodeMethod1:{RADIANS:fr.RADIANS,DEGREES:fr.DEGREES,EXP:fr.EXP,EXP2:fr.EXP2,LOG:fr.LOG,LOG2:fr.LOG2,SQRT:fr.SQRT,INVERSE_SQRT:fr.INVERSE_SQRT,FLOOR:fr.FLOOR,CEIL:fr.CEIL,NORMALIZE:fr.NORMALIZE,FRACT:fr.FRACT,SIN:fr.SIN,COS:fr.COS,TAN:fr.TAN,ASIN:fr.ASIN,ACOS:fr.ACOS,ATAN:fr.ATAN,ABS:fr.ABS,SIGN:fr.SIGN,LENGTH:fr.LENGTH,NEGATE:fr.NEGATE,ONE_MINUS:fr.ONE_MINUS,DFDX:fr.DFDX,DFDY:fr.DFDY,ROUND:fr.ROUND},MathNodeMethod2:{ATAN2:fr.ATAN2,MIN:fr.MIN,MAX:fr.MAX,MOD:fr.MOD,STEP:fr.STEP,REFLECT:fr.REFLECT,DISTANCE:fr.DISTANCE,DOT:fr.DOT,CROSS:fr.CROSS,POW:fr.POW,TRANSFORM_DIRECTION:fr.TRANSFORM_DIRECTION},MathNodeMethod3:{MIX:fr.MIX,CLAMP:fr.CLAMP,REFRACT:fr.REFRACT,SMOOTHSTEP:fr.SMOOTHSTEP,FACEFORWARD:fr.FACEFORWARD},MinificationTextureFilter:{LinearFilter:Or,LinearMipMapLinearFilter:M8,LinearMipMapNearestFilter:T8,LinearMipmapLinearFilter:qn,LinearMipmapNearestFilter:hh,NearestFilter:Mr,NearestMipMapLinearFilter:S8,NearestMipMapNearestFilter:_8,NearestMipmapLinearFilter:ca,NearestMipmapNearestFilter:Ll},NodeTypeOption:"void,bool,int,float,vec2,vec3,vec4,mat3,mat4,code,color,uint,int,property,sampler,texture,cubeTexture,ivec2,uvec2,bvec2,ivec3,uvec3,bvec3,ivec4,uvec4,bvec4,imat3,umat3,bmat3,imat4,umat4,bmat4".split(","),NormalMapTypes:{ObjectSpaceNormalMap:Bw,TangentSpaceNormalMap:Ha},NormalNodeScope:{GEOMETRY:eb.GEOMETRY,LOCAL:eb.LOCAL,VIEW:eb.VIEW},Object3DNodeScope:{VIEW_MATRIX:co.VIEW_MATRIX,NORMAL_MATRIX:co.NORMAL_MATRIX,WORLD_MATRIX:co.WORLD_MATRIX,POSITION:co.POSITION,VIEW_POSITION:co.VIEW_POSITION},OperatorNodeOp:["=","%","&","|","^",">>","<<","==","&&","||","^^","<",">","<=",">=","+","-","*","/"],OscNodeMethod:{SINE:ug.SINE,SQUARE:ug.SQUARE,TRIANGLE:ug.TRIANGLE,SAWTOOTH:ug.SAWTOOTH},PixelFormatGPU:["ALPHA","DEPTH24_STENCIL8","DEPTH32F_STENCIL8","DEPTH_COMPONENT16","DEPTH_COMPONENT24","DEPTH_COMPONENT32F","LUMINANCE","LUMINANCE_ALPHA","R11F_G11F_B10F","R16F","R16I","R16UI","R32F","R32I","R32UI","R8","R8I","R8UI","R8_SNORM","RED_INTEGER","RG16F","RG16I","RG16UI","RG32F","RG32I","RG32UI","RG8","RG8I","RG8UI","RG8_SNORM","RGB","RGB10_A2","RGB10_A2UI","RGB16F","RGB16I","RGB16UI","RGB32F","RGB32I","RGB32UI","RGB565","RGB5_A1","RGB8","RGB8I","RGB8UI","RGB8_SNORM","RGB9_E5","RGBA","RGBA16F","RGBA16I","RGBA16UI","RGBA32F","RGBA32I","RGBA32UI","RGBA4","RGBA8","RGBA8I","RGBA8UI","RGBA8_SNORM","SRGB8","SRGB8_ALPHA8"],PositionNodeScope:{GEOMETRY:qu.GEOMETRY,LOCAL:qu.LOCAL,WORLD:qu.WORLD,WORLD_DIRECTION:qu.WORLD_DIRECTION,VIEW:qu.VIEW,VIEW_DIRECTION:qu.VIEW_DIRECTION},Precision:["highp","mediump","lowp"],Side:{BackSide:Oi,DoubleSide:Wi,FrontSide:eo,TwoPassDoubleSide:w8},StencilFunc:{AlwaysStencilFunc:zw,EqualStencilFunc:XA,GreaterEqualStencilFunc:ZA,GreaterStencilFunc:KA,LessEqualStencilFunc:qA,LessStencilFunc:$A,NeverStencilFunc:WA,NotEqualStencilFunc:YA},StencilOp:{DecrementStencilOp:VA,DecrementWrapStencilOp:jA,IncrementStencilOp:zA,IncrementWrapStencilOp:GA,InvertStencilOp:HA,KeepStencilOp:um,ReplaceStencilOp:BA,ZeroStencilOp:FA},TangentNodeScope:{LOCAL:og.LOCAL,VIEW:og.VIEW,WORLD:og.WORLD,GEOMETRY:og.GEOMETRY},TextureComparisonFunction:{AlwaysCompare:hy,EqualCompare:ay,GreaterCompare:cy,GreaterEqualCompare:dy,LessCompare:dm,LessEqualCompare:ly,NeverCompare:oy,NotEqualCompare:uy},TextureDataType:{ByteType:Rw,FloatType:mi,HalfFloatType:gi,IntType:W0,ShortType:kw,UnsignedByteType:io,UnsignedInt248Type:Ao,UnsignedIntType:no,UnsignedShort4444Type:$0,UnsignedShort5551Type:X0,UnsignedShortType:ph},TextureEncoding:{LinearEncoding:ey,sRGBEncoding:Ol},ToneMapping:{NoToneMapping:ro,LinearToneMapping:G0,ReinhardToneMapping:j0,CineonToneMapping:H0,ACESFilmicToneMapping:dh,CustomToneMapping:LA},ViewportNodeScope:{COORDINATE:Yu.COORDINATE,RESOLUTION:Yu.RESOLUTION,TOP_LEFT:Yu.TOP_LEFT,BOTTOM_LEFT:Yu.BOTTOM_LEFT,TOP_RIGHT:Yu.TOP_RIGHT,BOTTOM_RIGHT:Yu.BOTTOM_RIGHT},WebGL1PixelFormat:{AlphaFormat:q0,DepthFormat:hs,DepthStencilFormat:so,LuminanceAlphaFormat:Y0,LuminanceFormat:K0,RGFormat:em,RedFormat:Jf,RedIntegerFormat:Qf,_SRGBAFormat:pm},WebGL2PixelFormat:{AlphaFormat:q0,DepthFormat:hs,DepthStencilFormat:so,LuminanceAlphaFormat:Y0,LuminanceFormat:K0,RGBAFormat:Rn,RGBAIntegerFormat:J0,RGFormat:em,RGIntegerFormat:Z0,RedFormat:Jf,RedIntegerFormat:Qf,_SRGBAFormat:pm},Wrapping:{ClampToEdgeWrapping:Mi,MirroredRepeatWrapping:kl,RepeatWrapping:ds}},h2={AmbientLight:{cls:np,isAmbientLight:!0,members:{},proto:"Light"},AmbientLightProbe:{isAmbientLightProbe:!0,members:{},proto:"LightProbe"},ArrayCamera:{cls:EN,isArrayCamera:!0,members:{cameras:"PerspectiveCamera[]"},proto:"PerspectiveCamera"},Audio:{cls:dR,members:{},proto:"Object3D"},AudioListener:{cls:uR,members:{},proto:"Object3D"},Camera:{cls:_c,isCamera:!0,members:{coordinateSystem:"types.CoordinateSystem",matrixWorldInverse:"Matrix4",projectionMatrix:"Matrix4",projectionMatrixInverse:"Matrix4"},proto:"Object3D"},CanvasTexture:{cls:IN,isCanvasTexture:!0,members:{},proto:"Texture"},CompressedArrayTexture:{cls:HV,isCompressedArrayTexture:!0,members:{wrapR:"types.Wrapping"},proto:"CompressedTexture"},CompressedTexture:{cls:Dy,isCompressedTexture:!0,members:{flipY:"boolean",format:"types.CompressedPixelFormat",generateMipmaps:"boolean"},proto:"Texture"},CubeCamera:{cls:u_,members:{coordinateSystem:"types.CoordinateSystem"},proto:"Object3D"},CubeTexture:{cls:Sc,isCubeTexture:!0,members:{flipY:"boolean",mapping:"types.CubeTextureMapping"},proto:"Texture"},Data3DTexture:{cls:Hw,isData3DTexture:!0,members:{flipY:"boolean",generateMipmaps:"boolean",magFilter:"types.MagnificationTextureFilter",minFilter:"types.MinificationTextureFilter",unpackAlignment:"number",wrapR:"types.Wrapping"},proto:"Texture"},DataArrayTexture:{cls:yy,isDataArrayTexture:!0,members:{flipY:"boolean",generateMipmaps:"boolean",magFilter:"types.MagnificationTextureFilter",minFilter:"types.MinificationTextureFilter",unpackAlignment:"number",wrapR:"boolean"},proto:"Texture"},DataTexture:{cls:ma,isDataTexture:!0,members:{flipY:"boolean",generateMipmaps:"boolean",magFilter:"types.MagnificationTextureFilter",minFilter:"types.MinificationTextureFilter",unpackAlignment:"number"},proto:"Texture"},DepthTexture:{cls:Hh,isDepthTexture:!0,members:{compareFunction:"types.TextureComparisonFunction | null",flipY:"boolean",format:"types.DeepTexturePixelFormat",generateMipmaps:"boolean",magFilter:"types.MagnificationTextureFilter",minFilter:"types.MinificationTextureFilter",type:"types.TextureDataType"},proto:"Texture"},DirectionalLight:{cls:Dl,isDirectionalLight:!0,members:{castShadow:"boolean",position:"Vector3","shadow.mapSize.x":"Number","shadow.mapSize.y":"Number","shadow.bias":"Number",target:"Object3D"},proto:"Light"},DirectionalLightShadow:{cls:void 0,isDirectionalLightShadow:!0,members:{camera:"OrthographicCamera"},proto:"LightShadow"},Fog:{cls:Um,isFog:!0,members:{color:"Color",far:"number",near:"number"},proto:"FogBase"},FogExp2:{cls:Dm,isFogExp2:!0,members:{color:"Color",density:"number"},proto:"FogBase"},FramebufferTexture:{cls:E_,isFramebufferTexture:!0,members:{generateMipmaps:"boolean",magFilter:"types.MagnificationTextureFilter",minFilter:"types.MinificationTextureFilter"},proto:"Texture"},HemisphereLight:{cls:ip,isHemisphereLight:!0,members:{color:"Color",groundColor:"Color",position:"Vector3"},proto:"Light"},HemisphereLightProbe:{isHemisphereLightProbe:!0,members:{},proto:"LightProbe"},InstancedMesh:{cls:Iy,members:{count:"number"},proto:"Mesh"},Light:{cls:Ac,isLight:!0,members:{color:"Color",intensity:"number",shadow:"LightShadow"},proto:"Object3D"},LightProbe:{cls:H_,isLightProbe:!0,members:{sh:"SphericalHarmonics3"},proto:"Light"},LightShadow:{cls:void 0,members:{bias:"number",blurSamples:"number",camera:"Camera",mapSize:"Vector2",matrix:"Matrix4",normalBias:"number",radius:"number"}},LineBasicMaterial:{cls:Ki,members:{color:"Color",fog:"boolean",linecap:"string",linejoin:"string",linewidth:"number",map:"Texture | null"},proto:"Material"},LineDashedMaterial:{cls:jy,isLineDashedMaterial:!0,members:{dashSize:"number",gapSize:"number",scale:"number"},proto:"LineBasicMaterial"},Material:{cls:Wr,isMaterial:!0,members:{alphaHash:"boolean",blendSrc:"types.BlendingSrcFactor | types.BlendingDstFactor",blendSrcAlpha:"number | null",blending:"types.Blending",depthFunc:"types.DepthModes",depthTest:"boolean",depthWrite:"boolean",opacity:"number",precision:"types.Precision | null",premultipliedAlpha:"boolean",shadowSide:"types.Side | null",side:"types.Side",stencilFail:"types.StencilOp",stencilFunc:"types.StencilFunc",stencilFuncMask:"number",stencilRef:"number",stencilWrite:"boolean",stencilWriteMask:"number",stencilZFail:"types.StencilOp",stencilZPass:"types.StencilOp",toneMapped:"boolean",transparent:"boolean",visible:"boolean"},proto:"EventDispatcher"},Mesh:{cls:mt,members:{castShadow:"boolean",receiveShadow:"boolean",material:"Material"},proto:"Object3D"},MeshBasicMaterial:{cls:Ei,members:{alphaMap:"Texture | null",aoMap:"Texture | null",aoMapIntensity:"number",color:"Color",combine:"types.Combine",envMap:"Texture | null",fog:"boolean",lightMap:"Texture | null",lightMapIntensity:"number",map:"Texture | null",reflectivity:"number",refractionRatio:"number",specularMap:"Texture | null",wireframe:"boolean",wireframeLinecap:"string",wireframeLinejoin:"string",wireframeLinewidth:"number"},proto:"Material"},MeshDepthMaterial:{cls:jh,members:{alphaMap:"Texture | null",depthPacking:"types.DepthPackingStrategies",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",fog:"boolean",map:"Texture | null",wireframe:"boolean",wireframeLinewidth:"number"},proto:"Material"},MeshDistanceMaterial:{cls:Ay,members:{alphaMap:"Texture | null",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",fog:"boolean",map:"Texture | null"},proto:"Material"},MeshLambertMaterial:{cls:qm,members:{alphaMap:"Texture | null",aoMap:"Texture | null",aoMapIntensity:"number",bumpMap:"Texture | null",bumpScale:"number",color:"Color",combine:"types.Combine",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",emissive:"Color",emissiveIntensity:"number",emissiveMap:"Texture | null",envMap:"Texture | null",flatShading:"boolean",fog:"boolean",lightMap:"Texture | null",lightMapIntensity:"number",map:"Texture | null",normalMap:"Texture | null",normalMapType:"types.NormalMapTypes",normalScale:"Vector2",reflectivity:"number",refractionRatio:"number",specularMap:"Texture | null",wireframe:"boolean",wireframeLinecap:"string",wireframeLinejoin:"string",wireframeLinewidth:"number"},proto:"Material"},MeshMatcapMaterial:{cls:z_,members:{alphaMap:"Texture | null",bumpMap:"Texture | null",bumpScale:"number",color:"Color",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",flatShading:"boolean",fog:"boolean",map:"Texture | null",matcap:"Texture | null",normalMap:"Texture | null",normalMapType:"types.NormalMapTypes",normalScale:"Vector2"},proto:"Material"},MeshNormalMaterial:{cls:Gy,members:{bumpMap:"Texture | null",bumpScale:"number",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",flatShading:"boolean",normalMap:"Texture | null",normalMapType:"types.NormalMapTypes",normalScale:"Vector2",wireframe:"boolean",wireframeLinewidth:"number"},proto:"Material"},MeshPhongMaterial:{cls:Bu,members:{alphaMap:"Texture | null",aoMap:"Texture | null",aoMapIntensity:"number",bumpMap:"Texture | null",bumpScale:"number",color:"Color",combine:"types.Combine",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",emissive:"Color",emissiveIntensity:"number",emissiveMap:"Texture | null",envMap:"Texture | null",flatShading:"boolean",fog:"boolean",lightMap:"Texture | null",lightMapIntensity:"number",map:"Texture | null",metal:"boolean",normalMap:"Texture | null",normalMapType:"types.NormalMapTypes",normalScale:"Vector2",reflectivity:"number",refractionRatio:"number",shininess:"number",specular:"Color",specularMap:"Texture | null",wireframe:"boolean",wireframeLinecap:"string",wireframeLinejoin:"string",wireframeLinewidth:"number"},proto:"Material"},MeshPhysicalMaterial:{cls:Io,members:{anisotropy:"number",anisotropyMap:"Texture | null",anisotropyRotation:"number",attenuationColor:"Color",attenuationDistance:"number",clearcoat:"number",clearcoatMap:"Texture | null",clearcoatNormalMap:"Texture | null",clearcoatNormalScale:"Vector2",clearcoatRoughness:"number",clearcoatRoughnessMap:"Texture | null",ior:"number",iridescence:"number",iridescenceIOR:"number",iridescenceMap:"Texture | null",iridescenceThicknessMap:"Texture | null",iridescenceThicknessRange:"number[]",reflectivity:"number",sheen:"number",sheenColor:"Color",sheenColorMap:"Texture | null",sheenRoughness:"number",sheenRoughnessMap:"Texture | null",specularColor:"Color",specularColorMap:"Texture | null",specularIntensity:"number",specularIntensityMap:"Texture | null",thickness:"number",thicknessMap:"Texture | null",transmission:"number",transmissionMap:"Texture | null"},proto:"MeshStandardMaterial"},MeshStandardMaterial:{cls:Kn,isMeshStandardMaterial:!0,members:{alphaMap:"Texture | null",aoMap:"Texture | null",aoMapIntensity:"number",bumpMap:"Texture | null",bumpScale:"number",color:"Color",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",emissive:"Color",emissiveIntensity:"number",emissiveMap:"Texture | null",envMap:"Texture | null",envMapIntensity:"number",flatShading:"boolean",fog:"boolean",lightMap:"Texture | null",lightMapIntensity:"number",map:"Texture | null",metalness:"number",metalnessMap:"Texture | null",normalMap:"Texture | null",normalMapType:"types.NormalMapTypes",normalScale:"Vector2",roughness:"number",roughnessMap:"Texture | null",wireframe:"boolean",wireframeLinecap:"string",wireframeLinejoin:"string",wireframeLinewidth:"number"},proto:"Material"},MeshToonMaterial:{cls:B_,members:{alphaMap:"Texture | null",aoMap:"Texture | null",aoMapIntensity:"number",bumpMap:"Texture | null",bumpScale:"number",color:"Color",displacementBias:"number",displacementMap:"Texture | null",displacementScale:"number",emissive:"Color",emissiveIntensity:"number",emissiveMap:"Texture | null",fog:"boolean",gradientMap:"Texture | null",lightMap:"Texture | null",lightMapIntensity:"number",map:"Texture | null",normalMap:"Texture | null",normalMapType:"types.NormalMapTypes",normalScale:"Vector2",wireframe:"boolean",wireframeLinecap:"string",wireframeLinejoin:"string",wireframeLinewidth:"number"},proto:"Material"},Object3D:{cls:nr,isObject3D:!0,members:{up:"Vector3",position:"Vector3",rotation:"Euler",scale:"Vector3",visible:"Boolean"}},OrthographicCamera:{cls:fa,isOrthographicCamera:!0,members:{bottom:"number",far:"number",left:"number",near:"number",right:"number",top:"number",zoom:"number"},proto:"Camera"},PerspectiveCamera:{cls:Yr,isPerspectiveCamera:!0,members:{aspect:"number",far:"number",filmGauge:"number",filmOffset:"number",focus:"number",fov:"number",near:"number",zoom:"number"},proto:"Camera"},PointLight:{cls:Il,members:{castShadow:"boolean",decay:"number",distance:"number",intensity:"number",power:"number","shadow.mapSize.x":"Number","shadow.mapSize.y":"Number","shadow.bias":"Number"},proto:"Light"},PointLightShadow:{cls:void 0,isPointLightShadow:!0,members:{},proto:"LightShadow"},Points:{cls:Kh,members:{material:"Material"},proto:"Object3D"},PointsMaterial:{cls:qh,members:{alphaMap:"Texture | null",color:"Color",fog:"boolean",map:"Texture | null",size:"number",sizeAttenuation:"boolean"},proto:"Material"},PositionalAudio:{cls:hR,members:{},proto:"Audio"},RawShaderMaterial:{cls:F_,members:{},proto:"ShaderMaterial"},RectAreaLight:{cls:j_,isRectAreaLight:!0,members:{height:"number",intensity:"number",power:"number",width:"number"},proto:"Light"},Scene:{cls:qa,isScene:!0,members:{background:"Color | Texture | CubeTexture | null",backgroundBlurriness:"number",backgroundIntensity:"number",environment:"Texture | null",fog:"FogBase | null",overrideMaterial:"Material | null"},proto:"Object3D"},ShaderMaterial:{cls:ii,isShaderMaterial:!0,members:{fog:"boolean",wireframe:"boolean",wireframeLinewidth:"number"},proto:"Material"},ShadowMaterial:{cls:QN,members:{color:"Color",fog:"boolean",transparent:"boolean"},proto:"Material"},Source:{cls:da,isSource:!0,members:{}},SphericalHarmonics3:{cls:aR,isSphericalHarmonics3:!0,members:{coefficients:"Vector3[]"}},SpotLight:{cls:Pl,isSpotLight:!0,members:{angle:"number",castShadow:"boolean",decay:"number",distance:"number",intensity:"number",map:"Texture | null",penumbra:"number",position:"Vector3",power:"number","shadow.mapSize.x":"Number","shadow.mapSize.y":"Number","shadow.bias":"Number",target:"Object3D"},proto:"Light"},SpotLightShadow:{cls:void 0,isSpotLightShadow:!0,members:{camera:"PerspectiveCamera",focus:"number"},proto:"LightShadow"},SpriteMaterial:{cls:Wh,isSpriteMaterial:!0,members:{alphaMap:"Texture | null",color:"Color",fog:"boolean",map:"Texture | null",rotation:"number",sizeAttenuation:"boolean",transparent:"boolean"},proto:"Material"},StereoCamera:{cls:RG,members:{aspect:"number",cameraL:"PerspectiveCamera",cameraR:"PerspectiveCamera",eyeSep:"number"},proto:"Camera"},Texture:{cls:Nr,isTexture:!0,members:{anisotropy:"number",center:"Vector2",channel:"number",colorSpace:"types.ColorSpace",encoding:"types.TextureEncoding",flipY:"boolean",format:"types.WebGL1PixelFormat | types.WebGL2PixelFormat | types.DeepTexturePixelFormat | types.CompressedPixelFormat",generateMipmaps:"boolean",image:"Image",internalFormat:"types.PixelFormatGPU | null",magFilter:"types.MagnificationTextureFilter",mapping:"types.Mapping | types.CubeTextureMapping",matrix:"Matrix3",offset:"Vector2",premultiplyAlpha:"boolean",repeat:"Vector2",rotation:"number",type:"types.TextureDataType",unpackAlignment:"number",wrapS:"types.Wrapping",wrapT:"types.Wrapping"},proto:"EventDispatcher"},VideoTexture:{cls:jV,isVideoTexture:!0,members:{generateMipmaps:"boolean",magFilter:"types.MagnificationTextureFilter",minFilter:"types.MinificationTextureFilter"},proto:"Texture"}},Eb={AONode:{cls:E3,group:"lighting",members:{aoNode:"Node | null"},proto:"LightingNode"},AnalyticLightNode:{cls:Ku,group:"lighting",members:{colorNode:"Node",light:"Light | null"},proto:"LightingNode"},ArrayElementNode:{cls:sS,group:"utils",members:{indexNode:"Node",node:"Node"},proto:"TempNode"},ArrayUniformNode:{cls:zj,group:"core",isArrayUniformNode:!0,members:{nodes:"Node[]"},proto:"UniformNode"},AttributeNode:{cls:Xy,group:"core",members:{},proto:"Node"},BitangentNode:{cls:ag,group:"accessors",members:{scope:"types.BitangentNodeScope"},proto:"Node"},BlendModeNode:{cls:hg,group:"display",members:{baseNode:"Node",blendMode:"types.BlendMode",blendNode:"Node"},proto:"TempNode"},BufferNode:{cls:v3,group:"accessors",isBufferNode:!0,members:{bufferCount:"number",bufferType:"string"},proto:"UniformNode"},BypassNode:{cls:Vj,group:"core",isBypassNode:!0,members:{callNode:"Node",outputNode:"Node"},proto:"Node"},CacheNode:{cls:Gj,group:"core",isCacheNode:!0,members:{cache:"NodeCache",node:"Node"},proto:"Node"},CameraNode:{cls:r3,group:"accessors",members:{scope:"types.CameraNodeScope"},proto:"Object3DNode"},CheckerNode:{cls:X9,group:"procedural",members:{uvNode:"Node"},proto:"TempNode"},CodeNode:{cls:fg,group:"code",isCodeNode:!0,members:{code:"string"},proto:"Node"},ColorAdjustmentNode:{cls:cb,group:"display",members:{adjustmentNode:"Node",colorNode:"Node",method:"types.ColorAdjustmentMethod"},proto:"TempNode"},ColorSpaceNode:{cls:Zy,group:"display",members:{method:"types.ColorSpaceNodeMethod",node:"Node"},proto:"TempNode"},ComputeNode:{cls:G9,group:"gpgpu",isComputeNode:!0,members:{count:"number",dispatchCount:"number",workgroupSize:"number[]"},proto:"Node"},CondNode:{cls:U3,group:"math",members:{condNode:"Node",elseNode:"Node",ifNode:"Node"},proto:"Node"},ConstNode:{cls:Do,group:"core",isConstNode:!0,members:{},proto:"InputNode"},ContextNode:{cls:qy,group:"core",isContextNode:!0,members:{context:"Object",node:"Node"},proto:"Node"},ConvertNode:{cls:oS,group:"utils",members:{convertTo:"types.NodeTypeOption",node:"Node"},proto:"Node"},CubeTextureNode:{cls:RW,group:"accessors",isCubeTextureNode:!0,members:{levelNode:"Node | null",uvNode:"Node | null",value:"CubeTexture"},proto:"TextureNode"},EnvironmentNode:{cls:P3,group:"lighting",members:{envNode:"Node | null"},proto:"LightingNode"},EquirectUVNode:{cls:IW,group:"utils",members:{},proto:"TempNode"},ExpressionNode:{cls:QH,group:"code",members:{snipped:"string"},proto:"TempNode"},FogExp2Node:{cls:z9,group:"fog",isFogExp2Node:!0,members:{densityNode:"Node"},proto:"FogNode"},FogNode:{cls:WS,group:"fog",isFogNode:!0,members:{colorNode:"Node",factorNode:"Node"},proto:"Node"},FogRangeNode:{cls:B9,group:"fog",isFogRangeNode:!0,members:{farNode:"Node",nearNode:"Node"},proto:"FogNode"},FrontFacingNode:{cls:fW,group:"display",isFrontFacingNode:!0,members:{},proto:"Node"},FunctionNode:{cls:P9,group:"code",members:{keywords:"{ [key: string]: Node }"},proto:"CodeNode"},HemisphereLightNode:{cls:$9,group:"lighting",members:{groundColorNode:"Node",lightDirectionNode:"Node",lightPositionNode:"Object3DNode"},proto:"AnalyticLightNode"},InputNode:{group:"core",isInputNode:!0,members:{precision:"types.Precision | null",value:"Color | Vector2 | Vector3 | Vector4 | Matrix3 | Matrix4 | boolean | number"},proto:"Node"},LightingNode:{cls:ob,group:"lighting",members:{},proto:"Node"},LightsNode:{cls:M3,group:"lighting",members:{lightNodes:"LightingNode[]"},proto:"Node"},LineBasicNodeMaterial:{cls:Z9,group:"materials",isLineBasicNodeMaterial:!0,members:{},proto:["LineBasicMaterial","NodeMaterial"]},MatcapUVNode:{cls:WW,group:"utils",members:{},proto:"TempNode"},MaterialNode:{cls:Za,group:"accessors",members:{scope:"types.MaterialNodeScope"},proto:"Node"},MaterialReferenceNode:{cls:ES,group:"accessors",members:{},proto:"ReferenceNode"},MathNode:{cls:fr,group:"math",members:{aNode:"Node",bNode:"Node | null",cNode:"Node | null",method:"types.MathNodeMethod1 | types.MathNodeMethod2 | types.MathNodeMethod3"},proto:"TempNode"},MaxMipLevelNode:{cls:DW,group:"utils",members:{textureNode:"TextureNode"},proto:"UniformNode"},MeshBasicNodeMaterial:{cls:zk,group:"materials",isMeshBasicNodeMaterial:!0,members:{lights:"true"},proto:["MeshBasicMaterial","NodeMaterial"]},MeshPhysicalNodeMaterial:{cls:h$,group:"materials",members:{attenuationColorNode:"Node | null",attenuationDistanceNode:"Node | null",iridescenceIORNode:"null | Node",iridescenceNode:"null | CheckerNode",iridescenceThicknessNode:"null | Node",specularColorNode:"Node | null",specularIntensityNode:"Node | null",thicknessNode:"Node | null",transmissionNode:"Node | null"},proto:["MeshPhysicalMaterial","MeshStandardNodeMaterial"]},MeshStandardNodeMaterial:{cls:Xk,group:"materials",isMeshStandardNodeMaterial:!0,members:{clearcoatNode:"Node | null",clearcoatRoughnessNode:"Node | null",emissiveNode:"Node | null",metalnessNode:"Node | null",roughnessNode:"Node | null"},proto:["MeshStandardMaterial","NodeMaterial"]},ModelViewProjectionNode:{cls:xW,group:"accessors",members:{},proto:"Node"},Node:{cls:Zt,group:"core",isNode:!0,members:{}},NodeAttribute:{cls:vS,group:"core",isNodeAttribute:!0,members:{name:"string",type:"string"}},NodeCache:{cls:fS,group:"core",members:{}},NodeCode:{cls:FR,group:"core",isNodeCode:!0,members:{}},NodeFunction:{group:"core",isNodeFunction:!0,members:{inputs:"NodeFunctionInput[]",name:"string",presicion:"string",type:"string"}},NodeFunctionInput:{cls:DS,group:"core",isNodeFunctionInput:!0,members:{count:"null | number",isConst:"boolean",qualifier:"string"}},NodeKeywords:{cls:BR,group:"core",members:{keywords:"string[]",nodes:"Node[]"}},NodeMaterial:{cls:Zn,group:"materials",isNodeMaterial:!0,members:{alphaTestNode:"Node | null",backdropAlphaNode:"Node | null",backdropNode:"Node | null",colorNode:"Node | null",envNode:"Node | null",lights:"true",lightsNode:"Node | null",normalNode:"Node | null",normals:"true",opacityNode:"Node | null",positionNode:"Node | null"},proto:"ShaderMaterial"},NodeUniform:{cls:DR,group:"core",isNodeUniform:!0,members:{name:"string",needsUpdate:"boolean",node:"InputNode",type:"string",value:"NodeValueOption"}},NodeVar:{cls:yS,group:"core",isNodeVar:!0,members:{name:"string",type:"string"}},NodeVarying:{cls:UR,group:"core",isNodeVarying:!0,members:{needsInterpolation:"false"},proto:"NodeVar"},NormalMapNode:{cls:gW,group:"display",members:{node:"Node",normalMapType:"types.NormalMapTypes",scaleNode:"Node | null"},proto:"TempNode"},NormalNode:{cls:eb,group:"accessors",members:{scope:"types.NormalNodeScope"},proto:"Node"},Object3DNode:{cls:co,group:"accessors",members:{object3d:"Object3D | null",scope:"types.Object3DNodeScope"},proto:"Node"},OperatorNode:{cls:Ai,group:"math",members:{aNode:"Node",bNode:"Node",op:"types.OperatorNodeOp"},proto:"TempNode"},OscNode:{cls:ug,group:"utils",members:{method:"types.OscNodeMethod",timeNode:"Node"},proto:"Node"},PointLightNode:{cls:H9,group:"lighting",members:{coneCosNode:"Node",cutoffDistanceNode:"Node",decayExponentNode:"Node",directionNode:"Node",penumbraCosNode:"Node"},proto:"AnalyticLightNode"},PointUVNode:{cls:d9,group:"accessors",isPointUVNode:!0,members:{},proto:"Node"},PointsNodeMaterial:{cls:qk,group:"materials",members:{alphaTestNode:"Node | null",colorNode:"Node | null",isPointsNodeMateria:"true",lightNode:"Node | null",opacityNode:"Node | null",positionNode:"Node | null",sizeNode:"Node | null"},proto:["PointsMaterial","NodeMaterial"]},PositionNode:{cls:qu,group:"accessors",members:{scope:"types.PositionNodeScope"},proto:"Node"},PosterizeNode:{cls:T9,group:"display",members:{sourceNode:"Node",stepsNode:"Node"},proto:"Node"},PropertyNode:{cls:wn,group:"core",members:{},proto:"Node"},RangeNode:{cls:V9,group:"geometry",members:{max:"number | Color | Vector2 | Vector3 | Vector4",min:"number | Color | Vector2 | Vector3 | Vector4"},proto:"Node"},ReferenceNode:{cls:ig,group:"accessors",members:{node:"Node | null",object:"Object",property:"string",uniformType:"string"},proto:"Node"},ReflectVectorNode:{cls:AW,group:"accessors",members:{},proto:"Node"},RemapNode:{cls:XW,group:"utils",members:{doClamp:"boolean",inHighNode:"Node",inLowNode:"Node",node:"Node",outHighNode:"Node",outLowNode:"Node"},proto:"Node"},RotateUVNode:{cls:YW,group:"utils",members:{centerNode:"Node",rotationNode:"Node",uvNode:"Node"},proto:"TempNode"},SkinningNode:{cls:MW,group:"accessors",members:{bindMatrixInverseNode:"Node",bindMatrixNode:"Node",boneMatricesNode:"Node",skinIndexNode:"Node",skinWeightNode:"Node"},proto:"Node"},SpecularMIPLevelNode:{cls:UW,group:"utils",members:{roughnessNode:"Node | null",textureNode:"TextureNode"},proto:"Node"},SpriteNodeMaterial:{cls:m$,group:"materials",isSpriteNodeMaterial:!0,members:{alphaTestNode:"Node | null",colorNode:"Node | null",lightNode:"Node | null",opacityNode:"Node | null",positionNode:"Node | null",rotationNode:"Node | null",scaleNode:"Node | null"},proto:["SpriteMaterial","NodeMaterial"]},SpriteSheetUVNode:{cls:JW,group:"utils",members:{countNode:"Node",frameNode:"Node",uvNode:"Node"},proto:"Node"},TangentNode:{cls:og,group:"accessors",members:{scope:"types.TangentNodeScope"},proto:"Node"},TempNode:{cls:Zi,group:"core",isTempNode:!0,members:{},proto:"Node"},TextureNode:{cls:Jy,group:"accessors",isTextureNode:!0,members:{levelNode:"Node | null",uvNode:"Node | null",value:"Texture"},proto:"UniformNode"},TimerNode:{cls:ln,group:"utils",members:{scale:"number"},proto:"UniformNode"},ToneMappingNode:{cls:E9,group:"display",members:{colorNode:"Node | null",exposureNode:"Node",toneMapping:"types.ToneMapping"},proto:"TempNode"},TriplanarTexturesNode:{cls:e9,group:"utils",members:{normalNode:"PositionNode",positionNode:"PositionNode",scaleNode:"Node",textureXNode:"TextureNode",textureYNode:"TextureNode | null",textureZNode:"TextureNode | null"},proto:"Node"},UVNode:{cls:qj,group:"accessors",isUVNode:!0,members:{index:"number"},proto:"AttributeNode"},UniformNode:{cls:Fr,group:"core",isUniformNode:!0,members:{},proto:"InputNode"},VarNode:{cls:RS,group:"core",members:{name:"string | null",node:"Node"},proto:"Node"},VaryingNode:{cls:hS,group:"core",members:{name:"string | null",node:"Node"},proto:"Node"},ViewportNode:{cls:Yu,group:"display",isViewportNode:!0,members:{scope:"types.ViewportNodeScope"},proto:"Node"}},or={notice(...r){console.log(...r)},warn(...r){console.warn(...r)},error(...r){console.error(...r)},panic(...r){return console.error(...r),`${r}`}},r7={};function i7(r){const e=Object.entries(r);return e.forEach(t=>delete r[t[0]]),e.sort((t,i)=>t[0].localeCompare(i[0])),e.forEach(t=>r[t[0]]=t[1]),r}function p2(r){return/Material$/.test(r)||!!Eb[r]}const J6e=new Set("bool,int,float,vec2,vec3,vec4,mat3,mat4,code,color,uint,int,property,sampler,texture,cubeTexture,ivec2,uvec2,bvec2,ivec3,uvec3,bvec3,ivec4,uvec4,bvec4,imat3,umat3,bmat3,imat4,umat4,bmat4".split(","));function Q6e(r){return J6e.has(r)}const e8e=new Set("void,Boolean,Number,String,Script,Color,Vector2,Vector3,Vector4,Matrix3,Matrix4,Euler,Audio,Image,Texture,CubeTexture,Material,Object3D,Object".split(","));function t8e(r){return e8e.has(r.split("[")[0])}function r8e(r){return Q6e(r)||t8e(r)}function i8e(r,e){for(const t of r)if(!e.includes(t))return!1;return!0}function n8e(r,e){return r[`is${e}`]}function kL(r,e){if(r===e)return!0;const t=PL(r);if(!t||!t.proto)return!1;if(Array.isArray(t.proto)){for(const i of t.proto)if(kL(i,e))return!0;return!1}return kL(t.proto,e)}function s8e(r,e){if(e.includes(r))return!0;for(const t of e)if(kL(r,t))return!0;return!1}function Cb(r,e){if(r===e)return!0;const t=PL(r);if(!t||!t.proto)return!1;if(Array.isArray(t.proto)){for(const i of t.proto)if(Cb(i,e))return!0;return!1}return Cb(t.proto,e)}function o8e(r){let e=null,t=null;const i=[];for(const n of r){if(/^".+"$/.test(n)){const a=/^"(.+)"$/.exec(n)[1];t?t.push(a):(t=[a],i.push(t));continue}const[,s,o]=/^([^[\]]+)(\[\])?$/.exec(n)||[];if(s.startsWith("types.")){const a=t7[s.substring(6)];if(!a)throw or.panic(`type[${s}] not found`);Array.isArray(a)?t?t.push(...a):(t=[...a],i.push(t)):e?Object.assign(e,a):(e={...a},i.push(e))}else n==="null"?i.push(null):s==="boolean"||/true|false/i.test(n)?i.push("Boolean"+(o||"")):s==="string"?i.push("String"+(o||"")):s==="number"?i.push("Number"+(o||"")):(!r8e(s)&&!p2(s)&&or.warn(`type[${n}] unsupported!`),i.push(n))}return i}function n7(r,e,t){for(const[i,n]of Object.entries(e)){const s=o8e(n.replace(/\s/mg,"").split("|")),[,o,a]=/^(.+)(Node)$/.exec(i)||[,i],l=!!a||s.findIndex(u=>typeof u=="string"&&p2(u))!==-1,c=r[o]||(r[o]={types:s,direct:t});l&&(c.nname=i),a8e(c.types,s)}return r}function a8e(r,e){const t=r.filter(i=>i!==null&&!p2(i)&&!e.includes(i));for(const i of e)r.includes(i)||r.push(JSON.parse(JSON.stringify(i)));t.forEach(i=>r.splice(r.indexOf(i),1))}function l8e(r,e){for(const t of e)r.includes(t)||r.push(JSON.parse(JSON.stringify(t)))}function s7(r,e){for(const[t,i]of Object.entries(e)){const n=r[t];if(!n){r[t]=JSON.parse(JSON.stringify(i));continue}if(n.nname&&i.nname&&n.nname!==i.nname)throw or.panic("type mismatched!");n.nname||(n.nname=i.nname),l8e(n.types,i.types)}return r}function Ab(r){const e=t=>{const i=r7[t];if(i)return i;const n={in:{},out:{}},s=Eb[t]||h2[t];if(!s)return n;let o=s.proto;if(o){o=Array.isArray(o)?o:[o];for(const a of o){const l=e(a);s7(n.in,l.in),s7(n.out,l.out)}}return n7(n.in,s.members,"in"),s.out&&n7(n.out,s.out,"out"),i7(n.in),i7(n.out),r7[t]=n,n};return e(r)}function LL(r){const e=Nb(r);if(!e)throw or.panic(`Node constructor[${r}] not found!`);return Ab(e.clsName)}function OL(r){const e=Nb(r);if(!e)throw or.panic(`Node constructor[${r}] not found!`);return e.clsName}function c8e(r){const e=PL(r);if(e)return e.proto}function PL(r){return Eb[r]||h2[r]}function Gc(r,e,t,i,n){if(Eb[r])throw or.panic(`class[${r}] exists`);if(ft(r,e),Eb[r]={cls:e,members:t||{},proto:i},n)for(const[s,o]of Object.entries(n))f2(s,o)}const IL=[],Sp={};function f2(r,e){if(Sp[r])throw or.panic(`Node Constructor[${r}] aready exists`);const t=(e.group||`Others.${r}`).split(".");let i=IL;const n=t.pop();for(const a of t){let l=i.find(c=>c.name===a);l||(l={name:a,icon:"",children:[]},i.push(l)),i=l.children}if(i.find(a=>a.name===r))throw or.panic(`Node Constructor[${r}] aready exists`);const s=Ab(e.clsName),o={name:r,...e,title:n||r,in:{...s.in},out:{...s.out}};Sp[r]=o,i.push(o)}function Nb(r){return Sp[r]}function m2(r,e){const t=Sp[r];if(!t)throw or.panic(`Node Constructor[${r}] not found`);const i=t.func();if(e)if(i.copy)i.copy(e);else for(const n of[...Object.keys(t.in),...Object.keys(t.out)]){const s=e[n],o=typeof s,a=i[n];o==="undefined"||s===null||o==="boolean"||o==="string"||o==="number"?i[n]=s:s.clone?i[n]=s.clone():a&&a.copy?a.copy(s):i[n]=s}return i}const{createNodeMaterialFromType:u8e}=IFe,d8e=Nc.createMaterialFromType,g2={};Nc.createMaterialFromType=function(r){return u8e(r)||(g2[r]?new g2[r]:d8e.call(this,r))};function h8e(r,e){if(g2[r])throw or.panic(`Material[${r}] aready exists`);g2[r]=e}const Cg={};function p8e(r,...e){const t=Cg[r];return t?t.create(...e):new rS[r](...e)}function Cr(r,e){if(Cg[r])throw or.panic(`Class[${r}] aready exists`);if(Cg[r]=e,h2[r]||(h2[r]=e),Cb(r,"Object3D")){if(v2[r])return;v2[r]=t=>e.create(t||{})}}const v2={AmbientLight:r=>new np(r.color,r.intensity),Bone:r=>new $h,DirectionalLight:r=>new Dl(r.color,r.intensity),HemisphereLight:r=>new ip(r.color,r.groundColor,r.intensity),Group:r=>new Oo,InstancedMesh:r=>{const e=new Iy(r.geometry,r.material,r.count),t=r.instanceMatrix,i=r.instanceColor;return e.instanceMatrix=new Mc(new Float32Array(t.array),16),i!==void 0&&(e.instanceColor=new Mc(new Float32Array(i.array),i.itemSize)),e},LOD:r=>new RN,Line:r=>new yn(r.geometry,r.material),LineLoop:r=>new S_(r.geometry,r.material),LineSegments:r=>new ga(r.geometry,r.material),LightProbe:r=>new H_().fromJSON(r),Mesh:r=>new mt(r.geometry,r.material),Object3D:r=>new nr,OrthographicCamera:r=>new fa(r.left,r.right,r.top,r.bottom,r.near,r.far),PerspectiveCamera:r=>new Yr(r.fov,r.aspect,r.near,r.far),PointCloud:r=>new Kh(r.geometry,r.material),PointLight:r=>new Il(r.color,r.intensity,r.distance,r.decay),Points:r=>new Kh(r.geometry,r.material),RectAreaLight:r=>new j_(r.color,r.intensity,r.width,r.height),Scene:r=>new qa,SpotLight:r=>new Pl(r.color,r.intensity,r.distance,r.angle,r.penumbra,r.decay),SkinnedMesh:r=>new Ly(r.geometry,r.material),Sprite:r=>new Tc(r.material)},f8e=new Set(Object.keys(v2));function m8e(r,e){const t=v2[r];if(t)return t(e);throw or.panic(`object class[${r}] not found`)}function o7(r){if(f8e.has(r))return r;const e=c8e(r);if(e)return o7(e)}function zl(r){Object.keys(r).forEach(e=>delete r[e])}const Tn=Symbol("getProxyRawObject");function DL(r,e){return new Proxy(r,{get(t,i,n){if(i===Tn)return t;if(typeof i!="string")return Reflect.get(t,i,n);const s=i.split(".");if(s.length>1){let o=Reflect.get(t,s[0],n);for(let a=1;a<s.length;a++)o=o[s[a]];return o}return Reflect.get(t,i,n)},set:(t,i,n,s)=>{if(typeof i!="string")return Reflect.set(t,i,n,s);if(Reflect.get(t,i,s)===n)return!0;let o=!0;const a=i.split(".");if(a.length>1){let l=Reflect.get(t,a[0],s);const c=a.pop();for(let u=1;u<a.length;u++)l=l[a[u]];if(l[c]===n)return!0;l[c]=n}else o=Reflect.set(t,i,n,t);return o&&e&&e(i,n),o}})}function nd(r,e){e||(e={});for(const[t,i]of Object.entries(r))i&&typeof i=="object"&&i.toArray?e[t]=i.toArray():e[t]=r[t];return e}function sd(r,e){const t=[];for(const[i,n]of Object.entries(r)){const s=e[i];s==null||s===n||(t.push(i),typeof n=="object"&&n.fromArray?n.fromArray(s):r[i]=s)}return t}Cr("Object3D",{create:()=>new nr,members:{},group:"Objects.Empty Object3D",icon:"box"});const y2=new St;let UL,a7,l7;function c7(r,e,t){var c,u;if(!t||!t.geometry)return 0;UL||(UL=new Ammo.btVector3,a7=new Ammo.btVector3,l7=new Ammo.btVector3);const i=t.geometry,n=((c=i.attributes.position)==null?void 0:c.array)||[],s=((u=i.index)==null?void 0:u.array)||[];let o=0,a;if(e&&e!==t){let d;e.quaternion?d=e.quaternion:e.rotation?d=new Rr().setFromEuler(e.rotation):d=new Rr().identity();const h=new St().compose(new oe(1,1,1),d,e.position);y2.copy(h.invert()),t.updateWorldMatrix(!1,!1),a=t.matrixWorld.clone().multiply(y2)}else y2.makeScale(t.scale.x,t.scale.y,t.scale.z),a=y2;const l=s.length/3;for(let d=0;d<l;d++){const h=[];for(let p=0;p<3;p++){let f=new oe(n[s[d*3+p]*3+0],n[s[d*3+p]*3+1],n[s[d*3+p]*3+2]);f=f.applyMatrix4(a);let m;p==0?m=UL:p==1?m=a7:m=l7,m.setValue(f.x,f.y,f.z),h.push(m)}r.addTriangle(h[0],h[1],h[2]),o++}return t.children.forEach(d=>{o+=c7(r,e,d)}),o}var od;(r=>{function e(o){return new ammo.btVector3(o.x,o.y,o.z)}r.t2aVector3=e;function t(o){return new oe(o.x(),o.y(),o.z())}r.a2tVector3=t;function i(o){var l,c;const a=o.geometry;if(a)if(a.type==="PlaneGeometry"){const u=a.parameters,d=u.width!==void 0?u.width/2:.5,h=u.height!==void 0?u.height/2:.5,p=new ammo.btBoxShape(new ammo.btVector3(d,h,0));return p.setMargin(.01),p}else if(a.type==="BoxGeometry"){const u=a.parameters,d=u.width!==void 0?u.width/2:.5,h=u.height!==void 0?u.height/2:.5,p=u.depth!==void 0?u.depth/2:.5,f=new ammo.btBoxShape(new ammo.btVector3(d,h,p));return f.setMargin(.001),f}else if(a.type==="CylinderGeometry"){const u=a.parameters,d=new ammo.btCylinderShape(new ammo.btVector3(u.radiusBottom,u.height,u.radiusTop));return d.setMargin(.01),d}else if(a.type==="ConeGeometry"){const u=a.parameters,d=new ammo.btConeShape(u.radius,u.height);return d.setMargin(.01),d}else if(a.type==="CapsuleGeometry"){const u=a.parameters,d=u.radius!==void 0?u.radius:1,h=u.length!==void 0?u.length:1,p=new ammo.btCapsuleShape(d,h);return p.setMargin(.01),p}else if(a.type==="SphereGeometry"||a.type==="IcosahedronGeometry"){const u=a.parameters,d=u.radius!==void 0?u.radius:1,h=new ammo.btSphereShape(d);return h.setMargin(.001),h}else{const u=new ammo.btTriangleMesh(!0,!0),d=((l=a.attributes.position)==null?void 0:l.array)||[],h=((c=a.index)==null?void 0:c.array)||[];for(let f=0;f*3<h.length;f+=1)u.addTriangle(new ammo.btVector3(d[h[f*3]*3],d[h[f*3]*3+1],d[h[f*3]*3+2]),new ammo.btVector3(d[h[f*3+1]*3],d[h[f*3+1]*3+1],d[h[f*3+1]*3+2]),new ammo.btVector3(d[h[f*3+2]*3],d[h[f*3+2]*3+1],d[h[f*3+2]*3+2]),!1);const p=new ammo.btConvexTriangleMeshShape(u,!0);return p.setMargin(.001),p}else{const u=new ammo.btTriangleMesh(!0,!0),d=c7(u,o,o)?new Ammo.btBvhTriangleMeshShape(u,!0):new Ammo.btCompoundShape;return d.setMargin(.01),d}}r.createShape=i;function n(o,a=0,l){const c=l||i(o);function u(h,p,f){const m=h.position,g=h.quaternion,v=new ammo.btTransform;v.setIdentity(),v.setOrigin(new ammo.btVector3(m.x,m.y,m.z)),v.setRotation(new ammo.btQuaternion(g.x,g.y,g.z,g.w));const x=new ammo.btDefaultMotionState(v),b=new ammo.btVector3(0,0,0);f.calculateLocalInertia(p,b);const w=new ammo.btRigidBodyConstructionInfo(p,x,f,b);return new ammo.btRigidBody(w)}function d(h,p,f){const m=h.instanceMatrix.array,g=[];for(let v=0;v<h.count;v++){const x=v*16,b=new ammo.btTransform;b.setFromOpenGLMatrix(v8e(m,x,x+16));const w=new ammo.btDefaultMotionState(b),_=new ammo.btVector3(0,0,0);f.calculateLocalInertia(p,_);const S=new ammo.btRigidBodyConstructionInfo(p,w,f,_),T=new ammo.btRigidBody(S);g.push(T)}return g}return o.isInstancedMesh?d(o,a,c):(o.isMesh,u(o,a,c))}r.createBody=n;function s(o){ammo.destroy(o)}r.destroyBody=s})(od||(od={}));class g8e{constructor(e=-9.82){this.destroyed=!1,this.meshes=[],this.meshMap=new WeakMap,this.meshIdx={},this.conllisionMap=new Set,this.collisionConfiguration=new ammo.btDefaultCollisionConfiguration,this.dispatcher=new ammo.btCollisionDispatcher(this.collisionConfiguration),this.broadphase=new ammo.btDbvtBroadphase,this.solver=new ammo.btSequentialImpulseConstraintSolver,this.softBodySolver=new ammo.btDefaultSoftBodySolver,this.softBodyHelpers=new Ammo.btSoftBodyHelpers,this.world=new ammo.btSoftRigidDynamicsWorld(this.dispatcher,this.broadphase,this.solver,this.collisionConfiguration,this.softBodySolver),this.world.setGravity(new ammo.btVector3(0,e,0)),this.worldTransform=new ammo.btTransform}dispose(){if(!this.destroyed){for(const e of this.meshes){const t=this.meshMap.get(e);this.meshMap.delete(e),ammo.destroy(t)}this.meshes.length=0,ammo.destroy(this.collisionConfiguration),ammo.destroy(this.dispatcher),ammo.destroy(this.broadphase),ammo.destroy(this.solver),ammo.destroy(this.softBodySolver),ammo.destroy(this.softBodyHelpers),ammo.destroy(this.world),ammo.destroy(this.worldTransform),this.destroyed=!0}}addMesh(e,t){if(t){if(Array.isArray(t))for(const i of t)this.world.addRigidBody(i);else this.world.addRigidBody(t);this.meshes.push(e),this.meshMap.set(e,t),e.id&&(this.meshIdx[e.id]=e)}e.world=this}removeMesh(e){const t=this.meshMap.get(e),i=this.meshes.indexOf(e);if(!t){e.world=void 0;return}if(i!==-1&&this.meshes.splice(i,1),this.meshMap.delete(e),delete this.meshIdx[e.id],Array.isArray(t))for(const n of t)this.world.removeRigidBody(n);else this.world.removeRigidBody(t);e.world=void 0}findBody(e){return this.meshMap.get(e)}setMeshPosition(e,t,i=0){if(e.isInstancedMesh){const n=this.meshMap.get(e);if(!n)return;const s=n[i];this.worldTransform.setIdentity(),this.worldTransform.setOrigin(new ammo.btVector3(t.x,t.y,t.z)),s.setWorldTransform(this.worldTransform)}else if(e.isMesh){const n=this.meshMap.get(e);if(!n)return;this.worldTransform.setIdentity(),this.worldTransform.setOrigin(new ammo.btVector3(t.x,t.y,t.z)),n.setWorldTransform(this.worldTransform)}}detectCollision(){const e=this.dispatcher.getNumManifolds(),t=new Set;for(let n=0;n<e;n++){const s=this.dispatcher.getManifoldByIndexInternal(n),o=s.getBody0().getUserIndex(),a=s.getBody1().getUserIndex();t.add(`${o}:${a}`)}for(const n of t){if(this.conllisionMap.has(n))continue;this.conllisionMap.add(n);const[s,o]=n.split(":").map(c=>Number.parseInt(c)),a=this.meshIdx[s],l=this.meshIdx[o];a&&l&&(a.dispatchEvent({type:"onCollisionEnter",target:l}),l.dispatchEvent({type:"onCollisionEnter",target:a}))}const i=[];for(const n of this.conllisionMap)t.has(n)||i.push(n);for(const n of i){this.conllisionMap.delete(n);const[s,o]=n.split(":").map(c=>Number.parseInt(c)),a=this.meshIdx[s],l=this.meshIdx[o];a&&l&&(a.dispatchEvent({type:"onCollisionLeave",target:l}),l.dispatchEvent({type:"onCollisionLeave",target:a}))}}step(e,t){if(e){this.world.stepSimulation(e,10),this.detectCollision();for(let i=0,n=this.meshes.length;i<n;i++){const s=this.meshes[i];if(s.mass){if(s.isInstancedMesh){const o=s.instanceMatrix.array,a=this.meshMap.get(s);for(let l=0;l<a.length;l++){a[l].getMotionState().getWorldTransform(this.worldTransform);const c=this.worldTransform.getOrigin(),u=this.worldTransform.getRotation();y8e(c,u,o,l*16)}s.instanceMatrix.needsUpdate=!0,s.computeBoundingSphere()}else if(s.isMesh){this.meshMap.get(s).getMotionState().getWorldTransform(this.worldTransform);const o=this.worldTransform.getOrigin(),a=this.worldTransform.getRotation();s.position.set(o.x(),o.y(),o.z()),s.quaternion.set(a.x(),a.y(),a.z(),a.w())}}}}}}function v8e(r,e,t){const i=[],n=e+t;for(let s=e;s<n;s++)i.push(r[s]);return i}function y8e(r,e,t,i){const n=e.x(),s=e.y(),o=e.z(),a=e.w(),l=n+n,c=s+s,u=o+o,d=n*l,h=n*c,p=n*u,f=s*c,m=s*u,g=o*u,v=a*l,x=a*c,b=a*u;t[i+0]=1-(f+g),t[i+1]=h+b,t[i+2]=p-x,t[i+3]=0,t[i+4]=h-b,t[i+5]=1-(d+g),t[i+6]=m+v,t[i+7]=0,t[i+8]=p+x,t[i+9]=m-v,t[i+10]=1-(d+f),t[i+11]=0,t[i+12]=r.x(),t[i+13]=r.y(),t[i+14]=r.z(),t[i+15]=1}var FL=(r=>(r[r.Ghost=0]="Ghost",r[r.RigidBody=1]="RigidBody",r))(FL||{});t7.BodyType={Ghost:0,RigidBody:1};const Tp=.001;class vs extends mt{constructor(e,t,i=0,n=0){super(e||new vi,t||new Ei({wireframe:!0})),this._bodyType=i,this._mass=n,this.isEntity=!0,this.geoMatrix=new St().identity(),this.physicalBody=null,this._tmpAmmoVectorA=new Ammo.btVector3(0,0,0),this._tmpAmmoQuaternion=new Ammo.btQuaternion(0,0,0,1),this.type="Entity",e||this.rebuildBody(),this.geo=DL(Object.assign({},this.parameters),()=>{this.rebuildGeometry()})}get mass(){return this._mass}set mass(e){this._mass!==e&&(this._mass===0||e===0?(this._mass=e,this.rebuildBody()):this.physicalBody.setMassProps(e))}get bodyType(){return this._bodyType}set bodyType(e){this._bodyType!==e&&(this._bodyType=e,this.rebuildBody())}get parameters(){return this.geometry.parameters||{}}moveTo(e){this.physicalBody&&this.setPhysicsBodyTransformation(e),this.position.copy(e)}applyTranslation(e){return this.applyGeoMatrix4(new St().makeTranslation(e))}applyRotationFromEuler(e){return this.applyGeoMatrix4(new St().makeRotationFromEuler(e))}applyScale(e){return this.applyGeoMatrix4(new St().makeScale(e.x,e.y,e.z))}applyGeoMatrix4(e){this.geoMatrix.premultiply(e),this.geometry.applyMatrix4(e)}clone(e){const t=super.clone(e),i=this._mass||0,n=this._bodyType||0;(i!==this._mass||n!==this._bodyType)&&(t._mass=i,t._bodyType=n,t.rebuildBody());const s=t.geo[Tn];return Object.assign(s,this.parameters),t.geoMatrix.copy(this.geoMatrix),t}serialize(e){e.mass=this._mass,e.bodyType=this._bodyType,e.geoMatrix=this.geoMatrix.toArray()}deserialize(e){const t=e.mass||0,i=e.bodyType||0;(t!==this._mass||i!==this._bodyType)&&(this._mass=t,this._bodyType=i,this.rebuildBody());const n=this.geo[Tn];Object.assign(n,this.parameters),e.geoMatrix&&(this.geoMatrix.fromArray(e.geoMatrix),this.geometry.applyMatrix4(this.geoMatrix),this.geometry.computeBoundingBox()),this.setPhysicsBodyTransformation(this.position)}dispose(){if(this.material instanceof Wr)this.material.dispose();else if(Array.isArray(this.material))for(const e of this.material)e.material.dispose();this.physicalBody&&(this.world&&this.world.removeMesh(this),od.destroyBody(this.physicalBody),this.physicalBody=null)}rebuildGeometry(){const e=this.geometry.constructor;this.geometry.dispose(),this.geometry=e.fromJSON(this.geo[Tn]),this.geometry.applyMatrix4(this.geoMatrix),this.geometry.computeBoundingBox()}rebuildBody(){const e=this.world;this.physicalBody&&(this.world&&this.world.removeMesh(this),od.destroyBody(this.physicalBody)),this._bodyType!==0?(this.physicalBody=od.createBody(this,this._mass),this.physicalBody.setUserIndex(this.id),e&&e.addMesh(this,this.physicalBody)):this.physicalBody=null}setPhysicsBodyTransformation(e,t){if(!this.physicalBody)return;const i=this.physicalBody.getWorldTransform();if(Math.abs(i.getOrigin().x()-e.x)>Tp||Math.abs(i.getOrigin().y()-e.y)>Tp||Math.abs(i.getOrigin().z()-e.z)>Tp||t&&(Math.abs(i.getRotation().x()-t.x)>Tp||Math.abs(i.getRotation().y()-t.y)>Tp||Math.abs(i.getRotation().z()-t.z)>Tp||Math.abs(i.getRotation().w()-t.w)>Tp))if(this._tmpAmmoVectorA.setValue(e.x,e.y,e.z),i.setOrigin(this._tmpAmmoVectorA),t&&(this._tmpAmmoQuaternion.setValue(t.x,t.y,t.z,t.w),i.setRotation(this._tmpAmmoQuaternion)),this.physicalBody.setWorldTransform(i),this.mass==0){const n=this.physicalBody.getMotionState();n&&n.setWorldTransform(i)}else this.physicalBody.activate()}}Cr("Entity",{create:({material:r,geometry:e}={})=>new vs(e,r),members:{mass:"Number",bodyType:"types.BodyType"},proto:"Mesh",group:"",icon:""});const b8e=1024,x8e=1024,BL=new oe,w8e=new oe,Vo={delta:0,now:0,gravity:new oe(0,-9.8,0),windForce:new oe,gpuComputeRender:null,wait(r){return new Promise(e=>{setTimeout(e,r,!0)})},calcObjectPosition(r,e,t,i){if(t<=0)return[r,e];const n=i?BL.copy(e).normalize().multiply(e).multiply(e).multiplyScalar(-i):BL.set(0,0,0);n.add(this.windForce);const s=n.divideScalar(t);s.add(this.gravity);const o=s.multiplyScalar(this.delta).add(e);return[w8e.copy(o).add(e).multiplyScalar(.5*this.delta).add(r),BL]},combineBuffer(r,e,t){let i=0,n=3;r.traverse(function(h){if(h.isMesh){const p=h.geometry.attributes[e];n=p.itemSize,i+=p.array.length}});const s=i/n,o=t&&s>t?Math.ceil(s/t):1,a=Math.ceil(i/(n*o)),l=new Float32Array(a*n);let c=0,u=0,d=0;return r.traverse(function(h){if(h.isMesh){const p=h.geometry.attributes[e];if(o===1)l.set(p.array,d*n),c+=p.array.length,d+=p.array.length/n,u=c/n;else{const f=p.count;for(let m=0;m<f;m++)u%o===0&&(l[d*n]=p.array[m*n],l[d*n+1]=p.array[m*n+1],l[d*n+2]=p.array[m*n+2],d++),u++;c+=p.array.length}}}),new jr(l,n)}};class b2 extends qa{constructor(){super(),this.isPhysicalScene=!0,this.windForce=new oe,this._gravity=-9.8,this.objectsTrash={},this.type="PhysicalScene",this.physics=new g8e(this._gravity)}get gravity(){return this._gravity}set gravity(e){this._gravity!==e&&(this._gravity=e,this.physics.world.setGravity(new Ammo.btVector3(0,this._gravity,0)))}update(e,t,i,n,s=!1){Vo.gravity.y=this._gravity;const o=this.windForce.clone().multiplyScalar(.5+.5*Math.sin(n/2e3));if(Vo.windForce.copy(o),!s){for(const a of this.children)a.visible&&a.graph&&a.graph.update(e,t,i,n);this.physics.step(i,n)}}add(...e){super.add(...e);for(const t of e)delete this.objectsTrash[t.id],t instanceof vs&&this.physics.addMesh(t,t.physicalBody),t.dispatchEvent({type:"onBorn",source:this,object:t});return this}remove(...e){super.remove(...e);for(const t of e)t instanceof vs&&this.physics.removeMesh(t),t.dispatchEvent({type:"onDead",source:this,object:t}),this.objectsTrash[t.id]=t;return this}serialize(e){e.gravity=this.gravity,e.windForce=this.windForce.toArray()}deserialize(e){e.gravity&&(this.gravity=e.gravity),e.windForce&&this.windForce.fromArray(e.windForce)}active(){this.dispatchEvent({type:"onBorn",source:this,object:this});for(const e of this.children)e.dispatchEvent&&e.dispatchEvent({type:"onBorn",source:this,object:e})}deactive(){for(const e of this.children)e.dispatchEvent&&e.dispatchEvent({type:"onDead",source:this,object:e});this.dispatchEvent({type:"onDead",source:this,object:this})}dispose(){for(const e of Object.values(this.objectsTrash))e.traverse(t=>{if(t.dispose)t.dispose();else if(t.geometry instanceof sr&&t.geometry.dispose(),t.material instanceof Wr)t.material.dispose();else if(Array.isArray(t.material))for(const i of t.material)i.dispose()});this.physics.dispose()}}Cr("PhysicalScene",{members:{gravity:"Number",windForce:"Vector3"},proto:"Scene",group:"Scenes.Physical Scene",icon:"scene",create:()=>new b2});const u7=new On,x2=new oe;class d7 extends W_{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new Rt(e,3)),this.setAttribute("uv",new Rt(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new Wy(t,6,1);return this.setAttribute("instanceStart",new Is(i,3,0)),this.setAttribute("instanceEnd",new Is(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new Wy(t,6,1);return this.setAttribute("instanceColorStart",new Is(i,3,0)),this.setAttribute("instanceColorEnd",new Is(i,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new JN(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new On);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),u7.setFromBufferAttribute(t),this.boundingBox.union(u7))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ls),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let n=0;for(let s=0,o=e.count;s<o;s++)x2.fromBufferAttribute(e,s),n=Math.max(n,i.distanceToSquared(x2)),x2.fromBufferAttribute(t,s),n=Math.max(n,i.distanceToSquared(x2));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}At.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new qe(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},qi.line={uniforms:Lo.merge([At.common,At.fog,At.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class zL extends ii{constructor(e){super({type:"LineMaterial",uniforms:Lo.clone(qi.line.uniforms),vertexShader:qi.line.vertexShader,fragmentShader:qi.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1))}}const h7=new oe,p7=new oe,es=new jt,ts=new jt,Vl=new jt,VL=new oe,GL=new St,rs=new zG,f7=new oe,w2=new On,_2=new Ls,Gl=new jt;let jl,Mp;function m7(r,e,t){return Gl.set(0,0,-e,1).applyMatrix4(r.projectionMatrix),Gl.multiplyScalar(1/Gl.w),Gl.x=Mp/t.width,Gl.y=Mp/t.height,Gl.applyMatrix4(r.projectionMatrixInverse),Gl.multiplyScalar(1/Gl.w),Math.abs(Math.max(Gl.x,Gl.y))}function _8e(r,e){const t=r.matrixWorld,i=r.geometry,n=i.attributes.instanceStart,s=i.attributes.instanceEnd,o=Math.min(i.instanceCount,n.count);for(let a=0,l=o;a<l;a++){rs.start.fromBufferAttribute(n,a),rs.end.fromBufferAttribute(s,a),rs.applyMatrix4(t);const c=new oe,u=new oe;jl.distanceSqToSegment(rs.start,rs.end,u,c),u.distanceTo(c)<Mp*.5&&e.push({point:u,pointOnLine:c,distance:jl.origin.distanceTo(u),object:r,face:null,faceIndex:a,uv:null,uv1:null})}}function S8e(r,e,t){const i=e.projectionMatrix,n=r.material.resolution,s=r.matrixWorld,o=r.geometry,a=o.attributes.instanceStart,l=o.attributes.instanceEnd,c=Math.min(o.instanceCount,a.count),u=-e.near;jl.at(1,Vl),Vl.w=1,Vl.applyMatrix4(e.matrixWorldInverse),Vl.applyMatrix4(i),Vl.multiplyScalar(1/Vl.w),Vl.x*=n.x/2,Vl.y*=n.y/2,Vl.z=0,VL.copy(Vl),GL.multiplyMatrices(e.matrixWorldInverse,s);for(let d=0,h=c;d<h;d++){if(es.fromBufferAttribute(a,d),ts.fromBufferAttribute(l,d),es.w=1,ts.w=1,es.applyMatrix4(GL),ts.applyMatrix4(GL),es.z>u&&ts.z>u)continue;if(es.z>u){const v=es.z-ts.z,x=(es.z-u)/v;es.lerp(ts,x)}else if(ts.z>u){const v=ts.z-es.z,x=(ts.z-u)/v;ts.lerp(es,x)}es.applyMatrix4(i),ts.applyMatrix4(i),es.multiplyScalar(1/es.w),ts.multiplyScalar(1/ts.w),es.x*=n.x/2,es.y*=n.y/2,ts.x*=n.x/2,ts.y*=n.y/2,rs.start.copy(es),rs.start.z=0,rs.end.copy(ts),rs.end.z=0;const p=rs.closestPointToPointParameter(VL,!0);rs.at(p,f7);const f=$i.lerp(es.z,ts.z,p),m=f>=-1&&f<=1,g=VL.distanceTo(f7)<Mp*.5;if(m&&g){rs.start.fromBufferAttribute(a,d),rs.end.fromBufferAttribute(l,d),rs.start.applyMatrix4(s),rs.end.applyMatrix4(s);const v=new oe,x=new oe;jl.distanceSqToSegment(rs.start,rs.end,x,v),t.push({point:x,pointOnLine:v,distance:jl.origin.distanceTo(x),object:r,face:null,faceIndex:d,uv:null,uv1:null})}}}class T8e extends mt{constructor(e=new d7,t=new zL({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,n=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)h7.fromBufferAttribute(t,o),p7.fromBufferAttribute(i,o),n[a]=a===0?0:n[a-1],n[a+1]=n[a]+h7.distanceTo(p7);const s=new Wy(n,2,1);return e.setAttribute("instanceDistanceStart",new Is(s,1,0)),e.setAttribute("instanceDistanceEnd",new Is(s,1,1)),this}raycast(e,t){const i=this.material.worldUnits,n=e.camera;n===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;jl=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Mp=l.linewidth+s,a.boundingSphere===null&&a.computeBoundingSphere(),_2.copy(a.boundingSphere).applyMatrix4(o);let c;if(i)c=Mp*.5;else{const d=Math.max(n.near,_2.distanceToPoint(jl.origin));c=m7(n,d,l.resolution)}if(_2.radius+=c,jl.intersectsSphere(_2)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),w2.copy(a.boundingBox).applyMatrix4(o);let u;if(i)u=Mp*.5;else{const d=Math.max(n.near,w2.distanceToPoint(jl.origin));u=m7(n,d,l.resolution)}w2.expandByScalar(u),jl.intersectsBox(w2)!==!1&&(i?_8e(this,t):S8e(this,n,t))}}class g7 extends d7{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let n=0;n<t;n+=3)i[2*n]=e[n],i[2*n+1]=e[n+1],i[2*n+2]=e[n+2],i[2*n+3]=e[n+3],i[2*n+4]=e[n+4],i[2*n+5]=e[n+5];return super.setPositions(i),this}setColors(e){const t=e.length-3,i=new Float32Array(2*t);for(let n=0;n<t;n+=3)i[2*n]=e[n],i[2*n+1]=e[n+1],i[2*n+2]=e[n+2],i[2*n+3]=e[n+3],i[2*n+4]=e[n+4],i[2*n+5]=e[n+5];return super.setColors(i),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class M8e extends T8e{constructor(e=new g7,t=new zL({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}class jL extends g7{constructor(){super(...arguments),this.isBezieoLineGeometry=!0}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};return e.uuid=this.uuid,e.type="BufferGeometry",e.data={},e}}class S2 extends zL{constructor(){super(),this.isBezierLineMaterial=!0,this.type="BezierLineMaterial"}}class E8e extends M8e{constructor(){super(new jL,new S2),this.isBezierLine=!0,this.fromPosition=new oe,this.toPosition=new oe(1,1,0),this.ctrl1=new oe(.2,.1,0),this.ctrl2=new oe(.8,.9,0),this.density=10,this._tmpSize=new qe,this.type="BezierLine",this.material.worldUnits=!0,this.material.linewidth=.1,this.onBeforeRender=(e,t,i,n,s,o)=>{const{x:a,y:l}=e.getSize(this._tmpSize);(this.material.resolution.x!==a||this.material.resolution.y!==l)&&(this.material.resolution.set(a,l),this.material.uniformsNeedUpdate=!0)},this.updatePositions()}updatePositions(){const e=new VN(this.fromPosition,this.ctrl1,this.ctrl2,this.toPosition),t=Math.abs(this.fromPosition.clone().distanceTo(this.toPosition)),i=e.getPoints(this.density*t);this.geometry.setPositions(i.map(n=>[n.x,n.y,n.z]).flat()),this.computeLineDistances()}serialize(e){e.type="BezierLine",e.fromPosition=this.fromPosition.toArray(),e.toPosition=this.toPosition.toArray(),e.ctrl1=this.ctrl1.toArray(),e.ctrl2=this.ctrl2.toArray(),e.density=this.density}deserialize(e){this.fromPosition.fromArray(e.fromPosition),this.toPosition.fromArray(e.toPosition),this.ctrl1.fromArray(e.ctrl1),this.ctrl2.fromArray(e.ctrl2),this.density=e.density,this.geometry instanceof jL||(this.geometry=new jL),this.updatePositions()}}h8e("BezierLineMaterial",S2),Cr("BezierLine",{create:()=>new E8e,members:{fromPosition:"Vector3",toPosition:"Vector3",ctrl1:"Vector3",ctrl2:"Vector3",density:"Number"},proto:"Mesh",group:"Objects.Bezier Line",icon:"line"}),Gc("BezierLineMaterial",S2,{color:"Color",dashed:"Boolean",dashScale:"Number",dashSize:"Number",dashOffset:"Number",gapSize:"Number",opacity:"Number",linewidth:"Number",alphaToCoverage:"Boolean",worldUnits:"Boolean"},"ShaderMaterial",{bezierLineMaterial:{clsName:"bezierLineMaterial",func:()=>new S2,group:"Material.Bezier Line Material",icon:"brand-medium"}}),Cr("PerspectiveCamera",{create:()=>new Yr,members:{},group:"Cameras.Perspective Camera",icon:"camera"}),Cr("OrthographicCamera",{create:()=>new fa,members:{},group:"Cameras.Orthographic Camera",icon:"camera"});class C8e extends vs{constructor(e,t,i=0,n=0){super(e,t,i,n),this.isBox=!0,this.type="Box"}}Cr("Box",{create:({material:r,geometry:e}={})=>new C8e(e,r||new Kn),members:{"geo.width":"Number","geo.height":"Number","geo.depth":"Number","geo.widthSegments":"Number","geo.heightSegments":"Number","geo.depthSegments":"Number"},proto:"Entity",group:"Entities.Box",icon:"box"});class A8e extends vs{constructor(e,t,i=0,n=0){super(e,t,i,n),this.isCapsule=!0,this.type="Capsule"}}Cr("Capsule",{create:({material:r,geometry:e}={})=>new A8e(e||new R_,r||new Kn),members:{"geo.radius":"Number","geo.length":"Number","geo.capSegments":"Number","geo.radialSegments":"Number"},proto:"Entity",group:"Entities.Capsule",icon:"capsule"});class N8e extends vs{constructor(e,t,i=0,n=0){super(e,t,i,n),this.isCone=!0,this.type="Cone"}}Cr("Cone",{create:({material:r,geometry:e}={})=>new N8e(e||new XN,r||new Kn),members:{"geo.radius":"Number","geo.height":"Number","geo.radialSegments":"Number","geo.heightSegments":"Number","geo.openEnded":"Boolean","geo.thetaStart":"Number","geo.thetaLength":"Number"},proto:"Entity",group:"Entities.Cone",icon:"cone"});class R8e extends vs{constructor(e,t,i=0,n=0){super(e,t,i,n),this.isCylinder=!0,this.type="Cylinder"}}Cr("Cylinder",{create:({material:r,geometry:e}={})=>new R8e(e||new bn,r||new Kn),members:{"geo.radiusTop":"Number","geo.radiusBottom":"Number","geo.height":"Number","geo.radialSegments":"Number","geo.heightSegments":"Number","geo.openEnded":"Boolean","geo.thetaStart":"Number","geo.thetaLength":"Number"},proto:"Entity",group:"Entities.Cylinder",icon:"cylinder"});class k8e extends vs{constructor(e,t,i=0,n=0){super(e,t,i,n),this.isSphere=!0,this.type="Sphere"}}Cr("Sphere",{create:({material:r,geometry:e}={})=>new k8e(e||new Jh,r||new Kn),members:{"geo.radius":"Number","geo.widthSegments":"Number","geo.heightSegments":"Number","geo.phiStart":"Number","geo.phiLength":"Number","geo.phiSegments":"Number","geo.thetaStart":"Number","geo.thetaLength":"Number"},proto:"Entity",group:"Entities.Sphere",icon:"sphere"});class L8e extends vs{constructor(e,t,i=0,n=0){super(e,t,i,n),this.isTorus=!0,this.type="Torus"}}Cr("Torus",{create:({material:r,geometry:e}={})=>new L8e(e||new Fu,r||new Kn),members:{"geo.radius":"Number","geo.tube":"Number","geo.radialSegments":"Number","geo.tubularSegments":"Number","geo.arc":"Number"},proto:"Entity",group:"Entities.Torus",icon:"ring"});class O8e extends vs{constructor(e,t,i=0,n=0){super(e,t,i,n),this.isTorusKnot=!0,this.type="TorusKnot"}}Cr("TorusKnot",{create:({material:r,geometry:e}={})=>new O8e(e||new ZN,r||new Kn),members:{"geo.radius":"Number","geo.tube":"Number","geo.radialSegments":"Number","geo.tubularSegments":"Number","geo.p":"Number","geo.q":"Number"},proto:"Entity",group:"Entities.TorusKnot",icon:"pipe"});const P8e={curveSegments:12,steps:1,depth:1,bevelEnabled:!0,bevelThickness:.2,bevelSize:.1,bevelOffset:0,bevelSegments:3};class Ep extends vs{constructor(e,t,i,n=0,s=0){super(e||new U_,t||new Kn,n,s),this.isShape=!0,this.shapes=[],this.type="Shape",this.props=DL({...i},()=>{this.rebuildShapes()}),e||this.rebuildShapes()}get parameters(){var t;const e=((t=this.geometry.parameters)==null?void 0:t.options)||{};return Object.keys(e).length?e:{...P8e}}clone(e){const t=super.clone(e),i=this.props[Tn],n=nd(i),s=t.props[Tn];return sd(s,n),t}serialize(e){super.serialize(e);const t=this.props[Tn];e.props=nd(t)}deserialize(e){if(super.deserialize(e),e.props){const t=this.props[Tn];sd(t,e.props)}this.shapes=Array.isArray(this.geometry.parameters.shapes)?this.geometry.parameters.shapes:[this.geometry.parameters.shapes]}rebuildShapes(){this.rebuildGeometry()}rebuildGeometry(){const e=this.geometry.constructor;this.geometry.dispose();const t=this.geo[Tn];this.geometry=e.fromJSON({shapes:this.shapes.map((i,n)=>n),options:t},this.shapes),this.geometry.applyMatrix4(this.geoMatrix),this.geometry.computeBoundingBox()}}Cr("Shape",{create:({material:r,geometry:e}={})=>new Ep(e,r),members:{"geo.curveSegments":"Number","geo.steps":"Number","geo.depth":"Number","geo.bevelEnabled":"Boolean","geo.bevelThickness":"Number","geo.bevelSize":"Number","geo.bevelOffset":"Number","geo.bevelSegments":"Number"},proto:"Entity",group:"",icon:""});class I8e extends vs{constructor(e,t){super(e||new Xa,t||new Kn,FL.Ghost,0),this.isPlane=!0,this.type="Plane"}}Cr("Plane",{create:({material:r,geometry:e}={})=>new I8e(e,r),members:{"geo.width":"Number","geo.height":"Number","geo.widthSegments":"Number","geo.heightSegments":"Number"},proto:"Mesh",group:"Shapes.Plane",icon:"plane"});class D8e extends Ep{constructor(e,t,i=0,n=0){super(e,t,{vec1:new qe(0,0),vec2:new qe(1,0),vec3:new qe(0,1)},i,n),this.isShapeTriangle=!0,this.type="ShapeTriangle"}rebuildShapes(){const e=new tS,t=new Po;e.subPaths.push(t);const{vec1:i,vec2:n,vec3:s}=this.props;t.moveTo(i.x,i.y),t.lineTo(n.x,n.y),t.lineTo(s.x,s.y),t.lineTo(i.x,i.y),this.shapes=e.toShapes(!1),this.rebuildGeometry()}}Cr("ShapeTriangle",{create:({material:r,geometry:e}={})=>new D8e(e,r),members:{"props.vec1":"Vector2","props.vec2":"Vector2","props.vec3":"Vector2"},proto:"Shape",group:"Shapes.Triangle",icon:"triangle"});class U8e extends Ep{constructor(e,t,i=0,n=0){super(e,t,{size:1},i,n),this.isShapeSquare=!0,this.type="ShapeSquare"}rebuildShapes(){const e=new Po,{size:t}=this.props;e.moveTo(0,0),e.lineTo(t,0),e.lineTo(t,t),e.lineTo(0,t),e.lineTo(0,0),this.shapes=[e],this.rebuildGeometry()}}Cr("ShapeSquare",{create:({material:r,geometry:e}={})=>new U8e(e,r),members:{"props.size":"Number"},proto:"Shape",group:"Shapes.Square",icon:"square"});class F8e extends Ep{constructor(e,t,i=0,n=0){super(e,t,{width:1,height:1,radius:.2},i,n),this.isShapeTriangle=!0,this.type="ShapeRounded"}rebuildShapes(){const e=new tS,t=new Po;e.subPaths.push(t);const{width:i,height:n,radius:s}=this.props;t.moveTo(0,s),t.lineTo(0,n-s),t.quadraticCurveTo(0,n,s,n),t.lineTo(0+i-s,n),t.quadraticCurveTo(i,n,i,n-s),t.lineTo(0+i,s),t.quadraticCurveTo(i,0,i-s,0),t.lineTo(s,0),t.quadraticCurveTo(0,0,0,s),this.shapes=e.toShapes(!1),this.rebuildGeometry()}}Cr("ShapeRounded",{create:({material:r,geometry:e}={})=>new F8e(e,r),members:{"props.width":"Number","props.height":"Number","props.radius":"Number"},proto:"Shape",group:"Shapes.Rounded rectangle",icon:"square"});class B8e extends Ep{constructor(e,t,i=0,n=0){super(e,t,{radius:1},i,n),this.isShapeTriangle=!0,this.type="ShapeCircle"}rebuildShapes(){const e=new Po,{radius:t}=this.props;e.moveTo(0,t).quadraticCurveTo(t,t,t,0).quadraticCurveTo(t,-t,0,-t).quadraticCurveTo(-t,-t,-t,0).quadraticCurveTo(-t,t,0,t),this.shapes=[e],this.rebuildGeometry()}}Cr("ShapeCircle",{create:({material:r,geometry:e}={})=>new B8e(e,r),members:{"props.radius":"Number"},proto:"Shape",group:"Shapes.Circle",icon:"ring"});class z8e extends Ep{constructor(e,t,i=0,n=0){super(e,t,{radius:1,innerRadius:.5},i,n),this.isShapeTriangle=!0,this.type="ShapeArc"}rebuildShapes(){const e=new Po,{radius:t,innerRadius:i}=this.props;e.moveTo(t,0).absarc(0,0,t,0,Math.PI*2,!1);const n=new Wm().moveTo(i,0).absarc(0,0,i,0,Math.PI*2,!0);e.holes.push(n),this.shapes=[e],this.rebuildGeometry()}}Cr("ShapeArc",{create:({material:r,geometry:e}={})=>new z8e(e,r),members:{"props.radius":"Number","props.innerRadius":"Number"},proto:"Shape",group:"Shapes.Arc Circle",icon:"ring"}),Cr("PointLight",{create:()=>{const r=new Il;return r.shadow.mapSize.x=2048,r.shadow.mapSize.y=2048,r},members:{},group:"Lights.Point Light",icon:"bulb"}),Cr("SpotLight",{create:()=>{const r=new Pl;return r.shadow.mapSize.x=2048,r.shadow.mapSize.y=2048,r},members:{},group:"Lights.Spot Light",icon:"bulb"}),Cr("DirectionalLight",{create:()=>{const r=new Dl;return r.shadow.mapSize.x=2048,r.shadow.mapSize.y=2048,r.shadow.bias=-.1,r},members:{},group:"Lights.Directional Light",icon:"bulb"}),Cr("AmbientLight",{create:()=>new np,members:{},group:"Lights.Ambient Light",icon:"bulb"}),Cr("HemisphereLight",{create:()=>new ip,members:{},group:"Lights.Hemisphere Light",icon:"bulb"});function V8e(){var r=Object.create(null);function e(n,s){var o=n.id,a=n.name,l=n.dependencies;l===void 0&&(l=[]);var c=n.init;c===void 0&&(c=function(){});var u=n.getTransferables;if(u===void 0&&(u=null),!r[o])try{l=l.map(function(h){return h&&h.isWorkerModule&&(e(h,function(p){if(p instanceof Error)throw p}),h=r[h.id].value),h}),c=i("<"+a+">.init",c),u&&(u=i("<"+a+">.getTransferables",u));var d=null;typeof c=="function"?d=c.apply(void 0,l):console.error("worker module init function failed to rehydrate"),r[o]={id:o,value:d,getTransferables:u},s(d)}catch(h){h&&h.noLog||console.error(h),s(h)}}function t(n,s){var o,a=n.id,l=n.args;(!r[a]||typeof r[a].value!="function")&&s(new Error("Worker module "+a+": not found or its 'init' did not return a function"));try{var c=(o=r[a]).value.apply(o,l);c&&typeof c.then=="function"?c.then(u,function(d){return s(d instanceof Error?d:new Error(""+d))}):u(c)}catch(d){s(d)}function u(d){try{var h=r[a].getTransferables&&r[a].getTransferables(d);(!h||!Array.isArray(h)||!h.length)&&(h=void 0),s(d,h)}catch(p){console.error(p),s(p)}}}function i(n,s){var o=void 0;self.troikaDefine=function(l){return o=l};var a=URL.createObjectURL(new Blob(["/** "+n.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(a)}catch(l){console.error(l)}return URL.revokeObjectURL(a),delete self.troikaDefine,o}self.addEventListener("message",function(n){var s=n.data,o=s.messageId,a=s.action,l=s.data;try{a==="registerModule"&&e(l,function(c){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:{isCallable:typeof c=="function"}})}),a==="callModule"&&t(l,function(c,u){c instanceof Error?postMessage({messageId:o,success:!1,error:c.message}):postMessage({messageId:o,success:!0,result:c},u||void 0)})}catch(c){postMessage({messageId:o,success:!1,error:c.stack})}})}function G8e(r){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(n){if(typeof n=="function")return n.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=r.dependencies,i=r.init;t=Array.isArray(t)?t.map(function(s){return s&&s._getInitResult?s._getInitResult():s}):[];var n=Promise.all(t).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return n},n},e}var v7=function(){var r=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),r=!0}catch(t){typeof process<"u",console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return v7=function(){return r},r},j8e=0,H8e=0,HL=!1,Rb=Object.create(null),kb=Object.create(null),WL=Object.create(null);function Hl(r){if((!r||typeof r.init!="function")&&!HL)throw new Error("requires `options.init` function");var e=r.dependencies,t=r.init,i=r.getTransferables,n=r.workerId;if(!v7())return G8e(r);n==null&&(n="#default");var s="workerModule"+ ++j8e,o=r.name||s,a=null;e=e&&e.map(function(c){return typeof c=="function"&&!c.workerModuleData&&(HL=!0,c=Hl({workerId:n,name:"<"+o+"> function dependency: "+c.name,init:`function(){return (
`+T2(c)+`
)}`}),HL=!1),c&&c.workerModuleData&&(c=c.workerModuleData),c});function l(){for(var c=[],u=arguments.length;u--;)c[u]=arguments[u];if(!a){a=y7(n,"registerModule",l.workerModuleData);var d=function(){a=null,kb[n].delete(d)};(kb[n]||(kb[n]=new Set)).add(d)}return a.then(function(h){var p=h.isCallable;if(p)return y7(n,"callModule",{id:s,args:c});throw new Error("Worker module function was called but `init` did not return a callable function")})}return l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:e,init:T2(t),getTransferables:i&&T2(i)},l}function W8e(r){kb[r]&&kb[r].forEach(function(e){e()}),Rb[r]&&(Rb[r].terminate(),delete Rb[r])}function T2(r){var e=r.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function $8e(r){var e=Rb[r];if(!e){var t=T2(V8e);e=Rb[r]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+r.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var n=i.data,s=n.messageId,o=WL[s];if(!o)throw new Error("WorkerModule response with empty or unknown messageId");delete WL[s],o(n)}}return e}function y7(r,e,t){return new Promise(function(i,n){var s=++H8e;WL[s]=function(o){o.success?i(o.result):n(new Error("Error in worker "+e+" call: "+o.error))},$8e(r).postMessage({messageId:s,action:e,data:t})})}function b7(){var r=function(e){function t(O,V,U,G,X,ie,se,de){var K=1-se;de.x=K*K*O+2*K*se*U+se*se*X,de.y=K*K*V+2*K*se*G+se*se*ie}function i(O,V,U,G,X,ie,se,de,K,q){var ce=1-K;q.x=ce*ce*ce*O+3*ce*ce*K*U+3*ce*K*K*X+K*K*K*se,q.y=ce*ce*ce*V+3*ce*ce*K*G+3*ce*K*K*ie+K*K*K*de}function n(O,V){for(var U=/([MLQCZ])([^MLQCZ]*)/g,G,X,ie,se,de;G=U.exec(O);){var K=G[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(q){return parseFloat(q)});switch(G[1]){case"M":se=X=K[0],de=ie=K[1];break;case"L":(K[0]!==se||K[1]!==de)&&V("L",se,de,se=K[0],de=K[1]);break;case"Q":{V("Q",se,de,se=K[2],de=K[3],K[0],K[1]);break}case"C":{V("C",se,de,se=K[4],de=K[5],K[0],K[1],K[2],K[3]);break}case"Z":(se!==X||de!==ie)&&V("L",se,de,X,ie);break}}}function s(O,V,U){U===void 0&&(U=16);var G={x:0,y:0};n(O,function(X,ie,se,de,K,q,ce,Te,Z){switch(X){case"L":V(ie,se,de,K);break;case"Q":{for(var L=ie,$=se,re=1;re<U;re++)t(ie,se,q,ce,de,K,re/(U-1),G),V(L,$,G.x,G.y),L=G.x,$=G.y;break}case"C":{for(var te=ie,le=se,ge=1;ge<U;ge++)i(ie,se,q,ce,Te,Z,de,K,ge/(U-1),G),V(te,le,G.x,G.y),te=G.x,le=G.y;break}}})}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",l=new WeakMap,c={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function u(O,V){var U=O.getContext?O.getContext("webgl",c):O,G=l.get(U);if(!G){let ce=function(te){var le=ie[te];if(!le&&(le=ie[te]=U.getExtension(te),!le))throw new Error(te+" not supported");return le},Te=function(te,le){var ge=U.createShader(le);return U.shaderSource(ge,te),U.compileShader(ge),ge},Z=function(te,le,ge,be){if(!se[te]){var _e={},pe={},Se=U.createProgram();U.attachShader(Se,Te(le,U.VERTEX_SHADER)),U.attachShader(Se,Te(ge,U.FRAGMENT_SHADER)),U.linkProgram(Se),se[te]={program:Se,transaction:function(Fe){U.useProgram(Se),Fe({setUniform:function(Y,H){for(var ne=[],Le=arguments.length-2;Le-- >0;)ne[Le]=arguments[Le+2];var Pe=pe[H]||(pe[H]=U.getUniformLocation(Se,H));U["uniform"+Y].apply(U,[Pe].concat(ne))},setAttribute:function(Y,H,ne,Le,Pe){var Ee=_e[Y];Ee||(Ee=_e[Y]={buf:U.createBuffer(),loc:U.getAttribLocation(Se,Y),data:null}),U.bindBuffer(U.ARRAY_BUFFER,Ee.buf),U.vertexAttribPointer(Ee.loc,H,U.FLOAT,!1,0,0),U.enableVertexAttribArray(Ee.loc),X?U.vertexAttribDivisor(Ee.loc,Le):ce("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Ee.loc,Le),Pe!==Ee.data&&(U.bufferData(U.ARRAY_BUFFER,Pe,ne),Ee.data=Pe)}})}}}se[te].transaction(be)},L=function(te,le){K++;try{U.activeTexture(U.TEXTURE0+K);var ge=de[te];ge||(ge=de[te]=U.createTexture(),U.bindTexture(U.TEXTURE_2D,ge),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MIN_FILTER,U.NEAREST),U.texParameteri(U.TEXTURE_2D,U.TEXTURE_MAG_FILTER,U.NEAREST)),U.bindTexture(U.TEXTURE_2D,ge),le(ge,K)}finally{K--}},$=function(te,le,ge){var be=U.createFramebuffer();q.push(be),U.bindFramebuffer(U.FRAMEBUFFER,be),U.activeTexture(U.TEXTURE0+le),U.bindTexture(U.TEXTURE_2D,te),U.framebufferTexture2D(U.FRAMEBUFFER,U.COLOR_ATTACHMENT0,U.TEXTURE_2D,te,0);try{ge(be)}finally{U.deleteFramebuffer(be),U.bindFramebuffer(U.FRAMEBUFFER,q[--q.length-1]||null)}},re=function(){ie={},se={},de={},K=-1,q.length=0};var X=typeof WebGL2RenderingContext<"u"&&U instanceof WebGL2RenderingContext,ie={},se={},de={},K=-1,q=[];U.canvas.addEventListener("webglcontextlost",function(te){re(),te.preventDefault()},!1),l.set(U,G={gl:U,isWebGL2:X,getExtension:ce,withProgram:Z,withTexture:L,withTextureFramebuffer:$,handleContextLoss:re})}V(G)}function d(O,V,U,G,X,ie,se,de){se===void 0&&(se=15),de===void 0&&(de=null),u(O,function(K){var q=K.gl,ce=K.withProgram,Te=K.withTexture;Te("copy",function(Z,L){q.texImage2D(q.TEXTURE_2D,0,q.RGBA,X,ie,0,q.RGBA,q.UNSIGNED_BYTE,V),ce("copy",o,a,function($){var re=$.setUniform,te=$.setAttribute;te("aUV",2,q.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),re("1i","image",L),q.bindFramebuffer(q.FRAMEBUFFER,de||null),q.disable(q.BLEND),q.colorMask(se&8,se&4,se&2,se&1),q.viewport(U,G,X,ie),q.scissor(U,G,X,ie),q.drawArrays(q.TRIANGLES,0,3)})})})}function h(O,V,U){var G=O.width,X=O.height;u(O,function(ie){var se=ie.gl,de=new Uint8Array(G*X*4);se.readPixels(0,0,G,X,se.RGBA,se.UNSIGNED_BYTE,de),O.width=V,O.height=U,d(se,de,0,0,G,X)})}var p=Object.freeze({__proto__:null,withWebGLContext:u,renderImageData:d,resizeWebGLCanvasWithoutClearing:h});function f(O,V,U,G,X,ie){ie===void 0&&(ie=1);var se=new Uint8Array(O*V),de=G[2]-G[0],K=G[3]-G[1],q=[];s(U,function(te,le,ge,be){q.push({x1:te,y1:le,x2:ge,y2:be,minX:Math.min(te,ge),minY:Math.min(le,be),maxX:Math.max(te,ge),maxY:Math.max(le,be)})}),q.sort(function(te,le){return te.maxX-le.maxX});for(var ce=0;ce<O;ce++)for(var Te=0;Te<V;Te++){var Z=$(G[0]+de*(ce+.5)/O,G[1]+K*(Te+.5)/V),L=Math.pow(1-Math.abs(Z)/X,ie)/2;Z<0&&(L=1-L),L=Math.max(0,Math.min(255,Math.round(L*255))),se[Te*O+ce]=L}return se;function $(te,le){for(var ge=1/0,be=1/0,_e=q.length;_e--;){var pe=q[_e];if(pe.maxX+be<=te)break;if(te+be>pe.minX&&le-be<pe.maxY&&le+be>pe.minY){var Se=v(te,le,pe.x1,pe.y1,pe.x2,pe.y2);Se<ge&&(ge=Se,be=Math.sqrt(ge))}}return re(te,le)&&(be=-be),be}function re(te,le){for(var ge=0,be=q.length;be--;){var _e=q[be];if(_e.maxX<=te)break;var pe=_e.y1>le!=_e.y2>le&&te<(_e.x2-_e.x1)*(le-_e.y1)/(_e.y2-_e.y1)+_e.x1;pe&&(ge+=_e.y1<_e.y2?1:-1)}return ge!==0}}function m(O,V,U,G,X,ie,se,de,K,q){ie===void 0&&(ie=1),de===void 0&&(de=0),K===void 0&&(K=0),q===void 0&&(q=0),g(O,V,U,G,X,ie,se,null,de,K,q)}function g(O,V,U,G,X,ie,se,de,K,q,ce){ie===void 0&&(ie=1),K===void 0&&(K=0),q===void 0&&(q=0),ce===void 0&&(ce=0);for(var Te=f(O,V,U,G,X,ie),Z=new Uint8Array(Te.length*4),L=0;L<Te.length;L++)Z[L*4+ce]=Te[L];d(se,Z,K,q,O,V,1<<3-ce,de)}function v(O,V,U,G,X,ie){var se=X-U,de=ie-G,K=se*se+de*de,q=K?Math.max(0,Math.min(1,((O-U)*se+(V-G)*de)/K)):0,ce=O-(U+q*se),Te=V-(G+q*de);return ce*ce+Te*Te}var x=Object.freeze({__proto__:null,generate:f,generateIntoCanvas:m,generateIntoFramebuffer:g}),b="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",w="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",_="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",S=new Float32Array([0,0,2,0,0,2]),T=null,M=!1,E={},C=new WeakMap;function P(O){if(!M&&!F(O))throw new Error("WebGL generation not supported")}function A(O,V,U,G,X,ie,se){if(ie===void 0&&(ie=1),se===void 0&&(se=null),!se&&(se=T,!se)){var de=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!de)throw new Error("OffscreenCanvas or DOM canvas not supported");se=T=de.getContext("webgl",{depth:!1})}P(se);var K=new Uint8Array(O*V*4);u(se,function(Z){var L=Z.gl,$=Z.withTexture,re=Z.withTextureFramebuffer;$("readable",function(te,le){L.texImage2D(L.TEXTURE_2D,0,L.RGBA,O,V,0,L.RGBA,L.UNSIGNED_BYTE,null),re(te,le,function(ge){R(O,V,U,G,X,ie,L,ge,0,0,0),L.readPixels(0,0,O,V,L.RGBA,L.UNSIGNED_BYTE,K)})})});for(var q=new Uint8Array(O*V),ce=0,Te=0;ce<K.length;ce+=4)q[Te++]=K[ce];return q}function N(O,V,U,G,X,ie,se,de,K,q){ie===void 0&&(ie=1),de===void 0&&(de=0),K===void 0&&(K=0),q===void 0&&(q=0),R(O,V,U,G,X,ie,se,null,de,K,q)}function R(O,V,U,G,X,ie,se,de,K,q,ce){ie===void 0&&(ie=1),K===void 0&&(K=0),q===void 0&&(q=0),ce===void 0&&(ce=0),P(se);var Te=[];s(U,function(Z,L,$,re){Te.push(Z,L,$,re)}),Te=new Float32Array(Te),u(se,function(Z){var L=Z.gl,$=Z.isWebGL2,re=Z.getExtension,te=Z.withProgram,le=Z.withTexture,ge=Z.withTextureFramebuffer,be=Z.handleContextLoss;if(le("rawDistances",function(_e,pe){(O!==_e._lastWidth||V!==_e._lastHeight)&&L.texImage2D(L.TEXTURE_2D,0,L.RGBA,_e._lastWidth=O,_e._lastHeight=V,0,L.RGBA,L.UNSIGNED_BYTE,null),te("main",b,w,function(Se){var Fe=Se.setAttribute,Y=Se.setUniform,H=!$&&re("ANGLE_instanced_arrays"),ne=!$&&re("EXT_blend_minmax");Fe("aUV",2,L.STATIC_DRAW,0,S),Fe("aLineSegment",4,L.DYNAMIC_DRAW,1,Te),Y.apply(void 0,["4f","uGlyphBounds"].concat(G)),Y("1f","uMaxDistance",X),Y("1f","uExponent",ie),ge(_e,pe,function(Le){L.enable(L.BLEND),L.colorMask(!0,!0,!0,!0),L.viewport(0,0,O,V),L.scissor(0,0,O,V),L.blendFunc(L.ONE,L.ONE),L.blendEquationSeparate(L.FUNC_ADD,$?L.MAX:ne.MAX_EXT),L.clear(L.COLOR_BUFFER_BIT),$?L.drawArraysInstanced(L.TRIANGLES,0,3,Te.length/4):H.drawArraysInstancedANGLE(L.TRIANGLES,0,3,Te.length/4)})}),te("post",o,_,function(Se){Se.setAttribute("aUV",2,L.STATIC_DRAW,0,S),Se.setUniform("1i","tex",pe),L.bindFramebuffer(L.FRAMEBUFFER,de),L.disable(L.BLEND),L.colorMask(ce===0,ce===1,ce===2,ce===3),L.viewport(K,q,O,V),L.scissor(K,q,O,V),L.drawArrays(L.TRIANGLES,0,3)})}),L.isContextLost())throw be(),new Error("webgl context lost")})}function F(O){var V=!O||O===T?E:O.canvas||O,U=C.get(V);if(U===void 0){M=!0;var G=null;try{var X=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ie=A(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,O);U=ie&&X.length===ie.length&&ie.every(function(se,de){return se===X[de]}),U||(G="bad trial run results",console.info(X,ie))}catch(se){U=!1,G=se.message}G&&console.warn("WebGL SDF generation not supported:",G),M=!1,C.set(V,U)}return U}var B=Object.freeze({__proto__:null,generate:A,generateIntoCanvas:N,generateIntoFramebuffer:R,isSupported:F});function k(O,V,U,G,X,ie){X===void 0&&(X=Math.max(G[2]-G[0],G[3]-G[1])/2),ie===void 0&&(ie=1);try{return A.apply(B,arguments)}catch(se){return console.info("WebGL SDF generation failed, falling back to JS",se),f.apply(x,arguments)}}function z(O,V,U,G,X,ie,se,de,K,q){X===void 0&&(X=Math.max(G[2]-G[0],G[3]-G[1])/2),ie===void 0&&(ie=1),de===void 0&&(de=0),K===void 0&&(K=0),q===void 0&&(q=0);try{return N.apply(B,arguments)}catch(ce){return console.info("WebGL SDF generation failed, falling back to JS",ce),m.apply(x,arguments)}}return e.forEachPathCommand=n,e.generate=k,e.generateIntoCanvas=z,e.javascript=x,e.pathToLineSegments=s,e.webgl=B,e.webglUtils=p,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return r}function x7(){var r=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},n={};i.L=1,n[1]="L",Object.keys(t).forEach(function(be,_e){i[be]=1<<_e+1,n[i[be]]=be}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,o=i.L|i.R|i.AL,a=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,l=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,c=i.S|i.WS|i.B|s|i.PDI|l,u=null;function d(){if(!u){u=new Map;var be=function(pe){if(t.hasOwnProperty(pe)){var Se=0;t[pe].split(",").forEach(function(Fe){var Y=Fe.split("+"),H=Y[0],ne=Y[1];H=parseInt(H,36),ne=ne?parseInt(ne,36):0,u.set(Se+=H,i[pe]);for(var Le=0;Le<ne;Le++)u.set(++Se,i[pe])})}};for(var _e in t)be(_e)}}function h(be){return d(),u.get(be.codePointAt(0))||i.L}function p(be){return n[h(be)]}var f={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function m(be,_e){var pe=36,Se=0,Fe=new Map,Y=_e&&new Map,H;return be.split(",").forEach(function ne(Le){if(Le.indexOf("+")!==-1)for(var Pe=+Le;Pe--;)ne(H);else{H=Le;var Ee=Le.split(">"),Ue=Ee[0],Be=Ee[1];Ue=String.fromCodePoint(Se+=parseInt(Ue,pe)),Be=String.fromCodePoint(Se+=parseInt(Be,pe)),Fe.set(Ue,Be),_e&&Y.set(Be,Ue)}}),{map:Fe,reverseMap:Y}}var g,v,x;function b(){if(!g){var be=m(f.pairs,!0),_e=be.map,pe=be.reverseMap;g=_e,v=pe,x=m(f.canonical,!1).map}}function w(be){return b(),g.get(be)||null}function _(be){return b(),v.get(be)||null}function S(be){return b(),x.get(be)||null}var T=i.L,M=i.R,E=i.EN,C=i.ES,P=i.ET,A=i.AN,N=i.CS,R=i.B,F=i.S,B=i.ON,k=i.BN,z=i.NSM,O=i.AL,V=i.LRO,U=i.RLO,G=i.LRE,X=i.RLE,ie=i.PDF,se=i.LRI,de=i.RLI,K=i.FSI,q=i.PDI;function ce(be,_e){for(var pe=125,Se=new Uint32Array(be.length),Fe=0;Fe<be.length;Fe++)Se[Fe]=h(be[Fe]);var Y=new Map;function H(yo,dl){var bo=Se[yo];Se[yo]=dl,Y.set(bo,Y.get(bo)-1),bo&a&&Y.set(a,Y.get(a)-1),Y.set(dl,(Y.get(dl)||0)+1),dl&a&&Y.set(a,(Y.get(a)||0)+1)}for(var ne=new Uint8Array(be.length),Le=new Map,Pe=[],Ee=null,Ue=0;Ue<be.length;Ue++)Ee||Pe.push(Ee={start:Ue,end:be.length-1,level:_e==="rtl"?1:_e==="ltr"?0:Kq(Ue,!1)}),Se[Ue]&R&&(Ee.end=Ue,Ee=null);for(var Be=X|G|U|V|s|q|ie|R,ve=function(yo){return yo+(yo&1?1:2)},Q=function(yo){return yo+(yo&1?2:1)},he=0;he<Pe.length;he++){Ee=Pe[he];var we=[{_level:Ee.level,_override:0,_isolate:0}],ae=void 0,De=0,We=0,je=0;Y.clear();for(var ye=Ee.start;ye<=Ee.end;ye++){var nt=Se[ye];if(ae=we[we.length-1],Y.set(nt,(Y.get(nt)||0)+1),nt&a&&Y.set(a,(Y.get(a)||0)+1),nt&Be)if(nt&(X|G)){ne[ye]=ae._level;var He=(nt===X?Q:ve)(ae._level);He<=pe&&!De&&!We?we.push({_level:He,_override:0,_isolate:0}):De||We++}else if(nt&(U|V)){ne[ye]=ae._level;var tt=(nt===U?Q:ve)(ae._level);tt<=pe&&!De&&!We?we.push({_level:tt,_override:nt&U?M:T,_isolate:0}):De||We++}else if(nt&s){nt&K&&(nt=Kq(ye+1,!0)===1?de:se),ne[ye]=ae._level,ae._override&&H(ye,ae._override);var Me=(nt===de?Q:ve)(ae._level);Me<=pe&&De===0&&We===0?(je++,we.push({_level:Me,_override:0,_isolate:1,_isolInitIndex:ye})):De++}else if(nt&q){if(De>0)De--;else if(je>0){for(We=0;!we[we.length-1]._isolate;)we.pop();var Ne=we[we.length-1]._isolInitIndex;Ne!=null&&(Le.set(Ne,ye),Le.set(ye,Ne)),we.pop(),je--}ae=we[we.length-1],ne[ye]=ae._level,ae._override&&H(ye,ae._override)}else nt&ie?(De===0&&(We>0?We--:!ae._isolate&&we.length>1&&(we.pop(),ae=we[we.length-1])),ne[ye]=ae._level):nt&R&&(ne[ye]=Ee.level);else ne[ye]=ae._level,ae._override&&nt!==k&&H(ye,ae._override)}for(var fe=[],Ie=null,wt=Ee.start;wt<=Ee.end;wt++){var xt=Se[wt];if(!(xt&l)){var Gt=ne[wt],Jt=xt&s,_r=xt===q;Ie&&Gt===Ie._level?(Ie._end=wt,Ie._endsWithIsolInit=Jt):fe.push(Ie={_start:wt,_end:wt,_level:Gt,_startsWithPDI:_r,_endsWithIsolInit:Jt})}}for(var yi=[],xs=0;xs<fe.length;xs++){var Cn=fe[xs];if(!Cn._startsWithPDI||Cn._startsWithPDI&&!Le.has(Cn._start)){for(var ws=[Ie=Cn],Si=void 0;Ie&&Ie._endsWithIsolInit&&(Si=Le.get(Ie._end))!=null;)for(var js=xs+1;js<fe.length;js++)if(fe[js]._start===Si){ws.push(Ie=fe[js]);break}for(var wd=[],t1=0;t1<ws.length;t1++)for(var aT=ws[t1],Ce=aT._start;Ce<=aT._end;Ce++)wd.push(Ce);for(var Ke=ne[wd[0]],ot=Ee.level,Ye=wd[0]-1;Ye>=0;Ye--)if(!(Se[Ye]&l)){ot=ne[Ye];break}var st=wd[wd.length-1],Pt=ne[st],tr=Ee.level;if(!(Se[st]&s)){for(var rr=st+1;rr<=Ee.end;rr++)if(!(Se[rr]&l)){tr=ne[rr];break}}yi.push({_seqIndices:wd,_sosType:Math.max(ot,Ke)%2?M:T,_eosType:Math.max(tr,Pt)%2?M:T})}}for(var ur=0;ur<yi.length;ur++){var Er=yi[ur],_t=Er._seqIndices,gr=Er._sosType,pn=Er._eosType,oi=ne[_t[0]]&1?M:T;if(Y.get(z))for(var os=0;os<_t.length;os++){var Ta=_t[os];if(Se[Ta]&z){for(var Ri=gr,Sr=os-1;Sr>=0;Sr--)if(!(Se[_t[Sr]]&l)){Ri=Se[_t[Sr]];break}H(Ta,Ri&(s|q)?B:Ri)}}if(Y.get(E))for(var _d=0;_d<_t.length;_d++){var Vg=_t[_d];if(Se[Vg]&E)for(var Ma=_d-1;Ma>=-1;Ma--){var r1=Ma===-1?gr:Se[_t[Ma]];if(r1&o){r1===O&&H(Vg,A);break}}}if(Y.get(O))for(var qc=0;qc<_t.length;qc++){var Gg=_t[qc];Se[Gg]&O&&H(Gg,M)}if(Y.get(C)||Y.get(N))for(var tn=1;tn<_t.length-1;tn++){var cl=_t[tn];if(Se[cl]&(C|N)){for(var $l=0,as=0,zp=tn-1;zp>=0&&($l=Se[_t[zp]],!!($l&l));zp--);for(var i1=tn+1;i1<_t.length&&(as=Se[_t[i1]],!!(as&l));i1++);$l===as&&(Se[cl]===C?$l===E:$l&(E|A))&&H(cl,$l)}}if(Y.get(E))for(var jo=0;jo<_t.length;jo++){var xXe=_t[jo];if(Se[xXe]&E){for(var lT=jo-1;lT>=0&&Se[_t[lT]]&(P|l);lT--)H(_t[lT],E);for(jo++;jo<_t.length&&Se[_t[jo]]&(P|l|E);jo++)Se[_t[jo]]!==E&&H(_t[jo],E)}}if(Y.get(P)||Y.get(C)||Y.get(N))for(var n1=0;n1<_t.length;n1++){var Dq=_t[n1];if(Se[Dq]&(P|C|N)){H(Dq,B);for(var cT=n1-1;cT>=0&&Se[_t[cT]]&l;cT--)H(_t[cT],B);for(var uT=n1+1;uT<_t.length&&Se[_t[uT]]&l;uT++)H(_t[uT],B)}}if(Y.get(E))for(var HO=0,Uq=gr;HO<_t.length;HO++){var Fq=_t[HO],WO=Se[Fq];WO&E?Uq===T&&H(Fq,T):WO&o&&(Uq=WO)}if(Y.get(a)){var s1=M|E|A,Bq=s1|T,dT=[];{for(var jg=[],Hg=0;Hg<_t.length;Hg++)if(Se[_t[Hg]]&a){var o1=be[_t[Hg]],zq=void 0;if(w(o1)!==null)if(jg.length<63)jg.push({char:o1,seqIndex:Hg});else break;else if((zq=_(o1))!==null)for(var a1=jg.length-1;a1>=0;a1--){var $O=jg[a1].char;if($O===zq||$O===_(S(o1))||w(S($O))===o1){dT.push([jg[a1].seqIndex,Hg]),jg.length=a1;break}}}dT.sort(function(yo,dl){return yo[0]-dl[0]})}for(var XO=0;XO<dT.length;XO++){for(var Vq=dT[XO],hT=Vq[0],qO=Vq[1],Gq=!1,ul=0,KO=hT+1;KO<qO;KO++){var jq=_t[KO];if(Se[jq]&Bq){Gq=!0;var Hq=Se[jq]&s1?M:T;if(Hq===oi){ul=Hq;break}}}if(Gq&&!ul){ul=gr;for(var YO=hT-1;YO>=0;YO--){var Wq=_t[YO];if(Se[Wq]&Bq){var $q=Se[Wq]&s1?M:T;$q!==oi?ul=$q:ul=oi;break}}}if(ul){if(Se[_t[hT]]=Se[_t[qO]]=ul,ul!==oi){for(var l1=hT+1;l1<_t.length;l1++)if(!(Se[_t[l1]]&l)){h(be[_t[l1]])&z&&(Se[_t[l1]]=ul);break}}if(ul!==oi){for(var c1=qO+1;c1<_t.length;c1++)if(!(Se[_t[c1]]&l)){h(be[_t[c1]])&z&&(Se[_t[c1]]=ul);break}}}}for(var Sd=0;Sd<_t.length;Sd++)if(Se[_t[Sd]]&a){for(var Xq=Sd,ZO=Sd,JO=gr,u1=Sd-1;u1>=0;u1--)if(Se[_t[u1]]&l)Xq=u1;else{JO=Se[_t[u1]]&s1?M:T;break}for(var qq=pn,d1=Sd+1;d1<_t.length;d1++)if(Se[_t[d1]]&(a|l))ZO=d1;else{qq=Se[_t[d1]]&s1?M:T;break}for(var QO=Xq;QO<=ZO;QO++)Se[_t[QO]]=JO===qq?JO:oi;Sd=ZO}}}for(var Ho=Ee.start;Ho<=Ee.end;Ho++){var wXe=ne[Ho],pT=Se[Ho];if(wXe&1?pT&(T|E|A)&&ne[Ho]++:pT&M?ne[Ho]++:pT&(A|E)&&(ne[Ho]+=2),pT&l&&(ne[Ho]=Ho===0?Ee.level:ne[Ho-1]),Ho===Ee.end||h(be[Ho])&(F|R))for(var fT=Ho;fT>=0&&h(be[fT])&c;fT--)ne[fT]=Ee.level}}return{levels:ne,paragraphs:Pe};function Kq(yo,dl){for(var bo=yo;bo<be.length;bo++){var Td=Se[bo];if(Td&(M|O))return 1;if(Td&(R|T)||dl&&Td===q)return 0;if(Td&s){var Yq=_Xe(bo);bo=Yq===-1?be.length:Yq}}return 0}function _Xe(yo){for(var dl=1,bo=yo+1;bo<be.length;bo++){var Td=Se[bo];if(Td&R)break;if(Td&q){if(--dl===0)return bo}else Td&s&&dl++}return-1}}var Te="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Z;function L(){if(!Z){var be=m(Te,!0),_e=be.map,pe=be.reverseMap;pe.forEach(function(Se,Fe){_e.set(Fe,Se)}),Z=_e}}function $(be){return L(),Z.get(be)||null}function re(be,_e,pe,Se){var Fe=be.length;pe=Math.max(0,pe==null?0:+pe),Se=Math.min(Fe-1,Se==null?Fe-1:+Se);for(var Y=new Map,H=pe;H<=Se;H++)if(_e[H]&1){var ne=$(be[H]);ne!==null&&Y.set(H,ne)}return Y}function te(be,_e,pe,Se){var Fe=be.length;pe=Math.max(0,pe==null?0:+pe),Se=Math.min(Fe-1,Se==null?Fe-1:+Se);var Y=[];return _e.paragraphs.forEach(function(H){var ne=Math.max(pe,H.start),Le=Math.min(Se,H.end);if(ne<Le){for(var Pe=_e.levels.slice(ne,Le+1),Ee=Le;Ee>=ne&&h(be[Ee])&c;Ee--)Pe[Ee]=H.level;for(var Ue=H.level,Be=1/0,ve=0;ve<Pe.length;ve++){var Q=Pe[ve];Q>Ue&&(Ue=Q),Q<Be&&(Be=Q|1)}for(var he=Ue;he>=Be;he--)for(var we=0;we<Pe.length;we++)if(Pe[we]>=he){for(var ae=we;we+1<Pe.length&&Pe[we+1]>=he;)we++;we>ae&&Y.push([ae+ne,we+ne])}}}),Y}function le(be,_e,pe,Se){var Fe=ge(be,_e,pe,Se),Y=[].concat(be);return Fe.forEach(function(H,ne){Y[ne]=(_e.levels[H]&1?$(be[H]):null)||be[H]}),Y.join("")}function ge(be,_e,pe,Se){for(var Fe=te(be,_e,pe,Se),Y=[],H=0;H<be.length;H++)Y[H]=H;return Fe.forEach(function(ne){for(var Le=ne[0],Pe=ne[1],Ee=Y.slice(Le,Pe+1),Ue=Ee.length;Ue--;)Y[Pe-Ue]=Ee[Ue]}),Y}return e.closingToOpeningBracket=_,e.getBidiCharType=h,e.getBidiCharTypeName=p,e.getCanonicalBracket=S,e.getEmbeddingLevels=ce,e.getMirroredCharacter=$,e.getMirroredCharactersMap=re,e.getReorderSegments=te,e.getReorderedIndices=ge,e.getReorderedString=le,e.openingToClosingBracket=w,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return r}const w7=/\bvoid\s+main\s*\(\s*\)\s*{/g;function $L(r){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,n){let s=yr[n];return s?$L(s):i}return r.replace(e,t)}const is=[];for(let r=0;r<256;r++)is[r]=(r<16?"0":"")+r.toString(16);function X8e(){const r=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(is[r&255]+is[r>>8&255]+is[r>>16&255]+is[r>>24&255]+"-"+is[e&255]+is[e>>8&255]+"-"+is[e>>16&15|64]+is[e>>24&255]+"-"+is[t&63|128]+is[t>>8&255]+"-"+is[t>>16&255]+is[t>>24&255]+is[i&255]+is[i>>8&255]+is[i>>16&255]+is[i>>24&255]).toUpperCase()}const Cp=Object.assign||function(){let r=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])}return r},q8e=Date.now(),_7=new WeakMap,S7=new Map;let K8e=1e10;function XL(r,e){const t=Q8e(e);let i=_7.get(r);if(i||_7.set(r,i=Object.create(null)),i[t])return new i[t];const n=`_onBeforeCompile${t}`,s=function(c,u){r.onBeforeCompile.call(this,c,u);const d=this.customProgramCacheKey()+"|"+c.vertexShader+"|"+c.fragmentShader;let h=S7[d];if(!h){const p=Y8e(this,c,e,t);h=S7[d]=p}c.vertexShader=h.vertexShader,c.fragmentShader=h.fragmentShader,Cp(c.uniforms,this.uniforms),e.timeUniform&&(c.uniforms[e.timeUniform]={get value(){return Date.now()-q8e}}),this[n]&&this[n](c)},o=function(){return a(e.chained?r:r.clone())},a=function(c){const u=Object.create(c,l);return Object.defineProperty(u,"baseMaterial",{value:r}),Object.defineProperty(u,"id",{value:K8e++}),u.uuid=X8e(),u.uniforms=Cp({},c.uniforms,e.uniforms),u.defines=Cp({},c.defines,e.defines),u.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",u.extensions=Cp({},c.extensions,e.extensions),u._listeners=void 0,u},l={constructor:{value:o},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return r.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(c){this[n]=c}},copy:{writable:!0,configurable:!0,value:function(c){return r.copy.call(this,c),!r.isShaderMaterial&&!r.isDerivedMaterial&&(Cp(this.extensions,c.extensions),Cp(this.defines,c.defines),Cp(this.uniforms,Lo.clone(c.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const c=new r.constructor;return a(c).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let c=this._depthMaterial;return c||(c=this._depthMaterial=XL(r.isDerivedMaterial?r.getDepthMaterial():new jh({depthPacking:ty}),e),c.defines.IS_DEPTH_MATERIAL="",c.uniforms=this.uniforms),c}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let c=this._distanceMaterial;return c||(c=this._distanceMaterial=XL(r.isDerivedMaterial?r.getDistanceMaterial():new Ay,e),c.defines.IS_DISTANCE_MATERIAL="",c.uniforms=this.uniforms),c}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:c,_distanceMaterial:u}=this;c&&c.dispose(),u&&u.dispose(),r.dispose.call(this)}}};return i[t]=o,new o}function Y8e(r,{vertexShader:e,fragmentShader:t},i,n){let{vertexDefs:s,vertexMainIntro:o,vertexMainOutro:a,vertexTransform:l,fragmentDefs:c,fragmentMainIntro:u,fragmentMainOutro:d,fragmentColorTransform:h,customRewriter:p,timeUniform:f}=i;if(s=s||"",o=o||"",a=a||"",c=c||"",u=u||"",d=d||"",(l||p)&&(e=$L(e)),(h||p)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=$L(t)),p){let m=p({vertexShader:e,fragmentShader:t});e=m.vertexShader,t=m.fragmentShader}if(h){let m=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,g=>(m.push(g),"")),d=`${h}
${m.join(`
`)}
${d}`}if(f){const m=`
uniform float ${f};
`;s=m+s,c=m+c}return l&&(e=`vec3 troika_position_${n};
vec3 troika_normal_${n};
vec2 troika_uv_${n};
${e}
`,s=`${s}
void troikaVertexTransform${n}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${l}
}
`,o=`
troika_position_${n} = vec3(position);
troika_normal_${n} = vec3(normal);
troika_uv_${n} = vec2(uv);
troikaVertexTransform${n}(troika_position_${n}, troika_normal_${n}, troika_uv_${n});
${o}
`,e=e.replace(/\b(position|normal|uv)\b/g,(m,g,v,x)=>/\battribute\s+vec[23]\s+$/.test(x.substr(0,v))?g:`troika_${g}_${n}`),r.map&&r.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${n}`))),e=T7(e,n,s,o,a),t=T7(t,n,c,u,d),{vertexShader:e,fragmentShader:t}}function T7(r,e,t,i,n){return(i||n||t)&&(r=r.replace(w7,`
${t}
void troikaOrigMain${e}() {`),r+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${n}
}`),r}function Z8e(r,e){return r==="uniforms"?void 0:typeof e=="function"?e.toString():e}let J8e=0;const M7=new Map;function Q8e(r){const e=JSON.stringify(r,Z8e);let t=M7.get(e);return t==null&&M7.set(e,t=++J8e),t}function eVe(){return typeof window>"u"&&(self.window=self),function(r){var e={parse:function(n){var s=e._bin,o=new Uint8Array(n);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var d=s.readUint(o,a);a+=4,c.push(e._readFont(o,d))}return c}return[e._readFont(o,0)]},_readFont:function(n,s){var o=e._bin,a=s;o.readFixed(n,s),s+=4;var l=o.readUshort(n,s);s+=2,o.readUshort(n,s),s+=2,o.readUshort(n,s),s+=2,o.readUshort(n,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],u={_data:n,_offset:a},d={},h=0;h<l;h++){var p=o.readASCII(n,s,4);s+=4,o.readUint(n,s),s+=4;var f=o.readUint(n,s);s+=4;var m=o.readUint(n,s);s+=4,d[p]={offset:f,length:m}}for(h=0;h<c.length;h++){var g=c[h];d[g]&&(u[g.trim()]=e[g.trim()].parse(n,d[g].offset,d[g].length,u))}return u},_tabOffset:function(n,s,o){for(var a=e._bin,l=a.readUshort(n,o+4),c=o+12,u=0;u<l;u++){var d=a.readASCII(n,c,4);c+=4,a.readUint(n,c),c+=4;var h=a.readUint(n,c);if(c+=4,a.readUint(n,c),c+=4,d==s)return h}return 0}};e._bin={readFixed:function(n,s){return(n[s]<<8|n[s+1])+(n[s+2]<<8|n[s+3])/65540},readF2dot14:function(n,s){return e._bin.readShort(n,s)/16384},readInt:function(n,s){return e._bin._view(n).getInt32(s)},readInt8:function(n,s){return e._bin._view(n).getInt8(s)},readShort:function(n,s){return e._bin._view(n).getInt16(s)},readUshort:function(n,s){return e._bin._view(n).getUint16(s)},readUshorts:function(n,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(n,s+2*l));return a},readUint:function(n,s){return e._bin._view(n).getUint32(s)},readUint64:function(n,s){return 4294967296*e._bin.readUint(n,s)+e._bin.readUint(n,s+4)},readASCII:function(n,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(n[s+l]);return a},readUnicode:function(n,s,o){for(var a="",l=0;l<o;l++){var c=n[s++]<<8|n[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(n,s,o){var a=e._bin._tdec;return a&&s==0&&o==n.length?a.decode(n):e._bin.readASCII(n,s,o)},readBytes:function(n,s,o){for(var a=[],l=0;l<o;l++)a.push(n[s+l]);return a},readASCIIArray:function(n,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(n[s+l]));return a},_view:function(n){return n._dataView||(n._dataView=n.buffer?new DataView(n.buffer,n.byteOffset,n.byteLength):new DataView(new Uint8Array(n).buffer))}},e._lctf={},e._lctf.parse=function(n,s,o,a,l){var c=e._bin,u={},d=s;c.readFixed(n,s),s+=4;var h=c.readUshort(n,s);s+=2;var p=c.readUshort(n,s);s+=2;var f=c.readUshort(n,s);return s+=2,u.scriptList=e._lctf.readScriptList(n,d+h),u.featureList=e._lctf.readFeatureList(n,d+p),u.lookupList=e._lctf.readLookupList(n,d+f,l),u},e._lctf.readLookupList=function(n,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(n,s);s+=2;for(var d=0;d<u;d++){var h=a.readUshort(n,s);s+=2;var p=e._lctf.readLookupTable(n,l+h,o);c.push(p)}return c},e._lctf.readLookupTable=function(n,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(n,s),s+=2,c.flag=a.readUshort(n,s),s+=2;var u=a.readUshort(n,s);s+=2;for(var d=c.ltype,h=0;h<u;h++){var p=a.readUshort(n,s);s+=2;var f=o(n,d,l+p,c);c.tabs.push(f)}return c},e._lctf.numOfOnes=function(n){for(var s=0,o=0;o<32;o++)n>>>o&1&&s++;return s},e._lctf.readClassDef=function(n,s){var o=e._bin,a=[],l=o.readUshort(n,s);if(s+=2,l==1){var c=o.readUshort(n,s);s+=2;var u=o.readUshort(n,s);s+=2;for(var d=0;d<u;d++)a.push(c+d),a.push(c+d),a.push(o.readUshort(n,s)),s+=2}if(l==2){var h=o.readUshort(n,s);for(s+=2,d=0;d<h;d++)a.push(o.readUshort(n,s)),s+=2,a.push(o.readUshort(n,s)),s+=2,a.push(o.readUshort(n,s)),s+=2}return a},e._lctf.getInterval=function(n,s){for(var o=0;o<n.length;o+=3){var a=n[o],l=n[o+1];if(n[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(n,s){var o=e._bin,a={};a.fmt=o.readUshort(n,s),s+=2;var l=o.readUshort(n,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(n,s,l)),a.fmt==2&&(a.tab=o.readUshorts(n,s,3*l)),a},e._lctf.coverageIndex=function(n,s){var o=n.tab;if(n.fmt==1)return o.indexOf(s);if(n.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(n,s){var o=e._bin,a=s,l=[],c=o.readUshort(n,s);s+=2;for(var u=0;u<c;u++){var d=o.readASCII(n,s,4);s+=4;var h=o.readUshort(n,s);s+=2;var p=e._lctf.readFeatureTable(n,a+h);p.tag=d.trim(),l.push(p)}return l},e._lctf.readFeatureTable=function(n,s){var o=e._bin,a=s,l={},c=o.readUshort(n,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(n,s);s+=2,l.tab=[];for(var d=0;d<u;d++)l.tab.push(o.readUshort(n,s+2*d));return l},e._lctf.readScriptList=function(n,s){var o=e._bin,a=s,l={},c=o.readUshort(n,s);s+=2;for(var u=0;u<c;u++){var d=o.readASCII(n,s,4);s+=4;var h=o.readUshort(n,s);s+=2,l[d.trim()]=e._lctf.readScriptTable(n,a+h)}return l},e._lctf.readScriptTable=function(n,s){var o=e._bin,a=s,l={},c=o.readUshort(n,s);s+=2,c>0&&(l.default=e._lctf.readLangSysTable(n,a+c));var u=o.readUshort(n,s);s+=2;for(var d=0;d<u;d++){var h=o.readASCII(n,s,4);s+=4;var p=o.readUshort(n,s);s+=2,l[h.trim()]=e._lctf.readLangSysTable(n,a+p)}return l},e._lctf.readLangSysTable=function(n,s){var o=e._bin,a={};o.readUshort(n,s),s+=2,a.reqFeature=o.readUshort(n,s),s+=2;var l=o.readUshort(n,s);return s+=2,a.features=o.readUshorts(n,s,l),a},e.CFF={},e.CFF.parse=function(n,s,o){var a=e._bin;(n=new Uint8Array(n.buffer,s,o))[s=0],n[++s],n[++s],n[++s],s++;var l=[];s=e.CFF.readIndex(n,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(n,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var d=[];s=e.CFF.readIndex(n,s,d);var h=[];for(u=0;u<d.length-1;u++)h.push(e.CFF.readDict(n,s+d[u],s+d[u+1]));s+=d[d.length-1];var p=h[0],f=[];s=e.CFF.readIndex(n,s,f);var m=[];for(u=0;u<f.length-1;u++)m.push(a.readASCII(n,s+f[u],f[u+1]-f[u]));if(s+=f[f.length-1],e.CFF.readSubrs(n,s,p),p.CharStrings){s=p.CharStrings,f=[],s=e.CFF.readIndex(n,s,f);var g=[];for(u=0;u<f.length-1;u++)g.push(a.readBytes(n,s+f[u],f[u+1]-f[u]));p.CharStrings=g}if(p.ROS){s=p.FDArray;var v=[];for(s=e.CFF.readIndex(n,s,v),p.FDArray=[],u=0;u<v.length-1;u++){var x=e.CFF.readDict(n,s+v[u],s+v[u+1]);e.CFF._readFDict(n,x,m),p.FDArray.push(x)}s+=v[v.length-1],s=p.FDSelect,p.FDSelect=[];var b=n[s];if(s++,b!=3)throw b;var w=a.readUshort(n,s);for(s+=2,u=0;u<w+1;u++)p.FDSelect.push(a.readUshort(n,s),n[s+2]),s+=3}return p.Encoding&&(p.Encoding=e.CFF.readEncoding(n,p.Encoding,p.CharStrings.length)),p.charset&&(p.charset=e.CFF.readCharset(n,p.charset,p.CharStrings.length)),e.CFF._readFDict(n,p,m),p},e.CFF._readFDict=function(n,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(n,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(n,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(n,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(n,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var d=0;d<l.length-1;d++)o.Subrs.push(a.readBytes(n,s+l[d],l[d+1]-l[d]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(n,s){for(var o=0;o<n.charset.length;o++)if(n.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(n,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(n,e.CFF.tableSE[s])},e.CFF.readEncoding=function(n,s,o){e._bin;var a=[".notdef"],l=n[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=n[s];s++;for(var u=0;u<c;u++)a.push(n[s+u]);return a},e.CFF.readCharset=function(n,s,o){var a=e._bin,l=[".notdef"],c=n[s];if(s++,c==0)for(var u=0;u<o;u++){var d=a.readUshort(n,s);s+=2,l.push(d)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){d=a.readUshort(n,s),s+=2;var h=0;for(c==1?(h=n[s],s++):(h=a.readUshort(n,s),s+=2),u=0;u<=h;u++)l.push(d),d++}}return l},e.CFF.readIndex=function(n,s,o){var a=e._bin,l=a.readUshort(n,s)+1,c=n[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(n[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(n,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(n,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(n,s,o){var a=e._bin,l=n[s],c=n[s+1];n[s+2],n[s+3],n[s+4];var u=1,d=null,h=null;l<=20&&(d=l,u=1),l==12&&(d=100*l+c,u=2),21<=l&&l<=27&&(d=l,u=1),l==28&&(h=a.readShort(n,s+1),u=3),29<=l&&l<=31&&(d=l,u=1),32<=l&&l<=246&&(h=l-139,u=1),247<=l&&l<=250&&(h=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(h=256*-(l-251)-c-108,u=2),l==255&&(h=a.readInt(n,s+1)/65535,u=5),o.val=h??"o"+d,o.size=u},e.CFF.readCharString=function(n,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=n[s],d=n[s+1];n[s+2],n[s+3],n[s+4];var h=1,p=null,f=null;u<=20&&(p=u,h=1),u==12&&(p=100*u+d,h=2),u!=19&&u!=20||(p=u,h=2),21<=u&&u<=27&&(p=u,h=1),u==28&&(f=l.readShort(n,s+1),h=3),29<=u&&u<=31&&(p=u,h=1),32<=u&&u<=246&&(f=u-139,h=1),247<=u&&u<=250&&(f=256*(u-247)+d+108,h=2),251<=u&&u<=254&&(f=256*-(u-251)-d-108,h=2),u==255&&(f=l.readInt(n,s+1)/65535,h=5),c.push(f??"o"+p),s+=h}return c},e.CFF.readDict=function(n,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=n[s],d=n[s+1];n[s+2],n[s+3],n[s+4];var h=1,p=null,f=null;if(u==28&&(f=a.readShort(n,s+1),h=3),u==29&&(f=a.readInt(n,s+1),h=5),32<=u&&u<=246&&(f=u-139,h=1),247<=u&&u<=250&&(f=256*(u-247)+d+108,h=2),251<=u&&u<=254&&(f=256*-(u-251)-d-108,h=2),u==255)throw f=a.readInt(n,s+1)/65535,h=5,"unknown number";if(u==30){var m=[];for(h=1;;){var g=n[s+h];h++;var v=g>>4,x=15&g;if(v!=15&&m.push(v),x!=15&&m.push(x),x==15)break}for(var b="",w=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],_=0;_<m.length;_++)b+=w[m[_]];f=parseFloat(b)}u<=21&&(p=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],h=1,u==12&&(p=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][d],h=2)),p!=null?(l[p]=c.length==1?c[0]:c,c=[]):c.push(f),s+=h}return l},e.cmap={},e.cmap.parse=function(n,s,o){n=new Uint8Array(n.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(n,s),s+=2;var c=a.readUshort(n,s);s+=2;var u=[];l.tables=[];for(var d=0;d<c;d++){var h=a.readUshort(n,s);s+=2;var p=a.readUshort(n,s);s+=2;var f=a.readUint(n,s);s+=4;var m="p"+h+"e"+p,g=u.indexOf(f);if(g==-1){var v;g=l.tables.length,u.push(f);var x=a.readUshort(n,f);x==0?v=e.cmap.parse0(n,f):x==4?v=e.cmap.parse4(n,f):x==6?v=e.cmap.parse6(n,f):x==12?v=e.cmap.parse12(n,f):console.debug("unknown format: "+x,h,p,f),l.tables.push(v)}if(l[m]!=null)throw"multiple tables for one platform+encoding";l[m]=g}return l},e.cmap.parse0=function(n,s){var o=e._bin,a={};a.format=o.readUshort(n,s),s+=2;var l=o.readUshort(n,s);s+=2,o.readUshort(n,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(n[s+c]);return a},e.cmap.parse4=function(n,s){var o=e._bin,a=s,l={};l.format=o.readUshort(n,s),s+=2;var c=o.readUshort(n,s);s+=2,o.readUshort(n,s),s+=2;var u=o.readUshort(n,s);s+=2;var d=u/2;l.searchRange=o.readUshort(n,s),s+=2,l.entrySelector=o.readUshort(n,s),s+=2,l.rangeShift=o.readUshort(n,s),s+=2,l.endCount=o.readUshorts(n,s,d),s+=2*d,s+=2,l.startCount=o.readUshorts(n,s,d),s+=2*d,l.idDelta=[];for(var h=0;h<d;h++)l.idDelta.push(o.readShort(n,s)),s+=2;for(l.idRangeOffset=o.readUshorts(n,s,d),s+=2*d,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(n,s)),s+=2;return l},e.cmap.parse6=function(n,s){var o=e._bin,a={};a.format=o.readUshort(n,s),s+=2,o.readUshort(n,s),s+=2,o.readUshort(n,s),s+=2,a.firstCode=o.readUshort(n,s),s+=2;var l=o.readUshort(n,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(n,s)),s+=2;return a},e.cmap.parse12=function(n,s){var o=e._bin,a={};a.format=o.readUshort(n,s),s+=2,s+=2,o.readUint(n,s),s+=4,o.readUint(n,s),s+=4;var l=o.readUint(n,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,d=o.readUint(n,u+0),h=o.readUint(n,u+4),p=o.readUint(n,u+8);a.groups.push([d,h,p])}return a},e.glyf={},e.glyf.parse=function(n,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(n,s){var o=e._bin,a=n._data,l=e._tabOffset(a,"glyf",n._offset)+n.loca[s];if(n.loca[s]==n.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var d=o.readUshort(a,l);if(l+=2,a.length-l<d)return null;c.instructions=o.readBytes(a,l,d),l+=d;var h=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<h;u++){var p=a[l];if(l++,c.flags.push(p),(8&p)!=0){var f=a[l];l++;for(var m=0;m<f;m++)c.flags.push(p),u++}}for(c.xs=[],u=0;u<h;u++){var g=(2&c.flags[u])!=0,v=(16&c.flags[u])!=0;g?(c.xs.push(v?a[l]:-a[l]),l++):v?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<h;u++)g=(4&c.flags[u])!=0,v=(32&c.flags[u])!=0,g?(c.ys.push(v?a[l]:-a[l]),l++):v?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var x=0,b=0;for(u=0;u<h;u++)x+=c.xs[u],b+=c.ys[u],c.xs[u]=x,c.ys[u]=b}else{var w;c.parts=[];do{w=o.readUshort(a,l),l+=2;var _={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(_),_.glyphIndex=o.readUshort(a,l),l+=2,1&w){var S=o.readShort(a,l);l+=2;var T=o.readShort(a,l);l+=2}else S=o.readInt8(a,l),l++,T=o.readInt8(a,l),l++;2&w?(_.m.tx=S,_.m.ty=T):(_.p1=S,_.p2=T),8&w?(_.m.a=_.m.d=o.readF2dot14(a,l),l+=2):64&w?(_.m.a=o.readF2dot14(a,l),l+=2,_.m.d=o.readF2dot14(a,l),l+=2):128&w&&(_.m.a=o.readF2dot14(a,l),l+=2,_.m.b=o.readF2dot14(a,l),l+=2,_.m.c=o.readF2dot14(a,l),l+=2,_.m.d=o.readF2dot14(a,l),l+=2)}while(32&w);if(256&w){var M=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<M;u++)c.instr.push(a[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(n,s,o,a){return e._lctf.parse(n,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(n,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(n,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var d=l.readUshort(n,o);o+=2,u.coverage=e._lctf.readCoverage(n,d+c)}if(s==1&&u.fmt==1){var h=l.readUshort(n,o);o+=2;var p=e._lctf.numOfOnes(h);h!=0&&(u.pos=e.GPOS.readValueRecord(n,o,h))}else if(s==2&&u.fmt>=1&&u.fmt<=2){h=l.readUshort(n,o),o+=2;var f=l.readUshort(n,o);o+=2,p=e._lctf.numOfOnes(h);var m=e._lctf.numOfOnes(f);if(u.fmt==1){u.pairsets=[];var g=l.readUshort(n,o);o+=2;for(var v=0;v<g;v++){var x=c+l.readUshort(n,o);o+=2;var b=l.readUshort(n,x);x+=2;for(var w=[],_=0;_<b;_++){var S=l.readUshort(n,x);x+=2,h!=0&&(A=e.GPOS.readValueRecord(n,x,h),x+=2*p),f!=0&&(N=e.GPOS.readValueRecord(n,x,f),x+=2*m),w.push({gid2:S,val1:A,val2:N})}u.pairsets.push(w)}}if(u.fmt==2){var T=l.readUshort(n,o);o+=2;var M=l.readUshort(n,o);o+=2;var E=l.readUshort(n,o);o+=2;var C=l.readUshort(n,o);for(o+=2,u.classDef1=e._lctf.readClassDef(n,c+T),u.classDef2=e._lctf.readClassDef(n,c+M),u.matrix=[],v=0;v<E;v++){var P=[];for(_=0;_<C;_++){var A=null,N=null;h!=0&&(A=e.GPOS.readValueRecord(n,o,h),o+=2*p),f!=0&&(N=e.GPOS.readValueRecord(n,o,f),o+=2*m),P.push({val1:A,val2:N})}u.matrix.push(P)}}}else{if(s==9&&u.fmt==1){var R=l.readUshort(n,o);o+=2;var F=l.readUint(n,o);if(o+=4,a.ltype==9)a.ltype=R;else if(a.ltype!=R)throw"invalid extension substitution";return e.GPOS.subt(n,a.ltype,c+F)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(n,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(n,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(n,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(n,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(n,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(n,s,o,a){return e._lctf.parse(n,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(n,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(n,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var d=l.readUshort(n,o);o+=2,u.coverage=e._lctf.readCoverage(n,c+d)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(n,o),o+=2;else if(u.fmt==2){var h=l.readUshort(n,o);o+=2,u.newg=l.readUshorts(n,o,h),o+=2*u.newg.length}}else if(s==4){u.vals=[],h=l.readUshort(n,o),o+=2;for(var p=0;p<h;p++){var f=l.readUshort(n,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(n,c+f))}}else if(s==5&&u.fmt==2){if(u.fmt==2){var m=l.readUshort(n,o);o+=2,u.cDef=e._lctf.readClassDef(n,c+m),u.scset=[];var g=l.readUshort(n,o);for(o+=2,p=0;p<g;p++){var v=l.readUshort(n,o);o+=2,u.scset.push(v==0?null:e.GSUB.readSubClassSet(n,c+v))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(p=0;p<3;p++){h=l.readUshort(n,o),o+=2;for(var x=[],b=0;b<h;b++)x.push(e._lctf.readCoverage(n,c+l.readUshort(n,o+2*b)));o+=2*h,p==0&&(u.backCvg=x),p==1&&(u.inptCvg=x),p==2&&(u.ahedCvg=x)}h=l.readUshort(n,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(n,o,h)}}else{if(s==7&&u.fmt==1){var w=l.readUshort(n,o);o+=2;var _=l.readUint(n,o);if(o+=4,a.ltype==9)a.ltype=w;else if(a.ltype!=w)throw"invalid extension substitution";return e.GSUB.subt(n,a.ltype,c+_)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(n,s){var o=e._bin.readUshort,a=s,l=[],c=o(n,s);s+=2;for(var u=0;u<c;u++){var d=o(n,s);s+=2,l.push(e.GSUB.readSubClassRule(n,a+d))}return l},e.GSUB.readSubClassRule=function(n,s){var o=e._bin.readUshort,a={},l=o(n,s),c=o(n,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(n,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(n,s,c),a},e.GSUB.readSubstLookupRecords=function(n,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(n,s),a(n,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(n,s){var o=e._bin,a=s,l=[],c=o.readUshort(n,s);s+=2;for(var u=0;u<c;u++){var d=o.readUshort(n,s);s+=2,l.push(e.GSUB.readChainSubClassRule(n,a+d))}return l},e.GSUB.readChainSubClassRule=function(n,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(n,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(n,s,u),s+=2*a[l[c]].length}return u=o.readUshort(n,s),s+=2,a.subst=o.readUshorts(n,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(n,s){var o=e._bin,a=s,l=[],c=o.readUshort(n,s);s+=2;for(var u=0;u<c;u++){var d=o.readUshort(n,s);s+=2,l.push(e.GSUB.readLigature(n,a+d))}return l},e.GSUB.readLigature=function(n,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(n,s),s+=2;var l=o.readUshort(n,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(n,s)),s+=2;return a},e.head={},e.head.parse=function(n,s,o){var a=e._bin,l={};return a.readFixed(n,s),s+=4,l.fontRevision=a.readFixed(n,s),s+=4,a.readUint(n,s),s+=4,a.readUint(n,s),s+=4,l.flags=a.readUshort(n,s),s+=2,l.unitsPerEm=a.readUshort(n,s),s+=2,l.created=a.readUint64(n,s),s+=8,l.modified=a.readUint64(n,s),s+=8,l.xMin=a.readShort(n,s),s+=2,l.yMin=a.readShort(n,s),s+=2,l.xMax=a.readShort(n,s),s+=2,l.yMax=a.readShort(n,s),s+=2,l.macStyle=a.readUshort(n,s),s+=2,l.lowestRecPPEM=a.readUshort(n,s),s+=2,l.fontDirectionHint=a.readShort(n,s),s+=2,l.indexToLocFormat=a.readShort(n,s),s+=2,l.glyphDataFormat=a.readShort(n,s),s+=2,l},e.hhea={},e.hhea.parse=function(n,s,o){var a=e._bin,l={};return a.readFixed(n,s),s+=4,l.ascender=a.readShort(n,s),s+=2,l.descender=a.readShort(n,s),s+=2,l.lineGap=a.readShort(n,s),s+=2,l.advanceWidthMax=a.readUshort(n,s),s+=2,l.minLeftSideBearing=a.readShort(n,s),s+=2,l.minRightSideBearing=a.readShort(n,s),s+=2,l.xMaxExtent=a.readShort(n,s),s+=2,l.caretSlopeRise=a.readShort(n,s),s+=2,l.caretSlopeRun=a.readShort(n,s),s+=2,l.caretOffset=a.readShort(n,s),s+=2,s+=8,l.metricDataFormat=a.readShort(n,s),s+=2,l.numberOfHMetrics=a.readUshort(n,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(n,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,d=0,h=0;h<a.maxp.numGlyphs;h++)h<a.hhea.numberOfHMetrics&&(u=l.readUshort(n,s),s+=2,d=l.readShort(n,s),s+=2),c.aWidth.push(u),c.lsBearing.push(d);return c},e.kern={},e.kern.parse=function(n,s,o,a){var l=e._bin,c=l.readUshort(n,s);if(s+=2,c==1)return e.kern.parseV1(n,s-2,o,a);var u=l.readUshort(n,s);s+=2;for(var d={glyph1:[],rval:[]},h=0;h<u;h++){s+=2,o=l.readUshort(n,s),s+=2;var p=l.readUshort(n,s);s+=2;var f=p>>>8;if((f&=15)!=0)throw"unknown kern table format: "+f;s=e.kern.readFormat0(n,s,d)}return d},e.kern.parseV1=function(n,s,o,a){var l=e._bin;l.readFixed(n,s),s+=4;var c=l.readUint(n,s);s+=4;for(var u={glyph1:[],rval:[]},d=0;d<c;d++){l.readUint(n,s),s+=4;var h=l.readUshort(n,s);s+=2,l.readUshort(n,s),s+=2;var p=h>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;s=e.kern.readFormat0(n,s,u)}return u},e.kern.readFormat0=function(n,s,o){var a=e._bin,l=-1,c=a.readUshort(n,s);s+=2,a.readUshort(n,s),s+=2,a.readUshort(n,s),s+=2,a.readUshort(n,s),s+=2;for(var u=0;u<c;u++){var d=a.readUshort(n,s);s+=2;var h=a.readUshort(n,s);s+=2;var p=a.readShort(n,s);s+=2,d!=l&&(o.glyph1.push(d),o.rval.push({glyph2:[],vals:[]}));var f=o.rval[o.rval.length-1];f.glyph2.push(h),f.vals.push(p),l=d}return s},e.loca={},e.loca.parse=function(n,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,d=a.maxp.numGlyphs+1;if(u==0)for(var h=0;h<d;h++)c.push(l.readUshort(n,s+(h<<1))<<1);if(u==1)for(h=0;h<d;h++)c.push(l.readUint(n,s+(h<<2)));return c},e.maxp={},e.maxp.parse=function(n,s,o){var a=e._bin,l={},c=a.readUint(n,s);return s+=4,l.numGlyphs=a.readUshort(n,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(n,s),s+=2,l.maxContours=a.readUshort(n,s),s+=2,l.maxCompositePoints=a.readUshort(n,s),s+=2,l.maxCompositeContours=a.readUshort(n,s),s+=2,l.maxZones=a.readUshort(n,s),s+=2,l.maxTwilightPoints=a.readUshort(n,s),s+=2,l.maxStorage=a.readUshort(n,s),s+=2,l.maxFunctionDefs=a.readUshort(n,s),s+=2,l.maxInstructionDefs=a.readUshort(n,s),s+=2,l.maxStackElements=a.readUshort(n,s),s+=2,l.maxSizeOfInstructions=a.readUshort(n,s),s+=2,l.maxComponentElements=a.readUshort(n,s),s+=2,l.maxComponentDepth=a.readUshort(n,s),s+=2),l},e.name={},e.name.parse=function(n,s,o){var a=e._bin,l={};a.readUshort(n,s),s+=2;var c=a.readUshort(n,s);s+=2,a.readUshort(n,s);for(var u,d=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=s+=2,p=0;p<c;p++){var f=a.readUshort(n,s);s+=2;var m=a.readUshort(n,s);s+=2;var g=a.readUshort(n,s);s+=2;var v=a.readUshort(n,s);s+=2;var x=a.readUshort(n,s);s+=2;var b=a.readUshort(n,s);s+=2;var w,_=d[v],S=h+12*c+b;if(f==0)w=a.readUnicode(n,S,x/2);else if(f==3&&m==0)w=a.readUnicode(n,S,x/2);else if(m==0)w=a.readASCII(n,S,x);else if(m==1)w=a.readUnicode(n,S,x/2);else if(m==3)w=a.readUnicode(n,S,x/2);else{if(f!=1)throw"unknown encoding "+m+", platformID: "+f;w=a.readASCII(n,S,x),console.debug("reading unknown MAC encoding "+m+" as ASCII")}var T="p"+f+","+g.toString(16);l[T]==null&&(l[T]={}),l[T][_!==void 0?_:v]=w,l[T]._lang=g}for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==1033)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==0)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==3084)return l[M];for(var M in l)if(l[M].postScriptName!=null)return l[M];for(var M in l){u=M;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(n,s,o){var a=e._bin.readUshort(n,s);s+=2;var l={};if(a==0)e["OS/2"].version0(n,s,l);else if(a==1)e["OS/2"].version1(n,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(n,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(n,s,l)}return l},e["OS/2"].version0=function(n,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(n,s),s+=2,o.usWeightClass=a.readUshort(n,s),s+=2,o.usWidthClass=a.readUshort(n,s),s+=2,o.fsType=a.readUshort(n,s),s+=2,o.ySubscriptXSize=a.readShort(n,s),s+=2,o.ySubscriptYSize=a.readShort(n,s),s+=2,o.ySubscriptXOffset=a.readShort(n,s),s+=2,o.ySubscriptYOffset=a.readShort(n,s),s+=2,o.ySuperscriptXSize=a.readShort(n,s),s+=2,o.ySuperscriptYSize=a.readShort(n,s),s+=2,o.ySuperscriptXOffset=a.readShort(n,s),s+=2,o.ySuperscriptYOffset=a.readShort(n,s),s+=2,o.yStrikeoutSize=a.readShort(n,s),s+=2,o.yStrikeoutPosition=a.readShort(n,s),s+=2,o.sFamilyClass=a.readShort(n,s),s+=2,o.panose=a.readBytes(n,s,10),s+=10,o.ulUnicodeRange1=a.readUint(n,s),s+=4,o.ulUnicodeRange2=a.readUint(n,s),s+=4,o.ulUnicodeRange3=a.readUint(n,s),s+=4,o.ulUnicodeRange4=a.readUint(n,s),s+=4,o.achVendID=[a.readInt8(n,s),a.readInt8(n,s+1),a.readInt8(n,s+2),a.readInt8(n,s+3)],s+=4,o.fsSelection=a.readUshort(n,s),s+=2,o.usFirstCharIndex=a.readUshort(n,s),s+=2,o.usLastCharIndex=a.readUshort(n,s),s+=2,o.sTypoAscender=a.readShort(n,s),s+=2,o.sTypoDescender=a.readShort(n,s),s+=2,o.sTypoLineGap=a.readShort(n,s),s+=2,o.usWinAscent=a.readUshort(n,s),s+=2,o.usWinDescent=a.readUshort(n,s),s+=2},e["OS/2"].version1=function(n,s,o){var a=e._bin;return s=e["OS/2"].version0(n,s,o),o.ulCodePageRange1=a.readUint(n,s),s+=4,o.ulCodePageRange2=a.readUint(n,s),s+=4},e["OS/2"].version2=function(n,s,o){var a=e._bin;return s=e["OS/2"].version1(n,s,o),o.sxHeight=a.readShort(n,s),s+=2,o.sCapHeight=a.readShort(n,s),s+=2,o.usDefault=a.readUshort(n,s),s+=2,o.usBreak=a.readUshort(n,s),s+=2,o.usMaxContext=a.readUshort(n,s),s+=2},e["OS/2"].version5=function(n,s,o){var a=e._bin;return s=e["OS/2"].version2(n,s,o),o.usLowerOpticalPointSize=a.readUshort(n,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(n,s),s+=2},e.post={},e.post.parse=function(n,s,o){var a=e._bin,l={};return l.version=a.readFixed(n,s),s+=4,l.italicAngle=a.readFixed(n,s),s+=4,l.underlinePosition=a.readShort(n,s),s+=2,l.underlineThickness=a.readShort(n,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(n,s){var o=n.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var d=l.groups[u];if(d[0]<=s&&s<=d[1])return d[2]+(s-d[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(n,s){var o={cmds:[],crds:[]};if(n.SVG&&n.SVG.entries[s]){var a=n.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),n.SVG.entries[s]=a),a)}if(n.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:n.CFF.Private?n.CFF.Private.defaultWidthX:0,open:!1},c=n.CFF,u=n.CFF.Private;if(c.ROS){for(var d=0;c.FDSelect[d+2]<=s;)d+=2;u=c.FDArray[c.FDSelect[d+1]].Private}e.U._drawCFF(n.CFF.CharStrings[s],l,c,u,o)}else n.glyf&&e.U._drawGlyf(s,n,o);return o},e.U._drawGlyf=function(n,s,o){var a=s.glyf[n];a==null&&(a=s.glyf[n]=e.glyf._parseGlyf(s,n)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(n,s){for(var o=0;o<n.noc;o++){for(var a=o==0?0:n.endPts[o-1]+1,l=n.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,d=c==l?a:c+1,h=1&n.flags[c],p=1&n.flags[u],f=1&n.flags[d],m=n.xs[c],g=n.ys[c];if(c==a)if(h){if(!p){e.U.P.moveTo(s,m,g);continue}e.U.P.moveTo(s,n.xs[u],n.ys[u])}else p?e.U.P.moveTo(s,n.xs[u],n.ys[u]):e.U.P.moveTo(s,(n.xs[u]+m)/2,(n.ys[u]+g)/2);h?p&&e.U.P.lineTo(s,m,g):f?e.U.P.qcurveTo(s,m,g,n.xs[d],n.ys[d]):e.U.P.qcurveTo(s,m,g,(m+n.xs[d])/2,(g+n.ys[d])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(n,s,o){for(var a=0;a<n.parts.length;a++){var l={cmds:[],crds:[]},c=n.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,d=0;d<l.crds.length;d+=2){var h=l.crds[d],p=l.crds[d+1];o.crds.push(h*u.a+p*u.b+u.tx),o.crds.push(h*u.c+p*u.d+u.ty)}for(d=0;d<l.cmds.length;d++)o.cmds.push(l.cmds[d])}},e.U._getGlyphClass=function(n,s){var o=e._lctf.getInterval(s,n);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(n,s,o){var a=!1;if(n.GPOS)for(var l=n.GPOS,c=l.lookupList,u=l.featureList,d=[],h=0;h<u.length;h++){var p=u[h];if(p.tag=="kern"){a=!0;for(var f=0;f<p.tab.length;f++)if(!d[p.tab[f]]){d[p.tab[f]]=!0;for(var m=c[p.tab[f]],g=0;g<m.tabs.length;g++)if(m.tabs[g]!=null){var v,x=m.tabs[g];if((!x.coverage||(v=e._lctf.coverageIndex(x.coverage,s))!=-1)&&m.ltype!=1&&m.ltype==2){var b=null;if(x.fmt==1){var w=x.pairsets[v];for(h=0;h<w.length;h++)w[h].gid2==o&&(b=w[h])}else if(x.fmt==2){var _=e.U._getGlyphClass(s,x.classDef1),S=e.U._getGlyphClass(o,x.classDef2);b=x.matrix[_][S]}if(b){var T=0;return b.val1&&b.val1[2]&&(T+=b.val1[2]),b.val2&&b.val2[0]&&(T+=b.val2[0]),T}}}}}}if(n.kern&&!a){var M=n.kern.glyph1.indexOf(s);if(M!=-1){var E=n.kern.rval[M].glyph2.indexOf(o);if(E!=-1)return n.kern.rval[M].vals[E]}}return 0},e.U._applySubs=function(n,s,o,a){for(var l=n.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,d=o.tabs[c];if(!d.coverage||(u=e._lctf.coverageIndex(d.coverage,n[s]))!=-1){if(o.ltype==1)n[s],d.fmt==1?n[s]=n[s]+d.delta:n[s]=d.newg[u];else if(o.ltype==4)for(var h=d.vals[u],p=0;p<h.length;p++){var f=h[p],m=f.chain.length;if(!(m>l)){for(var g=!0,v=0,x=0;x<m;x++){for(;n[s+v+(1+x)]==-1;)v++;f.chain[x]!=n[s+v+(1+x)]&&(g=!1)}if(g){for(n[s]=f.nglyph,x=0;x<m+v;x++)n[s+x+1]=-1;break}}}else if(o.ltype==5&&d.fmt==2)for(var b=e._lctf.getInterval(d.cDef,n[s]),w=d.cDef[b+2],_=d.scset[w],S=0;S<_.length;S++){var T=_[S],M=T.input;if(!(M.length>l)){for(g=!0,x=0;x<M.length;x++){var E=e._lctf.getInterval(d.cDef,n[s+1+x]);if(b==-1&&d.cDef[E+2]!=M[x]){g=!1;break}}if(g){var C=T.substLookupRecords;for(p=0;p<C.length;p+=2)C[p],C[p+1]}}}else if(o.ltype==6&&d.fmt==3){if(!e.U._glsCovered(n,d.backCvg,s-d.backCvg.length)||!e.U._glsCovered(n,d.inptCvg,s)||!e.U._glsCovered(n,d.ahedCvg,s+d.inptCvg.length))continue;var P=d.lookupRec;for(S=0;S<P.length;S+=2){b=P[S];var A=a[P[S+1]];e.U._applySubs(n,s+b,A,a)}}}}},e.U._glsCovered=function(n,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],n[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(n,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var d=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,h=e.U.glyphToPath(n,u),p=0;p<h.crds.length;p+=2)a.crds.push(h.crds[p]+l),a.crds.push(h.crds[p+1]);for(o&&a.cmds.push(o),p=0;p<h.cmds.length;p++)a.cmds.push(h.cmds[p]);o&&a.cmds.push("X"),l+=n.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(n,u,d))}}return a},e.U.P={},e.U.P.moveTo=function(n,s,o){n.cmds.push("M"),n.crds.push(s,o)},e.U.P.lineTo=function(n,s,o){n.cmds.push("L"),n.crds.push(s,o)},e.U.P.curveTo=function(n,s,o,a,l,c,u){n.cmds.push("C"),n.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(n,s,o,a,l){n.cmds.push("Q"),n.crds.push(s,o,a,l)},e.U.P.closePath=function(n){n.cmds.push("Z")},e.U._drawCFF=function(n,s,o,a,l){for(var c=s.stack,u=s.nStems,d=s.haveWidth,h=s.width,p=s.open,f=0,m=s.x,g=s.y,v=0,x=0,b=0,w=0,_=0,S=0,T=0,M=0,E=0,C=0,P={val:0,size:0};f<n.length;){e.CFF.getCharString(n,f,P);var A=P.val;if(f+=P.size,A=="o1"||A=="o18")c.length%2!=0&&!d&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0;else if(A=="o3"||A=="o23")c.length%2!=0&&!d&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0;else if(A=="o4")c.length>1&&!d&&(h=c.shift()+a.nominalWidthX,d=!0),p&&e.U.P.closePath(l),g+=c.pop(),e.U.P.moveTo(l,m,g),p=!0;else if(A=="o5")for(;c.length>0;)m+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,m,g);else if(A=="o6"||A=="o7")for(var N=c.length,R=A=="o6",F=0;F<N;F++){var B=c.shift();R?m+=B:g+=B,R=!R,e.U.P.lineTo(l,m,g)}else if(A=="o8"||A=="o24"){N=c.length;for(var k=0;k+6<=N;)v=m+c.shift(),x=g+c.shift(),b=v+c.shift(),w=x+c.shift(),m=b+c.shift(),g=w+c.shift(),e.U.P.curveTo(l,v,x,b,w,m,g),k+=6;A=="o24"&&(m+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,m,g))}else{if(A=="o11")break;if(A=="o1234"||A=="o1235"||A=="o1236"||A=="o1237")A=="o1234"&&(x=g,b=(v=m+c.shift())+c.shift(),C=w=x+c.shift(),S=w,M=g,m=(T=(_=(E=b+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,v,x,b,w,E,C),e.U.P.curveTo(l,_,S,T,M,m,g)),A=="o1235"&&(v=m+c.shift(),x=g+c.shift(),b=v+c.shift(),w=x+c.shift(),E=b+c.shift(),C=w+c.shift(),_=E+c.shift(),S=C+c.shift(),T=_+c.shift(),M=S+c.shift(),m=T+c.shift(),g=M+c.shift(),c.shift(),e.U.P.curveTo(l,v,x,b,w,E,C),e.U.P.curveTo(l,_,S,T,M,m,g)),A=="o1236"&&(v=m+c.shift(),x=g+c.shift(),b=v+c.shift(),C=w=x+c.shift(),S=w,T=(_=(E=b+c.shift())+c.shift())+c.shift(),M=S+c.shift(),m=T+c.shift(),e.U.P.curveTo(l,v,x,b,w,E,C),e.U.P.curveTo(l,_,S,T,M,m,g)),A=="o1237"&&(v=m+c.shift(),x=g+c.shift(),b=v+c.shift(),w=x+c.shift(),E=b+c.shift(),C=w+c.shift(),_=E+c.shift(),S=C+c.shift(),T=_+c.shift(),M=S+c.shift(),Math.abs(T-m)>Math.abs(M-g)?m=T+c.shift():g=M+c.shift(),e.U.P.curveTo(l,v,x,b,w,E,C),e.U.P.curveTo(l,_,S,T,M,m,g));else if(A=="o14"){if(c.length>0&&!d&&(h=c.shift()+o.nominalWidthX,d=!0),c.length==4){var z=c.shift(),O=c.shift(),V=c.shift(),U=c.shift(),G=e.CFF.glyphBySE(o,V),X=e.CFF.glyphBySE(o,U);e.U._drawCFF(o.CharStrings[G],s,o,a,l),s.x=z,s.y=O,e.U._drawCFF(o.CharStrings[X],s,o,a,l)}p&&(e.U.P.closePath(l),p=!1)}else if(A=="o19"||A=="o20")c.length%2!=0&&!d&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0,f+=u+7>>3;else if(A=="o21")c.length>2&&!d&&(h=c.shift()+a.nominalWidthX,d=!0),g+=c.pop(),m+=c.pop(),p&&e.U.P.closePath(l),e.U.P.moveTo(l,m,g),p=!0;else if(A=="o22")c.length>1&&!d&&(h=c.shift()+a.nominalWidthX,d=!0),m+=c.pop(),p&&e.U.P.closePath(l),e.U.P.moveTo(l,m,g),p=!0;else if(A=="o25"){for(;c.length>6;)m+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,m,g);v=m+c.shift(),x=g+c.shift(),b=v+c.shift(),w=x+c.shift(),m=b+c.shift(),g=w+c.shift(),e.U.P.curveTo(l,v,x,b,w,m,g)}else if(A=="o26")for(c.length%2&&(m+=c.shift());c.length>0;)v=m,x=g+c.shift(),m=b=v+c.shift(),g=(w=x+c.shift())+c.shift(),e.U.P.curveTo(l,v,x,b,w,m,g);else if(A=="o27")for(c.length%2&&(g+=c.shift());c.length>0;)x=g,b=(v=m+c.shift())+c.shift(),w=x+c.shift(),m=b+c.shift(),g=w,e.U.P.curveTo(l,v,x,b,w,m,g);else if(A=="o10"||A=="o29"){var ie=A=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var se=c.pop(),de=ie.Subrs[se+ie.Bias];s.x=m,s.y=g,s.nStems=u,s.haveWidth=d,s.width=h,s.open=p,e.U._drawCFF(de,s,o,a,l),m=s.x,g=s.y,u=s.nStems,d=s.haveWidth,h=s.width,p=s.open}}else if(A=="o30"||A=="o31"){var K=c.length,q=(k=0,A=="o31");for(k+=K-(N=-3&K);k<N;)q?(x=g,b=(v=m+c.shift())+c.shift(),g=(w=x+c.shift())+c.shift(),N-k==5?(m=b+c.shift(),k++):m=b,q=!1):(v=m,x=g+c.shift(),b=v+c.shift(),w=x+c.shift(),m=b+c.shift(),N-k==5?(g=w+c.shift(),k++):g=w,q=!0),e.U.P.curveTo(l,v,x,b,w,m,g),k+=4}else{if((A+"").charAt(0)=="o")throw console.debug("Unknown operation: "+A,n),A;c.push(A)}}}s.x=m,s.y=g,s.nStems=u,s.haveWidth=d,s.width=h,s.open=p};var t=e,i={Typr:t};return r.Typr=t,r.default=i,Object.defineProperty(r,"__esModule",{value:!0}),r}({}).Typr}function tVe(){return function(r){var e=Uint8Array,t=Uint16Array,i=Uint32Array,n=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(A,N){for(var R=new t(31),F=0;F<31;++F)R[F]=N+=1<<A[F-1];var B=new i(R[30]);for(F=1;F<30;++F)for(var k=R[F];k<R[F+1];++k)B[k]=k-R[F]<<5|F;return[R,B]},l=a(n,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var d=a(s,0)[0],h=new t(32768),p=0;p<32768;++p){var f=(43690&p)>>>1|(21845&p)<<1;f=(61680&(f=(52428&f)>>>2|(13107&f)<<2))>>>4|(3855&f)<<4,h[p]=((65280&f)>>>8|(255&f)<<8)>>>1}var m=function(A,N,R){for(var F=A.length,B=0,k=new t(N);B<F;++B)++k[A[B]-1];var z,O=new t(N);for(B=0;B<N;++B)O[B]=O[B-1]+k[B-1]<<1;if(R){z=new t(1<<N);var V=15-N;for(B=0;B<F;++B)if(A[B])for(var U=B<<4|A[B],G=N-A[B],X=O[A[B]-1]++<<G,ie=X|(1<<G)-1;X<=ie;++X)z[h[X]>>>V]=U}else for(z=new t(F),B=0;B<F;++B)A[B]&&(z[B]=h[O[A[B]-1]++]>>>15-A[B]);return z},g=new e(288);for(p=0;p<144;++p)g[p]=8;for(p=144;p<256;++p)g[p]=9;for(p=256;p<280;++p)g[p]=7;for(p=280;p<288;++p)g[p]=8;var v=new e(32);for(p=0;p<32;++p)v[p]=5;var x=m(g,9,1),b=m(v,5,1),w=function(A){for(var N=A[0],R=1;R<A.length;++R)A[R]>N&&(N=A[R]);return N},_=function(A,N,R){var F=N/8|0;return(A[F]|A[F+1]<<8)>>(7&N)&R},S=function(A,N){var R=N/8|0;return(A[R]|A[R+1]<<8|A[R+2]<<16)>>(7&N)},T=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(A,N,R){var F=new Error(N||T[A]);if(F.code=A,Error.captureStackTrace&&Error.captureStackTrace(F,M),!R)throw F;return F},E=function(A,N,R){var F=A.length;if(!F||R&&!R.l&&F<5)return N||new e(0);var B=!N||R,k=!R||R.i;R||(R={}),N||(N=new e(3*F));var z,O=function(ae){var De=N.length;if(ae>De){var We=new e(Math.max(2*De,ae));We.set(N),N=We}},V=R.f||0,U=R.p||0,G=R.b||0,X=R.l,ie=R.d,se=R.m,de=R.n,K=8*F;do{if(!X){R.f=V=_(A,U,1);var q=_(A,U+1,3);if(U+=3,!q){var ce=A[(pe=((z=U)/8|0)+(7&z&&1)+4)-4]|A[pe-3]<<8,Te=pe+ce;if(Te>F){k&&M(0);break}B&&O(G+ce),N.set(A.subarray(pe,Te),G),R.b=G+=ce,R.p=U=8*Te;continue}if(q==1)X=x,ie=b,se=9,de=5;else if(q==2){var Z=_(A,U,31)+257,L=_(A,U+10,15)+4,$=Z+_(A,U+5,31)+1;U+=14;for(var re=new e($),te=new e(19),le=0;le<L;++le)te[o[le]]=_(A,U+3*le,7);U+=3*L;var ge=w(te),be=(1<<ge)-1,_e=m(te,ge,1);for(le=0;le<$;){var pe,Se=_e[_(A,U,be)];if(U+=15&Se,(pe=Se>>>4)<16)re[le++]=pe;else{var Fe=0,Y=0;for(pe==16?(Y=3+_(A,U,3),U+=2,Fe=re[le-1]):pe==17?(Y=3+_(A,U,7),U+=3):pe==18&&(Y=11+_(A,U,127),U+=7);Y--;)re[le++]=Fe}}var H=re.subarray(0,Z),ne=re.subarray(Z);se=w(H),de=w(ne),X=m(H,se,1),ie=m(ne,de,1)}else M(1);if(U>K){k&&M(0);break}}B&&O(G+131072);for(var Le=(1<<se)-1,Pe=(1<<de)-1,Ee=U;;Ee=U){var Ue=(Fe=X[S(A,U)&Le])>>>4;if((U+=15&Fe)>K){k&&M(0);break}if(Fe||M(2),Ue<256)N[G++]=Ue;else{if(Ue==256){Ee=U,X=null;break}var Be=Ue-254;if(Ue>264){var ve=n[le=Ue-257];Be=_(A,U,(1<<ve)-1)+c[le],U+=ve}var Q=ie[S(A,U)&Pe],he=Q>>>4;if(Q||M(3),U+=15&Q,ne=d[he],he>3&&(ve=s[he],ne+=S(A,U)&(1<<ve)-1,U+=ve),U>K){k&&M(0);break}B&&O(G+131072);for(var we=G+Be;G<we;G+=4)N[G]=N[G-ne],N[G+1]=N[G+1-ne],N[G+2]=N[G+2-ne],N[G+3]=N[G+3-ne];G=we}}R.l=X,R.p=Ee,R.b=G,X&&(V=1,R.m=se,R.d=ie,R.n=de)}while(!V);return G==N.length?N:function(ae,De,We){(De==null||De<0)&&(De=0),(We==null||We>ae.length)&&(We=ae.length);var je=new(ae instanceof t?t:ae instanceof i?i:e)(We-De);return je.set(ae.subarray(De,We)),je}(N,0,G)},C=new e(0),P=typeof TextDecoder<"u"&&new TextDecoder;try{P.decode(C,{stream:!0})}catch{}return r.convert_streams=function(A){var N=new DataView(A),R=0;function F(){var Z=N.getUint16(R);return R+=2,Z}function B(){var Z=N.getUint32(R);return R+=4,Z}function k(Z){ce.setUint16(Te,Z),Te+=2}function z(Z){ce.setUint32(Te,Z),Te+=4}for(var O={signature:B(),flavor:B(),length:B(),numTables:F(),reserved:F(),totalSfntSize:B(),majorVersion:F(),minorVersion:F(),metaOffset:B(),metaLength:B(),metaOrigLength:B(),privOffset:B(),privLength:B()},V=0;Math.pow(2,V)<=O.numTables;)V++;V--;for(var U=16*Math.pow(2,V),G=16*O.numTables-U,X=12,ie=[],se=0;se<O.numTables;se++)ie.push({tag:B(),offset:B(),compLength:B(),origLength:B(),origChecksum:B()}),X+=16;var de,K=new Uint8Array(12+16*ie.length+ie.reduce(function(Z,L){return Z+L.origLength+4},0)),q=K.buffer,ce=new DataView(q),Te=0;return z(O.flavor),k(O.numTables),k(U),k(V),k(G),ie.forEach(function(Z){z(Z.tag),z(Z.origChecksum),z(X),z(Z.origLength),Z.outOffset=X,(X+=Z.origLength)%4!=0&&(X+=4-X%4)}),ie.forEach(function(Z){var L,$=A.slice(Z.offset,Z.offset+Z.compLength);if(Z.compLength!=Z.origLength){var re=new Uint8Array(Z.origLength);L=new Uint8Array($,2),E(L,re)}else re=new Uint8Array($);K.set(re,Z.outOffset);var te=0;(X=Z.outOffset+Z.origLength)%4!=0&&(te=4-X%4),K.set(new Uint8Array(te).buffer,Z.outOffset+Z.origLength),de=X+te}),q.slice(0,de)},Object.defineProperty(r,"__esModule",{value:!0}),r}({}).convert_streams}function rVe(r,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},n=1,s=2,o=4,a=8,l=16,c=32;let u;function d(_){if(!u){const S={R:s,L:n,D:o,C:l,U:c,T:a};u=new Map;for(let T in i){let M=0;i[T].split(",").forEach(E=>{let[C,P]=E.split("+");C=parseInt(C,36),P=P?parseInt(P,36):0,u.set(M+=C,S[T]);for(let A=P;A--;)u.set(++M,S[T])})}}return u.get(_)||c}const h=1,p=2,f=3,m=4,g=[null,"isol","init","fina","medi"];function v(_){const S=new Uint8Array(_.length);let T=c,M=h,E=-1;for(let C=0;C<_.length;C++){const P=_.codePointAt(C);let A=d(P)|0,N=h;A&a||(T&(n|o|l)?A&(s|o|l)?(N=f,(M===h||M===f)&&S[E]++):A&(n|c)&&(M===p||M===m)&&S[E]--:T&(s|c)&&(M===p||M===m)&&S[E]--,M=S[C]=N,T=A,E=C,P>65535&&C++)}return S}function x(_,S){const T=[];for(let E=0;E<S.length;E++){const C=S.codePointAt(E);C>65535&&E++,T.push(r.U.codeToGlyph(_,C))}const M=_.GSUB;if(M){const{lookupList:E,featureList:C}=M;let P;const A=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,N=[];C.forEach(R=>{if(A.test(R.tag))for(let F=0;F<R.tab.length;F++){if(N[R.tab[F]])continue;N[R.tab[F]]=!0;const B=E[R.tab[F]],k=/^(isol|init|fina|medi)$/.test(R.tag);k&&!P&&(P=v(S));for(let z=0;z<T.length;z++)(!P||!k||g[P[z]]===R.tag)&&r.U._applySubs(T,z,B,E)}})}return T}function b(..._){for(let S=0;S<_.length;S++)if(typeof _[S]=="number")return _[S]}function w(_){const S=Object.create(null),T=_["OS/2"],M=_.hhea,E=_.head.unitsPerEm,C=b(T&&T.sTypoAscender,M&&M.ascender,E),P={unitsPerEm:E,ascender:C,descender:b(T&&T.sTypoDescender,M&&M.descender,0),capHeight:b(T&&T.sCapHeight,C),xHeight:b(T&&T.sxHeight,C),lineGap:b(T&&T.sTypoLineGap,M&&M.lineGap),supportsCodePoint(A){return r.U.codeToGlyph(_,A)>0},forEachGlyph(A,N,R,F){let B=0;const k=1/P.unitsPerEm*N,z=x(_,A);let O=0,V=-1;return z.forEach((U,G)=>{if(U!==-1){let X=S[U];if(!X){const{cmds:ie,crds:se}=r.U.glyphToPath(_,U);let de="",K=0;for(let L=0,$=ie.length;L<$;L++){const re=t[ie[L]];de+=ie[L];for(let te=1;te<=re;te++)de+=(te>1?",":"")+se[K++]}let q,ce,Te,Z;if(se.length){q=ce=1/0,Te=Z=-1/0;for(let L=0,$=se.length;L<$;L+=2){let re=se[L],te=se[L+1];re<q&&(q=re),te<ce&&(ce=te),re>Te&&(Te=re),te>Z&&(Z=te)}}else q=Te=ce=Z=0;X=S[U]={index:U,advanceWidth:_.hmtx.aWidth[U],xMin:q,yMin:ce,xMax:Te,yMax:Z,path:de,pathCommandCount:ie.length}}V!==-1&&(B+=r.U.getPairAdjustment(_,V,U)*k),F.call(null,X,B,O),X.advanceWidth&&(B+=X.advanceWidth*k),R&&(B+=R*N),V=U}O+=A.codePointAt(O)>65535?2:1}),B}};return P}return function(_){const S=new Uint8Array(_,0,4),T=r._bin.readASCII(S,0,4);if(T==="wOFF")_=e(_);else if(T==="wOF2")throw new Error("woff2 fonts not supported");return w(r.parse(_)[0])}}const iVe=Hl({name:"Typr Font Parser",dependencies:[eVe,tVe,rVe],init(r,e,t){const i=r(),n=e();return t(i,n)}});function nVe(){return function(r){class e{constructor(){this.buckets=new Map}add(w){const _=w>>5;this.buckets.set(_,(this.buckets.get(_)||0)|1<<(31&w))}has(w){const _=this.buckets.get(w>>5);return _!==void 0&&(_&1<<(31&w))!=0}serialize(){const w=[];return this.buckets.forEach((_,S)=>{w.push(`${(+S).toString(36)}:${_.toString(36)}`)}),w.join(",")}deserialize(w){this.buckets.clear(),w.split(",").forEach(_=>{const S=_.split(":");this.buckets.set(parseInt(S[0],36),parseInt(S[1],36))})}}const t=Math.pow(2,8),i=t-1,n=~i;function s(b){const w=function(S){return S&n}(b).toString(16),_=function(S){return(S&n)+t-1}(b).toString(16);return`codepoint-index/plane${b>>16}/${w}-${_}.json`}function o(b,w){const _=b&i;let S=w.codePointAt(_/6|0);return S=(S||48)-48,(S&1<<_%6)!=0}function a(b,w){var _;(_=b,_.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(S=>S.split("-").map(T=>parseInt(T.trim(),16)))).forEach(([S,T=S])=>{w(S,T)})}function l(b,w){a(b,(_,S)=>{for(let T=_;T<=S;T++)w(T)})}let c={},u={};const d=new WeakMap;function h(b){let w=d.get(b);return w||(w=new e,l(b.ranges,_=>w.add(_)),d.set(b,w)),w}const p=new Map;function f(b){let w=p.get(b);return w||(w=fetch(b).then(_=>_.json()),p.set(b,w)),w}function m(b,w,_){return b[w]?w:b[_]?_:function(S){for(const T in S)return T}(b)}function g(b,w){let _=w;if(!b.includes(_)){_=1/0;for(let S=0;S<b.length;S++)Math.abs(b[S]-w)<Math.abs(_-w)&&(_=b[S])}return _}let v;function x(b){return v||(v=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",w=>{v.add(w)})),v.has(b)}return r.CodePointSet=e,r.clearCache=function(){c={},u={}},r.getFontsForString=function(b,w={}){const{lang:_="en",category:S="sans-serif",style:T="normal",weight:M=400}=w,E=(w.dataUrl||"https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v0.3.2/packages/data").replace(/\/$/g,""),C=new Map,P=new Uint8Array(b.length),A={},N={},R=new Array(b.length),F=new Map;for(let B=0;B<b.length;B++){const k=b.codePointAt(B),z=s(k);R[B]=z,c[z]||F.has(z)||F.set(z,f(`${E}/${z}`).then(O=>{c[z]=O})),k>65535&&B++}return Promise.all(F.values()).then(()=>{F.clear();for(let B=0;B<b.length;B++){const k=b.codePointAt(B);let z=null;const O=c[R[B]];e:for(let V in O){let U=N[V];if(U===void 0&&(U=N[V]=new RegExp(V).test(_)),U){for(let G in O[V])if(o(k,O[V][G])){z=G;break e}}}z||(console.debug(`No font coverage for U+${k.toString(16)}`),z="latin"),R[B]=z,u[z]||F.has(z)||F.set(z,f(`${E}/font-meta/${z}.json`).then(V=>{u[z]=V})),k>65535&&B++}return Promise.all(F.values())}).then(()=>{var B;let k=null;for(let z=0;z<b.length;z++){const O=b.codePointAt(z);if(k&&(x(O)||h(k).has(O)))P[z]=P[z-1];else{k=u[R[z]];let V=A[k.id];if(!V){const{typeforms:G}=k,X=m(G,S,"sans-serif"),ie=m(G[X],T,"normal"),se=g((B=G[X])===null||B===void 0?void 0:B[ie],M);V=A[k.id]=`${E}/font-files/${k.id}/${X}.${ie}.${se}.woff`}let U=C.get(V);U==null&&(U=C.size,C.set(V,U)),P[z]=U}O>65535&&(z++,P[z]=P[z-1])}return{fontUrls:Array.from(C.keys()),chars:P}})},Object.defineProperty(r,"__esModule",{value:!0}),r}({})}function sVe(r,e){const t=Object.create(null),i=Object.create(null);function n(o,a){const l=c=>{console.error(`Failure loading font ${o}`,c)};try{const c=new XMLHttpRequest;c.open("get",o,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)l(new Error(c.statusText));else if(c.status>0)try{const u=r(c.response);u.src=o,a(u)}catch(u){l(u)}},c.onerror=l,c.send()}catch(c){l(c)}}function s(o,a){let l=t[o];l?a(l):i[o]?i[o].push(a):(i[o]=[a],n(o,c=>{c.src=o,t[o]=c,i[o].forEach(u=>u(c)),delete i[o]}))}return function(o,a,{lang:l,fonts:c=[],style:u="normal",weight:d="normal"}={}){const h=new Uint8Array(o.length),p=[];o.length||v();const f=new Map,m=[];if(u!=="italic"&&(u="normal"),typeof d!="number"&&(d=d==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(b=>!b.lang||b.lang.test(l)).reverse(),c.length){let b=0;(function w(_=0){for(let S=_,T=o.length;S<T;S++){const M=o.codePointAt(S);if(b===1&&p[h[S-1]].supportsCodePoint(M)||/\s/.test(o[S]))h[S]=h[S-1],b===2&&(m[m.length-1][1]=S);else for(let E=h[S],C=c.length;E<=C;E++)if(E===C){const P=b===2?m[m.length-1]:m[m.length]=[S,S];P[1]=S,b=2}else{h[S]=E;const{src:P,unicodeRange:A}=c[E];if(!A||x(M,A)){const N=t[P];if(!N){s(P,()=>{w(S)});return}if(N.supportsCodePoint(M)){let R=f.get(N);typeof R!="number"&&(R=p.length,p.push(N),f.set(N,R)),h[S]=R,b=1;break}}}M>65535&&S+1<T&&(h[S+1]=h[S],S++,b===2&&(m[m.length-1][1]=S))}g()})()}else m.push([0,o.length-1]),g();function g(){if(m.length){const b=m.map(w=>o.substring(w[0],w[1]+1)).join(`
`);e.getFontsForString(b,{lang:l,style:u,weight:d}).then(({fontUrls:w,chars:_})=>{const S=p.length;let T=0;m.forEach(E=>{for(let C=0,P=E[1]-E[0];C<=P;C++)h[E[0]+C]=_[T++]+S;T++});let M=0;w.forEach((E,C)=>{s(E,P=>{p[C+S]=P,++M===w.length&&v()})})})}else v()}function v(){a({chars:h,fonts:p})}function x(b,w){for(let _=0;_<w.length;_++){const[S,T=S]=w[_];if(S<=b&&b<=T)return!0}return!1}}}const oVe=Hl({name:"FontResolver",dependencies:[sVe,iVe,nVe],init(r,e,t){return r(e,t())}});function aVe(r,e){const t=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i="[^\\S\\u00A0]",n=new RegExp(`${i}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function s({text:p,lang:f,fonts:m,style:g,weight:v,preResolvedFonts:x},b){const w=({chars:_,fonts:S})=>{let T,M;const E=[];for(let C=0;C<_.length;C++)_[C]!==M?(M=_[C],E.push(T={start:C,end:C,fontObj:S[_[C]]})):T.end=C;b(E)};x?w(x):r(p,w,{lang:f,fonts:m,style:g,weight:v})}function o({text:p="",font:f,lang:m="en",sdfGlyphSize:g=64,fontSize:v=400,fontWeight:x=1,fontStyle:b="normal",letterSpacing:w=0,lineHeight:_="normal",maxWidth:S=1/0,direction:T,textAlign:M="left",textIndent:E=0,whiteSpace:C="normal",overflowWrap:P="normal",anchorX:A=0,anchorY:N=0,metricsOnly:R=!1,preResolvedFonts:F=null,includeCaretPositions:B=!1,chunkedBoundsSize:k=8192,colorRanges:z=null},O){const V=u(),U={fontLoad:0,typesetting:0};p.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),p=p.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),v=+v,w=+w,S=+S,_=_||"normal",E=+E,s({text:p,lang:m,style:b,weight:x,fonts:typeof f=="string"?[{src:f}]:f,preResolvedFonts:F},G=>{U.fontLoad=u()-V;const X=isFinite(S);let ie=null,se=null,de=null,K=null,q=null,ce=null,Te=null,Z=null,L=0,$=0,re=C!=="nowrap";const te=new Map,le=u();let ge=E,be=0,_e=new d;const pe=[_e];G.forEach(ne=>{const{fontObj:Le}=ne,{ascender:Pe,descender:Ee,unitsPerEm:Ue,lineGap:Be,capHeight:ve,xHeight:Q}=Le;let he=te.get(Le);if(!he){const je=v/Ue,ye=_==="normal"?(Pe-Ee+Be)*je:_*v,nt=(ye-(Pe-Ee)*je)/2,He=Math.min(ye,(Pe-Ee)*je),tt=(Pe+Ee)/2*je+He/2;he={index:te.size,src:Le.src,fontObj:Le,fontSizeMult:je,unitsPerEm:Ue,ascender:Pe*je,descender:Ee*je,capHeight:ve*je,xHeight:Q*je,lineHeight:ye,baseline:-nt-Pe*je,caretTop:(Pe+Ee)/2*je+He/2,caretBottom:tt-He},te.set(Le,he)}const{fontSizeMult:we}=he,ae=p.slice(ne.start,ne.end+1);let De,We;Le.forEachGlyph(ae,v,w,(je,ye,nt)=>{ye+=be,nt+=ne.start,De=ye,We=je;const He=p.charAt(nt),tt=je.advanceWidth*we,Me=_e.count;let Ne;if("isEmpty"in je||(je.isWhitespace=!!He&&new RegExp(i).test(He),je.canBreakAfter=!!He&&n.test(He),je.isEmpty=je.xMin===je.xMax||je.yMin===je.yMax||t.test(He)),!je.isWhitespace&&!je.isEmpty&&$++,re&&X&&!je.isWhitespace&&ye+tt+ge>S&&Me){if(_e.glyphAt(Me-1).glyphObj.canBreakAfter)Ne=new d,ge=-ye;else for(let Ie=Me;Ie--;)if(Ie===0&&P==="break-word"){Ne=new d,ge=-ye;break}else if(_e.glyphAt(Ie).glyphObj.canBreakAfter){Ne=_e.splitAt(Ie+1);const wt=Ne.glyphAt(0).x;ge-=wt;for(let xt=Ne.count;xt--;)Ne.glyphAt(xt).x-=wt;break}Ne&&(_e.isSoftWrapped=!0,_e=Ne,pe.push(_e),L=S)}let fe=_e.glyphAt(_e.count);fe.glyphObj=je,fe.x=ye+ge,fe.width=tt,fe.charIndex=nt,fe.fontData=he,He===`
`&&(_e=new d,pe.push(_e),ge=-(ye+tt+w*v)+E)}),be=De+We.advanceWidth*we+w*v});let Se=0;pe.forEach(ne=>{let Le=!0;for(let Pe=ne.count;Pe--;){const Ee=ne.glyphAt(Pe);Le&&!Ee.glyphObj.isWhitespace&&(ne.width=Ee.x+Ee.width,ne.width>L&&(L=ne.width),Le=!1);let{lineHeight:Ue,capHeight:Be,xHeight:ve,baseline:Q}=Ee.fontData;Ue>ne.lineHeight&&(ne.lineHeight=Ue);const he=Q-ne.baseline;he<0&&(ne.baseline+=he,ne.cap+=he,ne.ex+=he),ne.cap=Math.max(ne.cap,ne.baseline+Be),ne.ex=Math.max(ne.ex,ne.baseline+ve)}ne.baseline-=Se,ne.cap-=Se,ne.ex-=Se,Se+=ne.lineHeight});let Fe=0,Y=0;if(A&&(typeof A=="number"?Fe=-A:typeof A=="string"&&(Fe=-L*(A==="left"?0:A==="center"?.5:A==="right"?1:l(A)))),N&&(typeof N=="number"?Y=-N:typeof N=="string"&&(Y=N==="top"?0:N==="top-baseline"?-pe[0].baseline:N==="top-cap"?-pe[0].cap:N==="top-ex"?-pe[0].ex:N==="middle"?Se/2:N==="bottom"?Se:N==="bottom-baseline"?pe[pe.length-1].baseline:l(N)*Se)),!R){const ne=e.getEmbeddingLevels(p,T);ie=new Uint16Array($),se=new Uint8Array($),de=new Float32Array($*2),K={},Te=[1/0,1/0,-1/0,-1/0],Z=[],B&&(ce=new Float32Array(p.length*4)),z&&(q=new Uint8Array($*3));let Le=0,Pe=-1,Ee=-1,Ue,Be;if(pe.forEach((ve,Q)=>{let{count:he,width:we}=ve;if(he>0){let ae=0;for(let He=he;He--&&ve.glyphAt(He).glyphObj.isWhitespace;)ae++;let De=0,We=0;if(M==="center")De=(L-we)/2;else if(M==="right")De=L-we;else if(M==="justify"&&ve.isSoftWrapped){let He=0;for(let tt=he-ae;tt--;)ve.glyphAt(tt).glyphObj.isWhitespace&&He++;We=(L-we)/He}if(We||De){let He=0;for(let tt=0;tt<he;tt++){let Me=ve.glyphAt(tt);const Ne=Me.glyphObj;Me.x+=De+He,We!==0&&Ne.isWhitespace&&tt<he-ae&&(He+=We,Me.width+=We)}}const je=e.getReorderSegments(p,ne,ve.glyphAt(0).charIndex,ve.glyphAt(ve.count-1).charIndex);for(let He=0;He<je.length;He++){const[tt,Me]=je[He];let Ne=1/0,fe=-1/0;for(let Ie=0;Ie<he;Ie++)if(ve.glyphAt(Ie).charIndex>=tt){let wt=Ie,xt=Ie;for(;xt<he;xt++){let Gt=ve.glyphAt(xt);if(Gt.charIndex>Me)break;xt<he-ae&&(Ne=Math.min(Ne,Gt.x),fe=Math.max(fe,Gt.x+Gt.width))}for(let Gt=wt;Gt<xt;Gt++){const Jt=ve.glyphAt(Gt);Jt.x=fe-(Jt.x+Jt.width-Ne)}break}}let ye;const nt=He=>ye=He;for(let He=0;He<he;He++){const tt=ve.glyphAt(He);ye=tt.glyphObj;const Me=ye.index,Ne=ne.levels[tt.charIndex]&1;if(Ne){const fe=e.getMirroredCharacter(p[tt.charIndex]);fe&&tt.fontData.fontObj.forEachGlyph(fe,0,0,nt)}if(B){const{charIndex:fe,fontData:Ie}=tt,wt=tt.x+Fe,xt=tt.x+tt.width+Fe;ce[fe*4]=Ne?xt:wt,ce[fe*4+1]=Ne?wt:xt,ce[fe*4+2]=ve.baseline+Ie.caretBottom+Y,ce[fe*4+3]=ve.baseline+Ie.caretTop+Y;const Gt=fe-Pe;Gt>1&&c(ce,Pe,Gt),Pe=fe}if(z){const{charIndex:fe}=tt;for(;fe>Ee;)Ee++,z.hasOwnProperty(Ee)&&(Be=z[Ee])}if(!ye.isWhitespace&&!ye.isEmpty){const fe=Le++,{fontSizeMult:Ie,src:wt,index:xt}=tt.fontData,Gt=K[wt]||(K[wt]={});Gt[Me]||(Gt[Me]={path:ye.path,pathBounds:[ye.xMin,ye.yMin,ye.xMax,ye.yMax]});const Jt=tt.x+Fe,_r=ve.baseline+Y;de[fe*2]=Jt,de[fe*2+1]=_r;const yi=Jt+ye.xMin*Ie,xs=_r+ye.yMin*Ie,Cn=Jt+ye.xMax*Ie,ws=_r+ye.yMax*Ie;yi<Te[0]&&(Te[0]=yi),xs<Te[1]&&(Te[1]=xs),Cn>Te[2]&&(Te[2]=Cn),ws>Te[3]&&(Te[3]=ws),fe%k===0&&(Ue={start:fe,end:fe,rect:[1/0,1/0,-1/0,-1/0]},Z.push(Ue)),Ue.end++;const Si=Ue.rect;if(yi<Si[0]&&(Si[0]=yi),xs<Si[1]&&(Si[1]=xs),Cn>Si[2]&&(Si[2]=Cn),ws>Si[3]&&(Si[3]=ws),ie[fe]=Me,se[fe]=xt,z){const js=fe*3;q[js]=Be>>16&255,q[js+1]=Be>>8&255,q[js+2]=Be&255}}}}}),ce){const ve=p.length-Pe;ve>1&&c(ce,Pe,ve)}}const H=[];te.forEach(({index:ne,src:Le,unitsPerEm:Pe,ascender:Ee,descender:Ue,lineHeight:Be,capHeight:ve,xHeight:Q})=>{H[ne]={src:Le,unitsPerEm:Pe,ascender:Ee,descender:Ue,lineHeight:Be,capHeight:ve,xHeight:Q}}),U.typesetting=u()-le,O({glyphIds:ie,glyphFontIndices:se,glyphPositions:de,glyphData:K,fontData:H,caretPositions:ce,glyphColors:q,chunkedBounds:Z,fontSize:v,topBaseline:Y+pe[0].baseline,blockBounds:[Fe,Y-Se,Fe+L,Y],visibleBounds:Te,timings:U})})}function a(p,f){o({...p,metricsOnly:!0},m=>{const[g,v,x,b]=m.blockBounds;f({width:x-g,height:b-v})})}function l(p){let f=p.match(/^([\d.]+)%$/),m=f?parseFloat(f[1]):NaN;return isNaN(m)?0:m/100}function c(p,f,m){const g=p[f*4],v=p[f*4+1],x=p[f*4+2],b=p[f*4+3],w=(v-g)/m;for(let _=0;_<m;_++){const S=(f+_)*4;p[S]=g+w*_,p[S+1]=g+w*(_+1),p[S+2]=x,p[S+3]=b}}function u(){return(self.performance||Date).now()}function d(){this.data=[]}const h=["glyphObj","x","width","charIndex","fontData"];return d.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(p){let f=d.flyweight;return f.data=this.data,f.index=p,f},splitAt(p){let f=new d;return f.data=this.data.splice(p*h.length),f}},d.flyweight=h.reduce((p,f,m,g)=>(Object.defineProperty(p,f,{get(){return this.data[this.index*h.length+m]},set(v){this.data[this.index*h.length+m]=v}}),p),{data:null,index:0}),{typeset:o,measure:a}}const Ap=()=>(self.performance||Date).now(),M2=b7();let E7;function lVe(r,e,t,i,n,s,o,a,l,c,u=!0){return u?uVe(r,e,t,i,n,s,o,a,l,c).then(null,d=>(E7||(console.warn("WebGL SDF generation failed, falling back to JS",d),E7=!0),N7(r,e,t,i,n,s,o,a,l,c))):N7(r,e,t,i,n,s,o,a,l,c)}const E2=[],cVe=5;let qL=0;function C7(){const r=Ap();for(;E2.length&&Ap()-r<cVe;)E2.shift()();qL=E2.length?setTimeout(C7,0):0}const uVe=(...r)=>new Promise((e,t)=>{E2.push(()=>{const i=Ap();try{M2.webgl.generateIntoCanvas(...r),e({timing:Ap()-i})}catch(n){t(n)}}),qL||(qL=setTimeout(C7,0))}),dVe=4,hVe=2e3,A7={};let pVe=0;function N7(r,e,t,i,n,s,o,a,l,c){const u="TroikaTextSDFGenerator_JS_"+pVe++%dVe;let d=A7[u];return d||(d=A7[u]={workerModule:Hl({name:u,workerId:u,dependencies:[b7,Ap],init(h,p){const f=h().javascript.generate;return function(...m){const g=p();return{textureData:f(...m),timing:p()-g}}},getTransferables(h){return[h.textureData.buffer]}}),requests:0,idleTimer:null}),d.requests++,clearTimeout(d.idleTimer),d.workerModule(r,e,t,i,n,s).then(({textureData:h,timing:p})=>{const f=Ap(),m=new Uint8Array(h.length*4);for(let g=0;g<h.length;g++)m[g*4+c]=h[g];return M2.webglUtils.renderImageData(o,m,a,l,r,e,1<<3-c),p+=Ap()-f,--d.requests===0&&(d.idleTimer=setTimeout(()=>{W8e(u)},hVe)),{timing:p}})}function fVe(r){r._warm||(M2.webgl.isSupported(r),r._warm=!0)}const mVe=M2.webglUtils.resizeWebGLCanvasWithoutClearing,Lb={defaultFontURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},gVe=new at;function Ag(){return(self.performance||Date).now()}const R7=Object.create(null);function vVe(r,e){r=bVe({},r);const t=Ag(),{defaultFontURL:i}=Lb,n=[];if(i&&n.push({label:"default",src:L7(i)}),r.font&&n.push({label:"user",src:L7(r.font)}),r.font=n,r.text=""+r.text,r.sdfGlyphSize=r.sdfGlyphSize||Lb.sdfGlyphSize,r.colorRanges!=null){let h={};for(let p in r.colorRanges)if(r.colorRanges.hasOwnProperty(p)){let f=r.colorRanges[p];typeof f!="number"&&(f=gVe.set(f).getHex()),h[p]=f}r.colorRanges=h}Object.freeze(r);const{textureWidth:s,sdfExponent:o}=Lb,{sdfGlyphSize:a}=r,l=s/a*4;let c=R7[a];if(!c){const h=document.createElement("canvas");h.width=s,h.height=a*256/l,c=R7[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:h,sdfTexture:new Nr(h,void 0,void 0,void 0,Or,Or),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,yVe(c)}const{sdfTexture:u,sdfCanvas:d}=c;wVe(r).then(h=>{const{glyphIds:p,glyphFontIndices:f,fontData:m,glyphPositions:g,fontSize:v,timings:x}=h,b=[],w=new Float32Array(p.length*4);let _=0,S=0;const T=Ag(),M=m.map(N=>{let R=c.glyphsByFont.get(N.src);return R||c.glyphsByFont.set(N.src,R=new Map),R});p.forEach((N,R)=>{const F=f[R],{src:B,unitsPerEm:k}=m[F];let z=M[F].get(N);if(!z){const{path:X,pathBounds:ie}=h.glyphData[B][N],se=Math.max(ie[2]-ie[0],ie[3]-ie[1])/a*(Lb.sdfMargin*a+.5),de=c.glyphCount++,K=[ie[0]-se,ie[1]-se,ie[2]+se,ie[3]+se];M[F].set(N,z={path:X,atlasIndex:de,sdfViewBox:K}),b.push(z)}const{sdfViewBox:O}=z,V=g[S++],U=g[S++],G=v/k;w[_++]=V+O[0]*G,w[_++]=U+O[1]*G,w[_++]=V+O[2]*G,w[_++]=U+O[3]*G,p[R]=z.atlasIndex}),x.quads=(x.quads||0)+(Ag()-T);const E=Ag();x.sdf={};const C=d.height,P=Math.ceil(c.glyphCount/l),A=Math.pow(2,Math.ceil(Math.log2(P*a)));A>C&&(console.info(`Increasing SDF texture size ${C}->${A}`),mVe(d,s,A),u.dispose()),Promise.all(b.map(N=>k7(N,c,r.gpuAccelerateSDF).then(({timing:R})=>{x.sdf[N.atlasIndex]=R}))).then(()=>{b.length&&!c.contextLost&&(O7(c),u.needsUpdate=!0),x.sdfTotal=Ag()-E,x.total=Ag()-t,e(Object.freeze({parameters:r,sdfTexture:u,sdfGlyphSize:a,sdfExponent:o,glyphBounds:w,glyphAtlasIndices:p,glyphColors:h.glyphColors,caretPositions:h.caretPositions,chunkedBounds:h.chunkedBounds,ascender:h.ascender,descender:h.descender,lineHeight:h.lineHeight,capHeight:h.capHeight,xHeight:h.xHeight,topBaseline:h.topBaseline,blockBounds:h.blockBounds,visibleBounds:h.visibleBounds,timings:h.timings}))})}),Promise.resolve().then(()=>{c.contextLost||fVe(d)})}function k7({path:r,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:n,contextLost:s},o){if(s)return Promise.resolve({timing:-1});const{textureWidth:a,sdfExponent:l}=Lb,c=Math.max(t[2]-t[0],t[3]-t[1]),u=Math.floor(e/4),d=u%(a/i)*i,h=Math.floor(u/(a/i))*i,p=e%4;return lVe(i,i,r,t,c,l,n,d,h,p,o)}function yVe(r){const e=r.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),r.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),r.contextLost=!1;const i=[];r.glyphsByFont.forEach(n=>{n.forEach(s=>{i.push(k7(s,r,!0))})}),Promise.all(i).then(()=>{O7(r),r.sdfTexture.needsUpdate=!0})})}function bVe(r,e){for(let t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}let C2;function L7(r){return C2||(C2=typeof document>"u"?{}:document.createElement("a")),C2.href=r,C2.href}function O7(r){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=r,{width:i,height:n}=e,s=r.sdfCanvas.getContext("webgl");let o=t.image.data;(!o||o.length!==i*n*4)&&(o=new Uint8Array(i*n*4),t.image={width:i,height:n,data:o},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,i,n,s.RGBA,s.UNSIGNED_BYTE,o)}}const xVe=Hl({name:"Typesetter",dependencies:[aVe,oVe,x7],init(r,e,t){return r(e,t())}}),wVe=Hl({name:"Typesetter",dependencies:[xVe],init(r){return function(e){return new Promise(t=>{r.typeset(e,t)})}},getTransferables(r){const e=[];for(let t in r)r[t]&&r[t].buffer&&e.push(r[t].buffer);return e}}),P7={};function _Ve(r){let e=P7[r];if(!e){const t=new Xa(1,1,r,r),i=t.clone(),n=t.attributes,s=i.attributes,o=new sr,a=n.uv.count;for(let l=0;l<a;l++)s.position.array[l*3]*=-1,s.normal.array[l*3+2]*=-1;["position","normal","uv"].forEach(l=>{o.setAttribute(l,new Rt([...n[l].array,...s[l].array],n[l].itemSize))}),o.setIndex([...t.index.array,...i.index.array.map(l=>l+a)]),o.translate(.5,.5,0),e=P7[r]=o}return e}const SVe="aTroikaGlyphBounds",I7="aTroikaGlyphIndex",TVe="aTroikaGlyphColor";class D7 extends W_{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Ls,this.boundingBox=new On}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===Oi?t/2:0,e===Wi?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=_Ve(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,n,s){KL(this,SVe,e,4),KL(this,I7,t,1),KL(this,TVe,s,3),this._blockBounds=i,this._chunkedBounds=n,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:n,floor:s,min:o,max:a,sin:l,cos:c}=Math,u=n/2,d=n*2,h=Math.abs(t),p=e[0]/h,f=e[2]/h,m=s((p+u)/d)!==s((f+u)/d)?-h:o(l(p)*h,l(f)*h),g=s((p-u)/d)!==s((f-u)/d)?h:a(l(p)*h,l(f)*h),v=s((p+n)/d)!==s((f+n)/d)?h*2:a(h-c(p)*h,h-c(f)*h);i.min.set(m,e[1],t<0?-v:0),i.max.set(g,e[3],t<0?0:v)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(I7).count,i=this._chunkedBounds;if(i)for(let n=i.length;n--;){t=i[n].end;let s=i[n].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}}function KL(r,e,t,i){const n=r.getAttribute(e);t?n&&n.array.length===t.length?(n.array.set(t),n.needsUpdate=!0):(r.setAttribute(e,new Mc(t,i)),delete r._maxInstanceCount,r.dispose()):n&&r.deleteAttribute(e)}const MVe=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,EVe=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,CVe=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,AVe=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function NVe(r){const e=XL(r,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new qe},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new jt(0,0,0,0)},uTroikaClipRect:{value:new jt(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new qe},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new at},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new hr},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:MVe,vertexTransform:EVe,fragmentDefs:CVe,fragmentColorTransform:AVe,customRewriter({vertexShader:t,fragmentShader:i}){let n=/\buniform\s+vec3\s+diffuse\b/;return n.test(i)&&(i=i.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(t)||(t=t.replace(w7,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const YL=new Ei({color:16777215,side:Wi,transparent:!0}),U7=8421504,F7=new St,A2=new oe,ZL=new oe,Ob=[],RVe=new oe,JL="+x+y";function B7(r){return Array.isArray(r)?r[0]:r}let z7=()=>{const r=new mt(new Xa(1,1),YL);return z7=()=>r,r},V7=()=>{const r=new mt(new Xa(1,1,32,1),YL);return V7=()=>r,r};const kVe={type:"syncstart"},LVe={type:"synccomplete"},G7=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],OVe=G7.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class j7 extends mt{constructor(){const e=new D7;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang="en",this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=U7,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=JL,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(kVe),vVe({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(n=>n&&n())})),this.dispatchEvent(LVe),e&&e()})))}onBeforeRender(e,t,i,n,s,o){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s),s._hadOwnSide=s.hasOwnProperty("side"),this.geometry.setSide(s._actualSide=s.side),s.side=eo}onAfterRender(e,t,i,n,s,o){s._hadOwnSide?s.side=s._actualSide:delete s.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=YL.clone());if((!e||e.baseMaterial!==t)&&(e=this._derivedMaterial=NVe(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function n(){e.removeEventListener("dispose",n),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return B7(this.material).getDepthMaterial()}get customDistanceMaterial(){return B7(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,n=this.textRenderInfo;if(n){const{sdfTexture:a,blockBounds:l}=n;i.uTroikaSDFTexture.value=a,i.uTroikaSDFTextureSize.value.set(a.image.width,a.image.height),i.uTroikaSDFGlyphSize.value=n.sdfGlyphSize,i.uTroikaSDFExponent.value=n.sdfExponent,i.uTroikaTotalBounds.value.fromArray(l),i.uTroikaUseGlyphColors.value=!t&&!!n.glyphColors;let c=0,u=0,d=0,h,p,f,m=0,g=0;if(t){let{outlineWidth:x,outlineOffsetX:b,outlineOffsetY:w,outlineBlur:_,outlineOpacity:S}=this;c=this._parsePercent(x)||0,u=Math.max(0,this._parsePercent(_)||0),h=S,m=this._parsePercent(b)||0,g=this._parsePercent(w)||0}else d=Math.max(0,this._parsePercent(this.strokeWidth)||0),d&&(f=this.strokeColor,i.uTroikaStrokeColor.value.set(f??U7),p=this.strokeOpacity,p==null&&(p=1)),h=this.fillOpacity;i.uTroikaDistanceOffset.value=c,i.uTroikaPositionOffset.value.set(m,g),i.uTroikaBlurRadius.value=u,i.uTroikaStrokeWidth.value=d,i.uTroikaStrokeOpacity.value=p,i.uTroikaFillOpacity.value=h??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let v=this.clipRect;if(v&&Array.isArray(v)&&v.length===4)i.uTroikaClipRect.value.fromArray(v);else{const x=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(l[0]-x,l[1]-x,l[2]+x,l[3]+x)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const a=e.hasOwnProperty("color")?e.color:e.color=new at;(s!==a._input||typeof s=="object")&&a.set(a._input=s)}let o=this.orientation||JL;if(o!==e._orientation){let a=i.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let l=o!==JL&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){let[,c,u,d,h]=l;A2.set(0,0,0)[u]=c==="-"?1:-1,ZL.set(0,0,0)[h]=d==="-"?-1:1,F7.lookAt(RVe,A2.cross(ZL),ZL),a.setFromMatrix4(F7)}else a.identity();e._orientation=o}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new qe){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new qe){return A2.copy(e),this.localPositionToTextCoords(this.worldToLocal(A2),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:n}=this;if(i){const s=i.blockBounds,o=n?V7():z7(),a=o.geometry,{position:l,uv:c}=a.attributes;for(let u=0;u<c.count;u++){let d=s[0]+c.getX(u)*(s[2]-s[0]);const h=s[1]+c.getY(u)*(s[3]-s[1]);let p=0;n&&(p=n-Math.cos(d/n)*n,d=Math.sin(d/n)*n),l.setXYZ(u,d,h,p)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,Ob.length=0,o.raycast(e,Ob);for(let u=0;u<Ob.length;u++)Ob[u].object=this,t.push(Ob[u])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,OVe.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}}G7.forEach(r=>{const e="_private_"+r;Object.defineProperty(j7.prototype,r,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});const N2={text:"String",anchorX:'number|"left"|"center"|"right"',anchorY:'number|"top"|"top-baseline"|"top-cap"|"top-ex"|"middle"|"bottom-baseline"|"bottom"',curveRadius:"number",direction:'"auto"|"ltr"|"rtl"',font:"string",fontSize:"number",fontWeight:'number|"normal" | "bold"',fontStyle:'"normal"|"italic"',letterSpacing:"number",lineHeight:'number|"normal"',maxWidth:"number",overflowWrap:'"normal" | "break-word"',textAlign:'"left" | "right" | "center" | "justify"',textIndent:"number",whiteSpace:'"normal"| "nowrap"',color:"Color",outlineWidth:"number",outlineColor:"Color",outlineOpacity:"number",outlineBlur:"number",outlineOffsetX:"number",outlineOffsetY:"number",strokeWidth:"number",strokeColor:"Color",strokeOpacity:"number",fillOpacity:"number",depthOffset:"number",clipRect:"number[]",orientation:"string",glyphGeometryDetail:"number",sdfGlyphSize:"number|null",gpuAccelerateSDF:"boolean"};class H7 extends j7{constructor(){super(),this.isTextMesh=!0,this.type="TextMesh",this.text="text",this.font="/assets/fonts/STFangsong.ttf",this.color=new at,this.outlineColor=new at,this.strokeColor=new at}serialize(e){for(const[t,i]of Object.entries(N2))if(i==="Color"){const n=this[t];e[t]=(n instanceof at?n:new at(n)).toArray()}else e[t]=this[t];e.geo={detail:this.geometry.detail,curveRadius:this.geometry.curveRadius,groups:this.geometry.groups,boundingSphere:{center:this.geometry.boundingSphere.center.toArray(),radius:this.geometry.boundingSphere.radius},boundingBox:{min:this.geometry.boundingBox.min.toArray(),max:this.geometry.boundingBox.max.toArray()}}}deserialize(e){const t=new D7;t.copy(this.geometry),this.geometry=t,e.geo&&(t.detail=e.geo.detail,t.curveRadius=e.geo.curveRadius,t.groups=e.geo.groups,t.boundingSphere.set(new oe().fromArray(e.geo.boundingSphere.center),e.geo.boundingSphere.radius),t.boundingBox=new On(new oe().fromArray(e.geo.boundingBox.min),new oe().fromArray(e.geo.boundingBox.max)));for(const[i,n]of Object.entries(N2)){const s=e[i];s!==void 0&&(n==="Color"?this[i]=new at().fromArray(s):this[i]=s)}this.sync()}}Cr("TextMesh",{create:()=>new H7,members:N2,proto:"Mesh",group:"Text.Text",icon:"text"});function PVe(){return typeof window>"u"&&(self.window=self),function(r){var e={parse:function(n){var s=e._bin,o=new Uint8Array(n);if(s.readASCII(o,0,4)=="ttcf"){var a=4;s.readUshort(o,a),a+=2,s.readUshort(o,a),a+=2;var l=s.readUint(o,a);a+=4;for(var c=[],u=0;u<l;u++){var d=s.readUint(o,a);a+=4,c.push(e._readFont(o,d))}return c}return[e._readFont(o,0)]},_readFont:function(n,s){var o=e._bin,a=s;o.readFixed(n,s),s+=4;var l=o.readUshort(n,s);s+=2,o.readUshort(n,s),s+=2,o.readUshort(n,s),s+=2,o.readUshort(n,s),s+=2;for(var c=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],u={_data:n,_offset:a},d={},h=0;h<l;h++){var p=o.readASCII(n,s,4);s+=4,o.readUint(n,s),s+=4;var f=o.readUint(n,s);s+=4;var m=o.readUint(n,s);s+=4,d[p]={offset:f,length:m}}for(h=0;h<c.length;h++){var g=c[h];d[g]&&(u[g.trim()]=e[g.trim()].parse(n,d[g].offset,d[g].length,u))}return u},_tabOffset:function(n,s,o){for(var a=e._bin,l=a.readUshort(n,o+4),c=o+12,u=0;u<l;u++){var d=a.readASCII(n,c,4);c+=4,a.readUint(n,c),c+=4;var h=a.readUint(n,c);if(c+=4,a.readUint(n,c),c+=4,d==s)return h}return 0}};e._bin={readFixed:function(n,s){return(n[s]<<8|n[s+1])+(n[s+2]<<8|n[s+3])/65540},readF2dot14:function(n,s){return e._bin.readShort(n,s)/16384},readInt:function(n,s){return e._bin._view(n).getInt32(s)},readInt8:function(n,s){return e._bin._view(n).getInt8(s)},readShort:function(n,s){return e._bin._view(n).getInt16(s)},readUshort:function(n,s){return e._bin._view(n).getUint16(s)},readUshorts:function(n,s,o){for(var a=[],l=0;l<o;l++)a.push(e._bin.readUshort(n,s+2*l));return a},readUint:function(n,s){return e._bin._view(n).getUint32(s)},readUint64:function(n,s){return 4294967296*e._bin.readUint(n,s)+e._bin.readUint(n,s+4)},readASCII:function(n,s,o){for(var a="",l=0;l<o;l++)a+=String.fromCharCode(n[s+l]);return a},readUnicode:function(n,s,o){for(var a="",l=0;l<o;l++){var c=n[s++]<<8|n[s++];a+=String.fromCharCode(c)}return a},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(n,s,o){var a=e._bin._tdec;return a&&s==0&&o==n.length?a.decode(n):e._bin.readASCII(n,s,o)},readBytes:function(n,s,o){for(var a=[],l=0;l<o;l++)a.push(n[s+l]);return a},readASCIIArray:function(n,s,o){for(var a=[],l=0;l<o;l++)a.push(String.fromCharCode(n[s+l]));return a},_view:function(n){return n._dataView||(n._dataView=n.buffer?new DataView(n.buffer,n.byteOffset,n.byteLength):new DataView(new Uint8Array(n).buffer))}},e._lctf={},e._lctf.parse=function(n,s,o,a,l){var c=e._bin,u={},d=s;c.readFixed(n,s),s+=4;var h=c.readUshort(n,s);s+=2;var p=c.readUshort(n,s);s+=2;var f=c.readUshort(n,s);return s+=2,u.scriptList=e._lctf.readScriptList(n,d+h),u.featureList=e._lctf.readFeatureList(n,d+p),u.lookupList=e._lctf.readLookupList(n,d+f,l),u},e._lctf.readLookupList=function(n,s,o){var a=e._bin,l=s,c=[],u=a.readUshort(n,s);s+=2;for(var d=0;d<u;d++){var h=a.readUshort(n,s);s+=2;var p=e._lctf.readLookupTable(n,l+h,o);c.push(p)}return c},e._lctf.readLookupTable=function(n,s,o){var a=e._bin,l=s,c={tabs:[]};c.ltype=a.readUshort(n,s),s+=2,c.flag=a.readUshort(n,s),s+=2;var u=a.readUshort(n,s);s+=2;for(var d=c.ltype,h=0;h<u;h++){var p=a.readUshort(n,s);s+=2;var f=o(n,d,l+p,c);c.tabs.push(f)}return c},e._lctf.numOfOnes=function(n){for(var s=0,o=0;o<32;o++)n>>>o&1&&s++;return s},e._lctf.readClassDef=function(n,s){var o=e._bin,a=[],l=o.readUshort(n,s);if(s+=2,l==1){var c=o.readUshort(n,s);s+=2;var u=o.readUshort(n,s);s+=2;for(var d=0;d<u;d++)a.push(c+d),a.push(c+d),a.push(o.readUshort(n,s)),s+=2}if(l==2){var h=o.readUshort(n,s);for(s+=2,d=0;d<h;d++)a.push(o.readUshort(n,s)),s+=2,a.push(o.readUshort(n,s)),s+=2,a.push(o.readUshort(n,s)),s+=2}return a},e._lctf.getInterval=function(n,s){for(var o=0;o<n.length;o+=3){var a=n[o],l=n[o+1];if(n[o+2],a<=s&&s<=l)return o}return-1},e._lctf.readCoverage=function(n,s){var o=e._bin,a={};a.fmt=o.readUshort(n,s),s+=2;var l=o.readUshort(n,s);return s+=2,a.fmt==1&&(a.tab=o.readUshorts(n,s,l)),a.fmt==2&&(a.tab=o.readUshorts(n,s,3*l)),a},e._lctf.coverageIndex=function(n,s){var o=n.tab;if(n.fmt==1)return o.indexOf(s);if(n.fmt==2){var a=e._lctf.getInterval(o,s);if(a!=-1)return o[a+2]+(s-o[a])}return-1},e._lctf.readFeatureList=function(n,s){var o=e._bin,a=s,l=[],c=o.readUshort(n,s);s+=2;for(var u=0;u<c;u++){var d=o.readASCII(n,s,4);s+=4;var h=o.readUshort(n,s);s+=2;var p=e._lctf.readFeatureTable(n,a+h);p.tag=d.trim(),l.push(p)}return l},e._lctf.readFeatureTable=function(n,s){var o=e._bin,a=s,l={},c=o.readUshort(n,s);s+=2,c>0&&(l.featureParams=a+c);var u=o.readUshort(n,s);s+=2,l.tab=[];for(var d=0;d<u;d++)l.tab.push(o.readUshort(n,s+2*d));return l},e._lctf.readScriptList=function(n,s){var o=e._bin,a=s,l={},c=o.readUshort(n,s);s+=2;for(var u=0;u<c;u++){var d=o.readASCII(n,s,4);s+=4;var h=o.readUshort(n,s);s+=2,l[d.trim()]=e._lctf.readScriptTable(n,a+h)}return l},e._lctf.readScriptTable=function(n,s){var o=e._bin,a=s,l={},c=o.readUshort(n,s);s+=2,c>0&&(l.default=e._lctf.readLangSysTable(n,a+c));var u=o.readUshort(n,s);s+=2;for(var d=0;d<u;d++){var h=o.readASCII(n,s,4);s+=4;var p=o.readUshort(n,s);s+=2,l[h.trim()]=e._lctf.readLangSysTable(n,a+p)}return l},e._lctf.readLangSysTable=function(n,s){var o=e._bin,a={};o.readUshort(n,s),s+=2,a.reqFeature=o.readUshort(n,s),s+=2;var l=o.readUshort(n,s);return s+=2,a.features=o.readUshorts(n,s,l),a},e.CFF={},e.CFF.parse=function(n,s,o){var a=e._bin;(n=new Uint8Array(n.buffer,s,o))[s=0],n[++s],n[++s],n[++s],s++;var l=[];s=e.CFF.readIndex(n,s,l);for(var c=[],u=0;u<l.length-1;u++)c.push(a.readASCII(n,s+l[u],l[u+1]-l[u]));s+=l[l.length-1];var d=[];s=e.CFF.readIndex(n,s,d);var h=[];for(u=0;u<d.length-1;u++)h.push(e.CFF.readDict(n,s+d[u],s+d[u+1]));s+=d[d.length-1];var p=h[0],f=[];s=e.CFF.readIndex(n,s,f);var m=[];for(u=0;u<f.length-1;u++)m.push(a.readASCII(n,s+f[u],f[u+1]-f[u]));if(s+=f[f.length-1],e.CFF.readSubrs(n,s,p),p.CharStrings){s=p.CharStrings,f=[],s=e.CFF.readIndex(n,s,f);var g=[];for(u=0;u<f.length-1;u++)g.push(a.readBytes(n,s+f[u],f[u+1]-f[u]));p.CharStrings=g}if(p.ROS){s=p.FDArray;var v=[];for(s=e.CFF.readIndex(n,s,v),p.FDArray=[],u=0;u<v.length-1;u++){var x=e.CFF.readDict(n,s+v[u],s+v[u+1]);e.CFF._readFDict(n,x,m),p.FDArray.push(x)}s+=v[v.length-1],s=p.FDSelect,p.FDSelect=[];var b=n[s];if(s++,b!=3)throw b;var w=a.readUshort(n,s);for(s+=2,u=0;u<w+1;u++)p.FDSelect.push(a.readUshort(n,s),n[s+2]),s+=3}return p.Encoding&&(p.Encoding=e.CFF.readEncoding(n,p.Encoding,p.CharStrings.length)),p.charset&&(p.charset=e.CFF.readCharset(n,p.charset,p.CharStrings.length)),e.CFF._readFDict(n,p,m),p},e.CFF._readFDict=function(n,s,o){var a;for(var l in s.Private&&(a=s.Private[1],s.Private=e.CFF.readDict(n,a,a+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(n,a+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(l)!=-1&&(s[l]=o[s[l]-426+35])},e.CFF.readSubrs=function(n,s,o){var a=e._bin,l=[];s=e.CFF.readIndex(n,s,l);var c,u=l.length;c=u<1240?107:u<33900?1131:32768,o.Bias=c,o.Subrs=[];for(var d=0;d<l.length-1;d++)o.Subrs.push(a.readBytes(n,s+l[d],l[d+1]-l[d]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(n,s){for(var o=0;o<n.charset.length;o++)if(n.charset[o]==s)return o;return-1},e.CFF.glyphBySE=function(n,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(n,e.CFF.tableSE[s])},e.CFF.readEncoding=function(n,s,o){e._bin;var a=[".notdef"],l=n[s];if(s++,l!=0)throw"error: unknown encoding format: "+l;var c=n[s];s++;for(var u=0;u<c;u++)a.push(n[s+u]);return a},e.CFF.readCharset=function(n,s,o){var a=e._bin,l=[".notdef"],c=n[s];if(s++,c==0)for(var u=0;u<o;u++){var d=a.readUshort(n,s);s+=2,l.push(d)}else{if(c!=1&&c!=2)throw"error: format: "+c;for(;l.length<o;){d=a.readUshort(n,s),s+=2;var h=0;for(c==1?(h=n[s],s++):(h=a.readUshort(n,s),s+=2),u=0;u<=h;u++)l.push(d),d++}}return l},e.CFF.readIndex=function(n,s,o){var a=e._bin,l=a.readUshort(n,s)+1,c=n[s+=2];if(s++,c==1)for(var u=0;u<l;u++)o.push(n[s+u]);else if(c==2)for(u=0;u<l;u++)o.push(a.readUshort(n,s+2*u));else if(c==3)for(u=0;u<l;u++)o.push(16777215&a.readUint(n,s+3*u-1));else if(l!=1)throw"unsupported offset size: "+c+", count: "+l;return(s+=l*c)-1},e.CFF.getCharString=function(n,s,o){var a=e._bin,l=n[s],c=n[s+1];n[s+2],n[s+3],n[s+4];var u=1,d=null,h=null;l<=20&&(d=l,u=1),l==12&&(d=100*l+c,u=2),21<=l&&l<=27&&(d=l,u=1),l==28&&(h=a.readShort(n,s+1),u=3),29<=l&&l<=31&&(d=l,u=1),32<=l&&l<=246&&(h=l-139,u=1),247<=l&&l<=250&&(h=256*(l-247)+c+108,u=2),251<=l&&l<=254&&(h=256*-(l-251)-c-108,u=2),l==255&&(h=a.readInt(n,s+1)/65535,u=5),o.val=h??"o"+d,o.size=u},e.CFF.readCharString=function(n,s,o){for(var a=s+o,l=e._bin,c=[];s<a;){var u=n[s],d=n[s+1];n[s+2],n[s+3],n[s+4];var h=1,p=null,f=null;u<=20&&(p=u,h=1),u==12&&(p=100*u+d,h=2),u!=19&&u!=20||(p=u,h=2),21<=u&&u<=27&&(p=u,h=1),u==28&&(f=l.readShort(n,s+1),h=3),29<=u&&u<=31&&(p=u,h=1),32<=u&&u<=246&&(f=u-139,h=1),247<=u&&u<=250&&(f=256*(u-247)+d+108,h=2),251<=u&&u<=254&&(f=256*-(u-251)-d-108,h=2),u==255&&(f=l.readInt(n,s+1)/65535,h=5),c.push(f??"o"+p),s+=h}return c},e.CFF.readDict=function(n,s,o){for(var a=e._bin,l={},c=[];s<o;){var u=n[s],d=n[s+1];n[s+2],n[s+3],n[s+4];var h=1,p=null,f=null;if(u==28&&(f=a.readShort(n,s+1),h=3),u==29&&(f=a.readInt(n,s+1),h=5),32<=u&&u<=246&&(f=u-139,h=1),247<=u&&u<=250&&(f=256*(u-247)+d+108,h=2),251<=u&&u<=254&&(f=256*-(u-251)-d-108,h=2),u==255)throw f=a.readInt(n,s+1)/65535,h=5,"unknown number";if(u==30){var m=[];for(h=1;;){var g=n[s+h];h++;var v=g>>4,x=15&g;if(v!=15&&m.push(v),x!=15&&m.push(x),x==15)break}for(var b="",w=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],_=0;_<m.length;_++)b+=w[m[_]];f=parseFloat(b)}u<=21&&(p=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][u],h=1,u==12&&(p=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][d],h=2)),p!=null?(l[p]=c.length==1?c[0]:c,c=[]):c.push(f),s+=h}return l},e.cmap={},e.cmap.parse=function(n,s,o){n=new Uint8Array(n.buffer,s,o),s=0;var a=e._bin,l={};a.readUshort(n,s),s+=2;var c=a.readUshort(n,s);s+=2;var u=[];l.tables=[];for(var d=0;d<c;d++){var h=a.readUshort(n,s);s+=2;var p=a.readUshort(n,s);s+=2;var f=a.readUint(n,s);s+=4;var m="p"+h+"e"+p,g=u.indexOf(f);if(g==-1){var v;g=l.tables.length,u.push(f);var x=a.readUshort(n,f);x==0?v=e.cmap.parse0(n,f):x==4?v=e.cmap.parse4(n,f):x==6?v=e.cmap.parse6(n,f):x==12?v=e.cmap.parse12(n,f):console.debug("unknown format: "+x,h,p,f),l.tables.push(v)}if(l[m]!=null)throw"multiple tables for one platform+encoding";l[m]=g}return l},e.cmap.parse0=function(n,s){var o=e._bin,a={};a.format=o.readUshort(n,s),s+=2;var l=o.readUshort(n,s);s+=2,o.readUshort(n,s),s+=2,a.map=[];for(var c=0;c<l-6;c++)a.map.push(n[s+c]);return a},e.cmap.parse4=function(n,s){var o=e._bin,a=s,l={};l.format=o.readUshort(n,s),s+=2;var c=o.readUshort(n,s);s+=2,o.readUshort(n,s),s+=2;var u=o.readUshort(n,s);s+=2;var d=u/2;l.searchRange=o.readUshort(n,s),s+=2,l.entrySelector=o.readUshort(n,s),s+=2,l.rangeShift=o.readUshort(n,s),s+=2,l.endCount=o.readUshorts(n,s,d),s+=2*d,s+=2,l.startCount=o.readUshorts(n,s,d),s+=2*d,l.idDelta=[];for(var h=0;h<d;h++)l.idDelta.push(o.readShort(n,s)),s+=2;for(l.idRangeOffset=o.readUshorts(n,s,d),s+=2*d,l.glyphIdArray=[];s<a+c;)l.glyphIdArray.push(o.readUshort(n,s)),s+=2;return l},e.cmap.parse6=function(n,s){var o=e._bin,a={};a.format=o.readUshort(n,s),s+=2,o.readUshort(n,s),s+=2,o.readUshort(n,s),s+=2,a.firstCode=o.readUshort(n,s),s+=2;var l=o.readUshort(n,s);s+=2,a.glyphIdArray=[];for(var c=0;c<l;c++)a.glyphIdArray.push(o.readUshort(n,s)),s+=2;return a},e.cmap.parse12=function(n,s){var o=e._bin,a={};a.format=o.readUshort(n,s),s+=2,s+=2,o.readUint(n,s),s+=4,o.readUint(n,s),s+=4;var l=o.readUint(n,s);s+=4,a.groups=[];for(var c=0;c<l;c++){var u=s+12*c,d=o.readUint(n,u+0),h=o.readUint(n,u+4),p=o.readUint(n,u+8);a.groups.push([d,h,p])}return a},e.glyf={},e.glyf.parse=function(n,s,o,a){for(var l=[],c=0;c<a.maxp.numGlyphs;c++)l.push(null);return l},e.glyf._parseGlyf=function(n,s){var o=e._bin,a=n._data,l=e._tabOffset(a,"glyf",n._offset)+n.loca[s];if(n.loca[s]==n.loca[s+1])return null;var c={};if(c.noc=o.readShort(a,l),l+=2,c.xMin=o.readShort(a,l),l+=2,c.yMin=o.readShort(a,l),l+=2,c.xMax=o.readShort(a,l),l+=2,c.yMax=o.readShort(a,l),l+=2,c.xMin>=c.xMax||c.yMin>=c.yMax)return null;if(c.noc>0){c.endPts=[];for(var u=0;u<c.noc;u++)c.endPts.push(o.readUshort(a,l)),l+=2;var d=o.readUshort(a,l);if(l+=2,a.length-l<d)return null;c.instructions=o.readBytes(a,l,d),l+=d;var h=c.endPts[c.noc-1]+1;for(c.flags=[],u=0;u<h;u++){var p=a[l];if(l++,c.flags.push(p),(8&p)!=0){var f=a[l];l++;for(var m=0;m<f;m++)c.flags.push(p),u++}}for(c.xs=[],u=0;u<h;u++){var g=(2&c.flags[u])!=0,v=(16&c.flags[u])!=0;g?(c.xs.push(v?a[l]:-a[l]),l++):v?c.xs.push(0):(c.xs.push(o.readShort(a,l)),l+=2)}for(c.ys=[],u=0;u<h;u++)g=(4&c.flags[u])!=0,v=(32&c.flags[u])!=0,g?(c.ys.push(v?a[l]:-a[l]),l++):v?c.ys.push(0):(c.ys.push(o.readShort(a,l)),l+=2);var x=0,b=0;for(u=0;u<h;u++)x+=c.xs[u],b+=c.ys[u],c.xs[u]=x,c.ys[u]=b}else{var w;c.parts=[];do{w=o.readUshort(a,l),l+=2;var _={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(c.parts.push(_),_.glyphIndex=o.readUshort(a,l),l+=2,1&w){var S=o.readShort(a,l);l+=2;var T=o.readShort(a,l);l+=2}else S=o.readInt8(a,l),l++,T=o.readInt8(a,l),l++;2&w?(_.m.tx=S,_.m.ty=T):(_.p1=S,_.p2=T),8&w?(_.m.a=_.m.d=o.readF2dot14(a,l),l+=2):64&w?(_.m.a=o.readF2dot14(a,l),l+=2,_.m.d=o.readF2dot14(a,l),l+=2):128&w&&(_.m.a=o.readF2dot14(a,l),l+=2,_.m.b=o.readF2dot14(a,l),l+=2,_.m.c=o.readF2dot14(a,l),l+=2,_.m.d=o.readF2dot14(a,l),l+=2)}while(32&w);if(256&w){var M=o.readUshort(a,l);for(l+=2,c.instr=[],u=0;u<M;u++)c.instr.push(a[l]),l++}}return c},e.GPOS={},e.GPOS.parse=function(n,s,o,a){return e._lctf.parse(n,s,o,a,e.GPOS.subt)},e.GPOS.subt=function(n,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(n,o),o+=2,s==1||s==2||s==3||s==7||s==8&&u.fmt<=2){var d=l.readUshort(n,o);o+=2,u.coverage=e._lctf.readCoverage(n,d+c)}if(s==1&&u.fmt==1){var h=l.readUshort(n,o);o+=2;var p=e._lctf.numOfOnes(h);h!=0&&(u.pos=e.GPOS.readValueRecord(n,o,h))}else if(s==2&&u.fmt>=1&&u.fmt<=2){h=l.readUshort(n,o),o+=2;var f=l.readUshort(n,o);o+=2,p=e._lctf.numOfOnes(h);var m=e._lctf.numOfOnes(f);if(u.fmt==1){u.pairsets=[];var g=l.readUshort(n,o);o+=2;for(var v=0;v<g;v++){var x=c+l.readUshort(n,o);o+=2;var b=l.readUshort(n,x);x+=2;for(var w=[],_=0;_<b;_++){var S=l.readUshort(n,x);x+=2,h!=0&&(A=e.GPOS.readValueRecord(n,x,h),x+=2*p),f!=0&&(N=e.GPOS.readValueRecord(n,x,f),x+=2*m),w.push({gid2:S,val1:A,val2:N})}u.pairsets.push(w)}}if(u.fmt==2){var T=l.readUshort(n,o);o+=2;var M=l.readUshort(n,o);o+=2;var E=l.readUshort(n,o);o+=2;var C=l.readUshort(n,o);for(o+=2,u.classDef1=e._lctf.readClassDef(n,c+T),u.classDef2=e._lctf.readClassDef(n,c+M),u.matrix=[],v=0;v<E;v++){var P=[];for(_=0;_<C;_++){var A=null,N=null;h!=0&&(A=e.GPOS.readValueRecord(n,o,h),o+=2*p),f!=0&&(N=e.GPOS.readValueRecord(n,o,f),o+=2*m),P.push({val1:A,val2:N})}u.matrix.push(P)}}}else{if(s==9&&u.fmt==1){var R=l.readUshort(n,o);o+=2;var F=l.readUint(n,o);if(o+=4,a.ltype==9)a.ltype=R;else if(a.ltype!=R)throw"invalid extension substitution";return e.GPOS.subt(n,a.ltype,c+F)}console.debug("unsupported GPOS table LookupType",s,"format",u.fmt)}return u},e.GPOS.readValueRecord=function(n,s,o){var a=e._bin,l=[];return l.push(1&o?a.readShort(n,s):0),s+=1&o?2:0,l.push(2&o?a.readShort(n,s):0),s+=2&o?2:0,l.push(4&o?a.readShort(n,s):0),s+=4&o?2:0,l.push(8&o?a.readShort(n,s):0),s+=8&o?2:0,l},e.GSUB={},e.GSUB.parse=function(n,s,o,a){return e._lctf.parse(n,s,o,a,e.GSUB.subt)},e.GSUB.subt=function(n,s,o,a){var l=e._bin,c=o,u={};if(u.fmt=l.readUshort(n,o),o+=2,s!=1&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==4||s==5&&u.fmt<=2||s==6&&u.fmt<=2){var d=l.readUshort(n,o);o+=2,u.coverage=e._lctf.readCoverage(n,c+d)}if(s==1&&u.fmt>=1&&u.fmt<=2){if(u.fmt==1)u.delta=l.readShort(n,o),o+=2;else if(u.fmt==2){var h=l.readUshort(n,o);o+=2,u.newg=l.readUshorts(n,o,h),o+=2*u.newg.length}}else if(s==4){u.vals=[],h=l.readUshort(n,o),o+=2;for(var p=0;p<h;p++){var f=l.readUshort(n,o);o+=2,u.vals.push(e.GSUB.readLigatureSet(n,c+f))}}else if(s==5&&u.fmt==2){if(u.fmt==2){var m=l.readUshort(n,o);o+=2,u.cDef=e._lctf.readClassDef(n,c+m),u.scset=[];var g=l.readUshort(n,o);for(o+=2,p=0;p<g;p++){var v=l.readUshort(n,o);o+=2,u.scset.push(v==0?null:e.GSUB.readSubClassSet(n,c+v))}}}else if(s==6&&u.fmt==3){if(u.fmt==3){for(p=0;p<3;p++){h=l.readUshort(n,o),o+=2;for(var x=[],b=0;b<h;b++)x.push(e._lctf.readCoverage(n,c+l.readUshort(n,o+2*b)));o+=2*h,p==0&&(u.backCvg=x),p==1&&(u.inptCvg=x),p==2&&(u.ahedCvg=x)}h=l.readUshort(n,o),o+=2,u.lookupRec=e.GSUB.readSubstLookupRecords(n,o,h)}}else{if(s==7&&u.fmt==1){var w=l.readUshort(n,o);o+=2;var _=l.readUint(n,o);if(o+=4,a.ltype==9)a.ltype=w;else if(a.ltype!=w)throw"invalid extension substitution";return e.GSUB.subt(n,a.ltype,c+_)}console.debug("unsupported GSUB table LookupType",s,"format",u.fmt)}return u},e.GSUB.readSubClassSet=function(n,s){var o=e._bin.readUshort,a=s,l=[],c=o(n,s);s+=2;for(var u=0;u<c;u++){var d=o(n,s);s+=2,l.push(e.GSUB.readSubClassRule(n,a+d))}return l},e.GSUB.readSubClassRule=function(n,s){var o=e._bin.readUshort,a={},l=o(n,s),c=o(n,s+=2);s+=2,a.input=[];for(var u=0;u<l-1;u++)a.input.push(o(n,s)),s+=2;return a.substLookupRecords=e.GSUB.readSubstLookupRecords(n,s,c),a},e.GSUB.readSubstLookupRecords=function(n,s,o){for(var a=e._bin.readUshort,l=[],c=0;c<o;c++)l.push(a(n,s),a(n,s+2)),s+=4;return l},e.GSUB.readChainSubClassSet=function(n,s){var o=e._bin,a=s,l=[],c=o.readUshort(n,s);s+=2;for(var u=0;u<c;u++){var d=o.readUshort(n,s);s+=2,l.push(e.GSUB.readChainSubClassRule(n,a+d))}return l},e.GSUB.readChainSubClassRule=function(n,s){for(var o=e._bin,a={},l=["backtrack","input","lookahead"],c=0;c<l.length;c++){var u=o.readUshort(n,s);s+=2,c==1&&u--,a[l[c]]=o.readUshorts(n,s,u),s+=2*a[l[c]].length}return u=o.readUshort(n,s),s+=2,a.subst=o.readUshorts(n,s,2*u),s+=2*a.subst.length,a},e.GSUB.readLigatureSet=function(n,s){var o=e._bin,a=s,l=[],c=o.readUshort(n,s);s+=2;for(var u=0;u<c;u++){var d=o.readUshort(n,s);s+=2,l.push(e.GSUB.readLigature(n,a+d))}return l},e.GSUB.readLigature=function(n,s){var o=e._bin,a={chain:[]};a.nglyph=o.readUshort(n,s),s+=2;var l=o.readUshort(n,s);s+=2;for(var c=0;c<l-1;c++)a.chain.push(o.readUshort(n,s)),s+=2;return a},e.head={},e.head.parse=function(n,s,o){var a=e._bin,l={};return a.readFixed(n,s),s+=4,l.fontRevision=a.readFixed(n,s),s+=4,a.readUint(n,s),s+=4,a.readUint(n,s),s+=4,l.flags=a.readUshort(n,s),s+=2,l.unitsPerEm=a.readUshort(n,s),s+=2,l.created=a.readUint64(n,s),s+=8,l.modified=a.readUint64(n,s),s+=8,l.xMin=a.readShort(n,s),s+=2,l.yMin=a.readShort(n,s),s+=2,l.xMax=a.readShort(n,s),s+=2,l.yMax=a.readShort(n,s),s+=2,l.macStyle=a.readUshort(n,s),s+=2,l.lowestRecPPEM=a.readUshort(n,s),s+=2,l.fontDirectionHint=a.readShort(n,s),s+=2,l.indexToLocFormat=a.readShort(n,s),s+=2,l.glyphDataFormat=a.readShort(n,s),s+=2,l},e.hhea={},e.hhea.parse=function(n,s,o){var a=e._bin,l={};return a.readFixed(n,s),s+=4,l.ascender=a.readShort(n,s),s+=2,l.descender=a.readShort(n,s),s+=2,l.lineGap=a.readShort(n,s),s+=2,l.advanceWidthMax=a.readUshort(n,s),s+=2,l.minLeftSideBearing=a.readShort(n,s),s+=2,l.minRightSideBearing=a.readShort(n,s),s+=2,l.xMaxExtent=a.readShort(n,s),s+=2,l.caretSlopeRise=a.readShort(n,s),s+=2,l.caretSlopeRun=a.readShort(n,s),s+=2,l.caretOffset=a.readShort(n,s),s+=2,s+=8,l.metricDataFormat=a.readShort(n,s),s+=2,l.numberOfHMetrics=a.readUshort(n,s),s+=2,l},e.hmtx={},e.hmtx.parse=function(n,s,o,a){for(var l=e._bin,c={aWidth:[],lsBearing:[]},u=0,d=0,h=0;h<a.maxp.numGlyphs;h++)h<a.hhea.numberOfHMetrics&&(u=l.readUshort(n,s),s+=2,d=l.readShort(n,s),s+=2),c.aWidth.push(u),c.lsBearing.push(d);return c},e.kern={},e.kern.parse=function(n,s,o,a){var l=e._bin,c=l.readUshort(n,s);if(s+=2,c==1)return e.kern.parseV1(n,s-2,o,a);var u=l.readUshort(n,s);s+=2;for(var d={glyph1:[],rval:[]},h=0;h<u;h++){s+=2,o=l.readUshort(n,s),s+=2;var p=l.readUshort(n,s);s+=2;var f=p>>>8;if((f&=15)!=0)throw"unknown kern table format: "+f;s=e.kern.readFormat0(n,s,d)}return d},e.kern.parseV1=function(n,s,o,a){var l=e._bin;l.readFixed(n,s),s+=4;var c=l.readUint(n,s);s+=4;for(var u={glyph1:[],rval:[]},d=0;d<c;d++){l.readUint(n,s),s+=4;var h=l.readUshort(n,s);s+=2,l.readUshort(n,s),s+=2;var p=h>>>8;if((p&=15)!=0)throw"unknown kern table format: "+p;s=e.kern.readFormat0(n,s,u)}return u},e.kern.readFormat0=function(n,s,o){var a=e._bin,l=-1,c=a.readUshort(n,s);s+=2,a.readUshort(n,s),s+=2,a.readUshort(n,s),s+=2,a.readUshort(n,s),s+=2;for(var u=0;u<c;u++){var d=a.readUshort(n,s);s+=2;var h=a.readUshort(n,s);s+=2;var p=a.readShort(n,s);s+=2,d!=l&&(o.glyph1.push(d),o.rval.push({glyph2:[],vals:[]}));var f=o.rval[o.rval.length-1];f.glyph2.push(h),f.vals.push(p),l=d}return s},e.loca={},e.loca.parse=function(n,s,o,a){var l=e._bin,c=[],u=a.head.indexToLocFormat,d=a.maxp.numGlyphs+1;if(u==0)for(var h=0;h<d;h++)c.push(l.readUshort(n,s+(h<<1))<<1);if(u==1)for(h=0;h<d;h++)c.push(l.readUint(n,s+(h<<2)));return c},e.maxp={},e.maxp.parse=function(n,s,o){var a=e._bin,l={},c=a.readUint(n,s);return s+=4,l.numGlyphs=a.readUshort(n,s),s+=2,c==65536&&(l.maxPoints=a.readUshort(n,s),s+=2,l.maxContours=a.readUshort(n,s),s+=2,l.maxCompositePoints=a.readUshort(n,s),s+=2,l.maxCompositeContours=a.readUshort(n,s),s+=2,l.maxZones=a.readUshort(n,s),s+=2,l.maxTwilightPoints=a.readUshort(n,s),s+=2,l.maxStorage=a.readUshort(n,s),s+=2,l.maxFunctionDefs=a.readUshort(n,s),s+=2,l.maxInstructionDefs=a.readUshort(n,s),s+=2,l.maxStackElements=a.readUshort(n,s),s+=2,l.maxSizeOfInstructions=a.readUshort(n,s),s+=2,l.maxComponentElements=a.readUshort(n,s),s+=2,l.maxComponentDepth=a.readUshort(n,s),s+=2),l},e.name={},e.name.parse=function(n,s,o){var a=e._bin,l={};a.readUshort(n,s),s+=2;var c=a.readUshort(n,s);s+=2,a.readUshort(n,s);for(var u,d=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],h=s+=2,p=0;p<c;p++){var f=a.readUshort(n,s);s+=2;var m=a.readUshort(n,s);s+=2;var g=a.readUshort(n,s);s+=2;var v=a.readUshort(n,s);s+=2;var x=a.readUshort(n,s);s+=2;var b=a.readUshort(n,s);s+=2;var w,_=d[v],S=h+12*c+b;if(f==0)w=a.readUnicode(n,S,x/2);else if(f==3&&m==0)w=a.readUnicode(n,S,x/2);else if(m==0)w=a.readASCII(n,S,x);else if(m==1)w=a.readUnicode(n,S,x/2);else if(m==3)w=a.readUnicode(n,S,x/2);else{if(f!=1)throw"unknown encoding "+m+", platformID: "+f;w=a.readASCII(n,S,x),console.debug("reading unknown MAC encoding "+m+" as ASCII")}var T="p"+f+","+g.toString(16);l[T]==null&&(l[T]={}),l[T][_!==void 0?_:v]=w,l[T]._lang=g}for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==1033)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==0)return l[M];for(var M in l)if(l[M].postScriptName!=null&&l[M]._lang==3084)return l[M];for(var M in l)if(l[M].postScriptName!=null)return l[M];for(var M in l){u=M;break}return console.debug("returning name table with languageID "+l[u]._lang),l[u]},e["OS/2"]={},e["OS/2"].parse=function(n,s,o){var a=e._bin.readUshort(n,s);s+=2;var l={};if(a==0)e["OS/2"].version0(n,s,l);else if(a==1)e["OS/2"].version1(n,s,l);else if(a==2||a==3||a==4)e["OS/2"].version2(n,s,l);else{if(a!=5)throw"unknown OS/2 table version: "+a;e["OS/2"].version5(n,s,l)}return l},e["OS/2"].version0=function(n,s,o){var a=e._bin;return o.xAvgCharWidth=a.readShort(n,s),s+=2,o.usWeightClass=a.readUshort(n,s),s+=2,o.usWidthClass=a.readUshort(n,s),s+=2,o.fsType=a.readUshort(n,s),s+=2,o.ySubscriptXSize=a.readShort(n,s),s+=2,o.ySubscriptYSize=a.readShort(n,s),s+=2,o.ySubscriptXOffset=a.readShort(n,s),s+=2,o.ySubscriptYOffset=a.readShort(n,s),s+=2,o.ySuperscriptXSize=a.readShort(n,s),s+=2,o.ySuperscriptYSize=a.readShort(n,s),s+=2,o.ySuperscriptXOffset=a.readShort(n,s),s+=2,o.ySuperscriptYOffset=a.readShort(n,s),s+=2,o.yStrikeoutSize=a.readShort(n,s),s+=2,o.yStrikeoutPosition=a.readShort(n,s),s+=2,o.sFamilyClass=a.readShort(n,s),s+=2,o.panose=a.readBytes(n,s,10),s+=10,o.ulUnicodeRange1=a.readUint(n,s),s+=4,o.ulUnicodeRange2=a.readUint(n,s),s+=4,o.ulUnicodeRange3=a.readUint(n,s),s+=4,o.ulUnicodeRange4=a.readUint(n,s),s+=4,o.achVendID=[a.readInt8(n,s),a.readInt8(n,s+1),a.readInt8(n,s+2),a.readInt8(n,s+3)],s+=4,o.fsSelection=a.readUshort(n,s),s+=2,o.usFirstCharIndex=a.readUshort(n,s),s+=2,o.usLastCharIndex=a.readUshort(n,s),s+=2,o.sTypoAscender=a.readShort(n,s),s+=2,o.sTypoDescender=a.readShort(n,s),s+=2,o.sTypoLineGap=a.readShort(n,s),s+=2,o.usWinAscent=a.readUshort(n,s),s+=2,o.usWinDescent=a.readUshort(n,s),s+=2},e["OS/2"].version1=function(n,s,o){var a=e._bin;return s=e["OS/2"].version0(n,s,o),o.ulCodePageRange1=a.readUint(n,s),s+=4,o.ulCodePageRange2=a.readUint(n,s),s+=4},e["OS/2"].version2=function(n,s,o){var a=e._bin;return s=e["OS/2"].version1(n,s,o),o.sxHeight=a.readShort(n,s),s+=2,o.sCapHeight=a.readShort(n,s),s+=2,o.usDefault=a.readUshort(n,s),s+=2,o.usBreak=a.readUshort(n,s),s+=2,o.usMaxContext=a.readUshort(n,s),s+=2},e["OS/2"].version5=function(n,s,o){var a=e._bin;return s=e["OS/2"].version2(n,s,o),o.usLowerOpticalPointSize=a.readUshort(n,s),s+=2,o.usUpperOpticalPointSize=a.readUshort(n,s),s+=2},e.post={},e.post.parse=function(n,s,o){var a=e._bin,l={};return l.version=a.readFixed(n,s),s+=4,l.italicAngle=a.readFixed(n,s),s+=4,l.underlinePosition=a.readShort(n,s),s+=2,l.underlineThickness=a.readShort(n,s),s+=2,l},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(n,s){var o=n.cmap,a=-1;if(o.p0e4!=null?a=o.p0e4:o.p3e1!=null?a=o.p3e1:o.p1e0!=null?a=o.p1e0:o.p0e3!=null&&(a=o.p0e3),a==-1)throw"no familiar platform and encoding!";var l=o.tables[a];if(l.format==0)return s>=l.map.length?0:l.map[s];if(l.format==4){for(var c=-1,u=0;u<l.endCount.length;u++)if(s<=l.endCount[u]){c=u;break}return c==-1||l.startCount[c]>s?0:65535&(l.idRangeOffset[c]!=0?l.glyphIdArray[s-l.startCount[c]+(l.idRangeOffset[c]>>1)-(l.idRangeOffset.length-c)]:s+l.idDelta[c])}if(l.format==12){if(s>l.groups[l.groups.length-1][1])return 0;for(u=0;u<l.groups.length;u++){var d=l.groups[u];if(d[0]<=s&&s<=d[1])return d[2]+(s-d[0])}return 0}throw"unknown cmap table format "+l.format},e.U.glyphToPath=function(n,s){var o={cmds:[],crds:[]};if(n.SVG&&n.SVG.entries[s]){var a=n.SVG.entries[s];return a==null?o:(typeof a=="string"&&(a=e.SVG.toPath(a),n.SVG.entries[s]=a),a)}if(n.CFF){var l={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:n.CFF.Private?n.CFF.Private.defaultWidthX:0,open:!1},c=n.CFF,u=n.CFF.Private;if(c.ROS){for(var d=0;c.FDSelect[d+2]<=s;)d+=2;u=c.FDArray[c.FDSelect[d+1]].Private}e.U._drawCFF(n.CFF.CharStrings[s],l,c,u,o)}else n.glyf&&e.U._drawGlyf(s,n,o);return o},e.U._drawGlyf=function(n,s,o){var a=s.glyf[n];a==null&&(a=s.glyf[n]=e.glyf._parseGlyf(s,n)),a!=null&&(a.noc>-1?e.U._simpleGlyph(a,o):e.U._compoGlyph(a,s,o))},e.U._simpleGlyph=function(n,s){for(var o=0;o<n.noc;o++){for(var a=o==0?0:n.endPts[o-1]+1,l=n.endPts[o],c=a;c<=l;c++){var u=c==a?l:c-1,d=c==l?a:c+1,h=1&n.flags[c],p=1&n.flags[u],f=1&n.flags[d],m=n.xs[c],g=n.ys[c];if(c==a)if(h){if(!p){e.U.P.moveTo(s,m,g);continue}e.U.P.moveTo(s,n.xs[u],n.ys[u])}else p?e.U.P.moveTo(s,n.xs[u],n.ys[u]):e.U.P.moveTo(s,(n.xs[u]+m)/2,(n.ys[u]+g)/2);h?p&&e.U.P.lineTo(s,m,g):f?e.U.P.qcurveTo(s,m,g,n.xs[d],n.ys[d]):e.U.P.qcurveTo(s,m,g,(m+n.xs[d])/2,(g+n.ys[d])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(n,s,o){for(var a=0;a<n.parts.length;a++){var l={cmds:[],crds:[]},c=n.parts[a];e.U._drawGlyf(c.glyphIndex,s,l);for(var u=c.m,d=0;d<l.crds.length;d+=2){var h=l.crds[d],p=l.crds[d+1];o.crds.push(h*u.a+p*u.b+u.tx),o.crds.push(h*u.c+p*u.d+u.ty)}for(d=0;d<l.cmds.length;d++)o.cmds.push(l.cmds[d])}},e.U._getGlyphClass=function(n,s){var o=e._lctf.getInterval(s,n);return o==-1?0:s[o+2]},e.U.getPairAdjustment=function(n,s,o){var a=!1;if(n.GPOS)for(var l=n.GPOS,c=l.lookupList,u=l.featureList,d=[],h=0;h<u.length;h++){var p=u[h];if(p.tag=="kern"){a=!0;for(var f=0;f<p.tab.length;f++)if(!d[p.tab[f]]){d[p.tab[f]]=!0;for(var m=c[p.tab[f]],g=0;g<m.tabs.length;g++)if(m.tabs[g]!=null){var v,x=m.tabs[g];if((!x.coverage||(v=e._lctf.coverageIndex(x.coverage,s))!=-1)&&m.ltype!=1&&m.ltype==2){var b=null;if(x.fmt==1){var w=x.pairsets[v];for(h=0;h<w.length;h++)w[h].gid2==o&&(b=w[h])}else if(x.fmt==2){var _=e.U._getGlyphClass(s,x.classDef1),S=e.U._getGlyphClass(o,x.classDef2);b=x.matrix[_][S]}if(b){var T=0;return b.val1&&b.val1[2]&&(T+=b.val1[2]),b.val2&&b.val2[0]&&(T+=b.val2[0]),T}}}}}}if(n.kern&&!a){var M=n.kern.glyph1.indexOf(s);if(M!=-1){var E=n.kern.rval[M].glyph2.indexOf(o);if(E!=-1)return n.kern.rval[M].vals[E]}}return 0},e.U._applySubs=function(n,s,o,a){for(var l=n.length-s-1,c=0;c<o.tabs.length;c++)if(o.tabs[c]!=null){var u,d=o.tabs[c];if(!d.coverage||(u=e._lctf.coverageIndex(d.coverage,n[s]))!=-1){if(o.ltype==1)n[s],d.fmt==1?n[s]=n[s]+d.delta:n[s]=d.newg[u];else if(o.ltype==4)for(var h=d.vals[u],p=0;p<h.length;p++){var f=h[p],m=f.chain.length;if(!(m>l)){for(var g=!0,v=0,x=0;x<m;x++){for(;n[s+v+(1+x)]==-1;)v++;f.chain[x]!=n[s+v+(1+x)]&&(g=!1)}if(g){for(n[s]=f.nglyph,x=0;x<m+v;x++)n[s+x+1]=-1;break}}}else if(o.ltype==5&&d.fmt==2)for(var b=e._lctf.getInterval(d.cDef,n[s]),w=d.cDef[b+2],_=d.scset[w],S=0;S<_.length;S++){var T=_[S],M=T.input;if(!(M.length>l)){for(g=!0,x=0;x<M.length;x++){var E=e._lctf.getInterval(d.cDef,n[s+1+x]);if(b==-1&&d.cDef[E+2]!=M[x]){g=!1;break}}if(g){var C=T.substLookupRecords;for(p=0;p<C.length;p+=2)C[p],C[p+1]}}}else if(o.ltype==6&&d.fmt==3){if(!e.U._glsCovered(n,d.backCvg,s-d.backCvg.length)||!e.U._glsCovered(n,d.inptCvg,s)||!e.U._glsCovered(n,d.ahedCvg,s+d.inptCvg.length))continue;var P=d.lookupRec;for(S=0;S<P.length;S+=2){b=P[S];var A=a[P[S+1]];e.U._applySubs(n,s+b,A,a)}}}}},e.U._glsCovered=function(n,s,o){for(var a=0;a<s.length;a++)if(e._lctf.coverageIndex(s[a],n[o+a])==-1)return!1;return!0},e.U.glyphsToPath=function(n,s,o){for(var a={cmds:[],crds:[]},l=0,c=0;c<s.length;c++){var u=s[c];if(u!=-1){for(var d=c<s.length-1&&s[c+1]!=-1?s[c+1]:0,h=e.U.glyphToPath(n,u),p=0;p<h.crds.length;p+=2)a.crds.push(h.crds[p]+l),a.crds.push(h.crds[p+1]);for(o&&a.cmds.push(o),p=0;p<h.cmds.length;p++)a.cmds.push(h.cmds[p]);o&&a.cmds.push("X"),l+=n.hmtx.aWidth[u],c<s.length-1&&(l+=e.U.getPairAdjustment(n,u,d))}}return a},e.U.P={},e.U.P.moveTo=function(n,s,o){n.cmds.push("M"),n.crds.push(s,o)},e.U.P.lineTo=function(n,s,o){n.cmds.push("L"),n.crds.push(s,o)},e.U.P.curveTo=function(n,s,o,a,l,c,u){n.cmds.push("C"),n.crds.push(s,o,a,l,c,u)},e.U.P.qcurveTo=function(n,s,o,a,l){n.cmds.push("Q"),n.crds.push(s,o,a,l)},e.U.P.closePath=function(n){n.cmds.push("Z")},e.U._drawCFF=function(n,s,o,a,l){for(var c=s.stack,u=s.nStems,d=s.haveWidth,h=s.width,p=s.open,f=0,m=s.x,g=s.y,v=0,x=0,b=0,w=0,_=0,S=0,T=0,M=0,E=0,C=0,P={val:0,size:0};f<n.length;){e.CFF.getCharString(n,f,P);var A=P.val;if(f+=P.size,A=="o1"||A=="o18")c.length%2!=0&&!d&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0;else if(A=="o3"||A=="o23")c.length%2!=0&&!d&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0;else if(A=="o4")c.length>1&&!d&&(h=c.shift()+a.nominalWidthX,d=!0),p&&e.U.P.closePath(l),g+=c.pop(),e.U.P.moveTo(l,m,g),p=!0;else if(A=="o5")for(;c.length>0;)m+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,m,g);else if(A=="o6"||A=="o7")for(var N=c.length,R=A=="o6",F=0;F<N;F++){var B=c.shift();R?m+=B:g+=B,R=!R,e.U.P.lineTo(l,m,g)}else if(A=="o8"||A=="o24"){N=c.length;for(var k=0;k+6<=N;)v=m+c.shift(),x=g+c.shift(),b=v+c.shift(),w=x+c.shift(),m=b+c.shift(),g=w+c.shift(),e.U.P.curveTo(l,v,x,b,w,m,g),k+=6;A=="o24"&&(m+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,m,g))}else{if(A=="o11")break;if(A=="o1234"||A=="o1235"||A=="o1236"||A=="o1237")A=="o1234"&&(x=g,b=(v=m+c.shift())+c.shift(),C=w=x+c.shift(),S=w,M=g,m=(T=(_=(E=b+c.shift())+c.shift())+c.shift())+c.shift(),e.U.P.curveTo(l,v,x,b,w,E,C),e.U.P.curveTo(l,_,S,T,M,m,g)),A=="o1235"&&(v=m+c.shift(),x=g+c.shift(),b=v+c.shift(),w=x+c.shift(),E=b+c.shift(),C=w+c.shift(),_=E+c.shift(),S=C+c.shift(),T=_+c.shift(),M=S+c.shift(),m=T+c.shift(),g=M+c.shift(),c.shift(),e.U.P.curveTo(l,v,x,b,w,E,C),e.U.P.curveTo(l,_,S,T,M,m,g)),A=="o1236"&&(v=m+c.shift(),x=g+c.shift(),b=v+c.shift(),C=w=x+c.shift(),S=w,T=(_=(E=b+c.shift())+c.shift())+c.shift(),M=S+c.shift(),m=T+c.shift(),e.U.P.curveTo(l,v,x,b,w,E,C),e.U.P.curveTo(l,_,S,T,M,m,g)),A=="o1237"&&(v=m+c.shift(),x=g+c.shift(),b=v+c.shift(),w=x+c.shift(),E=b+c.shift(),C=w+c.shift(),_=E+c.shift(),S=C+c.shift(),T=_+c.shift(),M=S+c.shift(),Math.abs(T-m)>Math.abs(M-g)?m=T+c.shift():g=M+c.shift(),e.U.P.curveTo(l,v,x,b,w,E,C),e.U.P.curveTo(l,_,S,T,M,m,g));else if(A=="o14"){if(c.length>0&&!d&&(h=c.shift()+o.nominalWidthX,d=!0),c.length==4){var z=c.shift(),O=c.shift(),V=c.shift(),U=c.shift(),G=e.CFF.glyphBySE(o,V),X=e.CFF.glyphBySE(o,U);e.U._drawCFF(o.CharStrings[G],s,o,a,l),s.x=z,s.y=O,e.U._drawCFF(o.CharStrings[X],s,o,a,l)}p&&(e.U.P.closePath(l),p=!1)}else if(A=="o19"||A=="o20")c.length%2!=0&&!d&&(h=c.shift()+a.nominalWidthX),u+=c.length>>1,c.length=0,d=!0,f+=u+7>>3;else if(A=="o21")c.length>2&&!d&&(h=c.shift()+a.nominalWidthX,d=!0),g+=c.pop(),m+=c.pop(),p&&e.U.P.closePath(l),e.U.P.moveTo(l,m,g),p=!0;else if(A=="o22")c.length>1&&!d&&(h=c.shift()+a.nominalWidthX,d=!0),m+=c.pop(),p&&e.U.P.closePath(l),e.U.P.moveTo(l,m,g),p=!0;else if(A=="o25"){for(;c.length>6;)m+=c.shift(),g+=c.shift(),e.U.P.lineTo(l,m,g);v=m+c.shift(),x=g+c.shift(),b=v+c.shift(),w=x+c.shift(),m=b+c.shift(),g=w+c.shift(),e.U.P.curveTo(l,v,x,b,w,m,g)}else if(A=="o26")for(c.length%2&&(m+=c.shift());c.length>0;)v=m,x=g+c.shift(),m=b=v+c.shift(),g=(w=x+c.shift())+c.shift(),e.U.P.curveTo(l,v,x,b,w,m,g);else if(A=="o27")for(c.length%2&&(g+=c.shift());c.length>0;)x=g,b=(v=m+c.shift())+c.shift(),w=x+c.shift(),m=b+c.shift(),g=w,e.U.P.curveTo(l,v,x,b,w,m,g);else if(A=="o10"||A=="o29"){var ie=A=="o10"?a:o;if(c.length==0)console.debug("error: empty stack");else{var se=c.pop(),de=ie.Subrs[se+ie.Bias];s.x=m,s.y=g,s.nStems=u,s.haveWidth=d,s.width=h,s.open=p,e.U._drawCFF(de,s,o,a,l),m=s.x,g=s.y,u=s.nStems,d=s.haveWidth,h=s.width,p=s.open}}else if(A=="o30"||A=="o31"){var K=c.length,q=(k=0,A=="o31");for(k+=K-(N=-3&K);k<N;)q?(x=g,b=(v=m+c.shift())+c.shift(),g=(w=x+c.shift())+c.shift(),N-k==5?(m=b+c.shift(),k++):m=b,q=!1):(v=m,x=g+c.shift(),b=v+c.shift(),w=x+c.shift(),m=b+c.shift(),N-k==5?(g=w+c.shift(),k++):g=w,q=!0),e.U.P.curveTo(l,v,x,b,w,m,g),k+=4}else{if((A+"").charAt(0)=="o")throw console.debug("Unknown operation: "+A,n),A;c.push(A)}}}s.x=m,s.y=g,s.nStems=u,s.haveWidth=d,s.width=h,s.open=p};var t=e,i={Typr:t};return r.Typr=t,r.default=i,Object.defineProperty(r,"__esModule",{value:!0}),r}({}).Typr}function IVe(){return function(r){var e=Uint8Array,t=Uint16Array,i=Uint32Array,n=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(A,N){for(var R=new t(31),F=0;F<31;++F)R[F]=N+=1<<A[F-1];var B=new i(R[30]);for(F=1;F<30;++F)for(var k=R[F];k<R[F+1];++k)B[k]=k-R[F]<<5|F;return[R,B]},l=a(n,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var d=a(s,0)[0],h=new t(32768),p=0;p<32768;++p){var f=(43690&p)>>>1|(21845&p)<<1;f=(61680&(f=(52428&f)>>>2|(13107&f)<<2))>>>4|(3855&f)<<4,h[p]=((65280&f)>>>8|(255&f)<<8)>>>1}var m=function(A,N,R){for(var F=A.length,B=0,k=new t(N);B<F;++B)++k[A[B]-1];var z,O=new t(N);for(B=0;B<N;++B)O[B]=O[B-1]+k[B-1]<<1;if(R){z=new t(1<<N);var V=15-N;for(B=0;B<F;++B)if(A[B])for(var U=B<<4|A[B],G=N-A[B],X=O[A[B]-1]++<<G,ie=X|(1<<G)-1;X<=ie;++X)z[h[X]>>>V]=U}else for(z=new t(F),B=0;B<F;++B)A[B]&&(z[B]=h[O[A[B]-1]++]>>>15-A[B]);return z},g=new e(288);for(p=0;p<144;++p)g[p]=8;for(p=144;p<256;++p)g[p]=9;for(p=256;p<280;++p)g[p]=7;for(p=280;p<288;++p)g[p]=8;var v=new e(32);for(p=0;p<32;++p)v[p]=5;var x=m(g,9,1),b=m(v,5,1),w=function(A){for(var N=A[0],R=1;R<A.length;++R)A[R]>N&&(N=A[R]);return N},_=function(A,N,R){var F=N/8|0;return(A[F]|A[F+1]<<8)>>(7&N)&R},S=function(A,N){var R=N/8|0;return(A[R]|A[R+1]<<8|A[R+2]<<16)>>(7&N)},T=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],M=function(A,N,R){var F=new Error(N||T[A]);if(F.code=A,Error.captureStackTrace&&Error.captureStackTrace(F,M),!R)throw F;return F},E=function(A,N,R){var F=A.length;if(!F||R&&!R.l&&F<5)return N||new e(0);var B=!N||R,k=!R||R.i;R||(R={}),N||(N=new e(3*F));var z,O=function(ae){var De=N.length;if(ae>De){var We=new e(Math.max(2*De,ae));We.set(N),N=We}},V=R.f||0,U=R.p||0,G=R.b||0,X=R.l,ie=R.d,se=R.m,de=R.n,K=8*F;do{if(!X){R.f=V=_(A,U,1);var q=_(A,U+1,3);if(U+=3,!q){var ce=A[(pe=((z=U)/8|0)+(7&z&&1)+4)-4]|A[pe-3]<<8,Te=pe+ce;if(Te>F){k&&M(0);break}B&&O(G+ce),N.set(A.subarray(pe,Te),G),R.b=G+=ce,R.p=U=8*Te;continue}if(q==1)X=x,ie=b,se=9,de=5;else if(q==2){var Z=_(A,U,31)+257,L=_(A,U+10,15)+4,$=Z+_(A,U+5,31)+1;U+=14;for(var re=new e($),te=new e(19),le=0;le<L;++le)te[o[le]]=_(A,U+3*le,7);U+=3*L;var ge=w(te),be=(1<<ge)-1,_e=m(te,ge,1);for(le=0;le<$;){var pe,Se=_e[_(A,U,be)];if(U+=15&Se,(pe=Se>>>4)<16)re[le++]=pe;else{var Fe=0,Y=0;for(pe==16?(Y=3+_(A,U,3),U+=2,Fe=re[le-1]):pe==17?(Y=3+_(A,U,7),U+=3):pe==18&&(Y=11+_(A,U,127),U+=7);Y--;)re[le++]=Fe}}var H=re.subarray(0,Z),ne=re.subarray(Z);se=w(H),de=w(ne),X=m(H,se,1),ie=m(ne,de,1)}else M(1);if(U>K){k&&M(0);break}}B&&O(G+131072);for(var Le=(1<<se)-1,Pe=(1<<de)-1,Ee=U;;Ee=U){var Ue=(Fe=X[S(A,U)&Le])>>>4;if((U+=15&Fe)>K){k&&M(0);break}if(Fe||M(2),Ue<256)N[G++]=Ue;else{if(Ue==256){Ee=U,X=null;break}var Be=Ue-254;if(Ue>264){var ve=n[le=Ue-257];Be=_(A,U,(1<<ve)-1)+c[le],U+=ve}var Q=ie[S(A,U)&Pe],he=Q>>>4;if(Q||M(3),U+=15&Q,ne=d[he],he>3&&(ve=s[he],ne+=S(A,U)&(1<<ve)-1,U+=ve),U>K){k&&M(0);break}B&&O(G+131072);for(var we=G+Be;G<we;G+=4)N[G]=N[G-ne],N[G+1]=N[G+1-ne],N[G+2]=N[G+2-ne],N[G+3]=N[G+3-ne];G=we}}R.l=X,R.p=Ee,R.b=G,X&&(V=1,R.m=se,R.d=ie,R.n=de)}while(!V);return G==N.length?N:function(ae,De,We){(De==null||De<0)&&(De=0),(We==null||We>ae.length)&&(We=ae.length);var je=new(ae instanceof t?t:ae instanceof i?i:e)(We-De);return je.set(ae.subarray(De,We)),je}(N,0,G)},C=new e(0),P=typeof TextDecoder<"u"&&new TextDecoder;try{P.decode(C,{stream:!0})}catch{}return r.convert_streams=function(A){var N=new DataView(A),R=0;function F(){var Z=N.getUint16(R);return R+=2,Z}function B(){var Z=N.getUint32(R);return R+=4,Z}function k(Z){ce.setUint16(Te,Z),Te+=2}function z(Z){ce.setUint32(Te,Z),Te+=4}for(var O={signature:B(),flavor:B(),length:B(),numTables:F(),reserved:F(),totalSfntSize:B(),majorVersion:F(),minorVersion:F(),metaOffset:B(),metaLength:B(),metaOrigLength:B(),privOffset:B(),privLength:B()},V=0;Math.pow(2,V)<=O.numTables;)V++;V--;for(var U=16*Math.pow(2,V),G=16*O.numTables-U,X=12,ie=[],se=0;se<O.numTables;se++)ie.push({tag:B(),offset:B(),compLength:B(),origLength:B(),origChecksum:B()}),X+=16;var de,K=new Uint8Array(12+16*ie.length+ie.reduce(function(Z,L){return Z+L.origLength+4},0)),q=K.buffer,ce=new DataView(q),Te=0;return z(O.flavor),k(O.numTables),k(U),k(V),k(G),ie.forEach(function(Z){z(Z.tag),z(Z.origChecksum),z(X),z(Z.origLength),Z.outOffset=X,(X+=Z.origLength)%4!=0&&(X+=4-X%4)}),ie.forEach(function(Z){var L,$=A.slice(Z.offset,Z.offset+Z.compLength);if(Z.compLength!=Z.origLength){var re=new Uint8Array(Z.origLength);L=new Uint8Array($,2),E(L,re)}else re=new Uint8Array($);K.set(re,Z.outOffset);var te=0;(X=Z.outOffset+Z.origLength)%4!=0&&(te=4-X%4),K.set(new Uint8Array(te).buffer,Z.outOffset+Z.origLength),de=X+te}),q.slice(0,de)},Object.defineProperty(r,"__esModule",{value:!0}),r}({}).convert_streams}function DVe(r,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},n=1,s=2,o=4,a=8,l=16,c=32;let u;function d(_){if(!u){const S={R:s,L:n,D:o,C:l,U:c,T:a};u=new Map;for(let T in i){let M=0;i[T].split(",").forEach(E=>{let[C,P]=E.split("+");C=parseInt(C,36),P=P?parseInt(P,36):0,u.set(M+=C,S[T]);for(let A=P;A--;)u.set(++M,S[T])})}}return u.get(_)||c}const h=1,p=2,f=3,m=4,g=[null,"isol","init","fina","medi"];function v(_){const S=new Uint8Array(_.length);let T=c,M=h,E=-1;for(let C=0;C<_.length;C++){const P=_.codePointAt(C);let A=d(P)|0,N=h;A&a||(T&(n|o|l)?A&(s|o|l)?(N=f,(M===h||M===f)&&S[E]++):A&(n|c)&&(M===p||M===m)&&S[E]--:T&(s|c)&&(M===p||M===m)&&S[E]--,M=S[C]=N,T=A,E=C,P>65535&&C++)}return S}function x(_,S){const T=[];for(let E=0;E<S.length;E++){const C=S.codePointAt(E);C>65535&&E++,T.push(r.U.codeToGlyph(_,C))}const M=_.GSUB;if(M){const{lookupList:E,featureList:C}=M;let P;const A=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,N=[];C.forEach(R=>{if(A.test(R.tag))for(let F=0;F<R.tab.length;F++){if(N[R.tab[F]])continue;N[R.tab[F]]=!0;const B=E[R.tab[F]],k=/^(isol|init|fina|medi)$/.test(R.tag);k&&!P&&(P=v(S));for(let z=0;z<T.length;z++)(!P||!k||g[P[z]]===R.tag)&&r.U._applySubs(T,z,B,E)}})}return T}function b(..._){for(let S=0;S<_.length;S++)if(typeof _[S]=="number")return _[S]}function w(_){const S=Object.create(null),T=_["OS/2"],M=_.hhea,E=_.head.unitsPerEm,C=b(T&&T.sTypoAscender,M&&M.ascender,E),P={unitsPerEm:E,ascender:C,descender:b(T&&T.sTypoDescender,M&&M.descender,0),capHeight:b(T&&T.sCapHeight,C),xHeight:b(T&&T.sxHeight,C),lineGap:b(T&&T.sTypoLineGap,M&&M.lineGap),supportsCodePoint(A){return r.U.codeToGlyph(_,A)>0},forEachGlyph(A,N,R,F){let B=0;const k=1/P.unitsPerEm*N,z=x(_,A);let O=0,V=-1;return z.forEach((U,G)=>{if(U!==-1){let X=S[U];if(!X){const{cmds:ie,crds:se}=r.U.glyphToPath(_,U);let de="",K=0;for(let L=0,$=ie.length;L<$;L++){const re=t[ie[L]];de+=ie[L];for(let te=1;te<=re;te++)de+=(te>1?",":"")+se[K++]}let q,ce,Te,Z;if(se.length){q=ce=1/0,Te=Z=-1/0;for(let L=0,$=se.length;L<$;L+=2){let re=se[L],te=se[L+1];re<q&&(q=re),te<ce&&(ce=te),re>Te&&(Te=re),te>Z&&(Z=te)}}else q=Te=ce=Z=0;X=S[U]={index:U,advanceWidth:_.hmtx.aWidth[U],xMin:q,yMin:ce,xMax:Te,yMax:Z,path:de,pathCommandCount:ie.length}}V!==-1&&(B+=r.U.getPairAdjustment(_,V,U)*k),F.call(null,X,B,O),X.advanceWidth&&(B+=X.advanceWidth*k),R&&(B+=R*N),V=U}O+=A.codePointAt(O)>65535?2:1}),B}};return P}return function(_){const S=new Uint8Array(_,0,4),T=r._bin.readASCII(S,0,4);if(T==="wOFF")_=e(_);else if(T==="wOF2")throw new Error("woff2 fonts not supported");return w(r.parse(_)[0])}}const UVe=Hl({name:"Typr Font Parser",dependencies:[PVe,IVe,DVe],init(r,e,t){const i=r(),n=e();return t(i,n)}}),FVe=UVe;function BVe(){return function(r){class e{constructor(){this.buckets=new Map}add(w){const _=w>>5;this.buckets.set(_,(this.buckets.get(_)||0)|1<<(31&w))}has(w){const _=this.buckets.get(w>>5);return _!==void 0&&(_&1<<(31&w))!=0}serialize(){const w=[];return this.buckets.forEach((_,S)=>{w.push(`${(+S).toString(36)}:${_.toString(36)}`)}),w.join(",")}deserialize(w){this.buckets.clear(),w.split(",").forEach(_=>{const S=_.split(":");this.buckets.set(parseInt(S[0],36),parseInt(S[1],36))})}}const t=Math.pow(2,8),i=t-1,n=~i;function s(b){const w=function(S){return S&n}(b).toString(16),_=function(S){return(S&n)+t-1}(b).toString(16);return`codepoint-index/plane${b>>16}/${w}-${_}.json`}function o(b,w){const _=b&i;let S=w.codePointAt(_/6|0);return S=(S||48)-48,(S&1<<_%6)!=0}function a(b,w){var _;(_=b,_.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(S=>S.split("-").map(T=>parseInt(T.trim(),16)))).forEach(([S,T=S])=>{w(S,T)})}function l(b,w){a(b,(_,S)=>{for(let T=_;T<=S;T++)w(T)})}let c={},u={};const d=new WeakMap;function h(b){let w=d.get(b);return w||(w=new e,l(b.ranges,_=>w.add(_)),d.set(b,w)),w}const p=new Map;function f(b){let w=p.get(b);return w||(w=fetch(b).then(_=>_.json()),p.set(b,w)),w}function m(b,w,_){return b[w]?w:b[_]?_:function(S){for(const T in S)return T}(b)}function g(b,w){let _=w;if(!b.includes(_)){_=1/0;for(let S=0;S<b.length;S++)Math.abs(b[S]-w)<Math.abs(_-w)&&(_=b[S])}return _}let v;function x(b){return v||(v=new Set,l("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",w=>{v.add(w)})),v.has(b)}return r.CodePointSet=e,r.clearCache=function(){c={},u={}},r.getFontsForString=function(b,w={}){const{lang:_="en",category:S="sans-serif",style:T="normal",weight:M=400}=w,E=(w.dataUrl||"https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v0.3.2/packages/data").replace(/\/$/g,""),C=new Map,P=new Uint8Array(b.length),A={},N={},R=new Array(b.length),F=new Map;for(let B=0;B<b.length;B++){const k=b.codePointAt(B),z=s(k);R[B]=z,c[z]||F.has(z)||F.set(z,f(`${E}/${z}`).then(O=>{c[z]=O})),k>65535&&B++}return Promise.all(F.values()).then(()=>{F.clear();for(let B=0;B<b.length;B++){const k=b.codePointAt(B);let z=null;const O=c[R[B]];e:for(let V in O){let U=N[V];if(U===void 0&&(U=N[V]=new RegExp(V).test(_)),U){for(let G in O[V])if(o(k,O[V][G])){z=G;break e}}}z||(console.debug(`No font coverage for U+${k.toString(16)}`),z="latin"),R[B]=z,u[z]||F.has(z)||F.set(z,f(`${E}/font-meta/${z}.json`).then(V=>{u[z]=V})),k>65535&&B++}return Promise.all(F.values())}).then(()=>{var B;let k=null;for(let z=0;z<b.length;z++){const O=b.codePointAt(z);if(k&&(x(O)||h(k).has(O)))P[z]=P[z-1];else{k=u[R[z]];let V=A[k.id];if(!V){const{typeforms:G}=k,X=m(G,S,"sans-serif"),ie=m(G[X],T,"normal"),se=g((B=G[X])===null||B===void 0?void 0:B[ie],M);V=A[k.id]=`${E}/font-files/${k.id}/${X}.${ie}.${se}.woff`}let U=C.get(V);U==null&&(U=C.size,C.set(V,U)),P[z]=U}O>65535&&(z++,P[z]=P[z-1])}return{fontUrls:Array.from(C.keys()),chars:P}})},Object.defineProperty(r,"__esModule",{value:!0}),r}({})}function zVe(r,e){const t=Object.create(null),i=Object.create(null);function n(o,a){const l=c=>{console.error(`Failure loading font ${o}`,c)};try{const c=new XMLHttpRequest;c.open("get",o,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>=400)l(new Error(c.statusText));else if(c.status>0)try{const u=r(c.response);u.src=o,a(u)}catch(u){l(u)}},c.onerror=l,c.send()}catch(c){l(c)}}function s(o,a){let l=t[o];l?a(l):i[o]?i[o].push(a):(i[o]=[a],n(o,c=>{c.src=o,t[o]=c,i[o].forEach(u=>u(c)),delete i[o]}))}return function(o,a,{lang:l,fonts:c=[],style:u="normal",weight:d="normal"}={}){const h=new Uint8Array(o.length),p=[];o.length||v();const f=new Map,m=[];if(u!=="italic"&&(u="normal"),typeof d!="number"&&(d=d==="bold"?700:400),c&&!Array.isArray(c)&&(c=[c]),c=c.slice().filter(b=>!b.lang||b.lang.test(l)).reverse(),c.length){let b=0;(function w(_=0){for(let S=_,T=o.length;S<T;S++){const M=o.codePointAt(S);if(b===1&&p[h[S-1]].supportsCodePoint(M)||/\s/.test(o[S]))h[S]=h[S-1],b===2&&(m[m.length-1][1]=S);else for(let E=h[S],C=c.length;E<=C;E++)if(E===C){const P=b===2?m[m.length-1]:m[m.length]=[S,S];P[1]=S,b=2}else{h[S]=E;const{src:P,unicodeRange:A}=c[E];if(!A||x(M,A)){const N=t[P];if(!N){s(P,()=>{w(S)});return}if(N.supportsCodePoint(M)){let R=f.get(N);typeof R!="number"&&(R=p.length,p.push(N),f.set(N,R)),h[S]=R,b=1;break}}}M>65535&&S+1<T&&(h[S+1]=h[S],S++,b===2&&(m[m.length-1][1]=S))}g()})()}else m.push([0,o.length-1]),g();function g(){if(m.length){const b=m.map(w=>o.substring(w[0],w[1]+1)).join(`
`);e.getFontsForString(b,{lang:l,style:u,weight:d}).then(({fontUrls:w,chars:_})=>{const S=p.length;let T=0;m.forEach(E=>{for(let C=0,P=E[1]-E[0];C<=P;C++)h[E[0]+C]=_[T++]+S;T++});let M=0;w.forEach((E,C)=>{s(E,P=>{p[C+S]=P,++M===w.length&&v()})})})}else v()}function v(){a({chars:h,fonts:p})}function x(b,w){for(let _=0;_<w.length;_++){const[S,T=S]=w[_];if(S<=b&&b<=T)return!0}return!1}}}const VVe=Hl({name:"FontResolver",dependencies:[zVe,FVe,BVe],init(r,e,t){return r(e,t())}});function GVe(r,e){const t=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i="[^\\S\\u00A0]",n=new RegExp(`${i}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function s({text:p,lang:f,fonts:m,style:g,weight:v,preResolvedFonts:x},b){const w=({chars:_,fonts:S})=>{let T,M;const E=[];for(let C=0;C<_.length;C++)_[C]!==M?(M=_[C],E.push(T={start:C,end:C,fontObj:S[_[C]]})):T.end=C;b(E)};x?w(x):r(p,w,{lang:f,fonts:m,style:g,weight:v})}function o({text:p="",font:f,lang:m="en",sdfGlyphSize:g=64,fontSize:v=400,fontWeight:x=1,fontStyle:b="normal",letterSpacing:w=0,lineHeight:_="normal",maxWidth:S=1/0,direction:T,textAlign:M="left",textIndent:E=0,whiteSpace:C="normal",overflowWrap:P="normal",anchorX:A=0,anchorY:N=0,metricsOnly:R=!1,preResolvedFonts:F=null,includeCaretPositions:B=!1,chunkedBoundsSize:k=8192,colorRanges:z=null},O){const V=u(),U={fontLoad:0,typesetting:0};p.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),p=p.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),v=+v,w=+w,S=+S,_=_||"normal",E=+E,s({text:p,lang:m,style:b,weight:x,fonts:typeof f=="string"?[{src:f}]:f,preResolvedFonts:F},G=>{U.fontLoad=u()-V;const X=isFinite(S);let ie=null,se=null,de=null,K=null,q=null,ce=null,Te=null,Z=null,L=0,$=0,re=C!=="nowrap";const te=new Map,le=u();let ge=E,be=0,_e=new d;const pe=[_e];G.forEach(ne=>{const{fontObj:Le}=ne,{ascender:Pe,descender:Ee,unitsPerEm:Ue,lineGap:Be,capHeight:ve,xHeight:Q}=Le;let he=te.get(Le);if(!he){const je=v/Ue,ye=_==="normal"?(Pe-Ee+Be)*je:_*v,nt=(ye-(Pe-Ee)*je)/2,He=Math.min(ye,(Pe-Ee)*je),tt=(Pe+Ee)/2*je+He/2;he={index:te.size,src:Le.src,fontObj:Le,fontSizeMult:je,unitsPerEm:Ue,ascender:Pe*je,descender:Ee*je,capHeight:ve*je,xHeight:Q*je,lineHeight:ye,baseline:-nt-Pe*je,caretTop:(Pe+Ee)/2*je+He/2,caretBottom:tt-He},te.set(Le,he)}const{fontSizeMult:we}=he,ae=p.slice(ne.start,ne.end+1);let De,We;Le.forEachGlyph(ae,v,w,(je,ye,nt)=>{ye+=be,nt+=ne.start,De=ye,We=je;const He=p.charAt(nt),tt=je.advanceWidth*we,Me=_e.count;let Ne;if("isEmpty"in je||(je.isWhitespace=!!He&&new RegExp(i).test(He),je.canBreakAfter=!!He&&n.test(He),je.isEmpty=je.xMin===je.xMax||je.yMin===je.yMax||t.test(He)),!je.isWhitespace&&!je.isEmpty&&$++,re&&X&&!je.isWhitespace&&ye+tt+ge>S&&Me){if(_e.glyphAt(Me-1).glyphObj.canBreakAfter)Ne=new d,ge=-ye;else for(let Ie=Me;Ie--;)if(Ie===0&&P==="break-word"){Ne=new d,ge=-ye;break}else if(_e.glyphAt(Ie).glyphObj.canBreakAfter){Ne=_e.splitAt(Ie+1);const wt=Ne.glyphAt(0).x;ge-=wt;for(let xt=Ne.count;xt--;)Ne.glyphAt(xt).x-=wt;break}Ne&&(_e.isSoftWrapped=!0,_e=Ne,pe.push(_e),L=S)}let fe=_e.glyphAt(_e.count);fe.glyphObj=je,fe.x=ye+ge,fe.width=tt,fe.charIndex=nt,fe.fontData=he,He===`
`&&(_e=new d,pe.push(_e),ge=-(ye+tt+w*v)+E)}),be=De+We.advanceWidth*we+w*v});let Se=0;pe.forEach(ne=>{let Le=!0;for(let Pe=ne.count;Pe--;){const Ee=ne.glyphAt(Pe);Le&&!Ee.glyphObj.isWhitespace&&(ne.width=Ee.x+Ee.width,ne.width>L&&(L=ne.width),Le=!1);let{lineHeight:Ue,capHeight:Be,xHeight:ve,baseline:Q}=Ee.fontData;Ue>ne.lineHeight&&(ne.lineHeight=Ue);const he=Q-ne.baseline;he<0&&(ne.baseline+=he,ne.cap+=he,ne.ex+=he),ne.cap=Math.max(ne.cap,ne.baseline+Be),ne.ex=Math.max(ne.ex,ne.baseline+ve)}ne.baseline-=Se,ne.cap-=Se,ne.ex-=Se,Se+=ne.lineHeight});let Fe=0,Y=0;if(A&&(typeof A=="number"?Fe=-A:typeof A=="string"&&(Fe=-L*(A==="left"?0:A==="center"?.5:A==="right"?1:l(A)))),N&&(typeof N=="number"?Y=-N:typeof N=="string"&&(Y=N==="top"?0:N==="top-baseline"?-pe[0].baseline:N==="top-cap"?-pe[0].cap:N==="top-ex"?-pe[0].ex:N==="middle"?Se/2:N==="bottom"?Se:N==="bottom-baseline"?pe[pe.length-1].baseline:l(N)*Se)),!R){const ne=e.getEmbeddingLevels(p,T);ie=new Uint16Array($),se=new Uint8Array($),de=new Float32Array($*2),K={},Te=[1/0,1/0,-1/0,-1/0],Z=[],B&&(ce=new Float32Array(p.length*4)),z&&(q=new Uint8Array($*3));let Le=0,Pe=-1,Ee=-1,Ue,Be;if(pe.forEach((ve,Q)=>{let{count:he,width:we}=ve;if(he>0){let ae=0;for(let He=he;He--&&ve.glyphAt(He).glyphObj.isWhitespace;)ae++;let De=0,We=0;if(M==="center")De=(L-we)/2;else if(M==="right")De=L-we;else if(M==="justify"&&ve.isSoftWrapped){let He=0;for(let tt=he-ae;tt--;)ve.glyphAt(tt).glyphObj.isWhitespace&&He++;We=(L-we)/He}if(We||De){let He=0;for(let tt=0;tt<he;tt++){let Me=ve.glyphAt(tt);const Ne=Me.glyphObj;Me.x+=De+He,We!==0&&Ne.isWhitespace&&tt<he-ae&&(He+=We,Me.width+=We)}}const je=e.getReorderSegments(p,ne,ve.glyphAt(0).charIndex,ve.glyphAt(ve.count-1).charIndex);for(let He=0;He<je.length;He++){const[tt,Me]=je[He];let Ne=1/0,fe=-1/0;for(let Ie=0;Ie<he;Ie++)if(ve.glyphAt(Ie).charIndex>=tt){let wt=Ie,xt=Ie;for(;xt<he;xt++){let Gt=ve.glyphAt(xt);if(Gt.charIndex>Me)break;xt<he-ae&&(Ne=Math.min(Ne,Gt.x),fe=Math.max(fe,Gt.x+Gt.width))}for(let Gt=wt;Gt<xt;Gt++){const Jt=ve.glyphAt(Gt);Jt.x=fe-(Jt.x+Jt.width-Ne)}break}}let ye;const nt=He=>ye=He;for(let He=0;He<he;He++){const tt=ve.glyphAt(He);ye=tt.glyphObj;const Me=ye.index,Ne=ne.levels[tt.charIndex]&1;if(Ne){const fe=e.getMirroredCharacter(p[tt.charIndex]);fe&&tt.fontData.fontObj.forEachGlyph(fe,0,0,nt)}if(B){const{charIndex:fe,fontData:Ie}=tt,wt=tt.x+Fe,xt=tt.x+tt.width+Fe;ce[fe*4]=Ne?xt:wt,ce[fe*4+1]=Ne?wt:xt,ce[fe*4+2]=ve.baseline+Ie.caretBottom+Y,ce[fe*4+3]=ve.baseline+Ie.caretTop+Y;const Gt=fe-Pe;Gt>1&&c(ce,Pe,Gt),Pe=fe}if(z){const{charIndex:fe}=tt;for(;fe>Ee;)Ee++,z.hasOwnProperty(Ee)&&(Be=z[Ee])}if(!ye.isWhitespace&&!ye.isEmpty){const fe=Le++,{fontSizeMult:Ie,src:wt,index:xt}=tt.fontData,Gt=K[wt]||(K[wt]={});Gt[Me]||(Gt[Me]={path:ye.path,pathBounds:[ye.xMin,ye.yMin,ye.xMax,ye.yMax]});const Jt=tt.x+Fe,_r=ve.baseline+Y;de[fe*2]=Jt,de[fe*2+1]=_r;const yi=Jt+ye.xMin*Ie,xs=_r+ye.yMin*Ie,Cn=Jt+ye.xMax*Ie,ws=_r+ye.yMax*Ie;yi<Te[0]&&(Te[0]=yi),xs<Te[1]&&(Te[1]=xs),Cn>Te[2]&&(Te[2]=Cn),ws>Te[3]&&(Te[3]=ws),fe%k===0&&(Ue={start:fe,end:fe,rect:[1/0,1/0,-1/0,-1/0]},Z.push(Ue)),Ue.end++;const Si=Ue.rect;if(yi<Si[0]&&(Si[0]=yi),xs<Si[1]&&(Si[1]=xs),Cn>Si[2]&&(Si[2]=Cn),ws>Si[3]&&(Si[3]=ws),ie[fe]=Me,se[fe]=xt,z){const js=fe*3;q[js]=Be>>16&255,q[js+1]=Be>>8&255,q[js+2]=Be&255}}}}}),ce){const ve=p.length-Pe;ve>1&&c(ce,Pe,ve)}}const H=[];te.forEach(({index:ne,src:Le,unitsPerEm:Pe,ascender:Ee,descender:Ue,lineHeight:Be,capHeight:ve,xHeight:Q})=>{H[ne]={src:Le,unitsPerEm:Pe,ascender:Ee,descender:Ue,lineHeight:Be,capHeight:ve,xHeight:Q}}),U.typesetting=u()-le,O({glyphIds:ie,glyphFontIndices:se,glyphPositions:de,glyphData:K,fontData:H,caretPositions:ce,glyphColors:q,chunkedBounds:Z,fontSize:v,topBaseline:Y+pe[0].baseline,blockBounds:[Fe,Y-Se,Fe+L,Y],visibleBounds:Te,timings:U})})}function a(p,f){o({...p,metricsOnly:!0},m=>{const[g,v,x,b]=m.blockBounds;f({width:x-g,height:b-v})})}function l(p){let f=p.match(/^([\d.]+)%$/),m=f?parseFloat(f[1]):NaN;return isNaN(m)?0:m/100}function c(p,f,m){const g=p[f*4],v=p[f*4+1],x=p[f*4+2],b=p[f*4+3],w=(v-g)/m;for(let _=0;_<m;_++){const S=(f+_)*4;p[S]=g+w*_,p[S+1]=g+w*(_+1),p[S+2]=x,p[S+3]=b}}function u(){return(self.performance||Date).now()}function d(){this.data=[]}const h=["glyphObj","x","width","charIndex","fontData"];return d.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(p){let f=d.flyweight;return f.data=this.data,f.index=p,f},splitAt(p){let f=new d;return f.data=this.data.splice(p*h.length),f}},d.flyweight=h.reduce((p,f,m,g)=>(Object.defineProperty(p,f,{get(){return this.data[this.index*h.length+m]},set(v){this.data[this.index*h.length+m]=v}}),p),{data:null,index:0}),{typeset:o,measure:a}}const jVe=Hl({name:"Typesetter",dependencies:[GVe,VVe,x7],init(r,e,t){return r(e,t())}}),HVe=jVe,WVe=Hl({name:"Typesetter",dependencies:[HVe],init(r){return function(e){return new Promise(t=>{r.typeset(e,t)})}},getTransferables(r){const e=[];for(const t in r)r[t]&&r[t].buffer&&e.push(r[t].buffer);return e}}),$Ve=new at;let R2;function XVe(r){return R2||(R2=typeof document>"u"?{}:document.createElement("a")),R2.href=r,R2.href}const W7={font:"/assets/fonts/STFangsong.ttf",lang:"en",fontSize:.1,fontWeight:"normal",fontStyle:"normal",letterSpacing:0,lineHeight:"normal",maxWidth:1,direction:"auto",textAlign:"left",textIndent:0,whiteSpace:"normal",overflowWrap:"normal",anchorX:0,anchorY:0,colorRanges:null,includeCaretPositions:!0,sdfGlyphSize:64,gpuAccelerateSDF:!1};async function qVe(r){r={...W7,...r};const e=[];if(r.font&&e.push({label:"user",src:XVe(r.font)}),r.font=e,r.text=""+r.text,r.sdfGlyphSize=r.sdfGlyphSize||64,r.colorRanges!=null){const d={};for(const h in r.colorRanges)if(Object.hasOwn(r.colorRanges,h)){let p=r.colorRanges[h];typeof p!="number"&&(p=$Ve.set(p).getHex()),d[h]=p}r.colorRanges=d}Object.freeze(r);const t=await WVe(r),{glyphIds:i,glyphFontIndices:n,fontData:s,glyphData:o,glyphPositions:a,fontSize:l}=t,c=new tS;let u=0;return i.forEach((d,h)=>{const p=n[h],{src:f,unitsPerEm:m}=s[p],{path:g}=o[f][d],v=a[u++],x=a[u++],b=l/m,w=g.replace(/([A-Z])/mg,(_,S)=>`$${S}`).split("$").filter(_=>_);for(const _ of w){const S=_[0];if(S==="Z")continue;const T=_.substring(1).split(",").map((M,E)=>(E%2?x:v)+Number.parseFloat(M)*b);S==="M"?c.moveTo(...T):S==="L"?c.lineTo(...T):S==="Q"?c.quadraticCurveTo(...T):S==="C"&&c.bezierCurveTo(...T)}}),c.toShapes(!1)}const KVe=Object.fromEntries(Object.entries(N2).map(r=>[`props.${r[0]}`,r[1]]));class YVe extends Ep{constructor(e,t){super(e,t,{...W7,color:new at,strokeColor:new at,outlineColor:new at},0,0),this.isText3D=!0,this.type="Text3D"}async rebuildShapes(){this.shapes=await qVe(this.props),this.rebuildGeometry()}}Cr("Text3D",{members:KVe,proto:"Shape",group:"Text.3D Text",icon:"text",create:({material:r,geometry:e}={})=>new YVe(e||new U_,r)});class ZVe extends uR{constructor(){super(),this.isAudioListener2=!0,this.type="AudioListener2"}toJSON(e){const t=super.toJSON(e),i={...t.object};return delete i.children,e.listeners[i.uuid]=i,t}}class JVe extends hR{constructor(e){super(e),this.isPositionalAudio2=!0,this._src="",this.type="PositionalAudio2"}get src(){return this._src}set src(e){this._src!==e&&(this._src=e,this.isPlaying&&this.stop(),new CG().load(e,t=>{this.setBuffer(t)}))}play(e){return this.isPlaying&&this.stop(),super.play(e)}clone(e){const t=M$.get(this.listener);return new this.constructor(t).copy(this,e)}serialize(e){e.autoplay=this.autoplay,e.loop=this.loop,e.src=this._src,e.listener=this.listener.uuid}deserialize(e){this.autoplay=e.autoplay||!1,this.loop=e.loop||!1,this.src=e.src}}Cr("AudioListener2",{create:()=>new ZVe,proto:"AudioListener",members:{},group:"Audio.Audio Listener",icon:"ear"}),Cr("PositionalAudio2",{create:({listener:r})=>new JVe(r),proto:"PositionalAudio",members:{autoplay:"Boolean",loop:"Boolean",src:"Audio"},group:"Audio.Positional Audio",icon:"audio"});function $7(r,e){if(e===C8)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),r;if(e===Fw||e===DA){let t=r.getIndex();if(t===null){const o=[],a=r.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);r.setIndex(o),t=r.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),r}const i=t.count-2,n=[];if(e===Fw)for(let o=1;o<=i;o++)n.push(t.getX(0)),n.push(t.getX(o)),n.push(t.getX(o+1));else for(let o=0;o<i;o++)o%2===0?(n.push(t.getX(o)),n.push(t.getX(o+1)),n.push(t.getX(o+2))):(n.push(t.getX(o+2)),n.push(t.getX(o+1)),n.push(t.getX(o)));n.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=r.clone();return s.setIndex(n),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),r}class QVe extends Fi{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new nGe(t)}),this.register(function(t){return new hGe(t)}),this.register(function(t){return new pGe(t)}),this.register(function(t){return new fGe(t)}),this.register(function(t){return new oGe(t)}),this.register(function(t){return new aGe(t)}),this.register(function(t){return new lGe(t)}),this.register(function(t){return new cGe(t)}),this.register(function(t){return new iGe(t)}),this.register(function(t){return new uGe(t)}),this.register(function(t){return new sGe(t)}),this.register(function(t){return new dGe(t)}),this.register(function(t){return new tGe(t)}),this.register(function(t){return new mGe(t)}),this.register(function(t){return new gGe(t)})}load(e,t,i,n){const s=this;let o;this.resourcePath!==""?o=this.resourcePath:this.path!==""?o=this.path:o=Rc.extractUrlBase(e),this.manager.itemStart(e);const a=function(c){n?n(c):console.error(c),s.manager.itemError(e),s.manager.itemEnd(e)},l=new In(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{s.parse(c,o,function(u){t(u),s.manager.itemEnd(e)},a)}catch(u){a(u)}},i,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,n){let s;const o={},a={},l=new TextDecoder;if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(l.decode(new Uint8Array(e,0,4))===X7){try{o[Br.KHR_BINARY_GLTF]=new vGe(e)}catch(u){n&&n(u);return}s=JSON.parse(o[Br.KHR_BINARY_GLTF].content)}else s=JSON.parse(l.decode(e));else s=e;if(s.asset===void 0||s.asset.version[0]<2){n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const c=new RGe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});c.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](c);a[d.name]=d,o[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(d){case Br.KHR_MATERIALS_UNLIT:o[d]=new rGe;break;case Br.KHR_DRACO_MESH_COMPRESSION:o[d]=new yGe(s,this.dracoLoader);break;case Br.KHR_TEXTURE_TRANSFORM:o[d]=new bGe;break;case Br.KHR_MESH_QUANTIZATION:o[d]=new xGe;break;default:h.indexOf(d)>=0&&a[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}c.setExtensions(o),c.setPlugins(a),c.parse(i,n)}parseAsync(e,t){const i=this;return new Promise(function(n,s){i.parse(e,t,n,s)})}}function eGe(){let r={};return{get:function(e){return r[e]},add:function(e,t){r[e]=t},remove:function(e){delete r[e]},removeAll:function(){r={}}}}const Br={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class tGe{constructor(e){this.parser=e,this.name=Br.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,n=t.length;i<n;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let n=t.cache.get(i);if(n)return n;const s=t.json,o=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let a;const l=new at(16777215);o.color!==void 0&&l.setRGB(o.color[0],o.color[1],o.color[2],li);const c=o.range!==void 0?o.range:0;switch(o.type){case"directional":a=new Dl(l),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new Il(l),a.distance=c;break;case"spot":a=new Pl(l),a.distance=c,o.spot=o.spot||{},o.spot.innerConeAngle=o.spot.innerConeAngle!==void 0?o.spot.innerConeAngle:0,o.spot.outerConeAngle=o.spot.outerConeAngle!==void 0?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,ld(a,o),o.intensity!==void 0&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),n=Promise.resolve(a),t.cache.add(i,n),n}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,n=i.json.nodes[e],s=(n.extensions&&n.extensions[this.name]||{}).light;return s===void 0?null:this._loadLight(s).then(function(o){return i._getNodeRef(t.cache,s,o)})}}class rGe{constructor(){this.name=Br.KHR_MATERIALS_UNLIT}getMaterialType(){return Ei}extendParams(e,t,i){const n=[];e.color=new at(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const o=s.baseColorFactor;e.color.setRGB(o[0],o[1],o[2],li),e.opacity=o[3]}s.baseColorTexture!==void 0&&n.push(i.assignTexture(e,"map",s.baseColorTexture,Lt))}return Promise.all(n)}}class iGe{constructor(e){this.parser=e,this.name=Br.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name].emissiveStrength;return n!==void 0&&(t.emissiveIntensity=n),Promise.resolve()}}class nGe{constructor(e){this.parser=e,this.name=Br.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];if(o.clearcoatFactor!==void 0&&(t.clearcoat=o.clearcoatFactor),o.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),o.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),o.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),o.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),o.clearcoatNormalTexture.scale!==void 0)){const a=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new qe(a,a)}return Promise.all(s)}}class sGe{constructor(e){this.parser=e,this.name=Br.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];return o.iridescenceFactor!==void 0&&(t.iridescence=o.iridescenceFactor),o.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),o.iridescenceIor!==void 0&&(t.iridescenceIOR=o.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),o.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),o.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),o.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(s)}}class oGe{constructor(e){this.parser=e,this.name=Br.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new at(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=n.extensions[this.name];if(o.sheenColorFactor!==void 0){const a=o.sheenColorFactor;t.sheenColor.setRGB(a[0],a[1],a[2],li)}return o.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=o.sheenRoughnessFactor),o.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",o.sheenColorTexture,Lt)),o.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class aGe{constructor(e){this.parser=e,this.name=Br.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];return o.transmissionFactor!==void 0&&(t.transmission=o.transmissionFactor),o.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(s)}}class lGe{constructor(e){this.parser=e,this.name=Br.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];t.thickness=o.thicknessFactor!==void 0?o.thicknessFactor:0,o.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=new at().setRGB(a[0],a[1],a[2],li),Promise.all(s)}}class cGe{constructor(e){this.parser=e,this.name=Br.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const n=i.extensions[this.name];return t.ior=n.ior!==void 0?n.ior:1.5,Promise.resolve()}}class uGe{constructor(e){this.parser=e,this.name=Br.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];t.specularIntensity=o.specularFactor!==void 0?o.specularFactor:1,o.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=new at().setRGB(a[0],a[1],a[2],li),o.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",o.specularColorTexture,Lt)),Promise.all(s)}}class dGe{constructor(e){this.parser=e,this.name=Br.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Io}extendMaterialParams(e,t){const i=this.parser,n=i.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const s=[],o=n.extensions[this.name];return o.anisotropyStrength!==void 0&&(t.anisotropy=o.anisotropyStrength),o.anisotropyRotation!==void 0&&(t.anisotropyRotation=o.anisotropyRotation),o.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(s)}}class hGe{constructor(e){this.parser=e,this.name=Br.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,n=i.textures[e];if(!n.extensions||!n.extensions[this.name])return null;const s=n.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,o)}}class pGe{constructor(e){this.parser=e,this.name=Br.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,n=i.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=n.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class fGe{constructor(e){this.parser=e,this.name=Br.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,n=i.json,s=n.textures[e];if(!s.extensions||!s.extensions[t])return null;const o=s.extensions[t],a=n.images[o.source];let l=i.textureLoader;if(a.uri){const c=i.options.manager.getHandler(a.uri);c!==null&&(l=c)}return this.detectSupport().then(function(c){if(c)return i.loadTextureImage(e,o.source,l);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class mGe{constructor(e){this.name=Br.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const n=i.extensions[this.name],s=this.parser.getDependency("buffer",n.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(a){const l=n.byteOffset||0,c=n.byteLength||0,u=n.count,d=n.byteStride,h=new Uint8Array(a,l,c);return o.decodeGltfBufferAsync?o.decodeGltfBufferAsync(u,d,h,n.mode,n.filter).then(function(p){return p.buffer}):o.ready.then(function(){const p=new ArrayBuffer(u*d);return o.decodeGltfBuffer(new Uint8Array(p),u,d,h,n.mode,n.filter),p})})}else return null}}class gGe{constructor(e){this.name=Br.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const n=t.meshes[i.mesh];for(const l of n.primitives)if(l.mode!==_a.TRIANGLES&&l.mode!==_a.TRIANGLE_STRIP&&l.mode!==_a.TRIANGLE_FAN&&l.mode!==void 0)return null;const s=i.extensions[this.name].attributes,o=[],a={};for(const l in s)o.push(this.parser.getDependency("accessor",s[l]).then(c=>(a[l]=c,a[l])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(l=>{const c=l.pop(),u=c.isGroup?c.children:[c],d=l[0].count,h=[];for(const p of u){const f=new St,m=new oe,g=new Rr,v=new oe(1,1,1),x=new Iy(p.geometry,p.material,d);for(let b=0;b<d;b++)a.TRANSLATION&&m.fromBufferAttribute(a.TRANSLATION,b),a.ROTATION&&g.fromBufferAttribute(a.ROTATION,b),a.SCALE&&v.fromBufferAttribute(a.SCALE,b),x.setMatrixAt(b,f.compose(m,g,v));for(const b in a)b!=="TRANSLATION"&&b!=="ROTATION"&&b!=="SCALE"&&p.geometry.setAttribute(b,a[b]);nr.prototype.copy.call(x,p),this.parser.assignFinalMaterial(x),h.push(x)}return c.isGroup?(c.clear(),c.add(...h),c):h[0]}))}}const X7="glTF",Pb=12,q7={JSON:1313821514,BIN:5130562};class vGe{constructor(e){this.name=Br.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,Pb),i=new TextDecoder;if(this.header={magic:i.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==X7)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-Pb,s=new DataView(e,Pb);let o=0;for(;o<n;){const a=s.getUint32(o,!0);o+=4;const l=s.getUint32(o,!0);if(o+=4,l===q7.JSON){const c=new Uint8Array(e,Pb+o,a);this.content=i.decode(c)}else if(l===q7.BIN){const c=Pb+o;this.body=e.slice(c,c+a)}o+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class yGe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Br.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,n=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},l={},c={};for(const u in o){const d=eO[u]||u.toLowerCase();a[d]=o[u]}for(const u in e.attributes){const d=eO[u]||u.toLowerCase();if(o[u]!==void 0){const h=i.accessors[e.attributes[u]],p=Ng[h.componentType];c[d]=p.name,l[d]=h.normalized===!0}}return t.getDependency("bufferView",s).then(function(u){return new Promise(function(d){n.decodeDracoFile(u,function(h){for(const p in h.attributes){const f=h.attributes[p],m=l[p];m!==void 0&&(f.normalized=m)}d(h)},a,c)})})}}class bGe{constructor(){this.name=Br.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class xGe{constructor(){this.name=Br.KHR_MESH_QUANTIZATION}}class K7 extends Km{constructor(e,t,i,n){super(e,t,i,n)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,n=this.valueSize,s=e*n*3+n;for(let o=0;o!==n;o++)t[o]=i[s+o];return t}interpolate_(e,t,i,n){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=a*2,c=a*3,u=n-t,d=(i-t)/u,h=d*d,p=h*d,f=e*c,m=f-c,g=-2*p+3*h,v=p-h,x=1-g,b=v-h+d;for(let w=0;w!==a;w++){const _=o[m+w+a],S=o[m+w+l]*u,T=o[f+w+a],M=o[f+w]*u;s[w]=x*_+b*S+g*T+v*M}return s}}const wGe=new Rr;class _Ge extends K7{interpolate_(e,t,i,n){const s=super.interpolate_(e,t,i,n);return wGe.fromArray(s).normalize().toArray(s),s}}const _a={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Ng={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Y7={9728:Mr,9729:Or,9984:Ll,9985:hh,9986:ca,9987:qn},Z7={33071:Mi,33648:kl,10497:ds},QL={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},eO={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ad={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},SGe={CUBICSPLINE:void 0,LINEAR:Rh,STEP:lm},tO={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function TGe(r){return r.DefaultMaterial===void 0&&(r.DefaultMaterial=new Kn({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:eo})),r.DefaultMaterial}function Np(r,e,t){for(const i in t.extensions)r[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function ld(r,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(r.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function MGe(r,e,t){let i=!1,n=!1,s=!1;for(let c=0,u=e.length;c<u;c++){const d=e[c];if(d.POSITION!==void 0&&(i=!0),d.NORMAL!==void 0&&(n=!0),d.COLOR_0!==void 0&&(s=!0),i&&n&&s)break}if(!i&&!n&&!s)return Promise.resolve(r);const o=[],a=[],l=[];for(let c=0,u=e.length;c<u;c++){const d=e[c];if(i){const h=d.POSITION!==void 0?t.getDependency("accessor",d.POSITION):r.attributes.position;o.push(h)}if(n){const h=d.NORMAL!==void 0?t.getDependency("accessor",d.NORMAL):r.attributes.normal;a.push(h)}if(s){const h=d.COLOR_0!==void 0?t.getDependency("accessor",d.COLOR_0):r.attributes.color;l.push(h)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l)]).then(function(c){const u=c[0],d=c[1],h=c[2];return i&&(r.morphAttributes.position=u),n&&(r.morphAttributes.normal=d),s&&(r.morphAttributes.color=h),r.morphTargetsRelative=!0,r})}function EGe(r,e){if(r.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)r.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(r.morphTargetInfluences.length===t.length){r.morphTargetDictionary={};for(let i=0,n=t.length;i<n;i++)r.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function CGe(r){let e;const t=r.extensions&&r.extensions[Br.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+rO(t.attributes):e=r.indices+":"+rO(r.attributes)+":"+r.mode,r.targets!==void 0)for(let i=0,n=r.targets.length;i<n;i++)e+=":"+rO(r.targets[i]);return e}function rO(r){let e="";const t=Object.keys(r).sort();for(let i=0,n=t.length;i<n;i++)e+=t[i]+":"+r[t[i]]+";";return e}function iO(r){switch(r){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function AGe(r){return r.search(/\.jpe?g($|\?)/i)>0||r.search(/^data\:image\/jpeg/)===0?"image/jpeg":r.search(/\.webp($|\?)/i)>0||r.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const NGe=new St;class RGe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new eGe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,n=!1,s=-1;typeof navigator<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,n=navigator.userAgent.indexOf("Firefox")>-1,s=n?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||n&&s<98?this.textureLoader=new G_(this.options.manager):this.textureLoader=new EG(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new In(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,n=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(o){return o._markDefs&&o._markDefs()}),Promise.all(this._invokeAll(function(o){return o.beforeRoot&&o.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(o){const a={scene:o[0][n.scene||0],scenes:o[0],animations:o[1],cameras:o[2],asset:n.asset,parser:i,userData:{}};return Np(s,a,n),ld(a,n),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(a)})).then(function(){e(a)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let n=0,s=t.length;n<s;n++){const o=t[n].joints;for(let a=0,l=o.length;a<l;a++)e[o[a]].isBone=!0}for(let n=0,s=e.length;n<s;n++){const o=e[n];o.mesh!==void 0&&(this._addNodeRef(this.meshCache,o.mesh),o.skin!==void 0&&(i[o.mesh].isSkinnedMesh=!0)),o.camera!==void 0&&this._addNodeRef(this.cameraCache,o.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const n=i.clone(),s=(o,a)=>{const l=this.associations.get(o);l!=null&&this.associations.set(a,l);for(const[c,u]of o.children.entries())s(u,a.children[c])};return s(i,n),n.name+="_instance_"+e.uses[t]++,n}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const n=e(t[i]);if(n)return n}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let n=0;n<t.length;n++){const s=e(t[n]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let n=this.cache.get(i);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":n=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":n=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":n=this.loadSkin(t);break;case"animation":n=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":n=this.loadCamera(t);break;default:if(n=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!n)throw new Error("Unknown type: "+e);break}this.cache.add(i,n)}return n}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,n=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(n.map(function(s,o){return i.getDependency(e,o)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[Br.KHR_BINARY_GLTF].body);const n=this.options;return new Promise(function(s,o){i.load(Rc.resolveURL(t.uri,n.path),s,void 0,function(){o(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const n=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+n)})}loadAccessor(e){const t=this,i=this.json,n=this.json.accessors[e];if(n.bufferView===void 0&&n.sparse===void 0){const o=QL[n.type],a=Ng[n.componentType],l=n.normalized===!0,c=new a(n.count*o);return Promise.resolve(new jr(c,o,l))}const s=[];return n.bufferView!==void 0?s.push(this.getDependency("bufferView",n.bufferView)):s.push(null),n.sparse!==void 0&&(s.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(s).then(function(o){const a=o[0],l=QL[n.type],c=Ng[n.componentType],u=c.BYTES_PER_ELEMENT,d=u*l,h=n.byteOffset||0,p=n.bufferView!==void 0?i.bufferViews[n.bufferView].byteStride:void 0,f=n.normalized===!0;let m,g;if(p&&p!==d){const v=Math.floor(h/p),x="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+v+":"+n.count;let b=t.cache.get(x);b||(m=new c(a,v*p,n.count*p/u),b=new Fm(m,p/u),t.cache.add(x,b)),g=new Is(b,l,h%p/u,f)}else a===null?m=new c(n.count*l):m=new c(a,h,n.count*l),g=new jr(m,l,f);if(n.sparse!==void 0){const v=QL.SCALAR,x=Ng[n.sparse.indices.componentType],b=n.sparse.indices.byteOffset||0,w=n.sparse.values.byteOffset||0,_=new x(o[1],b,n.sparse.count*v),S=new c(o[2],w,n.sparse.count*l);a!==null&&(g=new jr(g.array.slice(),g.itemSize,g.normalized));for(let T=0,M=_.length;T<M;T++){const E=_[T];if(g.setX(E,S[T*l]),l>=2&&g.setY(E,S[T*l+1]),l>=3&&g.setZ(E,S[T*l+2]),l>=4&&g.setW(E,S[T*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return g})}loadTexture(e){const t=this.json,i=this.options,n=t.textures[e].source,s=t.images[n];let o=this.textureLoader;if(s.uri){const a=i.manager.getHandler(s.uri);a!==null&&(o=a)}return this.loadTextureImage(e,n,o)}loadTextureImage(e,t,i){const n=this,s=this.json,o=s.textures[e],a=s.images[t],l=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[l])return this.textureCache[l];const c=this.loadImageSource(t,i).then(function(u){u.flipY=!1,u.name=o.name||a.name||"",u.name===""&&typeof a.uri=="string"&&a.uri.startsWith("data:image/")===!1&&(u.name=a.uri);const d=(s.samplers||{})[o.sampler]||{};return u.magFilter=Y7[d.magFilter]||Or,u.minFilter=Y7[d.minFilter]||qn,u.wrapS=Z7[d.wrapS]||ds,u.wrapT=Z7[d.wrapT]||ds,n.associations.set(u,{textures:e}),u}).catch(function(){return null});return this.textureCache[l]=c,c}loadImageSource(e,t){const i=this,n=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(d=>d.clone());const o=n.images[e],a=self.URL||self.webkitURL;let l=o.uri||"",c=!1;if(o.bufferView!==void 0)l=i.getDependency("bufferView",o.bufferView).then(function(d){c=!0;const h=new Blob([d],{type:o.mimeType});return l=a.createObjectURL(h),l});else if(o.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(l).then(function(d){return new Promise(function(h,p){let f=h;t.isImageBitmapLoader===!0&&(f=function(m){const g=new Nr(m);g.needsUpdate=!0,h(g)}),t.load(Rc.resolveURL(d,s.path),f,void 0,p)})}).then(function(d){return c===!0&&a.revokeObjectURL(l),d.userData.mimeType=o.mimeType||AGe(o.uri),d}).catch(function(d){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),d});return this.sourceCache[e]=u,u}assignTexture(e,t,i,n){const s=this;return this.getDependency("texture",i.index).then(function(o){if(!o)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(o=o.clone(),o.channel=i.texCoord),s.extensions[Br.KHR_TEXTURE_TRANSFORM]){const a=i.extensions!==void 0?i.extensions[Br.KHR_TEXTURE_TRANSFORM]:void 0;if(a){const l=s.associations.get(o);o=s.extensions[Br.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),s.associations.set(o,l)}}return n!==void 0&&(o.colorSpace=n),e[t]=o,o})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const n=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,o=t.attributes.normal===void 0;if(e.isPoints){const a="PointsMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new qh,Wr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(a,l)),i=l}else if(e.isLine){const a="LineBasicMaterial:"+i.uuid;let l=this.cache.get(a);l||(l=new Ki,Wr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(a,l)),i=l}if(n||s||o){let a="ClonedMaterial:"+i.uuid+":";n&&(a+="derivative-tangents:"),s&&(a+="vertex-colors:"),o&&(a+="flat-shading:");let l=this.cache.get(a);l||(l=i.clone(),s&&(l.vertexColors=!0),o&&(l.flatShading=!0),n&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(a,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Kn}loadMaterial(e){const t=this,i=this.json,n=this.extensions,s=i.materials[e];let o;const a={},l=s.extensions||{},c=[];if(l[Br.KHR_MATERIALS_UNLIT]){const d=n[Br.KHR_MATERIALS_UNLIT];o=d.getMaterialType(),c.push(d.extendParams(a,s,t))}else{const d=s.pbrMetallicRoughness||{};if(a.color=new at(1,1,1),a.opacity=1,Array.isArray(d.baseColorFactor)){const h=d.baseColorFactor;a.color.setRGB(h[0],h[1],h[2],li),a.opacity=h[3]}d.baseColorTexture!==void 0&&c.push(t.assignTexture(a,"map",d.baseColorTexture,Lt)),a.metalness=d.metallicFactor!==void 0?d.metallicFactor:1,a.roughness=d.roughnessFactor!==void 0?d.roughnessFactor:1,d.metallicRoughnessTexture!==void 0&&(c.push(t.assignTexture(a,"metalnessMap",d.metallicRoughnessTexture)),c.push(t.assignTexture(a,"roughnessMap",d.metallicRoughnessTexture))),o=this._invokeOne(function(h){return h.getMaterialType&&h.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(h){return h.extendMaterialParams&&h.extendMaterialParams(e,a)})))}s.doubleSided===!0&&(a.side=Wi);const u=s.alphaMode||tO.OPAQUE;if(u===tO.BLEND?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,u===tO.MASK&&(a.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&o!==Ei&&(c.push(t.assignTexture(a,"normalMap",s.normalTexture)),a.normalScale=new qe(1,1),s.normalTexture.scale!==void 0)){const d=s.normalTexture.scale;a.normalScale.set(d,d)}if(s.occlusionTexture!==void 0&&o!==Ei&&(c.push(t.assignTexture(a,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(a.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&o!==Ei){const d=s.emissiveFactor;a.emissive=new at().setRGB(d[0],d[1],d[2],li)}return s.emissiveTexture!==void 0&&o!==Ei&&c.push(t.assignTexture(a,"emissiveMap",s.emissiveTexture,Lt)),Promise.all(c).then(function(){const d=new o(a);return s.name&&(d.name=s.name),ld(d,s),t.associations.set(d,{materials:e}),s.extensions&&Np(n,d,s),d})}createUniqueName(e){const t=kr.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,n=this.primitiveCache;function s(a){return i[Br.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(a,t).then(function(l){return J7(l,a,t)})}const o=[];for(let a=0,l=e.length;a<l;a++){const c=e[a],u=CGe(c),d=n[u];if(d)o.push(d.promise);else{let h;c.extensions&&c.extensions[Br.KHR_DRACO_MESH_COMPRESSION]?h=s(c):h=J7(new sr,c,t),n[u]={primitive:c,promise:h},o.push(h)}}return Promise.all(o)}loadMesh(e){const t=this,i=this.json,n=this.extensions,s=i.meshes[e],o=s.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const u=o[l].material===void 0?TGe(this.cache):this.getDependency("material",o[l].material);a.push(u)}return a.push(t.loadGeometries(o)),Promise.all(a).then(function(l){const c=l.slice(0,l.length-1),u=l[l.length-1],d=[];for(let p=0,f=u.length;p<f;p++){const m=u[p],g=o[p];let v;const x=c[p];if(g.mode===_a.TRIANGLES||g.mode===_a.TRIANGLE_STRIP||g.mode===_a.TRIANGLE_FAN||g.mode===void 0)v=s.isSkinnedMesh===!0?new Ly(m,x):new mt(m,x),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),g.mode===_a.TRIANGLE_STRIP?v.geometry=$7(v.geometry,DA):g.mode===_a.TRIANGLE_FAN&&(v.geometry=$7(v.geometry,Fw));else if(g.mode===_a.LINES)v=new ga(m,x);else if(g.mode===_a.LINE_STRIP)v=new yn(m,x);else if(g.mode===_a.LINE_LOOP)v=new S_(m,x);else if(g.mode===_a.POINTS)v=new Kh(m,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+g.mode);Object.keys(v.geometry.morphAttributes).length>0&&EGe(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),ld(v,s),g.extensions&&Np(n,v,g),t.assignFinalMaterial(v),d.push(v)}for(let p=0,f=d.length;p<f;p++)t.associations.set(d[p],{meshes:e,primitives:p});if(d.length===1)return s.extensions&&Np(n,d[0],s),d[0];const h=new Oo;s.extensions&&Np(n,h,s),t.associations.set(h,{meshes:e});for(let p=0,f=d.length;p<f;p++)h.add(d[p]);return h})}loadCamera(e){let t;const i=this.json.cameras[e],n=i[i.type];if(!n){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new Yr($i.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):i.type==="orthographic"&&(t=new fa(-n.xmag,n.xmag,n.ymag,-n.ymag,n.znear,n.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),ld(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let n=0,s=t.joints.length;n<s;n++)i.push(this._loadNodeShallow(t.joints[n]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(n){const s=n.pop(),o=n,a=[],l=[];for(let c=0,u=o.length;c<u;c++){const d=o[c];if(d){a.push(d);const h=new St;s!==null&&h.fromArray(s.array,c*16),l.push(h)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[c])}return new Xh(a,l)})}loadAnimation(e){const t=this.json,i=this,n=t.animations[e],s=n.name?n.name:"animation_"+e,o=[],a=[],l=[],c=[],u=[];for(let d=0,h=n.channels.length;d<h;d++){const p=n.channels[d],f=n.samplers[p.sampler],m=p.target,g=m.node,v=n.parameters!==void 0?n.parameters[f.input]:f.input,x=n.parameters!==void 0?n.parameters[f.output]:f.output;m.node!==void 0&&(o.push(this.getDependency("node",g)),a.push(this.getDependency("accessor",v)),l.push(this.getDependency("accessor",x)),c.push(f),u.push(m))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(l),Promise.all(c),Promise.all(u)]).then(function(d){const h=d[0],p=d[1],f=d[2],m=d[3],g=d[4],v=[];for(let x=0,b=h.length;x<b;x++){const w=h[x],_=p[x],S=f[x],T=m[x],M=g[x];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const E=i._createAnimationTracks(w,_,S,T,M);if(E)for(let C=0;C<E.length;C++)v.push(E[C])}return new Gu(s,void 0,v)})}createNodeMesh(e){const t=this.json,i=this,n=t.nodes[e];return n.mesh===void 0?null:i.getDependency("mesh",n.mesh).then(function(s){const o=i._getNodeRef(i.meshCache,n.mesh,s);return n.weights!==void 0&&o.traverse(function(a){if(a.isMesh)for(let l=0,c=n.weights.length;l<c;l++)a.morphTargetInfluences[l]=n.weights[l]}),o})}loadNode(e){const t=this.json,i=this,n=t.nodes[e],s=i._loadNodeShallow(e),o=[],a=n.children||[];for(let c=0,u=a.length;c<u;c++)o.push(i.getDependency("node",a[c]));const l=n.skin===void 0?Promise.resolve(null):i.getDependency("skin",n.skin);return Promise.all([s,Promise.all(o),l]).then(function(c){const u=c[0],d=c[1],h=c[2];h!==null&&u.traverse(function(p){p.isSkinnedMesh&&p.bind(h,NGe)});for(let p=0,f=d.length;p<f;p++)u.add(d[p]);return u})}_loadNodeShallow(e){const t=this.json,i=this.extensions,n=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],o=s.name?n.createUniqueName(s.name):"",a=[],l=n._invokeOne(function(c){return c.createNodeMesh&&c.createNodeMesh(e)});return l&&a.push(l),s.camera!==void 0&&a.push(n.getDependency("camera",s.camera).then(function(c){return n._getNodeRef(n.cameraCache,s.camera,c)})),n._invokeAll(function(c){return c.createNodeAttachment&&c.createNodeAttachment(e)}).forEach(function(c){a.push(c)}),this.nodeCache[e]=Promise.all(a).then(function(c){let u;if(s.isBone===!0?u=new $h:c.length>1?u=new Oo:c.length===1?u=c[0]:u=new nr,u!==c[0])for(let d=0,h=c.length;d<h;d++)u.add(c[d]);if(s.name&&(u.userData.name=s.name,u.name=o),ld(u,s),s.extensions&&Np(i,u,s),s.matrix!==void 0){const d=new St;d.fromArray(s.matrix),u.applyMatrix4(d)}else s.translation!==void 0&&u.position.fromArray(s.translation),s.rotation!==void 0&&u.quaternion.fromArray(s.rotation),s.scale!==void 0&&u.scale.fromArray(s.scale);return n.associations.has(u)||n.associations.set(u,{}),n.associations.get(u).nodes=e,u}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],n=this,s=new Oo;i.name&&(s.name=n.createUniqueName(i.name)),ld(s,i),i.extensions&&Np(t,s,i);const o=i.nodes||[],a=[];for(let l=0,c=o.length;l<c;l++)a.push(n.getDependency("node",o[l]));return Promise.all(a).then(function(l){for(let u=0,d=l.length;u<d;u++)s.add(l[u]);const c=u=>{const d=new Map;for(const[h,p]of n.associations)(h instanceof Wr||h instanceof Nr)&&d.set(h,p);return u.traverse(h=>{const p=n.associations.get(h);p!=null&&d.set(h,p)}),d};return n.associations=c(s),s})}_createAnimationTracks(e,t,i,n,s){const o=[],a=e.name?e.name:e.uuid,l=[];ad[s.path]===ad.weights?e.traverse(function(h){h.morphTargetInfluences&&l.push(h.name?h.name:h.uuid)}):l.push(a);let c;switch(ad[s.path]){case ad.weights:c=zu;break;case ad.rotation:c=Ec;break;case ad.position:case ad.scale:c=Vu;break;default:switch(i.itemSize){case 1:c=zu;break;case 2:case 3:default:c=Vu;break}break}const u=n.interpolation!==void 0?SGe[n.interpolation]:Rh,d=this._getArrayFromAccessor(i);for(let h=0,p=l.length;h<p;h++){const f=new c(l[h]+"."+ad[s.path],t.array,d,u);n.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(f),o.push(f)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const i=iO(t.constructor),n=new Float32Array(t.length);for(let s=0,o=t.length;s<o;s++)n[s]=t[s]*i;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(t){const i=this instanceof Ec?_Ge:K7;return new i(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function kGe(r,e,t){const i=e.attributes,n=new On;if(i.POSITION!==void 0){const a=t.json.accessors[i.POSITION],l=a.min,c=a.max;if(l!==void 0&&c!==void 0){if(n.set(new oe(l[0],l[1],l[2]),new oe(c[0],c[1],c[2])),a.normalized){const u=iO(Ng[a.componentType]);n.min.multiplyScalar(u),n.max.multiplyScalar(u)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const a=new oe,l=new oe;for(let c=0,u=s.length;c<u;c++){const d=s[c];if(d.POSITION!==void 0){const h=t.json.accessors[d.POSITION],p=h.min,f=h.max;if(p!==void 0&&f!==void 0){if(l.setX(Math.max(Math.abs(p[0]),Math.abs(f[0]))),l.setY(Math.max(Math.abs(p[1]),Math.abs(f[1]))),l.setZ(Math.max(Math.abs(p[2]),Math.abs(f[2]))),h.normalized){const m=iO(Ng[h.componentType]);l.multiplyScalar(m)}a.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}n.expandByVector(a)}r.boundingBox=n;const o=new Ls;n.getCenter(o.center),o.radius=n.min.distanceTo(n.max)/2,r.boundingSphere=o}function J7(r,e,t){const i=e.attributes,n=[];function s(o,a){return t.getDependency("accessor",o).then(function(l){r.setAttribute(a,l)})}for(const o in i){const a=eO[o]||o.toLowerCase();a in r.attributes||n.push(s(i[o],a))}if(e.indices!==void 0&&!r.index){const o=t.getDependency("accessor",e.indices).then(function(a){r.setIndex(a)});n.push(o)}return Hr.workingColorSpace!==li&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${Hr.workingColorSpace}" not supported.`),ld(r,e),kGe(r,e,t),Promise.all(n).then(function(){return e.targets!==void 0?MGe(r,e.targets,t):r})}const nO=new WeakMap;class LGe extends Fi{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,n){const s=new In(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,o=>{this.parse(o,t,n)},i,n)}parse(e,t,i){this.decodeDracoFile(e,t,null,null,Lt).catch(i)}decodeDracoFile(e,t,i,n,s=li){const o={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!i,vertexColorSpace:s};return this.decodeGeometry(e,o).then(t)}decodeGeometry(e,t){const i=JSON.stringify(t);if(nO.has(e)){const l=nO.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let n;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then(l=>(n=l,new Promise((c,u)=>{n._callbacks[s]={resolve:c,reject:u},n.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return a.catch(()=>!0).then(()=>{n&&s&&this._releaseTask(n,s)}),nO.set(e,{key:i,promise:a}),a}_createGeometry(e){const t=new sr;e.index&&t.setIndex(new jr(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const n=e.attributes[i],s=n.name,o=n.array,a=n.itemSize,l=new jr(o,a);s==="color"&&(this._assignVertexColorSpace(l,n.vertexColorSpace),l.normalized=!(o instanceof Float32Array)),t.setAttribute(s,l)}return t}_assignVertexColorSpace(e,t){if(t!==Lt)return;const i=new at;for(let n=0,s=e.count;n<s;n++)i.fromBufferAttribute(e,n).convertSRGBToLinear(),e.setXYZ(n,i.r,i.g,i.b)}_loadLibrary(e,t){const i=new In(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((n,s)=>{i.load(e,n,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const n=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=OGe.toString(),o=["/* draco decoder */",n,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([o]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const n=new Worker(this.workerSourceURL);n._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(s){const o=s.data;switch(o.type){case"decode":n._callbacks[o.id].resolve(o);break;case"error":n._callbacks[o.id].reject(o);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+o.type+'"')}},this.workerPool.push(n)}else this.workerPool.sort(function(n,s){return n._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function OGe(){let r,e;onmessage=function(o){const a=o.data;switch(a.type){case"init":r=a.decoderConfig,e=new Promise(function(u){r.onModuleLoaded=function(d){u({draco:d})},DracoDecoderModule(r)});break;case"decode":const l=a.buffer,c=a.taskConfig;e.then(u=>{const d=u.draco,h=new d.Decoder;try{const p=t(d,h,new Int8Array(l),c),f=p.attributes.map(m=>m.array.buffer);p.index&&f.push(p.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:p},f)}catch(p){console.error(p),self.postMessage({type:"error",id:a.id,error:p.message})}finally{d.destroy(h)}});break}};function t(o,a,l,c){const u=c.attributeIDs,d=c.attributeTypes;let h,p;const f=a.GetEncodedGeometryType(l);if(f===o.TRIANGULAR_MESH)h=new o.Mesh,p=a.DecodeArrayToMesh(l,l.byteLength,h);else if(f===o.POINT_CLOUD)h=new o.PointCloud,p=a.DecodeArrayToPointCloud(l,l.byteLength,h);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!p.ok()||h.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+p.error_msg());const m={index:null,attributes:[]};for(const g in u){const v=self[d[g]];let x,b;if(c.useUniqueIDs)b=u[g],x=a.GetAttributeByUniqueId(h,b);else{if(b=a.GetAttributeId(h,o[u[g]]),b===-1)continue;x=a.GetAttribute(h,b)}const w=n(o,a,h,g,v,x);g==="color"&&(w.vertexColorSpace=c.vertexColorSpace),m.attributes.push(w)}return f===o.TRIANGULAR_MESH&&(m.index=i(o,a,h)),o.destroy(h),m}function i(o,a,l){const c=l.num_faces()*3,u=c*4,d=o._malloc(u);a.GetTrianglesUInt32Array(l,u,d);const h=new Uint32Array(o.HEAPF32.buffer,d,c).slice();return o._free(d),{array:h,itemSize:1}}function n(o,a,l,c,u,d){const h=d.num_components(),p=l.num_points()*h,f=p*u.BYTES_PER_ELEMENT,m=s(o,u),g=o._malloc(f);a.GetAttributeDataArrayForAllPoints(l,d,m,f,g);const v=new u(o.HEAPF32.buffer,g,p).slice();return o._free(g),{name:c,array:v,itemSize:h}}function s(o,a){switch(a){case Float32Array:return o.DT_FLOAT32;case Int8Array:return o.DT_INT8;case Int16Array:return o.DT_INT16;case Int32Array:return o.DT_INT32;case Uint8Array:return o.DT_UINT8;case Uint16Array:return o.DT_UINT16;case Uint32Array:return o.DT_UINT32}}}var Q7=function(r){return URL.createObjectURL(new Blob([r],{type:"text/javascript"}))};try{URL.revokeObjectURL(Q7(""))}catch{Q7=function(r){return"data:application/javascript;charset=UTF-8,"+encodeURI(r)}}var Sa=Uint8Array,cd=Uint16Array,sO=Uint32Array,eX=new Sa([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),tX=new Sa([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),PGe=new Sa([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rX=function(r,e){for(var t=new cd(31),i=0;i<31;++i)t[i]=e+=1<<r[i-1];for(var n=new sO(t[30]),i=1;i<30;++i)for(var s=t[i];s<t[i+1];++s)n[s]=s-t[i]<<5|i;return[t,n]},iX=rX(eX,2),nX=iX[0],IGe=iX[1];nX[28]=258,IGe[258]=28;for(var DGe=rX(tX,0),UGe=DGe[0],oO=new cd(32768),wi=0;wi<32768;++wi){var ud=(wi&43690)>>>1|(wi&21845)<<1;ud=(ud&52428)>>>2|(ud&13107)<<2,ud=(ud&61680)>>>4|(ud&3855)<<4,oO[wi]=((ud&65280)>>>8|(ud&255)<<8)>>>1}for(var Ib=function(r,e,t){for(var i=r.length,n=0,s=new cd(e);n<i;++n)++s[r[n]-1];var o=new cd(e);for(n=0;n<e;++n)o[n]=o[n-1]+s[n-1]<<1;var a;if(t){a=new cd(1<<e);var l=15-e;for(n=0;n<i;++n)if(r[n])for(var c=n<<4|r[n],u=e-r[n],d=o[r[n]-1]++<<u,h=d|(1<<u)-1;d<=h;++d)a[oO[d]>>>l]=c}else for(a=new cd(i),n=0;n<i;++n)r[n]&&(a[n]=oO[o[r[n]-1]++]>>>15-r[n]);return a},Db=new Sa(288),wi=0;wi<144;++wi)Db[wi]=8;for(var wi=144;wi<256;++wi)Db[wi]=9;for(var wi=256;wi<280;++wi)Db[wi]=7;for(var wi=280;wi<288;++wi)Db[wi]=8;for(var sX=new Sa(32),wi=0;wi<32;++wi)sX[wi]=5;var FGe=Ib(Db,9,1),BGe=Ib(sX,5,1),aO=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},sl=function(r,e,t){var i=e/8|0;return(r[i]|r[i+1]<<8)>>(e&7)&t},lO=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},zGe=function(r){return(r/8|0)+(r&7&&1)},VGe=function(r,e,t){(e==null||e<0)&&(e=0),(t==null||t>r.length)&&(t=r.length);var i=new(r instanceof cd?cd:r instanceof sO?sO:Sa)(t-e);return i.set(r.subarray(e,t)),i},GGe=function(r,e,t){var i=r.length;if(!i||t&&!t.l&&i<5)return e||new Sa(0);var n=!e||t,s=!t||t.i;t||(t={}),e||(e=new Sa(i*3));var o=function(de){var K=e.length;if(de>K){var q=new Sa(Math.max(K*2,de));q.set(e),e=q}},a=t.f||0,l=t.p||0,c=t.b||0,u=t.l,d=t.d,h=t.m,p=t.n,f=i*8;do{if(!u){t.f=a=sl(r,l,1);var m=sl(r,l+1,3);if(l+=3,m)if(m==1)u=FGe,d=BGe,h=9,p=5;else if(m==2){var g=sl(r,l,31)+257,v=sl(r,l+10,15)+4,x=g+sl(r,l+5,31)+1;l+=14;for(var b=new Sa(x),w=new Sa(19),_=0;_<v;++_)w[PGe[_]]=sl(r,l+_*3,7);l+=v*3;for(var S=aO(w),T=(1<<S)-1,M=Ib(w,S,1),_=0;_<x;){var E=M[sl(r,l,T)];l+=E&15;var C=E>>>4;if(C<16)b[_++]=C;else{var P=0,A=0;for(C==16?(A=3+sl(r,l,3),l+=2,P=b[_-1]):C==17?(A=3+sl(r,l,7),l+=3):C==18&&(A=11+sl(r,l,127),l+=7);A--;)b[_++]=P}}var N=b.subarray(0,g),R=b.subarray(g);h=aO(N),p=aO(R),u=Ib(N,h,1),d=Ib(R,p,1)}else throw"invalid block type";else{var C=zGe(l)+4,F=r[C-4]|r[C-3]<<8,B=C+F;if(B>i){if(s)throw"unexpected EOF";break}n&&o(c+F),e.set(r.subarray(C,B),c),t.b=c+=F,t.p=l=B*8;continue}if(l>f){if(s)throw"unexpected EOF";break}}n&&o(c+131072);for(var k=(1<<h)-1,z=(1<<p)-1,O=l;;O=l){var P=u[lO(r,l)&k],V=P>>>4;if(l+=P&15,l>f){if(s)throw"unexpected EOF";break}if(!P)throw"invalid length/literal";if(V<256)e[c++]=V;else if(V==256){O=l,u=null;break}else{var U=V-254;if(V>264){var _=V-257,G=eX[_];U=sl(r,l,(1<<G)-1)+nX[_],l+=G}var X=d[lO(r,l)&z],ie=X>>>4;if(!X)throw"invalid distance";l+=X&15;var R=UGe[ie];if(ie>3){var G=tX[ie];R+=lO(r,l)&(1<<G)-1,l+=G}if(l>f){if(s)throw"unexpected EOF";break}n&&o(c+131072);for(var se=c+U;c<se;c+=4)e[c]=e[c-R],e[c+1]=e[c+1-R],e[c+2]=e[c+2-R],e[c+3]=e[c+3-R];c=se}}t.l=u,t.p=O,t.b=c,u&&(a=1,t.m=h,t.d=d,t.n=p)}while(!a);return c==e.length?e:VGe(e,0,c)},jGe=new Sa(0),HGe=function(r){if((r[0]&15)!=8||r[0]>>>4>7||(r[0]<<8|r[1])%31)throw"invalid zlib data";if(r[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function WGe(r,e){return GGe((HGe(r),r.subarray(2,-4)),e)}var $Ge=typeof TextDecoder<"u"&&new TextDecoder,XGe=0;try{$Ge.decode(jGe,{stream:!0}),XGe=1}catch{}function oX(r,e,t){const i=t.length-r-1;if(e>=t[i])return i-1;if(e<=t[r])return r;let n=r,s=i,o=Math.floor((n+s)/2);for(;e<t[o]||e>=t[o+1];)e<t[o]?s=o:n=o,o=Math.floor((n+s)/2);return o}function qGe(r,e,t,i){const n=[],s=[],o=[];n[0]=1;for(let a=1;a<=t;++a){s[a]=e-i[r+1-a],o[a]=i[r+a]-e;let l=0;for(let c=0;c<a;++c){const u=o[c+1],d=s[a-c],h=n[c]/(u+d);n[c]=l+u*h,l=d*h}n[a]=l}return n}function KGe(r,e,t,i){const n=oX(r,i,e),s=qGe(n,i,r,e),o=new jt(0,0,0,0);for(let a=0;a<=r;++a){const l=t[n-r+a],c=s[a],u=l.w*c;o.x+=l.x*u,o.y+=l.y*u,o.z+=l.z*u,o.w+=l.w*c}return o}function YGe(r,e,t,i,n){const s=[];for(let d=0;d<=t;++d)s[d]=0;const o=[];for(let d=0;d<=i;++d)o[d]=s.slice(0);const a=[];for(let d=0;d<=t;++d)a[d]=s.slice(0);a[0][0]=1;const l=s.slice(0),c=s.slice(0);for(let d=1;d<=t;++d){l[d]=e-n[r+1-d],c[d]=n[r+d]-e;let h=0;for(let p=0;p<d;++p){const f=c[p+1],m=l[d-p];a[d][p]=f+m;const g=a[p][d-1]/a[d][p];a[p][d]=h+f*g,h=m*g}a[d][d]=h}for(let d=0;d<=t;++d)o[0][d]=a[d][t];for(let d=0;d<=t;++d){let h=0,p=1;const f=[];for(let m=0;m<=t;++m)f[m]=s.slice(0);f[0][0]=1;for(let m=1;m<=i;++m){let g=0;const v=d-m,x=t-m;d>=m&&(f[p][0]=f[h][0]/a[x+1][v],g=f[p][0]*a[v][x]);const b=v>=-1?1:-v,w=d-1<=x?m-1:t-d;for(let S=b;S<=w;++S)f[p][S]=(f[h][S]-f[h][S-1])/a[x+1][v+S],g+=f[p][S]*a[v+S][x];d<=x&&(f[p][m]=-f[h][m-1]/a[x+1][d],g+=f[p][m]*a[d][x]),o[m][d]=g;const _=h;h=p,p=_}}let u=t;for(let d=1;d<=i;++d){for(let h=0;h<=t;++h)o[d][h]*=u;u*=t-d}return o}function ZGe(r,e,t,i,n){const s=n<r?n:r,o=[],a=oX(r,i,e),l=YGe(a,i,r,s,e),c=[];for(let u=0;u<t.length;++u){const d=t[u].clone(),h=d.w;d.x*=h,d.y*=h,d.z*=h,c[u]=d}for(let u=0;u<=s;++u){const d=c[a-r].clone().multiplyScalar(l[u][0]);for(let h=1;h<=r;++h)d.add(c[a-r+h].clone().multiplyScalar(l[u][h]));o[u]=d}for(let u=s+1;u<=n+1;++u)o[u]=new jt(0,0,0);return o}function JGe(r,e){let t=1;for(let n=2;n<=r;++n)t*=n;let i=1;for(let n=2;n<=e;++n)i*=n;for(let n=2;n<=r-e;++n)i*=n;return t/i}function QGe(r){const e=r.length,t=[],i=[];for(let s=0;s<e;++s){const o=r[s];t[s]=new oe(o.x,o.y,o.z),i[s]=o.w}const n=[];for(let s=0;s<e;++s){const o=t[s].clone();for(let a=1;a<=s;++a)o.sub(n[s-a].clone().multiplyScalar(JGe(s,a)*i[a]));n[s]=o.divideScalar(i[0])}return n}function eje(r,e,t,i,n){const s=ZGe(r,e,t,i,n);return QGe(s)}class tje extends va{constructor(e,t,i,n,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=n||0,this.endKnot=s||this.knots.length-1;for(let o=0;o<i.length;++o){const a=i[o];this.controlPoints[o]=new jt(a.x,a.y,a.z,a.w)}}getPoint(e,t=new oe){const i=t,n=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=KGe(this.degree,this.knots,this.controlPoints,n);return s.w!==1&&s.divideScalar(s.w),i.set(s.x,s.y,s.z)}getTangent(e,t=new oe){const i=t,n=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=eje(this.degree,this.knots,this.controlPoints,n,1);return i.copy(s[1]).normalize(),i}}let Ir,en,mo;class rje extends Fi{constructor(e){super(e)}load(e,t,i,n){const s=this,o=s.path===""?Rc.extractUrlBase(e):s.path,a=new In(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(l,o))}catch(c){n?n(c):console.error(c),s.manager.itemError(e)}},i,n)}parse(e,t){if(lje(e))Ir=new aje().parse(e);else{const n=hX(e);if(!cje(n))throw new Error("THREE.FBXLoader: Unknown format.");if(cX(n)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+cX(n));Ir=new oje().parse(n)}const i=new G_(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new ije(i,this.manager).parse(Ir)}}class ije{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){en=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),n=this.parseDeformers(),s=new nje().parse(n);return this.parseScene(n,s,i),mo}parseConnections(){const e=new Map;return"Connections"in Ir&&Ir.Connections.connections.forEach(function(t){const i=t[0],n=t[1],s=t[2];e.has(i)||e.set(i,{parents:[],children:[]});const o={ID:n,relationship:s};e.get(i).parents.push(o),e.has(n)||e.set(n,{parents:[],children:[]});const a={ID:i,relationship:s};e.get(n).children.push(a)}),e}parseImages(){const e={},t={};if("Video"in Ir.Objects){const i=Ir.Objects.Video;for(const n in i){const s=i[n],o=parseInt(n);if(e[o]=s.RelativeFilename||s.Filename,"Content"in s){const a=s.Content instanceof ArrayBuffer&&s.Content.byteLength>0,l=typeof s.Content=="string"&&s.Content!=="";if(a||l){const c=this.parseImage(i[n]);t[s.RelativeFilename||s.Filename]=c}}}}for(const i in e){const n=e[i];t[n]!==void 0?e[i]=t[n]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,n=i.slice(i.lastIndexOf(".")+1).toLowerCase();let s;switch(n){case"bmp":s="image/bmp";break;case"jpg":case"jpeg":s="image/jpeg";break;case"png":s="image/png";break;case"tif":s="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),s="image/tga";break;default:console.warn('FBXLoader: Image type "'+n+'" is not supported.');return}if(typeof t=="string")return"data:"+s+";base64,"+t;{const o=new Uint8Array(t);return window.URL.createObjectURL(new Blob([o],{type:s}))}}parseTextures(e){const t=new Map;if("Texture"in Ir.Objects){const i=Ir.Objects.Texture;for(const n in i){const s=this.parseTexture(i[n],e);t.set(parseInt(n),s)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const n=e.WrapModeU,s=e.WrapModeV,o=n!==void 0?n.value:0,a=s!==void 0?s.value:0;if(i.wrapS=o===0?ds:Mi,i.wrapT=a===0?ds:Mi,"Scaling"in e){const l=e.Scaling.value;i.repeat.x=l[0],i.repeat.y=l[1]}if("Translation"in e){const l=e.Translation.value;i.offset.x=l[0],i.offset.y=l[1]}return i}loadTexture(e,t){let i;const n=this.textureLoader.path,s=en.get(e.id).children;s!==void 0&&s.length>0&&t[s[0].ID]!==void 0&&(i=t[s[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let o;const a=e.FileName.slice(-3).toLowerCase();if(a==="tga"){const l=this.manager.getHandler(".tga");l===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new Nr):(l.setPath(this.textureLoader.path),o=l.load(i))}else a==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new Nr):o=this.textureLoader.load(i);return this.textureLoader.setPath(n),o}parseMaterials(e){const t=new Map;if("Material"in Ir.Objects){const i=Ir.Objects.Material;for(const n in i){const s=this.parseMaterial(i[n],e);s!==null&&t.set(parseInt(n),s)}}return t}parseMaterial(e,t){const i=e.id,n=e.attrName;let s=e.ShadingModel;if(typeof s=="object"&&(s=s.value),!en.has(i))return null;const o=this.parseParameters(e,t,i);let a;switch(s.toLowerCase()){case"phong":a=new Bu;break;case"lambert":a=new qm;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new Bu;break}return a.setValues(o),a.name=n,a}parseParameters(e,t,i){const n={};e.BumpFactor&&(n.bumpScale=e.BumpFactor.value),e.Diffuse?n.color=new at().fromArray(e.Diffuse.value).convertSRGBToLinear():e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(n.color=new at().fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(n.displacementScale=e.DisplacementFactor.value),e.Emissive?n.emissive=new at().fromArray(e.Emissive.value).convertSRGBToLinear():e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(n.emissive=new at().fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(n.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(n.opacity=parseFloat(e.Opacity.value)),n.opacity<1&&(n.transparent=!0),e.ReflectionFactor&&(n.reflectivity=e.ReflectionFactor.value),e.Shininess&&(n.shininess=e.Shininess.value),e.Specular?n.specular=new at().fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&e.SpecularColor.type==="Color"&&(n.specular=new at().fromArray(e.SpecularColor.value).convertSRGBToLinear());const s=this;return en.get(i).children.forEach(function(o){const a=o.relationship;switch(a){case"Bump":n.bumpMap=s.getTexture(t,o.ID);break;case"Maya|TEX_ao_map":n.aoMap=s.getTexture(t,o.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":n.map=s.getTexture(t,o.ID),n.map!==void 0&&(n.map.colorSpace=Lt);break;case"DisplacementColor":n.displacementMap=s.getTexture(t,o.ID);break;case"EmissiveColor":n.emissiveMap=s.getTexture(t,o.ID),n.emissiveMap!==void 0&&(n.emissiveMap.colorSpace=Lt);break;case"NormalMap":case"Maya|TEX_normal_map":n.normalMap=s.getTexture(t,o.ID);break;case"ReflectionColor":n.envMap=s.getTexture(t,o.ID),n.envMap!==void 0&&(n.envMap.mapping=ja,n.envMap.colorSpace=Lt);break;case"SpecularColor":n.specularMap=s.getTexture(t,o.ID),n.specularMap!==void 0&&(n.specularMap.colorSpace=Lt);break;case"TransparentColor":case"TransparencyFactor":n.alphaMap=s.getTexture(t,o.ID),n.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",a);break}}),n}getTexture(e,t){return"LayeredTexture"in Ir.Objects&&t in Ir.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=en.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Ir.Objects){const i=Ir.Objects.Deformer;for(const n in i){const s=i[n],o=en.get(parseInt(n));if(s.attrType==="Skin"){const a=this.parseSkeleton(o,i);a.ID=n,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[n]=a}else if(s.attrType==="BlendShape"){const a={id:n};a.rawTargets=this.parseMorphTargets(o,i),a.id=n,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[n]=a}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(n){const s=t[n.ID];if(s.attrType!=="Cluster")return;const o={ID:n.ID,indices:[],weights:[],transformLink:new St().fromArray(s.TransformLink.a)};"Indexes"in s&&(o.indices=s.Indexes.a,o.weights=s.Weights.a),i.push(o)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let n=0;n<e.children.length;n++){const s=e.children[n],o=t[s.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if(o.attrType!=="BlendShapeChannel")return;a.geoID=en.get(parseInt(s.ID)).children.filter(function(l){return l.relationship===void 0})[0].ID,i.push(a)}return i}parseScene(e,t,i){mo=new Oo;const n=this.parseModels(e.skeletons,t,i),s=Ir.Objects.Model,o=this;n.forEach(function(l){const c=s[l.ID];o.setLookAtProperties(l,c),en.get(l.ID).parents.forEach(function(u){const d=n.get(u.ID);d!==void 0&&d.add(l)}),l.parent===null&&mo.add(l)}),this.bindSkeleton(e.skeletons,t,n),this.createAmbientLight(),mo.traverse(function(l){if(l.userData.transformData){l.parent&&(l.userData.transformData.parentMatrix=l.parent.matrix,l.userData.transformData.parentMatrixWorld=l.parent.matrixWorld);const c=uX(l.userData.transformData);l.applyMatrix4(c),l.updateWorldMatrix()}});const a=new sje().parse();mo.children.length===1&&mo.children[0].isGroup&&(mo.children[0].animations=a,mo=mo.children[0]),mo.animations=a}parseModels(e,t,i){const n=new Map,s=Ir.Objects.Model;for(const o in s){const a=parseInt(o),l=s[o],c=en.get(a);let u=this.buildSkeleton(c,e,a,l.attrName);if(!u){switch(l.attrType){case"Camera":u=this.createCamera(c);break;case"Light":u=this.createLight(c);break;case"Mesh":u=this.createMesh(c,t,i);break;case"NurbsCurve":u=this.createCurve(c,t);break;case"LimbNode":case"Root":u=new $h;break;case"Null":default:u=new Oo;break}u.name=l.attrName?kr.sanitizeNodeName(l.attrName):"",u.userData.originalName=l.attrName,u.ID=a}this.getTransformData(u,l),n.set(a,u)}return n}buildSkeleton(e,t,i,n){let s=null;return e.parents.forEach(function(o){for(const a in t){const l=t[a];l.rawBones.forEach(function(c,u){if(c.ID===o.ID){const d=s;s=new $h,s.matrixWorld.copy(c.transformLink),s.name=n?kr.sanitizeNodeName(n):"",s.userData.originalName=n,s.ID=i,l.bones[u]=s,d!==null&&s.add(d)}})}}),s}createCamera(e){let t,i;if(e.children.forEach(function(n){const s=Ir.Objects.NodeAttribute[n.ID];s!==void 0&&(i=s)}),i===void 0)t=new nr;else{let n=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(n=1);let s=1;i.NearPlane!==void 0&&(s=i.NearPlane.value/1e3);let o=1e3;i.FarPlane!==void 0&&(o=i.FarPlane.value/1e3);let a=window.innerWidth,l=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(a=i.AspectWidth.value,l=i.AspectHeight.value);const c=a/l;let u=45;i.FieldOfView!==void 0&&(u=i.FieldOfView.value);const d=i.FocalLength?i.FocalLength.value:null;switch(n){case 0:t=new Yr(u,c,s,o),d!==null&&t.setFocalLength(d);break;case 1:t=new fa(-a/2,a/2,l/2,-l/2,s,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+n+"."),t=new nr;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(n){const s=Ir.Objects.NodeAttribute[n.ID];s!==void 0&&(i=s)}),i===void 0)t=new nr;else{let n;i.LightType===void 0?n=0:n=i.LightType.value;let s=16777215;i.Color!==void 0&&(s=new at().fromArray(i.Color.value).convertSRGBToLinear());let o=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(o=0);let a=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?a=0:a=i.FarAttenuationEnd.value);const l=1;switch(n){case 0:t=new Il(s,o,a,l);break;case 1:t=new Dl(s,o);break;case 2:let c=Math.PI/3;i.InnerAngle!==void 0&&(c=$i.degToRad(i.InnerAngle.value));let u=0;i.OuterAngle!==void 0&&(u=$i.degToRad(i.OuterAngle.value),u=Math.max(u,1)),t=new Pl(s,o,a,c,u,l);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new Il(s,o);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let n,s=null,o=null;const a=[];return e.children.forEach(function(l){t.has(l.ID)&&(s=t.get(l.ID)),i.has(l.ID)&&a.push(i.get(l.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new Bu({name:Fi.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach(function(l){l.vertexColors=!0}),s.FBX_Deformer?(n=new Ly(s,o),n.normalizeSkinWeights()):n=new mt(s,o),n}createCurve(e,t){const i=e.children.reduce(function(s,o){return t.has(o.ID)&&(s=t.get(o.ID)),s},null),n=new Ki({name:Fi.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new yn(i,n)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=dX(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&en.get(e.ID).children.forEach(function(i){if(i.relationship==="LookAtProperty"){const n=Ir.Objects.Model[i.ID];if("Lcl_Translation"in n){const s=n.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(s),mo.add(e.target)):e.lookAt(new oe().fromArray(s))}}})}bindSkeleton(e,t,i){const n=this.parsePoseNodes();for(const s in e){const o=e[s];en.get(parseInt(o.ID)).parents.forEach(function(a){if(t.has(a.ID)){const l=a.ID;en.get(l).parents.forEach(function(c){i.has(c.ID)&&i.get(c.ID).bind(new Xh(o.bones),n[c.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in Ir.Objects){const t=Ir.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const n=t[i].PoseNode;Array.isArray(n)?n.forEach(function(s){e[s.Node]=new St().fromArray(s.Matrix.a)}):e[n.Node]=new St().fromArray(n.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Ir&&"AmbientColor"in Ir.GlobalSettings){const e=Ir.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],n=e[2];if(t!==0||i!==0||n!==0){const s=new at(t,i,n).convertSRGBToLinear();mo.add(new np(s,1))}}}}class nje{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in Ir.Objects){const i=Ir.Objects.Geometry;for(const n in i){const s=en.get(parseInt(n)),o=this.parseGeometry(s,i[n],e);t.set(parseInt(n),o)}}return this.negativeMaterialIndices===!0&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const n=i.skeletons,s=[],o=e.parents.map(function(d){return Ir.Objects.Model[d.ID]});if(o.length===0)return;const a=e.children.reduce(function(d,h){return n[h.ID]!==void 0&&(d=n[h.ID]),d},null);e.children.forEach(function(d){i.morphTargets[d.ID]!==void 0&&s.push(i.morphTargets[d.ID])});const l=o[0],c={};"RotationOrder"in l&&(c.eulerOrder=dX(l.RotationOrder.value)),"InheritType"in l&&(c.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(c.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(c.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(c.scale=l.GeometricScaling.value);const u=uX(c);return this.genGeometry(t,a,s,u)}genGeometry(e,t,i,n){const s=new sr;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),l=new Rt(a.vertex,3);if(l.applyMatrix4(n),s.setAttribute("position",l),a.colors.length>0&&s.setAttribute("color",new Rt(a.colors,3)),t&&(s.setAttribute("skinIndex",new Ty(a.weightsIndices,4)),s.setAttribute("skinWeight",new Rt(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const c=new hr().getNormalMatrix(n),u=new Rt(a.normal,3);u.applyNormalMatrix(c),s.setAttribute("normal",u)}if(a.uvs.forEach(function(c,u){const d=u===0?"uv":`uv${u}`;s.setAttribute(d,new Rt(a.uvs[u],2))}),o.material&&o.material.mappingType!=="AllSame"){let c=a.materialIndex[0],u=0;if(a.materialIndex.forEach(function(d,h){d!==c&&(s.addGroup(u,h-u,c),c=d,u=h)}),s.groups.length>0){const d=s.groups[s.groups.length-1],h=d.start+d.count;h!==a.materialIndex.length&&s.addGroup(h,a.materialIndex.length-h,c)}s.groups.length===0&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,i,n),s}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let n=0;for(;e.LayerElementUV[n];)e.LayerElementUV[n].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[n])),n++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(n,s){n.indices.forEach(function(o,a){i.weightTable[o]===void 0&&(i.weightTable[o]=[]),i.weightTable[o].push({id:s,weight:n.weights[a]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,n=0,s=!1,o=[],a=[],l=[],c=[],u=[],d=[];const h=this;return e.vertexIndices.forEach(function(p,f){let m,g=!1;p<0&&(p=p^-1,g=!0);let v=[],x=[];if(o.push(p*3,p*3+1,p*3+2),e.color){const b=k2(f,i,p,e.color);l.push(b[0],b[1],b[2])}if(e.skeleton){if(e.weightTable[p]!==void 0&&e.weightTable[p].forEach(function(b){x.push(b.weight),v.push(b.id)}),x.length>4){s||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),s=!0);const b=[0,0,0,0],w=[0,0,0,0];x.forEach(function(_,S){let T=_,M=v[S];w.forEach(function(E,C,P){if(T>E){P[C]=T,T=E;const A=b[C];b[C]=M,M=A}})}),v=b,x=w}for(;x.length<4;)x.push(0),v.push(0);for(let b=0;b<4;++b)u.push(x[b]),d.push(v[b])}if(e.normal){const b=k2(f,i,p,e.normal);a.push(b[0],b[1],b[2])}e.material&&e.material.mappingType!=="AllSame"&&(m=k2(f,i,p,e.material)[0],m<0&&(h.negativeMaterialIndices=!0,m=0)),e.uv&&e.uv.forEach(function(b,w){const _=k2(f,i,p,b);c[w]===void 0&&(c[w]=[]),c[w].push(_[0]),c[w].push(_[1])}),n++,g&&(n>4&&console.warn("THREE.FBXLoader: Polygons with more than four sides are not supported. Make sure to triangulate the geometry during export."),h.genFace(t,e,o,m,a,l,c,u,d,n),i++,n=0,o=[],a=[],l=[],c=[],u=[],d=[])}),t}genFace(e,t,i,n,s,o,a,l,c,u){for(let d=2;d<u;d++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[(d-1)*3]]),e.vertex.push(t.vertexPositions[i[(d-1)*3+1]]),e.vertex.push(t.vertexPositions[i[(d-1)*3+2]]),e.vertex.push(t.vertexPositions[i[d*3]]),e.vertex.push(t.vertexPositions[i[d*3+1]]),e.vertex.push(t.vertexPositions[i[d*3+2]]),t.skeleton&&(e.vertexWeights.push(l[0]),e.vertexWeights.push(l[1]),e.vertexWeights.push(l[2]),e.vertexWeights.push(l[3]),e.vertexWeights.push(l[(d-1)*4]),e.vertexWeights.push(l[(d-1)*4+1]),e.vertexWeights.push(l[(d-1)*4+2]),e.vertexWeights.push(l[(d-1)*4+3]),e.vertexWeights.push(l[d*4]),e.vertexWeights.push(l[d*4+1]),e.vertexWeights.push(l[d*4+2]),e.vertexWeights.push(l[d*4+3]),e.weightsIndices.push(c[0]),e.weightsIndices.push(c[1]),e.weightsIndices.push(c[2]),e.weightsIndices.push(c[3]),e.weightsIndices.push(c[(d-1)*4]),e.weightsIndices.push(c[(d-1)*4+1]),e.weightsIndices.push(c[(d-1)*4+2]),e.weightsIndices.push(c[(d-1)*4+3]),e.weightsIndices.push(c[d*4]),e.weightsIndices.push(c[d*4+1]),e.weightsIndices.push(c[d*4+2]),e.weightsIndices.push(c[d*4+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[(d-1)*3]),e.colors.push(o[(d-1)*3+1]),e.colors.push(o[(d-1)*3+2]),e.colors.push(o[d*3]),e.colors.push(o[d*3+1]),e.colors.push(o[d*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(s[0]),e.normal.push(s[1]),e.normal.push(s[2]),e.normal.push(s[(d-1)*3]),e.normal.push(s[(d-1)*3+1]),e.normal.push(s[(d-1)*3+2]),e.normal.push(s[d*3]),e.normal.push(s[d*3+1]),e.normal.push(s[d*3+2])),t.uv&&t.uv.forEach(function(h,p){e.uvs[p]===void 0&&(e.uvs[p]=[]),e.uvs[p].push(a[p][0]),e.uvs[p].push(a[p][1]),e.uvs[p].push(a[p][(d-1)*2]),e.uvs[p].push(a[p][(d-1)*2+1]),e.uvs[p].push(a[p][d*2]),e.uvs[p].push(a[p][d*2+1])})}addMorphTargets(e,t,i,n){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const s=this;i.forEach(function(o){o.rawTargets.forEach(function(a){const l=Ir.Objects.Geometry[a.geoID];l!==void 0&&s.genMorphGeometry(e,t,l,n,a.name)})})}genMorphGeometry(e,t,i,n,s){const o=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],a=i.Vertices!==void 0?i.Vertices.a:[],l=i.Indexes!==void 0?i.Indexes.a:[],c=e.attributes.position.count*3,u=new Float32Array(c);for(let f=0;f<l.length;f++){const m=l[f]*3;u[m]=a[f*3],u[m+1]=a[f*3+1],u[m+2]=a[f*3+2]}const d={vertexIndices:o,vertexPositions:u},h=this.genBuffers(d),p=new Rt(h.vertex,3);p.name=s||i.attrName,p.applyMatrix4(n),e.morphAttributes.position.push(p)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.Normals.a;let s=[];return i==="IndexToDirect"&&("NormalIndex"in e?s=e.NormalIndex.a:"NormalsIndex"in e&&(s=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:s,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.UV.a;let s=[];return i==="IndexToDirect"&&(s=e.UVIndex.a),{dataSize:2,buffer:n,indices:s,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.Colors.a;let s=[];i==="IndexToDirect"&&(s=e.ColorIndex.a);for(let o=0,a=new at;o<n.length;o+=4)a.fromArray(n,o).convertSRGBToLinear().toArray(n,o);return{dataSize:4,buffer:n,indices:s,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const n=e.Materials.a,s=[];for(let o=0;o<n.length;++o)s.push(o);return{dataSize:1,buffer:n,indices:s,mappingType:t,referenceType:i}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new sr;const i=t-1,n=e.KnotVector.a,s=[],o=e.Points.a;for(let u=0,d=o.length;u<d;u+=4)s.push(new jt().fromArray(o,u));let a,l;if(e.Form==="Closed")s.push(s[0]);else if(e.Form==="Periodic"){a=i,l=n.length-1-a;for(let u=0;u<i;++u)s.push(s[u])}const c=new tje(i,n,s,a,l).getPoints(s.length*12);return new sr().setFromPoints(c)}}class sje{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const n=t[i],s=this.addClip(n);e.push(s)}return e}parseClips(){if(Ir.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Ir.Objects.AnimationCurveNode,t=new Map;for(const i in e){const n=e[i];if(n.attrName.match(/S|R|T|DeformPercent/)!==null){const s={id:n.id,attr:n.attrName,curves:{}};t.set(s.id,s)}}return t}parseAnimationCurves(e){const t=Ir.Objects.AnimationCurve;for(const i in t){const n={id:t[i].id,times:t[i].KeyTime.a.map(uje),values:t[i].KeyValueFloat.a},s=en.get(n.id);if(s!==void 0){const o=s.parents[0].ID,a=s.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=n:a.match(/Y/)?e.get(o).curves.y=n:a.match(/Z/)?e.get(o).curves.z=n:a.match(/DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=n)}}}parseAnimationLayers(e){const t=Ir.Objects.AnimationLayer,i=new Map;for(const n in t){const s=[],o=en.get(parseInt(n));o!==void 0&&(o.children.forEach(function(a,l){if(e.has(a.ID)){const c=e.get(a.ID);if(c.curves.x!==void 0||c.curves.y!==void 0||c.curves.z!==void 0){if(s[l]===void 0){const u=en.get(a.ID).parents.filter(function(d){return d.relationship!==void 0})[0].ID;if(u!==void 0){const d=Ir.Objects.Model[u.toString()];if(d===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",a);return}const h={modelName:d.attrName?kr.sanitizeNodeName(d.attrName):"",ID:d.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};mo.traverse(function(p){p.ID===d.id&&(h.transform=p.matrix,p.userData.transformData&&(h.eulerOrder=p.userData.transformData.eulerOrder))}),h.transform||(h.transform=new St),"PreRotation"in d&&(h.preRotation=d.PreRotation.value),"PostRotation"in d&&(h.postRotation=d.PostRotation.value),s[l]=h}}s[l]&&(s[l][c.attr]=c)}else if(c.curves.morph!==void 0){if(s[l]===void 0){const u=en.get(a.ID).parents.filter(function(g){return g.relationship!==void 0})[0].ID,d=en.get(u).parents[0].ID,h=en.get(d).parents[0].ID,p=en.get(h).parents[0].ID,f=Ir.Objects.Model[p],m={modelName:f.attrName?kr.sanitizeNodeName(f.attrName):"",morphName:Ir.Objects.Deformer[u].attrName};s[l]=m}s[l][c.attr]=c}}}),i.set(parseInt(n),s))}return i}parseAnimStacks(e){const t=Ir.Objects.AnimationStack,i={};for(const n in t){const s=en.get(parseInt(n)).children;s.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(s[0].ID);i[n]={name:t[n].attrName,layer:o}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(n){t=t.concat(i.generateTracks(n))}),new Gu(e.name,-1,t)}generateTracks(e){const t=[];let i=new oe,n=new Rr,s=new oe;if(e.transform&&e.transform.decompose(i,n,s),i=i.toArray(),n=new Xi().setFromQuaternion(n,e.eulerOrder).toArray(),s=s.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");o!==void 0&&t.push(o)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const o=this.generateRotationTrack(e.modelName,e.R.curves,n,e.preRotation,e.postRotation,e.eulerOrder);o!==void 0&&t.push(o)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const o=this.generateVectorTrack(e.modelName,e.S.curves,s,"scale");o!==void 0&&t.push(o)}if(e.DeformPercent!==void 0){const o=this.generateMorphTrack(e);o!==void 0&&t.push(o)}return t}generateVectorTrack(e,t,i,n){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,i);return new Vu(e+"."+n,s,o)}generateRotationTrack(e,t,i,n,s,o){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map($i.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map($i.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map($i.degToRad));const a=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(a,t,i);n!==void 0&&(n=n.map($i.degToRad),n.push(o),n=new Xi().fromArray(n),n=new Rr().setFromEuler(n)),s!==void 0&&(s=s.map($i.degToRad),s.push(o),s=new Xi().fromArray(s),s=new Rr().setFromEuler(s).invert());const c=new Rr,u=new Xi,d=[];for(let h=0;h<l.length;h+=3)u.set(l[h],l[h+1],l[h+2],o),c.setFromEuler(u),n!==void 0&&c.premultiply(n),s!==void 0&&c.multiply(s),c.toArray(d,h/3*4);return new Ec(e+".quaternion",a,d)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(s){return s/100}),n=mo.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new zu(e.modelName+".morphTargetInfluences["+n+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,n){return i-n}),t.length>1){let i=1,n=t[0];for(let s=1;s<t.length;s++){const o=t[s];o!==n&&(t[i]=o,n=o,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const n=i,s=[];let o=-1,a=-1,l=-1;return e.forEach(function(c){if(t.x&&(o=t.x.times.indexOf(c)),t.y&&(a=t.y.times.indexOf(c)),t.z&&(l=t.z.times.indexOf(c)),o!==-1){const u=t.x.values[o];s.push(u),n[0]=u}else s.push(n[0]);if(a!==-1){const u=t.y.values[a];s.push(u),n[1]=u}else s.push(n[1]);if(l!==-1){const u=t.z.values[l];s.push(u),n[2]=u}else s.push(n[2])}),s}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],n=e.values[t]-i,s=Math.abs(n);if(s>=180){const o=s/180,a=n/o;let l=i+a;const c=e.times[t-1],u=(e.times[t]-c)/o;let d=c+u;const h=[],p=[];for(;d<e.times[t];)h.push(d),d+=u,p.push(l),l+=a;e.times=pX(e.times,t,h),e.values=pX(e.values,t,p)}}}}class oje{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new lX,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(n,s){const o=n.match(/^[\s\t]*;/),a=n.match(/^[\s\t]*$/);if(o||a)return;const l=n.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),c=n.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),u=n.match("^\\t{"+(t.currentIndent-1)+"}}");l?t.parseNodeBegin(n,l):c?t.parseNodeProperty(n,c,i[++s]):u?t.popStack():n.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(n)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map(function(l){return l.trim().replace(/^"/,"").replace(/"$/,"")}),s={name:i},o=this.parseNodeAttr(n),a=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,s):i in a?(i==="PoseNode"?a.PoseNode.push(s):a[i].id!==void 0&&(a[i]={},a[i][a[i].id]=a[i]),o.id!==""&&(a[i][o.id]=s)):typeof o.id=="number"?(a[i]={},a[i][o.id]=s):i!=="Properties70"&&(i==="PoseNode"?a[i]=[s]:a[i]=s),typeof o.id=="number"&&(s.id=o.id),o.name!==""&&(s.attrName=o.name),o.type!==""&&(s.attrType=o.type),this.pushStack(s)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",n="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:i,type:n}}parseNodeProperty(e,t,i){let n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),s=t[2].replace(/^"/,"").replace(/"$/,"").trim();n==="Content"&&s===","&&(s=i.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if(o.name==="Properties70"){this.parseNodeSpecialProperty(e,n,s);return}if(n==="C"){const a=s.split(",").slice(1),l=parseInt(a[0]),c=parseInt(a[1]);let u=s.split(",").slice(3);u=u.map(function(d){return d.trim().replace(/^"/,"")}),n="connections",s=[l,c],hje(s,u),o[n]===void 0&&(o[n]=[])}n==="Node"&&(o.id=s),n in o&&Array.isArray(o[n])?o[n].push(s):n!=="a"?o[n]=s:o.a=s,this.setCurrentProp(o,n),n==="a"&&s.slice(-1)!==","&&(o.a=uO(s))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=uO(t.a))}parseNodeSpecialProperty(e,t,i){const n=i.split('",').map(function(u){return u.trim().replace(/^\"/,"").replace(/\s/,"_")}),s=n[0],o=n[1],a=n[2],l=n[3];let c=n[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=uO(c);break}this.getPrevNode()[s]={type:o,type2:a,flag:l,value:c},this.setCurrentProp(this.getPrevNode(),s)}}class aje{parse(e){const t=new aX(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const n=new lX;for(;!this.endOfContent(t);){const s=this.parseNode(t,i);s!==null&&n.add(s.name,s)}return n}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},n=t>=7500?e.getUint64():e.getUint32(),s=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(n===0)return null;const l=[];for(let h=0;h<s;h++)l.push(this.parseProperty(e));const c=l.length>0?l[0]:"",u=l.length>1?l[1]:"",d=l.length>2?l[2]:"";for(i.singleProperty=s===1&&e.getOffset()===n;n>e.getOffset();){const h=this.parseNode(e,t);h!==null&&this.parseSubNode(a,i,h)}return i.propertyList=l,typeof c=="number"&&(i.id=c),u!==""&&(i.attrName=u),d!==""&&(i.attrType=d),a!==""&&(i.name=a),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const n=i.propertyList[0];Array.isArray(n)?(t[i.name]=i,i.a=n):t[i.name]=n}else if(e==="Connections"&&i.name==="C"){const n=[];i.propertyList.forEach(function(s,o){o!==0&&n.push(s)}),t.connections===void 0&&(t.connections=[]),t.connections.push(n)}else if(i.name==="Properties70")Object.keys(i).forEach(function(n){t[n]=i[n]});else if(e==="Properties70"&&i.name==="P"){let n=i.propertyList[0],s=i.propertyList[1];const o=i.propertyList[2],a=i.propertyList[3];let l;n.indexOf("Lcl ")===0&&(n=n.replace("Lcl ","Lcl_")),s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),s==="Color"||s==="ColorRGB"||s==="Vector"||s==="Vector3D"||s.indexOf("Lcl_")===0?l=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:l=i.propertyList[4],t[n]={type:s,type2:o,flag:a,value:l}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const n=e.getUint32(),s=e.getUint32(),o=e.getUint32();if(s===0)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}const a=WGe(new Uint8Array(e.getArrayBuffer(o))),l=new aX(a.buffer);switch(t){case"b":case"c":return l.getBooleanArray(n);case"d":return l.getFloat64Array(n);case"f":return l.getFloat32Array(n);case"i":return l.getInt32Array(n);case"l":return l.getInt64Array(n)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class aX{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let i=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const n=i.indexOf(0);return n>=0&&(i=new Uint8Array(this.dv.buffer,t,n)),this._textDecoder.decode(i)}}class lX{add(e,t){this[e]=t}}function lje(r){const e="Kaydara FBX Binary  \0";return r.byteLength>=e.length&&e===hX(r,0,e.length)}function cje(r){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(n){const s=r[n-1];return r=r.slice(t+n),t++,s}for(let n=0;n<e.length;++n)if(i(1)===e[n])return!1;return!0}function cX(r){const e=/FBXVersion: (\d+)/,t=r.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function uje(r){return r/46186158e3}const dje=[];function k2(r,e,t,i){let n;switch(i.mappingType){case"ByPolygonVertex":n=r;break;case"ByPolygon":n=e;break;case"ByVertice":n=t;break;case"AllSame":n=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(n=i.indices[n]);const s=n*i.dataSize,o=s+i.dataSize;return pje(dje,i.buffer,s,o)}const cO=new Xi,Rg=new oe;function uX(r){const e=new St,t=new St,i=new St,n=new St,s=new St,o=new St,a=new St,l=new St,c=new St,u=new St,d=new St,h=new St,p=r.inheritType?r.inheritType:0;if(r.translation&&e.setPosition(Rg.fromArray(r.translation)),r.preRotation){const C=r.preRotation.map($i.degToRad);C.push(r.eulerOrder||Xi.DEFAULT_ORDER),t.makeRotationFromEuler(cO.fromArray(C))}if(r.rotation){const C=r.rotation.map($i.degToRad);C.push(r.eulerOrder||Xi.DEFAULT_ORDER),i.makeRotationFromEuler(cO.fromArray(C))}if(r.postRotation){const C=r.postRotation.map($i.degToRad);C.push(r.eulerOrder||Xi.DEFAULT_ORDER),n.makeRotationFromEuler(cO.fromArray(C)),n.invert()}r.scale&&s.scale(Rg.fromArray(r.scale)),r.scalingOffset&&a.setPosition(Rg.fromArray(r.scalingOffset)),r.scalingPivot&&o.setPosition(Rg.fromArray(r.scalingPivot)),r.rotationOffset&&l.setPosition(Rg.fromArray(r.rotationOffset)),r.rotationPivot&&c.setPosition(Rg.fromArray(r.rotationPivot)),r.parentMatrixWorld&&(d.copy(r.parentMatrix),u.copy(r.parentMatrixWorld));const f=t.clone().multiply(i).multiply(n),m=new St;m.extractRotation(u);const g=new St;g.copyPosition(u);const v=g.clone().invert().multiply(u),x=m.clone().invert().multiply(v),b=s,w=new St;if(p===0)w.copy(m).multiply(f).multiply(x).multiply(b);else if(p===1)w.copy(m).multiply(x).multiply(f).multiply(b);else{const C=new St().scale(new oe().setFromMatrixScale(d)).clone().invert(),P=x.clone().multiply(C);w.copy(m).multiply(f).multiply(P).multiply(b)}const _=c.clone().invert(),S=o.clone().invert();let T=e.clone().multiply(l).multiply(c).multiply(t).multiply(i).multiply(n).multiply(_).multiply(a).multiply(o).multiply(s).multiply(S);const M=new St().copyPosition(T),E=u.clone().multiply(M);return h.copyPosition(E),T=h.clone().multiply(w),T.premultiply(u.invert()),T}function dX(r){r=r||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return r===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[r]}function uO(r){return r.split(",").map(function(e){return parseFloat(e)})}function hX(r,e,t){return e===void 0&&(e=0),t===void 0&&(t=r.byteLength),new TextDecoder().decode(new Uint8Array(r,e,t))}function hje(r,e){for(let t=0,i=r.length,n=e.length;t<n;t++,i++)r[i]=e[t]}function pje(r,e,t,i){for(let n=t,s=0;n<i;n++,s++)r[s]=e[n];return r}function pX(r,e,t){return r.slice(0,e).concat(t).concat(r.slice(e))}const fX=new LGe;fX.setDecoderPath("/draco/");class L2 extends vs{constructor(e,t,i=0,n=0){super(e||new Jh(.1),t||new Ei({wireframe:!0,transparent:!0}),i,n),this.isModel3D=!0,this._model="",this._modelRoot=null,this._isLoading=!1,this._castShadowModel=!1,this._receiveShadowModel=!1,this._objectOrgSize=new oe,this.type="Model3D",this._castShadowModel=this.castShadow,this._receiveShadowModel=this.receiveShadow,this.onBeforeRender=()=>{(this._castShadowModel!==this.castShadow||this._receiveShadowModel!==this.receiveShadow)&&this.updateModelShadow()},this.geometry.boundingBox||this.geometry.computeBoundingBox()}get model(){return this._model}set model(e){this._model!==e&&(this._object&&this._object.removeFromParent(),this._model&&(this._modeMatrix=void 0),this._model=e,this.loadModel())}async loadModel(){if(this._object&&(this._object.removeFromParent(),this._object=void 0),!this._model)return;this._isLoading=!0;let e;if(/.glb$/i.test(this._model))e=new QVe,e.setDRACOLoader(fX);else if(/.fbx$/i.test(this._model))e=new rje;else throw or.panic(`Model[${this._model}] is not supported!`);const t=await e.loadAsync(this._model);t instanceof Oo?this._object=t:this._object=t.scene,this._modelRoot=t,this._object.__isHidden=!0,this._isLoading=!1,this.material.visible=!1,this.add(this._object),this.objectAutoSize(),this.updateModelShadow()}rebuildGeometry(){super.rebuildGeometry(),this.resizeObject()}resizeObject(){if(!this._object||!this.geometry.boundingBox)return;this.updateMatrixWorld(!0),this._object.updateMatrixWorld(!0);const e=this.geometry.boundingBox.getSize(new oe).divide(this._objectOrgSize),t=Math.min(e.x,e.y,e.z);this._object.scale.set(t,t,t)}objectAutoSize(){if(!this._object||!this.geometry.boundingBox)return;if(this.updateMatrixWorld(!0),this._object.updateMatrixWorld(!0),this._modeMatrix)return this._object.applyMatrix4(this._modeMatrix);const e=this.geometry.boundingBox.getSize(new oe).multiply(this.scale),t=this.getWorldPosition(new oe),i=new On().setFromObject(this._object,!0),n=i.getCenter(new oe),s=i.getSize(this._objectOrgSize),o=e.divide(s),a=Math.min(o.x,o.y,o.z);this._object.position.copy(t.sub(n).multiply(o)),this._object.scale.set(a,a,a)}updateModelShadow(){this._object&&(this._castShadowModel=this.castShadow,this._receiveShadowModel=this.receiveShadow,this._object.traverse(e=>{e.castShadow=this._castShadowModel,e.receiveShadow=this._receiveShadowModel}))}toJSON(e){const t={},i={metadata:{version:4.6,type:"Object",generator:"Object3D.toJSON"},object:t};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.castShadow===!0&&(t.castShadow=!0),this.receiveShadow===!0&&(t.receiveShadow=!0),this.visible===!1&&(t.visible=!1),this.frustumCulled===!1&&(t.frustumCulled=!1),this.renderOrder!==0&&(t.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(t.userData=this.userData),t.layers=this.layers.mask,t.matrix=this.matrix.toArray(),t.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(t.matrixAutoUpdate=!1),t.geometry=n(e.geometries,this.geometry),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let o=0,a=this.material.length;o<a;o++)s.push(n(e.materials,this.material[o]));t.material=s}else t.material=n(e.materials,this.material);if(this.children.length>0){t.children=[];for(const s of this.children)s!==this._object&&t.children.push(s.toJSON(e).object)}return i;function n(s,o){return s[o.uuid]===void 0&&(s[o.uuid]=o.toJSON(e)),o.uuid}}serialize(e){super.serialize(e),e.model=this._model,e.objectOrgSize=this._objectOrgSize.toArray(),this._object&&(e.modeMatrix=this._object.matrix.toArray())}deserialize(e){super.deserialize(e),e.objectOrgSize&&this._objectOrgSize.fromArray(e.objectOrgSize),e.modeMatrix&&(this._modeMatrix=new St().fromArray(e.modeMatrix),this._object&&this._object.applyMatrix4(this._modeMatrix)),this.model=e.model}}Cr("Model3D",{create:({material:r,geometry:e}={})=>new L2(e,r),members:{model:"String"},proto:"Entity",group:"",icon:""});class fje extends L2{constructor(e,t,i=0,n=0){super(e||new vi(1,1,1),t,i,n),this.type="StaticMesh"}rebuildBody(){if(!this._object)return;const e=this.world;if(this.physicalBody&&(this.world&&this.world.removeMesh(this),od.destroyBody(this.physicalBody)),this._bodyType!==FL.Ghost){const t=od.createShape(this._object);this.physicalBody=od.createBody(this,this._mass,t),this.physicalBody.setUserIndex(this.id),e&&e.addMesh(this,this.physicalBody)}else this.physicalBody=null}}Cr("StaticMesh",{create:({material:r,geometry:e}={})=>new fje(e,r),members:{"geo.width":"Number","geo.height":"Number","geo.depth":"Number",model:"String"},proto:"Entity",group:"Objects.Static Mesh",icon:"mesh"});class dO extends L2{constructor(e,t,i=0,n=0){super(e||new R_,t||new Ei({wireframe:!0,transparent:!0}),i,n),this.isCharacter=!0,this.actions={},this._clips=[],this._objectOrgSize=new oe,this.type="Character"}async loadModel(){if(await super.loadModel(),!this._object||!this._modelRoot)return;const e=this._object.getObjectByProperty("isMesh",!0);e&&(e.onBeforeRender=()=>{this._mixer&&this._mixer.update(Vo.delta)}),this._mixer=new DG(this._object),this._mixer.addEventListener("finished",({action:t})=>{const i=Object.entries(this.actions).find(n=>n[1].action===t);i&&(or.notice(`action ${i[0]} finished!`),i[1].isPending=!1,i[1].resolve&&(i[1].resolve(!0),i[1].resolve=void 0))}),this._clips=this._modelRoot.animations||[];for(const t of this._clips)this.actions[t.name]={isPending:!1,action:this._mixer.clipAction(t),resolve:void 0}}async act(e,t){const i=this.actions[e];if(i){if(i.isPending)return!0}else return!1;i.isPending=!0;const n=i.action;return n.clampWhenFinished=!0,n.reset().setLoop(t?PA:OA,t?1/0:1).setEffectiveTimeScale(1).setEffectiveWeight(1).fadeIn(1).play(),new Promise(s=>{i.resolve=s})}stop(e){const t=e?[e]:Object.keys(this.actions);for(const i of t){const n=this.actions[i];if(n){if(!n.isPending)continue}else continue;n.isPending=!1,n.resolve&&(n.resolve(!1),n.resolve=void 0),n.action.stop()}}}Cr("Character",{create:({material:r,geometry:e}={})=>new dO(e,r),members:{"geo.radius":"Number","geo.length":"Number","geo.capSegments":"Number","geo.radialSegments":"Number"},proto:"Model3D",group:"Entities.Character",icon:"human"});const Bn=new oe,mje=new oe;class gje extends Kh{constructor(e,t){super(e||new sr,t),this.isParticles=!0,this.mass=0,this.airResCoe=.0025,this.growSpeed=1,this.spaceSize=new oe(1,1,1),this.bornSpaceSize=new oe(1,1,1),this.bornPoint=new oe(0,0,0),this._count=100,this._countFired=0,this._positions=null,this._velocities=null,this._bornTime=0,this.type="Particles",this.rebuildBuffer(),this.onBeforeRender=()=>{this.update()}}get count(){return this._count}set count(e){e<=0&&(e=100),this._count!==e&&(this._count=e,this.rebuildBuffer())}rebuildBuffer(){this._countFired=0,this.geometry.setDrawRange(0,0);const e=new Float32Array(this._count*3),t=new Float32Array(this._count*3),i=new Rt(e,3),n=new Rt(t,3);i.setUsage(py),this.geometry.setAttribute("position",i),this._positions=i,this._velocities=n}update(){for(let e=0;e<this._countFired;e++){const t=this._positions.getX(e),i=this._positions.getY(e),n=this._positions.getZ(e);if(this.isOutofSpace(t,i,n))this._positions.setXYZ(e,...this.randBornPoint()),this._velocities.setXYZ(e,0,0,0);else{const[s,o]=Vo.calcObjectPosition(Bn.set(t,i,n),mje.set(this._velocities.getX(e),this._velocities.getY(e),this._velocities.getZ(e)),this.mass,this.airResCoe);this._positions.setXYZ(e,...s.toArray()),this._velocities.setXYZ(e,...o.toArray())}}this.grow(),this._positions.needsUpdate=!0}grow(){if(this._countFired>=this._count)return;const e=this._bornTime===0?1:(Vo.now-this._bornTime)/1e3;this._bornTime||(this._bornTime=Vo.now);const t=Math.floor(e*this.growSpeed),i=Math.min(t,this._count)-this._countFired;if(i<=0)return;const n=this._countFired;this._countFired+=i;for(let s=n;s<this._countFired;s++)this._positions.setXYZ(s,...this.randBornPoint()),this._velocities.setXYZ(s,0,0,0);this.geometry.setDrawRange(0,this._countFired)}isOutofSpace(e,t,i){return e>this.spaceSize.x||e<-this.spaceSize.x||t>this.spaceSize.y||t<-this.spaceSize.y||i>this.spaceSize.z||i<-this.spaceSize.z}randBornPoint(){return Bn.copy(this.bornPoint),Bn.x+=this.bornSpaceSize.x*(Math.random()-.5)*2,Bn.y+=this.bornSpaceSize.y*(Math.random()-.5)*2,Bn.z+=this.bornSpaceSize.z*(Math.random()-.5)*2,Bn.x>this.spaceSize.x?Bn.x=this.spaceSize.x-1e-5:Bn.x<-this.spaceSize.x&&(Bn.x=-this.spaceSize.x+1e-5),Bn.y>this.spaceSize.y?Bn.y=this.spaceSize.y-1e-5:Bn.y<-this.spaceSize.y&&(Bn.y=-this.spaceSize.y+1e-5),Bn.z>this.spaceSize.z?Bn.z=this.spaceSize.z-1e-5:Bn.z<-this.spaceSize.z&&(Bn.z=-this.spaceSize.z+1e-5),Bn.toArray()}toJSON(e){const t={},i={metadata:{version:4.6,type:"Object",generator:"Object3D.toJSON"},object:t};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.castShadow===!0&&(t.castShadow=!0),this.receiveShadow===!0&&(t.receiveShadow=!0),this.visible===!1&&(t.visible=!1),this.frustumCulled===!1&&(t.frustumCulled=!1),this.renderOrder!==0&&(t.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(t.userData=this.userData),t.layers=this.layers.mask,t.matrix=this.matrix.toArray(),t.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(t.matrixAutoUpdate=!1),this.material!==void 0)if(Array.isArray(this.material)){const s=[];for(let o=0,a=this.material.length;o<a;o++)s.push(n(e.materials,this.material[o]));t.material=s}else t.material=n(e.materials,this.material);if(this.children.length>0){t.children=[];for(const s of this.children)t.children.push(s.toJSON(e).object)}return i;function n(s,o){return s[o.uuid]===void 0&&(s[o.uuid]=o.toJSON(e)),o.uuid}}serialize(e){e.mass=this.mass,e.spaceSize=this.spaceSize.toArray(),e.bornSpaceSize=this.bornSpaceSize.toArray(),e.bornPoint=this.bornPoint.toArray(),e.count=this.count,e.growSpeed=this.growSpeed,e.airResCoe=this.airResCoe}deserialize(e){e.mass!==void 0&&(this.mass=e.mass),e.spaceSize&&this.spaceSize.fromArray(e.spaceSize),e.bornSpaceSize&&this.bornSpaceSize.fromArray(e.bornSpaceSize),e.bornPoint&&this.bornPoint.fromArray(e.bornPoint),e.count>0&&(this.count=e.count),e.growSpeed>0&&(this.growSpeed=e.growSpeed),e.airResCoe!==void 0&&(this.airResCoe=e.airResCoe)}}Cr("Particles",{members:{mass:"Number",airResCoe:"Number",count:"Number",spaceSize:"Vector3",bornPoint:"Vector3",bornSpaceSize:"Vector3",growSpeed:"Number"},proto:"Points",group:"Particles.Particles",icon:"box",create:()=>new gje});class O2 extends mt{constructor(e,t={}){super(e),this.isRefractor=!0,this.type="Refractor",this.camera=new Yr;const i=this,n=t.color!==void 0?new at(t.color):new at(8355711),s=t.textureWidth||512,o=t.textureHeight||512,a=t.clipBias||0,l=t.shader||O2.RefractorShader,c=t.multisample!==void 0?t.multisample:4,u=this.camera;u.matrixAutoUpdate=!1,u.userData.refractor=!0;const d=new pa,h=new St,p=new Ui(s,o,{samples:c,type:gi});this.material=new ii({uniforms:Lo.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,transparent:!0}),this.material.uniforms.color.value=n,this.material.uniforms.tDiffuse.value=p.texture,this.material.uniforms.textureMatrix.value=h;const f=function(){const b=new oe,w=new oe,_=new St,S=new oe,T=new oe;return function(M){return b.setFromMatrixPosition(i.matrixWorld),w.setFromMatrixPosition(M.matrixWorld),S.subVectors(b,w),_.extractRotation(i.matrixWorld),T.set(0,0,1),T.applyMatrix4(_),S.dot(T)<0}}(),m=function(){const b=new oe,w=new oe,_=new Rr,S=new oe;return function(){i.matrixWorld.decompose(w,_,S),b.set(0,0,1).applyQuaternion(_).normalize(),b.negate(),d.setFromNormalAndCoplanarPoint(b,w)}}(),g=function(){const b=new pa,w=new jt,_=new jt;return function(S){u.matrixWorld.copy(S.matrixWorld),u.matrixWorldInverse.copy(u.matrixWorld).invert(),u.projectionMatrix.copy(S.projectionMatrix),u.far=S.far,b.copy(d),b.applyMatrix4(u.matrixWorldInverse),w.set(b.normal.x,b.normal.y,b.normal.z,b.constant);const T=u.projectionMatrix;_.x=(Math.sign(w.x)+T.elements[8])/T.elements[0],_.y=(Math.sign(w.y)+T.elements[9])/T.elements[5],_.z=-1,_.w=(1+T.elements[10])/T.elements[14],w.multiplyScalar(2/w.dot(_)),T.elements[2]=w.x,T.elements[6]=w.y,T.elements[10]=w.z+1-a,T.elements[14]=w.w}}();function v(b){h.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),h.multiply(b.projectionMatrix),h.multiply(b.matrixWorldInverse),h.multiply(i.matrixWorld)}function x(b,w,_){i.visible=!1;const S=b.getRenderTarget(),T=b.xr.enabled,M=b.shadowMap.autoUpdate;b.xr.enabled=!1,b.shadowMap.autoUpdate=!1,b.setRenderTarget(p),b.autoClear===!1&&b.clear(),b.render(w,u),b.xr.enabled=T,b.shadowMap.autoUpdate=M,b.setRenderTarget(S);const E=_.viewport;E!==void 0&&b.state.viewport(E),i.visible=!0}this.onBeforeRender=function(b,w,_){_.userData.refractor!==!0&&f(_)&&(m(),v(_),g(_),x(b,w,_))},this.getRenderTarget=function(){return p},this.dispose=function(){p.dispose(),i.material.dispose()}}}O2.RefractorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`

		uniform mat4 textureMatrix;

		varying vec4 vUv;

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform vec3 color;
		uniform sampler2D tDiffuse;

		varying vec4 vUv;

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};const P2={name:"ReflectorShader",uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:`
		uniform mat4 textureMatrix;
		varying vec4 vUv;

		#include <common>
		#include <logdepthbuf_pars_vertex>

		void main() {

			vUv = textureMatrix * vec4( position, 1.0 );

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

			#include <logdepthbuf_vertex>

		}`,fragmentShader:`
		uniform vec3 color;
		uniform sampler2D tDiffuse;
		varying vec4 vUv;

		#include <logdepthbuf_pars_fragment>

		float blendOverlay( float base, float blend ) {

			return( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );

		}

		vec3 blendOverlay( vec3 base, vec3 blend ) {

			return vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );

		}

		void main() {

			#include <logdepthbuf_fragment>

			vec4 base = texture2DProj( tDiffuse, vUv );
			gl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`};class mX extends mt{constructor(e,t){super(e||new Xa(1,1),t||new ii({name:P2.name,uniforms:Lo.clone(P2.uniforms),fragmentShader:P2.fragmentShader,vertexShader:P2.vertexShader})),this.isReflector=!0,this.props={color:new at(8355711),textureWidth:512,textureHeight:512,clipBias:0,multisample:4},this.camera=new Yr,this.type="Reflector";const i=new pa,n=new oe,s=new oe,o=new oe,a=new St,l=new oe(0,0,-1),c=new jt,u=new oe,d=new oe,h=new jt,p=new St,f=this.camera;this.renderTarget=new Ui(this.props.textureWidth,this.props.textureHeight,{samples:this.props.multisample,type:gi}),t?this.props.color=this.material.uniforms.color.value:this.material.uniforms.color.value=this.props.color,this.material.uniforms.tDiffuse.value=this.renderTarget.texture,this.material.uniforms.textureMatrix.value=p,this.onBeforeRender=(m,g,v)=>{if(s.setFromMatrixPosition(this.matrixWorld),o.setFromMatrixPosition(v.matrixWorld),a.extractRotation(this.matrixWorld),n.set(0,0,1),n.applyMatrix4(a),u.subVectors(s,o),u.dot(n)>0)return;u.reflect(n).negate(),u.add(s),a.extractRotation(v.matrixWorld),l.set(0,0,-1),l.applyMatrix4(a),l.add(o),d.subVectors(s,l),d.reflect(n).negate(),d.add(s),f.position.copy(u),f.up.set(0,1,0),f.up.applyMatrix4(a),f.up.reflect(n),f.lookAt(d),f.far=v instanceof Yr?v.far:1e3,f.updateMatrixWorld(),f.projectionMatrix.copy(v.projectionMatrix),p.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),p.multiply(f.projectionMatrix),p.multiply(f.matrixWorldInverse),p.multiply(this.matrixWorld),i.setFromNormalAndCoplanarPoint(n,s),i.applyMatrix4(f.matrixWorldInverse),c.set(i.normal.x,i.normal.y,i.normal.z,i.constant);const x=f.projectionMatrix;h.x=(Math.sign(c.x)+x.elements[8])/x.elements[0],h.y=(Math.sign(c.y)+x.elements[9])/x.elements[5],h.z=-1,h.w=(1+x.elements[10])/x.elements[14],c.multiplyScalar(2/c.dot(h)),x.elements[2]=c.x,x.elements[6]=c.y,x.elements[10]=c.z+1-this.props.clipBias,x.elements[14]=c.w,this.visible=!1;const b=m.getRenderTarget(),w=m.xr.enabled,_=m.shadowMap.autoUpdate;m.xr.enabled=!1,m.shadowMap.autoUpdate=!1,m.setRenderTarget(this.renderTarget),m.state.buffers.depth.setMask(!0),m.autoClear===!1&&m.clear(),m.render(g,f),m.xr.enabled=w,m.shadowMap.autoUpdate=_,m.setRenderTarget(b);const S=v.viewport;S!==void 0&&m.state.viewport(S),this.visible=!0}}get color(){return this.props.color}set color(e){this.props.color=e,this.material.uniforms.color.value=e}get textureWidth(){return this.props.textureWidth}set textureWidth(e){this.props.textureWidth!==e&&(this.props.textureWidth=e,this.renderTarget.setSize(this.props.textureWidth,this.props.textureHeight))}get textureHeight(){return this.props.textureHeight}set textureHeight(e){this.props.textureHeight!==e&&(this.props.textureHeight=e,this.renderTarget.setSize(this.props.textureWidth,this.props.textureHeight))}get clipBias(){return this.props.clipBias}set clipBias(e){this.props.clipBias!==e&&(this.props.clipBias=e)}getRenderTarget(){return this.renderTarget}dispose(){this.renderTarget.dispose(),this.material.dispose()}clone(e){const t=super.clone(e),i=nd(this.props);return sd(t.props,i),t}serialize(e){e.props=nd(this.props)}deserialize(e){e.props&&sd(this.props,e.props)}}Cr("Reflector",{members:{castShadow:"Boolean",receiveShadow:"Boolean",color:"Color",textureWidth:"Number",textureHeight:"Number",clipBias:"Number"},proto:"Object3D",group:"Objects.Reflector",icon:"plane",create:({geometry:r,material:e}={})=>new mX(r,e)});const I2=.15,D2=I2*.5,vje=class vT extends vs{constructor(e,t){super(e||new Xa(10,10),t||new ii({uniforms:Lo.merge([At.fog,vT.WaterShader.uniforms]),vertexShader:vT.WaterShader.vertexShader,fragmentShader:vT.WaterShader.fragmentShader,transparent:!0,fog:!0}),0,0),this.isWaterPlane=!0,this.props={color:new at,textureWidth:512,textureHeight:512,clipBias:0,flowDirection:new qe(1,0),flowSpeed:.03,reflectivity:.02,scale:1},this.textureMatrix=new St,this.type="WaterPlane",e||(this.rotation.x=-Math.PI/2);const i=new mX(e);i.textureWidth=this.props.textureWidth,i.textureHeight=this.props.textureHeight,i.clipBias=this.props.clipBias;const n=new O2(e,{textureWidth:this.props.textureWidth,textureHeight:this.props.textureHeight,clipBias:0});if(this.refractorClipBias=n.camera.projectionMatrix.elements[10],i.matrixAutoUpdate=!1,n.matrixAutoUpdate=!1,this.reflector=i,this.refractor=n,t)this.material.uniforms.tReflectionMap.value=i.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=n.getRenderTarget().texture,this.props.flowDirection=this.material.uniforms.flowDirection.value,this.props.color=this.material.uniforms.color.value,this.props.reflectivity=this.material.uniforms.reflectivity.value,this.textureMatrix=this.material.uniforms.textureMatrix.value,this.props.scale=this.material.uniforms.config.value.w;else{this.material.uniforms.flowDirection={type:"v2",value:this.props.flowDirection};const s=new Nr,o=new Nr;s.wrapS=s.wrapT=ds,o.wrapS=o.wrapT=ds,this.material.uniforms.tReflectionMap.value=i.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=n.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=s,this.material.uniforms.tNormalMap1.value=o,this.material.uniforms.color.value=this.props.color,this.material.uniforms.reflectivity.value=this.props.reflectivity,this.material.uniforms.textureMatrix.value=this.textureMatrix,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=D2,this.material.uniforms.config.value.z=D2,this.material.uniforms.config.value.w=this.props.scale}this.onBeforeRender=function(s,o,a){this.updateTextureMatrix(a),this.updateFlow(),this.visible=!1,i.matrixWorld.copy(this.matrixWorld),n.matrixWorld.copy(this.matrixWorld),i.onBeforeRender(s,o,a,null,null,null),n.onBeforeRender(s,o,a,null,null,null),this.visible=!0}}get normalMap0(){return this.material.uniforms.tNormalMap0.value}set normalMap0(e){const t=this.material.uniforms.tNormalMap0.value;t!==e&&(this.material.uniforms.tNormalMap0.value=e,t.dispose())}get normalMap1(){return this.material.uniforms.tNormalMap1.value}set normalMap1(e){const t=this.material.uniforms.tNormalMap1.value;t!==e&&(this.material.uniforms.tNormalMap1.value=e,t.dispose())}get color(){return this.props.color}set color(e){this.props.color=e,this.material.uniforms.color.value=e}get textureWidth(){return this.props.textureWidth}set textureWidth(e){this.props.textureWidth!==e&&(this.props.textureWidth=e,this.reflector.getRenderTarget().setSize(this.props.textureWidth,this.props.textureHeight),this.refractor.getRenderTarget().setSize(this.props.textureWidth,this.props.textureHeight))}get textureHeight(){return this.props.textureHeight}set textureHeight(e){this.props.textureHeight!==e&&(this.props.textureHeight=e,this.reflector.getRenderTarget().setSize(this.props.textureWidth,this.props.textureHeight),this.refractor.getRenderTarget().setSize(this.props.textureWidth,this.props.textureHeight))}get clipBias(){return this.props.clipBias}set clipBias(e){this.props.clipBias!==e&&(this.props.clipBias=e,this.reflector.clipBias=e)}get flowDirection(){return this.props.flowDirection}set flowDirection(e){this.props.flowDirection!==e&&(this.props.flowDirection=e,this.material.uniforms.flowDirection.value=e)}get flowSpeed(){return this.props.flowSpeed}set flowSpeed(e){this.props.flowSpeed!==e&&(this.props.flowSpeed=e)}get reflectivity(){return this.props.reflectivity}set reflectivity(e){this.props.reflectivity!==e&&(this.props.reflectivity=e,this.material.uniforms.reflectivity.value=this.props.reflectivity)}get waterScale(){return this.props.scale}set waterScale(e){this.props.scale!==e&&(this.props.scale=e,this.material.uniforms.config.value.w=this.props.scale)}appleProps(){this.material.uniforms.color.value=this.props.color,this.material.uniforms.reflectivity.value=this.props.reflectivity,this.material.uniforms.flowDirection.value=this.props.flowDirection,this.material.uniforms.config.value.w=this.props.scale,this.reflector.textureWidth=this.props.textureWidth,this.reflector.textureHeight=this.props.textureHeight,this.reflector.clipBias=this.props.clipBias,this.refractor.getRenderTarget().setSize(this.props.textureWidth,this.props.textureHeight)}clone(e){const t=super.clone(e),i=this.props[Tn],n=nd(i),s=t.props[Tn];return sd(s,n),s.appleProps(),t}serialize(e){super.serialize(e),e.props=nd(this.props)}deserialize(e){super.deserialize(e),e.props&&(sd(this.props,e.props),this.appleProps())}dispose(){this.reflector.dispose(),this.refractor.dispose()}rebuildGeometry(){super.rebuildGeometry(),this.reflector.geometry=this.geometry,this.refractor.geometry=this.geometry}updateTextureMatrix(e){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(e.projectionMatrix),this.textureMatrix.multiply(e.matrixWorldInverse),this.textureMatrix.multiply(this.matrixWorld)}updateFlow(){const e=this.material.uniforms.config;e.value.x+=this.props.flowSpeed*Vo.delta,e.value.y=e.value.x+D2,e.value.x>=I2?(e.value.x=0,e.value.y=D2):e.value.y>=I2&&(e.value.y=e.value.y-I2)}};vje.WaterShader={uniforms:{color:{type:"c",value:null},reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new jt}},vertexShader:`
  
      #include <common>
      #include <fog_pars_vertex>
      #include <logdepthbuf_pars_vertex>
  
      uniform mat4 textureMatrix;
  
      varying vec4 vCoord;
      varying vec2 vUv;
      varying vec3 vToEye;
  
      void main() {
  
        vUv = uv;
        vCoord = textureMatrix * vec4( position, 1.0 );
  
        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vToEye = cameraPosition - worldPosition.xyz;
  
        vec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex
        gl_Position = projectionMatrix * mvPosition;
  
        #include <logdepthbuf_vertex>
        #include <fog_vertex>
  
      }`,fragmentShader:`
  
      #include <common>
      #include <fog_pars_fragment>
      #include <logdepthbuf_pars_fragment>
  
      uniform sampler2D tReflectionMap;
      uniform sampler2D tRefractionMap;
      uniform sampler2D tNormalMap0;
      uniform sampler2D tNormalMap1;
  
      #ifdef USE_FLOWMAP
        uniform sampler2D tFlowMap;
      #else
        uniform vec2 flowDirection;
      #endif
  
      uniform vec3 color;
      uniform float reflectivity;
      uniform vec4 config;
  
      varying vec4 vCoord;
      varying vec2 vUv;
      varying vec3 vToEye;
  
      void main() {
  
        #include <logdepthbuf_fragment>
  
        float flowMapOffset0 = config.x;
        float flowMapOffset1 = config.y;
        float halfCycle = config.z;
        float scale = config.w;
  
        vec3 toEye = normalize( vToEye );
  
        // determine flow direction
        vec2 flow;
        #ifdef USE_FLOWMAP
          flow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;
        #else
          flow = flowDirection;
        #endif
        flow.x *= - 1.0;
  
        // sample normal maps (distort uvs with flowdata)
        vec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );
        vec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );
  
        // linear interpolate to get the final normal color
        float flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;
        vec4 normalColor = mix( normalColor0, normalColor1, flowLerp );
  
        // calculate normal vector
        vec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
  
        // calculate the fresnel term to blend reflection and refraction maps
        float theta = max( dot( toEye, normal ), 0.0 );
        float reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );
  
        // calculate final uv coords
        vec3 coord = vCoord.xyz / vCoord.w;
        vec2 uv = coord.xy + coord.z * normal.xz * 0.05;
  
        vec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );
        vec4 refractColor = texture2D( tRefractionMap, uv );
  
        // multiply water color with the mix of both textures
        gl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );
  
        #include <tonemapping_fragment>
        #include <colorspace_fragment>
        #include <fog_fragment>
  
      }`};const hO={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new oe},up:{value:new oe(0,1,0)}},vertexShader:`
		uniform vec3 sunPosition;
		uniform float rayleigh;
		uniform float turbidity;
		uniform float mieCoefficient;
		uniform vec3 up;

		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		// constants for atmospheric scattering
		const float e = 2.71828182845904523536028747135266249775724709369995957;
		const float pi = 3.141592653589793238462643383279502884197169;

		// wavelength of used primaries, according to preetham
		const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
		// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
		// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
		const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

		// mie stuff
		// K coefficient for the primaries
		const float v = 4.0;
		const vec3 K = vec3( 0.686, 0.678, 0.666 );
		// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
		const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

		// earth shadow hack
		// cutoffAngle = pi / 1.95;
		const float cutoffAngle = 1.6110731556870734;
		const float steepness = 1.5;
		const float EE = 1000.0;

		float sunIntensity( float zenithAngleCos ) {
			zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
			return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
		}

		vec3 totalMie( float T ) {
			float c = ( 0.2 * T ) * 10E-18;
			return 0.434 * c * MieConst;
		}

		void main() {

			vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
			vWorldPosition = worldPosition.xyz;

			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			gl_Position.z = gl_Position.w; // set z to camera.far

			vSunDirection = normalize( sunPosition );

			vSunE = sunIntensity( dot( vSunDirection, up ) );

			vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

			float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

			// extinction (absorbtion + out scattering)
			// rayleigh coefficients
			vBetaR = totalRayleigh * rayleighCoefficient;

			// mie coefficients
			vBetaM = totalMie( turbidity ) * mieCoefficient;

		}`,fragmentShader:`
		varying vec3 vWorldPosition;
		varying vec3 vSunDirection;
		varying float vSunfade;
		varying vec3 vBetaR;
		varying vec3 vBetaM;
		varying float vSunE;

		uniform float mieDirectionalG;
		uniform vec3 up;

		// constants for atmospheric scattering
		const float pi = 3.141592653589793238462643383279502884197169;

		const float n = 1.0003; // refractive index of air
		const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

		// optical length at zenith for molecules
		const float rayleighZenithLength = 8.4E3;
		const float mieZenithLength = 1.25E3;
		// 66 arc seconds -> degrees, and the cosine of that
		const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

		// 3.0 / ( 16.0 * pi )
		const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
		// 1.0 / ( 4.0 * pi )
		const float ONE_OVER_FOURPI = 0.07957747154594767;

		float rayleighPhase( float cosTheta ) {
			return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
		}

		float hgPhase( float cosTheta, float g ) {
			float g2 = pow( g, 2.0 );
			float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
			return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
		}

		void main() {

			vec3 direction = normalize( vWorldPosition - cameraPosition );

			// optical length
			// cutoff angle at 90 to avoid singularity in next formula.
			float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
			float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
			float sR = rayleighZenithLength * inverse;
			float sM = mieZenithLength * inverse;

			// combined extinction factor
			vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

			// in scattering
			float cosTheta = dot( direction, vSunDirection );

			float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
			vec3 betaRTheta = vBetaR * rPhase;

			float mPhase = hgPhase( cosTheta, mieDirectionalG );
			vec3 betaMTheta = vBetaM * mPhase;

			vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
			Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

			// nightsky
			float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
			float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
			vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
			vec3 L0 = vec3( 0.1 ) * Fex;

			// composition + solar disc
			float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
			L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

			vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

			vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

			gl_FragColor = vec4( retColor, 1.0 );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>

		}`},yje=new nr;class bje extends mt{constructor(e,t){super(e||new vi(1,1,1),t||new ii({name:"SkyShader",fragmentShader:hO.fragmentShader,vertexShader:hO.vertexShader,uniforms:Lo.clone(hO.uniforms),side:Oi,depthWrite:!1})),this.isSkyBox=!0,this._sceneTmp=new qa,this.type="SkyBox",e||this.scale.multiplyScalar(1e3),t||(this.material.uniforms.turbidity.value=10,this.material.uniforms.rayleigh.value=2,this.material.uniforms.mieCoefficient.value=.005,this.material.uniforms.mieDirectionalG.value=.8,this.material.uniforms.sunPosition.value.copy(this.calSunPosition(2,180))),this._sunPosition=this.material.uniforms.sunPosition.value,this.onBeforeRender=async(i,n,s)=>{this._sceneRoot=n,this._sun&&typeof this._sun=="string"&&(this._sun=n.getObjectByProperty("uuid",this._sun)),this._renderTarget||(this._renderTarget=1,this._pmremGenerator=new p_(i),this.updateRenderTarget()),this._sun&&!this._sun.position.equals(this._sunPosition)&&this.updateSunPotision()}}get turbidity(){return this.material.uniforms.turbidity.value}set turbidity(e){this.material.uniforms.turbidity.value=e}get rayleigh(){return this.material.uniforms.rayleigh.value}set rayleigh(e){this.material.uniforms.rayleigh.value=e}get mieCoefficient(){return this.material.uniforms.mieCoefficient.value}set mieCoefficient(e){this.material.uniforms.mieCoefficient.value=e}get mieDirectionalG(){return this.material.uniforms.mieDirectionalG.value}set mieDirectionalG(e){this.material.uniforms.mieDirectionalG.value=e}get sunPosition(){return this.material.uniforms.sunPosition.value}set sunPosition(e){this.material.uniforms.sunPosition.value.copy(e)}get sun(){return yje}set sun(e){e instanceof Dl&&(this._sun=e,this.updateSunPotision())}calSunPosition(e,t){const i=$i.degToRad(90-e),n=$i.degToRad(t),s=new oe;return s.setFromSphericalCoords(1,i,n),s}updateSunPotision(){typeof this._sun=="object"&&(this.material.uniforms.sunPosition.value.copy(this._sun.position),this.updateRenderTarget())}updateRenderTarget(){if(this._renderTarget!==void 0&&typeof this._renderTarget=="object"&&this._renderTarget.dispose(),!this._pmremGenerator)return;const e=this.parent,t=e?e.children.indexOf(this):-1;e&&e.children.splice(t,1),this._sceneTmp.children.push(this),this._renderTarget=this._pmremGenerator.fromScene(this._sceneTmp),e&&(t!==-1?e.children.splice(t,0,this):e.children.push(this)),this._sceneRoot&&(this._sceneRoot.background=this._renderTarget.texture,this._sceneRoot.environment=this._renderTarget.texture)}serialize(e){e.scale=this.scale.toArray(),e.turbidity=this.turbidity,e.rayleigh=this.rayleigh,e.mieCoefficient=this.mieCoefficient,e.mieDirectionalG=this.mieDirectionalG,e.sunPosition=this.sunPosition.toArray(),this._sun&&(e.sun=this._sun.uuid||this._sun)}deserialize(e){this.scale.fromArray(e.scale),this.turbidity=e.turbidity,this.rayleigh=e.rayleigh,this.mieCoefficient=e.mieCoefficient,this.mieDirectionalG=e.mieDirectionalG,this.sunPosition.fromArray(e.sunPosition),e.sun&&(this._sun=e.sun),this.updateRenderTarget()}}Cr("SkyBox",{members:{scale:"Vector3",turbidity:"Number",rayleigh:"Number",mieCoefficient:"Number",mieDirectionalG:"Number",sun:"Object3D"},proto:"Object3D",group:"Objects.Sky Box",icon:"box",create:({geometry:r,material:e}={})=>new bje(r,e)});const gX={Boolean:{fromJson:r=>new Boolean(r),toJson:r=>r},Number:{fromJson:r=>r??0,toJson:r=>r},String:{fromJson:r=>r||"",toJson:r=>r},Url:{fromJson:r=>r||"",toJson:r=>r},Script:{fromJson:r=>r||"",toJson:r=>r},Color:{fromJson:r=>new at().fromArray(r||[]),toJson:r=>r.toArray()},Vector2:{fromJson:r=>new qe().fromArray(r||[]),toJson:r=>r.toArray()},Vector3:{fromJson:r=>new oe().fromArray(r||[]),toJson:r=>r.toArray()},Vector4:{fromJson:r=>new jt().fromArray(r||[]),toJson:r=>r.toArray()},Euler:{fromJson:r=>new Xi().fromArray(r||[]),toJson:r=>r.toArray()},bool:{label:"bool UniformNode",fromJson:function(r){const e=new Fr(!1,"bool");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},float:{label:"float UniformNode",fromJson:function(r){const e=new Fr(0,"float");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},color:{label:"color UniformNode",fromJson:function(r){const e=new Fr(new at,"color");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},vec2:{label:"vec2 UniformNode",fromJson:function(r){const e=new Fr(new qe);return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},vec3:{label:"vec3 UniformNode",fromJson:function(r){const e=new Fr(new oe);return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},vec4:{label:"vec4 UniformNode",fromJson:function(r){const e=new Fr(new oe);return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},int:{label:void 0,fromJson:function(r){const e=new Fr(0,"int");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},mat3:{label:void 0,fromJson:function(r){const e=new Fr(new hr);return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},mat4:{label:void 0,fromJson:function(r){const e=new Fr(new St);return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},code:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},uint:{label:void 0,fromJson:function(r){const e=new Fr(0,"uint");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},void:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},property:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},sampler:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},texture:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},cubeTexture:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},ivec2:{label:void 0,fromJson:function(r){const e=new Fr(new qe,"ivec2");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},uvec2:{label:void 0,fromJson:function(r){const e=new Fr(new qe,"uvec2");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},bvec2:{label:void 0,fromJson:function(r){const e=new Fr(new qe,"bvec2");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},ivec3:{label:void 0,fromJson:function(r){const e=new Fr(new oe,"ivec3");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},uvec3:{label:void 0,fromJson:function(r){const e=new Fr(new oe,"uvec3");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},bvec3:{label:void 0,fromJson:function(r){const e=new Fr(new oe,"bvec3");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},ivec4:{label:void 0,fromJson:function(r){const e=new Fr(new jt,"ivec4");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},uvec4:{label:void 0,fromJson:function(r){const e=new Fr(new jt,"uvec4");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},bvec4:{label:void 0,fromJson:function(r){const e=new Fr(new jt,"bvec4");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},imat3:{label:void 0,fromJson:function(r){const e=new Fr(new hr,"imat3");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},umat3:{label:void 0,fromJson:function(r){const e=new Fr(new hr,"umat3");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},bmat3:{label:void 0,fromJson:function(r){const e=new Fr(new hr,"bmat3");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},imat4:{label:void 0,fromJson:function(r){const e=new Fr(new St,"imat4");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},umat4:{label:void 0,fromJson:function(r){const e=new Fr(new St,"umat4");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},bmat4:{label:void 0,fromJson:function(r){const e=new Fr(new St,"bmat4");return r&&e.deserialize(r),e},toJson:function(r){const e={};return r.serialize(e),r}},Matrix3:{label:void 0,fromJson:r=>new hr,toJson:function(r){const e={};return r.serialize(e),r}},Matrix4:{label:void 0,fromJson:r=>new St,toJson:function(r){const e={};return r.serialize(e),r}},Audio:{label:void 0,fromJson:r=>r||"",toJson:r=>r},Image:{label:void 0,fromJson:function(r){const e=document.createElement("img");return r!=null&&r.src&&(e.src=r.src),e},toJson:function(r){return{src:r.src}}},Texture:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},CubeTexture:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},Material:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}},Object3D:{label:void 0,fromJson:function(){throw new Error("Function not implemented.")},toJson:function(){throw new Error("Function not implemented.")}}};function U2(r,e){return gX[r].fromJson(e)}function vX(r,e){return gX[r].toJson(e)}class ns extends Zt{constructor(e,t,i){super("void"),this._inst=e,this.objectType=t,this.isObjectNode=!0,this.typesExtended={in:{},out:{}},this.eventDispatcher=null,this._object=null,this._objectRaw=null,i&&(this.object=i),this.updateType="none",this.isObject3DNode=Cb(t,"Object3D"),this.initTypes()}get object(){return this._object}set object(e){if(typeof e!="object"||!n8e(e,this.objectType))throw or.panic(`type is not compitable, expected type is ${this.objectType}!`);this._objectRaw=e,this._object=new Proxy(e,{get(t,i,n){if(i===Tn)return t;if(typeof i!="string")return Reflect.get(t,i,n);const s=i.split(".");if(s.length>1){let o=Reflect.get(t,s[0],n);for(let a=1;a<s.length;a++)o=o[s[a]];return o}return Reflect.get(t,i,n)},set:(t,i,n,s)=>{if(typeof i!="string")return Reflect.set(t,i,n,s);if(Reflect.get(t,i,s)===n)return!0;let o=!0;const a=i.split(".");if(a.length>1){let l=Reflect.get(t,a[0],s);const c=a.pop();for(let u=1;u<a.length;u++)l=l[a[u]];if(l[c]===n)return!0;l[c]=n}else o=Reflect.set(t,i,n,t);if(this.eventDispatcher){const l=!!this.typesExtended.in[i];this.eventDispatcher.dispatchEvent({type:l?"nodeEventInputChanged":"nodeEventOutputChanged",source:null,node:this,fields:[i]})}return o}}),(e instanceof nr||e instanceof Wr)&&(this.objectType=e.type,this.initTypes()),Object.defineProperty(this,"_object",{writable:!1})}getObjectsExtended(){return{in:this.object,out:this.object}}fill(e,t){this._object&&typeof this._object=="string"&&(this.object=t[this._object]||e.getObjectByProperty("uuid",this._object))}dispose(){this._object&&this._object instanceof Nr&&this._object.dispose()}toJSON(e){const t=super.toJSON(e);if(this._object instanceof Nr){const i=this._object.toJSON(e);e.textures[this._object.uuid]=i}return t}serialize(e){if(!this._object)throw or.panic("object has not been set before serialize!");super.serialize(e),e._inst=this._inst,e.object=this._object.uuid,e.objectType=this.objectType}deserialize(e){if(!Cb(e.objectType,this.objectType))throw or.panic(`type is not compitable, expected type is ${this.objectType}!`);super.deserialize(e),this._object=e.object,this.initTypes()}createDefault(e){if(this.isObject3DNode)this.object=e,this.objectType=e.type,this.initTypes();else{const t=rS[this.objectType];if(!t)throw or.panic(`class[${this.objectType}] not found in THREE!`);this.object=new t}}initTypes(){const e=Ab(this.objectType);if(!e)throw or.panic(`class[${this.objectType}] not found!`);zl(this.typesExtended.in),Object.assign(this.typesExtended.in,e.in),zl(this.typesExtended.out),Object.assign(this.typesExtended.out,e.out)}}Gc("ObjectNode",ns,{object:"Object3D | Texture"},"",{object3DRef:{clsName:"ObjectNode",func:()=>new ns("object3DRef","Object3D"),group:"Objects.Object",icon:"box"},texture:{clsName:"ObjectNode",func:()=>new ns("texture","Texture"),group:"Inputs.Primitives.Texture",icon:"photo"}});const xje=globalThis.AsyncFunction||(async r=>r).constructor;class Rp extends ns{constructor(e,t,i=!0){super(e,"Object3D",t),this.editable=i,this.isScriptNode=!0,this.enabled=!1,this._parametersProps=["params","out","THREE","TSL","world","window","document"],this._parameters=[null,null,rS,XS,Vo,null,null],this._code="",this.inputs=new Proxy({},{set:(n,s,o,a)=>typeof s!="string"?Reflect.set(n,s,o,a):Reflect.get(n,s,a)===o?!0:(this.eventDispatcher&&this.eventDispatcher.dispatchEvent({type:"nodeEventInputChanged",source:null,node:this,fields:[s]}),Reflect.set(n,s,o,a))}),this.outputs=new Proxy({},{set:(n,s,o,a)=>typeof s!="string"?Reflect.set(n,s,o,a):Reflect.get(n,s,a)===o?!0:(this.eventDispatcher&&this.eventDispatcher.dispatchEvent({type:"nodeEventOutputChanged",source:null,node:this,fields:[s]}),Reflect.set(n,s,o,a))}),this._parameters[0]=this.inputs,this._parameters[1]=this.outputs,this._main=this.compile()}get code(){return this._code}set code(e){this._code=e;try{this._main=this.compile()}catch(t){console.warn(t)}}async exec(e){this.enabled&&this._code&&this.object&&await this._main.call(this._objectRaw,...this._parameters)}getObjectsExtended(){return{in:this.inputs,out:this.outputs}}initTypes(){}addInput(e,t){if(this.typesExtended.in[e])return;this.typesExtended.in[e]={types:[t],direct:"in",nname:/^[a-z]/.test(t)?e:void 0};const i=U2(t);return this.inputs[e]=i,i}removeInput(e){return this.typesExtended.in[e]?(delete this.typesExtended.in[e],delete this.inputs[e],!0):!1}addOutput(e,t){if(this.typesExtended.out[e])return;this.typesExtended.out[e]={types:[t],direct:"out",nname:/^[a-z]/.test(t)?e:void 0};const i=U2(t);return this.outputs[e]=i,i}removeOutput(e){return this.typesExtended.out[e]?(delete this.typesExtended.out[e],delete this.outputs[e],!0):!1}serialize(e){var t;super.serialize(e),e.object=(t=this.object)==null?void 0:t.uuid,e.types={...this.typesExtended},e.enabled=this.enabled,e.inputs={};for(const[i,n]of Object.entries(this.typesExtended.in))e.inputs[i]=vX(n.types[0],this.inputs[i]);e.outputs={};for(const[i,n]of Object.entries(this.typesExtended.out))e.outputs[i]=vX(n.types[0],this.outputs[i]);e.code=this._code}deserialize(e){var t,i;super.deserialize(e),(t=e.types)!=null&&t.in&&(zl(this.typesExtended.in),Object.assign(this.typesExtended.in,e.types.in));for(const[n,s]of Object.entries(this.typesExtended.in)){const o=e.inputs?e.inputs[n]:void 0;this.inputs[n]=U2(s.types[0],o)}(i=e.types)!=null&&i.out&&(zl(this.typesExtended.out),Object.assign(this.typesExtended.out,e.types.out));for(const[n,s]of Object.entries(this.typesExtended.out)){const o=e.outputs?e.outputs[n]:void 0;this.outputs[n]=U2(s.types[0],o)}e.code!==void 0&&(this.code=e.code),this.enabled=e.enabled}compile(){return new xje(this._parametersProps,this._code)}}Gc("ScriptNode",Rp,{enabled:"Boolean",code:"Script"},"ObjectNode");class Vs extends Rp{constructor(){super(...arguments),this.isScriptBlockNode=!0}get prev(){return this._prev}set prev(e){this._prev=e}get next(){return this._next}set next(e){this._next=e}async exec(e){this.enabled&&this.object&&(this._code?await this._main.call(this._objectRaw,...this._parameters):!0)!==!1&&this._next&&await this._next.exec(e)}fill(e,t){super.fill(e,t),this.prev&&typeof this.prev=="string"&&(this.prev=t[this.prev]),this.next&&typeof this.next=="string"&&(this.next=t[this.next])}serialize(e){var t,i;super.serialize(e),e.prev=(t=this.prev)==null?void 0:t.uuid,e.next=(i=this.next)==null?void 0:i.uuid}deserialize(e){super.deserialize(e),this.prev=e.prev,this.next=e.next}}Gc("ScriptBlockNode",Vs,{},"ScriptNode",{scriptBlock:{clsName:"UpdateNode",func:()=>new Vs("scriptBlock"),group:"Scripts.Script Block",icon:"brand-javascript"}});class yX extends Vs{constructor(e,t,i,n){super(e,n,!1),this.isEffectNode=!0,zl(this.typesExtended.in),zl(this.inputs);for(const[s,o]of Object.entries(t.in||{}))this.addInput(s,o);zl(this.typesExtended.out),zl(this.outputs);for(const[s,o]of Object.entries(t.out||{}))this.addOutput(s,o);i&&(this.code=i)}serialize(e){super.serialize(e),delete e.code,delete e.types}}Gc("EffectNode",yX,{},"ScriptBlockNode");function bX(r,e,t,i){return f2(r,{clsName:"EffectNode",func:()=>new yX(r,t,i),group:`Effects.${e}`,icon:"polygon"})}bX("FallingPoints","Falling Points",{in:{speed:"Number",size:"Number",maxCount:"Number"}},`const worldPosition = this.getWorldPosition(new THREE.Vector3());
const initialPosition = world.combineBuffer(this, 'position', params.maxCount || 1000);
const geometry = new THREE.BufferGeometry();

this.traverse(function (child) {
  if (child.isMesh) {
    child.material.visible = false;
  }
} );

geometry.setAttribute( 'position', initialPosition.clone() );
geometry.attributes.position.setUsage( THREE.DynamicDrawUsage );

const size = params.size || 0.02;
const mesh = new THREE.Points( geometry, new THREE.PointsMaterial( { size, color: 0xffffff } ) );
const positions = geometry.attributes.position;
const count = positions.count;
const speed = params.speed || 5;
const minY = -worldPosition.y;
let resolve;
const promise = new Promise((rslv) => resolve = rslv);

mesh.onBeforeRender = () => {
  const delta = world.delta;
  let verticesDown = 0;

  for ( let i = 0; i < count; i ++ ) {
    const px = positions.getX( i );
    const py = positions.getY( i );
    const pz = positions.getZ( i );

    if ( py > minY ) {
      positions.setXYZ(
        i,
        px + 1.5 * ( 0.50 - Math.random() ) * speed * delta,
        py + 3.0 * ( 0.25 - Math.random() ) * speed * delta,
        pz + 1.5 * ( 0.50 - Math.random() ) * speed * delta
      );
    } else {
      verticesDown += 1;
    }
  }

  // all vertices down
  if ( verticesDown >= count ) {
    resolve();
  }
  positions.needsUpdate = true;
};
this.add(mesh);
await promise;
this.removeFromParent();
`);class xX extends nr{constructor(e,t,i){super(),this.geometry=e,this.material=t,this.isEffect=!0,this.type="Effect",this.visible=!1,this.props=DL({...i},(n,s)=>{this.onPropsChanged([n],[s])}),this.addEventListener("added",async()=>{await this.onAttached(),this.geometry&&this.material&&(this.visible=!0)}),this.addEventListener("removed",async()=>{await this.onDetached(),this.visible=!1})}async onAttached(){await this.build()}onPropsChanged(e,t){}onDetached(){this.geometry&&(this.geometry.dispose(),this.geometry=void 0),this.material&&(this.material.dispose(),this.geometry=void 0)}async build(){}dispose(){this.geometry&&(this.geometry.dispose(),this.geometry=void 0),this.material&&(this.material.dispose(),this.geometry=void 0)}clone(e){const t=super.clone(e),i=nd(this.props),n=t.props[Tn];return sd(n,i),t}serialize(e){e.props=nd(this.props)}deserialize(e){if(e.props){const t=this.props[Tn];sd(t,e.props),this.build()}}}Cr("Effect",{members:{},proto:"Object3D",group:"",icon:"",create:()=>new xX});const pO={};function wX(r,e){if(pO[r])throw or.panic(`Class[${r}] aready exists`);return pO[r]=e,Cr(r,e)}function wje(r,e){const t=pO[r];if(!t)throw or.panic(`Class[${r}] not found!`);return t.create(e)}Vo.createEffect=wje;class _je extends xX{constructor(){super(void 0,void 0,{maxCount:1e3,texture:"",lerpPosition:0}),this.isEffectBurning=!0,this.type="EffectBurning"}onPropsChanged(e,t){const i=this.parent;if(!i||!(i instanceof mt))return;e.includes("maxCount")&&(this.geometry&&(this.geometry.dispose(),this.geometry=void 0),this.build());let n=!1;if(e.includes("lerpPosition"))if(this.material){const s=xn("targetPosition","vec3"),o=sn(this.props.lerpPosition),a=Ds(ho,s,o);this.material.positionNode=a,this.material.uniformsNeedUpdate=!0}else n=!0;e.includes("texture")&&(n=!0),n&&(this.material&&(this.material.dispose(),this.material=void 0),this.build())}async buildMaterial(){if(!this.props.texture)return;const e=xn("targetPosition","vec3"),t=xn("particleSize","float"),i=sn(this.props.lerpPosition),n=Ds(ho,e,i),s=await new G_().loadAsync(this.props.texture);s.colorSpace=Lt;const o=xn("particleSpeed","float"),a=xn("particleIntensity","float"),l=X3(1),c=QW($r(6,6),h9,l.mul(o)),u=Dn(s,c).mul(a),d=new qk({depthWrite:!1,transparent:!0,sizeAttenuation:!0,blending:Nl});d.colorNode=u,d.sizeNode=t,d.positionNode=n,this.material&&this.material.dispose(),this.material=d}buildGeometry(){const e=this.parent;if(!e||!(e instanceof mt))return;const t=new sr,i=[],n=[],s=[],o=Vo.combineBuffer(e,"position",this.props.maxCount||1e3),a=o.count;for(let l=0;l<a;l++)i.push(20+Math.random()*50),n.push(Math.random()*.04),s.push(30+Math.random()*230);t.setAttribute("position",o),t.setAttribute("targetPosition",o),t.setAttribute("particleSpeed",new Rt(i,1)),t.setAttribute("particleIntensity",new Rt(n,1)),t.setAttribute("particleSize",new Rt(s,1)),this.geometry&&this.geometry.dispose(),this.geometry=t}async build(){this.geometry||this.buildGeometry(),this.material||await this.buildMaterial(),this.geometry&&this.material&&(this.isPoints=!0,this.visible=!0)}toJSON(e){const t=this.isPoints;delete this.isPoints;const i=super.toJSON(e);return this.isPoints=t,i}}wX("EffectBurning",{members:{"props.maxCount":"Number","props.texture":"Url","props.lerpPosition":"Number"},proto:"Effect",group:"Effects.Burning Effect",icon:"fireworks",create:()=>new _je}),bX("Burning","Burning Body",{in:{texture:"Url",lerpPosition:"Number",time:"Number",maxCount:"Number"}},`const effect = world.createEffect('EffectBurning');
effect.props.maxCount = params.maxCount || 1000;
effect.props.lerpPosition = params.lerpPosition;
effect.props.texture = params.texture;
this.add(effect);

// waits
if (params.time) {
  await world.wait(params.time);
  effect.removeFromParent();
}
`);class kp extends Vs{constructor(e,t,i,n){super(e,i),this.isEventListenerNode=!0,this._event="onBorn",t&&(this._event=t),this._eventSource=n||this.object}get object(){return super.object}set object(e){super.object=e,this._eventSource||(this._eventSource=e),this.resetEventlisten(this._event)}get event(){return this._event}set event(e){this.resetEventlisten(e),this._event=e}serialize(e){super.serialize(e),e.event=this.event}deserialize(e){super.deserialize(e),this.event=e.event}resetEventlisten(e){this.object===null||typeof this.object!="object"||(this._listener&&this._eventSource.removeEventListener(this.event,this._listener),this._listener=t=>{this.exec(t)},this._eventSource.addEventListener(e,this._listener))}dispose(){super.dispose(),this._listener&&typeof this.object=="object"&&this._eventSource.removeEventListener(this.event,this._listener)}}Gc("EventListenerNode",kp,{event:"String"},"ScriptBlockNode",{eventOnBorn:{clsName:"EventListenerNode",func:()=>new kp("eventOnBorn","onBorn"),group:"Scripts.On Born",icon:"loader"},eventOnDead:{clsName:"EventListenerNode",func:()=>new kp("eventOnDead","onDead"),group:"Scripts.On Dead",icon:"bell-off"},eventOnCollisionEnter:{clsName:"EventListenerNode",func:()=>new kp("eventOnCollisionEnter","onCollisionEnter"),group:"Scripts.On Collision Enter",icon:"arrows-shuffle"},eventOnCollisionLeave:{clsName:"EventListenerNode",func:()=>new kp("eventOnCollisionLeave","onCollisionLeave"),group:"Scripts.On Collision Leave",icon:"arrow-bounce"},eventCustom:{clsName:"EventListenerNode",func:()=>new kp("eventCustom","onCustomEvent"),group:"Scripts.On Custom Event",icon:"calendar-event"}});class _X extends Rp{constructor(e,t){super(e,t),this.isUpdateNode=!0}onUpdate(e,t,i,n){if(this.enabled&&this._code&&this.object)try{this._main.call(this._objectRaw,...this._parameters,i,n)}catch(s){console.error(s)}}compile(){return new Function(...this._parametersProps,"delta","now",this._code)}}Gc("UpdateNode",_X,{},"ScriptNode",{update:{clsName:"UpdateNode",func:()=>new _X("update"),group:"Scripts.On Update",icon:"refresh"}});class fO extends Vs{constructor(e,t){super(e,t),this.isKeyboardNode=!0,this.event="keydown",this.key="",this._isActived=!1,this._listenerKeyDown=n=>{this.exec(n)},this._listenerKeyUp=n=>{this.exec(n)},this._listenerBorn=()=>{this._isActived=!0},this._listenerDead=()=>{this._isActived=!1};const i=["_listenerKeyDown","_listenerKeyUp"];window.addEventListener("keydown",this._listenerKeyDown),window.addEventListener("keyup",this._listenerKeyUp),this.object&&typeof this.object=="object"&&(this.object.addEventListener("onBorn",this._listenerBorn),this.object.addEventListener("onDead",this._listenerDead),i.push("_listener","_listenerBorn","_listenerDead"));for(const n of i)Object.defineProperty(this,n,{writable:!1})}get object(){return super.object}set object(e){super.object=e;const t=[];this.object&&typeof this.object=="object"&&(this.object.addEventListener("onBorn",this._listenerBorn),this.object.addEventListener("onDead",this._listenerDead),t.push("_listener","_listenerBorn","_listenerDead"));for(const i of t)Object.defineProperty(this,i,{writable:!1})}async exec(e){if(this._isActived&&!(e.type!==this.event||e.key!==this.key))return super.exec(e)}serialize(e){super.serialize(e),e.event=this.event,e.key=this.key}deserialize(e){super.deserialize(e),this.event=e.event,this.key=e.key}dispose(){super.dispose(),window.removeEventListener("keydown",this._listenerKeyDown),window.removeEventListener("keyup",this._listenerKeyUp),this.object&&typeof this.object=="object"&&(this.object.removeEventListener("onBorn",this._listenerBorn),this.object.removeEventListener("onDead",this._listenerDead))}}Gc("KeyboardNode",fO,{event:'"keydown"|"keyup"',key:'"a"|"b"|"c"|"d"|"e"|"f"|"g"|"h"|"i"|"j"|"k"|"l"|"m"|"n"|"o"|"p"|"q"|"r"|"s"|"t"|"u"|"v"|"w"|"x"|"y"|"z"'},"ScriptBlockNode",{keyboardEvent:{clsName:"KeyboardNode",func:()=>new fO("keyboardEvent"),group:"Scripts.On Keyboard",icon:"keyboard"}});const Sje={lineBasicMaterial:{clsName:"LineBasicMaterial",func:()=>new Ki,group:"Material.Line Basic Material",icon:"brand-medium"},meshBasicMaterial:{clsName:"MeshBasicMaterial",func:()=>new Ei,group:"Material.Mesh Basic Material",icon:"brand-medium"},meshPhysicalMaterial:{clsName:"MeshPhysicalMaterial",func:()=>new Io({}),group:"Material.Mesh Physical Material",icon:"brand-medium"},meshStandardMaterial:{clsName:"MeshStandardMaterial",func:()=>new Kn,group:"Material.Mesh Standard Material",icon:"brand-medium"},pointsMaterial:{clsName:"PointsMaterial",func:()=>new qh,group:"Material.Points Material",icon:"brand-medium"},spriteMaterial:{clsName:"SpriteMaterial",func:()=>new Wh,group:"Material.Sprite Material",icon:"brand-medium"},pongMaterial:{clsName:"MeshPhongMaterial",func:()=>new Bu,group:"Material.Phong Material",icon:"brand-medium"},toonMaterial:{clsName:"MeshToonMaterial",func:()=>new B_({color:16777215,refractionRatio:.98}),group:"Material.Toon Material",icon:"brand-medium"},normalMaterial:{clsName:"MeshNormalMaterial",func:()=>new Gy,group:"Material.Normal Material",icon:"brand-medium"},matcapMaterial:{clsName:"MeshMatcapMaterial",func:()=>new z_,group:"Material.Matcap Material",icon:"brand-medium"},lambertMaterial:{clsName:"MeshLambertMaterial",func:()=>new qm,group:"Material.Lambert Material",icon:"brand-medium"},depthMaterial:{clsName:"MeshDepthMaterial",func:()=>new jh,group:"Material.Depth Material",icon:"brand-medium"}};for(const[r,e]of Object.entries(Sje))f2(r,e);function mO(r,e){return r instanceof ns?r:new Proxy(r,{get(t,i,n){if(i===Tn)return t;if(typeof i!="string")return Reflect.get(t,i,n);if(Reflect.has(t,`${i}Node`)){const o=Reflect.get(t,`${i}Node`,n);if(o!==null)return o}const s=i.split(".");if(s.length>1){let o=Reflect.get(t,s[0],n);for(let a=1;a<s.length;a++)o=o[s[a]];return o}return Reflect.get(t,i,n)},set:(t,i,n,s)=>{if(typeof i!="string")return Reflect.set(t,i,n,s);let o=i;Reflect.has(t,`${i}Node`)&&n&&n.isNode&&(o=`${i}Node`);let a=!0;const l=i.split(".");if(l.length>1){let c=Reflect.get(t,l[0],s);const u=l.pop();for(let d=1;d<l.length;d++)c=c[l[d]];if(c[u]===n)return!0;c[u]=n}else{if(Reflect.get(t,o,s)===n)return!0;a=Reflect.set(t,o,n,s)}return a&&e.dispatchEvent({type:"nodeEventInputChanged",source:null,node:r,fields:[i]}),a}})}var SX=(r=>(r[r.None=0]="None",r[r.Ref=1]="Ref",r[r.Push=2]="Push",r[r.Chain=3]="Chain",r))(SX||{});class kg extends Ln{constructor(e){super(),this.object=e,this.nodes=[],this.isLocked=!1,e.graph||(e.graph=this),this.addEventListener("nodeEventOutputChanged",({node:t,fields:i})=>{for(const n of i)this.applyNodePins(t._parentGraphNode,n,"out")})}newGraphNode(e,t){const i=new Proxy({x:0,y:0},{set:(s,o,a,l)=>{if(a===Reflect.get(s,o))return!0;const c=Reflect.set(s,o,a,l);return c&&this.dispatchEvent({type:"graphModified",soure:this,nodes:[n]}),c}}),n={name:t,scoped:mO(e,this),anchor:i,bounds:{},outs:{}};return e._parentGraphNode=n,n}add(e){if(this.nodes.indexOf(e)!==-1)throw or.panic(`Graph Node[${e.scoped.uuid}] aready exists`);e.scoped instanceof ns&&(e.scoped.eventDispatcher=this),this.nodes.push(e),this.dispatchEvent({type:"graphAdded",soure:this,nodes:[e]})}remove(e){const t=this.nodes.indexOf(e);if(t===-1)return!1;this.nodes.splice(t,1),e.scoped instanceof ns&&(e.scoped.eventDispatcher=null);for(const i of Object.keys(e.bounds))this.disconnect({node:e,field:i},!0);for(const i of Object.values(e.outs))for(const n of[...i])this.disconnect({node:n.node,field:n.field},!0);e.scoped.dispose&&e.scoped.dispose(),this.dispatchEvent({type:"graphRemoved",soure:this,nodes:[e]})}get(e){return this.nodes.find(t=>t.scoped.uuid===e)}update(e,t,i,n){for(const s of this.nodes)s.scoped.onUpdate&&s.scoped.onUpdate(e,t,i,n)}connect(e,t,i){if(!e.field&&e.node.scoped instanceof Vs||!e.field&&t.node.scoped instanceof Vs){if(e.node.scoped instanceof Vs!=t.node.scoped instanceof Vs){if(i)return 0;throw or.panic("not supported")}if(!(e.node.scoped instanceof Vs)||!(t.node.scoped instanceof Vs)){if(i)return 0;throw or.panic("not supported")}if(e.node.scoped.next===t.node.scoped){if(i)return 3}else if(e.node.scoped.next||t.node.scoped.prev){if(i)return 0;throw or.panic("not supported")}return i||(e.node.scoped.next=t.node.scoped,t.node.scoped.prev=e.node.scoped,this.dispatchEvent({type:"graphModified",soure:this,nodes:[e.node,t.node]}),this.dispatchEvent({type:"graphConnected",soure:this,from:e.node,to:t.node})),3}if(!t.field){if(i)return 0;throw or.panic("not supported")}const n=t.node.bounds[t.field];if(n){if(n.node===e.node&&n.field===e.field)return n.type;if(i)return 0;throw or.panic(`field[${t.field}] has been bound`)}const s=e.node.scoped instanceof ns?e.node.scoped.objectType:OL(e.node.name),o=OL(t.node.name),{out:a}=e.node.scoped.typesExtended||Ab(s),{in:l}=t.node.scoped.typesExtended||Ab(o),c=e.field?a[e.field]:{types:[s]},u=t.field?l[t.field]:{types:[o]};if(e.field){if(!i8e(c.types,u.types)){if(i)return 0;throw or.panic("type mismatched")}}else if(!s8e(s,u.types)){if(i)return 0;throw or.panic("type mismatched")}const d=c.types.findIndex(p=>p2(p))!==-1?1:2;if(i)return d;t.node.bounds[t.field]={node:e.node,type:d,field:e.field};const h=e.field||"$";return(e.node.outs[h]||(e.node.outs[h]=[])).push({node:t.node,type:d,field:t.field}),this.applyNodeBounds(t.node),this.dispatchEvent({type:"graphModified",soure:this,nodes:[t.node]}),this.dispatchEvent({type:"graphConnected",soure:this,from:e.node,to:t.node}),d}disconnect(e,t){if(!e.field&&e.node.scoped instanceof Vs){if(!e.node.scoped.prev)throw or.panic("state error");e.node.scoped.prev.next=void 0,e.node.scoped.prev=void 0;return}if(!e.field)throw or.panic("not allowed");const i=e.node.bounds[e.field];if(i===void 0)return;const n=i.node,s=i.field||"$",o=n.outs[s];if(!o)throw or.panic(`bound list not found for node[field=${e.field}]`);const a=e.node.scoped,l=o.findIndex(d=>d.node===e.node&&d.field===e.field);if(l===-1)return;delete e.node.bounds[e.field],o.splice(l,1);const c=a instanceof ns?a.getObjectsExtended().in:a,u=c[e.field];if(u instanceof Wr)c[e.field]=new Ei;else{const d=`${e.field}Node`;Object.hasOwn(c,d)?c[d]=null:u&&(u.isNode||u.isMaterial)&&(c[e.field]=null),c instanceof Wr&&(c.needsUpdate=!0,c instanceof ii&&(c.uniformsNeedUpdate=!0))}t||(this.dispatchEvent({type:"graphModified",soure:this,nodes:[n,e.node]}),this.dispatchEvent({type:"graphDisconnected",soure:this,from:n,to:e.node}))}clear(){for(const e of this.nodes)e.scoped.dispose&&e.scoped.dispose();this.nodes.length=0}clone(e,t){const i=t.get(this.object);if(!i)throw or.panic(`object[${this.object.uuid}] is not found in list being transfered`);const n={};for(const o of this.nodes){const a=o.scoped;let l;const c={};if(a instanceof ns){l=m2(o.name),a.serialize(c),l.deserialize(c),a.object instanceof Nr&&(n[a.object.uuid]=a.object);const u=a.object[Tn],d=t.get(u);d&&(n[u.uuid]=d)}else a.clone?l=a.clone(!0):l=m2(o.name,a);n[l.uuid]=l,n[a.uuid]=l}const s=new kg(i);for(const o of Object.values(this.nodes)){let a=n[o.scoped.uuid];a instanceof ns?(a.fill(e,n),a.eventDispatcher=s):a[Tn]||(a=mO(Vt(a),s));const l=new Proxy({...o.anchor},{set:(u,d,h,p)=>{if(h===Reflect.get(u,d))return!0;const f=Reflect.set(u,d,h,p);return f&&s.dispatchEvent({type:"graphModified",soure:s,nodes:[c]}),f}}),c={name:o.name,scoped:a,anchor:l,bounds:{},outs:{}};a._parentGraphNode=c;for(const[u,d]of Object.entries(o.bounds)){const{node:h,type:p,field:f}=d,m=n[h.scoped.uuid];if(!m)throw or.panic(`node[${h.scoped.uuid}] not found`);c.bounds[u]={type:p,node:m,field:f}}for(const[u,d]of Object.entries(o.outs||{})){const h=c.outs[u]||(c.outs[u]=[]);for(const p of d){const{node:f,type:m,field:g}=p,v=n[f.scoped.uuid];if(!v)throw or.panic(`node[${f.scoped.uuid}] not found`);h.push({node:v,type:m,field:g})}}s.nodes.push(c)}for(const o of s.nodes){for(const a of Object.values(o.bounds)){const l=s.nodes.find(c=>c.scoped.uuid===a.node.uuid);l||console.error(`node[${a.node.uuid}] not found!`),a.node=l}for(const a of Object.values(o.outs))for(const l of a){const c=s.nodes.find(u=>u.scoped.uuid===l.node.uuid);c||console.error(`node[${l.node.uuid}] not found!`),l.node=c}}for(const o of s.nodes)s.applyNodeBounds(o);return s}serialize(e){const t={isGraph:!0,nodes:[]};for(const i of this.nodes){e.nodes[i.scoped.uuid]||(e.nodes[i.scoped.uuid]=i.scoped.toJSON(e));const n={};Object.entries(i.outs).forEach(([o,a])=>{n[o]=a.map(l=>({n:l.node.scoped.uuid,f:l.field,t:l.type}))});const s={name:i.name,node:i.scoped.uuid,anchor:{...i.anchor},bounds:Object.fromEntries(Object.entries(i.bounds).map(o=>[o[0],{t:o[1].type,n:o[1].node.scoped.uuid,f:o[1].field}])),outs:n};t.nodes.push(s)}return t}deserialize(e,t,i){if(!e||!e.isGraph)return;if(!Array.isArray(e.nodes))throw or.panic("not node info found");this.clear();const n={...t,...i};for(const s of e.nodes){let o=t[s.node];if(!o)throw or.panic(`node[${s.node}] not found`);o instanceof ns?(o.fill(this.object,n),o.eventDispatcher=this):o=mO(Vt(o),this);const a=new Proxy(s.anchor,{set:(c,u,d,h)=>{if(d===Reflect.get(c,u))return!0;const p=Reflect.set(c,u,d,h);return p&&this.dispatchEvent({type:"graphModified",soure:this,nodes:[l]}),p}}),l={name:s.name,scoped:o,anchor:a,bounds:{},outs:{}};o._parentGraphNode=l;for(const[c,u]of Object.entries(s.bounds)){const{n:d,t:h,f:p}=u,f=t[d];if(!f)throw or.panic(`node[${d}] not found`);l.bounds[c]={type:h,node:f,field:p}}for(const[c,u]of Object.entries(s.outs||{})){const d=l.outs[c]||(l.outs[c]=[]);for(const h of u){const{n:p,t:f,f:m}=h,g=t[p];if(!g)throw or.panic(`node[${p}] not found`);d.push({node:g,type:f,field:m})}}this.nodes.push(l)}for(const s of this.nodes){for(const o of Object.values(s.bounds)){const a=this.nodes.find(l=>l.scoped.uuid===o.node.uuid);a||console.error(`node[${o.node.uuid}] not found!`),o.node=a}for(const o of Object.values(s.outs))for(const a of o){const l=this.nodes.find(c=>c.scoped.uuid===a.node.uuid);l||console.error(`node[${a.node.uuid}] not found!`),a.node=l}}for(const s of this.nodes)this.applyNodeBounds(s)}applyNodeBounds(e,t){for(const[i,n]of Object.entries(e.bounds)){if(t&&!t.includes(i))continue;const{node:s,type:o,field:a}=n,l=s.outs[a||"$"];if(!l)throw or.panic(`bound list not found for node[field=${i}]`);if(!l.find(p=>p.node===e&&p.field===i))throw or.panic(`bound slot not found for node[field=${i}]`);const c=s.scoped instanceof ns?s.scoped.getObjectsExtended().out:s.scoped;let u=a?c[a]:c;const d=e.scoped instanceof ns?e.scoped.getObjectsExtended().in:e.scoped,h=d[i];if(typeof u=="object"&&(u=u[Tn]||u),u!==h){if(o===1){typeof h=="object"&&h.dispose&&h.dispose(),d[i]=u;continue}typeof u=="object"?!h||h===null?d[i]=u:typeof h.copy=="function"?h.copy(u):typeof u.clone=="function"?d[i]=u.clone():(typeof h=="object"&&h.dispose&&h.dispose(),d[i]=u):(typeof h=="object"&&h.dispose&&h.dispose(),d[i]=u)}}e.scoped instanceof Wr&&(e.scoped.needsUpdate=!0,e.scoped instanceof ii&&(e.scoped.uniformsNeedUpdate=!0))}applyNodePins(e,t,i){if(i==="in")e.scoped instanceof Wr?(e.scoped.needsUpdate=!0,e.scoped instanceof ii&&(e.scoped.uniformsNeedUpdate=!0)):e.scoped instanceof ns&&e.scoped.object instanceof Nr&&(e.scoped.object.needsUpdate=!0);else{const n=e.outs[t];if(!n)return;for(const s of n)s.type===1?this.applyNodePins(s.node,s.field,"in"):this.applyNodeBounds(s.node,[s.field])}}addType(e,t,i,n){return t?/^[a-z][a-z0-9_]*$/i.test(t)?e.scoped instanceof Rp?(n==="in"?e.scoped.addInput:e.scoped.addOutput).call(e.scoped,t,i)?!0:(this.dispatchEvent({type:"userEventNotice",source:this,level:"error",message:`Failed to create field[${t}] as type[${i}]!`}),!1):(this.dispatchEvent({type:"userEventNotice",source:this,level:"error",message:"It is not a ScriptNode!"}),!1):(this.dispatchEvent({type:"userEventNotice",source:this,level:"error",message:"Illegal name!"}),!1):(this.dispatchEvent({type:"userEventNotice",source:this,level:"error",message:"Empty name!"}),!1)}removeType(e,t,i){if(!(e.scoped instanceof Rp)||!(i==="in"?e.scoped.removeInput:e.scoped.removeOutput).call(e.scoped,t))return!1;if(i==="in")this.disconnect({node:e,field:t,io:i});else{const n=e.outs[t];if(n)for(const s of[...n])this.disconnect({node:s.node,field:s.field})}return!0}}const{getTypedArray:TX}=g6e,{createNodeFromType:Tje}=XS;class Mje extends Fi{constructor(e){super(e),this._listeners={}}load(e,t,i,n){const s=this,o=this.path===""?Rc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new In(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(d){n!==void 0&&n(d),console.error("THREE:ObjectLoader: Can't parse "+e+".",d.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){n!==void 0&&n(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,n)}async loadAsync(e,t){const i=this,n=this.path===""?Rc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const s=new In(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){this._nodesJSON=e.nodes;const i=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,n),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a);if(e.listeners)for(const d of e.listeners){const h=this.parseObject(d,s,l,a,i);this._listeners[h.uuid]=h}const c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),t!==void 0){let d=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){d=!0;break}d===!1&&t(c)}this._nodesJSON=null,c.traverse(d=>{d.userData.graph&&new kg(d).deserialize(d.userData.graph,this._nodes||{},this._textures||{})});for(const d of Object.values(this._nodes||{}))d.fill&&d.fill(c,this._nodes||{},this._textures||{});return c}async parseAsync(e){this._nodesJSON=e.nodes;const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),n=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o);if(e.listeners)for(const u of e.listeners){const d=this.parseObject(u,n,a,o,t);this._listeners[d.uuid]=d}const l=this.parseObject(e.object,n,a,o,t),c=this.parseSkeletons(e.skeletons,l);this.bindSkeletons(l,c),this._nodesJSON=null,l.traverse(u=>{u.userData.graph&&new kg(u).deserialize(u.userData.graph,this._nodes||{},this._textures||{})});for(const u of Object.values(this._nodes||{}))u.fill&&u.fill(l,this._nodes||{},this._textures||{});return l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,n=e.length;i<n;i++){const s=new Po().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},n={};if(t.traverse(function(s){s.isBone&&(n[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Xh;a.fromJSON(e[s],n),i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const n=new lR;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=n.parse(l);break;default:l.type in e7?a=e7[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={};if(this._textures=t,e!==void 0){const n=this.parseNodes(this._nodesJSON,t);this._nodes=n;const s=new $S;s.setTextures(t),s.setNodes(n);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=n[l.uuid];c?i[l.uuid]=c:i[l.uuid]=s.parse(l)}}else this._nodesJSON&&(this._nodes=this.parseNodes(this._nodesJSON,t));return i}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const n=e[i],s=Gu.parse(n);t[s.uuid]=s}return t}parseImages(e,t){const i=this,n={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:TX(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new V_(t);s=new ju(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const d=e[c],h=d.url;if(Array.isArray(h)){const p=[];for(let f=0,m=h.length;f<m;f++){const g=h[f],v=a(g);v!==null&&(v instanceof HTMLImageElement?p.push(v):p.push(new ma(v.data,v.width,v.height)))}n[d.uuid]=new da(p)}else{const p=a(d.url);n[d.uuid]=new da(p)}}}return n}async parseImagesAsync(e){const t=this,i={};let n;async function s(o){if(typeof o=="string"&&o){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await n.loadAsync(l)}else return o.data?{data:TX(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){n=new ju(this.manager),n.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let d=0,h=c.length;d<h;d++){const p=c[d],f=await s(p);f!==null&&(f instanceof HTMLImageElement?u.push(f):u.push(new ma(f.data,f.width,f.height)))}i[l.uuid]=new da(u)}else{const u=await s(l.url);i[l.uuid]=new da(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const n={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new Sc,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new ma:u=new Nr,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,Eje)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],MX),u.wrapT=i(a.wrap[1],MX)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.encoding!==void 0&&(u.encoding=a.encoding),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,EX)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,EX)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),n[a.uuid]=u}return n}parseObject(e,t,i,n,s){var p;function o(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function a(f){if(f!==void 0){if(Array.isArray(f)){const m=[];for(let g=0,v=f.length;g<v;g++){const x=f[g];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),i[f]}}function l(f){return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),n[f]}if(this._listeners[e.uuid]){const f=this._listeners[e.uuid];if(e.children!==void 0){const m=e.children;for(let g=0;g<m.length;g++)f.add(this.parseObject(m[g],t,i,n,s))}return f}const c=e.geometry?o(e.geometry):void 0,u=e.material?a(e.material):void 0;(c||u)&&(e={...e,geometry:c,material:u});const d=((p=e.userData)==null?void 0:p.extend)||e.type;if(d==="PositionalAudio2"&&e.listener){const f=this._listeners[e.listener];e={...e,listener:f}}const h=m8e(d,e);switch(o7(d)){case"Scene":e.background!==void 0&&(Number.isInteger(e.background)?h.background=new at(e.background):h.background=l(e.background)),e.environment!==void 0&&(h.environment=l(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?h.fog=new Um(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(h.fog=new Dm(e.fog.color,e.fog.density)),e.fog.name!==""&&(h.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(h.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(h.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":e.focus!==void 0&&(h.focus=e.focus),e.zoom!==void 0&&(h.zoom=e.zoom),e.filmGauge!==void 0&&(h.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(h.filmOffset=e.filmOffset),e.view!==void 0&&(h.view=Object.assign({},e.view));break;case"OrthographicCamera":e.zoom!==void 0&&(h.zoom=e.zoom),e.view!==void 0&&(h.view=Object.assign({},e.view));break;case"SkinnedMesh":e.bindMode!==void 0&&(h.bindMode=e.bindMode),e.bindMatrix!==void 0&&h.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(h.skeleton=e.skeleton);break}if(h.uuid=e.uuid,e.name!==void 0&&(h.name=e.name),e.matrix!==void 0?(h.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(h.matrixAutoUpdate=e.matrixAutoUpdate),h.matrixAutoUpdate&&h.matrix.decompose(h.position,h.quaternion,h.scale)):(e.position!==void 0&&h.position.fromArray(e.position),e.rotation!==void 0&&h.rotation.fromArray(e.rotation),e.quaternion!==void 0&&h.quaternion.fromArray(e.quaternion),e.scale!==void 0&&h.scale.fromArray(e.scale)),e.up!==void 0&&h.up.fromArray(e.up),e.castShadow!==void 0&&(h.castShadow=e.castShadow),e.receiveShadow!==void 0&&(h.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(h.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(h.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(h.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&h.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(h.shadow.camera=this.parseObject(e.shadow.camera,t,i,n,s))),e.visible!==void 0&&(h.visible=e.visible),e.frustumCulled!==void 0&&(h.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(h.renderOrder=e.renderOrder),e.userData!==void 0&&(h.userData=e.userData),e.layers!==void 0&&(h.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let m=0;m<f.length;m++)h.add(this.parseObject(f[m],t,i,n,s))}if(e.animations!==void 0){const f=e.animations;for(let m=0;m<f.length;m++){const g=f[m];h.animations.push(s[g])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(h.autoUpdate=e.autoUpdate);const f=e.levels;for(let m=0;m<f.length;m++){const g=f[m],v=h.getObjectByProperty("uuid",g.object);v!==void 0&&h.addLevel(v,g.distance,g.hysteresis)}}return h.deserialize&&h.deserialize(e),h}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const n=t[i.skeleton];n===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(n,i.bindMatrix)}})}parseNodes(e,t){if(e!==void 0){const i={},n=new $S;for(const o of e){const{uuid:a,type:l,_inst:c}=o;if(/Material$/.test(l)){const d=n.parse(o);d.uuid=a,i[a]=d;continue}const u=c?m2(c):Tje(l);i[a]=u,i[a].uuid=a}const s={nodes:i,textures:t};for(const o of e){o.meta=s;const a=i[o.uuid];a.isMaterial||(a.deserialize(o),delete o.meta)}return i}return{}}}const Eje={UVMapping:Zf,CubeReflectionMapping:Co,CubeRefractionMapping:la,EquirectangularReflectionMapping:ja,EquirectangularRefractionMapping:Rl,CubeUVReflectionMapping:Nu},MX={RepeatWrapping:ds,ClampToEdgeWrapping:Mi,MirroredRepeatWrapping:kl},EX={NearestFilter:Mr,NearestMipmapNearestFilter:Ll,NearestMipmapLinearFilter:ca,LinearFilter:Or,LinearMipmapNearestFilter:hh,LinearMipmapLinearFilter:qn};class Cje extends Zt{constructor(e){super(e.nodeType),this.node=null,this.source=null,this.target=null,this.inclusionType="replace",Object.assign(this,e)}generate(e){return this.node.build(e,this.getNodeType(e))}}const _i=Cje,F2=new lb;F2.camera=new Yr;const CX={LineBasicNodeMaterial:qi.basic,MeshBasicNodeMaterial:qi.basic,PointsNodeMaterial:qi.points,MeshStandardNodeMaterial:qi.standard,MeshPhysicalNodeMaterial:qi.physical,MeshPhongNodeMaterial:qi.phong},Aje={[fr.ATAN2]:"atan"},Nje={low:"lowp",medium:"mediump",high:"highp"};function jc(r){return`#include <${r}>`}function Ub(r){return`${r}Shader`}class AX extends IS{constructor(e,t,i,n=null){super(e,t,new Kk,null,n),this.shader=i,this.slots={vertex:[],fragment:[]},this._parseShaderLib(),this._parseInclude("fragment","lights_physical_fragment","clearcoat_normal_fragment_begin","transmission_fragment"),this._parseObject(),this._sortSlotsToFlow()}getMethod(e){return Aje[e]||e}addSlot(e,t){this.slots[e].push(t)}_parseShaderLib(){const e=this.material;let t=e.type;if(e.isMeshPhysicalNodeMaterial?t="MeshPhysicalNodeMaterial":e.isMeshStandardNodeMaterial?t="MeshStandardNodeMaterial":e.isMeshPhongNodeMaterial?t="MeshPhongNodeMaterial":e.isMeshBasicNodeMaterial?t="MeshBasicNodeMaterial":e.isPointsNodeMaterial?t="PointsNodeMaterial":e.isLineBasicNodeMaterial&&(t="LineBasicNodeMaterial"),CX[t]!==void 0){const i=CX[t],n=this.shader;n.vertexShader=i.vertexShader,n.fragmentShader=i.fragmentShader,n.uniforms=Lo.merge([i.uniforms,At.lights])}}_parseObject(){const{material:e,renderer:t}=this;this.addSlot("fragment",new _i({node:Fl,nodeType:"vec3",source:jc("clipping_planes_fragment"),target:"vec3 TransformedNormalView = %RESULT%;",inclusionType:"append"})),t.toneMappingNode&&t.toneMappingNode.isNode===!0&&this.addSlot("fragment",new _i({node:e.colorNode,nodeType:"vec4",source:jc("tonemapping_fragment"),target:""})),e.colorNode&&e.colorNode.isNode&&this.addSlot("fragment",new _i({node:e.colorNode,nodeType:"vec4",source:"vec4 diffuseColor = vec4( diffuse, opacity );",target:"vec4 diffuseColor = %RESULT%; diffuseColor.a *= opacity;"})),e.opacityNode&&e.opacityNode.isNode&&this.addSlot("fragment",new _i({node:e.opacityNode,nodeType:"float",source:jc("alphatest_fragment"),target:"diffuseColor.a = %RESULT%;",inclusionType:"append"})),e.normalNode&&e.normalNode.isNode&&this.addSlot("fragment",new _i({node:e.normalNode,nodeType:"vec3",source:jc("normal_fragment_begin"),target:"normal = %RESULT%;",inclusionType:"append"})),e.emissiveNode&&e.emissiveNode.isNode&&this.addSlot("fragment",new _i({node:e.emissiveNode,nodeType:"vec3",source:jc("emissivemap_fragment"),target:"totalEmissiveRadiance = %RESULT%;",inclusionType:"append"})),e.isMeshStandardNodeMaterial&&(e.metalnessNode&&e.metalnessNode.isNode&&this.addSlot("fragment",new _i({node:e.metalnessNode,nodeType:"float",source:jc("metalnessmap_fragment"),target:"metalnessFactor = %RESULT%;",inclusionType:"append"})),e.roughnessNode&&e.roughnessNode.isNode&&this.addSlot("fragment",new _i({node:e.roughnessNode,nodeType:"float",source:jc("roughnessmap_fragment"),target:"roughnessFactor = %RESULT%;",inclusionType:"append"})),e.isMeshPhysicalNodeMaterial&&(e.clearcoatNode&&e.clearcoatNode.isNode?(this.addSlot("fragment",new _i({node:e.clearcoatNode,nodeType:"float",source:"material.clearcoat = clearcoat;",target:"material.clearcoat = %RESULT%;"})),e.clearcoatRoughnessNode&&e.clearcoatRoughnessNode.isNode&&this.addSlot("fragment",new _i({node:e.clearcoatRoughnessNode,nodeType:"float",source:"material.clearcoatRoughness = clearcoatRoughness;",target:"material.clearcoatRoughness = %RESULT%;"})),e.clearcoatNormalNode&&e.clearcoatNormalNode.isNode&&this.addSlot("fragment",new _i({node:e.clearcoatNormalNode,nodeType:"vec3",source:"vec3 clearcoatNormal = nonPerturbedNormal;",target:"vec3 clearcoatNormal = %RESULT%;"})),e.defines.USE_CLEARCOAT=""):delete e.defines.USE_CLEARCOAT,e.sheenNode&&e.sheenNode.isNode?(this.addSlot("fragment",new _i({node:e.sheenNode,nodeType:"vec3",source:"material.sheenColor = sheenColor;",target:"material.sheenColor = %RESULT%;"})),e.sheenRoughnessNode&&e.sheenRoughnessNode.isNode&&this.addSlot("fragment",new _i({node:e.sheenRoughnessNode,nodeType:"float",source:"material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );",target:"material.sheenRoughness = clamp( %RESULT%, 0.07, 1.0 );"})),e.defines.USE_SHEEN=""):delete e.defines.USE_SHEEN,e.iridescenceNode&&e.iridescenceNode.isNode?(this.addSlot("fragment",new _i({node:e.iridescenceNode,nodeType:"float",source:"material.iridescence = iridescence;",target:"material.iridescence = %RESULT%;"})),e.iridescenceIORNode&&e.iridescenceIORNode.isNode&&this.addSlot("fragment",new _i({node:e.iridescenceIORNode,nodeType:"float",source:"material.iridescenceIOR = iridescenceIOR;",target:"material.iridescenceIOR = %RESULT%;"})),e.iridescenceThicknessNode&&e.iridescenceThicknessNode.isNode&&this.addSlot("fragment",new _i({node:e.iridescenceThicknessNode,nodeType:"float",source:"material.iridescenceThickness = iridescenceThicknessMaximum;",target:"material.iridescenceThickness = %RESULT%;"})),e.defines.USE_IRIDESCENCE=""):delete e.defines.USE_IRIDESCENCE,e.iorNode&&e.iorNode.isNode&&this.addSlot("fragment",new _i({node:e.iorNode,nodeType:"float",source:"material.ior = ior;",target:"material.ior = %RESULT%;"})),e.specularColorNode&&e.specularColorNode.isNode&&this.addSlot("fragment",new _i({node:e.specularColorNode,nodeType:"vec3",source:"vec3 specularColorFactor = specularColor;",target:"vec3 specularColorFactor = %RESULT%;"})),e.specularIntensityNode&&e.specularIntensityNode.isNode&&this.addSlot("fragment",new _i({node:e.specularIntensityNode,nodeType:"float",source:"float specularIntensityFactor = specularIntensity;",target:"float specularIntensityFactor = %RESULT%;"})),e.transmissionNode&&e.transmissionNode.isNode?(this.addSlot("fragment",new _i({node:e.transmissionNode,nodeType:"float",source:"material.transmission = transmission;",target:"material.transmission = %RESULT%;"})),e.thicknessNode&&e.thicknessNode.isNode&&this.addSlot("fragment",new _i({node:e.thicknessNode,nodeType:"float",source:"material.thickness = thickness;",target:"material.thickness = %RESULT%;"})),e.attenuationDistanceNode&&e.attenuationDistanceNode.isNode&&this.addSlot("fragment",new _i({node:e.attenuationDistanceNode,nodeType:"float",source:"material.attenuationDistance = attenuationDistance;",target:"material.attenuationDistance = %RESULT%;"})),e.attenuationColorNode&&e.attenuationColorNode.isNode&&this.addSlot("fragment",new _i({node:e.attenuationColorNode,nodeType:"vec3",source:"material.attenuationColor = attenuationColor;",target:"material.attenuationColor = %RESULT%;"})),e.transmission=1,e.defines.USE_TRANSMISSION=""):(e.transmission=0,delete e.defines.USE_TRANSMISSION))),e.positionNode&&e.positionNode.isNode&&this.addSlot("vertex",new _i({node:e.positionNode,nodeType:"vec3",source:jc("begin_vertex"),target:"transformed = %RESULT%;",inclusionType:"append"})),e.sizeNode&&e.sizeNode.isNode&&this.addSlot("vertex",new _i({node:e.sizeNode,nodeType:"float",source:"gl_PointSize = size;",target:"gl_PointSize = %RESULT%;"}))}getTexture(e,t,i){return e.isTextureCube?`textureCube( ${t}, ${i} )`:`texture2D( ${t}, ${i} )`}getTextureBias(e,t,i,n){return this.material.extensions!==void 0&&(this.material.extensions.shaderTextureLOD=!0),`textureLod( ${t}, ${i}, ${n} )`}getUniforms(e){const t=this.uniforms[e];let i="";for(const n of t){if(/^(modelViewMatrix|projectionMatrix)$/.test(n.name))continue;let s=null;n.type==="texture"?s=`sampler2D ${n.name}; `:n.type==="cubeTexture"?s=`samplerCube ${n.name}; `:s=`${this.getVectorType(n.type)} ${n.name}; `;const o=n.node.precision;o!==null?s="uniform "+Nje[o]+" "+s:s="uniform "+s,i+=s}return i}getAttributes(e){let t="";if(e==="vertex"){const i=this.attributes;for(const n of i)/^(position|normal|uv[1-3]?)$/.test(n.name)||(t+=`attribute ${n.type} ${n.name}; `)}return t}getVaryings(e){let t="";const i=this.varyings;if(e==="vertex")for(const n of i)t+=`${n.needsInterpolation?"varying":"/*varying*/"} ${n.type} ${n.name}; `;else if(e==="fragment")for(const n of i)n.needsInterpolation&&(t+=`varying ${n.type} ${n.name}; `);return t}addCode(e,t,i,n=this){const s=Ub(e);let o=n[s];const a=o.indexOf(t);if(a!==-1){const l=o.substring(0,a+t.length),c=o.substring(a+t.length);o=`${l}
${i}
${c}`}n[s]=o}replaceCode(e,t,i,n=this){const s=Ub(e);n[s]=n[s].replaceAll(t,i)}getVertexIndex(){return"gl_VertexID"}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord"}isFlipY(){return!0}buildCode(){const e={};for(const t of Ym){const i=this.getUniforms(t),n=this.getAttributes(t),s=this.getVaryings(t),o=this.getVars(t),a=this.getCodes(t);e[t]=`${this.getSignature()}
// <node_builder>

// uniforms
${i}

// attributes
${n}

// varyings
${s}

// vars
${o}

// codes
${a}

// </node_builder>

${this.shader[Ub(t)]}
`}this.vertexShader=e.vertex,this.fragmentShader=e.fragment}build(){return super.build(),this._addSnippets(),this._addUniforms(),this._updateUniforms(),this.shader.vertexShader=this.vertexShader,this.shader.fragmentShader=this.fragmentShader,this}_parseInclude(e,...t){for(const i of t){const n=jc(i),s=yr[i],o=Ub(e);this.shader[o]=this.shader[o].replaceAll(n,s)}}_sortSlotsToFlow(){for(const e of Ym){const t=this.shader[Ub(e)],i=this.slots[e].sort((n,s)=>t.indexOf(n.source)>t.indexOf(s.source)?1:-1);for(const n of i)this.addFlow(e,n)}}_addSnippets(){for(const e of Ym){for(const t of this.slots[e]){const i=this.getFlowData(t),n=t.inclusionType,s=t.source,o=i.code+`
	`+t.target.replace("%RESULT%",i.result);n==="append"?this.addCode(e,s,o):n==="replace"?this.replaceCode(e,s,o):console.warn(`Inclusion type "${n}" not compatible.`)}this.addCode(e,"main() {",`
	`+this.flowCode[e])}}_addUniforms(){for(const e of Ym)for(const t of this.uniforms[e])this.shader.uniforms[t.name]=t}_updateUniforms(){F2.object=this.object,F2.renderer=this.renderer;for(const e of this.updateNodes)F2.updateNode(e)}}const gO=new WeakMap,Lg=new lb;Wr.prototype.onBuild=function(r,e,t){if(Array.isArray(r.material))for(const i of r.material)i.isNodeMaterial===!0&&gO.set(i,new AX(r,t,e,i).build());else r.material.isNodeMaterial===!0&&gO.set(r.material,new AX(r,t,e).build())},Wr.prototype.onBeforeRender=function(r,e,t,i,n){const s=gO.get(this);if(s!==void 0){Lg.material=this,Lg.camera=t,Lg.object=n,Lg.renderer=r;const o=s.updateNodes;if(o.length>0){r.state.useProgram(null);for(const a of o)Lg.updateNode(a)}}};class Rje{constructor(e,t,i){this.variables=[],this.currentTextureIndex=0;let n=mi;const s=new qa,o=new _c;o.position.z=1;const a={passThruTexture:{value:null}},l=d(p(),a),c=new mt(new Xa(2,2),l);s.add(c),this.setDataType=function(f){return n=f,this},this.addVariable=function(f,m,g){const v=this.createShaderMaterial(m),x={name:f,initialValueTexture:g,material:v,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:Mr,magFilter:Mr};return this.variables.push(x),x},this.setVariableDependencies=function(f,m){f.dependencies=m},this.init=function(){if(i.capabilities.isWebGL2===!1&&i.extensions.has("OES_texture_float")===!1)return"No OES_texture_float support for float textures.";if(i.capabilities.maxVertexTextures===0)return"No support for vertex shader textures.";for(let f=0;f<this.variables.length;f++){const m=this.variables[f];m.renderTargets[0]=this.createRenderTarget(e,t,m.wrapS,m.wrapT,m.minFilter,m.magFilter),m.renderTargets[1]=this.createRenderTarget(e,t,m.wrapS,m.wrapT,m.minFilter,m.magFilter),this.renderTexture(m.initialValueTexture,m.renderTargets[0]),this.renderTexture(m.initialValueTexture,m.renderTargets[1]);const g=m.material,v=g.uniforms;if(m.dependencies!==null)for(let x=0;x<m.dependencies.length;x++){const b=m.dependencies[x];if(b.name!==m.name){let w=!1;for(let _=0;_<this.variables.length;_++)if(b.name===this.variables[_].name){w=!0;break}if(!w)return"Variable dependency not found. Variable="+m.name+", dependency="+b.name}v[b.name]={value:null},g.fragmentShader=`
uniform sampler2D `+b.name+`;
`+g.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){const f=this.currentTextureIndex,m=this.currentTextureIndex===0?1:0;for(let g=0,v=this.variables.length;g<v;g++){const x=this.variables[g];if(x.dependencies!==null){const b=x.material.uniforms;for(let w=0,_=x.dependencies.length;w<_;w++){const S=x.dependencies[w];b[S.name].value=S.renderTargets[f].texture}}this.doRenderTarget(x.material,x.renderTargets[m])}this.currentTextureIndex=m},this.getCurrentRenderTarget=function(f){return f.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(f){return f.renderTargets[this.currentTextureIndex===0?1:0]},this.dispose=function(){c.geometry.dispose(),c.material.dispose();const f=this.variables;for(let m=0;m<f.length;m++){const g=f[m];g.initialValueTexture&&g.initialValueTexture.dispose();const v=g.renderTargets;for(let x=0;x<v.length;x++)v[x].dispose()}};function u(f){f.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}this.addResolutionDefine=u;function d(f,m){m=m||{};const g=new ii({name:"GPUComputationShader",uniforms:m,vertexShader:h(),fragmentShader:f});return u(g),g}this.createShaderMaterial=d,this.createRenderTarget=function(f,m,g,v,x,b){return f=f||e,m=m||t,g=g||Mi,v=v||Mi,x=x||Mr,b=b||Mr,new Ui(f,m,{wrapS:g,wrapT:v,minFilter:x,magFilter:b,format:Rn,type:n,depthBuffer:!1})},this.createTexture=function(){const f=new Float32Array(e*t*4),m=new ma(f,e,t,Rn,mi);return m.needsUpdate=!0,m},this.renderTexture=function(f,m){a.passThruTexture.value=f,this.doRenderTarget(l,m),a.passThruTexture.value=null},this.doRenderTarget=function(f,m){const g=i.getRenderTarget(),v=i.xr.enabled,x=i.shadowMap.autoUpdate;i.xr.enabled=!1,i.shadowMap.autoUpdate=!1,c.material=f,i.setRenderTarget(m),i.render(s,o),c.material=l,i.xr.enabled=v,i.shadowMap.autoUpdate=x,i.setRenderTarget(g)};function h(){return`void main()	{

	gl_Position = vec4( position, 1.0 );

}
`}function p(){return`uniform sampler2D passThruTexture;

void main() {

	vec2 uv = gl_FragCoord.xy / resolution.xy;

	gl_FragColor = texture2D( passThruTexture, uv );

}
`}}}const Fb="[Spawns]",kje="__isHidden";class vO extends b2{constructor(){super(),this.name=Fb}}Cr("SpawnsScene",{create:()=>new vO,members:{},proto:"PhysicalScene",group:"",icon:""});async function Lje(r){window.import||(window.import=new Function("path","return import(path)"));try{return await window.import(r)}catch(e){console.error(e)}}Rp.prototype.exec=function(){},Vs.prototype.exec=function(){};const NX={aspect:"auto",toneMapping:dh,toneMappingExposure:1,shadowMap:{enabled:!0,type:Nw}};function B2(){const r=new Yr(50,1,.001,1e3);return r.name="defaultCamera",r.position.set(1,1,1),r.lookAt(0,0,0),r}class Bb extends Ln{constructor(t){super();vt(this,"world");vt(this,"uuid",$i.generateUUID());vt(this,"textures",{});vt(this,"plugins",new Set);vt(this,"scene");vt(this,"scenes",[]);vt(this,"cameras",[]);vt(this,"_revision",0);this.name=t,this.world={...NX},this.scene=new b2,this.scene.name="defaultScene",this.scenes.push(this.scene,new vO);const i=B2();this.cameras.push(i),this.addObject(i)}get revision(){return this._revision}async load(t){const i=new Mje;let n=await x0.request({url:`/fs/file/${this.name}/index.json`});if(typeof n=="string"&&(n=JSON.parse(n)),n.project.plugins){this.plugins.clear();try{n.project.plugins.forEach(a=>this.plugins.add(a));const o=await Promise.all(n.project.plugins.map(a=>Lje(a)));for(const a of o)a.pluginInstall(Cr,wX,Gc,f2)}catch(o){console.error(o)}}const s=await i.parseAsync(n);zl(this.textures);for(const o of Object.values(i._textures))o.userData.name&&(this.textures[o.uuid]=o);n.project.world&&(zl(this.world),Object.assign(this.world,{...NX,...n.project.world})),this.world.aspect||(this.world.aspect="auto"),this._revision=n.project.revision||0;for(const o of this.scenes)o.dispose();if(this.scenes.length=0,this.scenes.push(...s.children),this.scenes.find(o=>o.name===Fb)||this.scenes.push(new vO),this.scene=this.scenes.find(o=>o.name===n.project.scene)||this.scenes[0],this.scenes.forEach(o=>this.hookInEditorMode(o)),this.cameras.length=0,this.scene.traverse(o=>{o instanceof _c&&this.cameras.push(o)}),this.scene.name!==Fb&&!this.cameras.length){const o=B2();this.cameras.push(o),this.addObject(o)}return t||this.dispatchEvent({type:"projectLoaded",soure:this,project:this}),this}toJSON(){const t=new nr;t.children=this.scenes;const i=q5e(t,this.textures);return t.children=[],t.nodes=void 0,i.project={revision:this.revision,world:this.world,scene:this.scene.name,plugins:[...this.plugins]},i}async flush(){const t=this.toJSON();return Ga.write(`/fs/write/${this.name}/index.json`,t)}newScene(){this.scene=new b2,this.scene.name=this.scene.uuid,this.scenes.push(this.scene);const t=B2();this.cameras.length=0,this.cameras.push(t),this.addObject(t);const i=new mt(new vi(1,1,1),new zk({opacity:1}));i.material.colorNode=new Fr(new at),this.addObject(i),this._revision++,this.dispatchEvent({type:"objectAdded",soure:this,object:this.scene}),this.dispatchEvent({type:"sceneChanged",soure:this,scene:this.scene})}setScene(t){const i=this.scenes.find(n=>n.name===t);if(i){if(this.scene=i,this.cameras.length=0,this.scene.traverse(n=>{n instanceof _c&&this.cameras.push(n)}),i.name!==Fb&&!this.cameras.length){const n=B2();this.cameras.length=0,this.cameras.push(n),this.addObject(n)}this.dispatchEvent({type:"sceneChanged",soure:this,scene:this.scene})}}removeScene(t){if(t.name===Fb||this.scenes.length===1)return!1;const i=this.scenes.findIndex(s=>s.id===t.id);if(i===-1)return!0;this.scenes.splice(i,1);const n=t.id===this.scene.id;return t.id===this.scene.id&&(this.scene=this.scenes[0]),this._revision++,n&&this.dispatchEvent({type:"sceneChanged",soure:this,scene:this.scene}),!0}addObject(t,i){return i=i||this.scene,t.parent===i||(t.graph||(t.graph=new kg(t)),this.hookInEditorMode(t),i.add(t),this._revision++,this.dispatchEvent({type:"objectAdded",soure:this,object:t}),this.dispatchEvent({type:"treeModified",soure:this,root:i})),t}addObjectByClass(t,i,n){const s=p8e(t,...n||[]);return this.addObject(s,i)}removeObject(t){if(t.isScene)return this.removeScene(t);const i=this.scene.getObjectById(t.id);if(!i)return!1;const n=i.parent;i.removeFromParent();const s=this.cameras.indexOf(i);return s!==-1&&this.cameras.splice(s,1),this._revision++,this.dispatchEvent({type:"objectRemoved",soure:this,object:t}),this.dispatchEvent({type:"treeModified",soure:this,root:n||this.scene}),!0}increaseRevision(){this._revision++}hookInEditorMode(t){t.traverse(i=>{i.__disp||(i.__disp=i.dispatchEvent,i.dispatchEvent=n=>{console.log(`Receive event[${n.type}] from object[${i.uuid}] in editor mode!`),i.__disp.call(i,n)})})}}const z2=new class extends Bb{constructor(){super("shared")}createDefault(r){const e=new Bb(r),t=e.scenes.find(i=>i.name==="default")||e.scene;return this.scene=t,this.scenes.length=0,this.scenes.push(this.scene),e}};class Oje extends Ln{constructor(){super();vt(this,"stores",{});vt(this,"currentStore",null);vt(this,"scene",null);vt(this,"isLocked",!1)}setScene(t){this.scene=t,this.currentStore=this.stores[t.uuid]||(this.stores[t.uuid]={cursor:0,points:[]})}push(t){if(!this.currentStore)throw or.panic("Current store has not been selected!");this.isLocked||(this.currentStore.cursor!==this.currentStore.points.length&&(this.currentStore.points.length=this.currentStore.cursor),this.currentStore.cursor++,this.currentStore.points.push(t),this.dispatchEvent({type:"historyChanged",source:this}))}canUndo(){return this.currentStore?!(this.currentStore.cursor<1):!1}undo(){if(!this.currentStore)throw or.panic("Current store has not been selected!");if(this.currentStore.cursor<1)return;this.currentStore.cursor--;const t=this.currentStore.points[this.currentStore.cursor];this.isLocked=!0,t.undo(),this.isLocked=!1,this.dispatchEvent({type:"historyChanged",source:this})}canRedo(){return this.currentStore?this.currentStore.cursor!=this.currentStore.points.length:!1}redo(){if(!this.currentStore)throw or.panic("Current store has not been selected!");if(this.currentStore.cursor==this.currentStore.points.length)return;const t=this.currentStore.points[this.currentStore.cursor];this.currentStore.cursor++,this.isLocked=!0,t.redo(),this.isLocked=!1,this.dispatchEvent({type:"historyChanged",source:this})}}function V2(r){const e=r.replace(/\s/mg,"").split("+"),t=new Set;return e.includes("meta")&&t.add("meta"),e.includes("ctrl")&&t.add("ctrl"),e.includes("alt")&&t.add("alt"),e.includes("shift")&&t.add("shift"),t.add(e.pop()),[...t].join("+")}const Pje=["graphAdded","graphModified","graphConnected","graphDisconnected","graphRemoved","objectAdded","objectModified","objectRemoved","projectSettingsChanged"],ke=new class extends Ln{constructor(){super();vt(this,"dragable",null);vt(this,"history",new Oje);vt(this,"_project",new Bb(""));vt(this,"_world",null);vt(this,"_editor",null);vt(this,"_keydownListener");vt(this,"_keydownListeners",{});vt(this,"_keyupListener");vt(this,"_keyupListeners",{});vt(this,"keyGroups",{});this._keydownListener=e=>{this.onKeyDown(e)},this._keyupListener=e=>{this.onKeyUp(e)},this.hookDispatchEvent(this.history),window.addEventListener("keydown",this._keydownListener),window.addEventListener("keyup",this._keyupListener)}get project(){return this._project}set project(e){this._project&&this.unhookDispatchEvent(this._project),this._project=e,this.hookDispatchEvent(this._project)}get world(){return this._world}set world(e){this._world&&this.unhookDispatchEvent(this._world),this._world=e,this.hookDispatchEvent(this._world)}get editor(){return this._editor}set editor(e){this._editor&&this.unhookDispatchEvent(this._editor),this._editor=e,this.hookDispatchEvent(this._editor)}hookDispatchEvent(e){if(e._orgDispatchEvent)return;e._orgDispatchEvent=e.dispatchEvent;const t=i=>{console.log("event forwarding",i),e._orgDispatchEvent.call(e,i),this.dispatchEvent(i)};e.dispatchEvent=t}unhookDispatchEvent(e){e._orgDispatchEvent&&(e.dispatchEvent=e._orgDispatchEvent,delete e._orgDispatchEvent)}dispatchEvent(e){super.dispatchEvent(e),Pje.includes(e.type)&&super.dispatchEvent({type:"projectDirty"})}dispose(){window.removeEventListener("keydown",this._keydownListener)}addKeyDownListener(e,t,i){const[n,s]=i.split(".");if(e=V2(e),this._keydownListeners[e])return console.warn(`key[${e}] conflicted!`),!1;const o=this.keyGroups[n]||(this.keyGroups[n]={enabled:!0,keys:{}});o.keys[e]=s,typeof t=="function"?t={cb:t,group:n}:t.group=n,this._keydownListeners[e]=t}removeKeyDownListener(e,t){e=V2(e);const i=this._keydownListeners[e];!i||i.cb!==t||delete this._keydownListeners[e]}onKeyDown(e){const t=[];e.metaKey&&t.push("meta"),e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),t.includes(e.key.toLocaleLowerCase())||t.push(e.key);const i=t.join("+"),n=this._keydownListeners[i];!n||!this.keyGroups[n.group].enabled||(n.own?n.cb.call(n.own,e):n.cb(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}addKeyUpListener(e,t){if(e=V2(e),this._keyupListeners[e])return console.warn(`key[${e}] conflicted!`),!1;typeof t=="function"&&(t={cb:t}),this._keyupListeners[e]=t}removeKeyUpListener(e,t){e=V2(e);const i=this._keyupListeners[e];!i||i.cb!==t||delete this._keyupListeners[e]}onKeyUp(e){const t=[];e.metaKey&&t.push("meta"),e.ctrlKey&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&t.push("shift"),t.includes(e.key.toLocaleLowerCase())||t.push(e.key);const i=t.join("+"),n=this._keyupListeners[i];n&&(n.own?n.cb.call(n.own,e):n.cb(e),e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}},RX={async beforeLaunch(r,e,t){},async onLaunched(r,e,t){const i=await Ga.projects();e.state.projects=i,await this.load(),e.state.isLoading=!1},async load(){if(await z2.load(),Qt.state.projectName&&Qt.state.projectName!=="shared"){const r=new Bb(Qt.state.projectName);try{await r.load(!0),ke.project=r}catch(e){console.error(e),ke.project=z2}}else ke.project=z2;ke.dispatchEvent({type:"projectLoaded",soure:null,project:ke.project})}},Ije={class:"list"},Dje=["data-title"],kX=W({}),Uje={enabled:!0,keys:{w:"Switch to translate mode",e:"Switch to rotate mode",r:"Switch to scale mode",q:"Switch to World/Local space",x:"Toggle X",y:"Toggle Y",z:"Toggle Z",Space:"Toggle enabled"}};function LX(){kX.value={"World Editor":Uje,...ke.keyGroups}}const Fje=xe({__name:"keyboard",setup(r){return Et(()=>{LX()}),(e,t)=>(D(),ee("div",Ije,[(D(!0),ee(ct,null,Ut(kX.value,(i,n)=>(D(),ee("div",{key:n,class:"group"},[J("label",{class:"title","data-title":n},null,8,Dje),(D(!0),ee(ct,null,Ut(i.keys,(s,o)=>(D(),ee("div",{key:o,class:"item"},[J("label",null,$e(s),1),J("label",null,$e(o),1)]))),128))]))),128))]))}}),Bje=r=>(tv("data-v-ab9b6e75"),r=r(),rv(),r),zje=Bje(()=>J("div",{class:"el-upload__text"},[ir(" Drop file here or "),J("em",null,"click to upload")],-1)),Vje={class:"el-upload__tip"},Gje=xe({__name:"uploader",props:{title:{type:String,default:""},tip:{type:String,default:"Accepts all image/audio/font/3dmodel files"}},setup(r){const t=W(`/fs/upload/${Qt.state.projectName}`),i=W([]),n=(o,a)=>{ke.dispatchEvent({type:"assetsChanged"})};function s(o){return/^image\//.test(o.type)?new File([o],`images@${o.name}`,{type:o.type}):/^audio\//.test(o.type)?new File([o],`sounds@${o.name}`,{type:o.type}):/^font\//.test(o.type)?new File([o],`fonts@${o.name}`,{type:o.type}):/\.glb|\.fbx$/i.test(o.name)?new File([o],`models@${o.name}`,{type:o.type}):/\.js|\.mjs|\.cjs$/i.test(o.name)?new File([o],`plugins@${o.name}`,{type:o.type}):!1}return(o,a)=>{const l=gt("el-icon"),c=gt("el-upload"),u=gt("el-dialog");return D(),Ae(u,{modelValue:(void 0).value,"onUpdate:modelValue":a[0]||(a[0]=d=>(void 0).value=d),title:r.title,width:"30%",draggable:"","align-center":"",onClose:a[1]||(a[1]=d=>(void 0).value=!1)},{default:me(()=>[ue(c,{class:"uploader",drag:"",action:t.value,multiple:"","file-list":i.value,"on-success":n,"before-upload":s,accept:"image/*,audio/*,.glb,.fbx,.ttf,.js,.mjs,.cjs"},{tip:me(()=>[J("div",Vje,$e(r.tip),1)]),default:me(()=>[ue(l,{class:"el-icon--upload"},{default:me(()=>[ue(y(yU))]),_:1}),zje]),_:1},8,["action","file-list"])]),_:1},8,["modelValue","title"])}}}),Gs=(r,e)=>{const t=r.__vccOpts||r;for(const[i,n]of e)t[i]=n;return t},jje=Gs(Gje,[["__scopeId","data-v-ab9b6e75"]]),Og=r=>(tv("data-v-cf8dc796"),r=r(),rv(),r),Hje={class:"props-list"},Wje=Og(()=>J("label",{class:"prop-title","data-title":"Screen"},null,-1)),$je={class:"prop-item"},Xje=Og(()=>J("label",{class:"text-ellipsis prop-name"},"Aspect",-1)),qje=Og(()=>J("p",{style:{flex:"1 1 auto"}},null,-1)),Kje=Og(()=>J("label",{class:"prop-title","data-title":"View"},null,-1)),Yje={class:"props"},Zje={class:"prop-item"},Jje=Og(()=>J("label",{class:"text-ellipsis prop-name"},"Show grid",-1)),Qje=Og(()=>J("p",{style:{flex:"1 1 auto"}},null,-1)),eHe=xe({__name:"world",setup(r){var a;const e=W({aspect:ke.project.world.aspect}),t=[{label:"16 : 9",value:16/9},{label:"16 : 10",value:1.6},{label:"3840 :2160",value:3840/2160},{label:"auto",value:"auto"}],i=W((a=ke.world)==null?void 0:a.gridHelper.visible);function n(l){e.value.aspect=l,ke.project.world.aspect=l,ke.dispatchEvent({type:"projectSettingsChanged",soure:null,project:ke.project}),ke.dispatchEvent({type:"worldSettingsModified",soure:null,settings:{aspect:l}})}function s(){ke.world&&(ke.world.gridHelper.visible=i.value,localStorage.setItem("isGridHelperVisible",i.value?"1":"0"))}function o(){e.value.aspect=ke.project.world.aspect,i.value=ke.world.gridHelper.visible}return Et(()=>{if(ke.world){const l=Number.parseInt(localStorage.getItem("isGridHelperVisible")||"1");ke.world.gridHelper.visible=!!l,i.value=ke.world.gridHelper.visible}ke.addEventListener("projectLoaded",o)}),ki(()=>{ke.removeEventListener("projectLoaded",o)}),(l,c)=>{const u=gt("el-input"),d=gt("el-option"),h=gt("el-select"),p=gt("el-switch");return D(),ee("div",Hje,[Wje,J("div",$je,[Xje,qje,ue(u,{modelValue:e.value.aspect,"onUpdate:modelValue":c[0]||(c[0]=f=>e.value.aspect=f),size:"small",style:{flex:"0 0 0%","min-width":"60px"},onChange:n},null,8,["modelValue"]),ue(h,{modelValue:e.value.aspect,"onUpdate:modelValue":c[1]||(c[1]=f=>e.value.aspect=f),size:"small",style:{flex:"0 0 0%","min-width":"120px","margin-left":"1em"},onChange:n},{default:me(()=>[(D(),ee(ct,null,Ut(t,f=>ue(d,{key:f.value,label:f.label,value:f.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),Kje,J("div",Yje,[J("div",Zje,[Jje,Qje,ue(p,{modelValue:i.value,"onUpdate:modelValue":c[2]||(c[2]=f=>i.value=f),class:"prop-value",onChange:s},null,8,["modelValue"])])])])}}}),tHe=Gs(eHe,[["__scopeId","data-v-cf8dc796"]]),rHe=xe({__name:"settings",props:{title:{type:String,default:""}},setup(r){return(t,i)=>{const n=gt("el-dialog");return D(),Ae(n,{modelValue:(void 0).value,"onUpdate:modelValue":i[0]||(i[0]=s=>(void 0).value=s),title:r.title,width:"30%",draggable:"","align-center":"",onClose:i[1]||(i[1]=s=>(void 0).value=!1)},{default:me(()=>[ue(tHe)]),_:1},8,["modelValue","title"])}}}),iHe={style:{display:"flex","align-items":"center"}},nHe=J("i",{class:"icon-chip"},null,-1),sHe={style:{"margin-left":"10px"}},oHe={class:"table-foot"},aHe=["disabled"],lHe=xe({__name:"plugings",props:{title:{type:String,default:""}},setup(r){const e=W(),t=void 0,i=W([]);async function n(){const l=await Ga.getPlugins(ke.project.name);i.value=l.map(c=>{const u=c.url.replace(/^\/fs\/file\//,"").replace(/\.[^.]+$/,""),d=ke.project.plugins.has(c.url);return{url:c.url,path:u,checked:d}}),setTimeout(()=>{s()})}function s(){const l=e.value;if(l)for(const c of i.value)c.checked&&l.toggleRowSelection(c,!0)}function o(){location.reload()}const a=l=>{Qt.state.pluginsChanged=!0,ke.project.plugins.clear(),l.forEach(c=>(c.checked=!0,ke.project.plugins.add(c.url))),ke.dispatchEvent({type:"projectSettingsChanged",soure:null,project:ke.project})};return Et(()=>{ke.addEventListener("assetsChanged",n),ke.addEventListener("projectLoaded",n),n()}),ki(()=>{ke.removeEventListener("assetsChanged",n),ke.removeEventListener("projectLoaded",n)}),(l,c)=>{const u=gt("el-table-column"),d=gt("el-dialog");return D(),Ae(d,{modelValue:t.value,"onUpdate:modelValue":c[1]||(c[1]=h=>t.value=h),title:r.title,width:"30%",draggable:"","align-center":"",class:"notPadding",onOpen:s,onClose:c[2]||(c[2]=h=>t.value=!1)},{default:me(()=>[ue(y(u6),{ref_key:"multipleTableRef",ref:e,data:i.value,style:{width:"100%"},onSelectionChange:a},{default:me(()=>[ue(u,{prop:"path",label:"Plugin Path"},{default:me(h=>[J("div",iHe,[nHe,J("span",sHe,$e(h.row.path),1)])]),_:1}),ue(u,{property:"checked",type:"selection",width:"55"})]),_:1},8,["data"]),J("div",oHe,[J("div",null,[J("a",{class:"restart",style:{cursor:"pointer"},disabled:!y(Qt).state.pluginsChanged,onClick:c[0]||(c[0]=h=>o())},"Restart",8,aHe),ir(" is require for changes to take effect ")])])]),_:1},8,["modelValue","title"])}}}),OX={Math:{"":"Math",Numbers:{"":"\u6570\u7406",Symbols:{"":"\u7B26\u53F7"},Numbers:{"":"\u6570\u5B57",Units:["\u4E2A","\u5341","\u767E","\u5343","\u4E07","\u5341\u4E07","\u5343\u4E07","\u4EBF"]},SequencesAndPatterns:{"":"\u5E8F\u5217"},SequencesAndShapes:{"":"\u5E8F\u5217\u548C\u5F62\u72B6"},PositiveAndNegative:{"":"\u6B63\u6570\u548C\u8D1F\u6570"},ComparingNumbers:{"":"\u6570\u503C\u6BD4\u8F83"},OrderingNumbers:{"":"\u6570\u503C\u6392\u5E8F"},Estimating:{"":"\u4F30\u7B97"},Rounding:{"":"\u56DB\u820D\u4E94\u5165"},Factors:{"":"\u56E0\u5B50"},Multiples:{"":"\u500D\u6570"},PrimeNumbers:{"":"\u7D20\u6570"},PrimeFactors:{"":"\u7D20\u56E0\u5B50"},SquareNumbers:{"":"\u5E73\u65B9"},SquareRoots:{"":"\u5E73\u65B9\u6839"},CubeNumbers:{"":"\u7ACB\u65B9"},Fractions:{"":"\u5206\u6570"},ImproperFractionsAndMixed:{"":"\u5047\u5206\u6570\u53CA\u7E41\u5206\u6570"},EquivalentFractions:{"":"\u7B49\u503C\u5206\u6570"},SimplifyingFractions:{"":"\u5206\u6570\u7B80\u5316"},FindingAFractionOfAndAmount:{"":"\u5206\u6570\u6C42\u503C"},ComparingFractions:{"":"\u5206\u6570\u6BD4\u8F83"},ComparingUnitFractions:{"":"\u5355\u4F4D\u5206\u6570\u6BD4\u8F83"},ComparingNonUnitFractions:{"":"\u975E\u5355\u4F4D\u5206\u6570\u6BD4\u8F83"},UsingTheLowestCommonDenominator:{"":"\u6700\u5C0F\u516C\u5206\u6BCD"},AddingFractions:{"":"\u5206\u6570\u76F8\u52A0"},SubtractingFractions:{"":"\u5206\u6570\u76F8\u51CF"},MultiplyingFractions:{"":"\u5206\u6570\u76F8\u4E58"},DividingFractions:{"":"\u5206\u6570\u76F8\u9664"},DecimalNumbers:{"":"\u5341\u8FDB\u5236"},ComparingAndOrderingDecimals:{"":"\u5341\u8FDB\u5236\u6BD4\u8F83\u548C\u6392\u5E8F"},RoundingDecimals:{"":"\u5341\u8FDB\u5236\u56DB\u820D\u4E94\u5165"},AddingDecimals:{"":"\u5341\u8FDB\u5236\u76F8\u52A0"},SubtractingDecimals:{"":"\u5341\u8FDB\u5236\u76F8\u51CF"},Percentages:{"":"\u767E\u5206\u6BD4"},CalculatingPercentages:{"":"\u767E\u5206\u6BD4\u8BA1\u7B97"},PercentagesChanges:{"":"\u767E\u5206\u6BD4\u53D8\u6362"},Ratio:{"":"\u6BD4\u7387"},Proportion:{"":"\u6BD4\u4F8B"},Scaling:{"":"\u7F29\u653E"},DifferentWaysToDescribeFractions:{"":"\u5206\u6570\u7684\u4E0D\u540C\u8868\u793A\u6CD5"}},Calculating:{"":"\u8BA1\u7B97",Addition:{"":"\u52A0\u6CD5"},Subtraction:{"":"\u51CF\u6CD5"},Multiplication:{"":"\u4E58\u6CD5"},Division:{"":"\u9664\u6CD5"},TheOrderOfOperation:{"":"\u8FD0\u7B97\u4F18\u5148\u7EA7"}},Measurement:{"":"\u6D4B\u91CF",Length:{"":"\u957F\u5EA6"}},Geometry:{"":"\u51E0\u4F55\u5B66",Line:{"":"\u76F4\u7EBF"}},Statistics:{"":"\u7EDF\u8BA1\u5B66",DataHanding:{"":"\u6570\u636E\u5904\u7406"}},Algebra:{"":"\u4EE3\u6570",Equations:{"":"\u65B9\u7A0B\u5F0F"}}},tips:{inpjname:"Please input project name",ok:"OK",cancel:"Cancel",new:"New"},to(r){const e=r.split(".");let t=OX;for(const i of e)if(t=t[i],!t)throw console.error("not found"),"not found";return typeof t=="object"?t[""]:t}},cHe=OX;function Hc(r,e){if(!r||typeof r!="string")return r??"";const t=r.split(".");let i=cHe;for(const n of t){if(typeof i!="object")return e||r;i=i[n]}return typeof i=="object"?i[""]:i||e||r}const yO=r=>(tv("data-v-bcfe91ef"),r=r(),rv(),r),uHe={style:{"align-items":"stretch",display:"flex","flex-direction":"column"}},dHe={class:"topbar",style:{"align-items":"stretch",display:"flex","flex-direction":"row",width:"auto"}},hHe={class:"leftside",style:{"align-items":"center",display:"flex",flex:"1 1 auto","flex-direction":"row","font-size":"2rem","padding-left":"0.5rem"}},pHe=yO(()=>J("i",{class:"icon-egg",style:{cursor:"default","font-size":"3rem"}},null,-1)),fHe={class:"toolbar-center"},mHe=["disabled"],gHe=["disabled"],vHe=["disabled"],yHe={class:"rightside topbtns",style:{"align-items":"center",display:"flex","flex-direction":"row"}},bHe=yO(()=>J("p",{style:{flex:"1 1 auto"}},null,-1)),xHe=yO(()=>J("i",{class:"icon-keyboard"},null,-1)),wHe=xe({__name:"topbar",setup(r){let e=Qt.state.projectName;const t=W(0),i=W(Qt.state.projectName),n=W(Qt.state.projectName!=="shared"),s=W(!1),o=W(!1),a=W(!1),l=W({visible:!1}),c=W({visible:!1}),u=W({visible:!1});function d(){t.value=ke.project.revision,i.value=ke.project.name,n.value=ke.project.name!=="shared",s.value=!1}async function h(T){if(!(!T||e===T))try{await Ga.renameProject(e,T),e=T,Qt.dispatch("renameProject",T)}catch(M){console.log(M)}}async function p(T){e!==T&&(e=T,i.value=T,n.value=T!=="shared",ke.project=new Bb(T),await ke.project.load(),Qt.dispatch("selectProject",T))}async function f(){const{action:T,value:M}=await a8.prompt(Hc("tips.inpjname"),Hc("tips.new"),{confirmButtonText:Hc("tips.ok"),cancelButtonText:Hc("tips.cancel"),inputPattern:/\w{1,30}/,inputErrorMessage:Hc("tips.invalidName")});T==="confirm"&&M&&(await Ga.createProject(M),ke.project=z2.createDefault(M),await m(),Qt.dispatch("createProject",M),ke.dispatchEvent({type:"projectLoaded",soure:ke.project,project:ke.project}),e=M,i.value=M)}async function m(){t.value!==ke.project.revision&&(await ke.project.flush(),t.value=ke.project.revision,b())}function g(){a.value=ke.history.canRedo(),o.value=ke.history.canUndo()}function v(){ke.history.canUndo()&&ke.history.undo()}function x(){ke.history.canRedo()&&ke.history.redo()}function b(){s.value=t.value!==ke.project.revision}function w(T){T.source!==ke.project&&ke.project.increaseRevision(),b()}function _(){b(),g()}function S(){const T=`/fs/file/${ke.project.name}/index.json`,M=`/preview/web/preview.html?url=${encodeURIComponent(T)}`;window.open(M,"simulator")}return Et(()=>{ke.addEventListener("projectLoaded",d),ke.addEventListener("projectDirty",w),ke.addEventListener("sceneChanged",_),ke.addEventListener("historyChanged",g),ke.addKeyDownListener("meta+s",m,"Global.Save"),ke.addKeyDownListener("meta+z",v,"Global.Undo"),ke.addKeyDownListener("meta+shift+z",x,"Global.Redo"),ke.addKeyDownListener("meta+r",S,"Global.Run")}),ki(()=>{ke.removeEventListener("projectLoaded",d),ke.removeEventListener("projectDirty",w),ke.removeEventListener("sceneChanged",_),ke.removeEventListener("historyChanged",g),ke.removeKeyDownListener("meta+s",m),ke.removeKeyDownListener("meta+z",v),ke.removeKeyDownListener("meta+shift+z",x),ke.removeKeyDownListener("meta+r",S)}),(T,M)=>{const E=gt("el-input"),C=gt("el-dropdown-item"),P=gt("el-dropdown-menu"),A=gt("el-dropdown"),N=gt("el-icon"),R=gt("el-popover");return D(),ee("div",uHe,[J("div",dHe,[J("div",hHe,[pHe,ue(A,{"split-button":"",type:"primary",onCommand:p},{dropdown:me(()=>[ue(P,null,{default:me(()=>[(D(!0),ee(ct,null,Ut(y(Qt).state.projects,F=>(D(),Ae(C,{key:F,command:F},{default:me(()=>[ir($e(F),1)]),_:2},1032,["command"]))),128))]),_:1})]),default:me(()=>[ue(E,{modelValue:i.value,"onUpdate:modelValue":M[0]||(M[0]=F=>i.value=F),placeholder:"Please input",disabled:!n.value,onChange:h},null,8,["modelValue","disabled"])]),_:1}),ue(N,{style:{"margin-left":"0.5em",transform:"scaleX(-1)"}},{default:me(()=>[ue(y(Rle),{onClick:f})]),_:1})]),J("div",fHe,[J("i",{class:"icon-undo",action:"undo",disabled:!o.value,onClick:v},null,8,mHe),J("i",{class:"icon-redo",action:"redo",disabled:!a.value,onClick:x},null,8,gHe),J("i",{class:"icon-save",action:"save",disabled:!s.value,onClick:m},null,8,vHe),ue(N,null,{default:me(()=>[ue(y(yU),{onClick:M[1]||(M[1]=F=>l.value.visible=!l.value.visible)})]),_:1})]),J("div",yHe,[J("i",{class:"icon-start",onClick:S}),bHe,J("i",{class:"icon-chip",onClick:M[2]||(M[2]=F=>u.value.visible=!u.value.visible)}),ue(N,null,{default:me(()=>[ue(y(eue),{onClick:M[3]||(M[3]=F=>c.value.visible=!c.value.visible)})]),_:1}),ue(R,{trigger:"click",width:320,onShow:y(LX)},{reference:me(()=>[xHe]),default:me(()=>[ue(Fje)]),_:1},8,["onShow"]),J("i",{class:j(y(Qt).state.isFloating?"icon-minimize":"icon-maximize"),action:"maximize",onClick:M[4]||(M[4]=F=>y(Qt).state.isFloating=!y(Qt).state.isFloating)},null,2)])]),ue(jje,{modelValue:l.value.visible,"onUpdate:modelValue":M[5]||(M[5]=F=>l.value.visible=F),title:"Upload files"},null,8,["modelValue"]),ue(rHe,{modelValue:c.value.visible,"onUpdate:modelValue":M[6]||(M[6]=F=>c.value.visible=F),title:"World settings"},null,8,["modelValue"]),ue(lHe,{modelValue:u.value.visible,"onUpdate:modelValue":M[7]||(M[7]=F=>u.value.visible=F),title:"Plugins"},null,8,["modelValue"])])}}}),_He=Gs(wHe,[["__scopeId","data-v-bcfe91ef"]]);function SHe(r){document.querySelectorAll(".popover").forEach(e=>{e!==r&&(e.style.display="none")}),r.style.display="flex"}const THe=xe({__name:"popover",props:{maxWidth:{type:String,default:"320px"},showHeader:{type:Boolean,default:!0},bodyClass:{type:String,default:""}},emits:["onBlur"],setup(r,{emit:e}){const t=W(null),i=()=>{t.value.style.display="none",e("onBlur")};return Et(()=>{var n;t.value.addEventListener("click",i),(n=t.value.parentElement)==null||n.removeChild(t.value),document.body.appendChild(t.value)}),ki(()=>{t.value&&(t.value.removeEventListener("click",i),document.body.removeChild(t.value))}),(n,s)=>(D(),ee("div",{ref_key:"root",ref:t,class:"popover"},[J("div",{class:j(["popover-container",r.bodyClass]),style:pt({width:r.maxWidth,"max-width":r.maxWidth})},[r.showHeader?(D(),ee("div",{key:0,class:"popover-header",onClick:s[0]||(s[0]=Mt(()=>{},["stop"]))},[ze(n.$slots,"header",{},void 0,!0)])):Re("",!0),ze(n.$slots,"default",{},void 0,!0)],6)],512))}}),MHe=Gs(THe,[["__scopeId","data-v-a16503ea"]]),EHe={class:"popover-selector-body"},CHe=["onClick"],AHe={class:"popover-selector-item-name"},NHe={class:"popover-selector-item-value"},go={element:null,resolve:null,reject:null};function RHe(){go.resolve&&(go.resolve(void 0),go.resolve=null,go.reject=null,go.element=null)}function kHe(r){go.resolve(r.value),go.resolve=null,go.reject=null,go.element.style.display="none",go.element=null}async function PX(r){if(go.element)return;go.element=r;const e=new Promise((t,i)=>{go.resolve=t,go.reject=i});return SHe(r),await e}const LHe=xe({__name:"selector",props:{icon:{type:String,default:"icon-egg"},showHeader:{type:Boolean,default:!0},title:{type:String,default:""},maxWidth:{type:String,default:"320px"},values:{type:Array,default:[]}},setup(r){return(e,t)=>(D(),Ae(MHe,{"body-class":"popover-selector","show-header":r.showHeader,"max-width":r.maxWidth,onOnBlur:RHe},{header:me(()=>[J("label",null,$e(r.title),1)]),default:me(()=>[J("div",EHe,[(D(!0),ee(ct,null,Ut(r.values,i=>(D(),ee("div",{key:i.value,class:"popover-selector-item",onClick:n=>kHe(i)},[J("label",AHe,$e(i.name||"unamed"),1),J("label",NHe,$e(i.value),1)],8,CHe))),128))])]),_:1},8,["show-header","max-width"]))}}),IX={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			vec4 texel = texture2D( tDiffuse, vUv );
			gl_FragColor = opacity * texel;


		}`};class Pg{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const OHe=new fa(-1,1,1,-1,0,1),bO=new sr;bO.setAttribute("position",new Rt([-1,3,0,-1,-1,0,3,-1,0],3)),bO.setAttribute("uv",new Rt([0,2,0,0,2,0],2));class xO{constructor(e){this._mesh=new mt(bO,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,OHe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}class DX extends Pg{constructor(e,t){super(),this.textureID=t!==void 0?t:"tDiffuse",e instanceof ii?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Lo.clone(e.uniforms),this.material=new ii({name:e.name!==void 0?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new xO(this.material)}render(e,t,i){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}class UX extends Pg{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,i){const n=e.getContext(),s=e.state;s.buffers.color.setMask(!1),s.buffers.depth.setMask(!1),s.buffers.color.setLocked(!0),s.buffers.depth.setLocked(!0);let o,a;this.inverse?(o=0,a=1):(o=1,a=0),s.buffers.stencil.setTest(!0),s.buffers.stencil.setOp(n.REPLACE,n.REPLACE,n.REPLACE),s.buffers.stencil.setFunc(n.ALWAYS,o,4294967295),s.buffers.stencil.setClear(a),s.buffers.stencil.setLocked(!0),e.setRenderTarget(i),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),s.buffers.color.setLocked(!1),s.buffers.depth.setLocked(!1),s.buffers.color.setMask(!0),s.buffers.depth.setMask(!0),s.buffers.stencil.setLocked(!1),s.buffers.stencil.setFunc(n.EQUAL,1,4294967295),s.buffers.stencil.setOp(n.KEEP,n.KEEP,n.KEEP),s.buffers.stencil.setLocked(!0)}}class PHe extends Pg{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class IHe{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),t===void 0){const i=e.getSize(new qe);this._width=i.width,this._height=i.height,t=new Ui(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:gi}),t.texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new DX(IX),this.copyPass.material.blending=Xn,this.clock=new X_}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);t!==-1&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){e===void 0&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let i=!1;for(let n=0,s=this.passes.length;n<s;n++){const o=this.passes[n];if(o.enabled!==!1){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),o.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),o.needsSwap){if(i){const a=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}UX!==void 0&&(o instanceof UX?i=!0:o instanceof PHe&&(i=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(e===void 0){const t=this.renderer.getSize(new qe);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,e=this.renderTarget1.clone(),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const i=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(i,n),this.renderTarget2.setSize(i,n);for(let s=0;s<this.passes.length;s++)this.passes[s].setSize(i,n)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}class DHe extends Pg{constructor(e,t,i=null,n=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=i,this.clearColor=n,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new at}render(e,t,i){const n=e.autoClear;e.autoClear=!1;let s,o;this.overrideMaterial!==null&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor!==null&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor)),this.clearAlpha!==null&&(s=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),this.clearDepth==!0&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:i),this.clear===!0&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor!==null&&e.setClearColor(this._oldClearColor),this.clearAlpha!==null&&e.setClearAlpha(s),this.overrideMaterial!==null&&(this.scene.overrideMaterial=o),e.autoClear=n}}class dd extends Pg{constructor(e,t,i,n){super(),this.renderScene=t,this.renderCamera=i,this.selectedObjects=n!==void 0?n:[],this.visibleEdgeColor=new at(1,1,1),this.hiddenEdgeColor=new at(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=e!==void 0?new qe(e.x,e.y):new qe(256,256);const s=Math.round(this.resolution.x/this.downSampleRatio),o=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new Ui(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new jh,this.depthMaterial.side=Wi,this.depthMaterial.depthPacking=ty,this.depthMaterial.blending=Xn,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=Wi,this.prepareMaskMaterial.fragmentShader=u(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new Ui(this.resolution.x,this.resolution.y,{type:gi}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new Ui(s,o,{type:gi}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new Ui(s,o,{type:gi}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new Ui(Math.round(s/2),Math.round(o/2),{type:gi}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new Ui(s,o,{type:gi}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new Ui(Math.round(s/2),Math.round(o/2),{type:gi}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;const a=4,l=4;this.separableBlurMaterial1=this.getSeperableBlurMaterial(a),this.separableBlurMaterial1.uniforms.texSize.value.set(s,o),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(l),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(s/2),Math.round(o/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=l,this.overlayMaterial=this.getOverlayMaterial();const c=IX;this.copyUniforms=Lo.clone(c.uniforms),this.materialCopy=new ii({uniforms:this.copyUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:Xn,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new at,this.oldClearAlpha=1,this.fsQuad=new xO(null),this.tempPulseColor1=new at,this.tempPulseColor2=new at,this.textureMatrix=new St;function u(d,h){const p=h.isPerspectiveCamera?"perspective":"orthographic";return d.replace(/DEPTH_TO_VIEW_Z/g,p+"DepthToViewZ")}}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let i=Math.round(e/this.downSampleRatio),n=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(i,n),this.renderTargetBlurBuffer1.setSize(i,n),this.renderTargetEdgeBuffer1.setSize(i,n),this.separableBlurMaterial1.uniforms.texSize.value.set(i,n),i=Math.round(i/2),n=Math.round(n/2),this.renderTargetBlurBuffer2.setSize(i,n),this.renderTargetEdgeBuffer2.setSize(i,n),this.separableBlurMaterial2.uniforms.texSize.value.set(i,n)}changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;function i(n){n.isMesh&&(e===!0?n.visible=t.get(n):(t.set(n,n.visible),n.visible=e))}for(let n=0;n<this.selectedObjects.length;n++)this.selectedObjects[n].traverse(i)}changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,i=[];function n(o){o.isMesh&&i.push(o)}for(let o=0;o<this.selectedObjects.length;o++)this.selectedObjects[o].traverse(n);function s(o){if(o.isMesh||o.isSprite){let a=!1;for(let l=0;l<i.length;l++)if(i[l].id===o.id){a=!0;break}if(a===!1){const l=o.visible;(e===!1||t.get(o)===!0)&&(o.visible=e),t.set(o,l)}}else(o.isPoints||o.isLine)&&(e===!0?o.visible=t.get(o):(t.set(o,o.visible),o.visible=e))}this.renderScene.traverse(s)}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,i,n,s){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const o=e.autoClear;e.autoClear=!1,s&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const a=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=a,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const l=.625+Math.cos(performance.now()*.01/this.pulsePeriod)*.75/2;this.tempPulseColor1.multiplyScalar(l),this.tempPulseColor2.multiplyScalar(l)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=dd.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=dd.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=dd.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=dd.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,s&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(i),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=o}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=i.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new ii({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new qe(.5,.5)},textureMatrix:{value:null}},vertexShader:`#include <morphtarget_pars_vertex>
				#include <skinning_pars_vertex>

				varying vec4 projTexCoord;
				varying vec4 vPosition;
				uniform mat4 textureMatrix;

				void main() {

					#include <skinbase_vertex>
					#include <begin_vertex>
					#include <morphtarget_vertex>
					#include <skinning_vertex>
					#include <project_vertex>

					vPosition = mvPosition;

					vec4 worldPosition = vec4( transformed, 1.0 );

					#ifdef USE_INSTANCING

						worldPosition = instanceMatrix * worldPosition;

					#endif
					
					worldPosition = modelMatrix * worldPosition;

					projTexCoord = textureMatrix * worldPosition;

				}`,fragmentShader:`#include <packing>
				varying vec4 vPosition;
				varying vec4 projTexCoord;
				uniform sampler2D depthTexture;
				uniform vec2 cameraNearFar;

				void main() {

					float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));
					float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );
					float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;
					gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);

				}`})}getEdgeDetectionMaterial(){return new ii({uniforms:{maskTexture:{value:null},texSize:{value:new qe(.5,.5)},visibleEdgeColor:{value:new oe(1,1,1)},hiddenEdgeColor:{value:new oe(1,1,1)}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform vec2 texSize;
				uniform vec3 visibleEdgeColor;
				uniform vec3 hiddenEdgeColor;

				void main() {
					vec2 invSize = 1.0 / texSize;
					vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);
					vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);
					vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);
					vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);
					vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);
					float diff1 = (c1.r - c2.r)*0.5;
					float diff2 = (c3.r - c4.r)*0.5;
					float d = length( vec2(diff1, diff2) );
					float a1 = min(c1.g, c2.g);
					float a2 = min(c3.g, c4.g);
					float visibilityFactor = min(a1, a2);
					vec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;
					gl_FragColor = vec4(edgeColor, 1.0) * vec4(d);
				}`})}getSeperableBlurMaterial(e){return new ii({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new qe(.5,.5)},direction:{value:new qe(.5,.5)},kernelRadius:{value:1}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`#include <common>
				varying vec2 vUv;
				uniform sampler2D colorTexture;
				uniform vec2 texSize;
				uniform vec2 direction;
				uniform float kernelRadius;

				float gaussianPdf(in float x, in float sigma) {
					return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;
				}

				void main() {
					vec2 invSize = 1.0 / texSize;
					float sigma = kernelRadius/2.0;
					float weightSum = gaussianPdf(0.0, sigma);
					vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;
					vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);
					vec2 uvOffset = delta;
					for( int i = 1; i <= MAX_RADIUS; i ++ ) {
						float x = kernelRadius * float(i) / float(MAX_RADIUS);
						float w = gaussianPdf(x, sigma);
						vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);
						vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);
						diffuseSum += ((sample1 + sample2) * w);
						weightSum += (2.0 * w);
						uvOffset += delta;
					}
					gl_FragColor = diffuseSum/weightSum;
				}`})}getOverlayMaterial(){return new ii({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:`varying vec2 vUv;

				void main() {
					vUv = uv;
					gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
				}`,fragmentShader:`varying vec2 vUv;

				uniform sampler2D maskTexture;
				uniform sampler2D edgeTexture1;
				uniform sampler2D edgeTexture2;
				uniform sampler2D patternTexture;
				uniform float edgeStrength;
				uniform float edgeGlow;
				uniform bool usePatternTexture;

				void main() {
					vec4 edgeValue1 = texture2D(edgeTexture1, vUv);
					vec4 edgeValue2 = texture2D(edgeTexture2, vUv);
					vec4 maskColor = texture2D(maskTexture, vUv);
					vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);
					float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;
					vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;
					vec4 finalColor = edgeStrength * maskColor.r * edgeValue;
					if(usePatternTexture)
						finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);
					gl_FragColor = finalColor;
				}`,blending:Nl,depthTest:!1,depthWrite:!1,transparent:!0})}}dd.BlurDirectionX=new qe(1,0),dd.BlurDirectionY=new qe(0,1);const UHe={uniforms:{tDiffuse:{value:null},toneMappingExposure:{value:1}},vertexShader:`
		precision highp float;

		uniform mat4 modelViewMatrix;
		uniform mat4 projectionMatrix;

		attribute vec3 position;
		attribute vec2 uv;

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
	
		precision highp float;

		uniform sampler2D tDiffuse;

		`+yr.tonemapping_pars_fragment+yr.colorspace_pars_fragment+`

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );

			// tone mapping

			#ifdef LINEAR_TONE_MAPPING

				gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );

			#elif defined( REINHARD_TONE_MAPPING )

				gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );

			#elif defined( CINEON_TONE_MAPPING )

				gl_FragColor.rgb = OptimizedCineonToneMapping( gl_FragColor.rgb );

			#elif defined( ACES_FILMIC_TONE_MAPPING )

				gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );

			#endif

			// color space

			#ifdef SRGB_TRANSFER

				gl_FragColor = sRGBTransferOETF( gl_FragColor );

			#endif

		}`};class FHe extends Pg{constructor(){super();const e=UHe;this.uniforms=Lo.clone(e.uniforms),this.material=new F_({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new xO(this.material),this._outputColorSpace=null,this._toneMapping=null}render(e,t,i){this.uniforms.tDiffuse.value=i.texture,this.uniforms.toneMappingExposure.value=e.toneMappingExposure,(this._outputColorSpace!==e.outputColorSpace||this._toneMapping!==e.toneMapping)&&(this._outputColorSpace=e.outputColorSpace,this._toneMapping=e.toneMapping,this.material.defines={},Hr.getTransfer(this._outputColorSpace)===ci&&(this.material.defines.SRGB_TRANSFER=""),this._toneMapping===G0?this.material.defines.LINEAR_TONE_MAPPING="":this._toneMapping===j0?this.material.defines.REINHARD_TONE_MAPPING="":this._toneMapping===H0?this.material.defines.CINEON_TONE_MAPPING="":this._toneMapping===dh&&(this.material.defines.ACES_FILMIC_TONE_MAPPING=""),this.material.needsUpdate=!0),this.renderToScreen===!0?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}const BHe={uniforms:{tDiffuse:{value:null},resolution:{value:new qe(1/1024,1/512)}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`
	precision highp float;

	uniform sampler2D tDiffuse;

	uniform vec2 resolution;

	varying vec2 vUv;

	// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)

	//----------------------------------------------------------------------------------
	// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag
	// SDK Version: v3.00
	// Email:       gameworks@nvidia.com
	// Site:        http://developer.nvidia.com/
	//
	// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.
	//
	// Redistribution and use in source and binary forms, with or without
	// modification, are permitted provided that the following conditions
	// are met:
	//  * Redistributions of source code must retain the above copyright
	//    notice, this list of conditions and the following disclaimer.
	//  * Redistributions in binary form must reproduce the above copyright
	//    notice, this list of conditions and the following disclaimer in the
	//    documentation and/or other materials provided with the distribution.
	//  * Neither the name of NVIDIA CORPORATION nor the names of its
	//    contributors may be used to endorse or promote products derived
	//    from this software without specific prior written permission.
	//
	// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY
	// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
	// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
	// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR
	// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
	// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
	// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
	// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
	// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
	// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
	// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
	//
	//----------------------------------------------------------------------------------

	#ifndef FXAA_DISCARD
			//
			// Only valid for PC OpenGL currently.
			// Probably will not work when FXAA_GREEN_AS_LUMA = 1.
			//
			// 1 = Use discard on pixels which don't need AA.
			//     For APIs which enable concurrent TEX+ROP from same surface.
			// 0 = Return unchanged color on pixels which don't need AA.
			//
			#define FXAA_DISCARD 0
	#endif

	/*--------------------------------------------------------------------------*/
	#define FxaaTexTop(t, p) texture2D(t, p, -100.0)
	#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)
	/*--------------------------------------------------------------------------*/

	#define NUM_SAMPLES 5

	// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha
	float contrast( vec4 a, vec4 b ) {
			vec4 diff = abs( a - b );
			return max( max( max( diff.r, diff.g ), diff.b ), diff.a );
	}

	/*============================================================================

									FXAA3 QUALITY - PC

	============================================================================*/

	/*--------------------------------------------------------------------------*/
	vec4 FxaaPixelShader(
			vec2 posM,
			sampler2D tex,
			vec2 fxaaQualityRcpFrame,
			float fxaaQualityEdgeThreshold,
			float fxaaQualityinvEdgeThreshold
	) {
			vec4 rgbaM = FxaaTexTop(tex, posM);
			vec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);
			vec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);
			// . S .
			// W M E
			// . N .

			bool earlyExit = max( max( max(
					contrast( rgbaM, rgbaN ),
					contrast( rgbaM, rgbaS ) ),
					contrast( rgbaM, rgbaE ) ),
					contrast( rgbaM, rgbaW ) )
					< fxaaQualityEdgeThreshold;
			// . 0 .
			// 0 0 0
			// . 0 .

			#if (FXAA_DISCARD == 1)
					if(earlyExit) FxaaDiscard;
			#else
					if(earlyExit) return rgbaM;
			#endif

			float contrastN = contrast( rgbaM, rgbaN );
			float contrastS = contrast( rgbaM, rgbaS );
			float contrastE = contrast( rgbaM, rgbaE );
			float contrastW = contrast( rgbaM, rgbaW );

			float relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );
			relativeVContrast *= fxaaQualityinvEdgeThreshold;

			bool horzSpan = relativeVContrast > 0.;
			// . 1 .
			// 0 0 0
			// . 1 .

			// 45 deg edge detection and corners of objects, aka V/H contrast is too similar
			if( abs( relativeVContrast ) < .3 ) {
					// locate the edge
					vec2 dirToEdge;
					dirToEdge.x = contrastE > contrastW ? 1. : -1.;
					dirToEdge.y = contrastS > contrastN ? 1. : -1.;
					// . 2 .      . 1 .
					// 1 0 2  ~=  0 0 1
					// . 1 .      . 0 .

					// tap 2 pixels and see which ones are "outside" the edge, to
					// determine if the edge is vertical or horizontal

					vec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongH = contrast( rgbaM, rgbaAlongH );
					// . 1 .
					// 0 0 1
					// . 0 H

					vec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);
					float matchAlongV = contrast( rgbaM, rgbaAlongV );
					// V 1 .
					// 0 0 1
					// . 0 .

					relativeVContrast = matchAlongV - matchAlongH;
					relativeVContrast *= fxaaQualityinvEdgeThreshold;

					if( abs( relativeVContrast ) < .3 ) { // 45 deg edge
							// 1 1 .
							// 0 0 1
							// . 0 1

							// do a simple blur
							return mix(
									rgbaM,
									(rgbaN + rgbaS + rgbaE + rgbaW) * .25,
									.4
							);
					}

					horzSpan = relativeVContrast > 0.;
			}

			if(!horzSpan) rgbaN = rgbaW;
			if(!horzSpan) rgbaS = rgbaE;
			// . 0 .      1
			// 1 0 1  ->  0
			// . 0 .      1

			bool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );
			if(!pairN) rgbaN = rgbaS;

			vec2 offNP;
			offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;
			offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;

			bool doneN = false;
			bool doneP = false;

			float nDist = 0.;
			float pDist = 0.;

			vec2 posN = posM;
			vec2 posP = posM;

			int iterationsUsed = 0;
			int iterationsUsedN = 0;
			int iterationsUsedP = 0;
			for( int i = 0; i < NUM_SAMPLES; i++ ) {
					iterationsUsed = i;

					float increment = float(i + 1);

					if(!doneN) {
							nDist += increment;
							posN = posM + offNP * nDist;
							vec4 rgbaEndN = FxaaTexTop(tex, posN.xy);
							doneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );
							iterationsUsedN = i;
					}

					if(!doneP) {
							pDist += increment;
							posP = posM - offNP * pDist;
							vec4 rgbaEndP = FxaaTexTop(tex, posP.xy);
							doneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );
							iterationsUsedP = i;
					}

					if(doneN || doneP) break;
			}


			if ( !doneP && !doneN ) return rgbaM; // failed to find end of edge

			float dist = min(
					doneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,
					doneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.
			);

			// hacky way of reduces blurriness of mostly diagonal edges
			// but reduces AA quality
			dist = pow(dist, .5);

			dist = 1. - dist;

			return mix(
					rgbaM,
					rgbaN,
					dist * .5
			);
	}

	void main() {
			const float edgeDetectionQuality = .2;
			const float invEdgeDetectionQuality = 1. / edgeDetectionQuality;

			gl_FragColor = FxaaPixelShader(
					vUv,
					tDiffuse,
					resolution,
					edgeDetectionQuality, // [0,1] contrast needed, otherwise early discard
					invEdgeDetectionQuality
			);

	}
	`},FX={type:"change"},wO={type:"start"},BX={type:"end"},G2=new Uh,zX=new pa,zHe=Math.cos(70*$i.DEG2RAD);class VHe extends Ln{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new oe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:lh.ROTATE,MIDDLE:lh.DOLLY,RIGHT:lh.PAN},this.touches={ONE:ch.ROTATE,TWO:ch.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return a.phi},this.getAzimuthalAngle=function(){return a.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(Q){Q.addEventListener("keydown",H),this._domElementKeyEvents=Q},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",H),this._domElementKeyEvents=null},this.saveState=function(){i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(FX),i.update(),s=n.NONE},this.update=function(){const Q=new oe,he=new Rr().setFromUnitVectors(e.up,new oe(0,1,0)),we=he.clone().invert(),ae=new oe,De=new Rr,We=new oe,je=2*Math.PI;return function(ye=null){const nt=i.object.position;Q.copy(nt).sub(i.target),Q.applyQuaternion(he),a.setFromVector3(Q),i.autoRotate&&s===n.NONE&&P(E(ye)),i.enableDamping?(a.theta+=l.theta*i.dampingFactor,a.phi+=l.phi*i.dampingFactor):(a.theta+=l.theta,a.phi+=l.phi);let He=i.minAzimuthAngle,tt=i.maxAzimuthAngle;isFinite(He)&&isFinite(tt)&&(He<-Math.PI?He+=je:He>Math.PI&&(He-=je),tt<-Math.PI?tt+=je:tt>Math.PI&&(tt-=je),He<=tt?a.theta=Math.max(He,Math.min(tt,a.theta)):a.theta=a.theta>(He+tt)/2?Math.max(He,a.theta):Math.min(tt,a.theta)),a.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,a.phi)),a.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(u,i.dampingFactor):i.target.add(u),i.zoomToCursor&&S||i.object.isOrthographicCamera?a.radius=O(a.radius):a.radius=O(a.radius*c),Q.setFromSpherical(a),Q.applyQuaternion(we),nt.copy(i.target).add(Q),i.object.lookAt(i.target),i.enableDamping===!0?(l.theta*=1-i.dampingFactor,l.phi*=1-i.dampingFactor,u.multiplyScalar(1-i.dampingFactor)):(l.set(0,0,0),u.set(0,0,0));let Me=!1;if(i.zoomToCursor&&S){let Ne=null;if(i.object.isPerspectiveCamera){const fe=Q.length();Ne=O(fe*c);const Ie=fe-Ne;i.object.position.addScaledVector(w,Ie),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const fe=new oe(_.x,_.y,0);fe.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),Me=!0;const Ie=new oe(_.x,_.y,0);Ie.unproject(i.object),i.object.position.sub(Ie).add(fe),i.object.updateMatrixWorld(),Ne=Q.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Ne!==null&&(this.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Ne).add(i.object.position):(G2.origin.copy(i.object.position),G2.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(G2.direction))<zHe?e.lookAt(i.target):(zX.setFromNormalAndCoplanarPoint(i.object.up,i.target),G2.intersectPlane(zX,i.target))))}else i.object.isOrthographicCamera&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/c)),i.object.updateProjectionMatrix(),Me=!0);return c=1,S=!1,Me||ae.distanceToSquared(i.object.position)>o||8*(1-De.dot(i.object.quaternion))>o||We.distanceToSquared(i.target)>0?(i.dispatchEvent(FX),ae.copy(i.object.position),De.copy(i.object.quaternion),We.copy(i.target),Me=!1,!0):!1}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",Pe),i.domElement.removeEventListener("pointerdown",be),i.domElement.removeEventListener("pointercancel",pe),i.domElement.removeEventListener("wheel",Y),i.domElement.removeEventListener("pointermove",_e),i.domElement.removeEventListener("pointerup",pe),i._domElementKeyEvents!==null&&(i._domElementKeyEvents.removeEventListener("keydown",H),i._domElementKeyEvents=null)};const i=this,n={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=n.NONE;const o=1e-6,a=new gR,l=new gR;let c=1;const u=new oe,d=new qe,h=new qe,p=new qe,f=new qe,m=new qe,g=new qe,v=new qe,x=new qe,b=new qe,w=new oe,_=new qe;let S=!1;const T=[],M={};function E(Q){return Q!==null?2*Math.PI/60*i.autoRotateSpeed*Q:2*Math.PI/60/60*i.autoRotateSpeed}function C(){return Math.pow(.95,i.zoomSpeed)}function P(Q){l.theta-=Q}function A(Q){l.phi-=Q}const N=function(){const Q=new oe;return function(he,we){Q.setFromMatrixColumn(we,0),Q.multiplyScalar(-he),u.add(Q)}}(),R=function(){const Q=new oe;return function(he,we){i.screenSpacePanning===!0?Q.setFromMatrixColumn(we,1):(Q.setFromMatrixColumn(we,0),Q.crossVectors(i.object.up,Q)),Q.multiplyScalar(he),u.add(Q)}}(),F=function(){const Q=new oe;return function(he,we){const ae=i.domElement;if(i.object.isPerspectiveCamera){const De=i.object.position;Q.copy(De).sub(i.target);let We=Q.length();We*=Math.tan(i.object.fov/2*Math.PI/180),N(2*he*We/ae.clientHeight,i.object.matrix),R(2*we*We/ae.clientHeight,i.object.matrix)}else i.object.isOrthographicCamera?(N(he*(i.object.right-i.object.left)/i.object.zoom/ae.clientWidth,i.object.matrix),R(we*(i.object.top-i.object.bottom)/i.object.zoom/ae.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function B(Q){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c/=Q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function k(Q){i.object.isPerspectiveCamera||i.object.isOrthographicCamera?c*=Q:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function z(Q){if(!i.zoomToCursor)return;S=!0;const he=i.domElement.getBoundingClientRect(),we=Q.clientX-he.left,ae=Q.clientY-he.top,De=he.width,We=he.height;_.x=we/De*2-1,_.y=-(ae/We)*2+1,w.set(_.x,_.y,1).unproject(i.object).sub(i.object.position).normalize()}function O(Q){return Math.max(i.minDistance,Math.min(i.maxDistance,Q))}function V(Q){d.set(Q.clientX,Q.clientY)}function U(Q){z(Q),v.set(Q.clientX,Q.clientY)}function G(Q){f.set(Q.clientX,Q.clientY)}function X(Q){h.set(Q.clientX,Q.clientY),p.subVectors(h,d).multiplyScalar(i.rotateSpeed);const he=i.domElement;P(2*Math.PI*p.x/he.clientHeight),A(2*Math.PI*p.y/he.clientHeight),d.copy(h),i.update()}function ie(Q){x.set(Q.clientX,Q.clientY),b.subVectors(x,v),b.y>0?B(C()):b.y<0&&k(C()),v.copy(x),i.update()}function se(Q){m.set(Q.clientX,Q.clientY),g.subVectors(m,f).multiplyScalar(i.panSpeed),F(g.x,g.y),f.copy(m),i.update()}function de(Q){z(Q),Q.deltaY<0?k(C()):Q.deltaY>0&&B(C()),i.update()}function K(Q){let he=!1;switch(Q.code){case i.keys.UP:Q.ctrlKey||Q.metaKey||Q.shiftKey?A(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):F(0,i.keyPanSpeed),he=!0;break;case i.keys.BOTTOM:Q.ctrlKey||Q.metaKey||Q.shiftKey?A(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):F(0,-i.keyPanSpeed),he=!0;break;case i.keys.LEFT:Q.ctrlKey||Q.metaKey||Q.shiftKey?P(2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):F(i.keyPanSpeed,0),he=!0;break;case i.keys.RIGHT:Q.ctrlKey||Q.metaKey||Q.shiftKey?P(-2*Math.PI*i.rotateSpeed/i.domElement.clientHeight):F(-i.keyPanSpeed,0),he=!0;break}he&&(Q.preventDefault(),i.update())}function q(){if(T.length===1)d.set(T[0].pageX,T[0].pageY);else{const Q=.5*(T[0].pageX+T[1].pageX),he=.5*(T[0].pageY+T[1].pageY);d.set(Q,he)}}function ce(){if(T.length===1)f.set(T[0].pageX,T[0].pageY);else{const Q=.5*(T[0].pageX+T[1].pageX),he=.5*(T[0].pageY+T[1].pageY);f.set(Q,he)}}function Te(){const Q=T[0].pageX-T[1].pageX,he=T[0].pageY-T[1].pageY,we=Math.sqrt(Q*Q+he*he);v.set(0,we)}function Z(){i.enableZoom&&Te(),i.enablePan&&ce()}function L(){i.enableZoom&&Te(),i.enableRotate&&q()}function $(Q){if(T.length==1)h.set(Q.pageX,Q.pageY);else{const we=ve(Q),ae=.5*(Q.pageX+we.x),De=.5*(Q.pageY+we.y);h.set(ae,De)}p.subVectors(h,d).multiplyScalar(i.rotateSpeed);const he=i.domElement;P(2*Math.PI*p.x/he.clientHeight),A(2*Math.PI*p.y/he.clientHeight),d.copy(h)}function re(Q){if(T.length===1)m.set(Q.pageX,Q.pageY);else{const he=ve(Q),we=.5*(Q.pageX+he.x),ae=.5*(Q.pageY+he.y);m.set(we,ae)}g.subVectors(m,f).multiplyScalar(i.panSpeed),F(g.x,g.y),f.copy(m)}function te(Q){const he=ve(Q),we=Q.pageX-he.x,ae=Q.pageY-he.y,De=Math.sqrt(we*we+ae*ae);x.set(0,De),b.set(0,Math.pow(x.y/v.y,i.zoomSpeed)),B(b.y),v.copy(x)}function le(Q){i.enableZoom&&te(Q),i.enablePan&&re(Q)}function ge(Q){i.enableZoom&&te(Q),i.enableRotate&&$(Q)}function be(Q){i.enabled!==!1&&(T.length===0&&(i.domElement.setPointerCapture(Q.pointerId),i.domElement.addEventListener("pointermove",_e),i.domElement.addEventListener("pointerup",pe)),Ee(Q),Q.pointerType==="touch"?ne(Q):Se(Q))}function _e(Q){i.enabled!==!1&&(Q.pointerType==="touch"?Le(Q):Fe(Q))}function pe(Q){Ue(Q),T.length===0&&(i.domElement.releasePointerCapture(Q.pointerId),i.domElement.removeEventListener("pointermove",_e),i.domElement.removeEventListener("pointerup",pe)),i.dispatchEvent(BX),s=n.NONE}function Se(Q){let he;switch(Q.button){case 0:he=i.mouseButtons.LEFT;break;case 1:he=i.mouseButtons.MIDDLE;break;case 2:he=i.mouseButtons.RIGHT;break;default:he=-1}switch(he){case lh.DOLLY:if(i.enableZoom===!1)return;U(Q),s=n.DOLLY;break;case lh.ROTATE:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(i.enablePan===!1)return;G(Q),s=n.PAN}else{if(i.enableRotate===!1)return;V(Q),s=n.ROTATE}break;case lh.PAN:if(Q.ctrlKey||Q.metaKey||Q.shiftKey){if(i.enableRotate===!1)return;V(Q),s=n.ROTATE}else{if(i.enablePan===!1)return;G(Q),s=n.PAN}break;default:s=n.NONE}s!==n.NONE&&i.dispatchEvent(wO)}function Fe(Q){switch(s){case n.ROTATE:if(i.enableRotate===!1)return;X(Q);break;case n.DOLLY:if(i.enableZoom===!1)return;ie(Q);break;case n.PAN:if(i.enablePan===!1)return;se(Q);break}}function Y(Q){i.enabled===!1||i.enableZoom===!1||s!==n.NONE||(Q.preventDefault(),i.dispatchEvent(wO),de(Q),i.dispatchEvent(BX))}function H(Q){i.enabled===!1||i.enablePan===!1||K(Q)}function ne(Q){switch(Be(Q),T.length){case 1:switch(i.touches.ONE){case ch.ROTATE:if(i.enableRotate===!1)return;q(),s=n.TOUCH_ROTATE;break;case ch.PAN:if(i.enablePan===!1)return;ce(),s=n.TOUCH_PAN;break;default:s=n.NONE}break;case 2:switch(i.touches.TWO){case ch.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Z(),s=n.TOUCH_DOLLY_PAN;break;case ch.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;L(),s=n.TOUCH_DOLLY_ROTATE;break;default:s=n.NONE}break;default:s=n.NONE}s!==n.NONE&&i.dispatchEvent(wO)}function Le(Q){switch(Be(Q),s){case n.TOUCH_ROTATE:if(i.enableRotate===!1)return;$(Q),i.update();break;case n.TOUCH_PAN:if(i.enablePan===!1)return;re(Q),i.update();break;case n.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;le(Q),i.update();break;case n.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ge(Q),i.update();break;default:s=n.NONE}}function Pe(Q){i.enabled!==!1&&Q.preventDefault()}function Ee(Q){T.push(Q)}function Ue(Q){delete M[Q.pointerId];for(let he=0;he<T.length;he++)if(T[he].pointerId==Q.pointerId){T.splice(he,1);return}}function Be(Q){let he=M[Q.pointerId];he===void 0&&(he=new qe,M[Q.pointerId]=he),he.set(Q.pageX,Q.pageY)}function ve(Q){const he=Q.pointerId===T[0].pointerId?T[1]:T[0];return M[he.pointerId]}i.domElement.addEventListener("contextmenu",Pe),i.domElement.addEventListener("pointerdown",be),i.domElement.addEventListener("pointercancel",pe),i.domElement.addEventListener("wheel",Y,{passive:!1}),this.update()}}const Lp=new q_,vo=new oe,hd=new oe,Ni=new Rr,VX={X:new oe(1,0,0),Y:new oe(0,1,0),Z:new oe(0,0,1)},_O={type:"change"},GX={type:"mouseDown"},jX={type:"mouseUp",mode:null},HX={type:"objectChange"};class GHe extends nr{constructor(e,t){super(),t===void 0&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const i=new qHe;this._gizmo=i,this.add(i);const n=new KHe;this._plane=n,this.add(n);const s=this;function o(x,b){let w=b;Object.defineProperty(s,x,{get:function(){return w!==void 0?w:b},set:function(_){w!==_&&(w=_,n[x]=_,i[x]=_,s.dispatchEvent({type:x+"-changed",value:_}),s.dispatchEvent(_O))}}),s[x]=b,n[x]=b,i[x]=b}o("camera",e),o("object",void 0),o("enabled",!0),o("axis",null),o("mode","translate"),o("translationSnap",null),o("rotationSnap",null),o("scaleSnap",null),o("space","world"),o("size",1),o("dragging",!1),o("showX",!0),o("showY",!0),o("showZ",!0);const a=new oe,l=new oe,c=new Rr,u=new Rr,d=new oe,h=new Rr,p=new oe,f=new oe,m=new oe,g=0,v=new oe;o("worldPosition",a),o("worldPositionStart",l),o("worldQuaternion",c),o("worldQuaternionStart",u),o("cameraPosition",d),o("cameraQuaternion",h),o("pointStart",p),o("pointEnd",f),o("rotationAxis",m),o("rotationAngle",g),o("eye",v),this._offset=new oe,this._startNorm=new oe,this._endNorm=new oe,this._cameraScale=new oe,this._parentPosition=new oe,this._parentQuaternion=new Rr,this._parentQuaternionInv=new Rr,this._parentScale=new oe,this._worldScaleStart=new oe,this._worldQuaternionInv=new Rr,this._worldScale=new oe,this._positionStart=new oe,this._quaternionStart=new Rr,this._scaleStart=new oe,this._getPointer=jHe.bind(this),this._onPointerDown=WHe.bind(this),this._onPointerHover=HHe.bind(this),this._onPointerMove=$He.bind(this),this._onPointerUp=XHe.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(){this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(this)}pointerHover(e){if(this.object===void 0||this.dragging===!0)return;Lp.setFromCamera(e,this.camera);const t=SO(this._gizmo.picker[this.mode],Lp);t?this.axis=t.object.name:this.axis=null}pointerDown(e){if(!(this.object===void 0||this.dragging===!0||e.button!==0)&&this.axis!==null){Lp.setFromCamera(e,this.camera);const t=SO(this._plane,Lp,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,GX.mode=this.mode,this.dispatchEvent(GX)}}pointerMove(e){const t=this.axis,i=this.mode,n=this.object;let s=this.space;if(i==="scale"?s="local":(t==="E"||t==="XYZE"||t==="XYZ")&&(s="world"),n===void 0||t===null||this.dragging===!1||e.button!==-1)return;Lp.setFromCamera(e,this.camera);const o=SO(this._plane,Lp,!0);if(o){if(this.pointEnd.copy(o.point).sub(this.worldPositionStart),i==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),s==="local"&&t!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),t.indexOf("X")===-1&&(this._offset.x=0),t.indexOf("Y")===-1&&(this._offset.y=0),t.indexOf("Z")===-1&&(this._offset.z=0),s==="local"&&t!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),n.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(s==="local"&&(n.position.applyQuaternion(Ni.copy(this._quaternionStart).invert()),t.search("X")!==-1&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.position.applyQuaternion(this._quaternionStart)),s==="world"&&(n.parent&&n.position.add(vo.setFromMatrixPosition(n.parent.matrixWorld)),t.search("X")!==-1&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),t.search("Y")!==-1&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),t.search("Z")!==-1&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.parent&&n.position.sub(vo.setFromMatrixPosition(n.parent.matrixWorld))));else if(i==="scale"){if(t.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),hd.set(a,a,a)}else vo.copy(this.pointStart),hd.copy(this.pointEnd),vo.applyQuaternion(this._worldQuaternionInv),hd.applyQuaternion(this._worldQuaternionInv),hd.divide(vo),t.search("X")===-1&&(hd.x=1),t.search("Y")===-1&&(hd.y=1),t.search("Z")===-1&&(hd.z=1);n.scale.copy(this._scaleStart).multiply(hd),this.scaleSnap&&(t.search("X")!==-1&&(n.scale.x=Math.round(n.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Y")!==-1&&(n.scale.y=Math.round(n.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),t.search("Z")!==-1&&(n.scale.z=Math.round(n.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(i==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);const a=20/this.worldPosition.distanceTo(vo.setFromMatrixPosition(this.camera.matrixWorld));t==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1):t==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(vo.copy(this.rotationAxis).cross(this.eye))*a):(t==="X"||t==="Y"||t==="Z")&&(this.rotationAxis.copy(VX[t]),vo.copy(VX[t]),s==="local"&&vo.applyQuaternion(this.worldQuaternion),this.rotationAngle=this._offset.dot(vo.cross(this.eye).normalize())*a),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),s==="local"&&t!=="E"&&t!=="XYZE"?(n.quaternion.copy(this._quaternionStart),n.quaternion.multiply(Ni.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),n.quaternion.copy(Ni.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),n.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(_O),this.dispatchEvent(HX)}}pointerUp(e){e.button===0&&(this.dragging&&this.axis!==null&&(jX.mode=this.mode,this.dispatchEvent(jX)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(_O),this.dispatchEvent(HX),this.pointStart.copy(this.pointEnd))}getRaycaster(){return Lp}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}}function jHe(r){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:r.button};{const e=this.domElement.getBoundingClientRect();return{x:(r.clientX-e.left)/e.width*2-1,y:-(r.clientY-e.top)/e.height*2+1,button:r.button}}}function HHe(r){if(this.enabled)switch(r.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(r));break}}function WHe(r){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(r.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(r)),this.pointerDown(this._getPointer(r)))}function $He(r){this.enabled&&this.pointerMove(this._getPointer(r))}function XHe(r){this.enabled&&(this.domElement.releasePointerCapture(r.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(r)))}function SO(r,e,t){const i=e.intersectObject(r,!0);for(let n=0;n<i.length;n++)if(i[n].object.visible||t)return i[n];return!1}const j2=new Xi,di=new oe(0,1,0),WX=new oe(0,0,0),$X=new St,H2=new Rr,W2=new Rr,Wl=new oe,XX=new St,zb=new oe(1,0,0),Op=new oe(0,1,0),Vb=new oe(0,0,1),$2=new oe,Gb=new oe,jb=new oe;class qHe extends nr{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new Ei({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new Ki({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),i=e.clone();i.opacity=.15;const n=t.clone();n.opacity=.5;const s=e.clone();s.color.setHex(16711680);const o=e.clone();o.color.setHex(65280);const a=e.clone();a.color.setHex(255);const l=e.clone();l.color.setHex(16711680),l.opacity=.5;const c=e.clone();c.color.setHex(65280),c.opacity=.5;const u=e.clone();u.color.setHex(255),u.opacity=.5;const d=e.clone();d.opacity=.25;const h=e.clone();h.color.setHex(16776960),h.opacity=.25,e.clone().color.setHex(16776960);const p=e.clone();p.color.setHex(7895160);const f=new bn(0,.04,.1,12);f.translate(0,.05,0);const m=new vi(.08,.08,.08);m.translate(0,.04,0);const g=new sr;g.setAttribute("position",new Rt([0,0,0,1,0,0],3));const v=new bn(.0075,.0075,.5,3);v.translate(0,.25,0);function x(R,F){const B=new Fu(R,.0075,3,64,F*Math.PI*2);return B.rotateY(Math.PI/2),B.rotateX(Math.PI/2),B}function b(){const R=new sr;return R.setAttribute("position",new Rt([0,0,0,1,1,1],3)),R}const w={X:[[new mt(f,s),[.5,0,0],[0,0,-Math.PI/2]],[new mt(f,s),[-.5,0,0],[0,0,Math.PI/2]],[new mt(v,s),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new mt(f,o),[0,.5,0]],[new mt(f,o),[0,-.5,0],[Math.PI,0,0]],[new mt(v,o)]],Z:[[new mt(f,a),[0,0,.5],[Math.PI/2,0,0]],[new mt(f,a),[0,0,-.5],[-Math.PI/2,0,0]],[new mt(v,a),null,[Math.PI/2,0,0]]],XYZ:[[new mt(new Zh(.1,0),d.clone()),[0,0,0]]],XY:[[new mt(new vi(.15,.15,.01),u.clone()),[.15,.15,0]]],YZ:[[new mt(new vi(.15,.15,.01),l.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new mt(new vi(.15,.15,.01),c.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},_={X:[[new mt(new bn(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new mt(new bn(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new mt(new bn(.2,0,.6,4),i),[0,.3,0]],[new mt(new bn(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new mt(new bn(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new mt(new bn(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new mt(new Zh(.2,0),i)]],XY:[[new mt(new vi(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new mt(new vi(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new mt(new vi(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]]},S={START:[[new mt(new Zh(.01,2),n),null,null,null,"helper"]],END:[[new mt(new Zh(.01,2),n),null,null,null,"helper"]],DELTA:[[new yn(b(),n),null,null,null,"helper"]],X:[[new yn(g,n.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new yn(g,n.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new yn(g,n.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},T={XYZE:[[new mt(x(.5,1),p),null,[0,Math.PI/2,0]]],X:[[new mt(x(.5,.5),s)]],Y:[[new mt(x(.5,.5),o),null,[0,0,-Math.PI/2]]],Z:[[new mt(x(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new mt(x(.75,1),h),null,[0,Math.PI/2,0]]]},M={AXIS:[[new yn(g,n.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},E={XYZE:[[new mt(new Jh(.25,10,8),i)]],X:[[new mt(new Fu(.5,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new mt(new Fu(.5,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new mt(new Fu(.5,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new mt(new Fu(.75,.1,2,24),i)]]},C={X:[[new mt(m,s),[.5,0,0],[0,0,-Math.PI/2]],[new mt(v,s),[0,0,0],[0,0,-Math.PI/2]],[new mt(m,s),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new mt(m,o),[0,.5,0]],[new mt(v,o)],[new mt(m,o),[0,-.5,0],[0,0,Math.PI]]],Z:[[new mt(m,a),[0,0,.5],[Math.PI/2,0,0]],[new mt(v,a),[0,0,0],[Math.PI/2,0,0]],[new mt(m,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new mt(new vi(.15,.15,.01),u),[.15,.15,0]]],YZ:[[new mt(new vi(.15,.15,.01),l),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new mt(new vi(.15,.15,.01),c),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new mt(new vi(.1,.1,.1),d.clone())]]},P={X:[[new mt(new bn(.2,0,.6,4),i),[.3,0,0],[0,0,-Math.PI/2]],[new mt(new bn(.2,0,.6,4),i),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new mt(new bn(.2,0,.6,4),i),[0,.3,0]],[new mt(new bn(.2,0,.6,4),i),[0,-.3,0],[0,0,Math.PI]]],Z:[[new mt(new bn(.2,0,.6,4),i),[0,0,.3],[Math.PI/2,0,0]],[new mt(new bn(.2,0,.6,4),i),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new mt(new vi(.2,.2,.01),i),[.15,.15,0]]],YZ:[[new mt(new vi(.2,.2,.01),i),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new mt(new vi(.2,.2,.01),i),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new mt(new vi(.2,.2,.2),i),[0,0,0]]]},A={X:[[new yn(g,n.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new yn(g,n.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new yn(g,n.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function N(R){const F=new nr;for(const B in R)for(let k=R[B].length;k--;){const z=R[B][k][0].clone(),O=R[B][k][1],V=R[B][k][2],U=R[B][k][3],G=R[B][k][4];z.name=B,z.tag=G,O&&z.position.set(O[0],O[1],O[2]),V&&z.rotation.set(V[0],V[1],V[2]),U&&z.scale.set(U[0],U[1],U[2]),z.updateMatrix();const X=z.geometry.clone();X.applyMatrix4(z.matrix),z.geometry=X,z.renderOrder=1/0,z.position.set(0,0,0),z.rotation.set(0,0,0),z.scale.set(1,1,1),F.add(z)}return F}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=N(w)),this.add(this.gizmo.rotate=N(T)),this.add(this.gizmo.scale=N(C)),this.add(this.picker.translate=N(_)),this.add(this.picker.rotate=N(E)),this.add(this.picker.scale=N(P)),this.add(this.helper.translate=N(S)),this.add(this.helper.rotate=N(M)),this.add(this.helper.scale=N(A)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:W2;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let i=[];i=i.concat(this.picker[this.mode].children),i=i.concat(this.gizmo[this.mode].children),i=i.concat(this.helper[this.mode].children);for(let n=0;n<i.length;n++){const s=i[n];s.visible=!0,s.rotation.set(0,0,0),s.position.copy(this.worldPosition);let o;if(this.camera.isOrthographicCamera?o=(this.camera.top-this.camera.bottom)/this.camera.zoom:o=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),s.scale.set(1,1,1).multiplyScalar(o*this.size/4),s.tag==="helper"){s.visible=!1,s.name==="AXIS"?(s.visible=!!this.axis,this.axis==="X"&&(Ni.setFromEuler(j2.set(0,0,0)),s.quaternion.copy(t).multiply(Ni),Math.abs(di.copy(zb).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Y"&&(Ni.setFromEuler(j2.set(0,0,Math.PI/2)),s.quaternion.copy(t).multiply(Ni),Math.abs(di.copy(Op).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Z"&&(Ni.setFromEuler(j2.set(0,Math.PI/2,0)),s.quaternion.copy(t).multiply(Ni),Math.abs(di.copy(Vb).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="XYZE"&&(Ni.setFromEuler(j2.set(0,Math.PI/2,0)),di.copy(this.rotationAxis),s.quaternion.setFromRotationMatrix($X.lookAt(WX,di,Op)),s.quaternion.multiply(Ni),s.visible=this.dragging),this.axis==="E"&&(s.visible=!1)):s.name==="START"?(s.position.copy(this.worldPositionStart),s.visible=this.dragging):s.name==="END"?(s.position.copy(this.worldPosition),s.visible=this.dragging):s.name==="DELTA"?(s.position.copy(this.worldPositionStart),s.quaternion.copy(this.worldQuaternionStart),vo.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),vo.applyQuaternion(this.worldQuaternionStart.clone().invert()),s.scale.copy(vo),s.visible=this.dragging):(s.quaternion.copy(t),this.dragging?s.position.copy(this.worldPositionStart):s.position.copy(this.worldPosition),this.axis&&(s.visible=this.axis.search(s.name)!==-1));continue}s.quaternion.copy(t),this.mode==="translate"||this.mode==="scale"?(s.name==="X"&&Math.abs(di.copy(zb).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Y"&&Math.abs(di.copy(Op).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Z"&&Math.abs(di.copy(Vb).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XY"&&Math.abs(di.copy(Vb).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="YZ"&&Math.abs(di.copy(zb).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XZ"&&Math.abs(di.copy(Op).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1)):this.mode==="rotate"&&(H2.copy(t),di.copy(this.eye).applyQuaternion(Ni.copy(t).invert()),s.name.search("E")!==-1&&s.quaternion.setFromRotationMatrix($X.lookAt(this.eye,WX,Op)),s.name==="X"&&(Ni.setFromAxisAngle(zb,Math.atan2(-di.y,di.z)),Ni.multiplyQuaternions(H2,Ni),s.quaternion.copy(Ni)),s.name==="Y"&&(Ni.setFromAxisAngle(Op,Math.atan2(di.x,di.z)),Ni.multiplyQuaternions(H2,Ni),s.quaternion.copy(Ni)),s.name==="Z"&&(Ni.setFromAxisAngle(Vb,Math.atan2(di.y,di.x)),Ni.multiplyQuaternions(H2,Ni),s.quaternion.copy(Ni))),s.visible=s.visible&&(s.name.indexOf("X")===-1||this.showX),s.visible=s.visible&&(s.name.indexOf("Y")===-1||this.showY),s.visible=s.visible&&(s.name.indexOf("Z")===-1||this.showZ),s.visible=s.visible&&(s.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),s.material._color=s.material._color||s.material.color.clone(),s.material._opacity=s.material._opacity||s.material.opacity,s.material.color.copy(s.material._color),s.material.opacity=s.material._opacity,this.enabled&&this.axis&&(s.name===this.axis||this.axis.split("").some(function(a){return s.name===a}))&&(s.material.color.setHex(16776960),s.material.opacity=1)}super.updateMatrixWorld(e)}}class KHe extends mt{constructor(){super(new Xa(1e5,1e5,2,2),new Ei({visible:!1,wireframe:!0,side:Wi,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),$2.copy(zb).applyQuaternion(t==="local"?this.worldQuaternion:W2),Gb.copy(Op).applyQuaternion(t==="local"?this.worldQuaternion:W2),jb.copy(Vb).applyQuaternion(t==="local"?this.worldQuaternion:W2),di.copy(Gb),this.mode){case"translate":case"scale":switch(this.axis){case"X":di.copy(this.eye).cross($2),Wl.copy($2).cross(di);break;case"Y":di.copy(this.eye).cross(Gb),Wl.copy(Gb).cross(di);break;case"Z":di.copy(this.eye).cross(jb),Wl.copy(jb).cross(di);break;case"XY":Wl.copy(jb);break;case"YZ":Wl.copy($2);break;case"XZ":di.copy(jb),Wl.copy(Gb);break;case"XYZ":case"E":Wl.set(0,0,0);break}break;case"rotate":default:Wl.set(0,0,0)}Wl.length()===0?this.quaternion.copy(this.cameraQuaternion):(XX.lookAt(vo.set(0,0,0),Wl,di),this.quaternion.setFromRotationMatrix(XX)),super.updateMatrixWorld(e)}}window.GPUShaderStage===void 0&&(window.GPUShaderStage={VERTEX:1,FRAGMENT:2,COMPUTE:4});let qX=!1;navigator.gpu!==void 0&&await navigator.gpu.requestAdapter()!==null&&(qX=!0);class YHe{static isAvailable(){return qX}static getErrorMessage(){const e='Your browser does not support <a href="https://gpuweb.github.io/gpuweb/" style="color:blue">WebGPU</a> yet',t=document.createElement("div");return t.id="webgpumessage",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.maxWidth="400px",t.style.margin="5em auto 0",t.innerHTML=e,t}}const ZHe=YHe;class JHe{constructor(){this.nodes=null,this.animationLoop=null,this.requestId=null,this.isAnimating=!1,this.context=self}start(){if(this.isAnimating===!0||this.animationLoop===null||this.nodes===null)return;this.isAnimating=!0;const e=(t,i)=>{this.requestId=self.requestAnimationFrame(e),this.nodes.nodeFrame.update(),this.animationLoop(t,i)};this.requestId=self.requestAnimationFrame(e)}stop(){self.cancelAnimationFrame(this.requestId),this.isAnimating=!1}setAnimationLoop(e){this.animationLoop=e}setNodes(e){this.nodes=e}}const QHe=JHe;class X2{constructor(){this.weakMap=new WeakMap}get(e){if(Array.isArray(e)){let t=this.weakMap;for(let i=0;i<e.length-1;i++)if(t=t.get(e[i]),t===void 0)return;return t.get(e[e.length-1])}else return super.get(e)}set(e,t){if(Array.isArray(e)){let i=this.weakMap;for(let n=0;n<e.length-1;n++){const s=e[n];i.has(s)===!1&&i.set(s,new WeakMap),i=i.get(s)}return i.set(e[e.length-1],t)}else return super.set(e,t)}delete(e){if(Array.isArray(e)){let t=this.weakMap;for(let i=0;i<e.length-1;i++)if(t=t.get(e[i]),t===void 0)return!1;return t.delete(e[e.length-1])}else return super.delete(e)}dispose(){this.weakMap.clear()}}let eWe=0;class tWe{constructor(e,t,i,n,s,o,a,l,c){this._nodes=e,this._geometries=t,this.id=eWe++,this.renderer=i,this.object=n,this.material=s,this.scene=o,this.camera=a,this.lightsNode=l,this.context=c,this.geometry=n.geometry,this.version=s.version,this.attributes=null,this.pipeline=null,this.vertexBuffers=null,this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.material.addEventListener("dispose",this.onMaterialDispose)}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getIndex(){return this._geometries.getIndex(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,i=[],n=new Set;for(const s of e){const o=s.node&&s.node.attribute?s.node.attribute:t.getAttribute(s.name);i.push(o);const a=o.isInterleavedBufferAttribute?o.data:o;n.add(a)}return this.attributes=i,this.vertexBuffers=Array.from(n.values()),i}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getMaterialCacheKey(){const e=this.material;let t=e.customProgramCacheKey();for(const i in e){if(/^(is[A-Z])|^(visible|version|uuid|name|opacity|userData)$/.test(i))continue;let n=e[i];if(n!==null){const s=typeof n;s==="number"?n=n!==0?"1":"0":s==="object"&&(n="{}")}t+=n+","}return t}getNodesCacheKey(){return this._nodes.getCacheKey(this.scene,this.lightsNode)}getCacheKey(){return`{material:${this.getMaterialCacheKey()},nodes:${this.getNodesCacheKey()}`}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.onDispose()}}class rWe{constructor(e,t,i,n,s,o){this.renderer=e,this.nodes=t,this.geometries=i,this.pipelines=n,this.bindings=s,this.info=o,this.chainMaps={}}get(e,t,i,n,s,o,a){const l=this.getChainMap(a),c=[e,t,o,s];let u=l.get(c);return u===void 0?(u=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,i,n,s,o,a),l.set(c,u)):u.version!==t.version&&(u.version=t.version,u.initialCacheKey!==u.getCacheKey()&&(u.dispose(),u=this.get(e,t,i,n,s,o,a))),u}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new X2)}dispose(){this.chainMaps={}}createRenderObject(e,t,i,n,s,o,a,l,c,u){const d=this.getChainMap(u),h=new tWe(e,t,i,n,s,o,a,l,c);return h.onDispose=()=>{this.pipelines.delete(h),this.bindings.delete(h),this.nodes.delete(h),d.delete(h.getChainArray())},h}}const iWe=rWe;class nWe{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data.clear()}}const Pp=nWe,Ig={VERTEX:1,INDEX:2,STORAGE:4},pd=16,sWe=211,oWe=212;class aWe extends Pp{constructor(e){super(),this.backend=e}delete(e){super.delete(e)!==void 0&&this.backend.destroyAttribute(e)}update(e,t){const i=this.get(e);if(i.version===void 0)t===Ig.VERTEX?this.backend.createAttribute(e):t===Ig.INDEX?this.backend.createIndexAttribute(e):t===Ig.STORAGE&&this.backend.createStorageAttribute(e),i.version=this._getBufferAttribute(e).version;else{const n=this._getBufferAttribute(e);(i.version<n.version||n.usage===py)&&(this.backend.updateAttribute(e),i.version=n.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}const lWe=aWe;function cWe(r){for(let e=r.length-1;e>=0;--e)if(r[e]>=65535)return!0;return!1}function KX(r){return r.index!==null?r.index.version:r.attributes.position.version}function YX(r){const e=[],t=r.index,i=r.attributes.position;if(t!==null){const s=t.array;for(let o=0,a=s.length;o<a;o+=3){const l=s[o+0],c=s[o+1],u=s[o+2];e.push(l,c,c,u,u,l)}}else{const s=i.array;for(let o=0,a=s.length/3-1;o<a;o+=3){const l=o+0,c=o+1,u=o+2;e.push(l,c,c,u,u,l)}}const n=new(cWe(e)?t_:Ty)(e,1);return n.version=KX(r),n}class uWe extends Pp{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeFrame=new WeakMap}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,i=this.get(t);i.initialized=!0,this.info.memory.geometries++;const n=()=>{this.info.memory.geometries--;const s=t.index,o=e.getAttributes();s!==null&&this.attributes.delete(s);for(const l of o)this.attributes.delete(l);const a=this.wireframes.get(t);a!==void 0&&this.attributes.delete(a),t.removeEventListener("dispose",n)};t.addEventListener("dispose",n)}updateAttributes(e){const t=e.getAttributes();for(const n of t)this.updateAttribute(n,Ig.VERTEX);const i=this.getIndex(e);i!==null&&this.updateAttribute(i,Ig.INDEX)}updateAttribute(e,t){const i=this.info.render.frame;this.attributeFrame.get(e)!==i&&(this.attributes.update(e,t),this.attributeFrame.set(e,i))}getIndex(e){const{geometry:t,material:i}=e;let n=t.index;if(i.wireframe===!0){const s=this.wireframes;let o=s.get(t);o===void 0?(o=YX(t),s.set(t,o)):o.version!==KX(t)&&(this.attributes.delete(o),o=YX(t),s.set(t,o)),n=o}return n}}const dWe=uWe;class hWe{constructor(){this.autoReset=!0,this.render={frame:0,drawCalls:0,triangles:0,points:0,lines:0},this.memory={geometries:0,textures:0}}update(e,t,i){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=i*(t/3):e.isPoints?this.render.points+=i*t:e.isLineSegments?this.render.lines+=i*(t/2):e.isLine?this.render.lines+=i*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.render.frame=0,this.memory.geometries=0,this.memory.textures=0}}const pWe=hWe;class fWe{constructor(e){this.cacheKey=e,this.usedTimes=0}}const ZX=fWe;class mWe extends ZX{constructor(e,t,i){super(e),this.vertexProgram=t,this.fragmentProgram=i}}const gWe=mWe;class vWe extends ZX{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}const yWe=vWe;let bWe=0;class xWe{constructor(e,t){this.id=bWe++,this.code=e,this.stage=t,this.usedTimes=0}}const TO=xWe;class wWe extends Pp{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:i}=this,n=this.get(e);if(this._needsComputeUpdate(e)){const s=n.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const o=this.nodes.getForCompute(e);let a=this.programs.compute.get(o.computeShader);a===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),a=new TO(o.computeShader,"compute"),this.programs.compute.set(o.computeShader,a),i.createProgram(a));const l=this._getComputeCacheKey(e,a);let c=this.caches.get(l);c===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(e),c=this._getComputePipeline(e,a,l,t)),c.usedTimes++,a.usedTimes++,n.version=e.version,n.pipeline=c}return n.pipeline}getForRender(e){const{backend:t}=this,i=this.get(e);if(this._needsRenderUpdate(e)){const n=i.pipeline;n&&(n.usedTimes--,n.vertexProgram.usedTimes--,n.fragmentProgram.usedTimes--);const s=e.getNodeBuilderState();let o=this.programs.vertex.get(s.vertexShader);o===void 0&&(n&&n.vertexProgram.usedTimes===0&&this._releaseProgram(n.vertexProgram),o=new TO(s.vertexShader,"vertex"),this.programs.vertex.set(s.vertexShader,o),t.createProgram(o));let a=this.programs.fragment.get(s.fragmentShader);a===void 0&&(n&&n.fragmentProgram.usedTimes===0&&this._releaseProgram(n.fragmentProgram),a=new TO(s.fragmentShader,"fragment"),this.programs.fragment.set(s.fragmentShader,a),t.createProgram(a));const l=this._getRenderCacheKey(e,o,a);let c=this.caches.get(l);c===void 0?(n&&n.usedTimes===0&&this._releasePipeline(n),c=this._getRenderPipeline(e,o,a,l)):e.pipeline=c,c.usedTimes++,o.usedTimes++,a.usedTimes++,i.pipeline=c}return i.pipeline}delete(e){const t=this.get(e).pipeline;t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,i,n){i=i||this._getComputeCacheKey(e,t);let s=this.caches.get(i);return s===void 0&&(s=new yWe(i,t),this.caches.set(i,s),this.backend.createComputePipeline(s,n)),s}_getRenderPipeline(e,t,i,n){n=n||this._getRenderCacheKey(e,t,i);let s=this.caches.get(n);return s===void 0&&(s=new gWe(n,t,i),this.caches.set(n,s),e.pipeline=s,this.backend.createRenderPipeline(e)),s}_getComputeCacheKey(e,t){return"compute"+e.id+t.id}_getRenderCacheKey(e,t,i){const{material:n}=e;return[t.id,i.id,n.transparent,n.blending,n.premultipliedAlpha,n.blendSrc,n.blendDst,n.blendEquation,n.blendSrcAlpha,n.blendDstAlpha,n.blendEquationAlpha,n.colorWrite,n.depthWrite,n.depthTest,n.depthFunc,n.stencilWrite,n.stencilFunc,n.stencilFail,n.stencilZFail,n.stencilZPass,n.stencilFuncMask,n.stencilWriteMask,n.side,this.backend.getCacheKey(e)].join()}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,i=e.stage;this.programs[i].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){const t=this.get(e),i=e.material;let n=this.backend.needsUpdate(e);return(t.material!==i||t.materialVersion!==i.version||t.transparent!==i.transparent||t.blending!==i.blending||t.premultipliedAlpha!==i.premultipliedAlpha||t.blendSrc!==i.blendSrc||t.blendDst!==i.blendDst||t.blendEquation!==i.blendEquation||t.blendSrcAlpha!==i.blendSrcAlpha||t.blendDstAlpha!==i.blendDstAlpha||t.blendEquationAlpha!==i.blendEquationAlpha||t.colorWrite!==i.colorWrite||t.depthWrite!==i.depthWrite||t.depthTest!==i.depthTest||t.depthFunc!==i.depthFunc||t.stencilWrite!==i.stencilWrite||t.stencilFunc!==i.stencilFunc||t.stencilFail!==i.stencilFail||t.stencilZFail!==i.stencilZFail||t.stencilZPass!==i.stencilZPass||t.stencilFuncMask!==i.stencilFuncMask||t.stencilWriteMask!==i.stencilWriteMask||t.side!==i.side||t.alphaToCoverage!==i.alphaToCoverage)&&(t.material=i,t.materialVersion=i.version,t.transparent=i.transparent,t.blending=i.blending,t.premultipliedAlpha=i.premultipliedAlpha,t.blendSrc=i.blendSrc,t.blendDst=i.blendDst,t.blendEquation=i.blendEquation,t.blendSrcAlpha=i.blendSrcAlpha,t.blendDstAlpha=i.blendDstAlpha,t.blendEquationAlpha=i.blendEquationAlpha,t.colorWrite=i.colorWrite,t.depthWrite=i.depthWrite,t.depthTest=i.depthTest,t.depthFunc=i.depthFunc,t.stencilWrite=i.stencilWrite,t.stencilFunc=i.stencilFunc,t.stencilFail=i.stencilFail,t.stencilZFail=i.stencilZFail,t.stencilZPass=i.stencilZPass,t.stencilFuncMask=i.stencilFuncMask,t.stencilWriteMask=i.stencilWriteMask,t.side=i.side,t.alphaToCoverage=i.alphaToCoverage,n=!0),n||t.pipeline===void 0}}const _We=wWe;class SWe extends Pp{constructor(e,t,i,n,s,o){super(),this.backend=e,this.textures=i,this.pipelines=s,this.attributes=n,this.nodes=t,this.info=o,this.pipelines.bindings=this,this.updateMap=new WeakMap}getForRender(e){const t=e.getBindings(),i=this.get(e);return i.bindings!==t&&(i.bindings=t,this._init(t),this.backend.createBindings(t)),i.bindings}getForCompute(e){const t=this.get(e);if(t.bindings===void 0){const i=this.nodes.getForCompute(e).bindings;t.bindings=i,this._init(i),this.backend.createBindings(i)}return t.bindings}updateForCompute(e){this._update(e,this.getForCompute(e))}updateForRender(e){this._update(e,this.getForRender(e))}_init(e){for(const t of e)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isStorageBuffer){const i=t.attribute;this.attributes.update(i,Ig.STORAGE)}}_update(e,t){const{backend:i}=this,n=this.updateMap,s=this.info.render.frame;let o=!1;for(const a of t)n.get(a)!==s&&(a.isUniformBuffer?a.update()&&i.updateBinding(a):a.isSampledTexture&&(a.needsBindingsUpdate&&(o=!0),a.update()&&this.textures.updateTexture(a.texture)),n.set(a,s));if(o===!0){const a=this.pipelines.getForRender(e);this.backend.updateBindings(t,a)}}dispose(){super.dispose(),this.updateMap=new WeakMap}}const TWe=SWe;function MWe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.material.id!==e.material.id?r.material.id-e.material.id:r.z!==e.z?r.z-e.z:r.id-e.id}function EWe(r,e){return r.groupOrder!==e.groupOrder?r.groupOrder-e.groupOrder:r.renderOrder!==e.renderOrder?r.renderOrder-e.renderOrder:r.z!==e.z?e.z-r.z:r.id-e.id}class CWe{constructor(){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparent=[],this.lightsNode=new M3([]),this.lightsArray=[],this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparent.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,i,n,s,o){let a=this.renderItems[this.renderItemsIndex];return a===void 0?(a={id:e.id,object:e,geometry:t,material:i,groupOrder:n,renderOrder:e.renderOrder,z:s,group:o},this.renderItems[this.renderItemsIndex]=a):(a.id=e.id,a.object=e,a.geometry=t,a.material=i,a.groupOrder=n,a.renderOrder=e.renderOrder,a.z=s,a.group=o),this.renderItemsIndex++,a}push(e,t,i,n,s,o){const a=this.getNextRenderItem(e,t,i,n,s,o);e.occlusionTest===!0&&this.occlusionQueryCount++,(i.transparent===!0?this.transparent:this.opaque).push(a)}unshift(e,t,i,n,s,o){const a=this.getNextRenderItem(e,t,i,n,s,o);(i.transparent===!0?this.transparent:this.opaque).unshift(a)}pushLight(e){this.lightsArray.push(e)}getLightsNode(){return this.lightsNode.fromLights(this.lightsArray)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||MWe),this.transparent.length>1&&this.transparent.sort(t||EWe)}finish(){this.lightsNode.fromLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const i=this.renderItems[e];if(i.id===null)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.groupOrder=null,i.renderOrder=null,i.z=null,i.group=null}}}const AWe=CWe;class NWe{constructor(){this.lists=new X2}get(e,t){const i=this.lists,n=[e,t];let s=i.get(n);return s===void 0&&(s=new AWe,i.set(n,s)),s}dispose(){this.lists=new X2}}const RWe=NWe;let kWe=0;class LWe{constructor(){this.id=kWe++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!0,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new jt,this.scissor=!1,this.scissorValue=new jt,this.texture=null,this.depthTexture=null,this.activeCubeFace=0,this.sampleCount=1,this.width=0,this.height=0}}const OWe=LWe;class PWe{constructor(){this.chainMaps={}}get(e,t,i=null){const n=[e,t];let s;if(i===null)s="default";else{let l,c;i.isWebGLMultipleRenderTargets?(l=i.texture[0].format,c=i.texture.length):(l=i.texture.format,c=1),s=`${c}:${l}:${i.samples}:${i.depthBuffer}:${i.stencilBuffer}`}const o=this.getChainMap(s);let a=o.get(n);return a===void 0&&(a=new OWe,o.set(n,a)),i!==null&&(a.sampleCount=i.samples===0?1:i.samples),a}getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new X2)}dispose(){this.chainMaps={}}}const IWe=PWe,DWe=new oe;class UWe extends Pp{constructor(e,t){super(),this.backend=e,this.info=t}updateRenderTarget(e,t=0){const i=this.get(e),n=e.samples===0?1:e.samples,s=i.depthTextureMips||(i.depthTextureMips={});let o,a;e.isWebGLMultipleRenderTargets?(a=e.texture,o=e.texture[0]):(a=[e.texture],o=e.texture);const l=this.getSize(o),c=l.width>>t,u=l.height>>t;let d=e.depthTexture||s[t],h=!1;d===void 0&&(d=new Hh,d.format=so,d.type=Ao,d.image.width=c,d.image.height=u,s[t]=d),(i.width!==l.width||l.height!==i.height)&&(h=!0,d.needsUpdate=!0,d.image.width=c,d.image.height=u),i.width=l.width,i.height=l.height,i.textures=a,i.depthTexture=d,i.sampleCount!==n&&(h=!0,d.needsUpdate=!0,i.sampleCount=n);const p={sampleCount:n};for(let f=0;f<a.length;f++){const m=a[f];h&&(m.needsUpdate=!0),this.updateTexture(m,p)}if(this.updateTexture(d,p),i.initialized!==!0){i.initialized=!0;const f=()=>{if(e.removeEventListener("dispose",f),a!==void 0)for(let m=0;m<a.length;m++)this._destroyTexture(a[m]);else this._destroyTexture(o);this._destroyTexture(d)};e.addEventListener("dispose",f)}}updateTexture(e,t={}){const i=this.get(e);if(i.initialized===!0&&i.version===e.version)return;const n=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;n&&i.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e));const{width:o,height:a,depth:l}=this.getSize(e);if(t.width=o,t.height=a,t.depth=l,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,o,a):1,n||e.isStorageTexture===!0)s.createSampler(e),s.createTexture(e,t);else if(i.initialized!==!0&&s.createSampler(e),e.version>0){const c=e.image;if(c===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(c.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const u=[];for(const d of e.images)u.push(this._getUploadImage(d));t.images=u}else t.image=this._getUploadImage(c);(i.isDefaultTexture===void 0||i.isDefaultTexture===!0)&&(s.createTexture(e,t),i.isDefaultTexture=!1),s.updateTexture(e,t),t.needsMipmaps&&s.generateMipmaps(e)}}else s.createDefaultTexture(e),i.isDefaultTexture=!0;if(i.initialized!==!0){i.initialized=!0,this.info.memory.textures++;const c=()=>{e.removeEventListener("dispose",c),this._destroyTexture(e),this.info.memory.textures--};e.addEventListener("dispose",c)}i.version=e.version}getSize(e,t=DWe){let i=e.images?e.images[0]:e.image;return i?(i.image!==void 0&&(i=i.image),t.width=i.width,t.height=i.height,t.depth=e.isCubeTexture?6:i.depth||1):t.width=t.height=t.depth=1,t}getMipLevels(e,t,i){let n;return e.isCompressedTexture?n=e.mipmaps.length:n=Math.floor(Math.log2(Math.max(t,i)))+1,n}needsMipmaps(e){return this.isEnvironmentTexture(e)?!0:e.isCompressedTexture!==!0&&e.minFilter!==Mr&&e.minFilter!==Or}isEnvironmentTexture(e){const t=e.mapping;return t===ja||t===Rl||t===Co||t===la}_getUploadImage(e){return this._isHTMLImage(e)?this._imageToCanvas(e):e}_imageToCanvas(e){const{width:t,height:i}=e,n=new OffscreenCanvas(t,i);return n.getContext("2d").drawImage(e,0,0,t,i),n}_isHTMLImage(e){return typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement}_destroyTexture(e){this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e)}}const FWe=UWe;let Hb;const Ip=new at;class BWe extends Pp{constructor(e,t){super(),this.renderer=e,this.nodes=t,this.backgroundMesh=null,this.backgroundMeshNode=null}update(e,t,i){const n=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let o=!1;if(s===null)Ip.copyLinearToSRGB(n._clearColor),Hb=n._clearAlpha;else if(s.isColor===!0)Ip.copyLinearToSRGB(s),Hb=1,o=!0;else if(s.isNode===!0){const a=this.get(e),l=s;Ip.copy(n._clearColor),Hb=n._clearAlpha;let c=this.backgroundMesh;if(c===null){this.backgroundMeshNode=ya(l,{getUVNode:()=>sg,getSamplerLevelNode:()=>p9}).mul(f9);let d=p3();d=d.setZ(d.w);const h=new Zn;h.outputNode=this.backgroundMeshNode,h.side=Oi,h.depthTest=!1,h.depthWrite=!1,h.fog=!1,h.vertexNode=d,this.backgroundMesh=c=new mt(new Jh(1,32,32),h),c.frustumCulled=!1,c.onBeforeRender=function(p,f,m){this.matrixWorld.copyPosition(m.matrixWorld)}}const u=l.getCacheKey();a.backgroundCacheKey!==u&&(this.backgroundMeshNode.node=l,c.material.needsUpdate=!0,a.backgroundCacheKey=u),t.unshift(c,c.geometry,c.material,0,0,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);if(n.autoClear===!0||o===!0){Ip.multiplyScalar(Hb);const a=i.clearColorValue;a.r=Ip.r,a.g=Ip.g,a.b=Ip.b,a.a=Hb,i.depthClearValue=n._clearDepth,i.stencilClearValue=n._clearStencil,i.clearColor=n.autoClearColor===!0,i.clearDepth=n.autoClearDepth===!0,i.clearStencil=n.autoClearStencil===!0}else i.clearColor=!1,i.clearDepth=!1,i.clearStencil=!1}}const zWe=BWe;class VWe{constructor(e,t,i,n,s,o,a){this.vertexShader=e,this.fragmentShader=t,this.computeShader=i,this.nodeAttributes=n,this.bindings=s,this.updateNodes=o,this.updateBeforeNodes=a,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)e.push(t.clone());return e}}const GWe=VWe;class jWe extends Pp{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new lb,this.nodeBuilderCache=new Map}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let i=t.nodeBuilderState;if(i===void 0){const{nodeBuilderCache:n}=this,s=this.getForRenderCacheKey(e);if(i=n.get(s),i===void 0){const o=this.backend.createNodeBuilder(e.object,this.renderer,e.scene);o.material=e.material,o.context.material=e.material,o.lightsNode=e.lightsNode,o.environmentNode=this.getEnvironmentNode(e.scene),o.fogNode=this.getFogNode(e.scene),o.toneMappingNode=this.getToneMappingNode(),o.build(),i=this._createNodeBuilderState(o),n.set(s,i)}i.usedTimes++,t.nodeBuilderState=i}return i}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let i=t.nodeBuilderState;if(i===void 0){const n=this.backend.createNodeBuilder(e,this.renderer);n.build(),i=this._createNodeBuilderState(n),t.nodeBuilderState=n}return i}_createNodeBuilderState(e){return new GWe(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes)}getEnvironmentNode(e){return e.environmentNode||this.get(e).environmentNode||null}getBackgroundNode(e){return e.backgroundNode||this.get(e).backgroundNode||null}getFogNode(e){return e.fogNode||this.get(e).fogNode||null}getToneMappingNode(){return this.isToneMappingState===!1?null:this.renderer.toneMappingNode||this.get(this.renderer).toneMappingNode||null}getCacheKey(e,t){const i=this.getEnvironmentNode(e),n=this.getFogNode(e),s=this.getToneMappingNode(),o=[];return t&&o.push("lightsNode:"+t.getCacheKey()),i&&o.push("environmentNode:"+i.getCacheKey()),n&&o.push("fogNode:"+n.getCacheKey()),s&&o.push("toneMappingNode:"+s.getCacheKey()),"{"+o.join(",")+"}"}updateScene(e){this.updateEnvironment(e),this.updateFog(e),this.updateBackground(e),this.updateToneMapping()}get isToneMappingState(){const e=this.renderer.getRenderTarget();return!(e&&e.isCubeRenderTarget)}updateToneMapping(){const e=this.renderer,t=this.get(e),i=e.toneMapping;if(this.isToneMappingState&&i!==ro){if(t.toneMapping!==i){const n=t.rendererToneMappingNode||C9(i,Fs("toneMappingExposure","float",e));n.toneMapping=i,t.rendererToneMappingNode=n,t.toneMappingNode=n,t.toneMapping=i}}else delete t.toneMappingNode,delete t.toneMapping}updateBackground(e){const t=this.get(e),i=e.background;if(i){if(t.background!==i){let n=null;if(i.isCubeTexture===!0)n=lg(i,sg);else if(i.isTexture===!0){let s=null;i.mapping===ja||i.mapping===Rl?s=ab():s=A9,n=Dn(i,s).setUpdateMatrix(!0)}else i.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",i);t.backgroundNode=n,t.background=i}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}updateFog(e){const t=this.get(e),i=e.fog;if(i){if(t.fog!==i){let n=null;i.isFogExp2?n=Ak(Fs("color","color",i),Fs("density","float",i)):i.isFog?n=Ek(Fs("color","color",i),Fs("near","float",i),Fs("far","float",i)):console.error("WebGPUNodes: Unsupported fog configuration.",i),t.fogNode=n,t.fog=i}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),i=e.environment;if(i){if(t.environment!==i){let n=null;i.isCubeTexture===!0?n=lg(i):i.isTexture===!0?n=Dn(i):console.error("Nodes: Unsupported environment configuration.",i),t.environmentNode=n,t.environment=i}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e){const t=this.nodeFrame;return t.scene=e.scene,t.object=e.object,t.camera=e.camera,t.renderer=e.renderer,t.material=e.material,t}updateBefore(e){const t=this.getNodeFrame(e),i=e.getNodeBuilderState();for(const n of i.updateBeforeNodes)t.updateBeforeNode(n)}updateForCompute(){}updateForRender(e){const t=this.getNodeFrame(e),i=e.getNodeBuilderState();for(const n of i.updateNodes)t.updateNode(n)}dispose(){super.dispose(),this.nodeFrame=new lb,this.nodeBuilderCache=new Map}}const HWe=jWe,WWe=new qa,MO=new qe,EO=new jt,CO=new Ey,q2=new St,Wb=new oe;class $We{constructor(e){this.isRenderer=!0,this.domElement=e.getDomElement(),this.backend=e,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.outputColorSpace=Lt,this.toneMapping=ro,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=!0,this.stencil=!0,this.info=new pWe,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new jt(0,0,this._width,this._height),this._scissor=new jt(0,0,this._width,this._height),this._scissorTest=!1,this._properties=null,this._attributes=null,this._geometries=null,this._nodes=null,this._bindings=null,this._objects=null,this._pipelines=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._animation=new QHe,this._currentRenderContext=null,this._lastRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._clearAlpha=1,this._clearColor=new at(0),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._initialized=!1,this._initPromise=null,this.shadowMap={enabled:!1,type:null},this.xr={enabled:!1}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{const i=this.backend;try{await i.init(this)}catch(n){t(n);return}this._nodes=new HWe(this,i),this._attributes=new lWe(i),this._background=new zWe(this,this._nodes),this._geometries=new dWe(this._attributes,this.info),this._textures=new FWe(i,this.info),this._pipelines=new _We(i,this._nodes),this._bindings=new TWe(i,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new iWe(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new RWe,this._renderContexts=new IWe,this._animation.setNodes(this._nodes),this._animation.start(),this._initialized=!0,e()}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compile(){console.warn("THREE.Renderer: .compile() is not implemented yet.")}async render(e,t){this._initialized===!1&&await this.init();const i=this._nodes.nodeFrame,n=i.renderId,s=this._currentRenderContext,o=e.isScene===!0?e:WWe,a=this._renderTarget,l=this._renderContexts.get(e,t,a),c=this._activeCubeFace,u=this._activeMipmapLevel;this._currentRenderContext=l,i.renderId++;const d=this.coordinateSystem;t.coordinateSystem!==d&&(t.coordinateSystem=d,t.updateProjectionMatrix()),this._animation.isAnimating===!1&&i.update(),e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld(),this.info.autoReset===!0&&this.info.reset(),this.info.render.frame++;let h=this._viewport,p=this._scissor,f=this._pixelRatio;a!==null&&(h=a.viewport,p=a.scissor,f=1),this.getDrawingBufferSize(MO),EO.set(0,0,MO.width,MO.height);const m=h.minDepth===void 0?0:h.minDepth,g=h.maxDepth===void 0?1:h.maxDepth;l.viewportValue.copy(h).multiplyScalar(f).floor(),l.viewportValue.width>>=u,l.viewportValue.height>>=u,l.viewportValue.minDepth=m,l.viewportValue.maxDepth=g,l.viewport=l.viewportValue.equals(EO)===!1,l.scissorValue.copy(p).multiplyScalar(f).floor(),l.scissor=this._scissorTest&&l.scissorValue.equals(EO)===!1,l.scissorValue.width>>=u,l.scissorValue.height>>=u,l.depth=this.depth,l.stencil=this.stencil,o.onBeforeRender(this,e,t,a),q2.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),CO.setFromProjectionMatrix(q2,d);const v=this._renderLists.get(e,t);if(v.begin(),this._projectObject(e,t,0,v),v.finish(),this.sortObjects===!0&&v.sort(this._opaqueSort,this._transparentSort),a!==null){this._textures.updateRenderTarget(a,u);const _=this._textures.get(a);l.textures=_.textures,l.depthTexture=_.depthTexture,l.width=_.width,l.height=_.height}else l.textures=null,l.depthTexture=null,l.width=this.domElement.width,l.height=this.domElement.height;l.width>>=u,l.height>>=u,l.activeCubeFace=c,l.activeMipmapLevel=u,l.occlusionQueryCount=v.occlusionQueryCount,this._nodes.updateScene(o),this._background.update(o,v,l),this.backend.beginRender(l);const x=v.opaque,b=v.transparent,w=v.lightsNode;x.length>0&&this._renderObjects(x,t,o,w),b.length>0&&this._renderObjects(b,t,o,w),this.backend.finishRender(l),i.renderId=n,this._currentRenderContext=s,this._lastRenderContext=l,o.onAfterRender(this,e,t,a)}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}setAnimationLoop(e){this._initialized===!1&&this.init();const t=this._animation;t.setAnimationLoop(e),e===null?t.stop():t.start()}getArrayBuffer(e){return console.warn("THREE.Renderer: getArrayBuffer() is deprecated. Use getArrayBufferAsync() instead."),this.getArrayBufferAsync(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this._context}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio=e,this.setSize(this._width,this._height,!1)}setDrawingBufferSize(e,t,i){this._width=e,this._height=t,this._pixelRatio=i,this.domElement.width=Math.floor(e*i),this.domElement.height=Math.floor(t*i),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}setSize(e,t,i=!0){this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),i===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize()}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,i,n){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,t,i,n)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,i,n,s=0,o=1){const a=this._viewport;e.isVector4?a.copy(e):a.set(e,t,i,n),a.minDepth=s,a.maxDepth=o}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearAlpha=t}getClearAlpha(){return this._clearAlpha}setClearAlpha(e){this._clearAlpha=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext||this._lastRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,i=!0){const n=this._currentRenderContext||this._lastRenderContext;n&&this.backend.clear(n,e,t,i)}clearColor(){this.clear(!0,!1,!1)}clearDepth(){this.clear(!1,!0,!1)}clearStencil(){this.clear(!1,!1,!0)}dispose(){this.info.dispose(),this._objects.dispose(),this._properties.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,i=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=i}getRenderTarget(){return this._renderTarget}async compute(e){this._initialized===!1&&await this.init();const t=this.backend,i=this._pipelines,n=this._bindings,s=this._nodes,o=Array.isArray(e)?e:[e];t.beginCompute(e);for(const a of o){if(i.has(a)===!1){const u=()=>{a.removeEventListener("dispose",u),i.delete(a),n.delete(a),s.delete(a)};a.addEventListener("dispose",u),a.onInit({renderer:this})}s.updateForCompute(a),n.updateForCompute(a);const l=n.getForCompute(a),c=i.getForCompute(a,l);t.compute(e,a,l,c)}t.finishCompute(e)}hasFeature(e){return this.backend.hasFeature(e)}copyFramebufferToTexture(e){const t=this._currentRenderContext||this._lastRenderContext;this._textures.updateTexture(e),this.backend.copyFramebufferToTexture(e,t)}readRenderTargetPixelsAsync(e,t,i,n,s){return this.backend.copyTextureToBuffer(e.texture,t,i,n,s)}_projectObject(e,t,i,n){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)i=e.renderOrder;else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)n.pushLight(e);else if(e.isSprite){if(!e.frustumCulled||CO.intersectsSprite(e)){this.sortObjects===!0&&Wb.setFromMatrixPosition(e.matrixWorld).applyMatrix4(q2);const o=e.geometry,a=e.material;a.visible&&n.push(e,o,a,i,Wb.z,null)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||CO.intersectsObject(e))){const o=e.geometry,a=e.material;if(this.sortObjects===!0&&(o.boundingSphere===null&&o.computeBoundingSphere(),Wb.copy(o.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(q2)),Array.isArray(a)){const l=o.groups;for(let c=0,u=l.length;c<u;c++){const d=l[c],h=a[d.materialIndex];h&&h.visible&&n.push(e,o,h,i,Wb.z,d)}}else a.visible&&n.push(e,o,a,i,Wb.z,null)}}const s=e.children;for(let o=0,a=s.length;o<a;o++)this._projectObject(s[o],t,i,n)}_renderObjects(e,t,i,n){for(let s=0,o=e.length;s<o;s++){const a=e[s],{object:l,geometry:c,material:u,group:d}=a;if(t.isArrayCamera){const h=t.cameras;for(let p=0,f=h.length;p<f;p++){const m=h[p];if(l.layers.test(m.layers)){const g=m.viewport,v=g.minDepth===void 0?0:g.minDepth,x=g.maxDepth===void 0?1:g.maxDepth,b=this._currentRenderContext.viewportValue;b.copy(g).multiplyScalar(this._pixelRatio).floor(),b.minDepth=v,b.maxDepth=x,this.backend.updateViewport(this._currentRenderContext),this._renderObject(l,i,m,c,u,d,n)}}}else this._renderObject(l,i,t,c,u,d,n)}}_renderObject(e,t,i,n,s,o,a){s=t.overrideMaterial!==null?t.overrideMaterial:s,e.onBeforeRender(this,t,i,n,s,o),s.onBeforeRender(this,t,i,n,s,o),s.transparent===!0&&s.side===Wi&&s.forceSinglePass===!1?(s.side=Oi,this._renderObjectDirect(e,s,t,i,a,"backSide"),s.side=eo,this._renderObjectDirect(e,s,t,i,a),s.side=Wi):this._renderObjectDirect(e,s,t,i,a),e.onAfterRender(this,t,i,n,s,o)}_renderObjectDirect(e,t,i,n,s,o){const a=this._objects.get(e,t,i,n,s,this._currentRenderContext,o);this._nodes.updateBefore(a),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),this._nodes.updateForRender(a),this._geometries.updateForRender(a),this._bindings.updateForRender(a),this._pipelines.updateForRender(a),this.backend.draw(a,this.info)}}const XWe=$We;class qWe{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}const AO=qWe;function JX(r){return r+(pd-r%pd)%pd}function KWe(r,e=4){const t=QX(e)*r;return JX(t)}function QX(r){return r+(4-r%4)%4}class YWe extends AO{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){return JX(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}const eq=YWe;class ZWe extends eq{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}const tq=ZWe;class JWe extends tq{constructor(e){super(e),this.isUniformsGroup=!0,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){let e=0;for(let t=0,i=this.uniforms.length;t<i;t++){const n=this.uniforms[t],s=e%pd,o=pd-s;s!==0&&o-n.boundary<0?e+=pd-s:s%n.boundary!==0&&(e+=s%n.boundary),n.offset=e/this.bytesPerElement,e+=n.itemSize*this.bytesPerElement}return Math.ceil(e/pd)*pd}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isFloatUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const i=this.buffer,n=e.getValue(),s=e.offset;return i[s]!==n&&(i[s]=n,t=!0),t}updateVector2(e){let t=!1;const i=this.buffer,n=e.getValue(),s=e.offset;return(i[s+0]!==n.x||i[s+1]!==n.y)&&(i[s+0]=n.x,i[s+1]=n.y,t=!0),t}updateVector3(e){let t=!1;const i=this.buffer,n=e.getValue(),s=e.offset;return(i[s+0]!==n.x||i[s+1]!==n.y||i[s+2]!==n.z)&&(i[s+0]=n.x,i[s+1]=n.y,i[s+2]=n.z,t=!0),t}updateVector4(e){let t=!1;const i=this.buffer,n=e.getValue(),s=e.offset;return(i[s+0]!==n.x||i[s+1]!==n.y||i[s+2]!==n.z||i[s+4]!==n.w)&&(i[s+0]=n.x,i[s+1]=n.y,i[s+2]=n.z,i[s+3]=n.w,t=!0),t}updateColor(e){let t=!1;const i=this.buffer,n=e.getValue(),s=e.offset;return(i[s+0]!==n.r||i[s+1]!==n.g||i[s+2]!==n.b)&&(i[s+0]=n.r,i[s+1]=n.g,i[s+2]=n.b,t=!0),t}updateMatrix3(e){let t=!1;const i=this.buffer,n=e.getValue().elements,s=e.offset;return(i[s+0]!==n[0]||i[s+1]!==n[1]||i[s+2]!==n[2]||i[s+4]!==n[3]||i[s+5]!==n[4]||i[s+6]!==n[5]||i[s+8]!==n[6]||i[s+9]!==n[7]||i[s+10]!==n[8])&&(i[s+0]=n[0],i[s+1]=n[1],i[s+2]=n[2],i[s+4]=n[3],i[s+5]=n[4],i[s+6]=n[5],i[s+8]=n[6],i[s+9]=n[7],i[s+10]=n[8],t=!0),t}updateMatrix4(e){let t=!1;const i=this.buffer,n=e.getValue().elements,s=e.offset;return QWe(i,n,s)===!1&&(i.set(n,s),t=!0),t}}function QWe(r,e,t){for(let i=0,n=e.length;i<n;i++)if(r[t+i]!==e[i])return!1;return!0}const rq=JWe;let e9e=0;class t9e extends AO{constructor(e,t){super(e),this.id=e9e++,this.texture=t,this.version=t?t.version:0,this.store=!1,this.isSampledTexture=!0}get needsBindingsUpdate(){const{texture:e,version:t}=this;return e.isVideoTexture?!0:t!==e.version}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}}class NO extends t9e{constructor(e,t){super(e,t?t.value:null),this.textureNode=t}get needsBindingsUpdate(){return this.textureNode.value!==this.texture||super.needsBindingsUpdate}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class iq extends NO{constructor(e,t){super(e,t),this.isSampledCubeTexture=!0}}const r9e={[fr.ATAN2]:"atan",textureDimensions:"textureSize"},i9e={low:"lowp",medium:"mediump",high:"highp"};class n9e extends IS{constructor(e,t,i=null){super(e,t,new Kk,i),this.uniformsGroup={}}getMethod(e){return r9e[e]||e}getPropertyName(e,t){return e.isOutputStructVar?"":super.getPropertyName(e,t)}getTexture(e,t,i){return e.isTextureCube?`textureCube( ${t}, ${i} )`:e.isDepthTexture?`texture( ${t}, ${i} ).x`:`texture( ${t}, ${i} )`}getTextureLevel(e,t,i,n){return`textureLod( ${t}, ${i}, ${n} )`}getTextureCompare(e,t,i,n,s=this.shaderStage){if(s==="fragment")return`texture( ${t}, vec3( ${i}, ${n} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${s} shader.`)}getVars(e){const t=[],i=this.vars[e];for(const n of i)n.isOutputStructVar||t.push(`${this.getVar(n.type,n.name)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],i=[],n=[];for(const o of t){let a=null,l=!1;o.type==="texture"?o.node.value.compareFunction?a=`sampler2DShadow ${o.name};`:a=`sampler2D ${o.name};`:o.type==="cubeTexture"?a=`samplerCube ${o.name};`:(a=`${this.getVectorType(o.type)} ${o.name};`,l=!0);const c=o.node.precision;c!==null&&(a=i9e[c]+" "+a),l?(a="	"+a,n.push(a)):(a="uniform "+a,i.push(a))}let s="";return n.length>0&&(s+=this._getGLSLUniformStruct(e+"NodeUniforms",n.join(`
`))+`
`),s+=i.join(`
`),s}getAttributes(e){let t="";if(e==="vertex"){const i=this.attributes;let n=0;for(const s of i)t+=`layout( location = ${n++} ) in ${s.type} ${s.name};
`}return t}getStructMembers(e){const t=[],i=e.getMemberTypes();for(let n=0;n<i.length;n++){const s=i[n];t.push(`layout( location = ${n} ) out ${s} m${n};`)}return t.join(`
`)}getStructs(e){const t=[],i=this.structs[e];if(i.length===0)return`layout( location = 0 ) out vec4 fragColor;
`;for(let n=0,s=i.length;n<s;n++){const o=i[n];let a=`
`;a+=this.getStructMembers(o),a+=`
`,t.push(a)}return t.join(`

`)}getVaryings(e){let t="";const i=this.varyings;if(e==="vertex")for(const n of i)t+=`${n.needsInterpolation?"out":"/*out*/"} ${n.type} ${n.name};
`;else if(e==="fragment")for(const n of i)n.needsInterpolation&&(t+=`in ${n.type} ${n.name};
`);return t}getVertexIndex(){return"gl_VertexID"}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord"}isFlipY(){return!0}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// precision
precision highp float;
precision highp int;

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// precision
precision highp float;
precision highp int;
precision lowp sampler2DShadow;

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};for(const t in e){let i=`// code

`;i+=this.flowCode[t];const n=this.flowNodes[t],s=n[n.length-1];for(const a of n){const l=this.getFlowData(a),c=a.name;c&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${c}
	`),i+=`${l.code}
	`,a===s&&t!=="compute"&&(i+=`// result
	`,t==="vertex"?(i+="gl_Position = ",i+=`${l.result};`):t==="fragment"&&(a.outputNode.isOutputStructNode||(i+="fragColor = ",i+=`${l.result};`)))}const o=e[t];o.uniforms=this.getUniforms(t),o.attributes=this.getAttributes(t),o.varyings=this.getVaryings(t),o.vars=this.getVars(t),o.structs=this.getStructs(t),o.codes=this.getCodes(t),o.flow=i}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):console.warn("GLSLNodeBuilder: compute shaders are not supported.")}getUniformFromNode(e,t,i,n=null){const s=super.getUniformFromNode(e,t,i,n),o=this.getDataFromNode(e,i);let a=o.uniformGPU;if(a===void 0){if(t==="texture")a=new NO(s.name,s.node),this.bindings[i].push(a);else if(t==="cubeTexture")a=new iq(s.name,s.node),this.bindings[i].push(a);else{let l=this.uniformsGroup[i];l===void 0&&(l=new rq(i+"NodeUniforms"),this.uniformsGroup[i]=l,this.bindings[i].push(l)),a=this.getNodeUniform(s,t),l.addUniform(a)}o.uniformGPU=a}return s}build(){const{object:e,material:t}=this;return t!==null?Zn.fromMaterial(t).build(this):this.addFlow("compute",e),super.build()}}const s9e=n9e;let RO=null,kO=null;class o9e{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null}async init(e){this.renderer=e}begin(e){}finish(e){}draw(e,t){}createProgram(e){}destroyProgram(e){}createBindings(e){}updateBindings(e){}createRenderPipeline(e){}createComputePipeline(e,t){}destroyPipeline(e){}needsUpdate(e){}getCacheKey(e){}createNodeBuilder(e){}createSampler(e){}createDefaultTexture(e){}createTexture(e){}copyTextureToBuffer(e,t,i,n,s){}createAttribute(e){}createIndexAttribute(e){}updateAttribute(e){}destroyAttribute(e){}updateSize(){}hasFeature(e){}getInstanceCount(e){const{object:t,geometry:i}=e;return i.isInstancedBufferGeometry?i.instanceCount:t.isInstancedMesh?t.count:1}getDrawingBufferSize(){return RO=RO||new qe,this.renderer.getDrawingBufferSize(RO)}getScissor(){return kO=kO||new jt,this.renderer.getScissor(kO)}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:tN(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${Xf}`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){this.data.delete(e)}}const nq=o9e;class a9e{constructor(e){this.backend=e}createAttribute(e,t){const i=this.backend,{gl:n}=i,s=e.array,o=e.usage||n.STATIC_DRAW,a=n.createBuffer();n.bindBuffer(t,a),n.bufferData(t,s,o),n.bindBuffer(t,null);let l;if(s instanceof Float32Array)l=n.FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?l=n.HALF_FLOAT:l=n.UNSIGNED_SHORT;else if(s instanceof Int16Array)l=n.SHORT;else if(s instanceof Uint32Array)l=n.UNSIGNED_INT;else if(s instanceof Int32Array)l=n.INT;else if(s instanceof Int8Array)l=n.BYTE;else if(s instanceof Uint8Array)l=n.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)l=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);i.set(e,{bufferGPU:a,type:l,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version})}}const l9e=a9e;let sq=!1,LO,$b;class c9e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=null,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,sq===!1&&(this._init(this.gl),sq=!0)}_init(e){LO={[to]:e.FUNC_ADD,[_0]:e.FUNC_SUBTRACT,[S0]:e.FUNC_REVERSE_SUBTRACT},$b={[E0]:e.ZERO,[C0]:e.ONE,[A0]:e.SRC_COLOR,[qf]:e.SRC_ALPHA,[P0]:e.SRC_ALPHA_SATURATE,[L0]:e.DST_COLOR,[R0]:e.DST_ALPHA,[N0]:e.ONE_MINUS_SRC_COLOR,[Kf]:e.ONE_MINUS_SRC_ALPHA,[O0]:e.ONE_MINUS_DST_COLOR,[k0]:e.ONE_MINUS_DST_ALPHA}}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==CA?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===Aw?t.cullFace(t.BACK):e===AA?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setBlending(e,t,i,n,s,o,a,l){const{gl:c}=this;if(e===Xn){this.currentBlendingEnabled===!0&&(this.disable(c.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(c.BLEND),this.currentBlendingEnabled=!0),e!==w0){if(e!==this.currentBlending||l!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==to||this.currentBlendEquationAlpha!==to)&&(c.blendEquation(c.FUNC_ADD),this.currentBlendEquation=to,this.currentBlendEquationAlpha=to),l)switch(e){case Eo:c.blendFuncSeparate(c.ONE,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case Nl:c.blendFunc(c.ONE,c.ONE);break;case Cu:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case Au:c.blendFuncSeparate(c.ZERO,c.SRC_COLOR,c.ZERO,c.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case Eo:c.blendFuncSeparate(c.SRC_ALPHA,c.ONE_MINUS_SRC_ALPHA,c.ONE,c.ONE_MINUS_SRC_ALPHA);break;case Nl:c.blendFunc(c.SRC_ALPHA,c.ONE);break;case Cu:c.blendFuncSeparate(c.ZERO,c.ONE_MINUS_SRC_COLOR,c.ZERO,c.ONE);break;case Au:c.blendFunc(c.ZERO,c.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=l}return}s=s||t,o=o||i,a=a||n,(t!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(c.blendEquationSeparate(LO[t],LO[s]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=s),(i!==this.currentBlendSrc||n!==this.currentBlendDst||o!==this.currentBlendSrcAlpha||a!==this.currentBlendDstAlpha)&&(c.blendFuncSeparate($b[i],$b[n],$b[o],$b[a]),this.currentBlendSrc=i,this.currentBlendDst=n,this.currentBlendSrcAlpha=o,this.currentBlendDstAlpha=a),this.currentBlending=e,this.currentPremultipledAlpha=!1}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case I0:t.depthFunc(t.NEVER);break;case D0:t.depthFunc(t.ALWAYS);break;case U0:t.depthFunc(t.LESS);break;case uh:t.depthFunc(t.LEQUAL);break;case F0:t.depthFunc(t.EQUAL);break;case B0:t.depthFunc(t.GEQUAL);break;case z0:t.depthFunc(t.GREATER);break;case V0:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,i){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==i)&&(this.gl.stencilFunc(e,t,i),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=i)}setStencilOp(e,t,i){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==i)&&(this.gl.stencilOp(e,t,i),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=i)}setMaterial(e,t){const{gl:i}=this;e.side===Wi?this.disable(i.CULL_FACE):this.enable(i.CULL_FACE);let n=e.side===Oi;t&&(n=!n),this.setFlipSided(n),e.blending===Eo&&e.transparent===!1?this.setBlending(Xn):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setDepthMask(e.colorWrite);const s=e.stencilWrite;this.setStencilTest(s),s&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0?this.enable(i.SAMPLE_ALPHA_TO_COVERAGE):this.disable(i.SAMPLE_ALPHA_TO_COVERAGE)}setPolygonOffset(e,t,i){const{gl:n}=this;e?(this.enable(n.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==i)&&(n.polygonOffset(t,i),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=i)):this.disable(n.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}}const u9e=c9e;class d9e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=kn){const{gl:i,extensions:n}=this;let s;if(e===io)return i.UNSIGNED_BYTE;if(e===$0)return i.UNSIGNED_SHORT_4_4_4_4;if(e===X0)return i.UNSIGNED_SHORT_5_5_5_1;if(e===Rw)return i.BYTE;if(e===kw)return i.SHORT;if(e===ph)return i.UNSIGNED_SHORT;if(e===W0)return i.INT;if(e===no)return i.UNSIGNED_INT;if(e===mi)return i.FLOAT;if(e===gi)return i.HALF_FLOAT;if(e===q0)return i.ALPHA;if(e===Rn)return i.RGBA;if(e===K0)return i.LUMINANCE;if(e===Y0)return i.LUMINANCE_ALPHA;if(e===hs)return i.DEPTH_COMPONENT;if(e===so)return i.DEPTH_STENCIL;if(e===Jf)return i.RED;if(e===Qf)return i.RED_INTEGER;if(e===em)return i.RG;if(e===Z0)return i.RG_INTEGER;if(e===J0)return i.RGBA_INTEGER;if(e===Ru||e===hc||e===pc||e===fc)if(t===Lt)if(s=n.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===Ru)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===hc)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===pc)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===fc)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=n.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===Ru)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===hc)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===pc)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===fc)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===tm||e===rm||e===im||e===nm)if(s=n.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===tm)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===rm)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===im)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===nm)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===Lw)return s=n.get("WEBGL_compressed_texture_etc1"),s!==null?s.COMPRESSED_RGB_ETC1_WEBGL:null;if(e===fh||e===mh)if(s=n.get("WEBGL_compressed_texture_etc"),s!==null){if(e===fh)return t===Lt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===mh)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===gh||e===vh||e===yh||e===bh||e===xh||e===wh||e===_h||e===Sh||e===Th||e===Mh||e===Eh||e===Ch||e===Ah||e===Nh)if(s=n.get("WEBGL_compressed_texture_astc"),s!==null){if(e===gh)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===vh)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===yh)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===bh)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===xh)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===wh)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===_h)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===Sh)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===Th)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===Mh)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===Eh)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===Ch)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===Ah)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===Nh)return t===Lt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===ku)if(s=n.get("EXT_texture_compression_bptc"),s!==null){if(e===ku)return t===Lt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===Iw||e===sm||e===om||e===am)if(s=n.get("EXT_texture_compression_rgtc"),s!==null){if(e===ku)return s.COMPRESSED_RED_RGTC1_EXT;if(e===sm)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===om)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===am)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===Ao?i.UNSIGNED_INT_24_8:i[e]!==void 0?i[e]:null}}const h9e=d9e;let oq=!1,K2,OO,aq;class p9e{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,oq===!1&&(this._init(this.gl),oq=!0)}_init(e){K2={[ds]:e.REPEAT,[Mi]:e.CLAMP_TO_EDGE,[kl]:e.MIRRORED_REPEAT},OO={[Mr]:e.NEAREST,[Ll]:e.NEAREST_MIPMAP_NEAREST,[ca]:e.NEAREST_MIPMAP_LINEAR,[Or]:e.LINEAR,[hh]:e.LINEAR_MIPMAP_NEAREST,[qn]:e.LINEAR_MIPMAP_LINEAR},aq={[oy]:e.NEVER,[hy]:e.ALWAYS,[dm]:e.LESS,[ly]:e.LEQUAL,[ay]:e.EQUAL,[dy]:e.GEQUAL,[cy]:e.GREATER,[uy]:e.NOTEQUAL}}filterFallback(e){const{gl:t}=this;return e===Mr||e===Ll||e===ca?t.NEAREST:t.LINEAR}getGLTextureType(e){const{gl:t}=this;let i;return e.isCubeTexture===!0?i=t.TEXTURE_CUBE_MAP:i=t.TEXTURE_2D,i}getInternalFormat(e,t,i,n,s=!1){const{gl:o,extensions:a}=this;if(e!==null){if(o[e]!==void 0)return o[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let l=t;return t===o.RED&&(i===o.FLOAT&&(l=o.R32F),i===o.HALF_FLOAT&&(l=o.R16F),i===o.UNSIGNED_BYTE&&(l=o.R8)),t===o.RED_INTEGER&&(i===o.UNSIGNED_BYTE&&(l=o.R8UI),i===o.UNSIGNED_SHORT&&(l=o.R16UI),i===o.UNSIGNED_INT&&(l=o.R32UI),i===o.BYTE&&(l=o.R8I),i===o.SHORT&&(l=o.R16I),i===o.INT&&(l=o.R32I)),t===o.RG&&(i===o.FLOAT&&(l=o.RG32F),i===o.HALF_FLOAT&&(l=o.RG16F),i===o.UNSIGNED_BYTE&&(l=o.RG8)),t===o.RGBA&&(i===o.FLOAT&&(l=o.RGBA32F),i===o.HALF_FLOAT&&(l=o.RGBA16F),i===o.UNSIGNED_BYTE&&(l=n===Lt&&s===!1?o.SRGB8_ALPHA8:o.RGBA8),i===o.UNSIGNED_SHORT_4_4_4_4&&(l=o.RGBA4),i===o.UNSIGNED_SHORT_5_5_5_1&&(l=o.RGB5_A1)),t===o.DEPTH_COMPONENT&&(i===o.UNSIGNED_INT&&(l=o.DEPTH_COMPONENT24),i===o.FLOAT&&(l=o.DEPTH_COMPONENT32F)),t===o.DEPTH_STENCIL&&i===o.UNSIGNED_INT_24_8&&(l=o.DEPTH24_STENCIL8),(l===o.R16F||l===o.R32F||l===o.RG16F||l===o.RG32F||l===o.RGBA16F||l===o.RGBA32F)&&a.get("EXT_color_buffer_float"),l}setTextureParameters(e,t){const{gl:i,extensions:n}=this;if(i.texParameteri(e,i.TEXTURE_WRAP_S,K2[t.wrapS]),i.texParameteri(e,i.TEXTURE_WRAP_T,K2[t.wrapT]),(e===i.TEXTURE_3D||e===i.TEXTURE_2D_ARRAY)&&i.texParameteri(e,i.TEXTURE_WRAP_R,K2[t.wrapR]),i.texParameteri(e,i.TEXTURE_MAG_FILTER,OO[t.magFilter]),i.texParameteri(e,i.TEXTURE_MIN_FILTER,OO[t.minFilter]),t.compareFunction&&(i.texParameteri(e,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(e,i.TEXTURE_COMPARE_FUNC,aq[t.compareFunction])),n.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===Mr||t.minFilter!==ca&&t.minFilter!==qn||t.type===mi&&n.has("OES_texture_float_linear")===!1)return;t.anisotropy>1}}}const f9e=p9e;class m9e{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions()}get(e){return this.gl.getExtension(e)}has(e){return this.availableExtensions.includes(e)}}const g9e=m9e;class v9e extends nq{constructor(e={}){super(e)}async init(e){await super.init(e);const t=this.parameters,i=t.context!==void 0?t.context:e.domElement.getContext("webgl2");this.gl=i,this.extensions=new g9e(this),this.attributeUtils=new l9e(this),this.textureUtils=new f9e(this),this.state=new u9e(this),this.utils=new h9e(this),this.defaultTextures={},this.extensions.get("EXT_color_buffer_float")}get coordinateSystem(){return ua}beginRender(e){const{gl:t}=this;this._setFramebuffer(e);let i=0;e.clearColor&&(i|=t.COLOR_BUFFER_BIT),e.clearDepth&&(i|=t.DEPTH_BUFFER_BIT),e.clearStencil&&(i|=t.STENCIL_BUFFER_BIT);const n=e.clearColorValue;if(i!==0)if(e.textures===null)t.clearColor(n.r,n.g,n.b,n.a),t.clear(i);else{for(let s=0;s<e.textures.length;s++)t.clearBufferfv(t.COLOR,s,[n.r,n.g,n.b,n.a]);t.clearBufferfi(t.DEPTH_STENCIL,0,1,1)}e.viewport?this.updateViewport(e):t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight)}finishRender(){}updateViewport(e){const t=this.gl,{x:i,y:n,width:s,height:o}=e.viewportValue;t.viewport(i,n,s,o)}clear(){console.warn("Abstract class.")}beginCompute(){console.warn("Abstract class.")}compute(){console.warn("Abstract class.")}finishCompute(){console.warn("Abstract class.")}draw(e,t){const{pipeline:i,material:n}=e,{programGPU:s,vaoGPU:o}=this.get(i),{gl:a,state:l}=this,c=e.getBindings();for(const g of c){const v=this.get(g),x=v.index;g.isUniformsGroup?a.bindBufferBase(a.UNIFORM_BUFFER,x,v.bufferGPU):g.isSampledTexture&&(a.activeTexture(a.TEXTURE0+x),a.bindTexture(v.glTextureType,v.textureGPU))}l.setMaterial(n),a.useProgram(s),a.bindVertexArray(o);const u=e.getIndex(),d=e.object,h=e.geometry,p=h.drawRange,f=p.start;let m;if(d.isPoints?m=a.POINTS:d.isLine?m=a.LINES:d.isLineLoop?m=a.LINE_LOOP:d.isLineSegments?m=a.LINES:m=a.TRIANGLES,u!==null){const g=this.get(u),v=p.count!==1/0?p.count:u.count;a.drawElements(m,u.count,g.type,f),t.update(d,v,1)}else{const g=h.attributes.position,v=p.count!==1/0?p.count:g.count;a.drawArrays(m,0,v),t.update(d,v,1)}a.bindVertexArray(null)}needsUpdate(e){return!1}getCacheKey(e){return""}createSampler(){}destroySampler(){console.warn("Abstract class.")}createDefaultTexture(e){const{gl:t,textureUtils:i,defaultTextures:n}=this,s=i.getGLTextureType(e);let o=n[s];o===void 0&&(o=t.createTexture(),t.bindTexture(s,o),t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST),n[s]=o),this.set(e,{textureGPU:o,glTextureType:s,isDefault:!0})}createTexture(e,t){const{gl:i,utils:n,textureUtils:s}=this,{levels:o,width:a,height:l}=t,c=n.convert(e.format,e.colorSpace),u=n.convert(e.type),d=s.getInternalFormat(e.internalFormat,c,u,e.colorSpace,e.isVideoTexture),h=i.createTexture(),p=s.getGLTextureType(e);i.bindTexture(p,h),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,e.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,e.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,i.NONE),s.setTextureParameters(p,e),i.bindTexture(p,h),e.isVideoTexture||i.texStorage2D(p,o,d,a,l),this.set(e,{textureGPU:h,glTextureType:p,glFormat:c,glType:u,glInternalFormat:d})}updateTexture(e,t){const{gl:i}=this,{width:n,height:s}=t,{textureGPU:o,glTextureType:a,glFormat:l,glType:c,glInternalFormat:u}=this.get(e),d=h=>h.isDataTexture?h.image.data:h instanceof ImageBitmap||h instanceof OffscreenCanvas?h:h.data;if(i.bindTexture(a,o),e.isCubeTexture){const h=t.images;for(let p=0;p<6;p++){const f=d(h[p]);i.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,0,0,n,s,l,c,f)}}else if(e.isVideoTexture)e.update(),i.texImage2D(a,0,u,l,c,t.image);else{const h=d(t.image);i.texSubImage2D(a,0,0,0,n,s,l,c,h)}}generateMipmaps(e){const{gl:t}=this,{textureGPU:i,glTextureType:n}=this.get(e);t.bindTexture(n,i),t.generateMipmap(n)}destroyTexture(){console.warn("Abstract class.")}copyTextureToBuffer(){console.warn("Abstract class.")}createNodeBuilder(e,t,i=null){return new s9e(e,t,i)}createProgram(e){const t=this.gl,{stage:i,code:n}=e,s=i==="vertex"?t.createShader(t.VERTEX_SHADER):t.createShader(t.FRAGMENT_SHADER);t.shaderSource(s,n),t.compileShader(s),t.getShaderParameter(s,t.COMPILE_STATUS)===!1&&console.error("THREE.WebGLBackend:",t.getShaderInfoLog(s)),this.set(e,{shaderGPU:s})}destroyProgram(){console.warn("Abstract class.")}createRenderPipeline(e){const t=this.gl,i=e.pipeline,{fragmentProgram:n,vertexProgram:s}=i,o=t.createProgram();t.attachShader(o,this.get(n).shaderGPU),t.attachShader(o,this.get(s).shaderGPU),t.linkProgram(o),t.getProgramParameter(o,t.LINK_STATUS)===!1&&console.error("THREE.WebGLBackend:",t.getProgramInfoLog(o)),t.useProgram(o);const a=e.getBindings();for(const d of a){const h=this.get(d).index;if(d.isUniformsGroup){const p=t.getUniformBlockIndex(o,d.name);t.uniformBlockBinding(o,p,h)}else if(d.isSampledTexture){const p=t.getUniformLocation(o,d.name);t.uniform1i(p,h)}}const l=t.createVertexArray(),c=e.getIndex(),u=e.getVertexBuffers();if(t.bindVertexArray(l),c!==null){const d=this.get(c);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,d.bufferGPU)}for(let d=0;d<u.length;d++){const h=u[d],p=this.get(h);t.bindBuffer(t.ARRAY_BUFFER,p.bufferGPU),t.enableVertexAttribArray(d),t.vertexAttribPointer(d,h.itemSize,p.type,!1,0,0)}t.bindVertexArray(null),this.set(i,{programGPU:o,vaoGPU:l})}createComputePipeline(){console.warn("Abstract class.")}createBindings(e){this.updateBindings(e)}updateBindings(e){const{gl:t}=this;let i=0,n=0;for(const s of e)if(s.isUniformsGroup){const o=t.createBuffer(),a=s.buffer;t.bindBuffer(t.UNIFORM_BUFFER,o),t.bufferData(t.UNIFORM_BUFFER,a,t.DYNAMIC_DRAW),t.bindBufferBase(t.UNIFORM_BUFFER,i,o),this.set(s,{index:i++,bufferGPU:o})}else if(s.isSampledTexture){const{textureGPU:o,glTextureType:a}=this.get(s.texture);this.set(s,{index:n++,textureGPU:o,glTextureType:a})}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup){const i=this.get(e).bufferGPU,n=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,i),t.bufferData(t.UNIFORM_BUFFER,n,t.DYNAMIC_DRAW)}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(){console.warn("Abstract class.")}updateAttribute(){console.warn("Abstract class.")}destroyAttribute(){console.warn("Abstract class.")}updateSize(){}hasFeature(e){return!0}copyFramebufferToTexture(){console.warn("Abstract class.")}_setFramebuffer(e){const{gl:t}=this;if(e.textures!==null){const i=this.get(e);let n=i.framebuffer;if(n===void 0){n=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,n);const s=e.textures,o=[];for(let a=0;a<s.length;a++){const l=s[a],{textureGPU:c}=this.get(l),u=t.COLOR_ATTACHMENT0+a;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+a,t.TEXTURE_2D,c,0),o.push(u)}if(t.drawBuffers(o),e.depthTexture!==null){const{textureGPU:a}=this.get(e.depthTexture);t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0)}i.framebuffer=n}else t.bindFramebuffer(t.FRAMEBUFFER,n)}else t.bindFramebuffer(t.FRAMEBUFFER,null)}}const y9e=v9e,Dg={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},ss={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},ol={Store:"store",Discard:"discard"},dn={Load:"load",Clear:"clear"},PO={CCW:"ccw",CW:"cw"},IO={None:"none",Front:"front",Back:"back"},Ug={Uint16:"uint16",Uint32:"uint32"},Je={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10uFloat:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Stencil8:"stencil8",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},DO={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},Y2={Linear:"linear",Nearest:"nearest"},cr={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDstColor:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},Dp={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},lq={None:0,Red:1,Green:2,Blue:4,Alpha:8,All:15},fd={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},b9e={Uniform:"uniform",Storage:"storage",ReadOnlyStorage:"read-only-storage"},cq={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},uq={OneD:"1d",TwoD:"2d",ThreeD:"3d"},md={OneD:"1d",TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",CubeArray:"cube-array",ThreeD:"3d"},x9e={All:"all",StencilOnly:"stencil-only",DepthOnly:"depth-only"},Z2={Vertex:"vertex",Instance:"instance"},UO={DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable"};class w9e extends AO{constructor(e,t){super(e),this.texture=t,this.version=t?t.version:0,this.isSampler=!0}}const _9e=w9e;class S9e extends _9e{constructor(e,t){super(e,t?t.value:null),this.textureNode=t}}const T9e=S9e;class M9e extends eq{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}const E9e=M9e;class C9e{constructor(e){this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,i=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,n=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:Y2.Linear}),this.flipYSampler=e.createSampler({minFilter:Y2.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:i}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:n})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Dg.TriangleStrip,stripIndexFormat:Ug.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:Dg.TriangleStrip,stripIndexFormat:Ug.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,i=0){const n=t.format,{width:s,height:o}=t.size,a=this.getTransferPipeline(n),l=this.getFlipYPipeline(n),c=this.device.createTexture({size:{width:s,height:o,depthOrArrayLayers:1},format:n,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),u=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:md.TwoD,baseArrayLayer:i}),d=c.createView({baseMipLevel:0,mipLevelCount:1,dimension:md.TwoD,baseArrayLayer:0}),h=this.device.createCommandEncoder({}),p=(f,m,g)=>{const v=f.getBindGroupLayout(0),x=this.device.createBindGroup({layout:v,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:m}]}),b=h.beginRenderPass({colorAttachments:[{view:g,loadOp:dn.Clear,storeOp:ol.Store,clearValue:[0,0,0,0]}]});b.setPipeline(f),b.setBindGroup(0,x),b.draw(4,1,0,0),b.end()};p(a,u,d),p(l,d,u),this.device.queue.submit([h.finish()]),c.destroy()}generateMipmaps(e,t,i=0){const n=this.getTransferPipeline(t.format),s=this.device.createCommandEncoder({}),o=n.getBindGroupLayout(0);let a=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:md.TwoD,baseArrayLayer:i});for(let l=1;l<t.mipLevelCount;l++){const c=this.device.createBindGroup({layout:o,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:a}]}),u=e.createView({baseMipLevel:l,mipLevelCount:1,dimension:md.TwoD,baseArrayLayer:i}),d=s.beginRenderPass({colorAttachments:[{view:u,loadOp:dn.Clear,storeOp:ol.Store,clearValue:[0,0,0,0]}]});d.setPipeline(n),d.setBindGroup(0,c),d.draw(4,1,0,0),d.end(),a=u}this.device.queue.submit([s.finish()])}}const A9e=C9e,N9e={[oy]:"never",[dm]:"less",[ay]:"equal",[ly]:"less-equal",[cy]:"greater",[dy]:"greater-equal",[hy]:"always",[uy]:"not-equal"},R9e=[0,1,3,2,4,5];class k9e{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture=null,this.defaultCubeTexture=null}createSampler(e){const t=this.backend,i=t.device,n=t.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:e.anisotropy};e.isDepthTexture&&e.compareFunction!==null&&(s.compare=N9e[e.compareFunction]),n.sampler=i.createSampler(s)}createDefaultTexture(e){let t;e.isCubeTexture?t=this._getDefaultCubeTextureGPU():t=this._getDefaultTextureGPU(),this.backend.get(e).texture=t}createTexture(e,t={}){const i=this.backend,n=i.get(e);if(n.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:s,height:o,depth:a,levels:l}=t,c=this._getDimension(e),u=e.internalFormat||dq(e,this.device),d=t.sampleCount!==void 0?t.sampleCount:1,h=e.isRenderTargetTexture?1:d;let p=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(p|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&(p|=GPUTextureUsage.RENDER_ATTACHMENT);const f={label:e.name,size:{width:s,height:o,depthOrArrayLayers:a},mipLevelCount:l,sampleCount:h,dimension:c,format:u,usage:p};if(e.isVideoTexture){const m=e.source.data,g=new VideoFrame(m);f.size.width=g.displayWidth,f.size.height=g.displayHeight,g.close(),n.externalTexture=m}else{if(u===void 0)return console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);n.texture=i.device.createTexture(f)}if(e.isRenderTargetTexture&&d>1){const m=Object.assign({},f);m.label=m.label+"-msaa",m.sampleCount=d,n.msaaTexture=i.device.createTexture(m)}n.initialized=!0,n.textureDescriptorGPU=f}destroyTexture(e){const t=this.backend,i=t.get(e);i.texture.destroy(),i.msaaTexture!==void 0&&i.msaaTexture.destroy(),t.delete(e)}destroySampler(e){const t=this.backend.get(e);delete t.sampler}generateMipmaps(e){const t=this.backend.get(e);if(e.isCubeTexture)for(let i=0;i<6;i++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,i);else this._generateMipmaps(t.texture,t.textureDescriptorGPU)}updateTexture(e,t){const i=this.backend.get(e),{textureDescriptorGPU:n}=i;if(!(e.isRenderTargetTexture||n===void 0)){if(e.isDataTexture||e.isDataArrayTexture||e.isData3DTexture)this._copyBufferToTexture(t.image,i.texture,n,0,!1);else if(e.isCompressedTexture)this._copyCompressedBufferToTexture(e.mipmaps,i.texture,n);else if(e.isCubeTexture)this._copyCubeMapToTexture(t.images,i.texture,n,e.flipY);else if(e.isVideoTexture){const s=e.source.data;i.externalTexture=s}else this._copyImageToTexture(t.image,i.texture,n,0,e.flipY);i.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,t,i,n,s){const o=this.backend.device,a=this.backend.get(e),l=a.texture,c=a.textureDescriptorGPU.format,u=this._getBytesPerTexel(c),d=o.createBuffer({size:n*s*u,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),h=o.createCommandEncoder();h.copyTextureToBuffer({texture:l,origin:{x:t,y:i}},{buffer:d,bytesPerRow:n*u},{width:n,height:s});const p=this._getTypedArrayType(c);o.queue.submit([h.finish()]),await d.mapAsync(GPUMapMode.READ);const f=d.getMappedRange();return new p(f)}_isEnvironmentTexture(e){const t=e.mapping;return t===ja||t===Rl||t===Co||t===la}_getDefaultTextureGPU(){let e=this.defaultTexture;if(e===null){const t=new Nr;t.minFilter=Mr,t.magFilter=Mr,this.createTexture(t,{width:1,height:1}),this.defaultTexture=e=t}return this.backend.get(e).texture}_getDefaultCubeTextureGPU(){let e=this.defaultTexture;if(e===null){const t=new Sc;t.minFilter=Mr,t.magFilter=Mr,this.createTexture(t,{width:1,height:1,depth:6}),this.defaultCubeTexture=e=t}return this.backend.get(e).texture}_copyCubeMapToTexture(e,t,i,n){for(let s=0;s<6;s++){const o=e[s],a=n===!0?R9e[s]:s;o.isDataTexture?this._copyBufferToTexture(o.image,t,i,a,n):this._copyImageToTexture(o,t,i,a,n)}}_copyImageToTexture(e,t,i,n,s){this.backend.device.queue.copyExternalImageToTexture({source:e},{texture:t,mipLevel:0,origin:{x:0,y:0,z:n}},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,i,n)}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new A9e(this.backend.device)),e}_generateMipmaps(e,t,i=0){this._getPassUtils().generateMipmaps(e,t,i)}_flipY(e,t,i=0){this._getPassUtils().flipY(e,t,i)}_copyBufferToTexture(e,t,i,n,s){const o=this.backend.device,a=e.data,l=this._getBytesPerTexel(i.format),c=e.width*l;o.queue.writeTexture({texture:t,mipLevel:0,origin:{x:0,y:0,z:n}},a,{offset:0,bytesPerRow:c},{width:e.width,height:e.height,depthOrArrayLayers:e.depth!==void 0?e.depth:1}),s===!0&&this._flipY(t,i,n)}_copyCompressedBufferToTexture(e,t,i){const n=this.backend.device,s=this._getBlockData(i.format);for(let o=0;o<e.length;o++){const a=e[o],l=a.width,c=a.height,u=Math.ceil(l/s.width)*s.byteLength;n.queue.writeTexture({texture:t,mipLevel:o},a.data,{offset:0,bytesPerRow:u},{width:Math.ceil(l/s.width)*s.width,height:Math.ceil(c/s.width)*s.width,depthOrArrayLayers:1})}}_getBlockData(e){if(e===Je.BC1RGBAUnorm||e===Je.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===Je.BC2RGBAUnorm||e===Je.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Je.BC3RGBAUnorm||e===Je.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Je.BC4RUnorm||e===Je.BC4RSNorm)return{byteLength:8,width:4,height:4};if(e===Je.BC5RGUnorm||e===Je.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===Je.BC6HRGBUFloat||e===Je.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===Je.BC7RGBAUnorm||e===Je.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===Je.ETC2RGB8Unorm||e===Je.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===Je.ETC2RGB8A1Unorm||e===Je.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===Je.ETC2RGBA8Unorm||e===Je.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===Je.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===Je.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===Je.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===Je.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===Je.ASTC4x4Unorm||e===Je.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===Je.ASTC5x4Unorm||e===Je.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===Je.ASTC5x5Unorm||e===Je.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===Je.ASTC6x5Unorm||e===Je.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===Je.ASTC6x6Unorm||e===Je.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===Je.ASTC8x5Unorm||e===Je.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===Je.ASTC8x6Unorm||e===Je.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===Je.ASTC8x8Unorm||e===Je.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===Je.ASTC10x5Unorm||e===Je.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===Je.ASTC10x6Unorm||e===Je.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===Je.ASTC10x8Unorm||e===Je.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===Je.ASTC10x10Unorm||e===Je.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===Je.ASTC12x10Unorm||e===Je.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===Je.ASTC12x12Unorm||e===Je.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=DO.ClampToEdge;return e===ds?t=DO.Repeat:e===kl&&(t=DO.MirrorRepeat),t}_convertFilterMode(e){let t=Y2.Linear;return(e===Mr||e===Ll||e===ca)&&(t=Y2.Nearest),t}_getBytesPerTexel(e){if(e===Je.R8Unorm)return 1;if(e===Je.R16Float||e===Je.RG8Unorm)return 2;if(e===Je.RG16Float||e===Je.R32Float||e===Je.RGBA8Unorm||e===Je.RGBA8UnormSRGB)return 4;if(e===Je.RG32Float||e===Je.RGBA16Float)return 8;if(e===Je.RGBA32Float)return 16}_getTypedArrayType(e){if(e===Je.R8Uint)return Uint8Array;if(e===Je.R8Sint)return Int8Array;if(e===Je.R8Unorm)return Uint8Array;if(e===Je.R8Snorm)return Int8Array;if(e===Je.RG8Uint)return Uint8Array;if(e===Je.RG8Sint)return Int8Array;if(e===Je.RG8Unorm)return Uint8Array;if(e===Je.RG8Snorm)return Int8Array;if(e===Je.RGBA8Uint)return Uint8Array;if(e===Je.RGBA8Sint)return Int8Array;if(e===Je.RGBA8Unorm)return Uint8Array;if(e===Je.RGBA8Snorm)return Int8Array;if(e===Je.R16Uint)return Uint16Array;if(e===Je.R16Sint)return Int16Array;if(e===Je.RG16Uint)return Uint16Array;if(e===Je.RG16Sint)return Int16Array;if(e===Je.RGBA16Uint)return Uint16Array;if(e===Je.RGBA16Sint)return Int16Array;if(e===Je.R32Uint)return Uint32Array;if(e===Je.R32Sint)return Int32Array;if(e===Je.R32Float)return Float32Array;if(e===Je.RG32Uint)return Uint32Array;if(e===Je.RG32Sint)return Int32Array;if(e===Je.RG32Float)return Float32Array;if(e===Je.RGBA32Uint)return Uint32Array;if(e===Je.RGBA32Sint)return Int32Array;if(e===Je.RGBA32Float)return Float32Array}_getDimension(e){let t;return e.isData3DTexture?t=uq.ThreeD:t=uq.TwoD,t}}function dq(r,e=null){const t=r.format,i=r.type,n=r.colorSpace;let s;if(r.isFramebufferTexture===!0)s=Je.BGRA8Unorm;else if(r.isCompressedTexture===!0)switch(t){case hc:s=n===Lt?Je.BC1RGBAUnormSRGB:Je.BC1RGBAUnorm;break;case pc:s=n===Lt?Je.BC2RGBAUnormSRGB:Je.BC2RGBAUnorm;break;case fc:s=n===Lt?Je.BC3RGBAUnormSRGB:Je.BC3RGBAUnorm;break;case fh:s=n===Lt?Je.ETC2RGB8UnormSRGB:Je.ETC2RGB8Unorm;break;case mh:s=n===Lt?Je.ETC2RGBA8UnormSRGB:Je.ETC2RGBA8Unorm;break;case gh:s=n===Lt?Je.ASTC4x4UnormSRGB:Je.ASTC4x4Unorm;break;case vh:s=n===Lt?Je.ASTC5x4UnormSRGB:Je.ASTC5x4Unorm;break;case yh:s=n===Lt?Je.ASTC5x5UnormSRGB:Je.ASTC5x5Unorm;break;case bh:s=n===Lt?Je.ASTC6x5UnormSRGB:Je.ASTC6x5Unorm;break;case xh:s=n===Lt?Je.ASTC6x6UnormSRGB:Je.ASTC6x6Unorm;break;case wh:s=n===Lt?Je.ASTC8x5UnormSRGB:Je.ASTC8x5Unorm;break;case _h:s=n===Lt?Je.ASTC8x6UnormSRGB:Je.ASTC8x6Unorm;break;case Sh:s=n===Lt?Je.ASTC8x8UnormSRGB:Je.ASTC8x8Unorm;break;case Th:s=n===Lt?Je.ASTC10x5UnormSRGB:Je.ASTC10x5Unorm;break;case Mh:s=n===Lt?Je.ASTC10x6UnormSRGB:Je.ASTC10x6Unorm;break;case Eh:s=n===Lt?Je.ASTC10x8UnormSRGB:Je.ASTC10x8Unorm;break;case Ch:s=n===Lt?Je.ASTC10x10UnormSRGB:Je.ASTC10x10Unorm;break;case Ah:s=n===Lt?Je.ASTC12x10UnormSRGB:Je.ASTC12x10Unorm;break;case Nh:s=n===Lt?Je.ASTC12x12UnormSRGB:Je.ASTC12x12Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case Rn:switch(i){case io:s=n===Lt?Je.RGBA8UnormSRGB:Je.RGBA8Unorm;break;case gi:s=Je.RGBA16Float;break;case mi:s=Je.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",i)}break;case Jf:switch(i){case io:s=Je.R8Unorm;break;case gi:s=Je.R16Float;break;case mi:s=Je.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",i)}break;case em:switch(i){case io:s=Je.RG8Unorm;break;case gi:s=Je.RG16Float;break;case mi:s=Je.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",i)}break;case hs:switch(i){case ph:s=Je.Depth16Unorm;break;case no:s=Je.Depth24Plus;break;case mi:s=Je.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",i)}break;case so:switch(i){case Ao:s=Je.Depth24PlusStencil8;break;case mi:e&&e.features.has(UO.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),s=Je.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",i)}break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}return s}const L9e=k9e,O9e=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+)?/i,P9e=/[a-z_0-9]+|<(.*?)>+/ig,I9e={f32:"float"},D9e=r=>{r=r.trim();const e=r.match(O9e);if(e!==null&&e.length===4){const t=e[2],i=[];let n=null;for(;(n=P9e.exec(t))!==null;)i.push(n);const s=[];let o=0;for(;o<i.length;){const c=i[o++][0];let u=i[o++][0];u=I9e[u]||u,o<i.length&&i[o][0].startsWith("<")===!0&&o++,s.push(new DS(u,c))}const a=r.substring(e[0].length),l=e[1]!==void 0?e[1]:"";return{type:e[3]||"void",inputs:s,name:l,inputsCode:t,blockCode:a}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class U9e extends y${constructor(e){const{type:t,inputs:i,name:n,inputsCode:s,blockCode:o}=D9e(e);super(t,i,n),this.inputsCode=s,this.blockCode=o}getCode(e=this.name){const t=this.type!=="void"?"-> "+this.type:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}const F9e=U9e;class B9e extends g${parseFunction(e){return new F9e(e)}}const z9e=B9e,J2={vertex:GPUShaderStage.VERTEX,fragment:GPUShaderStage.FRAGMENT,compute:GPUShaderStage.COMPUTE},V9e={instance:!0},G9e={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat3:"mat3x3<f32>",imat3:"mat3x3<i32>",umat3:"mat3x3<u32>",bmat3:"mat3x3<bool>",mat4:"mat4x4<f32>",imat4:"mat4x4<i32>",umat4:"mat4x4<u32>",bmat4:"mat4x4<bool>"},j9e={dFdx:"dpdx",dFdy:"- dpdy",mod:"threejs_mod",lessThanEqual:"threejs_lessThanEqual",inversesqrt:"inverseSqrt"},hq={lessThanEqual:new fg(`
fn threejs_lessThanEqual( a : vec3<f32>, b : vec3<f32> ) -> vec3<bool> {

	return vec3<bool>( a.x <= b.x, a.y <= b.y, a.z <= b.z );

}
`),mod:new fg(`
fn threejs_mod( x : f32, y : f32 ) -> f32 {

	return x - y * floor( x / y );

}
`),repeatWrapping:new fg(`
fn threejs_repeatWrapping( uv : vec2<f32>, dimension : vec2<u32> ) -> vec2<u32> {

	let uvScaled = vec2<u32>( uv * vec2<f32>( dimension ) );

	return ( ( uvScaled % dimension ) + dimension ) % dimension;

}
`)};class H9e extends IS{constructor(e,t,i=null){super(e,t,new z9e,i),this.uniformsGroup={},this.builtins={vertex:new Map,fragment:new Map,compute:new Map,attribute:new Map}}build(){const{object:e,material:t}=this;return t!==null?Zn.fromMaterial(t).build(this):this.addFlow("compute",e),super.build()}needsColorSpaceToLinear(e){return e.isVideoTexture===!0&&e.colorSpace!==kn}_getSampler(e,t,i,n=this.shaderStage){return n==="fragment"?`textureSample( ${t}, ${t}_sampler, ${i} )`:this.getTextureLoad(e,t,i)}_getVideoSampler(e,t,i=this.shaderStage){if(i==="fragment")return`textureSampleBaseClampToEdge( ${e}, ${e}_sampler, vec2<f32>( ${t}.x, 1.0 - ${t}.y ) )`;console.error(`WebGPURenderer: THREE.VideoTexture does not support ${i} shader.`)}_getSamplerLevel(e,t,i,n,s=this.shaderStage){return s==="fragment"&&this.isUnfilterable(e)===!1?`textureSampleLevel( ${t}, ${t}_sampler, ${i}, ${n} )`:this.getTextureLoad(e,t,i,n)}getTextureLoad(e,t,i,n="0"){this._include("repeatWrapping");const s=`textureDimensions( ${t}, 0 )`;return`textureLoad( ${t}, threejs_repeatWrapping( ${i}, ${s} ), i32( ${n} ) )`}isUnfilterable(e){return e.isDataTexture===!0&&e.type===mi}getTexture(e,t,i,n=this.shaderStage){let s=null;return e.isVideoTexture===!0?s=this._getVideoSampler(t,i,n):this.isUnfilterable(e)?s=this.getTextureLoad(e,t,i):s=this._getSampler(e,t,i,n),s}getTextureCompare(e,t,i,n,s=this.shaderStage){if(s==="fragment")return`textureSampleCompare( ${t}, ${t}_sampler, ${i}, ${n} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${s} shader.`)}getTextureLevel(e,t,i,n,s=this.shaderStage){let o=null;return e.isVideoTexture===!0?o=this._getVideoSampler(t,i,s):o=this._getSamplerLevel(e,t,i,n,s),o}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`NodeVaryings.${e.name}`}else if(e.isNodeUniform===!0){const i=e.name,n=e.type;return n==="texture"||n==="cubeTexture"?i:n==="buffer"||n==="storageBuffer"?`NodeBuffer_${e.node.id}.${i}`:`NodeUniforms.${i}`}return super.getPropertyName(e)}getUniformFromNode(e,t,i,n=null){const s=super.getUniformFromNode(e,t,i,n),o=this.getDataFromNode(e,i);if(o.uniformGPU===void 0){let a;const l=this.bindings[i];if(t==="texture"||t==="cubeTexture"){let c=null;t==="texture"?c=new NO(s.name,s.node):t==="cubeTexture"&&(c=new iq(s.name,s.node)),c.store=e.isStoreTextureNode===!0,c.setVisibility(J2[i]);const u=l[l.length-1],d=u&&u.isUniformsGroup?l.length-1:l.length;if(i==="fragment"&&this.isUnfilterable(e.value)===!1&&c.store===!1){const h=new T9e(`${s.name}_sampler`,s.node);h.setVisibility(J2[i]),l.splice(d,0,h,c),a=[h,c]}else l.splice(d,0,c),a=[c]}else if(t==="buffer"||t==="storageBuffer"){const c=t==="storageBuffer"?E9e:tq,u=new c("NodeBuffer_"+e.id,e.value);u.setVisibility(J2[i]);const d=l[l.length-1],h=d&&d.isUniformsGroup?l.length-1:l.length;l.splice(h,0,u),a=u}else{let c=this.uniformsGroup[i];if(c===void 0&&(c=new rq("nodeUniforms"),c.setVisibility(J2[i]),this.uniformsGroup[i]=c,l.push(c)),e.isArrayUniformNode===!0){a=[];for(const u of e.nodes){const d=this.getNodeUniform(u,t);d.boundary=KWe(d.itemSize),d.itemSize=QX(d.itemSize),c.addUniform(d),a.push(d)}}else a=this.getNodeUniform(s,t),c.addUniform(a)}o.uniformGPU=a,i==="vertex"&&(this.bindingsOffset.fragment=l.length)}return s}isReference(e){return super.isReference(e)||e==="texture_2d"||e==="texture_cube"||e==="texture_storage_2d"}getBuiltin(e,t,i,n=this.shaderStage){const s=this.builtins[n];return s.has(e)===!1&&s.set(e,{name:e,property:t,type:i}),t}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>","fragment")}isFlipY(){return!1}getAttributes(e){const t=[];if(e==="compute"&&this.getBuiltin("global_invocation_id","id","vec3<u32>","attribute"),e==="vertex"||e==="compute"){for(const{name:n,property:s,type:o}of this.builtins.attribute.values())t.push(`@builtin( ${n} ) ${s} : ${o}`);const i=this.getAttributesArray();for(let n=0,s=i.length;n<s;n++){const o=i[n],a=o.name,l=this.getType(o.type);t.push(`@location( ${n} ) ${a} : ${l}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[],i=e.getMemberTypes();for(let n=0;n<i.length;n++){const s=i[n];t.push(`	@location( ${n} ) m${n} : ${s}<f32>`)}return t.join(`,
`)}getStructs(e){const t=[],i=this.structs[e];for(let n=0,s=i.length;n<s;n++){const o=i[n];let a=`struct ${o.name} {
`;a+=this.getStructMembers(o),a+=`
}`,t.push(a)}return t.join(`

`)}getVar(e,t){return`var ${t} : ${this.getType(e)}`}getVars(e){const t=[],i=this.vars[e];for(const n of i)t.push(`	${this.getVar(n.type,n.name)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const n=this.varyings,s=this.vars[e];for(let o=0;o<n.length;o++){const a=n[o];if(a.needsInterpolation){let l=`@location( ${o} )`;(a.type==="int"||a.type==="uint")&&(l+=" @interpolate( flat )"),t.push(`${l} ${a.name} : ${this.getType(a.type)}`)}else e==="vertex"&&s.includes(a)===!1&&s.push(a)}}for(const{name:n,property:s,type:o}of this.builtins[e].values())t.push(`@builtin( ${n} ) ${s} : ${o}`);const i=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("NodeVaryingsStruct","	"+i):i}getUniforms(e){const t=this.uniforms[e],i=[],n=[],s=[];let o=this.bindingsOffset[e];for(const l of t)if(l.type==="texture"||l.type==="cubeTexture"){const c=l.node.value;e==="fragment"&&this.isUnfilterable(c)===!1&&l.node.isStoreTextureNode!==!0&&(c.isDepthTexture===!0&&c.compareFunction!==null?i.push(`@binding( ${o++} ) @group( 0 ) var ${l.name}_sampler : sampler_comparison;`):i.push(`@binding( ${o++} ) @group( 0 ) var ${l.name}_sampler : sampler;`));let u;c.isCubeTexture===!0?u="texture_cube<f32>":c.isDepthTexture===!0?u="texture_depth_2d":c.isVideoTexture===!0?u="texture_external":l.node.isStoreTextureNode===!0?u="texture_storage_2d<"+dq(c)+", write>":u="texture_2d<f32>",i.push(`@binding( ${o++} ) @group( 0 ) var ${l.name} : ${u};`)}else if(l.type==="buffer"||l.type==="storageBuffer"){const c=l.node,u=this.getType(c.bufferType),d=c.bufferCount,h=d>0?", "+d:"",p=`	${l.name} : array< ${u}${h} >
`,f=c.isStorageBufferNode?"storage,read_write":"uniform";n.push(this._getWGSLStructBinding("NodeBuffer_"+c.id,p,f,o++))}else{const c=this.getType(this.getVectorType(l.type));if(Array.isArray(l.value)===!0){const u=l.value.length;s.push(`uniform ${c}[ ${u} ] ${l.name}`)}else s.push(`	${l.name} : ${c}`)}let a=i.join(`
`);return a+=n.join(`
`),s.length>0&&(a+=this._getWGSLStructBinding("NodeUniforms",s.join(`,
`),"uniform",o++)),a}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};for(const t in e){let i=`// code

`;i+=this.flowCode[t];const n=this.flowNodes[t],s=n[n.length-1];for(const l of n){const c=this.getFlowData(l),u=l.name;u&&(i.length>0&&(i+=`
`),i+=`	// flow -> ${u}
	`),i+=`${c.code}
	`,l===s&&t!=="compute"&&(i+=`// result
	`,t==="vertex"?i+="NodeVaryings.Vertex = ":t==="fragment"&&(i+="return "),i+=`${c.result};`)}const o=s.outputNode,a=e[t];a.uniforms=this.getUniforms(t),a.attributes=this.getAttributes(t),a.varyings=this.getVaryings(t),a.structs=this.getStructs(t),a.vars=this.getVars(t),a.codes=this.getCodes(t),a.returnType=o!==void 0&&o.isOutputStructNode===!0?o.nodeType:"@location( 0 ) vec4<f32>",a.flow=i}this.material!==null?(this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment)):this.computeShader=this._getWGSLComputeCode(e.compute,(this.object.workgroupSize||[64]).join(", "))}getMethod(e){return hq[e]!==void 0&&this._include(e),j9e[e]||e}getType(e){return G9e[e]||e}isAvailable(e){return V9e[e]===!0}_include(e){hq[e].build(this)}_getWGSLVertexCode(e){return`${this.getSignature()}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> NodeVaryingsStruct {

	// system
	var NodeVaryings: NodeVaryingsStruct;

	// vars
	${e.vars}

	// flow
	${e.flow}

	return NodeVaryings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}

// uniforms
${e.uniforms}

// structs
${e.structs}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){return`${this.getSignature()}
// system
var<private> instanceIndex : u32;

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${t} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = id.x;

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,i,n=0,s=0){const o=e+"Struct";return`${this._getWGSLStruct(o,t)}
@binding( ${n} ) @group( ${s} )
var<${i}> ${e} : ${o};`}}const W9e=H9e;class $9e{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=Je.Depth24PlusStencil8:e.depth&&(t=Je.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).texture.format}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=Je.BGRA8Unorm,t}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return Dg.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return Dg.LineList;if(e.isLine)return Dg.LineStrip;if(e.isMesh)return Dg.TriangleList}getSampleCount(e){return e.textures!==null?e.sampleCount:this.backend.parameters.sampleCount}}const X9e=$9e,q9e=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]),K9e=new Map([[gN,["float16"]]]),Y9e=new Map([[Int32Array,"sint32"],[Uint32Array,"uint32"],[Float32Array,"float32"]]);class Z9e{constructor(e){this.backend=e}createAttribute(e,t){const i=this._getBufferAttribute(e),n=this.backend,s=n.get(i);let o=s.buffer;if(o===void 0){const a=n.device,l=i.array,c=l.byteLength+(4-l.byteLength%4)%4;o=a.createBuffer({label:i.name,size:c,usage:t,mappedAtCreation:!0}),new l.constructor(o.getMappedRange()).set(l),o.unmap(),s.buffer=o}}updateAttribute(e){const t=this._getBufferAttribute(e),i=this.backend,n=i.device,s=i.get(t).buffer,o=t.array,a=t.updateRange;a.count===-1?n.queue.writeBuffer(s,0,o,0):(n.queue.writeBuffer(s,0,o,a.offset*o.BYTES_PER_ELEMENT,a.count*o.BYTES_PER_ELEMENT),a.count=-1)}createShaderVertexBuffers(e){const t=e.getAttributes(),i=new Map;for(let n=0;n<t.length;n++){const s=t[n],o=s.array.BYTES_PER_ELEMENT,a=this._getBufferAttribute(s);let l=i.get(a);if(l===void 0){let d,h;s.isInterleavedBufferAttribute===!0?(d=s.data.stride*o,h=s.data.isInstancedInterleavedBuffer?Z2.Instance:Z2.Vertex):(d=s.itemSize*o,h=s.isInstancedBufferAttribute?Z2.Instance:Z2.Vertex),l={arrayStride:d,attributes:[],stepMode:h},i.set(a,l)}const c=this._getVertexFormat(s),u=s.isInterleavedBufferAttribute===!0?s.offset*o:0;l.attributes.push({shaderLocation:n,offset:u,format:c})}return Array.from(i.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,i=t.device,n=t.get(this._getBufferAttribute(e)),s=n.buffer,o=s.size;let a=n.readBuffer,l=!0;a===void 0&&(a=i.createBuffer({label:e.name,size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),l=!1,n.readBuffer=a);const c=i.createCommandEncoder({});c.copyBufferToBuffer(s,0,a,0,o),l&&a.unmap();const u=c.finish();return i.queue.submit([u]),await a.mapAsync(GPUMapMode.READ),a.getMappedRange()}_getVertexFormat(e){const{itemSize:t,normalized:i}=e,n=e.array.constructor,s=e.constructor;let o;if(t==1)o=Y9e.get(n);else{const a=(K9e.get(s)||q9e.get(n))[i?1:0];if(a){const l=n.BYTES_PER_ELEMENT*t,c=Math.floor((l+3)/4)*4/n.BYTES_PER_ELEMENT;if(c%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");o=`${a}x${c}`}}return o||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),o}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}const J9e=Z9e;class Q9e{constructor(e){this.backend=e}createBindingsLayout(e){const t=this.backend.device,i=[];let n=0;for(const s of e){const o={binding:n++,visibility:s.visibility};if(s.isUniformBuffer||s.isStorageBuffer){const a={};s.isStorageBuffer&&(a.type=b9e.Storage),o.buffer=a}else if(s.isSampler){const a={};s.texture.isDepthTexture&&s.texture.compareFunction!==null&&(a.type="comparison"),o.sampler=a}else if(s.isSampledTexture&&s.texture.isVideoTexture)o.externalTexture={};else if(s.isSampledTexture&&s.store){const a=this.backend.get(s.texture).texture.format;o.storageTexture={format:a}}else if(s.isSampledTexture){const a={};s.texture.isDepthTexture?a.sampleType=cq.Depth:s.texture.isDataTexture&&s.texture.type===mi&&(a.sampleType=cq.UnfilterableFloat),s.isSampledCubeTexture&&(a.viewDimension=md.Cube),o.texture=a}else console.error('WebGPUBindingUtils: Unsupported binding "${ binding }".');i.push(o)}return t.createBindGroupLayout({entries:i})}createBindings(e){const t=this.backend.get(e),i=this.createBindingsLayout(e),n=this.createBindGroup(e,i);t.layout=i,t.group=n,t.bindings=e}updateBinding(e){const t=this.backend,i=t.device,n=e.buffer,s=t.get(e).buffer;i.queue.writeBuffer(s,0,n,0)}createBindGroup(e,t){const i=this.backend,n=i.device;let s=0;const o=[];for(const a of e){if(a.isUniformBuffer){const l=i.get(a);if(l.buffer===void 0){const c=a.byteLength,u=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,d=n.createBuffer({label:"bindingBuffer",size:c,usage:u});l.buffer=d}o.push({binding:s,resource:{buffer:l.buffer}})}else if(a.isStorageBuffer){const l=i.get(a);if(l.buffer===void 0){const c=a.attribute;l.buffer=i.get(c).buffer}o.push({binding:s,resource:{buffer:l.buffer}})}else if(a.isSampler){const l=i.get(a.texture);o.push({binding:s,resource:l.sampler})}else if(a.isSampledTexture){const l=i.get(a.texture);let c;a.isSampledCubeTexture?c=md.Cube:c=md.TwoD;let u;if(l.externalTexture!==void 0)u=n.importExternalTexture({source:l.externalTexture});else{const d=x9e.All;u=l.texture.createView({aspect:d,dimension:c})}o.push({binding:s,resource:u})}s++}return n.createBindGroup({layout:t,entries:o})}}const e$e=Q9e;class t$e{constructor(e){this.backend=e}createRenderPipeline(e){const{object:t,material:i,geometry:n,pipeline:s}=e,{vertexProgram:o,fragmentProgram:a}=s,l=this.backend,c=l.device,u=l.utils,d=l.get(s),h=l.get(e.getBindings()),p=l.attributeUtils.createShaderVertexBuffers(e);let f;i.transparent===!0&&i.blending!==Xn&&(f=this._getBlending(i));let m={};i.stencilWrite===!0&&(m={compare:this._getStencilCompare(i),failOp:this._getStencilOperation(i.stencilFail),depthFailOp:this._getStencilOperation(i.stencilZFail),passOp:this._getStencilOperation(i.stencilZPass)});const g=this._getColorWriteMask(i),v=[];if(e.context.textures!==null){const M=e.context.textures;for(let E=0;E<M.length;E++){const C=u.getTextureFormatGPU(M[E]);v.push({format:C,blend:f,writeMask:g})}}else{const M=u.getCurrentColorFormat(e.context);v.push({format:M,blend:f,writeMask:g})}const x=l.get(o).module,b=l.get(a).module,w=this._getPrimitiveState(t,n,i),_=this._getDepthCompare(i),S=u.getCurrentDepthStencilFormat(e.context),T=u.getSampleCount(e.context);d.pipeline=c.createRenderPipeline({vertex:Object.assign({},x,{buffers:p}),fragment:Object.assign({},b,{targets:v}),primitive:w,depthStencil:{format:S,depthWriteEnabled:i.depthWrite,depthCompare:_,stencilFront:m,stencilBack:{},stencilReadMask:i.stencilFuncMask,stencilWriteMask:i.stencilWriteMask},multisample:{count:T,alphaToCoverageEnabled:i.alphaToCoverage},layout:c.createPipelineLayout({bindGroupLayouts:[h.layout]})})}createComputePipeline(e,t){const i=this.backend,n=i.device,s=i.get(e.computeProgram).module,o=i.get(e),a=i.get(t);o.pipeline=n.createComputePipeline({compute:s,layout:n.createPipelineLayout({bindGroupLayouts:[a.layout]})})}_getBlending(e){let t,i;const n=e.blending;if(n===w0){const s=e.blendSrcAlpha!==null?e.blendSrcAlpha:cr.One,o=e.blendDstAlpha!==null?e.blendDstAlpha:cr.Zero,a=e.blendEquationAlpha!==null?e.blendEquationAlpha:cr.Add;t={srcFactor:this._getBlendFactor(e.blendSrc),dstFactor:this._getBlendFactor(e.blendDst),operation:this._getBlendOperation(e.blendEquation)},i={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(o),operation:this._getBlendOperation(a)}}else{const s=e.premultipliedAlpha,o=(a,l,c,u)=>{t={srcFactor:a,dstFactor:l,operation:Dp.Add},i={srcFactor:c,dstFactor:u,operation:Dp.Add}};if(s)switch(n){case Eo:o(cr.SrcAlpha,cr.OneMinusSrcAlpha,cr.One,cr.OneMinusSrcAlpha);break;case Nl:o(cr.SrcAlpha,cr.One,cr.One,cr.One);break;case Cu:o(cr.Zero,cr.OneMinusSrc,cr.Zero,cr.One);break;case Au:o(cr.Zero,cr.Src,cr.Zero,cr.SrcAlpha);break}else switch(n){case Eo:o(cr.SrcAlpha,cr.OneMinusSrcAlpha,cr.One,cr.OneMinusSrcAlpha);break;case Nl:o(cr.SrcAlpha,cr.One,cr.SrcAlpha,cr.One);break;case Cu:o(cr.Zero,cr.OneMinusSrc,cr.Zero,cr.One);break;case Au:o(cr.Zero,cr.Src,cr.Zero,cr.Src);break}}if(t!==void 0&&i!==void 0)return{color:t,alpha:i};console.error("THREE.WebGPURenderer: Invalid blending: ",n)}_getBlendFactor(e){let t;switch(e){case E0:t=cr.Zero;break;case C0:t=cr.One;break;case A0:t=cr.Src;break;case N0:t=cr.OneMinusSrc;break;case qf:t=cr.SrcAlpha;break;case Kf:t=cr.OneMinusSrcAlpha;break;case L0:t=cr.Dst;break;case O0:t=cr.OneMinusDstColor;break;case R0:t=cr.DstAlpha;break;case k0:t=cr.OneMinusDstAlpha;break;case P0:t=cr.SrcAlphaSaturated;break;case sWe:t=cr.Constant;break;case oWe:t=cr.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const i=e.stencilFunc;switch(i){case WA:t=ss.Never;break;case zw:t=ss.Always;break;case $A:t=ss.Less;break;case qA:t=ss.LessEqual;break;case XA:t=ss.Equal;break;case ZA:t=ss.GreaterEqual;break;case KA:t=ss.Greater;break;case YA:t=ss.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",i)}return t}_getStencilOperation(e){let t;switch(e){case um:t=fd.Keep;break;case FA:t=fd.Zero;break;case BA:t=fd.Replace;break;case HA:t=fd.Invert;break;case zA:t=fd.IncrementClamp;break;case VA:t=fd.DecrementClamp;break;case GA:t=fd.IncrementWrap;break;case jA:t=fd.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case to:t=Dp.Add;break;case _0:t=Dp.Subtract;break;case S0:t=Dp.ReverseSubtract;break;case T0:t=Dp.Min;break;case M0:t=Dp.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,i){const n={},s=this.backend.utils;if(n.topology=s.getPrimitiveTopology(e,i),e.isLine===!0&&e.isLineSegments!==!0){const o=t.index?t.index.count:t.attributes.position.count;n.stripIndexFormat=o>65535?Ug.Uint32:Ug.Uint16}switch(i.side){case eo:n.frontFace=PO.CCW,n.cullMode=IO.Back;break;case Oi:n.frontFace=PO.CCW,n.cullMode=IO.Front;break;case Wi:n.frontFace=PO.CCW,n.cullMode=IO.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",i.side);break}return n}_getColorWriteMask(e){return e.colorWrite===!0?lq.All:lq.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=ss.Always;else{const i=e.depthFunc;switch(i){case I0:t=ss.Never;break;case D0:t=ss.Always;break;case U0:t=ss.Less;break;case uh:t=ss.LessEqual;break;case F0:t=ss.Equal;break;case B0:t=ss.GreaterEqual;break;case z0:t=ss.Greater;break;case V0:t=ss.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",i)}}return t}}const r$e=t$e;let pq=null;navigator.gpu!==void 0&&(pq=await navigator.gpu.requestAdapter());class i$e extends nq{constructor(e={}){super(e),this.parameters.antialias=e.antialias===!0,this.parameters.antialias===!0?this.parameters.sampleCount=e.sampleCount===void 0?4:e.sampleCount:this.parameters.sampleCount=1,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.adapter=null,this.device=null,this.context=null,this.colorBuffer=null,this.defaultDepthTexture=new Hh,this.defaultDepthTexture.name="depthBuffer",this.utils=new X9e(this),this.attributeUtils=new J9e(this),this.bindingUtils=new e$e(this),this.pipelineUtils=new r$e(this),this.textureUtils=new L9e(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters,i={powerPreference:t.powerPreference},n=await navigator.gpu.requestAdapter(i);if(n===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const s=Object.values(UO),o=[];for(const u of s)n.features.has(u)&&o.push(u);const a={requiredFeatures:o,requiredLimits:t.requiredLimits},l=await n.requestDevice(a),c=t.context!==void 0?t.context:e.domElement.getContext("webgpu");this.adapter=n,this.device=l,this.context=c,this.updateSize()}get coordinateSystem(){return Oh}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}beginRender(e){const t=this.get(e),i=this.device,n=e.occlusionQueryCount;let s;n>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,s=i.createQuerySet({type:"occlusion",count:n}),t.occlusionQuerySet=s,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(n),t.lastOcclusionObject=null);const o={colorAttachments:[{view:null}],depthStencilAttachment:{view:null},occlusionQuerySet:s},a=o.colorAttachments[0],l=o.depthStencilAttachment,c=this.parameters.antialias;if(e.textures!==null){const h=e.textures;o.colorAttachments=[];const p=o.colorAttachments;for(let m=0;m<h.length;m++){const g=this.get(h[m]),v=g.texture.createView({baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,dimension:md.TwoD});let x,b;g.msaaTexture!==void 0?(x=g.msaaTexture.createView(),b=v):(x=v,b=void 0),p.push({view:x,resolveTarget:b,loadOp:dn.Load,storeOp:ol.Store})}const f=this.get(e.depthTexture);l.view=f.texture.createView(),e.stencil&&e.depthTexture.format===hs&&(e.stencil=!1)}else c===!0?(a.view=this.colorBuffer.createView(),a.resolveTarget=this.context.getCurrentTexture().createView()):(a.view=this.context.getCurrentTexture().createView(),a.resolveTarget=void 0),l.view=this._getDepthBufferGPU(e).createView();if(e.textures!==null){const h=o.colorAttachments;for(let p=0;p<h.length;p++){const f=h[p];e.clearColor?(f.clearValue=e.clearColorValue,f.loadOp=dn.Clear,f.storeOp=ol.Store):(f.loadOp=dn.Load,f.storeOp=ol.Store)}}else e.clearColor?(a.clearValue=e.clearColorValue,a.loadOp=dn.Clear,a.storeOp=ol.Store):(a.loadOp=dn.Load,a.storeOp=ol.Store);e.depth&&(e.clearDepth?(l.depthClearValue=e.clearDepthValue,l.depthLoadOp=dn.Clear,l.depthStoreOp=ol.Store):(l.depthLoadOp=dn.Load,l.depthStoreOp=ol.Store)),e.stencil&&(e.clearStencil?(l.stencilClearValue=e.clearStencilValue,l.stencilLoadOp=dn.Clear,l.stencilStoreOp=ol.Store):(l.stencilLoadOp=dn.Load,l.stencilStoreOp=ol.Store));const u=i.createCommandEncoder({label:"renderContext_"+e.id}),d=u.beginRenderPass(o);if(t.descriptor=o,t.encoder=u,t.currentPass=d,t.currentSets={attributes:{}},e.viewport&&this.updateViewport(e),e.scissor){const{x:h,y:p,width:f,height:m}=e.scissorValue;d.setScissorRect(h,e.height-m-p,f,m)}}finishRender(e){const t=this.get(e),i=e.occlusionQueryCount;if(i>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery(),t.currentPass.end(),i>0){const n=i*8;let s=this.occludedResolveCache.get(n);s===void 0&&(s=this.device.createBuffer({size:n,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(n,s));const o=this.device.createBuffer({size:n,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,i,s,0),t.encoder.copyBufferToBuffer(s,0,o,0,n),t.occlusionQueryBuffer=o,this.resolveOccludedAsync(e)}if(this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const n=e.textures;for(let s=0;s<n.length;s++){const o=n[s];o.generateMipmaps===!0&&this.textureUtils.generateMipmaps(o)}}}isOccluded(e,t){const i=this.get(e);return i.occluded&&i.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:i,currentOcclusionQueryObjects:n}=t;if(i&&n){const s=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await i.mapAsync(GPUMapMode.READ);const o=i.getMappedRange(),a=new BigUint64Array(o);for(let l=0;l<n.length;l++)a[l]!==0n&&s.add(n[l]);i.destroy(),t.occluded=s}}updateViewport(e){const{currentPass:t}=this.get(e);let{x:i,y:n,width:s,height:o,minDepth:a,maxDepth:l}=e.viewportValue;t.setViewport(i,e.height-o-n,s,o,a,l)}clear(e,t,i,n){const s=this.device,o=this.get(e),{descriptor:a}=o;i=i&&e.depth,n=n&&e.stencil;const l=a.colorAttachments[0],c=a.depthStencilAttachment;this.parameters.antialias===!0?(l.view=this.colorBuffer.createView(),l.resolveTarget=this.context.getCurrentTexture().createView()):(l.view=this.context.getCurrentTexture().createView(),l.resolveTarget=void 0),a.depthStencilAttachment.view=this._getDepthBufferGPU(e).createView(),t?(l.loadOp=dn.Clear,l.clearValue=e.clearColorValue):l.loadOp=dn.Load,i?(c.depthLoadOp=dn.Clear,c.depthClearValue=e.clearDepthValue):c.depthLoadOp=dn.Load,n?(c.stencilLoadOp=dn.Clear,c.stencilClearValue=e.clearStencilValue):c.stencilLoadOp=dn.Load,o.encoder=s.createCommandEncoder({}),o.currentPass=o.encoder.beginRenderPass(a),o.currentPass.end(),s.queue.submit([o.encoder.finish()])}beginCompute(e){const t=this.get(e);t.cmdEncoderGPU=this.device.createCommandEncoder({}),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass()}compute(e,t,i,n){const{passEncoderGPU:s}=this.get(e),o=this.get(n).pipeline;s.setPipeline(o);const a=this.get(i).group;s.setBindGroup(0,a),s.dispatchWorkgroups(t.dispatchCount)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.device.queue.submit([t.cmdEncoderGPU.finish()])}draw(e,t){const{object:i,geometry:n,context:s,pipeline:o}=e,a=this.get(e.getBindings()),l=this.get(s),c=this.get(o).pipeline,u=l.currentSets,d=l.currentPass;u.pipeline!==c&&(d.setPipeline(c),u.pipeline=c);const h=a.group;d.setBindGroup(0,h);const p=e.getIndex(),f=p!==null;if(f===!0&&u.index!==p){const b=this.get(p).buffer,w=p.array instanceof Uint16Array?Ug.Uint16:Ug.Uint32;d.setIndexBuffer(b,w),u.index=p}const m=e.getVertexBuffers();for(let b=0,w=m.length;b<w;b++){const _=m[b];if(u.attributes[b]!==_){const S=this.get(_).buffer;d.setVertexBuffer(b,S),u.attributes[b]=_}}if(l.occlusionQuerySet!==void 0){const b=l.lastOcclusionObject;b!==i&&(b!==null&&b.occlusionTest===!0&&(d.endOcclusionQuery(),l.occlusionQueryIndex++),i.occlusionTest===!0&&(d.beginOcclusionQuery(l.occlusionQueryIndex),l.occlusionQueryObjects[l.occlusionQueryIndex]=i),l.lastOcclusionObject=i)}const g=n.drawRange,v=g.start,x=this.getInstanceCount(e);if(x!==0)if(f===!0){const b=g.count!==1/0?g.count:p.count;d.drawIndexed(b,x,v,0,0),t.update(i,b,x)}else{const b=n.attributes.position,w=g.count!==1/0?g.count:b.count;d.draw(w,x,v,0),t.update(i,w,x)}}needsUpdate(e){const t=this.get(e),{object:i,material:n}=e,s=this.utils,o=s.getSampleCount(e.context),a=s.getCurrentColorSpace(e.context),l=s.getCurrentColorFormat(e.context),c=s.getCurrentDepthStencilFormat(e.context),u=s.getPrimitiveTopology(i,n);let d=!1;return(t.sampleCount!==o||t.colorSpace!==a||t.colorFormat!==l||t.depthStencilFormat!==c||t.primitiveTopology!==u)&&(t.sampleCount=o,t.colorSpace=a,t.colorFormat=l,t.depthStencilFormat=c,t.primitiveTopology=u,d=!0),d}getCacheKey(e){const{object:t,material:i}=e,n=this.utils,s=e.context;return[n.getSampleCount(s),n.getCurrentColorSpace(s),n.getCurrentColorFormat(s),n.getCurrentDepthStencilFormat(s),n.getPrimitiveTopology(t,i)].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}copyTextureToBuffer(e,t,i,n,s){return this.textureUtils.copyTextureToBuffer(e,t,i,n,s)}createNodeBuilder(e,t,i=null){return new W9e(e,t,i)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e){this.pipelineUtils.createRenderPipeline(e)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}createBindings(e){this.bindingUtils.createBindings(e)}updateBindings(e){this.bindingUtils.createBindings(e)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this._configureContext(),this._setupColorBuffer()}hasFeature(e){const t=this.adapter||pq;if(Object.values(UO).includes(e)===!1)throw new Error("THREE.WebGPURenderer: Unknown WebGPU GPU feature: "+e);return t.features.has(e)}copyFramebufferToTexture(e,t){const i=this.get(t),{encoder:n,descriptor:s}=i;let o=null;e.isFramebufferTexture?o=this.context.getCurrentTexture():e.isDepthTexture&&(o=this._getDepthBufferGPU(t));const a=this.get(e).texture;i.currentPass.end(),n.copyTextureToTexture({texture:o,origin:{x:0,y:0,z:0}},{texture:a},[e.image.width,e.image.height]),e.generateMipmaps&&this.textureUtils.generateMipmaps(e),s.colorAttachments[0].loadOp=dn.Load,t.depth&&(s.depthStencilAttachment.depthLoadOp=dn.Load),t.stencil&&(s.depthStencilAttachment.stencilLoadOp=dn.Load),i.currentPass=n.beginRenderPass(s),i.currentSets={attributes:{}}}_getDepthBufferGPU(e){const{width:t,height:i}=this.getDrawingBufferSize(),n=this.defaultDepthTexture,s=this.get(n).texture;let o,a;if(e.stencil?(o=so,a=Ao):e.depth&&(o=hs,a=no),s!==void 0){if(n.image.width===t&&n.image.height===i&&n.format===o&&n.type===a)return s;this.textureUtils.destroyTexture(n)}return n.name="depthBuffer",n.format=o,n.type=a,n.image.width=t,n.image.height=i,this.textureUtils.createTexture(n,{sampleCount:this.parameters.sampleCount,width:t,height:i}),this.get(n).texture}_configureContext(){this.context.configure({device:this.device,format:Je.BGRA8Unorm,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:"premultiplied"})}_setupColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const{width:e,height:t}=this.getDrawingBufferSize();this.colorBuffer=this.device.createTexture({label:"colorBuffer",size:{width:e,height:t,depthOrArrayLayers:1},sampleCount:this.parameters.sampleCount,format:Je.BGRA8Unorm,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC})}}const n$e=i$e;class s$e extends XWe{constructor(e={}){let t;ZHe.isAvailable()?t=n$e:(t=y9e,console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."));const i=new t(e);super(i),this.isWebGPURenderer=!0}}const o$e=s$e;var Xb=function(){var r=0,e=document.createElement("div");e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",function(u){u.preventDefault(),i(++r%e.children.length)},!1);function t(u){return e.appendChild(u.dom),u}function i(u){for(var d=0;d<e.children.length;d++)e.children[d].style.display=d===u?"block":"none";r=u}var n=(performance||Date).now(),s=n,o=0,a=t(new Xb.Panel("FPS","#0ff","#002")),l=t(new Xb.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new Xb.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:t,showPanel:i,begin:function(){n=(performance||Date).now()},end:function(){o++;var u=(performance||Date).now();if(l.update(u-n,200),u>=s+1e3&&(a.update(o*1e3/(u-s),100),s=u,o=0,c)){var d=performance.memory;c.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return u},update:function(){n=this.end()},domElement:e,setMode:i}};Xb.Panel=function(r,e,t){var i=1/0,n=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,l=48*o,c=3*o,u=2*o,d=3*o,h=15*o,p=74*o,f=30*o,m=document.createElement("canvas");m.width=a,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=t,g.fillRect(0,0,a,l),g.fillStyle=e,g.fillText(r,c,u),g.fillRect(d,h,p,f),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(d,h,p,f),{dom:m,update:function(v,x){i=Math.min(i,v),n=Math.max(n,v),g.fillStyle=t,g.globalAlpha=1,g.fillRect(0,0,a,h),g.fillStyle=e,g.fillText(s(v)+" "+r+" ("+s(i)+"-"+s(n)+")",c,u),g.drawImage(m,d+o,h,p-o,f,d,h,p-o,f),g.fillRect(d+p-o,h,o,f),g.fillStyle=t,g.globalAlpha=.9,g.fillRect(d+p-o,h,o,s((1-v/x)*f))}}};const a$e=Xb;class l$e extends nr{constructor(e,t){super(),this.isViewHelper=!0,this.animating=!1,this.center=new oe;const i=new at("#ff3653"),n=new at("#8adb00"),s=new at("#2c8fff"),o=[],a=new q_,l=new qe,c=new nr,u=new fa(-2,2,2,-2,0,4);u.position.set(0,0,2);const d=new vi(.8,.05,.05).translate(.4,0,0),h=new mt(d,F(i)),p=new mt(d,F(n)),f=new mt(d,F(s));p.rotation.z=Math.PI/2,f.rotation.y=-Math.PI/2,this.add(h),this.add(f),this.add(p);const m=new Tc(B(i,"X"));m.userData.type="posX";const g=new Tc(B(n,"Y"));g.userData.type="posY";const v=new Tc(B(s,"Z"));v.userData.type="posZ";const x=new Tc(B(i));x.userData.type="negX";const b=new Tc(B(n));b.userData.type="negY";const w=new Tc(B(s));w.userData.type="negZ",m.position.x=1,g.position.y=1,v.position.z=1,x.position.x=-1,x.scale.setScalar(.8),b.position.y=-1,b.scale.setScalar(.8),w.position.z=-1,w.scale.setScalar(.8),this.add(m),this.add(g),this.add(v),this.add(x),this.add(b),this.add(w),o.push(m),o.push(g),o.push(v),o.push(x),o.push(b),o.push(w);const _=new oe,S=128,T=2*Math.PI;this.render=function(k){this.quaternion.copy(e.quaternion).invert(),this.updateMatrixWorld(),_.set(0,0,1),_.applyQuaternion(e.quaternion),_.x>=0?(m.material.opacity=1,x.material.opacity=.5):(m.material.opacity=.5,x.material.opacity=1),_.y>=0?(g.material.opacity=1,b.material.opacity=.5):(g.material.opacity=.5,b.material.opacity=1),_.z>=0?(v.material.opacity=1,w.material.opacity=.5):(v.material.opacity=.5,w.material.opacity=1);const z=t.offsetWidth-S;k.clearDepth(),k.getViewport(A),k.setViewport(z,0,S,S),k.render(this,u),k.setViewport(A.x,A.y,A.z,A.w)};const M=new oe,E=new Rr,C=new Rr,P=new Rr,A=new jt;let N=0;this.handleClick=function(k){if(this.animating===!0)return!1;const z=t.getBoundingClientRect(),O=z.left+(t.offsetWidth-S),V=z.top+(t.offsetHeight-S);l.x=(k.clientX-O)/(z.right-O)*2-1,l.y=-((k.clientY-V)/(z.bottom-V))*2+1,a.setFromCamera(l,u);const U=a.intersectObjects(o);if(U.length>0){const G=U[0].object;return R(G,this.center),this.animating=!0,!0}else return!1},this.update=function(k){const z=k*T;C.rotateTowards(P,z),e.position.set(0,0,1).applyQuaternion(C).multiplyScalar(N).add(this.center),e.quaternion.rotateTowards(E,z),C.angleTo(P)===0&&(this.animating=!1)},this.dispose=function(){d.dispose(),h.material.dispose(),p.material.dispose(),f.material.dispose(),m.material.map.dispose(),g.material.map.dispose(),v.material.map.dispose(),x.material.map.dispose(),b.material.map.dispose(),w.material.map.dispose(),m.material.dispose(),g.material.dispose(),v.material.dispose(),x.material.dispose(),b.material.dispose(),w.material.dispose()};function R(k,z){switch(k.userData.type){case"posX":M.set(1,0,0),E.setFromEuler(new Xi(0,Math.PI*.5,0));break;case"posY":M.set(0,1,0),E.setFromEuler(new Xi(-Math.PI*.5,0,0));break;case"posZ":M.set(0,0,1),E.setFromEuler(new Xi);break;case"negX":M.set(-1,0,0),E.setFromEuler(new Xi(0,-Math.PI*.5,0));break;case"negY":M.set(0,-1,0),E.setFromEuler(new Xi(Math.PI*.5,0,0));break;case"negZ":M.set(0,0,-1),E.setFromEuler(new Xi(0,Math.PI,0));break;default:console.error("ViewHelper: Invalid axis.")}N=e.position.distanceTo(z),M.multiplyScalar(N).add(z),c.position.copy(z),c.lookAt(e.position),C.copy(c.quaternion),c.lookAt(M),P.copy(c.quaternion)}function F(k){return new Ei({color:k,toneMapped:!1})}function B(k,z=null){const O=document.createElement("canvas");O.width=64,O.height=64;const V=O.getContext("2d");V.beginPath(),V.arc(32,32,16,0,2*Math.PI),V.closePath(),V.fillStyle=k.getStyle(),V.fill(),z!==null&&(V.font="24px Arial",V.textAlign="center",V.fillStyle="#000000",V.fillText(z,32,41));const U=new IN(O);return new Wh({map:U,toneMapped:!1})}}}const Q2=new a$e;Q2.dom.style.top="unset",Q2.dom.style.bottom="0",document.body.appendChild(Q2.dom);class c$e extends Ln{constructor(t,i){super();vt(this,"rendererGL");vt(this,"rendererGPU");vt(this,"renderer");vt(this,"clock");vt(this,"size",{width:640,height:480});vt(this,"uuid",$i.generateUUID());vt(this,"root");vt(this,"currentScene");vt(this,"currentCamera");vt(this,"cameraPersp");vt(this,"cameraOrtho");vt(this,"composer");vt(this,"renderPass");vt(this,"outlinePass");vt(this,"outputPass");vt(this,"effectFXAA");vt(this,"orbit");vt(this,"controls");vt(this,"beforeTransformedObject");vt(this,"beforeTransformed",new nr);vt(this,"gridHelper");vt(this,"viewHelper");vt(this,"cameraHelper");vt(this,"lightHelper",null);vt(this,"raycaster");vt(this,"fnPointerDown");vt(this,"fnPointerUp");vt(this,"positionDown",new qe);vt(this,"working",!1);vt(this,"keydownListener");this.context=t,this.history=i,this.clock=new X_,this.rendererGL=new AN({canvas:this.context,antialias:!0}),this.renderer=this.rendererGPU||this.rendererGL,this.renderer.outputColorSpace=Lt,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.autoUpdate=!0,this.renderer.shadowMap.type=Nw,this.renderer.autoClear=!1,this.renderer.toneMapping=dh,this.renderer.setClearColor(16777215),Vo.gpuComputeRender=new Rje(b8e,x8e,this.renderer),this.root=new qa,this.cameraPersp=new Yr(50,1,.001,1e3),this.cameraPersp.name="Perspective",this.cameraPersp.position.set(0,3,12),this.cameraPersp.lookAt(0,0,0),this.cameraOrtho=new fa(-3,3,3,-3,.01,3e4),this.cameraOrtho.name="Orthographic",this.cameraOrtho.position.set(0,0,100),this.root.add(this.cameraOrtho),this.root.add(this.cameraPersp),this.currentCamera=this.cameraPersp,this.composer=new IHe(this.renderer),this.renderPass=new DHe(this.root,this.currentCamera),this.composer.addPass(this.renderPass),this.outlinePass=new dd(new qe(this.size.width,this.size.height),this.root,this.currentCamera),this.outlinePass.resolution=new qe(this.size.width,this.size.height),this.outlinePass.edgeStrength=25,this.outlinePass.edgeGlow=1,this.outlinePass.pulsePeriod=3,this.outlinePass.edgeThickness=1,this.outlinePass.usePatternTexture=!1,this.composer.addPass(this.outlinePass),this.outputPass=new FHe,this.composer.addPass(this.outputPass),this.effectFXAA=new DX(BHe),this.effectFXAA.uniforms.resolution.value.set(1/this.size.width,1/this.size.height),this.composer.addPass(this.effectFXAA);const n=new VHe(this.currentCamera,this.renderer.domElement);n.minDistance=1,n.maxDistance=100,n.update(),this.orbit=n;const s=new GHe(this.currentCamera,this.renderer.domElement);s.addEventListener("dragging-changed",function(a){n.enabled=!a.value}),s.traverse(a=>a.castShadow=!1),this.controls=s,this.root.add(this.controls);const o=new qG(20,20,12698049,9276813);o.visible=!!JSON.parse(localStorage.getItem("isGridHelperVisible")||"1"),this.gridHelper=o,this.root.add(this.gridHelper),this.cameraHelper=new JG(this.currentCamera),this.cameraHelper.visible=!1,this.root.add(this.cameraHelper),this.viewHelper=new l$e(this.currentCamera,this.renderer.domElement),this.raycaster=new q_,this.fnPointerDown=a=>{this.onPointerDown(a)},this.fnPointerUp=a=>{this.onPointerUp(a)},this.context.addEventListener("pointerdown",this.fnPointerDown),this.context.addEventListener("pointerup",this.fnPointerUp),this.keydownListener=a=>{switch(a.keyCode){case 81:s.setSpace(s.space==="local"?"world":"local");break;case 87:s.setMode("translate");break;case 69:s.setMode("rotate");break;case 82:s.setMode("scale");break;case 88:s.showX=!s.showX;break;case 89:s.showY=!s.showY;break;case 90:s.showZ=!s.showZ;break;case 32:s.enabled=!s.enabled;break}},this.resize(this.context.width,this.context.height)}resize(t,i){if(!this.context)return;this.size.width=t,this.size.height=i;const n=this.size.width/this.size.height;this.renderer instanceof o$e?this.renderer.setSize(t,i):this.renderer.setViewport(0,0,t,i),this.outlinePass.resolution=new qe(this.size.width,this.size.height),this.outlinePass.setSize(this.size.width,this.size.height),this.effectFXAA.uniforms.resolution.value.set(1/this.size.width,1/this.size.height),this.cameraPersp.aspect=n,this.cameraPersp.updateProjectionMatrix(),this.cameraOrtho.top=this.cameraOrtho.right/n,this.cameraOrtho.bottom=-this.cameraOrtho.top,this.cameraOrtho.updateProjectionMatrix(),this.currentCamera.parent!==this.root&&this.currentCamera instanceof Yr&&(this.currentCamera.aspect=n,this.currentCamera.updateProjectionMatrix())}updateSettings(t){const i=this.renderer;for(const[n,s]of Object.entries(t))n==="shadowMap"?(i.shadowMap[n].enabled=s.enabled,i.shadowMap[n].type=s.type):i[n]=s}setCamera(t){this.currentCamera!==t&&(this.currentCamera=t,this.orbit.saveState(),this.orbit.object=t,this.orbit.reset(),this.controls.camera=t,this.currentCamera.parent!==this.root&&this.currentCamera instanceof Yr&&(this.currentCamera.aspect=this.size.width/this.size.height,this.currentCamera.updateProjectionMatrix()),this.renderPass.camera=this.currentCamera,this.outlinePass.renderCamera=this.currentCamera)}reposCamera(){this.currentCamera.position.set(0,3,8),this.currentCamera.rotation.set(0,0,0),this.currentCamera.lookAt(new oe(0,0,0))}setScene(t){this.currentScene!==t&&(this.currentScene&&(this.root.remove(this.currentScene),this.currentScene.deactive()),this.controls.detach(),this.currentScene=t,this.root.background=t.background,this.root.environment=t.environment,this.root.add(this.currentScene),this.recompileMaterials(),this.currentScene.active())}selectObject(t,i){if(!(!i&&t===this.controls.object)){if(this.controls.object&&(this.controls.detach(),window.removeEventListener("keydown",this.keydownListener)),this.lightHelper){this.lightHelper.removeFromParent();const n=this.lightHelper;setTimeout(()=>{n.dispose()}),this.lightHelper=null}this.cameraHelper.visible=!1,t&&(t instanceof _c?(this.cameraHelper.visible=!0,this.cameraHelper.camera=t,this.cameraHelper.matrix=t.matrixWorld,this.cameraHelper.update(),this.cameraHelper.visible=!0):t instanceof Il?(this.lightHelper=new HG(t),this.root.add(this.lightHelper)):t instanceof Pl?(this.lightHelper=new GG(t),this.root.add(this.lightHelper)):t instanceof Dl?(this.lightHelper=new ZG(t),this.root.add(this.lightHelper)):t instanceof ip&&(this.lightHelper=new XG(t,10),this.root.add(this.lightHelper)),this.controls.attach(t),window.addEventListener("keydown",this.keydownListener)),this.dispatchEvent({type:"objectChanged",soure:this,object:t})}}get selected(){return this.controls.object}render(t,i){Vo.delta=t,Vo.now=i,this.currentScene&&this.currentScene.update(this.renderer,this.currentCamera,t,i,!0),Lg.update(),this.renderer.autoClear=!0,this.renderer.isWebGPURenderer?this.renderer.render(this.root,this.currentCamera):this.composer.render(t),this.renderer.autoClear=!1,this.viewHelper.render(this.renderer)}async run(){if(this.working)throw new Error("already working");console.log("world start"),this.dispatchEvent({type:"worldStarted",soure:this,world:this}),this.working=!0,this.clock.start();const t=(i,n)=>{if(!this.working){this.renderer.setAnimationLoop(null);return}const s=this.clock.getDelta(),o=this.clock.oldTime,a=Date.now();this.render(s,o);const l=Date.now();l-a>=100&&console.warn(`render take ${l-a} ms`),Q2.update()};this.renderer.setAnimationLoop(t)}onPointerDown(t){if(!this.currentScene)return;this.controls.object&&(this.beforeTransformedObject=this.controls.object,this.beforeTransformed.position.copy(this.controls.object.position),this.beforeTransformed.scale.copy(this.controls.object.scale),this.beforeTransformed.rotation.copy(this.controls.object.rotation));const{left:i,top:n,width:s,height:o}=this.context.getBoundingClientRect();this.positionDown.set((t.clientX-i)/s*2-1,-(t.clientY-n)/o*2+1)}onPointerUp(t){if(!this.currentScene)return;if(this.beforeTransformedObject&&this.controls.object===this.beforeTransformedObject){const c=this.controls.object,u=this.beforeTransformed.position.clone(),d=this.beforeTransformed.scale.clone(),h=this.beforeTransformed.rotation.clone(),p=this.controls.object.position.clone(),f=this.controls.object.scale.clone(),m=this.controls.object.rotation.clone();u.equals(p)&&d.equals(f)&&h.equals(m)||(this.dispatchEvent({type:"objectModified",soure:this,objects:[this.controls.object]}),this.history.push({tip:"Object changed!",undo:()=>{c.position.copy(u),c.scale.copy(d),c.rotation.copy(h)},redo:()=>{c.position.copy(p),c.scale.copy(f),c.rotation.copy(m)}}))}const{left:i,top:n,width:s,height:o}=this.context.getBoundingClientRect(),a=new qe((t.clientX-i)/s*2-1,-(t.clientY-n)/o*2+1);if(!a.equals(this.positionDown))return;this.raycaster.setFromCamera(a,this.currentCamera);const l=this.raycaster.intersectObjects(this.currentScene.children,!1);if(l.length>0){const c=l[0].object;this.controls.object!==c&&this.selectObject(c,!0)}}recompileMaterials(){this.currentScene&&this.currentScene.traverse(t=>{if(t.material instanceof Wr)t.material.needsUpdate=!0;else if(Array.isArray(t.material))for(const i of t.material)i.material.needsUpdate=!0})}dispose(){this.context.removeEventListener("pointerdown",this.fnPointerDown),this.context.removeEventListener("pointerup",this.fnPointerUp),window.removeEventListener("keydown",this.keydownListener),this.viewHelper.dispose(),this.composer.dispose(),this.renderPass&&this.renderPass.dispose(),this.outlinePass&&this.outlinePass.dispose(),this.outputPass.dispose(),this.effectFXAA.dispose(),this.clock.stop(),this.renderer.dispose()}}let u$e=0;class eT extends EventTarget{constructor(){super(),this._id=u$e++,this._serializable=!0}get id(){return this._id}setSerializable(e){return this._serializable=e,this}getSerializable(){return this._serializable}serialize(){console.warn("Serializer: Abstract function.")}deserialize(e){console.warn("Serializer: Abstract function.")}deserializeLib(e,t){}get className(){return this.constructor.name}toJSON(e=null){let t=null;const i=this.id;if(e!==null){const n=e.objects;t=n[i],t===void 0&&(t={objects:n},this.serialize(t),delete t.objects,n[i]=t)}else t={objects:{}},this.serialize(t);return t.id=i,t.type=this.className,t}}class d$e{constructor(){this.x=0,this.y=0,this.started=!1,this._onMoveEvent=e=>{const t=e.touches?e.touches[0]:e;this.x=t.clientX,this.y=t.clientY}}start(){if(!this.started)return this.started=!0,window.addEventListener("wheel",this._onMoveEvent,!0),window.addEventListener("mousedown",this._onMoveEvent,!0),window.addEventListener("touchstart",this._onMoveEvent,!0),window.addEventListener("mousemove",this._onMoveEvent,!0),window.addEventListener("touchmove",this._onMoveEvent,!0),window.addEventListener("dragover",this._onMoveEvent,!0),this}}const fq=new d$e().start(),qb=(r,e=null,t={})=>{t=Object.assign({className:"dragging",click:!1,bypass:!1},t);let i=null;const{className:n,click:s,bypass:o,postPosChangedEvent:a}=t,l=()=>{let h=r;for(;h&&h!==document;){const p=h.style.zoom;if(p)return Number(p);h=h.parentNode}return 1},c=h=>{const p=h.touches?h.touches[0]:h;o===!1&&h.stopImmediatePropagation(),i={client:{x:p.clientX,y:p.clientY},delta:{x:0,y:0},start:{x:r.offsetLeft,y:r.offsetTop},frame:0,isDown:!0,dragging:!1,isTouch:!!h.touches},s===!0&&(e(i),i.frame++),window.addEventListener("mousemove",u),window.addEventListener("mouseup",d),window.addEventListener("touchmove",u),window.addEventListener("touchend",d)},u=h=>{const{start:p,delta:f,client:m}=i,g=h.touches?h.touches[0]:h,v=l();f.x=(g.clientX-m.x)/v,f.y=(g.clientY-m.y)/v,i.x=p.x+f.x,i.y=p.y+f.y,i.dragging===!0?(e!==null?(e(i),i.frame++):r.style.cssText+=`; left: ${i.x}px; top: ${i.y}px;`,o===!1&&h.stopImmediatePropagation()):(Math.abs(f.x)>2||Math.abs(f.y)>2)&&(i.dragging=!0,r.classList.add("drag"),n&&document.body.classList.add(...n.split(" ")),o===!1&&h.stopImmediatePropagation())},d=h=>{if(o===!1&&h.stopImmediatePropagation(),r.classList.remove("drag"),n&&document.body.classList.remove(...n.split(" ")),window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",d),window.removeEventListener("touchmove",u),window.removeEventListener("touchend",d),e===null&&(r.removeEventListener("mousedown",c),r.removeEventListener("touchstart",c)),i.dragging=!1,i.isDown=!1,e!==null&&(e(i),i.frame++),a){const{delta:p}=i;(p.x||p.y)&&r.dispatchEvent(new Event("positionChanged",{x:i.x,y:i.y}))}};if(r instanceof Event){const h=r;r=h.target,c(h)}else r.addEventListener("mousedown",c),r.addEventListener("touchstart",c)},Go=(r,...e)=>{for(const t of r)if(t(...e)===!1)return!1;return!0},Wc=r=>(isNaN(r)===!1&&(r=`${r}px`),r),Kb=r=>(isNaN(r)===!1&&(r=`#${r.toString(16).padStart(6,"0")}`),r),h$e=(r,e)=>{e&&e.split(" ").forEach(t=>r.classList.remove(t))},p$e=(r,e)=>{e&&e.split(" ").forEach(t=>r.classList.add(t))};class ys{constructor(e=null,t=null){vt(this,"dashed",!1);this.inputElement=e,this.outputElement=t}get lioElement(){return ys.InputDirection==="left"?this.outputElement:this.inputElement}get rioElement(){return ys.InputDirection==="left"?this.inputElement:this.outputElement}}ys.InputDirection="left";let Up=null,bs=(Bp=class extends eT{constructor(t=!1){super();vt(this,"name");vt(this,"value");vt(this,"dom");vt(this,"inputsDOM");vt(this,"links");vt(this,"inputs");this.isElement=!0;const i=document.createElement("f-element");i.element=this;const n=s=>{let o=this;if(s.changedTouches&&s.changedTouches.length>0){const a=s.changedTouches[0];let l=document.elementFromPoint(a.clientX,a.clientY);for(;l&&(!l.element||!l.element.isElement);)l=l.parentNode;o=l?l.element:null}s.type==="mouseout"&&Up===o?Up=null:Up=o};t===!1&&(i.ontouchstart=i.onmousedown=s=>{s.stopPropagation()}),i.addEventListener("mouseup",n,!0),i.addEventListener("mouseover",n),i.addEventListener("mouseout",n),i.addEventListener("touchmove",n),i.addEventListener("touchend",n),this.inputs=[],this.links=[],this.dom=i,this.lioLength=0,this.rioLength=0,this.events={connect:[],connectChildren:[],valid:[]},this.node=null,this.style="",this.color=null,this.object=null,this.objectCallback=null,this.enabledInputs=!0,this.visible=!0,this.inputsDOM=i,this.disconnectDOM=null,this.lioDOM=this._createIO("lio"),this.rioDOM=this._createIO("rio"),this.dom.classList.add(`input-${ys.InputDirection}`),this.addEventListener("connect",()=>{Go(this.events.connect,this)}),this.addEventListener("connectChildren",()=>{Go(this.events.connectChildren,this)})}setAttribute(t,i){return this.dom.setAttribute(t,i),this}onValid(t){return this.events.valid.push(t),this}onConnect(t,i=!1){return this.events.connect.push(t),i&&this.events.connectChildren.push(t),this}setObjectCallback(t){return this.objectCallback=t,this}setObject(t){return this.object=t,this}getObject(t=null){return this.objectCallback?this.objectCallback(t):this.object}setVisible(t){return this.visible=t,this.dom.style.display=t?"":"none",this}getVisible(){return this.visible}setEnabledInputs(t){const i=this.dom;return this.enabledInputs||i.classList.remove("inputs-disable"),t||i.classList.add("inputs-disable"),this.enabledInputs=t,this}getEnabledInputs(){return this.enabledInputs}setColor(t){return this.dom.style["background-color"]=Kb(t),this.color=null,this}getColor(){if(this.color===null){const t=window.getComputedStyle(this.dom);this.color=t.getPropertyValue("background-color")}return this.color}setStyle(t){const i=this.dom;return this.style&&i.classList.remove(this.style),t&&i.classList.add(t),this.style=t,this.color=null,this}setInput(t){return ys.InputDirection==="left"?this.setLIO(t):this.setRIO(t)}setInputColor(t){return ys.InputDirection==="left"?this.setLIOColor(t):this.setRIOColor(t)}setOutput(t){return ys.InputDirection==="left"?this.setRIO(t):this.setLIO(t)}setOutputColor(t){return ys.InputDirection==="left"?this.setRIOColor(t):this.setLIOColor(t)}get inputLength(){return ys.InputDirection==="left"?this.lioLength:this.rioLength}get outputLength(){return ys.InputDirection==="left"?this.rioLength:this.lioLength}setLIOColor(t){return this.lioDOM.style["border-color"]=Kb(t),this}setLIO(t){return this.lioLength=t,this.lioDOM.style.visibility=t>0?"":"hidden",t>0?(this.dom.classList.add("lio"),this.dom.prepend(this.lioDOM)):(this.dom.classList.remove("lio"),this.lioDOM.remove()),this}getLIOColor(){return this.lioDOM.style["border-color"]}setRIOColor(t){return this.rioDOM.style["border-color"]=Kb(t),this}getRIOColor(){return this.rioDOM.style["border-color"]}setRIO(t){return this.rioLength=t,this.rioDOM.style.visibility=t>0?"":"hidden",t>0?(this.dom.classList.add("rio"),this.dom.prepend(this.rioDOM)):(this.dom.classList.remove("rio"),this.rioDOM.remove()),this}add(t){return this.inputs.push(t),t.element=this,this.inputsDOM.append(t.dom),this}setHeight(t){return this.dom.style.height=Wc(t),this}getHeight(){return parseInt(this.dom.style.height)}connect(t=null){if(this.disconnectDOM!==null&&this.disconnectDOM.dispatchEvent(new Event("disconnect")),t!==null){if(t=t.baseElement||t,Go(this.events.valid,this,t,"connect")===!1)return!1;const i=new ys(this,t);if(this.links.push(i),this.disconnectDOM===null){this.disconnectDOM=document.createElement("f-disconnect"),this.disconnectDOM.innerHTML=Bp.icons.unlink?`<i class='${Bp.icons.unlink}'></i>`:"\u2716",this.dom.append(this.disconnectDOM);const n=()=>{this.links=[],this.dom.removeChild(this.disconnectDOM),this.disconnectDOM.removeEventListener("mousedown",a,!0),this.disconnectDOM.removeEventListener("touchstart",a,!0),this.disconnectDOM.removeEventListener("disconnect",n,!0),t.removeEventListener("connect",s),t.removeEventListener("connectChildren",s),t.removeEventListener("nodeConnect",s),t.removeEventListener("nodeConnectChildren",s),t.removeEventListener("dispose",o),this.disconnectDOM=null},s=()=>{this.dispatchEvent(new Event("connectChildren"))},o=()=>{this.connect()},a=l=>{l.stopPropagation(),this.connect()};this.disconnectDOM.addEventListener("mousedown",a,!0),this.disconnectDOM.addEventListener("touchstart",a,!0),this.disconnectDOM.addEventListener("disconnect",n,!0),t.addEventListener("connect",s),t.addEventListener("connectChildren",s),t.addEventListener("nodeConnect",s),t.addEventListener("nodeConnectChildren",s),t.addEventListener("dispose",o)}}return this.dispatchEvent(new Event("connect")),!0}dispose(){this.dispatchEvent(new Event("dispose"))}getInputByProperty(t){for(const i of this.inputs)if(i.getProperty()===t)return i}serialize(t){const i=[],n=[],s=[];for(const o of this.inputs){const a=o.toJSON(t).id,l=o.getProperty();i.push(a),l!==null&&n.push({property:l,id:a})}for(const o of this.links)o.inputElement!==null&&o.outputElement!==null&&s.push(o.outputElement.toJSON(t).id);this.inputLength>0&&(t.inputLength=this.inputLength),this.outputLength>0&&(t.outputLength=this.outputLength),i.length>0&&(t.inputs=i),n.length>0&&(t.properties=n),s.length>0&&(t.links=s),this.style!==""&&(t.style=this.style),t.height=this.getHeight()}deserialize(t){if(t.inputLength!==void 0&&this.setInput(t.inputLength),t.outputLength!==void 0&&this.setOutput(t.outputLength),t.properties!==void 0)for(const{id:i,property:n}of t.properties)t.objects[i]=this.getInputByProperty(n);else if(t.inputs!==void 0){const i=this.inputs;if(i.length>0){let n=0;for(const s of t.inputs)t.objects[s]=i[n++]}else for(const n of t.inputs)this.add(t.objects[n])}if(t.links!==void 0)for(const i of t.links)this.connect(t.objects[i]);t.style!==void 0&&this.setStyle(t.style),t.height!==void 0&&this.setHeight(t.height)}getLinkedObject(t=null){const i=this.getLinkedElement();return i?i.getObject(t):null}getLinkedElement(){const t=this.getLink();return t?t.outputElement:null}getLink(){return this.links[0]}_createIO(t){const{dom:i}=this,n=document.createElement("f-io");n.style.visibility="hidden",n.className=t;const s=o=>{o.preventDefault(),o.stopPropagation(),Up=null;const a=this.node.dom;a.classList.add("io-connect"),n.classList.add("connect"),i.classList.add("select");const l=ys.InputDirection==="left"?"lio":"rio",c=t===l?new ys(this):new ys(null,this),u=new ys(c.inputElement,c.outputElement);this.links.push(c),qb(o,d=>{u.outputElement&&u.outputElement.dom.classList.remove("invalid"),u.inputElement&&u.inputElement.dom.classList.remove("invalid"),u.inputElement=c.inputElement,u.outputElement=c.outputElement,t===l?u.outputElement=Up:u.inputElement=Up;const h=u.inputElement!==null&&u.outputElement!==null&&u.inputElement.inputLength>0&&u.outputElement.outputLength>0&&Go(u.inputElement.events.valid,u.inputElement,u.outputElement,d.dragging?"dragging":"dragged")===!1;if(d.dragging&&h){t===l?u.outputElement&&u.outputElement.dom.classList.add("invalid"):u.inputElement&&u.inputElement.dom.classList.add("invalid");return}if(!d.dragging&&(a.classList.remove("io-connect"),n.classList.remove("connect"),i.classList.remove("select"),this.links.splice(this.links.indexOf(c),1),Up!==null&&!h)){if(c.inputElement=u.inputElement,c.outputElement=u.outputElement,c.outputElement.node.isCircular(c.inputElement.node))return;c.inputElement.inputLength>0&&c.outputElement.outputLength>0&&c.inputElement.connect(c.outputElement)}},{className:"connecting"})};return n.addEventListener("mousedown",s,!0),n.addEventListener("touchstart",s,!0),n}},vt(Bp,"icons",{}),Bp);bs.icons={unlink:""};class $c extends eT{constructor(t){super();vt(this,"dom");vt(this,"events");vt(this,"update");this.dom=t,this.element=null,this.extra=null,this.tagColor=null,this.property=null,this.events={change:[],click:[]},this.addEventListener("change",()=>{Go(this.events.change,this)}),this.addEventListener("click",()=>{Go(this.events.click,this)})}setExtra(t){return this.extra=t,this}getExtra(){return this.extra}setProperty(t){return this.property=t,this}getProperty(){return this.property}setTagColor(t){return this.tagColor=t,this.dom.style["border-left"]=`2px solid ${t}`,this}getTagColor(){return this.tagColor}setToolTip(t){const i=document.createElement("f-tooltip");return i.innerText=t,this.dom.append(i),this}onChange(t){return this.events.change.push(t),this}onClick(t){return this.events.click.push(t),this}setReadOnly(t){return this.getInput().readOnly=t,this}getReadOnly(){return this.getInput().readOnly}setValue(t,i=!0){return this.getInput().value=t,i&&this.dispatchEvent(new Event("change")),this}getValue(){return this.getInput().value}getInput(){return this.dom}serialize(t){t.value=this.getValue()}deserialize(t){this.setValue(t.value)}}$c.prototype.isInput=!0;let FO=class extends eT{constructor(){super();vt(this,"dom");vt(this,"elements");vt(this,"style");vt(this,"canvas");vt(this,"resizable");vt(this,"serializePriority");vt(this,"events");const e=document.createElement("f-node"),t=()=>{const i=this.canvas;i!==null&&i.select(this)};e.addEventListener("mousedown",t,!0),e.addEventListener("touchstart",t,!0),this._onConnect=i=>{const{target:n}=i;for(const s of this.elements)s!==n&&s.dispatchEvent(new Event("nodeConnect"))},this._onConnectChildren=i=>{const{target:n}=i;for(const s of this.elements)s!==n&&s.dispatchEvent(new Event("nodeConnectChildren"))},this.dom=e,this.style="",this.canvas=null,this.resizable=!1,this.serializePriority=0,this.elements=[],this.events={focus:[],blur:[]},this.setWidth(300).setPosition(0,0)}get baseElement(){return this.elements[0]}setAlign(e){const t=this.dom,i=t.style;if(i.left="",i.top="",i.animation="none",typeof e=="string")t.classList.add(e);else if(e)for(const n in e)i[n]=e[n];return this}setResizable(e){return this.resizable=e===!0,this.resizable?this.dom.classList.add("resizable"):this.dom.classList.remove("resizable"),this.updateSize(),this}onFocus(e){return this.events.focus.push(e),this}onBlur(e){return this.events.blur.push(e),this}setStyle(e){const t=this.dom;return this.style&&t.classList.remove(this.style),e&&t.classList.add(e),this.style=e,this}setPosition(e,t){const i=this.dom;return i.style.left=Wc(e),i.style.top=Wc(t),this}getPosition(){const e=this.dom;return{x:parseInt(e.style.left),y:parseInt(e.style.top)}}setWidth(e){return this.dom.style.width=Wc(e),this.updateSize(),this}getWidth(){return parseInt(this.dom.style.width)}getHeight(){return this.dom.offsetHeight}getBound(){const{x:e,y:t}=this.getPosition(),{width:i,height:n}=this.dom.getBoundingClientRect();return{x:e,y:t,width:i,height:n}}add(e,t){return this.elements.push(e),e.node=this,e.addEventListener("connect",this._onConnect),e.addEventListener("connectChildren",this._onConnectChildren),t?this.dom.insertBefore(e.dom,t.dom):this.dom.append(e.dom),this.updateSize(),this}remove(e){return this.elements.splice(this.elements.indexOf(e),1),e.node=null,e.removeEventListener("connect",this._onConnect),e.removeEventListener("connectChildren",this._onConnectChildren),this.dom.removeChild(e.dom),this.updateSize(),this}dispose(){const e=this.canvas;e!==null&&e.remove(this);for(const t of this.elements)t.dispose();this.dispatchEvent(new Event("dispose"))}isCircular(e){if(e===this)return!0;const t=this.getLinks();for(const i of t)if(i.outputElement.node.isCircular(e))return!0;return!1}getLinks(){const e=[];for(const t of this.elements)e.push(...t.links);return e}getColor(){return this.elements.length>0?this.elements[0].getColor():null}updateSize(){for(const e of this.elements)e.dom.style.width="";if(this.resizable===!0){const e=this.elements[this.elements.length-1];e!==void 0&&(e.dom.style.width=this.dom.style.width)}}serialize(e){const{x:t,y:i}=this.getPosition(),n=[];for(const s of this.elements)n.push(s.toJSON(e).id);e.x=t,e.y=i,e.width=this.getWidth(),e.elements=n,e.autoResize=this.resizable,this.style!==""&&(e.style=this.style)}deserialize(e){this.setPosition(e.x,e.y),this.setWidth(e.width),this.setResizable(e.autoResize),e.style!==void 0&&this.setStyle(e.style);const t=this.elements;if(t.length>0){let i=0;for(const n of e.elements)e.objects[n]=t[i++]}else for(const i of e.elements)this.add(e.objects[i])}};FO.prototype.isNode=!0;class f$e extends bs{constructor(e=!0){super(!0),this.draggable=e;const t=n=>{n.preventDefault(),this.draggable===!0&&qb(this.node.dom,null,{className:"dragging node",postPosChangedEvent:!0})},{dom:i}=this;i.addEventListener("mousedown",t,!0),i.addEventListener("touchstart",t,!0)}}class m$e extends f$e{constructor(t,i=!0){super(i);vt(this,"titleDOM");const{dom:n}=this;n.classList.add("title");const s=()=>{this.node.canvas.focusSelected=!this.node.canvas.focusSelected};n.addEventListener("dblclick",s);const o=document.createElement("f-title");o.innerText=t;const a=document.createElement("i"),l=document.createElement("f-toolbar");this.buttons=[],this.titleDOM=o,this.iconDOM=a,this.toolbarDOM=l,n.append(o),n.append(a),n.append(l)}setIcon(t){return this.iconDOM.className=t,this}getIcon(){return this.iconDOM.className}setTitle(t){return this.titleDOM.innerText=t,this}getTitle(){return this.titleDOM.innerText}addButton(t){return this.buttons.push(t),this.toolbarDOM.append(t.dom),this}serialize(t){super.serialize(t);const i=this.getTitle(),n=this.getIcon();t.title=i,n!==""&&(t.icon=n)}deserialize(t){super.deserialize(t),this.setTitle(t.title),t.icon!==void 0&&this.setIcon(t.icon)}}const mq=(r,e,t,i,n,s,o,a,l=null,c=!1)=>{const u=t-r,d=i-e,h=Math.sqrt(u*u+d*d)*(n?-.3:.3);if(a.beginPath(),a.moveTo(r,e),a.bezierCurveTo(r+h,e,t-h,i,t,i),l!==null&&o!==l){const p=a.createLinearGradient(r,e,t,i);p.addColorStop(0,o),p.addColorStop(1,l),a.strokeStyle=p}else a.strokeStyle=o;c?a.setLineDash([1,0,1]):a.setLineDash([]),a.lineWidth=s,a.stroke()},g$e=["#ff4444","#44ff44","#4444ff"];class v$e extends eT{constructor(){super();vt(this,"dom");vt(this,"nodes");vt(this,"droppedItems");vt(this,"canvas");const t=document.createElement("f-canvas"),i=document.createElement("f-content"),n=document.createElement("f-area"),s=document.createElement("f-drop"),o=document.createElement("canvas"),a=document.createElement("canvas"),l=document.createElement("canvas"),c=o.getContext("2d"),u=a.getContext("2d"),d=l.getContext("2d");this.dom=t,this.contentDOM=i,this.areaDOM=n,this.dropDOM=s,this.canvas=o,this.frontCanvas=a,this.mapCanvas=l,this.context=c,this.frontContext=u,this.mapContext=d,this.clientX=0,this.clientY=0,this.relativeClientX=0,this.relativeClientY=0,this.nodes=[],this.selected=null,this.updating=!1,this.droppedItems=[],this.events={drop:[]},this._scrollLeft=0,this._scrollTop=0,this._zoom=1,this._width=0,this._height=0,this._focusSelected=!1,this._mapInfo={scale:1,screen:{}},o.className="background",a.className="frontground",l.className="map",s.innerHTML="<span>drop your file</span>",t.append(o),t.append(a),t.append(i),t.append(n),t.append(l);const h=(_,S=this.clientX,T=this.clientY)=>{_=Math.min(Math.max(_,.2),1),this.scrollLeft-=S/this.zoom-S/_,this.scrollTop-=T/this.zoom-T/_,this.zoom=_};let p=null;const f=()=>{p=null},m=(_,S)=>{do if(_.classList&&_.classList.contains(S))return!0;while((_=_.parentElement)&&_!==t);return!1},g=_=>{if(m(_.srcElement,"f-scroll"))return;_.preventDefault(),_.stopImmediatePropagation();const S=_.deltaY*.003;h(this.zoom-S)},v=_=>{if(_.touches&&_.touches.length===2){_.preventDefault(),_.stopImmediatePropagation();const S=(_.touches[0].clientX+_.touches[1].clientX)/2,T=(_.touches[0].clientY+_.touches[1].clientY)/2,M=Math.hypot(_.touches[0].clientX-_.touches[1].clientX,_.touches[0].clientY-_.touches[1].clientY);p===null&&(p={distance:M});const E=(p.distance-M)*.003;p.distance=M,h(this.zoom-E,S,T)}},x=_=>{if(_.touches&&_.touches.length===1){_.preventDefault(),_.stopImmediatePropagation();const S=_.touches[0].clientX,T=_.touches[0].clientY;if(p===null){const{scrollLeft:E,scrollTop:C}=this;p={scrollLeft:E,scrollTop:C,clientX:S,clientY:T}}const M=this.zoom;this.scrollLeft=p.scrollLeft+(S-p.clientX)/M,this.scrollTop=p.scrollTop+(T-p.clientY)/M}};t.addEventListener("wheel",g),t.addEventListener("touchmove",v),t.addEventListener("touchstart",f),o.addEventListener("touchmove",x);let b=0;const w=_=>{_?b++===0&&(this.droppedItems=[],s.classList.add("visible")):--b===0&&s.classList.remove("visible")};t.addEventListener("dragenter",()=>{w(!0)}),t.addEventListener("dragleave",()=>{w(!1)}),t.addEventListener("dragover",_=>{_.preventDefault()}),t.addEventListener("drop",_=>{_.preventDefault(),w(!1),this.droppedItems=_.dataTransfer.items,Go(this.events.drop,this)}),qb(t,_=>{const{delta:S,isTouch:T}=_;if(!T){_.scrollTop===void 0&&(_.scrollLeft=this.scrollLeft,_.scrollTop=this.scrollTop);const M=this.zoom;this.scrollLeft=_.scrollLeft+S.x/M,this.scrollTop=_.scrollTop+S.y/M}_.dragging?t.classList.add("grabbing"):t.classList.remove("grabbing")},{className:"dragging-canvas"}),qb(l,_=>{const{scale:S,screen:T}=this._mapInfo;if(_.scrollLeft===void 0){const M=this.mapCanvas.getBoundingClientRect(),E=_.client.x-M.left,C=_.client.y-M.top;if(!(E>T.x&&C>T.y&&E<T.x+T.width&&C<T.y+T.height)){const P=this._mapInfo.width/this.mapCanvas.width;let A=-this._mapInfo.left-E*P,N=-this._mapInfo.top-C*(this._mapInfo.height/this.mapCanvas.height);A+=T.width/2/S,N+=T.height/2/S,this.scrollLeft=A,this.scrollTop=N}_.scrollLeft=this.scrollLeft,_.scrollTop=this.scrollTop}this.scrollLeft=_.scrollLeft-_.delta.x/S,this.scrollTop=_.scrollTop-_.delta.y/S},{click:!0}),this._onMoveEvent=_=>{const S=_.touches?_.touches[0]:_,{zoom:T,rect:M}=this;this.clientX=S.clientX,this.clientY=S.clientY;const E=(this.clientX-M.left)/T,C=(this.clientY-M.top)/T;this.relativeClientX=E-this.scrollLeft,this.relativeClientY=C-this.scrollTop},this._onUpdate=()=>{this.update()},this.start()}getBounds(){const t={x:1/0,y:1/0,width:-1/0,height:-1/0};for(const i of this.nodes){const{x:n,y:s,width:o,height:a}=i.getBound();t.x=Math.min(t.x,n),t.y=Math.min(t.y,s),t.width=Math.max(t.width,n+o),t.height=Math.max(t.height,s+a)}return t.x=Math.round(t.x),t.y=Math.round(t.y),t.width=Math.round(t.width),t.height=Math.round(t.height),t}get width(){return this._width}get height(){return this._height}get rect(){return this.dom.getBoundingClientRect()}get zoom(){return this._zoom}set zoom(t){this._zoom=t,this.contentDOM.style.zoom=t,t===1?this.dom.classList.remove("zoom"):this.dom.classList.add("zoom"),this.updateMozTransform()}set scrollLeft(t){this._scrollLeft=t,this.contentDOM.style.left=Wc(t),this.updateMozTransform()}get scrollLeft(){return this._scrollLeft}set scrollTop(t){this._scrollTop=t,this.contentDOM.style.top=Wc(t),this.updateMozTransform()}get scrollTop(){return this._scrollTop}set focusSelected(t){if(this._focusSelected===t)return;const i=this.dom.classList;this._focusSelected=t,t?i.add("focusing"):i.remove("focusing")}get focusSelected(){return this._focusSelected}get useTransform(){return navigator.userAgent.match(/firefox/i)!==null}updateMozTransform(){this.useTransform!==!1&&(this.contentDOM.style["-moz-transform"]="scale("+this.zoom+")",this.contentDOM.style["-moz-transform-origin"]="-"+this.contentDOM.style.left+" -"+this.contentDOM.style.top)}onDrop(t){return this.events.drop.push(t),this}start(){this.updating=!0,document.addEventListener("wheel",this._onMoveEvent,!0),document.addEventListener("mousedown",this._onMoveEvent,!0),document.addEventListener("touchstart",this._onMoveEvent,!0),document.addEventListener("mousemove",this._onMoveEvent,!0),document.addEventListener("touchmove",this._onMoveEvent,!0),document.addEventListener("dragover",this._onMoveEvent,!0),requestAnimationFrame(this._onUpdate)}stop(){this.updating=!1,document.removeEventListener("wheel",this._onMoveEvent,!0),document.removeEventListener("mousedown",this._onMoveEvent,!0),document.removeEventListener("touchstart",this._onMoveEvent,!0),document.removeEventListener("mousemove",this._onMoveEvent,!0),document.removeEventListener("touchmove",this._onMoveEvent,!0),document.removeEventListener("dragover",this._onMoveEvent,!0)}add(t){if(t.canvas!==this)return this.nodes.push(t),t.canvas=this,this.contentDOM.append(t.dom),this}remove(t){t===this.selected&&this.select(),this.unlink(t);const i=this.nodes;return i.splice(i.indexOf(t),1),t.canvas=null,this.contentDOM.removeChild(t.dom),t.dispatchEvent(new Event("remove")),this}clear(){const t=this.nodes;for(;t.length>0;)this.remove(t[0]);return this}unlink(t){const i=this.getLinks();for(const n of i)n.inputElement&&n.outputElement&&(n.inputElement.node===t||n.outputElement.node===t)&&n.inputElement.connect()}getLinks(){const t=[];for(const i of this.nodes)t.push(...i.getLinks());return t}centralize(){const t=this.getBounds();return this.scrollLeft=this.canvas.width/2-(-t.x+t.width)/2,this.scrollTop=this.canvas.height/2-(-t.y+t.height)/2,this}setSize(t,i){return this.dom.style.width=`${t}px`,this.dom.style.height=`${i}px`,this._width=t,this._height=i,this.update(),this}select(t=null){if(t===this.selected)return;const i=this.selected;i!==null&&(this.focusSelected=!1,i.dom.classList.remove("selected"),this.selected=null,Go(i.events.blur,i)),t!==null&&(t.dom.classList.add("selected"),this.selected=t,Go(t.events.focus,t))}updateMap(){const{nodes:t,mapCanvas:i,mapContext:n,scrollLeft:s,scrollTop:o,canvas:a,zoom:l,_mapInfo:c}=this,u=this.getBounds();i.width=300,i.height=200,n.clearRect(0,0,i.width,i.height),n.fillStyle="rgba( 0, 0, 0, 0 )",n.fillRect(0,0,i.width,i.height);const d=-u.x+u.width,h=-u.y+u.height,p=Math.min(i.width/d,i.height/h)*.5,f=d*p,m=h*p,g=i.width/2-f/2,v=i.height/2-m/2;let x=null;for(const T of t){const M=T.getBound(),E=T.getColor();M.x+=-u.x,M.y+=-u.y,M.x*=p,M.y*=p,M.width*=p,M.height*=p,M.x+=g,M.y+=v,T!==this.selected?(n.fillStyle=E,n.fillRect(M.x,M.y,M.width,M.height)):x={nodeBound:M,nodeColor:E}}if(x!==null){const{nodeBound:T,nodeColor:M}=x;n.fillStyle=M,n.fillRect(T.x,T.y,T.width,T.height)}const b=-(s+u.x)*p+g,w=-(o+u.y)*p+v,_=a.width*p/l,S=a.height*p/l;n.fillStyle="rgba( 200, 200, 200, 0.1 )",n.fillRect(b,w,_,S),c.scale=p,c.left=-g/p+u.x,c.top=-v/p+u.y,c.width=i.width/p,c.height=i.height/p,c.screen.x=b,c.screen.y=w,c.screen.width=_,c.screen.height=S}updateLines(){const{dom:t,zoom:i,canvas:n,frontCanvas:s,frontContext:o,context:a,_width:l,_height:c,useTransform:u}=this,d=this.rect;(n.width!==l||n.height!==c)&&(n.width=l,n.height=c,s.width=l,s.height=c),a.clearRect(0,0,l,c),o.clearRect(0,0,l,c),a.globalCompositeOperation="lighter",o.globalCompositeOperation="source-over";const h=this.getLinks(),p={x:0,y:0},f={x:0,y:0},m=10,g=d.x/i,v=d.y/i;let x="";for(const b of h){const{lioElement:w,rioElement:_,dashed:S}=b;let T="",M=0;if(w!==null){const C=w.dom.getBoundingClientRect();M=Math.max(M,w.rioLength),p.x=C.x+C.width-g,p.y=C.y+C.height/2-v,u&&(p.x/=i,p.y/=i)}else p.x=this.clientX-g,p.y=this.clientY-v,T="lio";if(_!==null){const C=_.dom.getBoundingClientRect();M=Math.max(M,_.lioLength),f.x=C.x-g,f.y=C.y+C.height/2-v,u&&(f.x/=i,f.y/=i)}else f.x=this.clientX-g,f.y=this.clientY-v,T="rio";x=x||T;const E=T?o:a;if(T||M===1){let C=null,P=null;T==="rio"?(C=P=w.getRIOColor(),p.x+=m,f.x/=i,f.y/=i):T==="lio"?(C=P=_.getLIOColor(),f.x-=m,p.x/=i,p.y/=i):(C=w.getRIOColor(),P=_.getLIOColor()),mq(p.x*i,p.y*i,f.x*i,f.y*i,!1,2,C||"#ffffff",E,P||"#ffffff",S)}else{M=Math.min(M,4);for(let C=0;C<M;C++){const P=g$e[C]||"#ffffff",A=4,N=Math.min(w.rioLength,M),R=Math.min(_.lioLength,M),F=w.getRIOColor()||P,B=_.getLIOColor()||P,k=N*A*.5-A/2,z=R*A*.5-A/2,O=Math.min(C,N-1),V=Math.min(C,R-1),U=O*A-1,G=V*A-1;mq(p.x*i,(p.y+U-k)*i,f.x*i,(f.y+G-z)*i,!1,2,F,E,B,S)}}}a.globalCompositeOperation="destination-in",x!==""?t.classList.add("dragging-"+x):(t.classList.remove("dragging-lio"),t.classList.remove("dragging-rio"))}update(){this.updating!==!1&&(requestAnimationFrame(this._onUpdate),this.updateLines(),this.updateMap())}serialize(t){const i=[],n=this.nodes.sort((s,o)=>s.serializePriority>o.serializePriority?-1:1);for(const s of n)i.push(s.toJSON(t).id);t.nodes=i}deserialize(t){for(const i of t.nodes)this.add(t.objects[i])}}class gq extends EventTarget{constructor(e){super();const t=document.createElement("f-menu");t.className=e+" bottom left hidden";const i=document.createElement("f-list");t.append(i),this.dom=t,this.listDOM=i,this.visible=!1,this.align="bottom left",this.subMenus=new WeakMap,this.domButtons=new WeakMap,this.buttons=[],this.events={}}onContext(e){return this.events.context.push(e),this}setAlign(e){const t=this.dom;return h$e(t,this.align),p$e(t,e),this.align=e,this}getAlign(){return this.align}show(){return this.dom.classList.remove("hidden"),this.visible=!0,this.dispatchEvent(new Event("show")),this}hide(){this.dom.classList.add("hidden"),this.dispatchEvent(new Event("hide")),this.visible=!1}add(e,t=null){const i=document.createElement("f-item");return t!==null&&(i.classList.add("submenu"),i.append(t.dom),this.subMenus.set(e,t),e.dom.addEventListener("mouseover",()=>t.show()),e.dom.addEventListener("mouseout",()=>t.hide())),i.append(e.dom),this.buttons.push(e),this.listDOM.append(i),this.domButtons.set(e,i),this}clear(){for(this.buttons=[],this.subMenus=new WeakMap,this.domButtons=new WeakMap;this.listDOM.firstChild;)this.listDOM.firstChild.remove()}}let gd=null;const vq=r=>{gd&&gd.visible===!0&&r.target.closest("f-menu.context")===null&&gd.hide()};document.body.addEventListener("mousedown",vq,!0),document.body.addEventListener("touchstart",vq,!0);class yq extends gq{constructor(e=null){super("context"),this.events.context=[],this._lastButtonClick=null,this._onButtonClick=(t=null)=>{const i=t?t.target:null;this._lastButtonClick&&this._lastButtonClick.dom.parentElement.classList.remove("active"),this._lastButtonClick=i,i&&(this.subMenus.has(i)&&this.subMenus.get(i)._onButtonClick(),i.dom.parentElement.classList.add("active"))},this._onButtonMouseOver=t=>{const i=t.target;this.subMenus.has(i)&&this._lastButtonClick!==i&&this._onButtonClick()},this.addEventListener("context",()=>{Go(this.events.context,this)}),this.setTarget(e)}openFrom(e){const t=e.getBoundingClientRect();return this.open(t.x+t.width/2,t.y+t.height/2)}open(e=fq.x,t=fq.y){return gd!==null&&gd.hide(),gd=this,this.setPosition(e,t),document.body.append(this.dom),this.show()}setWidth(e){return this.dom.style.width=Wc(e),this}setPosition(e,t){const i=this.dom;return i.style.left=Wc(e),i.style.top=Wc(t),this}setTarget(e=null){if(e!==null){const t=i=>{i.preventDefault(),!(i.pointerType!=="mouse"||i.pageX===0&&i.pageY===0)&&(this.dispatchEvent(new Event("context")),this.open())};this.target=e,e.addEventListener("contextmenu",t,!1)}return this}show(){this.opened||(this.dom.style.left="",this.dom.style.transform="");const e=this.dom.getBoundingClientRect();let t=Math.min(window.innerWidth-(e.x+e.width+10),0),i=Math.min(window.innerHeight-(e.y+e.height+10),0);return this.opened?(t<0&&(t=-e.width),i<0&&(i=-e.height),this.setPosition(e.x+t,e.y+i)):(t<0&&(this.dom.style.left="-100%"),i<0&&(this.dom.style.transform="translateY( calc( 32px - 100% ) )")),super.show()}hide(){return this.opened&&(gd=null),super.hide()}add(e,t=null){return e.addEventListener("click",this._onButtonClick),e.addEventListener("mouseover",this._onButtonMouseOver),super.add(e,t)}get opened(){return gd===this}}const bq=r=>r.trim().toLowerCase().replace(/\s\s+/g," ");class xq extends gq{constructor(){super("search");vt(this,"inputDOM");vt(this,"forceAutoComplete");vt(this,"currentFiltered");this.events.submit=[],this.events.filter=[],this.tags=new WeakMap;const t=document.createElement("input");t.placeholder="Type here";let i=!0,n=!0;t.addEventListener("focusout",()=>{n=!0,this.setValue("")}),t.onkeydown=s=>{const o=s.key;if(o==="ArrowUp"){const a=this.filteredIndex;this.forceAutoComplete?this.filteredIndex=a!==null?(a+1)%(this.filtered.length||1):0:this.filteredIndex=a!==null?Math.min(a+1,this.filtered.length-1):0,s.preventDefault(),i=!1}else if(o==="ArrowDown"){const a=this.filteredIndex;this.forceAutoComplete?(this.filteredIndex=a-1,this.filteredIndex===null&&(this.filteredIndex=this.filtered.length-1)):this.filteredIndex=a!==null?a-1:null,s.preventDefault(),i=!1}else o==="Enter"?(this.value=this.currentFiltered?this.currentFiltered.button.getValue():t.value,this.submit(),s.preventDefault(),i=!1):i=!0},t.onkeyup=()=>{i&&(n&&(this.dispatchEvent(new Event("filter")),n=!1),this.filter(t.value))},this.filtered=[],this.currentFiltered=null,this.value="",this.forceAutoComplete=!1,this.dom.append(t),this.inputDOM=t,this.addEventListener("filter",()=>{Go(this.events.filter,this)}),this.addEventListener("submit",()=>{Go(this.events.submit,this)})}dom(t){throw new Error("Method not implemented.")}submit(){return this.dispatchEvent(new Event("submit")),this.setValue("")}setValue(t){return this.inputDOM.value=t,this.filter(t),this}getValue(){return this.value}onFilter(t){return this.events.filter.push(t),this}onSubmit(t){return this.events.submit.push(t),this}getFilterByButton(t){for(const i of this.filtered)if(i.button===t)return i;return null}add(t){super.add(t);const i=()=>{const n=this.getFilterByButton(t);this.filteredIndex=this.filtered.indexOf(n),this.value=t.getValue(),this.submit()};return t.dom.addEventListener("mousedown",i),t.dom.addEventListener("touchstart",i),this.domButtons.get(t).remove(),this}set filteredIndex(t){this.currentFiltered&&(this.domButtons.get(this.currentFiltered.button).classList.remove("active"),this.currentFiltered=null);const i=this.filtered[t];i&&(this.domButtons.get(i.button).classList.add("active"),this.currentFiltered=i),this.updateFilter()}get filteredIndex(){return this.currentFiltered?this.filtered.indexOf(this.currentFiltered):null}setTag(t,i){this.tags.set(t,i)}filter(t){t=bq(t);const i=this.tags,n=[];for(const s of this.buttons){this.domButtons.get(s).remove();const o=i.has(s)?" "+i.get(s):"",a=bq(s.getValue()+o);if(t&&a.includes(t)===!0){const l=t.length/a.length;n.push({button:s,score:l})}}n.sort((s,o)=>o.score-s.score),this.filtered=n,this.filteredIndex=this.forceAutoComplete?0:null}updateFilter(){const t=Math.min(this.filteredIndex,this.filteredIndex-3);for(let i=0;i<this.filtered.length;i++){const n=this.filtered[i].button,s=this.domButtons.get(n);s.remove(),i>=t&&this.listDOM.append(s)}}}class vd extends bs{constructor(e="",t=""){super(),this.labelDOM=document.createElement("f-label"),this.inputsDOM=document.createElement("f-inputs");const i=document.createElement("span");this.spanDOM=i,this.iconDOM=null,this.labelDOM.append(i),this.dom.append(this.labelDOM),this.dom.append(this.inputsDOM),this.serializeLabel=!1,this.setLabel(e),this.setAlign(t)}setIcon(e){return this.iconDOM=this.iconDOM||document.createElement("i"),this.iconDOM.className=e,e?this.labelDOM.prepend(this.iconDOM):this.iconDOM.remove(),this}getIcon(){return this.iconDOM?this.iconDOM.className:null}setAlign(e){this.labelDOM.className=e}setLabel(e){this.spanDOM.innerText=e}getLabel(){return this.spanDOM.innerText}serialize(e){if(super.serialize(e),this.serializeLabel){const t=this.getLabel(),i=this.getIcon();e.label=t,i!==""&&(e.icon=i)}}deserialize(e){super.deserialize(e),this.serializeLabel&&(this.setLabel(e.label),e.icon!==void 0&&this.setIcon(e.icon))}}class Fg extends $c{constructor(e=""){const t=document.createElement("button"),i=document.createElement("span");t.append(i);const n=document.createElement("i");t.append(n),super(t),this.spanDOM=i,this.iconDOM=n,i.innerText=e,t.onmouseover=()=>{this.dispatchEvent(new Event("mouseover"))},t.onclick=t.ontouchstart=n.onclick=n.ontouchstart=s=>{s.preventDefault(),s.stopPropagation(),this.dispatchEvent(new Event("click"))}}setIcon(e){return this.iconDOM.className=e,this}getIcon(){return this.iconDOM.className}setValue(e){return this.spanDOM.innerText=e,this}getValue(){return this.spanDOM.innerText}}class wq extends $c{constructor(e=39423){const t=document.createElement("input");super(t),t.type="color",t.value=Kb(e),t.oninput=()=>{this.dispatchEvent(new Event("change"))}}setValue(e,t=!0){return super.setValue(Kb(e),t)}getValue(){return parseInt(super.getValue().substr(1),16)}}class Mn extends $c{constructor(e=0,t=-1/0,i=1/0,n=.01){const s=document.createElement("input");super(s),this.min=t,this.max=i,this.step=n,this.integer=!1,s.type="text",s.className="number",s.value=this._getString(e),s.spellcheck=!1,s.autocomplete="off",s.ondragstart=s.oncontextmenu=o=>{o.preventDefault(),o.stopPropagation()},s.onfocus=s.onclick=()=>{s.select()},s.onblur=()=>{this.dom.value=this._getString(this.dom.value),this.dispatchEvent(new Event("blur"))},s.onchange=()=>{this.dispatchEvent(new Event("change"))},s.onkeydown=o=>{if(o.key.length===1&&/\d|\.|-/.test(o.key)!==!0)return!1;o.key==="Enter"&&o.target.blur(),o.stopPropagation()},qb(s,o=>{const{delta:a}=o;if(s.readOnly===!0)return;o.value===void 0&&(o.value=this.getValue());const l=a.x-a.y,c=o.value+l*this.step;s.value=this._getString(c.toFixed(this.precision)),this.dispatchEvent(new Event("change"))})}setStep(e){return this.step=e,this}setRange(e,t,i){return this.min=e,this.max=t,this.step=i,this.dispatchEvent(new Event("range")),this.setValue(this.getValue())}get precision(){if(this.integer===!0)return 0;const e=this.step%1;return e!==0?e.toString().split(".")[1].length:1}setValue(e,t=!0){return super.setValue(this._getString(e),t)}getValue(){return Number(this.dom.value)}serialize(e){const{min:t,max:i}=this;t!==-1/0&&i!==1/0&&(e.min=this.min,e.max=this.max,e.step=this.step),super.serialize(e)}deserialize(e){if(e.min!==void 0){const{min:t,max:i,step:n}=this;this.setRange(t,i,n)}super.deserialize(e)}_getString(e){const t=Math.min(Math.max(Number(e),this.min),this.max);return this.integer===!0?Math.floor(t):t+(t%1?"":".0")}}class tT extends $c{constructor(e=[],t=null){const i=document.createElement("select");super(i),i.onchange=()=>{this.dispatchEvent(new Event("change"))},i.onmousedown=i.ontouchstart=()=>{this.dispatchEvent(new Event("click"))},this.setOptions(e,t)}setOptions(e,t=null){const i=this.dom,n=i.value;let s=!1;this.options=e,i.innerHTML="";for(let o=0;o<e.length;o++){let a=e[o];typeof a=="string"&&(a={name:a,value:o});const l=document.createElement("option");l.innerText=a.name,l.value=a.value,s===!1&&n===a.value&&(s=!0),i.append(l)}return i.value=t!==null?t:s?n:"",this}getOptions(){return this._options}serialize(e){e.options=[...this.options],super.serialize(e)}deserialize(e){this.options.length===0&&this.setOptions(e.options),super.deserialize(e)}}class yd extends $c{constructor(t=""){const i=document.createElement("f-string");super(i);vt(this,"inputDOM");const n=document.createElement("input");i.append(n),n.type="text",n.value=t,n.spellcheck=!1,n.autocomplete="off",this._buttonsDOM=null,this._datalistDOM=null,this.iconDOM=null,this.inputDOM=n,this.buttons=[],n.onblur=()=>{this.dispatchEvent(new Event("blur"))},n.onchange=()=>{this.dispatchEvent(new Event("change"))};let s="";n.onkeydown=()=>s=n.value,n.onkeyup=o=>{o.key==="Enter"&&o.target.blur(),o.stopPropagation(),s!==n.value&&this.dispatchEvent(new Event("change"))}}setPlaceHolder(t){return this.inputDOM.placeholder=t,this}setIcon(t){return this.iconDOM=this.iconDOM||document.createElement("i"),this.iconDOM.setAttribute("type","icon"),this.iconDOM.className=t,t?this.dom.prepend(this.iconDOM):this.iconDOM.remove(),this}getIcon(){return this.iconInput?this.iconInput.getIcon():""}addButton(t){return this.buttonsDOM.prepend(t.iconDOM),this.buttons.push(t),this}addOption(t){const i=document.createElement("option");return i.value=t,this.datalistDOM.append(i),this}clearOptions(){this.datalistDOM.remove()}get datalistDOM(){let t=this._datalistDOM;if(t===null){const i="input-dt-"+this.id;t=document.createElement("datalist"),t.id=i,this._datalistDOM=t,this.inputDOM.autocomplete="on",this.inputDOM.setAttribute("list",i),this.dom.prepend(t)}return t}get buttonsDOM(){let t=this._buttonsDOM;return t===null&&(t=document.createElement("f-buttons"),this._buttonsDOM=t,this.dom.prepend(t)),t}getInput(){return this.inputDOM}}class y$e extends $c{constructor(e=!1){const t=document.createElement("input");super(t),t.type="checkbox",t.className="toggle",t.checked=e,t.onclick=()=>this.dispatchEvent(new Event("click")),t.onchange=()=>this.dispatchEvent(new Event("change"))}setValue(e,t=!0){return this.dom.checked=e,t&&this.dispatchEvent(new Event("change")),this}getValue(){return this.dom.checked}}class b$e{constructor(e=""){vt(this,"isNodeClass");const t=document.createElement("f-treeview-node"),i=document.createElement("f-treeview-label"),n=document.createElement("input"),s=document.createElement("spam");i.append(s),s.innerText=e,n.type="checkbox",t.append(n),t.append(i),this.dom=t,this.childrenDOM=null,this.labelSpam=s,this.labelDOM=i,this.inputDOM=n,this.iconDOM=null,this.parent=null,this.children=[],this.selected=!1,this.events={change:[],click:[]},t.addEventListener("click",()=>{Go(this.events.click,this)})}setLabel(e){return this.labelSpam.innerText=e,this}getLabel(){return this.labelSpam.innerText}add(e){let t=this.childrenDOM;if(this.childrenDOM===null){const i=this.dom,n=document.createElement("f-arrow");t=document.createElement("f-treeview-children"),i.append(n),i.append(t),this.childrenDOM=t}return this.children.push(e),t.append(e.dom),e.parent=this,this}setOpened(e){return this.inputDOM.checked=e,this}getOpened(){return this.inputDOM.checkbox}setIcon(e){return this.iconDOM=this.iconDOM||document.createElement("i"),this.iconDOM.className=e,e?this.labelDOM.prepend(this.iconDOM):this.iconDOM.remove(),this}getIcon(){return this.iconDOM?this.iconDOM.className:null}setVisible(e){return this.dom.style.display=e?"":"none",this}setSelected(e){return this.selected===e?this:(e?this.dom.classList.add("selected"):this.dom.classList.remove("selected"),this.selected=e,this)}onClick(e){return this.events.click.push(e),this}}class x$e extends $c{constructor(e=[]){const t=document.createElement("f-treeview");super(t);const i=document.createElement("f-treeview-children");t.append(i),t.setAttribute("type","tree"),this.childrenDOM=i,this.children=[]}add(e){return this.children.push(e),this.childrenDOM.append(e.dom),this}serialize(e){super.serialize(e)}deserialize(e){super.deserialize(e)}}const Yb={};class rT extends FO{constructor(t,i,n,s,o){super();vt(this,"title");vt(this,"context");vt(this,"_onPositionChanged");vt(this,"rmCallback");this.history=i,this.graph=n,this.node=s,Yb[s.scoped.uuid]=this,this._onPositionChanged=d=>{const{x:h,y:p}=this.getPosition();(h!==s.anchor.x||p!==s.anchor.y)&&(s.anchor.x=h,s.anchor.y=p,n.dispatchEvent({type:"graphModified",soure:null,nodes:[s]}))},this.dom.addEventListener("positionChanged",this._onPositionChanged),this.setWidth(this.node.anchor.width||300),this.setPosition(s.anchor.x,s.anchor.y);const a=new m$e(t).setObject({node:s}).setSerializable(!1),l=new Fg().onClick(()=>{u.open()}).setIcon("ti ti-dots"),c=()=>{u.removeEventListener("show",c),o.removable&&u.add(new Fg("Remove").setIcon("ti ti-trash").onClick(()=>{this.removeSelf()})),u.add(new Fg("Isolate").setIcon("ti ti-3d-cube-sphere").onClick(()=>{this.context.hide(),this.title.dom.dispatchEvent(new MouseEvent("dblclick"))}))},u=new yq(this.dom);u.addEventListener("show",c),o.input!==void 0&&a.setInput(o.input),o.output!==void 0&&a.setOutput(o.output),this.title=a,o.icon&&(this.icon=o.icon),this.context=u,a.addButton(l),this.add(a)}set icon(t){this.title.setIcon("ti ti-"+t)}add(t,i){return(t.inputLength||t.outputLength)&&(t.onValid((n,s)=>{if(!s)return!1;const o=n.getObject(),a=s.getObject();return!!this.graph.connect(a,o,!0)}),t.onConnect(n=>{if(this.graph.isLocked)return;const s=n.getObject(),o=n.getLinkedObject();if(!o)return this.graph.disconnect(s);const a=this.graph.connect(o,s);return n.getLink().dashed=a===SX.Push,a})),super.add(t,i)}get(t){return this.elements.find(i=>i.name===t)}removeSelf(){this.graph.remove(this.node),this.dispose(),this.rmCallback&&this.rmCallback()}update(){for(const t of this.elements)for(const i of t.inputs)i.update&&i.update()}invalidate(t,i){this.graph.dispatchEvent({type:"graphModified",soure:null,nodes:[this.node]}),t&&this.graph.applyNodePins(this.node,t,i)}dispose(){this.dom.removeEventListener("positionChanged",this._onPositionChanged),this.context.hide(),super.dispose(),delete Yb[this.node.scoped.uuid]}}class bd extends rT{constructor(e,t,i,n,s){super(e,t,i,n,{removable:!0,...s});const[,o]=/(\d)+$/.exec(e)||[,"1"];o&&this.title.setOutput(Number.parseInt(o))}}class w$e extends $c{constructor(t=""){super(document.createElement("div"));vt(this,"updateInterval");vt(this,"editor");vt(this,"_source");this.updateInterval=500,this._source=t,this.dom.classList.add("no-zoom"),this.dom.style.width="100%",this.dom.style.height="360px",this.dom.style.marginTop="6px",this.dom.style.marginBottom="6px",this.editor=monaco.editor.create(this.dom,{value:this.getValue(),language:"javascript",theme:"vs-dark",automaticLayout:!0});let i=null;this.editor.getModel().onDidChangeContent(()=>{this._source=this.editor.getValue(),i&&clearTimeout(i),i=setTimeout(()=>{this.dispatchEvent(new Event("change"))},this.updateInterval)})}setValue(t,i=!0){return this._source===t?this:(this._source=t,this.editor&&this.editor.setValue(t),i&&this.dispatchEvent(new Event("change")),this)}getValue(){return this._source}setReadOnly(t){return this.editor.updateOptions({readOnly:t}),this}getReadOnly(){return this.editor.getRawOptions().readOnly}focus(){this.editor&&this.editor.focus()}}function En(r,e){const t=r[e];return t!=null&&t.isUniformNode?t.value:t}function al(r,e,t){const i=r[e];if(i==null){r[e]=t;return}const n=typeof i;return i.isUniformNode?i.value===void 0&&(i.value=t):["number","string","boolean"].includes(n)&&(r[e]=t),t}const BO={};function _q(r){if(!r)return;const e=r.uuid||r.src;return e&&(BO[e]=r),e}function Zb(r){if(!r)return null;const e=BO[r];return e&&delete BO[r],e||null}function ll(r,e){var t;if(!r.dataTransfer)throw new Error("no dataTransfer");_q(e.soure),r.dataTransfer.setData("type",e.type),r.dataTransfer.setData("soure",((t=e.soure)==null?void 0:t.uuid)||""),e.type==="dragNodeClass"||e.type==="dragObjectClass"?r.dataTransfer.setData("name",e.name):e.type==="dragObject"?(r.dataTransfer.setData("object",_q(e.object)||""),r.dataTransfer.setData("otype",e.otype)):e.type==="dragFile"&&(r.dataTransfer.setData("src",e.path),r.dataTransfer.setData("mime",e.mime))}function xd(r){if(!r.dataTransfer)return;const e=r.dataTransfer.getData("type");if(e)switch(e){case"dragNodeClass":return{type:"dragNodeClass",soure:Zb(r.dataTransfer.getData("source")),name:r.dataTransfer.getData("name")};case"dragObjectClass":return{type:"dragObjectClass",soure:Zb(r.dataTransfer.getData("source")),name:r.dataTransfer.getData("name")};case"dragObject":return{type:"dragObject",soure:Zb(r.dataTransfer.getData("source")),object:Zb(r.dataTransfer.getData("object")),otype:r.dataTransfer.getData("otype")};case"dragFile":return{type:"dragFile",soure:Zb(r.dataTransfer.getData("source")),path:r.dataTransfer.getData("src"),mime:r.dataTransfer.getData("mime")}}}const _$e=(r,e,t,i,n,s)=>{const o=En(r,e)??document.createElement("img"),a=new yd(o.src);a.setReadOnly(!0);const l=a.dom.querySelector("input");return l.ondrop=async c=>{if(!c.dataTransfer)return;let u;if(c.dataTransfer.files.length!==1){const h=xd(c);if(!h||h.type!=="dragFile"||h.mime!=="image/*")return;u=h.path}else{const h=c.dataTransfer.files[0];if(!/^(?:image|video)\//.test(h.type))return;u=URL.createObjectURL(h)}c.stopPropagation(),c.preventDefault();const d=await new ju().loadAsync(u);r[e]=d,r instanceof Nr&&(r.needsUpdate=!0),a.setValue(u,!1),t.dispatchEvent(new Event("changeInput"))},a.update=()=>{const c=En(r,e);c?a.setValue(c.src,!1):a.setValue("null",!1)},t.setInput(1),t.setOutput(1),t.add(a),t},iT=(r,e,t,i,n,s)=>{const o=En(r,e),a=new yd((o==null?void 0:o.uuid)||"null");a.setReadOnly(!0);const l=a.dom.querySelector("input");return l.ondrop=c=>{const u=xd(c);if((u==null?void 0:u.type)!=="dragObject"||!u.object.uuid)return;const d=u.object.uuid;d!==a.getValue()&&u.otype===i&&(r[e]=u.object[Tn]||u.object,a.setValue(d,!1),t.dispatchEvent(new Event("changeInput")))},a.update=()=>{const c=En(r,e);c?a.setValue(c.uuid,!1):a.setValue("null",!1)},t.setInput(1),t.setOutput(1),t.add(a),t},Sq=(r,e,t,i,n,s,o)=>{const a=En(e,t)??"",l=new yd(a);l.setReadOnly(!0);const c=l.dom.querySelector("input");return c.ondrop=u=>{const d=xd(u);!d||d.type!=="dragFile"||r&&r!==d.mime||d.path!==l.getValue()&&(al(e,t,d.path),l.setValue(d.path,!1),i.dispatchEvent(new Event("changeInput")))},l.update=()=>{const u=En(e,t);u?l.setValue(u,!1):l.setValue("",!1)},i.setInput(1),i.setOutput(1),i.add(l),i},zO=(r,e,t,i,n,s)=>{const o=new yd(`[${i}]`);return o.setReadOnly(!0),t.setInput(1),t.setOutput(1),t.add(o)},Xc={Boolean(r,e,t,i,n,s){const o=En(r,e)??!1,a=new y$e(o).onChange(()=>{al(r,e,a.getValue()),t.dispatchEvent(new Event("changeInput"))});return a.update=()=>{a.setValue(En(r,e)??!1,!1)},t.setInput(1),t.setOutput(1),t.add(a),t},Number(r,e,t,i,n,s){const o=En(r,e)??0;let a=null,l=null,c=!1;if(Object.keys(n).length){c=!0;const u=[];Object.entries(n).forEach(d=>u.push({name:d[0],value:d[1]})),a=new tT(u,o),t.add(a)}else if(s.length){a=new Mn(o),t.add(a);const u=[{name:"[number]",value:"[number]"}];s.forEach(d=>u.push({name:d,value:d})),l=new tT(u,o),l.onChange(()=>{l.getValue()==="[number]"?a.setReadOnly(!1):(a.setReadOnly(!0),al(r,e,l.getValue()),t.dispatchEvent(new Event("changeInput")))}),typeof o=="string"?a.setReadOnly(!0):l.setValue("[number]",!1),t.add(l)}else a=new Mn(o),t.add(a);return a.onChange(()=>{al(r,e,c?Number.parseInt(a.getValue()):Number.parseFloat(a.getValue())),t.dispatchEvent(new Event("changeInput"))}),a.update=()=>{const u=En(r,e)??0;typeof u=="string"?(a.setReadOnly(!0),l&&l.setValue(u,!1)):l&&l.setValue("[number]",!1),a.setValue(u,!1)},t.setInput(1),t.setOutput(1),t},String(r,e,t,i,n,s){const o=En(r,e)??"",a=Object.entries(n).filter(c=>typeof c[1]=="string");let l=null;if(s.length||a.length){const c=[];a.forEach(u=>c.push({name:u[0],value:u[1]})),s.forEach(u=>c.push({name:u,value:u})),l=new tT(c,o)}else l=new yd(o);return l.onChange(()=>{al(r,e,l.getValue()),t.dispatchEvent(new Event("changeInput"))}),l.update=()=>{l.setValue(En(r,e)??"",!1)},t.setInput(1),t.setOutput(1),t.add(l),t},Vector2(r,e,t,i,n,s){const o=En(r,e)??new qe,a=()=>{al(r,e,o),o.set(l.getValue(),c.getValue()),t.dispatchEvent(new Event("changeInput"))},l=new Mn(o.x).setTagColor("red").onChange(a),c=new Mn(o.y).setTagColor("green").onChange(a);return l.update=()=>{l.setValue(o.x,!1),c.setValue(o.y,!1)},t.setInput(2),t.setOutput(2),t.add(l).add(c),t},Vector3(r,e,t,i,n,s){const o=En(r,e)??new oe,a=()=>{al(r,e,o),o.set(l.getValue(),c.getValue(),u.getValue()),t.dispatchEvent(new Event("changeInput"))},l=new Mn(o.x).setTagColor("red").onChange(a),c=new Mn(o.y).setTagColor("green").onChange(a),u=new Mn(o.z).setTagColor("blue").onChange(a);return l.update=()=>{l.setValue(o.x,!1),c.setValue(o.y,!1),u.setValue(o.z,!1)},t.setInput(3),t.setOutput(3),t.add(l).add(c).add(u),t},Vector4(r,e,t,i,n,s){const o=En(r,e)??new jt,a=()=>{al(r,e,o),o.set(l.getValue(),c.getValue(),u.getValue(),d.getValue()),t.dispatchEvent(new Event("changeInput"))},l=new Mn(o.x).setTagColor("red").onChange(a),c=new Mn(o.y).setTagColor("green").onChange(a),u=new Mn(o.z).setTagColor("blue").onChange(a),d=new Mn(o.w).setTagColor("white").onChange(a);return l.update=()=>{l.setValue(o.x,!1),c.setValue(o.y,!1),u.setValue(o.z,!1),d.setValue(o.w,!1)},t.setInput(4),t.setOutput(4),t.add(l).add(c).add(u).add(d),t},Color(r,e,t,i,n,s){const o=En(r,e)??new at;if(!(o!=null&&o.getHex))return t;const a=new wq(o.getHex()).onChange(()=>{al(r,e,o),o.setHex(a.getValue()),t.dispatchEvent(new Event("changeInput"))});return a.update=()=>{a.setValue(o.getHex(),!1)},t.setInput(3),t.setOutput(3),t.add(a),t},Euler(r,e,t,i,n,s){const o=En(r,e)??new Xi,a=()=>{al(r,e,o),o.set(l.getValue(),c.getValue(),u.getValue()),t.dispatchEvent(new Event("changeInput"))},l=new Mn(o.x).setTagColor("red").onChange(a),c=new Mn(o.y).setTagColor("green").onChange(a),u=new Mn(o.z).setTagColor("blue").onChange(a);return l.update=()=>{l.setValue(o.x,!1),c.setValue(o.y,!1),u.setValue(o.z,!1)},t.setInput(4),t.setOutput(4),t.add(l).add(c).add(u),t},Script(r,e,t,i,n,s){const o=En(r,e)??"",a=new w$e(o).onChange(()=>{al(r,e,a.getValue()),t.dispatchEvent(new Event("changeInput"))});return a.update=()=>{a.setValue(En(r,e)??"",!1)},t.setHeight(370),t.setInput(1),t.setOutput(1),t.add(a),t},Matrix3:zO,Matrix4:zO,Url:Sq.bind(void 0,void 0),Audio:Sq.bind(void 0,"audio/*"),Image:_$e,Texture:iT,CubeTexture:iT,Material:iT,Object3D:iT};class S$e extends bd{constructor(e,t,i,n,s){super(e,t,i,n,s);const o=Xc.Boolean(n.scoped,"value",new bs,"Boolean",{},[]);o.addEventListener("changeInput",()=>this.invalidate("value")),o.setInput(0),this.add(o)}}class T$e extends bd{constructor(e,t,i,n,s){super(e,t,i,n,s),this.title.setOutput(3);const o=p=>{const f=n.scoped.value,m=f.getHex(),g=m.toString(16).toUpperCase().padStart(6,"0");p!=="color"&&a.setValue(m,!1),p!=="hex"&&l.setValue("#"+g,!1),p!=="rgb"&&(u.setValue(f.r.toFixed(3),!1),d.setValue(f.g.toFixed(3),!1),h.setValue(f.b.toFixed(3),!1)),u.setTagColor(`#${g.slice(0,2)}0000`),d.setTagColor(`#00${g.slice(2,4)}00`),h.setTagColor(`#0000${g.slice(4,6)}`),this.invalidate("value")},a=new wq(16777215).onChange(()=>{n.scoped.value.setHex(a.getValue()),o("picker")}),l=new yd().onChange(()=>{const p=l.getValue();if(p.indexOf("#")===0){const f=p.slice(1).padEnd(6,"0");n.scoped.value.setHex(parseInt(f,16)),o("hex")}});l.addEventListener("blur",()=>{o()});const c=()=>{n.scoped.value.setRGB(u.getValue(),d.getValue(),h.getValue()),o("rgb")},u=new Mn(1,0,1).setTagColor("red").onChange(c),d=new Mn(1,0,1).setTagColor("green").onChange(c),h=new Mn(1,0,1).setTagColor("blue").onChange(c);this.add(new bs().add(a).setSerializable(!1)).add(new vd("Hex").add(l).setSerializable(!1)).add(new vd("RGB").add(u).add(d).add(h)),o()}}class Tq extends bd{constructor(e,t,i,n,s){super(e,t,i,n,s);const o=Xc.Number(n.scoped,"value",new bs,"Number",{},[]);o.addEventListener("changeInput",()=>this.invalidate("value")),o.setInput(0),this.add(o)}}function Bg(r,e,t){const i={},n=[],s=new Set;for(const c of t.types)if(c!==null&&typeof c=="object")if(Array.isArray(c))n.push(...c),s.has("Number")||s.add("String");else{Object.assign(i,c);const u=typeof Object.values(c)[0]=="number";s.add(u?"Number":"String")}else typeof c=="string"?s.add(c):c!==null&&console.error(`type[${c}] unsupported!`);const o=[...s],a=s.has("Script")?new bs:new vd(e);a.name=e;const l=new Set;for(;o.length;){const c=o.shift();let u=Xc[c];u||(console.warn(`type[${c}] unsupported!`),u=zO),!l.has(u)&&(l.add(u),u(r,e,a,c,i,n))}return a.onConnect((c,u)=>c.setEnabledInputs(!c.getLinkedObject())),a}class nT extends rT{constructor(e,t,i,n,s){super(e,t,i,n,{removable:!n.scoped.isObject3DNode,input:0,output:0,...s}),this.title.titleDOM.innerText=`${n.scoped.objectType} Reference`,this.node.anchor.width||this.setWidth(360);const o=LL(n.name);for(const[c,u]of Object.entries(o.in)){let d;c==="object"?(d=new vd("uuid"),Xc.Object3D(n.scoped,c,d,"Object3D",{},[]),d.inputs[0].dom.ondrop=null):d=Bg(n.scoped,c,u),d.setInput(0),d.setOutput(0),this.add(d)}const a=n.scoped.typesExtended,l=n.scoped.getObjectsExtended();for(const[c,u]of Object.entries(a.in)){const d=Bg(l.in,c,u);d.setOutput(0),d.setObject({node:n,field:c}),d.addEventListener("changeInput",()=>this.invalidate(c,"in")),this.add(d)}for(const[c,u]of Object.entries(a.out)){const d=Bg(l.out,c,u);d.setObject({node:n,io:"out",field:c}),d.addEventListener("changeInput",()=>this.invalidate(c,"out")),d.setInput(0),this.add(d)}}}class M$e extends bd{constructor(e,t,i,n,s){super(e,t,i,n,s);const o=Xc.String(n.scoped,"value",new bs,"String",{},[]);o.addEventListener("changeInput",()=>this.invalidate("value")),o.setInput(0),this.add(o)}}class E$e extends bd{constructor(e,t,i,n,s){super(e,t,i,n,s);const o=()=>{a.setValue(n.scoped.value.toFixed(3))},a=new Mn().onChange(()=>{n.scoped.value=a.getValue()}),l=new Mn(1).onChange(()=>{n.scoped.scale=l.getValue()}),c=new bs().add(new Fg("Reset").onClick(()=>{n.scoped.value=0,o()})).setSerializable(!1);this.add(new bs().add(a).setSerializable(!1)).add(new vd("Speed").add(l)).add(c),n.scoped._update=n.scoped.update,n.scoped.update=function(...u){n.scoped._update(...u),o()}}}class Mq extends bd{constructor(e,t,i,n,s){super(e,t,i,n,s);const o=Xc.Vector2(n.scoped,"value",new bs,"Vector2",{},[]);o.addEventListener("changeInput",()=>this.invalidate("value")),o.setInput(0),this.add(o)}}class Eq extends bd{constructor(e,t,i,n,s){super(e,t,i,n,s);const o=Xc.Vector3(n.scoped,"value",new bs,"Vector3",{},[]);o.addEventListener("changeInput",()=>this.invalidate("value")),o.setInput(0),this.add(o)}}class Cq extends bd{constructor(e,t,i,n,s){super(e,t,i,n,s);const o=Xc.Vector4(n.scoped,"value",new bs,"Vector4",{},[]);o.addEventListener("changeInput",()=>this.invalidate("value")),o.setInput(0),this.add(o)}}const Aq=["Boolean","Number","String","Color","Vector2","Vector3","Vector4","Euler","bool","float","color","vec2","vec3","vec4"];function VO(r){const e=new Fg;return e.setIcon(`ti ti-${r}`),e.dom.classList.toggle("flat-button"),e}function Nq(r){const e=new vd(r),t=new yd(""),i=new tT(Aq.map(n=>({name:n,value:n})),Aq[1]);return e.add(t).add(i)}const Jb=(r,e,t,i,n,s,o,a)=>{const l=Bg(i,n,s);if(a){const c=VO("trash");c.onClick(()=>{e.removeType(t,n,o)&&(r.remove(l),l.dispose(),r.invalidate())}),l.add(c)}return l.setObject({node:t,field:n,io:o}),l.addEventListener("changeInput",()=>r.invalidate(n,o)),l};function Rq(r,e,t,i,n,s){return r.push({tip:`Add type[${n}] to node[${t.scoped.uuid}][io=${s}]`,undo:()=>{if(!e.removeType(t,i,s))return;const o=Yb[t.scoped.uuid];if(o){const a=o.elements.find(l=>{const c=l.getObject();return c?c.field===i&&c.io===s:!1});a&&(o.remove(a),a.dispose()),o.invalidate()}},redo:()=>{if(!e.addType(t,i,n,s))return;const o=Yb[t.scoped.uuid];if(o){const a=t.scoped.typesExtended,l=t.scoped.getObjectsExtended(),c=Jb(o,e,t,l[s],i,a[s][i],s,!0),u=o.elements.filter(d=>d.getObject()===1911);s==="in"?(c.setOutput(0),o.add(c,u[0])):(c.setInput(0),o.add(c,u[1])),c.setObject({node:t,io:s,field:i}),o.invalidate()}}})}class kq extends rT{constructor(e,t,i,n,s){super(e,t,i,n,{removable:!0,input:0,output:0,...s}),this.title.setColor(10053120),this.node.anchor.width||this.setWidth(420);const o=n.scoped,a=LL(n.name),l=new Set(["object","enabled"]);Object.keys(a.in).forEach(p=>{p!=="code"&&l.add(p)}),l.add("code");for(const p of[...l]){const f=a.in[p];let m;p==="object"?(m=new vd("uuid"),Xc.Object3D(n.scoped,p,m,"Object3D",{},[]),m.inputs[0].dom.ondrop=null):(m=Bg(n.scoped,p,f),m.addEventListener("changeInput",()=>this.invalidate())),m.setInput(0),m.setOutput(0),this.add(m)}const c=this.elements[this.elements.length-1],u=new vd("main(params, out) {");o.editable||(c.inputs[0].setReadOnly(!0),c.setEnabledInputs(!1)),this.add(u,c);const d=n.scoped.typesExtended,h=n.scoped.getObjectsExtended();for(const[p,f]of Object.entries(d.in)){const m=Jb(this,i,n,h.in,p,f,"in",o.editable);m.setOutput(0),m.setObject({node:n,io:"in",field:p}),this.add(m,u)}if(o.editable){const p=Nq("[New Input]"),f=VO("new-section");f.onClick(()=>{const m=p.inputs[0].getValue(),g=p.inputs[1].getValue();if(i.addType(n,m,g,"in")){const v=Jb(this,i,n,h.in,m,d.in[m],"in",o.editable);v.setOutput(0),v.setObject({node:n,io:"in",field:m}),this.add(v,p),this.invalidate(),Rq(t,i,n,m,g,"in")}}),p.add(f),p.setObject(1911),this.add(p,u)}for(const[p,f]of Object.entries(d.out)){const m=Jb(this,i,n,h.out,p,f,"out",o.editable);m.setInput(0),m.setObject({node:n,io:"out",field:p}),this.add(m,u)}if(o.editable){const p=Nq("[New Output]"),f=VO("new-section");f.onClick(()=>{const m=p.inputs[0].getValue(),g=p.inputs[1].getValue();if(i.addType(n,m,g,"out")){const v=Jb(this,i,n,h.out,m,d.out[m],"out",o.editable);v.setInput(0),v.setObject({node:n,io:"out",field:m}),this.add(v,p),this.invalidate(),Rq(t,i,n,m,g,"out")}}),p.setObject(1911),p.add(f),this.add(p,u)}}}class Lq extends kq{constructor(e,t,i,n,s){super(e,t,i,n,{input:1,output:1,...s})}}class C$e extends Lq{constructor(e,t,i,n,s){super(e,t,i,n,{input:0,output:1,...s})}}const A$e={cameraNormalMatrix:[],cameraPosition:[],cameraProjectionMatrix:[],cameraViewMatrix:[],cameraWorldMatrix:[],normalGeometry:[],normalLocal:[],normalView:[],normalWorld:[],transformedNormalView:[],transformedNormalWorld:[],tangentGeometry:[],tangentLocal:[],tangentView:[],tangentWorld:[],transformedTangentView:[],transformedTangentWorld:[],bitangentGeometry:[],bitangentLocal:[],bitangentView:[],bitangentWorld:[],transformedBitangentView:[],transformedBitangentWorld:[],modelDirection:[],modelNormalMatrix:[],modelPosition:[],modelViewMatrix:[],modelViewPosition:[],modelWorldMatrix:[],objectDirection:["object3d"],objectNormalMatrix:["object3d"],objectPosition:["object3d"],objectViewMatrix:["object3d"],objectViewPosition:["object3d"],objectWorldMatrix:["object3d"],positionGeometry:[],positionLocal:[],positionView:[],positionViewDirection:[],positionWorld:[],positionWorldDirection:[],viewportBottomLeft:[],viewportBottomRight:[],viewportCoordinate:[],viewportResolution:[],viewportTopLeft:[],viewportTopRight:[],matcapUV:[],pointUV:[],attribute:["a"],faceDirection:[],frontFacing:[],add:["a","b"],div:["a","b"],mul:["a","b"],pow:["a","b"],remainder:["a","b"],sub:["a","b"],lessThan:["a","b"],lessThanEqual:["a","b"],greaterThan:["a","b"],greaterThanEqual:["a","b"],equal:["a","b"],and:["a","b"],or:["a","b"],bitAnd:["a","b"],bitOr:["a","b"],bitXor:["a","b"],shiftLeft:["a","b"],shiftRight:["a","b"],xor:["a","b"],abs:["a"],acos:["a"],asin:["a"],atan:["aS"],atan2:["a","b"],ceil:["a"],clamp:["a","b","c"],cos:["a"],cross:["a","b"],degrees:["a"],distance:["a","b"],dot:["a","b"],exp:["a"],faceForward:["a","b","c"],floor:["a"],fract:["a"],length:["a"],log:["a"],log2:["a"],max:["a","b"],min:["a","b"],mix:["a","b","c"],mod:["a","b"],negate:["a"],normalize:["a"],oneMinus:["a"],radians:["a"],reciprocal:["a"],reflect:["a","b"],refract:["a","b","c"],remap:["node","inLow","inHigh","outLow","outHigh"],round:["a"],saturate:["a"],sign:["a"],sin:["a"],smoothstep:["a","b","c"],sqrt:["a"],tan:["a"],transformDirection:["a","b"],dFdx:["a"],dFdy:["a"],step:["a","b"],EPSILON:[],INFINITY:[],burn:["blend","base"],difference:["blend","base"],dodge:["blend","base"],hue:["blend","base"],luminance:["blend","base"],overlay:["blend","base"],posterize:["blend","base"],saturation:["blend","base"],screen:["blend","base"],vibrance:["blend","base"],rotateUV:[],colorToDirection:[],directionToColor:[],checker:["uv"],range:["min","max"]};class N$e extends rT{constructor(e,t,i,n,s){super(e,t,i,n,{removable:!0,output:1,...s}),this.node.anchor.width||this.setWidth(360);const o=LL(n.name),a=A$e[n.name],l=Object.entries(o.in).filter(c=>a?a.includes(c[0]):!0);for(const[c,u]of l){const d=Bg(n.scoped,c,u);d.setOutput(0),d.setObject({node:n,io:"in",field:c}),d.addEventListener("changeInput",()=>this.invalidate(c,"in")),this.add(d)}}}class R$e extends nT{constructor(e,t,i,n,s){super(e,t,i,n,{removable:!n.scoped.isObject3DNode,input:0,output:1,...s});const o=this.get("image");o&&(o.setInput(0),o.setOutput(0))}}class k$e extends nT{constructor(e,t,i,n,s){super(e,t,i,n,{removable:!n.scoped.isObject3DNode,input:0,output:1,...s});const o=this.get("font");if(o){o.setInput(0),o.setOutput(0);const a=o.inputs[0],l=a.dom.querySelector("input");l.ondrop=c=>{const u=xd(c);!u||u.type!=="dragFile"||u.mime!=="font/*"||u.path!==a.getValue()&&(n.scoped.object.font=u.path,a.setValue(u.path,!1),o.dispatchEvent(new Event("changeInput")))}}}}class L$e extends nT{constructor(e,t,i,n,s){super(e,t,i,n,{removable:!n.scoped.isObject3DNode,input:0,output:1,...s});const o=this.get("model");if(o){o.setInput(0),o.setOutput(0);const a=o.inputs[0],l=a.dom.querySelector("input");l.ondrop=c=>{const u=xd(c);!u||u.type!=="dragFile"||u.mime!=="model/*"||u.path!==a.getValue()&&(n.scoped.object.model=u.path,a.setValue(u.path,!1),o.dispatchEvent(new Event("changeInput")))}}}}const O$e={Color:T$e,Vector2:Mq,Vector3:Eq,Vector4:Cq,Boolean:S$e,Number:Tq,String:M$e},P$e={float:Tq,timerLocal:E$e,vec2:Mq,vec3:Eq,vec4:Cq};function Oq(r,e,t,i,n){let s=P$e[i.name];if(s)return new s(r,e,t,i,n);if(i.scoped.isInputNode&&i.scoped.value){const o=OL(i.scoped.value);if(s=O$e[o],s)return new s(r,e,t,i,n)}return i.scoped instanceof kp||i.scoped instanceof fO?new C$e(r,e,t,i,n):i.scoped instanceof Vs?new Lq(r,e,t,i,n):i.scoped instanceof Rp?new kq(r,e,t,i,n):i.scoped instanceof ns?i.scoped.object instanceof Nr?new R$e(r,e,t,i,n):i.scoped.object instanceof H7?new k$e(r,e,t,i,n):i.scoped.object instanceof L2?new L$e(r,e,t,i,n):new nT(r,e,t,i,n):new N$e(r,e,t,i,n)}const{global:Qb}=XS;bs.icons.unlink="ti ti-unlink";class Pq extends Ln{constructor(t,i,n,s){super();vt(this,"uuid",$i.generateUUID());vt(this,"domElement");vt(this,"canvas");vt(this,"search",new xq);vt(this,"nodesContext");vt(this,"object");vt(this,"graph",null);vt(this,"_eventForward");vt(this,"_eventDrop");this.scene=t,this.renderer=i,this.history=s,this._eventForward=l=>{l.type==="graphModified"&&this.updateAllMaterialNodes(),this.dispatchEvent(l)};const o=document.createElement("flow"),a=new v$e;this.nodesContext=new yq(a.canvas).setWidth(300),o.append(a.dom),a.dom.children[0].addEventListener("drop",l=>{this.onDrop(l)}),this.object=null,Qb.set("THREE",rS),Qb.set("TSL",XS),Qb.set("scene",t),Qb.set("renderer",i),Qb.set("composer",n),this.canvas=a,this.domElement=o,this.initSearch(),this.initNodesContext(),this.initShortcuts()}setSize(t,i){return this.canvas.setSize(t,i),this}update(){for(const t of this.canvas.nodes)t.update()}centralizeNode(t,i){const n=this.canvas,s=t.dom.getBoundingClientRect(),o=n.width/2-n.scrollLeft-s.width,a=n.height/2-n.scrollTop-s.height;return i.anchor.x=o,i.anchor.y=a,t.setPosition(o,a),this}addWithProtoName(t){const i=Nb(t);if(!i)throw or.panic(`Node[${t}] not found!`);return this.addWithProto(i)}addWithProto(t){const i=m2(t.name);return this.addThreeNode(i,t.name,t.title||t.name,t.icon)}addThreeNode(t,i,n,s){t instanceof ns&&t.createDefault(this.object);const o=this.graph.newGraphNode(t,i);return this.addNode(o,i,n,s)}addNode(t,i,n,s,o=!0){const a=Oq(n,this.history,this.graph,t,{icon:s});return a.rmCallback=()=>{this.history.push({tip:`Remove node[${t.scoped.uuid}]`,undo:()=>{this.addNode(t,i,n,s,!1)},redo:()=>{const l=Yb[t.scoped.uuid];this.graph.remove(t),l.dispose()}})},this.graph.add(t),this.canvas.add(a),o&&this.centralizeNode(a,t),this.canvas.select(a),t}removeNode(t){this.canvas.nodes.find(i=>i.node===t).dispose(),this.graph.remove(t)}getEditorFromUuid(t){const i=this.graph.get(t);return this.canvas.nodes.find(n=>n.node.sc===i)}setScene(t){this.scene=t}setObject(t){if(this.object===t){this.update();return}this.clear(),this.object=t,this.graph&&(this.graph.removeEventListener("graphAdded",this._eventForward),this.graph.removeEventListener("graphModified",this._eventForward),this.graph.removeEventListener("graphConnected",this._eventForward),this.graph.removeEventListener("graphRemoved",this._eventForward)),t.graph||(t.graph=new kg(t)),this.graph=t.graph,this.graph.nodes.length?this.loadGraph():this.createDefault(),this.graph.addEventListener("graphAdded",this._eventForward),this.graph.addEventListener("graphModified",this._eventForward),this.graph.addEventListener("graphConnected",this._eventForward),this.graph.addEventListener("graphRemoved",this._eventForward)}updateAllMaterialNodes(){for(const t of this.graph.nodes)t.scoped instanceof Wr&&(t.scoped.needsUpdate=!0,t.scoped instanceof Zn&&(t.scoped.uniformsNeedUpdate=!0))}onDrop(t){const i=xd(t);if(i&&i.type==="dragNodeClass"){const n=Nb(i.name);if(!n)throw or.panic(`Node[${i.name}] not found!`);const s=this.addWithProto(n);this.history.push({tip:`Add node [class=${i.name}]`,undo:()=>{this.removeNode(s)},redo:()=>{this.addNode(s,n.name,n.title||n.name,n.icon)}})}}clear(){this.graph&&(this.graph.isLocked=!0),this.canvas.clear(),this.graph&&(this.graph.isLocked=!1)}dispose(){this._eventForward&&(this.graph.removeEventListener("graphAdded",this._eventForward),this.graph.removeEventListener("graphModified",this._eventForward),this.graph.removeEventListener("graphConnected",this._eventForward),this.graph.removeEventListener("graphRemoved",this._eventForward),this._eventForward=null),this._eventDrop&&(this.canvas.dom.children[1].removeEventListener("drop",this._eventDrop),this._eventDrop=null)}createDefault(){this.addWithProtoName("object3DRef")}loadGraph(){for(const t of this.graph.nodes){const i=Nb(t.name);if(!i)throw or.panic(`Node[${t.name}] not found!`);const n=Oq(i.title||i.name,this.history,this.graph,t,{icon:i.icon});this.canvas.add(n)}for(const t of this.canvas.nodes){const i=t.node;if(i.scoped instanceof Vs&&i.scoped.prev){const n=i.scoped.prev,s=this.canvas.nodes.find(o=>o.node.scoped===n);if(!s)throw or.panic("Editor not found!");t.title.connect(s.title)}for(const n of t.elements){const s=n.getObject();if(!s||!s.field)continue;const o=i.bounds[s.field];if(!o)continue;const a=this.getElementFrom(o.node,o.field);if(!a)throw or.panic(`Element[field=${o.field}] not found!`);n.connect(a)}}}getElementFrom(t,i){const n=this.canvas.nodes.find(s=>s.node===t);if(n)for(const s of n.elements){const o=s.getObject();if(o&&o.field===i)return s}}initShortcuts(){document.addEventListener("keydown",t=>{t.target===document.body&&t.key==="Tab"&&(this.search.inputDOM.focus(),t.preventDefault(),t.stopImmediatePropagation())})}initSearch(){const t=n=>{if(n.children)for(const s of n.children)t(s);else{if(n.name=="object3DRef")return;{const s=new Fg(n.title||n.name);s.setIcon(`ti ti-${n.icon}`),s.addEventListener("complete",()=>{this.addWithProto(n)}),i.add(s),n.tags!==void 0&&i.setTag(s,n.tags)}}},i=new xq;i.forceAutoComplete=!0,i.onFilter(async()=>{i.clear();for(const n of IL)t(n)}),i.onSubmit(()=>{i.currentFiltered!==null&&i.currentFiltered.button.dispatchEvent(new Event("complete"))}),this.search=i,this.domElement.append(i.dom)}async initNodesContext(){const t=this.nodesContext;t.onContext(()=>{this.canvas}),t.addEventListener("show",()=>{a(),o()});const i=[];let n=[],s=-1;const o=()=>requestAnimationFrame(()=>c.inputDOM.focus()),a=()=>{c.setValue("",!1);for(const h of i)h.setOpened(!1).setVisible(!0).setSelected(!1)},l=new FO;t.add(l);const c=new yd().setPlaceHolder("Search...").setIcon("ti ti-list-search");c.inputDOM.addEventListener("keydown",h=>{const p=h.key;if(p==="ArrowDown"){const f=n[s];f&&f.setSelected(!1);const m=n[s=(s+1)%n.length];m&&m.setSelected(!0),h.preventDefault(),h.stopImmediatePropagation()}else if(p==="ArrowUp"){const f=n[s];f&&f.setSelected(!1);const m=n[s>0?--s:s=n.length-1];m&&m.setSelected(!0),h.preventDefault(),h.stopImmediatePropagation()}else p==="Enter"?(n[s]!==void 0?n[s].dom.click():t.hide(),h.preventDefault(),h.stopImmediatePropagation()):p==="Escape"&&t.hide()}),c.onChange(()=>{const h=c.getValue().toLowerCase();if(h.length===0)return a();n=[],s=0;for(const p of i){const f=p.getLabel().toLowerCase();p.setVisible(!1).setSelected(!1),f.indexOf(h)!==-1&&p.children.length===0&&n.push(p)}for(const p of n){let f=p;for(;f!==null;)f.setOpened(!0).setVisible(!0),f=f.parent}n[s]!==void 0&&n[s].setSelected(!0)});const u=new x$e;l.add(new bs().setHeight(30).add(c)),l.add(new bs().setHeight(200).add(u));const d=h=>{const p=new b$e(h.title||h.name);if(p.setIcon(`ti ti-${h.icon}`),h.children===void 0&&(p.isNodeClass=!0,p.onClick(async()=>{this.addWithProto(h)})),h.tip,i.push(p),h.children)for(const f of h.children){if(f.name=="object3DRef")continue;const m=d(f);p.add(m)}return p};for(const h of IL){const p=d(h);u.add(p)}}}const I$e=["width","height"],D$e=xe({__name:"main",props:{iso:{type:Boolean,default:!1}},setup(r){const e=W(),t=W(),i=W(3840),n=W(2160);function s(){var f,m;if(!e.value)return;const u=e.value.children[0];let{width:d,height:h}=e.value.getBoundingClientRect();(f=ke.editor)==null||f.setSize(d,h);const p=ke.project.world;p.aspect==="auto"||(p.aspect>1?h=d/p.aspect:d=h*p.aspect),i.value=d*window.devicePixelRatio,n.value=h*window.devicePixelRatio,u.style.width=`${d}px`,u.style.height=`${h}px`,(m=ke.world)==null||m.resize(i.value,n.value)}Ve(()=>Qt.state.isFloating,()=>{setTimeout(s,0)});function o(){s(),a()}function a(){var u;ke.world&&(ke.world.setScene(ke.project.scene),(u=ke.editor)==null||u.setScene(ke.project.scene),ke.history.setScene(ke.project.scene))}Ve(()=>Qt.state.isWorldView,()=>{a()});function l(){window.removeEventListener("monacoReady",l),ke.editor=new Pq(new qa,ke.world.renderer,ke.world.composer,ke.history),t.value.append(ke.editor.domElement),s()}Et(()=>{ke.world||(ke.world=new c$e(document.getElementById("canvas"),ke.history),window.monaco?(ke.editor=new Pq(ke.world.root,ke.world.renderer,ke.world.composer,ke.history),t.value.append(ke.editor.domElement)):window.addEventListener("monacoReady",l),ke.world.run()),s(),window.addEventListener("resize",s),ke.addEventListener("projectLoaded",o),ke.addEventListener("worldSettingsModified",s),ke.addEventListener("sceneChanged",a)}),ki(()=>{window.removeEventListener("resize",s),ke.removeEventListener("projectLoaded",o),ke.removeEventListener("worldSettingsModified",s),ke.removeEventListener("sceneChanged",a)});async function c(u){const d=xd(u);if(!d||d.type!=="dragObjectClass")return;u.stopPropagation();const h=[];if(d.name==="PositionalAudio2"){const f=ke.project.scene.getObjectsByProperty("isAudioListener2",!0)||[];if(f.length===0){ke.dispatchEvent({type:"userEventNotice",level:"error",message:"Not audio listener found"});return}else if(f.length===1)h.push({listener:f[0]});else{Qt.state.audioListeners=f.map(g=>({name:g.name,value:g.uuid}));const m=await PX(document.querySelector(".mainLisSelector"));if(!m)return;h.push({listener:f.find(g=>g.uuid===m)})}}const p=ke.project.addObjectByClass(d.name,void 0,h);ke.history.push({tip:`Add object [class=${d.name}][uuid=${p.uuid}]`,undo:()=>{ke.project.removeObject(p)},redo:()=>{ke.project.addObject(p)}})}return(u,d)=>(D(),ee("div",{ref_key:"root",ref:e,class:"wrap",style:{position:"relative",height:"100%"}},[J("canvas",{id:"canvas",class:"canvas",width:i.value,height:n.value,onDrop:c},null,40,I$e),It(J("div",{ref_key:"graph",ref:t,class:"graph"},null,512),[[vr,!y(Qt).state.isWorldView]]),ue(LHe,{class:"mainLisSelector",values:y(Qt).state.audioListeners,"max-width":"420px",title:"Please select audio listener"},null,8,["values"])],512))}}),U$e=Gs(D$e,[["__scopeId","data-v-5ff5cb5b"]]),F$e={class:"panel"},B$e={key:0,class:"header"},z$e=xe({__name:"panel",props:{icon:{type:String,default:"icon-egg"},showHeader:{type:Boolean,default:!0}},setup(r){return(e,t)=>(D(),ee("div",F$e,[r.showHeader?(D(),ee("div",B$e,[J("i",{class:j(r.icon)},null,2),ze(e.$slots,"header",{},void 0,!0)])):Re("",!0),ze(e.$slots,"default",{},void 0,!0)]))}}),Iq=Gs(z$e,[["__scopeId","data-v-94aa6bb5"]]),V$e="3207849",G$e="egg",j$e="iconfont",H$e="icon-",W$e="",$$e=[{icon_id:"1788973",name:"affix",font_class:"affix",unicode:"e6a7",unicode_decimal:59047},{icon_id:"14342042",name:"water",font_class:"water",unicode:"e7c8",unicode_decimal:59336},{icon_id:"18925864",name:"ear",font_class:"ear",unicode:"e611",unicode_decimal:58897},{icon_id:"12310436",name:"triangle",font_class:"triangle",unicode:"e8a9",unicode_decimal:59561},{icon_id:"34453278",name:"square",font_class:"square",unicode:"e869",unicode_decimal:59497},{icon_id:"26742367",name:"capsule",font_class:"capsule",unicode:"e61e",unicode_decimal:58910},{icon_id:"1636739",name:"cylinder",font_class:"cylinder",unicode:"e78a",unicode_decimal:59274},{icon_id:"1916662",name:"pipe",font_class:"pipe",unicode:"e7ef",unicode_decimal:59375},{icon_id:"17581801",name:"cone",font_class:"cone",unicode:"ec71",unicode_decimal:60529},{icon_id:"17581803",name:"sphere",font_class:"sphere",unicode:"ec73",unicode_decimal:60531},{icon_id:"18442449",name:"ring",font_class:"ring",unicode:"e605",unicode_decimal:58885},{icon_id:"540405",name:"project",font_class:"project",unicode:"e649",unicode_decimal:58953},{icon_id:"949579",name:"image",font_class:"image",unicode:"e612",unicode_decimal:58898},{icon_id:"6808674",name:"swipe",font_class:"swipe",unicode:"ee08",unicode_decimal:60936},{icon_id:"7206020",name:"Buttons",font_class:"switch",unicode:"e62f",unicode_decimal:58927},{icon_id:"7213103",name:"font",font_class:"font",unicode:"e673",unicode_decimal:58995},{icon_id:"747746",name:"keyboard",font_class:"keyboard",unicode:"e7a3",unicode_decimal:59299},{icon_id:"162013",name:"vector",font_class:"vector",unicode:"e756",unicode_decimal:59222},{icon_id:"588125",name:"router",font_class:"router",unicode:"e6a6",unicode_decimal:59046},{icon_id:"826076",name:"web",font_class:"web",unicode:"e6fd",unicode_decimal:59133},{icon_id:"924427",name:"expand",font_class:"expand",unicode:"e8f7",unicode_decimal:59639},{icon_id:"5466093",name:"add",font_class:"add-circle",unicode:"e734",unicode_decimal:59188},{icon_id:"5897419",name:"undo",font_class:"undo",unicode:"e7c1",unicode_decimal:59329},{icon_id:"5897423",name:"redo",font_class:"redo",unicode:"e7c2",unicode_decimal:59330},{icon_id:"6231101",name:"close",font_class:"close-line",unicode:"e625",unicode_decimal:58917},{icon_id:"6275359",name:"locator",font_class:"locator",unicode:"e61f",unicode_decimal:58911},{icon_id:"6664200",name:"radio",font_class:"radio",unicode:"e627",unicode_decimal:58919},{icon_id:"6806277",name:"design",font_class:"design",unicode:"ea9e",unicode_decimal:60062},{icon_id:"7206010",name:"Alert",font_class:"alert",unicode:"e62e",unicode_decimal:58926},{icon_id:"7674856",name:"float",font_class:"float",unicode:"e70f",unicode_decimal:59151},{icon_id:"7683693",name:"delete",font_class:"delete",unicode:"e604",unicode_decimal:58884},{icon_id:"7683834",name:"new",font_class:"new",unicode:"e623",unicode_decimal:58915},{icon_id:"9229181",name:"index",font_class:"index",unicode:"e90f",unicode_decimal:59663},{icon_id:"10563018",name:"Tools",font_class:"toolbar",unicode:"e6c3",unicode_decimal:59075},{icon_id:"11982698",name:"Refresh, sync, reload",font_class:"reload",unicode:"e9d3",unicode_decimal:59859},{icon_id:"12907985",name:"search close",font_class:"close",unicode:"e60e",unicode_decimal:58894},{icon_id:"16553867",name:"test",font_class:"test",unicode:"e89e",unicode_decimal:59550},{icon_id:"16711160",name:"link",font_class:"link-hor",unicode:"e626",unicode_decimal:58918},{icon_id:"6807520",name:"Fireworks-1",font_class:"fireworks",unicode:"ec65",unicode_decimal:60517},{icon_id:"1197103",name:"video-camera",font_class:"video-camera",unicode:"e686",unicode_decimal:59014},{icon_id:"8494296",name:"Earth",font_class:"earth",unicode:"e60d",unicode_decimal:58893},{icon_id:"18986705",name:"Layer",font_class:"layer",unicode:"e8c9",unicode_decimal:59593},{icon_id:"432087",name:"Upload",font_class:"upload",unicode:"e828",unicode_decimal:59432},{icon_id:"12896516",name:"3D Model",font_class:"model3d",unicode:"e62a",unicode_decimal:58922},{icon_id:"7206140",name:"Mouse",font_class:"mouse",unicode:"e647",unicode_decimal:58951},{icon_id:"1226737",name:"Time",font_class:"time",unicode:"e6b8",unicode_decimal:59064},{icon_id:"9229176",name:"String",font_class:"string",unicode:"e90d",unicode_decimal:59661},{icon_id:"6807567",name:"Distance",font_class:"distance",unicode:"ec7c",unicode_decimal:60540},{icon_id:"7239686",name:"dash",font_class:"dash",unicode:"e724",unicode_decimal:59172},{icon_id:"11200411",name:"\u7EBF",font_class:"line",unicode:"e602",unicode_decimal:58882},{icon_id:"11981834",name:"mesh_grid",font_class:"mesh",unicode:"e97e",unicode_decimal:59774},{icon_id:"544408",name:"arrow-move",font_class:"arrowmove",unicode:"e6d8",unicode_decimal:59096},{icon_id:"608356",name:"\u7BAD\u5934",font_class:"stream",unicode:"e6af",unicode_decimal:59055},{icon_id:"1203091",name:"\u4EA4\u53C9_cross36",font_class:"vec2",unicode:"e607",unicode_decimal:58887},{icon_id:"29440467",name:"\u4EBA\u673A\u4EA4\u4E923D-\u4E09\u7EF4\u5750\u6807",font_class:"axis",unicode:"efda",unicode_decimal:61402},{icon_id:"1444787",name:"json",font_class:"json",unicode:"e7bd",unicode_decimal:59325},{icon_id:"1445431",name:"texture",font_class:"texture",unicode:"e8e2",unicode_decimal:59618},{icon_id:"5357319",name:"vec3",font_class:"vec3",unicode:"e6e1",unicode_decimal:59105},{icon_id:"12342512",name:"Boolean",font_class:"boolean",unicode:"e639",unicode_decimal:58937},{icon_id:"13413008",name:"\u4E09\u7EF4\u5750\u6807",font_class:"xyz",unicode:"e622",unicode_decimal:58914},{icon_id:"17412150",name:"Color",font_class:"color",unicode:"e660",unicode_decimal:58976},{icon_id:"24341702",name:"flow chart 2-line",font_class:"octets",unicode:"e9ea",unicode_decimal:59882},{icon_id:"399081",name:"remove",font_class:"remove",unicode:"e6f4",unicode_decimal:59124},{icon_id:"401062",name:"remove",font_class:"trash",unicode:"e82a",unicode_decimal:59434},{icon_id:"762250",name:"Press-and-Drag",font_class:"drag",unicode:"e633",unicode_decimal:58931},{icon_id:"1704211",name:"arrows_drag_left_dashed",font_class:"drag-left",unicode:"e690",unicode_decimal:59024},{icon_id:"11494519",name:"scenes",font_class:"scene",unicode:"e79e",unicode_decimal:59294},{icon_id:"212502",name:"lights",font_class:"bulb",unicode:"e6de",unicode_decimal:59102},{icon_id:"1473266",name:"\u673A\u5668\u4EBA",font_class:"xbot",unicode:"e67b",unicode_decimal:59003},{icon_id:"1493286",name:"my_light",font_class:"human",unicode:"e7d5",unicode_decimal:59349},{icon_id:"6802116",name:"ball",font_class:"ball",unicode:"e726",unicode_decimal:59174},{icon_id:"7594407",name:"24gl-square",font_class:"plane",unicode:"ea98",unicode_decimal:60056},{icon_id:"12342509",name:"text",font_class:"text",unicode:"e638",unicode_decimal:58936},{icon_id:"18166094",name:"\u7ACB\u65B9\u4F53,\u6B63\u65B9\u5F62,\u5E94\u7528",font_class:"box",unicode:"e8b2",unicode_decimal:59570},{icon_id:"28528103",name:"\u7ACB\u65B9\u4F53,\u6B63\u65B9\u5F62,\u5E94\u7528",font_class:"unit",unicode:"efd6",unicode_decimal:61398},{icon_id:"29440468",name:"text",font_class:"text3d",unicode:"efdb",unicode_decimal:61403},{icon_id:"29382179",name:"\u7ACB\u65B9\u4F53,\u6B63\u65B9\u5F62,\u5E94\u7528",font_class:"cube",unicode:"efd9",unicode_decimal:61401},{icon_id:"28528107",name:"material",font_class:"material",unicode:"efd7",unicode_decimal:61399},{icon_id:"14679452",name:"waveform_path",font_class:"wave",unicode:"e6e7",unicode_decimal:59111},{icon_id:"3956072",name:"\u6750\u8D28\u6837\u5F0F\u5237",font_class:"brush",unicode:"e63f",unicode_decimal:58943},{icon_id:"12088900",name:"Speech Recognition",font_class:"recognition",unicode:"e99b",unicode_decimal:59803},{icon_id:"23816370",name:"speech",font_class:"recorder",unicode:"e65c",unicode_decimal:58972},{icon_id:"17412934",name:"Timer-1",font_class:"timer",unicode:"e70b",unicode_decimal:59147},{icon_id:"544311",name:"android-hand",font_class:"hand",unicode:"e678",unicode_decimal:59e3},{icon_id:"1503681",name:"number0",font_class:"number",unicode:"e645",unicode_decimal:58949},{icon_id:"15296119",name:"reset",font_class:"reset",unicode:"e620",unicode_decimal:58912},{icon_id:"23701233",name:"Screen-Filled",font_class:"screen",unicode:"e641",unicode_decimal:58945},{icon_id:"27994433",name:"Component",font_class:"component",unicode:"e761",unicode_decimal:59233},{icon_id:"7685334",name:"variable",font_class:"variable",unicode:"e74e",unicode_decimal:59214},{icon_id:"2116652",name:"MINIMIZE",font_class:"minimize",unicode:"e6b7",unicode_decimal:59063},{icon_id:"8474313",name:"maximize",font_class:"maximize",unicode:"e6c0",unicode_decimal:59072},{icon_id:"217427",name:"group",font_class:"group",unicode:"e642",unicode_decimal:58946},{icon_id:"544677",name:"ios-infinite",font_class:"bigint",unicode:"e7df",unicode_decimal:59359},{icon_id:"1306362",name:"aislogo",font_class:"translate",unicode:"e648",unicode_decimal:58952},{icon_id:"6399996",name:"\u516C\u5F0F_\u666E\u901A",font_class:"math",unicode:"e603",unicode_decimal:58883},{icon_id:"8242724",name:"git",font_class:"logic",unicode:"e610",unicode_decimal:58896},{icon_id:"12763007",name:"messages",font_class:"message",unicode:"e644",unicode_decimal:58948},{icon_id:"16516758",name:"\u4EFB\u52A1\u6D41\u7A0B",font_class:"queue",unicode:"e6b6",unicode_decimal:59062},{icon_id:"14636674",name:"start",font_class:"start",unicode:"e670",unicode_decimal:58992},{icon_id:"2596781",name:"\u505C\u6B62",font_class:"stop",unicode:"e76b",unicode_decimal:59243},{icon_id:"160107",name:"Camera2",font_class:"camera",unicode:"e601",unicode_decimal:58881},{icon_id:"10140059",name:"screen-1",font_class:"screen-outline",unicode:"e6aa",unicode_decimal:59050},{icon_id:"11981757",name:"joystick",font_class:"joystick",unicode:"e978",unicode_decimal:59768},{icon_id:"848644",name:"time",font_class:"time-outline",unicode:"e63e",unicode_decimal:58942},{icon_id:"28604396",name:"Egg, dots",font_class:"chick",unicode:"efd8",unicode_decimal:61400},{icon_id:"10561000",name:"Egg, dots",font_class:"egg",unicode:"e646",unicode_decimal:58950},{icon_id:"11399251",name:"save",font_class:"save",unicode:"e600",unicode_decimal:58880},{icon_id:"68291",name:"dot1",font_class:"dot-mini",unicode:"e654",unicode_decimal:58964},{icon_id:"246144",name:"editor-line",font_class:"editor",unicode:"e684",unicode_decimal:59012},{icon_id:"602165",name:"arrow down",font_class:"arrow-dropright",unicode:"e624",unicode_decimal:58916},{icon_id:"645875",name:"LC_icon_desktop_line_2",font_class:"desktop",unicode:"e643",unicode_decimal:58947},{icon_id:"1154647",name:"uE700-audio",font_class:"audio",unicode:"e61b",unicode_decimal:58907},{icon_id:"1363841",name:"remove",font_class:"trash-outline",unicode:"e60c",unicode_decimal:58892},{icon_id:"1471598",name:"robot-img",font_class:"robot",unicode:"e61a",unicode_decimal:58906},{icon_id:"2861028",name:"Loading",font_class:"loading",unicode:"e65d",unicode_decimal:58973},{icon_id:"5758154",name:"plugin",font_class:"chip",unicode:"e66d",unicode_decimal:58989},{icon_id:"15838560",name:"add-bold",font_class:"add",unicode:"e685",unicode_decimal:59013},{icon_id:"20239308",name:"arrow down",font_class:"arrow-dropdown",unicode:"efd3",unicode_decimal:61395},{icon_id:"20239311",name:"arrow down",font_class:"arrow-dropleft",unicode:"efd4",unicode_decimal:61396},{icon_id:"20239353",name:"arrow down",font_class:"arrow-dropup",unicode:"efd5",unicode_decimal:61397}],X$e={id:V$e,name:G$e,font_family:j$e,css_prefix_text:H$e,description:W$e,glyphs:$$e},q$e=["selected","onDragstart","onDragend","onDrop"],K$e=["onBlur"],Y$e=xe({__name:"objtree",setup(r){const e={value:"id",label:"name",children:"children"};function t(m,g){m.target.contentEditable=!1;const v=m.target.innerText;if(!/[a-z][0-9a-z]/i.test(v)){console.error(v);return}if(v===g.name)return;const x=ke.project.scene.getObjectById(g.id);x.name=v,g.isScene&&ke.dispatchEvent({type:"sceneChanged",soure:null,scene:ke.project.scene}),ke.dispatchEvent({type:"objectModified",soure:null,objects:[x]})}const i=W([]),n=W("");function s(){const m=function(g){const v={id:g.id,uuid:g.uuid,name:g.name,type:g.type,children:[]};for(const x of g.children)x[kje]||v.children.push(m(x));return v};return m(ke.project.scene)}function o({detail:m}){var v;n.value=((v=ke.world.selected)==null?void 0:v.uuid)||"";const g=[s()];i.value=g}function a(m){return X$e.glyphs.find(g=>g.font_class===m)?`icon-${m}`:"icon-model3d"}function l(m){if(!ke.world)return;const g=ke.project.scene.getObjectById(m.id);ke.world.selectObject(g),Qt.state.isWorldView||ke.editor.setObject(g)}async function c(m,g){const v=xd(g);if(!v)return;const x=ke.project.scene.getObjectById(m.id);if(v.type==="dragObjectClass"){const b=[];if(v.name==="PositionalAudio2"){const _=ke.project.scene.getObjectsByProperty("isAudioListener2",!0)||[];if(_.length===0){ke.dispatchEvent({type:"userEventNotice",level:"error",message:"Not audio listener found"});return}else if(_.length===1)b.push({listener:_[0]});else{Qt.state.audioListeners=_.map(T=>({name:T.name,value:T.uuid}));const S=await PX(document.querySelector(".mainLisSelector"));if(!S)return;b.push({listener:_.find(T=>T.uuid===S)})}}const w=ke.project.addObjectByClass(v.name,x,b);ke.history.push({tip:`Add object [class=${v.name}][uuid=${w.uuid}] to [uuid=${m.uuid}]`,undo:()=>{ke.project.removeObject(w)},redo:()=>{ke.project.addObject(w,x)}})}else if(v.type==="dragObject"){if(v.otype!=="Object3D"||!(v.object instanceof nr))return;const b=v.object;if(b.uuid===x.uuid)return;const w=b.parent;ke.project.addObject(b,x),ke.dispatchEvent({type:"treeModified",soure:null,root:w}),ke.dispatchEvent({type:"objectModified",soure:null,objects:[b,w,x]}),ke.history.push({tip:`Move object[${b.uuid}] from [${w==null?void 0:w.uuid}] to [uuid=${x.uuid}]`,undo:()=>{ke.project.addObject(b,w),ke.dispatchEvent({type:"treeModified",soure:null,root:w}),ke.dispatchEvent({type:"objectModified",soure:null,objects:[b,w,x]})},redo:()=>{ke.project.addObject(b,x),ke.dispatchEvent({type:"treeModified",soure:null,root:w}),ke.dispatchEvent({type:"objectModified",soure:null,objects:[b,w,x]})}})}}const u={offsetX:0,offsetY:0,timeStamp:0};function d(m,g,v){const x=v.timeStamp-u.timeStamp;u.offsetX===v.offsetX&&u.offsetY===v.offsetY&&x<=300?(Qt.state.isWorldView=!1,ke.world.selected&&ke.editor.setObject(ke.world.selected),u.offsetX=0,u.offsetY=0,u.timeStamp=0):(u.offsetX=v.offsetX,u.offsetY=v.offsetY,u.timeStamp=v.timeStamp)}function h(m,g){const v=ke.project.scene.getObjectById(m.id);ll(g,{type:"dragObject",soure:null,object:v,otype:"Object3D"})}function p(m,g){var x;const v=ke.project.scene.getObjectById(m.id);(x=g.dataTransfer)!=null&&x.getData("selfRemove")&&f(v)}function f(m){if(m.isScene){if(!ke.project.removeScene(m)){wA({title:Hc("Error"),message:Hc("It is the last scene!"),type:"error"});return}}else{const g=m.parent;if(!ke.project.removeObject(m)){wA({title:Hc("Error"),message:Hc("Failed to remove object!"),type:"error"});return}ke.history.push({tip:`Remove object [uuid=${m.uuid}]`,undo:()=>{ke.project.addObject(m,g)},redo:()=>{ke.project.removeObject(m)}}),m===ke.world.selected&&ke.world.selectObject()}}return Et(()=>{o({}),ke.addEventListener("projectLoaded",o),ke.addEventListener("sceneChanged",o),ke.addEventListener("objectChanged",o),ke.addEventListener("treeModified",o)}),ki(()=>{ke.removeEventListener("projectLoaded",o),ke.removeEventListener("sceneChanged",o),ke.removeEventListener("objectChanged",o),ke.removeEventListener("treeModified",o)}),(m,g)=>{const v=gt("el-tree");return D(),Ae(v,{class:"otree","default-expand-all":!0,data:i.value,props:e,"expand-on-click-node":!1,onCurrentChange:l,onNodeClick:d},{default:me(({node:x,data:b})=>[J("div",{class:"label-round",draggable:"true",showTrash:"true",selected:n.value===b.uuid,onDragstart:w=>h(b,w),onDragend:w=>p(b,w),onDrop:w=>c(b,w)},[J("i",{class:j(a(b.type)),style:{"pointer-events":"none","margin-left":"-8px","margin-right":"6px"}},null,2),J("span",{class:j(["prefix",{"is-leaf":x.isLeaf}]),style:{"pointer-events":"none"}},$e(b.type),3)],40,q$e),J("span",{class:"text-ellipsis",ondblclick:"this.contentEditable=true; this.focus();",onBlur:w=>t(w,b)},$e(x.label||b.uuid),41,K$e)]),_:1},8,["data"])}}}),Z$e=Gs(Y$e,[["__scopeId","data-v-c82515ba"]]),J$e={class:"grid-list"},Q$e=["onDragstart"],e7e={class:"grid-slot"},t7e={class:"grid-name text-ellipsis",style:{flex:"1 1 auto"}},r7e=xe({__name:"grid",props:{items:{type:Array,default:[]},itemWidth:{type:String,default:"170px"}},emits:["onItemDragstart"],setup(r){return(e,t)=>(D(),ee("div",J$e,[(D(!0),ee(ct,null,Ut(r.items,i=>(D(),ee("div",{key:i.name,class:"grid-item",draggable:"true",style:pt({width:r.itemWidth}),onDragstart:n=>e.$emit("onItemDragstart",i,n)},[J("div",e7e,[J("i",{class:j(i.icon)},null,2)]),J("label",t7e,$e(i.label||i.name),1)],44,Q$e))),128))]))}}),zg=Gs(r7e,[["__scopeId","data-v-11c576bb"]]),i7e=xe({__name:"scripts",setup(r){const e=[];for(const[i,n]of Object.entries(Sp)){if(!n.group.startsWith("Scripts."))continue;const s=n.group.split(".").pop();e.push({name:i,label:s||i,icon:`ti ti-${n.icon||"brand-javascript"}`})}e.sort((i,n)=>i.label.localeCompare(n.label));function t(i,n){ll(n,{type:"dragNodeClass",soure:null,name:i.name})}return(i,n)=>(D(),Ae(zg,{items:e,onOnItemDragstart:t}))}}),n7e=xe({__name:"materials",setup(r){const e=[];for(const[i,n]of Object.entries(Sp)){if(!n.group.startsWith("Material."))continue;const s=n.group.split(".").pop();e.push({name:i,label:s||i,icon:`ti ti-${n.icon||"texture"}`})}e.sort((i,n)=>i.label.localeCompare(n.label));function t(i,n){ll(n,{type:"dragNodeClass",soure:null,name:i.name})}return(i,n)=>(D(),Ae(zg,{items:e,onOnItemDragstart:t}))}}),s7e=xe({__name:"units",setup(r){const e=[];for(const[i,n]of Object.entries(Cg)){if(!n.group||n.group.startsWith("Scenes.")||n.group.startsWith("Entities.")||n.group.startsWith("Shapes.")||n.group.startsWith("Effects."))continue;const s=n.group.split(".").pop();e.push({name:i,label:s||i,group:n.group,icon:`icon-${n.icon||"texture"}`})}e.sort((i,n)=>i.group.localeCompare(n.group));function t(i,n){ll(n,{type:"dragObjectClass",soure:null,name:i.name})}return(i,n)=>(D(),Ae(zg,{items:e,onOnItemDragstart:t}))}});class o7e extends bG{constructor(e){super(e),this.type=gi}parse(e){const t=function(v,x){switch(v){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(x||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(x||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(x||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(x||""))}},i=`
`,n=function(v,x,b){x=x||1024;let w=v.pos,_=-1,S=0,T="",M=String.fromCharCode.apply(null,new Uint16Array(v.subarray(w,w+128)));for(;0>(_=M.indexOf(i))&&S<x&&w<v.byteLength;)T+=M,S+=M.length,w+=128,M+=String.fromCharCode.apply(null,new Uint16Array(v.subarray(w,w+128)));return-1<_?(b!==!1&&(v.pos+=S+_+1),T+M.slice(0,_)):!1},s=function(v){const x=/^#\?(\S+)/,b=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,w=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,_=/^\s*FORMAT=(\S+)\s*$/,S=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,T={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let M,E;for((v.pos>=v.byteLength||!(M=n(v)))&&t(1,"no header found"),(E=M.match(x))||t(3,"bad initial token"),T.valid|=1,T.programtype=E[1],T.string+=M+`
`;M=n(v),M!==!1;){if(T.string+=M+`
`,M.charAt(0)==="#"){T.comments+=M+`
`;continue}if((E=M.match(b))&&(T.gamma=parseFloat(E[1])),(E=M.match(w))&&(T.exposure=parseFloat(E[1])),(E=M.match(_))&&(T.valid|=2,T.format=E[1]),(E=M.match(S))&&(T.valid|=4,T.height=parseInt(E[1],10),T.width=parseInt(E[2],10)),T.valid&2&&T.valid&4)break}return T.valid&2||t(3,"missing format specifier"),T.valid&4||t(3,"missing image size specifier"),T},o=function(v,x,b){const w=x;if(w<8||w>32767||v[0]!==2||v[1]!==2||v[2]&128)return new Uint8Array(v);w!==(v[2]<<8|v[3])&&t(3,"wrong scanline width");const _=new Uint8Array(4*x*b);_.length||t(4,"unable to allocate buffer space");let S=0,T=0;const M=4*w,E=new Uint8Array(4),C=new Uint8Array(M);let P=b;for(;P>0&&T<v.byteLength;){T+4>v.byteLength&&t(1),E[0]=v[T++],E[1]=v[T++],E[2]=v[T++],E[3]=v[T++],(E[0]!=2||E[1]!=2||(E[2]<<8|E[3])!=w)&&t(3,"bad rgbe scanline format");let A=0,N;for(;A<M&&T<v.byteLength;){N=v[T++];const F=N>128;if(F&&(N-=128),(N===0||A+N>M)&&t(3,"bad scanline data"),F){const B=v[T++];for(let k=0;k<N;k++)C[A++]=B}else C.set(v.subarray(T,T+N),A),A+=N,T+=N}const R=w;for(let F=0;F<R;F++){let B=0;_[S]=C[F+B],B+=w,_[S+1]=C[F+B],B+=w,_[S+2]=C[F+B],B+=w,_[S+3]=C[F+B],S+=4}P--}return _},a=function(v,x,b,w){const _=v[x+3],S=Math.pow(2,_-128)/255;b[w+0]=v[x+0]*S,b[w+1]=v[x+1]*S,b[w+2]=v[x+2]*S,b[w+3]=1},l=function(v,x,b,w){const _=v[x+3],S=Math.pow(2,_-128)/255;b[w+0]=Sy.toHalfFloat(Math.min(v[x+0]*S,65504)),b[w+1]=Sy.toHalfFloat(Math.min(v[x+1]*S,65504)),b[w+2]=Sy.toHalfFloat(Math.min(v[x+2]*S,65504)),b[w+3]=Sy.toHalfFloat(1)},c=new Uint8Array(e);c.pos=0;const u=s(c),d=u.width,h=u.height,p=o(c.subarray(c.pos),d,h);let f,m,g;switch(this.type){case mi:g=p.length/4;const v=new Float32Array(g*4);for(let b=0;b<g;b++)a(p,b*4,v,b*4);f=v,m=mi;break;case gi:g=p.length/4;const x=new Uint16Array(g*4);for(let b=0;b<g;b++)l(p,b*4,x,b*4);f=x,m=gi;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:d,height:h,data:f,header:u.string,gamma:u.gamma,exposure:u.exposure,type:m}}setDataType(e){return this.type=e,this}load(e,t,i,n){function s(o,a){switch(o.type){case mi:case gi:o.colorSpace=li,o.minFilter=Or,o.magFilter=Or,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,i,n)}}class a7e extends Fi{constructor(e){super(e),this.hdrLoader=new o7e,this.type=gi}load(e,t,i,n){const s=new Sc;switch(s.type=this.type,s.type){case mi:s.colorSpace=li,s.minFilter=Or,s.magFilter=Or,s.generateMipmaps=!1;break;case gi:s.colorSpace=li,s.minFilter=Or,s.magFilter=Or,s.generateMipmaps=!1;break}const o=this;let a=0;function l(c,u,d,h){new In(o.manager).setPath(o.path).setResponseType("arraybuffer").setWithCredentials(o.withCredentials).load(e[c],function(p){a++;const f=o.hdrLoader.parse(p);if(f){if(f.data!==void 0){const m=new ma(f.data,f.width,f.height);m.type=s.type,m.colorSpace=s.colorSpace,m.format=s.format,m.minFilter=s.minFilter,m.magFilter=s.magFilter,m.generateMipmaps=s.generateMipmaps,s.images[c]=m}a===6&&(s.needsUpdate=!0,u&&u(s))}},d,h)}for(let c=0;c<e.length;c++)l(c,t,i,n);return s}setDataType(e){return this.type=e,this.hdrLoader.setDataType(e),this}}const l7e={class:"list"},c7e=["onClick"],u7e=["src"],d7e=["data-name"],h7e=xe({__name:"envs",setup(r){const e=W([]);async function t(){const s=await Ga.environments();e.value=[...s,{name:"Empty",title:"Empty",cover:"/assets/images/blank.png",format:""}]}function i(s){for(const o of s){if(!o)continue;let a=!1;for(const l of ke.project.scenes)if(l.background instanceof Nr&&l.background.uuid===o.uuid){a=!0;break}a||delete ke.project.textures[o.uuid]}}async function n(s){let o=Object.values(ke.project.textures).find(a=>a.userData.name===s.name);if(!o&&s.name!=="Empty"){const a=s.format===".hdr"?new a7e:new yG;a.setPath(`/fs/file/shared/environments/${s.name}/`),o=await a.loadAsync(["px","nx","py","ny","pz","nz"].map(l=>`${l}${s.format}`)),o.userData.name=s.name,ke.project.textures[o.uuid]=o}o===void 0&&(o=null);{const a=ke.project.scene,l=a.background,c=a.environment;a.background=o,a.environment=o,ke.world.root.background=o,ke.world.root.environment=o,i([l,c]),ke.dispatchEvent({type:"objectModified",soure:null,objects:[a]}),ke.history.push({tip:`Set env[${s.name}] to current scene`,undo:()=>{a.background=l,a.environment=c,ke.world.root.background=l,ke.world.root.environment=c},redo:()=>{a.background=o,a.environment=o,ke.world.root.background=o,ke.world.root.environment=o}})}}return Et(()=>{t()}),ki(()=>{}),(s,o)=>(D(),ee("div",l7e,[(D(!0),ee(ct,null,Ut(e.value,a=>(D(),ee("div",{key:a.name,class:"item",onClick:l=>n(a)},[J("img",{src:a.cover},null,8,u7e),J("label",{"data-name":a.name},$e(a.title),9,d7e)],8,c7e))),128))]))}}),p7e=Gs(h7e,[["__scopeId","data-v-80f07745"]]),f7e={class:"list"},m7e=["onDragstart"],g7e=["src"],v7e=xe({__name:"images",setup(r){const e=W([]);async function t(){const o=/\.jpg|\.jpeg|\.bmp|\.png$/i,a=(await Ga.getMediaFiles(ke.project.name)).filter(l=>o.test(l.url));e.value.length=0,e.value.push(...i),e.value.push(...a.map(l=>{const c=l.url.split("/").pop();return{url:l.url,name:c,size:l.size}}))}const i=[];function n(){const o=document.createElement("canvas"),a=o.getContext("2d");if(!a)return;o.width=o.height=128,a.fillStyle="#444",a.fillRect(0,0,128,128),a.fillStyle="#fff",a.fillRect(0,0,64,64),a.fillRect(64,64,64,64);const l=o.toDataURL();i.push({url:l,name:"checker.png",size:0})}function s(o,a){ll(a,{type:"dragFile",soure:null,path:o.url,mime:"image/*"})}return Et(()=>{n(),ke.addEventListener("assetsChanged",t),t()}),ki(()=>{ke.removeEventListener("assetsChanged",t)}),(o,a)=>(D(),ee("div",f7e,[(D(!0),ee(ct,null,Ut(e.value,l=>(D(),ee("div",{key:l.name,class:"item",draggable:"true",onDragstart:c=>s(l,c)},[J("img",{src:l.url},null,8,g7e),J("label",null,$e(l.name),1)],40,m7e))),128))]))}}),y7e=Gs(v7e,[["__scopeId","data-v-b0730805"]]),b7e={class:"list"},x7e=["onDragstart"],w7e=["src"],_7e={style:{display:"flex","flex-direction":"row","justify-content":"space-between","align-items":"center",margin:"0 1.6em"}},S7e={style:{"font-size":"1rem"}},T7e=xe({__name:"sounds",setup(r){const e=W([]);async function t(){const s=/\.wav|\.mp3|\.acc$/i,o=(await Ga.getMediaFiles(ke.project.name)).filter(a=>s.test(a.url));e.value.length=0,e.value.push(...i),e.value.push(...o.map(a=>{const l=a.url.split("/").pop();return{url:a.url,name:l,size:a.size}}))}const i=[];function n(s,o){ll(o,{type:"dragFile",soure:null,path:s.url,mime:"audio/*"})}return Et(()=>{ke.addEventListener("assetsChanged",t),t()}),ki(()=>{ke.removeEventListener("assetsChanged",t)}),(s,o)=>(D(),ee("div",b7e,[(D(!0),ee(ct,null,Ut(e.value,a=>(D(),ee("div",{key:a.name,class:"item",draggable:"true",onDragstart:l=>n(a,l)},[J("audio",{controls:"",src:a.url,style:{height:"24px"}},null,8,w7e),J("div",_7e,[J("label",null,$e(a.name),1),J("span",S7e,$e(a.size)+" Bytes",1)])],40,x7e))),128))]))}}),M7e=Gs(T7e,[["__scopeId","data-v-c012bc0f"]]),E7e=["onDragstart"],C7e={style:{"margin-left":"10px"}},A7e=xe({__name:"fonts",setup(r){const e=W([]);async function t(){const n=await Ga.getFonts(ke.project.name);e.value=n.map(s=>{const o=s.split("/").pop();return{url:s,name:o}})}function i(n,s){ll(s,{type:"dragFile",soure:null,path:n.url,mime:"font/*"})}return Et(()=>{ke.addEventListener("assetsChanged",t),t()}),ki(()=>{ke.removeEventListener("assetsChanged",t)}),(n,s)=>{const o=gt("el-icon"),a=gt("el-table-column"),l=gt("el-table");return D(),Ae(l,{data:e.value,"show-header":!1,style:{width:"100%"}},{default:me(()=>[ue(a,{prop:"name",label:"name"},{default:me(c=>[J("div",{class:"font-item",style:{display:"flex","align-items":"center"},draggable:"true",onDragstart:u=>i(c.row,u)},[ue(o,null,{default:me(()=>[ue(y(gU))]),_:1}),J("span",C7e,$e(c.row.name),1)],40,E7e)]),_:1})]),_:1},8,["data"])}}}),N7e=Gs(A7e,[["__scopeId","data-v-d5eae946"]]),R7e=xe({__name:"effectNodes",setup(r){const e=[];for(const[i,n]of Object.entries(Sp)){if(!n.group.startsWith("Effects."))continue;const s=n.group.split(".").pop();e.push({name:i,label:s||i,icon:`ti ti-${n.icon||"brand-javascript"}`})}e.sort((i,n)=>i.label.localeCompare(n.label));function t(i,n){ll(n,{type:"dragNodeClass",soure:null,name:i.name})}return(i,n)=>(D(),Ae(zg,{items:e,onOnItemDragstart:t}))}}),k7e=xe({__name:"effects",setup(r){const e=[];for(const[i,n]of Object.entries(Cg)){if(!n.group||!n.group.startsWith("Effects."))continue;const s=n.group.split(".").pop();e.push({name:i,label:s||i,icon:`icon-${n.icon||"fireworks"}`})}e.sort((i,n)=>i.label.localeCompare(n.label));function t(i,n){ll(n,{type:"dragObjectClass",soure:null,name:i.name})}return(i,n)=>(D(),Ae(zg,{items:e,onOnItemDragstart:t}))}}),L7e=r=>(tv("data-v-df80b488"),r=r(),rv(),r),O7e=["onDragstart"],P7e={style:{"margin-left":"10px"}},I7e=L7e(()=>J("div",{style:{flex:"1 1 auto"}},null,-1)),D7e={style:{"margin-right":"10px","font-size":"1rem",color:"#777"}},U7e=xe({__name:"models",setup(r){const e=W([]);async function t(){const n=await Ga.getModelFiles(ke.project.name);e.value=n.map(s=>{const o=s.url.split("/").pop();return{url:s.url,name:o,size:s.size}})}function i(n,s){ll(s,{type:"dragFile",soure:null,path:n.url,mime:"model/*"})}return Et(()=>{ke.addEventListener("assetsChanged",t),t()}),ki(()=>{ke.removeEventListener("assetsChanged",t)}),(n,s)=>{const o=gt("el-icon"),a=gt("el-table-column"),l=gt("el-table");return D(),Ae(l,{data:e.value,"show-header":!1,style:{width:"100%"}},{default:me(()=>[ue(a,{prop:"name",label:"name"},{default:me(c=>[J("div",{class:"font-item",style:{display:"flex","align-items":"center"},draggable:"true",onDragstart:u=>i(c.row,u)},[ue(o,null,{default:me(()=>[ue(y(gU))]),_:1}),J("span",P7e,$e(c.row.name),1),I7e,J("span",D7e,$e(c.row.size)+" Bytes",1)],40,O7e)]),_:1})]),_:1},8,["data"])}}}),F7e=Gs(U7e,[["__scopeId","data-v-df80b488"]]),B7e=xe({__name:"entities",setup(r){const e=[];for(const[i,n]of Object.entries(Cg)){if(!n.group||!n.group.startsWith("Entities.")&&!n.group.startsWith("Shapes."))continue;const s=n.group.split(".").pop();e.push({name:i,label:s||i,icon:`icon-${n.icon||"texture"}`})}e.sort((i,n)=>i.label.localeCompare(n.label));function t(i,n){ll(n,{type:"dragObjectClass",soure:null,name:i.name})}return(i,n)=>(D(),Ae(zg,{items:e,onOnItemDragstart:t}))}}),z7e=J("div",{class:"picker-label"},[J("i",{class:"icon-cube"}),J("label",{class:"fullname"},"Units")],-1),V7e=J("div",{class:"picker-label"},[J("i",{class:"icon-model3d"}),J("label",{class:"fullname"},"Entities")],-1),G7e=J("div",{class:"picker-label"},[J("i",{class:"icon-fireworks"}),J("label",{class:"shortname"},"F")],-1),j7e=J("div",{class:"picker-label"},[J("i",{class:"icon-fireworks"}),J("label",{class:"fullname"},"Effects")],-1),H7e=J("div",{class:"picker-label"},[J("i",{class:"icon-scene"}),J("label",{class:"fullname"},"Scenes")],-1),W7e=J("div",{class:"picker-label"},[J("i",{class:"icon-brush"}),J("label",{class:"shortname"},"M")],-1),$7e=J("div",{class:"picker-label"},[J("i",{class:"icon-json"}),J("label",{class:"shortname"},"S")],-1),X7e=J("div",{class:"picker-label"},[J("i",{class:"icon-model3d"}),J("label",{class:"shortname"},"O")],-1),q7e=J("div",{class:"picker-label"},[J("i",{class:"icon-font"}),J("label",{class:"shortname"},"F")],-1),K7e=J("div",{class:"picker-label"},[J("i",{class:"icon-image"}),J("label",{class:"shortname"},"I")],-1),Y7e=J("div",{class:"picker-label"},[J("i",{class:"icon-audio"}),J("label",{class:"shortname"},"A")],-1),Z7e=xe({__name:"panels",setup(r){async function e(t){debugger;if(!t.dataTransfer||!t.dataTransfer.files||t.dataTransfer.files.length===0)return;t.stopPropagation();const i=t.dataTransfer.files.length;for(let n=0;n<i;n++){const s=t.dataTransfer.files[n];Ga.uploadFile(s)}}return Et(()=>{const t=document.querySelector(".picker");t.ondrop=e}),(t,i)=>{const n=gt("el-tab-pane"),s=gt("el-tabs");return D(),Ae(s,{class:"picker full-height",type:"border-card",style:{flex:"1 1 auto"}},{default:me(()=>[y(Qt).state.isWorldView?(D(),Ae(n,{key:0},{label:me(()=>[z7e]),default:me(()=>[ue(s7e)]),_:1})):Re("",!0),y(Qt).state.isWorldView?(D(),Ae(n,{key:1},{label:me(()=>[V7e]),default:me(()=>[ue(B7e)]),_:1})):Re("",!0),y(Qt).state.isWorldView?Re("",!0):(D(),Ae(n,{key:2},{label:me(()=>[G7e]),default:me(()=>[ue(R7e)]),_:1})),y(Qt).state.isWorldView?(D(),Ae(n,{key:3},{label:me(()=>[j7e]),default:me(()=>[ue(k7e)]),_:1})):Re("",!0),y(Qt).state.isWorldView?(D(),Ae(n,{key:4},{label:me(()=>[H7e]),default:me(()=>[ue(p7e)]),_:1})):Re("",!0),y(Qt).state.isWorldView?Re("",!0):(D(),Ae(n,{key:5},{label:me(()=>[W7e]),default:me(()=>[ue(n7e)]),_:1})),y(Qt).state.isWorldView?Re("",!0):(D(),Ae(n,{key:6},{label:me(()=>[$7e]),default:me(()=>[ue(i7e)]),_:1})),y(Qt).state.isWorldView?Re("",!0):(D(),Ae(n,{key:7},{label:me(()=>[X7e]),default:me(()=>[ue(F7e)]),_:1})),y(Qt).state.isWorldView?Re("",!0):(D(),Ae(n,{key:8},{label:me(()=>[q7e]),default:me(()=>[ue(N7e)]),_:1})),y(Qt).state.isWorldView?Re("",!0):(D(),Ae(n,{key:9},{label:me(()=>[K7e]),default:me(()=>[ue(y7e)]),_:1})),y(Qt).state.isWorldView?Re("",!0):(D(),Ae(n,{key:10},{label:me(()=>[Y7e]),default:me(()=>[ue(M7e)]),_:1}))]),_:1})}}}),J7e=["disabled"],Q7e={class:"menu-title"},eXe=xe({__name:"menubar",props:{title:{type:String,default:""},disabled:{type:Boolean,default:!1},menus:{type:Array,default:[]}},emits:["select"],setup(r,{emit:e}){function t(i){e("select",i.value)}return(i,n)=>{const s=gt("el-dropdown-item"),o=gt("el-dropdown-menu"),a=gt("el-dropdown");return D(),ee("div",{class:"menubar",disabled:r.disabled},[ue(a,{size:"small",disabled:r.disabled},{dropdown:me(()=>[ue(o,null,{default:me(()=>[(D(!0),ee(ct,null,Ut(r.menus,l=>(D(),Ae(s,{key:l.value,onClick:c=>t(l)},{default:me(()=>[ir($e(l.title),1)]),_:2},1032,["onClick"]))),128))]),_:1})]),default:me(()=>[J("label",Q7e,$e(r.title),1)]),_:1},8,["disabled"])],8,J7e)}}}),GO=Gs(eXe,[["__scopeId","data-v-c032b4f0"]]),tXe=xe({__name:"geo",setup(r){const e=W(!1),t=W([{value:"position",title:"Apply Position [Meta + Shift + p]"},{value:"rotation",title:"Apply Rotation [Meta + Shift + r]"},{value:"scale",title:"Apply Scale [Meta + Shift + s]"}]);function i(c){const u=ke.world.selected,d={position:u.position.clone(),rotation:u.rotation.clone(),scale:u.scale.clone()},h=new St().identity(),p={};c.includes("position")&&(h.multiply(new St().makeTranslation(d.position)),p.position=new oe(0,0,0)),c.includes("rotation")&&(h.multiply(new St().makeRotationFromEuler(d.rotation)),p.rotation=new Xi(0,0,0)),c.includes("scale")&&(h.multiply(new St().makeScale(d.scale.x,d.scale.y,d.scale.z)),p.scale=new oe(1,1,1));const f=h.clone().invert(),m=()=>{u instanceof vs?u.applyGeoMatrix4(h):u.geometry.applyMatrix4(h);for(const[v,x]of Object.entries(p))u[v].copy(x);ke.dispatchEvent({type:"objectModified",soure:null,objects:[u]})},g=()=>{u instanceof vs?u.applyGeoMatrix4(f):u.geometry.applyMatrix4(f);for(const v of Object.keys(p))u[v].copy(d[v]);ke.dispatchEvent({type:"objectModified",soure:null,objects:[u]})};m(),ke.history.push({tip:"Apply transform",undo:g,redo:m})}function n(c){const u=ke.world.selected;!u||!(u instanceof mt)||i([c])}const s=()=>{const c=ke.world.selected;!c||!(c instanceof mt)||i(["position"])},o=()=>{const c=ke.world.selected;!c||!(c instanceof mt)||i(["rotation"])},a=()=>{const c=ke.world.selected;!c||!(c instanceof mt)||i(["scale"])};function l(){ke.world?e.value=ke.world.selected instanceof mt:e.value=!1}return Et(()=>{l(),ke.addEventListener("objectChanged",l),ke.addKeyDownListener("meta+shift+p",s,"Geometry Edit.Apply Position"),ke.addKeyDownListener("meta+shift+r",o,"Geometry Edit.Apply Rotation"),ke.addKeyDownListener("meta+shift+s",a,"Geometry Edit.Apply Scale")}),ki(()=>{ke.removeEventListener("objectChanged",l),ke.removeKeyDownListener("meta+shift+p",s),ke.removeKeyDownListener("meta+shift+r",o),ke.removeKeyDownListener("meta+shift+s",a)}),(c,u)=>(D(),Ae(GO,{disabled:!e.value,title:"Geometry",menus:t.value,onSelect:n},null,8,["disabled","menus"]))}}),rXe=navigator;navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);const e1="ontouchstart"in window||rXe.maxTouchPoints,zn=document.createElement("div"),hn=document.createElement("i"),sT=e1?45:30,oT=e1?90:60;class iXe{constructor(e){vt(this,"elementClick",null);vt(this,"elementDragging",null);vt(this,"elementOver",null);vt(this,"dataTransfer",null);vt(this,"isMoved",!1);this.dom=e,zn.isConnected||(zn.style.display="none",zn.style.position="absolute",zn.style.width=`${sT}px`,zn.style.height=`${sT}px`,zn.style.marginLeft=`-${sT/2}px`,zn.style.marginTop=`-${sT/2}px`,zn.style.borderRadius="50%",zn.style.backgroundColor="#888",zn.style.zIndex="9999",zn.style.pointerEvents="none",document.body.appendChild(zn),hn.style.display="none",hn.style.position="absolute",hn.style.width=`${oT}px`,hn.style.height=`${oT}px`,hn.style.borderRadius="50%",hn.style.color="#fff",hn.style.fontSize=`${oT*2/3}px`,hn.style.backgroundColor="#F56C6C",hn.style.lineHeight=`${oT}px`,hn.style.textAlign="center",hn.style.zIndex="9998",hn.classList.toggle("trash"),hn.classList.toggle("icon-trash"),hn.ondrop=s=>{s.dataTransfer&&s.dataTransfer.setData("selfRemove","true")},document.body.appendChild(hn));const t=s=>{const o=document.elementFromPoint(s.clientX,s.clientY);if(this.elementClick=o,!(!o||o.getAttribute("draggable")!=="true"))return this.dataTransfer=null,this.elementDragging=o,this.isMoved=!1,e1||(e.addEventListener("pointerup",n),e.addEventListener("pointermove",i),e.setPointerCapture(s.pointerId)),s.preventDefault&&(s.preventDefault(),s.stopPropagation()),this.showCursor(s.clientX,s.clientY),!0};e1?(e.addEventListener("touchstart",s=>{t({clientX:s.pageX,clientY:s.pageY})&&(s.preventDefault(),s.stopPropagation())}),e.ontouchmove=s=>{i({clientX:s.pageX,clientY:s.pageY})&&(s.preventDefault(),s.stopPropagation())},e.ontouchend=s=>{n({clientX:s.pageX,clientY:s.pageY})&&(s.preventDefault(),s.stopPropagation())}):e.addEventListener("pointerdown",t);const i=s=>{if(!this.elementDragging)return;if(!this.isMoved){this.isMoved=!0,this.elementDragging.getAttribute("showTrash")&&this.showTrash(),this.dataTransfer=new DataTransfer;const l=new DragEvent("dragstart",{clientX:s.clientX,clientY:s.clientY,dataTransfer:this.dataTransfer});this.elementDragging.dispatchEvent(l)}const o=document.elementFromPoint(s.clientX,s.clientY);if(!o)return!0;if(o!==this.elementOver){if(this.elementOver){this.elementOver.setAttribute("isdragover","false");const l=new DragEvent("dragleave",{clientX:s.clientX,clientY:s.clientY,dataTransfer:this.dataTransfer});this.elementOver.dispatchEvent(l)}this.elementOver=o,this.elementOver.setAttribute("isdragover","true")}this.moveCursor(s.clientX,s.clientY);const a=new DragEvent("dragover",{clientX:s.clientX,clientY:s.clientY,dataTransfer:this.dataTransfer});return o==null||o.dispatchEvent(a),!0},n=s=>{const o=document.elementFromPoint(s.clientX,s.clientY);if(this.hideCursor(),!!this.elementDragging){if(!o)return this.isMoved=!1,this.elementDragging.dispatchEvent(new DragEvent("dragend",{clientX:s.clientX,clientY:s.clientY,dataTransfer:this.dataTransfer})),this.elementDragging=null,!0;if(this.isMoved&&o!==this.elementDragging){const a=new DragEvent("drop",{clientX:s.clientX,clientY:s.clientY,dataTransfer:this.dataTransfer});o.dispatchEvent(a)}else o.dispatchEvent(new Event("click"));return this.elementDragging.dispatchEvent(new DragEvent("dragend",{clientX:s.clientX,clientY:s.clientY,dataTransfer:this.dataTransfer})),this.elementDragging=null,this.elementOver&&(this.elementOver.removeAttribute("isdragover"),this.elementOver=null),e1||(e.removeEventListener("pointermove",i),e.removeEventListener("pointerup",n)),!0}}}showCursor(e,t){zn.style.display="block",zn.style.left=`${e}px`,zn.style.top=`${t}px`;const i=e<window.innerWidth/2?e+240:e-240;hn.style.left=`${i}px`,hn.style.top=`${t-hn.clientHeight/2}px`}showTrash(){hn.style.display="block"}moveCursor(e,t){zn.style.left=`${e}px`,zn.style.top=`${t}px`}hideCursor(){zn.style.display="none",hn.style.display="none"}}const nXe=xe({__name:"align",setup(r){const e=W(!1),t=W([{value:"toFloor",title:"Align to parent [Meta + Shift + f]"},{value:"toX0",title:"Align to X axis [Meta + Shift + x]"},{value:"toY0",title:"Align to Y axis [Meta + Shift + y]"},{value:"toZ0",title:"Align to Z axis"},{value:"toWorldCenter",title:"Move to world center [Meta + Shift + c]"}]);function i(c){const u=ke.world.selected;if(!u||!(u instanceof mt))return;const d=u.position.clone(),h=new oe;if(c==="toFloor"){h.copy(d);const m=new On().setFromObject(u,!1);h.y-=m.min.y}else c==="toX0"?(h.copy(d),h.x=0):c==="toY0"?(h.copy(d),h.y=0):c==="toZ0"&&(h.copy(d),h.z=0);const p=()=>{u.position.copy(h),ke.dispatchEvent({type:"objectModified",soure:null,objects:[u]})},f=()=>{u.position.copy(d),ke.dispatchEvent({type:"objectModified",soure:null,objects:[u]})};p(),ke.history.push({tip:"Align position",undo:f,redo:p})}const n=i.bind(void 0,"toFloor"),s=i.bind(void 0,"toWorldCenter"),o=i.bind(void 0,"toX0"),a=i.bind(void 0,"toY0");function l(){var c;e.value=!!((c=ke.world)!=null&&c.selected)}return Et(()=>{l(),ke.addEventListener("objectChanged",l),ke.addKeyDownListener("meta+shift+f",n,"Object Align.Align to base line of parent"),ke.addKeyDownListener("meta+shift+x",o,"Object Align.Align to X axis"),ke.addKeyDownListener("meta+shift+y",a,"Object Align.Align to Y axis"),ke.addKeyDownListener("meta+shift+c",s,"Object Align.Move to center of the world")}),ki(()=>{ke.removeEventListener("objectChanged",l),ke.removeKeyDownListener("meta+shift+f",n),ke.removeKeyDownListener("meta+shift+c",s),ke.removeKeyDownListener("meta+shift+x",o),ke.removeKeyDownListener("meta+shift+y",a)}),(c,u)=>(D(),Ae(GO,{disabled:!e.value,title:"Object Align",menus:t.value,onSelect:i},null,8,["disabled","menus"]))}}),sXe=xe({__name:"animation",setup(r){const e=W(!1),t=W([]);function i(s){const o=ke.world.selected;if(!o||!(o instanceof dO))return;const a=o.actions[s];a&&(a.isPending?o.stop(s):o.act(s))}function n(){if(t.value=[],!ke.world)e.value=!1;else{const s=ke.world.selected;if(e.value=s instanceof dO,e.value)for(const o of Object.keys(s.actions))t.value.push({title:`Start/Stop ${o}`,value:o})}}return Et(()=>{n(),ke.addEventListener("objectChanged",n)}),ki(()=>{ke.removeEventListener("objectChanged",n)}),(s,o)=>(D(),Ae(GO,{disabled:!e.value,title:"Animations",menus:t.value,onSelect:i},null,8,["disabled","menus"]))}}),oXe=r=>(tv("data-v-1b7e73f1"),r=r(),rv(),r),aXe={class:"container"},lXe={class:"body-panels"},cXe={class:"hd-row"},uXe=oXe(()=>J("div",{style:{flex:"1 1 auto"}},null,-1)),dXe={style:{"align-items":"center",display:"flex","flex-direction":"row","justify-content":"center",margin:"0 4px"}},hXe={class:"ctrl-bar rightside"},pXe={class:"hd-row"},fXe=xe({__name:"index",setup(r){const e=W(ke.project.scene.name),t=W(ke.project.scenes.map(f=>f.name)),i=W("Perspective"),n=W(["Perspective","Orthographic"]),s=W(!0);Ve(e,()=>{Qt.state.isWorldView=!0,ke.project.setScene(e.value),c()}),Ve(i,()=>{if(!ke.world)return;const f=[ke.world.cameraPersp,ke.world.cameraOrtho,...ke.project.cameras].find(m=>m.name===i.value);f&&ke.world.setCamera(f)});function o(){ke.project.newScene(),e.value=ke.project.scene.name,t.value=ke.project.scenes.map(f=>f.name),Qt.state.isWorldView=!0,a()}function a(){l(),c(),s.value=!0}function l(){e.value=ke.project.scene.name,t.value=ke.project.scenes.map(f=>f.name)}function c(){i.value="Perspective",n.value=["Perspective","Orthographic",...ke.project.cameras.map(f=>f.name)],ke.world&&ke.world.setCamera(ke.world.cameraPersp)}function u(){ke.world.reposCamera()}function d(){var f;s.value=!((f=ke.world)!=null&&f.selected)}function h({objects:f}){for(const m of f)m.uuid===ke.project.scene.uuid?l():m.isCamera&&c()}function p(){var f;(f=ke.world)!=null&&f.selected&&(Qt.state.isWorldView=!Qt.state.isWorldView,Qt.state.isWorldView||ke.editor.setObject(ke.world.selected))}return Et(()=>{ke.dragable||(ke.dragable=new iXe(document.body)),ke.addEventListener("projectLoaded",a),ke.addEventListener("sceneChanged",a),ke.addEventListener("treeModified",c),ke.addEventListener("objectModified",h),ke.addEventListener("objectChanged",d),ke.addKeyDownListener("meta+e",p,"Global.Switch View Mode")}),ki(()=>{ke.removeEventListener("projectLoaded",a),ke.removeEventListener("sceneChanged",a),ke.removeEventListener("treeModified",c),ke.removeEventListener("objectModified",h),ke.removeEventListener("objectChanged",d),ke.removeKeyDownListener("e",p)}),(f,m)=>{const g=gt("el-option"),v=gt("el-select"),x=gt("el-switch"),b=Yp("loading");return It((D(),ee("div",aXe,[ue(_He),J("div",lXe,[ue(Iq,{class:"frame main",icon:"icon-vec3",floating:y(Qt).state.isFloating},{header:me(()=>[J("div",cXe,[ue(nXe),ue(tXe),ue(sXe),uXe,ue(v,{modelValue:i.value,"onUpdate:modelValue":m[0]||(m[0]=w=>i.value=w),placeholder:"Select",size:"small"},{default:me(()=>[(D(!0),ee(ct,null,Ut(n.value,w=>(D(),Ae(g,{key:w,label:w,value:w},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),J("i",{class:"icon-video-camera",style:{"margin-left":"0.5em","margin-right":"0.5em"},onClick:u}),J("div",dXe,[ue(x,{modelValue:y(Qt).state.isWorldView,"onUpdate:modelValue":m[1]||(m[1]=w=>y(Qt).state.isWorldView=w),size:"large",width:"60","inline-prompt":"","active-action-icon":y(jae),"inactive-action-icon":y(qce),style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff9900"},disabled:s.value},null,8,["modelValue","active-action-icon","inactive-action-icon","disabled"])])])]),default:me(()=>[ue(U$e)]),_:1},8,["floating"]),J("div",hXe,[ue(Iq,{class:"objtree frame",icon:"icon-logic"},{header:me(()=>[J("div",pXe,[ue(v,{modelValue:e.value,"onUpdate:modelValue":m[2]||(m[2]=w=>e.value=w),placeholder:"Select",size:"small"},{default:me(()=>[(D(!0),ee(ct,null,Ut(t.value,w=>(D(),Ae(g,{key:w,label:w,value:w},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),J("i",{class:"icon-add",style:{"margin-left":"0.5em","margin-right":"0.5em"},onClick:o})])]),default:me(()=>[ue(Z$e)]),_:1}),ue(Z7e,{class:"frame",style:{"border-radius":"6px",overflow:"hidden"}})])])])),[[b,y(Qt).state.isLoading]])}}}),mXe=Gs(fXe,[["__scopeId","data-v-1b7e73f1"]]),gXe=[{path:"/",redirect:"/index"},{path:"/index",component:mXe}];window.setImmediate||(window.setImmediate=window.setTimeout),window.$||(window.$=(r,e)=>e.querySelector(r)),document.title="MASLIB";const Fp=JI({render:()=>(D(),Ae(gt("router-view")))});window.__app=Fp,window.__store=Qt,Fp.use(Qt);const vXe="/",yXe=yJ(vXe),jO=rQ({history:yXe,routes:gXe});Fp.use(jO),Fp.use(cke);async function bXe(){await RX.beforeLaunch(Fp,Qt,jO);const r=Fp.mount("#app");window.__vue=r,r.$nextTick(()=>{RX.onLaunched(Fp,Qt,jO)})}bXe()})()});export default EXe();
